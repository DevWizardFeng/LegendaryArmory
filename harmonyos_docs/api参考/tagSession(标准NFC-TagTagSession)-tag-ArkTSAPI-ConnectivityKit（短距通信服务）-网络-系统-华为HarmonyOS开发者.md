<h1 _ngcontent-eja-c119="" class="doc-title ng-star-inserted" title="tagSession (标准NFC-Tag TagSession)"> tagSession (标准NFC-Tag TagSession) </h1>

<div _ngcontent-eja-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块是对NFC TagSession的使用说明。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>本模块首批接口从API version 7开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>  </div></div></div> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"> <p>导入tag模块编辑器报错，在某个具体设备型号上能力可能超出工程默认设备定义的能力集范围，如需要使用此部分能力需额外配置自定义syscap，参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/syscap#syscap开发指导" target="_blank">syscap开发指南</a>。</p>  </div></div></div>  <div class="tiledSection"><h2 id="导入模块" device-type="phone,wearable"><strong>导入模块</strong><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="tagsession" device-type="phone,wearable">TagSession<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="tagsession" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>TagSession是所有<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-nfctech">nfcTag技术类型</a>的基类， 提供建立连接和发送数据等共同接口。</p> <p>需要通过其子类来访问以下接口。在下面的示例中 统一用 getXXX()表示获取子类实例的方法。</p> <p>具体使用时,请根据实际采用的nfcTag技术，选择对应的方法，具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-nfctag">nfcTag</a>文档。</p> </div>  <div class="tiledSection"><h3 id="gettaginfodeprecated" device-type="phone,wearable" class="firsth2">getTagInfo<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gettaginfodeprecated" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getTagInfo(): tag.TagInfo</p> <p>获取该Tag被分发时，NFC服务所提供的Tag数据对象。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从 API version 7 开始支持，从 API version 9 开始废弃，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-nfctag#taggettaginfo9">tag.getTagInfo</a>替代。</p>  </div></div></div> <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">tag.TagInfo</td> <td class="cellrowborder" width="50%">NFC服务所提供的Tag数据对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">let</span> tagInfo : <span class="hljs-title class_">TagInfo</span> = tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">getTagInfo</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"tag tagInfo: "</span> + tagInfo);</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="connecttagdeprecated" device-type="phone,wearable">connectTag<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="connecttagdeprecated" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>connectTag(): boolean;</p> <p>和标签建立连接。在从标签读取数据或将数据写入标签之前，必须调用此方法。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从 API version 7 开始支持，从 API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-tagsession#connect9">tagSession.connect</a>替代。</p>  </div></div></div> <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">连接建立成功返回true，失败返回false。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">let</span> connectStatus : boolean = tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">connectTag</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"connectStatus: "</span> + connectStatus);</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="connect9" device-type="phone,wearable">connect<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="connect9" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>connect(): void;</p> <p>和标签建立连接。在从标签读取数据或将数据写入标签之前，必须调用此方法。</p> <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission denied.</td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3100201</td> <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">connect</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"tag connect success"</span>);</li><li>} <span class="hljs-keyword">catch</span> (businessError) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tag connect businessError: "</span> + businessError);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="resetdeprecated" device-type="phone,wearable">reset()<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resetdeprecated" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>reset(): void</p> <p>重置与标签的连接。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从 API version 7 开始支持，从 API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-tagsession#resetconnection9">tagSession.resetConnection</a>替代。</p>  </div></div></div> <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li>tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">reset</span>();</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="resetconnection9" device-type="phone,wearable">resetConnection()<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resetconnection9" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>resetConnection(): void</p> <p>重置与标签的连接。</p> <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission denied.</td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3100201</td> <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">resetConnection</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"tag resetConnection success"</span>);</li><li>} <span class="hljs-keyword">catch</span> (businessError) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tag resetConnection businessError: "</span> + businessError);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="istagconnecteddeprecated" device-type="phone,wearable">isTagConnected<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="istagconnecteddeprecated" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>isTagConnected(): boolean</p> <p>检查是否已与标签建立连接。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从 API version 7 开始支持，从 API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-tagsession#isconnected9">tagSession.isConnected</a>替代。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">已建立连接返回 true，未建立连接返回false。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">let</span> isTagConnected = tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">isTagConnected</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"isTagConnected: "</span> + isTagConnected);</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="isconnected9" device-type="phone,wearable">isConnected<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isconnected9" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>isConnected(): boolean</p> <p>检查是否已与标签建立连接。如果返回未连接，则需要先调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-tagsession#connect9">tagSession.connect</a>建立连接。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">已建立连接返回 true，未建立连接返回false。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> isConnected = tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">isConnected</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"tag isConnected = "</span> + isConnected);</li><li>} <span class="hljs-keyword">catch</span> (businessError) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tag isConnected businessError: "</span> + businessError);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="getmaxsendlengthdeprecated" device-type="phone,wearable">getMaxSendLength<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getmaxsendlengthdeprecated" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getMaxSendLength(): number</p> <p>查询可以发送到标签的最大数据长度。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从 API version 7 开始支持，从 API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-tagsession#getmaxtransmitsize9">tagSession.getMaxTransmitSize</a>替代。</p>  </div></div></div> <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">number</td> <td class="cellrowborder" width="50%">可以发送到标签的最大数据长度，非负数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">let</span> maxSendLen = tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">getMaxSendLength</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"tag maxSendLen: "</span> + maxSendLen);</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="getmaxtransmitsize9" device-type="phone,wearable">getMaxTransmitSize<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getmaxtransmitsize9" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getMaxTransmitSize(): number</p> <p>查询可以发送到标签的最大数据长度。</p> <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">number</td> <td class="cellrowborder" width="50%">可以发送到标签的最大数据长度，非负数。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission denied.</td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3100201</td> <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> maxTransmitSize = tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">getMaxTransmitSize</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"tag maxTransmitSize = "</span> + maxTransmitSize);</li><li>} <span class="hljs-keyword">catch</span> (businessError) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tag getMaxTransmitSize businessError: "</span> + businessError);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="getsenddatatimeoutdeprecated" device-type="phone,wearable">getSendDataTimeout<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getsenddatatimeoutdeprecated" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getSendDataTimeout(): number</p> <p>查询发送数据到Tag的等待超时时间，单位是毫秒。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从 API version 7 开始支持，从 API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-tagsession#gettimeout9">tagSession.getTimeout</a>替代。</p>  </div></div></div> <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">number</td> <td class="cellrowborder" width="50%">发送数据到Tag的等待超时时间，单位是毫秒，非负数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">let</span> sendDataTimeout = tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">getSendDataTimeout</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"tag sendDataTimeout: "</span> + sendDataTimeout);</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="gettimeout9" device-type="phone,wearable">getTimeout<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gettimeout9" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getTimeout(): number</p> <p>查询发送数据到Tag的等待超时时间，单位是毫秒。</p> <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">number</td> <td class="cellrowborder" width="50%">发送数据到Tag的等待超时时间，单位是毫秒，非负数。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission denied.</td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3100201</td> <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> timeout = tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">getTimeout</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"tag timeout = "</span> + timeout);</li><li>} <span class="hljs-keyword">catch</span> (businessError) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tag getTimeout businessError: "</span> + businessError);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="setsenddatatimeoutdeprecated" device-type="phone,wearable">setSendDataTimeout<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setsenddatatimeoutdeprecated" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>setSendDataTimeout(timeout: number): boolean</p> <p>设置发送数据到Tag的等待超时时间，单位是毫秒。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从 API version 7 开始支持，从 API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-tagsession#settimeout9">tagSession.setTimeout</a>替代。</p>  </div></div></div> <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">timeout</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">超时时间，单位毫秒，非负值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">设置超时时间成功返回true，设置失败返回false。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">let</span> timeoutMs = <span class="hljs-number">700</span>;  <span class="hljs-comment">// 修改为预期的超时时间</span></li><li><span class="hljs-keyword">let</span> setStatus = tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">setSendDataTimeout</span>(timeoutMs);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"tag setSendDataTimeout setStatus: "</span> + setStatus);</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="settimeout9" device-type="phone,wearable">setTimeout<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="settimeout9" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>setTimeout(timeout: number): void</p> <p>设置发送数据到Tag的等待超时时间，单位是毫秒。</p> <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">timeout</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">超时时间，单位毫秒，非负值。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission denied.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%"><p>The parameter check failed. Possible causes: </p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameters types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3100201</td> <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">let</span> timeoutMs = <span class="hljs-number">700</span>;  <span class="hljs-comment">// 修改为预期的超时时间</span></li><li><span class="hljs-keyword">try</span> {</li><li>    tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-built_in">setTimeout</span>(timeoutMs);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"tag setTimeout success"</span>);</li><li>} <span class="hljs-keyword">catch</span> (businessError) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tag setTimeout businessError: "</span> + businessError);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="senddatadeprecated" device-type="phone,wearable">sendData<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="senddatadeprecated" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>sendData(data: number[]): Promise&lt;number[]&gt;</p> <p>发送指令到Tag上。使用Promise异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从 API version 7 开始支持，从 API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-tagsession#transmit9">tagSession.transmit</a>替代。</p>  </div></div></div> <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">data</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要发送的指令。每个number十六进制表示，范围是0x00~0xFF。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;number[]&gt;</td> <td class="cellrowborder" width="50%">Promise对象，返回对端Tag对指令的响应数据，每个number十六进制表示，范围是0x00~0xFF。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> tag <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.base'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">tagSessionDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接，请先连接tag</span></li><li>    <span class="hljs-keyword">if</span> (!tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tagSession connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> cmdData = [<span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>]; <span class="hljs-comment">// 更改为正确的 data</span></li><li>    tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">sendData</span>(cmdData).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"tagSession sendData Promise response: "</span> + response);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tagSession sendData Promise err: "</span> + err);</li><li>    });</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="senddatadeprecated-1" device-type="phone,wearable">sendData<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="senddatadeprecated-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>sendData(data: number[], callback: AsyncCallback&lt;number[]&gt;): void</p> <p>发送指令到Tag上。使用callback异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从 API version 7 开始支持，从 API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-tagsession#transmit9-1">tagSession.transmit</a>替代。</p>  </div></div></div> <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">data</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要发送的指令。每个number十六进制表示，范围是0x00~0xFF。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;number[]&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回响应数据。每个number十六进制表示，范围是0x00~0xFF。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">tagSessionDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接，请先连接tag</span></li><li>    <span class="hljs-keyword">if</span> (!tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tagSession connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> cmdData = [<span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>]; <span class="hljs-comment">// 更改为正确的 data</span></li><li>    tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">sendData</span>(cmdData, <span class="hljs-function">(<span class="hljs-params">err, response</span>)=&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tagSession sendData AsyncCallback err: "</span> + err);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"tagSession sendData AsyncCallback response: "</span> + response);</li><li>        }</li><li>    });</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="transmit9" device-type="phone,wearable">transmit<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="transmit9" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>transmit(data: number[]): Promise&lt;number[]&gt;</p> <p>发送指令到Tag上。使用Promise异步回调。</p> <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">data</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要发送的指令。每个number十六进制表示，范围是0x00~0xFF。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;number[]&gt;</td> <td class="cellrowborder" width="50%">Promise对象，返回对端Tag对指令的响应数据，每个number十六进制表示，范围是0x00~0xFF。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.13.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.21.13.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission denied.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%"><p>The parameter check failed. Possible causes: </p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameters types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3100201</td> <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td> </tr> <tr><td class="cellrowborder" width="50%">3100204</td> <td class="cellrowborder" width="50%">The tag I/O operation failed.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">tagSessionDemo</span>(<span class="hljs-params"></span>) {</li><li><span class="hljs-comment">// 如果没有连接，请先连接tag</span></li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">if</span> (!tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">isConnected</span>()) {</li><li>            tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">connect</span>();</li><li>        }</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tag connect businessError: "</span> + businessError);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> cmdData = [<span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>]; <span class="hljs-comment">// 更改为正确的 data</span></li><li>    <span class="hljs-keyword">try</span> {</li><li>    tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">transmit</span>(cmdData).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"tagSession transmit Promise response: "</span> + response);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tagSession transmit Promise err: "</span> + err);</li><li>    });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tag transmit businessError: "</span> + businessError);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="transmit9-1" device-type="phone,wearable">transmit<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="transmit9-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>transmit(data: number[], callback: AsyncCallback&lt;number[]&gt;): void</p> <p>发送指令到Tag上。使用callback异步回调。</p> <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">data</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要发送的指令。每个number十六进制表示，范围是0x00~0xFF。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;number[]&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回响应数据。每个number十六进制表示，范围是0x00~0xFF。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission denied.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%"><p>The parameter check failed. Possible causes: </p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameters types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3100201</td> <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td> </tr> <tr><td class="cellrowborder" width="50%">3100204</td> <td class="cellrowborder" width="50%">The tag I/O operation failed..</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-eja-c106="" class="highlight-div"><div _ngcontent-eja-c106="" class="highlight-div-header"><div _ngcontent-eja-c106="" class="highlight-div-header-left"><div _ngcontent-eja-c106="" class="handle-button expand-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eja-c106="" class="highlight-div-header-right"><div _ngcontent-eja-c106="" class="handle-button ai-button"></div><div _ngcontent-eja-c106="" class="handle-button line-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eja-c106="" class="handle-button theme-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eja-c106="" class="handle-button copy-button"><div _ngcontent-eja-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eja-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，tagInfo是nfc服务在分派标签时给出的对象</span></li><li><span class="hljs-comment">// getXXX，可以是getIsoDep、getNdef、getMifareClassic...</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">tagSessionDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接，请先连接tag</span></li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">if</span> (!tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">isConnected</span>()) {</li><li>            tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">connect</span>();</li><li>        }</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tag connect businessError: "</span> + businessError);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> cmdData = [<span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>]; <span class="hljs-comment">// 更改为正确的 data</span></li><li>    <span class="hljs-keyword">try</span> {</li><li>        tag.<span class="hljs-title function_">getIsoDep</span>(tagInfo).<span class="hljs-title function_">transmit</span>(cmdData, <span class="hljs-function">(<span class="hljs-params">err, response</span>)=&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tagSession transmit AsyncCallback err: "</span> + err);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"tagSession transmit AsyncCallback response: "</span> + response);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"tag transmit businessError: "</span> + businessError);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>