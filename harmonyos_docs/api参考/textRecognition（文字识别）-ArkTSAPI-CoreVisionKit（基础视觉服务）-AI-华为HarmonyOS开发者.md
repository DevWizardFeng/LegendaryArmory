<h1 _ngcontent-bhk-c119="" class="doc-title ng-star-inserted" title="textRecognition（文字识别）"> textRecognition（文字识别） </h1>

<div _ngcontent-bhk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>通用文字识别服务提供图像信息转换为字符信息的能力。通过拍照、扫描等光学输入方式，把各种票据、卡证、表格、报刊、书籍等印刷品文字转化为图像信息，再利用文字识别技术将图像信息转化为计算机等设备可以使用的字符信息，便于用户提取字符内容、屏幕坐标及外框。目前本服务支持识别的语言有：简体中文、英文、日文、韩文、繁体中文五种语言。</p>    <p><strong>起始版本：</strong>4.0.0(10)</p>    <div class="tiledSection">     <h2 id="section16609101116259" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16609101116259" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-bhk-c106="" class="highlight-div"><div _ngcontent-bhk-c106="" class="highlight-div-header"><div _ngcontent-bhk-c106="" class="highlight-div-header-left"><div _ngcontent-bhk-c106="" class="handle-button expand-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bhk-c106="" class="highlight-div-header-right"><div _ngcontent-bhk-c106="" class="handle-button ai-button"></div><div _ngcontent-bhk-c106="" class="handle-button line-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bhk-c106="" class="handle-button theme-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bhk-c106="" class="handle-button copy-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textRecognition } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreVisionKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1081123302517" device-type="phone,2in1,tablet">TextRecognitionConfiguration<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1081123302517" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>通用文本识别的配置项，用于配置是否支持朝向检测。</p>     <p>系统能力：SystemCapability.AI.OCR.TextRecognition</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.1" width="19.580000000000002%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.2" width="20.419999999999998%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.3" width="20%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.4" width="20%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.5" width="20%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.580000000000002%">          <p>isDirectionDetectionSupported</p></td>         <td class="cellrowborder" width="20.419999999999998%">          <p>boolean</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>表示是否支持文字朝向检测。</p>          <p>true：表示支持朝向检测；false：表示不支持朝向检测。</p>          <p>默认是true，支持朝向检测。如果能判断当前图片是正向的，则可考虑将该属性设置为false，以提升性能。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section674171818172" device-type="phone,2in1,tablet">VisionInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section674171818172" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>待识别的视觉信息，目前仅支持颜色数据格式为RGBA_8888的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">PixelMap</a>类型的视觉信息。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.OCR.TextRecognition</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.1" width="20%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.2" width="20%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.3" width="20%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.4" width="20%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.5" width="20%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>pixelMap</p></td>         <td class="cellrowborder" width="20%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">image.PixelMap</a></p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>待识别的图片。</p>          <p>具体规格请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/core-vision-introduction#section625292610522" target="_blank">约束与限制</a>。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section3420112419175" device-type="phone,2in1,tablet">PixelPoint<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3420112419175" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>指示像素点的位置。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.OCR.TextRecognition</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.1" width="20%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.2" width="20%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.3" width="20%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.4" width="20%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.5" width="20%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>x</p></td>         <td class="cellrowborder" width="20%">          <p>number</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>像素点横向x坐标。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>y</p></td>         <td class="cellrowborder" width="20%">          <p>number</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>像素点纵向y坐标。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section102702025111712" device-type="phone,2in1,tablet">TextWord<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section102702025111712" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>描述一个单词的信息，包括内容，以及外框的坐标。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.OCR.TextRecognition</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.1" width="20%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.2" width="20%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.3" width="20%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.4" width="20%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.5" width="20%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>value</p></td>         <td class="cellrowborder" width="20%">          <p>string</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>单词的文本内容。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>cornerPoints</p></td>         <td class="cellrowborder" width="20%">          <p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/core-vision-text-recognition-api#section3420112419175">PixelPoint</a>&gt;</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>以顺时针返回的单词外框位置点列表。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section12801726161718" device-type="phone,2in1,tablet">TextLine<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12801726161718" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>描述图像中的一行文本。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.OCR.TextRecognition</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.1" width="20%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.2" width="20%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.3" width="20%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.4" width="20%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.5" width="20%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>value</p></td>         <td class="cellrowborder" width="20%">          <p>string</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>文本行的文本内容。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>cornerPoints</p></td>         <td class="cellrowborder" width="20%">          <p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/core-vision-text-recognition-api#section3420112419175">PixelPoint</a>&gt;</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>以顺时针返回该文本行的外框位置点列表。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>words</p></td>         <td class="cellrowborder" width="20%">          <p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/core-vision-text-recognition-api#section102702025111712">TextWord</a>&gt;</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>该行包含的单词信息。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1889182651713" device-type="phone,2in1,tablet">TextBlock<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1889182651713" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>描述图像中的文本块。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.OCR.TextRecognition</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.1" width="20%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.2" width="20%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.3" width="20%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.4" width="20%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.5" width="20%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>value</p></td>         <td class="cellrowborder" width="20%">          <p>string</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>段落的文本内容。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>lines</p></td>         <td class="cellrowborder" width="20%">          <p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/core-vision-text-recognition-api#section12801726161718">TextLine</a>&gt;</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>该段落包含的文本行内容。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section17548123419204" device-type="phone,2in1,tablet">TextRecognitionResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17548123419204" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>文本识别的结果信息，包括文本内容和坐标信息。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.OCR.TextRecognition</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.1" width="20%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.2" width="20%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.3" width="20%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.4" width="20%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.5" width="20%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>value</p></td>         <td class="cellrowborder" width="20%">          <p>string</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>所识别的文本内容。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>blocks</p></td>         <td class="cellrowborder" width="20%">          <p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/core-vision-text-recognition-api#section1889182651713">TextBlock</a>&gt;</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>文本内容中的具体段落信息。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section129681142578" device-type="phone,2in1,tablet">textRecognition.init<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section129681142578" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>init(): Promise&lt;boolean&gt;</p>     <p>初始化文字识别服务。使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.OCR.TextRecognition</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="38.440000000000005%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="61.56%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="38.440000000000005%">          <p>Promise&lt;boolean&gt;</p></td>         <td class="cellrowborder" width="61.56%">          <p>Promise对象，返回初始化是否成功。</p>          <p>true：初始化成功；false：初始化失败。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bhk-c106="" class="highlight-div"><div _ngcontent-bhk-c106="" class="highlight-div-header"><div _ngcontent-bhk-c106="" class="highlight-div-header-left"><div _ngcontent-bhk-c106="" class="handle-button expand-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bhk-c106="" class="highlight-div-header-right"><div _ngcontent-bhk-c106="" class="handle-button ai-button"></div><div _ngcontent-bhk-c106="" class="handle-button line-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bhk-c106="" class="handle-button theme-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bhk-c106="" class="handle-button copy-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textRecognition } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreVisionKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">initAndReleaseOCR</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 初始化 OCR 服务</span></li><li>  <span class="hljs-keyword">const</span> initResult = <span class="hljs-keyword">await</span> textRecognition.<span class="hljs-title function_">init</span>();</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'textRecognitionSample'</span>, <span class="hljs-string">`OCR service initialization result:<span class="hljs-subst">${initResult}</span>`</span>);</li><li>
</li><li>  <span class="hljs-keyword">if</span> (initResult) {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'textRecognitionSample'</span>, <span class="hljs-string">'OCR service initialized successfully'</span>);</li><li>
</li><li>    <span class="hljs-comment">// 这里可以添加使用 OCR 服务的代码</span></li><li>    <span class="hljs-comment">// 例如: await textRecognition.recognizeText(...);</span></li><li>
</li><li>    <span class="hljs-comment">// 使用完毕后，释放 OCR 服务</span></li><li>    <span class="hljs-keyword">await</span> textRecognition.<span class="hljs-title function_">release</span>();</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'textRecognitionSample'</span>, <span class="hljs-string">'OCR service released successfully'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'textRecognitionSample'</span>, <span class="hljs-string">'Failed to initialize OCR service'</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'initAndReleaseOCR'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 调用函数</span></li><li>        <span class="hljs-title function_">initAndReleaseOCR</span>();</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1079524313716" device-type="phone,2in1,tablet">textRecognition.release<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1079524313716" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>release(): Promise&lt;void&gt;</p>     <p>释放文字识别服务。使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.OCR.TextRecognition</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="38.440000000000005%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="61.56%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="38.440000000000005%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="61.56%">          <p>Promise对象，释放接口无返回值。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bhk-c106="" class="highlight-div"><div _ngcontent-bhk-c106="" class="highlight-div-header"><div _ngcontent-bhk-c106="" class="highlight-div-header-left"><div _ngcontent-bhk-c106="" class="handle-button expand-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bhk-c106="" class="highlight-div-header-right"><div _ngcontent-bhk-c106="" class="handle-button ai-button"></div><div _ngcontent-bhk-c106="" class="handle-button line-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bhk-c106="" class="handle-button theme-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bhk-c106="" class="handle-button copy-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textRecognition } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreVisionKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">initAndReleaseOCR</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 初始化 OCR 服务</span></li><li>  <span class="hljs-keyword">const</span> initResult = <span class="hljs-keyword">await</span> textRecognition.<span class="hljs-title function_">init</span>();</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'textRecognitionSample'</span>, <span class="hljs-string">`OCR service initialization result:<span class="hljs-subst">${initResult}</span>`</span>);</li><li>
</li><li>  <span class="hljs-keyword">if</span> (initResult) {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'textRecognitionSample'</span>, <span class="hljs-string">'OCR service initialized successfully'</span>);</li><li>
</li><li>    <span class="hljs-comment">// 这里可以添加使用 OCR 服务的代码</span></li><li>    <span class="hljs-comment">// 例如: await textRecognition.recognizeText(...);</span></li><li>
</li><li>    <span class="hljs-comment">// 使用完毕后，释放 OCR 服务</span></li><li>    <span class="hljs-keyword">await</span> textRecognition.<span class="hljs-title function_">release</span>();</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'textRecognitionSample'</span>, <span class="hljs-string">'OCR service released successfully'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'textRecognitionSample'</span>, <span class="hljs-string">'Failed to initialize OCR service'</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'initAndReleaseOCR'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 调用函数</span></li><li>        <span class="hljs-title function_">initAndReleaseOCR</span>();</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section144826162913" device-type="phone,2in1,tablet">textRecognition.recognizeText<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section144826162913" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>recognizeText(visionInfo: VisionInfo, callback: AsyncCallback&lt;TextRecognitionResult&gt;): void</p>     <p>识别视觉信息内包含的文本。使用Callback异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.OCR.TextRecognition</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>visionInfo</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/core-vision-text-recognition-api#section674171818172">VisionInfo</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>待识别的视觉信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#asynccallback" target="_blank">AsyncCallback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/core-vision-text-recognition-api#section17548123419204">TextRecognitionResult</a>&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，返回文字识别的对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/core-vision-error-code">Core Vision Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>200</p></td>         <td class="cellrowborder" width="50%">          <p>Run timed out, please try again later.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001400001</p></td>         <td class="cellrowborder" width="50%">          <p>Failed to run, please try again.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001400002</p></td>         <td class="cellrowborder" width="50%">          <p>The service is abnormal.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bhk-c106="" class="highlight-div"><div _ngcontent-bhk-c106="" class="highlight-div-header"><div _ngcontent-bhk-c106="" class="highlight-div-header-left"><div _ngcontent-bhk-c106="" class="handle-button expand-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bhk-c106="" class="highlight-div-header-right"><div _ngcontent-bhk-c106="" class="handle-button ai-button"></div><div _ngcontent-bhk-c106="" class="handle-button line-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bhk-c106="" class="handle-button theme-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bhk-c106="" class="handle-button copy-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textRecognition } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreVisionKit'</span></li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">imageSource</span>: image.<span class="hljs-property">ImageSource</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">chooseImage</span>: <span class="hljs-title class_">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-comment">// 将图片转换为PixelMap，可以通过图库获取</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">photoPicker</span>: photoAccessHelper.<span class="hljs-property">PhotoViewPicker</span> = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoViewPicker</span>();</li><li>photoPicker.<span class="hljs-title function_">select</span>({</li><li>  <span class="hljs-title class_">MIMEType</span>: photoAccessHelper.<span class="hljs-property">PhotoViewMIMETypes</span>.<span class="hljs-property">IMAGE_TYPE</span>, <span class="hljs-attr">maxSelectNumber</span>: <span class="hljs-number">1</span></li><li>}).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: photoAccessHelper.PhotoSelectResult</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> uri = res.<span class="hljs-property">photoUris</span>[<span class="hljs-number">0</span>];</li><li>  <span class="hljs-keyword">if</span> (uri === <span class="hljs-literal">undefined</span>) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">'Failed to get uri.'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-keyword">let</span> fileSource = <span class="hljs-keyword">await</span> fileIo.<span class="hljs-title function_">open</span>(uri, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>);</li><li>    imageSource = image.<span class="hljs-title function_">createImageSource</span>(fileSource.<span class="hljs-property">fd</span>);</li><li>    chooseImage = <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">createPixelMap</span>();</li><li>    <span class="hljs-keyword">if</span> (!chooseImage) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>
</li><li>    <span class="hljs-comment">// 调用文本识别接口</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">visionInfo</span>: textRecognition.<span class="hljs-property">VisionInfo</span> = {</li><li>      <span class="hljs-attr">pixelMap</span>: chooseImage</li><li>    };</li><li>    textRecognition.<span class="hljs-title function_">recognizeText</span>(visionInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, data: textRecognition.TextRecognitionResult</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">`Failed to recognize text. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-comment">// 识别成功，获取对应的结果</span></li><li>      <span class="hljs-keyword">let</span> recognitionString = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data);</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">`Succeeded in recognizing text: <span class="hljs-subst">${recognitionString}</span>`</span>);</li><li>
</li><li>      <span class="hljs-keyword">if</span>(chooseImage &amp;&amp; imageSource) {</li><li>        chooseImage.<span class="hljs-title function_">release</span>();</li><li>        imageSource.<span class="hljs-title function_">release</span>();</li><li>      }</li><li>    });</li><li>    <span class="hljs-keyword">if</span> (fileSource) {</li><li>      <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">await</span> fileIo.<span class="hljs-title function_">close</span>(fileSource);</li><li>      } <span class="hljs-keyword">catch</span> (err) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">`Failed to close fileSource. Code: <span class="hljs-subst">${err.code}</span>，message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      }</li><li>    }</li><li>  }, <span class="hljs-number">100</span>)</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">`Failed to get photo image uri. Code: <span class="hljs-subst">${err.code}</span>，message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1446761711464" device-type="phone,2in1,tablet">textRecognition.recognizeText<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1446761711464" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>recognizeText(visionInfo: VisionInfo, configuration ?: TextRecognitionConfiguration): Promise&lt;TextRecognitionResult&gt;</p>     <p>识别视觉信息内包含的文本，可以通过自定义配置项进行更详细的设置。使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.OCR.TextRecognition</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>visionInfo</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/core-vision-text-recognition-api#section674171818172">VisionInfo</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>待识别的视觉信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>configuration</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/core-vision-text-recognition-api#section1081123302517">TextRecognitionConfiguration</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>否</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>识别的配置项。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/core-vision-text-recognition-api#section17548123419204">TextRecognitionResult</a>&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回文字识别的结果对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/core-vision-error-code">Core Vision Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>200</p></td>         <td class="cellrowborder" width="50%">          <p>Run timed out, please try again later.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001400001</p></td>         <td class="cellrowborder" width="50%">          <p>Failed to run, please try again.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001400002</p></td>         <td class="cellrowborder" width="50%">          <p>The service is abnormal.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bhk-c106="" class="highlight-div"><div _ngcontent-bhk-c106="" class="highlight-div-header"><div _ngcontent-bhk-c106="" class="highlight-div-header-left"><div _ngcontent-bhk-c106="" class="handle-button expand-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bhk-c106="" class="highlight-div-header-right"><div _ngcontent-bhk-c106="" class="handle-button ai-button"></div><div _ngcontent-bhk-c106="" class="handle-button line-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bhk-c106="" class="handle-button theme-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bhk-c106="" class="handle-button copy-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textRecognition } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreVisionKit'</span></li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">imageSource</span>: image.<span class="hljs-property">ImageSource</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">chooseImage</span>: <span class="hljs-title class_">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-comment">// 将图片转换为PixelMap，可以通过图库获取</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">photoPicker</span>: photoAccessHelper.<span class="hljs-property">PhotoViewPicker</span> = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoViewPicker</span>();</li><li>photoPicker.<span class="hljs-title function_">select</span>({</li><li>  <span class="hljs-title class_">MIMEType</span>: photoAccessHelper.<span class="hljs-property">PhotoViewMIMETypes</span>.<span class="hljs-property">IMAGE_TYPE</span>, <span class="hljs-attr">maxSelectNumber</span>: <span class="hljs-number">1</span></li><li>}).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: photoAccessHelper.PhotoSelectResult</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> uri = res.<span class="hljs-property">photoUris</span>[<span class="hljs-number">0</span>];</li><li>  <span class="hljs-keyword">if</span> (uri === <span class="hljs-literal">undefined</span>) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">'Failed to get uri.'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-keyword">let</span> fileSource = <span class="hljs-keyword">await</span> fileIo.<span class="hljs-title function_">open</span>(uri, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>);</li><li>    imageSource = image.<span class="hljs-title function_">createImageSource</span>(fileSource.<span class="hljs-property">fd</span>);</li><li>    chooseImage = <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">createPixelMap</span>();</li><li>    <span class="hljs-keyword">if</span> (!chooseImage) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>
</li><li>    <span class="hljs-comment">// 调用文本识别接口</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">visionInfo</span>: textRecognition.<span class="hljs-property">VisionInfo</span> = {</li><li>      <span class="hljs-attr">pixelMap</span>: chooseImage</li><li>    };</li><li>    <span class="hljs-keyword">let</span> recognitionResult = <span class="hljs-keyword">await</span> textRecognition.<span class="hljs-title function_">recognizeText</span>(visionInfo);</li><li>
</li><li>    <span class="hljs-comment">// 识别成功，获取对应的结果</span></li><li>    <span class="hljs-keyword">let</span> recognitionString = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(recognitionResult);</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">`Succeeded in recognizing text: <span class="hljs-subst">${recognitionString}</span>`</span>);</li><li>
</li><li>    <span class="hljs-keyword">if</span>(chooseImage &amp;&amp; imageSource) {</li><li>      chooseImage.<span class="hljs-title function_">release</span>();</li><li>      imageSource.<span class="hljs-title function_">release</span>();</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (fileSource) {</li><li>      <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">await</span> fileIo.<span class="hljs-title function_">close</span>(fileSource);</li><li>      } <span class="hljs-keyword">catch</span> (err) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">`Failed to close fileSource. Code: <span class="hljs-subst">${err.code}</span>，message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      }</li><li>    }</li><li>  }, <span class="hljs-number">100</span>)</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">`Failed to get photo image uri. Code: <span class="hljs-subst">${err.code}</span>，message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section138481148499" device-type="phone,2in1,tablet">textRecognition.recognizeText<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section138481148499" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>recognizeText(visionInfo: VisionInfo, configuration: TextRecognitionConfiguration, callback: AsyncCallback&lt;TextRecognitionResult&gt;): void</p>     <p>通过自定义配置项对识别能力进行更详细的设置，识别视觉信息内包含的文本。使用Callback异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.OCR.TextRecognition</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>visionInfo</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/core-vision-text-recognition-api#section674171818172">VisionInfo</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>待识别的视觉信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>configuration</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/core-vision-text-recognition-api#section1081123302517">TextRecognitionConfiguration</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>识别的配置项。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#asynccallback" target="_blank">AsyncCallback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/core-vision-text-recognition-api#section17548123419204">TextRecognitionResult</a>&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>识别结果的回调，可以用于界面显示或交互。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/core-vision-error-code">Core Vision Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>200</p></td>         <td class="cellrowborder" width="50%">          <p>Run timed out, please try again later.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001400001</p></td>         <td class="cellrowborder" width="50%">          <p>Failed to run, please try again.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001400002</p></td>         <td class="cellrowborder" width="50%">          <p>The service is abnormal.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-bhk-c106="" class="highlight-div"><div _ngcontent-bhk-c106="" class="highlight-div-header"><div _ngcontent-bhk-c106="" class="highlight-div-header-left"><div _ngcontent-bhk-c106="" class="handle-button expand-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bhk-c106="" class="highlight-div-header-right"><div _ngcontent-bhk-c106="" class="handle-button ai-button"></div><div _ngcontent-bhk-c106="" class="handle-button line-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bhk-c106="" class="handle-button theme-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bhk-c106="" class="handle-button copy-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textRecognition } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreVisionKit'</span></li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">imageSource</span>: image.<span class="hljs-property">ImageSource</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">chooseImage</span>: <span class="hljs-title class_">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-comment">// 将图片转换为PixelMap，可以通过图库获取</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">photoPicker</span>: photoAccessHelper.<span class="hljs-property">PhotoViewPicker</span> = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoViewPicker</span>();</li><li>photoPicker.<span class="hljs-title function_">select</span>({</li><li>  <span class="hljs-title class_">MIMEType</span>: photoAccessHelper.<span class="hljs-property">PhotoViewMIMETypes</span>.<span class="hljs-property">IMAGE_TYPE</span>, <span class="hljs-attr">maxSelectNumber</span>: <span class="hljs-number">1</span></li><li>}).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: photoAccessHelper.PhotoSelectResult</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> uri = res.<span class="hljs-property">photoUris</span>[<span class="hljs-number">0</span>];</li><li>  <span class="hljs-keyword">if</span> (uri === <span class="hljs-literal">undefined</span>) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">'Failed to get uri.'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-keyword">let</span> fileSource = <span class="hljs-keyword">await</span> fileIo.<span class="hljs-title function_">open</span>(uri, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>);</li><li>    imageSource = image.<span class="hljs-title function_">createImageSource</span>(fileSource.<span class="hljs-property">fd</span>);</li><li>    chooseImage = <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">createPixelMap</span>();</li><li>    <span class="hljs-keyword">if</span> (!chooseImage) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>
</li><li>    <span class="hljs-comment">// 调用文本识别接口</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">visionInfo</span>: textRecognition.<span class="hljs-property">VisionInfo</span> = {</li><li>      <span class="hljs-attr">pixelMap</span>: chooseImage</li><li>    };</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">textConfiguration</span>: textRecognition.<span class="hljs-property">TextRecognitionConfiguration</span> = {</li><li>      <span class="hljs-attr">isDirectionDetectionSupported</span>: <span class="hljs-literal">false</span></li><li>    };</li><li>    textRecognition.<span class="hljs-title function_">recognizeText</span>(visionInfo, textConfiguration, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, data: textRecognition.TextRecognitionResult</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">`Failed to recognize text. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-comment">// 识别成功，获取对应的结果</span></li><li>      <span class="hljs-keyword">let</span> recognitionString = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data);</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">`Succeeded in recognizing text: <span class="hljs-subst">${recognitionString}</span>`</span>);</li><li>
</li><li>      <span class="hljs-keyword">if</span>(chooseImage &amp;&amp; imageSource) {</li><li>        chooseImage.<span class="hljs-title function_">release</span>();</li><li>        imageSource.<span class="hljs-title function_">release</span>();</li><li>      }</li><li>    });</li><li>    <span class="hljs-keyword">if</span> (fileSource) {</li><li>      <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">await</span> fileIo.<span class="hljs-title function_">close</span>(fileSource);</li><li>      } <span class="hljs-keyword">catch</span> (err) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">`Failed to close fileSource. Code: <span class="hljs-subst">${err.code}</span>，message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      }</li><li>    }</li><li>  }, <span class="hljs-number">100</span>)</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">`Failed to get photo image uri. Code: <span class="hljs-subst">${err.code}</span>，message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section42045494912" device-type="phone,2in1,tablet">textRecognition.getSupportedLanguages<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section42045494912" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getSupportedLanguages(): Promise&lt;Array&lt;string&gt;&gt;</p>     <p>获取当前文本识别所支持的语言类型列表。使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.OCR.TextRecognition</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;Array&lt;string&gt;&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回所支持的<a href="/consumer/cn/doc/harmonyos-references/core-vision-text-recognition-api#section133729715453">语言类型列表</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/core-vision-error-code">Core Vision Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>1001400001</p></td>         <td class="cellrowborder" width="50%">          <p>Failed to run, please try again.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001400002</p></td>         <td class="cellrowborder" width="50%">          <p>The service is abnormal.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bhk-c106="" class="highlight-div"><div _ngcontent-bhk-c106="" class="highlight-div-header"><div _ngcontent-bhk-c106="" class="highlight-div-header-left"><div _ngcontent-bhk-c106="" class="handle-button expand-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bhk-c106="" class="highlight-div-header-right"><div _ngcontent-bhk-c106="" class="handle-button ai-button"></div><div _ngcontent-bhk-c106="" class="handle-button line-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bhk-c106="" class="handle-button theme-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bhk-c106="" class="handle-button copy-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textRecognition } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreVisionKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>textRecognition.<span class="hljs-title function_">getSupportedLanguages</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> languageString = data.<span class="hljs-title function_">join</span>(<span class="hljs-string">', '</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">`Succeeded in obtaining the language: <span class="hljs-subst">${languageString}</span>`</span>);</li><li>}, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">`Failed to obtain the language. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section58479425015" device-type="phone,2in1,tablet">textRecognition.getSupportedLanguages<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section58479425015" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getSupportedLanguages(callback: AsyncCallback&lt;Array&lt;string&gt;&gt;): void</p>     <p>获取当前文本识别所支持的语言类型列表。使用Callback异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.OCR.TextRecognition</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#asynccallback" target="_blank">AsyncCallback</a>&lt;Array&lt;string&gt;&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>所支持的<a href="/consumer/cn/doc/harmonyos-references/core-vision-text-recognition-api#section133729715453">语言类型列表</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/core-vision-error-code">Core Vision Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>1001400001</p></td>         <td class="cellrowborder" width="50%">          <p>Failed to run, please try again.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001400002</p></td>         <td class="cellrowborder" width="50%">          <p>The service is abnormal.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bhk-c106="" class="highlight-div"><div _ngcontent-bhk-c106="" class="highlight-div-header"><div _ngcontent-bhk-c106="" class="highlight-div-header-left"><div _ngcontent-bhk-c106="" class="handle-button expand-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bhk-c106="" class="highlight-div-header-right"><div _ngcontent-bhk-c106="" class="handle-button ai-button"></div><div _ngcontent-bhk-c106="" class="handle-button line-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bhk-c106="" class="handle-button theme-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bhk-c106="" class="handle-button copy-button"><div _ngcontent-bhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textRecognition } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreVisionKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>textRecognition.<span class="hljs-title function_">getSupportedLanguages</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, data: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (!error) {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">`Succeeded in obtaining the language: <span class="hljs-subst">${data}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'OCRDemo'</span>, <span class="hljs-string">`Failed to obtain the language. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>});</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section133729715453" device-type="phone,2in1,tablet">语言类型列表<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section133729715453" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.2.1.3.1.1" width="50%">          <p>语言（英）</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.2.1.3.1.2" width="50%">          <p>语言（中）</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>zh-CN</p></td>         <td class="cellrowborder" width="50%">          <p>简体中文</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>en</p></td>         <td class="cellrowborder" width="50%">          <p>英文</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>ja</p></td>         <td class="cellrowborder" width="50%">          <p>日文</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>ko</p></td>         <td class="cellrowborder" width="50%">          <p>韩文</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>zh-TW</p></td>         <td class="cellrowborder" width="50%">          <p>繁体中文</p></td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>