<h1 _ngcontent-yhk-c119="" class="doc-title ng-star-inserted" title="textToSpeech（文本转语音）"> textToSpeech（文本转语音） </h1>

<div _ngcontent-yhk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>文本转语音服务提供将文本信息转换为语音并进行播报的能力，便于用户与设备进行互动，实现实时语音交互，文本播报。</p>    <p>目前本服务支持的语种为中文、英文，支持的音色为聆小珊女声音色、英语（美国）劳拉女声音色、凌飞哲男声音色。</p>    <p><strong>起始版本：</strong>4.1.0(11)</p>    <div class="tiledSection">     <h2 id="section16609101116259" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16609101116259" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section53411946183318" device-type="phone,2in1,tablet">textToSpeech.createEngine<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section53411946183318" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>createEngine(createEngineParams: CreateEngineParams, callback: AsyncCallback&lt;TextToSpeechEngine&gt;): void</p>     <p>创建<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section185526396124">TextToSpeechEngine</a>实例，并初始化引擎。使用callback异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>createEngineParams</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section1638144844811">CreateEngineParams</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>创建引擎实例的配置项。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#asynccallback" target="_blank">AsyncCallback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section185526396124">TextToSpeechEngine</a>&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数。引擎实例的回调。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002300002</p></td>         <td class="cellrowborder" width="50%">          <p>The language is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002300003</p></td>         <td class="cellrowborder" width="50%">          <p>The person is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002300005</p></td>         <td class="cellrowborder" width="50%">          <p>Create engine failed.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建引擎实例相关参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">ttsEngine</span>: textToSpeech.<span class="hljs-property">TextToSpeechEngine</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">extraParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt; = {<span class="hljs-string">"style"</span>: <span class="hljs-string">'interaction-broadcast'</span>, <span class="hljs-string">"locate"</span>: <span class="hljs-string">'CN'</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">'EngineName'</span>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">initParamsInfo</span>: textToSpeech.<span class="hljs-property">CreateEngineParams</span> = {</li><li>  <span class="hljs-attr">language</span>: <span class="hljs-string">'zh-CN'</span>,</li><li>  <span class="hljs-attr">person</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">online</span>: <span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">extraParams</span>: extraParam</li><li>};</li><li><span class="hljs-comment">// 调用创建引擎实例接口</span></li><li>textToSpeech.<span class="hljs-title function_">createEngine</span>(initParamsInfo, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, textToSpeechEngine: textToSpeech.TextToSpeechEngine</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (!err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating engine.'</span>);</li><li>    <span class="hljs-comment">// 获得引擎实例</span></li><li>    ttsEngine = textToSpeechEngine;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create engine. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>  }</li><li>});</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section184134193313" device-type="phone,2in1,tablet">textToSpeech.createEngine<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section184134193313" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>createEngine(createEngineParams: CreateEngineParams): Promise&lt;TextToSpeechEngine&gt;</p>     <p>创建<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section185526396124">TextToSpeechEngine</a>实例，并初始化引擎。使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>createEngineParams</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section1638144844811">CreateEngineParams</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>创建引擎实例的配置项。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section185526396124">TextToSpeechEngine</a>&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。返回创建的引擎实例。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002300002</p></td>         <td class="cellrowborder" width="50%">          <p>The language is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002300003</p></td>         <td class="cellrowborder" width="50%">          <p>The person is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002300005</p></td>         <td class="cellrowborder" width="50%">          <p>Create engine failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">ttsEngine</span>: textToSpeech.<span class="hljs-property">TextToSpeechEngine</span>;</li><li><span class="hljs-comment">// 创建引擎实例相关参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">extraParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt; = {<span class="hljs-string">"style"</span>: <span class="hljs-string">'interaction-broadcast'</span>, <span class="hljs-string">"locate"</span>: <span class="hljs-string">'CN'</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">'EngineName'</span>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">initParamsInfo</span>: textToSpeech.<span class="hljs-property">CreateEngineParams</span> = {</li><li>  <span class="hljs-attr">language</span>: <span class="hljs-string">'zh-CN'</span>,</li><li>  <span class="hljs-attr">person</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">online</span>: <span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">extraParams</span>: extraParam</li><li>};</li><li>
</li><li><span class="hljs-comment">// 调用createEngine方法</span></li><li>textToSpeech.<span class="hljs-title function_">createEngine</span>(initParamsInfo).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: textToSpeech.TextToSpeechEngine</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 获得引擎实例</span></li><li>  ttsEngine = res;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating engine.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span>{</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create engine. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>});</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section9423429131919" device-type="phone,2in1,tablet">textToSpeech.listVoices<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section9423429131919" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>listVoices(queryParams: VoiceQuery): Promise&lt;VoiceInfo[]&gt;</p>     <p>查询支持的语种音色信息，使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>queryParams</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section235272615215">VoiceQuery</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>查询语种音色信息请求参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section85771521101910">VoiceInfo</a>[]&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回查询的结果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 设置查询相关的参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">voicesQuery</span>: textToSpeech.<span class="hljs-property">VoiceQuery</span> = {</li><li>  <span class="hljs-attr">requestId</span>: <span class="hljs-string">'123456'</span>, <span class="hljs-comment">// requestId在同一实例内仅能用一次，请勿重复设置</span></li><li>  <span class="hljs-attr">online</span>: <span class="hljs-number">1</span></li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 调用listVoices方法</span></li><li>        textToSpeech.<span class="hljs-title function_">listVoices</span>(voicesQuery).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: textToSpeech.VoiceInfo[]</span>) =&gt;</span> {</li><li>          <span class="hljs-comment">// 获得目前支持的语种音色等信息</span></li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in listing voices, result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(res)}</span>.`</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span>{</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to list voices. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>        });</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section376811290229" device-type="phone,2in1,tablet">textToSpeech.downloadVoice<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section376811290229" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>downloadVoice(downloadParams: VoiceDownload, callback: AsyncCallback&lt;DownloadResponse&gt;): void</p>     <p>下载支持的语种音色。使用callback异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet设备中可正常调用，在其他设备中调起下载弹窗后点击下载返回1002300008错误码。</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>downloadParams</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section10297014134719">VoiceDownload</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>下载语种音色请求参数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#asynccallback" target="_blank">AsyncCallback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section037913322072">DownloadResponse</a>&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，下载的音色模型及信息。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>1002300008</p></td>         <td class="cellrowborder" width="50%">          <p>Failed to download voice.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002300009</p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameter types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002300010</p></td>         <td class="cellrowborder" width="50%">          <p>Voice has already been downloaded.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>, <span class="hljs-title class_">Callback</span>, <span class="hljs-title class_">ErrorCallback</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 设置下载音色相关参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">voicesDownload</span>: textToSpeech.<span class="hljs-property">VoiceDownload</span> = {</li><li>  <span class="hljs-attr">requestId</span>: <span class="hljs-string">'12345678-b'</span>, <span class="hljs-comment">// 请求ID，ID不可重复</span></li><li>  <span class="hljs-attr">language</span>: <span class="hljs-string">'en-US'</span>,</li><li>  <span class="hljs-attr">person</span>: <span class="hljs-number">8</span>,</li><li>  <span class="hljs-attr">style</span>: <span class="hljs-string">'interaction-broadcast'</span></li><li>};</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 调用downloadVoice方法</span></li><li>        textToSpeech.<span class="hljs-title function_">downloadVoice</span>(voicesDownload,</li><li>          <span class="hljs-function">(<span class="hljs-params">error: BusinessError, downloadResponse: textToSpeech.DownloadResponse</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (error) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to download voice. code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>              <span class="hljs-keyword">return</span>;</li><li>            }</li><li>            <span class="hljs-keyword">if</span> (!downloadResponse) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to download voice. downloadResponse is null`</span>);</li><li>              <span class="hljs-keyword">return</span></li><li>            }</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">requestId</span>: <span class="hljs-built_in">string</span> = downloadResponse.<span class="hljs-property">requestId</span>;</li><li>
</li><li>            <span class="hljs-comment">// 定义函数</span></li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">startCallback</span>: <span class="hljs-title class_">Callback</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-function">(<span class="hljs-params">info: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>              <span class="hljs-comment">// 下载开始回调</span></li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`download voice start, requestId: <span class="hljs-subst">${requestId}</span>, info:<span class="hljs-subst">${info}</span>}`</span>);</li><li>            }</li><li>
</li><li>            <span class="hljs-comment">// 定义函数</span></li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">progressCallback</span>: <span class="hljs-title class_">Callback</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-function">(<span class="hljs-params">schedule: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>              <span class="hljs-comment">// 下载进度回调</span></li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`download voice schedule, requestId: <span class="hljs-subst">${requestId}</span> scheduleInfo: <span class="hljs-subst">${schedule}</span>`</span>);</li><li>            }</li><li>
</li><li>            <span class="hljs-comment">// 定义函数</span></li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">completeCallback</span>: <span class="hljs-title class_">Callback</span>&lt;textToSpeech.<span class="hljs-property">VoiceInfo</span>&gt; = <span class="hljs-function">(<span class="hljs-params">voiceInfo: textToSpeech.VoiceInfo</span>) =&gt;</span> {</li><li>              <span class="hljs-comment">// 下载完成回调</span></li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`download voice complete, requestId: <span class="hljs-subst">${requestId}</span> voiceInfo: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(voiceInfo)}</span>`</span>);</li><li>              <span class="hljs-comment">// 取消下载开始事件回调注册</span></li><li>              downloadResponse.<span class="hljs-title function_">off</span>(<span class="hljs-string">'start'</span>, startCallback);</li><li>              <span class="hljs-comment">// 取消下载进度事件回调注册</span></li><li>              downloadResponse.<span class="hljs-title function_">off</span>(<span class="hljs-string">'progress'</span>,progressCallback);</li><li>              <span class="hljs-comment">// 取消下载完成事件回调注册</span></li><li>              downloadResponse.<span class="hljs-title function_">off</span>(<span class="hljs-string">'complete'</span>,completeCallback);</li><li>              <span class="hljs-comment">// 取消下载取消事件回调注册</span></li><li>              downloadResponse.<span class="hljs-title function_">off</span>(<span class="hljs-string">'cancel'</span>,cancelCallback);</li><li>              <span class="hljs-comment">// 取消下载过程错误事件回调注册</span></li><li>              downloadResponse.<span class="hljs-title function_">off</span>(<span class="hljs-string">'error'</span>,errorCallback);</li><li>            }</li><li>
</li><li>            <span class="hljs-comment">// 定义函数</span></li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">cancelCallback</span>: <span class="hljs-title class_">Callback</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-function">(<span class="hljs-params">cancelInfo: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>              <span class="hljs-comment">// 用户取消下载回调</span></li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`download voice cancel, requestId: <span class="hljs-subst">${requestId}</span> cancelInfo: <span class="hljs-subst">${cancelInfo}</span>`</span>);</li><li>            }</li><li>
</li><li>            <span class="hljs-comment">// 定义函数</span></li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">errorCallback</span>: <span class="hljs-title class_">ErrorCallback</span>&lt;<span class="hljs-title class_">BusinessError</span>&gt; = <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>              <span class="hljs-comment">// 下载过程错误回调</span></li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`download voice error, requestId: <span class="hljs-subst">${requestId}</span> errorCode: <span class="hljs-subst">${err.code}</span> errorMessage: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            }</li><li>
</li><li>            <span class="hljs-comment">// 注册下载开始事件回调</span></li><li>            downloadResponse.<span class="hljs-title function_">on</span>(<span class="hljs-string">'start'</span>, startCallback);</li><li>            <span class="hljs-comment">// 注册下载进度事件回调</span></li><li>            downloadResponse.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, progressCallback);</li><li>            <span class="hljs-comment">// 注册下载完成事件回调</span></li><li>            downloadResponse.<span class="hljs-title function_">on</span>(<span class="hljs-string">'complete'</span>, completeCallback);</li><li>            <span class="hljs-comment">// 注册下载取消事件回调</span></li><li>            downloadResponse.<span class="hljs-title function_">on</span>(<span class="hljs-string">'cancel'</span>, cancelCallback);</li><li>            <span class="hljs-comment">// 注册下载过程错误事件回调</span></li><li>            downloadResponse.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, errorCallback);</li><li>          })</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section185526396124" device-type="phone,2in1,tablet">TextToSpeechEngine<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section185526396124" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>文本转语音类，用于执行文本转语音过程中的相关操作。在调用TextToSpeechEngine的方法前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section53411946183318">createEngine</a>方法创建一个<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section185526396124">TextToSpeechEngine</a>实例。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>    </div>    <div class="tiledSection">     <h3 id="section813761871119" device-type="phone,2in1,tablet" class="firsth2">listVoices<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section813761871119" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>listVoices(params: VoiceQuery, callback: AsyncCallback&lt;Array&lt;VoiceInfo&gt;&gt;): void</p>     <p>查询支持的语种音色。使用callback异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>params</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section235272615215">VoiceQuery</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>查询语种音色信息请求参数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#asynccallback" target="_blank">AsyncCallback</a>&lt;Array&lt;<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section85771521101910">VoiceInfo</a>&gt;&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，接收返回的查询结果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">ttsEngine</span>: textToSpeech.<span class="hljs-property">TextToSpeechEngine</span>;</li><li><span class="hljs-comment">// 设置查询相关参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">voicesQuery</span>: textToSpeech.<span class="hljs-property">VoiceQuery</span> = {</li><li>  <span class="hljs-attr">requestId</span>: <span class="hljs-string">'123456'</span>, <span class="hljs-comment">// requestId在同一实例内仅能用一次，请勿重复设置</span></li><li>  <span class="hljs-attr">online</span>: <span class="hljs-number">1</span></li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 调用listVoices方法，以callback返回</span></li><li>        ttsEngine.<span class="hljs-title function_">listVoices</span>(voicesQuery, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, voiceInfo: textToSpeech.VoiceInfo[]</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (!err) {</li><li>            <span class="hljs-comment">// 接收目前支持的语种音色等信息</span></li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in listing voices, voiceInfo is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(voiceInfo)}</span>.`</span>);</li><li>          } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to list voices. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>          }</li><li>        });</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section125219451411" device-type="phone,2in1,tablet">listVoices<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section125219451411" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>listVoices(params: VoiceQuery): Promise&lt;Array&lt;VoiceInfo&gt;&gt;</p>     <p>查询支持的语种音色。使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>params</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section235272615215">VoiceQuery</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>查询语种音色信息请求参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;Array&lt;<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section85771521101910">VoiceInfo</a>&gt;&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，接收返回的查询结果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">ttsEngine</span>: textToSpeech.<span class="hljs-property">TextToSpeechEngine</span>;</li><li><span class="hljs-comment">// 设置查询相关的参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">voicesQuery</span>: textToSpeech.<span class="hljs-property">VoiceQuery</span> = {</li><li>  <span class="hljs-attr">requestId</span>: <span class="hljs-string">'123456'</span>, <span class="hljs-comment">// requestId在同一实例内仅能用一次，请勿重复设置</span></li><li>  <span class="hljs-attr">online</span>: <span class="hljs-number">1</span></li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 调用listVoices方法</span></li><li>        ttsEngine.<span class="hljs-title function_">listVoices</span>(voicesQuery).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: textToSpeech.VoiceInfo[]</span>) =&gt;</span> {</li><li>          <span class="hljs-comment">// 获得目前支持的语种音色等信息</span></li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in listing voices, result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(res)}</span>.`</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span>{</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to list voices. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>        });</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section143821952181910" device-type="phone,2in1,tablet">setListener<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section143821952181910" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setListener(listener: SpeakListener): void</p>     <p>设置合成播报回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>listener</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section115395631614">SpeakListener</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>合成播报相关事件的回调。</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">ttsEngine</span>: textToSpeech.<span class="hljs-property">TextToSpeechEngine</span>;</li><li><span class="hljs-comment">// 设置speak的回调信息</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">speakListener</span>: textToSpeech.<span class="hljs-property">SpeakListener</span> = {</li><li>  <span class="hljs-comment">// 开始播报回调</span></li><li>  <span class="hljs-title function_">onStart</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.StartResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStart, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 合成完成及播报完成回调</span></li><li>  <span class="hljs-title function_">onComplete</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.CompleteResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onComplete, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 停止播报回调</span></li><li>  <span class="hljs-title function_">onStop</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.StopResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStop, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 返回音频流</span></li><li>  <span class="hljs-title function_">onData</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, audio: <span class="hljs-built_in">ArrayBuffer</span>, response: textToSpeech.SynthesisResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onData, requestId: <span class="hljs-subst">${requestId}</span> sequence: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span> audio: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audio)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 错误回调</span></li><li>  <span class="hljs-title function_">onError</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, errorCode: <span class="hljs-built_in">number</span>, errorMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`onError, requestId: <span class="hljs-subst">${requestId}</span> errorCode: <span class="hljs-subst">${errorCode}</span> errorMessage: <span class="hljs-subst">${errorMessage}</span>`</span>);</li><li>  }</li><li>};</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 设置回调</span></li><li>        ttsEngine.<span class="hljs-title function_">setListener</span>(speakListener);</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section140216144119" device-type="phone,2in1,tablet">speak<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section140216144119" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>speak(text: string, speakParams: SpeakParams): void</p>     <p>合成播报文本。请先调用<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section143821952181910">setListener</a>方法，否则，无法接收语音的回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>text</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>待播报的文本。根据不同场景的实际需求，可主动设置单词发音方式、数字播报策略、指定汉字发音以及在播报时插入静音停顿。具体方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/texttospeech-guide#section137481719163910" target="_blank">设置播报策略</a>。</p>          <p>文本长度不得超过10000字数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>speakParams</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section7843122735210">SpeakParams</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>合成播报音频的相关参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002300001</p></td>         <td class="cellrowborder" width="50%">          <p>The length of text is out of range or empty.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">ttsEngine</span>: textToSpeech.<span class="hljs-property">TextToSpeechEngine</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">originalText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"\n\t\t古人学问无遗力，少壮工夫老始成；\n\t\t"</span> +</li><li>  <span class="hljs-string">"纸上得来终觉浅，绝知此事要躬行。\n\t\t"</span>;</li><li>
</li><li><span class="hljs-comment">// 合成及播报相关的参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">extraParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt; = {<span class="hljs-string">"speed"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"volume"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"pitch"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"languageContext"</span>: <span class="hljs-string">'zh-CN'</span>, <span class="hljs-string">"audioType"</span>: <span class="hljs-string">"pcm"</span>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">speakParams</span>: textToSpeech.<span class="hljs-property">SpeakParams</span> = {</li><li>  <span class="hljs-attr">requestId</span>: <span class="hljs-string">'123456'</span>, <span class="hljs-comment">// requestId在同一实例内仅能用一次，请勿重复设置</span></li><li>  <span class="hljs-attr">extraParams</span>: extraParam</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 传入文本originalText，调用speak接口</span></li><li>        ttsEngine.<span class="hljs-title function_">speak</span>(originalText, speakParams);</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section14433919171116" device-type="phone,2in1,tablet">stop<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section14433919171116" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>stop(): void</p>     <p>同时停止合成及播报，请先调用<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section143821952181910">setListener</a>方法，否则无法接收stop的回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">ttsEngine</span>: textToSpeech.<span class="hljs-property">TextToSpeechEngine</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">originalText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"\n\t\t古人学问无遗力，少壮工夫老始成；\n\t\t"</span> +</li><li>  <span class="hljs-string">"纸上得来终觉浅，绝知此事要躬行。\n\t\t"</span>;</li><li>
</li><li><span class="hljs-comment">// 合成及播报相关的参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">extraParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt; = {<span class="hljs-string">"speed"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"volume"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"pitch"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"languageContext"</span>: <span class="hljs-string">'zh-CN'</span>, <span class="hljs-string">"audioType"</span>: <span class="hljs-string">"pcm"</span>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">speakParams</span>: textToSpeech.<span class="hljs-property">SpeakParams</span> = {</li><li>  <span class="hljs-attr">requestId</span>: <span class="hljs-string">'123456'</span>, <span class="hljs-comment">// requestId在同一实例内仅能用一次，请勿重复设置</span></li><li>  <span class="hljs-attr">extraParams</span>: extraParam</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>      <span class="hljs-title class_">Button</span>()</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 传入文本originalText，调用speak接口</span></li><li>          ttsEngine.<span class="hljs-title function_">speak</span>(originalText, speakParams);</li><li>        })</li><li>
</li><li>      <span class="hljs-title class_">Button</span>()</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Stop'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 调用stop接口</span></li><li>          ttsEngine.<span class="hljs-title function_">stop</span>();</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section35361720111113" device-type="phone,2in1,tablet">isBusy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section35361720111113" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>isBusy(): boolean</p>     <p>判断引擎当前是否处于合成或播报中。请先调用<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section143821952181910">setListener</a>方法，否则无法接收isBusy()错误相关的回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>boolean</p></td>         <td class="cellrowborder" width="50%">          <p>服务是否处于合成或播报状态的返回值。</p>          <ul>           <li>true：引擎正处于合成或播报状态。</li>           <li>false：引擎没有处于合成或播报状态。</li>          </ul></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">ttsEngine</span>: textToSpeech.<span class="hljs-property">TextToSpeechEngine</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">originalText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"\n\t\t古人学问无遗力，少壮工夫老始成；\n\t\t"</span> +</li><li>  <span class="hljs-string">"纸上得来终觉浅，绝知此事要躬行。\n\t\t"</span>;</li><li>
</li><li><span class="hljs-comment">// 合成及播报相关的参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">extraParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt; = {<span class="hljs-string">"speed"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"volume"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"pitch"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"languageContext"</span>: <span class="hljs-string">'zh-CN'</span>, <span class="hljs-string">"audioType"</span>: <span class="hljs-string">"pcm"</span>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">speakParams</span>: textToSpeech.<span class="hljs-property">SpeakParams</span> = {</li><li>  <span class="hljs-attr">requestId</span>: <span class="hljs-string">'123456'</span>, <span class="hljs-comment">// requestId在同一实例内仅能用一次，请勿重复设置</span></li><li>  <span class="hljs-attr">extraParams</span>: extraParam</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>      <span class="hljs-title class_">Button</span>()</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 传入文本originalText，调用speak接口</span></li><li>          ttsEngine.<span class="hljs-title function_">speak</span>(originalText, speakParams);</li><li>        })</li><li>
</li><li>      <span class="hljs-title class_">Button</span>()</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'isBusy'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 调用isBusy接口</span></li><li>          <span class="hljs-keyword">let</span> isBusy = ttsEngine.<span class="hljs-title function_">isBusy</span>();</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`isBusy: <span class="hljs-subst">${isBusy}</span>`</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section444415855615" device-type="phone,2in1,tablet">shutdown<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section444415855615" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>shutdown(): void</p>     <p>关闭引擎，释放引擎资源。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">ttsEngine</span>: textToSpeech.<span class="hljs-property">TextToSpeechEngine</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">originalText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"\n\t\t古人学问无遗力，少壮工夫老始成；\n\t\t"</span> +</li><li>  <span class="hljs-string">"纸上得来终觉浅，绝知此事要躬行。\n\t\t"</span>;</li><li>
</li><li><span class="hljs-comment">// 合成及播报相关的参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">extraParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt; = {<span class="hljs-string">"speed"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"volume"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"pitch"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"languageContext"</span>: <span class="hljs-string">'zh-CN'</span>, <span class="hljs-string">"audioType"</span>: <span class="hljs-string">"pcm"</span>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">speakParams</span>: textToSpeech.<span class="hljs-property">SpeakParams</span> = {</li><li>  <span class="hljs-attr">requestId</span>: <span class="hljs-string">'123456'</span>, <span class="hljs-comment">// requestId在同一实例内仅能用一次，请勿重复设置</span></li><li>  <span class="hljs-attr">extraParams</span>: extraParam</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>      <span class="hljs-title class_">Button</span>()</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 传入文本originalText，调用speak接口</span></li><li>          ttsEngine.<span class="hljs-title function_">speak</span>(originalText, speakParams);</li><li>        })</li><li>
</li><li>      <span class="hljs-title class_">Button</span>()</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'shutdown'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 调用shutdown接口</span></li><li>          ttsEngine.<span class="hljs-title function_">shutdown</span>();</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section115395631614" device-type="phone,2in1,tablet">SpeakListener<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section115395631614" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>合成及播报的回调对象，通过此对象可返回合成及播报过程的相关状态，例如开始合成及播报、合成完成、播报完成、停止播报完成等。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>    </div>    <div class="tiledSection">     <h3 id="section1691519526562" device-type="phone,2in1,tablet" class="firsth2">onStart<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1691519526562" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>onStart(requestId: string, response: StartResponse): void</p>     <p>播报开始时，回调此接口，返回请求ID、播报相关参数，例如通道数、采样率、采样位数信息。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>requestId</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>请求ID。唯一标识一条请求。</p>          <p>支持英文字符，数字和中文，长度不限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>response</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section270311282525">StartResponse</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>播报相关参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">ttsEngine</span>: textToSpeech.<span class="hljs-property">TextToSpeechEngine</span>;</li><li><span class="hljs-comment">// 设置speak的回调信息</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">speakListener</span>: textToSpeech.<span class="hljs-property">SpeakListener</span> = {</li><li>  <span class="hljs-comment">// 开始播报回调</span></li><li>  <span class="hljs-title function_">onStart</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.StartResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStart, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 合成完成及播报完成回调</span></li><li>  <span class="hljs-title function_">onComplete</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.CompleteResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onComplete, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 停止播报回调</span></li><li>  <span class="hljs-title function_">onStop</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.StopResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStop, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 返回音频流</span></li><li>  <span class="hljs-title function_">onData</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, audio: <span class="hljs-built_in">ArrayBuffer</span>, response: textToSpeech.SynthesisResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onData, requestId: <span class="hljs-subst">${requestId}</span> sequence: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span> audio: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audio)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 错误回调</span></li><li>  <span class="hljs-title function_">onError</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, errorCode: <span class="hljs-built_in">number</span>, errorMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`onError, requestId: <span class="hljs-subst">${requestId}</span> errorCode: <span class="hljs-subst">${errorCode}</span> errorMessage: <span class="hljs-subst">${errorMessage}</span>`</span>);</li><li>  }</li><li>};</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 设置回调</span></li><li>        ttsEngine.<span class="hljs-title function_">setListener</span>(speakListener);</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section19202141555610" device-type="phone,2in1,tablet">onStop<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section19202141555610" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>onStop(requestId: string, response: StopResponse): void</p>     <p>调用stop()方法时，回调此接口，表示stop已完成。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>requestId</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>请求ID。唯一标识一条请求。</p>          <p>支持英文字符，数字和中文，长度不限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>response</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section892952965214">StopResponse</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>响应停止事件的相关信息。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">ttsEngine</span>: textToSpeech.<span class="hljs-property">TextToSpeechEngine</span>;</li><li><span class="hljs-comment">// 设置speak的回调信息</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">speakListener</span>: textToSpeech.<span class="hljs-property">SpeakListener</span> = {</li><li>  <span class="hljs-comment">// 开始播报回调</span></li><li>  <span class="hljs-title function_">onStart</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.StartResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStart, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 合成完成及播报完成回调</span></li><li>  <span class="hljs-title function_">onComplete</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.CompleteResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onComplete, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 停止播报回调</span></li><li>  <span class="hljs-title function_">onStop</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.StopResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStop, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 返回音频流</span></li><li>  <span class="hljs-title function_">onData</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, audio: <span class="hljs-built_in">ArrayBuffer</span>, response: textToSpeech.SynthesisResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onData, requestId: <span class="hljs-subst">${requestId}</span> sequence: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span> audio: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audio)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 错误回调</span></li><li>  <span class="hljs-title function_">onError</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, errorCode: <span class="hljs-built_in">number</span>, errorMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`onError, requestId: <span class="hljs-subst">${requestId}</span> errorCode: <span class="hljs-subst">${errorCode}</span> errorMessage: <span class="hljs-subst">${errorMessage}</span>`</span>);</li><li>  }</li><li>};</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 设置回调</span></li><li>        ttsEngine.<span class="hljs-title function_">setListener</span>(speakListener);</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section2023291912560" device-type="phone,2in1,tablet">onComplete<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2023291912560" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>onComplete(requestId: string, response: CompleteResponse): void</p>     <p>合成或播报结束后分别回调此接口，返回请求ID，完成播报相关信息。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>requestId</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>请求ID。唯一标识一条请求。</p>          <p>支持英文字符，数字和中文，长度不限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>response</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section26265304523">CompleteResponse</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>完成播报相关信息。</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>onData 可能并未返回完毕，请继续接收 onData 回调。</p>      </div></div></div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">ttsEngine</span>: textToSpeech.<span class="hljs-property">TextToSpeechEngine</span>;</li><li><span class="hljs-comment">// 设置speak的回调信息</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">speakListener</span>: textToSpeech.<span class="hljs-property">SpeakListener</span> = {</li><li>  <span class="hljs-comment">// 开始播报回调</span></li><li>  <span class="hljs-title function_">onStart</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.StartResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStart, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 合成完成及播报完成回调</span></li><li>  <span class="hljs-title function_">onComplete</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.CompleteResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onComplete, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 停止播报回调</span></li><li>  <span class="hljs-title function_">onStop</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.StopResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStop, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 返回音频流</span></li><li>  <span class="hljs-title function_">onData</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, audio: <span class="hljs-built_in">ArrayBuffer</span>, response: textToSpeech.SynthesisResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onData, requestId: <span class="hljs-subst">${requestId}</span> sequence: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span> audio: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audio)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 错误回调</span></li><li>  <span class="hljs-title function_">onError</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, errorCode: <span class="hljs-built_in">number</span>, errorMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`onError, requestId: <span class="hljs-subst">${requestId}</span> errorCode: <span class="hljs-subst">${errorCode}</span> errorMessage: <span class="hljs-subst">${errorMessage}</span>`</span>);</li><li>  }</li><li>};</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 设置回调</span></li><li>        ttsEngine.<span class="hljs-title function_">setListener</span>(speakListener);</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section153601445102819" device-type="phone,2in1,tablet">onData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section153601445102819" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>onData?: OnDataCallback</p>     <p>合成播报过程中回调此接口，返回请求ID，音频流信息，音频附加信息如格式、时长等。若需要返回音频流信息，请实现此接口。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>因为异步ipc会导致onData音频流顺序小规模错乱，需要调用方在播放前对音频流按照sequence排序。</p>      </div></div></div>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>onData</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section0818167184314">OnDataCallback</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>否</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>合成的回调，通过音频的参数返回音频数据。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">ttsEngine</span>: textToSpeech.<span class="hljs-property">TextToSpeechEngine</span>;</li><li><span class="hljs-comment">// 设置speak的回调信息</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">speakListener</span>: textToSpeech.<span class="hljs-property">SpeakListener</span> = {</li><li>  <span class="hljs-comment">// 开始播报回调</span></li><li>  <span class="hljs-title function_">onStart</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.StartResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStart, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 合成完成及播报完成回调</span></li><li>  <span class="hljs-title function_">onComplete</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.CompleteResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onComplete, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 停止播报回调</span></li><li>  <span class="hljs-title function_">onStop</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.StopResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStop, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 返回音频流</span></li><li>  <span class="hljs-title function_">onData</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, audio: <span class="hljs-built_in">ArrayBuffer</span>, response: textToSpeech.SynthesisResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onData, requestId: <span class="hljs-subst">${requestId}</span> sequence: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span> audio: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audio)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 错误回调</span></li><li>  <span class="hljs-title function_">onError</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, errorCode: <span class="hljs-built_in">number</span>, errorMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`onError, requestId: <span class="hljs-subst">${requestId}</span> errorCode: <span class="hljs-subst">${errorCode}</span> errorMessage: <span class="hljs-subst">${errorMessage}</span>`</span>);</li><li>  }</li><li>};</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 设置回调</span></li><li>        ttsEngine.<span class="hljs-title function_">setListener</span>(speakListener);</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section19604102215562" device-type="phone,2in1,tablet">onError<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section19604102215562" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>onError(requestId: string, errorCode: number, errorMessage: string): void</p>     <p>合成播报过程中，出现错误时回调，返回请求ID、错误码及错误描述。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>requestId</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>请求ID。唯一标识一条请求。</p>          <p>支持英文字符，数字和中文，长度不限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>errorCode</p></td>         <td class="cellrowborder" width="30.8%">          <p>number</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">错误码</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>errorMessage</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>错误信息描述。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">ttsEngine</span>: textToSpeech.<span class="hljs-property">TextToSpeechEngine</span>;</li><li><span class="hljs-comment">// 设置speak的回调信息</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">speakListener</span>: textToSpeech.<span class="hljs-property">SpeakListener</span> = {</li><li>  <span class="hljs-comment">// 开始播报回调</span></li><li>  <span class="hljs-title function_">onStart</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.StartResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStart, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 合成完成及播报完成回调</span></li><li>  <span class="hljs-title function_">onComplete</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.CompleteResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onComplete, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 停止播报回调</span></li><li>  <span class="hljs-title function_">onStop</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, response: textToSpeech.StopResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStop, requestId: <span class="hljs-subst">${requestId}</span> response: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 返回音频流</span></li><li>  <span class="hljs-title function_">onData</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, audio: <span class="hljs-built_in">ArrayBuffer</span>, response: textToSpeech.SynthesisResponse</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onData, requestId: <span class="hljs-subst">${requestId}</span> sequence: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span> audio: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audio)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 错误回调</span></li><li>  <span class="hljs-title function_">onError</span>(<span class="hljs-params">requestId: <span class="hljs-built_in">string</span>, errorCode: <span class="hljs-built_in">number</span>, errorMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`onError, requestId: <span class="hljs-subst">${requestId}</span> errorCode: <span class="hljs-subst">${errorCode}</span> errorMessage: <span class="hljs-subst">${errorMessage}</span>`</span>);</li><li>  }</li><li>};</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 设置回调</span></li><li>        ttsEngine.<span class="hljs-title function_">setListener</span>(speakListener);</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section0818167184314" device-type="phone,2in1,tablet">OnDataCallback<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section0818167184314" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>type OnDataCallback = (requestId: string, audio: ArrayBuffer, response: SynthesisResponse) =&gt; void</p>     <p>合成的回调，通过音频的参数返回音频数据。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>requestId</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>请求ID。唯一标识一条请求。</p>          <p>支持英文字符，数字和中文，长度不限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>audio</p></td>         <td class="cellrowborder" width="30.8%">          <p>ArrayBuffer</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>音频流。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>response</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section8985194614315">SynthesisResponse</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>返回的音频流相关信息。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1638144844811" device-type="phone,2in1,tablet">CreateEngineParams<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1638144844811" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>创建引擎实例的相关参数，用于配置语种、模式、音色和风格等。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.1" width="14.97149714971497%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.2" width="25.752575257525752%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.3" width="7.520752075207521%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.4" width="6.7006700670067%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.5" width="45.05450545054506%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="14.97149714971497%">          <p>language</p></td>         <td class="cellrowborder" width="25.752575257525752%">          <p>string</p></td>         <td class="cellrowborder" width="7.520752075207521%">          <p>否</p></td>         <td class="cellrowborder" width="6.7006700670067%">          <p>否</p></td>         <td class="cellrowborder" width="45.05450545054506%">          <p>语种，当前支持中文、英文。</p>          <p>中文推荐使用“zh-CN”格式，兼容“zh_CN”格式。</p>          <p>英文推荐使用“en-US”格式，兼容“en_US”格式。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="14.97149714971497%">          <p>online</p></td>         <td class="cellrowborder" width="25.752575257525752%">          <p>number</p></td>         <td class="cellrowborder" width="7.520752075207521%">          <p>否</p></td>         <td class="cellrowborder" width="6.7006700670067%">          <p>否</p></td>         <td class="cellrowborder" width="45.05450545054506%">          <p>模式。</p>          <p>0为在线，目前不支持；1为离线，当前仅支持离线模式。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="14.97149714971497%">          <p>person</p></td>         <td class="cellrowborder" width="25.752575257525752%">          <p>number</p></td>         <td class="cellrowborder" width="7.520752075207521%">          <p>否</p></td>         <td class="cellrowborder" width="6.7006700670067%">          <p>否</p></td>         <td class="cellrowborder" width="45.05450545054506%">          <p>音色。</p>          <p>中文：13为聆小珊女声音色（推荐使用13，同时支持0）；21为凌飞哲男声音色（需下载）。</p>          <p>英文：8为英语（美国）劳拉女声音色（需下载）。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="14.97149714971497%">          <p>extraParams</p></td>         <td class="cellrowborder" width="25.752575257525752%">          <p>Record&lt;string, Object&gt;</p></td>         <td class="cellrowborder" width="7.520752075207521%">          <p>否</p></td>         <td class="cellrowborder" width="6.7006700670067%">          <p>是</p></td>         <td class="cellrowborder" width="45.05450545054506%">          <ul>           <li>&lt;'style', string&gt; 风格。</li>          </ul>          <p>可选，不设置时默认为“interaction-broadcast”，当前仅支持“interaction-broadcast”。</p>          <p>interaction-broadcast：广播风格。</p>          <ul>           <li>&lt;'locate', string&gt; 区域信息。</li>          </ul>          <p>可选，不设置时默认为“CN”，当前仅支持“CN”。</p>          <p>CN:中国。</p>          <ul>           <li>&lt;'name', string&gt; 引擎名称。</li>          </ul>          <p>可选，引擎名称，不可以是随机数，不设置时默认为空，当前支持多应用、多实例，同一个设备上所有应用一共最多支持3个实例。</p>          <ul>           <li>&lt;'isBackStage', boolean&gt; 是否支持后台播报。</li>          </ul>          <p>可选，不设置时默认不支持后台播报。设置'isBackStage': true时，TTS支持后台播报。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 设置创建引擎参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">extraParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt; = {<span class="hljs-string">"style"</span>: <span class="hljs-string">'interaction-broadcast'</span>, <span class="hljs-string">"locate"</span>: <span class="hljs-string">'CN'</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">'EngineName'</span>,<span class="hljs-string">'isBackStage'</span>: <span class="hljs-literal">true</span>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">initParamsInfo</span>: textToSpeech.<span class="hljs-property">CreateEngineParams</span> = {</li><li>  <span class="hljs-attr">language</span>: <span class="hljs-string">'zh-CN'</span>,</li><li>  <span class="hljs-attr">person</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">online</span>: <span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">extraParams</span>: extraParam</li><li>};</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section235272615215" device-type="phone,2in1,tablet">VoiceQuery<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section235272615215" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>查询音色语种信息的相关参数。例如查询离线模式、中文语种所支持的音色信息，需将online参数设置为1，language参数设置为“zh-CN”。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.1" width="17.549999999999997%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.2" width="19.34%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.4" width="12.4%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.5" width="43.19%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="17.549999999999997%">          <p>requestId</p></td>         <td class="cellrowborder" width="19.34%">          <p>string</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="12.4%">          <p>否</p></td>         <td class="cellrowborder" width="43.19%">          <p>请求ID。唯一标识一条请求。</p>          <p>支持英文字符，数字和中文，长度不限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="17.549999999999997%">          <p>online</p></td>         <td class="cellrowborder" width="19.34%">          <p>number</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="12.4%">          <p>否</p></td>         <td class="cellrowborder" width="43.19%">          <p>模式。</p>          <p>0为在线，目前不支持；1为离线，当前仅支持离线。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="17.549999999999997%">          <p>extraParams</p></td>         <td class="cellrowborder" width="19.34%">          <p>Record&lt;string, Object&gt;</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="12.4%">          <p>是</p></td>         <td class="cellrowborder" width="43.19%">          <ul>           <li>&lt;'language', string&gt; 查询的语种。</li>          </ul>          <p>可选，当前支持“zh-CN”中文，“en-US”英文。不填时查询全量列表。</p>          <ul>           <li>&lt;'person', number&gt; 查询的音色。</li>          </ul>          <p>可选，非空时则language必填。不填时查询全量列表。</p>          <p>中文支持：</p>          <p>13. 聆小珊女声音色（推荐使用13，同时支持0）；</p>          <p>21. 凌飞哲男声音色（需下载）。</p>          <p>英文支持：</p>          <p>8. 英语（美国）劳拉女声音色（需下载）。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 设置创建引擎参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">extraParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt; = {<span class="hljs-string">"language"</span>: <span class="hljs-string">'zh-CN'</span>, <span class="hljs-string">"person"</span>: <span class="hljs-number">0</span>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">voiceQuery</span>: textToSpeech.<span class="hljs-property">VoiceQuery</span>= {</li><li>  <span class="hljs-attr">requestId</span>: <span class="hljs-string">'12345678'</span>, <span class="hljs-comment">// requestId在同一实例内仅能用一次，请勿重复设置</span></li><li>  <span class="hljs-attr">online</span>: <span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">extraParams</span>: extraParam</li><li>};</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section10297014134719" device-type="phone,2in1,tablet">VoiceDownload<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10297014134719" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>下载音色时的相关参数，所有参数通过listVoices接口获取。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.1" width="17.549999999999997%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.2" width="19.34%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.4" width="12.4%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.5" width="43.19%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="17.549999999999997%">          <p>requestId</p></td>         <td class="cellrowborder" width="19.34%">          <p>string</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="12.4%">          <p>否</p></td>         <td class="cellrowborder" width="43.19%">          <p>请求ID。唯一标识一条请求。</p>          <p>支持英文字符，数字和中文，长度不限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="17.549999999999997%">          <p>language</p></td>         <td class="cellrowborder" width="19.34%">          <p>string</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="12.4%">          <p>否</p></td>         <td class="cellrowborder" width="43.19%">          <p>支持下载的语种，有效范围通过<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section813761871119">listVoices（Callback异步回调）</a>和<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section125219451411">listVoices（Promise异步回调）</a>获取。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="17.549999999999997%">          <p>person</p></td>         <td class="cellrowborder" width="19.34%">          <p>number</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="12.4%">          <p>否</p></td>         <td class="cellrowborder" width="43.19%">          <p>支持下载的音色，有效范围通过<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section813761871119">listVoices（Callback异步回调）</a>和<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section125219451411">listVoices（Promise异步回调）</a>获取。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="17.549999999999997%">          <p>style</p></td>         <td class="cellrowborder" width="19.34%">          <p>string</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="12.4%">          <p>否</p></td>         <td class="cellrowborder" width="43.19%">          <p>支持下载的音色风格，有效范围通过<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section813761871119">listVoices（Callback异步回调）</a>和<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section125219451411">listVoices（Promise异步回调）</a>获取。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">textToSpeech</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 设置下载音色相关参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">voicesDownload</span>: <span class="hljs-title class_">textToSpeech</span>.<span class="hljs-title class_">VoiceDownload</span> = {</li><li>  <span class="hljs-variable">requestId</span>: <span class="hljs-string">'12345678-b'</span>, <span class="hljs-comment">// 请求ID，ID不可重复</span></li><li>  <span class="hljs-variable">language</span>: <span class="hljs-string">'en-US'</span>,</li><li>  <span class="hljs-variable">person</span>: <span class="hljs-number">8</span>,</li><li>  <span class="hljs-variable">style</span>: <span class="hljs-string">'interaction-broadcast'</span></li><li>};</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section037913322072" device-type="phone,2in1,tablet">DownloadResponse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section037913322072" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>下载音色语种时的回调对象。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.6.1.1" width="17.549999999999997%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.6.1.2" width="19.34%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.6.1.4" width="12.4%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.6.1.5" width="43.19%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="17.549999999999997%">          <p>requestId</p></td>         <td class="cellrowborder" width="19.34%">          <p>string</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="12.4%">          <p>否</p></td>         <td class="cellrowborder" width="43.19%">          <p>请求ID。唯一标识一条请求。</p>          <p>支持英文字符，数字和中文，长度不限制。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section193426145491" device-type="phone,2in1,tablet" class="firsth2">on('start')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section193426145491" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'start', callback: Callback&lt;string&gt;): void</p>     <p>音色下载开始时，触发此接口，接收下载开始信息。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>type</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>固定字符串“start”。监听音色下载开始事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>callback回调，接收下载开始信息。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 定义函数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">startCallback</span>: <span class="hljs-title class_">Callback</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-function">(<span class="hljs-params">info: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 开始下载回调</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`download voice start, info:<span class="hljs-subst">${info}</span>}`</span>);</li><li>}</li><li><span class="hljs-comment">// downloadResponse由接口</span><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section376811290229"><span class="hljs-comment">textToSpeech.downloadVoice</span></a><span class="hljs-comment">中获取</span></li><li><span class="hljs-comment">// 注册下载开始事件回调</span></li><li>downloadResponse.<span class="hljs-title function_">on</span>(<span class="hljs-string">'start'</span>, startCallback);</li><li><span class="hljs-comment">// 取消下载开始事件回调注册</span></li><li>downloadResponse.<span class="hljs-title function_">off</span>(<span class="hljs-string">'start'</span>, startCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section1840642125910" device-type="phone,2in1,tablet">on('progress')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1840642125910" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'progress', callback: Callback&lt;string&gt;): void</p>     <p>音色下载过程中，触发此接口，接收下载进度信息。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>type</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>固定字符串“progress”。监听音色下载进度事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>callback回调，接收下载进度信息。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 定义函数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">progressCallback</span>: <span class="hljs-title class_">Callback</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-function">(<span class="hljs-params">schedule: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 下载进度回调</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`download voice schedule, scheduleInfo: <span class="hljs-subst">${schedule}</span>`</span>);</li><li>}</li><li><span class="hljs-comment">// downloadResponse由接口</span><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section376811290229"><span class="hljs-comment">textToSpeech.downloadVoice</span></a><span class="hljs-comment">中获取</span></li><li><span class="hljs-comment">// 注册下载进度事件回调</span></li><li>downloadResponse.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, progressCallback);</li><li><span class="hljs-comment">// 取消下载进度事件回调注册</span></li><li>downloadResponse.<span class="hljs-title function_">off</span>(<span class="hljs-string">'progress'</span>,progressCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section8212194719592" device-type="phone,2in1,tablet">on('complete')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section8212194719592" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'complete', callback: Callback&lt;VoiceInfo&gt;): void</p>     <p>音色下载完成时，触发此接口，接收下载完成音色信息。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>type</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>固定字符串“complete”。监听音色下载完成事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section85771521101910">VoiceInfo</a>&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>callback回调，接收下载完成的音色信息。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">定义函数</span></span></li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">completeCallback</span>: <span class="hljs-title class_">Callback</span>&lt;<span class="hljs-title class_">textToSpeech</span>.<span class="hljs-title class_">VoiceInfo</span>&gt; = (<span class="hljs-variable">voiceInfo</span>: <span class="hljs-title class_">textToSpeech</span>.<span class="hljs-title class_">VoiceInfo</span>) =&gt; {</li><li>  <span class="hljs-comment">// 下载完成回调</span></li><li>  <span class="hljs-variable">console</span>.<span class="hljs-title function_">info</span>(`<span class="hljs-variable">download</span> <span class="hljs-variable">voice</span> <span class="hljs-variable">complete</span>, <span class="hljs-variable">voiceInfo</span>: ${<span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">voiceInfo</span>)}`);</li><li>}</li><li><span class="hljs-comment">// downloadResponse由接口</span><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section376811290229"><span class="hljs-comment">textToSpeech.downloadVoice</span></a><span class="hljs-comment">中获取</span></li><li><span class="hljs-comment">// 注册下载完成事件回调</span></li><li><span class="hljs-variable">downloadResponse</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'complete'</span>, <span class="hljs-variable">completeCallback</span>);</li><li><span class="hljs-comment">// 取消下载完成事件回调注册</span></li><li><span class="hljs-variable">downloadResponse</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'complete'</span>,<span class="hljs-variable">completeCallback</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section28621348125911" device-type="phone,2in1,tablet">on('cancel')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section28621348125911" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'cancel', callback: Callback&lt;string&gt;): void</p>     <p>用户点击进度框上关闭按钮，取消下载时，触发此接口，接收取消下载信息。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>type</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>固定字符串“cancel”。监听用户取消音色下载事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>callback回调，接收用户取消下载信息。</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>点击下载同意弹窗上的“取消”按钮不会触发此回调。</p>      </div></div></div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 定义函数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">cancelCallback</span>: <span class="hljs-title class_">Callback</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-function">(<span class="hljs-params">cancelInfo: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 用户取消下载回调</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`download voice cancel, cancelInfo: <span class="hljs-subst">${cancelInfo}</span>`</span>);</li><li>}</li><li><span class="hljs-comment">// downloadResponse由接口</span><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section376811290229"><span class="hljs-comment">textToSpeech.downloadVoice</span></a><span class="hljs-comment">中获取</span></li><li><span class="hljs-comment">// 注册下载取消事件回调</span></li><li>downloadResponse.<span class="hljs-title function_">on</span>(<span class="hljs-string">'cancel'</span>, cancelCallback);</li><li><span class="hljs-comment">// 取消下载取消事件回调注册</span></li><li>downloadResponse.<span class="hljs-title function_">off</span>(<span class="hljs-string">'cancel'</span>,cancelCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section13722549145917" device-type="phone,2in1,tablet">on('error')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13722549145917" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'error', callback: ErrorCallback&lt;BusinessError&gt;): void</p>     <p>音色下载错误时，触发此接口，接收下载错误信息。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>type</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>固定字符串“error”。监听音色下载出错事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#errorcallback" target="_blank">ErrorCallback</a>&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#businesserror" target="_blank">BusinessError</a>&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>callback回调，接收下载错误信息。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 定义函数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">errorCallback</span>: <span class="hljs-title class_">ErrorCallback</span>&lt;<span class="hljs-title class_">BusinessError</span>&gt; = (<span class="hljs-variable">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>  <span class="hljs-comment">// 下载过程错误回调</span></li><li>  <span class="hljs-variable">console</span>.<span class="hljs-title function_">error</span>(`<span class="hljs-variable">download</span> <span class="hljs-variable">voice</span> <span class="hljs-variable">error</span>, <span class="hljs-variable">errorCode</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">code</span>} <span class="hljs-variable">errorMessage</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">message</span>}`);</li><li>}</li><li><span class="hljs-comment">// downloadResponse由接口</span><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section376811290229"><span class="hljs-comment">textToSpeech.downloadVoice</span></a><span class="hljs-comment">中获取</span></li><li><span class="hljs-comment">// 注册下载过程出错事件回调</span></li><li><span class="hljs-variable">downloadResponse</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-variable">errorCallback</span>);</li><li><span class="hljs-comment">// 取消下载过程出错事件回调注册</span></li><li><span class="hljs-variable">downloadResponse</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'error'</span>,<span class="hljs-variable">errorCallback</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section74873503595" device-type="phone,2in1,tablet">off('start')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section74873503595" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'start', callback?: Callback&lt;string&gt;): void</p>     <p>取消监听音色下载开始事件。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>type</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>固定字符串“start”。取消监听下载开始事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>否</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>需要取消注册的回调函数，需与监听时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 定义函数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">startCallback</span>: <span class="hljs-title class_">Callback</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-function">(<span class="hljs-params">info: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 开始下载回调</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`download voice start, info:<span class="hljs-subst">${info}</span>}`</span>);</li><li>}</li><li><span class="hljs-comment">// downloadResponse由接口</span><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section376811290229"><span class="hljs-comment">textToSpeech.downloadVoice</span></a><span class="hljs-comment">中获取</span></li><li><span class="hljs-comment">// 注册下载开始事件回调</span></li><li>downloadResponse.<span class="hljs-title function_">on</span>(<span class="hljs-string">'start'</span>, startCallback);</li><li><span class="hljs-comment">// 取消下载开始事件回调注册</span></li><li>downloadResponse.<span class="hljs-title function_">off</span>(<span class="hljs-string">'start'</span>, startCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section1035517512598" device-type="phone,2in1,tablet">off('progress')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1035517512598" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'progress', callback?: Callback&lt;string&gt;): void</p>     <p>取消监听音色下载过程事件。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>type</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>固定字符串“progress”。取消监听下载过程事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>否</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>需要取消注册的回调函数，需与监听时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 定义函数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">progressCallback</span>: <span class="hljs-title class_">Callback</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-function">(<span class="hljs-params">schedule: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 下载进度回调</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`download voice schedule, scheduleInfo: <span class="hljs-subst">${schedule}</span>`</span>);</li><li>}</li><li><span class="hljs-comment">// downloadResponse由接口</span><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section376811290229"><span class="hljs-comment">textToSpeech.downloadVoice</span></a><span class="hljs-comment">中获取</span></li><li><span class="hljs-comment">// 注册下载进度事件回调</span></li><li>downloadResponse.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, progressCallback);</li><li><span class="hljs-comment">// 取消下载进度事件回调注册</span></li><li>downloadResponse.<span class="hljs-title function_">off</span>(<span class="hljs-string">'progress'</span>,progressCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section1216655215590" device-type="phone,2in1,tablet">off('complete')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1216655215590" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'complete', callback?: Callback&lt;VoiceInfo&gt;): void</p>     <p>取消监听音色下载完成事件。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>type</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>固定字符串“complete”。取消监听下载完成事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section85771521101910">VoiceInfo</a>&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>否</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>需要取消注册的回调函数，需与监听时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 定义函数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">completeCallback</span>: <span class="hljs-title class_">Callback</span>&lt;<span class="hljs-title class_">textToSpeech</span>.<span class="hljs-title class_">VoiceInfo</span>&gt; = (<span class="hljs-variable">voiceInfo</span>: <span class="hljs-title class_">textToSpeech</span>.<span class="hljs-title class_">VoiceInfo</span>) =&gt; {</li><li>  <span class="hljs-comment">// 下载完成回调</span></li><li>  <span class="hljs-variable">console</span>.<span class="hljs-title function_">info</span>(`<span class="hljs-variable">download</span> <span class="hljs-variable">voice</span> <span class="hljs-variable">complete</span>, <span class="hljs-variable">voiceInfo</span>: ${<span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">voiceInfo</span>)}`);</li><li>}</li><li><span class="hljs-comment">// downloadResponse由接口</span><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section376811290229"><span class="hljs-comment">textToSpeech.downloadVoice</span></a><span class="hljs-comment">中获取</span></li><li><span class="hljs-comment">// 注册下载完成事件回调</span></li><li><span class="hljs-variable">downloadResponse</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'complete'</span>, <span class="hljs-variable">completeCallback</span>);</li><li><span class="hljs-comment">// 取消下载完成事件回调注册</span></li><li><span class="hljs-variable">downloadResponse</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'complete'</span>,<span class="hljs-variable">completeCallback</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section79319525596" device-type="phone,2in1,tablet">off('cancel')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section79319525596" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'cancel', callback?: Callback&lt;string&gt;): void</p>     <p>取消监听音色下载取消事件。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>type</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>固定字符串“cancel”。取消监听下载取消事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>否</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>需要取消注册的回调函数，需与监听时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 定义函数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">cancelCallback</span>: <span class="hljs-title class_">Callback</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-function">(<span class="hljs-params">cancelInfo: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 用户取消下载回调</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`download voice cancel, cancelInfo: <span class="hljs-subst">${cancelInfo}</span>`</span>);</li><li>}</li><li><span class="hljs-comment">// downloadResponse由接口</span><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section376811290229"><span class="hljs-comment">textToSpeech.downloadVoice</span></a><span class="hljs-comment">中获取</span></li><li><span class="hljs-comment">// 注册下载取消事件回调</span></li><li>downloadResponse.<span class="hljs-title function_">on</span>(<span class="hljs-string">'cancel'</span>, cancelCallback);</li><li><span class="hljs-comment">// 取消下载取消事件回调注册</span></li><li>downloadResponse.<span class="hljs-title function_">off</span>(<span class="hljs-string">'cancel'</span>,cancelCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section189095355920" device-type="phone,2in1,tablet">off('error')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section189095355920" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'error', callback?: ErrorCallback&lt;BusinessError&gt;): void</p>     <p>取消监听音色下载错误事件。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>type</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>固定字符串“error”。取消监听下载错误事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#errorcallback" target="_blank">ErrorCallback</a>&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#businesserror" target="_blank">BusinessError</a>&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>否</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>需要取消注册的回调函数，需与监听时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 定义函数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">errorCallback</span>: <span class="hljs-title class_">ErrorCallback</span>&lt;<span class="hljs-title class_">BusinessError</span>&gt; = (<span class="hljs-variable">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>  <span class="hljs-comment">// 下载过程错误回调</span></li><li>  <span class="hljs-variable">console</span>.<span class="hljs-title function_">error</span>(`<span class="hljs-variable">download</span> <span class="hljs-variable">voice</span> <span class="hljs-variable">error</span>, <span class="hljs-variable">errorCode</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">code</span>} <span class="hljs-variable">errorMessage</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">message</span>}`);</li><li>}</li><li><span class="hljs-comment">// downloadResponse由接口</span><a href="/consumer/cn/doc/harmonyos-references/hms-ai-texttospeech#section376811290229"><span class="hljs-comment">textToSpeech.downloadVoice</span></a><span class="hljs-comment">中获取</span></li><li><span class="hljs-comment">// 注册下载过程出错事件回调</span></li><li><span class="hljs-variable">downloadResponse</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-variable">errorCallback</span>);</li><li><span class="hljs-comment">// 取消下载过程出错事件回调注册</span></li><li><span class="hljs-variable">downloadResponse</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'error'</span>,<span class="hljs-variable">errorCallback</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section7843122735210" device-type="phone,2in1,tablet">SpeakParams<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7843122735210" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>合成播报音频流的相关参数，用于配置语速、音量、音调、合成类型等。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.5.1.6.1.1" width="13.59%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.38.5.1.6.1.2" width="21.75%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.38.5.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.38.5.1.6.1.4" width="22.439999999999998%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.38.5.1.6.1.5" width="34.699999999999996%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="13.59%">          <p>requestId</p></td>         <td class="cellrowborder" width="21.75%">          <p>string</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="22.439999999999998%">          <p>否</p></td>         <td class="cellrowborder" width="34.699999999999996%">          <p>合成播报ID，全局不允许重复。</p>          <p>支持英文字符，数字和中文，此字段用于区分不同请求，长度不限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="13.59%">          <p>extraParams</p></td>         <td class="cellrowborder" width="21.75%">          <p>Record&lt;string, Object&gt;</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="22.439999999999998%">          <p>是</p></td>         <td class="cellrowborder" width="34.699999999999996%">          <ul>           <li>&lt;'speed', number&gt; 语速。</li>          </ul>          <p>可选，支持范围[0.5-2]，不传参时默认为1，使用一倍语速合成音频流。</p>          <ul>           <li>&lt;'volume', number&gt; 音量。</li>          </ul>          <p>可选，支持范围[0-2]，不传参时默认为1，使用一倍音量合成音频流。</p>          <ul>           <li>&lt;'pitch', number&gt; 音调。</li>          </ul>          <p>可选，支持范围[0.5-2]，不传参时默认为1，使用正常音调合成音频流。</p>          <ul>           <li>&lt;'languageContext', string&gt; 语境，播放阿拉伯数字用的语种。</li>          </ul>          <p>可选，当前支持“zh-CN”中文与“en-US”英文，不传参时默认“zh-CN”。</p>          <ul>           <li>&lt;'audioType', string&gt; 音频类型。</li>          </ul>          <p>可选，当前仅支持“pcm”，不传参时默认为“pcm”（PCM 即脉冲编码调制 (Pulse Code Modulation)）。</p>          <ul>           <li>&lt;'playType', number&gt; 合成类型。</li>          </ul>          <p>可选，不传参时默认为1。</p>          <p>0：仅合成不播报，返回音频流。</p>          <p>1：合成与播报不返回音频流。</p>          <ul>           <li>&lt;'soundChannel', number&gt; 播报通道。</li>          </ul>          <p>可选，参数范围请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#streamusage" target="_blank">音频流使用</a>来选择适合自己的音频场景，范围之外会播报异常。</p>          <p>不传参时默认为3，语音助手通道。</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p>如果使用了通道1或12，设备息屏场景下，会出现播报截断的问题，原因是进入了音频的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/power-saving-for-playback" target="_blank">低功耗模式</a>。</p>           </div></div></div>          <ul>           <li>&lt;'queueMode', number&gt; 播报模式。</li>          </ul>          <p>可选，不传参时默认为0。</p>          <p>0：排队模式播报。</p>          <p>1：抢占模式播报。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-yhk-c106="" class="highlight-div"><div _ngcontent-yhk-c106="" class="highlight-div-header"><div _ngcontent-yhk-c106="" class="highlight-div-header-left"><div _ngcontent-yhk-c106="" class="handle-button expand-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yhk-c106="" class="highlight-div-header-right"><div _ngcontent-yhk-c106="" class="handle-button ai-button"></div><div _ngcontent-yhk-c106="" class="handle-button line-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yhk-c106="" class="handle-button theme-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yhk-c106="" class="handle-button copy-button"><div _ngcontent-yhk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yhk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textToSpeech } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 设置播报相关参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">extraParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt; = {<span class="hljs-string">"queueMode"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"speed"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"volume"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"pitch"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"languageContext"</span>: <span class="hljs-string">'zh-CN'</span>, <span class="hljs-string">"audioType"</span>: <span class="hljs-string">"pcm"</span>, <span class="hljs-string">"soundChannel"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"playType"</span>:<span class="hljs-number">1</span>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">speakParams</span>: textToSpeech.<span class="hljs-property">SpeakParams</span> = {</li><li>  <span class="hljs-attr">requestId</span>: <span class="hljs-string">'123456'</span>, <span class="hljs-comment">// requestId在同一实例内仅能用一次，请勿重复设置</span></li><li>  <span class="hljs-attr">extraParams</span>: extraParam</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section85771521101910" device-type="phone,2in1,tablet">VoiceInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section85771521101910" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>返回查询的相关参数。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.5.1.6.1.1" width="22.86228622862286%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.39.5.1.6.1.2" width="20.152015201520154%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.39.5.1.6.1.3" width="7.520752075207521%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.39.5.1.6.1.4" width="6.950695069506951%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.39.5.1.6.1.5" width="42.51425142514251%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="22.86228622862286%">          <p>language</p></td>         <td class="cellrowborder" width="20.152015201520154%">          <p>string</p></td>         <td class="cellrowborder" width="7.520752075207521%">          <p>否</p></td>         <td class="cellrowborder" width="6.950695069506951%">          <p>否</p></td>         <td class="cellrowborder" width="42.51425142514251%">          <p>支持的语种信息。当前支持中文、英文。</p>          <p>中文推荐使用“zh-CN”格式，兼容“zh_CN”格式。</p>          <p>英文推荐使用“en-US”格式，兼容“en_US”格式。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="22.86228622862286%">          <p>person</p></td>         <td class="cellrowborder" width="20.152015201520154%">          <p>number</p></td>         <td class="cellrowborder" width="7.520752075207521%">          <p>否</p></td>         <td class="cellrowborder" width="6.950695069506951%">          <p>否</p></td>         <td class="cellrowborder" width="42.51425142514251%">          <p>支持的音色信息。</p>          <p>中文：13为聆小珊女声音色（推荐使用13，同时支持0）；21为凌飞哲男声音色（需下载）。</p>          <p>英文：8为英语（美国）劳拉女声音色（需下载）。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="22.86228622862286%">          <p>style</p></td>         <td class="cellrowborder" width="20.152015201520154%">          <p>string</p></td>         <td class="cellrowborder" width="7.520752075207521%">          <p>否</p></td>         <td class="cellrowborder" width="6.950695069506951%">          <p>否</p></td>         <td class="cellrowborder" width="42.51425142514251%">          <p>风格。</p>          <ul>           <li>interaction-broadcast：普通话播报。</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="22.86228622862286%">          <p>gender</p></td>         <td class="cellrowborder" width="20.152015201520154%">          <p>string</p></td>         <td class="cellrowborder" width="7.520752075207521%">          <p>否</p></td>         <td class="cellrowborder" width="6.950695069506951%">          <p>否</p></td>         <td class="cellrowborder" width="42.51425142514251%">          <p>性别。</p>          <ul>           <li>Male：男性。</li>           <li>Female：女性。</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="22.86228622862286%">          <p>description</p></td>         <td class="cellrowborder" width="20.152015201520154%">          <p>string</p></td>         <td class="cellrowborder" width="7.520752075207521%">          <p>否</p></td>         <td class="cellrowborder" width="6.950695069506951%">          <p>否</p></td>         <td class="cellrowborder" width="42.51425142514251%">          <p>语音的描述，角色属性、支持的情感等说明。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="22.86228622862286%">          <p>status</p></td>         <td class="cellrowborder" width="20.152015201520154%">          <p>string</p></td>         <td class="cellrowborder" width="7.520752075207521%">          <p>否</p></td>         <td class="cellrowborder" width="6.950695069506951%">          <p>是</p></td>         <td class="cellrowborder" width="42.51425142514251%">          <p>音色模型状态。</p>          <ul>           <li>'GA'：音色可下载。</li>           <li>'INSTALLED'：音色已下载。</li>           <li>'EOM'：音色不可用。</li>          </ul>          <p><strong>起始版本：</strong>5.1.1(19)</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section270311282525" device-type="phone,2in1,tablet">StartResponse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section270311282525" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>返回播放的相关参数。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.40.5.1.6.1.1" width="28.51%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.40.5.1.6.1.2" width="28.51%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.40.5.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.40.5.1.6.1.4" width="6.950000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.40.5.1.6.1.5" width="28.51%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="28.51%">          <p>audioType</p></td>         <td class="cellrowborder" width="28.51%">          <p>string</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="6.950000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="28.51%">          <p>音频类型，当前仅支持“pcm”（PCM 即脉冲编码调制（Pulse Code Modulation））。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.51%">          <p>sampleRate</p></td>         <td class="cellrowborder" width="28.51%">          <p>number</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="6.950000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="28.51%">          <p>音频返回的采样率信息。当前仅支持16000采样率。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.51%">          <p>sampleBit</p></td>         <td class="cellrowborder" width="28.51%">          <p>number</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="6.950000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="28.51%">          <p>音频返回的采样位数。当前仅支持16位。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.51%">          <p>audioChannel</p></td>         <td class="cellrowborder" width="28.51%">          <p>number</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="6.950000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="28.51%">          <p>音频返回的通道数信息。取决于输入通道信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.51%">          <p>compressRate</p></td>         <td class="cellrowborder" width="28.51%">          <p>number</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="6.950000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="28.51%">          <p>pcm格式默认为0（PCM 即脉冲编码调制（Pulse Code Modulation））。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section892952965214" device-type="phone,2in1,tablet">StopResponse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section892952965214" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>返回停止播报时的相关参数。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.5.1.6.1.1" width="28.51%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.41.5.1.6.1.2" width="28.51%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.41.5.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.41.5.1.6.1.4" width="6.950000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.41.5.1.6.1.5" width="28.51%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="28.51%">          <p>type</p></td>         <td class="cellrowborder" width="28.51%">          <p>number</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="6.950000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="28.51%">          <p>代表结束的类型。</p>          <ul>           <li>0：同时结束合成和播报。</li>           <li>1：只结束播报。</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="28.51%">          <p>message</p></td>         <td class="cellrowborder" width="28.51%">          <p>string</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="6.950000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="28.51%">          <p>返回信息说明。</p>          <p>字符长度范围[0, 30]。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section26265304523" device-type="phone,2in1,tablet">CompleteResponse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section26265304523" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>返回完成播报时的相关参数。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.42.5.1.6.1.1" width="28.4971502849715%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.42.5.1.6.1.2" width="28.4971502849715%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.42.5.1.6.1.3" width="7.519248075192481%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.42.5.1.6.1.4" width="6.95930406959304%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.42.5.1.6.1.5" width="28.52714728527147%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="28.4971502849715%">          <p>type</p></td>         <td class="cellrowborder" width="28.4971502849715%">          <p>number</p></td>         <td class="cellrowborder" width="7.519248075192481%">          <p>否</p></td>         <td class="cellrowborder" width="6.95930406959304%">          <p>否</p></td>         <td class="cellrowborder" width="28.52714728527147%">          <p>代表合成或播报结束。</p>          <ul>           <li>0：合成结束。</li>           <li>1：播报结束。</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="28.4971502849715%">          <p>message</p></td>         <td class="cellrowborder" width="28.4971502849715%">          <p>string</p></td>         <td class="cellrowborder" width="7.519248075192481%">          <p>否</p></td>         <td class="cellrowborder" width="6.95930406959304%">          <p>否</p></td>         <td class="cellrowborder" width="28.52714728527147%">          <p>返回信息说明。</p>          <p>字符长度范围[0, 30]。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section8985194614315" device-type="phone,2in1,tablet">SynthesisResponse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section8985194614315" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>返回的音频流相关信息。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.TextToSpeech</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.43.5.1.6.1.1" width="24.412441244124413%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.43.5.1.6.1.2" width="24.412441244124413%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.43.5.1.6.1.3" width="7.520752075207521%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.43.5.1.6.1.4" width="6.950695069506951%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.43.5.1.6.1.5" width="36.7036703670367%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="24.412441244124413%">          <p>sequence</p></td>         <td class="cellrowborder" width="24.412441244124413%">          <p>number</p></td>         <td class="cellrowborder" width="7.520752075207521%">          <p>否</p></td>         <td class="cellrowborder" width="6.950695069506951%">          <p>否</p></td>         <td class="cellrowborder" width="36.7036703670367%">          <p>代表返回的音频数据的次序。</p>          <p>从0开始，每次加1。</p>          <p>取值范围[0, 100000]。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.412441244124413%">          <p>audioType</p></td>         <td class="cellrowborder" width="24.412441244124413%">          <p>string</p></td>         <td class="cellrowborder" width="7.520752075207521%">          <p>否</p></td>         <td class="cellrowborder" width="6.950695069506951%">          <p>否</p></td>         <td class="cellrowborder" width="36.7036703670367%">          <p>返回的音频数据类型，当前仅支持‘pcm’类型（PCM 即脉冲编码调制 (Pulse Code Modulation)）。</p></td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>