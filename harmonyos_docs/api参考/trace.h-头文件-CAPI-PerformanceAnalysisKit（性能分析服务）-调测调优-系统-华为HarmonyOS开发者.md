<h1 _ngcontent-ama-c119="" class="doc-title ng-star-inserted" title="trace.h"> trace.h </h1>

<div _ngcontent-ama-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;"> <div> <div class="tiledSection" style="contain-intrinsic-size: auto 494px;"><h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>HiTraceMeter和HitraceChain模块接口定义，通过这些接口实现性能打点和分布式跟踪功能。</p> <p>用户态trace格式使用竖线字符作为分隔符，所以通过HiTraceMeter接口传递的字符串类型参数应避免包含该字符，防止trace解析异常。</p> <p>用户态trace总长度限制512字符，超过的部分将会被截断。</p> <p><strong>引用文件：</strong> &lt;hitrace/trace.h&gt;</p> <p><strong>库：</strong> libhitrace_ndk.z.so</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 10</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace">Hitrace</a></p> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 146px;"><h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 213px;"><h3 id="结构体" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a></td> <td class="cellrowborder" width="33.33333333333333%">HiTraceId</td> <td class="cellrowborder" width="33.33333333333333%">HiTraceId定义。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 550px;"><h3 id="枚举" device-type="phone,2in1,tablet,wearable,tv">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#hitraceid_valid">HiTraceId_Valid</a></td> <td class="cellrowborder" width="33.33333333333333%">HiTraceId_Valid</td> <td class="cellrowborder" width="33.33333333333333%">HiTraceId是否有效标志。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_version">HiTrace_Version</a></td> <td class="cellrowborder" width="33.33333333333333%">HiTrace_Version</td> <td class="cellrowborder" width="33.33333333333333%">HiTrace版本号。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_flag">HiTrace_Flag</a></td> <td class="cellrowborder" width="33.33333333333333%">HiTrace_Flag</td> <td class="cellrowborder" width="33.33333333333333%">HiTrace跟踪标志。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_tracepoint_type">HiTrace_Tracepoint_Type</a></td> <td class="cellrowborder" width="33.33333333333333%">HiTrace_Tracepoint_Type</td> <td class="cellrowborder" width="33.33333333333333%">跟踪埋点类型枚举。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_communication_mode">HiTrace_Communication_Mode</a></td> <td class="cellrowborder" width="33.33333333333333%">HiTrace_Communication_Mode</td> <td class="cellrowborder" width="33.33333333333333%">跟踪通信类型枚举。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_output_level">HiTrace_Output_Level</a></td> <td class="cellrowborder" width="33.33333333333333%">HiTrace_Output_Level</td> <td class="cellrowborder" width="33.33333333333333%">HiTrace输出级别。低于系统跟踪输出级别阈值的打点将不会生效。log版本阈值为HITRACE_LEVEL_INFO；nolog版本阈值为HITRACE_LEVEL_COMMERCIAL。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 4186px;"><h3 id="函数" device-type="phone,2in1,tablet,wearable,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.1" width="50%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_beginchain">HiTraceId OH_HiTrace_BeginChain(const char *name, int flags)</a></td> <td class="cellrowborder" width="50%"><p>开始跟踪。</p> <p> 当前线程TLS（Thread Local Storage，线程本地存储）中不存在有效的HiTraceId时，生成有效的HiTraceId并设置到当前线程TLS中，返回该HiTraceId。</p> <p> 当前线程TLS中已存在有效的HiTraceId时，不会开始新的跟踪，返回各属性值均为0的无效HiTraceId。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_endchain">void OH_HiTrace_EndChain()</a></td> <td class="cellrowborder" width="50%"><p>结束跟踪。</p> <p> 结束跟踪并将当前线程TLS中的HiTraceId设置为无效。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_getid">HiTraceId OH_HiTrace_GetId()</a></td> <td class="cellrowborder" width="50%"><p>获取跟踪标识。</p> <p> 获取当前线程TLS中的HiTraceId。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_setid">void OH_HiTrace_SetId(const HiTraceId *id)</a></td> <td class="cellrowborder" width="50%"><p>设置跟踪标识。</p> <p> 将给定的HiTraceId设置到当前线程TLS中。若给定的HiTraceId无效，则不执行任何操作。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_clearid">void OH_HiTrace_ClearId(void)</a></td> <td class="cellrowborder" width="50%"><p>清除跟踪标识。</p> <p> 将当前线程TLS中的HiTraceId设置为无效。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_createspan">HiTraceId OH_HiTrace_CreateSpan(void)</a></td> <td class="cellrowborder" width="50%"><p>创建跟踪分支。</p> <p> 创建一个HiTraceId，使用当前线程TLS中的chainId、spanId初始化HiTraceId的chainId、parentSpanId，并为HiTraceId生成一个新的spanId，返回该HiTraceId。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_tracepoint">void OH_HiTrace_Tracepoint(HiTrace_Communication_Mode mode, HiTrace_Tracepoint_Type type, const HiTraceId *id, const char *fmt, ...)</a></td> <td class="cellrowborder" width="50%"><p>HiTraceMeter跟踪信息埋点。</p> <p>type为客户端发送CS和服务端接收SC时，进行同步HiTraceMeter开始打点；</p> <p>type为客户端接收CC和服务端发送SS时，进行同步HiTraceMeter结束打点；</p> <p>type为通用类型GENERAL时，不会进行HiTraceMeter打点。</p> <p>type为客户端发送CS和客户端接收CC的信息埋点需配套使用；</p> <p>type为服务端接收SC和服务端发送SS的信息埋点需配套使用。</p> <p>否则，HiTraceMeter开始与结束打点无法正常匹配。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_initid">void OH_HiTrace_InitId(HiTraceId *id)</a></td> <td class="cellrowborder" width="50%">初始化HiTraceId。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_idfrombytes">void OH_HiTrace_IdFromBytes(HiTraceId *id, const uint8_t *pIdArray, int len)</a></td> <td class="cellrowborder" width="50%">根据字节数组创建HiTraceId。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_isidvalid">bool OH_HiTrace_IsIdValid(const HiTraceId *id)</a></td> <td class="cellrowborder" width="50%">判断HiTraceId是否有效。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_isflagenabled">bool OH_HiTrace_IsFlagEnabled(const HiTraceId *id, HiTrace_Flag flag)</a></td> <td class="cellrowborder" width="50%">判断HiTraceId是否启用了跟踪标志flag。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_enableflag">void OH_HiTrace_EnableFlag(const HiTraceId *id, HiTrace_Flag flag)</a></td> <td class="cellrowborder" width="50%">启用HiTraceId中指定的跟踪标志。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_getflags">int OH_HiTrace_GetFlags(const HiTraceId *id)</a></td> <td class="cellrowborder" width="50%">获取HiTraceId中设置的跟踪标志位。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_setflags">void OH_HiTrace_SetFlags(HiTraceId *id, int flags)</a></td> <td class="cellrowborder" width="50%">设置跟踪标志位到<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>中。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_getchainid">uint64_t OH_HiTrace_GetChainId(const HiTraceId *id)</a></td> <td class="cellrowborder" width="50%">获取HiTraceId中的跟踪链ID。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_setchainid">void OH_HiTrace_SetChainId(HiTraceId *id, uint64_t chainId)</a></td> <td class="cellrowborder" width="50%">设置跟踪链ID到HiTraceId中。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_getspanid">uint64_t OH_HiTrace_GetSpanId(const HiTraceId *id)</a></td> <td class="cellrowborder" width="50%">获取当前HiTraceId中的分支ID。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_setspanid">void OH_HiTrace_SetSpanId(HiTraceId *id, uint64_t spanId)</a></td> <td class="cellrowborder" width="50%">设置分支ID到HiTraceId中。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_getparentspanid">uint64_t OH_HiTrace_GetParentSpanId(const HiTraceId *id)</a></td> <td class="cellrowborder" width="50%">获取当前HiTraceId中的父分支ID。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_setparentspanid">void OH_HiTrace_SetParentSpanId(HiTraceId *id, uint64_t parentSpanId)</a></td> <td class="cellrowborder" width="50%">设置HiTraceId结构的parentSpanId字符。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_idtobytes">int OH_HiTrace_IdToBytes(const HiTraceId* id, uint8_t* pIdArray, int len)</a></td> <td class="cellrowborder" width="50%">将HiTraceId转换为字节数组，用于缓存或者通信传递。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_starttrace">void OH_HiTrace_StartTrace(const char *name)</a></td> <td class="cellrowborder" width="50%"><p>标记一个同步跟踪耗时任务的开始。</p> <p> 同步跟踪打点接口OH_HiTrace_StartTrace()和OH_HiTrace_FinishTrace()必须配对使用。</p> <p> OH_HiTrace_StartTrace()和OH_HiTrace_FinishTrace()函数对可以嵌套使用，跟踪解析时使用栈式数据结构进行匹配。</p> <p> 从API version 19开始，建议使用OH_HiTrace_StartTraceEx()接口，以便分级控制跟踪输出。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_finishtrace">void OH_HiTrace_FinishTrace(void)</a></td> <td class="cellrowborder" width="50%"><p>标记一个同步跟踪耗时任务的结束。</p> <p> 必须和OH_HiTrace_StartTrace()配对使用。跟踪解析时，和其前执行流程中最近的OH_HiTrace_StartTrace()进行匹配。</p> <p> 从API version 19开始，建议使用OH_HiTrace_FinishTraceEx()接口，以便分级控制跟踪输出。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_startasynctrace">void OH_HiTrace_StartAsyncTrace(const char *name, int32_t taskId)</a></td> <td class="cellrowborder" width="50%"><p>标记一个异步跟踪耗时任务的开始。</p> <p> 用于在异步操作前调用进行开始打点，异步跟踪开始和结束数据由于不是顺序发生的，所以解析时需要通过一个唯一的taskId进行识别。</p> <p> 必须和OH_HiTrace_FinishAsyncTrace()配对使用，参数name和taskId相同的开始与结束打点相匹配，构成一个异步跟踪耗时任务。</p> <p> 如果有多个相同name的任务需要跟踪或者对同一个任务跟踪多次，并且任务同时被执行，则每次调用的taskId需不相同。</p> <p> 如果具有相同name的任务是串行执行的，则taskId可以相同。</p> <p> 从API version 19开始，建议使用OH_HiTrace_StartAsyncTraceEx()接口，以便分级控制跟踪输出与跟踪聚类。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_finishasynctrace">void OH_HiTrace_FinishAsyncTrace(const char *name, int32_t taskId)</a></td> <td class="cellrowborder" width="50%"><p>标记一个异步跟踪耗时任务的结束。</p> <p> 在异步操作完成后如回调函数中调用，进行结束打点。</p> <p> 和OH_HiTrace_StartAsyncTrace()配对使用，参数name和taskId必须与异步跟踪的开始打点接口的对应参数值保持一致。</p> <p> 从API version 19开始，建议使用OH_HiTrace_FinishAsyncTraceEx()接口，以便分级控制跟踪输出。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_counttrace">void OH_HiTrace_CountTrace(const char *name, int64_t count)</a></td> <td class="cellrowborder" width="50%"><p>用于跟踪给定整数变量名和整数值。</p> <p> 多次执行该接口可以跟踪给定整数变量在不同时刻的数值变化。</p> <p> 从API version 19开始，建议使用OH_HiTrace_CountTraceEx()接口，以便分级控制跟踪输出。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_starttraceex">void OH_HiTrace_StartTraceEx(HiTrace_Output_Level level, const char *name, const char *customArgs)</a></td> <td class="cellrowborder" width="50%"><p>标记一个同步跟踪耗时任务的开始，分级控制跟踪输出。</p> <p> 同步跟踪打点接口OH_HiTrace_StartTraceEx()和OH_HiTrace_FinishTraceEx()必须配对使用。</p> <p> OH_HiTrace_StartTraceEx()和OH_HiTrace_FinishTraceEx()函数对可以嵌套使用，跟踪解析时使用栈式数据结构进行匹配。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_finishtraceex">void OH_HiTrace_FinishTraceEx(HiTrace_Output_Level level)</a></td> <td class="cellrowborder" width="50%"><p>标记一个同步跟踪耗时任务的结束，分级控制跟踪输出。</p> <p> 必须和OH_HiTrace_StartTraceEx()配对使用，参数level必须与同步跟踪的开始打点接口OH_HiTrace_StartTraceEx()的对应参数值一致。</p> <p> 跟踪数据解析时，和其前执行流程中最近的OH_HiTrace_StartTraceEx()进行匹配。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_startasynctraceex">void OH_HiTrace_StartAsyncTraceEx(HiTrace_Output_Level level, const char *name, int32_t taskId, const char *customCategory, const char *customArgs)</a></td> <td class="cellrowborder" width="50%"><p>标记一个异步跟踪耗时任务的开始，分级控制跟踪输出。</p> <p> 用于在异步操作执行前进行开始打点，异步跟踪开始和结束数据由于不是顺序发生的，所以解析时需要通过一个唯一的taskId进行识别。</p> <p> 和OH_HiTrace_FinishAsyncTraceEx()配对使用，参数name和taskId相同的开始与结束打点相匹配，构成一个异步跟踪耗时任务。</p> <p> 如果有多个相同name的任务需要跟踪或者对同一个任务跟踪多次，并且任务同时被执行，则每次调用的taskId需不相同。</p> <p> 如果具有相同name的任务是串行执行的，则taskId可以相同。</p> <p> 不同进程的taskId不会相互干扰。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_finishasynctraceex">void OH_HiTrace_FinishAsyncTraceEx(HiTrace_Output_Level level, const char *name, int32_t taskId)</a></td> <td class="cellrowborder" width="50%"><p>标记一个异步跟踪耗时任务的结束，分级控制跟踪输出。</p> <p> 用于在异步操作完成后进行结束打点，例如在回调函数中调用。</p> <p> 和OH_HiTrace_StartAsyncTraceEx()配对使用，参数level、name和taskId必须与异步跟踪开始打点接口的对应参数值保持一致。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_counttraceex">void OH_HiTrace_CountTraceEx(HiTrace_Output_Level level, const char *name, int64_t count)</a></td> <td class="cellrowborder" width="50%">标记一个跟踪的整数变量，分级控制跟踪输出。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-trace-h#oh_hitrace_istraceenabled">bool OH_HiTrace_IsTraceEnabled(void)</a></td> <td class="cellrowborder" width="50%">判断当前是否开启应用trace捕获。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 146px;"><h2 id="枚举类型说明" device-type="phone,2in1,tablet,wearable,tv">枚举类型说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举类型说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection" style="contain-intrinsic-size: auto 684px;"><h3 id="hitraceid_valid" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">HiTraceId_Valid<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hitraceid_valid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">HiTraceId_Valid</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>HiTraceId是否有效标志。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">HITRACE_ID_INVALID = 0</td> <td class="cellrowborder" width="50%"><p>无效HiTraceId。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_ID_VALID = 1</td> <td class="cellrowborder" width="50%"><p>有效HiTraceId。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 597px;"><h3 id="hitrace_version" device-type="phone,2in1,tablet,wearable,tv">HiTrace_Version<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hitrace_version" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">HiTrace_Version</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>HiTrace版本号。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">HITRACE_VER_1 = 0</td> <td class="cellrowborder" width="50%"><p>版本1。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1798px;"><h3 id="hitrace_flag" device-type="phone,2in1,tablet,wearable,tv">HiTrace_Flag<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hitrace_flag" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">HiTrace_Flag</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>HiTrace跟踪标志。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">HITRACE_FLAG_DEFAULT = 0</td> <td class="cellrowborder" width="50%"><p>缺省标志。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_FLAG_INCLUDE_ASYNC = 1 &lt;&lt; 0</td> <td class="cellrowborder" width="50%"><p>异步调用标志。</p> <p> 设置该标志，同时跟踪同步和异步调用；缺省只跟踪同步调用。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_FLAG_DONOT_CREATE_SPAN = 1 &lt;&lt; 1</td> <td class="cellrowborder" width="50%"><p>无分支标志。</p> <p> 设置该标志，不创建分支信息；缺省创建分支信息。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_FLAG_TP_INFO = 1 &lt;&lt; 2</td> <td class="cellrowborder" width="50%"><p>埋点标志。</p> <p> 调试场景下设置该标志，调用信息埋点接口OH_HiTrace_Tracepoint()时，会打印埋点信息hilog日志；缺省不打印埋点信息hilog日志。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_FLAG_NO_BE_INFO = 1 &lt;&lt; 3</td> <td class="cellrowborder" width="50%"><p>无开始结束信息标志。</p> <p> 调试场景下设置该标志，调用开始跟踪接口OH_HiTrace_BeginChain()和结束跟踪接口OH_HiTrace_EndChain()时，分别会打印开始、结束跟踪信息hilog日志；缺省不打印开始、结束跟踪信息hilog日志。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_FLAG_DONOT_ENABLE_LOG = 1 &lt;&lt; 4</td> <td class="cellrowborder" width="50%"><p>日志关联标志。</p> <p> 设置该标志，不会在hilog日志中附加HiTraceId信息；缺省会在hilog日志中附加HiTraceId信息。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_FLAG_FAULT_TRIGGER = 1 &lt;&lt; 5</td> <td class="cellrowborder" width="50%"><p>故障触发标志。预置标志，暂未启用。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_FLAG_D2D_TP_INFO = 1 &lt;&lt; 6</td> <td class="cellrowborder" width="50%"><p>设备间埋点标志。HITRACE_FLAG_TP_INFO的一个子集，调试场景下使用。</p> <p> 当已设置HITRACE_FLAG_TP_INFO标志时，HITRACE_FLAG_D2D_TP_INFO标志不生效；</p> <p> 当未设置HITRACE_FLAG_TP_INFO标志时，设置HITRACE_FLAG_D2D_TP_INFO标志，此时调用信息埋点接口OH_HiTrace_Tracepoint()，仅当mode参数为设备间通信HITRACE_CM_DEVICE的情况下，会打印埋点信息hilog日志。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1033px;"><h3 id="hitrace_tracepoint_type" device-type="phone,2in1,tablet,wearable,tv">HiTrace_Tracepoint_Type<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hitrace_tracepoint_type" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">HiTrace_Tracepoint_Type</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>跟踪埋点类型枚举。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">HITRACE_TP_CS = 0</td> <td class="cellrowborder" width="50%"><p>客户端发送。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_TP_CR = 1</td> <td class="cellrowborder" width="50%"><p>客户端接收。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_TP_SS = 2</td> <td class="cellrowborder" width="50%"><p>服务端发送。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_TP_SR = 3</td> <td class="cellrowborder" width="50%"><p>服务端接收。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_TP_GENERAL = 4</td> <td class="cellrowborder" width="50%"><p>通用类型，标识HITRACE_TP_CS、HITRACE_TP_CR、HITRACE_TP_SS、HITRACE_TP_SR四种场景之外的埋点。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 906px;"><h3 id="hitrace_communication_mode" device-type="phone,2in1,tablet,wearable,tv">HiTrace_Communication_Mode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hitrace_communication_mode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">HiTrace_Communication_Mode</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>跟踪通信类型枚举。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">HITRACE_CM_DEFAULT = 0</td> <td class="cellrowborder" width="50%"><p>缺省通信类型。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_CM_THREAD = 1</td> <td class="cellrowborder" width="50%"><p>线程间通信。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_CM_PROCESS = 2</td> <td class="cellrowborder" width="50%"><p>进程间通信。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_CM_DEVICE = 3</td> <td class="cellrowborder" width="50%"><p>设备间通信。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 937px;"><h3 id="hitrace_output_level" device-type="phone,2in1,tablet,wearable,tv">HiTrace_Output_Level<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hitrace_output_level" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">HiTrace_Output_Level</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>HiTrace输出级别。低于系统跟踪输出级别阈值的打点将不会生效。log版本阈值为HITRACE_LEVEL_INFO；nolog版本阈值为HITRACE_LEVEL_COMMERCIAL。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 19</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">HITRACE_LEVEL_DEBUG = 0</td> <td class="cellrowborder" width="50%"><p>仅用于调试的输出级别，优先级最低。</p> <p><strong>起始版本：</strong> 19</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_LEVEL_INFO = 1</td> <td class="cellrowborder" width="50%"><p>用于log版本的输出级别。</p> <p><strong>起始版本：</strong> 19</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_LEVEL_CRITICAL = 2</td> <td class="cellrowborder" width="50%"><p>用于log版本的输出级别，优先级高于HITRACE_LEVEL_INFO。</p> <p><strong>起始版本：</strong> 19</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_LEVEL_COMMERCIAL = 3</td> <td class="cellrowborder" width="50%"><p>用于nolog版本的输出级别，优先级最高。</p> <p><strong>起始版本：</strong> 19</p> </td> </tr> <tr><td class="cellrowborder" width="50%">HITRACE_LEVEL_MAX = HITRACE_LEVEL_COMMERCIAL</td> <td class="cellrowborder" width="50%"><p>输出级别范围限制。</p> <p><strong>起始版本：</strong> 19</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 146px;"><h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection" style="contain-intrinsic-size: auto 927px;"><h3 id="oh_hitrace_beginchain" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_HiTrace_BeginChain()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_beginchain" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">HiTraceId <span class="hljs-title">OH_HiTrace_BeginChain</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *name, <span class="hljs-type">int</span> flags)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>开始跟踪。</p> <p> 当前线程TLS（Thread Local Storage，线程本地存储）中不存在有效的HiTraceId时，生成有效的HiTraceId并设置到当前线程TLS中，返回该HiTraceId。</p> <p> 当前线程TLS中已存在有效的HiTraceId时，不会开始新的跟踪，返回各属性值均为0的无效HiTraceId。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char *name</td> <td class="cellrowborder" width="50%">跟踪业务名。</td> </tr> <tr><td class="cellrowborder" width="50%">int flags</td> <td class="cellrowborder" width="50%">跟踪标志组合，见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_flag">HiTrace_Flag</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a></td> <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>结构体。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 474px;"><h3 id="oh_hitrace_endchain" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_EndChain()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_endchain" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OH_HiTrace_EndChain</span>()</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>结束跟踪。</p> <p> 结束跟踪并将当前线程TLS中的HiTraceId设置为无效。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 645px;"><h3 id="oh_hitrace_getid" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_GetId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_getid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>HiTraceId <span class="hljs-built_in">OH_HiTrace_GetId</span>()</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取跟踪标识。</p> <p> 获取当前线程TLS中的HiTraceId。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a></td> <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>结构体。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 645px;"><h3 id="oh_hitrace_setid" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_SetId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_setid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiTrace_SetId</span><span class="hljs-params">(<span class="hljs-type">const</span> HiTraceId *id)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置跟踪标识。</p> <p> 将给定的HiTraceId设置到当前线程TLS中。若给定的HiTraceId无效，则不执行任何操作。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">const HiTraceId</a> *id</td> <td class="cellrowborder" width="50%">要设置的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 474px;"><h3 id="oh_hitrace_clearid" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_ClearId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_clearid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_HiTrace_ClearId</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>清除跟踪标识。</p> <p> 将当前线程TLS中的HiTraceId设置为无效。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 669px;"><h3 id="oh_hitrace_createspan" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_CreateSpan()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_createspan" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>HiTraceId <span class="hljs-title function_">OH_HiTrace_CreateSpan</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建跟踪分支。</p> <p> 创建一个HiTraceId，使用当前线程TLS中的chainId、spanId初始化HiTraceId的chainId、parentSpanId，并为HiTraceId生成一个新的spanId，返回该HiTraceId。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a></td> <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>结构体。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1074px;"><h3 id="oh_hitrace_tracepoint" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_Tracepoint()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_tracepoint" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiTrace_Tracepoint</span><span class="hljs-params">(HiTrace_Communication_Mode mode, HiTrace_Tracepoint_Type type, <span class="hljs-type">const</span> HiTraceId *id, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *fmt, ...)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>HiTraceMeter跟踪信息埋点。</p> <p>type为客户端发送CS和服务端接收SC时，进行同步HiTraceMeter开始打点；</p> <p>type为客户端接收CC和服务端发送SS时，进行同步HiTraceMeter结束打点；</p> <p>type为通用类型GENERAL时，不会进行HiTraceMeter打点。</p> <p>type为客户端发送CS和客户端接收CC的信息埋点需配套使用；</p> <p>type为服务端接收SC和服务端发送SS的信息埋点需配套使用。</p> <p>否则，HiTraceMeter开始与结束打点无法正常匹配。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.14.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.20.14.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_communication_mode">HiTrace_Communication_Mode</a> mode</td> <td class="cellrowborder" width="50%">跟踪通信模式，见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_communication_mode">HiTrace_Communication_Mode</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_tracepoint_type">HiTrace_Tracepoint_Type</a> type</td> <td class="cellrowborder" width="50%">跟踪信息类型，见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_tracepoint_type">HiTrace_Tracepoint_Type</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">const HiTraceId</a> *id</td> <td class="cellrowborder" width="50%">实施信息埋点操作的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *fmt</td> <td class="cellrowborder" width="50%">HiTraceMeter打点操作传入的trace说明信息的格式化字符串。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 597px;"><h3 id="oh_hitrace_initid" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_InitId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_initid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_HiTrace_InitId</span><span class="hljs-params">(HiTraceId *id)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>初始化HiTraceId。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a> *id</td> <td class="cellrowborder" width="50%">需要初始化的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 707px;"><h3 id="oh_hitrace_idfrombytes" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_IdFromBytes()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_idfrombytes" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiTrace_IdFromBytes</span><span class="hljs-params">(HiTraceId *id, <span class="hljs-type">const</span> <span class="hljs-type">uint8_t</span> *pIdArray, <span class="hljs-type">int</span> len)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>根据字节数组创建HiTraceId。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a> *id</td> <td class="cellrowborder" width="50%">需要创建的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">const uint8_t *pIdArray</td> <td class="cellrowborder" width="50%">字节数组。</td> </tr> <tr><td class="cellrowborder" width="50%">int len</td> <td class="cellrowborder" width="50%">字节数组长度。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 768px;"><h3 id="oh_hitrace_isidvalid" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_IsIdValid()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_isidvalid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">OH_HiTrace_IsIdValid</span><span class="hljs-params">(<span class="hljs-type">const</span> HiTraceId *id)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>判断HiTraceId是否有效。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">const HiTraceId</a> *id</td> <td class="cellrowborder" width="50%">需要判断是否有效的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%">true：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>有效；false：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>无效。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 823px;"><h3 id="oh_hitrace_isflagenabled" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_IsFlagEnabled()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_isflagenabled" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">OH_HiTrace_IsFlagEnabled</span><span class="hljs-params">(<span class="hljs-type">const</span> HiTraceId *id, HiTrace_Flag flag)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>判断HiTraceId是否启用了跟踪标志flag。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">const HiTraceId</a> *id</td> <td class="cellrowborder" width="50%">需要判断指定跟踪标志是否启用的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_flag">HiTrace_Flag</a> flag</td> <td class="cellrowborder" width="50%">指定的跟踪标志，见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_flag">HiTrace_Flag</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%">true：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>已启用flag；false：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>未启用flag。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 652px;"><h3 id="oh_hitrace_enableflag" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_EnableFlag()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_enableflag" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiTrace_EnableFlag</span><span class="hljs-params">(<span class="hljs-type">const</span> HiTraceId *id, HiTrace_Flag flag)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>启用HiTraceId中指定的跟踪标志。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">const HiTraceId</a> *id</td> <td class="cellrowborder" width="50%">需要启用指定跟踪标志的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_flag">HiTrace_Flag</a> flag</td> <td class="cellrowborder" width="50%">指定的跟踪标志，见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_flag">HiTrace_Flag</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 768px;"><h3 id="oh_hitrace_getflags" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_GetFlags()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_getflags" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">OH_HiTrace_GetFlags</span><span class="hljs-params">(<span class="hljs-type">const</span> HiTraceId *id)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取HiTraceId中设置的跟踪标志位。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">const HiTraceId</a> *id</td> <td class="cellrowborder" width="50%">需要获取跟踪标志位的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>中设置的跟踪标志位。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 652px;"><h3 id="oh_hitrace_setflags" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_SetFlags()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_setflags" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_HiTrace_SetFlags</span><span class="hljs-params">(HiTraceId *id, <span class="hljs-type">int</span> flags)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置跟踪标志位到<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>中。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a> *id</td> <td class="cellrowborder" width="50%">需要设置跟踪标志位的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">int flags</td> <td class="cellrowborder" width="50%">指定的跟踪标志位，见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_flag">HiTrace_Flag</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 768px;"><h3 id="oh_hitrace_getchainid" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_GetChainId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_getchainid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">uint64_t</span> <span class="hljs-title">OH_HiTrace_GetChainId</span><span class="hljs-params">(<span class="hljs-type">const</span> HiTraceId *id)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取HiTraceId中的跟踪链ID。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">const HiTraceId</a> *id</td> <td class="cellrowborder" width="50%">需要获取跟踪链ID的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">uint64_t</td> <td class="cellrowborder" width="50%">跟踪链ID。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 652px;"><h3 id="oh_hitrace_setchainid" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_SetChainId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_setchainid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiTrace_SetChainId</span><span class="hljs-params">(HiTraceId *id, <span class="hljs-type">uint64_t</span> chainId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置跟踪链ID到HiTraceId中。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a> *id</td> <td class="cellrowborder" width="50%">需要设置跟踪链ID的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">uint64_t chainId</td> <td class="cellrowborder" width="50%">需要设置的跟踪链ID。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 768px;"><h3 id="oh_hitrace_getspanid" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_GetSpanId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_getspanid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">uint64_t</span> <span class="hljs-title">OH_HiTrace_GetSpanId</span><span class="hljs-params">(<span class="hljs-type">const</span> HiTraceId *id)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取当前HiTraceId中的分支ID。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.30.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">const HiTraceId</a> *id</td> <td class="cellrowborder" width="50%">需要获取分支ID的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">uint64_t</td> <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>中设置的分支ID。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 652px;"><h3 id="oh_hitrace_setspanid" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_SetSpanId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_setspanid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiTrace_SetSpanId</span><span class="hljs-params">(HiTraceId *id, <span class="hljs-type">uint64_t</span> spanId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置分支ID到HiTraceId中。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a> *id</td> <td class="cellrowborder" width="50%">需要设置分支ID的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">uint64_t spanId</td> <td class="cellrowborder" width="50%">需要设置的分支ID。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 768px;"><h3 id="oh_hitrace_getparentspanid" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_GetParentSpanId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_getparentspanid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">uint64_t</span> <span class="hljs-title">OH_HiTrace_GetParentSpanId</span><span class="hljs-params">(<span class="hljs-type">const</span> HiTraceId *id)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取当前HiTraceId中的父分支ID。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">const HiTraceId</a> *id</td> <td class="cellrowborder" width="50%">需要获取父分支ID的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">uint64_t</td> <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>中设置的父分支ID。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 652px;"><h3 id="oh_hitrace_setparentspanid" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_SetParentSpanId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_setparentspanid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiTrace_SetParentSpanId</span><span class="hljs-params">(HiTraceId *id, <span class="hljs-type">uint64_t</span> parentSpanId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置HiTraceId结构的parentSpanId字符。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a> *id</td> <td class="cellrowborder" width="50%">需要设置父分支ID的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">uint64_t parentSpanId</td> <td class="cellrowborder" width="50%">需要设置的父分支ID。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 878px;"><h3 id="oh_hitrace_idtobytes" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_IdToBytes()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_idtobytes" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">OH_HiTrace_IdToBytes</span><span class="hljs-params">(<span class="hljs-type">const</span> HiTraceId* id, <span class="hljs-type">uint8_t</span>* pIdArray, <span class="hljs-type">int</span> len)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将HiTraceId转换为字节数组，用于缓存或者通信传递。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">const HiTraceId</a>* id</td> <td class="cellrowborder" width="50%">需要转换的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hitrace-hitraceid">HiTraceId</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">uint8_t* pIdArray</td> <td class="cellrowborder" width="50%">字节数组。</td> </tr> <tr><td class="cellrowborder" width="50%">int len</td> <td class="cellrowborder" width="50%">字节数组长度。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%">转换后的字节数组长度。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 741px;"><h3 id="oh_hitrace_starttrace" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_StartTrace()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_starttrace" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiTrace_StartTrace</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *name)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>标记一个同步跟踪耗时任务的开始。</p> <p> 同步跟踪打点接口OH_HiTrace_StartTrace()和OH_HiTrace_FinishTrace()必须配对使用。</p> <p> OH_HiTrace_StartTrace()和OH_HiTrace_FinishTrace()函数对可以嵌套使用，跟踪解析时使用栈式数据结构进行匹配。</p> <p> 从API version 19开始，建议使用OH_HiTrace_StartTraceEx()接口，以便分级控制跟踪输出。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char *name</td> <td class="cellrowborder" width="50%">跟踪的名字。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 522px;"><h3 id="oh_hitrace_finishtrace" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_FinishTrace()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_finishtrace" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_HiTrace_FinishTrace</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>标记一个同步跟踪耗时任务的结束。</p> <p> 必须和OH_HiTrace_StartTrace()配对使用。跟踪解析时，和其前执行流程中最近的OH_HiTrace_StartTrace()进行匹配。</p> <p> 从API version 19开始，建议使用OH_HiTrace_FinishTraceEx()接口，以便分级控制跟踪输出。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 10</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 988px;"><h3 id="oh_hitrace_startasynctrace" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_StartAsyncTrace()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_startasynctrace" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiTrace_StartAsyncTrace</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *name, <span class="hljs-type">int32_t</span> taskId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>标记一个异步跟踪耗时任务的开始。</p> <p> 用于在异步操作前调用进行开始打点，异步跟踪开始和结束数据由于不是顺序发生的，所以解析时需要通过一个唯一的taskId进行识别。</p> <p> 必须和OH_HiTrace_FinishAsyncTrace()配对使用，参数name和taskId相同的开始与结束打点相匹配，构成一个异步跟踪耗时任务。</p> <p> 如果有多个相同name的任务需要跟踪或者对同一个任务跟踪多次，并且任务同时被执行，则每次调用的taskId需不相同。</p> <p> 如果具有相同name的任务是串行执行的，则taskId可以相同。</p> <p> 从API version 19开始，建议使用OH_HiTrace_StartAsyncTraceEx()接口，以便分级控制跟踪输出与跟踪聚类。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.37.13.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.37.13.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char *name</td> <td class="cellrowborder" width="50%">异步跟踪的名字。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t taskId</td> <td class="cellrowborder" width="50%">异步跟踪的ID。 异步跟踪开始和结束由于不是顺序发生的，所以需要通过name和每次执行唯一的taskId进行开始和结束的匹配。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 844px;"><h3 id="oh_hitrace_finishasynctrace" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_FinishAsyncTrace()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_finishasynctrace" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiTrace_FinishAsyncTrace</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *name, <span class="hljs-type">int32_t</span> taskId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>标记一个异步跟踪耗时任务的结束。</p> <p> 在异步操作完成后如回调函数中调用，进行结束打点。</p> <p> 和OH_HiTrace_StartAsyncTrace()配对使用，参数name和taskId必须与异步跟踪的开始打点接口的对应参数值保持一致。</p> <p> 从API version 19开始，建议使用OH_HiTrace_FinishAsyncTraceEx()接口，以便分级控制跟踪输出。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char *name</td> <td class="cellrowborder" width="50%">异步跟踪的名字。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t taskId</td> <td class="cellrowborder" width="50%">异步跟踪的ID。异步跟踪开始和结束由于不是顺序发生的，所以需要通过name和每次执行唯一的taskId进行开始和结束的匹配。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 748px;"><h3 id="oh_hitrace_counttrace" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_CountTrace()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_counttrace" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiTrace_CountTrace</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *name, <span class="hljs-type">int64_t</span> count)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>用于跟踪给定整数变量名和整数值。</p> <p> 多次执行该接口可以跟踪给定整数变量在不同时刻的数值变化。</p> <p> 从API version 19开始，建议使用OH_HiTrace_CountTraceEx()接口，以便分级控制跟踪输出。</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiTrace</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char *name</td> <td class="cellrowborder" width="50%">整数变量跟踪的名字，不必与真实变量名相同。</td> </tr> <tr><td class="cellrowborder" width="50%">int64_t count</td> <td class="cellrowborder" width="50%">整数值。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 779px;"><h3 id="oh_hitrace_starttraceex" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_StartTraceEx()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_starttraceex" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiTrace_StartTraceEx</span><span class="hljs-params">(HiTrace_Output_Level level, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *name, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *customArgs)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>标记一个同步跟踪耗时任务的开始，分级控制跟踪输出。</p> <p> 同步跟踪打点接口OH_HiTrace_StartTraceEx()和OH_HiTrace_FinishTraceEx()必须配对使用。</p> <p> OH_HiTrace_StartTraceEx()和OH_HiTrace_FinishTraceEx()函数对可以嵌套使用，跟踪解析时使用栈式数据结构进行匹配。</p> <p><strong>起始版本：</strong> 19</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_output_level">HiTrace_Output_Level</a> level</td> <td class="cellrowborder" width="50%">跟踪输出优先级。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *name</td> <td class="cellrowborder" width="50%">同步跟踪的名字。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *customArgs</td> <td class="cellrowborder" width="50%">键值对，多个键值对使用逗号分隔，例"key1=value1,key2=value2"。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 669px;"><h3 id="oh_hitrace_finishtraceex" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_FinishTraceEx()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_finishtraceex" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_HiTrace_FinishTraceEx</span><span class="hljs-params">(HiTrace_Output_Level level)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>标记一个同步跟踪耗时任务的结束，分级控制跟踪输出。</p> <p> 必须和OH_HiTrace_StartTraceEx()配对使用，参数level必须与同步跟踪的开始打点接口OH_HiTrace_StartTraceEx()的对应参数值一致。</p> <p> 跟踪数据解析时，和其前执行流程中最近的OH_HiTrace_StartTraceEx()进行匹配。</p> <p><strong>起始版本：</strong> 19</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_output_level">HiTrace_Output_Level</a> level</td> <td class="cellrowborder" width="50%">跟踪输出优先级。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1057px;"><h3 id="oh_hitrace_startasynctraceex" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_StartAsyncTraceEx()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_startasynctraceex" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiTrace_StartAsyncTraceEx</span><span class="hljs-params">(HiTrace_Output_Level level, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *name, <span class="hljs-type">int32_t</span> taskId, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *customCategory, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *customArgs)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>标记一个异步跟踪耗时任务的开始，分级控制跟踪输出。</p> <p> 用于在异步操作执行前进行开始打点，异步跟踪开始和结束数据由于不是顺序发生的，所以解析时需要通过一个唯一的taskId进行识别。</p> <p> 和OH_HiTrace_FinishAsyncTraceEx()配对使用，参数name和taskId相同的开始与结束打点相匹配，构成一个异步跟踪耗时任务。</p> <p> 如果有多个相同name的任务需要跟踪或者对同一个任务跟踪多次，并且任务同时被执行，则每次调用的taskId需不相同。</p> <p> 如果具有相同name的任务是串行执行的，则taskId可以相同。</p> <p> 不同进程的taskId不会相互干扰。</p> <p><strong>起始版本：</strong> 19</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.12.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.42.12.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_output_level">HiTrace_Output_Level</a> level</td> <td class="cellrowborder" width="50%">跟踪输出优先级。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *name</td> <td class="cellrowborder" width="50%">异步跟踪的名字。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t taskId</td> <td class="cellrowborder" width="50%">异步跟踪的ID。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *customCategory</td> <td class="cellrowborder" width="50%">自定义聚类名称，用于聚合同一类异步跟踪打点。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *customArgs</td> <td class="cellrowborder" width="50%">键值对，多个键值对使用逗号分隔，例"key1=value1,key2=value2"。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 755px;"><h3 id="oh_hitrace_finishasynctraceex" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_FinishAsyncTraceEx()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_finishasynctraceex" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiTrace_FinishAsyncTraceEx</span><span class="hljs-params">(HiTrace_Output_Level level, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *name, <span class="hljs-type">int32_t</span> taskId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>标记一个异步跟踪耗时任务的结束，分级控制跟踪输出。</p> <p> 用于在异步操作完成后进行结束打点，例如在回调函数中调用。</p> <p> 和OH_HiTrace_StartAsyncTraceEx()配对使用，参数level、name和taskId必须与异步跟踪开始打点接口的对应参数值保持一致。</p> <p><strong>起始版本：</strong> 19</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.43.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.43.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_output_level">HiTrace_Output_Level</a> level</td> <td class="cellrowborder" width="50%">跟踪输出优先级。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *name</td> <td class="cellrowborder" width="50%">异步跟踪的名字。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t taskId</td> <td class="cellrowborder" width="50%">异步跟踪的ID。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 659px;"><h3 id="oh_hitrace_counttraceex" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_CountTraceEx()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_counttraceex" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiTrace_CountTraceEx</span><span class="hljs-params">(HiTrace_Output_Level level, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *name, <span class="hljs-type">int64_t</span> count)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>标记一个跟踪的整数变量，分级控制跟踪输出。</p> <p><strong>起始版本：</strong> 19</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.44.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h#hitrace_output_level">HiTrace_Output_Level</a> level</td> <td class="cellrowborder" width="50%">跟踪输出优先级。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *name</td> <td class="cellrowborder" width="50%">整数变量的名称，不必与实际变量名相同。</td> </tr> <tr><td class="cellrowborder" width="50%">int64_t count</td> <td class="cellrowborder" width="50%">整数值。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 597px;"><h3 id="oh_hitrace_istraceenabled" device-type="phone,2in1,tablet,wearable,tv">OH_HiTrace_IsTraceEnabled()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hitrace_istraceenabled" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ama-c106="" class="highlight-div"><div _ngcontent-ama-c106="" class="highlight-div-header"><div _ngcontent-ama-c106="" class="highlight-div-header-left"><div _ngcontent-ama-c106="" class="handle-button expand-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ama-c106="" class="highlight-div-header-right"><div _ngcontent-ama-c106="" class="handle-button ai-button"></div><div _ngcontent-ama-c106="" class="handle-button line-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ama-c106="" class="handle-button theme-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ama-c106="" class="handle-button copy-button"><div _ngcontent-ama-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ama-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">OH_HiTrace_IsTraceEnabled</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>判断当前是否开启应用trace捕获。</p> <p><strong>起始版本：</strong> 19</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.45.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>使用hitrace命令行工具等方式开启采集时返回true。</p> <p> 未开启采集或停止采集后返回false，此时调用HiTraceMeter性能跟踪打点接口无效。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>