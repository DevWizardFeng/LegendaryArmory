<h1 _ngcontent-tqe-c119="" class="doc-title ng-star-inserted" title="usb_serial_api.h"> usb_serial_api.h </h1>

<div _ngcontent-tqe-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="2in1">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>声明用于主机侧访问串口设备的USB Serial DDK接口。</p> <p><strong>引用文件：</strong> &lt;usb_serial/usb_serial_api.h&gt;</p> <p><strong>库：</strong> libusb_serial_ndk.z.so</p> <p><strong>系统能力：</strong> SystemCapability.Driver.UsbSerial.Extension</p> <p><strong>起始版本：</strong> 18</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-serialddk">SerialDdk</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="2in1">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div></div>  <div class="tiledSection"><h3 id="函数" device-type="2in1" class="firsth2">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" width="50%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-usb-serial-api-h#oh_usbserial_init">int32_t OH_UsbSerial_Init(void)</a></td> <td class="cellrowborder" width="50%">初始化USB Serial DDK。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-usb-serial-api-h#oh_usbserial_release">int32_t OH_UsbSerial_Release(void)</a></td> <td class="cellrowborder" width="50%">释放USB Serial DDK。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-usb-serial-api-h#oh_usbserial_open">int32_t OH_UsbSerial_Open(uint64_t deviceId, uint8_t interfaceIndex, UsbSerial_DeviceHandle **dev)</a></td> <td class="cellrowborder" width="50%">通过deviceId和interfaceIndex打开USB串口设备。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-usb-serial-api-h#oh_usbserial_close">int32_t OH_UsbSerial_Close(UsbSerial_DeviceHandle *dev)</a></td> <td class="cellrowborder" width="50%">关闭USB串口设备。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-usb-serial-api-h#oh_usbserial_read">int32_t OH_UsbSerial_Read(UsbSerial_DeviceHandle *dev, uint8_t *buff, uint32_t bufferSize, uint32_t *bytesRead)</a></td> <td class="cellrowborder" width="50%">从USB串口设备读入数据到缓冲区。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-usb-serial-api-h#oh_usbserial_write">int32_t OH_UsbSerial_Write(UsbSerial_DeviceHandle *dev, uint8_t *buff, uint32_t bufferSize, uint32_t *bytesWritten)</a></td> <td class="cellrowborder" width="50%">将buff中的数据写入USB串口设备。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-usb-serial-api-h#oh_usbserial_setbaudrate">int32_t OH_UsbSerial_SetBaudRate(UsbSerial_DeviceHandle *dev, uint32_t baudRate)</a></td> <td class="cellrowborder" width="50%">设置USB串口设备的波特率。如果USB串口设备的参数为默认值（数据位为8，停止位为1，数据传输无校验），则只需要调用该接口设置波特率。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-usb-serial-api-h#oh_usbserial_setparams">int32_t OH_UsbSerial_SetParams(UsbSerial_DeviceHandle *dev, UsbSerial_Params *params)</a></td> <td class="cellrowborder" width="50%">设置USB串口设备的参数。如果USB串口设备的参数不为默认值（数据位默认为8，停止位默认为1，数据传输默认无校验），则需要调用该接口进行参数设置。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-usb-serial-api-h#oh_usbserial_settimeout">int32_t OH_UsbSerial_SetTimeout(UsbSerial_DeviceHandle *dev, int timeout)</a></td> <td class="cellrowborder" width="50%">设置读取USB串口设备上报数据的超时时间（毫秒）。在不调用此函数的情况下，超时值默认为0，表示不管是否读取到数据都立即返回。如果需要等待一定的时间或者必须读取到数据，则调用该接口。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-usb-serial-api-h#oh_usbserial_setflowcontrol">int32_t OH_UsbSerial_SetFlowControl(UsbSerial_DeviceHandle *dev, UsbSerial_FlowControl flowControl)</a></td> <td class="cellrowborder" width="50%"><p>设置流控参数。USB串口设备通信中的流控用于管理数据传输的速率，以确保发送方不会发送超过接收方处理能力的数据量。</p> <p> 如果USB串口设备实现了流控处理，则需要调用此接口。如果不调用此接口，默认为无流控。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-usb-serial-api-h#oh_usbserial_flush">int32_t OH_UsbSerial_Flush(UsbSerial_DeviceHandle *dev)</a></td> <td class="cellrowborder" width="50%"><p>写入完成后清空输入和输出缓冲区。在向USB串口设备发送数据时，可能会有大量数据缓冲在内核中等待发送。如果应用程序关闭文件描述符或者退出之前</p> <p> 没有等待这些数据被实际发送出去，那么部分数据可能会丢失。调用该接口可以确保所有的数据都被发送完毕再继续执行后续操作。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-usb-serial-api-h#oh_usbserial_flushinput">int32_t OH_UsbSerial_FlushInput(UsbSerial_DeviceHandle *dev)</a></td> <td class="cellrowborder" width="50%"><p>刷新输入缓冲区，缓冲区中的数据会被立刻清空。在和USB串口设备通信过程中，特别是在调试阶段，有时会遇到乱序的数据包或者其他异常情况。</p> <p> 调用该接口可以帮助清理这些异常状况，使通信恢复正常。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-usb-serial-api-h#oh_usbserial_flushoutput">int32_t OH_UsbSerial_FlushOutput(UsbSerial_DeviceHandle *dev)</a></td> <td class="cellrowborder" width="50%"><p>刷新输出缓冲区，缓冲区中的数据会被立刻清空。在和USB串口设备通信过程中，特别是在调试阶段，有时会遇到乱序的数据包或者其他异常情况。</p> <p> 调用该接口可以帮助清理这些异常状况，使通信恢复正常。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="2in1">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div></div>  <div class="tiledSection"><h3 id="oh_usbserial_init" device-type="2in1" class="firsth2">OH_UsbSerial_Init()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_usbserial_init" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-tqe-c106="" class="highlight-div"><div _ngcontent-tqe-c106="" class="highlight-div-header"><div _ngcontent-tqe-c106="" class="highlight-div-header-left"><div _ngcontent-tqe-c106="" class="handle-button expand-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tqe-c106="" class="highlight-div-header-right"><div _ngcontent-tqe-c106="" class="handle-button ai-button"></div><div _ngcontent-tqe-c106="" class="handle-button line-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tqe-c106="" class="handle-button theme-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tqe-c106="" class="handle-button copy-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tqe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_UsbSerial_Init</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>初始化USB Serial DDK。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_USB_SERIAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INIT_ERROR</a> 初始化DDK失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_usbserial_release" device-type="2in1">OH_UsbSerial_Release()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_usbserial_release" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-tqe-c106="" class="highlight-div"><div _ngcontent-tqe-c106="" class="highlight-div-header"><div _ngcontent-tqe-c106="" class="highlight-div-header-left"><div _ngcontent-tqe-c106="" class="handle-button expand-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tqe-c106="" class="highlight-div-header-right"><div _ngcontent-tqe-c106="" class="handle-button ai-button"></div><div _ngcontent-tqe-c106="" class="handle-button line-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tqe-c106="" class="handle-button theme-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tqe-c106="" class="handle-button copy-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tqe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_UsbSerial_Release</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>释放USB Serial DDK。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_USB_SERIAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SERVICE_ERROR</a> DDK服务通信失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_usbserial_open" device-type="2in1">OH_UsbSerial_Open()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_usbserial_open" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-tqe-c106="" class="highlight-div"><div _ngcontent-tqe-c106="" class="highlight-div-header"><div _ngcontent-tqe-c106="" class="highlight-div-header-left"><div _ngcontent-tqe-c106="" class="handle-button expand-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tqe-c106="" class="highlight-div-header-right"><div _ngcontent-tqe-c106="" class="handle-button ai-button"></div><div _ngcontent-tqe-c106="" class="handle-button line-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tqe-c106="" class="handle-button theme-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tqe-c106="" class="handle-button copy-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tqe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_UsbSerial_Open</span><span class="hljs-params">(<span class="hljs-type">uint64_t</span> deviceId, <span class="hljs-type">uint8_t</span> interfaceIndex, UsbSerial_DeviceHandle **dev)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过deviceId和interfaceIndex打开USB串口设备。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_USB_SERIAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">uint64_t deviceId</td> <td class="cellrowborder" width="50%">设备ID，代表要操作的设备。</td> </tr> <tr><td class="cellrowborder" width="50%">uint8_t interfaceIndex</td> <td class="cellrowborder" width="50%">接口索引，对应USB协议中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usbddk-usbinterfacedescriptor">bInterfaceNumber</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-serialddk-usbserial-devicehandle">UsbSerial_DeviceHandle</a> **dev</td> <td class="cellrowborder" width="50%">设备句柄。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_PARAMETER</a> 参数检查失败。可能原因为：dev为空指针。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SERVICE_ERROR</a> DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_MEMORY_ERROR</a> 内存不足。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_DEVICE_NOT_FOUND</a> 找不到设备或接口。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_usbserial_close" device-type="2in1">OH_UsbSerial_Close()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_usbserial_close" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-tqe-c106="" class="highlight-div"><div _ngcontent-tqe-c106="" class="highlight-div-header"><div _ngcontent-tqe-c106="" class="highlight-div-header-left"><div _ngcontent-tqe-c106="" class="handle-button expand-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tqe-c106="" class="highlight-div-header-right"><div _ngcontent-tqe-c106="" class="handle-button ai-button"></div><div _ngcontent-tqe-c106="" class="handle-button line-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tqe-c106="" class="handle-button theme-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tqe-c106="" class="handle-button copy-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tqe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_UsbSerial_Close</span>(UsbSerial_DeviceHandle *dev)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>关闭USB串口设备。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_USB_SERIAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-serialddk-usbserial-devicehandle">UsbSerial_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_PARAMETER</a> 参数检查失败。可能原因：dev为空指针。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SERVICE_ERROR</a> DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_OPERATION</a> 无效操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_usbserial_read" device-type="2in1">OH_UsbSerial_Read()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_usbserial_read" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-tqe-c106="" class="highlight-div"><div _ngcontent-tqe-c106="" class="highlight-div-header"><div _ngcontent-tqe-c106="" class="highlight-div-header-left"><div _ngcontent-tqe-c106="" class="handle-button expand-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tqe-c106="" class="highlight-div-header-right"><div _ngcontent-tqe-c106="" class="handle-button ai-button"></div><div _ngcontent-tqe-c106="" class="handle-button line-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tqe-c106="" class="handle-button theme-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tqe-c106="" class="handle-button copy-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tqe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_UsbSerial_Read</span><span class="hljs-params">(UsbSerial_DeviceHandle *dev, <span class="hljs-type">uint8_t</span> *buff, <span class="hljs-type">uint32_t</span> bufferSize, <span class="hljs-type">uint32_t</span> *bytesRead)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>从USB串口设备读入数据到缓冲区。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_USB_SERIAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-serialddk-usbserial-devicehandle">UsbSerial_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄。</td> </tr> <tr><td class="cellrowborder" width="50%">uint8_t *buff</td> <td class="cellrowborder" width="50%">保存从USB串口设备读取数据的缓冲区。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t bufferSize</td> <td class="cellrowborder" width="50%">缓冲区的大小。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t *bytesRead</td> <td class="cellrowborder" width="50%"><p>实际读取的字节数，如果设置了阻塞模式，则实际读取到的数据等于bufferSize后才会返回，</p> <p> 详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-api-h#oh_usbserial_settimeout">OH_UsbSerial_SetTimeout</a>。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_PARAMETER</a> 参数检查失败。可能原因：1. dev为空指针;</p> <p> 2. buff为空指针; 3. bufferSize等于0; 4. bytesRead为空指针。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SERVICE_ERROR</a> DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_MEMORY_ERROR</a> buff地址无效。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_OPERATION</a> 无效操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_usbserial_write" device-type="2in1">OH_UsbSerial_Write()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_usbserial_write" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-tqe-c106="" class="highlight-div"><div _ngcontent-tqe-c106="" class="highlight-div-header"><div _ngcontent-tqe-c106="" class="highlight-div-header-left"><div _ngcontent-tqe-c106="" class="handle-button expand-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tqe-c106="" class="highlight-div-header-right"><div _ngcontent-tqe-c106="" class="handle-button ai-button"></div><div _ngcontent-tqe-c106="" class="handle-button line-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tqe-c106="" class="handle-button theme-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tqe-c106="" class="handle-button copy-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tqe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_UsbSerial_Write</span><span class="hljs-params">(UsbSerial_DeviceHandle *dev, <span class="hljs-type">uint8_t</span> *buff, <span class="hljs-type">uint32_t</span> bufferSize, <span class="hljs-type">uint32_t</span> *bytesWritten)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将buff中的数据写入USB串口设备。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_USB_SERIAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-serialddk-usbserial-devicehandle">UsbSerial_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄。</td> </tr> <tr><td class="cellrowborder" width="50%">uint8_t *buff</td> <td class="cellrowborder" width="50%">写入USB串口设备数据的缓冲区。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t bufferSize</td> <td class="cellrowborder" width="50%">缓冲区的大小。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t *bytesWritten</td> <td class="cellrowborder" width="50%">实际写入的字节数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_PARAMETER</a> 参数检查失败。可能原因：1. dev为空指针;</p> <p> 2. buff为空指针; 3. bufferSize等于0; 4. bytesWritten为空指针。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SERVICE_ERROR</a> DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_MEMORY_ERROR</a> buff地址无效。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_OPERATION</a> 无效操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_usbserial_setbaudrate" device-type="2in1">OH_UsbSerial_SetBaudRate()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_usbserial_setbaudrate" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-tqe-c106="" class="highlight-div"><div _ngcontent-tqe-c106="" class="highlight-div-header"><div _ngcontent-tqe-c106="" class="highlight-div-header-left"><div _ngcontent-tqe-c106="" class="handle-button expand-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tqe-c106="" class="highlight-div-header-right"><div _ngcontent-tqe-c106="" class="handle-button ai-button"></div><div _ngcontent-tqe-c106="" class="handle-button line-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tqe-c106="" class="handle-button theme-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tqe-c106="" class="handle-button copy-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tqe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_UsbSerial_SetBaudRate</span><span class="hljs-params">(UsbSerial_DeviceHandle *dev, <span class="hljs-type">uint32_t</span> baudRate)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置USB串口设备的波特率。如果USB串口设备的参数为默认值（数据位为8，停止位为1，数据传输无校验），则只需要调用该接口设置波特率。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_USB_SERIAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-serialddk-usbserial-devicehandle">UsbSerial_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t baudRate</td> <td class="cellrowborder" width="50%">USB串口设备的波特率。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_PARAMETER</a>参数检查失败。可能原因：dev为空指针。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SERVICE_ERROR</a> DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_OPERATION</a> 无效操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_usbserial_setparams" device-type="2in1">OH_UsbSerial_SetParams()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_usbserial_setparams" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-tqe-c106="" class="highlight-div"><div _ngcontent-tqe-c106="" class="highlight-div-header"><div _ngcontent-tqe-c106="" class="highlight-div-header-left"><div _ngcontent-tqe-c106="" class="handle-button expand-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tqe-c106="" class="highlight-div-header-right"><div _ngcontent-tqe-c106="" class="handle-button ai-button"></div><div _ngcontent-tqe-c106="" class="handle-button line-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tqe-c106="" class="handle-button theme-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tqe-c106="" class="handle-button copy-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tqe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_UsbSerial_SetParams</span>(UsbSerial_DeviceHandle *dev, UsbSerial_Params *params)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置USB串口设备的参数。如果USB串口设备的参数不为默认值（数据位默认为8，停止位默认为1，数据传输默认无校验），则需要调用该接口进行参数设置。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_USB_SERIAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-serialddk-usbserial-devicehandle">UsbSerial_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-serialddk-usbserial-params">UsbSerial_Params</a> *params</td> <td class="cellrowborder" width="50%">待设置的USB串口设备参数，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-serialddk-usbserial-params">UsbSerial_Params</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_PARAMETER</a> 参数检查失败。可能原因：1. dev为空指针;</p> <p> 2. params为空指针。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SERVICE_ERROR</a> DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_OPERATION</a> 无效操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_usbserial_settimeout" device-type="2in1">OH_UsbSerial_SetTimeout()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_usbserial_settimeout" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-tqe-c106="" class="highlight-div"><div _ngcontent-tqe-c106="" class="highlight-div-header"><div _ngcontent-tqe-c106="" class="highlight-div-header-left"><div _ngcontent-tqe-c106="" class="handle-button expand-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tqe-c106="" class="highlight-div-header-right"><div _ngcontent-tqe-c106="" class="handle-button ai-button"></div><div _ngcontent-tqe-c106="" class="handle-button line-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tqe-c106="" class="handle-button theme-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tqe-c106="" class="handle-button copy-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tqe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_UsbSerial_SetTimeout</span><span class="hljs-params">(UsbSerial_DeviceHandle *dev, <span class="hljs-type">int</span> timeout)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置读取USB串口设备上报数据的超时时间（毫秒）。在不调用此函数的情况下，超时值默认为0，表示不管是否读取到数据都立即返回。如果需要等待一定的时间或者必须读取到数据，则调用该接口。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_USB_SERIAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-serialddk-usbserial-devicehandle">UsbSerial_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄。</td> </tr> <tr><td class="cellrowborder" width="50%">int timeout</td> <td class="cellrowborder" width="50%">读取USB串口设备的超时时间，其取值范围为：- (0, 25500]：以毫秒为单位的时间值，将其四舍五入为最接近的100毫秒后，作为实际的超时时间。例如，输入12321，实际生效的超时时间为12300。- 0：表示立即返回数据，不等待。- -1：表示以阻塞方式读取数据，即读取数据时，只有读到指定长度的数据后才返回，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-api-h#oh_usbserial_read">OH_UsbSerial_Read</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_PARAMETER</a> 参数检查失败。可能原因：1. dev为空指针;</p> <p> 2. timeout &lt; -1 or timeout &gt; 25500.</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SERVICE_ERROR</a> DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_OPERATION</a> 无效操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_usbserial_setflowcontrol" device-type="2in1">OH_UsbSerial_SetFlowControl()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_usbserial_setflowcontrol" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-tqe-c106="" class="highlight-div"><div _ngcontent-tqe-c106="" class="highlight-div-header"><div _ngcontent-tqe-c106="" class="highlight-div-header-left"><div _ngcontent-tqe-c106="" class="handle-button expand-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tqe-c106="" class="highlight-div-header-right"><div _ngcontent-tqe-c106="" class="handle-button ai-button"></div><div _ngcontent-tqe-c106="" class="handle-button line-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tqe-c106="" class="handle-button theme-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tqe-c106="" class="handle-button copy-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tqe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_UsbSerial_SetFlowControl</span>(UsbSerial_DeviceHandle *dev, UsbSerial_FlowControl flowControl)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置流控参数。USB串口设备通信中的流控用于管理数据传输的速率，以确保发送方不会发送超过接收方处理能力的数据量。</p> <p> 如果USB串口设备实现了流控处理，则需要调用此接口。如果不调用此接口，默认为无流控。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_USB_SERIAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-serialddk-usbserial-devicehandle">UsbSerial_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_flowcontrol">UsbSerial_FlowControl</a> flowControl</td> <td class="cellrowborder" width="50%">流控方式，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_flowcontrol">UsbSerial_FlowControl</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_PARAMETER</a> 参数检查失败。可能原因：dev为空指针。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SERVICE_ERROR</a> DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_OPERATION</a> 无效操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_usbserial_flush" device-type="2in1">OH_UsbSerial_Flush()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_usbserial_flush" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-tqe-c106="" class="highlight-div"><div _ngcontent-tqe-c106="" class="highlight-div-header"><div _ngcontent-tqe-c106="" class="highlight-div-header-left"><div _ngcontent-tqe-c106="" class="handle-button expand-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tqe-c106="" class="highlight-div-header-right"><div _ngcontent-tqe-c106="" class="handle-button ai-button"></div><div _ngcontent-tqe-c106="" class="handle-button line-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tqe-c106="" class="handle-button theme-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tqe-c106="" class="handle-button copy-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tqe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_UsbSerial_Flush</span>(UsbSerial_DeviceHandle *dev)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>写入完成后清空输入和输出缓冲区。在向USB串口设备发送数据时，可能会有大量数据缓冲在内核中等待发送。如果应用程序关闭文件描述符或者退出之前</p> <p> 没有等待这些数据被实际发送出去，那么部分数据可能会丢失。调用该接口可以确保所有的数据都被发送完毕再继续执行后续操作。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_USB_SERIAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-serialddk-usbserial-devicehandle">UsbSerial_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_PARAMETER</a> 参数检查失败。可能原因：dev为空指针。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SERVICE_ERROR</a> DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_OPERATION</a> 无效操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_usbserial_flushinput" device-type="2in1">OH_UsbSerial_FlushInput()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_usbserial_flushinput" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-tqe-c106="" class="highlight-div"><div _ngcontent-tqe-c106="" class="highlight-div-header"><div _ngcontent-tqe-c106="" class="highlight-div-header-left"><div _ngcontent-tqe-c106="" class="handle-button expand-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tqe-c106="" class="highlight-div-header-right"><div _ngcontent-tqe-c106="" class="handle-button ai-button"></div><div _ngcontent-tqe-c106="" class="handle-button line-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tqe-c106="" class="handle-button theme-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tqe-c106="" class="handle-button copy-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tqe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_UsbSerial_FlushInput</span>(UsbSerial_DeviceHandle *dev)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>刷新输入缓冲区，缓冲区中的数据会被立刻清空。在和USB串口设备通信过程中，特别是在调试阶段，有时会遇到乱序的数据包或者其他异常情况。</p> <p> 调用该接口可以帮助清理这些异常状况，使通信恢复正常。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_USB_SERIAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-serialddk-usbserial-devicehandle">UsbSerial_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_PARAMETER</a> 参数检查失败。可能原因：dev为空指针。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SERVICE_ERROR</a> DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_OPERATION</a> 无效操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_usbserial_flushoutput" device-type="2in1">OH_UsbSerial_FlushOutput()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_usbserial_flushoutput" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-tqe-c106="" class="highlight-div"><div _ngcontent-tqe-c106="" class="highlight-div-header"><div _ngcontent-tqe-c106="" class="highlight-div-header-left"><div _ngcontent-tqe-c106="" class="handle-button expand-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tqe-c106="" class="highlight-div-header-right"><div _ngcontent-tqe-c106="" class="handle-button ai-button"></div><div _ngcontent-tqe-c106="" class="handle-button line-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tqe-c106="" class="handle-button theme-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tqe-c106="" class="handle-button copy-button"><div _ngcontent-tqe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tqe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_UsbSerial_FlushOutput</span>(UsbSerial_DeviceHandle *dev)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>刷新输出缓冲区，缓冲区中的数据会被立刻清空。在和USB串口设备通信过程中，特别是在调试阶段，有时会遇到乱序的数据包或者其他异常情况。</p> <p> 调用该接口可以帮助清理这些异常状况，使通信恢复正常。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_USB_SERIAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-serialddk-usbserial-devicehandle">UsbSerial_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_PARAMETER</a> 参数检查失败。可能原因：dev为空指针。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_SERVICE_ERROR</a> DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-usb-serial-types-h#usbserial_ddkretcode">USB_SERIAL_DDK_INVALID_OPERATION</a> 无效操作。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>