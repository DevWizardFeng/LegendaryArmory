<h1 _ngcontent-cxk-c119="" class="doc-title ng-star-inserted" title="video_processing_types.h"> video_processing_types.h </h1>

<div _ngcontent-cxk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>视频处理类型定义。</p> <p><strong>引用文件：</strong> &lt;multimedia/video_processing_engine/video_processing_types.h&gt;</p> <p><strong>库：</strong> libvideo_processing.so</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.VideoProcessingEngine</p> <p><strong>起始版本：</strong> 12</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-videoprocessing">VideoProcessing</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div></div>  <div class="tiledSection"><h3 id="结构体" device-type="phone,2in1,tablet" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/api-videoprocessing-videoprocessing-colorspaceinfo">VideoProcessing_ColorSpaceInfo</a></td> <td class="cellrowborder" width="33.33333333333333%">VideoProcessing_ColorSpaceInfo</td> <td class="cellrowborder" width="33.33333333333333%">视频颜色空间信息数据结构。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-videoprocessing-oh-videoprocessing">OH_VideoProcessing</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_VideoProcessing</td> <td class="cellrowborder" width="33.33333333333333%"><p>定义视频处理对象。</p> <p>定义一个OH_VideoProcessing空指针，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessing_create">OH_VideoProcessing_Create</a>创建视频处理实例，该指针在创建实例之前必须为空。用户可以对不同的处理类型创建不同的视频处理实例。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-videoprocessing-nativewindow">NativeWindow</a></td> <td class="cellrowborder" width="33.33333333333333%">OHNativeWindow</td> <td class="cellrowborder" width="33.33333333333333%">定义NativeWindow对象。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-videoprocessing-oh-avformat">OH_AVFormat</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVFormat</td> <td class="cellrowborder" width="33.33333333333333%">定义OH_AVFormat对象。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-videoprocessing-videoprocessing-callback">VideoProcessing_Callback</a></td> <td class="cellrowborder" width="33.33333333333333%">VideoProcessing_Callback</td> <td class="cellrowborder" width="33.33333333333333%"><p>视频处理回调对象类型。</p> <p>定义一个VideoProcessing_Callback空指针，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessingcallback_create">OH_VideoProcessingCallback_Create</a>来创建一个回调对象。创建之前该指针必须为空。通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessing_registercallback">OH_VideoProcessing_RegisterCallback</a>来向视频处理实例注册回调对象。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="枚举" device-type="phone,2in1,tablet">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#videodetailenhancer_qualitylevel">VideoDetailEnhancer_QualityLevel</a></td> <td class="cellrowborder" width="33.33333333333333%">VideoDetailEnhancer_QualityLevel</td> <td class="cellrowborder" width="33.33333333333333%">用于细节增强的质量等级。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#videoprocessing_errorcode">VideoProcessing_ErrorCode</a></td> <td class="cellrowborder" width="33.33333333333333%">VideoProcessing_ErrorCode</td> <td class="cellrowborder" width="33.33333333333333%">视频处理错误码。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#videoprocessing_state">VideoProcessing_State</a></td> <td class="cellrowborder" width="33.33333333333333%">VideoProcessing_State</td> <td class="cellrowborder" width="33.33333333333333%"><p>视频处理状态。</p> <p>视频处理状态通过回调函数<a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#oh_videoprocessingcallback_onstate">OH_VideoProcessingCallback_OnState</a>进行报告。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#oh_videoprocessingcallback_onerror">typedef void (*OH_VideoProcessingCallback_OnError)(OH_VideoProcessing* videoProcessor,VideoProcessing_ErrorCode error, void* userData)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_VideoProcessingCallback_OnError</td> <td class="cellrowborder" width="33.33333333333333%">视频处理过程中报告错误的回调函数指针。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#oh_videoprocessingcallback_onstate">typedef void (*OH_VideoProcessingCallback_OnState)(OH_VideoProcessing* videoProcessor, VideoProcessing_State state, void* userData)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_VideoProcessingCallback_OnState</td> <td class="cellrowborder" width="33.33333333333333%"><p>报告视频处理状态的回调函数指针。</p> <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessing_start">OH_VideoProcessing_Start</a>成功调用之后状态会变为<a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#videoprocessing_state">VideoProcessing_State</a>.VIDEO_PROCESSING_STATE_RUNNING。调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessing_stop">OH_VideoProcessing_Stop</a>，所有的缓存buffer处理完成后，状态会变为<a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#videoprocessing_state">VideoProcessing_State</a>.VIDEO_PROCESSING_STATE_STOPPED。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#oh_videoprocessingcallback_onnewoutputbuffer">typedef void (*OH_VideoProcessingCallback_OnNewOutputBuffer)(OH_VideoProcessing* videoProcessor, uint32_t index, void* userData)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_VideoProcessingCallback_OnNewOutputBuffer</td> <td class="cellrowborder" width="33.33333333333333%"><p>报告输出buffer已填充好数据的回调函数指针。</p> <p>每个新输出buffer填充好数据之后该buffer的索引就会报告给用户。调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessing_renderoutputbuffer">OH_VideoProcessing_RenderOutputBuffer</a>根据索引来处理渲染并输出该buffer。如果未注册该函数，则输出buffer填充好数据后不会报告用户，而是直接进行处理渲染并输出。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="变量" device-type="phone,2in1,tablet">变量<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="变量" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.2.1.3.1.1" width="50%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const int32_t VIDEO_PROCESSING_TYPE_COLOR_SPACE_CONVERSION</td> <td class="cellrowborder" width="50%"><p>表示创建颜色空间转换视频处理实例。</p> <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessing_create">OH_VideoProcessing_Create</a>创建颜色空间转换视频处理实例，如果不支持该能力返回<a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#videoprocessing_errorcode">VideoProcessing_ErrorCode</a>.VIDEO_PROCESSING_ERROR_UNSUPPORTED_PROCESSING。</p> <p><strong>起始版本：</strong> 12</p> </td> </tr> <tr><td class="cellrowborder" width="50%">const int32_t VIDEO_PROCESSING_TYPE_METADATA_GENERATION</td> <td class="cellrowborder" width="50%"><p>表示创建元数据生成视频处理实例。</p> <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessing_create">OH_VideoProcessing_Create</a>创建元数据生成视频处理实例，如果不支持该能力返回<a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#videoprocessing_errorcode">VideoProcessing_ErrorCode</a>.VIDEO_PROCESSING_ERROR_UNSUPPORTED_PROCESSING。</p> <p><strong>起始版本：</strong> 12</p> </td> </tr> <tr><td class="cellrowborder" width="50%">const int32_t VIDEO_PROCESSING_TYPE_DETAIL_ENHANCER</td> <td class="cellrowborder" width="50%"><p>表示创建细节增强视频处理实例。</p> <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessing_create">OH_VideoProcessing_Create</a>创建细节增强视频处理实例，如果不支持该能力返回<a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#videoprocessing_errorcode">VideoProcessing_ErrorCode</a>.VIDEO_PROCESSING_ERROR_UNSUPPORTED_PROCESSING。</p> <p><strong>起始版本：</strong> 12</p> </td> </tr> <tr><td class="cellrowborder" width="50%">const char* VIDEO_DETAIL_ENHANCER_PARAMETER_KEY_QUALITY_LEVEL</td> <td class="cellrowborder" width="50%"><p>指定视频细节增强的质量等级，参考<a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#videodetailenhancer_qualitylevel">VideoDetailEnhancer_QualityLevel</a>查看具体取值。</p> <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessing_setparameter">OH_VideoProcessing_SetParameter</a>设置质量等级。</p> <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessing_getparameter">OH_VideoProcessing_GetParameter</a>获取当前质量等级。</p> <p><strong>起始版本：</strong> 12</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="枚举类型说明" device-type="phone,2in1,tablet">枚举类型说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举类型说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div></div>  <div class="tiledSection"><h3 id="videodetailenhancer_qualitylevel" device-type="phone,2in1,tablet" class="firsth2">VideoDetailEnhancer_QualityLevel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="videodetailenhancer_qualitylevel" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-cxk-c106="" class="highlight-div"><div _ngcontent-cxk-c106="" class="highlight-div-header"><div _ngcontent-cxk-c106="" class="highlight-div-header-left"><div _ngcontent-cxk-c106="" class="handle-button expand-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxk-c106="" class="highlight-div-header-right"><div _ngcontent-cxk-c106="" class="handle-button ai-button"></div><div _ngcontent-cxk-c106="" class="handle-button line-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxk-c106="" class="handle-button theme-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxk-c106="" class="handle-button copy-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">VideoDetailEnhancer_QualityLevel</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>用于细节增强的质量等级。参数VIDEO_DETAIL_ENHANCER_PARAMETER_KEY_QUALITY_LEVEL的具体取值，设置方法详见开发指南。</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">VIDEO_DETAIL_ENHANCER_QUALITY_LEVEL_NONE</td> <td class="cellrowborder" width="50%">无细节增强。</td> </tr> <tr><td class="cellrowborder" width="50%">VIDEO_DETAIL_ENHANCER_QUALITY_LEVEL_LOW</td> <td class="cellrowborder" width="50%">低质量等级细节增强，速度较快，默认设置。</td> </tr> <tr><td class="cellrowborder" width="50%">VIDEO_DETAIL_ENHANCER_QUALITY_LEVEL_MEDIUM</td> <td class="cellrowborder" width="50%">中等质量等级细节增强，速度适中。</td> </tr> <tr><td class="cellrowborder" width="50%">VIDEO_DETAIL_ENHANCER_QUALITY_LEVEL_HIGH</td> <td class="cellrowborder" width="50%">高质量等级细节增强，速度相对较慢。</td> </tr>  </tbody></table></div> </div> <p><strong>参考：</strong></p> <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessing_setparameter">OH_VideoProcessing_SetParameter</a></p> <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessing_getparameter">OH_VideoProcessing_GetParameter</a></p> </div>  <div class="tiledSection"><h3 id="videoprocessing_errorcode" device-type="phone,2in1,tablet">VideoProcessing_ErrorCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="videoprocessing_errorcode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-cxk-c106="" class="highlight-div"><div _ngcontent-cxk-c106="" class="highlight-div-header"><div _ngcontent-cxk-c106="" class="highlight-div-header-left"><div _ngcontent-cxk-c106="" class="handle-button expand-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxk-c106="" class="highlight-div-header-right"><div _ngcontent-cxk-c106="" class="handle-button ai-button"></div><div _ngcontent-cxk-c106="" class="handle-button line-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxk-c106="" class="handle-button theme-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxk-c106="" class="handle-button copy-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">VideoProcessing_ErrorCode</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>视频处理错误码。</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">VIDEO_PROCESSING_SUCCESS</td> <td class="cellrowborder" width="50%">处理成功。</td> </tr> <tr><td class="cellrowborder" width="50%">VIDEO_PROCESSING_ERROR_INVALID_PARAMETER = 401</td> <td class="cellrowborder" width="50%"><p>输入参数无效。以下情况都会返回该错误码：</p> <p>1. 无效的输入或输出视频buffer，视频buffer为空。</p> <p>2. 无效的参数，参数为空。</p> <p>3. 无效的处理类型。</p> </td> </tr> <tr><td class="cellrowborder" width="50%">VIDEO_PROCESSING_ERROR_UNKNOWN = 29210001</td> <td class="cellrowborder" width="50%">未知错误，比如GPU计算失败或memcpy失败。</td> </tr> <tr><td class="cellrowborder" width="50%">VIDEO_PROCESSING_ERROR_INITIALIZE_FAILED</td> <td class="cellrowborder" width="50%">视频处理全局环境初始化失败，比如初始化GPU环境失败。</td> </tr> <tr><td class="cellrowborder" width="50%">VIDEO_PROCESSING_ERROR_CREATE_FAILED</td> <td class="cellrowborder" width="50%">创建视频处理实例失败，比如实例总数超出上限。</td> </tr> <tr><td class="cellrowborder" width="50%">VIDEO_PROCESSING_ERROR_PROCESS_FAILED</td> <td class="cellrowborder" width="50%">处理过程失败，比如处理时间超时。</td> </tr> <tr><td class="cellrowborder" width="50%">VIDEO_PROCESSING_ERROR_UNSUPPORTED_PROCESSING</td> <td class="cellrowborder" width="50%">不支持的处理类型，可以调用OH_VideoProcessing_IsXXXSupported来检查是否支持这种处理。</td> </tr> <tr><td class="cellrowborder" width="50%">VIDEO_PROCESSING_ERROR_OPERATION_NOT_PERMITTED</td> <td class="cellrowborder" width="50%">不允许的操作，比如不满足调用接口所需的运行状态下调用该接口。</td> </tr> <tr><td class="cellrowborder" width="50%">VIDEO_PROCESSING_ERROR_NO_MEMORY</td> <td class="cellrowborder" width="50%">内存不足。</td> </tr> <tr><td class="cellrowborder" width="50%">VIDEO_PROCESSING_ERROR_INVALID_INSTANCE</td> <td class="cellrowborder" width="50%">视频处理实例无效，比如视频处理实例为空实例。</td> </tr> <tr><td class="cellrowborder" width="50%">VIDEO_PROCESSING_ERROR_INVALID_VALUE</td> <td class="cellrowborder" width="50%"><p>输入值无效，以下情况都会造成这种错误：</p> <p>1. 视频buffer宽高太大或者颜色空间错误。</p> <p>2. 参数包含无效的值，比如细节增强的质量等级错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="videoprocessing_state" device-type="phone,2in1,tablet">VideoProcessing_State<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="videoprocessing_state" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-cxk-c106="" class="highlight-div"><div _ngcontent-cxk-c106="" class="highlight-div-header"><div _ngcontent-cxk-c106="" class="highlight-div-header-left"><div _ngcontent-cxk-c106="" class="handle-button expand-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxk-c106="" class="highlight-div-header-right"><div _ngcontent-cxk-c106="" class="handle-button ai-button"></div><div _ngcontent-cxk-c106="" class="handle-button line-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxk-c106="" class="handle-button theme-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxk-c106="" class="handle-button copy-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">VideoProcessing_State</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>视频处理状态。</p> <p>视频处理状态通过回调函数<a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#oh_videoprocessingcallback_onstate">OH_VideoProcessingCallback_OnState</a>进行报告。</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">VIDEO_PROCESSING_STATE_RUNNING</td> <td class="cellrowborder" width="50%">视频处理进行中。</td> </tr> <tr><td class="cellrowborder" width="50%">VIDEO_PROCESSING_STATE_STOPPED</td> <td class="cellrowborder" width="50%">视频处理已停止。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="phone,2in1,tablet">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div></div>  <div class="tiledSection"><h3 id="oh_videoprocessingcallback_onerror" device-type="phone,2in1,tablet" class="firsth2">OH_VideoProcessingCallback_OnError()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoprocessingcallback_onerror" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-cxk-c106="" class="highlight-div"><div _ngcontent-cxk-c106="" class="highlight-div-header"><div _ngcontent-cxk-c106="" class="highlight-div-header-left"><div _ngcontent-cxk-c106="" class="handle-button expand-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxk-c106="" class="highlight-div-header-right"><div _ngcontent-cxk-c106="" class="handle-button ai-button"></div><div _ngcontent-cxk-c106="" class="handle-button line-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxk-c106="" class="handle-button theme-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxk-c106="" class="handle-button copy-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_VideoProcessingCallback_OnError)(OH_VideoProcessing* videoProcessor,VideoProcessing_ErrorCode error, <span class="hljs-type">void</span>* userData)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>视频处理过程中报告错误的回调函数指针。</p> <p>错误码<a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#videoprocessing_errorcode">VideoProcessing_ErrorCode</a>：</p> <p>VIDEO_PROCESSING_ERROR_UNSUPPORTED_PROCESSING，不支持的处理，比如不支持输入输出的颜色空间类型转换。</p> <p>VIDEO_PROCESSING_ERROR_INVALID_VALUE，无效的视频属性，比如视频的颜色空间无效。</p> <p>VIDEO_PROCESSING_ERROR_NO_MEMORY，内存不足。</p> <p>VIDEO_PROCESSING_ERROR_PROCESS_FAILED，处理过程中出错。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-videoprocessing-oh-videoprocessing">OH_VideoProcessing</a>* videoProcessor</td> <td class="cellrowborder" width="50%">视频处理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#videoprocessing_errorcode">VideoProcessing_ErrorCode</a> error</td> <td class="cellrowborder" width="50%">报告给用户的错误码。</td> </tr> <tr><td class="cellrowborder" width="50%">void* userData</td> <td class="cellrowborder" width="50%">用户的自定义数据。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_videoprocessingcallback_onstate" device-type="phone,2in1,tablet">OH_VideoProcessingCallback_OnState()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoprocessingcallback_onstate" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-cxk-c106="" class="highlight-div"><div _ngcontent-cxk-c106="" class="highlight-div-header"><div _ngcontent-cxk-c106="" class="highlight-div-header-left"><div _ngcontent-cxk-c106="" class="handle-button expand-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxk-c106="" class="highlight-div-header-right"><div _ngcontent-cxk-c106="" class="handle-button ai-button"></div><div _ngcontent-cxk-c106="" class="handle-button line-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxk-c106="" class="handle-button theme-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxk-c106="" class="handle-button copy-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_VideoProcessingCallback_OnState)(OH_VideoProcessing* videoProcessor, VideoProcessing_State state,<span class="hljs-type">void</span>* userData)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>报告视频处理状态的回调函数指针。</p> <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessing_start">OH_VideoProcessing_Start</a>成功调用之后状态会变为<a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#videoprocessing_state">VideoProcessing_State</a>.VIDEO_PROCESSING_STATE_RUNNING。调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessing_stop">OH_VideoProcessing_Stop</a>，所有的缓存buffer处理完成后，状态会变为<a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#videoprocessing_state">VideoProcessing_State</a>.VIDEO_PROCESSING_STATE_STOPPED。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-videoprocessing-oh-videoprocessing">OH_VideoProcessing</a>* videoProcessor</td> <td class="cellrowborder" width="50%">视频处理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-video-processing-types-h#videoprocessing_state">VideoProcessing_State</a> state</td> <td class="cellrowborder" width="50%">视频处理状态。</td> </tr> <tr><td class="cellrowborder" width="50%">void* userData</td> <td class="cellrowborder" width="50%">用户的自定义数据。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_videoprocessingcallback_onnewoutputbuffer" device-type="phone,2in1,tablet">OH_VideoProcessingCallback_OnNewOutputBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoprocessingcallback_onnewoutputbuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-cxk-c106="" class="highlight-div"><div _ngcontent-cxk-c106="" class="highlight-div-header"><div _ngcontent-cxk-c106="" class="highlight-div-header-left"><div _ngcontent-cxk-c106="" class="handle-button expand-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxk-c106="" class="highlight-div-header-right"><div _ngcontent-cxk-c106="" class="handle-button ai-button"></div><div _ngcontent-cxk-c106="" class="handle-button line-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxk-c106="" class="handle-button theme-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxk-c106="" class="handle-button copy-button"><div _ngcontent-cxk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*OH_VideoProcessingCallback_OnNewOutputBuffer)</span><span class="hljs-params">(OH_VideoProcessing* videoProcessor, <span class="hljs-type">uint32_t</span> index,<span class="hljs-type">void</span>* userData)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>报告输出buffer已填充好数据的回调函数指针。</p> <p>每个新输出buffer填充好数据之后该buffer的索引就会报告给用户。调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-video-processing-h#oh_videoprocessing_renderoutputbuffer">OH_VideoProcessing_RenderOutputBuffer</a>根据索引来处理渲染并输出该buffer。如果未注册该函数，则输出buffer填充好数据后不会报告用户，而是直接进行处理渲染并输出。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-videoprocessing-oh-videoprocessing">OH_VideoProcessing</a>* videoProcessor</td> <td class="cellrowborder" width="50%">视频处理实例。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t index</td> <td class="cellrowborder" width="50%">新输出buffer的索引。</td> </tr> <tr><td class="cellrowborder" width="50%">void* userData</td> <td class="cellrowborder" width="50%">用户自定义的数据。</td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>