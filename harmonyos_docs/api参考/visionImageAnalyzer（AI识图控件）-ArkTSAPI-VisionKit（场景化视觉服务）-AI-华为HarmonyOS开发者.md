<h1 _ngcontent-bqf-c119="" class="doc-title ng-star-inserted" title="visionImageAnalyzer（AI识图控件）"> visionImageAnalyzer（AI识图控件） </h1>

<div _ngcontent-bqf-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;"> <div><p>AI识图是通过聚合OCR（Optical Character Recognition）、主体分割、实体识别、多目标识别等AI能力，提供场景化的文本识别、主体分割、识图搜索功能。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>调用接口需捕获异常。</p> </div></div></div> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;"><h2 id="section16609101116259" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16609101116259" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 450px;"><h2 id="section12912173105717" device-type="phone,2in1,tablet">Menu<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12912173105717" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>AI识图菜单。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.1" width="23.12%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.2" width="23.12%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.3" width="7.520000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.4" width="23.12%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.5" width="23.12%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.12%"><p>value</p> </td> <td class="cellrowborder" width="23.12%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcestr" target="_blank">ResourceStr</a></p> </td> <td class="cellrowborder" width="7.520000000000001%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>菜单内容。</p> </td> </tr> <tr><td class="cellrowborder" width="23.12%"><p>action</p> </td> <td class="cellrowborder" width="23.12%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;string | <a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section242033555713">Subject</a>[]&gt;</p> </td> <td class="cellrowborder" width="7.520000000000001%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>菜单结果回调，包含文字选中结果和抠图结果。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 708px;"><h2 id="section47991924195714" device-type="phone,2in1,tablet">Rect<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section47991924195714" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>矩形数据结构。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.1" width="23.12%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.2" width="23.12%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.3" width="7.520000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.4" width="23.12%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.5" width="23.12%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.12%"><p>left</p> </td> <td class="cellrowborder" width="23.12%"><p>number</p> </td> <td class="cellrowborder" width="7.520000000000001%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>是</p> </td> <td class="cellrowborder" width="23.12%"><p>矩形的左方位置。取值范围在图片的左边界到右边界之间。单位：vp。</p> </td> </tr> <tr><td class="cellrowborder" width="23.12%"><p>top</p> </td> <td class="cellrowborder" width="23.12%"><p>number</p> </td> <td class="cellrowborder" width="7.520000000000001%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>是</p> </td> <td class="cellrowborder" width="23.12%"><p>矩形的上方位置。取值范围在图片的上边界到下边界之间。单位：vp。</p> </td> </tr> <tr><td class="cellrowborder" width="23.12%"><p>right</p> </td> <td class="cellrowborder" width="23.12%"><p>number</p> </td> <td class="cellrowborder" width="7.520000000000001%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>是</p> </td> <td class="cellrowborder" width="23.12%"><p>矩形的右方位置。取值范围在图片的左边界到右边界之间。单位：vp。</p> </td> </tr> <tr><td class="cellrowborder" width="23.12%"><p>bottom</p> </td> <td class="cellrowborder" width="23.12%"><p>number</p> </td> <td class="cellrowborder" width="7.520000000000001%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>是</p> </td> <td class="cellrowborder" width="23.12%"><p>矩形的下方位置。取值范围在图片的上边界到下边界之间。单位：vp。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 932px;"><h2 id="section242033555713" device-type="phone,2in1,tablet">Subject<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section242033555713" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>主体识别结果。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.1" width="23.12%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.2" width="23.12%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.3" width="7.520000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.4" width="23.12%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.5" width="23.12%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.12%"><p>id</p> </td> <td class="cellrowborder" width="23.12%"><p>number</p> </td> <td class="cellrowborder" width="7.520000000000001%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>主体id。取值范围：[0，6]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.12%"><p>image</p> </td> <td class="cellrowborder" width="23.12%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">PixelMap</a></p> </td> <td class="cellrowborder" width="7.520000000000001%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>主体识别的图片。</p> </td> </tr> <tr><td class="cellrowborder" width="23.12%"><p>boundingBox</p> </td> <td class="cellrowborder" width="23.12%"><p><a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section47991924195714">Rect</a></p> </td> <td class="cellrowborder" width="7.520000000000001%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>主体识别图片结果的外接矩形框。</p> </td> </tr> <tr><td class="cellrowborder" width="23.12%"><p>maskData</p> </td> <td class="cellrowborder" width="23.12%"><p>Int32Array</p> </td> <td class="cellrowborder" width="7.520000000000001%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>是</p> </td> <td class="cellrowborder" width="23.12%"><p>基于原图大小的一维数组，表示主体掩码。0-255取值范围。0代表背景，255代表主体，中间值代表是否是显著性主体的概率。</p> <p><strong>起始版本</strong>：5.1.0(18)。</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>maskData参数数据可能较大，通过JSON.stringify()方法解析打印日志会比较耗时，可能会影响接口性能，请按需打印。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 426px;"><h2 id="section171811496107" device-type="phone,2in1,tablet">SelectedStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section171811496107" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>识图对象选中状态的枚举值。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.5.1.4.1.1" width="33.33333333333333%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.4.1.2" width="33.33333333333333%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.4.1.3" width="33.33333333333333%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><p>SELECTED</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>0</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>选中状态。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>UNSELECTED</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>1</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>未选中状态。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 426px;"><h2 id="section7314173721119" device-type="phone,2in1,tablet">ImageAnalyzerVisibility<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7314173721119" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>AI识图控件可见状态的枚举值。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.5.1.4.1.1" width="33.33333333333333%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.4.1.2" width="33.33333333333333%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.4.1.3" width="33.33333333333333%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><p>SHOWN</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>0</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>AI识图控件的可见状态。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>HIDDEN</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>1</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>AI识图控件的不可见状态。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 471px;"><h2 id="section1612865961116" device-type="phone,2in1,tablet">AIButtonStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1612865961116" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>AIButton状态的枚举值。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.5.1.4.1.1" width="33.33333333333333%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.4.1.2" width="33.33333333333333%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.4.1.3" width="33.33333333333333%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><p>SELECTED</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>0</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>AIButton选中状态。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>UNSELECTED</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>1</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>AIButton未选中状态。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>HIDDEN</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>2</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>AIButton隐藏状态。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 426px;"><h2 id="section7671145547" device-type="phone,2in1,tablet">ObjectSearchPanelVisibility<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7671145547" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>图片搜索界面可见状态的枚举值。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.1(13)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.5.1.4.1.1" width="33.33333333333333%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.4.1.2" width="33.33333333333333%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.4.1.3" width="33.33333333333333%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><p>SHOW</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>0</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>图片搜索界面的可见状态。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>HIDE</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>1</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>图片搜索界面的不可见状态。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 561px;"><h2 id="section1079155235910" device-type="phone,2in1,tablet">ImageAnalyzerUIStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1079155235910" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>图片分析界面状态的枚举值。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.2(14)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.5.1.4.1.1" width="33.33333333333333%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.4.1.2" width="33.33333333333333%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.4.1.3" width="33.33333333333333%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><p>INITIAL</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>0</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>初始化状态。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>AI_BUTTON_SELECTED</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>1</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>AIButton选中状态。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>TEXT_SELECTED</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>2</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>文字选中状态。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>SUBJECT_SELECTED</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>3</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>主体选中状态。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>OBJECT_SEARCH</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>4</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>视觉搜索状态。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 302px;"><h2 id="section37192953318" device-type="phone,2in1,tablet">VisionImageAnalyzerController<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section37192953318" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>这是视觉图像控制器，用于控制交互。继承自<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-image-common#imageanalyzercontroller12" target="_blank">ImageAnalyzerController</a>类。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p></p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1166px;"><h3 id="section123851974413" device-type="phone,2in1,tablet" class="firsth2">setImageAnalyzerVisibility<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section123851974413" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setImageAnalyzerVisibility(visibility: ImageAnalyzerVisibility): void</p> <p>设置AI识图控件的可见性。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>visibility</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section7314173721119">ImageAnalyzerVisibility</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>AI识图控件的可见性。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">setImageAnalyzerVisibility</span>(visionImageAnalyzer.<span class="hljs-property">ImageAnalyzerVisibility</span>.<span class="hljs-property">HIDDEN</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>          <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>          <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1494px;"><h3 id="section168831155154214" device-type="phone,2in1,tablet">setAIButtonPosition<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section168831155154214" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setAIButtonPosition(position: Rect): void</p> <p>设置AIButton的位置。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>position</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section47991924195714">Rect</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>AIButton区域距离AI识图控件四边的位置（vp）。默认展示在右下角 。</p> <p>当传入部分参数时，优先按照传入的参数匹配，如果位置参数异常，使用默认位置展示。</p> <p>同时设置top及bottom参数，调setAIButtonPosition接口仅top参数生效。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">position</span>: visionImageAnalyzer.<span class="hljs-property">Rect</span> = {</li><li>      <span class="hljs-attr">bottom</span>: <span class="hljs-number">300</span></li><li>    }</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">setAIButtonPosition</span>(position)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">setAIButtonVisibility</span>(<span class="hljs-literal">true</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>      <span class="hljs-comment">// 此处图片需单独配置,添加到src/main/resources/base/media路径下</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.6'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1302px;"><h3 id="section18771735164320" device-type="phone,2in1,tablet">setAIButtonVisibility<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section18771735164320" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setAIButtonVisibility(visible: boolean): void</p> <p>设置AIButton的可见性。配置AIButton属性可见后，会对图片进行预分析，当图片中存在文本且文本区域大于图片区域的5%时AIButton才会显示。开启AIButton会触发图片的预分析从而导致一定的功耗开销，建议评估场景，对图片中文本内容较为关注的场景下按需开启，带给消费者良好的图片浏览体验的同时降低不必要的功耗开销。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>visible</p> </td> <td class="cellrowborder" width="25%"><p>boolean</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>AIButton的可见性。true表示可见，false表示不可见。</p> <p>默认为false，隐藏AIButton。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">setAIButtonVisibility</span>(<span class="hljs-literal">true</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>          <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>          <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1518px;"><h3 id="section1033231216447" device-type="phone,2in1,tablet">setCustomTextMenuItems<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1033231216447" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setCustomTextMenuItems(menus: Menu[]): void</p> <p>设置自定义的文字分析菜单项。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>menus</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section12912173105717">Menu</a>[]</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>选中文字时，支持在文字菜单上增加自定义菜单项，回调中包含当前选中的文字结果。</p> <p>最多只展示三个，超过三个时取前三个。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">setAIButtonVisibility</span>(<span class="hljs-literal">true</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">setCustomTextMenuItems</span>([</li><li>      {</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">"menu2"</span>,</li><li>        <span class="hljs-attr">action</span>: <span class="hljs-function">(<span class="hljs-params">param: <span class="hljs-built_in">string</span> | visionImageAnalyzer.Subject[]</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">"text menu clicked"</span>)</li><li>        }</li><li>      }</li><li>    ]</li><li>    )</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1031px;"><h3 id="section2238839144418" device-type="phone,2in1,tablet">startSubjectAnalyzer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2238839144418" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>startSubjectAnalyzer(): void</p> <p>开启主体识别。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">startSubjectAnalyzer</span>()</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1494px;"><h3 id="section492893164512" device-type="phone,2in1,tablet">setCustomSubjectMenuItems<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section492893164512" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setCustomSubjectMenuItems(menus: Menu[]): void</p> <p>设置自定义的主体分析菜单项。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>menus</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section12912173105717">Menu</a>[]</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>选中主体时，支持在主体菜单上增加自定义菜单项，回调中包含当前选中的主体结果。</p> <p>最多只展示三个，超过部分取前三个。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">setCustomSubjectMenuItems</span>([</li><li>      {</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">"menu2"</span>,</li><li>        <span class="hljs-attr">action</span>: <span class="hljs-function">(<span class="hljs-params">param: <span class="hljs-built_in">string</span> | visionImageAnalyzer.Subject[]</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">"subject menu clicked"</span>)</li><li>        }</li><li>      }</li><li>    ]</li><li>    )</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1374px;"><h3 id="section153561226144519" device-type="phone,2in1,tablet">setSelectedSubjects<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section153561226144519" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setSelectedSubjects(subjectIds: number[]): void</p> <p>根据主体id列表设置选中的主体。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>subjectIds</p> </td> <td class="cellrowborder" width="25%"><p>number[]</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>要选中的主体id列表。通过<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section7245340164614">getSubject</a>获取，只有图片识别结果中包含的主体id才有效。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">SingleImageTest2</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'subjectAnalysis'</span>, <span class="hljs-function">(<span class="hljs-params">subjects: visionImageAnalyzer.Subject[]</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`subjectAnalysis result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(subjects)}</span>`</span>)</li><li>      <span class="hljs-keyword">if</span>(subjects.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">setSelectedSubjects</span>([subjects[<span class="hljs-number">0</span>].<span class="hljs-property">id</span>])</li><li>      }</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1250px;"><h3 id="section111810527459" device-type="phone,2in1,tablet">getSelectedSubjects<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section111810527459" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getSelectedSubjects(): Promise&lt;Subject[] | null&gt;</p> <p>获取当前选中的主体。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section242033555713">Subject</a>[] | null&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回当前选中的主体。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">getSelectedSubjects</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">getSelectedSubjects</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">subjects: visionImageAnalyzer.Subject[] | <span class="hljs-literal">null</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`getSelectedSubjects result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(subjects)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1449px;"><h3 id="section7245340164614" device-type="phone,2in1,tablet">getSubject<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7245340164614" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getSubject(point: visionBase.Point): Promise&lt;Subject | null&gt;</p> <p>根据点位获取对应位置的主体。使用Promise异步回调。调用此接口前需先调用<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section2238839144418">startSubjectAnalyzer</a>开启主体识别。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>point</p> </td> <td class="cellrowborder" width="25%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/core-vision-vision-base-api#section1465431712919" target="_blank">visionBase.Point</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>相对于图片左上角位置点位（px）。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section242033555713">Subject</a> | null&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，point点位所在的主体。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li><span class="hljs-keyword">import</span> { visionBase } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreVisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> = <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">getSelectedSubjects</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">searchPoint</span>: visionBase.<span class="hljs-property">Point</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span> }</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">getSubject</span>(searchPoint).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">subjects: visionImageAnalyzer.Subject | <span class="hljs-literal">null</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`getSubject result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(subjects)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>      <span class="hljs-comment">// 此处图片需单独配置,添加到src/main/resources/base/media路径下</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1617px;"><h3 id="section2118042479" device-type="phone,2in1,tablet">getSubjectsImage<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2118042479" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getSubjectsImage(subjectIds: number[]): Promise&lt;PixelMap | null&gt;</p> <p>根据主体id获取对应主体组装成的图像。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>subjectIds</p> </td> <td class="cellrowborder" width="25%"><p>number[]</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>主体id列表。通过<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section7245340164614">getSubject</a>获取。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">PixelMap</a> | null&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，对应id列表组装成的图片。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">getSubjectsImage</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'subjectAnalysis'</span>, <span class="hljs-function">(<span class="hljs-params">subjects: visionImageAnalyzer.Subject[]</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`subjectAnalysis result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(subjects)}</span>`</span>)</li><li>      <span class="hljs-keyword">if</span>(subjects.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">ids</span>: <span class="hljs-built_in">number</span>[] = [subjects[<span class="hljs-number">0</span>].<span class="hljs-property">id</span>]</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">getSubjectsImage</span>(ids).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">image: PixelMap | <span class="hljs-literal">null</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Image data obtained successfully：'</span>, image);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to obtain image data：'</span>, error);</li><li>        })</li><li>      }</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1706px;"><h3 id="section88771732389" device-type="phone,2in1,tablet">getImageAnalyzerUIStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section88771732389" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getImageAnalyzerUIStatus(): Promise&lt;ImageAnalyzerUIStatus&gt;</p> <p>获取当前图片分析UI状态。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.2(14)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section1079155235910">ImageAnalyzerUIStatus</a>&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，当前图片分析UI状态。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">setAIButtonVisibility</span>(<span class="hljs-literal">true</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'objectSearchPanelVisibilityChange'</span>, <span class="hljs-function">(<span class="hljs-params">objectSearchPanelVisibility: visionImageAnalyzer.ObjectSearchPanelVisibility</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">getImageAnalyzerUIStatus</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">status: visionImageAnalyzer.ImageAnalyzerUIStatus</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Image data obtained successfully：'</span>, status);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to obtain image data：'</span>, error);</li><li>      })</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'60%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>
</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'获取当前图片分析UI状态'</span>, { <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">getImageAnalyzerUIStatus</span>()</li><li>            .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">status: visionImageAnalyzer.ImageAnalyzerUIStatus</span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Image data obtained successfully：'</span>, status);</li><li>            })</li><li>            .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to obtain image data：'</span>, error);</li><li>            })</li><li>        })</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'getImageAnalyzerUIStatus'</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'40%'</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1474px;"><h3 id="section0669159204817" device-type="phone,2in1,tablet">startObjectSearch<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section0669159204817" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>startObjectSearch(): Promise&lt;boolean&gt;</p> <p>开启视觉搜索。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>设备行为差异：</strong>该接口在PC/2in1上无效果，在其他设备类型中可正常调用。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;boolean&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回是否开启视觉搜索。true表示开启视觉搜索，false表示关闭视觉搜索。在文字选择或主体识别状态时拉起会返回false。</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>视觉搜索若在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper" target="_blank">Swiper</a>容器切换图场景下无法生效，则需要在图片切换的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper#onanimationstart9" target="_blank">onAnimationStart</a>中置空一下当前选中图片的index，再由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper#onanimationend9" target="_blank">onAnimationEnd</a>时将当前选中index置成当前index，以此实现overlay跟随图片变动而变动。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">startObjectSearch</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">startObjectSearch</span>()</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1079px;"><h3 id="section10301134104819" device-type="phone,2in1,tablet">stopObjectSearch<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10301134104819" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>stopObjectSearch(): void</p> <p>关闭视觉搜索功能。 如果当前在视觉搜索交互状态，则不支持关闭。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>设备行为差异：</strong>该接口在PC/2in1上无效果，在其他设备类型中可正常调用。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">stopObjectSearch</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">stopObjectSearch</span>()</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1182px;"><h3 id="section12081429335" device-type="phone,2in1,tablet">setSubjectMenuVisibility<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12081429335" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setSubjectMenuVisibility(visible: boolean): void</p> <p>设置图像分割菜单状态。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.1(13)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.2" width="23.46%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.3" width="10.42%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>visible</p> </td> <td class="cellrowborder" width="23.46%"><p>boolean</p> </td> <td class="cellrowborder" width="10.42%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>设置图像分割菜单状态。</p> <p>true：显示图像分割菜单；false：隐藏图像分割菜单。</p> <p>默认是true。</p> </td> </tr>  </tbody></table></div> </div> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">setSubjectMenuVisibility</span>(<span class="hljs-params">visible: <span class="hljs-built_in">boolean</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">setSubjectMenuVisibility</span>(visible)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1323px;"><h3 id="section20890105014811" device-type="phone,2in1,tablet">on(type: 'aiButtonStatusChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section20890105014811" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'aiButtonStatusChange', callback: Callback&lt;AIButtonStatus&gt;): void</p> <p>监听AIButton展示状态。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"aiButtonStatusChange"。监听AIButton展示状态。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section1612865961116">AIButtonStatus</a>&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>callback回调函数。接收AIButton展示状态。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>?.<span class="hljs-title function_">setAIButtonVisibility</span>(<span class="hljs-literal">true</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'aiButtonStatusChange'</span>, <span class="hljs-function">(<span class="hljs-params">aiButtonState: visionImageAnalyzer.AIButtonStatus</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`aiButtonStatusChange result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(aiButtonState)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1395px;"><h3 id="section18741118144913" device-type="phone,2in1,tablet">off(type: 'aiButtonStatusChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section18741118144913" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'aiButtonStatusChange', callback?: Callback&lt;AIButtonStatus&gt;): void</p> <p>取消监听AIButton展示状态。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"aiButtonStatusChange"。取消监听AIButton展示状态。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section1612865961116">AIButtonStatus</a>&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>否</p> </td> <td class="cellrowborder" width="55.65%"><p>需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>?.<span class="hljs-title function_">setAIButtonVisibility</span>(<span class="hljs-literal">true</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'aiButtonStatusChange'</span>, <span class="hljs-function">(<span class="hljs-params">aiButtonState: visionImageAnalyzer.AIButtonStatus</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`aiButtonStatusChange result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(aiButtonState)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'aiButtonStatusChange'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1395px;"><h3 id="section156354564918" device-type="phone,2in1,tablet">on(type: 'imageAnalyzerVisibilityChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section156354564918" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'imageAnalyzerVisibilityChange', callback: Callback&lt;ImageAnalyzerVisibility&gt;): void</p> <p>监听AI识图控件可见状态。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"imageAnalyzerVisibilityChange"。监听AI识图控件可见状态。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section7314173721119">ImageAnalyzerVisibility</a>&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>callback回调函数。接收AI识图控件可见状态。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>?.<span class="hljs-title function_">setAIButtonVisibility</span>(<span class="hljs-literal">true</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'imageAnalyzerVisibilityChange'</span>, <span class="hljs-function">(<span class="hljs-params">visibility: visionImageAnalyzer.ImageAnalyzerVisibility</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`imageAnalyzerVisibilityChange result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(visibility)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'imageAnalyzerVisibilityChange'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1419px;"><h3 id="section4494573504" device-type="phone,2in1,tablet">off(type: 'imageAnalyzerVisibilityChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section4494573504" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'imageAnalyzerVisibilityChange', callback?: Callback&lt;ImageAnalyzerVisibility&gt;): void</p> <p>取消AI识图控件可见状态的监听。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"imageAnalyzerVisibilityChange"。取消AI识图控件可见状态的监听。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section7314173721119">ImageAnalyzerVisibility</a>&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>否</p> </td> <td class="cellrowborder" width="55.65%"><p>需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>?.<span class="hljs-title function_">setAIButtonVisibility</span>(<span class="hljs-literal">true</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'imageAnalyzerVisibilityChange'</span>, <span class="hljs-function">(<span class="hljs-params">visibility: visionImageAnalyzer.ImageAnalyzerVisibility</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`imageAnalyzerVisibilityChange result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(visibility)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'imageAnalyzerVisibilityChange'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1347px;"><h3 id="section6996132995018" device-type="phone,2in1,tablet">on(type: 'textAnalysis')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section6996132995018" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'textAnalysis', callback: Callback&lt;string&gt;): void</p> <p>监听文字分析结果。默认在首次长按图片文本时触发文本分析，PC/2in1是在图片首次加载时触发文本分析。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"textAnalysis"。监听文字分析结果。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;string&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>callback回调函数。接收文字分析结果。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'textAnalysis'</span>, <span class="hljs-function">(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`textAnalysis result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(text)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'textAnalysis'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1371px;"><h3 id="section1873535218509" device-type="phone,2in1,tablet">off(type: 'textAnalysis')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1873535218509" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'textAnalysis', callback?: Callback&lt;string&gt;): void</p> <p>取消文字分析结果的监听。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"textAnalysis"。取消文字分析结果的监听。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;string&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>否</p> </td> <td class="cellrowborder" width="55.65%"><p>需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'textAnalysis'</span>, <span class="hljs-function">(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`textAnalysis result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(text)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'textAnalysis'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1347px;"><h3 id="section181891818516" device-type="phone,2in1,tablet">on(type: 'selectedTextChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section181891818516" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'selectedTextChange', callback: Callback&lt;string&gt;): void</p> <p>监听文字选中结果。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"selectedTextChange"。监听文字选中结果。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;string&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>callback回调函数。接收文字选中结果。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'selectedTextChange'</span>, <span class="hljs-function">(<span class="hljs-params">selectedText: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`selectedTextChange result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(selectedText)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'selectedTextChange'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1371px;"><h3 id="section139811038145114" device-type="phone,2in1,tablet">off(type: 'selectedTextChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section139811038145114" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'selectedTextChange', callback?: Callback&lt;string&gt;): void</p> <p>取消文字选中结果的监听。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"selectedTextChange"。取消文字选中结果的监听。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;string&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>否</p> </td> <td class="cellrowborder" width="55.65%"><p>需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'selectedTextChange'</span>, <span class="hljs-function">(<span class="hljs-params">selectedText: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`selectedTextChange result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(selectedText)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'selectedTextChange'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1347px;"><h3 id="section659615577518" device-type="phone,2in1,tablet">on(type: 'subjectAnalysis')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section659615577518" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'subjectAnalysis', callback: Callback&lt;Subject[]&gt;): void</p> <p>监听主体分析结果，返回所有主体信息。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"subjectAnalysis"。监听主体分析结果， 返回所有主体信息。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section242033555713">Subject</a>[]&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>callback回调函数。接收主体分析结果， 返回所有主体信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'subjectAnalysis'</span>, <span class="hljs-function">(<span class="hljs-params">subjects: visionImageAnalyzer.Subject[]</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`subjectAnalysis result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(subjects)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'subjectAnalysis'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1371px;"><h3 id="section93934157522" device-type="phone,2in1,tablet">off(type: 'subjectAnalysis')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section93934157522" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'subjectAnalysis', callback?: Callback&lt;Subject[]&gt;): void</p> <p>取消主体分析结果的监听。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"subjectAnalysis"。取消主体分析结果的监听。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section242033555713">Subject</a>[]&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>否</p> </td> <td class="cellrowborder" width="55.65%"><p>需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'subjectAnalysis'</span>, <span class="hljs-function">(<span class="hljs-params">subjects: visionImageAnalyzer.Subject[]</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`subjectAnalysis result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(subjects)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'subjectAnalysis'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1347px;"><h3 id="section491810314536" device-type="phone,2in1,tablet">on(type: 'selectedSubjectsChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section491810314536" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'selectedSubjectsChange', callback: Callback&lt;Subject[]&gt;): void</p> <p>监听选中的主体。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"selectedSubjectsChange"。监听选中的主体。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section242033555713">Subject</a>[]&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>callback回调函数。接收选中的主体信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'selectedSubjectsChange'</span>, <span class="hljs-function">(<span class="hljs-params">subjects: visionImageAnalyzer.Subject[]</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`selectedSubjectsChange result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(subjects)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'selectedSubjectsChange'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1371px;"><h3 id="section286015258534" device-type="phone,2in1,tablet">off(type: 'selectedSubjectsChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section286015258534" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'selectedSubjectsChange', callback?: Callback&lt;Subject[]&gt;): void</p> <p>取消对选中主体的监听。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"selectedSubjectsChange"。取消对选中主体的监听。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section242033555713">Subject</a>[]&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>否</p> </td> <td class="cellrowborder" width="55.65%"><p>需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'selectedSubjectsChange'</span>, <span class="hljs-function">(<span class="hljs-params">subjects: visionImageAnalyzer.Subject[]</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`selectedSubjectsChange result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(subjects)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'selectedSubjectsChange'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1323px;"><h3 id="section1911313349379" device-type="phone,2in1,tablet">on(type: 'objectSearchPanelVisibilityChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1911313349379" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'objectSearchPanelVisibilityChange', callback: Callback&lt;ObjectSearchPanelVisibility&gt;): void</p> <p>监听图片搜索事件。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.1(13)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"objectSearchPanelVisibilityChange"。监听图片搜索事件。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section7671145547">ObjectSearchPanelVisibility</a>&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>callback回调函数。接收图片搜索事件信息。</p> </td> </tr>  </tbody></table></div> </div> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'objectSearchPanelVisibilityChange'</span>, <span class="hljs-function">(<span class="hljs-params">status: visionImageAnalyzer.ObjectSearchPanelVisibility</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`objectSearchPanelVisibilityChange result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(status)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'objectSearchPanelVisibilityChange'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1347px;"><h3 id="section953433716373" device-type="phone,2in1,tablet">off(type: 'objectSearchPanelVisibilityChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section953433716373" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'objectSearchPanelVisibilityChange', callback?: Callback&lt;ObjectSearchPanelVisibility&gt;): void</p> <p>取消图片搜索事件的监听。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.1(13)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"objectSearchPanelVisibilityChange"。取消监听图片搜索事件。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/vision-image-analyzer#section7671145547">ObjectSearchPanelVisibility</a>&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>否</p> </td> <td class="cellrowborder" width="55.65%"><p>需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'objectSearchPanelVisibilityChange'</span>, <span class="hljs-function">(<span class="hljs-params">status: visionImageAnalyzer.ObjectSearchPanelVisibility</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`objectSearchPanelVisibilityChange result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(status)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'objectSearchPanelVisibilityChange'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1299px;"><h3 id="section1720625302110" device-type="phone,2in1,tablet">on(type: 'cursorMoveInText')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1720625302110" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'cursorMoveInText', callback: Callback&lt;void&gt;): void</p> <p>监听光标移入图片内文字区域事件。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"cursorMoveInText"。监听光标移入图片内文字区域事件。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;void&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>callback回调函数。接收光标移入图片内文字区域事件信息。</p> </td> </tr>  </tbody></table></div> </div> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'cursorMoveInText'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`cursorMoveInText on`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'cursorMoveInText'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1323px;"><h3 id="section0208175382115" device-type="phone,2in1,tablet">off(type: 'cursorMoveInText')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section0208175382115" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'cursorMoveInText', callback?: Callback&lt;void&gt;): void</p> <p>取消光标移入图片内文字区域事件的监听。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"cursorMoveInText"。取消监听光标移入图片内文字区域事件。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;void&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>否</p> </td> <td class="cellrowborder" width="55.65%"><p>需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'cursorMoveInText'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`cursorMoveInText on`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'cursorMoveInText'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1299px;"><h3 id="section2124824174216" device-type="phone,2in1,tablet">on(type: 'cursorMoveOutText')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2124824174216" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'cursorMoveOutText', callback: Callback&lt;void&gt;): void</p> <p>监听光标移出图片内文字区域事件。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"cursorMoveOutText"。监听光标移出图片内文字区域事件。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;void&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>callback回调函数。接收光标移出图片内文字区域事件信息。</p> </td> </tr>  </tbody></table></div> </div> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'cursorMoveOutText'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`cursorMoveOutText on`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'cursorMoveOutText'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1347px;"><h3 id="section1412710240423" device-type="phone,2in1,tablet">off(type: 'cursorMoveOutText')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1412710240423" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'cursorMoveOutText', callback?: Callback&lt;void&gt;): void</p> <p>取消光标移出图片内文字区域事件的监听。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"cursorMoveOutText"。取消监听光标移出图片内文字区域事件。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback" target="_blank">Callback</a>&lt;void&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>否</p> </td> <td class="cellrowborder" width="55.65%"><p>需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'cursorMoveOutText'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`cursorMoveOutText on`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'cursorMoveOutText'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1693px;"><h3 id="section19721243145316" device-type="phone,2in1,tablet">on(type: 'analyzerFailed')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section19721243145316" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'analyzerFailed', callback: ErrorCallback): void</p> <p>监听AI识图的异常场景。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"analyzerFailed"。监听AI识图异常场景。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#errorcallback" target="_blank">ErrorCallback</a></p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>callback回调函数。接收AI识图异常场景信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/vision-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.46.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.46.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1013700002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'analyzerFailed'</span>, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`analyzerFailed result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'analyzerFailed'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1717px;"><h3 id="section11179111125412" device-type="phone,2in1,tablet">off(type: 'analyzerFailed')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11179111125412" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'analyzerFailed', callback?: ErrorCallback): void</p> <p>取消AI识图异常场景的监听。</p> <p><strong>系统能力：</strong>SystemCapability.AI.VisionImageAnalyzer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为"analyzerFailed"。取消AI识图异常场景的监听。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#errorcallback" target="_blank">ErrorCallback</a></p> </td> <td class="cellrowborder" width="10.41%"><p>否</p> </td> <td class="cellrowborder" width="55.65%"><p>需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/vision-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.47.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.47.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1013700002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-bqf-c106="" class="highlight-div"><div _ngcontent-bqf-c106="" class="highlight-div-header"><div _ngcontent-bqf-c106="" class="highlight-div-header-left"><div _ngcontent-bqf-c106="" class="handle-button expand-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqf-c106="" class="highlight-div-header-right"><div _ngcontent-bqf-c106="" class="handle-button ai-button"></div><div _ngcontent-bqf-c106="" class="handle-button line-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqf-c106="" class="handle-button theme-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqf-c106="" class="handle-button copy-button"><div _ngcontent-bqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionImageAnalyzer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.VisionKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">visionImageAnalyzerController</span>: visionImageAnalyzer.<span class="hljs-property">VisionImageAnalyzerController</span> =</li><li>    <span class="hljs-keyword">new</span> visionImageAnalyzer.<span class="hljs-title class_">VisionImageAnalyzerController</span>()</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'analyzerFailed'</span>, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"DEMO_TAG"</span>, <span class="hljs-string">`analyzerFailed result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>)</li><li>    })</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'analyzerFailed'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>  <span class="">    <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处图片需单独配置</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">添加到</span></span><span class=""><span class="hljs-comment">src/main/resources/base/media</span></span><span class=""><span class="hljs-comment">路径下</span></span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>), {</li><li>        <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">OBJECT_LOOKUP</span>],</li><li>        <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">visionImageAnalyzerController</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <p></p> </div> <div></div></div>