<h1 _ngcontent-ols-c119="" class="doc-title ng-star-inserted" title="walletPass（Pass卡片能力）"> walletPass（Pass卡片能力） </h1>

<div _ngcontent-ols-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本模块提供接入钱包服务的能力。</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tiledSection">     <h2 id="section185445131015" device-type="phone">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section185445131015" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><div _ngcontent-ols-c106="" class="highlight-div"><div _ngcontent-ols-c106="" class="highlight-div-header"><div _ngcontent-ols-c106="" class="highlight-div-header-left"><div _ngcontent-ols-c106="" class="handle-button expand-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ols-c106="" class="highlight-div-header-right"><div _ngcontent-ols-c106="" class="handle-button ai-button"></div><div _ngcontent-ols-c106="" class="handle-button line-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ols-c106="" class="handle-button theme-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ols-c106="" class="handle-button copy-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ols-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { walletPass } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section5956134553910" device-type="phone">WalletPassClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5956134553910" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>钱包卡券的功能入口类，与钱包卡券有关的所有方法从此处接入。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>    </div>    <div class="tiledSection">     <h3 id="section14692175812317" device-type="phone" class="firsth2">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section14692175812317" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>constructor(context: common.UIAbilityContext)</p>     <p>构造函数。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.5.7.2.1.5.1.1" width="18%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.5.7.2.1.5.1.2" width="18%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.5.7.2.1.5.1.3" width="14.000000000000002%">           <p><strong>必填</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.5.7.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="18%">           <p>context</p></td>          <td class="cellrowborder" width="18%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="14.000000000000002%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>UIAbility上下文。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ols-c106="" class="highlight-div"><div _ngcontent-ols-c106="" class="highlight-div-header"><div _ngcontent-ols-c106="" class="highlight-div-header-left"><div _ngcontent-ols-c106="" class="handle-button expand-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ols-c106="" class="highlight-div-header-right"><div _ngcontent-ols-c106="" class="handle-button ai-button"></div><div _ngcontent-ols-c106="" class="handle-button line-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ols-c106="" class="handle-button theme-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ols-c106="" class="handle-button copy-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ols-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletPass } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">walletPassClient</span>: walletPass.<span class="hljs-property">WalletPassClient</span> = <span class="hljs-keyword">new</span> walletPass.<span class="hljs-title class_">WalletPassClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>);</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section5251175451917" device-type="phone">queryPassDeviceInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5251175451917" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>queryPassDeviceInfo(passStr: string): Promise&lt;string&gt;</p>     <p>查询当前设备唯一标识及设备能力，用于关联已开通的云侧卡券，同时开卡过程可指定目标设备标识，提升安全性。</p>     <p>使用Promise异步回调。</p>     <p>不支持多线程调用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.6.9.2.1.5.1.1" width="18.72187218721872%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.6.9.2.1.5.1.2" width="15.96159615961596%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.6.9.2.1.5.1.3" width="15.46154615461546%">           <p><strong>必填</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.6.9.2.1.5.1.4" width="49.85498549854985%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="18.72187218721872%">           <p>passStr</p></td>          <td class="cellrowborder" width="15.96159615961596%">           <p>string</p></td>          <td class="cellrowborder" width="15.46154615461546%">           <p>是</p></td>          <td class="cellrowborder" width="49.85498549854985%">           <p>要求JSON String格式，传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。</p>           <p>key包括passType、targetDeviceType。</p>           <ul>            <li>passType：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wallet-preparations" target="_blank">创建Wallet Kit服务</a>时注册的服务号，需要开发者到华为AGC网站申请。</li>            <li>targetDeviceType：目标设备类型。取值如下             <ul>              <li>phone：手机</li>              <li>wear：穿戴</li>              <li>all：手机+穿戴</li>             </ul></li>           </ul></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.1" width="18.66%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.2" width="81.34%">          <p><strong>说明</strong></p></th>        </tr><tr>         <td class="cellrowborder" width="18.66%">          <p>Promise&lt;string&gt;</p></td>         <td class="cellrowborder" width="81.34%">          <p>Promise对象，JSON String格式，传出的字段以key-value的形式设置在数组类型的JSON String中，并通过该参数传出。</p>          <p>key包括deviceType、passDeviceId、deviceModel、passCapabilityVersion、deviceModelNumber、deviceCapabilities。</p>          <ul>           <li>deviceType：设备类型。取值如下            <ul>             <li>phone：手机</li>             <li>wear：穿戴</li>            </ul></li>           <li>passDeviceId：账号/设备联合标识符。</li>           <li>deviceModel：设备名，用于展示可开通的设备名称。</li>           <li>passCapabilityVersion：WalletKit开放能力版本号，用于版本兼容处理，初始为 1。</li>           <li>deviceModelNumber：设备型号编码，用于获取匹配的标定数据。</li>           <li>deviceCapabilities：能力集，同步返回是否支持NFC/BLE/UWB/SLE            <ul>             <li>NFC：0200</li>             <li>NFC+BLE：0201</li>             <li>UWB：0202</li>             <li>SLE：0203</li>            </ul></li>          </ul></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.14.1.3.1.1" width="26.540000000000003%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.14.1.3.1.2" width="73.46000000000001%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.540000000000003%">          <p>401</p></td>         <td class="cellrowborder" width="73.46000000000001%">          <p>Parameter error. Possible causes: Mandatory parameters are left unspecified.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.540000000000003%">          <p>1010200001</p></td>         <td class="cellrowborder" width="73.46000000000001%">          <p>No permission to access the Wallet APIs.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.540000000000003%">          <p>1010200002</p></td>         <td class="cellrowborder" width="73.46000000000001%">          <p>Wallet app not found.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.540000000000003%">          <p>1010200003</p></td>         <td class="cellrowborder" width="73.46000000000001%">          <p>The environment of the wallet is not ready.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.540000000000003%">          <p>1010200006</p></td>         <td class="cellrowborder" width="73.46000000000001%">          <p>The device's remote paired watch cannot be connected</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.540000000000003%">          <p>1010220003</p></td>         <td class="cellrowborder" width="73.46000000000001%">          <p>Pass service is temporarily unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.540000000000003%">          <p>1010200013</p></td>         <td class="cellrowborder" width="73.46000000000001%">          <p>Operation failed because of an internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.540000000000003%">          <p>1010200014</p></td>         <td class="cellrowborder" width="73.46000000000001%">          <p>The Wallet APIs can be called by the device owner only.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.540000000000003%">          <p>1010200010</p></td>         <td class="cellrowborder" width="73.46000000000001%">          <p>Network connection error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ols-c106="" class="highlight-div"><div _ngcontent-ols-c106="" class="highlight-div-header"><div _ngcontent-ols-c106="" class="highlight-div-header-left"><div _ngcontent-ols-c106="" class="handle-button expand-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ols-c106="" class="highlight-div-header-right"><div _ngcontent-ols-c106="" class="handle-button ai-button"></div><div _ngcontent-ols-c106="" class="handle-button line-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ols-c106="" class="handle-button theme-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ols-c106="" class="handle-button copy-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ols-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletPass } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">walletPassClient</span>: walletPass.<span class="hljs-property">WalletPassClient</span> = <span class="hljs-keyword">new</span> walletPass.<span class="hljs-title class_">WalletPassClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">passType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">targetDeviceType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">queryPassDeviceInfo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> passStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({</li><li>      <span class="hljs-attr">passType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">passType</span>,</li><li>      <span class="hljs-attr">targetDeviceType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetDeviceType</span></li><li>    });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletPassClient</span>.<span class="hljs-title function_">queryPassDeviceInfo</span>(passStr).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in querying passDeviceInfo, result:<span class="hljs-subst">${result}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query passDeviceInfo, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section20458166124611" device-type="phone">canAddPass<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section20458166124611" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>canAddPass(passStr: string): Promise&lt;string&gt;</p>     <p>检查当前设备是否支持添加卡券，返回结果码。</p>     <p>使用Promise异步回调。</p>     <p>不支持多线程调用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.7.9.2.1.5.1.1" width="18%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.7.9.2.1.5.1.2" width="18%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.7.9.2.1.5.1.3" width="14.000000000000002%">           <p><strong>必填</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.7.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="18%">           <p>passStr</p></td>          <td class="cellrowborder" width="18%">           <p>string</p></td>          <td class="cellrowborder" width="14.000000000000002%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>要求JSON String格式，传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。</p>           <p>key包括passType、targetDeviceType。</p>           <ul>            <li>passType：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wallet-preparations" target="_blank">创建Wallet Kit服务</a>时注册的服务号，需要开发者到华为AGC网站申请。</li>            <li>targetDeviceType：目标设备类型。取值如下             <ul>              <li>phone: 手机</li>              <li>wear：穿戴</li>              <li>all：手机+穿戴</li>             </ul></li>           </ul></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.1" width="26.47%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.2" width="73.53%">          <p><strong>说明</strong></p></th>        </tr><tr>         <td class="cellrowborder" width="26.47%">          <p>Promise&lt;string&gt;</p></td>         <td class="cellrowborder" width="73.53%">          <p>Promise对象，JSON String格式，传出的字段以key-value的形式设置在数组类型的JSON String中，并通过该参数传出。</p>          <p>key包括passType、deviceType、passDeviceId、deviceModel、result。</p>          <ul>           <li>passType：服务号</li>           <li>deviceType：设备类型。取值如下            <ul>             <li>phone：手机</li>             <li>wear：穿戴</li>            </ul></li>           <li>passDeviceId：账号/设备联合标识符。</li>           <li>deviceModel：设备名，用于展示可开通的设备名称。</li>           <li>result：结果码。取值如下            <ul>             <li>0：支持添加</li>             <li>1：ROM版本过低</li>             <li>2：钱包版本过低</li>             <li>3：ROM版本和钱包版本均过低</li>            </ul></li>          </ul></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.14.1.3.1.1" width="26.36%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.14.1.3.1.2" width="73.64%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.36%">          <p>401</p></td>         <td class="cellrowborder" width="73.64%">          <p>Parameter error. Possible causes: Mandatory parameters are left unspecified.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.36%">          <p>1010200001</p></td>         <td class="cellrowborder" width="73.64%">          <p>No permission to access the Wallet APIs.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.36%">          <p>1010200002</p></td>         <td class="cellrowborder" width="73.64%">          <p>Wallet app not found.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.36%">          <p>1010200003</p></td>         <td class="cellrowborder" width="73.64%">          <p>The environment of the wallet is not ready.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.36%">          <p>1010200004</p></td>         <td class="cellrowborder" width="73.64%">          <p>The device does not support this card.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.36%">          <p>1010200006</p></td>         <td class="cellrowborder" width="73.64%">          <p>The device's remote paired watch cannot be connected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.36%">          <p>1010200009</p></td>         <td class="cellrowborder" width="73.64%">          <p>The chip space is full, and no more cards can be added.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.36%">          <p>1010200010</p></td>         <td class="cellrowborder" width="73.64%">          <p>Network connection error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.36%">          <p>1010220002</p></td>         <td class="cellrowborder" width="73.64%">          <p>The card already exists in the specified device.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.36%">          <p>1010220003</p></td>         <td class="cellrowborder" width="73.64%">          <p>Pass service is temporarily unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.36%">          <p>1010200013</p></td>         <td class="cellrowborder" width="73.64%">          <p>Operation failed because of an internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.36%">          <p>1010200014</p></td>         <td class="cellrowborder" width="73.64%">          <p>The Wallet APIs can be called by the device owner only.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.36%">          <p>1010200015</p></td>         <td class="cellrowborder" width="73.64%">          <p>This card is not available for a child account.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.36%">          <p>1010200016</p></td>         <td class="cellrowborder" width="73.64%">          <p>This card is not available for the current country or region.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.36%">          <p>1010220005</p></td>         <td class="cellrowborder" width="73.64%">          <p>The number of cards has reached the upper limit.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ols-c106="" class="highlight-div"><div _ngcontent-ols-c106="" class="highlight-div-header"><div _ngcontent-ols-c106="" class="highlight-div-header-left"><div _ngcontent-ols-c106="" class="handle-button expand-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ols-c106="" class="highlight-div-header-right"><div _ngcontent-ols-c106="" class="handle-button ai-button"></div><div _ngcontent-ols-c106="" class="handle-button line-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ols-c106="" class="handle-button theme-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ols-c106="" class="handle-button copy-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ols-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletPass } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">walletPassClient</span>: walletPass.<span class="hljs-property">WalletPassClient</span> = <span class="hljs-keyword">new</span> walletPass.<span class="hljs-title class_">WalletPassClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">passType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">targetDeviceType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">canAddPass</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> passStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({</li><li>      <span class="hljs-attr">passType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">passType</span>,</li><li>      <span class="hljs-attr">targetDeviceType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetDeviceType</span></li><li>    });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletPassClient</span>.<span class="hljs-title function_">canAddPass</span>(passStr).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in checking addPass, result:<span class="hljs-subst">${result}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to check addPass, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section139341726154718" device-type="phone">initWalletEnvironment<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section139341726154718" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>initWalletEnvironment(passStr: string): Promise&lt;void&gt;</p>     <p>初始化钱包开通卡券的同意协议或是登录账号，引导用户跳转钱包完成应用初始化。</p>     <p>使用Promise异步回调。</p>     <p>不支持多线程调用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.8.9.2.1.5.1.1" width="18%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.8.9.2.1.5.1.2" width="18%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.8.9.2.1.5.1.3" width="14.000000000000002%">           <p><strong>必填</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.8.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="18%">           <p>passStr</p></td>          <td class="cellrowborder" width="18%">           <p>string</p></td>          <td class="cellrowborder" width="14.000000000000002%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>要求JSON String格式，传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。</p>           <p>key包括targetDeviceType。</p>           <ul>            <li>targetDeviceType：目标设备类型。取值如下             <ul>              <li>phone: 手机</li>              <li>wear：穿戴</li>              <li>all：手机+穿戴</li>             </ul></li>           </ul></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="26.47%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="73.53%">          <p><strong>说明</strong></p></th>        </tr><tr>         <td class="cellrowborder" width="26.47%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="73.53%">          <p>Promise对象。无返回结果的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.14.1.3.1.1" width="18.060000000000002%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.14.1.3.1.2" width="81.94%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="18.060000000000002%">          <p>401</p></td>         <td class="cellrowborder" width="81.94%">          <p>Parameter error. Possible causes: Mandatory parameters are left unspecified.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.060000000000002%">          <p>1010200002</p></td>         <td class="cellrowborder" width="81.94%">          <p>Wallet app not found.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.060000000000002%">          <p>1010200005</p></td>         <td class="cellrowborder" width="81.94%">          <p>The operation was canceled by the user.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.060000000000002%">          <p>1010200011</p></td>         <td class="cellrowborder" width="81.94%">          <p>Failed to initialize the environment.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.060000000000002%">          <p>1010200013</p></td>         <td class="cellrowborder" width="81.94%">          <p>Operation failed because of an internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.060000000000002%">          <p>1010200014</p></td>         <td class="cellrowborder" width="81.94%">          <p>The Wallet APIs can be called by the device owner only.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.060000000000002%">          <p>1010200017</p></td>         <td class="cellrowborder" width="81.94%">          <p>The Wallet app was closed by the user.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ols-c106="" class="highlight-div"><div _ngcontent-ols-c106="" class="highlight-div-header"><div _ngcontent-ols-c106="" class="highlight-div-header-left"><div _ngcontent-ols-c106="" class="handle-button expand-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ols-c106="" class="highlight-div-header-right"><div _ngcontent-ols-c106="" class="handle-button ai-button"></div><div _ngcontent-ols-c106="" class="handle-button line-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ols-c106="" class="handle-button theme-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ols-c106="" class="handle-button copy-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ols-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletPass } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">walletPassClient</span>: walletPass.<span class="hljs-property">WalletPassClient</span> = <span class="hljs-keyword">new</span> walletPass.<span class="hljs-title class_">WalletPassClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">targetDeviceType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">initWalletEnvironment</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> passStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({</li><li>      <span class="hljs-attr">targetDeviceType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetDeviceType</span></li><li>    });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletPassClient</span>.<span class="hljs-title function_">initWalletEnvironment</span>(passStr).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in initiating walletEnvironment`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to initiate walletEnvironment, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section596313613472" device-type="phone">addPass<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section596313613472" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>addPass(passStr: string): Promise&lt;string&gt;</p>     <p>用户主动发起开卡时，跳转钱包应用，携带开卡JWE数据，开通卡券到钱包并激活。</p>     <p>使用Promise异步回调。</p>     <p>不支持多线程调用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.9.9.2.1.5.1.1" width="18%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.9.9.2.1.5.1.2" width="18%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.9.9.2.1.5.1.3" width="14.000000000000002%">           <p><strong>必填</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.9.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="18%">           <p>passStr</p></td>          <td class="cellrowborder" width="18%">           <p>string</p></td>          <td class="cellrowborder" width="14.000000000000002%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>要求JSON String格式，传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。</p>           <p>key包括jweContent。</p>           <ul>            <li>jweContent：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-rest-api-carkey#section1310081523717">生成JWE数据</a>章节生成的开卡签名数据包。</li>           </ul></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.1" width="26.47%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.2" width="73.53%">          <p><strong>说明</strong></p></th>        </tr><tr>         <td class="cellrowborder" width="26.47%">          <p>Promise&lt;string&gt;</p></td>         <td class="cellrowborder" width="73.53%">          <p>Promise对象，JSON String格式，传出的字段以key-value的形式设置在JSON String中，并通过该参数传出。</p>          <p>key包括passType、serialNumber、deviceType、passDeviceId。</p>          <ul>           <li>passType： 开通的卡片服务号 。</li>           <li>serialNumber： 开通的 Pass 卡片唯一标识 。</li>           <li>deviceType：开卡设备的类型。取值如下            <ul>             <li>phone: 手机</li>             <li>wear：穿戴</li>             <li>all：手机+穿戴</li>            </ul></li>           <li>passDeviceId： 开卡设备的帐号/设备联合标识符。</li>          </ul></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.14.1.3.1.1" width="26.21%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.14.1.3.1.2" width="73.79%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.21%">          <p>401</p></td>         <td class="cellrowborder" width="73.79%">          <p>Parameter error. Possible causes: Mandatory parameters are left unspecified.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010200002</p></td>         <td class="cellrowborder" width="73.79%">          <p>Wallet app not found.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010200004</p></td>         <td class="cellrowborder" width="73.79%">          <p>The device does not support this card.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010200005</p></td>         <td class="cellrowborder" width="73.79%">          <p>The operation was canceled by the user.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010200006</p></td>         <td class="cellrowborder" width="73.79%">          <p>The device's remote paired watch cannot be connected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010200009</p></td>         <td class="cellrowborder" width="73.79%">          <p>The chip space is full, and no more cards can be added.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010200012</p></td>         <td class="cellrowborder" width="73.79%">          <p>Duplicate request.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010220002</p></td>         <td class="cellrowborder" width="73.79%">          <p>The card already exists in the specified device.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010220003</p></td>         <td class="cellrowborder" width="73.79%">          <p>Pass service is temporarily unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010220401</p></td>         <td class="cellrowborder" width="73.79%">          <p>Failed to add the card because the signature verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010220402</p></td>         <td class="cellrowborder" width="73.79%">          <p>Failed to add the card because the data decryption failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010220403</p></td>         <td class="cellrowborder" width="73.79%">          <p>Failed to add the card because the instance ID does not exist.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010220404</p></td>         <td class="cellrowborder" width="73.79%">          <p>Failed to add the card because the instance ID has been used.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010200013</p></td>         <td class="cellrowborder" width="73.79%">          <p>Operation failed because of an internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010200014</p></td>         <td class="cellrowborder" width="73.79%">          <p>The Wallet APIs can be called by the device owner only.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010200015</p></td>         <td class="cellrowborder" width="73.79%">          <p>This card is not available for a child account.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010200016</p></td>         <td class="cellrowborder" width="73.79%">          <p>This card is not available for the current country or region.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010200017</p></td>         <td class="cellrowborder" width="73.79%">          <p>The Wallet app was closed by the user.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.21%">          <p>1010220005</p></td>         <td class="cellrowborder" width="73.79%">          <p>The number of cards has reached the upper limit.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ols-c106="" class="highlight-div"><div _ngcontent-ols-c106="" class="highlight-div-header"><div _ngcontent-ols-c106="" class="highlight-div-header-left"><div _ngcontent-ols-c106="" class="handle-button expand-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ols-c106="" class="highlight-div-header-right"><div _ngcontent-ols-c106="" class="handle-button ai-button"></div><div _ngcontent-ols-c106="" class="handle-button line-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ols-c106="" class="handle-button theme-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ols-c106="" class="handle-button copy-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ols-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletPass } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">walletPassClient</span>: walletPass.<span class="hljs-property">WalletPassClient</span> = <span class="hljs-keyword">new</span> walletPass.<span class="hljs-title class_">WalletPassClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">jweContent</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">addPass</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> passStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({</li><li>      <span class="hljs-attr">jweContent</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">jweContent</span></li><li>    });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletPassClient</span>.<span class="hljs-title function_">addPass</span>(passStr).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in adding pass, result:<span class="hljs-subst">${result}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to add pass, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section375194074718" device-type="phone">queryPass<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section375194074718" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>queryPass(passStr: string): Promise&lt;string&gt;</p>     <p>检查当前设备卡券的开通情况。</p>     <p>使用Promise异步回调。</p>     <p>不支持多线程调用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.10.9.2.1.5.1.1" width="18%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.10.9.2.1.5.1.2" width="18%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.10.9.2.1.5.1.3" width="13.99%">           <p><strong>必填</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.10.9.2.1.5.1.4" width="50.01%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="18%">           <p>passStr</p></td>          <td class="cellrowborder" width="18%">           <p>string</p></td>          <td class="cellrowborder" width="13.99%">           <p>是</p></td>          <td class="cellrowborder" width="50.01%">           <p>要求JSON String格式，传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。</p>           <p>key包括passType、serialNumber。</p>           <ul>            <li>passType：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wallet-preparations" target="_blank">创建Wallet Kit服务</a>时注册的服务号，需要开发者到华为AGC网站申请。</li>            <li>serialNumber：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-rest-api-carkey#section129511211195">申请钥匙卡片</a>时定义的卡券唯一标识。</li>           </ul></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.1" width="26.47%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.2" width="73.53%">          <p><strong>说明</strong></p></th>        </tr><tr>         <td class="cellrowborder" width="26.47%">          <p>Promise&lt;string&gt;</p></td>         <td class="cellrowborder" width="73.53%">          <p>Promise对象，JSON String格式，传出的字段以key-value的形式设置在数组类型的JSON String中，并通过该参数传出。</p>          <p>key包括passType、serialNumber、deviceType、passDeviceId、deviceModel、cardStatus。</p>          <ul>           <li>passType：服务号</li>           <li>serialNumber：卡券唯一标识</li>           <li>deviceType：设备类型。取值如下            <ul>             <li>phone：手机</li>             <li>wear：穿戴</li>            </ul></li>           <li>passDeviceId：账号/设备联合标识符。</li>           <li>deviceModel：设备名，用于展示可开通的设备名称。</li>           <li>cardStatus：卡片状态 。取值如下            <ul>             <li>0：可用</li>             <li>1：不可用</li>            </ul></li>          </ul></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.14.1.3.1.1" width="26.279999999999998%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.14.1.3.1.2" width="73.72%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>401</p></td>         <td class="cellrowborder" width="73.72%">          <p>Parameter error. Possible causes: Mandatory parameters are left unspecified.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200001</p></td>         <td class="cellrowborder" width="73.72%">          <p>No permission to access the Wallet APIs.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200002</p></td>         <td class="cellrowborder" width="73.72%">          <p>Wallet app not found.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200003</p></td>         <td class="cellrowborder" width="73.72%">          <p>The environment of the wallet is not ready.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200006</p></td>         <td class="cellrowborder" width="73.72%">          <p>The device's remote paired watch cannot be connected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010220501</p></td>         <td class="cellrowborder" width="73.72%">          <p>No card that meets the search criteria is found.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200013</p></td>         <td class="cellrowborder" width="73.72%">          <p>Operation failed because of an internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200014</p></td>         <td class="cellrowborder" width="73.72%">          <p>The Wallet APIs can be called by the device owner only.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ols-c106="" class="highlight-div"><div _ngcontent-ols-c106="" class="highlight-div-header"><div _ngcontent-ols-c106="" class="highlight-div-header-left"><div _ngcontent-ols-c106="" class="handle-button expand-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ols-c106="" class="highlight-div-header-right"><div _ngcontent-ols-c106="" class="handle-button ai-button"></div><div _ngcontent-ols-c106="" class="handle-button line-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ols-c106="" class="handle-button theme-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ols-c106="" class="handle-button copy-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ols-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletPass } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">walletPassClient</span>: walletPass.<span class="hljs-property">WalletPassClient</span> = <span class="hljs-keyword">new</span> walletPass.<span class="hljs-title class_">WalletPassClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">passType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">serialNumber</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">queryPass</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> passStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({</li><li>      <span class="hljs-attr">passType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">passType</span>,</li><li>      <span class="hljs-attr">serialNumber</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">serialNumber</span></li><li>    });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletPassClient</span>.<span class="hljs-title function_">queryPass</span>(passStr).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in querying pass, result: <span class="hljs-subst">${result}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query pass, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section18261142114710" device-type="phone">viewPass<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section18261142114710" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>viewPass(passStr: string): Promise&lt;void&gt;</p>     <p>跳转钱包查看已开通的卡券详情页。</p>     <p>使用Promise异步回调。</p>     <p>不支持多线程调用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.11.9.2.1.5.1.1" width="18%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.11.9.2.1.5.1.2" width="18%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.11.9.2.1.5.1.3" width="14.000000000000002%">           <p><strong>必填</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.11.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="18%">           <p>passStr</p></td>          <td class="cellrowborder" width="18%">           <p>string</p></td>          <td class="cellrowborder" width="14.000000000000002%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>要求JSON String格式，传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。</p>           <p>key包括passType、serialNumber。</p>           <ul>            <li>passType：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wallet-preparations" target="_blank">创建Wallet Kit服务</a>时注册的服务号，需要开发者到华为AGC网站申请。</li>            <li>serialNumber：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-rest-api-carkey#section129511211195">申请钥匙卡片</a>时定义的卡券唯一标识。</li>           </ul></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="26.47%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="73.53%">          <p><strong>说明</strong></p></th>        </tr><tr>         <td class="cellrowborder" width="26.47%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="73.53%">          <p>Promise对象。无返回结果的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.14.1.3.1.1" width="18.08%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.14.1.3.1.2" width="81.92%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="18.08%">          <p>1010200002</p></td>         <td class="cellrowborder" width="81.92%">          <p>Wallet app not found.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.08%">          <p>1010200013</p></td>         <td class="cellrowborder" width="81.92%">          <p>Operation failed because of an internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ols-c106="" class="highlight-div"><div _ngcontent-ols-c106="" class="highlight-div-header"><div _ngcontent-ols-c106="" class="highlight-div-header-left"><div _ngcontent-ols-c106="" class="handle-button expand-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ols-c106="" class="highlight-div-header-right"><div _ngcontent-ols-c106="" class="handle-button ai-button"></div><div _ngcontent-ols-c106="" class="handle-button line-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ols-c106="" class="handle-button theme-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ols-c106="" class="handle-button copy-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ols-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletPass } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">walletPassClient</span>: walletPass.<span class="hljs-property">WalletPassClient</span> = <span class="hljs-keyword">new</span> walletPass.<span class="hljs-title class_">WalletPassClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">passType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">serialNumber</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">viewPass</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> passStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({</li><li>      <span class="hljs-attr">passType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">passType</span>,</li><li>      <span class="hljs-attr">serialNumber</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">serialNumber</span></li><li>    });</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletPassClient</span>.<span class="hljs-title function_">viewPass</span>(passStr);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in viewing pass`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to view pass, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section19918124394712" device-type="phone">updatePass<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section19918124394712" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>updatePass(passStr: string): Promise&lt;string&gt;</p>     <p>卡券更新（预留接口，暂不提供具体功能）。</p>     <p>使用Promise异步回调。</p>     <p>不支持多线程调用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.12.9.2.1.5.1.1" width="18%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.12.9.2.1.5.1.2" width="18%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.12.9.2.1.5.1.3" width="14.000000000000002%">           <p><strong>必填</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.12.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="18%">           <p>passStr</p></td>          <td class="cellrowborder" width="18%">           <p>string</p></td>          <td class="cellrowborder" width="14.000000000000002%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>要求JSON String格式，传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。</p>           <p>key包括passType、serialNumber。</p>           <ul>            <li>passType：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wallet-preparations" target="_blank">创建Wallet Kit服务</a>时注册的服务号，需要开发者到华为AGC网站申请。</li>            <li>serialNumber：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-rest-api-carkey#section129511211195">申请钥匙卡片</a>时定义的卡券唯一标识。</li>           </ul></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="26.47%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="73.53%">          <p><strong>说明</strong></p></th>        </tr><tr>         <td class="cellrowborder" width="26.47%">          <p>Promise&lt;string&gt;</p></td>         <td class="cellrowborder" width="73.53%">          <p>Promise对象，JSON String格式，传出的字段以key-value的形式设置在JSON String中，并通过该参数传出。</p>          <p>key包括result。</p>          <ul>           <li>result：卡券更新结果0，全部更新完成后返回操作成功。</li>          </ul></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.14.1.3.1.1" width="26.66%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.14.1.3.1.2" width="73.34%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.66%">          <p>401</p></td>         <td class="cellrowborder" width="73.34%">          <p>Parameter error. Possible causes: Mandatory parameters are left unspecified.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.66%">          <p>1010200001</p></td>         <td class="cellrowborder" width="73.34%">          <p>No permission to access the Wallet APIs.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.66%">          <p>1010200002</p></td>         <td class="cellrowborder" width="73.34%">          <p>Wallet app not found.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.66%">          <p>1010200005</p></td>         <td class="cellrowborder" width="73.34%">          <p>The operation was canceled by the user.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.66%">          <p>1010200006</p></td>         <td class="cellrowborder" width="73.34%">          <p>The device's remote paired watch cannot be connected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.66%">          <p>1010220003</p></td>         <td class="cellrowborder" width="73.34%">          <p>Pass service is temporarily unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.66%">          <p>1010220004</p></td>         <td class="cellrowborder" width="73.34%">          <p>The card does not exist in the specified device.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.66%">          <p>1010220701</p></td>         <td class="cellrowborder" width="73.34%">          <p>Failed to update the card because no update is detected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.66%">          <p>1010200013</p></td>         <td class="cellrowborder" width="73.34%">          <p>Operation failed because of an internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.66%">          <p>1010200014</p></td>         <td class="cellrowborder" width="73.34%">          <p>The Wallet APIs can be called by the device owner only.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.66%">          <p>1010200010</p></td>         <td class="cellrowborder" width="73.34%">          <p>Network connection error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ols-c106="" class="highlight-div"><div _ngcontent-ols-c106="" class="highlight-div-header"><div _ngcontent-ols-c106="" class="highlight-div-header-left"><div _ngcontent-ols-c106="" class="handle-button expand-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ols-c106="" class="highlight-div-header-right"><div _ngcontent-ols-c106="" class="handle-button ai-button"></div><div _ngcontent-ols-c106="" class="handle-button line-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ols-c106="" class="handle-button theme-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ols-c106="" class="handle-button copy-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ols-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletPass } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">walletPassClient</span>: walletPass.<span class="hljs-property">WalletPassClient</span> = <span class="hljs-keyword">new</span> walletPass.<span class="hljs-title class_">WalletPassClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">passType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">serialNumber</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">updatePass</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> passStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({</li><li>      <span class="hljs-attr">passType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">passType</span>,</li><li>      <span class="hljs-attr">serialNumber</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">serialNumber</span></li><li>    });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletPassClient</span>.<span class="hljs-title function_">updatePass</span>(passStr).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in updating pass,result: <span class="hljs-subst">${result}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to update pass, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section4841337523" device-type="phone">deletePass<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section4841337523" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>deletePass(passStr: string): Promise&lt;string&gt;</p>     <p>卡券删除（预留接口，暂不提供具体功能）。</p>     <p>使用Promise异步回调。</p>     <p>不支持多线程调用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.13.9.2.1.5.1.1" width="18%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.13.9.2.1.5.1.2" width="18%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.13.9.2.1.5.1.3" width="14.000000000000002%">           <p><strong>必填</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.13.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="18%">           <p>passStr</p></td>          <td class="cellrowborder" width="18%">           <p>string</p></td>          <td class="cellrowborder" width="14.000000000000002%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>要求JSON String格式，传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。</p>           <p>key包括passType、serialNumber。</p>           <ul>            <li>passType：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wallet-preparations" target="_blank">创建Wallet Kit服务</a>时注册的服务号，需要开发者到华为AGC网站申请。</li>            <li>serialNumber：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-rest-api-carkey#section129511211195">申请钥匙卡片</a>时定义的卡券唯一标识。</li>           </ul></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="26.47%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="73.53%">          <p><strong>说明</strong></p></th>        </tr><tr>         <td class="cellrowborder" width="26.47%">          <p>Promise&lt;string&gt;</p></td>         <td class="cellrowborder" width="73.53%">          <p>Promise对象，JSON String格式，传出的字段以key-value的形式设置在JSON String中，并通过该参数传出。</p>          <p>key包括result。</p>          <ul>           <li>result：卡券删除结果0，全部删除完成后返回操作成功。</li>          </ul></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.14.1.3.1.1" width="26.279999999999998%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.14.1.3.1.2" width="73.72%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>401</p></td>         <td class="cellrowborder" width="73.72%">          <p>Parameter error. Possible causes: Mandatory parameters are left unspecified.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200001</p></td>         <td class="cellrowborder" width="73.72%">          <p>No permission to access the Wallet APIs.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200002</p></td>         <td class="cellrowborder" width="73.72%">          <p>Wallet app not found.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200005</p></td>         <td class="cellrowborder" width="73.72%">          <p>The operation was canceled by the user.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200006</p></td>         <td class="cellrowborder" width="73.72%">          <p>The device's remote paired watch cannot be connected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200012</p></td>         <td class="cellrowborder" width="73.72%">          <p>Duplicate request.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010220003</p></td>         <td class="cellrowborder" width="73.72%">          <p>Pass service is temporarily unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010220004</p></td>         <td class="cellrowborder" width="73.72%">          <p>The card does not exist in the specified device.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200013</p></td>         <td class="cellrowborder" width="73.72%">          <p>Operation failed because of an internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200014</p></td>         <td class="cellrowborder" width="73.72%">          <p>The Wallet APIs can be called by the device owner only.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200010</p></td>         <td class="cellrowborder" width="73.72%">          <p>Network connection error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010220801</p></td>         <td class="cellrowborder" width="73.72%">          <p>Failed to delete the card because the signature verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ols-c106="" class="highlight-div"><div _ngcontent-ols-c106="" class="highlight-div-header"><div _ngcontent-ols-c106="" class="highlight-div-header-left"><div _ngcontent-ols-c106="" class="handle-button expand-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ols-c106="" class="highlight-div-header-right"><div _ngcontent-ols-c106="" class="handle-button ai-button"></div><div _ngcontent-ols-c106="" class="handle-button line-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ols-c106="" class="handle-button theme-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ols-c106="" class="handle-button copy-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ols-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletPass } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">walletPassClient</span>: walletPass.<span class="hljs-property">WalletPassClient</span> = <span class="hljs-keyword">new</span> walletPass.<span class="hljs-title class_">WalletPassClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">passType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">serialNumber</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">deletePass</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> passStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({</li><li>      <span class="hljs-attr">passType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">passType</span>,</li><li>      <span class="hljs-attr">serialNumber</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">serialNumber</span></li><li>    });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletPassClient</span>.<span class="hljs-title function_">deletePass</span>(passStr).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in deleting pass, result: <span class="hljs-subst">${result}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete pass, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section82336268523" device-type="phone">queryICCEConnectionState<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section82336268523" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>queryICCEConnectionState(rkeStr: string): Promise&lt;string&gt;</p>     <p>查询车控连接状态。</p>     <p>使用Promise异步回调。</p>     <p>不支持多线程调用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.14.9.2.1.5.1.1" width="18%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.14.9.2.1.5.1.2" width="18%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.14.9.2.1.5.1.3" width="14.000000000000002%">           <p><strong>必填</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.14.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="18%">           <p>rkeStr</p></td>          <td class="cellrowborder" width="18%">           <p>string</p></td>          <td class="cellrowborder" width="14.000000000000002%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>要求JSON String格式，传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。</p>           <p>key包括passType、serialNumber。</p>           <ul>            <li>passType：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wallet-preparations" target="_blank">创建Wallet Kit服务</a>时注册的服务号，需要开发者到华为AGC网站申请。</li>            <li>serialNumber：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-rest-api-carkey#section129511211195">申请钥匙卡片</a>时定义的卡券唯一标识。</li>           </ul></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="26.44%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="73.56%">          <p><strong>说明</strong></p></th>        </tr><tr>         <td class="cellrowborder" width="26.44%">          <p>Promise&lt;string&gt;</p></td>         <td class="cellrowborder" width="73.56%">          <p>Promise对象，JSON String格式，传出的字段以key-value的形式设置在JSON String中，并通过该参数传出。</p>          <p>key包括deviceType、passDeviceId、deviceModel、connectionState、authState。</p>          <ul>           <li>deviceType：设备类型。取值如下            <ul>             <li>phone：手机</li>             <li>wear：穿戴</li>            </ul></li>           <li>passDeviceId：账号/设备联合标识符。</li>           <li>deviceModel：设备名，用于展示可开通的设备名称。</li>           <li>connectionState：连接状态。取值如下            <ul>             <li>0：异常状态</li>             <li>1：正在连接</li>             <li>2：连接成功</li>             <li>3：未连接</li>             <li>4：连接超时</li>             <li>10：未配对</li>             <li>11：配对中</li>             <li>12：已配对</li>            </ul></li>           <li>authState：认证状态。取值如下            <ul>             <li>0：未认证/认证失败</li>             <li>1：认证成功</li>            </ul></li>          </ul></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.14.1.3.1.1" width="26.279999999999998%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.14.1.3.1.2" width="73.72%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>401</p></td>         <td class="cellrowborder" width="73.72%">          <p>Parameter error. Possible causes: Mandatory parameters are left unspecified.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200001</p></td>         <td class="cellrowborder" width="73.72%">          <p>No permission to access the Wallet APIs.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200002</p></td>         <td class="cellrowborder" width="73.72%">          <p>Wallet app not found.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200006</p></td>         <td class="cellrowborder" width="73.72%">          <p>The device's remote paired watch cannot be connected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010220004</p></td>         <td class="cellrowborder" width="73.72%">          <p>The card does not exist in the specified device.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010220006</p></td>         <td class="cellrowborder" width="73.72%">          <p>Bluetooth permission is not granted.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200013</p></td>         <td class="cellrowborder" width="73.72%">          <p>Operation failed because of an internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200014</p></td>         <td class="cellrowborder" width="73.72%">          <p>The Wallet APIs can be called by the device owner only.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ols-c106="" class="highlight-div"><div _ngcontent-ols-c106="" class="highlight-div-header"><div _ngcontent-ols-c106="" class="highlight-div-header-left"><div _ngcontent-ols-c106="" class="handle-button expand-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ols-c106="" class="highlight-div-header-right"><div _ngcontent-ols-c106="" class="handle-button ai-button"></div><div _ngcontent-ols-c106="" class="handle-button line-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ols-c106="" class="handle-button theme-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ols-c106="" class="handle-button copy-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ols-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletPass } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">walletPassClient</span>: walletPass.<span class="hljs-property">WalletPassClient</span> = <span class="hljs-keyword">new</span> walletPass.<span class="hljs-title class_">WalletPassClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">passType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">serialNumber</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">queryICCEConnectionState</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> passStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({</li><li>      <span class="hljs-attr">passType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">passType</span>,</li><li>      <span class="hljs-attr">serialNumber</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">serialNumber</span></li><li>    });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletPassClient</span>.<span class="hljs-title function_">queryICCEConnectionState</span>(passStr).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in querying ICCEConnectionState, result: <span class="hljs-subst">${result}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query ICCEConnectionState, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section137818297525" device-type="phone">startICCEConnection<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section137818297525" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>startICCEConnection(rkeStr: string): Promise&lt;string&gt;</p>     <p>车控连接。</p>     <p>使用Promise异步回调。</p>     <p>不支持多线程调用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.15.9.2.1.5.1.1" width="18%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.15.9.2.1.5.1.2" width="18%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.15.9.2.1.5.1.3" width="14.000000000000002%">           <p><strong>必填</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.15.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="18%">           <p>rkeStr</p></td>          <td class="cellrowborder" width="18%">           <p>string</p></td>          <td class="cellrowborder" width="14.000000000000002%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>要求JSON String格式，传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。</p>           <p>key包括passType、serialNumber。</p>           <ul>            <li>passType：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wallet-preparations" target="_blank">创建Wallet Kit服务</a>时注册的服务号，需要开发者到华为AGC网站申请。</li>            <li>serialNumber：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-rest-api-carkey#section129511211195">申请钥匙卡片</a>时定义的卡券唯一标识。</li>           </ul></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="26.47%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="73.53%">          <p><strong>说明</strong></p></th>        </tr><tr>         <td class="cellrowborder" width="26.47%">          <p>Promise&lt;string&gt;</p></td>         <td class="cellrowborder" width="73.53%">          <p>Promise对象，JSON String格式，传出的字段以key-value的形式设置在JSON String中，并通过该参数传出。</p>          <p>key包括result、deviceType、passDeviceId、deviceModel、connectionState、authState、reasonCode。</p>          <ul>           <li>result：认证状态。取值如下            <ul>             <li>0：已配对已连接</li>             <li>1：已配对未连接</li>             <li>2：未配对</li>            </ul></li>          </ul>          <ul>           <li>deviceType：设备类型。取值如下            <ul>             <li>phone：手机</li>             <li>wear：穿戴</li>            </ul></li>           <li>passDeviceId：账号/设备联合标识符。</li>           <li>deviceModel：设备名，用于展示可开通的设备名称。</li>           <li>connectionState：连接状态。取值如下            <ul>             <li>0：异常状态</li>             <li>1：正在连接</li>             <li>2：连接成功</li>             <li>3：未连接</li>             <li>4：连接超时</li>             <li>10：未配对</li>             <li>11：配对中</li>             <li>12：已配对</li>            </ul></li>           <li>authState：认证状态。取值如下            <ul>             <li>0：未认证/认证失败</li>             <li>1：认证成功</li>            </ul></li>          </ul>          <ul>           <li>reasonCode：异常原因码，只有result为2时才会返回。取值如下            <ul>             <li>1：表侧星闪开关未开启</li>            </ul></li>          </ul></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.14.1.3.1.1" width="26.279999999999998%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.14.1.3.1.2" width="73.72%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>401</p></td>         <td class="cellrowborder" width="73.72%">          <p>Parameter error. Possible causes: Mandatory parameters are left unspecified.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200001</p></td>         <td class="cellrowborder" width="73.72%">          <p>No permission to access the Wallet APIs.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200002</p></td>         <td class="cellrowborder" width="73.72%">          <p>Wallet app not found.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200005</p></td>         <td class="cellrowborder" width="73.72%">          <p>The operation was canceled by the user.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200006</p></td>         <td class="cellrowborder" width="73.72%">          <p>The device's remote paired watch cannot be connected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200010</p></td>         <td class="cellrowborder" width="73.72%">          <p>Network connection error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200012</p></td>         <td class="cellrowborder" width="73.72%">          <p>Duplicate request.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010221001</p></td>         <td class="cellrowborder" width="73.72%">          <p>Connection failed because the pairing code is not obtained.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010220004</p></td>         <td class="cellrowborder" width="73.72%">          <p>The card does not exist in the specified device.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010220006</p></td>         <td class="cellrowborder" width="73.72%">          <p>Bluetooth permission is not granted.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200013</p></td>         <td class="cellrowborder" width="73.72%">          <p>Operation failed because of an internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200014</p></td>         <td class="cellrowborder" width="73.72%">          <p>The Wallet APIs can be called by the device owner only.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ols-c106="" class="highlight-div"><div _ngcontent-ols-c106="" class="highlight-div-header"><div _ngcontent-ols-c106="" class="highlight-div-header-left"><div _ngcontent-ols-c106="" class="handle-button expand-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ols-c106="" class="highlight-div-header-right"><div _ngcontent-ols-c106="" class="handle-button ai-button"></div><div _ngcontent-ols-c106="" class="handle-button line-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ols-c106="" class="handle-button theme-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ols-c106="" class="handle-button copy-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ols-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletPass } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">walletPassClient</span>: walletPass.<span class="hljs-property">WalletPassClient</span> = <span class="hljs-keyword">new</span> walletPass.<span class="hljs-title class_">WalletPassClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">passType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">serialNumber</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">startICCEConnection</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> passStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({</li><li>      <span class="hljs-attr">passType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">passType</span>,</li><li>      <span class="hljs-attr">serialNumber</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">serialNumber</span></li><li>    });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletPassClient</span>.<span class="hljs-title function_">startICCEConnection</span>(passStr).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in starting ICCEConnection, result: <span class="hljs-subst">${result}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to start ICCEConnection, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section287123205213" device-type="phone">registerICCEListener<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section287123205213" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>registerICCEListener(rkeStr: string, eventNotifyListener: rpc.RemoteObject): Promise&lt;string&gt;</p>     <p>注册监听。</p>     <p>使用Promise异步回调。</p>     <p>不支持多线程调用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.16.9.2.1.5.1.1" width="18%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.16.9.2.1.5.1.2" width="18%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.16.9.2.1.5.1.3" width="14.000000000000002%">           <p><strong>必填</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.16.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="18%">           <p>rkeStr</p></td>          <td class="cellrowborder" width="18%">           <p>string</p></td>          <td class="cellrowborder" width="14.000000000000002%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>要求JSON String格式，传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。</p>           <p>key包括passType、registerName。</p>           <ul>            <li>passType：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wallet-preparations" target="_blank">创建Wallet Kit服务</a>时注册的服务号，需要开发者到华为AGC网站申请。</li>            <li>registerName：注册监听的应用名称，一般为包名。</li>           </ul></td>         </tr>         <tr>          <td class="cellrowborder" width="18%">           <p>eventNotifyListener</p></td>          <td class="cellrowborder" width="18%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-rpc#remoteobject" target="_blank">rpc.RemoteObject</a></p></td>          <td class="cellrowborder" width="14.000000000000002%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>回调事件，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-rpc#remoteobject" target="_blank">rpc.RemoteObject</a>格式。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="26.47%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="73.53%">          <p><strong>说明</strong></p></th>        </tr><tr>         <td class="cellrowborder" width="26.47%">          <p>Promise&lt;string&gt;</p></td>         <td class="cellrowborder" width="73.53%">          <p>Promise对象，JSON String格式，传出的字段以key-value的形式设置在JSON String中，并通过该参数传出。</p>          <p>key包括result。</p>          <ul>           <li>result：注册成功结果0。</li>          </ul></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.14.1.3.1.1" width="26.279999999999998%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.14.1.3.1.2" width="73.72%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>401</p></td>         <td class="cellrowborder" width="73.72%">          <p>Parameter error. Possible causes: Mandatory parameters are left unspecified.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200001</p></td>         <td class="cellrowborder" width="73.72%">          <p>No permission to access the Wallet APIs.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200002</p></td>         <td class="cellrowborder" width="73.72%">          <p>Wallet app not found.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010221101</p></td>         <td class="cellrowborder" width="73.72%">          <p>Registration failed because of duplicate register name.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200012</p></td>         <td class="cellrowborder" width="73.72%">          <p>Duplicate request.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200013</p></td>         <td class="cellrowborder" width="73.72%">          <p>Operation failed because of an internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200014</p></td>         <td class="cellrowborder" width="73.72%">          <p>The Wallet APIs can be called by the device owner only.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ols-c106="" class="highlight-div"><div _ngcontent-ols-c106="" class="highlight-div-header"><div _ngcontent-ols-c106="" class="highlight-div-header-left"><div _ngcontent-ols-c106="" class="handle-button expand-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ols-c106="" class="highlight-div-header-right"><div _ngcontent-ols-c106="" class="handle-button ai-button"></div><div _ngcontent-ols-c106="" class="handle-button line-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ols-c106="" class="handle-button theme-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ols-c106="" class="handle-button copy-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ols-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletPass } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { rpc } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IPCKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">ICCECallBack</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">rpc.RemoteObject</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>(<span class="hljs-string">'ICCECallBack'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">onRemoteMessageRequest</span>(<span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">data</span>: rpc.<span class="hljs-property">MessageSequence</span>, <span class="hljs-attr">reply</span>: rpc.<span class="hljs-property">MessageSequence</span>, <span class="hljs-attr">option</span>: rpc.<span class="hljs-property">MessageOption</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {</li><li>    <span class="hljs-comment">// processing after receiving communication data</span></li><li>    <span class="hljs-keyword">let</span> codeInt = data.<span class="hljs-title function_">readInt</span>();</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">walletPassClient</span>: walletPass.<span class="hljs-property">WalletPassClient</span> = <span class="hljs-keyword">new</span> walletPass.<span class="hljs-title class_">WalletPassClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">callback</span>: rpc.<span class="hljs-property">RemoteObject</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">passType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">registerName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">registerICCEListener</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> passStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({</li><li>      <span class="hljs-attr">passType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">passType</span>,</li><li>      <span class="hljs-attr">registerName</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">registerName</span></li><li>    });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callback</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ICCECallBack</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletPassClient</span>.<span class="hljs-title function_">registerICCEListener</span>(passStr, <span class="hljs-variable language_">this</span>.<span class="hljs-property">callback</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in registering ICCEListener, result: <span class="hljs-subst">${result}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to register ICCEListener, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section692193414523" device-type="phone">unregisterICCEListener<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section692193414523" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>unregisterICCEListener(rkeStr: string): Promise&lt;string&gt;</p>     <p>解注册监听。</p>     <p>使用Promise异步回调。</p>     <p>不支持多线程调用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.17.9.2.1.5.1.1" width="18%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.17.9.2.1.5.1.2" width="18%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.17.9.2.1.5.1.3" width="14.000000000000002%">           <p><strong>必填</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.17.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="18%">           <p>rkeStr</p></td>          <td class="cellrowborder" width="18%">           <p>string</p></td>          <td class="cellrowborder" width="14.000000000000002%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>要求JSON String格式，传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。</p>           <p>key包括passType、registerName。</p>           <ul>            <li>passType：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wallet-preparations" target="_blank">创建Wallet Kit服务</a>时注册的服务号，需要开发者到华为AGC网站申请。</li>            <li>registerName：注册监听的应用名称，一般为包名。</li>           </ul></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="26.47%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="73.53%">          <p><strong>说明</strong></p></th>        </tr><tr>         <td class="cellrowborder" width="26.47%">          <p>Promise&lt;string&gt;</p></td>         <td class="cellrowborder" width="73.53%">          <p>Promise对象，JSON String格式，传出的字段以key-value的形式设置在JSON String中，并通过该参数传出。</p>          <p>key包括result。</p>          <ul>           <li>result：解注册成功结果0。</li>          </ul></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.14.1.3.1.1" width="26.279999999999998%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.17.14.1.3.1.2" width="73.72%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>401</p></td>         <td class="cellrowborder" width="73.72%">          <p>Parameter error. Possible causes: Mandatory parameters are left unspecified.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200001</p></td>         <td class="cellrowborder" width="73.72%">          <p>No permission to access the Wallet APIs.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200002</p></td>         <td class="cellrowborder" width="73.72%">          <p>Wallet app not found.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010221201</p></td>         <td class="cellrowborder" width="73.72%">          <p>The registration may have been unregistered before.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200013</p></td>         <td class="cellrowborder" width="73.72%">          <p>Operation failed because of an internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200014</p></td>         <td class="cellrowborder" width="73.72%">          <p>The Wallet APIs can be called by the device owner only.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ols-c106="" class="highlight-div"><div _ngcontent-ols-c106="" class="highlight-div-header"><div _ngcontent-ols-c106="" class="highlight-div-header-left"><div _ngcontent-ols-c106="" class="handle-button expand-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ols-c106="" class="highlight-div-header-right"><div _ngcontent-ols-c106="" class="handle-button ai-button"></div><div _ngcontent-ols-c106="" class="handle-button line-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ols-c106="" class="handle-button theme-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ols-c106="" class="handle-button copy-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ols-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletPass } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { rpc } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IPCKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">walletPassClient</span>: walletPass.<span class="hljs-property">WalletPassClient</span> = <span class="hljs-keyword">new</span> walletPass.<span class="hljs-title class_">WalletPassClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">callback</span>: rpc.<span class="hljs-property">RemoteObject</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">passType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">registerName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">unregisterICCEListener</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> passStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({</li><li>      <span class="hljs-attr">passType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">passType</span>,</li><li>      <span class="hljs-attr">registerName</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">registerName</span></li><li>    });</li><li>
</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletPassClient</span>.<span class="hljs-title function_">unregisterICCEListener</span>(passStr).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in unregistering ICCEListener, result: <span class="hljs-subst">${result}</span>`</span>);</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">callback</span> = <span class="hljs-literal">null</span>;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to unregister ICCEListener, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section73091546144716" device-type="phone">sendICCERKEMessage<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section73091546144716" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>sendICCERKEMessage(rkeStr: string): Promise&lt;string&gt;</p>     <p>发送车控指令。</p>     <p>使用Promise异步回调。</p>     <p>不支持多线程调用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.18.9.2.1.5.1.1" width="18%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.18.9.2.1.5.1.2" width="18%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.18.9.2.1.5.1.3" width="14.000000000000002%">           <p><strong>必填</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.18.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="18%">           <p>rkeStr</p></td>          <td class="cellrowborder" width="18%">           <p>string</p></td>          <td class="cellrowborder" width="14.000000000000002%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>要求JSON String格式，传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。</p>           <p>key包括passType、serialNumber、rkeCommand、encryptFlag、directionFlag。</p>           <ul>            <li>passType：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wallet-preparations" target="_blank">创建Wallet Kit服务</a>时注册的服务号，需要开发者到华为AGC网站申请。</li>            <li>serialNumber：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-rest-api-carkey#section129511211195">申请钥匙卡片</a>时定义的卡券唯一标识。</li>            <li>rkeCommand：请求指令。</li>            <li>encryptFlag：加密指示位。取值如下             <ul>              <li>0：不加密</li>              <li>1：需要基于通道会话秘钥加密</li>             </ul></li>            <li>directionFlag：方向指示位。取值如下             <ul>              <li>0：上报结果</li>              <li>1：发送指令</li>             </ul></li>           </ul></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.1" width="26.47%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.2" width="73.53%">          <p><strong>说明</strong></p></th>        </tr><tr>         <td class="cellrowborder" width="26.47%">          <p>Promise&lt;string&gt;</p></td>         <td class="cellrowborder" width="73.53%">          <p>Promise对象，JSON String格式，传出的字段以key-value的形式设置在JSON String中，并通过该参数传出。</p>          <p>key包括deviceType、passDeviceId、deviceModel、result。</p>          <ul>           <li>deviceType：设备类型。取值如下            <ul>             <li>phone：手机</li>             <li>wear：穿戴</li>            </ul></li>           <li>passDeviceId：账号/设备联合标识符。</li>           <li>deviceModel：设备名，用于展示可开通的设备名称。</li>           <li>result：车控发起结果，发送至车辆后立即返回。取值如下            <ul>             <li>0：发送成功</li>            </ul></li>          </ul></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.14.1.3.1.1" width="26.279999999999998%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.14.1.3.1.2" width="73.72%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>401</p></td>         <td class="cellrowborder" width="73.72%">          <p>Parameter error. Possible causes: Mandatory parameters are left unspecified.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200001</p></td>         <td class="cellrowborder" width="73.72%">          <p>No permission to access the Wallet APIs.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200002</p></td>         <td class="cellrowborder" width="73.72%">          <p>Wallet app not found.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200006</p></td>         <td class="cellrowborder" width="73.72%">          <p>The device's remote paired watch cannot be connected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200012</p></td>         <td class="cellrowborder" width="73.72%">          <p>Duplicate request.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010220004</p></td>         <td class="cellrowborder" width="73.72%">          <p>The card does not exist in the specified device.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010220006</p></td>         <td class="cellrowborder" width="73.72%">          <p>Bluetooth permission is not granted.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010221301</p></td>         <td class="cellrowborder" width="73.72%">          <p>Failed to send the RKE message because of a connection failure.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010221302</p></td>         <td class="cellrowborder" width="73.72%">          <p>Failed to send the RKE message because of an authentication failure.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200013</p></td>         <td class="cellrowborder" width="73.72%">          <p>Operation failed because of an internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.279999999999998%">          <p>1010200014</p></td>         <td class="cellrowborder" width="73.72%">          <p>The Wallet APIs can be called by the device owner only.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ols-c106="" class="highlight-div"><div _ngcontent-ols-c106="" class="highlight-div-header"><div _ngcontent-ols-c106="" class="highlight-div-header-left"><div _ngcontent-ols-c106="" class="handle-button expand-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ols-c106="" class="highlight-div-header-right"><div _ngcontent-ols-c106="" class="handle-button ai-button"></div><div _ngcontent-ols-c106="" class="handle-button line-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ols-c106="" class="handle-button theme-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ols-c106="" class="handle-button copy-button"><div _ngcontent-ols-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ols-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletPass } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">walletPassClient</span>: walletPass.<span class="hljs-property">WalletPassClient</span> = <span class="hljs-keyword">new</span> walletPass.<span class="hljs-title class_">WalletPassClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">serialNumber</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">passType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rkeCommand</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">sendICCERKEMessage</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> passStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({</li><li>      <span class="hljs-attr">passType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">passType</span>,</li><li>      <span class="hljs-attr">serialNumber</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">serialNumber</span>,</li><li>      <span class="hljs-attr">rkeCommand</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">rkeCommand</span>,</li><li>      <span class="hljs-attr">encryptFlag</span>: <span class="hljs-string">'0'</span>,</li><li>      <span class="hljs-attr">directionFlag</span>: <span class="hljs-string">'1'</span></li><li>    });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletPassClient</span>.<span class="hljs-title function_">sendICCERKEMessage</span>(passStr).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in sending ICCERKEMessage, result: <span class="hljs-subst">${result}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to send ICCERKEMessage, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>