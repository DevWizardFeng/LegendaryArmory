<h1 _ngcontent-kuo-c119="" class="doc-title ng-star-inserted" title="walletTransitCard（交通卡能力）"> walletTransitCard（交通卡能力） </h1>

<div _ngcontent-kuo-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供接入钱包交通卡服务的能力。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="tiledSection"><h2 id="section185445131015" device-type="phone">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section185445131015" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><div _ngcontent-kuo-c106="" class="highlight-div"><div _ngcontent-kuo-c106="" class="highlight-div-header"><div _ngcontent-kuo-c106="" class="highlight-div-header-left"><div _ngcontent-kuo-c106="" class="handle-button expand-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kuo-c106="" class="highlight-div-header-right"><div _ngcontent-kuo-c106="" class="handle-button ai-button"></div><div _ngcontent-kuo-c106="" class="handle-button line-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kuo-c106="" class="handle-button theme-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kuo-c106="" class="handle-button copy-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kuo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { walletTransitCard } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section175983073117" device-type="phone">TransitCardClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section175983073117" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>钱包交通卡的功能入口类，与钱包卡券有关的所有方法从此处接入。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p> <p><strong>起始版本：</strong>5.0.0(12)</p> </div> <div class="tiledSection"><h3 id="section47621223143919" device-type="phone" class="firsth2">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section47621223143919" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>constructor(context: common.UIAbilityContext, callerId: string)</p> <p>构造函数。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p> </div>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.1.5.1.1" width="18.56%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.1.5.1.2" width="18.56%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.1.5.1.3" width="11.33%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.1.5.1.4" width="51.55%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="18.56%"><p>context</p> </td> <td class="cellrowborder" width="18.56%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p> </td> <td class="cellrowborder" width="11.33%"><p>是</p> </td> <td class="cellrowborder" width="51.55%"><p>UIAbility上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="18.56%"><p>callerId</p> </td> <td class="cellrowborder" width="18.56%"><p>string</p> </td> <td class="cellrowborder" width="11.33%"><p>是</p> </td> <td class="cellrowborder" width="51.55%"><p>接口调用方ID，调用方联系钱包运营申请交通卡服务时获取，仅对<strong>受邀应用</strong>开放申请。</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kuo-c106="" class="highlight-div"><div _ngcontent-kuo-c106="" class="highlight-div-header"><div _ngcontent-kuo-c106="" class="highlight-div-header-left"><div _ngcontent-kuo-c106="" class="handle-button expand-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kuo-c106="" class="highlight-div-header-right"><div _ngcontent-kuo-c106="" class="handle-button ai-button"></div><div _ngcontent-kuo-c106="" class="handle-button line-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kuo-c106="" class="handle-button theme-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kuo-c106="" class="handle-button copy-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kuo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletTransitCard } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">transitCardClient</span>: walletTransitCard.<span class="hljs-property">TransitCardClient</span> = <span class="hljs-keyword">new</span> walletTransitCard.<span class="hljs-title class_">TransitCardClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, <span class="hljs-string">'callerId'</span>);</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section3931434195115" device-type="phone">getCardMetadataInDevice<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3931434195115" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>getCardMetadataInDevice(specifiedDeviceType: DeviceType, callerToken?: string): Promise&lt;CardMetadataInDevice[]&gt;</p> <p>获取当前设备中可开卡和已经开通的交通卡信息，包含设备信息和设备支持的卡的元数据。 在没有eSE的情况下，将返回一个空数组。 如果设备没有支持的卡，则无法在阵列中添加设备的CardMetadataInDevice。</p> <p>使用Promise异步回调。</p> <p>不支持多线程调用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.9.2.1.5.1.1" width="18%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.2.1.5.1.2" width="18%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.2.1.5.1.3" width="14.000000000000002%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="18%"><p>specifiedDeviceType</p> </td> <td class="cellrowborder" width="18%"><p><a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section423812461512">DeviceType</a></p> </td> <td class="cellrowborder" width="14.000000000000002%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>指定设备的枚举值。</p> </td> </tr> <tr><td class="cellrowborder" width="18%"><p>callerToken</p> </td> <td class="cellrowborder" width="18%"><p>string</p> </td> <td class="cellrowborder" width="14.000000000000002%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>小程序在微信、支付宝等中的鉴权token，要求使用JWT格式生成。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.1.3.1.1" width="26.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.1.3.1.2" width="73.53%"><p><strong>说明</strong></p> </th> </tr><tr><td class="cellrowborder" width="26.47%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section691675771410">CardMetadataInDevice</a>[]&gt;</p> </td> <td class="cellrowborder" width="73.53%"><p>Promise对象，返回一个CardMetadataInDevice元数据数组，包含设备信息和卡的元数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.1.3.1.1" width="26.540000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.1.3.1.2" width="73.46000000000001%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="26.540000000000003%"><p>401</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Parameter error. Possible causes: Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200001</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>No permission to access the Wallet APIs.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200002</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Wallet app not found.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200003</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The environment of the wallet is not ready.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200006</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The device's remote paired watch cannot be connected.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200010</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200013</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Operation failed because of an internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200014</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The Wallet APIs can be called by the device owner only.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210701</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Failed to verify the caller token.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210702</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Failed to get the metadata of the cards.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kuo-c106="" class="highlight-div"><div _ngcontent-kuo-c106="" class="highlight-div-header"><div _ngcontent-kuo-c106="" class="highlight-div-header-left"><div _ngcontent-kuo-c106="" class="handle-button expand-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kuo-c106="" class="highlight-div-header-right"><div _ngcontent-kuo-c106="" class="handle-button ai-button"></div><div _ngcontent-kuo-c106="" class="handle-button line-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kuo-c106="" class="handle-button theme-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kuo-c106="" class="handle-button copy-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kuo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletTransitCard } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">transitCardClient</span>: walletTransitCard.<span class="hljs-property">TransitCardClient</span> = <span class="hljs-keyword">new</span> walletTransitCard.<span class="hljs-title class_">TransitCardClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, <span class="hljs-string">'callerId'</span>);</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getCardMetadataInDevice</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">transitCardClient</span>.<span class="hljs-title function_">getCardMetadataInDevice</span>(walletTransitCard.<span class="hljs-property">DeviceType</span>.<span class="hljs-property">DEVICE_PHONE</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting cardMetadataInDevice`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get CardMetadataInDevice, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section541913019136" device-type="phone">getTransitCardInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section541913019136" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>getTransitCardInfo(logicalCardNumber: string, specifiedDeviceId: string, callerToken?: string): Promise&lt;TransitCardInfo&gt;</p> <p>查询指定的cardNumber交通卡信息。</p> <p>使用Promise异步回调。</p> <p>不支持多线程调用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.9.2.1.5.1.1" width="18%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.9.2.1.5.1.2" width="10.72%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.9.2.1.5.1.3" width="6.959999999999999%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.9.2.1.5.1.4" width="64.32%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="18%"><p>logicalCardNumber</p> </td> <td class="cellrowborder" width="10.72%"><p>string</p> </td> <td class="cellrowborder" width="6.959999999999999%"><p>是</p> </td> <td class="cellrowborder" width="64.32%"><p>指定卡的卡号，要求使用<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section3931434195115">getCardMetadataInDevice</a> 返回的 <a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section691675771410">CardMetadataInDevice</a> 中的<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section16396135219146">CardMetadata</a> 对应的logicalCardNumber。</p> </td> </tr> <tr><td class="cellrowborder" width="18%"><p>specifiedDeviceId</p> </td> <td class="cellrowborder" width="10.72%"><p>string</p> </td> <td class="cellrowborder" width="6.959999999999999%"><p>是</p> </td> <td class="cellrowborder" width="64.32%"><p>存在该卡的设备的ID，要求使用<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section3931434195115">getCardMetadataInDevice</a> 返回的<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section691675771410">CardMetadataInDevice</a> 对应的deviceId。</p> </td> </tr> <tr><td class="cellrowborder" width="18%"><p>callerToken</p> </td> <td class="cellrowborder" width="10.72%"><p>string</p> </td> <td class="cellrowborder" width="6.959999999999999%"><p>否</p> </td> <td class="cellrowborder" width="64.32%"><p>小程序在微信、支付宝等中的鉴权token，要求使用JWT格式生成。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>返回值：</strong></p> </div>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.1.3.1.1" width="26.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.1.3.1.2" width="73.53%"><p><strong>说明</strong></p> </th> </tr><tr><td class="cellrowborder" width="26.47%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section1175310561152">TransitCardInfo</a>&gt;</p> </td> <td class="cellrowborder" width="73.53%"><p>Promise对象，返回cardNumber指定卡的详细信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.1.3.1.1" width="26.540000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.1.3.1.2" width="73.46000000000001%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="26.540000000000003%"><p>401</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Parameter error. Possible causes: Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200001</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>No permission to access the Wallet APIs.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200002</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Wallet app not found.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200003</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The environment of the wallet is not ready.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200006</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The device's remote paired watch cannot be connected.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200010</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200013</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Operation failed because of an internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210101</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The card status is not correct.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210119</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Failed to read the card data.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200014</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The Wallet APIs can be called by the device owner only.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210102</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Failed to verify the caller token.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kuo-c106="" class="highlight-div"><div _ngcontent-kuo-c106="" class="highlight-div-header"><div _ngcontent-kuo-c106="" class="highlight-div-header-left"><div _ngcontent-kuo-c106="" class="handle-button expand-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kuo-c106="" class="highlight-div-header-right"><div _ngcontent-kuo-c106="" class="handle-button ai-button"></div><div _ngcontent-kuo-c106="" class="handle-button line-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kuo-c106="" class="handle-button theme-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kuo-c106="" class="handle-button copy-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kuo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletTransitCard } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">transitCardClient</span>: walletTransitCard.<span class="hljs-property">TransitCardClient</span> = <span class="hljs-keyword">new</span> walletTransitCard.<span class="hljs-title class_">TransitCardClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, <span class="hljs-string">'callerId'</span>);</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getTransitCardInfo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// number of the enabled traffic card returned by the getCardMetadataInDevice interface</span></li><li>    <span class="hljs-keyword">const</span> logicalCardNumber = <span class="hljs-string">'logicalCardNumber'</span>;</li><li>    <span class="hljs-comment">// the specifiedDeviceId returned by the getCardMetadataInDevice interface</span></li><li>    <span class="hljs-keyword">const</span> specifiedDeviceId = <span class="hljs-string">'specifiedDeviceId'</span>;</li><li>    <span class="hljs-comment">// JWT token for authentication in applications such as WeChat and Alipay</span></li><li>    <span class="hljs-keyword">const</span> callerToken= <span class="hljs-string">'callerToken'</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">transitCardClient</span>.<span class="hljs-title function_">getTransitCardInfo</span>(logicalCardNumber, specifiedDeviceId, callerToken).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting TransitCardInfo`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get TransitCardInfo, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section842743618139" device-type="phone">canAddTransitCard<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section842743618139" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>canAddTransitCard(issuerId: string, specifiedDeviceId: string): Promise&lt;string&gt;</p> <p>判断issuerId在当前设备中是否可以开卡，返回一个令牌字符串，指示是否可以在指定设备的钱包中添加issuerId指定的卡。</p> <p>使用Promise异步回调。</p> <p>不支持多线程调用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.9.2.1.5.1.1" width="18%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.9.2.1.5.1.2" width="12.36%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.9.2.1.5.1.3" width="8.62%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.9.2.1.5.1.4" width="61.019999999999996%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="18%"><p>issuerId</p> </td> <td class="cellrowborder" width="12.36%"><p>string</p> </td> <td class="cellrowborder" width="8.62%"><p>是</p> </td> <td class="cellrowborder" width="61.019999999999996%"><p>城市的一种交通卡产品的ID，要求使用 <a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section3931434195115">getCardMetadataInDevice</a> 返回的 <a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section691675771410">CardMetadataInDevice</a>中的 <a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section16396135219146">CardMetadata</a> 对应的issuerId。</p> </td> </tr> <tr><td class="cellrowborder" width="18%"><p>specifiedDeviceId</p> </td> <td class="cellrowborder" width="12.36%"><p>string</p> </td> <td class="cellrowborder" width="8.62%"><p>是</p> </td> <td class="cellrowborder" width="61.019999999999996%"><p>存在该卡的设备的ID，要求使用 <a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section3931434195115">getCardMetadataInDevice</a> 返回的 <a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section691675771410">CardMetadataInDevice</a>对应的deviceId。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.1" width="26.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.2" width="73.53%"><p><strong>说明</strong></p> </th> </tr><tr><td class="cellrowborder" width="26.47%"><p>Promise&lt;string&gt;</p> </td> <td class="cellrowborder" width="73.53%"><p>Promise对象，返回一个用于添加卡片的token令牌。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.14.1.3.1.1" width="26.540000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.14.1.3.1.2" width="73.46000000000001%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="26.540000000000003%"><p>401</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Parameter error. Possible causes: Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200001</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>No permission to access the Wallet APIs.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200002</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Wallet app not found.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200003</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The environment of the wallet is not ready.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200006</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The device's remote paired watch cannot be connected.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200007</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The OS version is too old. Please upgrade the OS version.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200008</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The wallet version is too old.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200009</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The chip space is full, and no more cards can be added.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200010</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200013</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Operation failed because of an internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200014</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The Wallet APIs can be called by the device owner only.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200016</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>This card is not available for the current country or region.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210201</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The device does not support adding the card specified by issuerId.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210202</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>A card conflicting with the specified card already exists in the device.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210203</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The specified card already exists.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210204</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The card addition service is temporarily offline.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kuo-c106="" class="highlight-div"><div _ngcontent-kuo-c106="" class="highlight-div-header"><div _ngcontent-kuo-c106="" class="highlight-div-header-left"><div _ngcontent-kuo-c106="" class="handle-button expand-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kuo-c106="" class="highlight-div-header-right"><div _ngcontent-kuo-c106="" class="handle-button ai-button"></div><div _ngcontent-kuo-c106="" class="handle-button line-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kuo-c106="" class="handle-button theme-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kuo-c106="" class="handle-button copy-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kuo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletTransitCard } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">transitCardClient</span>: walletTransitCard.<span class="hljs-property">TransitCardClient</span> = <span class="hljs-keyword">new</span> walletTransitCard.<span class="hljs-title class_">TransitCardClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, <span class="hljs-string">'callerId'</span>);</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">canAddTransitCard</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// the issuerId returned by the getCardMetadataInDevice interface</span></li><li>    <span class="hljs-keyword">const</span> issuerId = <span class="hljs-string">'issuerId'</span>;</li><li>    <span class="hljs-comment">// the specifiedDeviceId returned by the getCardMetadataInDevice interface</span></li><li>    <span class="hljs-keyword">const</span> specifiedDeviceId = <span class="hljs-string">'specifiedDeviceId'</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">transitCardClient</span>.<span class="hljs-title function_">canAddTransitCard</span>(issuerId, specifiedDeviceId).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in canning AddTransitCard`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to can AddTransitCard, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h3 id="section23898045414" device-type="phone">setupWalletEnvironment<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section23898045414" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>setupWalletEnvironment(): Promise&lt;void&gt;</p> <p>设置Wallet应用程序的environment。当开发者从另一个api得到1010200003错误代码时，你应该调用这个api来设置Wallet应用。</p> <p>使用Promise异步回调。</p> <p>不支持多线程调用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="26.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="73.53%"><p><strong>说明</strong></p> </th> </tr><tr><td class="cellrowborder" width="26.47%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="73.53%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.13.1.3.1.1" width="26.540000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.13.1.3.1.2" width="73.46000000000001%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200002</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Wallet app not found.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200013</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Operation failed because of an internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200014</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The Wallet APIs can be called by the device owner only.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200011</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Failed to initialize the environment.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200017</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The Wallet app was closed by the user.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kuo-c106="" class="highlight-div"><div _ngcontent-kuo-c106="" class="highlight-div-header"><div _ngcontent-kuo-c106="" class="highlight-div-header-left"><div _ngcontent-kuo-c106="" class="handle-button expand-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kuo-c106="" class="highlight-div-header-right"><div _ngcontent-kuo-c106="" class="handle-button ai-button"></div><div _ngcontent-kuo-c106="" class="handle-button line-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kuo-c106="" class="handle-button theme-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kuo-c106="" class="handle-button copy-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kuo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletTransitCard } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">transitCardClient</span>: walletTransitCard.<span class="hljs-property">TransitCardClient</span> = <span class="hljs-keyword">new</span> walletTransitCard.<span class="hljs-title class_">TransitCardClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, <span class="hljs-string">'callerId'</span>);</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">setupWalletEnvironment</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">transitCardClient</span>.<span class="hljs-title function_">setupWalletEnvironment</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting up WalletEnvironment`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to setup WalletEnvironment, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h3 id="section1973893821320" device-type="phone">addTransitCard<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1973893821320" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>addTransitCard(addCardOpaqueData: string, serverOrderId: string): Promise&lt;CardMetadata&gt;</p> <p>将指定的卡添加到钱包中，并返回CardMetadata。</p> <p>使用Promise异步回调。</p> <p>不支持多线程调用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.9.2.1.5.1.1" width="19.93%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.9.2.1.5.1.2" width="16.07%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.9.2.1.5.1.3" width="14.000000000000002%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.9.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.93%"><p>addCardOpaqueData</p> </td> <td class="cellrowborder" width="16.07%"><p>string</p> </td> <td class="cellrowborder" width="14.000000000000002%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>开卡令牌，要求使用<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section842743618139">canAddTransitCard</a>接口返回的字符串。</p> </td> </tr> <tr><td class="cellrowborder" width="19.93%"><p>serverOrderId</p> </td> <td class="cellrowborder" width="16.07%"><p>string</p> </td> <td class="cellrowborder" width="14.000000000000002%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>开卡订单ID，要求是加卡业务在服务商后台服务器上生成的订单ID。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.1" width="26.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.2" width="73.53%"><p><strong>说明</strong></p> </th> </tr><tr><td class="cellrowborder" width="26.47%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section16396135219146">CardMetadata</a>&gt;</p> </td> <td class="cellrowborder" width="73.53%"><p>Promise对象，返回添加的卡片数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.14.1.3.1.1" width="26.540000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.14.1.3.1.2" width="73.46000000000001%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="26.540000000000003%"><p>401</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Parameter error. Possible causes: Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200001</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>No permission to access the Wallet APIs.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200010</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200013</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Operation failed because of an internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200014</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The Wallet APIs can be called by the device owner only.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210301</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The card adding conditions are not met. The order can be refunded to end the card addition process.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200016</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>This card is not available for the current country or region.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200017</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The Wallet app was closed by the user.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210319</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Failed to add the card.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210302</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Failed to confirm the order. The order can be refunded to end the card addition process.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kuo-c106="" class="highlight-div"><div _ngcontent-kuo-c106="" class="highlight-div-header"><div _ngcontent-kuo-c106="" class="highlight-div-header-left"><div _ngcontent-kuo-c106="" class="handle-button expand-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kuo-c106="" class="highlight-div-header-right"><div _ngcontent-kuo-c106="" class="handle-button ai-button"></div><div _ngcontent-kuo-c106="" class="handle-button line-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kuo-c106="" class="handle-button theme-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kuo-c106="" class="handle-button copy-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kuo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletTransitCard } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">transitCardClient</span>: walletTransitCard.<span class="hljs-property">TransitCardClient</span> = <span class="hljs-keyword">new</span> walletTransitCard.<span class="hljs-title class_">TransitCardClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, <span class="hljs-string">'callerId'</span>);</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">addTransitCard</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// order ID generated after payment in a developer's app, which is implemented by the developer</span></li><li>    <span class="hljs-keyword">let</span> serverOrderId = <span class="hljs-string">'serverOrderId'</span>;</li><li>    <span class="hljs-comment">// the addCardOpaqueData returned by the canAddTransitCard interface</span></li><li>    <span class="hljs-keyword">let</span> addCardOpaqueData = <span class="hljs-string">'addCardOpaqueData'</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">transitCardClient</span>.<span class="hljs-title function_">addTransitCard</span>(addCardOpaqueData, serverOrderId).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in adding TransitCard`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to add TransitCard, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h3 id="section17143122485417" device-type="phone">rechargeTransitCard<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17143122485417" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>rechargeTransitCard(logicalCardNumber: string, specifiedDeviceId: string, serverOrderId: string): Promise&lt;number&gt;</p> <p>交通卡充值接口，根据支付订单号serverOrderId为指定的logicalCardNumber交通卡进行充值，充值完成后返回当前余额。</p> <p>使用Promise异步回调。</p> <p>不支持多线程调用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.9.2.1.5.1.1" width="20.810000000000002%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.9.2.1.5.1.2" width="11.05%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.9.2.1.5.1.3" width="8.62%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.9.2.1.5.1.4" width="59.519999999999996%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20.810000000000002%"><p>logicalCardNumber</p> </td> <td class="cellrowborder" width="11.05%"><p>string</p> </td> <td class="cellrowborder" width="8.62%"><p>是</p> </td> <td class="cellrowborder" width="59.519999999999996%"><p>卡的序列号，要求使用<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section3931434195115">getCardMetadataInDevice</a>返回的<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section691675771410">CardMetadataInDevice</a>中的<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section16396135219146">CardMetadata</a>对应的logicalCardNumber。</p> </td> </tr> <tr><td class="cellrowborder" width="20.810000000000002%"><p>specifiedDeviceId</p> </td> <td class="cellrowborder" width="11.05%"><p>string</p> </td> <td class="cellrowborder" width="8.62%"><p>是</p> </td> <td class="cellrowborder" width="59.519999999999996%"><p>存在该卡的设备的ID，要求使用<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section3931434195115">getCardMetadataInDevice</a>返回的<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section691675771410">CardMetadataInDevice</a>对应的deviceId。</p> </td> </tr> <tr><td class="cellrowborder" width="20.810000000000002%"><p>serverOrderId</p> </td> <td class="cellrowborder" width="11.05%"><p>string</p> </td> <td class="cellrowborder" width="8.62%"><p>是</p> </td> <td class="cellrowborder" width="59.519999999999996%"><p>卡充值订单ID，要求是余额充值业务在服务商后台服务器上生成的订单ID。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.1" width="26.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.2" width="73.53%"><p><strong>说明</strong></p> </th> </tr><tr><td class="cellrowborder" width="26.47%"><p>Promise&lt;number&gt;</p> </td> <td class="cellrowborder" width="73.53%"><p>Promise对象，返回新的交通卡余额。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.14.1.3.1.1" width="26.540000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.14.1.3.1.2" width="73.46000000000001%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="26.540000000000003%"><p>401</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Parameter error. Possible causes: Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200001</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>No permission to access the Wallet APIs.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200002</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Wallet app not found.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200003</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The environment of the wallet is not ready.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200006</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The device's remote paired watch cannot be connected.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200010</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200013</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Operation failed because of an internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210401</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The specified card does not exist.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210402</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The status of the specified card is incorrect.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210419</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Failed to recharge the card.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200014</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The Wallet APIs can be called by the device owner only.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210403</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Failed to confirm the order. The order can be refunded to end the recharging process.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kuo-c106="" class="highlight-div"><div _ngcontent-kuo-c106="" class="highlight-div-header"><div _ngcontent-kuo-c106="" class="highlight-div-header-left"><div _ngcontent-kuo-c106="" class="handle-button expand-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kuo-c106="" class="highlight-div-header-right"><div _ngcontent-kuo-c106="" class="handle-button ai-button"></div><div _ngcontent-kuo-c106="" class="handle-button line-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kuo-c106="" class="handle-button theme-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kuo-c106="" class="handle-button copy-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kuo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletTransitCard } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">transitCardClient</span>: walletTransitCard.<span class="hljs-property">TransitCardClient</span> = <span class="hljs-keyword">new</span> walletTransitCard.<span class="hljs-title class_">TransitCardClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, <span class="hljs-string">'callerId'</span>);</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">rechargeTransitCard</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// number of the enabled traffic card returned by the getCardMetadataInDevice interface</span></li><li>    <span class="hljs-keyword">const</span> logicalCardNumber = <span class="hljs-string">'logicalCardNumber'</span>;</li><li>    <span class="hljs-comment">// the specifiedDeviceId returned by the getCardMetadataInDevice interface</span></li><li>    <span class="hljs-keyword">const</span> specifiedDeviceId = <span class="hljs-string">'specifiedDeviceId'</span>;</li><li>    <span class="hljs-comment">// order ID generated after payment in a developer's app, which is implemented by the developer</span></li><li>    <span class="hljs-keyword">const</span> serverOrderId = <span class="hljs-string">'serverOrderId'</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">transitCardClient</span>.<span class="hljs-title function_">rechargeTransitCard</span>(logicalCardNumber, specifiedDeviceId, serverOrderId).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in recharging TransitCard`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to recharge TransitCard, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h3 id="section8973172765418" device-type="phone">updateTransitCard<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section8973172765418" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>updateTransitCard(logicalCardNumber: string, specifiedDeviceId: string, serverOrderId: string): Promise&lt;void&gt;</p> <p>更新交通卡信息，根据支付订单号serverOrderId为指定的logicalCardNumber交通卡进行数据更新。</p> <p>使用Promise异步回调。</p> <p>不支持多线程调用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.9.2.1.5.1.1" width="18%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.9.2.1.5.1.2" width="18%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.9.2.1.5.1.3" width="14.000000000000002%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.9.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="18%"><p>logicalCardNumber</p> </td> <td class="cellrowborder" width="18%"><p>string</p> </td> <td class="cellrowborder" width="14.000000000000002%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>指定卡的卡号，要求使用<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section3931434195115">getCardMetadataInDevice</a>返回的<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section691675771410">CardMetadataInDevice</a>中的<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section16396135219146">CardMetadata</a>对应的logicalCardNumber。</p> </td> </tr> <tr><td class="cellrowborder" width="18%"><p>specifiedDeviceId</p> </td> <td class="cellrowborder" width="18%"><p>string</p> </td> <td class="cellrowborder" width="14.000000000000002%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>卡所在的设备ID，要求使用<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section3931434195115">getCardMetadataInDevice</a>返回的<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section691675771410">CardMetadataInDevice</a>对应的deviceId。</p> </td> </tr> <tr><td class="cellrowborder" width="18%"><p>serverOrderId</p> </td> <td class="cellrowborder" width="18%"><p>string</p> </td> <td class="cellrowborder" width="14.000000000000002%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>更新卡信息订单ID，要求是卡数据更新服务在服务提供商后台服务器上生成的订单ID。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.1" width="26.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.2" width="73.53%"><p><strong>说明</strong></p> </th> </tr><tr><td class="cellrowborder" width="26.47%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="73.53%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.14.1.3.1.1" width="26.540000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.14.1.3.1.2" width="73.46000000000001%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="26.540000000000003%"><p>401</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Parameter error. Possible causes: Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200001</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>No permission to access the Wallet APIs.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200002</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Wallet app not found.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200003</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The environment of the wallet is not ready.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200006</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The device's remote paired watch cannot be connected.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200010</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200013</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Operation failed because of an internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210501</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The specified card does not exist.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210502</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The status of the specified card is incorrect.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210503</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Failed to confirm the order.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210519</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Failed to update the card data.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200014</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The Wallet APIs can be called by the device owner only.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kuo-c106="" class="highlight-div"><div _ngcontent-kuo-c106="" class="highlight-div-header"><div _ngcontent-kuo-c106="" class="highlight-div-header-left"><div _ngcontent-kuo-c106="" class="handle-button expand-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kuo-c106="" class="highlight-div-header-right"><div _ngcontent-kuo-c106="" class="handle-button ai-button"></div><div _ngcontent-kuo-c106="" class="handle-button line-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kuo-c106="" class="handle-button theme-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kuo-c106="" class="handle-button copy-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kuo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletTransitCard } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">transitCardClient</span>: walletTransitCard.<span class="hljs-property">TransitCardClient</span> = <span class="hljs-keyword">new</span> walletTransitCard.<span class="hljs-title class_">TransitCardClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, <span class="hljs-string">'callerId'</span>);</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">updateTransitCard</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// number of the enabled traffic card returned by the getCardMetadataInDevice interface</span></li><li>    <span class="hljs-keyword">const</span> logicalCardNumber = <span class="hljs-string">'logicalCardNumber'</span>;</li><li>    <span class="hljs-comment">// the specifiedDeviceId returned by the getCardMetadataInDevice interface</span></li><li>    <span class="hljs-keyword">const</span> specifiedDeviceId = <span class="hljs-string">'specifiedDeviceId'</span>;</li><li>    <span class="hljs-comment">// order ID generated after payment in a developer's app, which is implemented by the developer</span></li><li>    <span class="hljs-keyword">const</span> serverOrderId = <span class="hljs-string">'serverOrderId'</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">transitCardClient</span>.<span class="hljs-title function_">updateTransitCard</span>(logicalCardNumber, specifiedDeviceId, serverOrderId).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in updating TransitCard`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to update TransitCard, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h3 id="section12742829145411" device-type="phone">deleteTransitCard<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12742829145411" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>deleteTransitCard(logicalCardNumber: string, specifiedDeviceId: string, serverOrderId: string): Promise&lt;void&gt;</p> <p>删除交通卡，根据支付订单号serverOrderId为指定的logicalCardNumber交通卡进行删卡。</p> <p>使用Promise异步回调。</p> <p>不支持多线程调用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.26.9.2.1.5.1.1" width="18%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.9.2.1.5.1.2" width="18%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.9.2.1.5.1.3" width="14.000000000000002%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.9.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="18%"><p>logicalCardNumber</p> </td> <td class="cellrowborder" width="18%"><p>string</p> </td> <td class="cellrowborder" width="14.000000000000002%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>指定卡的卡号，要求使用<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section3931434195115">getCardMetadataInDevice</a>返回的<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section691675771410">CardMetadataInDevice</a>中的<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section16396135219146">CardMetadata</a>对应的logicalCardNumber。</p> </td> </tr> <tr><td class="cellrowborder" width="18%"><p>specifiedDeviceId</p> </td> <td class="cellrowborder" width="18%"><p>string</p> </td> <td class="cellrowborder" width="14.000000000000002%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>卡所在的设备ID，要求使用<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section3931434195115">getCardMetadataInDevice</a>返回的<a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section691675771410">CardMetadataInDevice</a>对应的deviceId。</p> </td> </tr> <tr><td class="cellrowborder" width="18%"><p>serverOrderId</p> </td> <td class="cellrowborder" width="18%"><p>string</p> </td> <td class="cellrowborder" width="14.000000000000002%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>删卡订单id，要求是服务提供商的后端服务器上为删卡业务生成的订单id。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.11.1.3.1.1" width="26.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.11.1.3.1.2" width="73.53%"><p><strong>说明</strong></p> </th> </tr><tr><td class="cellrowborder" width="26.47%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="73.53%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-error-code">ArkTS API错误码</a></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.14.1.3.1.1" width="26.540000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.14.1.3.1.2" width="73.46000000000001%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="26.540000000000003%"><p>401</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Parameter error. Possible causes: Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200001</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>No permission to access the Wallet APIs.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200002</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Wallet app not found.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200003</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The environment of the wallet is not ready.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200006</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The device's remote paired watch cannot be connected.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200010</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200013</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Operation failed because of an internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210619</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Failed to delete the card.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010200014</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>The Wallet APIs can be called by the device owner only.</p> </td> </tr> <tr><td class="cellrowborder" width="26.540000000000003%"><p>1010210601</p> </td> <td class="cellrowborder" width="73.46000000000001%"><p>Failed to confirm the order.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kuo-c106="" class="highlight-div"><div _ngcontent-kuo-c106="" class="highlight-div-header"><div _ngcontent-kuo-c106="" class="highlight-div-header-left"><div _ngcontent-kuo-c106="" class="handle-button expand-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kuo-c106="" class="highlight-div-header-right"><div _ngcontent-kuo-c106="" class="handle-button ai-button"></div><div _ngcontent-kuo-c106="" class="handle-button line-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kuo-c106="" class="handle-button theme-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kuo-c106="" class="handle-button copy-button"><div _ngcontent-kuo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kuo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { walletTransitCard } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WalletKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">transitCardClient</span>: walletTransitCard.<span class="hljs-property">TransitCardClient</span> = <span class="hljs-keyword">new</span> walletTransitCard.<span class="hljs-title class_">TransitCardClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, <span class="hljs-string">'callerId'</span>);</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">deleteTransitCard</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// number of the enabled traffic card returned by the getCardMetadataInDevice interface</span></li><li>    <span class="hljs-keyword">const</span> logicalCardNumber = <span class="hljs-string">'logicalCardNumber'</span>;</li><li>    <span class="hljs-comment">// the specifiedDeviceId returned by the getCardMetadataInDevice interface</span></li><li>    <span class="hljs-keyword">const</span> specifiedDeviceId = <span class="hljs-string">'specifiedDeviceId'</span>;</li><li>    <span class="hljs-comment">// order ID generated after payment in a developer's app, which is implemented by the developer</span></li><li>    <span class="hljs-keyword">const</span> serverOrderId = <span class="hljs-string">'serverOrderId'</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">transitCardClient</span>.<span class="hljs-title function_">deleteTransitCard</span>(logicalCardNumber, specifiedDeviceId, serverOrderId).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in deleting TransitCard`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete TransitCard, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// your application UI</span></li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section16396135219146" device-type="phone">CardMetadata<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16396135219146" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>描述卡的元数据信息。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.27.6.1.6.1.1" width="21.592159215921594%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.6.1.2" width="13.62136213621362%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.6.1.3" width="6.950695069506951%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.6.1.4" width="7.520752075207521%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.6.1.5" width="50.31503150315031%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.592159215921594%"><p>issuerId</p> </td> <td class="cellrowborder" width="13.62136213621362%"><p>string</p> </td> <td class="cellrowborder" width="6.950695069506951%"><p>否</p> </td> <td class="cellrowborder" width="7.520752075207521%"><p>否</p> </td> <td class="cellrowborder" width="50.31503150315031%"><p>交通卡产品的id</p> </td> </tr> <tr><td class="cellrowborder" width="21.592159215921594%"><p>aid</p> </td> <td class="cellrowborder" width="13.62136213621362%"><p>string</p> </td> <td class="cellrowborder" width="6.950695069506951%"><p>否</p> </td> <td class="cellrowborder" width="7.520752075207521%"><p>否</p> </td> <td class="cellrowborder" width="50.31503150315031%"><p>SE芯片中卡的小程序应用程序ID。</p> </td> </tr> <tr><td class="cellrowborder" width="21.592159215921594%"><p>logicalCardNumber</p> </td> <td class="cellrowborder" width="13.62136213621362%"><p>string</p> </td> <td class="cellrowborder" width="6.950695069506951%"><p>否</p> </td> <td class="cellrowborder" width="7.520752075207521%"><p>是</p> </td> <td class="cellrowborder" width="50.31503150315031%"><p>卡的序列号。仅当设备中存在转接卡时会存在。</p> </td> </tr> <tr><td class="cellrowborder" width="21.592159215921594%"><p>cardNumber</p> </td> <td class="cellrowborder" width="13.62136213621362%"><p>string</p> </td> <td class="cellrowborder" width="6.950695069506951%"><p>否</p> </td> <td class="cellrowborder" width="7.520752075207521%"><p>是</p> </td> <td class="cellrowborder" width="50.31503150315031%"><p>显示卡号（30个字符以内），如果该卡存在于设备中则会返回</p> </td> </tr> <tr><td class="cellrowborder" width="21.592159215921594%"><p>balance</p> </td> <td class="cellrowborder" width="13.62136213621362%"><p>number</p> </td> <td class="cellrowborder" width="6.950695069506951%"><p>否</p> </td> <td class="cellrowborder" width="7.520752075207521%"><p>是</p> </td> <td class="cellrowborder" width="50.31503150315031%"><p>卡的余额（如果设备中存在卡）</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section691675771410" device-type="phone">CardMetadataInDevice<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section691675771410" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>设备的接口和设备支持的卡元数据。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.28.6.1.6.1.1" width="20.122012201220123%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.6.1.2" width="19.951995199519953%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.6.1.3" width="9.04090409040904%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.6.1.4" width="7.770777077707772%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.6.1.5" width="43.11431143114311%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20.122012201220123%"><p>deviceId</p> </td> <td class="cellrowborder" width="19.951995199519953%"><p>string</p> </td> <td class="cellrowborder" width="9.04090409040904%"><p>否</p> </td> <td class="cellrowborder" width="7.770777077707772%"><p>否</p> </td> <td class="cellrowborder" width="43.11431143114311%"><p>设备ID，开发者使用。</p> </td> </tr> <tr><td class="cellrowborder" width="20.122012201220123%"><p>deviceType</p> </td> <td class="cellrowborder" width="19.951995199519953%"><p><a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section423812461512">DeviceType</a></p> </td> <td class="cellrowborder" width="9.04090409040904%"><p>否</p> </td> <td class="cellrowborder" width="7.770777077707772%"><p>否</p> </td> <td class="cellrowborder" width="43.11431143114311%"><p>设备的类型</p> </td> </tr> <tr><td class="cellrowborder" width="20.122012201220123%"><p>displayName</p> </td> <td class="cellrowborder" width="19.951995199519953%"><p>string</p> </td> <td class="cellrowborder" width="9.04090409040904%"><p>否</p> </td> <td class="cellrowborder" width="7.770777077707772%"><p>否</p> </td> <td class="cellrowborder" width="43.11431143114311%"><p>要显示的设备名称</p> </td> </tr> <tr><td class="cellrowborder" width="20.122012201220123%"><p>cardMetadata</p> </td> <td class="cellrowborder" width="19.951995199519953%"><p><a href="/consumer/cn/doc/harmonyos-references/wallet-wallettransitcard#section16396135219146">CardMetadata</a>[]</p> </td> <td class="cellrowborder" width="9.04090409040904%"><p>否</p> </td> <td class="cellrowborder" width="7.770777077707772%"><p>否</p> </td> <td class="cellrowborder" width="43.11431143114311%"><p>设备支持的卡的数据。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1175310561152" device-type="phone">TransitCardInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1175310561152" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>交通卡信息。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.29.6.1.6.1.1" width="20.122012201220123%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.6.1.2" width="15.091509150915092%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.6.1.3" width="6.950695069506951%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.6.1.4" width="7.520752075207521%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.6.1.5" width="50.31503150315031%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20.122012201220123%"><p>cardNumber</p> </td> <td class="cellrowborder" width="15.091509150915092%"><p>string</p> </td> <td class="cellrowborder" width="6.950695069506951%"><p>否</p> </td> <td class="cellrowborder" width="7.520752075207521%"><p>否</p> </td> <td class="cellrowborder" width="50.31503150315031%"><p>显示卡号</p> </td> </tr> <tr><td class="cellrowborder" width="20.122012201220123%"><p>customCardData</p> </td> <td class="cellrowborder" width="15.091509150915092%"><p>string</p> </td> <td class="cellrowborder" width="6.950695069506951%"><p>否</p> </td> <td class="cellrowborder" width="7.520752075207521%"><p>是</p> </td> <td class="cellrowborder" width="50.31503150315031%"><p>服务提供商的自定义卡数据。json数据结构如下。</p> <ul><li>balance：卡余额，单位分。</li><li>expireDate：卡片过期时间。</li><li>metroStatus：地铁刷卡进出站状态，其他交通卡不涉及。<ul><li>1：已进站</li><li>2：已出站</li><li>3：未知</li></ul> </li><li>records：交易记录，包括充值和消费两种类型。records包括以下字段。<ul><li>type：记录类型 。1：充值 ；2：消费</li><li>amount：交易金额。单位：分。</li><li>transDate：交易时间。</li><li>transactionNo：交易序号。</li></ul> </li></ul> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section423812461512" device-type="phone">DeviceType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section423812461512" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>设备类型的枚举。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Payment.Wallet</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.30.6.1.4.1.1" width="23.53%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.4.1.2" width="17.65%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.4.1.3" width="58.81999999999999%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.53%"><p>DEVICE_PHONE</p> </td> <td class="cellrowborder" width="17.65%"><p>0</p> </td> <td class="cellrowborder" width="58.81999999999999%"><p>手机设备类型</p> </td> </tr> <tr><td class="cellrowborder" width="23.53%"><p>DEVICE_WATCH</p> </td> <td class="cellrowborder" width="17.65%"><p>1</p> </td> <td class="cellrowborder" width="58.81999999999999%"><p>穿戴手表设备类型</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>