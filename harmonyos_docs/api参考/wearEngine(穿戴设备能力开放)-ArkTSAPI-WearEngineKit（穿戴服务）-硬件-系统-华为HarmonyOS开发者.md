<h1 _ngcontent-ehr-c119="" class="doc-title ng-star-inserted" title="wearEngine(穿戴设备能力开放)"> wearEngine(穿戴设备能力开放) </h1>

<div _ngcontent-ehr-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>本模块提供手机与穿戴设备侧的交互能力。应用可调用模块内接口实现如下功能：</p>    <ul>     <li>获取与当前设备已连接配对的设备列表、与对端设备互通消息互送文件等。</li>     <li>查询穿戴设备状态、向穿戴设备发送模板化通知、接收穿戴设备传感器的相关数据等。</li>    </ul>    <p><strong>起始版本</strong>：5.0.0(12)</p>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="section18371194515449" device-type="phone,tablet,wearable">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section18371194515449" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 1426px;">     <h2 id="section17606835182712" device-type="phone,tablet,wearable">wearEngine.getAuthClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17606835182712" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getAuthClient(context: common.Context): AuthClient</p>     <p>用于获取权限管理的客户端。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>context</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>Context上下文，仅支持包含connectServiceExtensionAbility方法的Context（例：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#uiabilitycontext-1" target="_blank">UIAbilityContext</a>）。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section876918413377">AuthClient</a></p></td>         <td class="cellrowborder" width="50%">          <p>权限管理客户端，存储了权限模块的相关方法。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.14.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.14.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section5941173162512">801</a></p></td>         <td class="cellrowborder" width="50%">          <p>Capability not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">authClient</span>: wearEngine.<span class="hljs-property">AuthClient</span> = wearEngine.<span class="hljs-title function_">getAuthClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting auth client`</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 326px;">     <h2 id="section876918413377" device-type="phone,tablet,wearable">AuthClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section876918413377" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>权限管理客户端类，由<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section17606835182712">wearEngine.getAuthClient</a>返回得到。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 1893px;">     <h3 id="section172541457203810" device-type="phone,tablet,wearable" class="firsth2">requestAuthorization<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section172541457203810" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>requestAuthorization(request: AuthorizationRequest): Promise&lt;AuthorizationResponse&gt;</p>     <p>向手机用户申请需要授权的权限，返回申请的权限中用户已授权的权限，使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.3" width="17.9%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.4" width="32.1%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>request</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section12513135291215">AuthorizationRequest</a></p></td>         <td class="cellrowborder" width="17.9%">          <p>是</p></td>         <td class="cellrowborder" width="32.1%">          <p>权限请求类。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1536013509131">AuthorizationResponse</a>&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回权限响应类。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.14.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.14.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>         <td class="cellrowborder" width="50%">          <p>Network error. The network is unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>         <td class="cellrowborder" width="50%">          <p>App has not applied for the Wear Engine service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>         <td class="cellrowborder" width="50%">          <p>User privacy is not agreed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>         <td class="cellrowborder" width="50%">          <p>The device capability is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. The user has not logged in with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">authClient</span>: wearEngine.<span class="hljs-property">AuthClient</span> = wearEngine.<span class="hljs-title function_">getAuthClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">request</span>: wearEngine.<span class="hljs-property">AuthorizationRequest</span> = {</li><li>  <span class="hljs-attr">permissions</span>: [wearEngine.<span class="hljs-property">Permission</span>.<span class="hljs-property">USER_STATUS</span>]</li><li>}</li><li>
</li><li>authClient.<span class="hljs-title function_">requestAuthorization</span>(request).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in requesting authorize, authorized permissions is <span class="hljs-subst">${result.permissions}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request authorize. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1559px;">     <h3 id="section36125238476" device-type="phone,tablet,wearable">getAuthorization<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section36125238476" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getAuthorization(): Promise&lt;AuthorizationResponse&gt;</p>     <p>获取用户已授权的权限，使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1536013509131">AuthorizationResponse</a>&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回权限响应类。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>         <td class="cellrowborder" width="50%">          <p>Network error. The network is unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>         <td class="cellrowborder" width="50%">          <p>App has not applied for the Wear Engine service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>         <td class="cellrowborder" width="50%">          <p>User privacy is not agreed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>         <td class="cellrowborder" width="50%">          <p>The device capability is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. The user has not logged in with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">authClient</span>: wearEngine.<span class="hljs-property">AuthClient</span> = wearEngine.<span class="hljs-title function_">getAuthClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li>
</li><li>authClient.<span class="hljs-title function_">getAuthorization</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting authorized permissions, authorized permissions is <span class="hljs-subst">${result.permissions}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get authorized permissions. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="section3936113217535" device-type="phone,tablet,wearable">AuthorizationBase<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3936113217535" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>权限控制模块输入输出的基类。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>    </div>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.6.1.1" width="27.52%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.6.1.2" width="17.03%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.6.1.3" width="9.4%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.6.1.4" width="10.92%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.6.1.5" width="35.13%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="27.52%">         <p>permissions</p></td>        <td class="cellrowborder" width="17.03%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section09971113566">Permission</a>[]</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>否</p></td>        <td class="cellrowborder" width="35.13%">         <p>权限枚举类型的数组。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 612px;">     <h2 id="section09971113566" device-type="phone,tablet,wearable">Permission<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section09971113566" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>权限枚举类型。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.4.1.1" width="25.61256125612561%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.4.1.2" width="29.212921292129213%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.4.1.3" width="45.174517451745174%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>USER_STATUS</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>2</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>获取用户状态权限。如：穿戴设备的佩戴状态。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>MOTION_SENSOR</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>3</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>获取对端设备运动传感器数据权限。如：加速度传感器数据。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>HEALTH_SENSOR</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>4</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>获取对端设备人体传感器数据权限。如：心率传感器数据。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>DEVICE_IDENTIFIER</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>6</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>获取已连接穿戴设备的序列号。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="section12513135291215" device-type="phone,tablet,wearable">AuthorizationRequest<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12513135291215" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>权限请求类，继承自<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section3936113217535">AuthorizationBase</a>。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="section1536013509131" device-type="phone,tablet,wearable">AuthorizationResponse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1536013509131" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>权限响应类，继承自<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section3936113217535">AuthorizationBase</a>。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1323px;">     <h2 id="section1892394201117" device-type="phone,tablet,wearable">wearEngine.getDeviceClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1892394201117" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getDeviceClient(context: common.Context): DeviceClient</p>     <p>用于获取Device模块的客户端。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>context</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>Context上下文，仅支持包含connectServiceExtensionAbility方法的Context（例：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#uiabilitycontext-1" target="_blank">UIAbilityContext</a>）。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section126321419369">DeviceClient</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device客户端，存储了Device模块的相关方法。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting device client.`</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="section126321419369" device-type="phone,tablet,wearable">DeviceClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section126321419369" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>Device客户端类。由接口<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1892394201117">wearEngine.getDeviceClient</a>返回得到。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1416px;">     <h3 id="section1828213119411" device-type="phone,tablet,wearable" class="firsth2">getConnectedDevices<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1828213119411" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getConnectedDevices(): Promise&lt;Device[]&gt;</p>     <p>获取当前已连接且支持wearEngine能力集的设备。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>[]&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回设备列表。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>         <td class="cellrowborder" width="50%">          <p>Network error. The network is unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>         <td class="cellrowborder" width="50%">          <p>App has not applied for the Wear Engine service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>         <td class="cellrowborder" width="50%">          <p>User privacy is not agreed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. The user has not logged in with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li>deviceClient.<span class="hljs-title function_">getConnectedDevices</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">devices</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting devices, devices number is <span class="hljs-subst">${devices.length}</span>.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get devices. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="section385118379447" device-type="phone,tablet,wearable">Device<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section385118379447" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>穿戴设备信息类。由接口<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1828213119411">getConnectedDevices</a>返回。</p>    </div>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tiledSection" style="contain-intrinsic-size: auto 122px;">     <h3 id="section13306153733219" device-type="phone,tablet,wearable" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13306153733219" tips="复制节点链接"></i></h3>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.22.1.6.1.1" width="27.52%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.22.1.6.1.2" width="17.03%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.22.1.6.1.3" width="9.4%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.22.1.6.1.4" width="10.92%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.22.1.6.1.5" width="35.13%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="27.52%">         <p>randomId</p></td>        <td class="cellrowborder" width="17.03%">         <p>string</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>否</p></td>        <td class="cellrowborder" width="35.13%">         <p>设备随机唯一标识符，每次绑定自动生成。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>category</p></td>        <td class="cellrowborder" width="17.03%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section145591125155713">DeviceCategory</a></p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>是</p></td>        <td class="cellrowborder" width="35.13%">         <p>设备类型。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>name</p></td>        <td class="cellrowborder" width="17.03%">         <p>string</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>是</p></td>        <td class="cellrowborder" width="35.13%">         <p>设备名称。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>softwareVersion</p></td>        <td class="cellrowborder" width="17.03%">         <p>string</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>是</p></td>        <td class="cellrowborder" width="35.13%">         <p>设备软件版本号。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>model</p></td>        <td class="cellrowborder" width="17.03%">         <p>string</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>是</p></td>        <td class="cellrowborder" width="35.13%">         <p>设备型号。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>isSmartWatch</p></td>        <td class="cellrowborder" width="17.03%">         <p>boolean</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>是</p></td>        <td class="cellrowborder" width="35.13%">         <p>设备是否为智能表。true：是，false：不是。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>osCategory</p></td>        <td class="cellrowborder" width="17.03%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section8322015161010">OsCategory</a></p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>是</p></td>        <td class="cellrowborder" width="35.13%">         <p>设备的操作系统类别。</p>         <p><strong>起始版本：</strong>5.1.0(18)</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 174px;">     <h3 id="section116382923217" device-type="phone,tablet,wearable">isWearEngineCapabilitySupported<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section116382923217" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>isWearEngineCapabilitySupported(capability: WearEngineCapability): Promise&lt;boolean&gt;</p>    </div>    <p>通过<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1828213119411">getConnectedDevices</a>接口获取到已连接的穿戴设备后，查询设备是否支持指定的<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1639211301479">WearEngineCapability</a>，使用Promise异步回调。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>参数：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.30.1.5.1.1" width="25%">         <p>参数名</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.30.1.5.1.2" width="25%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.30.1.5.1.3" width="17.9%">         <p>必填</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.30.1.5.1.4" width="32.1%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25%">         <p>capability</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1639211301479">WearEngineCapability</a></p></td>        <td class="cellrowborder" width="17.9%">         <p>是</p></td>        <td class="cellrowborder" width="32.1%">         <p>指定的WearEngine能力。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.32.1.3.1.1" width="50%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.32.1.3.1.2" width="50%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p>Promise&lt;boolean&gt;</p></td>        <td class="cellrowborder" width="50%">         <p>Promise对象，返回是否支持指定能力的查询结果。</p>         <p>true：支持，false：不支持。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.35.1.3.1.1" width="50%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.35.1.3.1.2" width="50%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>        <td class="cellrowborder" width="50%">         <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section5941173162512">801</a></p></td>        <td class="cellrowborder" width="50%">         <p>Capability not supported.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>        <td class="cellrowborder" width="50%">         <p>Network error. The network is unavailable.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>        <td class="cellrowborder" width="50%">         <p>No device is bound.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device disconnected<span style="color: rgb(128,128,128);">.</span></p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>        <td class="cellrowborder" width="50%">         <p>App has not applied for the Wear Engine service.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>        <td class="cellrowborder" width="50%">         <p>User privacy is not agreed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. The user has not logged in with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>        <td class="cellrowborder" width="50%">         <p>Internal error.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">devices</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li><span class="hljs-keyword">if</span> (devices.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>  <span class="hljs-comment">// 从得到的设备列表中选取目标设备，并定义为device(假设数组中存在已连接设备且第一位即为目标设备)</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">device</span>: wearEngine.<span class="hljs-property">Device</span> = devices[<span class="hljs-number">0</span>];</li><li>
</li><li>  device.<span class="hljs-title function_">isWearEngineCapabilitySupported</span>(wearEngine.<span class="hljs-property">WearEngineCapability</span>.<span class="hljs-property">P2P_COMMUNICATION</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">isSupportP2P</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in checking p2p capability, result is <span class="hljs-subst">${isSupportP2P}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to check p2p capability. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2091px;">     <h3 id="section196921253123213" device-type="phone,tablet,wearable">isDeviceCapabilitySupported<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section196921253123213" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>isDeviceCapabilitySupported(capability: DeviceCapability): Promise&lt;boolean&gt;</p>     <p>通过<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1828213119411">getConnectedDevices</a>接口获取到已连接的穿戴设备后，查询设备是否支持指定的<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section0965105510366">DeviceCapability</a>，使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>capability</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section0965105510366">DeviceCapability</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>指定的Device能力。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;boolean&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回是否支持指定能力的查询结果。</p>          <p>true：支持，false：不支持。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.14.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.38.14.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section5941173162512">801</a></p></td>         <td class="cellrowborder" width="50%">          <p>Capability not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>         <td class="cellrowborder" width="50%">          <p>Network error. The network is unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>         <td class="cellrowborder" width="50%">          <p>No device is bound.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device disconnected<span style="color: rgb(128,128,128);">.</span></p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>         <td class="cellrowborder" width="50%">          <p>App has not applied for the Wear Engine service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>         <td class="cellrowborder" width="50%">          <p>User privacy is not agreed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. The user has not logged in with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">devices</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li><span class="hljs-keyword">if</span> (devices.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>  <span class="hljs-comment">// 从得到的设备列表中选取目标设备，并定义为device(假设数组中存在已连接设备且第一位即为目标设备)</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">device</span>: wearEngine.<span class="hljs-property">Device</span> = devices[<span class="hljs-number">0</span>];</li><li>
</li><li>  device.<span class="hljs-title function_">isDeviceCapabilitySupported</span>(wearEngine.<span class="hljs-property">DeviceCapability</span>.<span class="hljs-property">CBT_I</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">isSupportCBTI</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in checking CBTI capability, result is <span class="hljs-subst">${isSupportCBTI}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to check CBTI capability. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1868px;">     <h3 id="section164908590339" device-type="phone,tablet,wearable">getSerialNumber<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section164908590339" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getSerialNumber(): Promise&lt;string&gt;</p>     <p>通过<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1828213119411">getConnectedDevices</a>接口获取到已连接的穿戴设备后，查询设备的SN，使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;string&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回设备SN。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.12.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.39.12.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section5941173162512">801</a></p></td>         <td class="cellrowborder" width="50%">          <p>Capability not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>         <td class="cellrowborder" width="50%">          <p>Network error. The network is unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>         <td class="cellrowborder" width="50%">          <p>No device is bound.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device disconnected<span style="color: rgb(128,128,128);">.</span></p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>         <td class="cellrowborder" width="50%">          <p>App has not applied for the Wear Engine service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>         <td class="cellrowborder" width="50%">          <p>The HUAWEI ID is not authorized.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>         <td class="cellrowborder" width="50%">          <p>User privacy is not agreed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. The user has not logged in with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">devices</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li><span class="hljs-keyword">if</span> (devices.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>  <span class="hljs-comment">// 从得到的设备列表中选取目标设备，并定义为device(假设数组中存在已连接设备且第一位即为目标设备)</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">device</span>: wearEngine.<span class="hljs-property">Device</span> = devices[<span class="hljs-number">0</span>];</li><li>
</li><li>  device.<span class="hljs-title function_">getSerialNumber</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">sn</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting device SN, result is <span class="hljs-subst">${sn}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get device SN. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="section1639211301479" device-type="phone,tablet,wearable">WearEngineCapability<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1639211301479" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>WearEngine能力集枚举类型。</p>    </div>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>起始版本</strong><strong>：</strong>5.0.0(12)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.44.1.4.1.1" width="33.33333333333333%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.44.1.4.1.2" width="33.33333333333333%">         <p>值</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.44.1.4.1.3" width="33.33333333333333%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="33.33333333333333%">         <p>P2P_COMMUNICATION</p></td>        <td class="cellrowborder" width="33.33333333333333%">         <p>1</p></td>        <td class="cellrowborder" width="33.33333333333333%">         <p>P2p(peer-to-peer)能力。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="33.33333333333333%">         <p>MONITOR</p></td>        <td class="cellrowborder" width="33.33333333333333%">         <p>2</p></td>        <td class="cellrowborder" width="33.33333333333333%">         <p>Monitor能力。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="33.33333333333333%">         <p>NOTIFICATION</p></td>        <td class="cellrowborder" width="33.33333333333333%">         <p>3</p></td>        <td class="cellrowborder" width="33.33333333333333%">         <p>Notify能力。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="33.33333333333333%">         <p>SENSOR</p></td>        <td class="cellrowborder" width="33.33333333333333%">         <p>4</p></td>        <td class="cellrowborder" width="33.33333333333333%">         <p>Sensor能力。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 474px;">     <h2 id="section0965105510366" device-type="phone,tablet,wearable">DeviceCapability<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section0965105510366" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>Device能力集枚举类型。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.45.6.1.4.1.1" width="33.33333333333333%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.45.6.1.4.1.2" width="33.33333333333333%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.45.6.1.4.1.3" width="33.33333333333333%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">          <p>APP_INSTALLATION</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>14</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>支持应用安装能力。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">          <p>CBT_I</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>128</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>CBTI数字疗法能力。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 564px;">     <h2 id="section145591125155713" device-type="phone,tablet,wearable">DeviceCategory<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section145591125155713" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>设备类型枚举类。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.46.6.1.4.1.1" width="33.33333333333333%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.46.6.1.4.1.2" width="33.33333333333333%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.46.6.1.4.1.3" width="33.33333333333333%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">          <p>DEFAULT</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>1</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>手机或平板类型。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">          <p>WATCH</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>2</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>手表类型。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">          <p>BAND</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>3</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>手环类型。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">          <p>OTHER_DEVICES</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>255</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>其它设备类型。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 567px;">     <h2 id="section8322015161010" device-type="phone,tablet,wearable">OsCategory<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section8322015161010" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>设备的操作系统类型枚举类。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>设备行为差异：</strong>该接口在wearable中正常调用，在其他设备类型中调用无效果。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>起始版本：</strong>5.1.0(18)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.4.1.1" width="33.33333333333333%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.4.1.2" width="33.33333333333333%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.4.1.3" width="33.33333333333333%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">          <p>HARMONYOS</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>1</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>HarmonyOS</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">          <p>IOS</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>2</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>IOS</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">          <p>OTHER_OS</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>255</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>其他类型</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1426px;">     <h2 id="section068883315262" device-type="phone,tablet,wearable">wearEngine.getMonitorClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section068883315262" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getMonitorClient(context: common.Context): MonitorClient</p>     <p>用于获取Monitor模块的客户端。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.9.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.48.9.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.48.9.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.48.9.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>context</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>Context上下文，仅支持包含connectServiceExtensionAbility方法的Context（例：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#uiabilitycontext-1" target="_blank">UIAbilityContext</a>）。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.48.11.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.48.11.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section178254313113">MonitorClient</a></p></td>         <td class="cellrowborder" width="50%">          <p>Monitor客户端，存储了Monitor模块的相关方法。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.48.14.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.48.14.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section5941173162512">801</a></p></td>         <td class="cellrowborder" width="50%">          <p>Capability not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">monitorClient</span>: wearEngine.<span class="hljs-property">MonitorClient</span> = wearEngine.<span class="hljs-title function_">getMonitorClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting monitor client.`</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="section178254313113" device-type="phone,tablet,wearable">MonitorClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section178254313113" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>Monitor客户端类。由接口<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section068883315262">wearEngine.getMonitorClient</a>返回得到。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2302px;">     <h3 id="section3383841153218" device-type="phone,tablet,wearable" class="firsth2">queryStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3383841153218" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>queryStatus(deviceRandomId: string, item: MonitorItem): Promise&lt;MonitorData&gt;</p>     <p>查询指定设备的指定状态，使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.50.9.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.50.9.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.50.9.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.50.9.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>deviceRandomId</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次查询的设备。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>item</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section16422462613">MonitorItem</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>可查询的设备状态枚举，用于指定本次查询的状态。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.11.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.50.11.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section12024822410">MonitorData</a>&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回查询的结果。不同状态返回值的含义请参考<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section16422462613">MonitorItem</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.14.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.50.14.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>         <td class="cellrowborder" width="50%">          <p>Network error. The network is unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>         <td class="cellrowborder" width="50%">          <p>No device is bound.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device disconnected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>         <td class="cellrowborder" width="50%">          <p>App has not applied for the Wear Engine service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>         <td class="cellrowborder" width="50%">          <p>The HUAWEI ID is not authorized.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>         <td class="cellrowborder" width="50%">          <p>User privacy is not agreed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>         <td class="cellrowborder" width="50%">          <p>The device capability is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. The user has not logged in with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device ID is invalid.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">monitorClient</span>: wearEngine.<span class="hljs-property">MonitorClient</span> = wearEngine.<span class="hljs-title function_">getMonitorClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">devices</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li><span class="hljs-keyword">if</span> (devices.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>  <span class="hljs-comment">// 从得到的设备列表中选取目标设备，并定义为device(假设数组中存在已连接设备且第一位即为目标设备)</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">device</span>: wearEngine.<span class="hljs-property">Device</span> = devices[<span class="hljs-number">0</span>];</li><li>
</li><li>  monitorClient.<span class="hljs-title function_">queryStatus</span>(device.<span class="hljs-property">randomId</span>, wearEngine.<span class="hljs-property">MonitorItem</span>.<span class="hljs-property">WEAR_STATUS</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in querying wear status, result is <span class="hljs-subst">${result.code}</span>.`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query wear status. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2610px;">     <h3 id="section74368231248" device-type="phone,tablet,wearable">subscribeEvent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section74368231248" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>subscribeEvent(deviceRandomId: string, type: MonitorEvent, callback: Callback&lt;MonitorEventData&gt;): Promise&lt;void&gt;</p>     <p>监听指定设备的指定状态变化事件，当状态发生变化时使用callback异步回调，订阅成功与否使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.9.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.51.9.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.51.9.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.51.9.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>deviceRandomId</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次订阅的设备。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>type</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section0407141762619">MonitorEvent</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>可订阅的设备状态枚举，用于指定本次订阅监听的设备状态。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>callback</p></td>         <td class="cellrowborder" width="25%">          <p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section38571246164212">MonitorEventData</a>&gt;</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>回调函数，状态发生变化后执行，传入<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section38571246164212">MonitorEventData</a>类。建议保证回调函数的生命周期延长至取消监听时，详情请见<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section182736075018">unsubscribeEvent</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.11.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.51.11.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。无结果返回的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.14.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.51.14.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>         <td class="cellrowborder" width="50%">          <p>Network error. The network is unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>         <td class="cellrowborder" width="50%">          <p>No device is bound.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device disconnected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>         <td class="cellrowborder" width="50%">          <p>App has not applied for the Wear Engine service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>         <td class="cellrowborder" width="50%">          <p>The HUAWEI ID is not authorized.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>         <td class="cellrowborder" width="50%">          <p>User privacy is not agreed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>         <td class="cellrowborder" width="50%">          <p>The device capability is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. The user has not logged in with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device ID is invalid.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1599615141614">1008500012</a></p></td>         <td class="cellrowborder" width="50%">          <p>Too many callbacks of the same type.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">monitorClient</span>: wearEngine.<span class="hljs-property">MonitorClient</span> = wearEngine.<span class="hljs-title function_">getMonitorClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">devices</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li><span class="hljs-keyword">if</span> (devices.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>  <span class="hljs-comment">// 从得到的设备列表中选取目标设备，并定义为device(假设数组中存在已连接设备且第一位即为目标设备)</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">device</span>: wearEngine.<span class="hljs-property">Device</span> = devices[<span class="hljs-number">0</span>];</li><li>
</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">monitorEventData: wearEngine.MonitorEventData</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in listening change of <span class="hljs-subst">${monitorEventData.event}</span>, the new status is <span class="hljs-subst">${monitorEventData.data}</span>.`</span>)</li><li>  }</li><li>  monitorClient.<span class="hljs-title function_">subscribeEvent</span>(device.<span class="hljs-property">randomId</span>, wearEngine.<span class="hljs-property">MonitorEvent</span>.<span class="hljs-property">EVENT_WEAR_STATUS_CHANGED</span>, callback).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in subscribing wear status.`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to subscribe wear status. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 174px;">     <h3 id="section182736075018" device-type="phone,tablet,wearable">unsubscribeEvent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section182736075018" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>unsubscribeEvent(deviceRandomId: string, type: MonitorEvent, callback: Callback&lt;MonitorEventData&gt;): Promise&lt;void&gt;</p>    </div>    <p>取消订阅监听指定设备的指定状态变化事件，取消订阅成功与否使用Promise异步回调。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>参数：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.59.1.5.1.1" width="25%">         <p>参数名</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.59.1.5.1.2" width="25%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.59.1.5.1.3" width="25%">         <p>必填</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.59.1.5.1.4" width="25%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25%">         <p>deviceRandomId</p></td>        <td class="cellrowborder" width="25%">         <p>string</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次取消订阅的设备。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>type</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section0407141762619">MonitorEvent</a></p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>可订阅的设备状态枚举，用于指定本次取消订阅监听的设备状态。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>callback</p></td>        <td class="cellrowborder" width="25%">         <p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section38571246164212">MonitorEventData</a>&gt;</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>回调函数。此处需保证传入的对象与调用<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section74368231248">subscribeEvent</a>接口时传入的回调函数为同一个对象。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.61.1.3.1.1" width="50%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.61.1.3.1.2" width="50%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p>Promise&lt;void&gt;</p></td>        <td class="cellrowborder" width="50%">         <p>Promise对象。无结果返回的Promise对象。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.64.1.3.1.1" width="50%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.64.1.3.1.2" width="50%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>        <td class="cellrowborder" width="50%">         <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>        <td class="cellrowborder" width="50%">         <p>Network error. The network is unavailable.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>        <td class="cellrowborder" width="50%">         <p>No device is bound.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device disconnected.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>        <td class="cellrowborder" width="50%">         <p>App has not applied for the Wear Engine service.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>        <td class="cellrowborder" width="50%">         <p>The HUAWEI ID is not authorized.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>        <td class="cellrowborder" width="50%">         <p>User privacy is not agreed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>        <td class="cellrowborder" width="50%">         <p>The device capability is not supported.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. The user has not logged in with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device ID is invalid.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>        <td class="cellrowborder" width="50%">         <p>Internal error.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">devices</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">monitorClient</span>: wearEngine.<span class="hljs-property">MonitorClient</span> = wearEngine.<span class="hljs-title function_">getMonitorClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li>
</li><li><span class="hljs-keyword">if</span> (devices.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>  <span class="hljs-comment">// 从得到的设备列表中选取目标设备，并定义为device(假设数组中存在已连接设备且第一位即为目标设备)</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">device</span>: wearEngine.<span class="hljs-property">Device</span> = devices[<span class="hljs-number">0</span>];</li><li>
</li><li>  <span class="hljs-comment">// 解注册时回调函数需要保证和注册时为同一个对象</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">monitorEventData: wearEngine.MonitorEventData</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in listening change of <span class="hljs-subst">${monitorEventData.event}</span>, the new status is <span class="hljs-subst">${monitorEventData.data}</span>.`</span>)</li><li>  }</li><li>  <span class="hljs-comment">// 创建待删除的订阅任务</span></li><li>  <span class="hljs-keyword">await</span> monitorClient.<span class="hljs-title function_">subscribeEvent</span>(device.<span class="hljs-property">randomId</span>, wearEngine.<span class="hljs-property">MonitorEvent</span>.<span class="hljs-property">EVENT_WEAR_STATUS_CHANGED</span>, callback);</li><li>  <span class="hljs-comment">// 删除之前创建的订阅任务</span></li><li>  monitorClient.<span class="hljs-title function_">unsubscribeEvent</span>(device.<span class="hljs-property">randomId</span>, wearEngine.<span class="hljs-property">MonitorEvent</span>.<span class="hljs-property">EVENT_WEAR_STATUS_CHANGED</span>, callback).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in unsubscribing wear status`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to unsubscribe wear status. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="section16422462613" device-type="phone,tablet,wearable">MonitorItem<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16422462613" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>设备状态的枚举类。</p>    </div>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.71.1.4.1.1" width="25.61256125612561%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.71.1.4.1.2" width="29.212921292129213%">         <p>值</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.71.1.4.1.3" width="45.174517451745174%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25.61256125612561%">         <p>WEAR_STATUS</p></td>        <td class="cellrowborder" width="29.212921292129213%">         <p>wearStatus</p></td>        <td class="cellrowborder" width="45.174517451745174%">         <p>佩戴状态。返回值含义：</p>         <p>1：佩戴</p>         <p>2：未佩戴</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25.61256125612561%">         <p>POWER_STATUS</p></td>        <td class="cellrowborder" width="29.212921292129213%">         <p>powerStatus</p></td>        <td class="cellrowborder" width="45.174517451745174%">         <p>电量状态。返回值含义：剩余电量百分比（0~100）。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25.61256125612561%">         <p>CHARGE_STATUS</p></td>        <td class="cellrowborder" width="29.212921292129213%">         <p>chargeStatus</p></td>        <td class="cellrowborder" width="45.174517451745174%">         <p>充电状态。返回值含义：</p>         <p>1：正在充电</p>         <p>2：未充电</p>         <p>3：电量已充满</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25.61256125612561%">         <p>AVAILABLE_STORAGE_SPACE</p></td>        <td class="cellrowborder" width="29.212921292129213%">         <p>availableStorageSpace</p></td>        <td class="cellrowborder" width="45.174517451745174%">         <p>可用存储空间。返回值含义：用户可用空间（KB）。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25.61256125612561%">         <p>POWER_MODE</p></td>        <td class="cellrowborder" width="29.212921292129213%">         <p>powerMode</p></td>        <td class="cellrowborder" width="45.174517451745174%">         <p>电源模式。返回值含义：</p>         <p>-1：设备不区分电源模式</p>         <p>0：智能模式</p>         <p>1：超长续航模式</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 822px;">     <h2 id="section0407141762619" device-type="phone,tablet,wearable">MonitorEvent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section0407141762619" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>设备状态变化事件的枚举类。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.4.1.1" width="28.052805280528055%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.4.1.2" width="17.28172817281728%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.4.1.3" width="54.66546654665466%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="28.052805280528055%">          <p>EVENT_CONNECTION_STATUS_CHANGED</p></td>         <td class="cellrowborder" width="17.28172817281728%">          <p>connectionStatus</p></td>         <td class="cellrowborder" width="54.66546654665466%">          <p>设备连接状态变化。</p>          <p>返回值含义：2：连接成功；3：连接断开；5：设备解绑</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.052805280528055%">          <p>EVENT_BATTERY_LEVEL_DROPPED</p></td>         <td class="cellrowborder" width="17.28172817281728%">          <p>lowPower</p></td>         <td class="cellrowborder" width="54.66546654665466%">          <p>设备电量降低。</p>          <p>返回值含义：剩余电量百分比（0~100）。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.052805280528055%">          <p>EVENT_WEAR_STATUS_CHANGED</p></td>         <td class="cellrowborder" width="17.28172817281728%">          <p>wearStatus</p></td>         <td class="cellrowborder" width="54.66546654665466%">          <p>设备佩戴状态变化。</p>          <p>返回值含义：1：佩戴，2：未佩戴。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.052805280528055%">          <p>EVENT_HEART_RATE_ALARM</p></td>         <td class="cellrowborder" width="17.28172817281728%">          <p>heartRateAlarm</p></td>         <td class="cellrowborder" width="54.66546654665466%">          <p>心率告警。</p>          <p>返回值含义：1：静态心率过高，2：静态心率过低，3：运动心率过高，4：运动心率过低。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.052805280528055%">          <p>EVENT_CHARGE_STATUS_CHANGED</p></td>         <td class="cellrowborder" width="17.28172817281728%">          <p>chargeStatus</p></td>         <td class="cellrowborder" width="54.66546654665466%">          <p>充电状态变化。</p>          <p>返回值含义：1：充电开始，2：充电结束，3：充电完成。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.052805280528055%">          <p>EVENT_POWER_MODE_CHANGED</p></td>         <td class="cellrowborder" width="17.28172817281728%">          <p>powerMode</p></td>         <td class="cellrowborder" width="54.66546654665466%">          <p>电源模式切换。</p>          <p>返回值含义：0：切换至智能模式，1：切换至超长续航模式。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="section12024822410" device-type="phone,tablet,wearable">MonitorData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12024822410" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>作为<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section3383841153218">queryStatus</a>接口的返回值与<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section74368231248">subscribeEvent</a>接口回调函数的入参，返回设备的状态信息。</p>    </div>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.77.1.6.1.1" width="13.86%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.77.1.6.1.2" width="13.530000000000001%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.77.1.6.1.3" width="14.84%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.77.1.6.1.4" width="13.350000000000001%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.77.1.6.1.5" width="44.42%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="13.86%">         <p>code</p></td>        <td class="cellrowborder" width="13.530000000000001%">         <p>number</p></td>        <td class="cellrowborder" width="14.84%">         <p>否</p></td>        <td class="cellrowborder" width="13.350000000000001%">         <p>否</p></td>        <td class="cellrowborder" width="44.42%">         <p>当使用<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section3383841153218">queryStatus</a>接口查询设备状态时，返回值含义请见<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section16422462613">MonitorItem</a>。</p>         <p>当使用<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section74368231248">subscribeEvent</a>接口订阅监听时，返回值含义请见<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section0407141762619">MonitorEvent</a>。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="13.86%">         <p>data</p></td>        <td class="cellrowborder" width="13.530000000000001%">         <p>string</p></td>        <td class="cellrowborder" width="14.84%">         <p>否</p></td>        <td class="cellrowborder" width="13.350000000000001%">         <p>是</p></td>        <td class="cellrowborder" width="44.42%">         <p>扩展字段。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="section38571246164212" device-type="phone,tablet,wearable">MonitorEventData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section38571246164212" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>作为<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section74368231248">subscribeEvent</a>接口的返回值，当订阅监听的事件触发时，作为入参将设备对应状态变化后的信息传递给回调函数。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>    </div>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.79.1.6.1.1" width="20%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.79.1.6.1.2" width="20%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.79.1.6.1.3" width="20%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.79.1.6.1.4" width="20%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.79.1.6.1.5" width="20%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="20%">         <p>event</p></td>        <td class="cellrowborder" width="20%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section0407141762619">MonitorEvent</a></p></td>        <td class="cellrowborder" width="20%">         <p>否</p></td>        <td class="cellrowborder" width="20%">         <p>否</p></td>        <td class="cellrowborder" width="20%">         <p>回调函数注册的订阅监听事件枚举值。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="20%">         <p>data</p></td>        <td class="cellrowborder" width="20%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section12024822410">MonitorData</a></p></td>        <td class="cellrowborder" width="20%">         <p>否</p></td>        <td class="cellrowborder" width="20%">         <p>否</p></td>        <td class="cellrowborder" width="20%">         <p>设备状态发生变化后的状态信息。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1323px;">     <h2 id="section15604103515412" device-type="phone,tablet,wearable">wearEngine.getP2pClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section15604103515412" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getP2pClient(context: common.Context): P2pClient</p>     <p>用于获取P2p模块的客户端。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.80.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.80.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.80.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.80.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>context</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>Context上下文，仅支持包含connectServiceExtensionAbility方法的Context（例：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#uiabilitycontext-1" target="_blank">UIAbilityContext</a>）。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.80.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.80.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section10175450143316">P2pClient</a></p></td>         <td class="cellrowborder" width="50%">          <p>P2p客户端，存储了P2p模块的相关方法。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.80.14.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.80.14.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">p2pClient</span>: wearEngine.<span class="hljs-property">P2pClient</span> = wearEngine.<span class="hljs-title function_">getP2pClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting p2p client.`</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="section10175450143316" device-type="phone,tablet,wearable">P2pClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10175450143316" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>P2p客户端类。由接口<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section15604103515412">wearEngine.getP2pClient</a>返回得到。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tiledSection" style="contain-intrinsic-size: auto 2422px;">     <h3 id="section28747514219" device-type="phone,tablet,wearable" class="firsth2">isRemoteAppInstalled<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section28747514219" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>isRemoteAppInstalled(deviceRandomId: string, remoteBundleName: string): Promise&lt;boolean&gt;</p>     <p>判断穿戴设备是否已安装指定的应用，使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.86.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.86.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.86.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.86.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>deviceRandomId</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次订阅的设备。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>remoteBundleName</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>待查询的设备侧指定应用名称。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.86.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.86.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;boolean&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。表示设备侧应用是否安装。true：已安装，false：未安装。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.86.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.86.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>         <td class="cellrowborder" width="50%">          <p>Network error. The network is unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>         <td class="cellrowborder" width="50%">          <p>No device is bound.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device disconnected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>         <td class="cellrowborder" width="50%">          <p>App has not applied for the Wear Engine service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>         <td class="cellrowborder" width="50%">          <p>The HUAWEI ID is not authorized.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>         <td class="cellrowborder" width="50%">          <p>User privacy is not agreed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>         <td class="cellrowborder" width="50%">          <p>The device capability is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. The user has not logged in with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device ID is invalid.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">p2pClient</span>: wearEngine.<span class="hljs-property">P2pClient</span> = wearEngine.<span class="hljs-title function_">getP2pClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceList</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li>deviceList.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> (device, idx, arr) =&gt; {</li><li>  <span class="hljs-comment">// 挑选支持应用安装的设备</span></li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> device.<span class="hljs-title function_">isDeviceCapabilitySupported</span>(wearEngine.<span class="hljs-property">DeviceCapability</span>.<span class="hljs-property">APP_INSTALLATION</span>)) {</li><li>    <span class="hljs-comment">// 将设备侧应用包名定义为remoteBundleName</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">remoteBundleName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>    p2pClient.<span class="hljs-title function_">isRemoteAppInstalled</span>(device.<span class="hljs-property">randomId</span>, remoteBundleName).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">isInstall</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in checking remote app install, result is <span class="hljs-subst">${isInstall}</span>.`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to check remote app install. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>    })</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (idx === deviceList.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {</li><li>    <span class="hljs-comment">// 若不存在目标设备则抛出错误</span></li><li>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'cannot find target device'</span>);</li><li>  }</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 222px;">     <h3 id="section1737133513289" device-type="phone,tablet,wearable">getRemoteAppVersion<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1737133513289" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getRemoteAppVersion(deviceRandomId: string, remoteBundleName: string): Promise&lt;number&gt;</p>     <p>获取穿戴设备指定应用的版本号，使用Promise异步回调。</p>    </div>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>参数：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.93.1.5.1.1" width="25%">         <p>参数名</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.93.1.5.1.2" width="25%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.93.1.5.1.3" width="25%">         <p>必填</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.93.1.5.1.4" width="25%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25%">         <p>deviceRandomId</p></td>        <td class="cellrowborder" width="25%">         <p>string</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次订阅的设备。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>remoteBundleName</p></td>        <td class="cellrowborder" width="25%">         <p>string</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>待查询版本号的设备侧应用名称。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.95.1.3.1.1" width="50%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.95.1.3.1.2" width="50%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p>Promise&lt;number&gt;</p></td>        <td class="cellrowborder" width="50%">         <p>Promise对象。表示设备侧应用的版本号。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.98.1.3.1.1" width="50%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.98.1.3.1.2" width="50%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>        <td class="cellrowborder" width="50%">         <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section5941173162512">801</a></p></td>        <td class="cellrowborder" width="50%">         <p>Capability not supported.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>        <td class="cellrowborder" width="50%">         <p>Network error. The network is unavailable.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>        <td class="cellrowborder" width="50%">         <p>No device is bound.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device disconnected.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>        <td class="cellrowborder" width="50%">         <p>App has not applied for the Wear Engine service.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>        <td class="cellrowborder" width="50%">         <p>The HUAWEI ID is not authorized.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>        <td class="cellrowborder" width="50%">         <p>User privacy is not agreed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>        <td class="cellrowborder" width="50%">         <p>The device capability is not supported.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. The user has not logged in with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device ID is invalid.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>        <td class="cellrowborder" width="50%">         <p>Internal error.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">p2pClient</span>: wearEngine.<span class="hljs-property">P2pClient</span> = wearEngine.<span class="hljs-title function_">getP2pClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceList</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li>deviceList.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> (device, idx, arr) =&gt; {</li><li>  <span class="hljs-comment">// 挑选支持应用安装的设备</span></li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> device.<span class="hljs-title function_">isDeviceCapabilitySupported</span>(wearEngine.<span class="hljs-property">DeviceCapability</span>.<span class="hljs-property">APP_INSTALLATION</span>)) {</li><li>    <span class="hljs-comment">// 将设备侧应用包名定义为remoteBundleName</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">remoteBundleName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>    p2pClient.<span class="hljs-title function_">getRemoteAppVersion</span>(device.<span class="hljs-property">randomId</span>, remoteBundleName).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">version</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting remote app version, version is <span class="hljs-subst">${version}</span>.`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to check get remote app version. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>    })</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (idx === deviceList.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {</li><li>    <span class="hljs-comment">// 若不存在目标设备则抛出错误</span></li><li>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'cannot find target device'</span>);</li><li>  }</li><li>})</li></ol></pre></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 246px;">     <h3 id="section169404201361" device-type="phone,tablet,wearable">startRemoteApp<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section169404201361" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>startRemoteApp(deviceRandomId: string, remoteBundleName: string, transformLocalBundleName?: boolean): Promise&lt;P2pResult&gt;</p>     <p>拉起穿戴设备的指定应用，使用Promise异步回调。</p>    </div>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>参数：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.107.1.5.1.1" width="25%">         <p>参数名</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.107.1.5.1.2" width="25%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.107.1.5.1.3" width="25%">         <p>必填</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.107.1.5.1.4" width="25%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25%">         <p>deviceRandomId</p></td>        <td class="cellrowborder" width="25%">         <p>string</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次订阅的设备。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>remoteBundleName</p></td>        <td class="cellrowborder" width="25%">         <p>string</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>待拉起的设备侧应用名称。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>transformLocalBundleName</p></td>        <td class="cellrowborder" width="25%">         <p>boolean</p></td>        <td class="cellrowborder" width="25%">         <p>否</p></td>        <td class="cellrowborder" width="25%">         <p>是否需要将本地包名和指纹转换为兼容应用在云端存储的包名和指纹。默认值：false。</p>         <p>true：转换，false：不转换。</p>         <p>待兼容应用设置请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wearengine_apply" target="_blank">申请接入Wear Engine服务</a>。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.109.1.3.1.1" width="50%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.109.1.3.1.2" width="50%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section75108813115">P2pResult</a>&gt;</p></td>        <td class="cellrowborder" width="50%">         <p>Promise对象。属性中的code字段表示本次拉起应用的结果。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.112.1.3.1.1" width="50%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.112.1.3.1.2" width="50%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>        <td class="cellrowborder" width="50%">         <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section5941173162512">801</a></p></td>        <td class="cellrowborder" width="50%">         <p>Capability not supported.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>        <td class="cellrowborder" width="50%">         <p>Network error. The network is unavailable.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>        <td class="cellrowborder" width="50%">         <p>No device is bound.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device disconnected.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>        <td class="cellrowborder" width="50%">         <p>App has not applied for the Wear Engine service.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>        <td class="cellrowborder" width="50%">         <p>The HUAWEI ID is not authorized.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>        <td class="cellrowborder" width="50%">         <p>User privacy is not agreed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>        <td class="cellrowborder" width="50%">         <p>The device capability is not supported.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. The user has not logged in with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device ID is invalid.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>        <td class="cellrowborder" width="50%">         <p>Internal error.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">p2pClient</span>: wearEngine.<span class="hljs-property">P2pClient</span> = wearEngine.<span class="hljs-title function_">getP2pClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceList</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li>deviceList.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> (device, idx, arr) =&gt; {</li><li>  <span class="hljs-comment">// 挑选支持应用安装的设备</span></li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> device.<span class="hljs-title function_">isDeviceCapabilitySupported</span>(wearEngine.<span class="hljs-property">DeviceCapability</span>.<span class="hljs-property">APP_INSTALLATION</span>)) {</li><li>    <span class="hljs-comment">// 将设备侧应用包名定义为remoteBundleName</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">remoteBundleName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>    <span class="hljs-comment">// transformLocalBundleName不传入参数时，默认为false</span></li><li>    p2pClient.<span class="hljs-title function_">startRemoteApp</span>(device.<span class="hljs-property">randomId</span>, remoteBundleName).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">p2pResult</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in starting remote app, result is <span class="hljs-subst">${p2pResult.code}</span>.`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to start remote app. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>    })</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (idx === deviceList.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {</li><li>    <span class="hljs-comment">// 若不存在目标设备则抛出错误</span></li><li>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'cannot find target device'</span>);</li><li>  }</li><li>})</li></ol></pre></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2891px;">     <h3 id="section10826949193413" device-type="phone,tablet,wearable">sendMessage<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10826949193413" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>sendMessage(deviceRandomId: string, appParam: P2pAppParam, message: P2pMessage): Promise&lt;P2pResult&gt;</p>     <p>向对端设备的指定应用发送消息，使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.115.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.115.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.115.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.115.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>deviceRandomId</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次订阅的设备。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>appParam</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section7874153142020">P2pAppParam</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>指定的设备侧应用参数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>message</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section188531948121319">P2pMessage</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>需要传输的消息内容，取值范围：[1，4096)，单位字节。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.115.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.115.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section75108813115">P2pResult</a>&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。返回<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section75108813115">P2pResult</a>对象，其属性中的code字段表示本次消息发送的结果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.115.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.115.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>         <td class="cellrowborder" width="50%">          <p>Network error. The network is unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>         <td class="cellrowborder" width="50%">          <p>No device is bound.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device disconnected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>         <td class="cellrowborder" width="50%">          <p>App has not applied for the Wear Engine service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>         <td class="cellrowborder" width="50%">          <p>The HUAWEI ID is not authorized.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>         <td class="cellrowborder" width="50%">          <p>User privacy is not agreed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>         <td class="cellrowborder" width="50%">          <p>The device capability is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. The user has not logged in with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device ID is invalid.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { util } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">p2pClient</span>: wearEngine.<span class="hljs-property">P2pClient</span> = wearEngine.<span class="hljs-title function_">getP2pClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceList</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li>deviceList.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> (device, idx, arr) =&gt; {</li><li>  <span class="hljs-comment">// 挑选支持应用安装的设备</span></li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> device.<span class="hljs-title function_">isDeviceCapabilitySupported</span>(wearEngine.<span class="hljs-property">DeviceCapability</span>.<span class="hljs-property">APP_INSTALLATION</span>)) {</li><li>    <span class="hljs-comment">// 设置设备侧应用的应用信息：包名与指纹</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">appInfo</span>: wearEngine.<span class="hljs-property">AppInfo</span> = {</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">''</span>,</li><li>      <span class="hljs-attr">fingerprint</span>: <span class="hljs-string">''</span></li><li>    }</li><li>    <span class="hljs-comment">// 将设备侧应用参数类定义为appParam</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">appParam</span>: wearEngine.<span class="hljs-property">P2pAppParam</span> = {</li><li>      <span class="hljs-attr">remoteApp</span>: appInfo</li><li>      <span class="hljs-comment">// transformLocalAppInfo默认为false，不转换包名指纹</span></li><li>    }</li><li>
</li><li>    <span class="hljs-comment">// 设置需要发送的消息内容</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">messageContent</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'this is message'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">textEncoder</span>: util.<span class="hljs-property">TextEncoder</span> = <span class="hljs-keyword">new</span> util.<span class="hljs-property">TextEncoder</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">message</span>: wearEngine.<span class="hljs-property">P2pMessage</span> = {</li><li>      <span class="hljs-attr">content</span>: textEncoder.<span class="hljs-title function_">encodeInto</span>(messageContent)</li><li>    }</li><li>
</li><li>    p2pClient.<span class="hljs-title function_">sendMessage</span>(device.<span class="hljs-property">randomId</span>, appParam, message).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">p2pResult</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in sending message, result is <span class="hljs-subst">${p2pResult.code}</span>.`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to send message. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>    })</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (idx === deviceList.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {</li><li>    <span class="hljs-comment">// 若不存在目标设备则抛出错误</span></li><li>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'cannot find target device'</span>);</li><li>  }</li><li>})</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 138px;">     <h3 id="section16802133114448" device-type="phone,tablet,wearable">transferFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16802133114448" tips="复制节点链接"></i></h3>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>transferFile(deviceRandomId: string, appParam: P2pAppParam, file: P2pFile, callback: AsyncCallback&lt;P2pResult&gt;): void</p>    <p>向对端设备的指定应用发送文件，使用callback异步回调。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>参数：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.123.1.5.1.1" width="25%">         <p>参数名</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.123.1.5.1.2" width="25%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.123.1.5.1.3" width="25%">         <p>必填</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.123.1.5.1.4" width="25%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25%">         <p>deviceRandomId</p></td>        <td class="cellrowborder" width="25%">         <p>string</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次订阅的设备。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>appParam</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section7874153142020">P2pAppParam</a></p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>指定的设备侧应用参数。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>file</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1223384152">P2pFile</a></p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>需要传输的文件。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>callback</p></td>        <td class="cellrowborder" width="25%">         <p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section75108813115">P2pResult</a>&gt;</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>通用回调函数，携带错误参数和异步返回值。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.126.1.3.1.1" width="50%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.126.1.3.1.2" width="50%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>        <td class="cellrowborder" width="50%">         <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>        <td class="cellrowborder" width="50%">         <p>Network error. The network is unavailable.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>        <td class="cellrowborder" width="50%">         <p>No device is bound.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device disconnected.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>        <td class="cellrowborder" width="50%">         <p>App has not applied for the Wear Engine service.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>        <td class="cellrowborder" width="50%">         <p>The HUAWEI ID is not authorized.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>        <td class="cellrowborder" width="50%">         <p>User privacy is not agreed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>        <td class="cellrowborder" width="50%">         <p>The device capability is not supported.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. The user has not logged in with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device ID is invalid.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section4583155021811">1008500011</a></p></td>        <td class="cellrowborder" width="50%">         <p>File is invalid.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>        <td class="cellrowborder" width="50%">         <p>Internal error.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">p2pClient</span>: wearEngine.<span class="hljs-property">P2pClient</span> = wearEngine.<span class="hljs-title function_">getP2pClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceList</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li>deviceList.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> (device, idx, arr) =&gt; {</li><li>  <span class="hljs-comment">// 挑选支持应用安装的设备</span></li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> device.<span class="hljs-title function_">isDeviceCapabilitySupported</span>(wearEngine.<span class="hljs-property">DeviceCapability</span>.<span class="hljs-property">APP_INSTALLATION</span>)) {</li><li>    <span class="hljs-comment">// 设置设备侧应用的应用信息：包名与指纹</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">appInfo</span>: wearEngine.<span class="hljs-property">AppInfo</span> = {</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">''</span>,</li><li>      <span class="hljs-attr">fingerprint</span>: <span class="hljs-string">''</span></li><li>    }</li><li>    <span class="hljs-comment">// 将设备侧应用参数类定义为appParam</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">appParam</span>: wearEngine.<span class="hljs-property">P2pAppParam</span> = {</li><li>      <span class="hljs-attr">remoteApp</span>: appInfo</li><li>      <span class="hljs-comment">// transformLocalAppInfo默认为false，不转换包名指纹</span></li><li>    }</li><li>    <span class="hljs-comment">// 设置需要发送的文件</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">p2pFile</span>: wearEngine.<span class="hljs-property">P2pFile</span> = {</li><li>      <span class="hljs-attr">file</span>: fileIo.<span class="hljs-title function_">openSync</span>(<span class="hljs-string">''</span>)</li><li>    }</li><li>
</li><li>    p2pClient.<span class="hljs-title function_">transferFile</span>(device.<span class="hljs-property">randomId</span>, appParam, p2pFile, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, p2pResult: wearEngine.P2pResult</span>) =&gt;</span> {</li><li>      <span class="hljs-comment">// callback处理逻辑</span></li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to transfer file. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-keyword">if</span> (p2pResult.<span class="hljs-property">code</span>) {</li><li>        <span class="hljs-keyword">if</span> (p2pResult.<span class="hljs-property">code</span> === wearEngine.<span class="hljs-property">P2pResultCode</span>.<span class="hljs-property">COMMUNICATION_SUCCESS</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in transfering file, the result is <span class="hljs-subst">${p2pResult.code}</span>.`</span>);</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Failed to transfer file, the error code is <span class="hljs-subst">${p2pResult.code}</span>.`</span>);</li><li>      }</li><li>      <span class="hljs-keyword">if</span> (p2pResult.<span class="hljs-property">progress</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in transfering file, the progress is <span class="hljs-subst">${p2pResult.progress}</span>.`</span>);</li><li>      }</li><li>    });</li><li>    fileIo.<span class="hljs-title function_">close</span>(p2pFile.<span class="hljs-property">file</span>);</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (idx === deviceList.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {</li><li>    <span class="hljs-comment">// 若不存在目标设备则抛出错误</span></li><li>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'cannot find target device'</span>);</li><li>  }</li><li>})</li></ol></pre></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 138px;">     <h3 id="section67354131415" device-type="phone,tablet,wearable">cancelFileTransfer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section67354131415" tips="复制节点链接"></i></h3>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>cancelFileTransfer(deviceRandomId: string, appParam: P2pAppParam, file: P2pFile): Promise&lt;P2pResult&gt;</p>    <p>取消向对端设备的指定应用发送文件，使用Promise异步回调。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>参数：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.137.1.5.1.1" width="25%">         <p>参数名</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.137.1.5.1.2" width="25%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.137.1.5.1.3" width="25%">         <p>必填</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.137.1.5.1.4" width="25%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25%">         <p>deviceRandomId</p></td>        <td class="cellrowborder" width="25%">         <p>string</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次订阅的设备。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>appParam</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section7874153142020">P2pAppParam</a></p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>指定设备侧应用参数。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>file</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1223384152">P2pFile</a></p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>需要传输的文件。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.139.1.3.1.1" width="50%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.139.1.3.1.2" width="50%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section75108813115">P2pResult</a>&gt;</p></td>        <td class="cellrowborder" width="50%">         <p>Promise对象。属性中的code字段表示本次取消文件发送的结果。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.142.1.3.1.1" width="50%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.142.1.3.1.2" width="50%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>        <td class="cellrowborder" width="50%">         <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section5941173162512">801</a></p></td>        <td class="cellrowborder" width="50%">         <p>Capability not supported.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>        <td class="cellrowborder" width="50%">         <p>Network error. The network is unavailable.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>        <td class="cellrowborder" width="50%">         <p>No device is bound.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device disconnected.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>        <td class="cellrowborder" width="50%">         <p>App has not applied for the Wear Engine service.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>        <td class="cellrowborder" width="50%">         <p>The HUAWEI ID is not authorized.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>        <td class="cellrowborder" width="50%">         <p>User privacy is not agreed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>        <td class="cellrowborder" width="50%">         <p>The device capability is not supported.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. The user has not logged in with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device ID is invalid.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section4583155021811">1008500011</a></p></td>        <td class="cellrowborder" width="50%">         <p>File is invalid.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>        <td class="cellrowborder" width="50%">         <p>Internal error.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">p2pClient</span>: wearEngine.<span class="hljs-property">P2pClient</span> = wearEngine.<span class="hljs-title function_">getP2pClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceList</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li>deviceList.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> (device, idx, arr) =&gt; {</li><li>  <span class="hljs-comment">// 挑选支持应用安装的设备</span></li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> device.<span class="hljs-title function_">isDeviceCapabilitySupported</span>(wearEngine.<span class="hljs-property">DeviceCapability</span>.<span class="hljs-property">APP_INSTALLATION</span>)) {</li><li>    <span class="hljs-comment">// 设置设备侧应用的应用信息：包名与指纹</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">appInfo</span>: wearEngine.<span class="hljs-property">AppInfo</span> = {</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">''</span>,</li><li>      <span class="hljs-attr">fingerprint</span>: <span class="hljs-string">''</span></li><li>    }</li><li>    <span class="hljs-comment">// 将设备侧应用参数类定义为appParam</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">appParam</span>: wearEngine.<span class="hljs-property">P2pAppParam</span> = {</li><li>      <span class="hljs-attr">remoteApp</span>: appInfo</li><li>      <span class="hljs-comment">// transformLocalAppInfo默认为false，不转换包名指纹</span></li><li>    }</li><li>    <span class="hljs-comment">// 设置需要发送的文件信息</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">p2pFile</span>: wearEngine.<span class="hljs-property">P2pFile</span> = {</li><li>      <span class="hljs-attr">file</span>: fileIo.<span class="hljs-title function_">openSync</span>(<span class="hljs-string">''</span>)</li><li>    }</li><li>
</li><li>    p2pClient.<span class="hljs-title function_">transferFile</span>(device.<span class="hljs-property">randomId</span>, appParam, p2pFile, <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-comment">// 回调函数执行逻辑</span></li><li>    })</li><li>
</li><li>    p2pClient.<span class="hljs-title function_">cancelFileTransfer</span>(device.<span class="hljs-property">randomId</span>, appParam, p2pFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">p2pResult</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (p2pResult.<span class="hljs-property">code</span> === wearEngine.<span class="hljs-property">P2pResultCode</span>.<span class="hljs-property">COMMUNICATION_SUCCESS</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in cancelling transfer file, the result is <span class="hljs-subst">${p2pResult.code}</span>.`</span>);</li><li>      }</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to cancel transfer file. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>    })</li><li>    fileIo.<span class="hljs-title function_">close</span>(p2pFile.<span class="hljs-property">file</span>);</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (idx === deviceList.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {</li><li>    <span class="hljs-comment">// 若不存在目标设备则抛出错误</span></li><li>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'cannot find target device'</span>);</li><li>  }</li><li>})</li></ol></pre></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 138px;">     <h3 id="section893873771918" device-type="phone,tablet,wearable">registerMessageReceiver<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section893873771918" tips="复制节点链接"></i></h3>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>registerMessageReceiver(deviceRandomId: string, appParam: P2pAppParam, callback: Callback&lt;P2pMessage&gt;): Promise&lt;void&gt;</p>    <p>订阅对端设备应用向本端设备发送消息的事件，接收到对端应用发送的消息时使用callback异步回调，订阅成功与否使用Promise异步回调。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>参数：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.152.1.5.1.1" width="25%">         <p>参数名</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.152.1.5.1.2" width="25%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.152.1.5.1.3" width="25%">         <p>必填</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.152.1.5.1.4" width="25%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25%">         <p>deviceRandomId</p></td>        <td class="cellrowborder" width="25%">         <p>string</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次订阅的设备。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>appParam</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section7874153142020">P2pAppParam</a></p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>设备侧应用参数。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>callback</p></td>        <td class="cellrowborder" width="25%">         <p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section188531948121319">P2pMessage</a>&gt;</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>接收到设备侧应用发送的消息后执行的回调函数。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.154.1.3.1.1" width="50%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.154.1.3.1.2" width="50%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p>Promise&lt;void&gt;</p></td>        <td class="cellrowborder" width="50%">         <p>Promise对象。无结果返回的Promise对象。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.157.1.3.1.1" width="50%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.157.1.3.1.2" width="50%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>        <td class="cellrowborder" width="50%">         <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>        <td class="cellrowborder" width="50%">         <p>Network error. The network is unavailable.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>        <td class="cellrowborder" width="50%">         <p>No device is bound.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device disconnected.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>        <td class="cellrowborder" width="50%">         <p>App has not applied for the Wear Engine service.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>        <td class="cellrowborder" width="50%">         <p>The HUAWEI ID is not authorized.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>        <td class="cellrowborder" width="50%">         <p>User privacy is not agreed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>        <td class="cellrowborder" width="50%">         <p>The device capability is not supported.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. The user has not logged in with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device ID is invalid.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1599615141614">1008500012</a></p></td>        <td class="cellrowborder" width="50%">         <p>Too many callbacks of the same type.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>        <td class="cellrowborder" width="50%">         <p>Internal error.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">p2pClient</span>: wearEngine.<span class="hljs-property">P2pClient</span> = wearEngine.<span class="hljs-title function_">getP2pClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceList</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li>deviceList.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> (device, idx, arr) =&gt; {</li><li>  <span class="hljs-comment">// 挑选支持应用安装的设备</span></li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> device.<span class="hljs-title function_">isDeviceCapabilitySupported</span>(wearEngine.<span class="hljs-property">DeviceCapability</span>.<span class="hljs-property">APP_INSTALLATION</span>)) {</li><li>    <span class="hljs-comment">// 设置设备侧应用的应用信息：包名与指纹</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">appInfo</span>: wearEngine.<span class="hljs-property">AppInfo</span> = {</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">''</span>,</li><li>      <span class="hljs-attr">fingerprint</span>: <span class="hljs-string">''</span></li><li>    }</li><li>    <span class="hljs-comment">// 将设备侧应用参数类定义为appParam</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">appParam</span>: wearEngine.<span class="hljs-property">P2pAppParam</span> = {</li><li>      <span class="hljs-attr">remoteApp</span>: appInfo</li><li>      <span class="hljs-comment">// transformLocalAppInfo默认为false，不转换包名</span></li><li>    }</li><li>    <span class="hljs-comment">// 设置需要发送的文件信息</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">p2pMessage: wearEngine.P2pMessage</span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in receiving message, the message is <span class="hljs-subst">${p2pMessage.content}</span>.`</span>)</li><li>    }</li><li>
</li><li>    p2pClient.<span class="hljs-title function_">registerMessageReceiver</span>(device.<span class="hljs-property">randomId</span>, appParam, callback).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in registering message receiver.`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to register message receiver. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>    })</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (idx === deviceList.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {</li><li>    <span class="hljs-comment">// 若不存在目标设备则抛出错误</span></li><li>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'cannot find target device'</span>);</li><li>  }</li><li>})</li></ol></pre></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 138px;">     <h3 id="section1899163313713" device-type="phone,tablet,wearable">registerFileReceiver<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1899163313713" tips="复制节点链接"></i></h3>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>registerFileReceiver(deviceRandomId: string, appParam: P2pAppParam, callback: Callback&lt;P2pFile&gt;): Promise&lt;void&gt;</p>    <p>订阅对端设备向本端设备发送文件的事件，接收到对端设备发送的文件时使用callback异步回调，订阅成功与否使用Promise异步回调。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>参数：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.167.1.5.1.1" width="25%">         <p>参数名</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.167.1.5.1.2" width="25%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.167.1.5.1.3" width="25%">         <p>必填</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.167.1.5.1.4" width="25%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25%">         <p>deviceRandomId</p></td>        <td class="cellrowborder" width="25%">         <p>string</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次订阅的设备。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>appParam</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section7874153142020">P2pAppParam</a></p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>设备侧应用参数。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>callback</p></td>        <td class="cellrowborder" width="25%">         <p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1223384152">P2pFile</a>&gt;</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>接收到设备侧应用发送的文件后执行的回调函数。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.169.1.3.1.1" width="50%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.169.1.3.1.2" width="50%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p>Promise&lt;void&gt;</p></td>        <td class="cellrowborder" width="50%">         <p>Promise对象。无结果返回的Promise对象。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.172.1.3.1.1" width="50%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.172.1.3.1.2" width="50%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>        <td class="cellrowborder" width="50%">         <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>        <td class="cellrowborder" width="50%">         <p>Network error. The network is unavailable.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>        <td class="cellrowborder" width="50%">         <p>No device is bound.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device disconnected.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>        <td class="cellrowborder" width="50%">         <p>App has not applied for the Wear Engine service.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>        <td class="cellrowborder" width="50%">         <p>The HUAWEI ID is not authorized.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>        <td class="cellrowborder" width="50%">         <p>User privacy is not agreed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>        <td class="cellrowborder" width="50%">         <p>The device capability is not supported.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. The user has not logged in with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device ID is invalid.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1599615141614">1008500012</a></p></td>        <td class="cellrowborder" width="50%">         <p>Too many callbacks of the same type.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>        <td class="cellrowborder" width="50%">         <p>Internal error.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">p2pClient</span>: wearEngine.<span class="hljs-property">P2pClient</span> = wearEngine.<span class="hljs-title function_">getP2pClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceList</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li>deviceList.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> (device, idx, arr) =&gt; {</li><li>  <span class="hljs-comment">// 挑选支持应用安装的设备</span></li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> device.<span class="hljs-title function_">isDeviceCapabilitySupported</span>(wearEngine.<span class="hljs-property">DeviceCapability</span>.<span class="hljs-property">APP_INSTALLATION</span>)) {</li><li>    <span class="hljs-comment">// 设置设备侧应用的应用信息：包名与指纹</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">appInfo</span>: wearEngine.<span class="hljs-property">AppInfo</span> = {</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">''</span>,</li><li>      <span class="hljs-attr">fingerprint</span>: <span class="hljs-string">''</span></li><li>    }</li><li>    <span class="hljs-comment">// 将设备侧应用参数类定义为appParam</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">appParam</span>: wearEngine.<span class="hljs-property">P2pAppParam</span> = {</li><li>      <span class="hljs-attr">remoteApp</span>: appInfo</li><li>      <span class="hljs-comment">// transformLocalAppInfo默认为false，不转换包名指纹</span></li><li>    }</li><li>    <span class="hljs-comment">// 设置需要发送的文件信息</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">p2pMessage: wearEngine.P2pFile</span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in receiving file.`</span>)</li><li>    }</li><li>
</li><li>    p2pClient.<span class="hljs-title function_">registerFileReceiver</span>(device.<span class="hljs-property">randomId</span>, appParam, callback).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in registering file receiver.`</span>)</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to register file receiver. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>    })</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (idx === deviceList.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {</li><li>    <span class="hljs-comment">// 若不存在目标设备则抛出错误</span></li><li>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'cannot find target device'</span>);</li><li>  }</li><li>})</li></ol></pre></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 138px;">     <h3 id="section13676139154415" device-type="phone,tablet,wearable">unregisterMessageReceiver<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13676139154415" tips="复制节点链接"></i></h3>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>unregisterMessageReceiver(deviceRandomId: string, appParam: P2pAppParam, callback: Callback&lt;P2pMessage&gt;): Promise&lt;void&gt;</p>    <p>取消订阅对端应用向本端应用发送消息的事件，取消订阅成功与否使用Promise异步回调。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>参数：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.182.1.5.1.1" width="25%">         <p>参数名</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.182.1.5.1.2" width="25%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.182.1.5.1.3" width="25%">         <p>必填</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.182.1.5.1.4" width="25%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25%">         <p>deviceRandomId</p></td>        <td class="cellrowborder" width="25%">         <p>string</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次订阅的设备。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>appParam</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section7874153142020">P2pAppParam</a></p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>设备侧应用参数。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>callback</p></td>        <td class="cellrowborder" width="25%">         <p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section188531948121319">P2pMessage</a>&gt;</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>回调函数，需要同订阅监听时的回调函数为同一个对象。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.184.1.3.1.1" width="50%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.184.1.3.1.2" width="50%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p>Promise&lt;void&gt;</p></td>        <td class="cellrowborder" width="50%">         <p>Promise对象。无结果返回的Promise对象。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.187.1.3.1.1" width="50%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.187.1.3.1.2" width="50%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>        <td class="cellrowborder" width="50%">         <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>        <td class="cellrowborder" width="50%">         <p>Network error. The network is unavailable.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>        <td class="cellrowborder" width="50%">         <p>No device is bound.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device disconnected.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>        <td class="cellrowborder" width="50%">         <p>App has not applied for the Wear Engine service.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>        <td class="cellrowborder" width="50%">         <p>The HUAWEI ID is not authorized.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>        <td class="cellrowborder" width="50%">         <p>User privacy is not agreed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>        <td class="cellrowborder" width="50%">         <p>The device capability is not supported.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. The user has not logged in with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device ID is invalid.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>        <td class="cellrowborder" width="50%">         <p>Internal error.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">p2pClient</span>: wearEngine.<span class="hljs-property">P2pClient</span> = wearEngine.<span class="hljs-title function_">getP2pClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceList</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li>deviceList.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> (device, idx, arr) =&gt; {</li><li>  <span class="hljs-comment">// 挑选支持应用安装的设备</span></li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> device.<span class="hljs-title function_">isDeviceCapabilitySupported</span>(wearEngine.<span class="hljs-property">DeviceCapability</span>.<span class="hljs-property">APP_INSTALLATION</span>)) {</li><li>    <span class="hljs-comment">// 设置设备侧应用的应用信息：包名与指纹</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">appInfo</span>: wearEngine.<span class="hljs-property">AppInfo</span> = {</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">''</span>,</li><li>      <span class="hljs-attr">fingerprint</span>: <span class="hljs-string">''</span></li><li>    }</li><li>    <span class="hljs-comment">// 将设备侧应用参数类定义为appParam</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">appParam</span>: wearEngine.<span class="hljs-property">P2pAppParam</span> = {</li><li>      <span class="hljs-attr">remoteApp</span>: appInfo</li><li>      <span class="hljs-comment">// transformLocalAppInfo默认为false，不转换包名指纹</span></li><li>    }</li><li>    <span class="hljs-comment">// 设置需要发送的文件信息</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">p2pMessage: wearEngine.P2pMessage</span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in receiving message, the message is <span class="hljs-subst">${p2pMessage.content}</span>.`</span>)</li><li>    }</li><li>
</li><li>    p2pClient.<span class="hljs-title function_">registerMessageReceiver</span>(device.<span class="hljs-property">randomId</span>, appParam, callback).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in registering message receiver.`</span>)</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to register message receiver. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>    })</li><li>
</li><li>    p2pClient.<span class="hljs-title function_">unregisterMessageReceiver</span>(device.<span class="hljs-property">randomId</span>, appParam, callback).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in unregistering message receiver.`</span>)</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to unregister message receiver. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>    })</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (idx === deviceList.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {</li><li>    <span class="hljs-comment">// 若不存在目标设备则抛出错误</span></li><li>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'cannot find target device'</span>);</li><li>  }</li><li>})</li></ol></pre></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 138px;">     <h3 id="section146072474497" device-type="phone,tablet,wearable">unregisterFileReceiver<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section146072474497" tips="复制节点链接"></i></h3>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>unregisterFileReceiver(deviceRandomId: string, appParam: P2pAppParam, callback: Callback&lt;P2pFile&gt;): Promise&lt;void&gt;</p>    <p>取消订阅对端应用向本端应用发送文件的事件，取消订阅成功与否使用Promise异步回调。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>参数：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.197.1.5.1.1" width="25%">         <p>参数名</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.197.1.5.1.2" width="25%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.197.1.5.1.3" width="25%">         <p>必填</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.197.1.5.1.4" width="25%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25%">         <p>deviceRandomId</p></td>        <td class="cellrowborder" width="25%">         <p>string</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次订阅的设备。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>appParam</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section7874153142020">P2pAppParam</a></p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>设备侧应用参数。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>callback</p></td>        <td class="cellrowborder" width="25%">         <p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1223384152">P2pFile</a>&gt;</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>回调函数，需要同订阅监听时的回调函数为同一个对象。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.199.1.3.1.1" width="50%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.199.1.3.1.2" width="50%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p>Promise&lt;void&gt;</p></td>        <td class="cellrowborder" width="50%">         <p>Promise对象。无结果返回的Promise对象。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.202.1.3.1.1" width="50%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.202.1.3.1.2" width="50%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>        <td class="cellrowborder" width="50%">         <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>        <td class="cellrowborder" width="50%">         <p>Network error. The network is unavailable.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>        <td class="cellrowborder" width="50%">         <p>No device is bound.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device disconnected.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>        <td class="cellrowborder" width="50%">         <p>App has not applied for the Wear Engine service.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>        <td class="cellrowborder" width="50%">         <p>The HUAWEI ID is not authorized.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>        <td class="cellrowborder" width="50%">         <p>User privacy is not agreed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>        <td class="cellrowborder" width="50%">         <p>The device capability is not supported.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. The user has not logged in with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device ID is invalid.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>        <td class="cellrowborder" width="50%">         <p>Internal error.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">p2pClient</span>: wearEngine.<span class="hljs-property">P2pClient</span> = wearEngine.<span class="hljs-title function_">getP2pClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceList</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li>deviceList.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> (device, idx, arr) =&gt; {</li><li>  <span class="hljs-comment">// 挑选支持应用安装的设备</span></li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> device.<span class="hljs-title function_">isDeviceCapabilitySupported</span>(wearEngine.<span class="hljs-property">DeviceCapability</span>.<span class="hljs-property">APP_INSTALLATION</span>)) {</li><li>    <span class="hljs-comment">// 设置设备侧应用的应用信息：包名与指纹</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">appInfo</span>: wearEngine.<span class="hljs-property">AppInfo</span> = {</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">''</span>,</li><li>      <span class="hljs-attr">fingerprint</span>: <span class="hljs-string">''</span></li><li>    }</li><li>    <span class="hljs-comment">// 将设备侧应用参数类定义为appParam</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">appParam</span>: wearEngine.<span class="hljs-property">P2pAppParam</span> = {</li><li>      <span class="hljs-attr">remoteApp</span>: appInfo</li><li>      <span class="hljs-comment">// transformLocalAppInfo默认为false，不转换包名指纹</span></li><li>    }</li><li>    <span class="hljs-comment">// 设置需要发送的文件信息</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">p2pMessage: wearEngine.P2pFile</span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in receiving file.`</span>)</li><li>    }</li><li>
</li><li>    p2pClient.<span class="hljs-title function_">registerFileReceiver</span>(device.<span class="hljs-property">randomId</span>, appParam, callback).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in registering file receiver.`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to register file receiver. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>    })</li><li>
</li><li>    p2pClient.<span class="hljs-title function_">unregisterFileReceiver</span>(device.<span class="hljs-property">randomId</span>, appParam, callback).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in unregistering file receiver.`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to unregister file receiver. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>    })</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (idx === deviceList.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {</li><li>    <span class="hljs-comment">// 若不存在目标设备则抛出错误</span></li><li>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'cannot find target device'</span>);</li><li>  }</li><li>})</li></ol></pre></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="section1357110221710" device-type="phone,tablet,wearable">AppInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1357110221710" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>设备侧应用信息类。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.210.1.6.1.1" width="27.52%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.210.1.6.1.2" width="17.03%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.210.1.6.1.3" width="9.4%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.210.1.6.1.4" width="10.92%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.210.1.6.1.5" width="35.13%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="27.52%">         <p>bundleName</p></td>        <td class="cellrowborder" width="17.03%">         <p>string</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>否</p></td>        <td class="cellrowborder" width="35.13%">         <p>应用名称。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>fingerprint</p></td>        <td class="cellrowborder" width="17.03%">         <p>string</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>否</p></td>        <td class="cellrowborder" width="35.13%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wearengine_faq-9" target="_blank">应用指纹，用于标识应用的唯一身份。</a></p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 654px;">     <h2 id="section34326155711" device-type="phone,tablet,wearable">P2pResultCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section34326155711" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>存储P2p通信的返回值枚举类。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.211.6.1.4.1.1" width="28.082808280828083%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.211.6.1.4.1.2" width="26.742674267426747%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.211.6.1.4.1.3" width="45.174517451745174%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="28.082808280828083%">          <p>REMOTE_APP_NOT_INSTALLED</p></td>         <td class="cellrowborder" width="26.742674267426747%">          <p>200</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>设备侧应用未安装。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.082808280828083%">          <p>REMOTE_APP_NOT_RUNNING</p></td>         <td class="cellrowborder" width="26.742674267426747%">          <p>201</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>设备侧应用未运行。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.082808280828083%">          <p>REMOTE_APP_RUNNING</p></td>         <td class="cellrowborder" width="26.742674267426747%">          <p>202</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>设备侧应用运行中。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.082808280828083%">          <p>UNKNOWN_ERROR</p></td>         <td class="cellrowborder" width="26.742674267426747%">          <p>203</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>未知错误。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.082808280828083%">          <p>COMMUNICATION_FAILURE</p></td>         <td class="cellrowborder" width="26.742674267426747%">          <p>206</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>与设备侧应用通信失败。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.082808280828083%">          <p>COMMUNICATION_SUCCESS</p></td>         <td class="cellrowborder" width="26.742674267426747%">          <p>207</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>与设备侧应用通信成功。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="section75108813115" device-type="phone,tablet,wearable">P2pResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section75108813115" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>存储P2p通信的结果。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.217.1.6.1.1" width="27.52%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.217.1.6.1.2" width="17.03%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.217.1.6.1.3" width="9.4%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.217.1.6.1.4" width="10.92%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.217.1.6.1.5" width="35.13%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="27.52%">         <p>code</p></td>        <td class="cellrowborder" width="17.03%">         <p>number</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>是</p></td>        <td class="cellrowborder" width="35.13%">         <p>用于返回除文件传输外的P2p通信结果，返回值含义见<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section34326155711">P2pResultCode</a>。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>progress</p></td>        <td class="cellrowborder" width="17.03%">         <p>number</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>是</p></td>        <td class="cellrowborder" width="35.13%">         <p>仅用于上报文件传输进度，返回值范围：0-100。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="section188531948121319" device-type="phone,tablet,wearable">P2pMessage<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section188531948121319" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>本端设备应用向对端设备应用发送的消息类。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.223.1.6.1.1" width="27.52%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.223.1.6.1.2" width="17.03%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.223.1.6.1.3" width="9.4%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.223.1.6.1.4" width="10.92%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.223.1.6.1.5" width="35.13%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="27.52%">         <p>content</p></td>        <td class="cellrowborder" width="17.03%">         <p>Uint8Array</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>否</p></td>        <td class="cellrowborder" width="35.13%">         <p>传输消息的内容，格式为Uint8Array（二进制字节数组）类型数据。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="section1223384152" device-type="phone,tablet,wearable">P2pFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1223384152" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>本端设备应用向对端设备应用发送的文件类。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.229.1.6.1.1" width="27.52%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.229.1.6.1.2" width="17.03%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.229.1.6.1.3" width="9.4%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.229.1.6.1.4" width="10.92%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.229.1.6.1.5" width="35.13%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="27.52%">         <p>file</p></td>        <td class="cellrowborder" width="17.03%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-fs#file" target="_blank">fs.File</a></p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>否</p></td>        <td class="cellrowborder" width="35.13%">         <p>文件对象。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="section7874153142020" device-type="phone,tablet,wearable">P2pAppParam<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7874153142020" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>P2p通信过程中可用的设备侧应用参数类。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.235.1.6.1.1" width="27.52%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.235.1.6.1.2" width="17.03%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.235.1.6.1.3" width="9.4%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.235.1.6.1.4" width="10.92%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.235.1.6.1.5" width="35.13%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="27.52%">         <p>remoteApp</p></td>        <td class="cellrowborder" width="17.03%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1357110221710">AppInfo</a></p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>否</p></td>        <td class="cellrowborder" width="35.13%">         <p>设备侧应用信息类。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>transformLocalAppInfo</p></td>        <td class="cellrowborder" width="17.03%">         <p>boolean</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>是</p></td>        <td class="cellrowborder" width="35.13%">         <p>是否需要将本地包名和指纹转换为兼容应用在云端存储的包名和指纹。默认值：false。</p>         <p>true：转换；false：不转换。</p>         <p>待兼容应用设置请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wearengine_apply" target="_blank">申请接入Wear Engine服务</a>。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1426px;">     <h2 id="section552416431386" device-type="phone,tablet,wearable">wearEngine.getNotifyClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section552416431386" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getNotifyClient(context: common.Context): NotifyClient</p>     <p>用于获取Notify模块的客户端。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.236.9.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.236.9.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.236.9.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.236.9.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>context</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>Context上下文，仅支持包含connectServiceExtensionAbility方法的Context（例：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#uiabilitycontext-1" target="_blank">UIAbilityContext</a>）。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.236.11.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.236.11.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section82221754103913">NotifyClient</a></p></td>         <td class="cellrowborder" width="50%">          <p>模板化通知客户端，存储了发送模板化通知的相关方法。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.236.14.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.236.14.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section5941173162512">801</a></p></td>         <td class="cellrowborder" width="50%">          <p>Capability not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">notifyClient</span>: wearEngine.<span class="hljs-property">NotifyClient</span> = wearEngine.<span class="hljs-title function_">getNotifyClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting notify client`</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="section82221754103913" device-type="phone,tablet,wearable">NotifyClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section82221754103913" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>Notify客户端类，由<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section552416431386">wearEngine.getNotifyClient</a>返回得到。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 122px;">     <h3 id="section087562072313" device-type="phone,tablet,wearable" class="firsth2">notify<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section087562072313" tips="复制节点链接"></i></h3>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>notify(deviceRandomId: string, options: NotificationOptions): Promise&lt;void&gt;</p>    <p>向穿戴设备发送模板化通知，返回是否发送成功，使用Promise异步回调。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>参数：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.246.1.5.1.1" width="25%">         <p>参数名</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.246.1.5.1.2" width="25%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.246.1.5.1.3" width="17.9%">         <p>必填</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.246.1.5.1.4" width="32.1%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25%">         <p>deviceRandomId</p></td>        <td class="cellrowborder" width="25%">         <p>string</p></td>        <td class="cellrowborder" width="17.9%">         <p>是</p></td>        <td class="cellrowborder" width="32.1%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次查询的设备。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>options</p></td>        <td class="cellrowborder" width="25%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section0751457344">NotificationOptions</a></p></td>        <td class="cellrowborder" width="17.9%">         <p>是</p></td>        <td class="cellrowborder" width="32.1%">         <p>模板化通知配置参数类。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.248.1.3.1.1" width="50%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.248.1.3.1.2" width="50%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p>Promise&lt;void&gt;</p></td>        <td class="cellrowborder" width="50%">         <p>Promise对象。无结果返回的Promise对象。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.251.1.3.1.1" width="50%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.251.1.3.1.2" width="50%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>        <td class="cellrowborder" width="50%">         <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>        <td class="cellrowborder" width="50%">         <p>Network error. The network is unavailable.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>        <td class="cellrowborder" width="50%">         <p>No device is bound.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device disconnected.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>        <td class="cellrowborder" width="50%">         <p>App has not applied for the Wear Engine service.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>        <td class="cellrowborder" width="50%">         <p>The HUAWEI ID is not authorized.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>        <td class="cellrowborder" width="50%">         <p>User privacy is not agreed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>        <td class="cellrowborder" width="50%">         <p>The device capability is not supported.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. The user has not logged in with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>        <td class="cellrowborder" width="50%">         <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>        <td class="cellrowborder" width="50%">         <p>Device ID is invalid.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>        <td class="cellrowborder" width="50%">         <p>Internal error.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">notifyClient</span>: wearEngine.<span class="hljs-property">NotifyClient</span> = wearEngine.<span class="hljs-title function_">getNotifyClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">devices</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li><span class="hljs-keyword">if</span> (devices.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>  <span class="hljs-comment">// 从得到的设备列表中选取目标设备，并定义为device(假设数组中存在已连接设备且第一位即为目标设备)</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">device</span>: wearEngine.<span class="hljs-property">Device</span> = devices[<span class="hljs-number">0</span>];</li><li>
</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">button1</span>: wearEngine.<span class="hljs-property">NotificationButton</span> = {</li><li>    <span class="hljs-attr">buttonId</span>: wearEngine.<span class="hljs-property">ButtonId</span>.<span class="hljs-property">FIRST_BUTTON</span>,</li><li>    <span class="hljs-attr">content</span>: <span class="hljs-string">'button_1'</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">type1Notification</span>: wearEngine.<span class="hljs-property">Notification</span> = {</li><li>    <span class="hljs-attr">type</span>: wearEngine.<span class="hljs-property">NotificationType</span>.<span class="hljs-property">NOTIFICATION_WITH_ONE_BUTTON</span>,</li><li>    <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'bundleName'</span>,</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">'title'</span>,</li><li>    <span class="hljs-attr">text</span>: <span class="hljs-string">'text'</span>,</li><li>    <span class="hljs-attr">buttons</span>: [button1]</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: wearEngine.<span class="hljs-property">NotificationOptions</span> = {</li><li>    <span class="hljs-attr">notification</span>: type1Notification,</li><li>    <span class="hljs-attr">onAction</span>: <span class="hljs-function">(<span class="hljs-params">feedback: wearEngine.NotificationFeedback</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`one button notify get feedback is <span class="hljs-subst">${feedback.action ? feedback.action : feedback.errorCode}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  notifyClient.<span class="hljs-title function_">notify</span>(device.<span class="hljs-property">randomId</span>, options).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in sending notification.`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to send notification. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="section0751457344" device-type="phone,tablet,wearable">NotificationOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section0751457344" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>模板化通知的配置参数类。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tiledSection" style="contain-intrinsic-size: auto 122px;">     <h3 id="section55942133120" device-type="phone,tablet" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section55942133120" tips="复制节点链接"></i></h3>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div></div>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.260.1.6.1.1" width="27.52%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.260.1.6.1.2" width="17.03%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.260.1.6.1.3" width="9.4%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.260.1.6.1.4" width="10.92%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.260.1.6.1.5" width="35.13%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="27.52%">         <p>notification</p></td>        <td class="cellrowborder" width="17.03%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section33797461644">Notification</a></p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>否</p></td>        <td class="cellrowborder" width="35.13%">         <p>模板化通知的通知体参数类。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 565px;">     <h3 id="section136914723110" device-type="phone,tablet,wearable">onAction<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section136914723110" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>onAction(feedback: NotificationFeedback): void</p>     <p>设备侧对应用发出的通知做相关操作后执行的回调函数。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.261.9.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.261.9.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.261.9.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.261.9.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>feedback</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section498821414418">NotificationFeedback</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>设备侧操作通知的反馈类。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="section33797461644" device-type="phone,tablet,wearable">Notification<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section33797461644" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>模板化通知的通知体参数类。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.267.1.6.1.1" width="25.040000000000003%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.267.1.6.1.2" width="19.509999999999998%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.267.1.6.1.3" width="9.4%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.267.1.6.1.4" width="10.92%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.267.1.6.1.5" width="35.13%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25.040000000000003%">         <p>type</p></td>        <td class="cellrowborder" width="19.509999999999998%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section45813154136">NotificationType</a></p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>否</p></td>        <td class="cellrowborder" width="35.13%">         <p>通知的模板类型。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25.040000000000003%">         <p>bundleName</p></td>        <td class="cellrowborder" width="19.509999999999998%">         <p>string</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>否</p></td>        <td class="cellrowborder" width="35.13%">         <p>发送通知应用的包名。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25.040000000000003%">         <p>title</p></td>        <td class="cellrowborder" width="19.509999999999998%">         <p>string</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>否</p></td>        <td class="cellrowborder" width="35.13%">         <p>通知的标题，取值范围：[1，28)，单位字节。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25.040000000000003%">         <p>text</p></td>        <td class="cellrowborder" width="19.509999999999998%">         <p>string</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>否</p></td>        <td class="cellrowborder" width="35.13%">         <p>通知的内容，取值范围：[1，400)，单位字节。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25.040000000000003%">         <p>buttons</p></td>        <td class="cellrowborder" width="19.509999999999998%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section7336124218819">NotificationButton</a>[]</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>是</p></td>        <td class="cellrowborder" width="35.13%">         <p>通知按钮信息类，若未填写，默认为空。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 660px;">     <h2 id="section45813154136" device-type="phone,tablet,wearable">NotificationType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section45813154136" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>模板化通知的模板类型枚举类。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.268.6.1.4.1.1" width="25.61256125612561%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.268.6.1.4.1.2" width="29.212921292129213%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.268.6.1.4.1.3" width="45.174517451745174%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>NOTIFICATION_WITHOUT_BUTTONS</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>50</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>没有按钮的通知类型。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>NOTIFICATION_WITH_ONE_BUTTON</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>51</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>拥有一个按钮的通知类型。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>NOTIFICATION_WITH_TWO_BUTTONS</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>52</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>拥有两个按钮的通知类型。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>NOTIFICATION_WITH_THREE_BUTTONS</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>53</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>拥有三个按钮的通知类型。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="section7336124218819" device-type="phone,tablet,wearable">NotificationButton<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7336124218819" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>通知按钮信息类。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.274.1.6.1.1" width="25.040000000000003%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.274.1.6.1.2" width="19.509999999999998%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.274.1.6.1.3" width="9.4%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.274.1.6.1.4" width="10.92%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.274.1.6.1.5" width="35.13%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25.040000000000003%">         <p>buttonId</p></td>        <td class="cellrowborder" width="19.509999999999998%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section171882571499">ButtonId</a></p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>否</p></td>        <td class="cellrowborder" width="35.13%">         <p>按钮Id枚举类。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25.040000000000003%">         <p>content</p></td>        <td class="cellrowborder" width="19.509999999999998%">         <p>string</p></td>        <td class="cellrowborder" width="9.4%">         <p>否</p></td>        <td class="cellrowborder" width="10.92%">         <p>否</p></td>        <td class="cellrowborder" width="35.13%">         <p>按钮上的文字内容，取值范围：[1，12)，单位字节。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 519px;">     <h2 id="section171882571499" device-type="phone,tablet,wearable">ButtonId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section171882571499" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>模板化通知的按钮Id枚举类。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.275.6.1.4.1.1" width="25.61256125612561%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.275.6.1.4.1.2" width="29.212921292129213%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.275.6.1.4.1.3" width="45.174517451745174%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>FIRST_BUTTON</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>firstButton</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>第一个按钮的Id。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>SECOND_BUTTON</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>secondButton</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>第二个按钮的Id。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>THIRD_BUTTON</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>thirdButton</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>第三个按钮的Id。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="section498821414418" device-type="phone,tablet,wearable">NotificationFeedback<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section498821414418" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>设备侧操作通知的反馈类。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.281.1.6.1.1" width="27.52%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.281.1.6.1.2" width="17.7%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.281.1.6.1.3" width="8.73%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.281.1.6.1.4" width="9.64%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.281.1.6.1.5" width="36.41%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="27.52%">         <p>action</p></td>        <td class="cellrowborder" width="17.7%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section924615208466">NotificationAction</a></p></td>        <td class="cellrowborder" width="8.73%">         <p>否</p></td>        <td class="cellrowborder" width="9.64%">         <p>是</p></td>        <td class="cellrowborder" width="36.41%">         <p>设备侧对通知的操作反馈枚举类。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>errorCode</p></td>        <td class="cellrowborder" width="17.7%">         <p>number</p></td>        <td class="cellrowborder" width="8.73%">         <p>否</p></td>        <td class="cellrowborder" width="9.64%">         <p>是</p></td>        <td class="cellrowborder" width="36.41%">         <p>错误码，含义请见<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section9782193965320">NotificationErrorCode</a>。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 633px;">     <h2 id="section924615208466" device-type="phone,tablet,wearable">NotificationAction<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section924615208466" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>设备侧对通知的操作反馈枚举类。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.282.6.1.4.1.1" width="25.61256125612561%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.282.6.1.4.1.2" width="29.212921292129213%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.282.6.1.4.1.3" width="45.174517451745174%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>NOTIFICATION_SWITCHED_TO_BACKGROUND</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>0</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>用户使用Home键退出或熄屏，通知退回后台。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>NOTIFICATION_DELETED</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>1</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>通知被用户删除。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>FIRST_BUTTON_CLICKED</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>2</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>用户点击通知的第一个按钮。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>SECOND_BUTTON_CLICKED</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>3</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>用户点击通知的第二个按钮。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>THIRD_BUTTON_CLICKED</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>4</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>用户点击通知的第三个按钮。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 453px;">     <h2 id="section9782193965320" device-type="phone,tablet,wearable">NotificationErrorCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section9782193965320" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>通知在设备侧发生错误的反馈枚举类。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.283.6.1.4.1.1" width="25.61256125612561%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.283.6.1.4.1.2" width="29.212921292129213%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.283.6.1.4.1.3" width="45.174517451745174%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>INTERNAL_ERROR</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>255</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>Wear Engine内部错误。通过<a href="https://developer.huawei.com/consumer/cn/support/feedback/#/" target="_blank">在线提单</a>提交问题，华为支持人员会及时处理。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1426px;">     <h2 id="section1529943512113" device-type="phone,tablet,wearable">wearEngine.getSensorClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1529943512113" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getSensorClient(context: common.Context): SensorClient</p>     <p>用于获取Sensor模块的客户端。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.284.9.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.284.9.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.284.9.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.284.9.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>context</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>Context上下文，仅支持包含connectServiceExtensionAbility方法的Context（例：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#uiabilitycontext-1" target="_blank">UIAbilityContext</a>）。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.284.11.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.284.11.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1743102372015">SensorClient</a></p></td>         <td class="cellrowborder" width="50%">          <p>Sensor客户端，存储了Sensor模块的相关方法。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.284.14.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.284.14.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section5941173162512">801</a></p></td>         <td class="cellrowborder" width="50%">          <p>Capability not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sensorClient</span>: wearEngine.<span class="hljs-property">SensorClient</span> = wearEngine.<span class="hljs-title function_">getSensorClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting sensor client`</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="section1743102372015" device-type="phone,tablet,wearable">SensorClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1743102372015" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>Sensor客户端类。由接口<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1529943512113">wearEngine.getSensorClient</a>返回得到。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2209px;">     <h3 id="section168854385238" device-type="phone,tablet,wearable" class="firsth2">getSensorList<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section168854385238" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getSensorList(deviceRandomId: string): Promise&lt;Sensor[]&gt;</p>     <p>获取设备侧可用的传感器列表，返回对应的传感器列表，使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.286.9.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.286.9.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.286.9.1.5.1.3" width="17.9%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.286.9.1.5.1.4" width="32.1%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>deviceRandomId</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="17.9%">          <p>是</p></td>         <td class="cellrowborder" width="32.1%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定设备。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.286.11.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.286.11.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section19142203612579">Sensor</a>[]&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回设备侧可用的传感器列表。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.286.14.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.286.14.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>         <td class="cellrowborder" width="50%">          <p>Network error. The network is unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>         <td class="cellrowborder" width="50%">          <p>No device is bound.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device disconnected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>         <td class="cellrowborder" width="50%">          <p>App has not applied for the Wear Engine service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>         <td class="cellrowborder" width="50%">          <p>The HUAWEI ID is not authorized.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>         <td class="cellrowborder" width="50%">          <p>User privacy is not agreed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>         <td class="cellrowborder" width="50%">          <p>The device capability is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. The user has not logged in with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device ID is invalid.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sensorClient</span>: wearEngine.<span class="hljs-property">SensorClient</span> = wearEngine.<span class="hljs-title function_">getSensorClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">devices</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li><span class="hljs-keyword">if</span> (devices.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>  <span class="hljs-comment">// 从得到的设备列表中选取目标设备，并定义为device(假设数组中存在已连接设备且第一位即为目标设备)</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">device</span>: wearEngine.<span class="hljs-property">Device</span> = devices[<span class="hljs-number">0</span>];</li><li>
</li><li>  sensorClient.<span class="hljs-title function_">getSensorList</span>(device.<span class="hljs-property">randomId</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">sensorList</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting sensor list, result is <span class="hljs-subst">${sensorList}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get sensor list. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2610px;">     <h3 id="section1043415982714" device-type="phone,tablet,wearable">subscribeSensor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1043415982714" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>subscribeSensor(deviceRandomId: string, type: SensorType, callback: Callback&lt;SensorResult&gt;): Promise&lt;void&gt;</p>     <p>订阅指定的传感器数据上报，返回是否订阅成功，使用Promise异步回调。</p>     <p></p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.287.10.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.287.10.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.287.10.1.5.1.3" width="17.9%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.287.10.1.5.1.4" width="32.1%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>deviceRandomId</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="17.9%">          <p>是</p></td>         <td class="cellrowborder" width="32.1%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次订阅的设备。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>type</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section2420171225210">SensorType</a></p></td>         <td class="cellrowborder" width="17.9%">          <p>是</p></td>         <td class="cellrowborder" width="32.1%">          <p>传感器类别，用于指定本次订阅的传感器。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>callback</p></td>         <td class="cellrowborder" width="25%">          <p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section19118123861519">SensorResult</a>&gt;</p></td>         <td class="cellrowborder" width="17.9%">          <p>是</p></td>         <td class="cellrowborder" width="32.1%">          <p>回调函数，用于处理传感器上报的数据。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.287.12.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.287.12.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。无结果返回的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.287.15.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.287.15.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>         <td class="cellrowborder" width="50%">          <p>Network error. The network is unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>         <td class="cellrowborder" width="50%">          <p>No device is bound.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device disconnected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>         <td class="cellrowborder" width="50%">          <p>App has not applied for the Wear Engine service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>         <td class="cellrowborder" width="50%">          <p>The HUAWEI ID is not authorized.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>         <td class="cellrowborder" width="50%">          <p>User privacy is not agreed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>         <td class="cellrowborder" width="50%">          <p>The device capability is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. The user has not logged in with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device ID is invalid.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1599615141614">1008500012</a></p></td>         <td class="cellrowborder" width="50%">          <p>Too many callbacks of the same type.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sensorClient</span>: wearEngine.<span class="hljs-property">SensorClient</span> = wearEngine.<span class="hljs-title function_">getSensorClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">devices</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li><span class="hljs-keyword">if</span> (devices.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>  <span class="hljs-comment">// 从得到的设备列表中选取目标设备，并定义为device(假设数组中存在已连接设备,第一位即为目标设备且具备相关能力)</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">device</span>: wearEngine.<span class="hljs-property">Device</span> = devices[<span class="hljs-number">0</span>];</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">sensorList</span>: wearEngine.<span class="hljs-property">Sensor</span>[] = <span class="hljs-keyword">await</span> sensorClient.<span class="hljs-title function_">getSensorList</span>(device.<span class="hljs-property">randomId</span>);</li><li>  sensorList.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">sensor, idx, arr</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (sensor.<span class="hljs-property">type</span> === wearEngine.<span class="hljs-property">SensorType</span>.<span class="hljs-property">ACCELEROMETER</span>) {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">sensorResult: wearEngine.SensorResult</span>) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting sensor result, result is <span class="hljs-subst">${sensorResult}</span>`</span>);</li><li>      }</li><li>      <span class="hljs-comment">// 订阅加速度传感器数据上报</span></li><li>      sensorClient.<span class="hljs-title function_">subscribeSensor</span>(device.<span class="hljs-property">randomId</span>, wearEngine.<span class="hljs-property">SensorType</span>.<span class="hljs-property">ACCELEROMETER</span>, callback).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in subscribing sensor data.`</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to subscribe sensor data. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      })</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2723px;">     <h3 id="section1616121311379" device-type="phone,tablet,wearable">unsubscribeSensor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1616121311379" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>unsubscribeSensor(deviceRandomId: string, type: SensorType, callback: Callback&lt;SensorResult&gt;): Promise&lt;void&gt;</p>     <p>取消订阅指定的传感器数据上报，返回是否取消成功，使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.288.9.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.288.9.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.288.9.1.5.1.3" width="17.9%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.288.9.1.5.1.4" width="32.1%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>deviceRandomId</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="17.9%">          <p>是</p></td>         <td class="cellrowborder" width="32.1%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section385118379447">Device</a>的随机标识符，用于指定本次取消订阅的设备。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>type</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section2420171225210">SensorType</a></p></td>         <td class="cellrowborder" width="17.9%">          <p>是</p></td>         <td class="cellrowborder" width="32.1%">          <p>传感器类别，用于指定本次取消订阅的传感器。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>callback</p></td>         <td class="cellrowborder" width="25%">          <p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section19118123861519">SensorResult</a>&gt;</p></td>         <td class="cellrowborder" width="17.9%">          <p>是</p></td>         <td class="cellrowborder" width="32.1%">          <p>回调函数，用于处理传感器上报的数据，需要同订阅监听时的回调函数为同一个对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.288.11.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.288.11.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。无结果返回的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.288.14.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.288.14.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1047474644710">1008500001</a></p></td>         <td class="cellrowborder" width="50%">          <p>Network error. The network is unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section18859424615">1008500002</a></p></td>         <td class="cellrowborder" width="50%">          <p>No device is bound.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section11616131326">1008500003</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device disconnected.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section485113712218">1008500004</a></p></td>         <td class="cellrowborder" width="50%">          <p>App has not applied for the Wear Engine service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section665613120197">1008500005</a></p></td>         <td class="cellrowborder" width="50%">          <p>The HUAWEI ID is not authorized.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1461311549277">1008500006</a></p></td>         <td class="cellrowborder" width="50%">          <p>User privacy is not agreed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section15917165718219">1008500007</a></p></td>         <td class="cellrowborder" width="50%">          <p>The device capability is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section612518413314">1008500008</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. The user has not logged in with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section94850224314">1008500009</a></p></td>         <td class="cellrowborder" width="50%">          <p>Account error. Failed to obtain account information with HUAWEI ID.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section411611281734">1008500010</a></p></td>         <td class="cellrowborder" width="50%">          <p>Device ID is invalid.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sensorClient</span>: wearEngine.<span class="hljs-property">SensorClient</span> = wearEngine.<span class="hljs-title function_">getSensorClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">deviceClient</span>: wearEngine.<span class="hljs-property">DeviceClient</span> = wearEngine.<span class="hljs-title function_">getDeviceClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">devices</span>: wearEngine.<span class="hljs-property">Device</span>[] = <span class="hljs-keyword">await</span> deviceClient.<span class="hljs-title function_">getConnectedDevices</span>();</li><li>
</li><li><span class="hljs-keyword">if</span> (devices.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>  <span class="hljs-comment">// 从得到的设备列表中选取目标设备，并定义为device(假设数组中存在已连接设备,第一位即为目标设备且具备相关能力)</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">device</span>: wearEngine.<span class="hljs-property">Device</span> = devices[<span class="hljs-number">0</span>];</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">sensorList</span>: wearEngine.<span class="hljs-property">Sensor</span>[] = <span class="hljs-keyword">await</span> sensorClient.<span class="hljs-title function_">getSensorList</span>(device.<span class="hljs-property">randomId</span>);</li><li>  sensorList.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">sensor, idx, arr</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (sensor.<span class="hljs-property">type</span> === wearEngine.<span class="hljs-property">SensorType</span>.<span class="hljs-property">ACCELEROMETER</span>) {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">sensorResult: wearEngine.SensorResult</span>) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting sensor result, result is <span class="hljs-subst">${sensorResult}</span>`</span>);</li><li>      }</li><li>      <span class="hljs-comment">// 订阅加速度传感器数据上报</span></li><li>      sensorClient.<span class="hljs-title function_">subscribeSensor</span>(device.<span class="hljs-property">randomId</span>, wearEngine.<span class="hljs-property">SensorType</span>.<span class="hljs-property">ACCELEROMETER</span>, callback).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in subscribing sensor data.`</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to subscribe sensor data. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      })</li><li>      <span class="hljs-comment">// 取消加速度传感器数据上报, 注意传入的回调函数需与订阅时为同一对象</span></li><li>      sensorClient.<span class="hljs-title function_">unsubscribeSensor</span>(device.<span class="hljs-property">randomId</span>, wearEngine.<span class="hljs-property">SensorType</span>.<span class="hljs-property">ACCELEROMETER</span>, callback).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in unsubscribing sensor data.`</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to unsubscribe sensor data. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      })</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 678px;">     <h2 id="section2420171225210" device-type="phone,tablet,wearable">SensorType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2420171225210" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>传感器类型。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.289.6.1.4.1.1" width="25.61256125612561%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.289.6.1.4.1.2" width="29.212921292129213%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.289.6.1.4.1.3" width="45.174517451745174%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>ELECTROCARDIOGRAPHY</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>0</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>ECG（electrocardiograph）传感器。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>PHOTOPLETHYSMOGRAPHY</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>1</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>PPG（photoplethysmogram）传感器。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>ACCELEROMETER</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>2</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>加速度传感器。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>GYROSCOPE</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>3</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>陀螺仪传感器。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>MAGNETIC_FIELD</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>4</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>磁力传感器。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>HEART_RATE</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>6</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>心率传感器。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="section19142203612579" device-type="phone,tablet,wearable">Sensor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section19142203612579" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>传感器信息类。</p>    <p></p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.296.1.6.1.1" width="27.52%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.296.1.6.1.2" width="17.7%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.296.1.6.1.3" width="8.73%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.296.1.6.1.4" width="9.64%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.296.1.6.1.5" width="36.41%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="27.52%">         <p>name</p></td>        <td class="cellrowborder" width="17.7%">         <p>string</p></td>        <td class="cellrowborder" width="8.73%">         <p>否</p></td>        <td class="cellrowborder" width="9.64%">         <p>否</p></td>        <td class="cellrowborder" width="36.41%">         <p>传感器名称。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>id</p></td>        <td class="cellrowborder" width="17.7%">         <p>number</p></td>        <td class="cellrowborder" width="8.73%">         <p>否</p></td>        <td class="cellrowborder" width="9.64%">         <p>否</p></td>        <td class="cellrowborder" width="36.41%">         <p>传感器ID。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>type</p></td>        <td class="cellrowborder" width="17.7%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section2420171225210">SensorType</a></p></td>        <td class="cellrowborder" width="8.73%">         <p>否</p></td>        <td class="cellrowborder" width="9.64%">         <p>否</p></td>        <td class="cellrowborder" width="36.41%">         <p>传感器类型。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>accuracy</p></td>        <td class="cellrowborder" width="17.7%">         <p>number</p></td>        <td class="cellrowborder" width="8.73%">         <p>否</p></td>        <td class="cellrowborder" width="9.64%">         <p>是</p></td>        <td class="cellrowborder" width="36.41%">         <p>传感器采样周期，单位毫秒。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>resolution</p></td>        <td class="cellrowborder" width="17.7%">         <p>number</p></td>        <td class="cellrowborder" width="8.73%">         <p>否</p></td>        <td class="cellrowborder" width="9.64%">         <p>是</p></td>        <td class="cellrowborder" width="36.41%">         <p>传感器分辨率，当前仅作为Sensor对象的返回值信息。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>isUtcTimestampSupported</p></td>        <td class="cellrowborder" width="17.7%">         <p>boolean</p></td>        <td class="cellrowborder" width="8.73%">         <p>否</p></td>        <td class="cellrowborder" width="9.64%">         <p>否</p></td>        <td class="cellrowborder" width="36.41%">         <p>传感器是否支持UTC（ Coordinated Universal Time）时间戳。true：支持，false：不支持。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="section1896124869" device-type="phone,tablet,wearable">SensorData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1896124869" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>传感器上报数据类。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.302.1.6.1.1" width="27.52%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.302.1.6.1.2" width="17.7%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.302.1.6.1.3" width="8.73%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.302.1.6.1.4" width="9.64%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.302.1.6.1.5" width="36.41%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="27.52%">         <p>sensorType</p></td>        <td class="cellrowborder" width="17.7%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section2420171225210">SensorType</a></p></td>        <td class="cellrowborder" width="8.73%">         <p>否</p></td>        <td class="cellrowborder" width="9.64%">         <p>否</p></td>        <td class="cellrowborder" width="36.41%">         <p>传感器类型。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>data</p></td>        <td class="cellrowborder" width="17.7%">         <p>number[]</p></td>        <td class="cellrowborder" width="8.73%">         <p>否</p></td>        <td class="cellrowborder" width="9.64%">         <p>否</p></td>        <td class="cellrowborder" width="36.41%">         <p>数据内容，格式及含义请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/device_sensor#section18811142832216" target="_blank">穿戴设备传感器数据格式及样例</a>。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>channel</p></td>        <td class="cellrowborder" width="17.7%">         <p>number</p></td>        <td class="cellrowborder" width="8.73%">         <p>否</p></td>        <td class="cellrowborder" width="9.64%">         <p>是</p></td>        <td class="cellrowborder" width="36.41%">         <p>传感器通道ID，为大于0的整数。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>timestamp</p></td>        <td class="cellrowborder" width="17.7%">         <p>number</p></td>        <td class="cellrowborder" width="8.73%">         <p>否</p></td>        <td class="cellrowborder" width="9.64%">         <p>是</p></td>        <td class="cellrowborder" width="36.41%">         <p>计时时间戳。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>utcTimestamp</p></td>        <td class="cellrowborder" width="17.7%">         <p>number</p></td>        <td class="cellrowborder" width="8.73%">         <p>否</p></td>        <td class="cellrowborder" width="9.64%">         <p>是</p></td>        <td class="cellrowborder" width="36.41%">         <p>UTC时间戳。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 633px;">     <h2 id="section173105551894" device-type="phone,tablet,wearable">SensorErrorCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section173105551894" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>传感器类型。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.303.6.1.4.1.1" width="25.61256125612561%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.303.6.1.4.1.2" width="29.212921292129213%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.303.6.1.4.1.3" width="45.174517451745174%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>DEVICE_NOT_BEING_WORN</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>300</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>设备未佩戴。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>DEVICE_LEAD_OFF</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>301</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>设备引线脱落。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>SENSOR_TURNED_OFF_MANUALLY</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>302</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>传感器被手动关闭。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>SENSOR_OCCUPIED</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>303</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>传感器被占用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.61256125612561%">          <p>SENSOR_NOT_SUPPORTED</p></td>         <td class="cellrowborder" width="29.212921292129213%">          <p>304</p></td>         <td class="cellrowborder" width="45.174517451745174%">          <p>传感器不支持。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="section19118123861519" device-type="phone,tablet,wearable">SensorResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section19118123861519" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>传感器上报结果。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.309.1.6.1.1" width="27.52%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.309.1.6.1.2" width="17.7%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.309.1.6.1.3" width="8.73%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.309.1.6.1.4" width="9.64%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.309.1.6.1.5" width="36.41%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="27.52%">         <p>data</p></td>        <td class="cellrowborder" width="17.7%">         <p><a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section1896124869">SensorData</a>[]</p></td>        <td class="cellrowborder" width="8.73%">         <p>否</p></td>        <td class="cellrowborder" width="9.64%">         <p>是</p></td>        <td class="cellrowborder" width="36.41%">         <p>传感器正常上报的数据内容。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.52%">         <p>errorCode</p></td>        <td class="cellrowborder" width="17.7%">         <p>number</p></td>        <td class="cellrowborder" width="8.73%">         <p>否</p></td>        <td class="cellrowborder" width="9.64%">         <p>是</p></td>        <td class="cellrowborder" width="36.41%">         <p>错误码，含义请见<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section173105551894">SensorErrorCode</a>。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="section119520562618" device-type="phone,tablet,wearable">on/off订阅事件<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section119520562618" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 122px;">     <h3 id="section16809145282713" device-type="phone,tablet,wearable" class="firsth2">wearEngine.on<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16809145282713" tips="复制节点链接"></i></h3>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div></div>    <p>on(type: 'serviceDie', callback: Callback&lt;void&gt;): void</p>    <p>订阅服务端消亡事件，调用<a href="/consumer/cn/doc/harmonyos-references/wearengine_api#section890395942912">wearEngine.destroy</a>接口主动发起的消亡事件不会触发执行回调函数。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>参数：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.318.1.5.1.1" width="25%">         <p>参数名</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.318.1.5.1.2" width="25%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.318.1.5.1.3" width="25%">         <p>必填</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.318.1.5.1.4" width="25%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25%">         <p>type</p></td>        <td class="cellrowborder" width="25%">         <p>string</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>监听的事件类型，仅支持serviceDie(服务端消亡事件)。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="25%">         <p>callback</p></td>        <td class="cellrowborder" width="25%">         <p>Callback&lt;void&gt;</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>回调函数。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.321.1.3.1.1" width="50%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.321.1.3.1.2" width="50%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>        <td class="cellrowborder" width="50%">         <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section1599615141614">1008500012</a></p></td>        <td class="cellrowborder" width="50%">         <p>Too many callbacks of the same type.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>        <td class="cellrowborder" width="50%">         <p>Internal error.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params"></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`The service destruction event`</span>);</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  wearEngine.<span class="hljs-title function_">on</span>(<span class="hljs-string">'serviceDie'</span>, callback);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in subscribing the service destruction event.`</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to subscribe the service destruction event. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>}</li></ol></pre></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1525px;">     <h3 id="section15262013102814" device-type="phone,tablet,wearable">wearEngine.off<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section15262013102814" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>off(type: 'serviceDie', callback?: Callback&lt;void&gt;): void</p>     <p>取消订阅服务端消亡事件。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.324.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.324.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.324.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.324.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>type</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>监听的事件类型，仅支持serviceDie(服务端消亡事件)。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>callback</p></td>         <td class="cellrowborder" width="25%">          <p>Callback&lt;void&gt;</p></td>         <td class="cellrowborder" width="25%">          <p>否</p></td>         <td class="cellrowborder" width="25%">          <p>回调函数，需要同订阅监听时的回调函数为同一个对象。</p>          <p>当该参数为空时，会取消掉之前所有的订阅。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.324.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.324.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section201741341307">401</a></p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>         <td class="cellrowborder" width="50%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params"></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`The service destruction event`</span>);</li><li>}</li><li>wearEngine.<span class="hljs-title function_">on</span>(<span class="hljs-string">'serviceDie'</span>, callback);</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  wearEngine.<span class="hljs-title function_">off</span>(<span class="hljs-string">'serviceDie'</span>, callback);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in unsubscribing the service destruction event.`</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to unsubscribe the service destruction event. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 374px;">     <h2 id="section890395942912" device-type="phone,tablet,wearable">wearEngine.destroy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section890395942912" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>destroy(): Promise&lt;void&gt;</p>     <p>主动销毁服务端，使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Health.WearEngine</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>    </div>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.327.1.3.1.1" width="50%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.327.1.3.1.2" width="50%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p>Promise&lt;void&gt;</p></td>        <td class="cellrowborder" width="50%">         <p>Promise对象。无结果返回的Promise对象。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code">Wear Engine ArkTS API错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.330.1.3.1.1" width="50%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.330.1.3.1.2" width="50%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api_error_code#section93011432734">1008509999</a></p></td>        <td class="cellrowborder" width="50%">         <p>Internal error.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-ehr-c106="" class="highlight-div"><div _ngcontent-ehr-c106="" class="highlight-div-header"><div _ngcontent-ehr-c106="" class="highlight-div-header-left"><div _ngcontent-ehr-c106="" class="handle-button expand-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehr-c106="" class="highlight-div-header-right"><div _ngcontent-ehr-c106="" class="handle-button ai-button"></div><div _ngcontent-ehr-c106="" class="handle-button line-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehr-c106="" class="handle-button theme-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehr-c106="" class="handle-button copy-button"><div _ngcontent-ehr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wearEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.WearEngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>wearEngine.<span class="hljs-title function_">destroy</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in destroying wear engine channel.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to destroy wear engine channel. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>})</li></ol></pre></div></div>   </div>   <div></div></div>