<h1 _ngcontent-rqp-c119="" class="doc-title ng-star-inserted" title="事件"> 事件 </h1>

<div _ngcontent-rqp-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>通用事件仅支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-show-hide#onappear">onAppear</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-show-hide#ondisappear">onDisAppear</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-focus-event#onblur">onBlur</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-focus-event#onfocus">onFocus</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragend10">onDragEnd</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragenter">onDragEnter</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragstart">onDragStart</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragmove">onDragMove</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragleave">onDragLeave</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondrop">onDrop</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-hover#onhover">onHover</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-mouse-key#onmouse">onMouse</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-key#onkeyevent">onKeyEvent</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-touch#ontouch">onTouch</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-component-visible-area-change-event#onvisibleareachange">onVisibleAreaChange</a>。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>        <p>该组件首批接口从API version 8开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p></li>       <li>        <p>示例效果请以真机运行为准，当前DevEco Studio预览器不支持。</p></li>      </ul>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 2162px;">     <h2 id="onalert" device-type="phone,2in1,tablet,wearable,tv">onAlert<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onalert" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onAlert(callback: Callback&lt;OnAlertEvent, boolean&gt;)</p>     <p>网页触发alert()告警弹窗时触发回调。若不调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-jsresult#handlecancel">handleCancel</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-jsresult#handleconfirm">handleConfirm</a>接口，会造成render进程阻塞。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onalertevent12">OnAlertEvent</a>, boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>网页触发alert()告警弹窗时触发。</p>          <p>返回值boolean。当回调返回true时，应用可以调用自定义弹窗能力（包括确认和取消），并且需要根据用户的确认或取消操作调用JsResult通知Web组件最终确认结果。当回调返回false时，弹窗的处理结果会被视为取消。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onAlert</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.url:"</span> + event.<span class="hljs-property">url</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.message:"</span> + event.<span class="hljs-property">message</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">showAlertDialog</span>({</li><li>              <span class="hljs-attr">title</span>: <span class="hljs-string">'onAlert'</span>,</li><li>              <span class="hljs-attr">message</span>: <span class="hljs-string">'text'</span>,</li><li>              <span class="hljs-attr">primaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'ok'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleConfirm</span>();</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleCancel</span>();</li><li>              }</li><li>            })</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!--index.html--&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>WebView onAlert Demo<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"myFunction()"</span>&gt;</span>Click here<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">myFunction</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">      <span class="hljs-title function_">alert</span>(<span class="hljs-string">"Hello World"</span>);</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2430px;">     <h2 id="onbeforeunload" device-type="phone,2in1,tablet,wearable,tv">onBeforeUnload<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onbeforeunload" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onBeforeUnload(callback: Callback&lt;OnBeforeUnloadEvent, boolean&gt;)</p>     <p>即将完成页面刷新或关闭当前页面时触发此回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>如果当前Web组件没有得到焦点，刷新或关闭当前页面时onBeforeUnload不会触发。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onbeforeunloadevent12">OnBeforeUnloadEvent</a>, boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>即将完成页面刷新或关闭当前页面时触发。</p>          <p>返回值boolean。当回调返回true时，应用可以调用自定义弹窗能力（包括确认和取消），并且需要根据用户的确认或取消操作调用JsResult通知Web组件最终是否离开当前页面。当回调返回false时，函数中绘制的自定义弹窗无效。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onBeforeUnload</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.url:"</span> + event.<span class="hljs-property">url</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.message:"</span> + event.<span class="hljs-property">message</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.isReload:"</span> + event?.<span class="hljs-property">isReload</span> ?? <span class="hljs-string">'false'</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">showAlertDialog</span>({</li><li>              <span class="hljs-attr">title</span>: <span class="hljs-string">'onBeforeUnload'</span>,</li><li>              <span class="hljs-attr">message</span>: <span class="hljs-string">'text'</span>,</li><li>              <span class="hljs-attr">primaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'cancel'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleCancel</span>();</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">secondaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'ok'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleConfirm</span>();</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleCancel</span>();</li><li>              }</li><li>            })</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!--index.html--&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">onbeforeunload</span>=<span class="hljs-string">"return myFunction()"</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>WebView onBeforeUnload Demo<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://www.example.com"</span>&gt;</span>Click here<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">myFunction</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">      <span class="hljs-keyword">return</span> <span class="hljs-string">"onBeforeUnload Event"</span>;</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2522px;">     <h2 id="onconfirm" device-type="phone,2in1,tablet,wearable,tv">onConfirm<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onconfirm" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onConfirm(callback: Callback&lt;OnConfirmEvent, boolean&gt;)</p>     <p>网页调用confirm()告警时触发此回调。若不调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-jsresult#handlecancel">handleCancel</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-jsresult#handleconfirm">handleConfirm</a>接口，会造成render进程阻塞。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onconfirmevent12">OnConfirmEvent</a>, boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>网页调用confirm()告警时触发。</p>          <p>返回值boolean。当回调返回true时，应用可以调用自定义弹窗能力（包括确认和取消），并且需要根据用户的确认或取消操作调用JsResult通知Web组件最终确认结果。当回调返回false时，弹窗的处理结果会被视为取消。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onConfirm</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.url:"</span> + event.<span class="hljs-property">url</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.message:"</span> + event.<span class="hljs-property">message</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">showAlertDialog</span>({</li><li>              <span class="hljs-attr">title</span>: <span class="hljs-string">'onConfirm'</span>,</li><li>              <span class="hljs-attr">message</span>: <span class="hljs-string">'text'</span>,</li><li>              <span class="hljs-attr">primaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'cancel'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleCancel</span>();</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">secondaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'ok'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleConfirm</span>();</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleCancel</span>();</li><li>              }</li><li>            })</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!--index.html--&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>
</li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>WebView onConfirm Demo<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"myFunction()"</span>&gt;</span>Click here<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">myFunction</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">      <span class="hljs-keyword">let</span> x;</span></li><li><span class="language-javascript">      <span class="hljs-keyword">let</span> r = <span class="hljs-title function_">confirm</span>(<span class="hljs-string">"click button!"</span>);</span></li><li><span class="language-javascript">      <span class="hljs-keyword">if</span> (r == <span class="hljs-literal">true</span>) {</span></li><li><span class="language-javascript">        x = <span class="hljs-string">"ok"</span>;</span></li><li><span class="language-javascript">      } <span class="hljs-keyword">else</span> {</span></li><li><span class="language-javascript">        x = <span class="hljs-string">"cancel"</span>;</span></li><li><span class="language-javascript">      }</span></li><li><span class="language-javascript">      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"demo"</span>).<span class="hljs-property">innerHTML</span> = x;</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 3242px;">     <h2 id="onprompt9" device-type="phone,2in1,tablet,wearable,tv">onPrompt<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onprompt9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onPrompt(callback: Callback&lt;OnPromptEvent, boolean&gt;)</p>     <p>网页调用prompt()告警时触发此回调。若不调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-jsresult#handlecancel">handleCancel</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-jsresult#handlepromptconfirm9">handlePromptConfirm</a>接口，会造成render进程阻塞。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onpromptevent12">OnPromptEvent</a>, boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>网页调用prompt()告警时触发。</p>          <p>返回值boolean。当回调返回true时，应用可以调用自定义弹窗能力（包括确认、取消和输入），并且需要根据用户的确认或取消操作调用JsResult通知Web组件最终处理结果。当回调返回false时，弹窗的处理结果会被视为取消。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CustomContentDialog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">JsResult</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-attr">promptResult</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomContentDialog</span>({</li><li>      <span class="hljs-attr">primaryTitle</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>,</li><li>      <span class="hljs-attr">contentBuilder</span>: <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">buildContent</span>();</li><li>      },</li><li>      <span class="hljs-attr">buttons</span>: [</li><li>        {</li><li>          <span class="hljs-attr">value</span>: <span class="hljs-string">'取消'</span>,</li><li>          <span class="hljs-attr">buttonStyle</span>: <span class="hljs-title class_">ButtonStyleMode</span>.<span class="hljs-property">TEXTUAL</span>,</li><li>          <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the button is clicked'</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">handleCancel</span>()</li><li>          }</li><li>        },</li><li>        {</li><li>          <span class="hljs-attr">value</span>: <span class="hljs-string">'确认'</span>,</li><li>          <span class="hljs-attr">buttonStyle</span>: <span class="hljs-title class_">ButtonStyleMode</span>.<span class="hljs-property">TEXTUAL</span>,</li><li>          <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">handlePromptConfirm</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">promptResult</span>);</li><li>          }</li><li>        }</li><li>      ],</li><li>    }),</li><li>    <span class="hljs-attr">onWillDismiss</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">handleCancel</span>();</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">close</span>();</li><li>    }</li><li>  });</li><li>
</li><li>  <span class="hljs-comment">// 自定义弹出框的内容区</span></li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">buildContent</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>      <span class="hljs-title class_">TextInput</span>()</li><li>        .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">promptResult</span> = value;</li><li>        })</li><li>        .<span class="hljs-title function_">defaultFocus</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span> })</li><li>        .<span class="hljs-title function_">onPrompt</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.url:"</span> + event.<span class="hljs-property">url</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.message:"</span> + event.<span class="hljs-property">message</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.value:"</span> + event.<span class="hljs-property">value</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">"来自"</span> + event.<span class="hljs-property">url</span> + <span class="hljs-string">"的消息"</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = event.<span class="hljs-property">message</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">promptResult</span> = event.<span class="hljs-property">value</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span> = event.<span class="hljs-property">result</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>();</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!--index.html--&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>
</li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>WebView onPrompt Demo<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"myFunction()"</span>&gt;</span>Click here<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">myFunction</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">      <span class="hljs-keyword">let</span> message = <span class="hljs-title function_">prompt</span>(<span class="hljs-string">"Message info"</span>, <span class="hljs-string">"Hello World"</span>);</span></li><li><span class="language-javascript">      <span class="hljs-keyword">if</span> (message != <span class="hljs-literal">null</span> &amp;&amp; message != <span class="hljs-string">""</span>) {</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"demo"</span>).<span class="hljs-property">innerHTML</span> = message;</span></li><li><span class="language-javascript">      }</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1730px;">     <h2 id="onconsole" device-type="phone,2in1,tablet,wearable,tv">onConsole<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onconsole" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onConsole(callback: Callback&lt;OnConsoleEvent, boolean&gt;)</p>     <p>通知宿主应用JavaScript console消息。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onconsoleevent12">OnConsoleEvent</a>, boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>网页收到JavaScript控制台消息时触发。</p>          <p>返回值boolean。当返回true时，该条消息将不会再打印至hilog日志，返回false时仍会打印至hilog日志。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'onconsole message'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">runJavaScript</span>(<span class="hljs-string">'myFunction()'</span>);</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onConsole</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getMessage:'</span> + event.<span class="hljs-property">message</span>.<span class="hljs-title function_">getMessage</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getSourceId:'</span> + event.<span class="hljs-property">message</span>.<span class="hljs-title function_">getSourceId</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getLineNumber:'</span> + event.<span class="hljs-property">message</span>.<span class="hljs-title function_">getLineNumber</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getMessageLevel:'</span> + event.<span class="hljs-property">message</span>.<span class="hljs-title function_">getMessageLevel</span>());</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">myFunction</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onconsole printf"</span>);</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1142px;">     <h2 id="ondownloadstart" device-type="phone,2in1,tablet,wearable,tv">onDownloadStart<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondownloadstart" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onDownloadStart(callback: Callback&lt;OnDownloadStartEvent&gt;)</p>     <p>通知主应用开始下载一个文件。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#ondownloadstartevent12">OnDownloadStartEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">开始下载时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onDownloadStart</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url:'</span> + event.<span class="hljs-property">url</span>)</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'userAgent:'</span> + event.<span class="hljs-property">userAgent</span>)</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'contentDisposition:'</span> + event.<span class="hljs-property">contentDisposition</span>)</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'contentLength:'</span> + event.<span class="hljs-property">contentLength</span>)</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mimetype:'</span> + event.<span class="hljs-property">mimetype</span>)</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1334px;">     <h2 id="onerrorreceive" device-type="phone,2in1,tablet,wearable,tv">onErrorReceive<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onerrorreceive" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onErrorReceive(callback: Callback&lt;OnErrorReceiveEvent&gt;)</p>     <p>网页加载遇到错误时触发该回调。主资源与子资源出错都会回调该接口，可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-webresourcerequest#ismainframe">isMainFrame</a>来判断是否是主资源报错。出于性能考虑，建议此回调中尽量执行简单逻辑。在无网络的情况下，触发此回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onerrorreceiveevent12">OnErrorReceiveEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页收到 Web 资源加载错误时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onErrorReceive</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getErrorInfo:'</span> + event.<span class="hljs-property">error</span>.<span class="hljs-title function_">getErrorInfo</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getErrorCode:'</span> + event.<span class="hljs-property">error</span>.<span class="hljs-title function_">getErrorCode</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url:'</span> + event.<span class="hljs-property">request</span>.<span class="hljs-title function_">getRequestUrl</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'isMainFrame:'</span> + event.<span class="hljs-property">request</span>.<span class="hljs-title function_">isMainFrame</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'isRedirect:'</span> + event.<span class="hljs-property">request</span>.<span class="hljs-title function_">isRedirect</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'isRequestGesture:'</span> + event.<span class="hljs-property">request</span>.<span class="hljs-title function_">isRequestGesture</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getRequestHeader_headerKey:'</span> + event.<span class="hljs-property">request</span>.<span class="hljs-title function_">getRequestHeader</span>().<span class="hljs-title function_">toString</span>());</li><li>            <span class="hljs-keyword">let</span> result = event.<span class="hljs-property">request</span>.<span class="hljs-title function_">getRequestHeader</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The request header result size is '</span> + result.<span class="hljs-property">length</span>);</li><li>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">of</span> result) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The request header key is : '</span> + i.<span class="hljs-property">headerKey</span> + <span class="hljs-string">', value is : '</span> + i.<span class="hljs-property">headerValue</span>);</li><li>            }</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1478px;">     <h2 id="onhttperrorreceive" device-type="phone,2in1,tablet,wearable,tv">onHttpErrorReceive<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onhttperrorreceive" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onHttpErrorReceive(callback: Callback&lt;OnHttpErrorReceiveEvent&gt;)</p>     <p>网页加载资源遇到的HTTP错误（响应码&gt;=400）时触发该回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onhttperrorreceiveevent12">OnHttpErrorReceiveEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页收到加载资源返回HTTP错误码时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onHttpErrorReceive</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url:'</span> + event.<span class="hljs-property">request</span>.<span class="hljs-title function_">getRequestUrl</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'isMainFrame:'</span> + event.<span class="hljs-property">request</span>.<span class="hljs-title function_">isMainFrame</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'isRedirect:'</span> + event.<span class="hljs-property">request</span>.<span class="hljs-title function_">isRedirect</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'isRequestGesture:'</span> + event.<span class="hljs-property">request</span>.<span class="hljs-title function_">isRequestGesture</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getResponseData:'</span> + event.<span class="hljs-property">response</span>.<span class="hljs-title function_">getResponseData</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getResponseEncoding:'</span> + event.<span class="hljs-property">response</span>.<span class="hljs-title function_">getResponseEncoding</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getResponseMimeType:'</span> + event.<span class="hljs-property">response</span>.<span class="hljs-title function_">getResponseMimeType</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getResponseCode:'</span> + event.<span class="hljs-property">response</span>.<span class="hljs-title function_">getResponseCode</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getReasonMessage:'</span> + event.<span class="hljs-property">response</span>.<span class="hljs-title function_">getReasonMessage</span>());</li><li>            <span class="hljs-keyword">let</span> result = event.<span class="hljs-property">request</span>.<span class="hljs-title function_">getRequestHeader</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The request header result size is '</span> + result.<span class="hljs-property">length</span>);</li><li>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">of</span> result) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The request header key is : '</span> + i.<span class="hljs-property">headerKey</span> + <span class="hljs-string">' , value is : '</span> + i.<span class="hljs-property">headerValue</span>);</li><li>            }</li><li>            <span class="hljs-keyword">let</span> resph = event.<span class="hljs-property">response</span>.<span class="hljs-title function_">getResponseHeader</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The response header result size is '</span> + resph.<span class="hljs-property">length</span>);</li><li>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">of</span> resph) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The response header key is : '</span> + i.<span class="hljs-property">headerKey</span> + <span class="hljs-string">' , value is : '</span> + i.<span class="hljs-property">headerValue</span>);</li><li>            }</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1046px;">     <h2 id="onpagebegin" device-type="phone,2in1,tablet,wearable,tv">onPageBegin<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onpagebegin" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onPageBegin(callback: Callback&lt;OnPageBeginEvent&gt;)</p>     <p>网页开始加载时触发该回调，且只在主frame触发，iframe或者frameset的内容加载时不会触发此回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onpagebeginevent12">OnPageBeginEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页加载开始时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onPageBegin</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url:'</span> + event.<span class="hljs-property">url</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1046px;">     <h2 id="onpageend" device-type="phone,2in1,tablet,wearable,tv">onPageEnd<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onpageend" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onPageEnd(callback: Callback&lt;OnPageEndEvent&gt;)</p>     <p>网页加载完成时触发该回调，且只在主frame触发，iframe或者frameset的内容加载时不会触发此回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onpageendevent12">OnPageEndEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页加载结束时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onPageEnd</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url:'</span> + event.<span class="hljs-property">url</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1094px;">     <h2 id="onloadstarted20" device-type="phone,2in1,tablet,wearable,tv">onLoadStarted<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onloadstarted20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onLoadStarted(callback: Callback&lt;OnLoadStartedEvent&gt;)</p>     <p>通知宿主应用页面开始加载。此方法在每次主frame加载时调用一次，因此对于包含iframes或frameset的页面，onLoadStarted仅针对主frame调用一次。这意味着当嵌入式frame的内容发生变化时，如点击iframe中的链接或Fragment跳转（即跳转到#fragment_id的导航）等，不会调用onLoadStarted。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onloadstartedevent20">OnLoadStartedEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页加载开始时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onLoadStarted</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url:'</span> + event.<span class="hljs-property">url</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1070px;">     <h2 id="onloadfinished20" device-type="phone,2in1,tablet,wearable,tv">onLoadFinished<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onloadfinished20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onLoadFinished(callback: Callback&lt;OnLoadFinishedEvent&gt;)</p>     <p>通知宿主应用页面已加载完成。此方法仅在主frame加载完成时被调用。对于片段跳转（即导航至#fragment_id），onLoadFinished同样会被触发。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onloadfinishedevent20">OnLoadFinishedEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页加载结束时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onLoadFinished</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url:'</span> + event.<span class="hljs-property">url</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1022px;">     <h2 id="onprogresschange" device-type="phone,2in1,tablet,wearable,tv">onProgressChange<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onprogresschange" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onProgressChange(callback: Callback&lt;OnProgressChangeEvent&gt;)</p>     <p>网页加载进度变化时触发该回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onprogresschangeevent12">OnProgressChangeEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">页面加载进度变化时触发的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onProgressChange</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'newProgress:'</span> + event.<span class="hljs-property">newProgress</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1094px;">     <h2 id="ontitlereceive" device-type="phone,2in1,tablet,wearable,tv">onTitleReceive<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ontitlereceive" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onTitleReceive(callback: Callback&lt;OnTitleReceiveEvent&gt;)</p>     <p>当页面文档标题&lt;title&gt;元素发生变更时，触发回调。若当前页面未显示设置标题，ArkWeb将在加载完成前基于页面的URL生成标题并返回给应用。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#ontitlereceiveevent12">OnTitleReceiveEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">页面文档标题发生变更时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onTitleReceive</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'title:'</span> + event.<span class="hljs-property">title</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'isRealTitle:'</span> + event.<span class="hljs-property">isRealTitle</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1046px;">     <h2 id="onrefreshaccessedhistory" device-type="phone,2in1,tablet,wearable,tv">onRefreshAccessedHistory<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onrefreshaccessedhistory" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onRefreshAccessedHistory(callback: Callback&lt;OnRefreshAccessedHistoryEvent&gt;)</p>     <p>导航完成时触发该回调，用于应用更新其访问的历史链接。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onrefreshaccessedhistoryevent12">OnRefreshAccessedHistoryEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">在导航完成时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onRefreshAccessedHistory</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url:'</span> + event.<span class="hljs-property">url</span> + <span class="hljs-string">' isReload:'</span> + event.<span class="hljs-property">isRefreshed</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1190px;">     <h2 id="onrenderexited9" device-type="phone,2in1,tablet,wearable,tv">onRenderExited<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onrenderexited9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onRenderExited(callback: Callback&lt;OnRenderExitedEvent&gt;)</p>     <p>应用渲染进程异常退出时触发该回调。</p>     <p>多个Web组件可能共享单个渲染进程，每个受影响的Web组件都会触发该回调。</p>     <p>应用处理该回调时，可以调用绑定的webviewController相关接口来恢复页面。例如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#refresh">refresh</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#loadurl">loadUrl</a>等。</p>     <p>组件生命周期回调详情可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-event-sequence" target="_blank">Web组件的生命周期</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onrenderexitedevent12">OnRenderExitedEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">渲染过程退出时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'chrome://crash/'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onRenderExited</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'reason:'</span> + event.<span class="hljs-property">renderExitReason</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1166px;">     <h2 id="onrenderprocessnotresponding12" device-type="phone,2in1,tablet,wearable,tv">onRenderProcessNotResponding<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onrenderprocessnotresponding12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onRenderProcessNotResponding(callback: OnRenderProcessNotRespondingCallback)</p>     <p>渲染进程无响应时触发该回调函数。如果Web组件无法处理输入事件，或者无法在合理的时间范围内导航到新的URL，则认为网页进程无响应，并将触发该回调。</p>     <p>只要网页进程一直无响应，此回调仍可能会持续触发，直到网页进程再次响应，此时<a href="/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onrenderprocessresponding12">onRenderProcessResponding</a>将会触发。</p>     <p>应用可以通过WebviewController接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#terminaterenderprocess12">terminateRenderProcess</a>来终止关联的渲染进程，这可能会影响同一渲染进程的其他Web组件。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onrenderprocessnotrespondingcallback12">OnRenderProcessNotRespondingCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">渲染进程无响应时触发的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onRenderProcessNotResponding</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onRenderProcessNotResponding: [jsStack]= "</span> + data.<span class="hljs-property">jsStack</span> +</li><li>            <span class="hljs-string">", [process]="</span> + data.<span class="hljs-property">pid</span> + <span class="hljs-string">", [reason]="</span> + data.<span class="hljs-property">reason</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1022px;">     <h2 id="onrenderprocessresponding12" device-type="phone,2in1,tablet,wearable,tv">onRenderProcessResponding<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onrenderprocessresponding12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onRenderProcessResponding(callback: OnRenderProcessRespondingCallback)</p>     <p>渲染进程由无响应状态变回正常运行状态时触发该回调函数，该回调表明该网页并非真正卡死。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onrenderprocessrespondingcallback12">OnRenderProcessRespondingCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">渲染进程由无响应状态变回正常运行状态时触发的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onRenderProcessResponding</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onRenderProcessResponding again"</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4058px;">     <h2 id="onshowfileselector9" device-type="phone,2in1,tablet,wearable,tv">onShowFileSelector<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onshowfileselector9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onShowFileSelector(callback: Callback&lt;OnShowFileSelectorEvent, boolean&gt;)</p>     <p>调用此函数以处理具有“文件”输入类型的HTML表单。如果不调用此函数或返回false，Web组件会提供默认的“选择文件”处理界面。如果返回true，应用可以自定义“选择文件”的响应行为。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onshowfileselectorevent12">OnShowFileSelectorEvent</a>, boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>用于通知Web组件文件选择的结果。</p>          <p>返回值boolean。当返回值为true时，用户可以调用系统提供的弹窗能力。当返回值为false时，函数中绘制的自定义弹窗无效。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <ol>      <li>       <p>拉起文件选择器。</p>       <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { picker } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>()</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onShowFileSelector</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'MyFileUploader onShowFileSelector invoked'</span>)</li><li>          <span class="hljs-keyword">const</span> documentSelectOptions = <span class="hljs-keyword">new</span> picker.<span class="hljs-title class_">DocumentSelectOptions</span>();</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>          <span class="hljs-keyword">const</span> documentViewPicker = <span class="hljs-keyword">new</span> picker.<span class="hljs-title class_">DocumentViewPicker</span>();</li><li>          documentViewPicker.<span class="hljs-title function_">select</span>(documentSelectOptions).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">documentSelectResult</span>) =&gt;</span> {</li><li>            uri = documentSelectResult[<span class="hljs-number">0</span>];</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'documentViewPicker.select to file succeed and uri is:'</span> + uri);</li><li>            <span class="hljs-keyword">if</span> (event) {</li><li>              event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleFileList</span>([uri]);</li><li>            }</li><li>          }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Invoke documentViewPicker.select failed, code is <span class="hljs-subst">${err.code}</span>,  message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          })</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>拉起图库选择器。</p>       <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { picker } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">selectFile</span>(<span class="hljs-attr">result</span>: <span class="hljs-title class_">FileSelectorResult</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>    <span class="hljs-keyword">let</span> photoSelectOptions = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoSelectOptions</span>();</li><li>    <span class="hljs-keyword">let</span> photoPicker = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoViewPicker</span>();</li><li>    <span class="hljs-comment">// 过滤选择媒体文件类型为IMAGE_VIDEO</span></li><li>    photoSelectOptions.<span class="hljs-property">MIMEType</span> = photoAccessHelper.<span class="hljs-property">PhotoViewMIMETypes</span>.<span class="hljs-property">IMAGE_VIDEO_TYPE</span>;</li><li>    <span class="hljs-comment">// 设置最大选择数量</span></li><li>    photoSelectOptions.<span class="hljs-property">maxSelectNumber</span> = <span class="hljs-number">5</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">chooseFile</span>: photoAccessHelper.<span class="hljs-property">PhotoSelectResult</span> = <span class="hljs-keyword">await</span> photoPicker.<span class="hljs-title function_">select</span>(photoSelectOptions);</li><li>    <span class="hljs-comment">// 获取选择的文件列表</span></li><li>    result.<span class="hljs-title function_">handleFileList</span>(chooseFile.<span class="hljs-property">photoUris</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onShowFileSelector</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">selectFile</span>(event.<span class="hljs-property">result</span>);</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>拉起相机选择器。</p>       <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { cameraPicker, camera } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CameraKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">openCamera</span>(<span class="hljs-params">callback: Callback&lt;<span class="hljs-built_in">string</span>&gt;, uiContext: UIContext</span>) {</li><li> <span class="hljs-keyword">let</span> mContext = uiContext.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">Context</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">pickerProfile</span>: cameraPicker.<span class="hljs-property">PickerProfile</span> = {</li><li>      <span class="hljs-attr">cameraPosition</span>: camera.<span class="hljs-property">CameraPosition</span>.<span class="hljs-property">CAMERA_POSITION_BACK</span></li><li>    };</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">pickerResult</span>: cameraPicker.<span class="hljs-property">PickerResult</span> = <span class="hljs-keyword">await</span> cameraPicker.<span class="hljs-title function_">pick</span>(mContext,</li><li>      [cameraPicker.<span class="hljs-property">PickerMediaType</span>.<span class="hljs-property">PHOTO</span>, cameraPicker.<span class="hljs-property">PickerMediaType</span>.<span class="hljs-property">VIDEO</span>], pickerProfile);</li><li>    <span class="hljs-title function_">callback</span>(pickerResult.<span class="hljs-property">resultUri</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`the pick call failed. error code: <span class="hljs-subst">${err.code}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onShowFileSelector</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-title function_">openCamera</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (event) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Title is '</span> + event.<span class="hljs-property">fileSelector</span>.<span class="hljs-title function_">getTitle</span>());</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Mode is '</span> + event.<span class="hljs-property">fileSelector</span>.<span class="hljs-title function_">getMode</span>());</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Accept types are '</span> + event.<span class="hljs-property">fileSelector</span>.<span class="hljs-title function_">getAcceptType</span>());</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Capture is '</span> + event.<span class="hljs-property">fileSelector</span>.<span class="hljs-title function_">isCapture</span>());</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Mime types are '</span> + event.<span class="hljs-property">fileSelector</span>.<span class="hljs-title function_">getMimeTypes</span>());</li><li>              event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleFileList</span>([result]);</li><li>            }</li><li>          }, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>())</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>       <p>加载的html文件。</p>       <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"upload-form"</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">"multipart/form-data"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"upload"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"upload"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/*, video/*"</span>/&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 998px;">     <h2 id="onresourceload9" device-type="phone,2in1,tablet,wearable,tv">onResourceLoad<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onresourceload9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onResourceLoad(callback: Callback&lt;OnResourceLoadEvent&gt;)</p>     <p>通知Web组件所加载的资源文件url信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onresourceloadevent12">OnResourceLoadEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">加载url时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onResourceLoad</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onResourceLoad: '</span> + event.<span class="hljs-property">url</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 998px;">     <h2 id="onscalechange9" device-type="phone,2in1,tablet,wearable,tv">onScaleChange<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onscalechange9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onScaleChange(callback: Callback&lt;OnScaleChangeEvent&gt;)</p>     <p>当页面显示比例发生变化时，触发该回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onscalechangeevent12">OnScaleChangeEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当页面显示比例发生变化时，触发该回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onScaleChange</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onScaleChange changed from '</span> + event.<span class="hljs-property">oldScale</span> + <span class="hljs-string">' to '</span> + event.<span class="hljs-property">newScale</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2126px;">     <h2 id="oninterceptrequest9" device-type="phone,2in1,tablet,wearable,tv">onInterceptRequest<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oninterceptrequest9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onInterceptRequest(callback: Callback&lt;OnInterceptRequestEvent, WebResourceResponse&gt;)</p>     <p>当Web组件加载URL之前触发该回调，用于拦截URL并返回响应数据。onInterceptRequest可拦截所有跳转请求并返回响应数据，但无法访问POST请求体（Body）内容，且不支持分片缓冲（buffer）类型数据获取。此类场景需改用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webschemehandler">WebSchemeHandler</a>实现，依据具体业务需求进行判断。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#oninterceptrequestevent12">OnInterceptRequestEvent</a>, <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-webresourceresponse">WebResourceResponse</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>当Web组件加载url之前触发。</p>          <p>返回值<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-webresourceresponse">WebResourceResponse</a>。返回响应数据则按照响应数据加载，无响应数据则返回null表示按照原来的方式加载。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">responseWeb</span>: <span class="hljs-title class_">WebResourceResponse</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebResourceResponse</span>();</li><li>  <span class="hljs-attr">heads</span>: <span class="hljs-title class_">Header</span>[] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>();</li><li>  <span class="hljs-attr">webData</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"&lt;!DOCTYPE html&gt;\n"</span> +</li><li>    <span class="hljs-string">"&lt;html&gt;\n"</span> +</li><li>    <span class="hljs-string">"&lt;head&gt;\n"</span> +</li><li>    <span class="hljs-string">"&lt;title&gt;intercept test&lt;/title&gt;\n"</span> +</li><li>    <span class="hljs-string">"&lt;/head&gt;\n"</span> +</li><li>    <span class="hljs-string">"&lt;body&gt;\n"</span> +</li><li>    <span class="hljs-string">"&lt;h1&gt;intercept test&lt;/h1&gt;\n"</span> +</li><li>    <span class="hljs-string">"&lt;/body&gt;\n"</span> +</li><li>    <span class="hljs-string">"&lt;/html&gt;"</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onInterceptRequest</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url:'</span> + event.<span class="hljs-property">request</span>.<span class="hljs-title function_">getRequestUrl</span>());</li><li>          }</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">head1</span>: <span class="hljs-title class_">Header</span> = {</li><li>            <span class="hljs-attr">headerKey</span>: <span class="hljs-string">"Connection"</span>,</li><li>            <span class="hljs-attr">headerValue</span>: <span class="hljs-string">"keep-alive"</span></li><li>          }</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">head2</span>: <span class="hljs-title class_">Header</span> = {</li><li>            <span class="hljs-attr">headerKey</span>: <span class="hljs-string">"Cache-Control"</span>,</li><li>            <span class="hljs-attr">headerValue</span>: <span class="hljs-string">"no-cache"</span></li><li>          }</li><li>          <span class="hljs-comment">// 将新元素追加到数组的末尾，并返回数组的新长度。</span></li><li>          <span class="hljs-keyword">let</span> length = <span class="hljs-variable language_">this</span>.<span class="hljs-property">heads</span>.<span class="hljs-title function_">push</span>(head1);</li><li>          length = <span class="hljs-variable language_">this</span>.<span class="hljs-property">heads</span>.<span class="hljs-title function_">push</span>(head2);</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The response header result length is :'</span> + length);</li><li>          <span class="hljs-keyword">const</span> <span class="hljs-attr">promise</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">String</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve: <span class="hljs-built_in">Function</span>, reject: <span class="hljs-built_in">Function</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">responseWeb</span>.<span class="hljs-title function_">setResponseHeader</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">heads</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">responseWeb</span>.<span class="hljs-title function_">setResponseData</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">webData</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">responseWeb</span>.<span class="hljs-title function_">setResponseEncoding</span>(<span class="hljs-string">'utf-8'</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">responseWeb</span>.<span class="hljs-title function_">setResponseMimeType</span>(<span class="hljs-string">'text/html'</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">responseWeb</span>.<span class="hljs-title function_">setResponseCode</span>(<span class="hljs-number">200</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">responseWeb</span>.<span class="hljs-title function_">setReasonMessage</span>(<span class="hljs-string">'OK'</span>);</li><li>            <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"success"</span>);</li><li>          })</li><li>          promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"prepare response ready"</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">responseWeb</span>.<span class="hljs-title function_">setResponseIsReady</span>(<span class="hljs-literal">true</span>);</li><li>          })</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">responseWeb</span>.<span class="hljs-title function_">setResponseIsReady</span>(<span class="hljs-literal">false</span>);</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">responseWeb</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1862px;">     <h2 id="onhttpauthrequest9" device-type="phone,2in1,tablet,wearable,tv">onHttpAuthRequest<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onhttpauthrequest9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onHttpAuthRequest(callback: Callback&lt;OnHttpAuthRequestEvent, boolean&gt;)</p>     <p>通知收到http auth认证请求。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onhttpauthrequestevent12">OnHttpAuthRequestEvent</a>, boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>当浏览器需要用户的凭据时触发。</p>          <p>返回值boolean。返回true表示http auth认证成功，返回false表示http auth认证失败。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>  <span class="hljs-attr">httpAuth</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onHttpAuthRequest</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">showAlertDialog</span>({</li><li>              <span class="hljs-attr">title</span>: <span class="hljs-string">'onHttpAuthRequest'</span>,</li><li>              <span class="hljs-attr">message</span>: <span class="hljs-string">'text'</span>,</li><li>              <span class="hljs-attr">primaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'cancel'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">cancel</span>();</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">secondaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'ok'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpAuth</span> = event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">isHttpAuthInfoSaved</span>();</li><li>                  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">httpAuth</span> == <span class="hljs-literal">false</span>) {</li><li>                    webview.<span class="hljs-property">WebDataBase</span>.<span class="hljs-title function_">saveHttpAuthCredentials</span>(</li><li>                      event.<span class="hljs-property">host</span>,</li><li>                      event.<span class="hljs-property">realm</span>,</li><li>                      <span class="hljs-string">"2222"</span>,</li><li>                      <span class="hljs-string">"2222"</span></li><li>                    )</li><li>                    event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">cancel</span>();</li><li>                  }</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">cancel</span>();</li><li>              }</li><li>            })</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2754px;">     <h2 id="onsslerroreventreceive9" device-type="phone,2in1,tablet,wearable,tv">onSslErrorEventReceive<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsslerroreventreceive9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onSslErrorEventReceive(callback: Callback&lt;OnSslErrorEventReceiveEvent&gt;)</p>     <p>通知用户加载资源时发生SSL错误，只支持主资源。</p>     <p>如果需要支持子资源，请使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onsslerrorevent12">OnSslErrorEvent</a>接口。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>主资源：浏览器加载网页的入口文件，通常是HTML文档。</li>        <li>子资源：主资源中引用的依赖文件，由主资源解析过程中遇到特定标签时触发加载。</li>        <li>应用程序需要调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-sslerrorhandler#handlecancel9">handler.handleCancel()</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-sslerrorhandler#handleconfirm9">handler.handleConfirm()</a>处理该回调，如果没有处理该回调则默认取消资源加载。handleConfirm()或者handleCancel()的行为可能会被记录下来，以便为将来的SSL错误做出响应。</li>        <li>应用程序可以用于显示自定义错误页面或静默记录问题。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onsslerroreventreceiveevent12">OnSslErrorEventReceiveEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当网页收到SSL错误时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { cert } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">LogCertInfo</span>(<span class="hljs-params">certChainData : <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">Uint8Array</span>&gt; | <span class="hljs-literal">undefined</span></span>) {</li><li>  <span class="hljs-keyword">if</span> (!(certChainData <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>)) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'failed, cert chain data type is not array'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; certChainData.<span class="hljs-property">length</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">encodeBlobData</span>: cert.<span class="hljs-property">EncodingBlob</span> = {</li><li>      <span class="hljs-attr">data</span>: certChainData[i],</li><li>      <span class="hljs-attr">encodingFormat</span>: cert.<span class="hljs-property">EncodingFormat</span>.<span class="hljs-property">FORMAT_DER</span></li><li>    }</li><li>    cert.<span class="hljs-title function_">createX509Cert</span>(encodeBlobData, <span class="hljs-function">(<span class="hljs-params">error, x509Cert</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Index : '</span> + i + <span class="hljs-string">',createX509Cert failed, errCode: '</span> + error.<span class="hljs-property">code</span> + <span class="hljs-string">', errMsg: '</span> + error.<span class="hljs-property">message</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createX509Cert success'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-title class_">ParseX509CertInfo</span>(x509Cert));</li><li>      }</li><li>    });</li><li>  }</li><li>  <span class="hljs-keyword">return</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">Uint8ArrayToString</span>(<span class="hljs-params">dataArray: <span class="hljs-built_in">Uint8Array</span></span>) {</li><li>  <span class="hljs-keyword">let</span> dataString = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; dataArray.<span class="hljs-property">length</span>; i++) {</li><li>    dataString += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(dataArray[i]);</li><li>  }</li><li>  <span class="hljs-keyword">return</span> dataString;</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">ParseX509CertInfo</span>(<span class="hljs-params">x509Cert: cert.X509Cert</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'getCertificate success, '</span></li><li>    + <span class="hljs-string">'issuer name = '</span></li><li>    + <span class="hljs-title class_">Uint8ArrayToString</span>(x509Cert.<span class="hljs-title function_">getIssuerName</span>().<span class="hljs-property">data</span>) + <span class="hljs-string">', subject name = '</span></li><li>    + <span class="hljs-title class_">Uint8ArrayToString</span>(x509Cert.<span class="hljs-title function_">getSubjectName</span>().<span class="hljs-property">data</span>) + <span class="hljs-string">', valid start = '</span></li><li>    + x509Cert.<span class="hljs-title function_">getNotBeforeTime</span>()</li><li>    + <span class="hljs-string">', valid end = '</span> + x509Cert.<span class="hljs-title function_">getNotAfterTime</span>();</li><li>  <span class="hljs-keyword">return</span> res;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onSslErrorEventReceive</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-title class_">LogCertInfo</span>(event.<span class="hljs-property">certChainData</span>);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">showAlertDialog</span>({</li><li>            <span class="hljs-attr">title</span>: <span class="hljs-string">'onSslErrorEventReceive'</span>,</li><li>            <span class="hljs-attr">message</span>: <span class="hljs-string">'text'</span>,</li><li>            <span class="hljs-attr">primaryButton</span>: {</li><li>              <span class="hljs-attr">value</span>: <span class="hljs-string">'confirm'</span>,</li><li>              <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleConfirm</span>();</li><li>              }</li><li>            },</li><li>            <span class="hljs-attr">secondaryButton</span>: {</li><li>              <span class="hljs-attr">value</span>: <span class="hljs-string">'cancel'</span>,</li><li>              <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleCancel</span>();</li><li>              }</li><li>            },</li><li>            <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>              event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleCancel</span>();</li><li>            }</li><li>          })</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2786px;">     <h2 id="onsslerrorevent12" device-type="phone,2in1,tablet,wearable,tv">onSslErrorEvent<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsslerrorevent12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onSslErrorEvent(callback: OnSslErrorEventCallback)</p>     <p>通知用户加载资源（主资源+子资源）时发生SSL错误，如果只想处理主资源的SSL错误，请用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-webresourcerequest#ismainframe">isMainFrame</a>字段进行区分。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>主资源：浏览器加载网页的入口文件，通常是HTML文档。</li>        <li>子资源：主资源中引用的依赖文件，由主资源解析过程中遇到特定标签时触发加载。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onsslerroreventcallback12">OnSslErrorEventCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">通知用户加载资源时发生SSL错误。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { cert } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">LogCertInfo</span>(<span class="hljs-params">certChainData : <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">Uint8Array</span>&gt; | <span class="hljs-literal">undefined</span></span>) {</li><li>  <span class="hljs-keyword">if</span> (!(certChainData <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>)) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'failed, cert chain data type is not array'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; certChainData.<span class="hljs-property">length</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">encodeBlobData</span>: cert.<span class="hljs-property">EncodingBlob</span> = {</li><li>      <span class="hljs-attr">data</span>: certChainData[i],</li><li>      <span class="hljs-attr">encodingFormat</span>: cert.<span class="hljs-property">EncodingFormat</span>.<span class="hljs-property">FORMAT_DER</span></li><li>    }</li><li>    cert.<span class="hljs-title function_">createX509Cert</span>(encodeBlobData, <span class="hljs-function">(<span class="hljs-params">error, x509Cert</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Index : '</span> + i + <span class="hljs-string">',createX509Cert failed, errCode: '</span> + error.<span class="hljs-property">code</span> + <span class="hljs-string">', errMsg: '</span> + error.<span class="hljs-property">message</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createX509Cert success'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-title class_">ParseX509CertInfo</span>(x509Cert));</li><li>      }</li><li>    });</li><li>  }</li><li>  <span class="hljs-keyword">return</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">Uint8ArrayToString</span>(<span class="hljs-params">dataArray: <span class="hljs-built_in">Uint8Array</span></span>) {</li><li>  <span class="hljs-keyword">let</span> dataString = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; dataArray.<span class="hljs-property">length</span>; i++) {</li><li>    dataString += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(dataArray[i]);</li><li>  }</li><li>  <span class="hljs-keyword">return</span> dataString;</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">ParseX509CertInfo</span>(<span class="hljs-params">x509Cert: cert.X509Cert</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'getCertificate success, '</span></li><li>    + <span class="hljs-string">'issuer name = '</span></li><li>    + <span class="hljs-title class_">Uint8ArrayToString</span>(x509Cert.<span class="hljs-title function_">getIssuerName</span>().<span class="hljs-property">data</span>) + <span class="hljs-string">', subject name = '</span></li><li>    + <span class="hljs-title class_">Uint8ArrayToString</span>(x509Cert.<span class="hljs-title function_">getSubjectName</span>().<span class="hljs-property">data</span>) + <span class="hljs-string">', valid start = '</span></li><li>    + x509Cert.<span class="hljs-title function_">getNotBeforeTime</span>()</li><li>    + <span class="hljs-string">', valid end = '</span> + x509Cert.<span class="hljs-title function_">getNotAfterTime</span>();</li><li>  <span class="hljs-keyword">return</span> res;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onSslErrorEvent</span>(<span class="hljs-function">(<span class="hljs-params">event: SslErrorEvent</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onSslErrorEvent url: "</span> + event.<span class="hljs-property">url</span>);</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onSslErrorEvent error: "</span> + event.<span class="hljs-property">error</span>);</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onSslErrorEvent originalUrl: "</span> + event.<span class="hljs-property">originalUrl</span>);</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onSslErrorEvent referrer: "</span> + event.<span class="hljs-property">referrer</span>);</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onSslErrorEvent isFatalError: "</span> + event.<span class="hljs-property">isFatalError</span>);</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onSslErrorEvent isMainFrame: "</span> + event.<span class="hljs-property">isMainFrame</span>);</li><li>          <span class="hljs-title class_">LogCertInfo</span>(event.<span class="hljs-property">certChainData</span>);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">showAlertDialog</span>({</li><li>            <span class="hljs-attr">title</span>: <span class="hljs-string">'onSslErrorEvent'</span>,</li><li>            <span class="hljs-attr">message</span>: <span class="hljs-string">'text'</span>,</li><li>            <span class="hljs-attr">primaryButton</span>: {</li><li>              <span class="hljs-attr">value</span>: <span class="hljs-string">'confirm'</span>,</li><li>              <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleConfirm</span>();</li><li>              }</li><li>            },</li><li>            <span class="hljs-attr">secondaryButton</span>: {</li><li>              <span class="hljs-attr">value</span>: <span class="hljs-string">'cancel'</span>,</li><li>              <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-comment">// true表示停止加载页面，停留在当前页面，使用false表示继续加载页面，并展示错误页面</span></li><li>                event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleCancel</span>(<span class="hljs-literal">true</span>);</li><li>              }</li><li>            },</li><li>            <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>              event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleCancel</span>();</li><li>            }</li><li>          })</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 6222px;">     <h2 id="onclientauthenticationrequest9" device-type="phone,2in1,tablet,wearable,tv">onClientAuthenticationRequest<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onclientauthenticationrequest9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onClientAuthenticationRequest(callback: Callback&lt;OnClientAuthenticationEvent&gt;)</p>     <p>通知用户收到SSL客户端证书请求事件。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>Web组件有三种响应方式：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/s-basic-components-web-clientauthenticationhandler#confirm10">ClientAuthenticationHandler.confirm</a>（继续）、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/s-basic-components-web-clientauthenticationhandler#cancel9">ClientAuthenticationHandler.cancel</a>（取消）或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/s-basic-components-web-clientauthenticationhandler#ignore9">ClientAuthenticationHandler.ignore</a>（忽略）。</li>        <li>如果调用ClientAuthenticationHandler.confirm或ClientAuthenticationHandler.cancel，ArkWeb会将认证结果存储在内存中（在应用程序的生命周期内），并且不会对相同的主机和端口再次调用onClientAuthenticationRequest()。如果调用onClientAuthenticationRequest.ignore，ArkWeb则不会存储该认证结果。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onclientauthenticationevent12">OnClientAuthenticationEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当需要用户提供的SSL客户端证书时触发的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>安装私有凭证以实现双向认证。</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { promptAction } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  uiContext : <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>  context : <span class="hljs-title class_">Context</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>  <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span></li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setRenderProcessMode</span>(webview.<span class="hljs-property">RenderProcessMode</span>.<span class="hljs-property">MULTIPLE</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"installPrivateCertificate"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>) {</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>
</li><li>        <span class="hljs-comment">//注：badssl.com-client.p12需要替换为实际使用的证书文件</span></li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">value</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContentSync</span>(<span class="hljs-string">"badssl.com-client.p12"</span>);</li><li>        certificateManager.<span class="hljs-title function_">installPrivateCertificate</span>(value, <span class="hljs-string">'badssl.com'</span>, <span class="hljs-string">"1"</span>,</li><li>          <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">data</span>: certificateManager.<span class="hljs-property">CMResult</span>) =&gt; {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`installPrivateCertificate, uri==========<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data.uri)}</span>`</span>)</li><li>            <span class="hljs-keyword">if</span> (!err &amp;&amp; data.<span class="hljs-property">uri</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">uri</span> = data.<span class="hljs-property">uri</span>;</li><li>            }</li><li>          });</li><li>      })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'加载需要客户端SSL证书的网站'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadUrl</span>(<span class="hljs-string">"https://client.badssl.com"</span>)</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({</li><li>        <span class="hljs-attr">src</span>: <span class="hljs-string">"https://www.bing.com/"</span>,</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>,</li><li>      }).<span class="hljs-title function_">domStorageAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">fileAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onPageBegin</span>(<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"extensions onpagebegin url "</span> + event.<span class="hljs-property">url</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">onClientAuthenticationRequest</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onClientAuthenticationRequest "</span>);</li><li>          event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">confirm</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">uri</span>);</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">onSslErrorEventReceive</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onSslErrorEventReceive-&gt;<span class="hljs-subst">${e.error.toString()}</span>`</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">onErrorReceive</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({</li><li>              <span class="hljs-attr">message</span>: <span class="hljs-string">`ErrorCode: <span class="hljs-subst">${event.error.getErrorCode()}</span>, ErrorInfo: <span class="hljs-subst">${event.error.getErrorInfo()}</span>`</span>,</li><li>              <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Center</span></li><li>            })</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getErrorInfo:'</span> + event.<span class="hljs-property">error</span>.<span class="hljs-title function_">getErrorInfo</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getErrorCode:'</span> + event.<span class="hljs-property">error</span>.<span class="hljs-title function_">getErrorCode</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url:'</span> + event.<span class="hljs-property">request</span>.<span class="hljs-title function_">getRequestUrl</span>());</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">onTitleReceive</span>(<span class="hljs-function"><span class="hljs-params">event</span>  =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"title received "</span> + event.<span class="hljs-property">title</span>);</li><li>        })</li><li>
</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>对接证书管理，实现双向认证功能。</p>     <ol>      <li>       <p>构造 GlobalContext 单例对象。</p>       <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// GlobalContext.ets</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalContext</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {}</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">GlobalContext</span>;</li><li>  <span class="hljs-keyword">private</span> _objects = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt;();</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">getContext</span>(): <span class="hljs-title class_">GlobalContext</span> {</li><li>    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">GlobalContext</span>.<span class="hljs-property">instance</span>) {</li><li>      <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-property">instance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GlobalContext</span>();</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-property">instance</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">getObject</span>(<span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Object</span> | <span class="hljs-literal">undefined</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_objects</span>.<span class="hljs-title function_">get</span>(value);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">setObject</span>(<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">objectClass</span>: <span class="hljs-title class_">Object</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_objects</span>.<span class="hljs-title function_">set</span>(key, objectClass);</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>构造 CertManagerService 对象以对接证书管理。</p>       <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// CertMgrService.ets</span></li><li><span class="hljs-keyword">import</span> { bundleManager, common, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.AbilityKit"</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.BasicServicesKit"</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">GlobalContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./GlobalContext'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CertManagerService</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">sInstance</span>: <span class="hljs-title class_">CertManagerService</span>;</li><li>  <span class="hljs-keyword">private</span> authUri = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-keyword">private</span> appUid = <span class="hljs-string">""</span>;</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">getInstance</span>(): <span class="hljs-title class_">CertManagerService</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">CertManagerService</span>.<span class="hljs-property">sInstance</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-title class_">CertManagerService</span>.<span class="hljs-property">sInstance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CertManagerService</span>();</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">CertManagerService</span>.<span class="hljs-property">sInstance</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">grantAppPm</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; {</li><li>    <span class="hljs-keyword">let</span> bundleFlags = bundleManager.<span class="hljs-property">BundleFlag</span>.<span class="hljs-property">GET_BUNDLE_INFO_DEFAULT</span> | bundleManager.<span class="hljs-property">BundleFlag</span>.<span class="hljs-property">GET_BUNDLE_INFO_WITH_APPLICATION</span>;</li><li>    <span class="hljs-comment">// 注：com.example.myapplication需要写实际应用名称</span></li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> bundleManager.<span class="hljs-title function_">getBundleInfoForSelf</span>(bundleFlags)</li><li>        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getBundleInfoForSelf failed. Cause: %{public}s'</span>, err.<span class="hljs-property">message</span>);</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;</li><li>        });</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">appUid</span> = data?.<span class="hljs-property">appInfo</span>?.<span class="hljs-property">uid</span>?.<span class="hljs-title function_">toString</span>() ?? <span class="hljs-string">''</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getBundleInfoForSelf successfully. Data: %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-keyword">let</span> message = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getBundleInfoForSelf failed: %{public}s'</span>, message);</li><li>    }</li><li>
</li><li>    <span class="hljs-comment">// 注：需要在MainAbility.ts文件的onCreate函数里添加GlobalContext.getContext().setObject("AbilityContext", this.context)</span></li><li>    <span class="hljs-keyword">let</span> abilityContext = <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-title function_">getContext</span>().<span class="hljs-title function_">getObject</span>(<span class="hljs-string">"AbilityContext"</span>) <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>    <span class="hljs-keyword">await</span> abilityContext.<span class="hljs-title function_">startAbilityForResult</span>(</li><li>      {</li><li>        <span class="hljs-attr">bundleName</span>: <span class="hljs-string">"com.ohos.certmanager"</span>,</li><li>        <span class="hljs-attr">abilityName</span>: <span class="hljs-string">"MainAbility"</span>,</li><li>        <span class="hljs-attr">uri</span>: <span class="hljs-string">"requestAuthorize"</span>,</li><li>        <span class="hljs-attr">parameters</span>: {</li><li>          <span class="hljs-attr">appUid</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">appUid</span>, <span class="hljs-comment">// 传入申请应用的appUid</span></li><li>        }</li><li>      } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Want</span>)</li><li>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: common.AbilityResult</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (!data.<span class="hljs-property">resultCode</span> &amp;&amp; data.<span class="hljs-property">want</span>) {</li><li>          <span class="hljs-keyword">if</span> (data.<span class="hljs-property">want</span>.<span class="hljs-property">parameters</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">authUri</span> = data.<span class="hljs-property">want</span>.<span class="hljs-property">parameters</span>.<span class="hljs-property">authUri</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>; <span class="hljs-comment">// 授权成功后获取返回的authUri</span></li><li>          }</li><li>        }</li><li>      })</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authUri</span>;</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>实现双向认证功能。</p>       <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">CertManagerService</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./CertMgrService'</span>;</li><li><span class="hljs-keyword">import</span> { promptAction } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  certManager = <span class="hljs-title class_">CertManagerService</span>.<span class="hljs-title function_">getInstance</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setRenderProcessMode</span>(webview.<span class="hljs-property">RenderProcessMode</span>.<span class="hljs-property">MULTIPLE</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'加载需要客户端SSL证书的网站'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadUrl</span>(<span class="hljs-string">"https://client.badssl.com"</span>)</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({</li><li>        <span class="hljs-attr">src</span>: <span class="hljs-string">"https://www.bing.com/"</span>,</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>,</li><li>      }).<span class="hljs-title function_">domStorageAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">fileAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onPageBegin</span>(<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"extensions onpagebegin url "</span> + event.<span class="hljs-property">url</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">onClientAuthenticationRequest</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onClientAuthenticationRequest "</span>);</li><li>
</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">certManager</span>.<span class="hljs-title function_">grantAppPm</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`grantAppPm, URI==========<span class="hljs-subst">${result}</span>`</span>);</li><li>            event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">confirm</span>(result);</li><li>          })</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">onSslErrorEventReceive</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onSslErrorEventReceive-&gt;<span class="hljs-subst">${e.error.toString()}</span>`</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">onErrorReceive</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({</li><li>              <span class="hljs-attr">message</span>: <span class="hljs-string">`ErrorCode: <span class="hljs-subst">${event.error.getErrorCode()}</span>, ErrorInfo: <span class="hljs-subst">${event.error.getErrorInfo()}</span>`</span>,</li><li>              <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Center</span></li><li>            })</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getErrorInfo:'</span> + event.<span class="hljs-property">error</span>.<span class="hljs-title function_">getErrorInfo</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getErrorCode:'</span> + event.<span class="hljs-property">error</span>.<span class="hljs-title function_">getErrorCode</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url:'</span> + event.<span class="hljs-property">request</span>.<span class="hljs-title function_">getRequestUrl</span>());</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">onTitleReceive</span>(<span class="hljs-function"><span class="hljs-params">event</span>  =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"title received "</span> + event.<span class="hljs-property">title</span>);</li><li>        })</li><li>
</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2810px;">     <h2 id="onpermissionrequest9" device-type="phone,2in1,tablet,wearable,tv">onPermissionRequest<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onpermissionrequest9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onPermissionRequest(callback: Callback&lt;OnPermissionRequestEvent&gt;)</p>     <p>通知收到获取权限请求，需配置"ohos.permission.CAMERA"、"ohos.permission.MICROPHONE"权限。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onpermissionrequestevent12">OnPermissionRequestEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">通知收到获取权限请求触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { abilityAccessCtrl } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 配置Web开启调试模式</span></li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setWebDebuggingAccess</span>(<span class="hljs-literal">true</span>);</li><li>    <span class="hljs-keyword">let</span> atManager = abilityAccessCtrl.<span class="hljs-title function_">createAtManager</span>();</li><li>    atManager.<span class="hljs-title function_">requestPermissionsFromUser</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getHostContext</span>(), [<span class="hljs-string">'ohos.permission.CAMERA'</span>, <span class="hljs-string">'ohos.permission.MICROPHONE'</span>])</li><li>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'data:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'data permissions:'</span> + data.<span class="hljs-property">permissions</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'data authResults:'</span> + data.<span class="hljs-property">authResults</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request permissions from user. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onPermissionRequest</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">showAlertDialog</span>({</li><li>              <span class="hljs-attr">title</span>: <span class="hljs-string">'title'</span>,</li><li>              <span class="hljs-attr">message</span>: <span class="hljs-string">'text'</span>,</li><li>              <span class="hljs-attr">primaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'deny'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">request</span>.<span class="hljs-title function_">deny</span>();</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">secondaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'onConfirm'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">request</span>.<span class="hljs-title function_">grant</span>(event.<span class="hljs-property">request</span>.<span class="hljs-title function_">getAccessibleResource</span>());</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                event.<span class="hljs-property">request</span>.<span class="hljs-title function_">deny</span>();</li><li>              }</li><li>            })</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li> <span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li> <span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li> <span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li> <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>   <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span></li><li> <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li> <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li> <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"video"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"500px"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"500px"</span> <span class="hljs-attr">autoplay</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span></li><li> <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"500px"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"500px"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span></li><li> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li> <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"HTML5摄像头"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"开启摄像头"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"getMedia()"</span>/&gt;</span></li><li> <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">   <span class="hljs-keyword">function</span> <span class="hljs-title function_">getMedia</span>(<span class="hljs-params"></span>)</span></li><li><span class="language-javascript">   {</span></li><li><span class="language-javascript">     <span class="hljs-keyword">let</span> constraints = {</span></li><li><span class="language-javascript">       <span class="hljs-attr">video</span>: {<span class="hljs-attr">width</span>: <span class="hljs-number">500</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">500</span>},</span></li><li><span class="language-javascript">       <span class="hljs-attr">audio</span>: <span class="hljs-literal">true</span></span></li><li><span class="language-javascript">     };</span></li><li><span class="language-javascript">     <span class="hljs-comment">// 获取video摄像头区域</span></span></li><li><span class="language-javascript">     <span class="hljs-keyword">let</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"video"</span>);</span></li><li><span class="language-javascript">     <span class="hljs-comment">// 返回的Promise对象</span></span></li><li><span class="language-javascript">     <span class="hljs-keyword">let</span> promise = navigator.<span class="hljs-property">mediaDevices</span>.<span class="hljs-title function_">getUserMedia</span>(constraints);</span></li><li><span class="language-javascript">     <span class="hljs-comment">// then()异步，调用MediaStream对象作为参数</span></span></li><li><span class="language-javascript">     promise.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">MediaStream</span>) {</span></li><li><span class="language-javascript">       video.<span class="hljs-property">srcObject</span> = <span class="hljs-title class_">MediaStream</span>;</span></li><li><span class="language-javascript">       video.<span class="hljs-title function_">play</span>();</span></li><li><span class="language-javascript">     }).<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {</span></li><li><span class="language-javascript">       <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Error accessing media devices."</span>, error);</span></li><li><span class="language-javascript">     });</span></li><li><span class="language-javascript">   }</span></li><li><span class="language-javascript"> </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li> <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li> <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4634px;">     <h2 id="oncontextmenushow9" device-type="phone,2in1,tablet,wearable,tv">onContextMenuShow<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oncontextmenushow9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onContextMenuShow(callback: Callback&lt;OnContextMenuShowEvent, boolean&gt;)</p>     <p>长按特定元素（例如图片，链接）或鼠标右键，跳出菜单。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#oncontextmenushowevent12">OnContextMenuShowEvent</a>, boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>调用时触发的回调，以允许自定义显示上下文菜单。</p>          <p>返回值boolean。返回true表示触发自定义菜单，返回false表示触发的自定义菜单无效。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { pasteboard } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">'ContextMenu'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">WebContextMenuResult</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">linkUrl</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">offsetX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">offsetY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">showMenu</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-comment">// 构建自定义菜单及触发功能接口</span></li><li>  <span class="hljs-title class_">MenuBuilder</span>() {</li><li>    <span class="hljs-comment">// 以垂直列表形式显示的菜单。</span></li><li>    <span class="hljs-title class_">Menu</span>() {</li><li>      <span class="hljs-comment">// 展示菜单Menu中具体的item菜单项。</span></li><li>      <span class="hljs-title class_">MenuItem</span>({</li><li>        <span class="hljs-attr">content</span>: <span class="hljs-string">'撤销'</span>,</li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">undo</span>();</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">showMenu</span> = <span class="hljs-literal">false</span>;</li><li>        })</li><li>      <span class="hljs-title class_">MenuItem</span>({</li><li>        <span class="hljs-attr">content</span>: <span class="hljs-string">'重做'</span>,</li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">redo</span>();</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">showMenu</span> = <span class="hljs-literal">false</span>;</li><li>        })</li><li>      <span class="hljs-title class_">MenuItem</span>({</li><li>        <span class="hljs-attr">content</span>: <span class="hljs-string">'粘贴为纯文本'</span>,</li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">pasteAndMatchStyle</span>();</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">showMenu</span> = <span class="hljs-literal">false</span>;</li><li>        })</li><li>      <span class="hljs-title class_">MenuItem</span>({</li><li>        <span class="hljs-attr">content</span>: <span class="hljs-string">'复制图片'</span>,</li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">copyImage</span>();</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">showMenu</span> = <span class="hljs-literal">false</span>;</li><li>        })</li><li>      <span class="hljs-title class_">MenuItem</span>({</li><li>        <span class="hljs-attr">content</span>: <span class="hljs-string">'剪切'</span>,</li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">cut</span>();</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">showMenu</span> = <span class="hljs-literal">false</span>;</li><li>        })</li><li>      <span class="hljs-title class_">MenuItem</span>({</li><li>        <span class="hljs-attr">content</span>: <span class="hljs-string">'复制'</span>,</li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">copy</span>();</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">showMenu</span> = <span class="hljs-literal">false</span>;</li><li>        })</li><li>      <span class="hljs-title class_">MenuItem</span>({</li><li>        <span class="hljs-attr">content</span>: <span class="hljs-string">'粘贴'</span>,</li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">paste</span>();</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">showMenu</span> = <span class="hljs-literal">false</span>;</li><li>        })</li><li>      <span class="hljs-title class_">MenuItem</span>({</li><li>        <span class="hljs-attr">content</span>: <span class="hljs-string">'复制链接'</span>,</li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> pasteData = pasteboard.<span class="hljs-title function_">createData</span>(<span class="hljs-string">'text/plain'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">linkUrl</span>);</li><li>          pasteboard.<span class="hljs-title function_">getSystemPasteboard</span>().<span class="hljs-title function_">setData</span>(pasteData, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (error) {</li><li>              <span class="hljs-keyword">return</span>;</li><li>            }</li><li>          })</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">showMenu</span> = <span class="hljs-literal">false</span>;</li><li>        })</li><li>      <span class="hljs-title class_">MenuItem</span>({</li><li>        <span class="hljs-attr">content</span>: <span class="hljs-string">'全选'</span>,</li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">selectAll</span>();</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">showMenu</span> = <span class="hljs-literal">false</span>;</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-number">150</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">450</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        <span class="hljs-comment">// 触发自定义弹窗</span></li><li>        .<span class="hljs-title function_">onContextMenuShow</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span> = event.<span class="hljs-property">result</span></li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">TAG</span> + <span class="hljs-string">"x coord = "</span> + event.<span class="hljs-property">param</span>.<span class="hljs-title function_">x</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">TAG</span> + <span class="hljs-string">"link url = "</span> + event.<span class="hljs-property">param</span>.<span class="hljs-title function_">getLinkUrl</span>());</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">linkUrl</span> = event.<span class="hljs-property">param</span>.<span class="hljs-title function_">getLinkUrl</span>();</li><li>          }</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`x: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.offsetX}</span>, y: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.offsetY}</span>`</span>);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">showMenu</span> = <span class="hljs-literal">true</span>;</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetX</span> = <span class="hljs-number">0</span>;</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetY</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>!.<span class="hljs-title function_">px2vp</span>(event?.<span class="hljs-property">param</span>.<span class="hljs-title function_">y</span>() ?? <span class="hljs-number">0</span>) - <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">bindPopup</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">showMenu</span>,</li><li>          {</li><li>            <span class="hljs-attr">builder</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">MenuBuilder</span>(),</li><li>            <span class="hljs-attr">enableArrow</span>: <span class="hljs-literal">false</span>,</li><li>            <span class="hljs-attr">placement</span>: <span class="hljs-title class_">Placement</span>.<span class="hljs-property">LeftTop</span>,</li><li>            <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetX</span>, <span class="hljs-attr">y</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetY</span> },</li><li>            <span class="hljs-attr">mask</span>: <span class="hljs-literal">false</span>,</li><li>            <span class="hljs-attr">onStateChange</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">if</span> (!e.<span class="hljs-property">isVisible</span>) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">showMenu</span> = <span class="hljs-literal">false</span>;</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>!.<span class="hljs-title function_">closeContextMenu</span>();</li><li>              }</li><li>            }</li><li>          })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>onContextMenuShow<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://www.example.com"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:27px"</span>&gt;</span>链接www.example.com<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></li><li>  <span class="hljs-comment">&lt;!-- rawfile下放任意一张图片命名为example.png --&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"example.png"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>选中文字鼠标右键弹出菜单<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 998px;">     <h2 id="oncontextmenuhide11" device-type="phone,2in1,tablet,wearable,tv">onContextMenuHide<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oncontextmenuhide11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onContextMenuHide(callback: OnContextMenuHideCallback)</p>     <p>长按特定元素（例如图片，链接）或鼠标右键，隐藏菜单。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#oncontextmenuhidecallback11">OnContextMenuHideCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">菜单相关回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onContextMenuHide</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onContextMenuHide callback"</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1162px;">     <h2 id="onscroll9" device-type="phone,2in1,tablet,wearable,tv">onScroll<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onscroll9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onScroll(callback: Callback&lt;OnScrollEvent&gt;)</p>     <p>通知网页全局滚动位置。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>通知的是页面全局滚动位置，局部滚动位置的变化是无法触发此回调。</p>       <p>判断页面是否是全局滚动，在滚动前后打印window.pagYOffset或者window.pagXOffset。</p>       <p>如果是全局滚动，window.pagYOffset或者window.pagXOffset的值在滚动前后会有变化，反之没有变化。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onscrollevent12">OnScrollEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当页面滑动到指定位置时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onScroll</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"x = "</span> + event.<span class="hljs-property">xOffset</span>);</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"y = "</span> + event.<span class="hljs-property">yOffset</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2570px;">     <h2 id="ongeolocationshow" device-type="phone,2in1,tablet,wearable,tv">onGeolocationShow<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ongeolocationshow" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onGeolocationShow(callback: Callback&lt;OnGeolocationShowEvent&gt;)</p>     <p>通知用户收到地理位置信息获取请求，需配置"ohos.permission.LOCATION"、"ohos.permission.APPROXIMATELY_LOCATION"权限。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#ongeolocationshowevent12">OnGeolocationShowEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，请求显示地理位置权限时触发，返回地理位置信息请求对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { abilityAccessCtrl, common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> atManager = abilityAccessCtrl.<span class="hljs-title function_">createAtManager</span>();</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-comment">// 组件的声明周期函数，创建组件实例后触发</span></li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> context : <span class="hljs-title class_">Context</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>    <span class="hljs-keyword">if</span> (!context) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"context is undefined"</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-comment">// 向用户请求位置权限</span></li><li>    atManager.<span class="hljs-title function_">requestPermissionsFromUser</span>(context, [<span class="hljs-string">"ohos.permission.LOCATION"</span>, <span class="hljs-string">"ohos.permission.APPROXIMATELY_LOCATION"</span>]).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'data:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'data permissions:'</span> + data.<span class="hljs-property">permissions</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'data authResults:'</span> + data.<span class="hljs-property">authResults</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request permissions from user. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">geolocationAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onGeolocationShow</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">showAlertDialog</span>({</li><li>              <span class="hljs-attr">title</span>: <span class="hljs-string">'title'</span>,</li><li>              <span class="hljs-attr">message</span>: <span class="hljs-string">'text'</span>,</li><li>              <span class="hljs-attr">confirm</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'onConfirm'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-comment">// invoke的第三个参数表示是否记住当前弹窗的选择状态，如果传入true，则下次不再弹出对话框</span></li><li>                  event.<span class="hljs-property">geolocation</span>.<span class="hljs-title function_">invoke</span>(event.<span class="hljs-property">origin</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>);</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-comment">// invoke的第三个参数表示是否记住当前弹窗的选择状态，如果传入true，则下次不再弹出对话框</span></li><li>                event.<span class="hljs-property">geolocation</span>.<span class="hljs-title function_">invoke</span>(event.<span class="hljs-property">origin</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);</li><li>              }</li><li>            })</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"locationInfo"</span>&gt;</span>位置信息<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"getLocation()"</span>&gt;</span>获取位置<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript"><span class="hljs-keyword">var</span> locationInfo=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"locationInfo"</span>);</span></li><li><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getLocation</span>(<span class="hljs-params"></span>){</span></li><li><span class="language-javascript">  <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">geolocation</span>) {</span></li><li><span class="language-javascript">    <span class="hljs-comment">// 前端页面访问设备地理位置</span></span></li><li><span class="language-javascript">    navigator.<span class="hljs-property">geolocation</span>.<span class="hljs-title function_">getCurrentPosition</span>(showPosition);</span></li><li><span class="language-javascript">  }</span></li><li><span class="language-javascript">}</span></li><li><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">showPosition</span>(<span class="hljs-params">position</span>){</span></li><li><span class="language-javascript">  locationInfo.<span class="hljs-property">innerHTML</span>=<span class="hljs-string">"Latitude: "</span> + position.<span class="hljs-property">coords</span>.<span class="hljs-property">latitude</span> + <span class="hljs-string">"&lt;br /&gt;Longitude: "</span> + position.<span class="hljs-property">coords</span>.<span class="hljs-property">longitude</span>;</span></li><li><span class="language-javascript">}</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1022px;">     <h2 id="ongeolocationhide" device-type="phone,2in1,tablet,wearable,tv">onGeolocationHide<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ongeolocationhide" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onGeolocationHide(callback: () =&gt; void)</p>     <p>通知用户先前被调用<a href="/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#ongeolocationshow">onGeolocationShow</a>时收到地理位置信息获取请求已被取消。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">() =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">地理位置信息获取请求已被取消的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">geolocationAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onGeolocationHide</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onGeolocationHide..."</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1094px;">     <h2 id="onfullscreenenter9" device-type="phone,2in1,tablet,wearable,tv">onFullScreenEnter<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onfullscreenenter9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onFullScreenEnter(callback: OnFullScreenEnterCallback)</p>     <p>通知开发者Web组件进入全屏模式。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onfullscreenentercallback12">OnFullScreenEnterCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Web组件进入全屏时的回调信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">handler</span>: <span class="hljs-title class_">FullScreenExitHandler</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onFullScreenEnter</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onFullScreenEnter videoWidth: "</span> + event.<span class="hljs-property">videoWidth</span> +</li><li>            <span class="hljs-string">", videoHeight: "</span> + event.<span class="hljs-property">videoHeight</span>);</li><li>          <span class="hljs-comment">// 应用可以通过 this.handler.exitFullScreen() 主动退出全屏。</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span> = event.<span class="hljs-property">handler</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1166px;">     <h2 id="onfullscreenexit9" device-type="phone,2in1,tablet,wearable,tv">onFullScreenExit<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onfullscreenexit9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onFullScreenExit(callback: () =&gt; void)</p>     <p>通知开发者Web组件退出全屏模式。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">() =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">退出全屏模式时的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">handler</span>: <span class="hljs-title class_">FullScreenExitHandler</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onFullScreenExit</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onFullScreenExit..."</span>)</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">exitFullScreen</span>();</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">onFullScreenEnter</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span> = event.<span class="hljs-property">handler</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2618px;">     <h2 id="onwindownew9" device-type="phone,2in1,tablet,wearable,tv">onWindowNew<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onwindownew9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onWindowNew(callback: Callback&lt;OnWindowNewEvent&gt;)</p>     <p>使能multiWindowAccess情况下，通知用户新建窗口请求。</p>     <p>若不调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-controllerhandler#setwebcontroller9">setWebController</a>接口，会造成render进程阻塞。</p>     <p>如果没有创建新窗口，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-controllerhandler#setwebcontroller9">setWebController</a>接口时设置成null，通知Web没有创建新窗口。</p>     <p>新窗口需避免直接覆盖在原Web组件上，且应与主页面以相同形式明确显示其URL（如地址栏）以防止用户混淆。若无法实现可信的URL可视化管理，则需考虑禁止创建新窗口。</p>     <p>需注意：新窗口请求来源无法可靠追溯，可能由第三方iframe发起，应用需默认采取沙箱隔离、限制权限等防御性措施以确保安全。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onwindownewevent12">OnWindowNewEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页要求用户创建窗口时触发的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-comment">// 在同一page页有两个Web组件。在WebComponent新开窗口时，会跳转到NewWebViewComp。</span></li><li><span class="hljs-meta">@CustomDialog</span></li><li>struct <span class="hljs-title class_">NewWebViewComp</span> {</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span>;</li><li>  <span class="hljs-attr">webviewController1</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">"www.example.com"</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController1</span> })</li><li>        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">multiWindowAccess</span>(<span class="hljs-literal">false</span>)</li><li>        .<span class="hljs-title function_">onWindowExit</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"NewWebViewComp onWindowExit"</span>);</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"window.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>        <span class="hljs-comment">// 需要使能multiWindowAccess</span></li><li>        .<span class="hljs-title function_">multiWindowAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">allowWindowOpenMethod</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onWindowNew</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">close</span>();</li><li>          }</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">popController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>            <span class="hljs-attr">builder</span>: <span class="hljs-title class_">NewWebViewComp</span>({ <span class="hljs-attr">webviewController1</span>: popController })</li><li>          })</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>();</li><li>          <span class="hljs-comment">// 将新窗口对应WebviewController返回给Web内核。</span></li><li>          <span class="hljs-comment">// 若不调用event.handler.setWebController接口，会造成render进程阻塞。</span></li><li>          <span class="hljs-comment">// 如果没有创建新窗口，调用event.handler.setWebController接口时设置成null，通知Web没有创建新窗口。</span></li><li>          event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">setWebController</span>(popController);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- window.html页面代码 --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"openNewWindow('https://www.example.com')"</span>&gt;</span>打开新页面<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">openNewWindow</span>(<span class="hljs-params">url</span>) {</span></li><li><span class="language-javascript">      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(url, <span class="hljs-string">'example'</span>);</span></li><li><span class="language-javascript">      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2702px;">     <h2 id="onactivatecontent20" device-type="phone,2in1,tablet,wearable,tv">onActivateContent<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onactivatecontent20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onActivateContent(callback: Callback&lt;void&gt;)</p>     <p>当Web页面触发window.open(url, name)时，会根据name查找是否存在已绑定的Web实例。若存在，该实例将收到此回调以通知应用需将其展示至前端；若不存在，则通过<a href="/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onwindownew9">onWindowNew</a>通知应用创建新Web实例。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>通过name绑定Web实例‌：需在<a href="/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onwindownew9">onWindowNew</a>回调中调用event.handler.setWebController方法，并传入新Web实例的controller，以完成绑定。</li>        <li>name‌命名需符合正则表达式[a-zA-Z0-9_]+。当该name被用作&lt;a&gt;或&lt;form&gt;标签的target属性值时，已绑定的Web实例同样会触发此回调。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">再次在原页面触发window.open后，在已打开的新页面触发该回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-comment">// 在同一page页有两个Web组件。在WebComponent新开窗口时，会跳转到NewWebViewComp。</span></li><li><span class="hljs-meta">@CustomDialog</span></li><li>struct <span class="hljs-title class_">NewWebViewComp</span> {</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span>;</li><li>  <span class="hljs-attr">webviewController1</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">"https://www.example.com"</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController1</span> })</li><li>        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">multiWindowAccess</span>(<span class="hljs-literal">false</span>)</li><li>        .<span class="hljs-title function_">onWindowExit</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">onActivateContent</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">//该Web需要展示到前面，建议应用在这里进行tab或window切换的动作展示此web</span></li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"NewWebViewComp onActivateContent"</span>)</li><li>        })</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-string">"50%"</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"window.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">allowWindowOpenMethod</span>(<span class="hljs-literal">true</span>)</li><li>        <span class="hljs-comment">// 需要使能multiWindowAccess</span></li><li>        .<span class="hljs-title function_">multiWindowAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onWindowNew</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">close</span>()</li><li>          }</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">popController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>            <span class="hljs-attr">builder</span>: <span class="hljs-title class_">NewWebViewComp</span>({ <span class="hljs-attr">webviewController1</span>: popController }),</li><li>            <span class="hljs-attr">isModal</span>: <span class="hljs-literal">false</span></li><li>          })</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>();</li><li>          <span class="hljs-comment">// 将新窗口对应WebviewController返回给Web内核。</span></li><li>          <span class="hljs-comment">// 若不调用event.handler.setWebController接口，会造成render进程阻塞。</span></li><li>          event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">setWebController</span>(popController);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- window.html页面代码 --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ActivateContentEvent<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"openNewWindow('https://www.example.com')"</span>&gt;</span>打开新页面<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">openNewWindow</span>(<span class="hljs-params">url</span>) {</span></li><li><span class="language-javascript">      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(url, <span class="hljs-string">'example'</span>);</span></li><li><span class="language-javascript">      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 974px;">     <h2 id="onwindowexit9" device-type="phone,2in1,tablet,wearable,tv">onWindowExit<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onwindowexit9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onWindowExit(callback: () =&gt; void)</p>     <p>通知用户窗口关闭请求。和<a href="/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onwindownew9">onWindowNew</a>一样，从安全角度讲，应用应该确保用户可以知道他们交互的页面已关闭。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">() =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">窗口请求关闭的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onWindowExit</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onWindowExit..."</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1070px;">     <h2 id="onsearchresultreceive9" device-type="phone,2in1,tablet,wearable,tv">onSearchResultReceive<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsearchresultreceive9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onSearchResultReceive(callback: Callback&lt;OnSearchResultReceiveEvent&gt;)</p>     <p>回调通知调用方网页页内查找的结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onsearchresultreceiveevent12">OnSearchResultReceiveEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">通知调用方网页页内查找的结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onSearchResultReceive</span>(<span class="hljs-function"><span class="hljs-params">ret</span> =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (ret) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"on search result receive:"</span> + <span class="hljs-string">"[cur]"</span> + ret.<span class="hljs-property">activeMatchOrdinal</span> +</li><li>              <span class="hljs-string">"[total]"</span> + ret.<span class="hljs-property">numberOfMatches</span> + <span class="hljs-string">"[isDone]"</span> + ret.<span class="hljs-property">isDoneCounting</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1706px;">     <h2 id="ondataresubmitted9" device-type="phone,2in1,tablet,wearable,tv">onDataResubmitted<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondataresubmitted9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onDataResubmitted(callback: Callback&lt;OnDataResubmittedEvent&gt;)</p>     <p>设置网页表单可以重新提交时触发的回调函数。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#ondataresubmittedevent12">OnDataResubmittedEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页表单可以重新提交时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 在网页中点击提交之后，点击refresh按钮可以重新提交时的触发函数。</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'refresh'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">refresh</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onDataResubmitted</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onDataResubmitted'</span>);</li><li>          event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">resend</span>();</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li> <span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li> <span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li> <span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li> <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>   <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span></li><li> <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li> <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>   <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"http://httpbin.org/post"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span></li><li>     <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span>&gt;</span></li><li>     <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"提交"</span>&gt;</span></li><li>   <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></li><li> <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li> <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 998px;">     <h2 id="onpagevisible9" device-type="phone,2in1,tablet,wearable,tv">onPageVisible<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onpagevisible9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onPageVisible(callback: Callback&lt;OnPageVisibleEvent&gt;)</p>     <p>设置旧页面不再呈现，新页面即将可见时触发的回调函数。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onpagevisibleevent12">OnPageVisibleEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">旧页面不再呈现，新页面即将可见时触发的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onPageVisible</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onPageVisible url:'</span> + event.<span class="hljs-property">url</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1190px;">     <h2 id="oninterceptkeyevent9" device-type="phone,2in1,tablet,wearable,tv">onInterceptKeyEvent<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oninterceptkeyevent9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onInterceptKeyEvent(callback: (event: KeyEvent) =&gt; boolean)</p>     <p>设置键盘事件的回调函数，该回调在被Webview使用前触发。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(event:<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-key#keyevent对象说明">KeyEvent</a>) =&gt; boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>触发的KeyEvent事件。</p>          <p>返回值为boolean类型，true表示将该KeyEvent传入Webview内核，false表示不将该KeyEvent传入ArkWeb内核。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onInterceptKeyEvent</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event.<span class="hljs-property">keyCode</span> == <span class="hljs-number">2017</span> || event.<span class="hljs-property">keyCode</span> == <span class="hljs-number">2018</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onInterceptKeyEvent get event.keyCode <span class="hljs-subst">${event.keyCode}</span>`</span>);</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 998px;">     <h2 id="ontouchiconurlreceived9" device-type="phone,2in1,tablet,wearable,tv">onTouchIconUrlReceived<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ontouchiconurlreceived9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onTouchIconUrlReceived(callback: Callback&lt;OnTouchIconUrlReceivedEvent&gt;)</p>     <p>设置接收到apple-touch-icon url地址时的回调函数。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.44.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#ontouchiconurlreceivedevent12">OnTouchIconUrlReceivedEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">接收到的apple-touch-icon url地址时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.baidu.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onTouchIconUrlReceived</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onTouchIconUrlReceived:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(event));</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1070px;">     <h2 id="onfaviconreceived9" device-type="phone,2in1,tablet,wearable,tv">onFaviconReceived<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onfaviconreceived9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onFaviconReceived(callback: Callback&lt;OnFaviconReceivedEvent&gt;)</p>     <p>设置应用为当前页面接收到新的favicon时的回调函数。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.45.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onfaviconreceivedevent12">OnFaviconReceivedEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前页面接收到新的favicon时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">icon</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onFaviconReceived</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onFaviconReceived'</span>);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">icon</span> = event.<span class="hljs-property">favicon</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1046px;">     <h2 id="onaudiostatechanged10" device-type="phone,2in1,tablet,wearable,tv">onAudioStateChanged<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onaudiostatechanged10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onAudioStateChanged(callback: Callback&lt;OnAudioStateChangedEvent&gt;)</p>     <p>设置网页上的音频播放状态发生改变时的回调函数。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.46.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onaudiostatechangedevent12">OnAudioStateChangedEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页上的音频播放状态发生改变时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">playing</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onAudioStateChanged</span>(<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">playing</span> = event.<span class="hljs-property">playing</span>;</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onAudioStateChanged playing: '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">playing</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1094px;">     <h2 id="onfirstcontentfulpaint10" device-type="phone,2in1,tablet,wearable,tv">onFirstContentfulPaint<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onfirstcontentfulpaint10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onFirstContentfulPaint(callback: Callback&lt;OnFirstContentfulPaintEvent&gt;)</p>     <p>设置网页首次内容绘制回调函数。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onfirstcontentfulpaintevent12">OnFirstContentfulPaintEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页首次内容绘制回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onFirstContentfulPaint</span>(<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onFirstContentfulPaint:"</span> + <span class="hljs-string">"[navigationStartTick]:"</span> +</li><li>            event.<span class="hljs-property">navigationStartTick</span> + <span class="hljs-string">", [firstContentfulPaintMs]:"</span> +</li><li>            event.<span class="hljs-property">firstContentfulPaintMs</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1022px;">     <h2 id="onfirstmeaningfulpaint12" device-type="phone,2in1,tablet,wearable,tv">onFirstMeaningfulPaint<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onfirstmeaningfulpaint12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onFirstMeaningfulPaint(callback: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onfirstmeaningfulpaintcallback12">OnFirstMeaningfulPaintCallback</a>)</p>     <p>设置网页绘制页面主要内容回调函数。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onfirstmeaningfulpaintcallback12">OnFirstMeaningfulPaintCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页绘制页面主要内容度量信息的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onFirstMeaningfulPaint</span>(<span class="hljs-function">(<span class="hljs-params">details</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onFirstMeaningfulPaint: [navigationStartTime]= "</span> + details.<span class="hljs-property">navigationStartTime</span> +</li><li>            <span class="hljs-string">", [firstMeaningfulPaintTime]="</span> + details.<span class="hljs-property">firstMeaningfulPaintTime</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1118px;">     <h2 id="onlargestcontentfulpaint12" device-type="phone,2in1,tablet,wearable,tv">onLargestContentfulPaint<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onlargestcontentfulpaint12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onLargestContentfulPaint(callback: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onlargestcontentfulpaintcallback12">OnLargestContentfulPaintCallback</a>)</p>     <p>设置网页绘制页面最大内容回调函数。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.49.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onlargestcontentfulpaintcallback12">OnLargestContentfulPaintCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页绘制页面最大内容度量信息的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onLargestContentfulPaint</span>(<span class="hljs-function">(<span class="hljs-params">details</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onLargestContentfulPaint: [navigationStartTime]= "</span> + details.<span class="hljs-property">navigationStartTime</span> +</li><li>            <span class="hljs-string">", [largestImagePaintTime]="</span> + details.<span class="hljs-property">largestImagePaintTime</span> +</li><li>            <span class="hljs-string">", [largestTextPaintTime]="</span> + details.<span class="hljs-property">largestTextPaintTime</span> +</li><li>            <span class="hljs-string">", [largestImageLoadStartTime]="</span> + details.<span class="hljs-property">largestImageLoadStartTime</span> +</li><li>            <span class="hljs-string">", [largestImageLoadEndTime]="</span> + details.<span class="hljs-property">largestImageLoadEndTime</span> +</li><li>            <span class="hljs-string">", [imageBPP]="</span> + details.<span class="hljs-property">imageBPP</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1262px;">     <h2 id="onloadintercept10" device-type="phone,2in1,tablet,wearable,tv">onLoadIntercept<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onloadintercept10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onLoadIntercept(callback: Callback&lt;OnLoadInterceptEvent, boolean&gt;)</p>     <p>当Web组件加载url之前触发该回调，用于判断是否阻止此次访问。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onloadinterceptevent12">OnLoadInterceptEvent</a>, boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>导航触发时的回调包括iframe导航，在回调中可以选择允许或者取消此次导航。</p>          <p>返回值为boolean类型。返回true表示取消此次导航，false表示允许此次导航。</p>          <p>返回undefined或null时为false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onLoadIntercept</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url:'</span> + event.<span class="hljs-property">data</span>.<span class="hljs-title function_">getRequestUrl</span>());</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'isMainFrame:'</span> + event.<span class="hljs-property">data</span>.<span class="hljs-title function_">isMainFrame</span>());</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'isRedirect:'</span> + event.<span class="hljs-property">data</span>.<span class="hljs-title function_">isRedirect</span>());</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'isRequestGesture:'</span> + event.<span class="hljs-property">data</span>.<span class="hljs-title function_">isRequestGesture</span>());</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 998px;">     <h2 id="onrequestselected" device-type="phone,2in1,tablet,wearable,tv">onRequestSelected<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onrequestselected" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onRequestSelected(callback: () =&gt; void)</p>     <p>当Web组件获取焦点时触发回调。如果组件在未获焦状态下加载网页并成功获取焦点，将触发两次回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">() =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当网页获取焦点时触发的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onRequestSelected</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onRequestSelected'</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1502px;">     <h2 id="onscreencapturerequest10" device-type="phone,2in1,tablet,wearable,tv">onScreenCaptureRequest<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onscreencapturerequest10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onScreenCaptureRequest(callback: Callback&lt;OnScreenCaptureRequestEvent&gt;)</p>     <p>通知收到屏幕捕获请求。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onscreencapturerequestevent12">OnScreenCaptureRequestEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">通知收到屏幕捕获请求。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onScreenCaptureRequest</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">showAlertDialog</span>({</li><li>              <span class="hljs-attr">title</span>: <span class="hljs-string">'title: '</span> + event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">getOrigin</span>(),</li><li>              <span class="hljs-attr">message</span>: <span class="hljs-string">'text'</span>,</li><li>              <span class="hljs-attr">primaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'deny'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">deny</span>();</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">secondaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'onConfirm'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">grant</span>({ <span class="hljs-attr">captureMode</span>: <span class="hljs-title class_">WebCaptureMode</span>.<span class="hljs-property">HOME_SCREEN</span> });</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                event.<span class="hljs-property">handler</span>.<span class="hljs-title function_">deny</span>();</li><li>              }</li><li>            })</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1022px;">     <h2 id="onoverscroll10" device-type="phone,2in1,tablet,wearable,tv">onOverScroll<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onoverscroll10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onOverScroll(callback: Callback&lt;OnOverScrollEvent&gt;)</p>     <p>该接口在网页过度滚动时触发，用于通知网页过度滚动的偏移量。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onoverscrollevent12">OnOverScrollEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页过度滚动时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onOverScroll</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"x = "</span> + event.<span class="hljs-property">xOffset</span>);</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"y = "</span> + event.<span class="hljs-property">yOffset</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2222px;">     <h2 id="oncontrollerattached10" device-type="phone,2in1,tablet,wearable,tv">onControllerAttached<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oncontrollerattached10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onControllerAttached(callback: () =&gt; void)</p>     <p>当Controller成功绑定到Web组件时触发该回调，并且该Controller必须为WebviewController，且禁止在该事件回调前调用Web组件相关的接口，否则会抛出js-error异常。</p>     <p>因该回调调用时网页还未加载，无法在回调中使用有关操作网页的接口，例如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#zoomin">zoomIn</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#zoomout">zoomOut</a>等，可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#loadurl">loadUrl</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#getwebid">getWebId</a>等操作网页不相关的接口。</p>     <p>组件生命周期详情可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-event-sequence" target="_blank">Web组件的生命周期</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.54.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">() =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当ArkWeb控制器初始化成功时触发的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>在该回调中使用loadUrl加载网页</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onControllerAttached</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadUrl</span>($rawfile(<span class="hljs-string">"index.html"</span>));</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>在该回调中使用getWebId</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onControllerAttached</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> id = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getWebId</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"id: "</span> + id);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>            <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${code}</span>,  Message: <span class="hljs-subst">${message}</span>`</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1094px;">     <h2 id="onnavigationentrycommitted11" device-type="phone,2in1,tablet,wearable,tv">onNavigationEntryCommitted<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onnavigationentrycommitted11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onNavigationEntryCommitted(callback: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onnavigationentrycommittedcallback11">OnNavigationEntryCommittedCallback</a>)</p>     <p>当网页跳转提交时触发该回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onnavigationentrycommittedcallback11">OnNavigationEntryCommittedCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页跳转提交时触发的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onNavigationEntryCommitted</span>(<span class="hljs-function">(<span class="hljs-params">details</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onNavigationEntryCommitted: [isMainFrame]= "</span> + details.<span class="hljs-property">isMainFrame</span> +</li><li>            <span class="hljs-string">", [isSameDocument]="</span> + details.<span class="hljs-property">isSameDocument</span> +</li><li>            <span class="hljs-string">", [didReplaceEntry]="</span> + details.<span class="hljs-property">didReplaceEntry</span> +</li><li>            <span class="hljs-string">", [navigationType]="</span> + details.<span class="hljs-property">navigationType</span> +</li><li>            <span class="hljs-string">", [url]="</span> + details.<span class="hljs-property">url</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1022px;">     <h2 id="onsafebrowsingcheckresult11" device-type="phone,2in1,tablet,wearable,tv">onSafeBrowsingCheckResult<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsafebrowsingcheckresult11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onSafeBrowsingCheckResult(callback: OnSafeBrowsingCheckResultCallback)</p>     <p>收到网站安全风险检查结果时触发的回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onsafebrowsingcheckresultcallback11">OnSafeBrowsingCheckResultCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">收到网站安全风险检查结果时触发的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onSafeBrowsingCheckResult</span>(<span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">json</span>: <span class="hljs-title class_">ThreatType</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(callback)).<span class="hljs-property">threatType</span>;</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onSafeBrowsingCheckResult: [threatType]= "</span> + json);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1022px;">     <h2 id="onsafebrowsingcheckfinish21" device-type="phone,2in1,tablet,wearable,tv">onSafeBrowsingCheckFinish<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsafebrowsingcheckfinish21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onSafeBrowsingCheckFinish(callback: OnSafeBrowsingCheckResultCallback)</p>     <p>网站安全风险检查结束时触发的回调，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onsafebrowsingcheckresultcallback11">OnSafeBrowsingCheckResultCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回收到网站安全风险检查结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onSafeBrowsingCheckFinish</span>(<span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">json</span>: <span class="hljs-title class_">ThreatType</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(callback)).<span class="hljs-property">threatType</span>;</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onSafeBrowsingCheckFinish: [threatType]= "</span> + json);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4430px;">     <h2 id="onnativeembedlifecyclechange11" device-type="phone,2in1,tablet,wearable,tv">onNativeEmbedLifecycleChange<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onnativeembedlifecyclechange11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onNativeEmbedLifecycleChange(callback: (event: NativeEmbedDataInfo) =&gt; void)</p>     <p>当同层标签生命周期变化时触发该回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.58.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(event: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#nativeembeddatainfo11">NativeEmbedDataInfo</a>) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">同层标签生命周期变化时触发该回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li>
</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Ability onCreate'</span>);</li><li>    <span class="hljs-comment">// API12新增：开启同层渲染BFCache开关</span></li><li>    <span class="hljs-keyword">let</span> features = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">BackForwardCacheSupportedFeatures</span>();</li><li>    features.<span class="hljs-property">nativeEmbed</span> = <span class="hljs-literal">true</span>;</li><li>    features.<span class="hljs-property">mediaTakeOver</span> = <span class="hljs-literal">true</span>;</li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">enableBackForwardCache</span>(features);</li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">initializeWebEngine</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onDestroy</span>(): <span class="hljs-built_in">void</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Ability onDestroy'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-attr">windowStage</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowStage</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// Main window is created, set main page for this ability</span></li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Ability onWindowStageCreate'</span>);</li><li>
</li><li>    windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to load the content. Cause: %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err) ?? <span class="hljs-string">''</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Succeeded in loading the content.'</span>);</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onWindowStageDestroy</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// Main window is destroyed, release UI related resources</span></li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Ability onWindowStageDestroy'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onForeground</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// Ability has brought to foreground</span></li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Ability onForeground'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onBackground</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// Ability has back to background</span></li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Ability onBackground'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">embedStatus</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 默认行为：点击按钮跳转页面，关闭index页面，使同层标签销毁。</span></li><li>      <span class="hljs-comment">// API12新增：使能同层渲染所在的页面支持BFCache后，点击按钮跳转页面，关闭index页面，使同层标签进入BFCache。</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Destroy'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">try</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadUrl</span>(<span class="hljs-string">"www.example.com"</span>);</li><li>        } <span class="hljs-keyword">catch</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>        }</li><li>      })</li><li>
</li><li>      <span class="hljs-comment">// API12新增：使能同层渲染所在的页面支持BFCache后，点击按钮返回页面，使同层标签离开BFCache。</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'backward'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">try</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">backward</span>();</li><li>        } <span class="hljs-keyword">catch</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>        }</li><li>      })</li><li>
</li><li>      <span class="hljs-comment">// API12新增：使能同层渲染所在的页面支持BFCache后，点击按钮前进页面，使同层标签进入BFCache。</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'forward'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">try</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">forward</span>();</li><li>        } <span class="hljs-keyword">catch</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>        }</li><li>      })</li><li>
</li><li>
</li><li>      <span class="hljs-comment">// API12新增同层标签进入离开BFCache状态：非http与https协议加载的网页，Web内核不支持进入BFCache;</span></li><li>      <span class="hljs-comment">// 因此如果要测试ENTER_BFCACHE/LEAVE_BFCACHE状态，需要将index.html放到Web服务器上，使用http或者https协议加载，如：</span></li><li>      <span class="hljs-comment">// Web({ src: "http://xxxx/index.html", controller: this.controller })</span></li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">enableNativeEmbedMode</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onNativeEmbedLifecycleChange</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-comment">// 当加载页面中有同层标签会触发Create。</span></li><li>          <span class="hljs-keyword">if</span> (event.<span class="hljs-property">status</span> == <span class="hljs-title class_">NativeEmbedStatus</span>.<span class="hljs-property">CREATE</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">embedStatus</span> = <span class="hljs-string">'Create'</span>;</li><li>          }</li><li>          <span class="hljs-comment">// 当页面中同层标签移动或者缩放时会触发Update。</span></li><li>          <span class="hljs-keyword">if</span> (event.<span class="hljs-property">status</span> == <span class="hljs-title class_">NativeEmbedStatus</span>.<span class="hljs-property">UPDATE</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">embedStatus</span> = <span class="hljs-string">'Update'</span>;</li><li>          }</li><li>          <span class="hljs-comment">// 退出页面时会触发Destroy。</span></li><li>          <span class="hljs-keyword">if</span> (event.<span class="hljs-property">status</span> == <span class="hljs-title class_">NativeEmbedStatus</span>.<span class="hljs-property">DESTROY</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">embedStatus</span> = <span class="hljs-string">'Destroy'</span>;</li><li>          }</li><li>          <span class="hljs-comment">// 同层标签所在的页面进入BFCache时，会触发Enter BFCache。</span></li><li>          <span class="hljs-keyword">if</span> (event.<span class="hljs-property">status</span> == <span class="hljs-title class_">NativeEmbedStatus</span>.<span class="hljs-property">ENTER_BFCACHE</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">embedStatus</span> = <span class="hljs-string">'Enter BFCache'</span>;</li><li>          }</li><li>          <span class="hljs-comment">// 同层标签所在的页面离开BFCache时，会触发Leave BFCache。</span></li><li>          <span class="hljs-keyword">if</span> (event.<span class="hljs-property">status</span> == <span class="hljs-title class_">NativeEmbedStatus</span>.<span class="hljs-property">LEAVE_BFCACHE</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">embedStatus</span> = <span class="hljs-string">'Leave BFCache'</span>;</li><li>          }</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"status = "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">embedStatus</span>);</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"surfaceId = "</span> + event.<span class="hljs-property">surfaceId</span>);</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"embedId = "</span> + event.<span class="hljs-property">embedId</span>);</li><li>          <span class="hljs-keyword">if</span> (event.<span class="hljs-property">info</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"id = "</span> + event.<span class="hljs-property">info</span>.<span class="hljs-property">id</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"type = "</span> + event.<span class="hljs-property">info</span>.<span class="hljs-property">type</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"src = "</span> + event.<span class="hljs-property">info</span>.<span class="hljs-property">src</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"width = "</span> + event.<span class="hljs-property">info</span>.<span class="hljs-property">width</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"height = "</span> + event.<span class="hljs-property">info</span>.<span class="hljs-property">height</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"url = "</span> + event.<span class="hljs-property">info</span>.<span class="hljs-property">url</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!--index.html--&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>同层渲染测试html<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"bodyId"</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">embed</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"nativeButton"</span> <span class="hljs-attr">type</span> = <span class="hljs-string">"native/button"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"800"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"800"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"test? params1=1"</span> <span class="hljs-attr">style</span> = <span class="hljs-string">"background-color:red"</span>/&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4058px;">     <h2 id="onnativeembedgestureevent11" device-type="phone,2in1,tablet,wearable,tv">onNativeEmbedGestureEvent<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onnativeembedgestureevent11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onNativeEmbedGestureEvent(callback: (event: NativeEmbedTouchInfo) =&gt; void)</p>     <p>当手指触摸到同层标签时触发该回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(event: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#nativeembedtouchinfo11">NativeEmbedTouchInfo</a>) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">手指触摸到同层标签时触发该回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">BuilderNode</span>, <span class="hljs-title class_">NodeRenderType</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.ArkUI"</span>;</li><li>
</li><li><span class="hljs-keyword">declare</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Params</span> {</li><li>  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>;</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">declare</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NodeControllerParams</span> {</li><li>  <span class="hljs-attr">surfaceId</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-attr">renderType</span>: <span class="hljs-title class_">NodeRenderType</span>;</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>;</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">BuilderNode</span>&lt;[<span class="hljs-title class_">Params</span>]&gt; | <span class="hljs-literal">undefined</span> | <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">surfaceId_</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">renderType_</span>: <span class="hljs-title class_">NodeRenderType</span> = <span class="hljs-title class_">NodeRenderType</span>.<span class="hljs-property">RENDER_TYPE_DISPLAY</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">width_</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">height_</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">setRenderOption</span>(<span class="hljs-params">params: NodeControllerParams</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">surfaceId_</span> = params.<span class="hljs-property">surfaceId</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderType_</span> = params.<span class="hljs-property">renderType</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">width_</span> = params.<span class="hljs-property">width</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">height_</span> = params.<span class="hljs-property">height</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BuilderNode</span>(uiContext, { <span class="hljs-attr">surfaceId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">surfaceId_</span>, <span class="hljs-attr">type</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderType_</span> });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">build</span>(<span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-title class_">ButtonBuilder</span>), { <span class="hljs-attr">text</span>: <span class="hljs-string">"myButton"</span>, <span class="hljs-attr">width</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">width_</span>, <span class="hljs-attr">height</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">height_</span> });</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getFrameNode</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">postEvent</span>(<span class="hljs-attr">event</span>: <span class="hljs-title class_">TouchEvent</span> | <span class="hljs-literal">undefined</span>): <span class="hljs-built_in">boolean</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>?.<span class="hljs-title function_">postTouchEvent</span>(event) <span class="hljs-keyword">as</span> <span class="hljs-built_in">boolean</span>;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ButtonComponent</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">params</span>: <span class="hljs-title class_">Params</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">bkColor</span>: <span class="hljs-title class_">Color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>.<span class="hljs-property">text</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span> })</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">bkColor</span>)</li><li>
</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>.<span class="hljs-property">width</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>.<span class="hljs-property">height</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">ButtonBuilder</span>(<span class="hljs-params">params: Params</span>) {</li><li>  <span class="hljs-title class_">ButtonComponent</span>({ <span class="hljs-attr">params</span>: params })</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">eventType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">nodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Stack</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeController</span>)</li><li>        <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>          .<span class="hljs-title function_">enableNativeEmbedMode</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">onNativeEmbedLifecycleChange</span>(<span class="hljs-function">(<span class="hljs-params">embed</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (embed.<span class="hljs-property">status</span> == <span class="hljs-title class_">NativeEmbedStatus</span>.<span class="hljs-property">CREATE</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeController</span>.<span class="hljs-title function_">setRenderOption</span>({</li><li>                <span class="hljs-attr">surfaceId</span>: embed.<span class="hljs-property">surfaceId</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>,</li><li>                <span class="hljs-attr">renderType</span>: <span class="hljs-title class_">NodeRenderType</span>.<span class="hljs-property">RENDER_TYPE_TEXTURE</span>,</li><li>                <span class="hljs-attr">width</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>!.<span class="hljs-title function_">px2vp</span>(embed.<span class="hljs-property">info</span>?.<span class="hljs-property">width</span>),</li><li>                <span class="hljs-attr">height</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>!.<span class="hljs-title function_">px2vp</span>(embed.<span class="hljs-property">info</span>?.<span class="hljs-property">height</span>)</li><li>              });</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeController</span>.<span class="hljs-title function_">rebuild</span>();</li><li>            }</li><li>          })</li><li>          .<span class="hljs-title function_">onNativeEmbedGestureEvent</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (event &amp;&amp; event.<span class="hljs-property">touchEvent</span>) {</li><li>              <span class="hljs-keyword">if</span> (event.<span class="hljs-property">touchEvent</span>.<span class="hljs-property">type</span> == <span class="hljs-title class_">TouchType</span>.<span class="hljs-property">Down</span>) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventType</span> = <span class="hljs-string">'Down'</span></li><li>              }</li><li>              <span class="hljs-keyword">if</span> (event.<span class="hljs-property">touchEvent</span>.<span class="hljs-property">type</span> == <span class="hljs-title class_">TouchType</span>.<span class="hljs-property">Up</span>) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventType</span> = <span class="hljs-string">'Up'</span></li><li>              }</li><li>              <span class="hljs-keyword">if</span> (event.<span class="hljs-property">touchEvent</span>.<span class="hljs-property">type</span> == <span class="hljs-title class_">TouchType</span>.<span class="hljs-property">Move</span>) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventType</span> = <span class="hljs-string">'Move'</span></li><li>              }</li><li>              <span class="hljs-keyword">if</span> (event.<span class="hljs-property">touchEvent</span>.<span class="hljs-property">type</span> == <span class="hljs-title class_">TouchType</span>.<span class="hljs-property">Cancel</span>) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventType</span> = <span class="hljs-string">'Cancel'</span></li><li>              }</li><li>              <span class="hljs-keyword">let</span> ret = <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeController</span>.<span class="hljs-title function_">postEvent</span>(event.<span class="hljs-property">touchEvent</span>)</li><li>              <span class="hljs-keyword">if</span> (event.<span class="hljs-property">result</span>) {</li><li>                event.<span class="hljs-property">result</span>.<span class="hljs-title function_">setGestureEventResult</span>(ret, <span class="hljs-literal">true</span>);</li><li>              }</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"embedId = "</span> + event.<span class="hljs-property">embedId</span>);</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"touchType = "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventType</span>);</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"x = "</span> + event.<span class="hljs-property">touchEvent</span>.<span class="hljs-property">touches</span>[<span class="hljs-number">0</span>].<span class="hljs-property">x</span>);</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"y = "</span> + event.<span class="hljs-property">touchEvent</span>.<span class="hljs-property">touches</span>[<span class="hljs-number">0</span>].<span class="hljs-property">y</span>);</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Component globalPos:("</span> + event.<span class="hljs-property">touchEvent</span>.<span class="hljs-property">target</span>.<span class="hljs-property">area</span>.<span class="hljs-property">globalPosition</span>.<span class="hljs-property">x</span> + <span class="hljs-string">","</span> + event.<span class="hljs-property">touchEvent</span>.<span class="hljs-property">target</span>.<span class="hljs-property">area</span>.<span class="hljs-property">globalPosition</span>.<span class="hljs-property">y</span> + <span class="hljs-string">")"</span>);</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"width = "</span> + event.<span class="hljs-property">touchEvent</span>.<span class="hljs-property">target</span>.<span class="hljs-property">area</span>.<span class="hljs-property">width</span>);</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"height = "</span> + event.<span class="hljs-property">touchEvent</span>.<span class="hljs-property">target</span>.<span class="hljs-property">area</span>.<span class="hljs-property">height</span>);</li><li>            }</li><li>          })</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!--index.html--&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>同层渲染测试html<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"bodyId"</span>&gt;</span></li><li>       <span class="hljs-tag">&lt;<span class="hljs-name">embed</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"nativeButton"</span> <span class="hljs-attr">type</span> = <span class="hljs-string">"native/button"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"800"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"800"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"test?params1=1"</span> <span class="hljs-attr">style</span> = <span class="hljs-string">"background-color:red"</span>/&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1286px;">     <h2 id="onintelligenttrackingpreventionresult12" device-type="phone,2in1,tablet,wearable,tv">onIntelligentTrackingPreventionResult<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onintelligenttrackingpreventionresult12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onIntelligentTrackingPreventionResult(callback: OnIntelligentTrackingPreventionCallback)</p>     <p>智能防跟踪功能使能时，当追踪者cookie被拦截时触发该回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.60.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onintelligenttrackingpreventioncallback12">OnIntelligentTrackingPreventionCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">智能防跟踪功能使能时，当追踪者cookie被拦截时触发的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 需要打开智能防跟踪功能，才会触发onIntelligentTrackingPreventionResult回调</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'enableIntelligentTrackingPrevention'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">enableIntelligentTrackingPrevention</span>(<span class="hljs-literal">true</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onIntelligentTrackingPreventionResult</span>(<span class="hljs-function">(<span class="hljs-params">details</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onIntelligentTrackingPreventionResult: [websiteHost]= "</span> + details.<span class="hljs-property">host</span> +</li><li>            <span class="hljs-string">", [trackerHost]="</span> + details.<span class="hljs-property">trackerHost</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1774px;">     <h2 id="onoverrideurlloading12" device-type="phone,2in1,tablet,wearable,tv">onOverrideUrlLoading<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onoverrideurlloading12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onOverrideUrlLoading(callback: OnOverrideUrlLoadingCallback)</p>     <p>当URL将要加载到当前Web中时触发该回调，让宿主应用程序有机会获得控制权，判断是否阻止Web加载URL。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>POST请求不会触发该回调。</li>        <li>iframe加载HTTP(s)协议或about:blank时不会触发该回调，而加载非HTTP(s)协议的跳转会触发；调用loadUrl(url: string)主动触发的跳转不会触发该回调。</li>        <li>不要在回调中使用相同的URL调用loadUrl(url: string)方法，然后返回true。 这样会不必要地中止当前加载，并用相同的URL发起一次新的加载。 要继续加载当前请求URL的正确做法是直接返回false，而不是调用loadUrl(url: string)。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onoverrideurlloadingcallback12">OnOverrideUrlLoadingCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>onOverrideUrlLoading的回调。</p>          <p>返回值boolean。返回true表示中止加载URL，返回false表示继续在Web中加载URL。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onOverrideUrlLoading</span>(<span class="hljs-function">(<span class="hljs-params">webResourceRequest: WebResourceRequest</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (webResourceRequest &amp;&amp; webResourceRequest.<span class="hljs-title function_">getRequestUrl</span>() == <span class="hljs-string">"about:blank"</span>) {</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!--index.html--&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>测试网页<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>onOverrideUrlLoading Demo<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"about:blank"</span>&gt;</span>Click here<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>// 访问about:blank。</li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1562px;">     <h2 id="onviewportfitchanged12" device-type="phone,2in1,tablet,wearable,tv">onViewportFitChanged<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onviewportfitchanged12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onViewportFitChanged(callback: OnViewportFitChangedCallback)</p>     <p>网页meta中viewport-fit配置项更改时触发该回调，应用可在此回调中自适应布局视口。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onviewportfitchangedcallback12">OnViewportFitChangedCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页meta中viewport-fit配置项更改时触发的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onViewportFitChanged</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> jsonData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data);</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">viewportFit</span>: <span class="hljs-title class_">ViewportFit</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(jsonData).<span class="hljs-property">viewportFit</span>;</li><li>          <span class="hljs-keyword">if</span> (viewportFit === <span class="hljs-title class_">ViewportFit</span>.<span class="hljs-property">COVER</span>) {</li><li>            <span class="hljs-comment">// index.html网页支持沉浸式布局，可调用expandSafeArea调整web控件布局视口覆盖避让区域(状态栏或导航条)。</span></li><li>          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (viewportFit === <span class="hljs-title class_">ViewportFit</span>.<span class="hljs-property">CONTAINS</span>) {</li><li>            <span class="hljs-comment">// index.html网页不支持沉浸式布局，可调用expandSafeArea调整web控件布局视口为安全区域。</span></li><li>          } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-comment">// 默认值，可不作处理。</span></li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width,viewport-fit=cover"</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: absolute; bottom: 0; margin-bottom: env(safe-area-inset-bottom)"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4442px;">     <h2 id="oninterceptkeyboardattach12" device-type="phone,2in1,tablet,wearable,tv">onInterceptKeyboardAttach<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oninterceptkeyboardattach12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onInterceptKeyboardAttach(callback: WebKeyboardCallback)</p>     <p>网页中可编辑元素（如input标签）拉起软键盘之前会回调该接口，应用可以使用该接口拦截系统软键盘的弹出，配置应用定制的软键盘（应用根据该接口可以决定使用系统默认软键盘/定制enter键的系统软键盘/全部由应用自定义的软键盘）。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.63.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#webkeyboardcallback12">WebKeyboardCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">拦截网页拉起软键盘回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { inputMethodEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IMEKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">webKeyboardController</span>: <span class="hljs-title class_">WebKeyboardController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebKeyboardController</span>()</li><li>  <span class="hljs-attr">inputAttributeMap</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([</li><li>      [<span class="hljs-string">'UNSPECIFIED'</span>, inputMethodEngine.<span class="hljs-property">ENTER_KEY_TYPE_UNSPECIFIED</span>],</li><li>      [<span class="hljs-string">'GO'</span>, inputMethodEngine.<span class="hljs-property">ENTER_KEY_TYPE_GO</span>],</li><li>      [<span class="hljs-string">'SEARCH'</span>, inputMethodEngine.<span class="hljs-property">ENTER_KEY_TYPE_SEARCH</span>],</li><li>      [<span class="hljs-string">'SEND'</span>, inputMethodEngine.<span class="hljs-property">ENTER_KEY_TYPE_SEND</span>],</li><li>      [<span class="hljs-string">'NEXT'</span>, inputMethodEngine.<span class="hljs-property">ENTER_KEY_TYPE_NEXT</span>],</li><li>      [<span class="hljs-string">'DONE'</span>, inputMethodEngine.<span class="hljs-property">ENTER_KEY_TYPE_DONE</span>],</li><li>      [<span class="hljs-string">'PREVIOUS'</span>, inputMethodEngine.<span class="hljs-property">ENTER_KEY_TYPE_PREVIOUS</span>]</li><li>    ])</li><li>
</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * 自定义键盘组件Builder</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-meta">@Builder</span></li><li>    <span class="hljs-title function_">customKeyboardBuilder</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-comment">// 这里实现自定义键盘组件，对接WebKeyboardController实现输入、删除、关闭等操作。</span></li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"完成"</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webKeyboardController</span>.<span class="hljs-title function_">close</span>();</li><li>          })</li><li>        <span class="hljs-comment">// 插入字符。</span></li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"insertText"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">webKeyboardController</span>.<span class="hljs-title function_">insertText</span>(<span class="hljs-string">'insert '</span>);</li><li>        }).<span class="hljs-title function_">margin</span>({</li><li>          <span class="hljs-attr">bottom</span>: <span class="hljs-number">200</span>,</li><li>        })</li><li>        <span class="hljs-comment">// 从后往前删除length参数指定长度的字符。</span></li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"deleteForward"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">webKeyboardController</span>.<span class="hljs-title function_">deleteForward</span>(<span class="hljs-number">1</span>);</li><li>        }).<span class="hljs-title function_">margin</span>({</li><li>          <span class="hljs-attr">bottom</span>: <span class="hljs-number">200</span>,</li><li>        })</li><li>        <span class="hljs-comment">// 从前往后删除length参数指定长度的字符。</span></li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"deleteBackward"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">webKeyboardController</span>.<span class="hljs-title function_">deleteBackward</span>(<span class="hljs-number">1</span>);</li><li>        }).<span class="hljs-title function_">margin</span>({</li><li>          <span class="hljs-attr">left</span>: -<span class="hljs-number">220</span>,</li><li>        })</li><li>        <span class="hljs-comment">// 插入功能按键。</span></li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"sendFunctionKey"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">webKeyboardController</span>.<span class="hljs-title function_">sendFunctionKey</span>(<span class="hljs-number">6</span>);</li><li>        })</li><li>      }</li><li>    }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>      .<span class="hljs-title function_">onInterceptKeyboardAttach</span>(<span class="hljs-function">(<span class="hljs-params">KeyboardCallbackInfo</span>) =&gt;</span> {</li><li>        <span class="hljs-comment">// option初始化，默认使用系统默认键盘</span></li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">option</span>: <span class="hljs-title class_">WebKeyboardOptions</span> = {</li><li>          <span class="hljs-attr">useSystemKeyboard</span>: <span class="hljs-literal">true</span>,</li><li>        };</li><li>        <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">KeyboardCallbackInfo</span>) {</li><li>          <span class="hljs-keyword">return</span> option;</li><li>        }</li><li>
</li><li>        <span class="hljs-comment">// 保存WebKeyboardController，使用自定义键盘时候，需要使用该handler控制输入、删除、软键盘关闭等行为</span></li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">webKeyboardController</span> = <span class="hljs-title class_">KeyboardCallbackInfo</span>.<span class="hljs-property">controller</span></li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">attributes</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = <span class="hljs-title class_">KeyboardCallbackInfo</span>.<span class="hljs-property">attributes</span></li><li>        <span class="hljs-comment">// 遍历attributes</span></li><li>        <span class="hljs-keyword">let</span> attributeKeys = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(attributes)</li><li>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; attributeKeys.<span class="hljs-property">length</span>; i++) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'WebCustomKeyboard key = '</span> + attributeKeys[i] + <span class="hljs-string">', value = '</span> + attributes[attributeKeys[i]])</li><li>        }</li><li>
</li><li>        <span class="hljs-keyword">if</span> (attributes) {</li><li>          <span class="hljs-keyword">if</span> (attributes[<span class="hljs-string">'data-keyboard'</span>] == <span class="hljs-string">'customKeyboard'</span>) {</li><li>            <span class="hljs-comment">// 根据html可编辑元素的属性，判断使用不同的软键盘，例如这里如果属性包含有data-keyboard，且值为customKeyboard，则使用自定义键盘</span></li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'WebCustomKeyboard use custom keyboard'</span>)</li><li>            option.<span class="hljs-property">useSystemKeyboard</span> = <span class="hljs-literal">false</span>;</li><li>            <span class="hljs-comment">// 设置自定义键盘builder</span></li><li>            option.<span class="hljs-property">customKeyboard</span> = <span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customKeyboardBuilder</span>()</li><li>            }</li><li>            <span class="hljs-keyword">return</span> option;</li><li>          }</li><li>
</li><li>          <span class="hljs-keyword">if</span> (attributes[<span class="hljs-string">'keyboard-return'</span>] != <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-comment">// 根据html可编辑元素的属性，判断使用不同的软键盘，例如这里如果属性包含有keyboard-return，使用系统键盘，并且指定系统软键盘enterKey类型</span></li><li>            option.<span class="hljs-property">useSystemKeyboard</span> = <span class="hljs-literal">true</span>;</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">enterKeyType</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputAttributeMap</span>.<span class="hljs-title function_">get</span>(attributes[<span class="hljs-string">'keyboard-return'</span>])</li><li>            <span class="hljs-keyword">if</span> (enterKeyType != <span class="hljs-literal">undefined</span>) {</li><li>              option.<span class="hljs-property">enterKeyType</span> = enterKeyType</li><li>            }</li><li>            <span class="hljs-keyword">return</span> option;</li><li>          }</li><li>        }</li><li>
</li><li>        <span class="hljs-keyword">return</span> option;</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li>  <span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>
</li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width,minimum-scale=1.0,maximum-scale=1.0"</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>
</li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>
</li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，原有默认行为：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，系统键盘自定义enterKeyType属性 enter key UNSPECIFIED：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">keyboard-return</span>=<span class="hljs-string">"UNSPECIFIED"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，系统键盘自定义enterKeyType属性 enter key GO：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">keyboard-return</span>=<span class="hljs-string">"GO"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，系统键盘自定义enterKeyType属性 enter key SEARCH：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">keyboard-return</span>=<span class="hljs-string">"SEARCH"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，系统键盘自定义enterKeyType属性 enter key SEND：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">keyboard-return</span>=<span class="hljs-string">"SEND"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，系统键盘自定义enterKeyType属性 enter key NEXT：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">keyboard-return</span>=<span class="hljs-string">"NEXT"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，系统键盘自定义enterKeyType属性 enter key DONE：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">keyboard-return</span>=<span class="hljs-string">"DONE"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，系统键盘自定义enterKeyType属性 enter key PREVIOUS：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">keyboard-return</span>=<span class="hljs-string">"PREVIOUS"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，应用自定义键盘：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">data-keyboard</span>=<span class="hljs-string">"customKeyboard"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>
</li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li>
</li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 3674px;">     <h2 id="onnativeembedvisibilitychange12" device-type="phone,2in1,tablet,wearable,tv">onNativeEmbedVisibilityChange<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onnativeembedvisibilitychange12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onNativeEmbedVisibilityChange(callback: OnNativeEmbedVisibilityChangeCallback)</p>     <p>当网页中同层标签（例如&lt;embed&gt;标签或&lt;object&gt;标签）在视口内的可见性发生变化时，将触发该回调。同层标签默认不可见，若在页面首次加载时已可见，则会上报；若不可见，则不会上报。同层标签全部不可见才视为不可见，部分可见或全部可见则视为可见。若要获取因同层标签CSS属性（包括visibility、display以及尺寸变化）导致的可见状态变化，需配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-attributes#nativeembedoptions16">nativeEmbedOptions</a>，并将<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#embedoptions16">EmbedOptions</a>中的supportCssDisplayChange参数设为true。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onnativeembedvisibilitychangecallback12">OnNativeEmbedVisibilityChangeCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">同层标签可见性变化时触发该回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">BuilderNode</span>, <span class="hljs-title class_">NodeRenderType</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.ArkUI"</span>;</li><li>
</li><li><span class="hljs-keyword">declare</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Params</span> {</li><li>  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>;</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">declare</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NodeControllerParams</span> {</li><li>  <span class="hljs-attr">surfaceId</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-attr">renderType</span>: <span class="hljs-title class_">NodeRenderType</span>;</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>;</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">BuilderNode</span>&lt;[<span class="hljs-title class_">Params</span>]&gt; | <span class="hljs-literal">undefined</span> | <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">surfaceId_</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">renderType_</span>: <span class="hljs-title class_">NodeRenderType</span> = <span class="hljs-title class_">NodeRenderType</span>.<span class="hljs-property">RENDER_TYPE_DISPLAY</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">width_</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">height_</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">setRenderOption</span>(<span class="hljs-params">params: NodeControllerParams</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">surfaceId_</span> = params.<span class="hljs-property">surfaceId</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderType_</span> = params.<span class="hljs-property">renderType</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">width_</span> = params.<span class="hljs-property">width</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">height_</span> = params.<span class="hljs-property">height</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BuilderNode</span>(uiContext, { <span class="hljs-attr">surfaceId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">surfaceId_</span>, <span class="hljs-attr">type</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderType_</span> });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">build</span>(<span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-title class_">ButtonBuilder</span>), { <span class="hljs-attr">text</span>: <span class="hljs-string">"myButton"</span>, <span class="hljs-attr">width</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">width_</span>, <span class="hljs-attr">height</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">height_</span> });</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getFrameNode</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">postEvent</span>(<span class="hljs-attr">event</span>: <span class="hljs-title class_">TouchEvent</span> | <span class="hljs-literal">undefined</span>): <span class="hljs-built_in">boolean</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>?.<span class="hljs-title function_">postTouchEvent</span>(event) <span class="hljs-keyword">as</span> <span class="hljs-built_in">boolean</span>;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ButtonComponent</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">params</span>: <span class="hljs-title class_">Params</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">bkColor</span>: <span class="hljs-title class_">Color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>.<span class="hljs-property">text</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span> })</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">bkColor</span>)</li><li>
</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>.<span class="hljs-property">width</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>.<span class="hljs-property">height</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">ButtonBuilder</span>(<span class="hljs-params">params: Params</span>) {</li><li>  <span class="hljs-title class_">ButtonComponent</span>({ <span class="hljs-attr">params</span>: params })</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">embedVisibility</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">nodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Stack</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeController</span>)</li><li>        <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>          .<span class="hljs-title function_">enableNativeEmbedMode</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">onNativeEmbedLifecycleChange</span>(<span class="hljs-function">(<span class="hljs-params">embed</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (embed.<span class="hljs-property">status</span> == <span class="hljs-title class_">NativeEmbedStatus</span>.<span class="hljs-property">CREATE</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeController</span>.<span class="hljs-title function_">setRenderOption</span>({</li><li>                <span class="hljs-attr">surfaceId</span>: embed.<span class="hljs-property">surfaceId</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>,</li><li>                <span class="hljs-attr">renderType</span>: <span class="hljs-title class_">NodeRenderType</span>.<span class="hljs-property">RENDER_TYPE_TEXTURE</span>,</li><li>                <span class="hljs-attr">width</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>!.<span class="hljs-title function_">px2vp</span>(embed.<span class="hljs-property">info</span>?.<span class="hljs-property">width</span>),</li><li>                <span class="hljs-attr">height</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>!.<span class="hljs-title function_">px2vp</span>(embed.<span class="hljs-property">info</span>?.<span class="hljs-property">height</span>)</li><li>              });</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeController</span>.<span class="hljs-title function_">rebuild</span>();</li><li>            }</li><li>          })</li><li>          .<span class="hljs-title function_">onNativeEmbedVisibilityChange</span>(<span class="hljs-function">(<span class="hljs-params">embed</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (embed.<span class="hljs-property">visibility</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">embedVisibility</span> = <span class="hljs-string">'Visible'</span>;</li><li>            } <span class="hljs-keyword">else</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">embedVisibility</span> = <span class="hljs-string">'Hidden'</span>;</li><li>            }</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"embedId = "</span> + embed.<span class="hljs-property">embedId</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"visibility = "</span> + embed.<span class="hljs-property">visibility</span>);</li><li>          })</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>同层渲染测试html<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"bodyId"</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">embed</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"nativeButton"</span> <span class="hljs-attr">type</span> = <span class="hljs-string">"native/button"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"800"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"800"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"test?params1=1"</span> <span class="hljs-attr">style</span> = <span class="hljs-string">"background-color:red"</span>/&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 3682px;">     <h2 id="onnativeembedmouseevent20" device-type="phone,2in1,tablet,wearable,tv">onNativeEmbedMouseEvent<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onnativeembedmouseevent20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onNativeEmbedMouseEvent(callback: MouseInfoCallback)</p>     <p>在同层标签上执行以下行为时触发该回调：</p>     <ul>      <li>使用鼠标左键、中键、右键进行点击或长按。</li>      <li>使用触摸板进行对应鼠标左键、中键、右键点击长按的操作。</li>     </ul>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#mouseinfocallback20">MouseInfoCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当鼠标/触摸板点击到同层标签时触发该回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">BuilderNode</span>, <span class="hljs-title class_">NodeRenderType</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.ArkUI"</span>;</li><li>
</li><li><span class="hljs-keyword">declare</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Params</span> {</li><li>  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>;</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">declare</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NodeControllerParams</span> {</li><li>  <span class="hljs-attr">surfaceId</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-attr">renderType</span>: <span class="hljs-title class_">NodeRenderType</span>;</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>;</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">BuilderNode</span>&lt;[<span class="hljs-title class_">Params</span>]&gt; | <span class="hljs-literal">undefined</span> | <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">surfaceId_</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">renderType_</span>: <span class="hljs-title class_">NodeRenderType</span> = <span class="hljs-title class_">NodeRenderType</span>.<span class="hljs-property">RENDER_TYPE_DISPLAY</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">width_</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">height_</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">setRenderOption</span>(<span class="hljs-params">params: NodeControllerParams</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">surfaceId_</span> = params.<span class="hljs-property">surfaceId</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderType_</span> = params.<span class="hljs-property">renderType</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">width_</span> = params.<span class="hljs-property">width</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">height_</span> = params.<span class="hljs-property">height</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BuilderNode</span>(uiContext, { <span class="hljs-attr">surfaceId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">surfaceId_</span>, <span class="hljs-attr">type</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderType_</span> });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">build</span>(<span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-title class_">ButtonBuilder</span>), { <span class="hljs-attr">text</span>: <span class="hljs-string">"myButton"</span>, <span class="hljs-attr">width</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">width_</span>, <span class="hljs-attr">height</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">height_</span> });</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getFrameNode</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">postInputEvent</span>(<span class="hljs-attr">event</span>: <span class="hljs-title class_">TouchEvent</span> | <span class="hljs-title class_">MouseEvent</span> | <span class="hljs-literal">undefined</span>): <span class="hljs-built_in">boolean</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>?.<span class="hljs-title function_">postInputEvent</span>(event) <span class="hljs-keyword">as</span> <span class="hljs-built_in">boolean</span>;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ButtonComponent</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">params</span>: <span class="hljs-title class_">Params</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">bkColor</span>: <span class="hljs-title class_">Color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>.<span class="hljs-property">text</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span> })</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">bkColor</span>)</li><li>
</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>.<span class="hljs-property">width</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>.<span class="hljs-property">height</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">ButtonBuilder</span>(<span class="hljs-params">params: Params</span>) {</li><li>  <span class="hljs-title class_">ButtonComponent</span>({ <span class="hljs-attr">params</span>: params })</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">mouseAction</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">mouseButton</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">nodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Stack</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeController</span>)</li><li>        <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>          .<span class="hljs-title function_">enableNativeEmbedMode</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">onNativeEmbedLifecycleChange</span>(<span class="hljs-function">(<span class="hljs-params">embed</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (embed.<span class="hljs-property">status</span> == <span class="hljs-title class_">NativeEmbedStatus</span>.<span class="hljs-property">CREATE</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeController</span>.<span class="hljs-title function_">setRenderOption</span>({</li><li>                <span class="hljs-attr">surfaceId</span>: embed.<span class="hljs-property">surfaceId</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>,</li><li>                <span class="hljs-attr">renderType</span>: <span class="hljs-title class_">NodeRenderType</span>.<span class="hljs-property">RENDER_TYPE_TEXTURE</span>,</li><li>                <span class="hljs-attr">width</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>!.<span class="hljs-title function_">px2vp</span>(embed.<span class="hljs-property">info</span>?.<span class="hljs-property">width</span>),</li><li>                <span class="hljs-attr">height</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>!.<span class="hljs-title function_">px2vp</span>(embed.<span class="hljs-property">info</span>?.<span class="hljs-property">height</span>)</li><li>              });</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeController</span>.<span class="hljs-title function_">rebuild</span>();</li><li>            }</li><li>          })</li><li>          .<span class="hljs-title function_">onNativeEmbedMouseEvent</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (event &amp;&amp; event.<span class="hljs-property">mouseEvent</span>) {</li><li>              <span class="hljs-keyword">let</span> ret = <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeController</span>.<span class="hljs-title function_">postInputEvent</span>(event.<span class="hljs-property">mouseEvent</span>)</li><li>              <span class="hljs-keyword">if</span> (event.<span class="hljs-property">result</span>) {</li><li>                event.<span class="hljs-property">result</span>.<span class="hljs-title function_">setMouseEventResult</span>(ret, <span class="hljs-literal">true</span>);</li><li>              }</li><li>            }</li><li>          })</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!--index.html--&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>同层渲染测试<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"bodyId"</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">embed</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"nativeButton"</span> <span class="hljs-attr">type</span> =<span class="hljs-string">"native/button"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"800"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"800"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"background-color:red"</span>/&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 3674px;">     <h2 id="onnativeembedobjectparamchange21" device-type="phone,2in1,tablet,wearable,tv">onNativeEmbedObjectParamChange<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onnativeembedobjectparamchange21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onNativeEmbedObjectParamChange(callback: OnNativeEmbedObjectParamChangeCallback)</p>     <p>当同层渲染object标签内嵌param元素变化时触发此回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.66.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onnativeembedobjectparamchangecallback21">OnNativeEmbedObjectParamChangeCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">增加、修改或删除同层渲染object标签内嵌param元素时触发此回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>  <span class="hljs-comment">// xxx.ets</span></li><li>  <span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">BuilderNode</span>, <span class="hljs-title class_">NodeRenderType</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li>  <span class="hljs-keyword">declare</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Params</span> {</li><li>    <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>;</li><li>    <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>;</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">declare</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NodeControllerParams</span> {</li><li>    <span class="hljs-attr">surfaceId</span>: <span class="hljs-built_in">string</span>;</li><li>    <span class="hljs-attr">renderType</span>: <span class="hljs-title class_">NodeRenderType</span>;</li><li>    <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>;</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>    <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">BuilderNode</span>&lt;[<span class="hljs-title class_">Params</span>]&gt; | <span class="hljs-literal">undefined</span> | <span class="hljs-literal">null</span>;</li><li>    <span class="hljs-keyword">private</span> <span class="hljs-attr">surfaceId_</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>    <span class="hljs-keyword">private</span> <span class="hljs-attr">renderType_</span>: <span class="hljs-title class_">NodeRenderType</span> = <span class="hljs-title class_">NodeRenderType</span>.<span class="hljs-property">RENDER_TYPE_DISPLAY</span>;</li><li>    <span class="hljs-keyword">private</span> <span class="hljs-attr">width_</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-keyword">private</span> <span class="hljs-attr">height_</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>    <span class="hljs-title function_">setRenderOption</span>(<span class="hljs-params">params: NodeControllerParams</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">surfaceId_</span> = params.<span class="hljs-property">surfaceId</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderType_</span> = params.<span class="hljs-property">renderType</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">width_</span> = params.<span class="hljs-property">width</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">height_</span> = params.<span class="hljs-property">height</span>;</li><li>    }</li><li>
</li><li>    <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BuilderNode</span>(uiContext, { <span class="hljs-attr">surfaceId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">surfaceId_</span>, <span class="hljs-attr">type</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderType_</span> });</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">build</span>(<span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-title class_">ButtonBuilder</span>), { <span class="hljs-attr">text</span>: <span class="hljs-string">"myButton"</span>, <span class="hljs-attr">width</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">width_</span>, <span class="hljs-attr">height</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">height_</span> });</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getFrameNode</span>();</li><li>    }</li><li>
</li><li>    <span class="hljs-title function_">postInputEvent</span>(<span class="hljs-attr">event</span>: <span class="hljs-title class_">TouchEvent</span> | <span class="hljs-title class_">MouseEvent</span> | <span class="hljs-literal">undefined</span>): <span class="hljs-built_in">boolean</span> {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>?.<span class="hljs-title function_">postInputEvent</span>(event) <span class="hljs-keyword">as</span> <span class="hljs-built_in">boolean</span>;</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Component</span></li><li>  struct <span class="hljs-title class_">ButtonComponent</span> {</li><li>    <span class="hljs-meta">@Prop</span> <span class="hljs-attr">params</span>: <span class="hljs-title class_">Params</span>;</li><li>    <span class="hljs-meta">@State</span> <span class="hljs-attr">bkColor</span>: <span class="hljs-title class_">Color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>;</li><li>
</li><li>    <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>.<span class="hljs-property">text</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span> })</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">bkColor</span>)</li><li>
</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>.<span class="hljs-property">width</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>.<span class="hljs-property">height</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">ButtonBuilder</span>(<span class="hljs-params">params: Params</span>) {</li><li>    <span class="hljs-title class_">ButtonComponent</span>({ <span class="hljs-attr">params</span>: params })</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Entry</span></li><li>  <span class="hljs-meta">@Component</span></li><li>  struct <span class="hljs-title class_">WebComponent</span> {</li><li>    <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>    <span class="hljs-keyword">private</span> <span class="hljs-attr">nodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>();</li><li>    <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>    <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Stack</span>() {</li><li>          <span class="hljs-title class_">NodeContainer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeController</span>)</li><li>          <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>            .<span class="hljs-title function_">enableNativeEmbedMode</span>(<span class="hljs-literal">true</span>)</li><li>            .<span class="hljs-title function_">registerNativeEmbedRule</span>(<span class="hljs-string">"object"</span>, <span class="hljs-string">"native"</span>)</li><li>            .<span class="hljs-title function_">onNativeEmbedLifecycleChange</span>(<span class="hljs-function">(<span class="hljs-params">embed</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">if</span> (embed.<span class="hljs-property">status</span> == <span class="hljs-title class_">NativeEmbedStatus</span>.<span class="hljs-property">CREATE</span>) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeController</span>.<span class="hljs-title function_">setRenderOption</span>({</li><li>                  <span class="hljs-attr">surfaceId</span>: embed.<span class="hljs-property">surfaceId</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>,</li><li>                  <span class="hljs-attr">renderType</span>: <span class="hljs-title class_">NodeRenderType</span>.<span class="hljs-property">RENDER_TYPE_TEXTURE</span>,</li><li>                  <span class="hljs-attr">width</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>!.<span class="hljs-title function_">px2vp</span>(embed.<span class="hljs-property">info</span>?.<span class="hljs-property">width</span>),</li><li>                  <span class="hljs-attr">height</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>!.<span class="hljs-title function_">px2vp</span>(embed.<span class="hljs-property">info</span>?.<span class="hljs-property">height</span>)</li><li>                });</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeController</span>.<span class="hljs-title function_">rebuild</span>();</li><li>              }</li><li>            })</li><li>            .<span class="hljs-title function_">onNativeEmbedObjectParamChange</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"embed id: "</span> + event.<span class="hljs-property">embedId</span>);</li><li>              <span class="hljs-keyword">let</span> paramItems = event.<span class="hljs-property">paramItems</span>;</li><li>              <span class="hljs-keyword">if</span> (paramItems) {</li><li>                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; paramItems.<span class="hljs-property">length</span>; ++i) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"param info: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(paramItems[i]));</li><li>                }</li><li>              }</li><li>            })</li><li>        }</li><li>      }</li><li>    }</li><li>  }</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!--index.html--&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>同层渲染测试<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"bodyId"</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">object</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"nativeButton"</span> <span class="hljs-attr">type</span> =<span class="hljs-string">"native/button"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"300"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"300"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"background-color:red"</span>&gt;</span></li><li>          <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"param-1"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name-1"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"value1"</span>/&gt;</span></li><li>        <span class="hljs-tag">&lt;/<span class="hljs-name">object</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1214px;">     <h2 id="onoverrideerrorpage20" device-type="phone,2in1,tablet,wearable,tv">onOverrideErrorPage<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onoverrideerrorpage20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onOverrideErrorPage(callback: OnOverrideErrorPageCallback)</p>     <p>网页加载遇到错误时触发，只有主资源出错才会回调该接口，可以使用该接口自定义错误展示页。</p>     <p>此外，该功能需通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#seterrorpageenabled20">setErrorPageEnabled</a>接口启用默认错误页后，才会生效。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-t#onoverrideerrorpagecallback20">OnOverrideErrorPageCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网页加载遇到错误时触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li><span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li><span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">"www.error-test.com"</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>     .<span class="hljs-title function_">onControllerAttached</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setErrorPageEnabled</span>(<span class="hljs-literal">true</span>);</li><li>          <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getErrorPageEnabled</span>()) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setErrorPageEnabled</span>(<span class="hljs-literal">true</span>);</li><li>          }</li><li>      })</li><li>      .<span class="hljs-title function_">onOverrideErrorPage</span>(<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> htmlStr = <span class="hljs-string">"&lt;html&gt;&lt;h1&gt;error occur : "</span>;</li><li>            htmlStr += event.<span class="hljs-property">error</span>.<span class="hljs-title function_">getErrorCode</span>();</li><li>            htmlStr += <span class="hljs-string">"&lt;/h1&gt;&lt;/html&gt;"</span>;</li><li>            <span class="hljs-keyword">return</span> htmlStr;</li><li>      })</li><li>  }</li><li>}</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 569px;">     <h2 id="onsslerrorreceivedeprecated" device-type="phone,2in1,tablet,wearable,tv">onSslErrorReceive<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsslerrorreceivedeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onSslErrorReceive(callback: (event?: { handler: Function, error: object }) =&gt; void)</p>     <p>通知用户加载资源时发生SSL错误。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 8开始支持，从API version 9开始废弃。建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onsslerroreventreceive9">onSslErrorEventReceive<sup>9+</sup></a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(event?: { handler: Function, error: object }) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当网页检测到SSL错误时触发的回调。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 569px;">     <h2 id="onfileselectorshowdeprecated" device-type="phone,2in1,tablet,wearable,tv">onFileSelectorShow<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onfileselectorshowdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onFileSelectorShow(callback: (event?: { callback: Function, fileSelector: object }) =&gt; void)</p>     <p>调用此函数以处理具有“文件”输入类型的HTML表单，以响应用户按下的“选择文件”按钮。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 8开始支持，从API version 9开始废弃。建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onshowfileselector9">onShowFileSelector<sup>9+</sup></a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(event?: { callback: Function, fileSelector: object }) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当触发文件选择器时需要执行的回调。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1166px;">     <h2 id="onurlloadinterceptdeprecated" device-type="phone,2in1,tablet,wearable,tv">onUrlLoadIntercept<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onurlloadinterceptdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onUrlLoadIntercept(callback: (event?: { data:string | WebResourceRequest }) =&gt; boolean)</p>     <p>当Web组件加载url之前触发该回调，用于判断是否阻止此次访问。</p>     <p>从API version 10开始不再维护，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onloadintercept10">onLoadIntercept<sup>10+</sup></a>代替。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.70.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(event?: { data:string | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-webresourcerequest">WebResourceRequest</a> }) =&gt; boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>url的相关信息。</p>          <p>返回值：boolean，true表示阻止此次加载，false表示允许此次加载。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onUrlLoadIntercept</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onUrlLoadIntercept '</span> + event.<span class="hljs-property">data</span>.<span class="hljs-title function_">toString</span>());</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span></li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1046px;">     <h2 id="onpdfloadevent20" device-type="phone,2in1,tablet,wearable,tv">onPdfLoadEvent<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onpdfloadevent20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onPdfLoadEvent(callback: Callback&lt;OnPdfLoadEvent&gt;)</p>     <p>通知用户PDF页面加载状态，包括成功或失败。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.71.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onpdfloadevent20">OnPdfLoadEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当PDF加载成功或失败时，会触发回调，通知用户PDF页面加载状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 使用时需将'https://www.example.com/xxx.pdf'替换为真实可访问的地址</span></li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'https://www.example.com/xxx.pdf'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onPdfLoadEvent</span>(<span class="hljs-function">(<span class="hljs-params">eventInfo: OnPdfLoadEvent</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Load event callback called. url: <span class="hljs-subst">${eventInfo.url}</span>, result: <span class="hljs-subst">${eventInfo.result}</span>.`</span>)</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1046px;">     <h2 id="onpdfscrollatbottom20" device-type="phone,2in1,tablet,wearable,tv">onPdfScrollAtBottom<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onpdfscrollatbottom20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onPdfScrollAtBottom(callback: Callback&lt;OnPdfScrollEvent&gt;)</p>     <p>通知用户PDF页面已滚动到底。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#onpdfscrollevent20">OnPdfScrollEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当PDF滚动到垂直方向底部时，会触发回调，通知用户PDF页面已滚动到底。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rqp-c106="" class="highlight-div"><div _ngcontent-rqp-c106="" class="highlight-div-header"><div _ngcontent-rqp-c106="" class="highlight-div-header-left"><div _ngcontent-rqp-c106="" class="handle-button expand-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rqp-c106="" class="highlight-div-header-right"><div _ngcontent-rqp-c106="" class="handle-button ai-button"></div><div _ngcontent-rqp-c106="" class="handle-button line-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rqp-c106="" class="handle-button theme-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rqp-c106="" class="handle-button copy-button"><div _ngcontent-rqp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rqp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 使用时需将'https://www.example.com/xxx.pdf'替换为真实可访问的地址</span></li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'https://www.example.com/xxx.pdf'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onPdfScrollAtBottom</span>(<span class="hljs-function">(<span class="hljs-params">eventInfo: OnPdfScrollEvent</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Scroll at bottom callback called. url: <span class="hljs-subst">${eventInfo.url}</span>.`</span>)</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 689px;">     <h2 id="onrenderexiteddeprecated" device-type="phone,2in1,tablet,wearable,tv">onRenderExited<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onrenderexiteddeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onRenderExited(callback: (event?: { detail: object }) =&gt; boolean)</p>     <p>应用渲染进程因错误或崩溃退出时触发回调。</p>     <p>多个Web组件可能共享单个渲染进程，每个受影响的Web组件都会触发该回调。</p>     <p>应用处理该回调时，可以调用绑定的WebViewController接口来恢复页面。例如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#refresh">refresh</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#loadurl">loadUrl</a>等。</p>     <p>详情可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-event-sequence" target="_blank">Web组件的生命周期</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 8开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onrenderexited9">onRenderExited<sup>9+</sup></a>代替。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.73.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(event?: { detail: object }) =&gt; boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">渲染过程退出时触发。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>