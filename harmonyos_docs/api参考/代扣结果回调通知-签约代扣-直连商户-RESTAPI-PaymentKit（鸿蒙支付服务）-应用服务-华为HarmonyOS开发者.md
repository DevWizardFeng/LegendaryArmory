<h1 _ngcontent-eiv-c119="" class="doc-title ng-star-inserted" title="代扣结果回调通知"> 代扣结果回调通知 </h1>

<div _ngcontent-eiv-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section10267412717">功能介绍<i class="anchor-icon anchor-icon-link" anchorid="section10267412717" tips="复制节点链接"></i></h2><p>完成免密扣款后，华为支付服务器调用此接口向开发者的服务器发送代扣关键事件通知。</p> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ol><li>为保证回调请求的可靠性，系统具备重试机制，所以可能出现重发的通知。</li><li>订单状态需根据orderStatus字段判断。</li></ol> </div></div></div> <div class="tiledSection"><h2 id="section69567302479">场景描述<i class="anchor-icon anchor-icon-link" anchorid="section69567302479" tips="复制节点链接"></i></h2><p>一笔代扣订单支付成功后，华为支付服务器会调用开发者在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/payment-withhold-apply">申请免密代扣</a>接口中传递的回调接口（callbackUrl）传递给开发者代扣订单具体信息。</p> </div> <div class="tiledSection"><h2 id="section20963122661013">接口原型<i class="anchor-icon anchor-icon-link" anchorid="section20963122661013" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table><tbody><tr><th class="firstcol" id="mcps1.3.4.2.1.3.1.1" width="18.98%"><p>承载协议</p> </th> <td class="cellrowborder" width="81.02000000000001%"><p>HTTPS POST</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.4.2.1.3.2.1" width="18.98%"><p>接口方向</p> </th> <td class="cellrowborder" width="81.02000000000001%"><p>华为支付服务器 -&gt; 开发者服务器</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.4.2.1.3.3.1" width="18.98%"><p>接口URL</p> </th> <td class="cellrowborder" width="81.02000000000001%"><p>URL由开发者在请求<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/payment-withhold-apply">申请免密代扣</a>接口时传的callbackUrl</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.4.2.1.3.4.1" width="18.98%"><p>数据格式</p> </th> <td class="cellrowborder" width="81.02000000000001%"><p>请求消息：Content-Type: application/json; charset=UTF-8</p> <p>响应消息：Content-Type: application/json; charset=UTF-8</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section18290165220716">请求参数<i class="anchor-icon anchor-icon-link" anchorid="section18290165220716" tips="复制节点链接"></i></h2><p><strong>Request Body</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.3.1.5.1.1" width="15.83%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.5.1.2" width="10.9%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.5.1.3" width="19.78%"><p>参数类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.5.1.4" width="53.49%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15.83%"><p>callbackId</p> </td> <td class="cellrowborder" width="10.9%"><p>是</p> </td> <td class="cellrowborder" width="19.78%"><p>String</p> </td> <td class="cellrowborder" width="53.49%"><p>回调通知的唯一ID。</p> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>callbackTime</p> </td> <td class="cellrowborder" width="10.9%"><p>是</p> </td> <td class="cellrowborder" width="19.78%"><p>String</p> </td> <td class="cellrowborder" width="53.49%"><p>回调通知时间。格式为yyyy-MM-dd HH:mm:ss。</p> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>dataType</p> </td> <td class="cellrowborder" width="10.9%"><p>是</p> </td> <td class="cellrowborder" width="19.78%"><p>String</p> </td> <td class="cellrowborder" width="53.49%"><p>数据加密类型标识。</p> <ul><li>encrypt：加密</li><li>plain：未加密</li></ul> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>sign</p> </td> <td class="cellrowborder" width="10.9%"><p>是</p> </td> <td class="cellrowborder" width="19.78%"><p>String</p> </td> <td class="cellrowborder" width="53.49%"><p>回调通知结果签名，除“sign”字段以外的其他字段参与签名。</p> <p>开发者可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/payment-rest-overview#section17670192215175">验签规则</a>对回调报文进行验签处理。</p> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>signType</p> </td> <td class="cellrowborder" width="10.9%"><p>是</p> </td> <td class="cellrowborder" width="19.78%"><p>String</p> </td> <td class="cellrowborder" width="53.49%"><p>签名类型。华为支付生成签名字符串使用的算法，当前为SM2算法。</p> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>certNo</p> </td> <td class="cellrowborder" width="10.9%"><p>否</p> </td> <td class="cellrowborder" width="19.78%"><p>String</p> </td> <td class="cellrowborder" width="53.49%"><p>签名所使用的证书编号。</p> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>mercNo</p> </td> <td class="cellrowborder" width="10.9%"><p>是</p> </td> <td class="cellrowborder" width="19.78%"><p>String</p> </td> <td class="cellrowborder" width="53.49%"><p>商户号。</p> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>appId</p> </td> <td class="cellrowborder" width="10.9%"><p>是</p> </td> <td class="cellrowborder" width="19.78%"><p>String</p> </td> <td class="cellrowborder" width="53.49%"><p>应用ID。获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/pay-docs/hwzf-appidguanli-0000001757041165" target="_blank">AppID管理及关联</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>sysTransOrderNo</p> </td> <td class="cellrowborder" width="10.9%"><p>是</p> </td> <td class="cellrowborder" width="19.78%"><p>String</p> </td> <td class="cellrowborder" width="53.49%"><p>华为支付系统订单号。</p> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>mercOrderNo</p> </td> <td class="cellrowborder" width="10.9%"><p>是</p> </td> <td class="cellrowborder" width="19.78%"><p>String</p> </td> <td class="cellrowborder" width="53.49%"><p>商户订单号，由商户自己生成，商户需保证订单信息唯一性。最大长度46。</p> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>orderStatus</p> </td> <td class="cellrowborder" width="10.9%"><p>是</p> </td> <td class="cellrowborder" width="19.78%"><p>String</p> </td> <td class="cellrowborder" width="53.49%"><p>订单状态。</p> <ul><li>TRX_SUCCESS：交易成功</li><li>TRX_FAILED：交易失败</li></ul> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>payload</p> </td> <td class="cellrowborder" width="10.9%"><p>否</p> </td> <td class="cellrowborder" width="19.78%"><p>String</p> </td> <td class="cellrowborder" width="53.49%"><p>预留信息，如商户请求时传递该参数，此时会原样返回。</p> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>currency</p> </td> <td class="cellrowborder" width="10.9%"><p>是</p> </td> <td class="cellrowborder" width="19.78%"><p>String</p> </td> <td class="cellrowborder" width="53.49%"><p>交易币种单位，最大长度为3。</p> <ul><li>CNY （默认，当前仅支持该币种单位）</li></ul> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>totalAmount</p> </td> <td class="cellrowborder" width="10.9%"><p>是</p> </td> <td class="cellrowborder" width="19.78%"><p>Long</p> </td> <td class="cellrowborder" width="53.49%"><p>订单总金额，单位：分。</p> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>payerAmount</p> </td> <td class="cellrowborder" width="10.9%"><p>是</p> </td> <td class="cellrowborder" width="19.78%"><p>Long</p> </td> <td class="cellrowborder" width="53.49%"><p>买家实付金额，单位：分。</p> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>promotionAmount</p> </td> <td class="cellrowborder" width="10.9%"><p>是</p> </td> <td class="cellrowborder" width="19.78%"><p>Long</p> </td> <td class="cellrowborder" width="53.49%"><p>优惠金额，单位：分。</p> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>finishTime</p> </td> <td class="cellrowborder" width="10.9%"><p>否</p> </td> <td class="cellrowborder" width="19.78%"><p>String</p> </td> <td class="cellrowborder" width="53.49%"><p>支付完成时间，UTC时间格式（yyyy-MM-dd'T'HH:mm:ss.SSSZ）。</p> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>paymentTools</p> </td> <td class="cellrowborder" width="10.9%"><p>否</p> </td> <td class="cellrowborder" width="19.78%"><p>String</p> </td> <td class="cellrowborder" width="53.49%"><p>支付工具。</p> <ul><li>WECHAT_MICROPAY：微信小程序支付</li><li>AGMT：快捷</li><li>ACCT：账户余额</li><li>HUAWEIPAY：华为pay</li></ul> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>promotionDetail</p> </td> <td class="cellrowborder" width="10.9%"><p>否</p> </td> <td class="cellrowborder" width="19.78%"><p>List&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/payment-model#section11685193853815">PromotionItem</a>&gt;</p> </td> <td class="cellrowborder" width="53.49%"><p>营销活动信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当用户支付时参与过营销活动，此字段才会返回。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="15.83%"><p>payer</p> </td> <td class="cellrowborder" width="10.9%"><p>否</p> </td> <td class="cellrowborder" width="19.78%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/payment-model#section796891012811">PayerOut</a></p> </td> <td class="cellrowborder" width="53.49%"><p>用户支付时客户端信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1764119362616">请求示例<i class="anchor-icon anchor-icon-link" anchorid="section1764119362616" tips="复制节点链接"></i></h2><div _ngcontent-eiv-c106="" class="highlight-div"><div _ngcontent-eiv-c106="" class="highlight-div-header"><div _ngcontent-eiv-c106="" class="highlight-div-header-left"><div _ngcontent-eiv-c106="" class="handle-button expand-button"><div _ngcontent-eiv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eiv-c106="" class="highlight-div-header-right"><div _ngcontent-eiv-c106="" class="handle-button ai-button"></div><div _ngcontent-eiv-c106="" class="handle-button line-button"><div _ngcontent-eiv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eiv-c106="" class="handle-button theme-button"><div _ngcontent-eiv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eiv-c106="" class="handle-button copy-button"><div _ngcontent-eiv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eiv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">POST</span> /<span class="hljs-variable">hw</span>/<span class="hljs-variable">pay</span>/<span class="hljs-variable">callback</span> <span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.1</span></li><li><span class="hljs-variable">Content</span>-<span class="hljs-variable">Type</span>: <span class="hljs-title class_">application</span>/<span class="hljs-variable">json</span>;<span class="hljs-variable">charset</span>=<span class="hljs-variable">UTF</span>-<span class="hljs-number">8</span></li><li>{</li><li>  <span class="hljs-string">"callbackId"</span>: <span class="hljs-string">"124070308575300049145189***"</span>,</li><li>  <span class="hljs-string">"callbackTime"</span>: <span class="hljs-string">"2023-03-29 09:29:14"</span>,</li><li>  <span class="hljs-string">"currency"</span>: <span class="hljs-string">"CNY"</span>,</li><li>  <span class="hljs-string">"dataType"</span>: <span class="hljs-string">"plain"</span>,</li><li>  <span class="hljs-string">"finishTime"</span>: <span class="hljs-string">"2023-02-23T10:02:04.000+0800"</span>,</li><li>  <span class="hljs-string">"mercOrderNo"</span>: <span class="hljs-string">"czl00120240705***"</span>,</li><li>  <span class="hljs-string">"appId"</span>: <span class="hljs-string">"5765880207853***"</span>,</li><li>  <span class="hljs-string">"mercNo"</span>: <span class="hljs-string">"10132120***"</span>,</li><li>  <span class="hljs-string">"orderStatus"</span>: <span class="hljs-string">"TRX_SUCCESS"</span>,</li><li>  <span class="hljs-string">"payerAmount"</span>: <span class="hljs-number">10000</span>,</li><li>  <span class="hljs-string">"payload"</span>: <span class="hljs-string">"example-payload"</span>,</li><li>  <span class="hljs-string">"paymentTools"</span>: <span class="hljs-string">"AGMT"</span>,</li><li>  <span class="hljs-string">"promotionAmount"</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-string">"sign"</span>: <span class="hljs-string">"MEYCIQDXutp78*******************VlWyjA6p210xOqI2InX9w2SIYRx"</span>,</li><li>  <span class="hljs-string">"signType"</span>: <span class="hljs-string">"SM2"</span>,</li><li>  <span class="hljs-string">"certNo"</span>: <span class="hljs-string">"120291744647139***"</span>,</li><li>  <span class="hljs-string">"sysTransOrderNo"</span>: <span class="hljs-string">"12407030857530004914518***"</span>,</li><li>  <span class="hljs-string">"totalAmount"</span>: <span class="hljs-number">10000</span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section569171184216">响应参数<i class="anchor-icon anchor-icon-link" anchorid="section569171184216" tips="复制节点链接"></i></h2><p><strong>Response Header</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.3.1.5.1.1" width="16.068393160683932%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.5.1.2" width="10.32896710328967%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.5.1.3" width="8.249175082491751%"><p>参数类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.5.1.4" width="65.35346465353464%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="16.068393160683932%"><p>Content-Type</p> </td> <td class="cellrowborder" width="10.32896710328967%"><p>是</p> </td> <td class="cellrowborder" width="8.249175082491751%"><p>String</p> </td> <td class="cellrowborder" width="65.35346465353464%"><p>取值为：application/json; charset=UTF-8</p> </td> </tr>  </tbody></table></div> </div> <p><strong>Response Body</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.5.1.5.1.1" width="12%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.5.1.2" width="12%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.5.1.3" width="9.85%"><p>参数类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.5.1.4" width="66.14999999999999%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="12%"><p>resultCode</p> </td> <td class="cellrowborder" width="12%"><p>是</p> </td> <td class="cellrowborder" width="9.85%"><p>String</p> </td> <td class="cellrowborder" width="66.14999999999999%"><p>响应码。华为支付侧解析application/json类型响应。 “000000”表示成功，其他值表示失败，如返回值格式不匹配或非“000000”将视为回调失败。</p> </td> </tr> <tr><td class="cellrowborder" width="12%"><p>resultDesc</p> </td> <td class="cellrowborder" width="12%"><p>是</p> </td> <td class="cellrowborder" width="9.85%"><p>String</p> </td> <td class="cellrowborder" width="66.14999999999999%"><p>结果描述。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section121356461464">响应示例<i class="anchor-icon anchor-icon-link" anchorid="section121356461464" tips="复制节点链接"></i></h2><div _ngcontent-eiv-c106="" class="highlight-div"><div _ngcontent-eiv-c106="" class="highlight-div-header"><div _ngcontent-eiv-c106="" class="highlight-div-header-left"><div _ngcontent-eiv-c106="" class="handle-button expand-button"><div _ngcontent-eiv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eiv-c106="" class="highlight-div-header-right"><div _ngcontent-eiv-c106="" class="handle-button ai-button"></div><div _ngcontent-eiv-c106="" class="handle-button line-button"><div _ngcontent-eiv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eiv-c106="" class="handle-button theme-button"><div _ngcontent-eiv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eiv-c106="" class="handle-button copy-button"><div _ngcontent-eiv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eiv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> <span class="hljs-variable">OK</span></li><li><span class="hljs-variable">Content</span>-<span class="hljs-variable">Type</span>: <span class="hljs-title class_">application</span>/<span class="hljs-variable">json</span>; <span class="hljs-variable">charset</span>=<span class="hljs-variable">UTF</span>-<span class="hljs-number">8</span></li><li>{</li><li>  <span class="hljs-string">"resultCode"</span>: <span class="hljs-string">"000000"</span>,</li><li>  <span class="hljs-string">"resultDesc"</span>: <span class="hljs-string">"Success."</span></li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>