<h1 _ngcontent-lxg-c119="" class="doc-title ng-star-inserted" title="公共说明"> 公共说明 </h1>

<div _ngcontent-lxg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section1329115361128">TLS协议及加密套件<i class="anchor-icon anchor-icon-link" anchorid="section1329115361128" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.1.2.1.3.1.1" width="18.33%"><p>TLS版本</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.2.1.3.1.2" width="81.67%"><p>加密套件<strong>（<span style="color: rgb(33,37,41);">IANA</span><span style="color: rgb(33,37,41);">名称</span>）</strong></p> </th> </tr><tr><td class="cellrowborder" width="18.33%"><p>TLS1.2</p> </td> <td class="cellrowborder" width="81.67%"><p>TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</p> <p>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</p> <p>TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</p> <p>TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section444143185314">示例代码环境配置<i class="anchor-icon anchor-icon-link" anchorid="section444143185314" tips="复制节点链接"></i></h2><p>REST API接口提供的示例代码，运行时需要进行如下配置：</p> <ul><li>配置maven依赖<div _ngcontent-lxg-c106="" class="highlight-div"><div _ngcontent-lxg-c106="" class="highlight-div-header"><div _ngcontent-lxg-c106="" class="highlight-div-header-left"><div _ngcontent-lxg-c106="" class="handle-button expand-button"><div _ngcontent-lxg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lxg-c106="" class="highlight-div-header-right"><div _ngcontent-lxg-c106="" class="handle-button ai-button"></div><div _ngcontent-lxg-c106="" class="handle-button line-button"><div _ngcontent-lxg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lxg-c106="" class="handle-button theme-button"><div _ngcontent-lxg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lxg-c106="" class="handle-button copy-button"><div _ngcontent-lxg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lxg-c106="" class="highlight-scroll-div"><pre class="xml prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.fastjson2<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fastjson2<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.51<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class="hljs-comment">&lt;!--此处替换为您项目需要的版本--&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>httpclient<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.5.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class="hljs-comment">&lt;!--此处替换为您项目需要的版本--&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.26<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class="hljs-comment">&lt;!--此处替换为您项目需要的版本--&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-classic<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.11<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class="hljs-comment">&lt;!--此处替换为您项目需要的版本--&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span></li></ol></pre></div></div> </li><li>引入CallUtils工具类<div _ngcontent-lxg-c106="" class="highlight-div"><div _ngcontent-lxg-c106="" class="highlight-div-header"><div _ngcontent-lxg-c106="" class="highlight-div-header-left"><div _ngcontent-lxg-c106="" class="handle-button expand-button"><div _ngcontent-lxg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lxg-c106="" class="highlight-div-header-right"><div _ngcontent-lxg-c106="" class="handle-button ai-button"></div><div _ngcontent-lxg-c106="" class="handle-button line-button"><div _ngcontent-lxg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lxg-c106="" class="handle-button theme-button"><div _ngcontent-lxg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lxg-c106="" class="handle-button copy-button"><div _ngcontent-lxg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lxg-c106="" class="highlight-scroll-div"><pre class="java prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> com.alibaba.fastjson2.JSON;</li><li><span class="hljs-keyword">import</span> com.alibaba.fastjson2.JSONObject;</li><li><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;</li><li><span class="hljs-keyword">import</span> org.apache.http.Header;</li><li><span class="hljs-keyword">import</span> org.apache.http.HttpEntity;</li><li><span class="hljs-keyword">import</span> org.apache.http.HttpStatus;</li><li><span class="hljs-keyword">import</span> org.apache.http.client.config.RequestConfig;</li><li><span class="hljs-keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;</li><li><span class="hljs-keyword">import</span> org.apache.http.client.methods.HttpUriRequest;</li><li><span class="hljs-keyword">import</span> org.apache.http.config.Registry;</li><li><span class="hljs-keyword">import</span> org.apache.http.config.RegistryBuilder;</li><li><span class="hljs-keyword">import</span> org.apache.http.conn.socket.ConnectionSocketFactory;</li><li><span class="hljs-keyword">import</span> org.apache.http.conn.socket.PlainConnectionSocketFactory;</li><li><span class="hljs-keyword">import</span> org.apache.http.conn.ssl.SSLConnectionSocketFactory;</li><li><span class="hljs-keyword">import</span> org.apache.http.entity.ContentType;</li><li><span class="hljs-keyword">import</span> org.apache.http.entity.StringEntity;</li><li><span class="hljs-keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;</li><li><span class="hljs-keyword">import</span> org.apache.http.impl.client.HttpClients;</li><li><span class="hljs-keyword">import</span> org.apache.http.impl.conn.PoolingHttpClientConnectionManager;</li><li><span class="hljs-keyword">import</span> org.apache.http.util.EntityUtils;</li><li><span class="hljs-keyword">import</span> javax.net.ssl.SSLContext;</li><li><span class="hljs-keyword">import</span> javax.net.ssl.TrustManagerFactory;</li><li><span class="hljs-keyword">import</span> java.io.IOException;</li><li><span class="hljs-keyword">import</span> java.security.KeyManagementException;</li><li><span class="hljs-keyword">import</span> java.security.KeyStore;</li><li><span class="hljs-keyword">import</span> java.security.KeyStoreException;</li><li><span class="hljs-keyword">import</span> java.security.NoSuchAlgorithmException;</li><li><span class="hljs-keyword">import</span> java.util.Map;</li><li><span class="hljs-keyword">import</span> java.util.Objects;</li><li><span class="hljs-keyword">import</span> java.util.function.BiFunction;</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * HTTP调用工具类</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-meta">@Slf4j</span></li><li><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CallUtils</span> {</li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">remoteCall</span><span class="hljs-params">(HttpUriRequest request)</span> <span class="hljs-keyword">throws</span> IOException {</li><li>        <span class="hljs-keyword">return</span> remoteCall(request, CallUtils::nspErrorHandler);</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">remoteCallOAuth</span><span class="hljs-params">(HttpUriRequest request)</span> <span class="hljs-keyword">throws</span> IOException {</li><li>        <span class="hljs-keyword">return</span> remoteCall(request, CallUtils::oauthErrorHandler);</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">remoteCallAccountApi</span><span class="hljs-params">(HttpUriRequest request)</span> <span class="hljs-keyword">throws</span> IOException {</li><li>        <span class="hljs-keyword">return</span> remoteCall(request, CallUtils::accountApiErrorHandler);</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;E <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Exception</span>&gt; String <span class="hljs-title function_">remoteCall</span><span class="hljs-params">(HttpUriRequest request,</span></li><li><span class="hljs-params">        BiFunction&lt;CloseableHttpResponse, String, E&gt; errorHandler)</span> <span class="hljs-keyword">throws</span> IOException, E {</li><li>        <span class="hljs-keyword">try</span> (<span class="hljs-type">CloseableHttpResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> getClient().execute(request)) {</li><li>            <span class="hljs-type">HttpEntity</span> <span class="hljs-variable">responseEntity</span> <span class="hljs-operator">=</span> response.getEntity();</li><li>            <span class="hljs-type">String</span> <span class="hljs-variable">ret</span> <span class="hljs-operator">=</span> responseEntity != <span class="hljs-literal">null</span> ? EntityUtils.toString(responseEntity) : <span class="hljs-literal">null</span>;</li><li>            EntityUtils.consume(responseEntity);</li><li>            <span class="hljs-keyword">if</span> (errorHandler != <span class="hljs-literal">null</span>) {</li><li>                <span class="hljs-type">E</span> <span class="hljs-variable">error</span> <span class="hljs-operator">=</span> errorHandler.apply(response, ret);</li><li>                <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> != error) {</li><li>                    <span class="hljs-keyword">throw</span> error;</li><li>                }</li><li>            }</li><li>            <span class="hljs-keyword">return</span> ret;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> JSONObject <span class="hljs-title function_">toJsonObject</span><span class="hljs-params">(String json)</span> {</li><li>        <span class="hljs-keyword">return</span> (JSONObject) JSON.parse(json);</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> StringEntity <span class="hljs-title function_">wrapJsonEntity</span><span class="hljs-params">(Object obj)</span> {</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringEntity</span>(CallUtils.toJsonString(obj), ContentType.create(<span class="hljs-string">"application/json"</span>, <span class="hljs-string">"UTF-8"</span>));</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">toJsonString</span><span class="hljs-params">(Object obj)</span> {</li><li>        <span class="hljs-keyword">return</span> JSON.toJSONString(obj);</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IOException <span class="hljs-title function_">nspErrorHandler</span><span class="hljs-params">(CloseableHttpResponse response, String rawBody)</span> {</li><li>        <span class="hljs-type">int</span> <span class="hljs-variable">statusCode</span> <span class="hljs-operator">=</span> response.getStatusLine().getStatusCode();</li><li>        <span class="hljs-keyword">if</span> (statusCode != <span class="hljs-number">200</span>) {</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IOException</span>(<span class="hljs-string">"call failed! status:"</span> + statusCode + <span class="hljs-string">", response data: "</span> + rawBody);</li><li>        }</li><li>        <span class="hljs-type">Header</span> <span class="hljs-variable">nspStatus</span> <span class="hljs-operator">=</span> response.getFirstHeader(<span class="hljs-string">"NSP_STATUS"</span>);</li><li>        <span class="hljs-keyword">if</span> (Objects.nonNull(nspStatus)) {</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IOException</span>(<span class="hljs-string">"call failed! nsp_status:"</span> + nspStatus.getValue() + <span class="hljs-string">", response data: "</span> + rawBody);</li><li>        }</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IOException <span class="hljs-title function_">oauthErrorHandler</span><span class="hljs-params">(CloseableHttpResponse response, String rawBody)</span> {</li><li>        <span class="hljs-type">int</span> <span class="hljs-variable">statusCode</span> <span class="hljs-operator">=</span> response.getStatusLine().getStatusCode();</li><li>        <span class="hljs-comment">// http状态码为200，请求成功</span></li><li>        <span class="hljs-keyword">if</span> (statusCode == HttpStatus.SC_OK) {</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;</li><li>        }</li><li>        <span class="hljs-comment">// http状态码非200，解析响应的body，业务视情况进行处理</span></li><li>        Map&lt;String, Object&gt; errorResponseBody = CallUtils.toJsonObject(rawBody);</li><li>        <span class="hljs-comment">// 业务响应主错误码</span></li><li>        <span class="hljs-type">Object</span> <span class="hljs-variable">error</span> <span class="hljs-operator">=</span> errorResponseBody.get(<span class="hljs-string">"error"</span>);</li><li>        <span class="hljs-comment">// 业务响应子错误码</span></li><li>        <span class="hljs-type">Object</span> <span class="hljs-variable">subError</span> <span class="hljs-operator">=</span> errorResponseBody.get(<span class="hljs-string">"sub_error"</span>);</li><li>        <span class="hljs-comment">// 业务可根据返回的主+子错误码进行自己的业务处理；例：错误码不为空，抛出异常</span></li><li>        <span class="hljs-keyword">if</span> (Objects.nonNull(error) &amp;&amp; Objects.nonNull(subError)) {</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IOException</span>(<span class="hljs-string">"call failed! http status code: "</span> + statusCode + <span class="hljs-string">", response data: "</span> + rawBody);</li><li>        }</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IOException <span class="hljs-title function_">accountApiErrorHandler</span><span class="hljs-params">(CloseableHttpResponse response, String rawBody)</span> {</li><li>        <span class="hljs-type">int</span> <span class="hljs-variable">statusCode</span> <span class="hljs-operator">=</span> response.getStatusLine().getStatusCode();</li><li>        <span class="hljs-comment">// http状态码不是200，请求失败</span></li><li>        <span class="hljs-keyword">if</span> (statusCode != <span class="hljs-number">200</span>) {</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IOException</span>(<span class="hljs-string">"call failed! http status code: "</span> + statusCode + <span class="hljs-string">", response data: "</span> + rawBody);</li><li>        }</li><li>        <span class="hljs-comment">// http状态码为200，解析响应的body，判断业务错误码</span></li><li>        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">errorResponseBody</span> <span class="hljs-operator">=</span> CallUtils.toJsonObject(rawBody);</li><li>        <span class="hljs-comment">// 业务响应码</span></li><li>        <span class="hljs-type">Integer</span> <span class="hljs-variable">resultCode</span> <span class="hljs-operator">=</span> errorResponseBody.getInteger(<span class="hljs-string">"resultCode"</span>);</li><li>        <span class="hljs-comment">// resultCode为0表示成功，非0表示失败</span></li><li>        <span class="hljs-keyword">if</span> (Objects.nonNull(resultCode) &amp;&amp; resultCode != <span class="hljs-number">0</span>) {</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IOException</span>(<span class="hljs-string">"call failed! http status code: "</span> + statusCode + <span class="hljs-string">", response data: "</span> + rawBody);</li><li>        }</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> CloseableHttpClient <span class="hljs-title function_">getClient</span><span class="hljs-params">()</span> {</li><li>        <span class="hljs-type">PoolingHttpClientConnectionManager</span> <span class="hljs-variable">connectionManager</span> <span class="hljs-operator">=</span> buildConnectionManager(</li><li>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[] {<span class="hljs-string">"TLSv1.2"</span>}, <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[] {</li><li>                <span class="hljs-string">"TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384"</span>, <span class="hljs-string">"TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256"</span>,</li><li>                <span class="hljs-string">"TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384"</span>, <span class="hljs-string">"TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256"</span></li><li>            });</li><li>        connectionManager.setMaxTotal(<span class="hljs-number">400</span>);</li><li>        connectionManager.setDefaultMaxPerRoute(<span class="hljs-number">400</span>);</li><li>        <span class="hljs-type">RequestConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> RequestConfig.custom()</li><li>            .setConnectionRequestTimeout(<span class="hljs-number">100</span>)</li><li>            .setRedirectsEnabled(<span class="hljs-literal">false</span>)</li><li>            .build();</li><li>        <span class="hljs-keyword">return</span> HttpClients.custom()</li><li>            .useSystemProperties()</li><li>            .setConnectionManager(connectionManager)</li><li>            .setDefaultRequestConfig(config)</li><li>            .build();</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> PoolingHttpClientConnectionManager <span class="hljs-title function_">buildConnectionManager</span><span class="hljs-params">(String[] supportedProtocols,</span></li><li><span class="hljs-params">        String[] supportedCipherSuites)</span> {</li><li>        <span class="hljs-type">PoolingHttpClientConnectionManager</span> <span class="hljs-variable">connectionManager</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;</li><li>        <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-type">SSLContext</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> SSLContext.getInstance(<span class="hljs-string">"TLSv1.2"</span>);</li><li>            <span class="hljs-type">TrustManagerFactory</span> <span class="hljs-variable">tmf</span> <span class="hljs-operator">=</span> TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());</li><li>            tmf.init((KeyStore) <span class="hljs-literal">null</span>);</li><li>            sc.init(<span class="hljs-literal">null</span>, tmf.getTrustManagers(), <span class="hljs-literal">null</span>);</li><li>            <span class="hljs-type">SSLConnectionSocketFactory</span> <span class="hljs-variable">sslsf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SSLConnectionSocketFactory</span>(sc, supportedProtocols,</li><li>                supportedCipherSuites, SSLConnectionSocketFactory.getDefaultHostnameVerifier());</li><li>            Registry&lt;ConnectionSocketFactory&gt; registry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()</li><li>                .register(<span class="hljs-string">"http"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">PlainConnectionSocketFactory</span>())</li><li>                .register(<span class="hljs-string">"https"</span>, sslsf)</li><li>                .build();</li><li>            connectionManager = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PoolingHttpClientConnectionManager</span>(registry);</li><li>        } <span class="hljs-keyword">catch</span> (NoSuchAlgorithmException | KeyStoreException | KeyManagementException e) {</li><li>            log.error(<span class="hljs-string">"build connect manager failed"</span>, e);</li><li>        }</li><li>        <span class="hljs-keyword">return</span> connectionManager;</li><li>    }</li><li>}</li></ol></pre></div></div> </li></ul> </div> </div> <div></div></div>