<h1 _ngcontent-mrt-c119="" class="doc-title ng-star-inserted" title="属性字符串"> 属性字符串 </h1>

<div _ngcontent-mrt-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>方便灵活应用文本样式的对象，可通过TextController中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text#setstyledstring12">setStyledString</a>方法与Text组件绑定，可通过RichEditorStyledStringController中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#setstyledstring12">setStyledString</a>方法与RichEditor组件绑定。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>从API version 12开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>      <p>从API version 20开始，支持通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-measureutils#getparagraphs20">getParagraphs</a>获取属性字符串的文本布局信息。</p>      <p>属性字符串目前不支持在worker线程中使用。</p>      <p>属性字符串通过controller绑定时，需要等待布局完成后，绑定生效。当<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-framenode#measure12">measure</a>和setStyledString同时使用，开发者需要通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-inspector">@ohos.arkui.inspector (布局回调)</a>判断布局完成，再绑定属性字符串。</p>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 334px;">     <h2 id="规则说明" device-type="phone,2in1,tablet,wearable,tv">规则说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="规则说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><ul>      <li>当组件样式和属性字符串中的样式冲突时，冲突部分以属性字符串设置的样式为准，未冲突部分则生效组件的样式。</li>      <li>当属性字符串和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text">Text</a>子组件冲突时，属性字符串优先级高，即当Text组件中绑定了属性字符串，忽略Text组件下包含<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-span">Span</a>等子组件的情况。</li>      <li>不支持@State修饰。</li>      <li>建议将StyledString定义为成员变量，从而避免应用退后台后被销毁。</li>      <li>不支持在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#loadcontent9">loadContent()</a>之前创建。</li>     </ul>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 146px;">     <h2 id="styledstring" device-type="phone,2in1,tablet,wearable,tv">StyledString<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="styledstring" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 882px;">     <h3 id="constructor" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(value: string | ImageAttachment | CustomSpan , styles?: Array&lt;StyleOptions&gt;)</p>     <p>属性字符串的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">string | <a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#imageattachment">ImageAttachment</a> | <a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#customspan">CustomSpan</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>属性字符串文本内容。</p>          <p><strong>说明：</strong></p>          <p>当value的类型为ImageAttachment或CustomSpan时，styles参数不生效。</p>          <p>需要设置styles时，通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#setstyle">setStyle</a>等方法实现。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">styles</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styleoptions对象说明">StyleOptions</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>属性字符串初始化选项。</p>          <p><strong>说明：</strong></p>          <p>start为异常值时，按默认值0处理；</p>          <p>当length为异常值时，length等于属性字符串在start后的实际长度；</p>          <p>当StyledStringKey与StyledStringValue不匹配时，styles不生效。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 469px;">     <h3 id="属性" device-type="phone,2in1,tablet,wearable,tv">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">length</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>属性字符串字符的长度。</p>          <p><strong>说明：</strong></p>          <p>属性字符串中的ImageAttachment和CustomSpan长度都计为1。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 561px;">     <h3 id="getstring" device-type="phone,2in1,tablet,wearable,tv">getString<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getstring" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getString(): string</p>     <p>获取字符串信息。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">          <p>属性字符串文本内容。</p>          <p><strong>说明：</strong></p>          <p>当属性字符串中包含图片或<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#customspan">CustomSpan</a>时，其返回的结果用空格表示。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 832px;">     <h3 id="equals" device-type="phone,2in1,tablet,wearable,tv">equals<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="equals" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>equals(other: StyledString): boolean</p>     <p>判断两个属性字符串是否相等。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">other</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styledstring">StyledString</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">StyledString类型的比较对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">          <p>两个属性字符串是否相等。</p>          <p>true表示相等，false表示不相等。</p>          <p><strong>说明：</strong></p>          <p>当属性字符串的文本及样式均一致，视为相等。</p>          <p>不比较GestureStyle，当属性字符串配置了不同事件，文本和其他样式相同时，亦视为相等。</p>          <p>当比较CustomSpan时，比较的是地址，地址相等，视为相等。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1096px;">     <h3 id="substyledstring" device-type="phone,2in1,tablet,wearable,tv">subStyledString<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="substyledstring" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>subStyledString(start: number, length?: number): StyledString</p>     <p>获取属性字符串的子属性字符串。不能超出属性字符串的长度。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">start</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">子属性字符串开始位置的下标。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">length</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">子属性字符串的长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styledstring">StyledString</a></td>         <td class="cellrowborder" width="50%">          <p>子属性字符串。</p>          <p><strong>说明：</strong></p>          <p>当start为合法入参时，length的默认值是被查询属性字符串对象的长度与start的值的差。</p>          <p>当start和length越界或者必填传入undefined时，会抛出异常。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2.Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1309px;">     <h3 id="getstyles" device-type="phone,2in1,tablet,wearable,tv">getStyles<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getstyles" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getStyles(start: number , length: number , styledKey?: StyledStringKey): Array&lt;SpanStyle&gt;</p>     <p>获取指定范围属性字符串的样式集合。不能超出属性字符串的长度。</p>     <p>该接口仅返回开发者设置的样式。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">start</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定范围属性字符串的下标。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">length</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定范围属性字符串的长度。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">styledKey</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styledstringkey枚举说明">StyledStringKey</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指定范围属性字符串样式的枚举值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#spanstyle对象说明">SpanStyle</a>&gt;</td>         <td class="cellrowborder" width="50%">          <p>各样式对象的数组。</p>          <p><strong>说明：</strong></p>          <p>当指定范围属性字符串未设置任何样式，则返回空数组。</p>          <p>当start和length越界或者必填传入undefined时，会抛出异常；</p>          <p>当styledKey传入异常值或undefined时，会抛出异常。</p>          <p>当styledKey为CustomSpan时，返回的是创建CustomSpan时传入的样式对象，即修改该样式对象也会影响实际的显示效果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2.Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1872px;">     <h3 id="fromhtml" device-type="phone,2in1,tablet,wearable,tv">fromHtml<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="fromhtml" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static fromHtml(html: string): Promise&lt;StyledString&gt;</p>     <p>将HTML格式字符串转换成属性字符串，当前支持转换的HTML标签范围：&lt;p&gt;、&lt;span&gt;、&lt;img&gt;、&lt;br&gt;、&lt;strong&gt;、&lt;b&gt;、&lt;a&gt;、&lt;i&gt;、&lt;em&gt;、&lt;s&gt;、&lt;u&gt;、&lt;del&gt;、&lt;sup&gt;、&lt;sub&gt;。支持将标签中的style属性样式转换成对应的属性字符串样式。</p>     <p>使用方法参考<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#示例12fromhtml和tohtml互相转换">示例12（fromHtml和toHtml互相转换）</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.3.1.1" width="50%">标签名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">&lt;p&gt;</td>         <td class="cellrowborder" width="50%">段落，分隔文本段落</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">&lt;span&gt;</td>         <td class="cellrowborder" width="50%">行内文本，支持样式设置</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">&lt;img&gt;</td>         <td class="cellrowborder" width="50%">插入图片</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">&lt;strong&gt;</td>         <td class="cellrowborder" width="50%">加粗文本</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">&lt;br&gt;<sup>20+</sup></td>         <td class="cellrowborder" width="50%">换行</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">&lt;b&gt;<sup>20+</sup></td>         <td class="cellrowborder" width="50%">加粗文本</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">&lt;a&gt;<sup>20+</sup></td>         <td class="cellrowborder" width="50%">超链接</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">&lt;i&gt;<sup>20+</sup></td>         <td class="cellrowborder" width="50%">斜体文本</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">&lt;em&gt;<sup>20+</sup></td>         <td class="cellrowborder" width="50%">斜体文本</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">&lt;s&gt;<sup>20+</sup></td>         <td class="cellrowborder" width="50%">删除线（中划线）</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">&lt;u&gt;<sup>20+</sup></td>         <td class="cellrowborder" width="50%">下划线</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">&lt;del&gt;<sup>20+</sup></td>         <td class="cellrowborder" width="50%">删除线（中划线）</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">&lt;sup&gt;<sup>20+</sup></td>         <td class="cellrowborder" width="50%">上标文本</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">&lt;sub&gt;<sup>20+</sup></td>         <td class="cellrowborder" width="50%">下标文本</td>        </tr>             </tbody></table></div>     </div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">html</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">html格式的字符串。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styledstring">StyledString</a>&gt;</td>         <td class="cellrowborder" width="50%">属性字符串。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-styled-string">属性字符串错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2.Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">170001</td>         <td class="cellrowborder" width="50%">Convert Error.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1003px;">     <h3 id="tohtml14" device-type="phone,2in1,tablet,wearable,tv">toHtml<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="tohtml14" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static toHtml(styledString: StyledString): string</p>     <p>将属性字符串转换成HTML格式字符串。支持转换的属性字符串<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styledstringkey枚举说明">StyledStringKey</a>包括：StyledStringKey.FONT、StyledStringKey.DECORATION、StyledStringKey.LETTER_SPACING、StyledStringKey.TEXT_SHADOW、StyledStringKey.LINE_HEIGHT、StyledStringKey.IMAGE。</p>     <p>使用方法参考<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#示例12fromhtml和tohtml互相转换">示例12（fromHtml和toHtml互相转换）</a>。</p>     <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">styledString</td>         <td class="cellrowborder" width="25%">StyledString</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">属性字符串。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">HTML格式字符串。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2.Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 298px;">     <h2 id="mutablestyledstring" device-type="phone,2in1,tablet,wearable,tv">MutableStyledString<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mutablestyledstring" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>继承于<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styledstring">StyledString</a>类。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当start和length越界或者必填传入undefined时，会抛出异常；</p>       <p>当styledKey和styledValue传入异常值或者两者对应关系不匹配时，会抛出异常。</p>      </div></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 882px;">     <h3 id="replacestring" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">replaceString<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="replacestring" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>replaceString(start: number , length: number , other: string): void</p>     <p>替换指定范围的字符串。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">start</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定范围的下标。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">length</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定范围的长度。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">other</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>替换的新文本内容。</p>          <p><strong>说明：</strong></p>          <p>替换的字符串使用的是start位置字符的样式。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2.Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 901px;">     <h3 id="insertstring" device-type="phone,2in1,tablet,wearable,tv">insertString<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="insertstring" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>insertString(start: number , other: string): void</p>     <p>插入字符串。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">start</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">插入位置的下标。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">other</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>插入的新文本内容。</p>          <p><strong>说明：</strong></p>          <p>插入的字符串使用的是start-1位置字符的样式。若start-1位置字符未设置样式，则使用start位置字符样式。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2.Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 829px;">     <h3 id="removestring" device-type="phone,2in1,tablet,wearable,tv">removeString<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removestring" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removeString(start: number , length: number): void</p>     <p>移除指定范围的字符串。</p>     <p>当属性字符串中包含图片或<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#customspan">CustomSpan</a>时，同样生效。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">start</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定范围的下标。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">length</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定范围的长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2.Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 952px;">     <h3 id="replacestyle" device-type="phone,2in1,tablet,wearable,tv">replaceStyle<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="replacestyle" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>replaceStyle(spanStyle: SpanStyle): void</p>     <p>替换指定范围内容为指定类型新样式。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">spanStyle</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#spanstyle对象说明">SpanStyle</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>样式对象。</p>          <p><strong>说明：</strong></p>          <p>默认清空原有样式，替换为新样式。</p>          <p>当SpanStyle的styledKey为IMAGE或CUSTOM_SPAN时，只有当start的位置当前是image或CustomSpan且长度为1，才会生效，其余情况无效果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2.Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1068px;">     <h3 id="setstyle" device-type="phone,2in1,tablet,wearable,tv">setStyle<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setstyle" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setStyle(spanStyle: SpanStyle): void</p>     <p>为指定范围内容设置指定类型新样式。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">spanStyle</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#spanstyle对象说明">SpanStyle</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>样式对象。</p>          <p>默认不清空原有样式，叠加新样式。如果StyledStringValue类型相同，则新样式将覆盖旧样式。</p>          <p>当SpanStyle的styledKey为IMAGE或CUSTOM_SPAN时，只有当start的位置当前是image或CustomSpan且长度为1，才会生效，其余情况无效果。</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>样式的最小颗粒度是StyledStringValue，如果设置了多个相同的StyledStringValue，只有最后一次设置会生效。如设置两个属性不同的TextStyle，则只有第二次设置的TextStyle生效。</p>      </div></div></div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameter check failed.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 922px;">     <h3 id="removestyle" device-type="phone,2in1,tablet,wearable,tv">removeStyle<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removestyle" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removeStyle(start: number , length: number , styledKey: StyledStringKey): void</p>     <p>清除指定范围内容的指定类型样式。</p>     <p>被清空样式类型对象属性使用的是对应<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text">Text</a>组件属性的设置值，若Text组件未设置值，则使用对应Text组件属性的默认值。</p>     <p>当属性字符串中包含图片时，同样生效。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">start</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定范围开始位置的下标。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">length</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定范围的长度。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">styledKey</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styledstringkey枚举说明">StyledStringKey</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">样式类型枚举值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2.Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 877px;">     <h3 id="removestyles" device-type="phone,2in1,tablet,wearable,tv">removeStyles<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removestyles" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removeStyles(start: number , length: number): void</p>     <p>清除指定范围内容的所有样式。</p>     <p>被清空样式类型对象属性使用的是对应<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text">Text</a>组件属性的设置值，若Text组件未设置值，则使用对应Text组件属性的默认值。</p>     <p>当属性字符串中包含图片时，同样生效。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">start</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定范围开始位置的下标。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">length</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定范围的长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2.Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 366px;">     <h3 id="clearstyles" device-type="phone,2in1,tablet,wearable,tv">clearStyles<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearstyles" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clearStyles(): void</p>     <p>清除属性字符串对象的所有样式。</p>     <p>被清空样式类型对象属性使用的是对应<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text">Text</a>组件属性的设置值，若Text组件未设置值，则使用对应Text组件属性的默认值。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 826px;">     <h3 id="replacestyledstring" device-type="phone,2in1,tablet,wearable,tv">replaceStyledString<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="replacestyledstring" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>replaceStyledString(start: number , length: number , other: StyledString): void</p>     <p>替换指定范围为新的属性字符串。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">start</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定范围开始位置的下标。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">length</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定范围的长度。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">other</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styledstring">StyledString</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">新的属性字符串对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2.Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 781px;">     <h3 id="insertstyledstring" device-type="phone,2in1,tablet,wearable,tv">insertStyledString<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="insertstyledstring" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>insertStyledString(start: number , other: StyledString): void</p>     <p>在指定位置插入新的属性字符串。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">start</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">开始插入位置的下标。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">other</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styledstring">StyledString</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">新的属性字符串对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2.Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 469px;">     <h3 id="appendstyledstring" device-type="phone,2in1,tablet,wearable,tv">appendStyledString<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="appendstyledstring" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>appendStyledString(other: StyledString): void</p>     <p>在末尾位置追加新的属性字符串。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">other</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styledstring">StyledString</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">新的属性字符串对象。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1181px;">     <h2 id="styledstringvalue" device-type="phone,2in1,tablet,wearable,tv">StyledStringValue<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="styledstringvalue" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type StyledStringValue = TextStyle | DecorationStyle | BaselineOffsetStyle | LetterSpacingStyle |</p>     <p>TextShadowStyle | GestureStyle | ImageAttachment | ParagraphStyle | LineHeightStyle | UrlStyle | CustomSpan | UserDataSpan | BackgroundColorStyle</p>     <p>样式对象类型，用于设置属性字符串的样式。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#textstyle">TextStyle</a></td>         <td class="cellrowborder" width="50%">文本字体样式。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#decorationstyle">DecorationStyle</a></td>         <td class="cellrowborder" width="50%">文本装饰线样式。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#baselineoffsetstyle">BaselineOffsetStyle</a></td>         <td class="cellrowborder" width="50%">文本基线偏移量样式。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#letterspacingstyle">LetterSpacingStyle</a></td>         <td class="cellrowborder" width="50%">文本字符间距样式。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#lineheightstyle">LineHeightStyle</a></td>         <td class="cellrowborder" width="50%">文本行高样式。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#textshadowstyle">TextShadowStyle</a></td>         <td class="cellrowborder" width="50%">文本阴影样式。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#gesturestyle">GestureStyle</a></td>         <td class="cellrowborder" width="50%">事件手势样式。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#paragraphstyle">ParagraphStyle</a></td>         <td class="cellrowborder" width="50%">文本段落样式。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#imageattachment">ImageAttachment</a></td>         <td class="cellrowborder" width="50%">图片样式。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#customspan">CustomSpan</a></td>         <td class="cellrowborder" width="50%">自定义绘制Span样式。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#userdataspan">UserDataSpan</a></td>         <td class="cellrowborder" width="50%">UserDataSpan样式。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#urlstyle14">UrlStyle</a></td>         <td class="cellrowborder" width="50%">超链接样式。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#backgroundcolorstyle14">BackgroundColorStyle</a></td>         <td class="cellrowborder" width="50%">文本背景颜色样式。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 708px;">     <h2 id="styleoptions对象说明" device-type="phone,2in1,tablet,wearable,tv">StyleOptions对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="styleoptions对象说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">start</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置属性字符串样式的开始位置。</p>          <p>当start的值小于0或超出字符串长度时，按0处理。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">length</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置属性字符串样式的长度。</p>          <p>当length的值小于0或超出字符串长度与start的差值时，按字符串长度与start的差值处理。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">styledKey</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styledstringkey枚举说明">StyledStringKey</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">样式类型的枚举值。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">styledValue</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styledstringvalue">StyledStringValue</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">样式对象。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 516px;">     <h2 id="spanstyle对象说明" device-type="phone,2in1,tablet,wearable,tv">SpanStyle对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="spanstyle对象说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">start</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">匹配属性字符串样式的开始位置。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">length</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">匹配属性字符串样式的长度。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">styledKey</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styledstringkey枚举说明">StyledStringKey</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">样式类型的枚举值。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">styledValue</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styledstringvalue">StyledStringValue</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">样式对象。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="textstyle" device-type="phone,2in1,tablet,wearable,tv">TextStyle<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="textstyle" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>文本字体样式对象说明。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2669px;">     <h3 id="属性-1" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">fontColor</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcecolor">ResourceColor</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本颜色。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fontFamily</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本字体。</p>          <p>默认返回undefined。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fontSize</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本字体大小。</p>          <p>单位：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">vp</a></p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fontWeight</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本字体粗细。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fontStyle</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#fontstyle">FontStyle</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本字体样式。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">strokeWidth<sup>20+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本描边宽度。</p>          <p>默认返回0，单位为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">vp</a>。</p>          <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">strokeColor<sup>20+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcecolor">ResourceColor</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本描边颜色。</p>          <p>默认返回字体颜色。</p>          <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">superscript<sup>20+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-text-common#superscriptstyle20枚举说明">SuperscriptStyle</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本上下角标。</p>          <p>默认值：SuperscriptStyle.NORMAL。</p>          <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>     <p>fontWeight参数与返回值的关系如下：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.5.1.3.1.1" width="50%">参数</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.5.1.3.1.2" width="50%">返回值</th>        </tr><tr>         <td class="cellrowborder" width="50%">100</td>         <td class="cellrowborder" width="50%">0</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">200</td>         <td class="cellrowborder" width="50%">1</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">300</td>         <td class="cellrowborder" width="50%">2</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">400</td>         <td class="cellrowborder" width="50%">3</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">500</td>         <td class="cellrowborder" width="50%">4</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">600</td>         <td class="cellrowborder" width="50%">5</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">700</td>         <td class="cellrowborder" width="50%">6</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">800</td>         <td class="cellrowborder" width="50%">7</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900</td>         <td class="cellrowborder" width="50%">8</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">FontWeight.Bold (or 'bold')</td>         <td class="cellrowborder" width="50%">9</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">FontWeight.Normal (or 'normal')</td>         <td class="cellrowborder" width="50%">10</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">FontWeight.Bolder (or 'bolder')</td>         <td class="cellrowborder" width="50%">11</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">FontWeight.Lighter (or 'lighter')</td>         <td class="cellrowborder" width="50%">12</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">FontWeight.Medium (or 'medium')</td>         <td class="cellrowborder" width="50%">13</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">FontWeight.Regular (or 'regular')</td>         <td class="cellrowborder" width="50%">14</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 469px;">     <h3 id="constructor-1" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(value?: TextStyleInterface)</p>     <p>文本字体样式的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#textstyleinterface对象说明">TextStyleInterface</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">字体样式设置项。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2256px;">     <h2 id="textstyleinterface对象说明" device-type="phone,2in1,tablet,wearable,tv">TextStyleInterface对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="textstyleinterface对象说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">fontColor</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcecolor">ResourceColor</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>字体颜色。</p>          <p>默认为主题色。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fontFamily</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcestr">ResourceStr</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>文本字体。</p>          <p>默认为主题字体。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fontSize</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#lengthmetrics12">LengthMetrics</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>字体大小。</p>          <p>默认字体大小为16fp。</p>          <p>如果LengthMetrics的unit值是percent，当前设置不生效，处理为16fp。</p>          <p>单位：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">fp</a></p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fontWeight</td>         <td class="cellrowborder" width="20%">number| <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#fontweight">FontWeight</a> | string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>字体粗细。</p>          <p>number类型取值[100, 900]，取值间隔为100，默认为400，取值越大，字体越粗。string类型仅支持number类型取值的字符串形式，例如"400"，以及"bold"、"bolder"、"lighter"、"regular"、"medium"，分别对应FontWeight中相应的枚举值。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fontStyle</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#fontstyle">FontStyle</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>字体样式。</p>          <p>默认值：FontStyle.Normal</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">strokeWidth<sup>20+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#lengthmetrics12">LengthMetrics</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>文本描边宽度。如果LengthMetrics的unit值是percent，当前设置不生效，处理为0。</p>          <p>设置值小于0时为实心字，大于0时为空心字。</p>          <p>默认值为0。</p>          <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">strokeColor<sup>20+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcecolor">ResourceColor</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>文本描边颜色。</p>          <p>默认值为字体颜色，设置异常值时取字体颜色。</p>          <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">superscript<sup>20+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-text-common#superscriptstyle20枚举说明">SuperscriptStyle</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>文本上下角标。</p>          <p>默认值：SuperscriptStyle.NORMAL</p>          <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="gesturestyle" device-type="phone,2in1,tablet,wearable,tv">GestureStyle<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gesturestyle" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>事件手势对象说明。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 453px;">     <h3 id="constructor-2" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(value?: GestureStyleInterface)</p>     <p>事件手势的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#gesturestyleinterface对象说明">GestureStyleInterface</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">事件设置项。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 663px;">     <h2 id="gesturestyleinterface对象说明" device-type="phone,2in1,tablet,wearable,tv">GestureStyleInterface对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gesturestyleinterface对象说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">onClick</td>         <td class="cellrowborder" width="20%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-click#clickevent">ClickEvent</a>&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置点击事件。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">onLongPress</td>         <td class="cellrowborder" width="20%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-common#gestureevent对象说明">GestureEvent</a>&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置长按事件。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">onTouch<sup>20+</sup></td>         <td class="cellrowborder" width="20%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-touch#touchevent对象说明">TouchEvent</a>&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置触摸事件。</p>          <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 669px;">     <h2 id="decorationoptions20" device-type="phone,2in1,tablet,wearable,tv">DecorationOptions<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="decorationoptions20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>文本装饰线样式的额外配置选项对象说明。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">enableMultiType</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>是否开启多装饰线显示。</p>          <p>默认值：undefined。设置为true开启，设置为false/undefined关闭。</p>          <p>所有需要显示的装饰线都必须启用此选项，在这些装饰线的交集区域显示多装饰线效果，样式、颜色和粗细将采用最后设置的装饰线的效果。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="decorationstyle" device-type="phone,2in1,tablet,wearable,tv">DecorationStyle<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="decorationstyle" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>文本装饰线样式对象说明。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1089px;">     <h3 id="属性-2" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">type</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#textdecorationtype">TextDecorationType</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本装饰线类型。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">color</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcecolor">ResourceColor</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本装饰线颜色。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">style</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#textdecorationstyle12">TextDecorationStyle</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本装饰线样式。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">thicknessScale<sup>20+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本装饰线粗细缩放值。</p>          <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">options<sup>20+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#decorationoptions20">DecorationOptions</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本装饰线样式的额外配置选项。</p>          <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 661px;">     <h3 id="constructor-3" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-3" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(value: DecorationStyleInterface)</p>     <p>文本装饰线样式的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#decorationstyleinterface">DecorationStyleInterface</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>文本装饰线设置项。</p>          <p>默认值：</p>          <p>{</p>          <p>type: TextDecorationType.None,</p>          <p>color: Color.Black,</p>          <p>style: TextDecorationStyle.SOLID</p>          <p>}</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 826px;">     <h3 id="constructor20" device-type="phone,2in1,tablet,wearable,tv">constructor<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(value: DecorationStyleInterface, options?: DecorationOptions)</p>     <p>文本装饰线样式的构造函数，包含额外配置选项。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#decorationstyleinterface">DecorationStyleInterface</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>文本装饰线设置项。</p>          <p>默认值：</p>          <p>{</p>          <p>type: TextDecorationType.None,</p>          <p>color: Color.Black,</p>          <p>style: TextDecorationStyle.SOLID,</p>          <p>thicknessScale: 1.0</p>          <p>}</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#decorationoptions20">DecorationOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>文本装饰线额外配置选项。</p>          <p>默认值：</p>          <p>{</p>          <p>enableMultiType: undefined</p>          <p>}</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1280px;">     <h2 id="decorationstyleinterface" device-type="phone,2in1,tablet,wearable,tv">DecorationStyleInterface<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="decorationstyleinterface" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>文本装饰线样式接口对象说明。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.40.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">type</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#textdecorationtype">TextDecorationType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>装饰线类型。</p>          <p>默认值：TextDecorationType.None</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">color</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcecolor">ResourceColor</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>装饰线颜色。</p>          <p>默认值：Color.Black</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">style</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#textdecorationstyle12">TextDecorationStyle</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>装饰线样式。</p>          <p>默认值：TextDecorationStyle.SOLID</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">thicknessScale<sup>20+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>装饰线粗细缩放。</p>          <p>默认值：1.0</p>          <p>取值范围：[0, +∞)</p>          <p><strong>说明：</strong> 负值按默认值处理。</p>          <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当文字的下边缘轮廓与装饰线位置相交时，会触发下划线避让规则，下划线将在这些字符处避让文字。常见“gjyqp”等英文字符。</p>       <p>当文本装饰线的颜色设置为Color.Transparent时，装饰线颜色设置为跟随每行第一个字的字体颜色。当文本装饰线的颜色设置为透明色16进制对应值“#00FFFFFF”时，装饰线颜色设置为透明色。</p>      </div></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="baselineoffsetstyle" device-type="phone,2in1,tablet,wearable,tv">BaselineOffsetStyle<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="baselineoffsetstyle" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>文本基线偏移量对象说明。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 357px;">     <h3 id="属性-3" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-3" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.42.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">baselineOffset</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本基线偏移量。</p>          <p>单位：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">vp</a></p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 517px;">     <h3 id="constructor-4" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-4" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(value: LengthMetrics)</p>     <p>文本基线偏移的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#lengthmetrics12">LengthMetrics</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文本基线偏移量设置项。如果LengthMetrics的unit值是percent，该设置不生效。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="letterspacingstyle" device-type="phone,2in1,tablet,wearable,tv">LetterSpacingStyle<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="letterspacingstyle" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>文本字符间距对象说明。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 357px;">     <h3 id="属性-4" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-4" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.45.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">letterSpacing</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本字符间距。</p>          <p>单位：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">vp</a></p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 517px;">     <h3 id="constructor-5" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-5" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(value: LengthMetrics)</p>     <p>文本字符间距的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#lengthmetrics12">LengthMetrics</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文本字符间距设置项。如果LengthMetrics的unit值是percent，该设置不生效。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="lineheightstyle" device-type="phone,2in1,tablet,wearable,tv">LineHeightStyle<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="lineheightstyle" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>文本行高对象说明。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 357px;">     <h3 id="属性-5" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-5" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">lineHeight</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本行高。</p>          <p>单位：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">vp</a></p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 541px;">     <h3 id="constructor-6" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-6" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(lineHeight: LengthMetrics)</p>     <p>文本行高的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">lineHeight</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#lengthmetrics12">LengthMetrics</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文本行高设置项。如果LengthMetrics的value值不大于0时，不限制文本行高，自适应字体大小。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="textshadowstyle" device-type="phone,2in1,tablet,wearable,tv">TextShadowStyle<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="textshadowstyle" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>文本阴影对象说明。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 333px;">     <h3 id="属性-6" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-6" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">textShadow</td>         <td class="cellrowborder" width="20%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-image-effect#shadowoptions对象说明">ShadowOptions</a>&gt;</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">获取属性字符串的文本阴影。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 541px;">     <h3 id="constructor-7" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-7" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(value: ShadowOptions | Array&lt;ShadowOptions&gt;)</p>     <p>文本阴影对象的构造函数。</p>     <p>ShadowOptions对象中不支持fill字段。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.52.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-image-effect#shadowoptions对象说明">ShadowOptions</a> | Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-image-effect#shadowoptions对象说明">ShadowOptions</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文本阴影设置项。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="imageattachment" device-type="phone,2in1,tablet,wearable,tv">ImageAttachment<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imageattachment" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>图片对象说明。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1443px;">     <h3 id="属性-7" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-7" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.54.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">value</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">获取属性字符串的图片数据源。<strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">size</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#sizeoptions">SizeOptions</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的图片尺寸。<strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>          <p>返回number类型值的单位为px。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">sizeInVp<sup>21+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#sizeoptions">SizeOptions</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的图片尺寸。</p>          <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p>          <p>返回number类型值的单位为vp。</p>          <p>当ImageAttachment尺寸设置为负数值或undefined时，返回为undefined。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">verticalAlign</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#imagespanalignment10">ImageSpanAlignment</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">获取属性字符串的图片对齐方式。<strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">objectFit</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#imagefit">ImageFit</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">获取属性字符串的图片缩放类型。<strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">layoutStyle</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#imageattachmentlayoutstyle对象说明">ImageAttachmentLayoutStyle</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">获取属性字符串的图片布局。<strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">colorFilter<sup>15+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#colorfiltertype15">ColorFilterType</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">获取属性字符串的图片颜色滤镜效果。<strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 469px;">     <h3 id="constructor-8" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-8" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(value: ImageAttachmentInterface)</p>     <p>图片对象的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#imageattachmentinterface对象说明">ImageAttachmentInterface</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片设置项。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 493px;">     <h3 id="constructor15" device-type="phone,2in1,tablet,wearable,tv">constructor<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor15" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(attachment: Optional&lt;AttachmentType&gt;)</p>     <p>图片对象的构造函数。与value类型入参构造函数相比，attachment参数增加了对undefined类型和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcestr">ResourceStr</a>类型图片的支持。</p>     <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">attachment</td>         <td class="cellrowborder" width="25%">Optional&lt;<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#attachmenttype15">AttachmentType</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">PixelMap类型或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcestr">ResourceStr</a>类型图片设置项。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 504px;">     <h2 id="attachmenttype15" device-type="phone,2in1,tablet,wearable,tv">AttachmentType<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="attachmenttype15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type AttachmentType = ImageAttachmentInterface | ResourceImageAttachmentOptions</p>     <p>图片设置项类型，用于设置属性字符串PixelMap类型或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcestr">ResourceStr</a>类型图片。</p>     <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#imageattachmentinterface对象说明">ImageAttachmentInterface</a></td>         <td class="cellrowborder" width="50%">PixelMap类型图片设置项。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#resourceimageattachmentoptions15">ResourceImageAttachmentOptions</a></td>         <td class="cellrowborder" width="50%">ResourceStr类型图片设置项。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 504px;">     <h2 id="colorfiltertype15" device-type="phone,2in1,tablet,wearable,tv">ColorFilterType<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="colorfiltertype15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type ColorFilterType = ColorFilter | DrawingColorFilter</p>     <p>图片颜色滤镜设置项类型。</p>     <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.58.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#colorfilter9">ColorFilter</a></td>         <td class="cellrowborder" width="50%">ColorFilter类型图片颜色滤镜设置项。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-colorfilter">DrawingColorFilter</a></td>         <td class="cellrowborder" width="50%">DrawingColorFilter类型图片颜色滤镜设置项。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1566px;">     <h2 id="imageattachmentinterface对象说明" device-type="phone,2in1,tablet,wearable,tv">ImageAttachmentInterface对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imageattachmentinterface对象说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.59.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">value</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">设置图片数据源。<strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">size</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#sizeoptions">SizeOptions</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置图片大小，不支持百分比。 <strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>          <p>size的默认值与objectFit的值有关，不同的objectFit的值对应size的默认值不同。比如当objectFit的值为Cover时，图片高度为组件高度减去组件上下的内边距，图片宽度为组件宽度减去组件左右的内边距。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">verticalAlign</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#imagespanalignment10">ImageSpanAlignment</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置图片基于文本的对齐方式。<strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>          <p>默认值：ImageSpanAlignment.BOTTOM</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">objectFit</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#imagefit">ImageFit</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置图片的缩放类型，当前枚举类型不支持ImageFit.MATRIX。<strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>          <p>默认值：ImageFit.Cover</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">layoutStyle</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#imageattachmentlayoutstyle对象说明">ImageAttachmentLayoutStyle</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">设置图片布局。<strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">colorFilter<sup>15+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#colorfiltertype15">ColorFilterType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">设置属性字符串的图片颜色滤镜效果。<strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 567px;">     <h2 id="imageattachmentlayoutstyle对象说明" device-type="phone,2in1,tablet,wearable,tv">ImageAttachmentLayoutStyle对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imageattachmentlayoutstyle对象说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.60.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">margin</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#lengthmetrics12">LengthMetrics</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#margin">Margin</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置图片外边距。</p>          <p>默认值：0</p>          <p>单位：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">vp</a></p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">padding</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#lengthmetrics12">LengthMetrics</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#padding">Padding</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置图片内边距。</p>          <p>默认值：0</p>          <p>单位：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">vp</a></p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">borderRadius</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#lengthmetrics12">LengthMetrics</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#borderradiuses9">BorderRadiuses</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置圆角。</p>          <p>默认值：0</p>          <p>单位：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">vp</a></p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1059px;">     <h2 id="resourceimageattachmentoptions15" device-type="phone,2in1,tablet,wearable,tv">ResourceImageAttachmentOptions<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resourceimageattachmentoptions15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>ResourceStr类型图片设置项。</p>     <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.61.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">resourceValue</td>         <td class="cellrowborder" width="20%">Optional&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcestr">ResourceStr</a>&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">设置图片数据源。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">size</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#sizeoptions">SizeOptions</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">设置图片大小。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">verticalAlign</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#imagespanalignment10">ImageSpanAlignment</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置图片基于文本的对齐方式。</p>          <p>默认值：ImageSpanAlignment.BOTTOM</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">objectFit</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#imagefit">ImageFit</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置图片的缩放类型，当前枚举类型不支持ImageFit.MATRIX。</p>          <p>默认值：ImageFit.Cover</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">layoutStyle</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#imageattachmentlayoutstyle对象说明">ImageAttachmentLayoutStyle</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">设置图片布局。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">colorFilter</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#colorfiltertype15">ColorFilterType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">设置属性字符串的图片颜色滤镜效果。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">syncLoad</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>是否同步加载图片，默认是异步加载。同步加载时阻塞UI线程，不会显示占位图。</p>          <p>默认值：false</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 278px;">     <h2 id="customspan" device-type="phone,2in1,tablet,wearable,tv">CustomSpan<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="customspan" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>自定义绘制Span，仅提供基类，具体实现由开发者定义。</p>     <p>自定义绘制Span拖拽显示的缩略图为空白。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 744px;">     <h3 id="onmeasure" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">onMeasure<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onmeasure" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>abstract onMeasure(measureInfo: CustomSpanMeasureInfo): CustomSpanMetrics</p>     <p>获取自定义绘制Span的尺寸大小。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">measureInfo</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#customspanmeasureinfo对象说明">CustomSpanMeasureInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文本的字体大小。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.63.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#customspanmetrics对象说明">CustomSpanMetrics</a></td>         <td class="cellrowborder" width="50%">          <p>自定义绘制Span的尺寸信息。</p>          <p><strong>说明：</strong></p>          <p>最终的CustomSpan的高度是由当前Text组件的行高所决定的。当height不传值，则默认取Text组件的fontSize的值作为CustomSpan的高度；当height大于当前行的其他子组件的高度时，此时height即为Text组件的行高。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 658px;">     <h3 id="ondraw" device-type="phone,2in1,tablet,wearable,tv">onDraw<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondraw" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>abstract onDraw(context: DrawContext, drawInfo: CustomSpanDrawInfo): void</p>     <p>绘制自定义绘制Span。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#drawcontext">DrawContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>图形绘制上下文。</p>          <p><strong>说明：</strong></p>          <p>DrawContext的canvas方法获取的画布是Text组件的画布，绘制时不会超出Text组件的范围。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">drawInfo</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#customspandrawinfo对象说明">CustomSpanDrawInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">自定义绘制Span的绘制信息。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 318px;">     <h3 id="invalidate13" device-type="phone,2in1,tablet,wearable,tv">invalidate<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="invalidate13" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>invalidate(): void</p>     <p>主动刷新使用CustomSpan的Text组件。</p>     <p><strong>元服务API：</strong> 从API version 13开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 357px;">     <h2 id="customspanmeasureinfo对象说明" device-type="phone,2in1,tablet,wearable,tv">CustomSpanMeasureInfo对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="customspanmeasureinfo对象说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.66.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">fontSize</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>设置文本字体大小。</p>          <p>单位：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">fp</a></p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 474px;">     <h2 id="customspanmetrics对象说明" device-type="phone,2in1,tablet,wearable,tv">CustomSpanMetrics对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="customspanmetrics对象说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.67.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">width</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>自定义绘制Span的宽。</p>          <p>单位：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">vp</a></p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">height</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>自定义绘制Span的高。</p>          <p>单位：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">vp</a></p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 708px;">     <h2 id="customspandrawinfo对象说明" device-type="phone,2in1,tablet,wearable,tv">CustomSpanDrawInfo对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="customspandrawinfo对象说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.68.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">x</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>自定义绘制Span相对于挂载组件的偏移。</p>          <p>单位：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">px</a></p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">lineTop</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>自定义绘制Span相对于Text组件的上边距。</p>          <p>单位：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">px</a></p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">lineBottom</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>自定义绘制Span相对于Text组件的下边距。</p>          <p>单位：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">px</a></p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">baseline</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>自定义绘制Span的所在行的基线偏移量。</p>          <p>单位：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units">px</a></p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="paragraphstyle" device-type="phone,2in1,tablet,wearable,tv">ParagraphStyle<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="paragraphstyle" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>文本段落样式对象说明。</p>     <p>除首个段落外，后续段落按'\n'划分。</p>     <p>每个段落的段落样式按首个占位设置的段落样式生效，未设置时，段落按被绑定组件的段落样式生效。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1820px;">     <h3 id="属性-8" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-8" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.70.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">textAlign</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#textalign">TextAlign</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串文本段落在水平方向的对齐方式。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">textIndent</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串文本段落的首行文本缩进。单位VP</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">maxLines</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串文本段落的最大行数。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">overflow</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#textoverflow">TextOverflow</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串文本段落超长时的显示方式。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">wordBreak</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#wordbreak11">WordBreak</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串文本段落的断行规则。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">leadingMargin</td>         <td class="cellrowborder" width="20%">number | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#leadingmarginplaceholder11">LeadingMarginPlaceholder</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串文本段落的缩进。</p>          <p>返回为number类型时，单位为vp。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">paragraphSpacing<sup>19+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串文本段落的段落间距。</p>          <p>单位：vp</p>          <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">textVerticalAlign<sup>20+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-text-common#textverticalalign20">TextVerticalAlign</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串文本段落在垂直方向的对齐方式。</p>          <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>属性字符串的maxLines和overflow仅在Text中生效，建议在组件侧设置。</p>       <p>textAlign只能调整文本整体的布局，不影响字符的显示顺序。若需要调整字符的显示顺序，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-internationalization#镜像状态字符对齐" target="_blank">镜像状态字符对齐</a>。</p>      </div></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 469px;">     <h3 id="constructor-9" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(value?: ParagraphStyleInterface)</p>     <p>文本段落样式的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.71.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#paragraphstyleinterface对象说明">ParagraphStyleInterface</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">段落样式设置项。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2016px;">     <h2 id="paragraphstyleinterface对象说明" device-type="phone,2in1,tablet,wearable,tv">ParagraphStyleInterface对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="paragraphstyleinterface对象说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.72.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">textAlign</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#textalign">TextAlign</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置文本段落在水平方向的对齐方式。</p>          <p>默认值：TextAlign.Start</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">textIndent</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#lengthmetrics12">LengthMetrics</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置文本段落的首行文本缩进。不支持百分比。</p>          <p>默认值：0</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">maxLines</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置文本段落的最大行数，默认不限制。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">overflow</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#textoverflow">TextOverflow</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置文本段落超长时的显示方式。</p>          <p>默认值：TextOverflow.None</p>          <p>需配合maxLines使用，单独设置不生效。不支持TextOverflow.MARQUEE。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">wordBreak</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#wordbreak11">WordBreak</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置文本段落的断行规则。</p>          <p>默认值：WordBreak.NORMAL</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">leadingMargin</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#lengthmetrics12">LengthMetrics</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#leadingmarginplaceholder11">LeadingMarginPlaceholder</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置文本段落的缩进。不支持百分比。</p>          <p>默认值：0</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">paragraphSpacing<sup>19+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#lengthmetrics12">LengthMetrics</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置文本段落的段落间距。</p>          <p>段落间距默认大小为0。不支持百分比。</p>          <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">textVerticalAlign<sup>20+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-text-common#textverticalalign20">TextVerticalAlign</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置文本段落在垂直方向的对齐方式。</p>          <p>默认值：TextVerticalAlign.BASELINE</p>          <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="userdataspan" device-type="phone,2in1,tablet,wearable,tv">UserDataSpan<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="userdataspan" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>支持存储自定义扩展信息，用于存储和获取用户数据，仅提供基类，具体实现由开发者定义。</p>     <p>扩展信息不影响实际显示效果。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1641px;">     <h2 id="styledstringkey枚举说明" device-type="phone,2in1,tablet,wearable,tv">StyledStringKey枚举说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="styledstringkey枚举说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.74.3.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.3.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.3.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">FONT</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>字体样式键。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#textstyle">TextStyle</a>所属键。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DECORATION</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>文本装饰线样式键。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#decorationstyle">DecorationStyle</a>所属键。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BASELINE_OFFSET</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>文本基线偏移量样式键。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#baselineoffsetstyle">BaselineOffsetStyle</a>所属键。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">LETTER_SPACING</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>文本字符间距样式键。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#letterspacingstyle">LetterSpacingStyle</a>所属键。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TEXT_SHADOW</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>文本阴影样式键。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#textshadowstyle">TextShadowStyle</a>所属键。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">LINE_HEIGHT</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>文本行高样式键。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#lineheightstyle">LineHeightStyle</a>所属键。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BACKGROUND_COLOR<sup>14+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">6</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>文本背景色样式键。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#backgroundcolorstyle14">BackgroundColorStyle</a>所属键。</p>          <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">URL<sup>14+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">7</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>超链接样式键。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#urlstyle14">UrlStyle</a>所属键。</p>          <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">GESTURE</td>         <td class="cellrowborder" width="33.33333333333333%">100</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>事件手势键。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#gesturestyle">GestureStyle</a>所属键。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PARAGRAPH_STYLE</td>         <td class="cellrowborder" width="33.33333333333333%">200</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>段落样式键。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#paragraphstyle">ParagraphStyle</a>所属键。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">IMAGE</td>         <td class="cellrowborder" width="33.33333333333333%">300</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>图片键。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#imageattachment">ImageAttachment</a>所属键。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CUSTOM_SPAN</td>         <td class="cellrowborder" width="33.33333333333333%">400</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>自定义绘制Span键。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#customspan">CustomSpan</a>所属键。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">USER_DATA</td>         <td class="cellrowborder" width="33.33333333333333%">500</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>UserDataSpan键。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#userdataspan">UserDataSpan</a>所属键。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="backgroundcolorstyle14" device-type="phone,2in1,tablet,wearable,tv">BackgroundColorStyle<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="backgroundcolorstyle14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>文本背景颜色对象说明。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 477px;">     <h3 id="属性-9" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.76.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">textBackgroundStyle</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-span#textbackgroundstyle11对象说明">TextBackgroundStyle</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>获取属性字符串的文本背景颜色。</p>          <p>默认值：</p>          <p>{</p>          <p>color: Color.Transparent,</p>          <p>radius: 0</p>          <p>}</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 589px;">     <h3 id="constructor14" device-type="phone,2in1,tablet,wearable,tv">constructor<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor14" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(textBackgroundStyle: TextBackgroundStyle)</p>     <p>文本背景颜色的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.77.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">textBackgroundStyle</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-span#textbackgroundstyle11对象说明">TextBackgroundStyle</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>文本背景色设置项。</p>          <p>默认值：</p>          <p>{</p>          <p>color: Color.Transparent,</p>          <p>radius: 0</p>          <p>}</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 278px;">     <h2 id="urlstyle14" device-type="phone,2in1,tablet,wearable,tv">UrlStyle<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="urlstyle14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>超链接对象说明。</p>     <p>默认颜色、字号、字重分别是'#ff0a59f7'、'16fp'、'FontWeight.Regular'，若属性字符串设置TextStyle，则TextStyle优先级更高。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 333px;">     <h3 id="属性-10" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.79.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">url</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">获取属性字符串的超链接内容。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 469px;">     <h3 id="constructor14-1" device-type="phone,2in1,tablet,wearable,tv">constructor<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor14-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(url: string)</p>     <p>超链接对象的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.80.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">url</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">超链接设置项。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="示例" device-type="phone,2in1,tablet,wearable,tv">示例<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="示例" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4601px;">     <h3 id="示例1属性字符串处理" class="firsth2">示例1（属性字符串处理）<i class="anchor-icon anchor-icon-link" anchorid="示例1属性字符串处理" tips="复制节点链接"></i></h3>          <p>从API version 12开始，该示例通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#insertstring">insertString</a>、<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#removestyles">removeStyles</a>、<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#replacestyle">replaceStyle</a>、<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#getstyles">getStyles</a>接口实现属性字符串的插入、删除、替换、查看。</p>     <div _ngcontent-mrt-c106="" class="highlight-div"><div _ngcontent-mrt-c106="" class="highlight-div-header"><div _ngcontent-mrt-c106="" class="highlight-div-header-left"><div _ngcontent-mrt-c106="" class="handle-button expand-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrt-c106="" class="highlight-div-header-right"><div _ngcontent-mrt-c106="" class="handle-button ai-button"></div><div _ngcontent-mrt-c106="" class="handle-button line-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrt-c106="" class="handle-button theme-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrt-c106="" class="handle-button copy-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrt-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct styled_string_process_demo {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">height1</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">450</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">fontSize1</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">16</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">fontWeight1</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">400</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">color1</span>: <span class="hljs-title class_">Color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>;</li><li>  <span class="hljs-attr">scroll</span>: <span class="hljs-title class_">Scroller</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scroller</span>();</li><li>  <span class="hljs-attr">fontStyleAttr1</span>: <span class="hljs-title class_">TextStyle</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span> });</li><li>  <span class="hljs-attr">fontStyleAttr2</span>: <span class="hljs-title class_">TextStyle</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span> });</li><li>  <span class="hljs-comment">// 创建可读写属性字符串的对象mutableStyledString1</span></li><li>  <span class="hljs-attr">mutableStyledString1</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">"运动45分钟"</span>);</li><li>  <span class="hljs-comment">// 创建构造入参有字符串和样式的对象mutableStyledString2</span></li><li>  <span class="hljs-attr">mutableStyledString2</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">"test hello world"</span>, [{</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">fontStyleAttr1</span></li><li>  }]);</li><li>  <span class="hljs-comment">// 创建只读属性字符串对象styledString2</span></li><li>  <span class="hljs-attr">styledString2</span>: <span class="hljs-title class_">StyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StyledString</span>(<span class="hljs-string">"运动45分钟"</span>);</li><li>  <span class="hljs-attr">spanStyle1</span>: <span class="hljs-title class_">SpanStyle</span> = {</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span> })</li><li>  };</li><li>  <span class="hljs-attr">spanStyle2</span>: <span class="hljs-title class_">SpanStyle</span> = {</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">2</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span> })</li><li>  };</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">string1</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">fontColor1</span>: <span class="hljs-title class_">ResourceColor</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>;</li><li>  <span class="hljs-attr">controller1</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>  <span class="hljs-attr">controller2</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>  <span class="hljs-attr">controller3</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">onPageShow</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller1</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">styledString2</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller2</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller3</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString2</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Scroll</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">scroll</span>) {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-comment">// 显示属性字符串</span></li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller1</span> })</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller3</span> }).<span class="hljs-title function_">key</span>(<span class="hljs-string">'mutableStyledString2'</span>)</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">'修改string1的值'</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>.<span class="hljs-title function_">equals</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">styledString2</span>);</li><li>              <span class="hljs-keyword">if</span> (result) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">string1</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>.<span class="hljs-title function_">getString</span>();</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mutableStyledString1 content:"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>.<span class="hljs-title function_">getString</span>());</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mutableStyledString1 length:"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>.<span class="hljs-property">length</span>);</li><li>              }</li><li>            })</li><li>
</li><li>          <span class="hljs-comment">// 属性字符串与Span冲突时忽略Span,以及样式与Text组件属性未冲突部分生效Text设置的属性</span></li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller2</span> }) {</li><li>            <span class="hljs-title class_">Span</span>(<span class="hljs-string">"span and styledString test"</span>)</li><li>              .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Yellow</span>)</li><li>              .<span class="hljs-title function_">decoration</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span> })</li><li>            <span class="hljs-comment">// $r('app.media.startIcon')需要替换为开发者所需的图像资源文件。</span></li><li>            <span class="hljs-title class_">ImageSpan</span>($r(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>          }</li><li>          .<span class="hljs-title function_">key</span>(<span class="hljs-string">'styledString2'</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fontColor1</span>)</li><li>          .<span class="hljs-title function_">letterSpacing</span>(<span class="hljs-number">10</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">32</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-number">600</span>)</li><li>          .<span class="hljs-title function_">fontStyle</span>(<span class="hljs-title class_">FontStyle</span>.<span class="hljs-property">Italic</span>)</li><li>          .<span class="hljs-title function_">lineHeight</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">textShadow</span>({</li><li>            <span class="hljs-attr">radius</span>: <span class="hljs-number">5</span>,</li><li>            <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>,</li><li>            <span class="hljs-attr">offsetX</span>: <span class="hljs-number">5</span>,</li><li>            <span class="hljs-attr">offsetY</span>: <span class="hljs-number">5</span></li><li>          })</li><li>          .<span class="hljs-title function_">textCase</span>(<span class="hljs-title class_">TextCase</span>.<span class="hljs-property">UpperCase</span>)</li><li>          .<span class="hljs-title function_">decoration</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Yellow</span> })</li><li>          .<span class="hljs-title function_">baselineOffset</span>(<span class="hljs-number">2</span>)</li><li>          .<span class="hljs-title function_">copyOption</span>(<span class="hljs-title class_">CopyOptions</span>.<span class="hljs-property">InApp</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>
</li><li>          <span class="hljs-comment">// 以上冲突测试对照组</span></li><li>          <span class="hljs-title class_">Text</span>() {</li><li>            <span class="hljs-title class_">Span</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">string1</span>)</li><li>              .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">color1</span>)</li><li>              .<span class="hljs-title function_">decoration</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span> })</li><li>            <span class="hljs-comment">// $r('app.media.startIcon')需要替换为开发者所需的图像资源文件。</span></li><li>            <span class="hljs-title class_">ImageSpan</span>($r(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">letterSpacing</span>(<span class="hljs-number">10</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">32</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-number">600</span>)</li><li>          .<span class="hljs-title function_">fontStyle</span>(<span class="hljs-title class_">FontStyle</span>.<span class="hljs-property">Italic</span>)</li><li>          .<span class="hljs-title function_">lineHeight</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">textShadow</span>({</li><li>            <span class="hljs-attr">radius</span>: <span class="hljs-number">5</span>,</li><li>            <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>,</li><li>            <span class="hljs-attr">offsetX</span>: <span class="hljs-number">5</span>,</li><li>            <span class="hljs-attr">offsetY</span>: <span class="hljs-number">5</span></li><li>          })</li><li>          .<span class="hljs-title function_">textCase</span>(<span class="hljs-title class_">TextCase</span>.<span class="hljs-property">UpperCase</span>)</li><li>          .<span class="hljs-title function_">decoration</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Yellow</span> })</li><li>          .<span class="hljs-title function_">baselineOffset</span>(<span class="hljs-number">2</span>)</li><li>
</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">'设置样式及替换文本'</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>.<span class="hljs-title function_">replaceStyle</span>({</li><li>                <span class="hljs-attr">start</span>: <span class="hljs-number">2</span>,</li><li>                <span class="hljs-attr">length</span>: <span class="hljs-number">2</span>,</li><li>                <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>                <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">fontStyleAttr1</span></li><li>              });</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>.<span class="hljs-title function_">insertString</span>(<span class="hljs-number">0</span>, <span class="hljs-string">"压力85偏高，"</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>.<span class="hljs-title function_">setStyle</span>({</li><li>                <span class="hljs-attr">start</span>: <span class="hljs-number">2</span>,</li><li>                <span class="hljs-attr">length</span>: <span class="hljs-number">2</span>,</li><li>                <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>                <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">fontStyleAttr2</span></li><li>              });</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller2</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>);</li><li>            })</li><li>            .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>
</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">'查询样式及清空样式'</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-keyword">let</span> styles = <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>.<span class="hljs-title function_">getStyles</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>.<span class="hljs-property">length</span>);</li><li>              <span class="hljs-keyword">if</span> (styles.<span class="hljs-property">length</span> == <span class="hljs-number">2</span>) {</li><li>                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; styles.<span class="hljs-property">length</span>; i++) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'StyledString style object start:'</span> + styles[i].<span class="hljs-property">start</span>);</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'StyledString style object length:'</span> + styles[i].<span class="hljs-property">length</span>);</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'StyledString style object key:'</span> + styles[i].<span class="hljs-property">styledKey</span>);</li><li>                  <span class="hljs-keyword">if</span> (styles[i].<span class="hljs-property">styledKey</span> === <span class="hljs-number">0</span>) {</li><li>                    <span class="hljs-keyword">let</span> fontAttr = styles[i].<span class="hljs-property">styledValue</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">TextStyle</span>;</li><li>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'StyledString fontColor:'</span> + fontAttr.<span class="hljs-property">fontColor</span>);</li><li>                  }</li><li>                }</li><li>              }</li><li>              <span class="hljs-keyword">if</span> (styles[<span class="hljs-number">0</span>] !== <span class="hljs-literal">undefined</span>) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString2</span>.<span class="hljs-title function_">setStyle</span>(styles[<span class="hljs-number">0</span>]);</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller3</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString2</span>);</li><li>              }</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>.<span class="hljs-title function_">removeStyles</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller2</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>);</li><li>            })</li><li>            .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>        }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>
</li><li>      }</li><li>      .<span class="hljs-title function_">expandSafeArea</span>([<span class="hljs-title class_">SafeAreaType</span>.<span class="hljs-property">KEYBOARD</span>])</li><li>      .<span class="hljs-title function_">scrollable</span>(<span class="hljs-title class_">ScrollDirection</span>.<span class="hljs-property">Vertical</span>)</li><li>      .<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">On</span>)</li><li>      .<span class="hljs-title function_">scrollBarColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>)</li><li>      .<span class="hljs-title function_">scrollBarWidth</span>(<span class="hljs-number">10</span>)</li><li>      .<span class="hljs-title function_">edgeEffect</span>(<span class="hljs-title class_">EdgeEffect</span>.<span class="hljs-property">None</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="321" originwidth="296" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115657.12351016062197784206673425713071:50001231000000:2800:27691BBF0FD5C0113CB18DE77F27D6CFCC9A881C69C3C92C50CEEBBDCD81C1E4.png" class="notEnlarge" width="296" height="321"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2394px;">     <h3 id="示例2设置事件">示例2（设置事件）<i class="anchor-icon anchor-icon-link" anchorid="示例2设置事件" tips="复制节点链接"></i></h3>          <p>从API version 12开始，该示例通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#styleoptions对象说明">StyleOptions</a>中的styledKey、styledValue接口实现属性字符串绑定事件。</p>     <div _ngcontent-mrt-c106="" class="highlight-div"><div _ngcontent-mrt-c106="" class="highlight-div-header"><div _ngcontent-mrt-c106="" class="highlight-div-header-left"><div _ngcontent-mrt-c106="" class="handle-button expand-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrt-c106="" class="highlight-div-header-right"><div _ngcontent-mrt-c106="" class="handle-button ai-button"></div><div _ngcontent-mrt-c106="" class="handle-button line-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrt-c106="" class="handle-button theme-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrt-c106="" class="handle-button copy-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrt-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct styled_string_bind_events_demo {</li><li>  <span class="hljs-attr">scroll</span>: <span class="hljs-title class_">Scroller</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scroller</span>();</li><li>  <span class="hljs-attr">fontStyleAttr1</span>: <span class="hljs-title class_">TextStyle</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span> });</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>  <span class="hljs-attr">clickGestureAttr</span>: <span class="hljs-title class_">GestureStyle</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GestureStyle</span>({</li><li>    <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'clickGestureAttr object trigger click event'</span> });</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">backgroundColor1</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Yellow</span>;</li><li>    }</li><li>  })</li><li>  <span class="hljs-attr">gestureStyleAttr</span>: <span class="hljs-title class_">GestureStyle</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GestureStyle</span>({</li><li>    <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'gestureStyleAttr object trigger click event'</span> });</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">backgroundColor1</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>;</li><li>    },</li><li>    <span class="hljs-attr">onLongPress</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'gestureStyleAttr object trigger long press event'</span> });</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">backgroundColor1</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>;</li><li>    },</li><li>    <span class="hljs-attr">onTouch</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'gestureStyleAttr object trigger touch event'</span> });</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">backgroundColor1</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>;</li><li>    }</li><li>  });</li><li>  <span class="hljs-comment">// 创建事件的对象mutableStyledString3</span></li><li>  <span class="hljs-attr">mutableStyledString3</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">"hello world"</span>, [{</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">GESTURE</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">clickGestureAttr</span></li><li>  },</li><li>    {</li><li>      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>      <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>      <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">fontStyleAttr1</span></li><li>    },</li><li>    {</li><li>      <span class="hljs-attr">start</span>: <span class="hljs-number">6</span>,</li><li>      <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>      <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">GESTURE</span>,</li><li>      <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">gestureStyleAttr</span></li><li>    },</li><li>    {</li><li>      <span class="hljs-attr">start</span>: <span class="hljs-number">6</span>,</li><li>      <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>      <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>      <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span> })</li><li>    }]);</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">backgroundColor1</span>: <span class="hljs-title class_">ResourceColor</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-attr">controller3</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">onPageShow</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller3</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString3</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Scroll</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">scroll</span>) {</li><li>        <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">30</span> }) {</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">"响应属性字符串事件改变背景色"</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">backgroundColor1</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>          <span class="hljs-comment">// 包含事件的属性字符串</span></li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller3</span> }).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>            .<span class="hljs-title function_">copyOption</span>(<span class="hljs-title class_">CopyOptions</span>.<span class="hljs-property">InApp</span>)</li><li>            .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>            .<span class="hljs-title function_">clip</span>(<span class="hljs-literal">true</span>)</li><li>        }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">expandSafeArea</span>([<span class="hljs-title class_">SafeAreaType</span>.<span class="hljs-property">KEYBOARD</span>])</li><li>      .<span class="hljs-title function_">scrollable</span>(<span class="hljs-title class_">ScrollDirection</span>.<span class="hljs-property">Vertical</span>)</li><li>      .<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">On</span>)</li><li>      .<span class="hljs-title function_">scrollBarColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>)</li><li>      .<span class="hljs-title function_">scrollBarWidth</span>(<span class="hljs-number">10</span>)</li><li>      .<span class="hljs-title function_">edgeEffect</span>(<span class="hljs-title class_">EdgeEffect</span>.<span class="hljs-property">None</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="234" originwidth="720" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115657.75022620897780529487600694535871:50001231000000:2800:68FB506D1A3142E70A11BA7699290746900290DE1C005B97291FF6C9D5A36B38.png" width="720" height="234"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4820px;">     <h3 id="示例3设置文本样式">示例3（设置文本样式）<i class="anchor-icon anchor-icon-link" anchorid="示例3设置文本样式" tips="复制节点链接"></i></h3>          <p>从API version 12开始，该示例通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#getstyles">getStyles</a>、<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#setstyle">setStyle</a>接口实现属性字符串查询和设置样式。</p>     <div _ngcontent-mrt-c106="" class="highlight-div"><div _ngcontent-mrt-c106="" class="highlight-div-header"><div _ngcontent-mrt-c106="" class="highlight-div-header-left"><div _ngcontent-mrt-c106="" class="handle-button expand-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrt-c106="" class="highlight-div-header-right"><div _ngcontent-mrt-c106="" class="handle-button ai-button"></div><div _ngcontent-mrt-c106="" class="handle-button line-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrt-c106="" class="handle-button theme-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrt-c106="" class="handle-button copy-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrt-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LengthMetrics</span>, <span class="hljs-title class_">LengthUnit</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct styled_string_set_text_style_demo {</li><li>  <span class="hljs-attr">fontStyleAttr1</span>: <span class="hljs-title class_">TextStyle</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span> });</li><li>  <span class="hljs-attr">fontStyleAttr2</span>: <span class="hljs-title class_">TextStyle</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({</li><li>    <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>,</li><li>    <span class="hljs-attr">fontSize</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">20</span>),</li><li>    <span class="hljs-attr">fontWeight</span>: <span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bolder</span>,</li><li>    <span class="hljs-attr">fontStyle</span>: <span class="hljs-title class_">FontStyle</span>.<span class="hljs-property">Italic</span>,</li><li>    <span class="hljs-attr">fontFamily</span>: <span class="hljs-string">"Arial"</span>,</li><li>    <span class="hljs-attr">superscript</span>: <span class="hljs-title class_">SuperscriptStyle</span>.<span class="hljs-property">SUPERSCRIPT</span></li><li>  });</li><li>  <span class="hljs-attr">fontStyleAttr3</span>: <span class="hljs-title class_">TextStyle</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({</li><li>    <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>,</li><li>    <span class="hljs-attr">fontSize</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">20</span>),</li><li>    <span class="hljs-attr">fontWeight</span>: <span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Lighter</span>,</li><li>    <span class="hljs-attr">fontStyle</span>: <span class="hljs-title class_">FontStyle</span>.<span class="hljs-property">Italic</span>,</li><li>    <span class="hljs-attr">fontFamily</span>: <span class="hljs-string">"Arial"</span>,</li><li>    <span class="hljs-attr">superscript</span>: <span class="hljs-title class_">SuperscriptStyle</span>.<span class="hljs-property">SUBSCRIPT</span></li><li>  });</li><li>  <span class="hljs-comment">// 创建多重TextStyle样式的对象mutableStyledString1</span></li><li>  <span class="hljs-attr">mutableStyledString1</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">"运动45分钟"</span>, [{</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">2</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">fontStyleAttr3</span></li><li>  }, {</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">2</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">2</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">fontStyleAttr2</span></li><li>  }</li><li>  ]);</li><li>  <span class="hljs-comment">// 创建有多种样式组合对象mutableStyledString2</span></li><li>  <span class="hljs-attr">mutableStyledString2</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">"test hello world"</span>, [{</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">fontStyleAttr1</span></li><li>  }, {</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">DECORATION</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">DecorationStyle</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span> })</li><li>  }, {</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">TEXT_SHADOW</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextShadowStyle</span>({</li><li>      <span class="hljs-attr">radius</span>: <span class="hljs-number">5</span>,</li><li>      <span class="hljs-attr">type</span>: <span class="hljs-title class_">ShadowType</span>.<span class="hljs-property">COLOR</span>,</li><li>      <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Yellow</span>,</li><li>      <span class="hljs-attr">offsetX</span>: <span class="hljs-number">10</span>,</li><li>      <span class="hljs-attr">offsetY</span>: -<span class="hljs-number">10</span></li><li>    })</li><li>  }, {</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">BASELINE_OFFSET</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaselineOffsetStyle</span>(<span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">px</span>(<span class="hljs-number">20</span>))</li><li>  }, {</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">LETTER_SPACING</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">LetterSpacingStyle</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LengthMetrics</span>(<span class="hljs-number">10</span>, <span class="hljs-title class_">LengthUnit</span>.<span class="hljs-property">VP</span>))</li><li>  }, {</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">6</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">BASELINE_OFFSET</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaselineOffsetStyle</span>(<span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">fp</span>(<span class="hljs-number">10</span>))</li><li>  }</li><li>  ]);</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">fontColor1</span>: <span class="hljs-title class_">ResourceColor</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>;</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">TextOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>  <span class="hljs-attr">controller2</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>  <span class="hljs-attr">spanStyle1</span>: <span class="hljs-title class_">SpanStyle</span> = {</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span> })</li><li>  };</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">onPageShow</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller2</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString2</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {</li><li>        <span class="hljs-comment">// 显示配了字体各种样式的属性字符串，Text组件亦配置冲突部分生效属性字符串配置，未冲突区间生效Text组件属性设置值</span></li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fontColor1</span>)</li><li>          .<span class="hljs-title function_">font</span>({ <span class="hljs-attr">size</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">weight</span>: <span class="hljs-number">500</span>, <span class="hljs-attr">style</span>: <span class="hljs-title class_">FontStyle</span>.<span class="hljs-property">Normal</span> })</li><li>        <span class="hljs-comment">// 显示配置了文本阴影、划线、字符间距、基线偏移量的属性字符串，Text组件亦配置生效属性字符串配置</span></li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller2</span> })</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">copyOption</span>(<span class="hljs-title class_">CopyOptions</span>.<span class="hljs-property">InApp</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">decoration</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">Overline</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span> })</li><li>          .<span class="hljs-title function_">textShadow</span>({</li><li>            <span class="hljs-attr">radius</span>: <span class="hljs-number">10</span>,</li><li>            <span class="hljs-attr">type</span>: <span class="hljs-title class_">ShadowType</span>.<span class="hljs-property">COLOR</span>,</li><li>            <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>,</li><li>            <span class="hljs-attr">offsetX</span>: -<span class="hljs-number">10</span>,</li><li>            <span class="hljs-attr">offsetY</span>: <span class="hljs-number">10</span></li><li>          })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'查询字体样式'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> styles = <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>.<span class="hljs-title function_">getStyles</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>.<span class="hljs-property">length</span>);</li><li>            <span class="hljs-keyword">if</span> (styles.<span class="hljs-property">length</span> !== <span class="hljs-number">0</span>) {</li><li>              <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; styles.<span class="hljs-property">length</span>; i++) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString1 style object start:'</span> + styles[i].<span class="hljs-property">start</span>);</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString1 style object length:'</span> + styles[i].<span class="hljs-property">length</span>);</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString1 style object key:'</span> + styles[i].<span class="hljs-property">styledKey</span>);</li><li>                <span class="hljs-keyword">if</span> (styles[i].<span class="hljs-property">styledKey</span> === <span class="hljs-number">0</span>) {</li><li>                  <span class="hljs-keyword">let</span> fontAttr = styles[i].<span class="hljs-property">styledValue</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">TextStyle</span>;</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString1 fontColor:'</span> + fontAttr.<span class="hljs-property">fontColor</span>);</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString1 fontSize:'</span> + fontAttr.<span class="hljs-property">fontSize</span>);</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString1 fontWeight:'</span> + fontAttr.<span class="hljs-property">fontWeight</span>);</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString1 fontStyle:'</span> + fontAttr.<span class="hljs-property">fontStyle</span>);</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString1 fontFamily:'</span> + fontAttr.<span class="hljs-property">fontFamily</span>);</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString1 superscript:'</span> + fontAttr.<span class="hljs-property">superscript</span>);</li><li>                }</li><li>              }</li><li>            }</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'查询其他文本样式'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> styles = <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString2</span>.<span class="hljs-title function_">getStyles</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString2</span>.<span class="hljs-property">length</span>);</li><li>            <span class="hljs-keyword">if</span> (styles.<span class="hljs-property">length</span> !== <span class="hljs-number">0</span>) {</li><li>              <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; styles.<span class="hljs-property">length</span>; i++) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString2 style object start:'</span> + styles[i].<span class="hljs-property">start</span>);</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString2 style object length:'</span> + styles[i].<span class="hljs-property">length</span>);</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString2 style object key:'</span> + styles[i].<span class="hljs-property">styledKey</span>);</li><li>                <span class="hljs-keyword">if</span> (styles[i].<span class="hljs-property">styledKey</span> === <span class="hljs-number">1</span>) {</li><li>                  <span class="hljs-keyword">let</span> decoAttr = styles[i].<span class="hljs-property">styledValue</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">DecorationStyle</span>;</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString2 decoration type:'</span> + decoAttr.<span class="hljs-property">type</span>);</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString2 decoration color:'</span> + decoAttr.<span class="hljs-property">color</span>);</li><li>                }</li><li>                <span class="hljs-keyword">if</span> (styles[i].<span class="hljs-property">styledKey</span> === <span class="hljs-number">2</span>) {</li><li>                  <span class="hljs-keyword">let</span> baselineAttr = styles[i].<span class="hljs-property">styledValue</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">BaselineOffsetStyle</span>;</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString2 baselineOffset:'</span> + baselineAttr.<span class="hljs-property">baselineOffset</span>);</li><li>                }</li><li>                <span class="hljs-keyword">if</span> (styles[i].<span class="hljs-property">styledKey</span> === <span class="hljs-number">3</span>) {</li><li>                  <span class="hljs-keyword">let</span> letterAttr = styles[i].<span class="hljs-property">styledValue</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">LetterSpacingStyle</span>;</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString2 letterSpacing:'</span> + letterAttr.<span class="hljs-property">letterSpacing</span>);</li><li>                }</li><li>                <span class="hljs-keyword">if</span> (styles[i].<span class="hljs-property">styledKey</span> === <span class="hljs-number">4</span>) {</li><li>                  <span class="hljs-keyword">let</span> textShadowAttr = styles[i].<span class="hljs-property">styledValue</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">TextShadowStyle</span>;</li><li>                  <span class="hljs-keyword">let</span> shadowValues = textShadowAttr.<span class="hljs-property">textShadow</span>;</li><li>                  <span class="hljs-keyword">if</span> (shadowValues.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; shadowValues.<span class="hljs-property">length</span>; j++) {</li><li>                      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString2 textShadow type:'</span> + shadowValues[j].<span class="hljs-property">type</span>);</li><li>                      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString2 textShadow radius:'</span> + shadowValues[j].<span class="hljs-property">radius</span>);</li><li>                      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString2 textShadow color:'</span> + shadowValues[j].<span class="hljs-property">color</span>);</li><li>                      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString2 textShadow offsetX:'</span> + shadowValues[j].<span class="hljs-property">offsetX</span>);</li><li>                      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStyledString2 textShadow offsetY:'</span> + shadowValues[j].<span class="hljs-property">offsetY</span>);</li><li>                    }</li><li>                  }</li><li>                }</li><li>              }</li><li>            }</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'更新mutableStyledString1样式'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>.<span class="hljs-title function_">setStyle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">spanStyle1</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>);</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="260" originwidth="330" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115657.12940272845460622439427948222737:50001231000000:2800:41A504684B0D0D28AC11C2B52C3BE161AD0EF6195F267AAFCD1329D2D77768D6.png" width="330" height="260"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 3720px;">     <h3 id="示例4设置图片">示例4（设置图片）<i class="anchor-icon anchor-icon-link" anchorid="示例4设置图片" tips="复制节点链接"></i></h3>          <p>从API version 12开始，该示例通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#imageattachmentinterface对象说明">ImageAttachment</a>接口实现属性字符串设置图片。</p>     <div _ngcontent-mrt-c106="" class="highlight-div"><div _ngcontent-mrt-c106="" class="highlight-div-header"><div _ngcontent-mrt-c106="" class="highlight-div-header-left"><div _ngcontent-mrt-c106="" class="handle-button expand-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrt-c106="" class="highlight-div-header-right"><div _ngcontent-mrt-c106="" class="handle-button ai-button"></div><div _ngcontent-mrt-c106="" class="handle-button line-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrt-c106="" class="handle-button theme-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrt-c106="" class="handle-button copy-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrt-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LengthMetrics</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct styled_string_set_image_demo {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-attr">imagePixelMap</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">imagePixelMap3</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-attr">mutableStr</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">'123'</span>);</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>  <span class="hljs-attr">mutableStr2</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">'This is set decoration line style to the mutableStr2'</span>, [{</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">15</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">DECORATION</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">DecorationStyle</span>({</li><li>      <span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">Overline</span>,</li><li>      <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>,</li><li>      <span class="hljs-attr">style</span>: <span class="hljs-title class_">TextDecorationStyle</span>.<span class="hljs-property">DOUBLE</span></li><li>    })</li><li>  }]);</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"aboutToAppear initial imagePixelMap"</span>);</li><li>    <span class="hljs-comment">// $r('app.media.startIcon')需要替换为开发者所需的图像资源文件。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span> =</li><li>      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.startIcon'</span>));</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getPixmapFromMedia</span>(<span class="hljs-params">resource: Resource</span>) {</li><li>    <span class="hljs-keyword">let</span> unit8Array = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">resourceManager</span>?.<span class="hljs-title function_">getMediaContent</span>(resource.<span class="hljs-property">id</span>);</li><li>    <span class="hljs-keyword">let</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(unit8Array?.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, unit8Array.<span class="hljs-property">buffer</span>.<span class="hljs-property">byteLength</span>));</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">createPixelMap</span>: image.<span class="hljs-property">PixelMap</span> = <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">createPixelMap</span>({</li><li>      <span class="hljs-attr">desiredPixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span></li><li>    });</li><li>    <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">release</span>();</li><li>    <span class="hljs-keyword">return</span> createPixelMap;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>          .<span class="hljs-title function_">copyOption</span>(<span class="hljs-title class_">CopyOptions</span>.<span class="hljs-property">InApp</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'设置图片'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span> !== <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageAttachment</span>({</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span>,</li><li>                <span class="hljs-attr">size</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">50</span> },</li><li>                <span class="hljs-attr">layoutStyle</span>: { <span class="hljs-attr">borderRadius</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">10</span>) },</li><li>                <span class="hljs-attr">verticalAlign</span>: <span class="hljs-title class_">ImageSpanAlignment</span>.<span class="hljs-property">BASELINE</span>,</li><li>                <span class="hljs-attr">objectFit</span>: <span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span></li><li>              }));</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>);</li><li>            }</li><li>          })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'设置资源类型图片'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span> !== <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageAttachment</span>({</li><li>                <span class="hljs-comment">// $r('app.media.sky')需要替换为开发者所需的图像资源文件。</span></li><li>                <span class="hljs-attr">resourceValue</span>: $r(<span class="hljs-string">'app.media.sky'</span>),</li><li>                <span class="hljs-attr">size</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">50</span> },</li><li>                <span class="hljs-attr">layoutStyle</span>: { <span class="hljs-attr">borderRadius</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">10</span>) },</li><li>                <span class="hljs-attr">verticalAlign</span>: <span class="hljs-title class_">ImageSpanAlignment</span>.<span class="hljs-property">BASELINE</span>,</li><li>                <span class="hljs-attr">objectFit</span>: <span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>,</li><li>                <span class="hljs-attr">syncLoad</span>: <span class="hljs-literal">true</span></li><li>              }));</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>);</li><li>            }</li><li>          })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Image之Get'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> imageArray = <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>.<span class="hljs-title function_">getStyles</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">IMAGE</span>);</li><li>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; imageArray.<span class="hljs-property">length</span>; ++i) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStr start '</span> + imageArray[i].<span class="hljs-property">start</span> + <span class="hljs-string">' length '</span> + imageArray[i].<span class="hljs-property">length</span> + <span class="hljs-string">' type '</span> +</li><li>              imageArray[i].<span class="hljs-property">styledKey</span>);</li><li>              <span class="hljs-keyword">if</span> (imageArray[i].<span class="hljs-property">styledKey</span> === <span class="hljs-number">300</span>) {</li><li>                <span class="hljs-keyword">let</span> attachment = imageArray[i].<span class="hljs-property">styledValue</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ImageAttachment</span>;</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap3</span> = attachment.<span class="hljs-property">value</span>;</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStr value '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(attachment.<span class="hljs-property">value</span>));</li><li>                <span class="hljs-keyword">if</span> (attachment.<span class="hljs-property">size</span> !== <span class="hljs-literal">undefined</span>) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStr size width '</span> + attachment.<span class="hljs-property">size</span>.<span class="hljs-property">width</span> + <span class="hljs-string">' height '</span> + attachment.<span class="hljs-property">size</span>.<span class="hljs-property">height</span>);</li><li>                }</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStr vertical '</span> + attachment.<span class="hljs-property">verticalAlign</span>);</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStr fit '</span> + attachment.<span class="hljs-property">objectFit</span>);</li><li>                <span class="hljs-keyword">if</span> (attachment.<span class="hljs-property">layoutStyle</span> !== <span class="hljs-literal">undefined</span>) {</li><li>                  <span class="hljs-keyword">let</span> radius = attachment.<span class="hljs-property">layoutStyle</span>.<span class="hljs-property">borderRadius</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">BorderRadiuses</span>;</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mutableStr radius '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(radius));</li><li>                }</li><li>              }</li><li>            }</li><li>          })</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap3</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Image之Append'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> str = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StyledString</span>(<span class="hljs-string">'123'</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>.<span class="hljs-title function_">appendStyledString</span>(str);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>);</li><li>          })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Image之Insert 前'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>.<span class="hljs-title function_">insertString</span>(<span class="hljs-number">0</span>, <span class="hljs-string">'123'</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>);</li><li>          })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Image之Insert 后'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>.<span class="hljs-title function_">insertString</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'123'</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>);</li><li>          })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Image之replace'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>.<span class="hljs-title function_">replaceString</span>(<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-string">"789"</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>);</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="480" originwidth="342" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115657.56443102547780211311958982931462:50001231000000:2800:2F865C283F32B4773DE904461CE28859FEBB49F29EFC602B11BA1FF762E64E9C.gif" width="342" height="480"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4235px;">     <h3 id="示例5设置文本行高和段落样式">示例5（设置文本行高和段落样式）<i class="anchor-icon anchor-icon-link" anchorid="示例5设置文本行高和段落样式" tips="复制节点链接"></i></h3>          <p>从API version 12开始，该示例通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#lineheightstyle">LineHeightStyle</a>、<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#paragraphstyle">ParagraphStyle</a>接口实现属性字符串设置文本行高和段落样式。</p>     <div _ngcontent-mrt-c106="" class="highlight-div"><div _ngcontent-mrt-c106="" class="highlight-div-header"><div _ngcontent-mrt-c106="" class="highlight-div-header-left"><div _ngcontent-mrt-c106="" class="handle-button expand-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrt-c106="" class="highlight-div-header-right"><div _ngcontent-mrt-c106="" class="handle-button ai-button"></div><div _ngcontent-mrt-c106="" class="handle-button line-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrt-c106="" class="handle-button theme-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrt-c106="" class="handle-button copy-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrt-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LengthMetrics</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> canvasWidth = <span class="hljs-number">1000</span>;</li><li><span class="hljs-keyword">const</span> canvasHeight = <span class="hljs-number">100</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">LeadingMarginCreator</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">settings</span>: <span class="hljs-title class_">RenderingContextSettings</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RenderingContextSettings</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">offscreenCanvas</span>: <span class="hljs-title class_">OffscreenCanvas</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OffscreenCanvas</span>(canvasWidth, canvasHeight);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">offContext</span>: <span class="hljs-title class_">OffscreenCanvasRenderingContext2D</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">offscreenCanvas</span>.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">"2d"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">settings</span>);</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">LeadingMarginCreator</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LeadingMarginCreator</span>();</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">genSquareMark</span>(<span class="hljs-attr">fontSize</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">PixelMap</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">offContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">offscreenCanvas</span>.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">"2d"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">settings</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clearCanvas</span>();</li><li>    <span class="hljs-keyword">const</span> coordinate = fontSize * (<span class="hljs-number">1</span> - <span class="hljs-number">1</span> / <span class="hljs-number">1.5</span>) / <span class="hljs-number">2</span>;</li><li>    <span class="hljs-keyword">const</span> sideLength = fontSize / <span class="hljs-number">1.5</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">offContext</span>.<span class="hljs-title function_">fillRect</span>(coordinate, coordinate, sideLength, sideLength);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">offContext</span>.<span class="hljs-title function_">getPixelMap</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, fontSize, fontSize);</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">clearCanvas</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">offContext</span>.<span class="hljs-title function_">clearRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, canvasWidth, canvasHeight);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct styled_string_set_lineheight_paragraphstyle_demo {</li><li>  <span class="hljs-keyword">private</span> leadingMarkCreatorInstance = <span class="hljs-title class_">LeadingMarginCreator</span>.<span class="hljs-property">instance</span>;</li><li>  <span class="hljs-attr">leadingMarginPlaceholder1</span>: <span class="hljs-title class_">LeadingMarginPlaceholder</span> = {</li><li>    <span class="hljs-attr">pixelMap</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">leadingMarkCreatorInstance</span>.<span class="hljs-title function_">genSquareMark</span>(<span class="hljs-number">24</span>),</li><li>    <span class="hljs-attr">size</span>: [<span class="hljs-number">15</span>, <span class="hljs-number">15</span>]</li><li>  };</li><li>  <span class="hljs-attr">titleParagraphStyleAttr</span>: <span class="hljs-title class_">ParagraphStyle</span> =</li><li>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ParagraphStyle</span>({ <span class="hljs-attr">textAlign</span>: <span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">paragraphSpacing</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">px</span>(<span class="hljs-number">10</span>) });</li><li>  <span class="hljs-comment">//第一段落首行缩进15vp</span></li><li>  <span class="hljs-attr">paragraphStyleAttr1</span>: <span class="hljs-title class_">ParagraphStyle</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ParagraphStyle</span>({ <span class="hljs-attr">textIndent</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">15</span>) });</li><li>  <span class="hljs-comment">//第二段落缩进15vp且首行有placeholder占位显示</span></li><li>  <span class="hljs-attr">paragraphStyleAttr2</span>: <span class="hljs-title class_">ParagraphStyle</span> =</li><li>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ParagraphStyle</span>({ <span class="hljs-attr">textAlign</span>: <span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Start</span>, <span class="hljs-attr">leadingMargin</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">leadingMarginPlaceholder1</span> });</li><li>  <span class="hljs-comment">//第三段落不设置缩进配置最大行数及超长显示方式</span></li><li>  <span class="hljs-attr">paragraphStyleAttr3</span>: <span class="hljs-title class_">ParagraphStyle</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ParagraphStyle</span>({</li><li>    <span class="hljs-attr">textAlign</span>: <span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">End</span>,</li><li>    <span class="hljs-attr">textVerticalAlign</span>: <span class="hljs-title class_">TextVerticalAlign</span>.<span class="hljs-property">BASELINE</span>,</li><li>    <span class="hljs-attr">maxLines</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">wordBreak</span>: <span class="hljs-title class_">WordBreak</span>.<span class="hljs-property">BREAK_ALL</span>,</li><li>    <span class="hljs-attr">overflow</span>: <span class="hljs-title class_">TextOverflow</span>.<span class="hljs-property">Ellipsis</span></li><li>  });</li><li>  <span class="hljs-comment">//行高样式对象</span></li><li>  <span class="hljs-attr">lineHeightStyle1</span>: <span class="hljs-title class_">LineHeightStyle</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LineHeightStyle</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LengthMetrics</span>(<span class="hljs-number">24</span>));</li><li>  <span class="hljs-comment">//创建含段落样式的对象paragraphStyledString1</span></li><li>  <span class="hljs-attr">paragraphStyledString1</span>: <span class="hljs-title class_">StyledString</span> =</li><li>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">StyledString</span>(<span class="hljs-string">"段落标题\n正文第一段落开始0123456789正文第一段落结束\n正文第二段落开始hello world正文第二段落结束\n正文第三段落ABCDEFGHIJKLMNOPQRSTUVWXYZ。"</span>,</li><li>      [</li><li>        {</li><li>          <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>          <span class="hljs-attr">length</span>: <span class="hljs-number">4</span>,</li><li>          <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">PARAGRAPH_STYLE</span>,</li><li>          <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">titleParagraphStyleAttr</span></li><li>        },</li><li>        {</li><li>          <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>          <span class="hljs-attr">length</span>: <span class="hljs-number">4</span>,</li><li>          <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">LINE_HEIGHT</span>,</li><li>          <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">LineHeightStyle</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LengthMetrics</span>(<span class="hljs-number">50</span>))</li><li>        }, {</li><li>        <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">length</span>: <span class="hljs-number">4</span>,</li><li>        <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>        <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontSize</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">24</span>), <span class="hljs-attr">fontWeight</span>: <span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bolder</span> })</li><li>      },</li><li>        {</li><li>          <span class="hljs-attr">start</span>: <span class="hljs-number">5</span>,</li><li>          <span class="hljs-attr">length</span>: <span class="hljs-number">3</span>,</li><li>          <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">PARAGRAPH_STYLE</span>,</li><li>          <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">paragraphStyleAttr1</span></li><li>        },</li><li>        {</li><li>          <span class="hljs-attr">start</span>: <span class="hljs-number">5</span>,</li><li>          <span class="hljs-attr">length</span>: <span class="hljs-number">20</span>,</li><li>          <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">LINE_HEIGHT</span>,</li><li>          <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">lineHeightStyle1</span></li><li>        },</li><li>        {</li><li>          <span class="hljs-attr">start</span>: <span class="hljs-number">32</span>,</li><li>          <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>          <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">PARAGRAPH_STYLE</span>,</li><li>          <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">paragraphStyleAttr2</span></li><li>        },</li><li>        {</li><li>          <span class="hljs-attr">start</span>: <span class="hljs-number">32</span>,</li><li>          <span class="hljs-attr">length</span>: <span class="hljs-number">20</span>,</li><li>          <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">LINE_HEIGHT</span>,</li><li>          <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">lineHeightStyle1</span></li><li>        },</li><li>        {</li><li>          <span class="hljs-attr">start</span>: <span class="hljs-number">60</span>,</li><li>          <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>          <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">PARAGRAPH_STYLE</span>,</li><li>          <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">paragraphStyleAttr3</span></li><li>        },</li><li>        {</li><li>          <span class="hljs-attr">start</span>: <span class="hljs-number">60</span>,</li><li>          <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>          <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">LINE_HEIGHT</span>,</li><li>          <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">lineHeightStyle1</span></li><li>        }</li><li>      ]);</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">onPageShow</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">paragraphStyledString1</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">240</span>)</li><li>          .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>          .<span class="hljs-title function_">copyOption</span>(<span class="hljs-title class_">CopyOptions</span>.<span class="hljs-property">InApp</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>
</li><li>        <span class="hljs-comment">//查询段落样式</span></li><li>        <span class="hljs-title class_">Text</span>()</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> styles = <span class="hljs-variable language_">this</span>.<span class="hljs-property">paragraphStyledString1</span>.<span class="hljs-title function_">getStyles</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">paragraphStyledString1</span>.<span class="hljs-property">length</span>);</li><li>            <span class="hljs-keyword">if</span> (styles.<span class="hljs-property">length</span> !== <span class="hljs-number">0</span>) {</li><li>              <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; styles.<span class="hljs-property">length</span>; i++) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'paragraphStyledString1 style object start:'</span> + styles[i].<span class="hljs-property">start</span>);</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'paragraphStyledString1 style object length:'</span> + styles[i].<span class="hljs-property">length</span>);</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'paragraphStyledString1 style object key:'</span> + styles[i].<span class="hljs-property">styledKey</span>);</li><li>                <span class="hljs-keyword">if</span> (styles[i].<span class="hljs-property">styledKey</span> === <span class="hljs-number">200</span>) {</li><li>                  <span class="hljs-keyword">let</span> paraAttr = styles[i].<span class="hljs-property">styledValue</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ParagraphStyle</span>;</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'paragraphStyledString1 textAlign:'</span> + paraAttr.<span class="hljs-property">textAlign</span>);</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'paragraphStyledString1 textIndent:'</span> + paraAttr.<span class="hljs-property">textIndent</span>);</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'paragraphStyledString1 maxLines:'</span> + paraAttr.<span class="hljs-property">maxLines</span>);</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'paragraphStyledString1 wordBreak:'</span> + paraAttr.<span class="hljs-property">wordBreak</span>);</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'paragraphStyledString1 leadingMargin:'</span> + paraAttr.<span class="hljs-property">leadingMargin</span>);</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'paragraphStyledString1 overflow:'</span> + paraAttr.<span class="hljs-property">overflow</span>);</li><li>                }</li><li>              }</li><li>            }</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="395" originwidth="568" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115657.28736531649503740950971081852725:50001231000000:2800:EA6364E0C345853E05462B319FCBC52AB5E5A35F2A657415BDC56639142549D2.png" width="568" height="395"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 3844px;">     <h3 id="示例6设置自定义绘制span">示例6（设置自定义绘制Span）<i class="anchor-icon anchor-icon-link" anchorid="示例6设置自定义绘制span" tips="复制节点链接"></i></h3>          <p>从API version 12开始，该示例通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#customspan">CustomSpan</a>接口和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-measureutils#measuretextsize12">measureTextSize</a>实现属性字符串设置自定义绘制Span。</p>     <div _ngcontent-mrt-c106="" class="highlight-div"><div _ngcontent-mrt-c106="" class="highlight-div-header"><div _ngcontent-mrt-c106="" class="highlight-div-header-left"><div _ngcontent-mrt-c106="" class="handle-button expand-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrt-c106="" class="highlight-div-header-right"><div _ngcontent-mrt-c106="" class="handle-button ai-button"></div><div _ngcontent-mrt-c106="" class="handle-button line-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrt-c106="" class="handle-button theme-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrt-c106="" class="handle-button copy-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrt-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { drawing } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LengthMetrics</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">gUIContext</span>: <span class="hljs-title class_">UIContext</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCustomSpan</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">CustomSpan</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">word: <span class="hljs-built_in">string</span>, width: <span class="hljs-built_in">number</span>, height: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">word</span> = word;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> = width;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> = height;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onMeasure</span>(<span class="hljs-attr">measureInfo</span>: <span class="hljs-title class_">CustomSpanMeasureInfo</span>): <span class="hljs-title class_">CustomSpanMetrics</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setPx</span>(gUIContext.<span class="hljs-title function_">vp2px</span>(<span class="hljs-number">2</span>));</li><li>    <span class="hljs-keyword">let</span> textSize = gUIContext.<span class="hljs-title function_">getMeasureUtils</span>().<span class="hljs-title function_">measureTextSize</span>({ <span class="hljs-attr">textContent</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">word</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">wordFontSize</span> })</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> = textSize.<span class="hljs-property">width</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> = textSize.<span class="hljs-property">height</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;</li><li>    <span class="hljs-keyword">return</span> {</li><li>      <span class="hljs-attr">width</span>: gUIContext.<span class="hljs-title function_">px2vp</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>) + (<span class="hljs-variable language_">this</span>.<span class="hljs-property">paddingLeft</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">paddingRight</span>) * <span class="hljs-number">2</span>,</li><li>      <span class="hljs-attr">height</span>: gUIContext.<span class="hljs-title function_">px2vp</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>) + <span class="hljs-variable language_">this</span>.<span class="hljs-property">paddingTop</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">paddingBottom</span></li><li>    };</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onDraw</span>(<span class="hljs-params">context: DrawContext, options: CustomSpanDrawInfo</span>) {</li><li>    <span class="hljs-keyword">let</span> canvas = context.<span class="hljs-property">canvas</span>;</li><li>
</li><li>    <span class="hljs-keyword">const</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li>    brush.<span class="hljs-title function_">setColor</span>({</li><li>      <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>      <span class="hljs-attr">red</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">green</span>: <span class="hljs-number">74</span>,</li><li>      <span class="hljs-attr">blue</span>: <span class="hljs-number">175</span></li><li>    });</li><li>    <span class="hljs-keyword">const</span> font = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Font</span>();</li><li>    font.<span class="hljs-title function_">setSize</span>(gUIContext.<span class="hljs-title function_">vp2px</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">wordFontSize</span>));</li><li>    <span class="hljs-keyword">const</span> textBlob = drawing.<span class="hljs-property">TextBlob</span>.<span class="hljs-title function_">makeFromString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">word</span>, font, drawing.<span class="hljs-property">TextEncoding</span>.<span class="hljs-property">TEXT_ENCODING_UTF8</span>);</li><li>    canvas.<span class="hljs-title function_">attachBrush</span>(brush);</li><li>    canvas.<span class="hljs-title function_">drawRect</span>({</li><li>      <span class="hljs-comment">// 绘制的矩形在Span占位大小的范围里居中</span></li><li>      <span class="hljs-attr">left</span>: options.<span class="hljs-property">x</span> + gUIContext.<span class="hljs-title function_">vp2px</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">paddingLeft</span>),</li><li>      <span class="hljs-attr">right</span>: options.<span class="hljs-property">x</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> + <span class="hljs-number">2</span> * gUIContext.<span class="hljs-title function_">vp2px</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">paddingLeft</span>) + gUIContext.<span class="hljs-title function_">vp2px</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">paddingRight</span>),</li><li>      <span class="hljs-attr">top</span>: options.<span class="hljs-property">lineTop</span>,</li><li>      <span class="hljs-attr">bottom</span>: options.<span class="hljs-property">baseline</span></li><li>    });</li><li>
</li><li>    brush.<span class="hljs-title function_">setColor</span>({</li><li>      <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>      <span class="hljs-attr">red</span>: <span class="hljs-number">23</span>,</li><li>      <span class="hljs-attr">green</span>: <span class="hljs-number">169</span>,</li><li>      <span class="hljs-attr">blue</span>: <span class="hljs-number">141</span></li><li>    });</li><li>    canvas.<span class="hljs-title function_">attachBrush</span>(brush);</li><li>    <span class="hljs-comment">// 文字在绘制的矩形里居中</span></li><li>    canvas.<span class="hljs-title function_">drawTextBlob</span>(textBlob, options.<span class="hljs-property">x</span> + <span class="hljs-number">2</span> * gUIContext.<span class="hljs-title function_">vp2px</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">paddingLeft</span>),</li><li>      options.<span class="hljs-property">baseline</span> - gUIContext.<span class="hljs-title function_">vp2px</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">paddingBottom</span>));</li><li>    canvas.<span class="hljs-title function_">detachBrush</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">setWord</span>(<span class="hljs-params">word: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">word</span> = word;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">setPx</span>(<span class="hljs-params">px: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">paddingLeft</span> = px;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">paddingRight</span> = px;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">paddingTop</span> = px;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">paddingBottom</span> = px;</li><li>  }</li><li>
</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">160</span>;</li><li>  <span class="hljs-attr">word</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"drawing"</span>;</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;</li><li>  <span class="hljs-attr">paddingLeft</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-attr">paddingRight</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-attr">paddingTop</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-attr">paddingBottom</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-attr">wordFontSize</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">20</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct styled_string_set_customspan_demo {</li><li>  <span class="hljs-attr">customSpan1</span>: <span class="hljs-title class_">MyCustomSpan</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCustomSpan</span>(<span class="hljs-string">"Hello"</span>, <span class="hljs-number">80</span>, <span class="hljs-number">10</span>);</li><li>  <span class="hljs-attr">customSpan2</span>: <span class="hljs-title class_">MyCustomSpan</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCustomSpan</span>(<span class="hljs-string">"World"</span>, <span class="hljs-number">80</span>, <span class="hljs-number">40</span>);</li><li>  <span class="hljs-attr">style</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">customSpan1</span>);</li><li>  <span class="hljs-attr">textController</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>  <span class="hljs-attr">isPageShow</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    gUIContext = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">onPageShow</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isPageShow</span>) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isPageShow</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">appendStyledString</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">"文本绘制 示例代码 CustomSpan"</span>, [</li><li>      {</li><li>        <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>        <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>        <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span> })</li><li>      }, {</li><li>      <span class="hljs-attr">start</span>: <span class="hljs-number">5</span>,</li><li>      <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>      <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>      <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>, <span class="hljs-attr">fontStyle</span>: <span class="hljs-title class_">FontStyle</span>.<span class="hljs-property">Italic</span> })</li><li>    }, {</li><li>      <span class="hljs-attr">start</span>: <span class="hljs-number">10</span>,</li><li>      <span class="hljs-attr">length</span>: <span class="hljs-number">500</span>,</li><li>      <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>      <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>, <span class="hljs-attr">fontWeight</span>: <span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span> })</li><li>    }</li><li>    ]));</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">appendStyledString</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">customSpan2</span>));</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">appendStyledString</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StyledString</span>(<span class="hljs-string">"自定义绘制"</span>, [{</li><li>      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>      <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>      <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">px</span>(<span class="hljs-number">50</span>) })</li><li>    }]));</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">textController</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">style</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">textController</span> })</li><li>          .<span class="hljs-title function_">copyOption</span>(<span class="hljs-title class_">CopyOptions</span>.<span class="hljs-property">InApp</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>
</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"invalidate"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">customSpan1</span>.<span class="hljs-title function_">setWord</span>(<span class="hljs-string">"你好"</span>);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">customSpan1</span>.<span class="hljs-title function_">invalidate</span>();</li><li>        })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="148" originwidth="385" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115657.56384412618443479294915028102757:50001231000000:2800:EFBE53E20CDB35FE89D449AD94D99CCCEB8558EB9320BFF4935597321848697F.gif" width="385" height="148"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1394px;">     <h3 id="示例7支持存储自定义扩展信息">示例7（支持存储自定义扩展信息）<i class="anchor-icon anchor-icon-link" anchorid="示例7支持存储自定义扩展信息" tips="复制节点链接"></i></h3>          <p>从API version 12开始，该示例通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#userdataspan">UserDataSpan</a>接口实现属性字符串支持存储自定义扩展信息的功能。</p>     <div _ngcontent-mrt-c106="" class="highlight-div"><div _ngcontent-mrt-c106="" class="highlight-div-header"><div _ngcontent-mrt-c106="" class="highlight-div-header-left"><div _ngcontent-mrt-c106="" class="handle-button expand-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrt-c106="" class="highlight-div-header-right"><div _ngcontent-mrt-c106="" class="handle-button ai-button"></div><div _ngcontent-mrt-c106="" class="handle-button line-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrt-c106="" class="handle-button theme-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrt-c106="" class="handle-button copy-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrt-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyUserDataSpan</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UserDataSpan</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;</li><li>  }</li><li>
</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct styled_string_set_userdataspan_demo {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"world"</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>  <span class="hljs-attr">styleString</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">"hello world"</span>, [{</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">11</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">USER_DATA</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyUserDataSpan</span>(<span class="hljs-string">"hello"</span>, <span class="hljs-number">21</span>)</li><li>  }]);</li><li>
</li><li>  <span class="hljs-title function_">onPageShow</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">styleString</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"get user data"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">let</span> arr = <span class="hljs-variable language_">this</span>.<span class="hljs-property">styleString</span>.<span class="hljs-title function_">getStyles</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">styleString</span>.<span class="hljs-property">length</span>);</li><li>        <span class="hljs-keyword">let</span> userDataSpan = arr[<span class="hljs-number">0</span>].<span class="hljs-property">styledValue</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">MyUserDataSpan</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = userDataSpan.<span class="hljs-property">name</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = userDataSpan.<span class="hljs-property">age</span>;</li><li>      })</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"name:"</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> + <span class="hljs-string">"  age: "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">250</span>).<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">35</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">35</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">35</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="170" originwidth="374" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115657.46584902908636685636535156083414:50001231000000:2800:8E85AD3828DDEF0B87D2AEF815984DCBB52A6765AD9586E86D559864F92D4902.gif" width="374" height="170"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1311px;">     <h3 id="示例8设置超链接">示例8（设置超链接）<i class="anchor-icon anchor-icon-link" anchorid="示例8设置超链接" tips="复制节点链接"></i></h3>          <p>从API version 14开始，该示例通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#urlstyle14">UrlStyle</a>接口，实现了对属性字符串中超链接设置的支持。</p>     <div _ngcontent-mrt-c106="" class="highlight-div"><div _ngcontent-mrt-c106="" class="highlight-div-header"><div _ngcontent-mrt-c106="" class="highlight-div-header-left"><div _ngcontent-mrt-c106="" class="handle-button expand-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrt-c106="" class="highlight-div-header-right"><div _ngcontent-mrt-c106="" class="handle-button ai-button"></div><div _ngcontent-mrt-c106="" class="handle-button line-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrt-c106="" class="handle-button theme-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrt-c106="" class="handle-button copy-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrt-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct styled_string_set_urlstyle_demo {</li><li>  <span class="hljs-attr">urlString</span>: <span class="hljs-title class_">UrlStyle</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UrlStyle</span>(<span class="hljs-string">"https://www.example.com"</span>);</li><li>  <span class="hljs-attr">mutableStyledString</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">"Hello World"</span>, [{</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-string">"Hello"</span>.<span class="hljs-property">length</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">URL</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">urlString</span></li><li>  }]);</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">onPageShow</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> }).<span class="hljs-title function_">key</span>(<span class="hljs-string">'mutableStyledString'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      }</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">250</span>).<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">35</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">35</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">35</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="495" originwidth="357" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115657.11184131891574534323469540893190:50001231000000:2800:DF6CC0F830227A73A8DA8E2AED1BBE963B5FA19EB6BE2A59734F414FDEBF06C5.gif" width="357" height="495"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2212px;">     <h3 id="示例9-给图片设置colorfilter">示例9 (给图片设置colorFilter)<i class="anchor-icon anchor-icon-link" anchorid="示例9-给图片设置colorfilter" tips="复制节点链接"></i></h3>          <p>从API version 15开始，该示例通过给<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#imageattachmentinterface对象说明">ImageAttachment</a>设置colorFilter实现了给图像设置颜色滤镜效果。</p>     <div _ngcontent-mrt-c106="" class="highlight-div"><div _ngcontent-mrt-c106="" class="highlight-div-header"><div _ngcontent-mrt-c106="" class="highlight-div-header-left"><div _ngcontent-mrt-c106="" class="handle-button expand-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrt-c106="" class="highlight-div-header-right"><div _ngcontent-mrt-c106="" class="handle-button ai-button"></div><div _ngcontent-mrt-c106="" class="handle-button line-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrt-c106="" class="handle-button theme-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrt-c106="" class="handle-button copy-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrt-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LengthMetrics</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { drawing, common2D } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct styled_string_set_image_colorfilter_demo {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-attr">mutableStr</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">'origin image:'</span>);</li><li>  <span class="hljs-attr">mutableStr2</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">'with filter:'</span>);</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>  <span class="hljs-attr">controller2</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">color</span>: common2D.<span class="hljs-property">Color</span> = {</li><li>    <span class="hljs-attr">alpha</span>: <span class="hljs-number">125</span>,</li><li>    <span class="hljs-attr">red</span>: <span class="hljs-number">125</span>,</li><li>    <span class="hljs-attr">green</span>: <span class="hljs-number">125</span>,</li><li>    <span class="hljs-attr">blue</span>: <span class="hljs-number">255</span></li><li>  };</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>          .<span class="hljs-title function_">copyOption</span>(<span class="hljs-title class_">CopyOptions</span>.<span class="hljs-property">InApp</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">onAppear</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageAttachment</span>({</li><li>              <span class="hljs-comment">// $r('app.media.startIcon')需要替换为开发者所需的图像资源文件。</span></li><li>              <span class="hljs-attr">resourceValue</span>: $r(<span class="hljs-string">'app.media.startIcon'</span>),</li><li>              <span class="hljs-attr">size</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">50</span> },</li><li>              <span class="hljs-attr">layoutStyle</span>: { <span class="hljs-attr">borderRadius</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">10</span>) },</li><li>              <span class="hljs-attr">verticalAlign</span>: <span class="hljs-title class_">ImageSpanAlignment</span>.<span class="hljs-property">BASELINE</span>,</li><li>              <span class="hljs-attr">objectFit</span>: <span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>,</li><li>              <span class="hljs-attr">syncLoad</span>: <span class="hljs-literal">true</span></li><li>            }));</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>);</li><li>          })</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller2</span> })</li><li>          .<span class="hljs-title function_">copyOption</span>(<span class="hljs-title class_">CopyOptions</span>.<span class="hljs-property">InApp</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'set image color filter'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr2</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageAttachment</span>({</li><li>              <span class="hljs-comment">// $r('app.media.startIcon')需要替换为开发者所需的图像资源文件。</span></li><li>              <span class="hljs-attr">resourceValue</span>: $r(<span class="hljs-string">'app.media.startIcon'</span>),</li><li>              <span class="hljs-attr">size</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">50</span> },</li><li>              <span class="hljs-attr">layoutStyle</span>: { <span class="hljs-attr">borderRadius</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">10</span>) },</li><li>              <span class="hljs-attr">verticalAlign</span>: <span class="hljs-title class_">ImageSpanAlignment</span>.<span class="hljs-property">BASELINE</span>,</li><li>              <span class="hljs-attr">objectFit</span>: <span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>,</li><li>              <span class="hljs-attr">colorFilter</span>: drawing.<span class="hljs-property">ColorFilter</span>.<span class="hljs-title function_">createBlendModeColorFilter</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span>, drawing.<span class="hljs-property">BlendMode</span>.<span class="hljs-property">SRC_IN</span>),</li><li>              <span class="hljs-attr">syncLoad</span>: <span class="hljs-literal">true</span></li><li>            }));</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller2</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr2</span>);</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="508" originwidth="502" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115657.54493870063626126291477524352322:50001231000000:2800:62CE7A5EE3DF3EB039DCB9CB83D8731841B1D2D27A18D5EBF64773A95C65631D.gif" width="502" height="508"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2408px;">     <h3 id="示例10属性字符串的插入删除替换">示例10（属性字符串的插入、删除、替换）<i class="anchor-icon anchor-icon-link" anchorid="示例10属性字符串的插入删除替换" tips="复制节点链接"></i></h3>          <p>从API version 12开始，该示例通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#substyledstring">subStyledString</a>、<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#removestring">removeString</a>、<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#removestyle">removeStyle</a>、<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#clearstyles">clearStyles</a>、<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#replacestyledstring">replaceStyledString</a>、<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#insertstyledstring">insertStyledString</a>接口实现属性字符串的插入、删除、替换。</p>     <div _ngcontent-mrt-c106="" class="highlight-div"><div _ngcontent-mrt-c106="" class="highlight-div-header"><div _ngcontent-mrt-c106="" class="highlight-div-header-left"><div _ngcontent-mrt-c106="" class="handle-button expand-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrt-c106="" class="highlight-div-header-right"><div _ngcontent-mrt-c106="" class="handle-button ai-button"></div><div _ngcontent-mrt-c106="" class="handle-button line-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrt-c106="" class="handle-button theme-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrt-c106="" class="handle-button copy-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrt-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct styled_string_modify_demo {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-attr">mutableStr</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">'123456'</span>, [{</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">2</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span> })</li><li>  }, {</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">3</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">DECORATION</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">DecorationStyle</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span> })</li><li>  }]);</li><li>  <span class="hljs-attr">mutableStr2</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">'with filter:'</span>);</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>  <span class="hljs-attr">controller2</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>          .<span class="hljs-title function_">copyOption</span>(<span class="hljs-title class_">CopyOptions</span>.<span class="hljs-property">InApp</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">onAppear</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>);</li><li>          })</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller2</span> })</li><li>          .<span class="hljs-title function_">copyOption</span>(<span class="hljs-title class_">CopyOptions</span>.<span class="hljs-property">InApp</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'GetSubStyledString (0,3)'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller2</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>.<span class="hljs-title function_">subStyledString</span>(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>));</li><li>        })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'RemoveStyle (0,1,Decoration)'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>.<span class="hljs-title function_">removeStyle</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">DECORATION</span>);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>);</li><li>        })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'RemoveString (5,1)'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>.<span class="hljs-title function_">removeString</span>(<span class="hljs-number">5</span>, <span class="hljs-number">1</span>);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>);</li><li>        })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'ClearStyles'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>.<span class="hljs-title function_">clearStyles</span>();</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>);</li><li>        })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'replaceStyledString'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>.<span class="hljs-title function_">replaceStyledString</span>(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">StyledString</span>(<span class="hljs-string">"abc"</span>, [{</li><li>            <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>            <span class="hljs-attr">length</span>: <span class="hljs-number">3</span>,</li><li>            <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>            <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span> })</li><li>          }]));</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>);</li><li>        })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'insertStyledString'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>.<span class="hljs-title function_">insertStyledString</span>(<span class="hljs-number">4</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">StyledString</span>(<span class="hljs-string">"A"</span>));</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>);</li><li>        })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="536" originwidth="387" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115657.47466584122572800387759274392778:50001231000000:2800:B813E24CA0A9F917EF1D6608B9CB4DCC568C7CCC3CDE43781E1217FAC57885A3.gif" width="387" height="536"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2010px;">     <h3 id="示例11属性字符串的文本描边">示例11（属性字符串的文本描边）<i class="anchor-icon anchor-icon-link" anchorid="示例11属性字符串的文本描边" tips="复制节点链接"></i></h3>          <p>从API version 20开始，该示例通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#textstyle">TextStyle</a>设置strokeWidth和strokeColor接口实现属性字符串的文本描边。</p>     <div _ngcontent-mrt-c106="" class="highlight-div"><div _ngcontent-mrt-c106="" class="highlight-div-header"><div _ngcontent-mrt-c106="" class="highlight-div-header-left"><div _ngcontent-mrt-c106="" class="handle-button expand-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrt-c106="" class="highlight-div-header-right"><div _ngcontent-mrt-c106="" class="handle-button ai-button"></div><div _ngcontent-mrt-c106="" class="handle-button line-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrt-c106="" class="handle-button theme-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrt-c106="" class="handle-button copy-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrt-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LengthMetrics</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct styled_string_strokewidth_strokecolor_demo {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">string1</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"Hello"</span>;</li><li>  <span class="hljs-attr">spanStyle</span>: <span class="hljs-title class_">SpanStyle</span> = {</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({</li><li>      <span class="hljs-attr">fontColor</span>: <span class="hljs-string">'#ff2787d9'</span>,</li><li>      <span class="hljs-attr">strokeWidth</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">px</span>(-<span class="hljs-number">5</span>),</li><li>      <span class="hljs-attr">strokeColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>      <span class="hljs-attr">fontWeight</span>: <span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bolder</span>,</li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">px</span>(<span class="hljs-number">100</span>)</li><li>    })</li><li>  };</li><li>  <span class="hljs-attr">spanStyle1</span>: <span class="hljs-title class_">SpanStyle</span> = {</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({</li><li>      <span class="hljs-attr">fontColor</span>: <span class="hljs-string">'#ff2787d9'</span>,</li><li>      <span class="hljs-attr">strokeWidth</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">px</span>(<span class="hljs-number">5</span>),</li><li>      <span class="hljs-attr">strokeColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>      <span class="hljs-attr">fontWeight</span>: <span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bolder</span>,</li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">px</span>(<span class="hljs-number">100</span>)</li><li>    })</li><li>  };</li><li>
</li><li>  <span class="hljs-attr">mutableStyledString</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">string1</span>, []);</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>
</li><li>  <span class="hljs-attr">mutableStyledString1</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">string1</span>, []);</li><li>  <span class="hljs-attr">controller1</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">onPageShow</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString</span>.<span class="hljs-title function_">setStyle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">spanStyle</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString</span>);</li><li>
</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>.<span class="hljs-title function_">setStyle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">spanStyle1</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller1</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">//实心字</span></li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">50</span> })</li><li>        .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        })</li><li>      <span class="hljs-comment">//空心字</span></li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller1</span> })</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">50</span> })</li><li>        .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="234" originwidth="551" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115657.74762164534075581698161666935022:50001231000000:2800:5394A53C9F8D3843F991B67D200FCB7C16A5B4384C1B9B92F0C5D8AA54BAEA61.png" width="551" height="234"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2001px;">     <h3 id="示例12fromhtml和tohtml互相转换">示例12（fromHtml和toHtml互相转换）<i class="anchor-icon anchor-icon-link" anchorid="示例12fromhtml和tohtml互相转换" tips="复制节点链接"></i></h3>          <p>该示例通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#fromhtml">fromHtml</a>（从API version 12开始）、<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#tohtml14">toHtml</a>（从API version 14开始）接口，将HTML中strong、b<sup>20+</sup>、em<sup>20+</sup>、i<sup>20+</sup>、u<sup>20+</sup>、del<sup>20+</sup>、s<sup>20+</sup>、a<sup>20+</sup>、sub<sup>20+</sup>、sup<sup>20+</sup>标签及其style属性中的background-color转换为属性字符串并转回HTML。</p>     <div _ngcontent-mrt-c106="" class="highlight-div"><div _ngcontent-mrt-c106="" class="highlight-div-header"><div _ngcontent-mrt-c106="" class="highlight-div-header-left"><div _ngcontent-mrt-c106="" class="handle-button expand-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrt-c106="" class="highlight-div-header-right"><div _ngcontent-mrt-c106="" class="handle-button ai-button"></div><div _ngcontent-mrt-c106="" class="handle-button line-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrt-c106="" class="handle-button theme-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrt-c106="" class="handle-button copy-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrt-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct styled_string_html_convert_demo {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">html</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"&lt;p&gt;This is &lt;b&gt;b&lt;/b&gt; &lt;strong&gt;strong&lt;/strong&gt; &lt;em&gt;em&lt;/em&gt; &lt;i&gt;i&lt;/i&gt; &lt;u&gt;u&lt;/u&gt; &lt;del&gt;del&lt;/del&gt; &lt;s&gt;s&lt;/s&gt; &lt;span style = \"foreground-color:blue\"&gt; &lt;a href='https://www.example.com'&gt;www.example&lt;/a&gt; &lt;/span&gt; &lt;span style=\"background-color: red;\"&gt;red span&lt;/span&gt; &lt;sup&gt;superscript&lt;/sup&gt; and &lt;sub&gt;subscript&lt;/sub&gt;&lt;/p&gt;"</span>; <span class="hljs-comment">// 从API version 20开始支持b、em、i、u、del、s、a、sup、sub标签</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">spanString</span>: <span class="hljs-title class_">StyledString</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">resultText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>; <span class="hljs-comment">// 保存结果文本的状态</span></li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 显示转换后的spanString</span></li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> }).<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>
</li><li>      <span class="hljs-comment">// TextArea显示每个步骤的结果</span></li><li>      <span class="hljs-title class_">TextArea</span>({ <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">html</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>
</li><li>      <span class="hljs-comment">// 按钮1:将HTML转换为SpanString</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"将HTML转换为SpanString"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">spanString</span> = <span class="hljs-keyword">await</span> <span class="hljs-title class_">StyledString</span>.<span class="hljs-title function_">fromHtml</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">html</span>);</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">spanString</span>);</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">resultText</span> = <span class="hljs-string">"Converted HTML to SpanString successfully."</span>;</li><li>      }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>
</li><li>      <span class="hljs-comment">// 按钮2:将SpanString转换为HTML</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"将SpanString转换为HTML"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">spanString</span>) {</li><li>          <span class="hljs-comment">// 将spanString转换为HTML并替换当前的HTML状态</span></li><li>          <span class="hljs-keyword">const</span> newHtml = <span class="hljs-title class_">StyledString</span>.<span class="hljs-title function_">toHtml</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">spanString</span>);</li><li>          <span class="hljs-keyword">if</span> (newHtml !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">html</span>) { <span class="hljs-comment">// 通过检查内容是否已经相同来防止重复</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">html</span> = newHtml;</li><li>          }</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">resultText</span> = <span class="hljs-string">"Converted SpanString to HTML successfully."</span>;</li><li>        } <span class="hljs-keyword">else</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">resultText</span> = <span class="hljs-string">"SpanString is undefined."</span>;</li><li>        }</li><li>      }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>
</li><li>      <span class="hljs-comment">// 按钮3:将HTML转换回SpanString</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"将HTML转换回SpanString"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">spanString</span> = <span class="hljs-keyword">await</span> <span class="hljs-title class_">StyledString</span>.<span class="hljs-title function_">fromHtml</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">html</span>);</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">spanString</span>);</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">resultText</span> = <span class="hljs-string">"Converted HTML back to SpanString successfully."</span>;</li><li>      }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>
</li><li>      <span class="hljs-comment">// 重置：重置HTML和SpanString</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"重置"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">html</span> = <span class="hljs-string">"&lt;p&gt;This is &lt;b&gt;b&lt;/b&gt; &lt;strong&gt;strong&lt;/strong&gt; &lt;em&gt;em&lt;/em&gt; &lt;i&gt;i&lt;/i&gt; &lt;u&gt;u&lt;/u&gt; &lt;del&gt;del&lt;/del&gt; &lt;s&gt;s&lt;/s&gt; &lt;span style = \"foreground-color:blue\"&gt; &lt;a href='https://www.example.com'&gt;www.example&lt;/a&gt; &lt;/span&gt; &lt;span style=\"background-color: red;\"&gt;red span&lt;/span&gt; &lt;sup&gt;superscript&lt;/sup&gt; and &lt;sub&gt;subscript&lt;/sub&gt;&lt;/p&gt;"</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">spanString</span> = <span class="hljs-literal">undefined</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StyledString</span>(<span class="hljs-string">""</span>)); <span class="hljs-comment">// 使用空的StyledString实例</span></li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">resultText</span> = <span class="hljs-string">"Reset HTML and SpanString successfully."</span>;</li><li>      }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">20</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="369" originwidth="390" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115657.82293022866168420347876759955694:50001231000000:2800:2644FA71BDDCF87177644B9EE957AF5B58EAECA3AC4F8FD6508D98F8A4F06C62.gif" width="390" height="369"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1870px;">     <h3 id="示例13多装饰线与加粗装饰线">示例13（多装饰线与加粗装饰线）<i class="anchor-icon anchor-icon-link" anchorid="示例13多装饰线与加粗装饰线" tips="复制节点链接"></i></h3>          <p>从API version 20开始，该示例通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#decorationstyle">DecorationStyle</a>中设置enableMultiType、thicknessScale接口，实现多装饰线显示与加粗装饰线的效果。</p>     <div _ngcontent-mrt-c106="" class="highlight-div"><div _ngcontent-mrt-c106="" class="highlight-div-header"><div _ngcontent-mrt-c106="" class="highlight-div-header-left"><div _ngcontent-mrt-c106="" class="handle-button expand-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrt-c106="" class="highlight-div-header-right"><div _ngcontent-mrt-c106="" class="handle-button ai-button"></div><div _ngcontent-mrt-c106="" class="handle-button line-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrt-c106="" class="handle-button theme-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrt-c106="" class="handle-button copy-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrt-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LengthMetrics</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct styled_string_set_decorationstyle_demo {</li><li>  <span class="hljs-meta">@State</span> styledString : <span class="hljs-title class_">StyledString</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span></li><li>  controller : <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span></li><li>  <span class="hljs-attr">thickness</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2.0</span></li><li>  <span class="hljs-attr">mutableStyledString1</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">"1234567890"</span>, [</li><li>    {</li><li>      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">length</span>: <span class="hljs-number">10</span>,</li><li>      <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>      <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">30</span>) })</li><li>    },</li><li>    {</li><li>      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">length</span>: <span class="hljs-number">4</span>,</li><li>      <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">DECORATION</span>,</li><li>      <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">DecorationStyle</span>({<span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span>, <span class="hljs-attr">thicknessScale</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">thickness</span>}, {<span class="hljs-attr">enableMultiType</span>: <span class="hljs-literal">true</span>})</li><li>    },</li><li>    {</li><li>      <span class="hljs-attr">start</span>: <span class="hljs-number">2</span>,</li><li>      <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>      <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">DECORATION</span>,</li><li>      <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">DecorationStyle</span>({<span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">Underline</span>, <span class="hljs-attr">thicknessScale</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">thickness</span>}, {<span class="hljs-attr">enableMultiType</span>: <span class="hljs-literal">true</span>})</li><li>    },</li><li>    {</li><li>      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">length</span>: <span class="hljs-number">4</span>,</li><li>      <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">DECORATION</span>,</li><li>      <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">DecorationStyle</span>({<span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">Overline</span>, <span class="hljs-attr">thicknessScale</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">thickness</span>}, {<span class="hljs-attr">enableMultiType</span>: <span class="hljs-literal">true</span>})</li><li>    },</li><li>    {</li><li>      <span class="hljs-attr">start</span>: <span class="hljs-number">6</span>,</li><li>      <span class="hljs-attr">length</span>: <span class="hljs-number">2</span>,</li><li>      <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">DECORATION</span>,</li><li>      <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">DecorationStyle</span>({<span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span>})</li><li>    },</li><li>    {</li><li>      <span class="hljs-attr">start</span>: <span class="hljs-number">7</span>,</li><li>      <span class="hljs-attr">length</span>: <span class="hljs-number">2</span>,</li><li>      <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">DECORATION</span>,</li><li>      <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">DecorationStyle</span>({<span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>}, {<span class="hljs-attr">enableMultiType</span>: <span class="hljs-literal">true</span>})</li><li>    },</li><li>    {</li><li>      <span class="hljs-attr">start</span>: <span class="hljs-number">8</span>,</li><li>      <span class="hljs-attr">length</span>: <span class="hljs-number">2</span>,</li><li>      <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">DECORATION</span>,</li><li>      <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">DecorationStyle</span>({<span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">Overline</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>}, {<span class="hljs-attr">enableMultiType</span>: <span class="hljs-literal">true</span>})</li><li>    }</li><li>  ]);</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>:<span class="hljs-number">3</span> }) {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">copyOption</span>(<span class="hljs-title class_">CopyOptions</span>.<span class="hljs-property">LocalDevice</span>)</li><li>        .<span class="hljs-title function_">onAppear</span>(<span class="hljs-function">()=&gt;</span>{</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">styledString</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString1</span>)</li><li>        })</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="94" originwidth="312" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115657.77856286303314175306977295604552:50001231000000:2800:8A967FF3C5AD56F0AE12D13BC888728E388F5DB995E27BEEC6A15A57BCF6AF09.png" width="312" height="94"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2857px;">     <h3 id="示例14获取以vp为单位的图片尺寸">示例14（获取以vp为单位的图片尺寸）<i class="anchor-icon anchor-icon-link" anchorid="示例14获取以vp为单位的图片尺寸" tips="复制节点链接"></i></h3>          <p>从API version 21开始，该示例通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#imageattachmentinterface对象说明">ImageAttachmentInterface</a>实现属性字符串设置图片，并且获取该图片以vp为单位的尺寸。</p>     <div _ngcontent-mrt-c106="" class="highlight-div"><div _ngcontent-mrt-c106="" class="highlight-div-header"><div _ngcontent-mrt-c106="" class="highlight-div-header-left"><div _ngcontent-mrt-c106="" class="handle-button expand-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrt-c106="" class="highlight-div-header-right"><div _ngcontent-mrt-c106="" class="handle-button ai-button"></div><div _ngcontent-mrt-c106="" class="handle-button line-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrt-c106="" class="handle-button theme-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrt-c106="" class="handle-button copy-button"><div _ngcontent-mrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrt-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LengthMetrics</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct styled_string_demo4 {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"Image info: \n"</span>;</li><li>  <span class="hljs-attr">imagePixelMap</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">mutableStr</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">""</span>);</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TextController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextController</span>();</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.startIcon'</span>));</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">updateImageInfoStr</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-string">"Image info: \n"</span>;</li><li>    <span class="hljs-keyword">let</span> imageArray = <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>.<span class="hljs-title function_">getStyles</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>.<span class="hljs-property">length</span>, <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">IMAGE</span>);</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; imageArray.<span class="hljs-property">length</span>; ++i) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> += (<span class="hljs-string">' Image '</span> + i + <span class="hljs-string">':\n'</span>);</li><li>      <span class="hljs-keyword">if</span> (imageArray[i].<span class="hljs-property">styledKey</span> === <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">IMAGE</span>) {</li><li>        <span class="hljs-keyword">let</span> attachment = imageArray[i].<span class="hljs-property">styledValue</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ImageAttachment</span>;</li><li>        <span class="hljs-keyword">if</span> (attachment.<span class="hljs-property">size</span> !== <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">w</span>: <span class="hljs-built_in">number</span> = attachment.<span class="hljs-property">size</span>.<span class="hljs-property">width</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">h</span>: <span class="hljs-built_in">number</span> = attachment.<span class="hljs-property">size</span>.<span class="hljs-property">height</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> += (<span class="hljs-string">'    px size  width = '</span> + w.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>) + <span class="hljs-string">' \theight = '</span> + h.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>) + <span class="hljs-string">'\n'</span>);</li><li>        }</li><li>        <span class="hljs-keyword">if</span> (attachment.<span class="hljs-property">sizeInVp</span> !== <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">w</span>: <span class="hljs-built_in">number</span> = attachment.<span class="hljs-property">sizeInVp</span>.<span class="hljs-property">width</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">h</span>: <span class="hljs-built_in">number</span> = attachment.<span class="hljs-property">sizeInVp</span>.<span class="hljs-property">height</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> += (<span class="hljs-string">'    sizeInVp width = '</span> + w.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>) + <span class="hljs-string">' \theight = '</span> + h.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>) + <span class="hljs-string">'\n\n'</span>);</li><li>        }</li><li>      }</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getPixmapFromMedia</span>(<span class="hljs-params">resource: Resource</span>) {</li><li>    <span class="hljs-keyword">let</span> unit8Array =</li><li>      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">resourceManager</span>?.<span class="hljs-title function_">getMediaContent</span>(resource.<span class="hljs-property">id</span>);</li><li>    <span class="hljs-keyword">let</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(unit8Array?.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, unit8Array.<span class="hljs-property">buffer</span>.<span class="hljs-property">byteLength</span>));</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">createPixelMap</span>: image.<span class="hljs-property">PixelMap</span> = <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">createPixelMap</span>({</li><li>      <span class="hljs-attr">desiredPixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span></li><li>    });</li><li>    <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">release</span>();</li><li>    <span class="hljs-keyword">return</span> createPixelMap;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-literal">undefined</span>, { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>          .<span class="hljs-title function_">copyOption</span>(<span class="hljs-title class_">CopyOptions</span>.<span class="hljs-property">InApp</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'设置图片 50vp x 50vp'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span> !== <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>.<span class="hljs-title function_">appendStyledString</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageAttachment</span>({</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span>,</li><li>                <span class="hljs-attr">size</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">50</span> },</li><li>                <span class="hljs-attr">layoutStyle</span>: { <span class="hljs-attr">borderRadius</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">10</span>) },</li><li>                <span class="hljs-attr">verticalAlign</span>: <span class="hljs-title class_">ImageSpanAlignment</span>.<span class="hljs-property">BASELINE</span>,</li><li>                <span class="hljs-attr">objectFit</span>: <span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span></li><li>              })));</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateImageInfoStr</span>();</li><li>            }</li><li>          }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'设置图片 70vp x 70vp'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span> !== <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>.<span class="hljs-title function_">appendStyledString</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageAttachment</span>({</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span>,</li><li>                <span class="hljs-attr">size</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">70</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">70</span> },</li><li>                <span class="hljs-attr">layoutStyle</span>: { <span class="hljs-attr">borderRadius</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">10</span>) },</li><li>                <span class="hljs-attr">verticalAlign</span>: <span class="hljs-title class_">ImageSpanAlignment</span>.<span class="hljs-property">BASELINE</span>,</li><li>                <span class="hljs-attr">objectFit</span>: <span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span></li><li>              })));</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStr</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateImageInfoStr</span>();</li><li>            }</li><li>          }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">"80%"</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">30</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="481" originwidth="448" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115657.14746294797819049055883108620220:50001231000000:2800:E59CF99DABA27C1EAF6FDCAC9941779CDC527652A1A26A452AB7514B8E6AF5B8.gif" width="448" height="481"></span></p>    </div>   </div>   <div></div></div>