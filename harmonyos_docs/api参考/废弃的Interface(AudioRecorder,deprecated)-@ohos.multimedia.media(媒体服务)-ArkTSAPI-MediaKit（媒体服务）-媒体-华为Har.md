<h1 _ngcontent-fpv-c119="" class="doc-title ng-star-inserted" title="废弃的Interface (AudioRecorder, deprecated)"> 废弃的Interface (AudioRecorder, deprecated) </h1>

<div _ngcontent-fpv-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>从API version 6开始支持，从API version 9开始废弃，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder">AVRecorder</a>替代。</p>     </div></div></div>    <p>音频录制管理类，用于录制音频媒体。在调用AudioRecorder的方法前，需要先通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-f#mediacreateaudiorecorderdeprecated">createAudioRecorder()</a> 构建一个AudioRecorder实例。</p>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-fpv-c106="" class="highlight-div"><div _ngcontent-fpv-c106="" class="highlight-div-header"><div _ngcontent-fpv-c106="" class="highlight-div-header-left"><div _ngcontent-fpv-c106="" class="handle-button expand-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fpv-c106="" class="highlight-div-header-right"><div _ngcontent-fpv-c106="" class="handle-button ai-button"></div><div _ngcontent-fpv-c106="" class="handle-button line-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fpv-c106="" class="handle-button theme-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fpv-c106="" class="handle-button copy-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fpv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="preparedeprecated" device-type="phone,2in1,tablet,wearable,tv">prepare<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preparedeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>prepare(config: AudioRecorderConfig): void</p>     <p>录音准备。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6开始支持，从API version 9开始废弃，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9">AVRecorder.prepare</a>替代。</p>      </div></div></div>     <p><strong>需要权限：</strong> ohos.permission.MICROPHONE</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AudioRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#audiorecorderconfigdeprecated">AudioRecorderConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">配置录音的相关参数，包括音频输出URI、编码格式、采样率、声道数、输出格式等。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">permission denied</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fpv-c106="" class="highlight-div"><div _ngcontent-fpv-c106="" class="highlight-div-header"><div _ngcontent-fpv-c106="" class="highlight-div-header-left"><div _ngcontent-fpv-c106="" class="handle-button expand-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fpv-c106="" class="highlight-div-header-right"><div _ngcontent-fpv-c106="" class="handle-button ai-button"></div><div _ngcontent-fpv-c106="" class="handle-button line-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fpv-c106="" class="handle-button theme-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fpv-c106="" class="handle-button copy-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fpv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRecorderConfig</span>: media.<span class="hljs-property">AudioRecorderConfig</span> = {</li><li>  audioEncoder : media.<span class="hljs-property">AudioEncoder</span>.<span class="hljs-property">AAC_LC</span>,</li><li>  audioEncodeBitRate : <span class="hljs-number">64000</span>,</li><li>  audioSampleRate : <span class="hljs-number">44100</span>,</li><li>  numberOfChannels : <span class="hljs-number">2</span>,</li><li>  format : media.<span class="hljs-property">AudioOutputFormat</span>.<span class="hljs-property">AAC_ADTS</span>,</li><li>  uri : <span class="hljs-string">'fd://1'</span>,       <span class="hljs-comment">// 文件需先由调用者创建，并给予适当的权限。</span></li><li>  location : { latitude : <span class="hljs-number">30</span>, longitude : <span class="hljs-number">130</span>},</li><li>};</li><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'prepare'</span>, <span class="hljs-function">() =&gt;</span> {    <span class="hljs-comment">//设置'prepare'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'prepare called'</span>);</li><li>});</li><li>audioRecorder.<span class="hljs-title function_">prepare</span>(audioRecorderConfig);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="startdeprecated" device-type="phone,2in1,tablet,wearable,tv">start<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="startdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>start(): void</p>     <p>开始录制，需在'prepare'事件成功触发后，才能调用start方法。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6开始支持，从API version 9开始废弃，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#start9">AVRecorder.start</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AudioRecorder</p>     <p><strong>示例：</strong></p>     <div _ngcontent-fpv-c106="" class="highlight-div"><div _ngcontent-fpv-c106="" class="highlight-div-header"><div _ngcontent-fpv-c106="" class="highlight-div-header-left"><div _ngcontent-fpv-c106="" class="handle-button expand-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fpv-c106="" class="highlight-div-header-right"><div _ngcontent-fpv-c106="" class="handle-button ai-button"></div><div _ngcontent-fpv-c106="" class="handle-button line-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fpv-c106="" class="handle-button theme-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fpv-c106="" class="handle-button copy-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fpv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'start'</span>, <span class="hljs-function">() =&gt;</span> {    <span class="hljs-comment">//设置'start'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audio recorder start called'</span>);</li><li>});</li><li>audioRecorder.<span class="hljs-title function_">start</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="pausedeprecated" device-type="phone,2in1,tablet,wearable,tv">pause<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pausedeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pause():void</p>     <p>暂停录制，需要在'start'事件成功触发后，才能调用pause方法。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6开始支持，从API version 9开始废弃，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#pause9">AVRecorder.pause</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AudioRecorder</p>     <p><strong>示例：</strong></p>     <div _ngcontent-fpv-c106="" class="highlight-div"><div _ngcontent-fpv-c106="" class="highlight-div-header"><div _ngcontent-fpv-c106="" class="highlight-div-header-left"><div _ngcontent-fpv-c106="" class="handle-button expand-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fpv-c106="" class="highlight-div-header-right"><div _ngcontent-fpv-c106="" class="handle-button ai-button"></div><div _ngcontent-fpv-c106="" class="handle-button line-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fpv-c106="" class="handle-button theme-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fpv-c106="" class="handle-button copy-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fpv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'pause'</span>, <span class="hljs-function">() =&gt;</span> {    <span class="hljs-comment">//设置'pause'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audio recorder pause called'</span>);</li><li>});</li><li>audioRecorder.<span class="hljs-title function_">pause</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="resumedeprecated" device-type="phone,2in1,tablet,wearable,tv">resume<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resumedeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>resume():void</p>     <p>恢复录制，需要在'pause'事件成功触发后，才能调用resume方法。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6开始支持，从API version 9开始废弃，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#resume9">AVRecorder.resume</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AudioRecorder</p>     <p><strong>示例：</strong></p>     <div _ngcontent-fpv-c106="" class="highlight-div"><div _ngcontent-fpv-c106="" class="highlight-div-header"><div _ngcontent-fpv-c106="" class="highlight-div-header-left"><div _ngcontent-fpv-c106="" class="handle-button expand-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fpv-c106="" class="highlight-div-header-right"><div _ngcontent-fpv-c106="" class="handle-button ai-button"></div><div _ngcontent-fpv-c106="" class="handle-button line-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fpv-c106="" class="handle-button theme-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fpv-c106="" class="handle-button copy-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fpv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'resume'</span>, <span class="hljs-function">() =&gt;</span> {    <span class="hljs-comment">//设置'resume'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audio recorder resume called'</span>);</li><li>});</li><li>audioRecorder.<span class="hljs-title function_">resume</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="stopdeprecated" device-type="phone,2in1,tablet,wearable,tv">stop<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stopdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(): void</p>     <p>停止录音。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6开始支持，从API version 9开始废弃，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#stop9">AVRecorder.stop</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AudioRecorder</p>     <p><strong>示例：</strong></p>     <div _ngcontent-fpv-c106="" class="highlight-div"><div _ngcontent-fpv-c106="" class="highlight-div-header"><div _ngcontent-fpv-c106="" class="highlight-div-header-left"><div _ngcontent-fpv-c106="" class="handle-button expand-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fpv-c106="" class="highlight-div-header-right"><div _ngcontent-fpv-c106="" class="handle-button ai-button"></div><div _ngcontent-fpv-c106="" class="handle-button line-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fpv-c106="" class="handle-button theme-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fpv-c106="" class="handle-button copy-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fpv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'stop'</span>, <span class="hljs-function">() =&gt;</span> {    <span class="hljs-comment">//设置'stop'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audio recorder stop called'</span>);</li><li>});</li><li>audioRecorder.<span class="hljs-title function_">stop</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="releasedeprecated" device-type="phone,2in1,tablet,wearable,tv">release<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="releasedeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release(): void</p>     <p>释放录音资源。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6开始支持，从API version 9开始废弃，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#release9">AVRecorder.release</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AudioRecorder</p>     <p><strong>示例：</strong></p>     <div _ngcontent-fpv-c106="" class="highlight-div"><div _ngcontent-fpv-c106="" class="highlight-div-header"><div _ngcontent-fpv-c106="" class="highlight-div-header-left"><div _ngcontent-fpv-c106="" class="handle-button expand-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fpv-c106="" class="highlight-div-header-right"><div _ngcontent-fpv-c106="" class="handle-button ai-button"></div><div _ngcontent-fpv-c106="" class="handle-button line-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fpv-c106="" class="handle-button theme-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fpv-c106="" class="handle-button copy-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fpv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'release'</span>, <span class="hljs-function">() =&gt;</span> {    <span class="hljs-comment">//设置'release'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audio recorder release called'</span>);</li><li>});</li><li>audioRecorder.<span class="hljs-title function_">release</span>();</li><li>audioRecorder = <span class="hljs-literal">undefined</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="resetdeprecated" device-type="phone,2in1,tablet,wearable,tv">reset<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resetdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>reset(): void</p>     <p>重置录音。</p>     <p>进行重置录音之前，需要先调用stop()停止录音。重置录音之后，需要调用prepare()设置录音参数项，才能再次进行录音。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6开始支持，从API version 9开始废弃，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#reset9">AVRecorder.reset</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AudioRecorder</p>     <p><strong>示例：</strong></p>     <div _ngcontent-fpv-c106="" class="highlight-div"><div _ngcontent-fpv-c106="" class="highlight-div-header"><div _ngcontent-fpv-c106="" class="highlight-div-header-left"><div _ngcontent-fpv-c106="" class="handle-button expand-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fpv-c106="" class="highlight-div-header-right"><div _ngcontent-fpv-c106="" class="handle-button ai-button"></div><div _ngcontent-fpv-c106="" class="handle-button line-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fpv-c106="" class="handle-button theme-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fpv-c106="" class="handle-button copy-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fpv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'reset'</span>, <span class="hljs-function">() =&gt;</span> {    <span class="hljs-comment">//设置'reset'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audio recorder reset called'</span>);</li><li>});</li><li>audioRecorder.<span class="hljs-title function_">reset</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="onprepare--start--pause--resume--stop--release--resetdeprecated" device-type="phone,2in1,tablet,wearable,tv">on('prepare' | 'start' | 'pause' | 'resume' | 'stop' | 'release' | 'reset')<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onprepare--start--pause--resume--stop--release--resetdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'prepare' | 'start' | 'pause' | 'resume' | 'stop' | 'release' | 'reset', callback: () =&gt; void): void</p>     <p>开始订阅音频录制事件。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6开始支持，从API version 9开始废弃，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#onstatechange9">AVRecorder.on('stateChange')</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AudioRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>录制事件回调类型，支持的事件包括：'prepare' | 'start' | 'pause' | ’resume‘ | 'stop' | 'release' | 'reset'。</p>          <p>- 'prepare' ：完成prepare调用，音频录制参数设置完成，触发该事件。</p>          <p>- 'start' ：完成start调用，音频录制开始，触发该事件。</p>          <p>- 'pause': 完成pause调用，音频暂停录制，触发该事件。</p>          <p>- 'resume': 完成resume调用，音频恢复录制，触发该事件。</p>          <p>- 'stop' ：完成stop调用，音频停止录制，触发该事件。</p>          <p>- 'release' ：完成release调用，音频释放录制资源，触发该事件。</p>          <p>- 'reset'：完成reset调用，音频重置为初始状态，触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">()=&gt;void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">录制事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fpv-c106="" class="highlight-div"><div _ngcontent-fpv-c106="" class="highlight-div-header"><div _ngcontent-fpv-c106="" class="highlight-div-header-left"><div _ngcontent-fpv-c106="" class="handle-button expand-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fpv-c106="" class="highlight-div-header-right"><div _ngcontent-fpv-c106="" class="handle-button ai-button"></div><div _ngcontent-fpv-c106="" class="handle-button line-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fpv-c106="" class="handle-button theme-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fpv-c106="" class="handle-button copy-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fpv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRecorder</span>: media.<span class="hljs-property">AudioRecorder</span> = media.<span class="hljs-title function_">createAudioRecorder</span>();  <span class="hljs-comment">// 创建一个音频录制实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRecorderConfig</span>: media.<span class="hljs-property">AudioRecorderConfig</span> = {</li><li>  audioEncoder : media.<span class="hljs-property">AudioEncoder</span>.<span class="hljs-property">AAC_LC</span>,</li><li>  audioEncodeBitRate : <span class="hljs-number">64000</span>,</li><li>  audioSampleRate : <span class="hljs-number">44100</span>,</li><li>  numberOfChannels : <span class="hljs-number">2</span>,</li><li>  format : media.<span class="hljs-property">AudioOutputFormat</span>.<span class="hljs-property">AAC_ADTS</span>,</li><li>  uri : <span class="hljs-string">'fd://xx'</span>,  <span class="hljs-comment">// 文件需先由调用者创建，并给予适当的权限。</span></li><li>  location : { latitude : <span class="hljs-number">30</span>, longitude : <span class="hljs-number">130</span>}</li><li>};</li><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {  <span class="hljs-comment">// 设置'error'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`audio error called, error: <span class="hljs-subst">${error}</span>`</span>);</li><li>});</li><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'prepare'</span>, <span class="hljs-function">() =&gt;</span> {  <span class="hljs-comment">// 设置'prepare'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'prepare called'</span>);</li><li>  audioRecorder.<span class="hljs-title function_">start</span>();  <span class="hljs-comment">// 开始录制，并触发'start'事件回调。</span></li><li>});</li><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'start'</span>, <span class="hljs-function">() =&gt;</span> {  <span class="hljs-comment">// 设置'start'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audio recorder start called'</span>);</li><li>});</li><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'pause'</span>, <span class="hljs-function">() =&gt;</span> {  <span class="hljs-comment">// 设置'pause'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audio recorder pause called'</span>);</li><li>});</li><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'resume'</span>, <span class="hljs-function">() =&gt;</span> {  <span class="hljs-comment">// 设置'resume'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audio recorder resume called'</span>);</li><li>});</li><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'stop'</span>, <span class="hljs-function">() =&gt;</span> {  <span class="hljs-comment">// 设置'stop'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audio recorder stop called'</span>);</li><li>});</li><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'release'</span>, <span class="hljs-function">() =&gt;</span> {  <span class="hljs-comment">// 设置'release'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audio recorder release called'</span>);</li><li>});</li><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'reset'</span>, <span class="hljs-function">() =&gt;</span> {  <span class="hljs-comment">// 设置'reset'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audio recorder reset called'</span>);</li><li>});</li><li>audioRecorder.<span class="hljs-title function_">prepare</span>(audioRecorderConfig)  <span class="hljs-comment">// 设置录制参数 ，并触发'prepare'事件回调。</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="onerrordeprecated" device-type="phone,2in1,tablet,wearable,tv">on('error')<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onerrordeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'error', callback: ErrorCallback): void</p>     <p>开始订阅音频录制错误事件，当上报error错误事件后，用户需处理error事件，退出录制操作。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6开始支持，从API version 9开始废弃，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#onerror9">AVRecorder.on('error')</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AudioRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>录制错误事件回调类型'error'。</p>          <p>- 'error'：音频录制过程中发生错误，触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#errorcallback">ErrorCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">录制错误事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fpv-c106="" class="highlight-div"><div _ngcontent-fpv-c106="" class="highlight-div-header"><div _ngcontent-fpv-c106="" class="highlight-div-header-left"><div _ngcontent-fpv-c106="" class="handle-button expand-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fpv-c106="" class="highlight-div-header-right"><div _ngcontent-fpv-c106="" class="handle-button ai-button"></div><div _ngcontent-fpv-c106="" class="handle-button line-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fpv-c106="" class="handle-button theme-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fpv-c106="" class="handle-button copy-button"><div _ngcontent-fpv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fpv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRecorderConfig</span>: media.<span class="hljs-property">AudioRecorderConfig</span> = {</li><li>  audioEncoder : media.<span class="hljs-property">AudioEncoder</span>.<span class="hljs-property">AAC_LC</span>,</li><li>  audioEncodeBitRate : <span class="hljs-number">22050</span>,</li><li>  audioSampleRate : <span class="hljs-number">22050</span>,</li><li>  numberOfChannels : <span class="hljs-number">2</span>,</li><li>  format : media.<span class="hljs-property">AudioOutputFormat</span>.<span class="hljs-property">AAC_ADTS</span>,</li><li>  uri : <span class="hljs-string">'fd://xx'</span>,   <span class="hljs-comment">// 文件需先由调用者创建，并给予适当的权限。</span></li><li>  location : { latitude : <span class="hljs-number">30</span>, longitude : <span class="hljs-number">130</span>}</li><li>};</li><li>audioRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {  <span class="hljs-comment">// 设置'error'事件回调。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`audio error called, error: <span class="hljs-subst">${error}</span>`</span>);</li><li>});</li><li>audioRecorder.<span class="hljs-title function_">prepare</span>(audioRecorderConfig);  <span class="hljs-comment">// prepare不设置参数，触发'error'事件。</span></li></ol></pre></div></div>    </div>   </div>   <div></div></div>