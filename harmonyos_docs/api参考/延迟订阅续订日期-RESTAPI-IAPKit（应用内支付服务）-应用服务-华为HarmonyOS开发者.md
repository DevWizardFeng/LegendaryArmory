<h1 _ngcontent-pxs-c119="" class="doc-title ng-star-inserted" title="延迟订阅续订日期"> 延迟订阅续订日期 </h1>

<div _ngcontent-pxs-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section1950214943118">功能介绍<i class="anchor-icon anchor-icon-link" anchorid="section1950214943118" tips="复制节点链接"></i></h2><p>此接口用于将自动续期订阅商品的下一个续订日期延迟。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>开发者延迟订阅续订日期后，建议使用电子邮件或应用通知用户，让用户知道自己的续订日期已被延迟（发生更改）。</p> </div></div></div> </div> <div class="tiledSection"><h2 id="section1503119153112">场景描述<i class="anchor-icon anchor-icon-link" anchorid="section1503119153112" tips="复制节点链接"></i></h2><p class="msonormalindent">开发者的应用在推出某些优惠活动的时候，例如奖励用户使用商品时长，可以调用该接口将订阅者的下一个续订日期延迟。成功延迟续订日期后：</p> <ul><li class="msonormalindent">IAP服务器会发送延迟成功的通知到开发者的服务器上。</li><li class="msonormalindent">订阅者将继续享受已经付费的服务和内容，但在延迟期内不会被扣款。</li><li class="msonormalindent">系统会更新订阅续订日期，下个续期周期的开始日期为延迟后的过期时间。</li></ul> </div> <div class="tiledSection"><h2 id="section545041115507">使用约束<i class="anchor-icon anchor-icon-link" anchorid="section545041115507" tips="复制节点链接"></i></h2><p>延迟订阅续订日期具有以下限制：</p> <ol><li>不支持对已到期的订阅延迟续订日期，仅能延期正常状态中的订阅。</li><li>不支持对享受免费试用优惠期内的订阅延迟续订日期。</li><li>过去365天内每个用户的同一个订阅最多延迟2次。</li><li>每次调用API的订阅的下一个续订日期最短可延迟1天，最长为90天。</li></ol> </div> <div class="tiledSection"><h2 id="section127414615399">接口原型<i class="anchor-icon anchor-icon-link" anchorid="section127414615399" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table><tbody><tr><th class="firstcol" id="mcps1.3.4.2.1.3.1.1" width="20%"><p>承载协议</p> </th> <td class="cellrowborder" width="80%"><p>HTTPS POST</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.4.2.1.3.2.1" width="20%"><p>接口方向</p> </th> <td class="cellrowborder" width="80%"><p>开发者服务器 -&gt; IAP服务器</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.4.2.1.3.3.1" width="20%"><p>接口URL</p> </th> <td class="cellrowborder" width="80%"><p>{rootUrl}/subscription/harmony/v1/application/subscription/renewal/modify</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>rootUrl：具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-rest-common-statement#section11387155610549">站点信息</a>。</p> </div></div></div> </td> </tr> <tr><th class="firstcol" id="mcps1.3.4.2.1.3.4.1" width="20%"><p>数据格式</p> </th> <td class="cellrowborder" width="80%"><p>请求消息：Content-Type: application/json;charset=UTF-8</p> <p>响应消息：Content-Type: application/json;charset=UTF-8</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1710741285">请求参数<i class="anchor-icon anchor-icon-link" anchorid="section1710741285" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section3873361338" class="firsth2">Request Header<i class="anchor-icon anchor-icon-link" anchorid="section3873361338" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.1" width="20%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.2" width="15%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.3" width="15%"><p>参数类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.4" width="50%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>Content-Type</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="15%"><p>String</p> </td> <td class="cellrowborder" width="50%"><p>取值为：application/json;charset=UTF-8</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>Authorization</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="15%"><p>String</p> </td> <td class="cellrowborder" width="50%"><p>认证信息，使用JWT进行鉴权，具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-jwt-description#section11166125713715">Authorization说明</a>。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section161761819313">Request Body<i class="anchor-icon anchor-icon-link" anchorid="section161761819313" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.1" width="20%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.2" width="15%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.3" width="15%"><p>参数类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.4" width="50%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>purchaseOrderId</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="15%"><p>String</p> </td> <td class="cellrowborder" width="50%"><p>具体一笔订单中对应的购买订单号ID。最大长度256。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>purchaseToken</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="15%"><p>String</p> </td> <td class="cellrowborder" width="50%"><p>商品的购买Token，发起购买和查询订单信息均会返回。最大长度256。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>requestId</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="15%"><p>String</p> </td> <td class="cellrowborder" width="50%"><p>请求Id。开发者自行生成用于跟踪每个订阅续订日期延长请求唯一标识符的字符串。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>modifyReason</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="15%"><p>Integer</p> </td> <td class="cellrowborder" width="50%"><p>订阅日期延迟的原因：</p> <ul><li>0：免费赠送</li><li>1：购买</li><li>2：应用内服务问题或服务中断</li></ul> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>extendByDays</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="15%"><p>Integer</p> </td> <td class="cellrowborder" width="50%"><p>延迟订阅续订日期的天数，至少1天，至多90天。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section86425305253">请求示例<i class="anchor-icon anchor-icon-link" anchorid="section86425305253" tips="复制节点链接"></i></h2><div _ngcontent-pxs-c106="" class="highlight-div"><div _ngcontent-pxs-c106="" class="highlight-div-header"><div _ngcontent-pxs-c106="" class="highlight-div-header-left"><div _ngcontent-pxs-c106="" class="handle-button expand-button"><div _ngcontent-pxs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pxs-c106="" class="highlight-div-header-right"><div _ngcontent-pxs-c106="" class="handle-button ai-button"></div><div _ngcontent-pxs-c106="" class="handle-button line-button"><div _ngcontent-pxs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pxs-c106="" class="handle-button theme-button"><div _ngcontent-pxs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pxs-c106="" class="handle-button copy-button"><div _ngcontent-pxs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pxs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">POST</span> /<span class="hljs-variable">subscription</span>/<span class="hljs-variable">harmony</span>/<span class="hljs-variable">v1</span>/<span class="hljs-variable">application</span>/<span class="hljs-variable">subscription</span>/<span class="hljs-variable">renewal</span>/<span class="hljs-variable">modify</span></li><li><span class="hljs-variable">Content</span>-<span class="hljs-variable">Type</span>: <span class="hljs-title class_">application</span>/<span class="hljs-variable">json</span>;<span class="hljs-variable">charset</span>=<span class="hljs-variable">UTF</span>-<span class="hljs-number">8</span></li><li><span class="hljs-variable">Authorization</span>：<span class="hljs-variable">Bearer</span> ***.***.***</li><li><span class="hljs-variable">Accept</span>: <span class="hljs-title class_">application</span>/<span class="hljs-variable">json</span></li><li>{</li><li>  <span class="hljs-string">"purchaseToken"</span>: <span class="hljs-string">"***.*.***"</span>,</li><li>  <span class="hljs-string">"purchaseOrderId"</span>: <span class="hljs-string">"***.***"</span>,</li><li>  <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"******"</span>,</li><li>  <span class="hljs-string">"modifyReason"</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-string">"extendByDays"</span>: <span class="hljs-number">10</span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section514779154018">响应参数<i class="anchor-icon anchor-icon-link" anchorid="section514779154018" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section13167171415918" class="firsth2">Response Header<i class="anchor-icon anchor-icon-link" anchorid="section13167171415918" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.1" width="20%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.2" width="15%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.3" width="15%"><p>参数类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.4" width="50%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>Content-Type</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="15%"><p>String</p> </td> <td class="cellrowborder" width="50%"><p>取值为：application/json;charset=UTF-8</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section860319341390">Response Body<i class="anchor-icon anchor-icon-link" anchorid="section860319341390" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.2.1.5.1.1" width="20%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.2.1.5.1.2" width="15%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.2.1.5.1.3" width="15%"><p>参数类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.2.1.5.1.4" width="50%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>responseCode</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="15%"><p>String</p> </td> <td class="cellrowborder" width="50%"><p>返回码。</p> <ul><li>0：成功</li><li>其他：失败，具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-server-error-code">错误码</a></li></ul> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>responseMessage</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>String</p> </td> <td class="cellrowborder" width="50%"><p>响应描述。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>newExpirationTime</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="15%"><p>Long</p> </td> <td class="cellrowborder" width="50%"><p>延迟后的订阅有效期时间，标准时间戳，如：1737354632136。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section58178338229">响应示例<i class="anchor-icon anchor-icon-link" anchorid="section58178338229" tips="复制节点链接"></i></h2><div _ngcontent-pxs-c106="" class="highlight-div"><div _ngcontent-pxs-c106="" class="highlight-div-header"><div _ngcontent-pxs-c106="" class="highlight-div-header-left"><div _ngcontent-pxs-c106="" class="handle-button expand-button"><div _ngcontent-pxs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pxs-c106="" class="highlight-div-header-right"><div _ngcontent-pxs-c106="" class="handle-button ai-button"></div><div _ngcontent-pxs-c106="" class="handle-button line-button"><div _ngcontent-pxs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pxs-c106="" class="handle-button theme-button"><div _ngcontent-pxs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pxs-c106="" class="handle-button copy-button"><div _ngcontent-pxs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pxs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.2</span> <span class="hljs-number">200</span> <span class="hljs-variable">OK</span></li><li><span class="hljs-variable">Content</span>-<span class="hljs-variable">Type</span>: <span class="hljs-title class_">application</span>/<span class="hljs-variable">json</span>; <span class="hljs-variable">charset</span>=<span class="hljs-variable">UTF</span>-<span class="hljs-number">8</span></li><li><span class="hljs-variable">Content</span>-<span class="hljs-variable">Length</span>: <span class="hljs-number">68</span></li><li>{</li><li>  <span class="hljs-string">"responseCode"</span>: <span class="hljs-string">"0"</span>,</li><li>  <span class="hljs-string">"newExpirationTime"</span>: <span class="hljs-number">1597679570777</span></li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>