<h1 _ngcontent-jks-c119="" class="doc-title ng-star-inserted" title="意图共享"> 意图共享 </h1>

<div _ngcontent-jks-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section105321034437" device-type="phone,tablet,2in1">功能介绍<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section105321034437" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>应用/元服务通过意图共享接口，把对应意图的相关事件数据共享给Intents Kit，用于事件提醒服务。</p> </div> <div class="tiledSection"><h2 id="section797513402059" device-type="phone,tablet,2in1">场景描述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section797513402059" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p><strong>用户事件</strong><strong>：</strong>由用户主动行为触发，应用/元服务通过意图共享接口，把对应意图的相关用户事件数据共享给Intents Kit。</p> <p><strong>公共事件</strong>：由公共事件触发（如台风天气），华为公共云服务器通过意图共享接口，把对应意图的相关公共事件数据共享给Intents Kit。</p> </div> <div class="tiledSection"><h2 id="section12480351651" device-type="phone,tablet,2in1">接口原型<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12480351651" tips="复制节点链接"></i></h2> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder"><div class="tbBox"><table><tbody><tr><th class="firstcol" id="mcps1.3.3.2.1.3.1.1" width="16.74%"><p>承载协议</p> </th> <td class="cellrowborder" width="83.26%"><p>HTTPS POST</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.3.2.1.3.2.1" width="16.74%"><p>接口方向</p> </th> <td class="cellrowborder" width="83.26%"><p>开发者服务器-&gt;Intents Kit服务器</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.3.2.1.3.3.1" width="16.74%"><p>接口URL</p> </th> <td class="cellrowborder" width="83.26%"><p><span style="color: rgb(51,51,51);">https://hag.cloud.huawei.com/open-ability/v2/service-events/notify</span></p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.3.2.1.3.4.1" width="16.74%"><p>数据格式</p> </th> <td class="cellrowborder" width="83.26%"><p>请求：Content-Type: application/json</p> <p>响应：Content-Type: application/json</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1787460618" device-type="phone,tablet,2in1">请求参数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1787460618" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p><strong>Request Header</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.3.1.5.1.1" width="22.86%"><p><strong>参数</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.5.1.2" width="10.93%"><p><strong>是否必选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.5.1.3" width="12.13%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.5.1.4" width="54.08%"><p><strong>描述</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="22.86%"><p>x-appid</p> </td> <td class="cellrowborder" width="10.93%"><p>是</p> </td> <td class="cellrowborder" width="12.13%"><p>String</p> </td> <td class="cellrowborder" width="54.08%"><p>开发者在华为开发者联盟注册的应用编号，可从应用服务&gt;AppGallery Connect（应用市场）&gt;我的项目&gt;选中应用后查看，x-appid即选项的Client ID。</p> </td> </tr> <tr><td class="cellrowborder" width="22.86%"><p>Authorization</p> </td> <td class="cellrowborder" width="10.93%"><p>是</p> </td> <td class="cellrowborder" width="12.13%"><p>String</p> </td> <td class="cellrowborder" width="54.08%"><p>应用级AccessToken，前面需要加上Bearer，通过调用Oauth2.0的接口获得，接口请求https://oauth-login.cloud.huawei.com/oauth2/v3/token。(详见下文：x-appid和Authorization的获取步骤描述）</p> </td> </tr> <tr><td class="cellrowborder" width="22.86%"><p>Content-Type</p> </td> <td class="cellrowborder" width="10.93%"><p>是</p> </td> <td class="cellrowborder" width="12.13%"><p>String</p> </td> <td class="cellrowborder" width="54.08%"><p>固定值，填application/json。</p> </td> </tr> <tr><td class="cellrowborder" width="22.86%"><p>Accept</p> </td> <td class="cellrowborder" width="10.93%"><p>是</p> </td> <td class="cellrowborder" width="12.13%"><p>String</p> </td> <td class="cellrowborder" width="54.08%"><p>固定值，填application/json。</p> </td> </tr> <tr><td class="cellrowborder" width="22.86%"><p>x-event-type</p> </td> <td class="cellrowborder" width="10.93%"><p>否</p> </td> <td class="cellrowborder" width="12.13%"><p>String</p> </td> <td class="cellrowborder" width="54.08%"><p>事件类型，USER表示用户事件，COMMON表示通用事件。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>Request Body</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.5.1.5.1.1" width="22.86%"><p><strong>参数</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.5.1.2" width="10.93%"><p><strong>是否必选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.5.1.3" width="12.13%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.5.1.4" width="54.08%"><p><strong>描述</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="22.86%"><p>events</p> </td> <td class="cellrowborder" width="10.93%"><p>是</p> </td> <td class="cellrowborder" width="12.13%"><p>List&lt;Object&gt;</p> </td> <td class="cellrowborder" width="54.08%"><p>详细参考请求体样例。</p> </td> </tr> <tr><td class="cellrowborder" width="22.86%"><p>userAgree</p> </td> <td class="cellrowborder" width="10.93%"><p>是</p> </td> <td class="cellrowborder" width="12.13%"><p>Boolean</p> </td> <td class="cellrowborder" width="54.08%"><p>固定值为true，表示同意。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>请求体字段样例</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.7.1.6.1.1" width="22.62226222622262%"><p><strong>成员名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.6.1.2" width="11.02110211021102%"><p><strong>是否必选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.6.1.3" width="12.231223122312231%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.6.1.4" width="32.08320832083207%"><p><strong>描述</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.6.1.5" width="22.04220422042204%"><p><strong>取值范围</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="22.62226222622262%"><p>requestTime</p> </td> <td class="cellrowborder" width="11.02110211021102%"><p>是</p> </td> <td class="cellrowborder" width="12.231223122312231%"><p>String</p> </td> <td class="cellrowborder" width="32.08320832083207%"><p>请求报文的发送时间，格式：yyyyMMddhhmmssSSS（UTC）</p> </td> <td class="cellrowborder" width="22.04220422042204%"><p>正则Pattern：[0-9]{17}</p> </td> </tr> <tr><td class="cellrowborder" width="22.62226222622262%"><p>abilityId</p> </td> <td class="cellrowborder" width="11.02110211021102%"><p>否</p> </td> <td class="cellrowborder" width="12.231223122312231%"><p>String</p> </td> <td class="cellrowborder" width="32.08320832083207%"><p>通知的服务ID</p> </td> <td class="cellrowborder" width="22.04220422042204%"><p>最大长度：128</p> </td> </tr> <tr><td class="cellrowborder" width="22.62226222622262%"><p>sid</p> </td> <td class="cellrowborder" width="11.02110211021102%"><p>否</p> </td> <td class="cellrowborder" width="12.231223122312231%"><p>String</p> </td> <td class="cellrowborder" width="32.08320832083207%"><p>华为分配的第三方账号与华为账号的关联ID（非账号绑定场景）——openId与sid不可同时为空，至少填入一项</p> </td> <td class="cellrowborder" width="22.04220422042204%"><p>最大长度：512</p> </td> </tr> <tr><td class="cellrowborder" width="22.62226222622262%"><p>openId</p> </td> <td class="cellrowborder" width="11.02110211021102%"><p>否</p> </td> <td class="cellrowborder" width="12.231223122312231%"><p>String</p> </td> <td class="cellrowborder" width="32.08320832083207%"><p>华为分配的第三方账号与华为账号的关联ID。事件是用户级事件时必选——openId与sid不可同时为空，至少填入一项</p> </td> <td class="cellrowborder" width="22.04220422042204%"><p>最大长度：512</p> </td> </tr> <tr><td class="cellrowborder" width="22.62226222622262%"><p>overwriteByEventName</p> </td> <td class="cellrowborder" width="11.02110211021102%"><p>否</p> </td> <td class="cellrowborder" width="12.231223122312231%"><p>Boolean</p> </td> <td class="cellrowborder" width="32.08320832083207%"><p>是否根据事件名覆盖本用户同Ability的其他卡片。默认不覆盖</p> </td> <td class="cellrowborder" width="22.04220422042204%"><p>-</p> </td> </tr> <tr><td class="cellrowborder" width="22.62226222622262%"><p>overwriteByAbility</p> </td> <td class="cellrowborder" width="11.02110211021102%"><p>否</p> </td> <td class="cellrowborder" width="12.231223122312231%"><p>Boolean</p> </td> <td class="cellrowborder" width="32.08320832083207%"><p>是否覆盖本用户同Ability的其他卡片。默认为true</p> </td> <td class="cellrowborder" width="22.04220422042204%"><p>-</p> </td> </tr> <tr><td class="cellrowborder" width="22.62226222622262%"><p>content</p> </td> <td class="cellrowborder" width="11.02110211021102%"><p>否</p> </td> <td class="cellrowborder" width="12.231223122312231%"><p>EventContent</p> </td> <td class="cellrowborder" width="32.08320832083207%"><p>事件通知内容数据，用于判断事件有效性及事件内容展示</p> </td> <td class="cellrowborder" width="22.04220422042204%"><p>-</p> </td> </tr>  </tbody></table></div> </div> <p><strong>EventContent</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.9.1.6.1.1" width="22.55225522552255%"><p><strong>成员名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.6.1.2" width="10.82108210821082%"><p><strong>是否必选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.6.1.3" width="12.601260126012601%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.6.1.4" width="31.67316731673167%"><p><strong>描述</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.6.1.5" width="22.352235223522353%"><p><strong>取值范围</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="22.55225522552255%"><p>contentData</p> </td> <td class="cellrowborder" width="10.82108210821082%"><p>是</p> </td> <td class="cellrowborder" width="12.601260126012601%"><p>List&lt;ContentDataItem&gt;</p> </td> <td class="cellrowborder" width="31.67316731673167%"><p>事件内容数据列表</p> </td> <td class="cellrowborder" width="22.352235223522353%"><p>-</p> </td> </tr>  </tbody></table></div> </div> <p><strong>ContentDataItem</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.11.1.6.1.1" width="22.55225522552255%"><p><strong>成员名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.6.1.2" width="10.621062106210621%"><p><strong>是否必选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.6.1.3" width="12.74127412741274%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.6.1.4" width="31.81318131813181%"><p><strong>描述</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.6.1.5" width="22.272227222722275%"><p><strong>取值范围</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="22.55225522552255%"><p>header</p> </td> <td class="cellrowborder" width="10.621062106210621%"><p>是</p> </td> <td class="cellrowborder" width="12.74127412741274%"><p>EventContentHeader</p> </td> <td class="cellrowborder" width="31.81318131813181%"><p>内容定义信息</p> </td> <td class="cellrowborder" width="22.272227222722275%"><p>-</p> </td> </tr> <tr><td class="cellrowborder" width="22.55225522552255%"><p>payload</p> </td> <td class="cellrowborder" width="10.621062106210621%"><p>是</p> </td> <td class="cellrowborder" width="12.74127412741274%"><p><span style="color: rgb(80,80,80);">EventContentPayload</span></p> </td> <td class="cellrowborder" width="31.81318131813181%"><p>内容信息</p> </td> <td class="cellrowborder" width="22.272227222722275%"><p>-</p> </td> </tr>  </tbody></table></div> </div> <p><strong>EventContentHeader</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.13.1.6.1.1" width="22.37%"><p><strong>成员名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.13.1.6.1.2" width="10.459999999999999%"><p><strong>是否必选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.13.1.6.1.3" width="13.18%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.13.1.6.1.4" width="31.65%"><p><strong>描述</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.13.1.6.1.5" width="22.34%"><p><strong>取值范围</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="22.37%"><p>namespace</p> </td> <td class="cellrowborder" width="10.459999999999999%"><p>是</p> </td> <td class="cellrowborder" width="13.18%"><p>String</p> </td> <td class="cellrowborder" width="31.65%"><p>内容定义命名空间</p> </td> <td class="cellrowborder" width="22.34%"><p>取固定值Intent</p> </td> </tr> <tr><td class="cellrowborder" width="22.37%"><p>name</p> </td> <td class="cellrowborder" width="10.459999999999999%"><p>是</p> </td> <td class="cellrowborder" width="13.18%"><p>String</p> </td> <td class="cellrowborder" width="31.65%"><p>意图名称</p> </td> <td class="cellrowborder" width="22.34%"><p>-</p> </td> </tr>  </tbody></table></div> </div> <p><strong>EventContentPayload</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.15.1.6.1.1" width="22.622262226222624%"><p><strong>成员名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.15.1.6.1.2" width="10.341034103410342%"><p><strong>是否必选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.15.1.6.1.3" width="13.121312131213122%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.15.1.6.1.4" width="31.743174317431745%"><p><strong>描述</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.15.1.6.1.5" width="22.172217221722175%"><p><strong>取值范围</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="22.622262226222624%"><p><span style="color: rgb(59,65,81);">identifier</span></p> </td> <td class="cellrowborder" width="10.341034103410342%"><p><span style="color: rgb(59,65,81);">是</span></p> </td> <td class="cellrowborder" width="13.121312131213122%"><p>String</p> </td> <td class="cellrowborder" width="31.743174317431745%"><p>事件的唯一标识</p> </td> <td class="cellrowborder" width="22.172217221722175%"><p>正则Pattern：[a-zA-Z0-9\-]{1,64}</p> </td> </tr> <tr><td class="cellrowborder" width="22.622262226222624%"><p><span style="color: rgb(59,65,81);">intentEntityInfo</span></p> </td> <td class="cellrowborder" width="10.341034103410342%"><p>是</p> </td> <td class="cellrowborder" width="13.121312131213122%"><p><span style="color: rgb(59,65,81);">Object</span></p> </td> <td class="cellrowborder" width="31.743174317431745%"><p>意图实体</p> </td> <td class="cellrowborder" width="22.172217221722175%"><p>意图实体的其他信息，表示为一个或多个键值对。其中键的类型为字符，值的类型为Object，键和值的取值范围因意图名称而异，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/service/intents-schema-0000001901962713" target="_blank">各垂域意图Schema</a>。</p> </td> </tr>  </tbody></table></div> </div> <p>其中，<strong>x-appid</strong>和<strong>Authorization</strong>的获取步骤如下所述：</p> <p><strong>x-appid</strong>是来自于<a href="https://developer.huawei.com/consumer/cn/console/service/AppService" target="_blank">AppGallery Connect网站</a>，可从应用服务&gt;AppGallery Connect（应用市场）&gt;我的项目&gt;选中应用后查看，<strong>x-appid</strong>即Client ID。</p> <p><strong>Authorization</strong>通过调用Oauth2.0的接口获得，需要请求如下接口：</p> <p>https://oauth-login.cloud.huawei.com/oauth2/v3/token。</p> <p><strong>Request Header</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.21.1.5.1.1" width="24.947505249475054%"><p><strong>参数</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.21.1.5.1.2" width="10.238976102389762%"><p><strong>是否必选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.21.1.5.1.3" width="15.17848215178482%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.21.1.5.1.4" width="49.63503649635037%"><p><strong>描述</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="24.947505249475054%"><p>Content-Type</p> </td> <td class="cellrowborder" width="10.238976102389762%"><p>是</p> </td> <td class="cellrowborder" width="15.17848215178482%"><p>String</p> </td> <td class="cellrowborder" width="49.63503649635037%"><p>固定值，填<span style="color: rgb(80,80,80);">application/x-www-form-urlencoded</span>。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>Request Body</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.23.1.5.1.1" width="22.86%"><p><strong>参数</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.23.1.5.1.2" width="10.93%"><p><strong>是否必选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.23.1.5.1.3" width="12.13%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.23.1.5.1.4" width="54.08%"><p><strong>描述</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="22.86%"><p>grant_type</p> </td> <td class="cellrowborder" width="10.93%"><p>是</p> </td> <td class="cellrowborder" width="12.13%"><p>String</p> </td> <td class="cellrowborder" width="54.08%"><p>固定值 client_credentials。</p> </td> </tr> <tr><td class="cellrowborder" width="22.86%"><p>client_id</p> </td> <td class="cellrowborder" width="10.93%"><p>是</p> </td> <td class="cellrowborder" width="12.13%"><p>String</p> </td> <td class="cellrowborder" width="54.08%"><p>从AppGallery Connect网站查询。</p> </td> </tr> <tr><td class="cellrowborder" width="22.86%"><p>client_secret</p> </td> <td class="cellrowborder" width="10.93%"><p>是</p> </td> <td class="cellrowborder" width="12.13%"><p>String</p> </td> <td class="cellrowborder" width="54.08%"><p>从AppGallery Connect网站查询。</p> </td> </tr>  </tbody></table></div> </div> <p>请求体使用表单形式，即x-www-form-urlencoded。</p> </div> <div class="tiledSection"><h2 id="section5476150873" device-type="phone,tablet,2in1">请求示例<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5476150873" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>完整的请求头样例如下：</p> <div _ngcontent-jks-c106="" class="highlight-div"><div _ngcontent-jks-c106="" class="highlight-div-header"><div _ngcontent-jks-c106="" class="highlight-div-header-left"><div _ngcontent-jks-c106="" class="handle-button expand-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jks-c106="" class="highlight-div-header-right"><div _ngcontent-jks-c106="" class="handle-button ai-button"></div><div _ngcontent-jks-c106="" class="handle-button line-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jks-c106="" class="handle-button theme-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jks-c106="" class="handle-button copy-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jks-c106="" class="highlight-scroll-div"><pre class="yaml prettyprint linenums hljs language-yaml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">Content-Type:application/json</span></li><li><span class=""><span class="hljs-string">Authorization:Bearer</span> <span class="hljs-string">DQEBAGf5Mtm9rZl3W1W8sACVmWo0WhGUE3ANb/+KgRHjvmJqacjI3aF++jLEqbZsJ4H472MknoysUMaQrr8FgAHKPCU1YY4EKxUhsA==</span> </span></li><li><span class=""><span class="hljs-attr">x-appid</span></span><span class="hljs-attr">:</span> <span class="hljs-number">100012345</span></li><li><span class="hljs-string">Accept:application/json</span></li><li><span class="hljs-string">x-event-type:USER</span></li></ol></pre></div></div> <div class="p">以ViewRepayment意图为例，完整的请求体样例如下:<div _ngcontent-jks-c106="" class="highlight-div"><div _ngcontent-jks-c106="" class="highlight-div-header"><div _ngcontent-jks-c106="" class="highlight-div-header-left"><div _ngcontent-jks-c106="" class="handle-button expand-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jks-c106="" class="highlight-div-header-right"><div _ngcontent-jks-c106="" class="handle-button ai-button"></div><div _ngcontent-jks-c106="" class="handle-button line-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jks-c106="" class="handle-button theme-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jks-c106="" class="handle-button copy-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jks-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class=""><span class="hljs-attr">"events"</span></span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span></li><li>    <span class=""><span class="hljs-attr">"requestTime"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"20240229143501798"</span></span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// 请求报文的发送时间，格式：yyyyMMddhhmmssSSS（UTC）</span></li><li>    <span class=""><span class="hljs-attr">"abilityId"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"389ccb86317f41c19c2aa8762345069c"</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//通知的服务ID</span></li><li>    <span class=""><span class="hljs-attr">"sid"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"0bda3b89e3f44a44940eaad6b863dcc6"</span></span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">//华为分配的,第三方账号与华为账号的关联ID（非账号绑定场景）。</span></li><li>    <span class=""><span class="hljs-attr">"overwriteByEventName"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-literal"><span class="hljs-keyword">false</span></span></span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">//是否根据事件名覆盖本用户同Ability的其他卡片。默认不覆盖</span></li><li>    <span class=""><span class="hljs-attr">"overwriteByAbility"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-literal"><span class="hljs-keyword">false</span></span></span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">//是否覆盖本用户同Ability的其他卡片。默认为true</span></li><li>    <span class=""><span class="hljs-attr">"content"</span></span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>  <span class="hljs-comment">//事件内容数据列表</span></li><li>      <span class=""><span class="hljs-attr">"contentData"</span></span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>  <span class="hljs-comment">//事件内容数据列表</span></li><li>        <span class=""><span class="hljs-attr">"header"</span></span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>  <span class="hljs-comment">//内容定义信息</span></li><li>          <span class=""><span class="hljs-attr">"namespace"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"Intent"</span></span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">//内容定义命名空间，填写Intent</span></li><li>          <span class=""><span class="hljs-attr">"name"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"ViewRepayment"</span></span>  <span class="hljs-comment">//意图名称</span></li><li>        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>        <span class=""><span class="hljs-attr">"payload"</span></span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>  <span class="hljs-comment">//内容信息</span></li><li>          <span class=""><span class="hljs-attr">"identifier"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"uuid"</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//事件的唯一标识</span></li><li>          <span class=""><span class="hljs-attr">"intentEntityInfo"</span></span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>   <span class="hljs-comment">//意图实体</span></li><li>            <span class=""><span class="hljs-attr">"repaymentType"</span></span><span class="hljs-punctuation">:</span><span class=""><span class="hljs-string">"CreditCard"</span></span><span class="hljs-punctuation">,</span></li><li>            <span class=""><span class="hljs-attr">"statementDate"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"2023-10-01"</span></span><span class="hljs-punctuation">,</span></li><li>            <span class=""><span class="hljs-attr">"repaymentDate"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"2023-10-08"</span></span><span class="hljs-punctuation">,</span></li><li>            <span class=""><span class="hljs-attr">"bankName"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">xxx银行</span></span><span class=""><span class="hljs-string">"</span></span><span class="hljs-punctuation">,</span></li><li>            <span class=""><span class="hljs-attr">"bankNameAbbreviation"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">xx银行</span></span><span class=""><span class="hljs-string">/</span></span><span class=""><span class="hljs-string">xx行</span></span><span class=""><span class="hljs-string">"</span></span><span class="hljs-punctuation">,</span></li><li>            <span class=""><span class="hljs-attr">"availableBeginTime"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"2023-10-08T00:00:00+08:00"</span></span><span class="hljs-punctuation">,</span></li><li>            <span class=""><span class="hljs-attr">"availableEndTime"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"2023-10-08T23:59:59+08:00"</span></span><span class="hljs-punctuation">,</span></li><li>            <span class=""><span class="hljs-attr">"eventStatus"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"Repayment"</span></span><span class="hljs-punctuation">,</span></li><li>            <span class=""><span class="hljs-attr">"eventImage"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"https://www-file.abc.com/-/media/corporate/images/home/logo/abc_logo.png"</span></span><span class="hljs-punctuation">,</span></li><li>            <span class=""><span class="hljs-attr">"cardTailNumber"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"1234"</span></span><span class="hljs-punctuation">,</span></li><li>            <span class=""><span class="hljs-attr">"cardType"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"CreditCard"</span></span></li><li>          <span class="hljs-punctuation">}</span></li><li>        <span class="hljs-punctuation">}</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>  <span class=""><span class="hljs-attr">"userAgree"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-literal"><span class="hljs-keyword">true</span></span></span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div> </div> <p></p> </div> <div class="tiledSection"><h2 id="section12231491075" device-type="phone,tablet,2in1">响应参数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12231491075" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p><strong>Response Header</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.1" width="24.947505249475054%"><p><strong>参数</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.2" width="10.238976102389762%"><p><strong>是否必选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.3" width="15.17848215178482%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.4" width="49.63503649635037%"><p><strong>描述</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="24.947505249475054%"><p>Content-Type</p> </td> <td class="cellrowborder" width="10.238976102389762%"><p>是</p> </td> <td class="cellrowborder" width="15.17848215178482%"><p>String</p> </td> <td class="cellrowborder" width="49.63503649635037%"><p>取值为：application/json;charset=UTF-8。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>Response Body</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.5.1.5.1.1" width="22.86%"><p><strong>参数</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.5.1.2" width="10.93%"><p><strong>是否必选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.5.1.3" width="12.13%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.5.1.4" width="54.08%"><p><strong>描述</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="22.86%"><p>errorEvents</p> </td> <td class="cellrowborder" width="10.93%"><p>否</p> </td> <td class="cellrowborder" width="12.13%"><p>List&lt;ErrorEvent&gt;</p> </td> <td class="cellrowborder" width="54.08%"><p>层级如下，详细结果见样例。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>ErrorEvent</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" width="22.830000000000002%"><p><strong>参数</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" width="10.96%"><p><strong>是否必选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" width="12.13%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" width="54.08%"><p><strong>描述</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="22.830000000000002%"><p>requestId</p> </td> <td class="cellrowborder" width="10.96%"><p>是</p> </td> <td class="cellrowborder" width="12.13%"><p>String</p> </td> <td class="cellrowborder" width="54.08%"><p>对应请求体中的事件identifier。</p> </td> </tr> <tr><td class="cellrowborder" width="22.830000000000002%"><p>resultInfo</p> </td> <td class="cellrowborder" width="10.96%"><p>是</p> </td> <td class="cellrowborder" width="12.13%"><p>ResultInfo</p> </td> <td class="cellrowborder" width="54.08%"><p>错误详细信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>ResultInfo</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.1" width="22.830000000000002%"><p><strong>参数</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.2" width="10.96%"><p><strong>是否必选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.3" width="12.13%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.4" width="54.08%"><p><strong>描述</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="22.830000000000002%"><p>code</p> </td> <td class="cellrowborder" width="10.96%"><p>是</p> </td> <td class="cellrowborder" width="12.13%"><p>String</p> </td> <td class="cellrowborder" width="54.08%"><p>错误类型。</p> </td> </tr> <tr><td class="cellrowborder" width="22.830000000000002%"><p>desc</p> </td> <td class="cellrowborder" width="10.96%"><p>是</p> </td> <td class="cellrowborder" width="12.13%"><p>String</p> </td> <td class="cellrowborder" width="54.08%"><p>错误详细描述。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section24942221475" device-type="phone,tablet,2in1">响应示例<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section24942221475" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><ul><li>调用成功，响应码为200，响应体为空。</li><li>调用失败，响应码为400，以生失效时间无效错误为例，响应体格式如下：<div _ngcontent-jks-c106="" class="highlight-div"><div _ngcontent-jks-c106="" class="highlight-div-header"><div _ngcontent-jks-c106="" class="highlight-div-header-left"><div _ngcontent-jks-c106="" class="handle-button expand-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jks-c106="" class="highlight-div-header-right"><div _ngcontent-jks-c106="" class="handle-button ai-button"></div><div _ngcontent-jks-c106="" class="handle-button line-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jks-c106="" class="handle-button theme-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jks-c106="" class="handle-button copy-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jks-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"errorEvents"</span><span class="hljs-punctuation">:</span>  <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"requestId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"02240416001"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"resultInfo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"invalidParam"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"desc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"expireTime can not before nowTime"</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div> <ul><li>调用出错（鉴权信息无效或过期），响应码为401，响应体为空。</li><li>调用出错（网关验证开发者权限失败），响应码为403，响应体为空。</li><li>调用失败，响应码为404，表示外部推送的sid没有获取到对应的uid，响应体格式如下：<div _ngcontent-jks-c106="" class="highlight-div"><div _ngcontent-jks-c106="" class="highlight-div-header"><div _ngcontent-jks-c106="" class="highlight-div-header-left"><div _ngcontent-jks-c106="" class="handle-button expand-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jks-c106="" class="highlight-div-header-right"><div _ngcontent-jks-c106="" class="handle-button ai-button"></div><div _ngcontent-jks-c106="" class="handle-button line-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jks-c106="" class="handle-button theme-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jks-c106="" class="handle-button copy-button"><div _ngcontent-jks-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jks-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"errorEvents"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"requestId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"02240416001"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"resultInfo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"userNotFound"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"desc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"User is not found"</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div> </li></ul> </li></ul> </div> </div> <div></div></div>