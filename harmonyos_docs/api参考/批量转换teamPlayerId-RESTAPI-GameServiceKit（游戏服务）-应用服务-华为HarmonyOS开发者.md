<h1 _ngcontent-uhb-c119="" class="doc-title ng-star-inserted" title="批量转换teamPlayerId"> 批量转换teamPlayerId </h1>

<div _ngcontent-uhb-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section16996113919586">功能介绍<i class="anchor-icon anchor-icon-link" anchorid="section16996113919586" tips="复制节点链接"></i></h2><p>华为开发者联盟上的游戏从一个账号转移到另一个账号进行维护，该游戏资产归属于转入方。</p> <p>转出方/转入方可以调用此接口，向华为服务器批量提交转让前游戏关联的玩家标识teamPlayerId等信息，批量获取游戏转让后对应的teamPlayerId等信息。</p> </div> <div class="tiledSection"><h2 id="section4899550145813">接口约束<i class="anchor-icon anchor-icon-link" anchorid="section4899550145813" tips="复制节点链接"></i></h2><ul><li>调用此接口前，请确保转出方/转入方已完成<a href="https://developer.huawei.com/consumer/cn/doc/app/game-center-transferring-0000001194325290" target="_blank">游戏转移</a>，否则均将无权转换teamPlayerId。</li><li>单次接口请求最多可以获取1000条teamPlayerId数据。</li><li>请勿频繁调用此接口，调用的时间间隔请控制在3秒以上。</li></ul> </div> <div class="tiledSection"><h2 id="section6932219103913">接口原型<i class="anchor-icon anchor-icon-link" anchorid="section6932219103913" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table><tbody><tr><th class="firstcol" id="mcps1.3.3.2.1.3.1.1" width="16.74%"><p>承载协议</p> </th> <td class="cellrowborder" width="83.26%"><p>HTTPS POST</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.3.2.1.3.2.1" width="16.74%"><p>接口方向</p> </th> <td class="cellrowborder" width="83.26%"><p>开发者服务器 -&gt; 华为服务器</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.3.2.1.3.3.1" width="16.74%"><p>接口URL</p> </th> <td class="cellrowborder" width="83.26%"><p>中国站点：https://connect-api.cloud.huawei.com/api/jas/open/players/player-accounts/team-player/convert</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>调用<a href="https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-References/agcapi-obtain_token-0000001158365043" target="_blank">获取Token</a>接口时使用的域名需与本接口域名保持一致，例如本接口使用“connect-api.cloud.huawei.com”，则调用<a href="https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-References/agcapi-obtain_token-0000001158365043" target="_blank">获取Token</a>接口需使用“https://connect-api.cloud.huawei.com/api/jas/open/players/player-accounts/team-player/convert”。</p> </div></div></div> </td> </tr> <tr><th class="firstcol" id="mcps1.3.3.2.1.3.4.1" width="16.74%"><p>数据格式</p> </th> <td class="cellrowborder" width="83.26%"><p>请求：Content-Type: application/json</p> <p>响应：Content-Type: application/json</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section50251566">请求参数<i class="anchor-icon anchor-icon-link" anchorid="section50251566" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section7529143714449" class="firsth2">Header<i class="anchor-icon anchor-icon-link" anchorid="section7529143714449" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.2.1.5.1.1" width="20%"><p>参数名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.5.1.2" width="20%"><p>必选(M)/可选(O)</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.5.1.3" width="20%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.5.1.4" width="40%"><p>参数说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>client_id</p> </td> <td class="cellrowborder" width="20%"><p>M</p> </td> <td class="cellrowborder" width="20%"><p>String</p> </td> <td class="cellrowborder" width="40%"><p>用于鉴权的客户端ID，获取方法参考<a href="https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-Guides/agcapi-getstarted-0000001111845114#section103mcpsimp" target="_blank">创建API客户端</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>Authorization</p> </td> <td class="cellrowborder" width="20%"><p>M</p> </td> <td class="cellrowborder" width="20%"><p>String</p> </td> <td class="cellrowborder" width="40%"><p>认证信息，格式为“Authorization: Bearer ${access_token}”。access_token为<a href="https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-References/agcapi-obtain_token-0000001158365043" target="_blank">获取Token</a>中获取的access_token。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>appId</p> </td> <td class="cellrowborder" width="20%"><p>M</p> </td> <td class="cellrowborder" width="20%"><p>String</p> </td> <td class="cellrowborder" width="40%"><p>游戏APP ID，获取方法参见<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-view-app-info-0000002282674569" target="_blank">查看应用信息</a>。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section13576204051611">Body<i class="anchor-icon anchor-icon-link" anchorid="section13576204051611" tips="复制节点链接"></i></h3><p>请求Body中使用JSON格式携带更相关信息，参数如下表所示。</p> </div>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.1.5.1.1" width="20%"><p>参数名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.1.5.1.2" width="20%"><p>必选(M)/可选(O)</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.1.5.1.3" width="20%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.1.5.1.4" width="40%"><p>参数说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>srcCpId</p> </td> <td class="cellrowborder" width="20%"><p>M</p> </td> <td class="cellrowborder" width="20%"><p>Long</p> </td> <td class="cellrowborder" width="40%"><p>游戏转出方的开发者Developer ID，获取方法参见<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-view-app-info-0000002282674569" target="_blank">查看应用信息</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>dstCpId</p> </td> <td class="cellrowborder" width="20%"><p>M</p> </td> <td class="cellrowborder" width="20%"><p>Long</p> </td> <td class="cellrowborder" width="40%"><p>游戏转入方的开发者Developer ID，获取方法参见<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-view-app-info-0000002282674569" target="_blank">查看应用信息</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>teamPlayerIds</p> </td> <td class="cellrowborder" width="20%"><p>M</p> </td> <td class="cellrowborder" width="20%"><p>List&lt;String&gt;</p> </td> <td class="cellrowborder" width="40%"><p>转让前，游戏的玩家标识teamPlayerId列表，列表数量至少1条，至多不超过1000条。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>建议开发者做好去重工作，确保teamPlayerId列表不要有重复的信息。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> <div class="tiledSection"><h2 id="section174799228118">请求示例<i class="anchor-icon anchor-icon-link" anchorid="section174799228118" tips="复制节点链接"></i></h2><div _ngcontent-uhb-c106="" class="highlight-div"><div _ngcontent-uhb-c106="" class="highlight-div-header"><div _ngcontent-uhb-c106="" class="highlight-div-header-left"><div _ngcontent-uhb-c106="" class="handle-button expand-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uhb-c106="" class="highlight-div-header-right"><div _ngcontent-uhb-c106="" class="handle-button ai-button"></div><div _ngcontent-uhb-c106="" class="handle-button line-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uhb-c106="" class="handle-button theme-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uhb-c106="" class="handle-button copy-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uhb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">POST</span>  <span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.1</span></li><li><span class="hljs-variable">Host</span>: <span class="hljs-title class_">connect</span>-<span class="hljs-title class_">api</span>.<span class="hljs-title class_">cloud</span>.<span class="hljs-title class_">huawei</span>.<span class="hljs-title class_">com</span></li><li><span class="hljs-variable">Content</span>-<span class="hljs-variable">Type</span>: <span class="hljs-title class_">application</span>/<span class="hljs-variable">json</span></li><li><span class="hljs-variable">client_id</span>: <span class="hljs-number">41</span>******<span class="hljs-number">7168</span></li><li><span class="hljs-variable">appId</span>: <span class="hljs-string">"*****"</span></li><li><span class="hljs-variable">Authorization</span>: <span class="hljs-title class_">Bearer</span> ******</li><li>{</li><li>    <span class="hljs-string">"srcCpId"</span>: <span class="hljs-number">4130</span>****<span class="hljs-number">71055</span>,</li><li>    <span class="hljs-string">"dstCpId"</span>: <span class="hljs-number">4008</span>****<span class="hljs-number">74585</span>,</li><li>    <span class="hljs-string">"teamPlayerIds"</span>:[</li><li>        <span class="hljs-string">"**********"</span>,</li><li>        <span class="hljs-string">"**********"</span>,</li><li>        <span class="hljs-string">"**********"</span></li><li>    ]</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section49610918">响应参数<i class="anchor-icon anchor-icon-link" anchorid="section49610918" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.1" width="13.569999999999999%"><p>参数名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.2" width="14.08%"><p>必选(M)/可选(O)</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.3" width="14.09%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.4" width="58.26%"><p>参数说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.569999999999999%"><p>ret</p> </td> <td class="cellrowborder" width="14.08%"><p>M</p> </td> <td class="cellrowborder" width="14.09%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-teamplayerid#zh-cn_topic_0000002273612857_zh-cn_topic_0000002195007290_li266952144619">JosRet</a></p> </td> <td class="cellrowborder" width="58.26%"><p>包含返回码及描述信息的JSON字符串，格式为{"code":<em>retcode</em>, "msg": "<em>description</em>"}，retcode为返回码，description为返回码描述信息。</p> </td> </tr> <tr><td class="cellrowborder" width="13.569999999999999%"><p>data</p> </td> <td class="cellrowborder" width="14.08%"><p>M</p> </td> <td class="cellrowborder" width="14.09%"><p><span style="color: rgb(80,80,80);">List</span><span style="color: rgb(80,80,80);">&lt;</span><a href="/consumer/cn/doc/harmonyos-references/gameservice-teamplayerid#zh-cn_topic_0000002273612857_zh-cn_topic_0000002195007290_li14201142814463">ConvertTeamPlayerIdItem</a>&gt;</p> </td> <td class="cellrowborder" width="58.26%"><p>单次接口请求任务的查询结果。</p> </td> </tr>  </tbody></table></div> </div> <ul><li id="zh-cn_topic_0000002273612857_zh-cn_topic_0000002195007290_li266952144619">JosRet <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.3.1.1.1.5.1.1" width="13.4%"><p>参数名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.3.1.1.1.5.1.2" width="14.069999999999999%"><p>必选(M)/可选(O)</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.3.1.1.1.5.1.3" width="13.950000000000001%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.3.1.1.1.5.1.4" width="58.58%"><p>参数说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.4%"><p>code</p> </td> <td class="cellrowborder" width="14.069999999999999%"><p>M</p> </td> <td class="cellrowborder" width="13.950000000000001%"><p>int</p> </td> <td class="cellrowborder" width="58.58%"><p>单次接口请求任务的结果返回码：</p> <ul><li>0：请求成功。</li><li>-1：请求失败。</li><li>3002：鉴权错误。</li></ul> </td> </tr> <tr><td class="cellrowborder" width="13.4%"><p>msg</p> </td> <td class="cellrowborder" width="14.069999999999999%"><p>O</p> </td> <td class="cellrowborder" width="13.950000000000001%"><p>String</p> </td> <td class="cellrowborder" width="58.58%"><p>失败时的描述信息。</p> </td> </tr>  </tbody></table></div> </div> </li><li id="zh-cn_topic_0000002273612857_zh-cn_topic_0000002195007290_li14201142814463"><span style="color: rgb(80,80,80);">ConvertTeamPlayerIdItem</span> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.3.2.2.1.5.1.1" width="20%"><p>参数名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.3.2.2.1.5.1.2" width="20%"><p>必选(M)/可选(O)</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.3.2.2.1.5.1.3" width="20%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.3.2.2.1.5.1.4" width="40%"><p>参数说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>srcCpId</p> </td> <td class="cellrowborder" width="20%"><p>M</p> </td> <td class="cellrowborder" width="20%"><p>Long</p> </td> <td class="cellrowborder" width="40%"><p>游戏转出方的开发者Developer ID。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>srcTeamPlayerId</p> </td> <td class="cellrowborder" width="20%"><p>M</p> </td> <td class="cellrowborder" width="20%"><p>String</p> </td> <td class="cellrowborder" width="40%"><p>转让前，游戏的玩家标识teamPlayerId。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>dstCpId</p> </td> <td class="cellrowborder" width="20%"><p>M</p> </td> <td class="cellrowborder" width="20%"><p>Long</p> </td> <td class="cellrowborder" width="40%"><p>游戏转入方的开发者Developer ID。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>dstTeamPlayerId</p> </td> <td class="cellrowborder" width="20%"><p>M</p> </td> <td class="cellrowborder" width="20%"><p>String</p> </td> <td class="cellrowborder" width="40%"><p>转让后，游戏的玩家标识teamPlayerId。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>errCode</p> </td> <td class="cellrowborder" width="20%"><p>M</p> </td> <td class="cellrowborder" width="20%"><p>int</p> </td> <td class="cellrowborder" width="40%"><p>查询单个teamplayerId的结果返回码：</p> <ul><li>0：成功。</li><li>-1：失败。</li></ul> </td> </tr>  </tbody></table></div> </div> </li></ul> </div> <div class="tiledSection"><h2 id="section102323371127">响应示例<i class="anchor-icon anchor-icon-link" anchorid="section102323371127" tips="复制节点链接"></i></h2><div _ngcontent-uhb-c106="" class="highlight-div"><div _ngcontent-uhb-c106="" class="highlight-div-header"><div _ngcontent-uhb-c106="" class="highlight-div-header-left"><div _ngcontent-uhb-c106="" class="handle-button expand-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uhb-c106="" class="highlight-div-header-right"><div _ngcontent-uhb-c106="" class="handle-button ai-button"></div><div _ngcontent-uhb-c106="" class="handle-button line-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uhb-c106="" class="handle-button theme-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uhb-c106="" class="handle-button copy-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uhb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>{</li><li>    <span class="hljs-string">"ret"</span>: {</li><li>         <span class="hljs-string">"code"</span>: <span class=""><span class="hljs-number">0</span></span>,     </li><li>         <span class="hljs-string">"msg"</span>: <span class="hljs-string">"string"</span></li><li>    },</li><li>    <span class="hljs-string">"data"</span>: [</li><li>        {</li><li>            <span class="hljs-string">"srcCpId"</span>: <span class="hljs-number">4330</span>****<span class="hljs-number">71055</span>,       </li><li>            <span class="hljs-string">"srcTeamPlayerId"</span>: <span class="hljs-string">"******"</span>,       </li><li>            <span class="hljs-string">"dstCpId"</span>: <span class="hljs-number">4130</span>****<span class="hljs-number">71055</span>,       </li><li>            <span class="hljs-string">"dstTeamPlayerId"</span>: <span class="hljs-string">"*****"</span>,       </li><li>            <span class="hljs-string">"errCode"</span>: <span class=""><span class="hljs-number">0</span></span></li><li>        }</li><li>    ]</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section182029402541">调用示例<i class="anchor-icon anchor-icon-link" anchorid="section182029402541" tips="复制节点链接"></i></h2><div class="p">    <div class="switchPre"><div class="preTab preTab-cn"><div class="activePre" switchpre-data="0" switchpre-lang="Java">Java</div><div switchpre-data="1" switchpre-lang="C#">C#</div><div switchpre-data="2" switchpre-lang="PHP">PHP</div><div switchpre-data="3" switchpre-lang="Python">Python</div></div><div class="switchPreBox"><div class="prebox"><div _ngcontent-uhb-c106="" class="highlight-div"><div _ngcontent-uhb-c106="" class="highlight-div-header"><div _ngcontent-uhb-c106="" class="highlight-div-header-left"><div _ngcontent-uhb-c106="" class="handle-button expand-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uhb-c106="" class="highlight-div-header-right"><div _ngcontent-uhb-c106="" class="handle-button ai-button"></div><div _ngcontent-uhb-c106="" class="handle-button line-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uhb-c106="" class="handle-button theme-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uhb-c106="" class="handle-button copy-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uhb-c106="" class="highlight-scroll-div"><pre class="java prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 批量转换teamPlayerId</span></li><li><span class="hljs-comment"> *</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> domain 请根据您的服务器部署地就近选择对应站点的URL，与获取token时使用的domain保持一致</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> client_id 用于鉴权的客户端ID</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> token post认证请求的token</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> teamPlayerIds 需要查询的teamPlayerId列表</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> appId 游戏appId</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchGetOpenIds</span><span class="hljs-params">(String domain, String client_id, String token, List&lt;String&gt; teamPlayerIds, String appId)</span> {</li><li>        <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 接口URL，domain请根据您的服务器部署地就近选择对应站点的URL且与获取token时使用的domain保持一致</span></li><li>            <span class="hljs-type">HttpPost</span> <span class="hljs-variable">post</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpPost</span>(domain + <span class="hljs-string">"/api/jas/open/players/player-accounts/team-player/convert"</span>);</li><li>            <span class="hljs-comment">// 构造消息头</span></li><li>            post.setHeader(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + token);</li><li>            post.setHeader(<span class="hljs-string">"client_id"</span>, client_id);</li><li>            post.setHeader(<span class="hljs-string">"appId"</span>, appId);</li><li>            <span class="hljs-comment">// 构造消息实体</span></li><li>            <span class="hljs-type">JSONObject</span> <span class="hljs-variable">keyString</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>();</li><li>            keyString.put(<span class="hljs-string">"srcCpId"</span>, srcCpId);</li><li>            keyString.put(<span class="hljs-string">"dstCpId"</span>, dstCpId);</li><li>            keyString.put(<span class="hljs-string">"teamPlayerId"</span>, teamPlayerIds); <span class="hljs-comment">// 原主体的teamPlayerId</span></li><li>            <span class="hljs-type">StringEntity</span> <span class="hljs-variable">entity</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringEntity</span>(keyString.toString(), Charset.forName(<span class="hljs-string">"UTF-8"</span>));</li><li>            entity.setContentEncoding(<span class="hljs-string">"UTF-8"</span>);</li><li>            <span class="hljs-comment">// 发送Json格式的数据请求</span></li><li>            entity.setContentType(<span class="hljs-string">"application/json"</span>);</li><li>            post.setEntity(entity);</li><li>            <span class="hljs-type">CloseableHttpClient</span> <span class="hljs-variable">httpClient</span> <span class="hljs-operator">=</span> HttpClients.createDefault();</li><li>            <span class="hljs-type">HttpResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> httpClient.execute(post);</li><li>            <span class="hljs-type">int</span> <span class="hljs-variable">statusCode</span> <span class="hljs-operator">=</span> response.getStatusLine().getStatusCode();</li><li>            <span class="hljs-keyword">if</span> (statusCode == HttpStatus.SC_OK) {</li><li>                <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span></li><li>                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(response.getEntity().getContent(), Consts.UTF_8));</li><li>                <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> br.readLine();</li><li>                System.out.println(result);</li><li>                <span class="hljs-type">JSONObject</span> <span class="hljs-variable">object</span> <span class="hljs-operator">=</span> JSON.parseObject(result);</li><li>            }</li><li>            post.releaseConnection();</li><li>            httpClient.close();</li><li>        } <span class="hljs-keyword">catch</span> (Exception e) {</li><li>            System.out.println(e.getMessage());</li><li>        }</li><li>}</li></ol></pre></div></div></div><div class="prebox"><div _ngcontent-uhb-c106="" class="highlight-div"><div _ngcontent-uhb-c106="" class="highlight-div-header"><div _ngcontent-uhb-c106="" class="highlight-div-header-left"><div _ngcontent-uhb-c106="" class="handle-button expand-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uhb-c106="" class="highlight-div-header-right"><div _ngcontent-uhb-c106="" class="handle-button ai-button"></div><div _ngcontent-uhb-c106="" class="handle-button line-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uhb-c106="" class="handle-button theme-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uhb-c106="" class="handle-button copy-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uhb-c106="" class="highlight-scroll-div"><pre class="csharp prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 批量转换teamPlayerId</span></li><li><span class="hljs-comment"> *</span></li><li><span class="hljs-comment"> * @param domain 请根据您的服务器部署地就近选择对应站点的URL，与获取token时使用的domain保持一致</span></li><li><span class="hljs-comment"> * @param clientId 用于鉴权的客户端ID</span></li><li><span class="hljs-comment"> * @param token post认证请求的token</span></li><li><span class="hljs-comment"> * @param teamPlayerIds 转让前游戏的玩家标识teamPlayerId列表</span></li><li><span class="hljs-comment"> * @param appId 游戏appId</span></li><li><span class="hljs-comment"> * @Param srcCpId 游戏转出方的开发者Developer ID</span></li><li><span class="hljs-comment"> * @Param dstCpId 游戏转入方的开发者Developer ID</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">convertTeamPlayerId</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> domain, <span class="hljs-built_in">string</span> clientId, <span class="hljs-built_in">string</span> token, List&lt;<span class="hljs-built_in">string</span>&gt; teamPlayerIds, <span class="hljs-built_in">string</span> appId, <span class="hljs-built_in">long</span> srcCpId, <span class="hljs-built_in">long</span> dstCpId</span>)</span></li><li>{</li><li>    <span class="hljs-keyword">try</span></li><li>    {</li><li>        <span class="hljs-comment">// 接口URL，domain请根据您的服务器部署地就近选择对应站点的URL且与获取token时使用的domain保持一致</span></li><li>        <span class="hljs-keyword">var</span> requestUrl = domain + <span class="hljs-string">"/api/jas/open/players/player-accounts/team-player/convert"</span>;</li><li>        HttpWebRequest request = WebRequest.Create(requestUrl) <span class="hljs-keyword">as</span> HttpWebRequest;</li><li>        request.Method = <span class="hljs-string">"post"</span>;</li><li>        request.ContentType = <span class="hljs-string">"application/json"</span>;</li><li>        request.Headers.Add(<span class="hljs-string">"client_id"</span>, clientId);</li><li>        request.Headers.Add(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + token);</li><li>        request.Headers.Add(<span class="hljs-string">"appId"</span>, appId);</li><li>        Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt; dic = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt;</li><li>        {</li><li>            {<span class="hljs-string">"srcCpId"</span>, srcCpId},</li><li>            {<span class="hljs-string">"dstCpId"</span>, dstCpId},</li><li>            {<span class="hljs-string">"teamPlayerIds"</span>, teamPlayerIds}</li><li>        };</li><li>        <span class="hljs-built_in">string</span> sendData = JsonConvert.SerializeObject(dic, Formatting.Indented);</li><li>        Console.WriteLine(sendData);</li><li>        <span class="hljs-built_in">byte</span>[] byteData = Encoding.GetEncoding(<span class="hljs-string">"utf-8"</span>).GetBytes(sendData);</li><li>        request.ContentLength = byteData.Length;</li><li>        Stream postStream = request.GetRequestStream();</li><li>        postStream.Write(byteData, <span class="hljs-number">0</span>, byteData.Length);</li><li>        postStream.Close();</li><li>        WebResponse response = request.GetResponse();</li><li>        StreamReader reader = <span class="hljs-keyword">new</span> StreamReader(response.GetResponseStream(), Encoding.UTF8);</li><li>        <span class="hljs-built_in">string</span> strJson = reader.ReadToEnd();</li><li>        Console.WriteLine(strJson);</li><li>        reader.Close();</li><li>        response.Close();</li><li>    }</li><li>    <span class="hljs-keyword">catch</span> (Exception e)</li><li>    {</li><li>        Console.WriteLine(e.ToString());</li><li>    }</li><li>}</li></ol></pre></div></div></div><div class="prebox"><div _ngcontent-uhb-c106="" class="highlight-div"><div _ngcontent-uhb-c106="" class="highlight-div-header"><div _ngcontent-uhb-c106="" class="highlight-div-header-left"><div _ngcontent-uhb-c106="" class="handle-button expand-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uhb-c106="" class="highlight-div-header-right"><div _ngcontent-uhb-c106="" class="handle-button ai-button"></div><div _ngcontent-uhb-c106="" class="handle-button line-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uhb-c106="" class="handle-button theme-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uhb-c106="" class="handle-button copy-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uhb-c106="" class="highlight-scroll-div"><pre class="php prettyprint linenums hljs language-php" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 批量转换teamPlayerId</span></li><li><span class="hljs-comment"> *</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> string $domain 请根据您的服务器部署地就近选择对应站点的URL，与获取token时使用的domain保持一致</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> string $client_id 用于鉴权的客户端ID</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> string $token post认证请求的token</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> array $teamPlayerIds 转让前游戏的玩家标识teamPlayerId列表</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> string $appId 游戏appid</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@Param</span> long $srcCpId 游戏转出方的开发者Developer ID</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@Param</span> long $dstCpId 游戏转入方的开发者Developer ID</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@throws</span> Exception</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">batch_convert_teamPlayerIds</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$domain</span>, <span class="hljs-keyword">string</span> <span class="hljs-variable">$client_id</span>, <span class="hljs-keyword">string</span> <span class="hljs-variable">$token</span>, <span class="hljs-keyword">array</span> <span class="hljs-variable">$teamPlayerIds</span>, <span class="hljs-keyword">string</span> <span class="hljs-variable">$appId</span>, long <span class="hljs-variable">$srcCpId</span>, long <span class="hljs-variable">$dstCpId</span></span>)</span></li><li><span class="hljs-function"></span>{</li><li>    <span class="hljs-variable">$curl</span> = <span class="hljs-title function_ invoke__">curl_init</span>();</li><li>    <span class="hljs-variable">$data</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">"teamPlayerIds"</span> =&gt; <span class="hljs-variable">$teamPlayerIds</span>, <span class="hljs-string">"srcCpId"</span> =&gt; <span class="hljs-variable">$srcCpId</span>, <span class="hljs-string">"dstCpId"</span> =&gt; <span class="hljs-variable">$dstCpId</span>);</li><li>    <span class="hljs-title function_ invoke__">curl_setopt_array</span>(<span class="hljs-variable">$curl</span>, <span class="hljs-keyword">array</span>(</li><li>        CURLOPT_URL =&gt; <span class="hljs-variable">$domain</span> . <span class="hljs-string">'/api/jas/open/players/player-accounts/team-player/convert'</span>,</li><li>        CURLOPT_RETURNTRANSFER =&gt; <span class="hljs-literal">true</span>,</li><li>        CURLOPT_ENCODING =&gt; <span class="hljs-string">''</span>,</li><li>        CURLOPT_MAXREDIRS =&gt; <span class="hljs-number">10</span>,</li><li>        CURLOPT_TIMEOUT =&gt; <span class="hljs-number">0</span>,</li><li>        CURLOPT_FOLLOWLOCATION =&gt; <span class="hljs-literal">true</span>,</li><li>        CURLOPT_SSL_VERIFYHOST =&gt; <span class="hljs-literal">false</span>,</li><li>        CURLOPT_SSL_VERIFYPEER =&gt; <span class="hljs-literal">false</span>,</li><li>        CURLOPT_HTTP_VERSION =&gt; CURL_HTTP_VERSION_1_1,</li><li>        CURLOPT_CUSTOMREQUEST =&gt; <span class="hljs-string">'POST'</span>,</li><li>        CURLOPT_POSTFIELDS =&gt; <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$data</span>),</li><li>        CURLOPT_HTTPHEADER =&gt; <span class="hljs-keyword">array</span>(</li><li>            <span class="hljs-string">'client_id: '</span> . <span class="hljs-variable">$client_id</span>,</li><li>            <span class="hljs-string">'Authorization: Bearer '</span> . <span class="hljs-variable">$token</span>,</li><li>            <span class="hljs-string">'Content-Type: application/json'</span>,</li><li>            <span class="hljs-string">'appId: '</span> . <span class="hljs-variable">$appId</span></li><li>        ),</li><li>    ));</li><li>    <span class="hljs-variable">$response</span> = <span class="hljs-title function_ invoke__">curl_exec</span>(<span class="hljs-variable">$curl</span>);</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">curl_error</span>(<span class="hljs-variable">$curl</span>)) {</li><li>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Exception</span>(<span class="hljs-title function_ invoke__">curl_error</span>(<span class="hljs-variable">$curl</span>));</li><li>    }</li><li>    <span class="hljs-title function_ invoke__">curl_close</span>(<span class="hljs-variable">$curl</span>);</li><li>    <span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-variable">$response</span>, <span class="hljs-literal">true</span>);</li><li>    <span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$result</span>);</li><li>}</li></ol></pre></div></div></div><div class="prebox"><div _ngcontent-uhb-c106="" class="highlight-div"><div _ngcontent-uhb-c106="" class="highlight-div-header"><div _ngcontent-uhb-c106="" class="highlight-div-header-left"><div _ngcontent-uhb-c106="" class="handle-button expand-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uhb-c106="" class="highlight-div-header-right"><div _ngcontent-uhb-c106="" class="handle-button ai-button"></div><div _ngcontent-uhb-c106="" class="handle-button line-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uhb-c106="" class="handle-button theme-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uhb-c106="" class="handle-button copy-button"><div _ngcontent-uhb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uhb-c106="" class="highlight-scroll-div"><pre class="python prettyprint linenums hljs language-python" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">from</span> getToken <span class="hljs-keyword">import</span> *</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">BatchConvertTeamPlayerIdsSolution</span>:</li><li><span class="hljs-meta">    @staticmethod</span></li><li>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">batch_convert_team_player_ids</span>(<span class="hljs-params">domain, client_id, access_token, team_player_id, app_id, src_cp_id, dst_cp_id</span>):</li><li>        url = domain + <span class="hljs-string">'/api/jas/open/players/player-accounts/team-player/convert'</span></li><li>        data = {<span class="hljs-string">"teamPlayerIds"</span>: team_player_id, <span class="hljs-string">"srcCpId"</span>: src_cp_id， <span class="hljs-string">"dstCpId"</span>: dst_cp_id}</li><li>        payload = json.dumps(data)</li><li>        headers = {</li><li>            <span class="hljs-string">'client_id'</span>: client_id,</li><li>            <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">'Bearer '</span> + access_token,</li><li>            <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,</li><li>            <span class="hljs-string">'appId'</span>: app_id</li><li>        }</li><li>        response = requests.request(<span class="hljs-string">"POST"</span>, url, headers=headers, data=payload)</li><li>        <span class="hljs-built_in">print</span>(response.text)</li><li><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:</li><li>    <span class="hljs-comment"># 请根据您的服务器部署地就近选择对应站点的URL，这里以中国站点域名为例</span></li><li>    input_domain = <span class="hljs-string">'https://connect-api.cloud.huawei.com'</span></li><li>    <span class="hljs-comment"># 客户端ID</span></li><li>    input_client_id = <span class="hljs-string">'xxxxxxx'</span></li><li>    <span class="hljs-comment"># 客户端密钥</span></li><li>    input_client_secret = <span class="hljs-string">'xxxxxxxx'</span></li><li>    <span class="hljs-comment"># 获取token</span></li><li>    token_function = GetToken()</li><li>    input_access_token = token_function.get_token(input_domain, input_client_id, input_client_secret)</li><li>    <span class="hljs-comment"># 游戏appId</span></li><li>    input_app_id = <span class="hljs-string">'xxxxx'</span></li><li>    <span class="hljs-comment"># 需要转换的teamplayerIds列表，单次最大不要超过1000个，这里以2个为例</span></li><li>    input_player_Ids = [<span class="hljs-string">'xxxxxxx'</span>, <span class="hljs-string">'xxxxxx'</span>]</li><li>    <span class="hljs-comment"># 游戏转出方的开发者Developer ID</span></li><li>    input_src_cp_id = <span class="hljs-number">111111</span></li><li>    <span class="hljs-comment"># 游戏转入方的开发者Developer ID</span></li><li>    input_dst_cp_id = <span class="hljs-number">222222</span></li><li>    batch_function = BatchGetOpenIdsSolution()</li><li>    batch_function.batch_convert_team_player_ids(input_domain, input_client_id, input_access_token, input_player_Ids, input_app_id, input_src_cp_id, input_dst_cp_id)</li></ol></pre></div></div></div></div></div></div> </div> </div> <div></div></div>