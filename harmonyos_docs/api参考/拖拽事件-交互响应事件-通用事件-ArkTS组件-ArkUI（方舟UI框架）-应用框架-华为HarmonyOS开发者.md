<h1 _ngcontent-bbg-c119="" class="doc-title ng-star-inserted" title="拖拽事件"> 拖拽事件 </h1>

<div _ngcontent-bbg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>拖拽事件是指在用户界面中，当用户拖动某个对象（如文件、控件或元素）时触发的一系列事件。这些事件允许开发者自定义拖拽行为，实现诸如拖放、调整位置等功能。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>        <p>从API version 8开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p></li>       <li>        <p>应用本身预置的资源文件（即应用在安装前的HAP包中已经存在的资源文件）仅支持本地应用内拖拽。</p></li>      </ul>     </div></div></div>    <p>ArkUI框架对以下组件实现了默认的拖拽能力，支持对数据的拖出或拖入响应。开发者也可以通过实现通用拖拽事件来自定义拖拽能力。</p>    <ul>     <li>      <p>默认支持拖出能力的组件（可从组件上拖出数据）：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-search">Search</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textinput">TextInput</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textarea">TextArea</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor">RichEditor</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text">Text</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image">Image</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-hyperlink">Hyperlink</a>，开发者可通过设置这些组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#draggable">draggable</a>属性来控制对默认拖拽能力的使用。</p></li>     <li>      <p>默认支持拖入能力的组件（目标组件可响应拖入数据）：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-search">Search</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textinput">TextInput</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textarea">TextArea</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor">RichEditor</a>，开发者可通过设置这些组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#allowdrop">allowDrop</a>属性为null来禁用对默认拖入能力的支持。</p></li>    </ul>    <p>其他支持拖出能力的组件需要开发者将<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#draggable">draggable</a>属性设置为true，并在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragstart">onDragStart</a>等接口中实现数据传输相关内容，才能正确处理拖拽能力。</p>    <p>Text、TextInput、TextArea、Hyperlink、Image、RichEditor和Web组件的draggable属性默认为true，默认支持拖出能力。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>Text组件需配合<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text#copyoption9">copyOption</a>一起使用，设置copyOptions为CopyOptions.InApp或者CopyOptions.LocalDevice。</p>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 1300px;">     <h2 id="ondragstart" device-type="phone,2in1,tablet,wearable,tv">onDragStart<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondragstart" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onDragStart(event: (event: DragEvent, extraParams?: string) =&gt; CustomBuilder | DragItemInfo): T</p>     <p>在手势拖拽场景中，在可拖拽的组件上长按时间超过500ms，然后手指移动距离大于10vp时触发此回调；在鼠标拖拽场景中，鼠标左键在可拖拽的组件上按下并移动超过1vp时，即可触发此回调。</p>     <p>针对默认支持拖拽能力的组件，如果开发者设置了onDragStart，优先执行onDragStart，并根据执行情况决定是否使用系统默认的拖拽能力，具体规则为：</p>     <ul>      <li>如果开发者返回了自定义预览图，则不再使用系统默认的拖拽预览图；</li>      <li>如果开发者设置了拖拽数据，则不再使用系统默认填充的拖拽数据。</li>     </ul>     <p>文本类组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text">Text</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-search">Search</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textinput">TextInput</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textarea">TextArea</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor">RichEditor</a>对选中的文本内容进行拖拽时，不支持自定义预览图。当onDragStart与菜单预览一起使用或使用了默认支持拖拽能力的组件时，预览及菜单项上的自定义内容不支持拖拽。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 13开始，该接口支持在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-attribute-modifier#attributemodifier">attributeModifier</a>中调用。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>事件优先级：</strong> 长按事件触发时间 &lt; 500ms，长按事件优先拖拽事件响应，长按事件触发时间 &gt;= 500ms，拖拽事件优先长按事件响应。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">(event: <a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragevent7">DragEvent</a>, extraParams?: string) =&gt; <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#custombuilder8">CustomBuilder</a> | <a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragiteminfo">DragItemInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>回调函数。</p>          <p><strong>说明：</strong></p>          <p>event参数为拖拽事件的信息。</p>          <p>extraParams参数为拖拽事件的额外信息，需要解析为JSON格式，参考<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#extraparams说明">extraParams</a>说明。</p>          <p>CustomBuilder为拖拽过程中显示的组件信息，不支持全局builder。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.14.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.14.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回当前组件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 792px;">     <h2 id="ondragenter" device-type="phone,2in1,tablet,wearable,tv">onDragEnter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondragenter" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onDragEnter(event: (event: DragEvent, extraParams?: string) =&gt; void): T</p>     <p>拖拽进入组件范围内时，触发回调，当监听了<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondrop">onDrop</a>事件时，此事件才有效。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">(event: <a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragevent7">DragEvent</a>, extraParams?: string) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>回调函数。</p>          <p><strong>说明：</strong></p>          <p>event为拖拽事件信息，包括拖拽点坐标。</p>          <p>extraParams为拖拽事件额外信息，需要解析为Json格式，参考<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#extraparams说明">extraParams</a>说明。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回当前组件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 792px;">     <h2 id="ondragmove" device-type="phone,2in1,tablet,wearable,tv">onDragMove<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondragmove" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onDragMove(event: (event: DragEvent, extraParams?: string) =&gt; void): T</p>     <p>拖拽在组件范围内移动时，触发回调，当监听了<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondrop">onDrop</a>事件时，此事件才有效。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">(event: <a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragevent7">DragEvent</a>, extraParams?: string) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>回调函数。</p>          <p><strong>说明：</strong></p>          <p>event为拖拽事件信息，包括拖拽点坐标。</p>          <p>extraParams为拖拽事件额外信息，需要解析为Json格式，参考<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#extraparams说明">extraParams</a>说明。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回当前组件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 792px;">     <h2 id="ondragleave" device-type="phone,2in1,tablet,wearable,tv">onDragLeave<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondragleave" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onDragLeave(event: (event: DragEvent, extraParams?: string) =&gt; void): T</p>     <p>拖拽离开组件范围内时，触发回调，当监听了<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondrop">onDrop</a>事件时，此事件才有效。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">(event: <a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragevent7">DragEvent</a>, extraParams?: string) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>回调函数。</p>          <p><strong>说明：</strong></p>          <p>event为拖拽事件信息，包括拖拽点坐标。</p>          <p>extraParams为拖拽事件额外信息，需要解析为Json格式，参考<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#extraparams说明">extraParams</a>说明。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回当前组件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 840px;">     <h2 id="ondrop" device-type="phone,2in1,tablet,wearable,tv">onDrop<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondrop" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onDrop(event: (event: DragEvent, extraParams?: string) =&gt; void): T</p>     <p>绑定此事件的组件可作为释放目标。当在本组件范围内停止拖放行为时，将触发回调。如果开发者未在onDrop中主动调用event.setResult()来设置拖拽接收的结果，对于系统支持的默认可拖入组件，处理结果将以系统实际处理的数据为准。对于其他组件，系统将默认视为数据接收成功。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">(event: <a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragevent7">DragEvent</a>, extraParams?: string) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>回调函数。</p>          <p><strong>说明：</strong></p>          <p>event为拖拽事件信息，包括拖拽点坐标。</p>          <p>extraParams为拖拽事件额外信息，需要解析为Json格式，参考<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#extraparams说明">extraParams</a>说明。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回当前组件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 741px;">     <h2 id="ondrop15" device-type="phone,2in1,tablet,wearable,tv">onDrop<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondrop15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onDrop(eventCallback: OnDragEventCallback, dropOptions?: DropOptions): T</p>     <p>绑定此事件的组件可作为拖拽释放目标，当在本组件范围内停止拖拽行为时，触发回调。如果开发者没有在onDrop中主动调用event.setResult()设置拖拽接收的结果，若拖拽组件为系统支持默认拖入的组件，以系统实际处理数据结果为准，其它组件则系统按照数据接收成功处理。</p>     <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">eventCallback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondrageventcallback15">OnDragEventCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">dropOptions</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dropoptions15">DropOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">落入过程的参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回当前组件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 816px;">     <h2 id="ondragend10" device-type="phone,2in1,tablet,wearable,tv">onDragEnd<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondragend10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onDragEnd(event: (event: DragEvent, extraParams?: string) =&gt; void): T</p>     <p>绑定此事件的组件触发的拖拽结束后，触发回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">(event: <a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragevent7">DragEvent</a>, extraParams?: string) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>回调函数。</p>          <p><strong>说明：</strong></p>          <p>event为拖拽事件信息，在onDragEnd调用中不包括拖拽点坐标。</p>          <p>extraParams为拖拽事件额外信息，需要解析为Json格式，参考<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#extraparams说明">extraParams</a>说明。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回当前组件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 740px;">     <h2 id="onpredrag12" device-type="phone,2in1,tablet,wearable,tv">onPreDrag<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onpredrag12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onPreDrag(callback: Callback&lt;PreDragStatus&gt;): T</p>     <p>绑定此事件的组件，当处于手势拖拽发起前的不同阶段时，触发回调。此接口不支持在鼠标拖拽中触发。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 20开始，该接口支持在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-attribute-modifier#attributemodifier">attributeModifier</a>中调用。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#predragstatus12枚举说明">PreDragStatus</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回当前组件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 861px;">     <h2 id="ondragspringloading20" device-type="phone,2in1,tablet,wearable,tv">onDragSpringLoading<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondragspringloading20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onDragSpringLoading(callback: Callback&lt;SpringLoadingContext&gt; | null, configuration?: DragSpringLoadingConfiguration): T</p>     <p>绑定此事件的组件可作为具有悬停检测功能的拖拽响应目标。当拖拽对象悬停在目标上时，触发回调通知。此时只有一个目标可以成为响应方，并且子组件始终具有更高的响应优先级。</p>     <p>关于悬停检测的触发机制及详细使用方法，请参考开发指南<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-common-events-drag-event#支持悬停检测" target="_blank">支持悬停检测</a>。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#springloadingcontext20">SpringLoadingContext</a>&gt; | null</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">悬停检测回调函数，当值为null时禁用悬停检测。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">configuration</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-dragcontroller#dragspringloadingconfiguration20">DragSpringLoadingConfiguration</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">悬停检测配置信息，为undefined时取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-dragcontroller#dragspringloadingconfiguration20">DragSpringLoadingConfiguration</a>默认值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回当前组件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 855px;">     <h2 id="dragiteminfo" device-type="phone,2in1,tablet,wearable,tv">DragItemInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dragiteminfo" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">pixelMap</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">设置拖拽过程中显示的图片。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">builder</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#custombuilder8">CustomBuilder</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>拖拽过程中显示自定义组件，如果设置了pixelMap，则忽略此值。</p>          <p><strong>说明：</strong></p>          <p>不支持全局builder。如果builder中使用了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image">Image</a>组件，应尽量开启同步加载，即配置Image的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image#syncload8">syncLoad</a>为true。该builder只用于生成当次拖拽中显示的图片，builder的修改不会同步到当前正在拖拽的图片，对builder的修改需要在下一次拖拽时生效。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">extraInfo</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">拖拽项的附加信息，用于描述拖拽项。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1002px;">     <h2 id="previewconfiguration15" device-type="phone,2in1,tablet,wearable,tv">PreviewConfiguration<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="previewconfiguration15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>配置自定义拖拽过程中的预览图样式。</p>     <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">onlyForLifting</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>自定义配置的预览图是否仅用于浮起。</p>          <p><strong>说明：</strong></p>          <p>默认值为false。true表示自定义预览图仅用于浮起，false表示可用于浮起和拖拽。设置为true时，如果发起长按拖拽，浮起时的预览图为自定义配置的预览图，拖拽时的预览图不使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreview11">dragPreview</a>属性，优先使用开发者在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragstart">onDragStart</a>中返回的预览图，如果<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragstart">onDragStart</a>中没有返回预览图则使用组件自截图。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">delayCreating</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>组件预览builder是否在设置时加载。</p>          <p>默认值为false。true表示组件预览builder在设置时加载，false表示组件预览builder不在设置时加载。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 570px;">     <h2 id="extraparams说明" device-type="phone,2in1,tablet,wearable,tv">extraParams说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="extraparams说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用于返回组件在拖拽中需要用到的额外信息。</p>     <p>extraParams是Json对象转换的string字符串，可以通过Json.parse转换的Json对象获取如下属性。</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.4.1.2" width="33.33333333333333%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.4.1.3" width="33.33333333333333%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">selectedIndex</td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>当拖拽事件设在父容器的子元素时，selectedIndex表示当前被拖拽子元素是父容器第selectedIndex个子元素，selectedIndex从0开始。</p>          <p>仅在ListItem组件的拖拽事件中生效。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">insertIndex</td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>当前拖拽元素在List组件中放下时，insertIndex表示被拖拽元素插入该组件的第insertIndex个位置，insertIndex从0开始。</p>          <p>仅在List组件的拖拽事件中生效。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="dragevent7" device-type="phone,2in1,tablet,wearable,tv">DragEvent<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dragevent7" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 978px;">     <h3 id="属性" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">useCustomDropAnimation<sup>10+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>当拖拽结束时，是否禁用系统默认落位动效。</p>          <p>应用可将该值设定为true来禁用系统默认落位动效，并实现自己的自定义落位动效。</p>          <p>当不配置或设置为false时，系统默认落位动效生效，当<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#setresult10">setResult</a>设置为DRAG_SUCCESSFUL时，落位为缩小消失动效，不为DRAG_SUCCESSFUL时，则为放大消失动效。</p>          <p>当未禁用系统默认落位动效时，应用不应再实现自定义动效，以避免动效上的冲突。</p>          <p>默认值：false</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">dragBehavior<sup>10+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragbehavior10">DragBehavior</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>切换复制和剪贴模式的角标显示状态。</p>          <p>默认值：DragBehavior.COPY。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 469px;">     <h3 id="setdata10" device-type="phone,2in1,tablet,wearable,tv">setData<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setdata10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setData(unifiedData: UnifiedData): void</p>     <p>向DragEvent中设置用于拖拽的数据。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">unifiedData</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#unifieddata10">UnifiedData</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">拖拽相关的数据。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 787px;">     <h3 id="getdata10" device-type="phone,2in1,tablet,wearable,tv">getData<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdata10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getData(): UnifiedData</p>     <p>获取拖拽相关数据。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-unifieddatachannel#unifieddata">UnifiedData</a></td>         <td class="cellrowborder" width="50%">从DragEvent中获取拖拽相关数据。数据获取结果请参考错误码说明。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drag-event">drag-event(拖拽事件)</a>错误码。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">190001</td>         <td class="cellrowborder" width="50%">Data not found.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">190002</td>         <td class="cellrowborder" width="50%">Data error.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 489px;">     <h3 id="getsummary10" device-type="phone,2in1,tablet,wearable,tv">getSummary<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getsummary10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSummary(): Summary</p>     <p>获取所拖拽数据的概要，包括数据类型及大小信息；在延迟拖拽场景下，只能获取到数据类型信息。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#summary10">Summary</a></td>         <td class="cellrowborder" width="50%">拖拽相关数据的概要。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 469px;">     <h3 id="setresult10" device-type="phone,2in1,tablet,wearable,tv">setResult<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setresult10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setResult(dragResult: DragResult): void</p>     <p>在DragEvent中设置拖拽结果。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">dragResult</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragresult10枚举说明">DragResult</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">拖拽结果。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 489px;">     <h3 id="getresult10" device-type="phone,2in1,tablet,wearable,tv">getResult<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresult10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResult(): DragResult</p>     <p>获取拖拽结果。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragresult10枚举说明">DragResult</a></td>         <td class="cellrowborder" width="50%">从DragEvent中获取的拖拽结果。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 537px;">     <h3 id="getpreviewrect10" device-type="phone,2in1,tablet,wearable,tv">getPreviewRect<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getpreviewrect10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPreviewRect(): Rectangle</p>     <p>获取拖拽预览图相对于当前窗口的位置，以及预览图尺寸信息。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-touch-target#rectangle对象说明">Rectangle</a></td>         <td class="cellrowborder" width="50%">拖拽预览图相对于当前窗口的位置，以及预览图尺寸信息，单位vp，其中x和y代表预览图左上角的窗口坐标，width和height代表预览图的尺寸。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 513px;">     <h3 id="getvelocityx10" device-type="phone,2in1,tablet,wearable,tv">getVelocityX<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getvelocityx10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getVelocityX(): number</p>     <p>获取当前拖拽的x轴方向拖动速度。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">当前拖拽的x轴方向拖动速度。坐标轴原点为屏幕左上角，单位为vp，分正负方向速度，从左往右为正，反之为负。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 513px;">     <h3 id="getvelocityy10" device-type="phone,2in1,tablet,wearable,tv">getVelocityY<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getvelocityy10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getVelocityY(): number</p>     <p>获取当前拖拽的y轴方向拖动速度。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">当前拖拽的y轴方向拖动速度。坐标轴原点为屏幕左上角，单位为vp，分正负方向速度，从上往下为正，反之为负。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 513px;">     <h3 id="getvelocity10" device-type="phone,2in1,tablet,wearable,tv">getVelocity<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getvelocity10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getVelocity(): number</p>     <p>获取当前拖拽的主方向拖动速度。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">当前拖拽的主方向拖动速度。为xy轴方向速度的平方和的算术平方根，单位为vp。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 489px;">     <h3 id="getwindowx10" device-type="phone,2in1,tablet,wearable,tv">getWindowX<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getwindowx10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getWindowX(): number</p>     <p>获取拖拽点相对于窗口左上角的x轴坐标。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">当前拖拽点相对于窗口左上角的x轴坐标，单位为vp。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 489px;">     <h3 id="getwindowy10" device-type="phone,2in1,tablet,wearable,tv">getWindowY<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getwindowy10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getWindowY(): number</p>     <p>获取拖拽点相对于窗口左上角的y轴坐标。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">当前拖拽点相对于窗口左上角的y轴坐标，单位为vp。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 489px;">     <h3 id="getdisplayx10" device-type="phone,2in1,tablet,wearable,tv">getDisplayX<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdisplayx10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDisplayX(): number</p>     <p>获取当前拖拽点相对于屏幕左上角的x轴坐标。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">当前拖拽点相对于屏幕左上角的x轴坐标，单位为vp。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 489px;">     <h3 id="getdisplayy10" device-type="phone,2in1,tablet,wearable,tv">getDisplayY<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdisplayy10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDisplayY(): number</p>     <p>获取当前拖拽点相对于屏幕左上角的y轴坐标。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">当前拖拽点相对于屏幕左上角的y轴坐标，单位为vp。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1003px;">     <h3 id="getmodifierkeystate12" device-type="phone,2in1,tablet,wearable,tv">getModifierKeyState<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getmodifierkeystate12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getModifierKeyState?(keys: Array&lt;string&gt;): boolean</p>     <p>获取功能键按压状态。</p>     <p><strong>元服务API：</strong> 从API version 13开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">keys</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>获取功能键按压状态。报错信息请参考以下错误码。支持功能键 'Ctrl'| 'Alt' | 'Shift'。</p>          <p><strong>说明：</strong></p>          <p>此接口不支持在手写笔场景下使用。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Incorrect parameter types. 2. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">是否被按下，返回true表示被按下，返回false表示未被按下</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1034px;">     <h3 id="startdataloading15" device-type="phone,2in1,tablet,wearable,tv">startDataLoading<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="startdataloading15" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startDataLoading(options: DataSyncOptions): string</p>     <p>异步获取拖拽数据，并通知开发者当前数据同步进度，仅支持在onDrop阶段使用。</p>     <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#datasyncoptions15">DataSyncOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">获取拖拽数据时的参数，包含目标路径、文件冲突选项、进度条类型等。数据传输过程中可使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-dragcontroller#canceldataloading15">cancelDataLoading</a>接口取消数据加载。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drag-event">drag-event（拖拽事件）</a>错误码。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">190003</td>         <td class="cellrowborder" width="50%">Operation not allowed for current phase.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">拖拽数据的标识，用于区分每次拖拽。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 733px;">     <h3 id="executedropanimation18" device-type="phone,2in1,tablet,wearable,tv">executeDropAnimation<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="executedropanimation18" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>executeDropAnimation(customDropAnimation: Callback&lt;void&gt;): void</p>     <p>设置自定义落位动效的执行函数，仅在useCustomDropAnimation为true时有效。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">customDropAnimation</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#callback">Callback&lt;void&gt;</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>在此回调函数中实现自定义落位动效。</p>          <p><strong>说明：</strong></p>          <p>1. 该接口仅在onDrop回调中使用有效。</p>          <p>2. 使用前需设置useCustomDropAnimation为true，否则该接口不生效。</p>          <p>3. 不要在动画callback中实现与动效无关的逻辑，避免影响执行效率。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 489px;">     <h3 id="getdisplayid20" device-type="phone,2in1,tablet,wearable,tv">getDisplayId<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdisplayid20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDisplayId(): number</p>     <p>获取当前拖拽事件发生时所在的屏幕ID，不支持在onDragEnd阶段使用。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">当前拖拽事件发生时所在的屏幕ID。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 489px;">     <h3 id="getdragsource20" device-type="phone,2in1,tablet,wearable,tv">getDragSource<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdragsource20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDragSource(): string</p>     <p>获取拖起方包名。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">拖起方的包名。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 513px;">     <h3 id="isremote20" device-type="phone,2in1,tablet,wearable,tv">isRemote<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isremote20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isRemote(): boolean</p>     <p>获取是否是跨设备拖拽，跨设备拖拽时为true。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">是否是跨设备拖拽，返回true表示是跨设备拖拽，返回false表示不是跨设备拖拽。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 541px;">     <h3 id="setdataloadparams20" device-type="phone,2in1,tablet,wearable,tv">setDataLoadParams<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setdataloadparams20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setDataLoadParams(dataLoadParams: DataLoadParams): void</p>     <p>设置起拖方延迟提供数据。使用此方法向系统提供数据加载参数，而不是直接提供完整的数据对象。当用户在目标应用程序上落入时，系统将使用此参数从起拖方请求实际数据。与<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#setdata10">setData</a>方法同时使用，以最后调用的方法为准。该接口仅在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragstart">onDragStart</a>回调中生效。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">dataLoadParams</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dataloadparams20">DataLoadParams</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">落入操作时使用的数据加载参数。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 465px;">     <h3 id="getxdeprecated" device-type="phone,2in1,tablet,wearable,tv">getX<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getxdeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getX(): number</p>     <p>当前拖拽点相对于窗口左上角的x轴坐标，单位为vp。从API version 10开始不再维护，建议使用<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#getwindowx10">getWindowX()</a>代替。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">          <p>返回当前拖拽点相对于窗口左上角的x轴坐标。</p>          <p>单位：vp</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 465px;">     <h3 id="getydeprecated" device-type="phone,2in1,tablet,wearable,tv">getY<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getydeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getY(): number</p>     <p>当前拖拽点相对于窗口左上角的y轴坐标，单位为vp。从API version 10开始不再维护，建议使用<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#getwindowy10">getWindowY()</a>代替。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">          <p>返回当前拖拽点相对于窗口左上角的y轴坐标。</p>          <p>单位：vp</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 513px;">     <h3 id="getglobaldisplayx20" device-type="phone,2in1,tablet,wearable,tv">getGlobalDisplayX<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getglobaldisplayx20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getGlobalDisplayX(): number</p>     <p>当前拖拽点相对于全局屏幕的左上角的X坐标。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">          <p>返回当前拖拽点相对于全局屏幕的左上角的X坐标。</p>          <p>单位：vp，取值范围：[0, +∞)</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 513px;">     <h3 id="getglobaldisplayy20" device-type="phone,2in1,tablet,wearable,tv">getGlobalDisplayY<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getglobaldisplayy20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getGlobalDisplayY(): number</p>     <p>当前拖拽点相对于全局屏幕的左上角的Y坐标。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">          <p>返回当前拖拽点相对于全局屏幕的左上角的Y坐标。</p>          <p>单位：vp，取值范围：[0, +∞)</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 561px;">     <h2 id="dragresult10枚举说明" device-type="phone,2in1,tablet,wearable,tv">DragResult<sup>10+</sup>枚举说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dragresult10枚举说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.46.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">DRAG_SUCCESSFUL</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">拖拽成功，在<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondrop">onDrop</a>中使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DRAG_FAILED</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">拖拽失败，在<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondrop">onDrop</a>中使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DRAG_CANCELED</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">拖拽取消，在<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondrop">onDrop</a>中使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DROP_ENABLED</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">组件允许落入，在<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragenter">onDragEnter</a>，<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragmove">onDragMove</a>，<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragleave">onDragLeave</a>中使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DROP_DISABLED</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">组件不允许落入，在<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragenter">onDragEnter</a>，<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragmove">onDragMove</a>，<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragleave">onDragLeave</a>中使用。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 522px;">     <h2 id="dragbehavior10" device-type="phone,2in1,tablet,wearable,tv">DragBehavior<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dragbehavior10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>当设置<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragresult10枚举说明">DragResult</a>为DROP_ENABLED后，可设置DragBehavior为复制（COPY）或剪切（MOVE）。当DragBehavior为复制（COPY）时，拖拽对象的角标会显示加号；为剪切（MOVE）时，拖拽对象的角标不会显示加号。DragBehavior用来向开发者描述数据的处理方式是复制（COPY）还是剪切（MOVE），但无法最终决定对数据的实际处理方式。DragBehavior会通过onDragEnd带回给数据拖出方，发起拖拽的一方可通过DragBehavior来区分做出的是复制（COPY）还是剪切（MOVE）数据的不同行为。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">COPY</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">指定对数据的处理方式为复制。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MOVE</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">指定对数据的处理方式为剪切。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1200px;">     <h2 id="predragstatus12枚举说明" device-type="phone,2in1,tablet,wearable,tv">PreDragStatus<sup>12+</sup>枚举说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="predragstatus12枚举说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.3.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.3.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.3.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">ACTION_DETECTING_STATUS</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>拖拽手势启动阶段。(按下50ms时触发)</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">READY_TO_TRIGGER_DRAG_ACTION</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>拖拽准备完成，可发起拖拽阶段。(按下500ms时触发)</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PREVIEW_LIFT_STARTED</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>拖拽浮起动效发起阶段。(按下800ms时触发)</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PREVIEW_LIFT_FINISHED</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>拖拽浮起动效结束阶段。(浮起动效完全结束时触发)</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PREVIEW_LANDING_STARTED</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>拖拽落回动效发起阶段。(落回动效发起时触发)</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PREVIEW_LANDING_FINISHED</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>拖拽落回动效结束阶段。(落回动效结束时触发)</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">ACTION_CANCELED_BEFORE_DRAG</td>         <td class="cellrowborder" width="33.33333333333333%">6</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>拖拽浮起落位动效中断。(已满足READY_TO_TRIGGER_DRAG_ACTION状态后，未达到动效阶段，手指抬手时触发)</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PREPARING_FOR_DRAG_DETECTION<sup>18+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">7</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>拖拽准备完成，可发起拖拽阶段。(按下350ms时触发)</p>          <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 449px;">     <h2 id="unifieddata10" device-type="phone,2in1,tablet,wearable,tv">UnifiedData<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="unifieddata10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type UnifiedData = UnifiedData</p>     <p>拖拽相关的数据。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.49.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-unifieddatachannel#unifieddata">UnifiedData</a></td>         <td class="cellrowborder" width="50%">拖拽相关的数据。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 449px;">     <h2 id="summary10" device-type="phone,2in1,tablet,wearable,tv">Summary<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="summary10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type Summary = Summary</p>     <p>拖拽相关数据的简介。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-unifieddatachannel#summary">Summary</a></td>         <td class="cellrowborder" width="50%">拖拽相关数据的简介。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 449px;">     <h2 id="dataloadparams20" device-type="phone,2in1,tablet,wearable,tv">DataLoadParams<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataloadparams20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type DataLoadParams = DataLoadParams</p>     <p>落入操作时使用的数据加载参数。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-unifieddatachannel#dataloadparams20">DataLoadParams</a></td>         <td class="cellrowborder" width="50%">落入操作时使用的数据加载参数。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 473px;">     <h2 id="datasyncoptions15" device-type="phone,2in1,tablet,wearable,tv">DataSyncOptions<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="datasyncoptions15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type DataSyncOptions = GetDataParams</p>     <p>作为startDataLoading的入参对象。</p>     <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-unifieddatachannel#getdataparams15">GetDataParams</a></td>         <td class="cellrowborder" width="50%">表示从UDMF获取数据时的参数，包含目标路径、文件冲突选项、进度条类型等。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 594px;">     <h2 id="ondrageventcallback15" device-type="phone,2in1,tablet,wearable,tv">OnDragEventCallback<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondrageventcallback15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type OnDragEventCallback = (event: DragEvent, extraParams?: string) =&gt; void</p>     <p>拖拽事件的回调函数。</p>     <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragevent7">DragEvent</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">event为拖拽事件信息，包括拖拽点坐标。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">extraParams</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">extraParams为拖拽事件额外信息，需要解析为Json格式，参考<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#extraparams说明">extraParams</a>说明。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 621px;">     <h2 id="dropoptions15" device-type="phone,2in1,tablet,wearable,tv">DropOptions<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dropoptions15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>设置落入过程的参数。</p>     <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.54.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">disableDataPrefetch</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置拖拽是否提前获取数据。true表示不提前获取数据，false表示提前获取数据，默认值为false。</p>          <p><strong>说明：</strong></p>          <p>当使用<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#startdataloading15">startDataLoading</a>获取数据时需设置该参数为true，防止拖拽提前获取数据。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 449px;">     <h2 id="dragspringloadingconfiguration20" device-type="phone,2in1,tablet,wearable,tv">DragSpringLoadingConfiguration<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dragspringloadingconfiguration20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type DragSpringLoadingConfiguration = DragSpringLoadingConfiguration</p>     <p>定义拖拽的悬停检测配置参数的接口。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-dragcontroller#dragspringloadingconfiguration20">DragSpringLoadingConfiguration</a></td>         <td class="cellrowborder" width="50%">定义拖拽的悬停检测配置参数的接口。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 473px;">     <h2 id="springloadingcontext20" device-type="phone,2in1,tablet,wearable,tv">SpringLoadingContext<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="springloadingcontext20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type SpringLoadingContext = SpringLoadingContext</p>     <p>定义回调上下文信息的类，用于在悬停检测回调中传递给应用程序，使其能访问拖拽状态。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-dragcontroller#springloadingcontext20">SpringLoadingContext</a></td>         <td class="cellrowborder" width="50%">定义回调上下文信息的类，用于在悬停检测回调中传递给应用程序，以便应用程序能访问拖拽状态。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="示例" device-type="phone,2in1,tablet,wearable,tv">示例<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="示例" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 5377px;">     <h3 id="示例1设置组件拖拽和落入" class="firsth2">示例1（设置组件拖拽和落入）<i class="anchor-icon anchor-icon-link" anchorid="示例1设置组件拖拽和落入" tips="复制节点链接"></i></h3>          <p>示例1展示了部分组件（如Image和Text等）拖拽和可落入区域的设置。</p>     <div _ngcontent-bbg-c106="" class="highlight-div"><div _ngcontent-bbg-c106="" class="highlight-div-header"><div _ngcontent-bbg-c106="" class="highlight-div-header-left"><div _ngcontent-bbg-c106="" class="handle-button expand-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bbg-c106="" class="highlight-div-header-right"><div _ngcontent-bbg-c106="" class="handle-button ai-button"></div><div _ngcontent-bbg-c106="" class="handle-button line-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bbg-c106="" class="handle-button theme-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bbg-c106="" class="handle-button copy-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bbg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { unifiedDataChannel, uniformTypeDescriptor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">targetImage</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">targetText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Drag Text'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">imageWidth</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">imageHeight</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">imgState</span>: <span class="hljs-title class_">Visibility</span> = <span class="hljs-title class_">Visibility</span>.<span class="hljs-property">Visible</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">abstractContent</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"abstract"</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">textContent</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">backGroundColor</span>: <span class="hljs-title class_">Color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Transparent</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">pixelMapBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// $r('app.media.icon')需要替换为开发者所需的图像资源文件</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.icon'</span>))</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">120</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">120</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Yellow</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 获取Udmf数据</span></li><li>  <span class="hljs-title function_">getDataFromUdmfRetry</span>(<span class="hljs-params">event: DragEvent, callback: (data: DragEvent) =&gt; <span class="hljs-built_in">void</span></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">UnifiedData</span> = event.<span class="hljs-title function_">getData</span>();</li><li>      <span class="hljs-keyword">if</span> (!data) {</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>      }</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">records</span>: <span class="hljs-title class_">Array</span>&lt;unifiedDataChannel.<span class="hljs-property">UnifiedRecord</span>&gt; = data.<span class="hljs-title function_">getRecords</span>();</li><li>      <span class="hljs-keyword">if</span> (!records || records.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>      }</li><li>      <span class="hljs-title function_">callback</span>(event);</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getData failed, code = <span class="hljs-subst">${(e <span class="hljs-keyword">as</span> BusinessError).code}</span>, message = <span class="hljs-subst">${(e <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 首次获取Udmf数据失败后自动重试</span></li><li>  <span class="hljs-title function_">getDataFromUdmf</span>(<span class="hljs-params">event: DragEvent, callback: (data: DragEvent) =&gt; <span class="hljs-built_in">void</span></span>) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDataFromUdmfRetry</span>(event, callback)) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDataFromUdmfRetry</span>(event, callback);</li><li>    }, <span class="hljs-number">1500</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 根据拖拽发起前的不同阶段更改背景色</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title class_">PreDragChange</span>(<span class="hljs-attr">preDragStatus</span>: <span class="hljs-title class_">PreDragStatus</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (preDragStatus == <span class="hljs-title class_">PreDragStatus</span>.<span class="hljs-property">READY_TO_TRIGGER_DRAG_ACTION</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">backGroundColor</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>;</li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (preDragStatus == <span class="hljs-title class_">PreDragStatus</span>.<span class="hljs-property">ACTION_CANCELED_BEFORE_DRAG</span></li><li>      || preDragStatus == <span class="hljs-title class_">PreDragStatus</span>.<span class="hljs-property">PREVIEW_LANDING_FINISHED</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">backGroundColor</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>;</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'start Drag'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#008888'</span>)</li><li>        <span class="hljs-comment">// $r('app.media.icon')需要替换为开发者所需的图像资源文件</span></li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.icon'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>          .<span class="hljs-title function_">visibility</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imgState</span>)</li><li>          .<span class="hljs-title function_">onDragEnd</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>            <span class="hljs-comment">// onDragEnd里取到的result值在接收方onDrop设置</span></li><li>            <span class="hljs-keyword">if</span> (event.<span class="hljs-title function_">getResult</span>() === <span class="hljs-title class_">DragResult</span>.<span class="hljs-property">DRAG_SUCCESSFUL</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">duration</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Drag Success'</span> });</li><li>            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.<span class="hljs-title function_">getResult</span>() === <span class="hljs-title class_">DragResult</span>.<span class="hljs-property">DRAG_FAILED</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">duration</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Drag failed'</span> });</li><li>            }</li><li>          })</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'test drag event'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>          .<span class="hljs-title function_">copyOption</span>(<span class="hljs-title class_">CopyOptions</span>.<span class="hljs-property">InApp</span>)</li><li>        <span class="hljs-title class_">TextArea</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'please input words'</span> })</li><li>          .<span class="hljs-title function_">copyOption</span>(<span class="hljs-title class_">CopyOptions</span>.<span class="hljs-property">InApp</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>        <span class="hljs-title class_">Search</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'please input you word'</span> })</li><li>          .<span class="hljs-title function_">searchButton</span>(<span class="hljs-string">'Search'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">80</span>)</li><li>          .<span class="hljs-title function_">textFont</span>({ <span class="hljs-attr">size</span>: <span class="hljs-number">20</span> })</li><li>
</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'this is abstract'</span>)</li><li>            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        }</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">40</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">20</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">backGroundColor</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Transparent</span>;</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: unifiedDataChannel.<span class="hljs-property">PlainText</span> = <span class="hljs-keyword">new</span> unifiedDataChannel.<span class="hljs-title class_">PlainText</span>();</li><li>          data.<span class="hljs-property">abstract</span> = <span class="hljs-string">'this is abstract'</span>;</li><li>          data.<span class="hljs-property">textContent</span> = <span class="hljs-string">'this is content this is content'</span>;</li><li>          (event <span class="hljs-keyword">as</span> <span class="hljs-title class_">DragEvent</span>).<span class="hljs-title function_">setData</span>(<span class="hljs-keyword">new</span> unifiedDataChannel.<span class="hljs-title class_">UnifiedData</span>(data));</li><li>        })</li><li>        .<span class="hljs-title function_">onPreDrag</span>(<span class="hljs-function">(<span class="hljs-params">status: PreDragStatus</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">PreDragChange</span>(status);</li><li>        })</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">backGroundColor</span>)</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'45%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>
</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Drag Target Area'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#008888'</span>)</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">targetImage</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imageWidth</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imageHeight</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">allowDrop</span>([uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">IMAGE</span>])</li><li>          .<span class="hljs-title function_">onDrop</span>(<span class="hljs-function">(<span class="hljs-params">dragEvent?: DragEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDataFromUdmf</span>((dragEvent <span class="hljs-keyword">as</span> <span class="hljs-title class_">DragEvent</span>), <span class="hljs-function">(<span class="hljs-params">event: DragEvent</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">records</span>: <span class="hljs-title class_">Array</span>&lt;unifiedDataChannel.<span class="hljs-property">UnifiedRecord</span>&gt; = event.<span class="hljs-title function_">getData</span>().<span class="hljs-title function_">getRecords</span>();</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">rect</span>: <span class="hljs-title class_">Rectangle</span> = event.<span class="hljs-title function_">getPreviewRect</span>();</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">imageWidth</span> = <span class="hljs-title class_">Number</span>(rect.<span class="hljs-property">width</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">imageHeight</span> = <span class="hljs-title class_">Number</span>(rect.<span class="hljs-property">height</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetImage</span> = (records[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> unifiedDataChannel.<span class="hljs-property">Image</span>).<span class="hljs-property">imageUri</span>;</li><li>              event.<span class="hljs-property">useCustomDropAnimation</span> = <span class="hljs-literal">false</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">imgState</span> = <span class="hljs-title class_">Visibility</span>.<span class="hljs-property">None</span>;</li><li>              <span class="hljs-comment">// 显式设置result为successful，则将该值传递给拖出方的onDragEnd</span></li><li>              event.<span class="hljs-title function_">setResult</span>(<span class="hljs-title class_">DragResult</span>.<span class="hljs-property">DRAG_SUCCESSFUL</span>);</li><li>            })</li><li>          })</li><li>
</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">targetText</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">15</span>)</li><li>          .<span class="hljs-title function_">allowDrop</span>([uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">PLAIN_TEXT</span>])</li><li>          .<span class="hljs-title function_">onDrop</span>(<span class="hljs-function">(<span class="hljs-params">dragEvent?: DragEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDataFromUdmf</span>((dragEvent <span class="hljs-keyword">as</span> <span class="hljs-title class_">DragEvent</span>), <span class="hljs-function">(<span class="hljs-params">event: DragEvent</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">records</span>: <span class="hljs-title class_">Array</span>&lt;unifiedDataChannel.<span class="hljs-property">UnifiedRecord</span>&gt; = event.<span class="hljs-title function_">getData</span>().<span class="hljs-title function_">getRecords</span>();</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">plainText</span>: unifiedDataChannel.<span class="hljs-property">PlainText</span> = records[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> unifiedDataChannel.<span class="hljs-property">PlainText</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetText</span> = plainText.<span class="hljs-property">textContent</span>;</li><li>            })</li><li>          })</li><li>
</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">abstractContent</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">textContent</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">15</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        }</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>        .<span class="hljs-title function_">allowDrop</span>([uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">PLAIN_TEXT</span>])</li><li>        .<span class="hljs-title function_">onDrop</span>(<span class="hljs-function">(<span class="hljs-params">dragEvent?: DragEvent</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDataFromUdmf</span>((dragEvent <span class="hljs-keyword">as</span> <span class="hljs-title class_">DragEvent</span>), <span class="hljs-function">(<span class="hljs-params">event: DragEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">records</span>: <span class="hljs-title class_">Array</span>&lt;unifiedDataChannel.<span class="hljs-property">UnifiedRecord</span>&gt; = event.<span class="hljs-title function_">getData</span>().<span class="hljs-title function_">getRecords</span>();</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">plainText</span>: unifiedDataChannel.<span class="hljs-property">PlainText</span> = records[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> unifiedDataChannel.<span class="hljs-property">PlainText</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">abstractContent</span> = plainText.<span class="hljs-property">abstract</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">textContent</span> = plainText.<span class="hljs-property">textContent</span>;</li><li>          })</li><li>        })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'45%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-string">'5%'</span> })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="497" originwidth="497" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115747.61512217168786022164111053573099:50001231000000:2800:05AB27FC2F2FC5C7E1238F9335BA8B4682906DBB97E4D5839DC111FCA96F66D1.png" width="497" height="497"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2454px;">     <h3 id="示例2自定义落位动效">示例2（自定义落位动效）<i class="anchor-icon anchor-icon-link" anchorid="示例2自定义落位动效" tips="复制节点链接"></i></h3>          <p>从API version 18开始，示例2展示了通过自定义接口<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#executedropanimation18">executeDropAnimation</a>，实现落位动效。</p>     <div _ngcontent-bbg-c106="" class="highlight-div"><div _ngcontent-bbg-c106="" class="highlight-div-header"><div _ngcontent-bbg-c106="" class="highlight-div-header-left"><div _ngcontent-bbg-c106="" class="handle-button expand-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bbg-c106="" class="highlight-div-header-right"><div _ngcontent-bbg-c106="" class="handle-button ai-button"></div><div _ngcontent-bbg-c106="" class="handle-button line-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bbg-c106="" class="handle-button theme-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bbg-c106="" class="handle-button copy-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bbg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { unifiedDataChannel, uniformTypeDescriptor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">DropAnimationExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">targetImage</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">targetText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Drag Text'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">hyperLinkText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'HyperLink'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">hyperLinkContent</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'HyperLink'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">imageWidth</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">imageHeight</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">imgState</span>: <span class="hljs-title class_">Visibility</span> = <span class="hljs-title class_">Visibility</span>.<span class="hljs-property">Visible</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">videoSrc</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'resource://RAWFILE/02.mp4'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">abstractContent</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"abstract"</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">textContent</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  customDropAnimation =</li><li>    <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">animateTo</span>({ <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">curve</span>: <span class="hljs-title class_">Curve</span>.<span class="hljs-property">EaseOut</span>, <span class="hljs-attr">playMode</span>: <span class="hljs-title class_">PlayMode</span>.<span class="hljs-property">Normal</span> }, <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">imageWidth</span> = <span class="hljs-number">200</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">imageHeight</span> = <span class="hljs-number">200</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">imgState</span> = <span class="hljs-title class_">Visibility</span>.<span class="hljs-property">None</span>;</li><li>      })</li><li>    }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-comment">// $r('app.media.app_icon')需要替换为开发者所需的图像资源文件</span></li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.app_icon'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">40</span> })</li><li>          .<span class="hljs-title function_">visibility</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imgState</span>)</li><li>          .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          })</li><li>          .<span class="hljs-title function_">onDragEnd</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (event.<span class="hljs-title function_">getResult</span>() === <span class="hljs-title class_">DragResult</span>.<span class="hljs-property">DRAG_SUCCESSFUL</span>) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Drag Success'</span>);</li><li>            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.<span class="hljs-title function_">getResult</span>() === <span class="hljs-title class_">DragResult</span>.<span class="hljs-property">DRAG_FAILED</span>) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Drag failed'</span>);</li><li>            }</li><li>          })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'45%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>
</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Drag Target Area'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">180</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'rgb(240,250,255)'</span>)</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">targetImage</span>)</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imageWidth</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imageHeight</span>)</li><li>        }</li><li>        .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>        .<span class="hljs-title function_">allowDrop</span>([uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">IMAGE</span>])</li><li>        .<span class="hljs-title function_">onDrop</span>(<span class="hljs-function">(<span class="hljs-params">dragEvent: DragEvent</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">records</span>: <span class="hljs-title class_">Array</span>&lt;unifiedDataChannel.<span class="hljs-property">UnifiedRecord</span>&gt; = dragEvent.<span class="hljs-title function_">getData</span>().<span class="hljs-title function_">getRecords</span>();</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">rect</span>: <span class="hljs-title class_">Rectangle</span> = dragEvent.<span class="hljs-title function_">getPreviewRect</span>();</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">imageWidth</span> = <span class="hljs-title class_">Number</span>(rect.<span class="hljs-property">width</span>);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">imageHeight</span> = <span class="hljs-title class_">Number</span>(rect.<span class="hljs-property">height</span>);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetImage</span> = (records[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> unifiedDataChannel.<span class="hljs-property">Image</span>).<span class="hljs-property">imageUri</span>;</li><li>          dragEvent.<span class="hljs-property">useCustomDropAnimation</span> = <span class="hljs-literal">true</span>;</li><li>          dragEvent.<span class="hljs-title function_">executeDropAnimation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">customDropAnimation</span>)</li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imageWidth</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imageHeight</span>)</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'45%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-string">'5%'</span> })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="294" originwidth="335" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115747.33872710301909141839301369142164:50001231000000:2800:BCC43C8532F97EA4C066C3928A5B24B12847F1DF59145AA58F3886C5C5C72A4A.gif" width="335" height="294"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 3101px;">     <h3 id="示例3拖拽异步获取数据">示例3（拖拽异步获取数据）<i class="anchor-icon anchor-icon-link" anchorid="示例3拖拽异步获取数据" tips="复制节点链接"></i></h3>          <p>从API version 15开始，示例3展示了通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#startdataloading15">startDataLoading</a>实现拖拽异步获取数据。</p>     <div _ngcontent-bbg-c106="" class="highlight-div"><div _ngcontent-bbg-c106="" class="highlight-div-header"><div _ngcontent-bbg-c106="" class="highlight-div-header-left"><div _ngcontent-bbg-c106="" class="handle-button expand-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bbg-c106="" class="highlight-div-header-right"><div _ngcontent-bbg-c106="" class="handle-button ai-button"></div><div _ngcontent-bbg-c106="" class="handle-button line-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bbg-c106="" class="handle-button theme-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bbg-c106="" class="handle-button copy-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bbg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { unifiedDataChannel, uniformTypeDescriptor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { fileUri, fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">blockArr</span>: <span class="hljs-built_in">string</span>[] = [];</li><li>  uiContext = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>  <span class="hljs-attr">udKey</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Image拖拽'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-string">'30dp'</span>)</li><li>      <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Row</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceAround</span> }) {</li><li>        <span class="hljs-comment">// $r('app.media.startIcon')需要替换为开发者所需的图像资源文件</span></li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">(<span class="hljs-params">event: DragEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">const</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">Context</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getHostContext</span>();</li><li>            <span class="hljs-keyword">if</span> (context) {</li><li>              <span class="hljs-keyword">let</span> data = context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getMediaContentSync</span>($r(<span class="hljs-string">'app.media.startIcon'</span>).<span class="hljs-property">id</span>, <span class="hljs-number">120</span>);</li><li>              <span class="hljs-keyword">const</span> <span class="hljs-attr">arrayBuffer</span>: <span class="hljs-title class_">ArrayBuffer</span> = data.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(data.<span class="hljs-property">byteOffset</span>, data.<span class="hljs-property">byteLength</span> + data.<span class="hljs-property">byteOffset</span>);</li><li>              <span class="hljs-keyword">let</span> filePath = context.<span class="hljs-property">filesDir</span> + <span class="hljs-string">'/test.png'</span>;</li><li>              <span class="hljs-keyword">let</span> file = fs.<span class="hljs-title function_">openSync</span>(filePath, fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">CREATE</span> | fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span>);</li><li>              fs.<span class="hljs-title function_">writeSync</span>(file.<span class="hljs-property">fd</span>, arrayBuffer);</li><li>              <span class="hljs-comment">//获取图片的uri</span></li><li>              <span class="hljs-keyword">let</span> uri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(filePath);</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">image</span>: unifiedDataChannel.<span class="hljs-property">Image</span> = <span class="hljs-keyword">new</span> unifiedDataChannel.<span class="hljs-title class_">Image</span>();</li><li>              image.<span class="hljs-property">imageUri</span> = uri;</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">dragData</span>: unifiedDataChannel.<span class="hljs-property">UnifiedData</span> = <span class="hljs-keyword">new</span> unifiedDataChannel.<span class="hljs-title class_">UnifiedData</span>(image);</li><li>              (event <span class="hljs-keyword">as</span> <span class="hljs-title class_">DragEvent</span>).<span class="hljs-title function_">setData</span>(dragData);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">20</span> })</li><li>
</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'可释放区域'</span>)</li><li>            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-string">'15dp'</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-string">'10%'</span>)</li><li>          <span class="hljs-title class_">List</span>() {</li><li>            <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">blockArr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span>, index</span>) =&gt;</span> {</li><li>              <span class="hljs-title class_">ListItem</span>() {</li><li>                <span class="hljs-title class_">Image</span>(item)</li><li>                  .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>                  .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>                  .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>              }</li><li>              .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">30</span> })</li><li>            }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>          }</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'90%'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">onDrop</span>(<span class="hljs-function">(<span class="hljs-params">event?: DragEvent, extraParams?: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"enter onDrop"</span>)</li><li>            <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">pathDir</span>: <span class="hljs-built_in">string</span> = context.<span class="hljs-property">distributedFilesDir</span>;</li><li>            <span class="hljs-keyword">let</span> destUri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(pathDir);</li><li>            <span class="hljs-comment">// 创建DataProgressListener监听数据传输进度</span></li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">progressListener</span>: unifiedDataChannel.<span class="hljs-property">DataProgressListener</span> =</li><li>              <span class="hljs-function">(<span class="hljs-params">progress: unifiedDataChannel.ProgressInfo, dragData: UnifiedData | <span class="hljs-literal">null</span></span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">if</span> (dragData != <span class="hljs-literal">null</span>) {</li><li>                  <span class="hljs-comment">// 获取数据记录数组</span></li><li>                  <span class="hljs-keyword">let</span> <span class="hljs-attr">arr</span>: <span class="hljs-title class_">Array</span>&lt;unifiedDataChannel.<span class="hljs-property">UnifiedRecord</span>&gt; = dragData.<span class="hljs-title function_">getRecords</span>();</li><li>                  <span class="hljs-keyword">if</span> (arr.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>                    <span class="hljs-comment">// 检查首记录类型是否为IMAGE</span></li><li>                    <span class="hljs-keyword">if</span> (arr[<span class="hljs-number">0</span>].<span class="hljs-title function_">getType</span>() === uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">IMAGE</span>) {</li><li>                      <span class="hljs-comment">// 类型匹配成功，记录数据Uri</span></li><li>                      <span class="hljs-keyword">let</span> image = arr[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> unifiedDataChannel.<span class="hljs-property">Image</span>;</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">uri</span> = image.<span class="hljs-property">imageUri</span>;</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">blockArr</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(extraParams <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>).<span class="hljs-property">insertIndex</span>, <span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">uri</span>);</li><li>                    }</li><li>                  } <span class="hljs-keyword">else</span> {</li><li>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'dragData arr is null'</span>);</li><li>                  }</li><li>                } <span class="hljs-keyword">else</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'dragData is undefined'</span>);</li><li>                }</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`percentage: <span class="hljs-subst">${progress.progress}</span>`</span>);</li><li>              };</li><li>            <span class="hljs-comment">// 设置异步数据加载参数项</span></li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: <span class="hljs-title class_">DataSyncOptions</span> = {</li><li>              <span class="hljs-attr">destUri</span>: destUri,</li><li>              <span class="hljs-attr">fileConflictOptions</span>: unifiedDataChannel.<span class="hljs-property">FileConflictOptions</span>.<span class="hljs-property">OVERWRITE</span>,</li><li>              <span class="hljs-attr">progressIndicator</span>: unifiedDataChannel.<span class="hljs-property">ProgressIndicator</span>.<span class="hljs-property">DEFAULT</span>,</li><li>              <span class="hljs-attr">dataProgressListener</span>: progressListener,</li><li>            }</li><li>            <span class="hljs-keyword">try</span> {</li><li>              <span class="hljs-comment">// 启动数据传输</span></li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">udKey</span> = (event <span class="hljs-keyword">as</span> <span class="hljs-title class_">DragEvent</span>).<span class="hljs-title function_">startDataLoading</span>(options);</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`udKey: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.udKey}</span>`</span>);</li><li>            } <span class="hljs-keyword">catch</span> (e) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`startDataLoading errorCode: <span class="hljs-subst">${e.code}</span>, errorMessage: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>            }</li><li>          }, { <span class="hljs-attr">disableDataPrefetch</span>: <span class="hljs-literal">true</span> })</li><li>        }</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">"50%"</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">"90%"</span>)</li><li>        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'取消数据传输'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getDragController</span>().<span class="hljs-title function_">cancelDataLoading</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">udKey</span>);</li><li>          } <span class="hljs-keyword">catch</span> (e) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`cancelDataLoading errorCode: <span class="hljs-subst">${e.code}</span>, errorMessage: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4880px;">     <h3 id="示例4获取当前拖拽的屏幕id">示例4（获取当前拖拽的屏幕ID）<i class="anchor-icon anchor-icon-link" anchorid="示例4获取当前拖拽的屏幕id" tips="复制节点链接"></i></h3>          <p>从API version 20开始，示例4展示了通过onDragXXX（不支持onDragEnd）接口获取到拖拽事件，并调用拖拽事件里的<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#getdisplayid20">getDisplayId</a>接口获取屏幕ID。</p>     <div _ngcontent-bbg-c106="" class="highlight-div"><div _ngcontent-bbg-c106="" class="highlight-div-header"><div _ngcontent-bbg-c106="" class="highlight-div-header-left"><div _ngcontent-bbg-c106="" class="handle-button expand-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bbg-c106="" class="highlight-div-header-right"><div _ngcontent-bbg-c106="" class="handle-button ai-button"></div><div _ngcontent-bbg-c106="" class="handle-button line-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bbg-c106="" class="handle-button theme-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bbg-c106="" class="handle-button copy-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bbg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { unifiedDataChannel, uniformTypeDescriptor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">targetImage</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">imageWidth</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">imageHeight</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">imgState</span>: <span class="hljs-title class_">Visibility</span> = <span class="hljs-title class_">Visibility</span>.<span class="hljs-property">Visible</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">backGroundColor</span>: <span class="hljs-title class_">Color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Transparent</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">startDisplayId</span>: <span class="hljs-built_in">number</span> = -<span class="hljs-number">1</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">enterDisplayId</span>: <span class="hljs-built_in">number</span> = -<span class="hljs-number">1</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">moveDisplayId</span>: <span class="hljs-built_in">number</span> = -<span class="hljs-number">1</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">leaveDisplayId</span>: <span class="hljs-built_in">number</span> = -<span class="hljs-number">1</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">dropDisplayId</span>: <span class="hljs-built_in">number</span> = -<span class="hljs-number">1</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">pixelMapBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// $r('app.media.app_icon')需要替换为开发者所需的图像资源文件</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.app_icon'</span>))</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">120</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">120</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Yellow</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">getDataFromUdmfRetry</span>(<span class="hljs-params">event: DragEvent, callback: (data: DragEvent) =&gt; <span class="hljs-built_in">void</span></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">UnifiedData</span> = event.<span class="hljs-title function_">getData</span>();</li><li>      <span class="hljs-keyword">if</span> (!data) {</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>      }</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">records</span>: <span class="hljs-title class_">Array</span>&lt;unifiedDataChannel.<span class="hljs-property">UnifiedRecord</span>&gt; = data.<span class="hljs-title function_">getRecords</span>();</li><li>      <span class="hljs-keyword">if</span> (!records || records.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>      }</li><li>      <span class="hljs-title function_">callback</span>(event);</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getData failed, code = <span class="hljs-subst">${(e <span class="hljs-keyword">as</span> BusinessError).code}</span>, message = <span class="hljs-subst">${(e <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">getDataFromUdmf</span>(<span class="hljs-params">event: DragEvent, callback: (data: DragEvent) =&gt; <span class="hljs-built_in">void</span></span>) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDataFromUdmfRetry</span>(event, callback)) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDataFromUdmfRetry</span>(event, callback);</li><li>    }, <span class="hljs-number">1500</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title class_">PreDragChange</span>(<span class="hljs-attr">preDragStatus</span>: <span class="hljs-title class_">PreDragStatus</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (preDragStatus == <span class="hljs-title class_">PreDragStatus</span>.<span class="hljs-property">READY_TO_TRIGGER_DRAG_ACTION</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">backGroundColor</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>;</li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (preDragStatus == <span class="hljs-title class_">PreDragStatus</span>.<span class="hljs-property">ACTION_CANCELED_BEFORE_DRAG</span></li><li>      || preDragStatus == <span class="hljs-title class_">PreDragStatus</span>.<span class="hljs-property">PREVIEW_LANDING_FINISHED</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">backGroundColor</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>;</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'start Drag'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#008888'</span>)</li><li>        <span class="hljs-comment">// $r('app.media.startIcon')需要替换为开发者所需的图像资源文件</span></li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>          .<span class="hljs-title function_">visibility</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imgState</span>)</li><li>          .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> id = event.<span class="hljs-title function_">getDisplayId</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">startDisplayId</span> = id;</li><li>          })</li><li>
</li><li>          .<span class="hljs-title function_">onDragEnd</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (event.<span class="hljs-title function_">getResult</span>() === <span class="hljs-title class_">DragResult</span>.<span class="hljs-property">DRAG_SUCCESSFUL</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">duration</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Drag Success'</span> });</li><li>            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.<span class="hljs-title function_">getResult</span>() === <span class="hljs-title class_">DragResult</span>.<span class="hljs-property">DRAG_FAILED</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">duration</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Drag failed'</span> });</li><li>            }</li><li>          })</li><li>
</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'displayID in onDragStart: '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">startDisplayId</span>.<span class="hljs-title function_">toString</span>())</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'displayID in onDragEnter: '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">enterDisplayId</span>.<span class="hljs-title function_">toString</span>())</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'displayID in onDragMove: '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">moveDisplayId</span>.<span class="hljs-title function_">toString</span>())</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'displayID in onDragLeave: '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">leaveDisplayId</span>.<span class="hljs-title function_">toString</span>())</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'displayID in onDrop: '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">dropDisplayId</span>.<span class="hljs-title function_">toString</span>())</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>          .<span class="hljs-title function_">onPreDrag</span>(<span class="hljs-function">(<span class="hljs-params">status: PreDragStatus</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">PreDragChange</span>(status);</li><li>          })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'45%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>
</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Drag Target Area'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#008888'</span>)</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">targetImage</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imageWidth</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imageHeight</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">allowDrop</span>([uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">IMAGE</span>])</li><li>          .<span class="hljs-title function_">onDragEnter</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> id = event.<span class="hljs-title function_">getDisplayId</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">enterDisplayId</span> = id;</li><li>          })</li><li>          .<span class="hljs-title function_">onDragMove</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> id = event.<span class="hljs-title function_">getDisplayId</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">moveDisplayId</span> = id;</li><li>          })</li><li>          .<span class="hljs-title function_">onDragLeave</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> id = event.<span class="hljs-title function_">getDisplayId</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">leaveDisplayId</span> = id;</li><li>          })</li><li>          .<span class="hljs-title function_">onDrop</span>(<span class="hljs-function">(<span class="hljs-params">dragEvent: DragEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> id = dragEvent.<span class="hljs-title function_">getDisplayId</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dropDisplayId</span> = id;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDataFromUdmf</span>((dragEvent <span class="hljs-keyword">as</span> <span class="hljs-title class_">DragEvent</span>), <span class="hljs-function">(<span class="hljs-params">event: DragEvent</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">records</span>: <span class="hljs-title class_">Array</span>&lt;unifiedDataChannel.<span class="hljs-property">UnifiedRecord</span>&gt; = event.<span class="hljs-title function_">getData</span>().<span class="hljs-title function_">getRecords</span>();</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">rect</span>: <span class="hljs-title class_">Rectangle</span> = event.<span class="hljs-title function_">getPreviewRect</span>();</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">imageWidth</span> = <span class="hljs-title class_">Number</span>(rect.<span class="hljs-property">width</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">imageHeight</span> = <span class="hljs-title class_">Number</span>(rect.<span class="hljs-property">height</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetImage</span> = (records[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> unifiedDataChannel.<span class="hljs-property">Image</span>).<span class="hljs-property">imageUri</span>;</li><li>              event.<span class="hljs-property">useCustomDropAnimation</span> = <span class="hljs-literal">false</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">imgState</span> = <span class="hljs-title class_">Visibility</span>.<span class="hljs-property">None</span>;</li><li>              event.<span class="hljs-title function_">setResult</span>(<span class="hljs-title class_">DragResult</span>.<span class="hljs-property">DRAG_SUCCESSFUL</span>);</li><li>            })</li><li>          })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'45%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-string">'5%'</span> })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="536" originwidth="544" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115747.49870259948104191757352557121026:50001231000000:2800:511DA62CE4B36880A3BA368FDE4DFB9100A9A60BFF0FB94221593155661F56CF.png" width="544" height="536"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2692px;">     <h3 id="示例5获取包名和是否是跨设备">示例5（获取包名和是否是跨设备）<i class="anchor-icon anchor-icon-link" anchorid="示例5获取包名和是否是跨设备" tips="复制节点链接"></i></h3>          <p>从API version 20开始，示例5展示了通过onDragXXX接口获取到拖拽事件，调用拖拽事件里的<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#getdragsource20">getDragSource</a>接口获取包名，调用isRemote接口获取是否是跨设备。</p>     <div _ngcontent-bbg-c106="" class="highlight-div"><div _ngcontent-bbg-c106="" class="highlight-div-header"><div _ngcontent-bbg-c106="" class="highlight-div-header-left"><div _ngcontent-bbg-c106="" class="handle-button expand-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bbg-c106="" class="highlight-div-header-right"><div _ngcontent-bbg-c106="" class="handle-button ai-button"></div><div _ngcontent-bbg-c106="" class="handle-button line-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bbg-c106="" class="handle-button theme-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bbg-c106="" class="handle-button copy-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bbg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">targetImage</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">startDragSource</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">startIsRemote</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">enterDragSource</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">enterIsRemote</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'start Drag Area'</span>)</li><li>            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>            .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>            .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#008888'</span>)</li><li>          <span class="hljs-comment">// $r('app.media.startIcon')需要替换为开发者所需的图像资源文件</span></li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>            .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">startDragSource</span> = (event <span class="hljs-keyword">as</span> <span class="hljs-title class_">DragEvent</span>).<span class="hljs-title function_">getDragSource</span>();</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIsRemote</span> = (event <span class="hljs-keyword">as</span> <span class="hljs-title class_">DragEvent</span>).<span class="hljs-title function_">isRemote</span>();</li><li>            })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>            .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>            .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>        }</li><li>        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'45%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'50%'</span>)</li><li>
</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Drag Target Area'</span>)</li><li>            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>            .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>            .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#008888'</span>)</li><li>          <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">targetImage</span>)</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>            .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>            .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>            .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>            .<span class="hljs-title function_">onDragEnter</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">enterDragSource</span> = (event <span class="hljs-keyword">as</span> <span class="hljs-title class_">DragEvent</span>).<span class="hljs-title function_">getDragSource</span>();</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">enterIsRemote</span> = (event <span class="hljs-keyword">as</span> <span class="hljs-title class_">DragEvent</span>).<span class="hljs-title function_">isRemote</span>();</li><li>            })</li><li>            .<span class="hljs-title function_">onDrop</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            })</li><li>        }</li><li>        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'45%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'50%'</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-string">'5%'</span> })</li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'70%'</span>)</li><li>
</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'onDragStart dragSource: '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">startDragSource</span>.<span class="hljs-title function_">toString</span>() + <span class="hljs-string">'\n'</span> + <span class="hljs-string">'onDragStart isRemote: '</span> +</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIsRemote</span>.<span class="hljs-title function_">toString</span>())</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'onDragEnter dragSource: '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">enterDragSource</span>.<span class="hljs-title function_">toString</span>() + <span class="hljs-string">'\n'</span> + <span class="hljs-string">'onDragEnter isRemote: '</span> +</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">enterIsRemote</span>.<span class="hljs-title function_">toString</span>())</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="676" originwidth="538" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115747.08760335165784593887414520927026:50001231000000:2800:5ABDB4DC5503F5DE61408A4C0D22599735D4EBE0DF1E9EDA73B95A7687B288F9.png" width="538" height="676"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2276px;">     <h3 id="示例6拖拽支持悬停检测">示例6（拖拽支持悬停检测）<i class="anchor-icon anchor-icon-link" anchorid="示例6拖拽支持悬停检测" tips="复制节点链接"></i></h3>          <p>从API version 20开始，示例6展示了通过<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragspringloading20">onDragSpringLoading</a>接口注册回调，并调用<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#springloadingcontext20">SpringLoadingContext</a>接口获取上下文（当前状态、通知序列）。</p>     <div _ngcontent-bbg-c106="" class="highlight-div"><div _ngcontent-bbg-c106="" class="highlight-div-header"><div _ngcontent-bbg-c106="" class="highlight-div-header-left"><div _ngcontent-bbg-c106="" class="handle-button expand-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bbg-c106="" class="highlight-div-header-right"><div _ngcontent-bbg-c106="" class="handle-button ai-button"></div><div _ngcontent-bbg-c106="" class="handle-button line-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bbg-c106="" class="handle-button theme-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bbg-c106="" class="handle-button copy-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bbg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">targetText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Drag Text'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">state</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">currentNotifySequence</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">DragSpringLoadingConfiguration</span> = {</li><li>    <span class="hljs-attr">stillTimeLimit</span>: <span class="hljs-number">200</span>,</li><li>    <span class="hljs-attr">updateInterval</span>: <span class="hljs-number">300</span>,</li><li>    <span class="hljs-attr">updateNotifyCount</span>: <span class="hljs-number">4</span>,</li><li>    <span class="hljs-attr">updateToFinishInterval</span>: <span class="hljs-number">300</span></li><li>  };</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'start Drag'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#008888'</span>)</li><li>        <span class="hljs-comment">// $r('app.media.startIcon')需要替换为开发者所需的图像资源文件</span></li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>          .<span class="hljs-title function_">id</span>(<span class="hljs-string">"ori_image"</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'当前状态是： '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'当前通知序列是： '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentNotifySequence</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'45%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>
</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Drag Target Area'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#008888'</span>)</li><li>          .<span class="hljs-title function_">id</span>(<span class="hljs-string">"text"</span>)</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-string">""</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> })</li><li>          .<span class="hljs-title function_">onDragSpringLoading</span>(<span class="hljs-function">(<span class="hljs-params">context: SpringLoadingContext</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = context.<span class="hljs-property">state</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentNotifySequence</span> = context.<span class="hljs-property">currentNotifySequence</span>;</li><li>          }, <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'45%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-string">'5%'</span> })</li><li>      .<span class="hljs-title function_">onDragSpringLoading</span>(<span class="hljs-function">(<span class="hljs-params">context: SpringLoadingContext</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = context.<span class="hljs-property">state</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentNotifySequence</span> = context.<span class="hljs-property">currentNotifySequence</span>;</li><li>      }, <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>)</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">"column"</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Grey</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="212" originwidth="386" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115747.86054307368429460771249254283049:50001231000000:2800:EE2E368B9762004D5F74483717436A9875C088983189A614CC8C5C282DEE673E.gif" width="386" height="212"></span></p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4535px;">     <h3 id="示例7拖起方延迟提供数据">示例7（拖起方延迟提供数据）<i class="anchor-icon anchor-icon-link" anchorid="示例7拖起方延迟提供数据" tips="复制节点链接"></i></h3>          <p>从API version 20开始，示例7展示了在<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragstart">onDragStart</a>中调用<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#setdataloadparams20">setDataLoadParams</a>延迟提供数据接口，并在<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondrop">onDrop</a>中调用<a href="/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#startdataloading15">startDataLoading</a>异步获取数据接口。</p>     <div _ngcontent-bbg-c106="" class="highlight-div"><div _ngcontent-bbg-c106="" class="highlight-div-header"><div _ngcontent-bbg-c106="" class="highlight-div-header-left"><div _ngcontent-bbg-c106="" class="handle-button expand-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bbg-c106="" class="highlight-div-header-right"><div _ngcontent-bbg-c106="" class="handle-button ai-button"></div><div _ngcontent-bbg-c106="" class="handle-button line-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bbg-c106="" class="handle-button theme-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bbg-c106="" class="handle-button copy-button"><div _ngcontent-bbg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bbg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { unifiedDataChannel, uniformDataStruct, uniformTypeDescriptor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { fileUri, fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">VideoExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">blockArr</span>: <span class="hljs-built_in">string</span>[] = [];</li><li>  uiContext = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>  <span class="hljs-attr">udKey</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'video拖拽'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-string">'30dp'</span>)</li><li>      <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Row</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceAround</span> }) {</li><li>        <span class="hljs-comment">// $rawfile('test1.mp4')需要替换为开发者所需的资源文件</span></li><li>        <span class="hljs-title class_">Video</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'test1.mp4'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">VideoController</span>() })</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">(<span class="hljs-params">event: DragEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">const</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">Context</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getHostContext</span>();</li><li>            <span class="hljs-keyword">if</span> (context) {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">loadHandler</span>: unifiedDataChannel.<span class="hljs-property">DataLoadHandler</span> = <span class="hljs-function">(<span class="hljs-params">acceptableInfo</span>) =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`acceptableInfo recordCount <span class="hljs-subst">${acceptableInfo?.recordCount}</span>`</span>);</li><li>                <span class="hljs-keyword">if</span> (acceptableInfo?.<span class="hljs-property">types</span>) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`acceptableInfo types <span class="hljs-subst">${<span class="hljs-built_in">Array</span>.<span class="hljs-keyword">from</span>(acceptableInfo.types)}</span>`</span>);</li><li>                } <span class="hljs-keyword">else</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'acceptableInfo types is undefined'</span>);</li><li>                }</li><li>                <span class="hljs-keyword">let</span> data = context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFdSync</span>(<span class="hljs-string">'test1.mp4'</span>);</li><li>                <span class="hljs-keyword">let</span> filePath = context.<span class="hljs-property">filesDir</span> + <span class="hljs-string">'/test1.mp4'</span>;</li><li>                <span class="hljs-keyword">let</span> <span class="hljs-attr">file</span>: fs.<span class="hljs-property">File</span> = <span class="hljs-literal">null</span>!;</li><li>                <span class="hljs-keyword">try</span> {</li><li>                  file = fs.<span class="hljs-title function_">openSync</span>(filePath, fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">CREATE</span> | fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span>);</li><li>                  <span class="hljs-keyword">let</span> bufferSize = data.<span class="hljs-property">length</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;</li><li>                  <span class="hljs-keyword">let</span> buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(bufferSize);</li><li>                  fs.<span class="hljs-title function_">readSync</span>(data.<span class="hljs-property">fd</span>, buf, { <span class="hljs-attr">offset</span>: data.<span class="hljs-property">offset</span>, <span class="hljs-attr">length</span>: bufferSize });</li><li>                  fs.<span class="hljs-title function_">writeSync</span>(file.<span class="hljs-property">fd</span>, buf, { <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">length</span>: bufferSize });</li><li>                } <span class="hljs-keyword">catch</span> (error) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`openSync errorCode: <span class="hljs-subst">${error.code}</span>, errorMessage: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>                } <span class="hljs-keyword">finally</span> {</li><li>                  fs.<span class="hljs-title function_">closeSync</span>(file.<span class="hljs-property">fd</span>);</li><li>                }</li><li>                context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">closeRawFdSync</span>(<span class="hljs-string">'test1.mp4'</span>)</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">uri</span> = fileUri.<span class="hljs-title function_">getUriFromPath</span>(filePath);</li><li>                <span class="hljs-keyword">let</span> <span class="hljs-attr">videoMp</span>: uniformDataStruct.<span class="hljs-property">FileUri</span> = {</li><li>                  <span class="hljs-attr">uniformDataType</span>: <span class="hljs-string">'general.file-uri'</span>,</li><li>                  <span class="hljs-attr">oriUri</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uri</span>,</li><li>                  <span class="hljs-attr">fileType</span>: <span class="hljs-string">'general.video'</span>,</li><li>                }</li><li>                <span class="hljs-keyword">let</span> unifiedRecord = <span class="hljs-keyword">new</span> unifiedDataChannel.<span class="hljs-title class_">UnifiedRecord</span>();</li><li>                <span class="hljs-keyword">let</span> unifiedData = <span class="hljs-keyword">new</span> unifiedDataChannel.<span class="hljs-title class_">UnifiedData</span>();</li><li>                unifiedRecord.<span class="hljs-title function_">addEntry</span>(uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">FILE_URI</span>, videoMp);</li><li>                unifiedData.<span class="hljs-title function_">addRecord</span>(unifiedRecord);</li><li>                <span class="hljs-keyword">return</span> unifiedData;</li><li>              }</li><li>              (event <span class="hljs-keyword">as</span> <span class="hljs-title class_">DragEvent</span>).<span class="hljs-title function_">setDataLoadParams</span>({</li><li>                <span class="hljs-attr">loadHandler</span>: loadHandler,</li><li>                <span class="hljs-attr">dataLoadInfo</span>: { <span class="hljs-attr">types</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">FILE_URI</span>]), <span class="hljs-attr">recordCount</span>: <span class="hljs-number">1</span> }</li><li>              });</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">20</span> })</li><li>
</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'可释放区域'</span>)</li><li>            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-string">'15dp'</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-string">'10%'</span>)</li><li>          <span class="hljs-title class_">List</span>() {</li><li>            <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">blockArr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span>, index</span>) =&gt;</span> {</li><li>              <span class="hljs-title class_">ListItem</span>() {</li><li>                <span class="hljs-title class_">Video</span>({ <span class="hljs-attr">src</span>: item, <span class="hljs-attr">controller</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">VideoController</span>() })</li><li>                  .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>                  .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>                  .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>              }</li><li>              .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">30</span> })</li><li>            }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>          }</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'90%'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">onDrop</span>(<span class="hljs-function">(<span class="hljs-params">event: DragEvent, extraParams?: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">pathDir</span>: <span class="hljs-built_in">string</span> = context.<span class="hljs-property">distributedFilesDir</span>;</li><li>            <span class="hljs-keyword">let</span> destUri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(pathDir);</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">progressListener</span>: unifiedDataChannel.<span class="hljs-property">DataProgressListener</span> =</li><li>              <span class="hljs-function">(<span class="hljs-params">progress: unifiedDataChannel.ProgressInfo, dragData: UnifiedData | <span class="hljs-literal">null</span></span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">if</span> (dragData != <span class="hljs-literal">null</span>) {</li><li>                  <span class="hljs-keyword">let</span> <span class="hljs-attr">arr</span>: <span class="hljs-title class_">Array</span>&lt;unifiedDataChannel.<span class="hljs-property">UnifiedRecord</span>&gt; = dragData.<span class="hljs-title function_">getRecords</span>();</li><li>                  <span class="hljs-keyword">if</span> (arr.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>                    <span class="hljs-keyword">if</span> (arr[<span class="hljs-number">0</span>].<span class="hljs-title function_">getType</span>() === uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">VIDEO</span>) {</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">blockArr</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(extraParams <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>).<span class="hljs-property">insertIndex</span>, <span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">uri</span>);</li><li>                    }</li><li>                  } <span class="hljs-keyword">else</span> {</li><li>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'dragData arr is null'</span>);</li><li>                  }</li><li>                } <span class="hljs-keyword">else</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'dragData is undefined'</span>);</li><li>                }</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`percentage: <span class="hljs-subst">${progress.progress}</span>`</span>);</li><li>              };</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">info</span>: unifiedDataChannel.<span class="hljs-property">DataLoadInfo</span> =</li><li>              { <span class="hljs-attr">types</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">VIDEO</span>]), <span class="hljs-attr">recordCount</span>: <span class="hljs-number">100</span> }</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: <span class="hljs-title class_">DataSyncOptions</span> = {</li><li>              <span class="hljs-attr">destUri</span>: destUri,</li><li>              <span class="hljs-attr">fileConflictOptions</span>: unifiedDataChannel.<span class="hljs-property">FileConflictOptions</span>.<span class="hljs-property">OVERWRITE</span>,</li><li>              <span class="hljs-attr">progressIndicator</span>: unifiedDataChannel.<span class="hljs-property">ProgressIndicator</span>.<span class="hljs-property">DEFAULT</span>,</li><li>              <span class="hljs-attr">dataProgressListener</span>: progressListener,</li><li>              <span class="hljs-attr">acceptableInfo</span>: info,</li><li>            }</li><li>            <span class="hljs-keyword">try</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">udKey</span> = (event <span class="hljs-keyword">as</span> <span class="hljs-title class_">DragEvent</span>).<span class="hljs-title function_">startDataLoading</span>(options);</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`udKey: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.udKey}</span>`</span>);</li><li>            } <span class="hljs-keyword">catch</span> (e) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`startDataLoading errorCode: <span class="hljs-subst">${e.code}</span>, errorMessage: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>            }</li><li>          }, { <span class="hljs-attr">disableDataPrefetch</span>: <span class="hljs-literal">true</span> })</li><li>        }</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">"50%"</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">"90%"</span>)</li><li>        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'取消数据传输'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getDragController</span>().<span class="hljs-title function_">cancelDataLoading</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">udKey</span>);</li><li>          } <span class="hljs-keyword">catch</span> (e) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`cancelDataLoading errorCode: <span class="hljs-subst">${e.code}</span>, errorMessage: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="887" originwidth="599" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115747.44168263398416892150037683918778:50001231000000:2800:1265CBC13C8D7D1EFA7F865F7BBCECD888F91DAFFD98A74F96E6397356F42156.gif" width="599" height="887"></span></p>    </div>   </div>   <div></div></div>