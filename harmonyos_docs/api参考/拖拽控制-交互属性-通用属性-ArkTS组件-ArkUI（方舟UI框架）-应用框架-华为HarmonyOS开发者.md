<h1 _ngcontent-nxu-c119="" class="doc-title ng-star-inserted" title="拖拽控制"> 拖拽控制 </h1>

<div _ngcontent-nxu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>组件提供了一些属性和接口，可用于配置组件对拖拽事件的响应行为，或影响系统对拖拽事件的处理方式，包括是否允许被拖拽，自定义拖拽预览图的外观等。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>从API version 10开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>     </div></div></div>    <p>ArkUI框架对以下组件实现了默认的拖拽能力，支持对数据的拖出或拖入响应。开发者也可以通过实现通用拖拽事件来自定义拖拽响应。</p>    <ul>     <li>      <p>默认支持拖出能力的组件（可从组件上拖出数据）：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-search">Search</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textinput">TextInput</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textarea">TextArea</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor">RichEditor</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text">Text</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image">Image</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-hyperlink">Hyperlink</a>，开发者可通过设置这些组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#draggable">draggable</a>属性来控制对默认拖拽能力的使用。</p></li>     <li>      <p>默认支持拖入能力的组件（目标组件可响应拖入数据）：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-search">Search</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textinput">TextInput</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textarea">TextArea</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor">RichEditor</a>，开发者可通过设置这些组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#allowdrop">allowDrop</a>属性为null来禁用对默认拖入能力的支持。</p></li>     <li>      <p>不支持拖出能力的组件（不可从组件上拖出数据）：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-arcscrollbar">ArcScrollBar</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-multinavigation">MultiNavigation</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-toolbaritem">ToolBarItem</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-arcslider">ArcSlider</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-span">Span</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-imagespan">ImageSpan</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-containerspan">ContainerSpan</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-symbolspan">SymbolSpan</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-arc-alphabet-indexer">ArcAlphabetIndexer</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-components-offscreencanvas">OffscreenCanvas</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-menu">Menu</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-menuitem">MenuItem</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-menuitemgroup">MenuItemGroup</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-security-components-pastebutton">PasteButton</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-security-components-savebutton">SaveButton</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-with-theme">WithTheme</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-atomicservice-navpushpathhelper">NavPushPathHelper</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-components-contentslot">ContentSlot</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-chip">Chip</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-exceptionprompt">ExceptionPrompt</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-filter">Filter</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-formmenu">FormMenu</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-popup">Popup</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-selectionmenu">SelectionMenu</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-splitlayout">SplitLayout</a>以及所有弹窗类组件。</p></li>    </ul>    <p>Text、TextInput、TextArea、Hyperlink、Image、RichEditor和Web组件的draggable属性默认为true，默认支持拖出能力。</p>    <p>其他支持拖出能力的组件需要开发者将draggable属性设置为true，并在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragstart">onDragStart</a>等接口中实现数据传输相关内容，才能正确处理拖拽。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>Text组件需配合<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text#copyoption9">copyOption</a>一起使用，设置copyOptions为CopyOptions.InApp或者CopyOptions.LocalDevice。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="allowdrop" device-type="phone,2in1,tablet,wearable,tv">allowDrop<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="allowdrop" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>allowDrop(value: Array&lt;UniformDataType&gt; | null): T</p>     <p>设置该组件上允许落入的数据类型。如果未设置allowDrop，组件将默认接受所有数据类型。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#uniformdatatype">UniformDataType</a>&gt; | null<sup>12+</sup></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设置该组件上允许落入的数据类型。从API version 12开始，允许设置成null使该组件不接受所有的数据类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回当前组件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="draggable" device-type="phone,2in1,tablet,wearable,tv">draggable<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="draggable" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>draggable(value: boolean): T</p>     <p>设置该组件是否允许拖拽。默认情况下，组件不允许拖拽。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设置该组件是否允许进行拖拽。true表示允许拖拽，false表示不允许拖拽。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回当前组件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="dragpreview11" device-type="phone,2in1,tablet,wearable,tv">dragPreview<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dragpreview11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>dragPreview(value: CustomBuilder | DragItemInfo | string): T</p>     <p>设置组件浮起和拖拽过程中的预览图。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#custombuilder8">CustomBuilder</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragiteminfo">DragItemInfo</a> | string<sup>12+</sup></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>设置组件浮起和拖拽过程中的预览图，仅在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragstart">onDragStart</a>拖拽方式中有效。</p>          <p>当组件支持拖拽并同时设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#bindcontextmenu8">bindContextMenu</a>的预览图时，则长按浮起的预览图以<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#bindcontextmenu8">bindContextMenu</a>设置的预览图为准。开发者在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragstart">onDragStart</a>中返回的背板图优先级低于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreview11">dragPreview</a>设置的预览图，当设置了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreview11">dragPreview</a>预览图时，拖拽过程中的背板图使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreview11">dragPreview</a>预览图。由于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#custombuilder8">CustomBuilder</a>需要离线渲染之后才能使用，因此存在一定的性能开销和时延，推荐优先使用 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragiteminfo">DragItemInfo</a>中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>方式。</p>          <p>当传入类型为string的id时，则将id对应组件的截图作为预览图。如果id对应的组件无法查找到，或者id对应的组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#visibility">Visibility</a>属性设置成None/Hidden，则对组件自身进行截图作为拖拽预览图。目前截图不含有亮度、阴影、模糊和旋转等视觉效果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回当前组件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="dragpreview15" device-type="phone,2in1,tablet,wearable,tv">dragPreview<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dragpreview15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>dragPreview(preview: CustomBuilder | DragItemInfo | string, config?: PreviewConfiguration):T</p>     <p>自定义组件拖拽过程中的预览图，仅用于设置浮起效果或者禁用浮起效果。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>该接口不支持在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-attribute-modifier#attributemodifier">attributeModifier</a>中调用。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">preview</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#custombuilder8">CustomBuilder</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragiteminfo">DragItemInfo</a> | string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>设置组件浮起和拖拽过程中的预览图，仅在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragstart">onDragStart</a>拖拽方式中有效。</p>          <p>当组件支持拖拽并同时设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#bindcontextmenu8">bindContextMenu</a>的预览图时，则长按浮起的预览图以<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#bindcontextmenu8">bindContextMenu</a>设置的预览图为准。开发者在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragstart">onDragStart</a>中返回的背板图优先级低于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreview11">dragPreview</a>设置的预览图，当设置了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreview11">dragPreview</a>预览图时，拖拽过程中的背板图使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreview11">dragPreview</a>预览图。由于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#custombuilder8">CustomBuilder</a>需要离线渲染之后才能使用，因此存在一定的性能开销和时延，推荐优先使用 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragiteminfo">DragItemInfo</a>中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>方式。</p>          <p>当传入类型为string的id时，则将id对应组件的截图作为预览图。如果id对应的组件无法查找到，或者id对应的组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#visibility">Visibility</a>属性设置成None/Hidden，则对组件自身进行截图作为拖拽预览图。目前截图不含有亮度、阴影、模糊和旋转等视觉效果。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#previewconfiguration15">PreviewConfiguration</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>对自定义拖拽过程中的预览图进行配置。</p>          <p>只对<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreview11">dragPreview</a>中的预览生效。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回当前组件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="dragpreviewoptions11" device-type="phone,2in1,tablet,wearable,tv">dragPreviewOptions<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dragpreviewoptions11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>dragPreviewOptions(value: DragPreviewOptions, options?: DragInteractionOptions): T</p>     <p>设置拖拽过程中预览图处理模式，数量角标的显示以及预览图浮起的交互模式。不支持onItemDragStart拖拽方式。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 20开始，该接口支持在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-attribute-modifier#attributemodifier">attributeModifier</a>中调用。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreviewoptions11-1">DragPreviewOptions</a><sup>11+</sup></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设置拖拽过程中预览图处理模式及数量角标的显示。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options<sup>12+</sup></td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#draginteractionoptions12">DragInteractionOptions</a><sup>12+</sup></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>设置拖拽过程中预览图浮起的交互模式。</p>          <p>默认值：空</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回当前组件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="dragpreviewoptions11-1" device-type="phone,2in1,tablet,wearable,tv">DragPreviewOptions<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dragpreviewoptions11-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">mode</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreviewmode11枚举说明">DragPreviewMode</a> | Array&lt;<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreviewmode11枚举说明">DragPreviewMode</a>&gt;<sup>12+</sup></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>表示拖拽过程中背板图处理模式。</p>          <p>默认值：DragPreviewMode.AUTO</p>          <p>当组件同时设置DragPreviewMode.AUTO和其它枚举值时，以DragPreviewMode.AUTO为准，其它枚举值设置无效。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">numberBadge<sup>12+</sup></td>         <td class="cellrowborder" width="20%">boolean | number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>控制数量角标是否显示，或强制设置显示的数量。当设置数量角标时取值范围为[0，2<sup>31</sup>-1]，超过取值范围时会按默认状态处理。当设置为浮点数时，只显示整数部分。</p>          <p><strong>说明：</strong></p>          <p>在多选拖拽场景，需通过该接口设置拖拽对象的数量。</p>          <p>默认值：true。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">modifier<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#imagemodifier12">ImageModifier</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>用于配置拖拽背板图的样式Modifier对象，可使用图片组件所支持的属性和样式来配置背板图样式(参考示例6)，当前支持透明度，阴影，背景模糊度，圆角。文本拖拽只支持默认效果，不支持通过modifier进行自定义。</p>          <p>1.透明度</p>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-opacity#opacity">opacity</a>设置不透明度，不透明度的取值范围为0-1。设置0或不设置时采用默认值0.95，设置1或异常值时不透明。</p>          <p>2.阴影</p>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-image-effect#shadow">shadow</a>设置阴影。</p>          <p>3.背景模糊度</p>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-background#backgroundeffect11">backgroundEffect</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-background#backgroundblurstyle9">backgroundBlurStyle</a>设置背景模糊度，如果两者同时设置，以后设置的属性为准。</p>          <p>4.圆角</p>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-border#border">border</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-border#borderradius">borderRadius</a>设置圆角，当同时在mode和modifier中设置圆角，mode设置的圆角显示优先级低于modifier设置。</p>          <p>默认值：空，无法修改属性。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">sizeChangeEffect<sup>19+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#draggingsizechangeeffect19枚举说明">DraggingSizeChangeEffect</a><sup>19+</sup></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>用于选择长按浮起图与拖拽预览图过渡效果。</p>          <p>默认值：DraggingSizeChangeEffect.DEFAULT。</p>          <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="dragpreviewmode11枚举说明" device-type="phone,2in1,tablet,wearable,tv">DragPreviewMode<sup>11+</sup>枚举说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dragpreviewmode11枚举说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>设置拖拽预览图的显示模式。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">AUTO</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>系统根据拖拽场景自动改变跟手点位置，根据规则自动对拖拽背板图进行缩放变换等。</p>          <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DISABLE_SCALE</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>禁用系统对拖拽背板图的缩放行为。</p>          <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">ENABLE_DEFAULT_SHADOW<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>启用非文本类组件默认阴影效果。</p>          <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">ENABLE_DEFAULT_RADIUS<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>启用非文本类组件统一圆角效果，默认值12vp。当应用自身设置的圆角值大于默认值或modifier设置的圆角时，则显示应用自定义圆角效果。</p>          <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">ENABLE_DRAG_ITEM_GRAY_EFFECT<sup>18+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>启用支持原拖拽对象灰显（透明度）效果，对文本内容拖拽不生效。用户拖起时原对象显示灰显效果，释放时原对象恢复原有效果。开启默认灰显效果后，不建议在拖拽开始后自行修改透明度，如果开发者在拖拽发起后自行修改应用透明度，则灰显效果将被覆盖，且在结束拖拽时无法正确恢复原始透明度效果。</p>          <p><strong>元服务API</strong>：从API version 18开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">ENABLE_MULTI_TILE_EFFECT<sup>18+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">6</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>启用支持多选对象鼠标拖拽不聚拢效果，各拖拽图显示在其原始位置的相对位置，当满足多选的情况下且isMultiSelectionEnabled为true时该参数才生效。不聚拢效果优先级高于<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreview11">dragPreview</a>。不支持二次拖拽、圆角和缩放设置。</p>          <p><strong>元服务API</strong>：从API version 18开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">ENABLE_TOUCH_POINT_CALCULATION_BASED_ON_FINAL_PREVIEW<sup>19+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">7</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>启用支持以拖拽预览图初始尺寸计算跟手点位置，长按浮起图和拖拽图不一致时使用。鼠标拖拽，设置DragPreviewMode.ENABLE_MULTI_TILE_EFFECT时不生效。</p>          <p><strong>元服务API</strong>：从API version 19开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="draggingsizechangeeffect19枚举说明" device-type="phone,2in1,tablet,wearable,tv">DraggingSizeChangeEffect<sup>19+</sup>枚举说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="draggingsizechangeeffect19枚举说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>当一个节点上同时设置长按浮起预览（参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#bindcontextmenu12">bindContextMenu</a>）与拖拽时，使用该字段设置长按浮起预览图与拖拽预览图过渡动效方式。</p>     <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">DEFAULT</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">发起拖拽时直接从菜单预览图切换为最终尺寸的拖拽预览图。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SIZE_TRANSITION</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">发起拖拽时，由菜单预览图直接切换为拖拽预览图，尺寸逐步从菜单预览图尺寸过渡到最终预览图尺寸，设置了<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreviewmode11枚举说明">DragPreviewMode</a>中的DISABLE_SCALE枚举值时尺寸过渡不生效。这在长按浮起预览图与拖拽预览图相同时使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SIZE_CONTENT_TRANSITION</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">发起拖拽时，由菜单预览图逐步过渡切换为最终拖拽预览图，设置<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreviewmode11枚举说明">DragPreviewMode</a>中的DISABLE_SCALE时尺寸过渡不生效。这常用于菜单预览图与拖拽预览图差异较大时使用，过渡效果包含内容透明度及尺寸变化。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="draginteractionoptions12" device-type="phone,2in1,tablet,wearable,tv">DragInteractionOptions<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="draginteractionoptions12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">isMultiSelectionEnabled</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>表示拖拽过程中背板图是否支持多选聚拢效果。true表示支持多选聚拢效果，false表示不支持多选聚拢效果。该参数只在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-grid">Grid</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list">List</a>组件中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-griditem">GridItem</a>组件和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-listitem">ListItem</a>组件生效。</p>          <p>当一个item组件设置为多选拖拽时，该组件的子组件不可拖拽。聚拢组件预览图设置的优先级为<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreview11">dragPreview</a>中的string，dragPreview中的PixelMap，组件自截图，不支持dragPreview中的Builder形式。</p>          <p>不支持组件绑定<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#bindcontextmenu12">bindContextMenu</a>中参数存在isShown的模式。</p>          <p>默认值：false</p>          <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">defaultAnimationBeforeLifting</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>表示是否启用长按浮起阶段组件自身的默认点按效果（缩小）。true表示启用默认点按效果，false表示不启用默认点按效果。</p>          <p>默认值：false</p>          <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">isLiftingDisabled<sup>15+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>表示长按拖拽时，是否禁用浮起效果。true表示禁用浮起效果，false表示不禁用浮起效果。</p>          <p>如果设置为true，当组件支持拖拽并同时设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#bindcontextmenu8">bindContextMenu</a>时，仅弹出配置的自定义菜单预览。</p>          <p>默认值：false</p>          <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">enableEdgeAutoScroll<sup>18+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置在拖拽至可滚动组件边缘时是否触发自动滚屏。true表示触发自动滚屏，false表示不触发自动滚屏。</p>          <p>默认值：true</p>          <p><strong>元服务API</strong>：从API version 18开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">enableHapticFeedback<sup>18+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>表示拖拽时是否启用震动。true表示启用震动，false表示不启用震动。仅在存在蒙层的预览（通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#bindcontextmenu12">bindContextMenu</a>）场景生效。</p>          <p><strong>注意：</strong> 仅当应用具备 ohos.permission.VIBRATE 权限，且用户启用了触感反馈时才会生效。</p>          <p>默认值：false</p>          <p><strong>元服务API</strong>：从API version 18开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="uniformdatatype" device-type="phone,2in1,tablet,wearable,tv">UniformDataType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="uniformdatatype" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type UniformDataType = UniformDataType</p>     <p>标准化数据类型。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-uniformtypedescriptor#uniformdatatype">UniformDataType</a></td>         <td class="cellrowborder" width="50%">标准化数据类型。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="imagemodifier12" device-type="phone,2in1,tablet,wearable,tv">ImageModifier<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagemodifier12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type ImageModifier = ImageModifier</p>     <p>图片组件modifier对象。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-attribute-modifier">ImageModifier</a></td>         <td class="cellrowborder" width="50%">图片组件modifier对象。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="示例" device-type="phone,2in1,tablet,wearable,tv">示例<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="示例" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection">     <h3 id="示例1允许拖拽和落入" class="firsth2">示例1（允许拖拽和落入）<i class="anchor-icon anchor-icon-link" anchorid="示例1允许拖拽和落入" tips="复制节点链接"></i></h3>          <p>示例1通过配置<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#allowdrop">allowDrop</a>设置组件是否可落入，通过配置<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#draggable">draggable</a>设置组件是否可拖拽。</p>     <div _ngcontent-nxu-c106="" class="highlight-div"><div _ngcontent-nxu-c106="" class="highlight-div-header"><div _ngcontent-nxu-c106="" class="highlight-div-header-left"><div _ngcontent-nxu-c106="" class="handle-button expand-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxu-c106="" class="highlight-div-header-right"><div _ngcontent-nxu-c106="" class="handle-button ai-button"></div><div _ngcontent-nxu-c106="" class="handle-button line-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxu-c106="" class="handle-button theme-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxu-c106="" class="handle-button copy-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { unifiedDataChannel, uniformTypeDescriptor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">aBlockArr</span>: <span class="hljs-built_in">string</span>[] = [];</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">bBlockArr</span>: <span class="hljs-built_in">string</span>[] = [];</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-title class_">AVisible</span>: <span class="hljs-title class_">Visibility</span> = <span class="hljs-title class_">Visibility</span>.<span class="hljs-property">Visible</span>;</li><li>  <span class="hljs-meta">@State</span> dragSuccess :<span class="hljs-title class_">Boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Image拖拽'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-string">'30dp'</span>)</li><li>      <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Row</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceAround</span> }) {</li><li>        <span class="hljs-comment">// $r('app.media.icon')需要替换为开发者所需的图像资源文件</span></li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.icon'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">visibility</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">AVisible</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">onDragEnd</span>(<span class="hljs-function">(<span class="hljs-params">event: DragEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> ret = event.<span class="hljs-title function_">getResult</span>();</li><li>            <span class="hljs-keyword">if</span>(ret == <span class="hljs-number">0</span>) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"enter ret == 0"</span>)</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">AVisible</span> = <span class="hljs-title class_">Visibility</span>.<span class="hljs-property">Hidden</span>;</li><li>            } <span class="hljs-keyword">else</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"enter ret != 0"</span>)</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">AVisible</span> = <span class="hljs-title class_">Visibility</span>.<span class="hljs-property">Visible</span>;</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">20</span> })</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Column</span>(){</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'不允许释放区域'</span>)</li><li>            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-string">'15dp'</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-string">'10%'</span>)</li><li>          <span class="hljs-title class_">List</span>(){</li><li>            <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">aBlockArr</span>, <span class="hljs-function">(<span class="hljs-params">item:<span class="hljs-built_in">string</span>, index</span>) =&gt;</span> {</li><li>              <span class="hljs-title class_">ListItem</span>() {</li><li>                <span class="hljs-title class_">Image</span>(item)</li><li>                  .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>                  .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>                  .<span class="hljs-title function_">border</span>({<span class="hljs-attr">width</span>: <span class="hljs-number">1</span>})</li><li>              }</li><li>              .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">30</span> , top : <span class="hljs-number">30</span>})</li><li>            }, <span class="hljs-function">(<span class="hljs-params">item:<span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>          }</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'90%'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">allowDrop</span>([uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">TEXT</span>])</li><li>          .<span class="hljs-title function_">onDrop</span>(<span class="hljs-function">(<span class="hljs-params">event?: DragEvent, extraParams?: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">uri</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(extraParams <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>)?.<span class="hljs-property">extraInfo</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">aBlockArr</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(extraParams <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>)?.<span class="hljs-property">insertIndex</span>, <span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">uri</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ondrop not udmf data"</span>);</li><li>          })</li><li>          .<span class="hljs-title function_">border</span>({<span class="hljs-attr">width</span>: <span class="hljs-number">1</span>})</li><li>        }</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">"50%"</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">"45%"</span>)</li><li>        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">12</span> })</li><li>        <span class="hljs-title class_">Column</span>(){</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'可释放区域'</span>)</li><li>            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-string">'15dp'</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-string">'10%'</span>)</li><li>          <span class="hljs-title class_">List</span>(){</li><li>            <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">bBlockArr</span>, <span class="hljs-function">(<span class="hljs-params">item:<span class="hljs-built_in">string</span>, index</span>) =&gt;</span> {</li><li>              <span class="hljs-title class_">ListItem</span>() {</li><li>                <span class="hljs-title class_">Image</span>(item)</li><li>                  .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>                  .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>                  .<span class="hljs-title function_">border</span>({<span class="hljs-attr">width</span>: <span class="hljs-number">1</span>})</li><li>              }</li><li>              .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">30</span> , top : <span class="hljs-number">30</span>})</li><li>            }, <span class="hljs-function">(<span class="hljs-params">item:<span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>          }</li><li>          .<span class="hljs-title function_">border</span>({<span class="hljs-attr">width</span>: <span class="hljs-number">1</span>})</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'90%'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">allowDrop</span>([uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">IMAGE</span>])</li><li>          .<span class="hljs-title function_">onDrop</span>(<span class="hljs-function">(<span class="hljs-params">event?: DragEvent, extraParams?: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"enter onDrop"</span>)</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">dragData</span>:<span class="hljs-title class_">UnifiedData</span> = (event <span class="hljs-keyword">as</span> <span class="hljs-title class_">DragEvent</span>).<span class="hljs-title function_">getData</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">UnifiedData</span>;</li><li>            <span class="hljs-keyword">if</span>(dragData != <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">arr</span>:<span class="hljs-title class_">Array</span>&lt;unifiedDataChannel.<span class="hljs-property">UnifiedRecord</span>&gt; = dragData.<span class="hljs-title function_">getRecords</span>();</li><li>              <span class="hljs-keyword">if</span>(arr.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>                <span class="hljs-keyword">let</span> image = arr[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> unifiedDataChannel.<span class="hljs-property">Image</span>;</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">uri</span> = image.<span class="hljs-property">imageUri</span>;</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">bBlockArr</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(extraParams <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>)?.<span class="hljs-property">insertIndex</span>, <span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">uri</span>);</li><li>              } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`dragData arr is null`</span>)</li><li>              }</li><li>            } <span class="hljs-keyword">else</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`dragData  is undefined`</span>)</li><li>            }</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ondrop udmf data"</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dragSuccess</span> = <span class="hljs-literal">true</span></li><li>          })</li><li>        }</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">"50%"</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">"45%"</span>)</li><li>        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">12</span> })</li><li>      }</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="448" originwidth="392" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115807.35521829193083181805737988229996:50001231000000:2800:58830EB1491C8242D7DFDB4575C9667DA82BF65802E1C620D7BA3CBE7ABAFB48.gif" width="392" height="448"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例2设置预览图">示例2（设置预览图）<i class="anchor-icon anchor-icon-link" anchorid="示例2设置预览图" tips="复制节点链接"></i></h3>          <p>示例2通过配置<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreview11">dragPreview</a>设置拖拽过程的预览图。</p>     <div _ngcontent-nxu-c106="" class="highlight-div"><div _ngcontent-nxu-c106="" class="highlight-div-header"><div _ngcontent-nxu-c106="" class="highlight-div-header-left"><div _ngcontent-nxu-c106="" class="handle-button expand-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxu-c106="" class="highlight-div-header-right"><div _ngcontent-nxu-c106="" class="handle-button ai-button"></div><div _ngcontent-nxu-c106="" class="handle-button line-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxu-c106="" class="handle-button theme-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxu-c106="" class="handle-button copy-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">DragPreviewDemo</span>{</li><li>  <span class="hljs-meta">@Builder</span> <span class="hljs-title function_">dragPreviewBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"dragPreview"</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">150</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span> <span class="hljs-title class_">MenuBuilder</span>() {</li><li>    <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Column</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"menu item 1"</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">15</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>)</li><li>      <span class="hljs-title class_">Divider</span>()</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">5</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"menu item 2"</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">15</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-comment">// ('/resource/image.jpeg')需要替换为开发者所需的图像资源文件</span></li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-string">'/resource/image.jpeg'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">"30%"</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">bindContextMenu</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MenuBuilder</span>, <span class="hljs-title class_">ResponseType</span>.<span class="hljs-property">LongPress</span>)</li><li>          .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Image onDragStart"</span>)</li><li>          })</li><li>          .<span class="hljs-title function_">dragPreview</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dragPreviewBuilder</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="400" originwidth="400" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115808.14541753480651694061637740222400:50001231000000:2800:496722981AF2EADFC85A3BA7C3B11CF776AD7292A43D1AC7F295D0E41F3645F7.gif" width="400" height="400"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例3设置背板图样式">示例3（设置背板图样式）<i class="anchor-icon anchor-icon-link" anchorid="示例3设置背板图样式" tips="复制节点链接"></i></h3>          <p>示例3通过配置<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreviewoptions11">dragPreviewOptions</a>为ENABLE_DEFAULT_SHADOW、ENABLE_DEFAULT_RADIUS设置默认阴影和统一圆角效果。从API version 18开始，通过配置<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreviewoptions11">dragPreviewOptions</a>为ENABLE_DRAG_ITEM_GRAY_EFFECT设置灰显效果。</p>     <div _ngcontent-nxu-c106="" class="highlight-div"><div _ngcontent-nxu-c106="" class="highlight-div-header"><div _ngcontent-nxu-c106="" class="highlight-div-header-left"><div _ngcontent-nxu-c106="" class="handle-button expand-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxu-c106="" class="highlight-div-header-right"><div _ngcontent-nxu-c106="" class="handle-button ai-button"></div><div _ngcontent-nxu-c106="" class="handle-button line-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxu-c106="" class="handle-button theme-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxu-c106="" class="handle-button copy-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct dragPreviewOptionsDemo{</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-comment">// ('/resource/image.jpeg')需要替换为开发者所需的图像资源文件</span></li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-string">'/resource/image.jpeg'</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">"30%"</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">dragPreviewOptions</span>({ <span class="hljs-attr">mode</span>: <span class="hljs-title class_">DragPreviewMode</span>.<span class="hljs-property">AUTO</span> })</li><li>        <span class="hljs-comment">// ('/resource/image.jpeg')需要替换为开发者所需的图像资源文件</span></li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-string">'/resource/image.jpeg'</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">"30%"</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">radius</span>: { <span class="hljs-attr">topLeft</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">topRight</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">bottomLeft</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">bottomRight</span>: <span class="hljs-number">8</span> } })</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Image onDragStart"</span>)</li><li>          })</li><li>          .<span class="hljs-title function_">dragPreviewOptions</span>({ <span class="hljs-attr">mode</span>: [ <span class="hljs-title class_">DragPreviewMode</span>.<span class="hljs-property">ENABLE_DEFAULT_SHADOW</span>, <span class="hljs-title class_">DragPreviewMode</span>.<span class="hljs-property">ENABLE_DEFAULT_RADIUS</span>, <span class="hljs-title class_">DragPreviewMode</span>.<span class="hljs-property">ENABLE_DRAG_ITEM_GRAY_EFFECT</span> ] })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="338" originwidth="294" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115808.57186562101879570814006820092917:50001231000000:2800:EEA45DD8EA6BFBD5C4677F81A6EB487DE14FF0DC45436E0AA47A89D6897AE682.gif" class="notEnlarge" width="294" height="338"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例4设置多选拖拽">示例4（设置多选拖拽）<i class="anchor-icon anchor-icon-link" anchorid="示例4设置多选拖拽" tips="复制节点链接"></i></h3>          <p>示例4通过配置<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#draginteractionoptions12">isMultiSelectionEnabled</a>实现Grid组件的多选拖拽效果。</p>     <div _ngcontent-nxu-c106="" class="highlight-div"><div _ngcontent-nxu-c106="" class="highlight-div-header"><div _ngcontent-nxu-c106="" class="highlight-div-header-left"><div _ngcontent-nxu-c106="" class="handle-button expand-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxu-c106="" class="highlight-div-header-right"><div _ngcontent-nxu-c106="" class="handle-button ai-button"></div><div _ngcontent-nxu-c106="" class="handle-button line-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxu-c106="" class="handle-button theme-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxu-c106="" class="handle-button copy-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Example</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">numbers</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span> , <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span>}) {</li><li>      <span class="hljs-title class_">Grid</span>() {</li><li>        <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">numbers</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-title class_">GridItem</span>() {</li><li>            <span class="hljs-title class_">Column</span>()</li><li>              .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>)</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">90</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">90</span>)</li><li>          .<span class="hljs-title function_">selectable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">selected</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">dragPreviewOptions</span>({}, {<span class="hljs-attr">isMultiSelectionEnabled</span>:<span class="hljs-literal">true</span>})</li><li>          .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">()=&gt;</span>{</li><li>
</li><li>          })</li><li>    }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>      }</li><li>      .<span class="hljs-title function_">columnsTemplate</span>(<span class="hljs-string">'1fr 1fr 1fr'</span>)</li><li>      .<span class="hljs-title function_">rowsTemplate</span>(<span class="hljs-string">'1fr 1fr 1fr'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">300</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="337" originwidth="416" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115808.57384886405802386725572506010855:50001231000000:2800:713C5BDD082762BA935539A6BA6A67342025260530F0EFE32EC35EC2DE14D710.gif" width="416" height="337"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例5设置默认点按效果">示例5（设置默认点按效果）<i class="anchor-icon anchor-icon-link" anchorid="示例5设置默认点按效果" tips="复制节点链接"></i></h3>          <p>示例5通过配置<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#draginteractionoptions12">defaultAnimationBeforeLifting</a>实现Grid组件的默认点按效果。</p>     <div _ngcontent-nxu-c106="" class="highlight-div"><div _ngcontent-nxu-c106="" class="highlight-div-header"><div _ngcontent-nxu-c106="" class="highlight-div-header-left"><div _ngcontent-nxu-c106="" class="handle-button expand-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxu-c106="" class="highlight-div-header-right"><div _ngcontent-nxu-c106="" class="handle-button ai-button"></div><div _ngcontent-nxu-c106="" class="handle-button line-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxu-c106="" class="handle-button theme-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxu-c106="" class="handle-button copy-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Example</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">numbers</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span> , <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span>}) {</li><li>      <span class="hljs-title class_">Grid</span>() {</li><li>        <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">numbers</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-title class_">GridItem</span>() {</li><li>            <span class="hljs-title class_">Column</span>()</li><li>              .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>)</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">90</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">90</span>)</li><li>          .<span class="hljs-title function_">selectable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">selected</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">dragPreviewOptions</span>({}, {<span class="hljs-attr">isMultiSelectionEnabled</span>:<span class="hljs-literal">true</span>, <span class="hljs-attr">defaultAnimationBeforeLifting</span>:<span class="hljs-literal">true</span>})</li><li>          .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">()=&gt;</span>{</li><li>
</li><li>          })</li><li>    }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>      }</li><li>      .<span class="hljs-title function_">columnsTemplate</span>(<span class="hljs-string">'1fr 1fr 1fr'</span>)</li><li>      .<span class="hljs-title function_">rowsTemplate</span>(<span class="hljs-string">'1fr 1fr 1fr'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">300</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="337" originwidth="416" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115808.16967148172665492183288062859501:50001231000000:2800:5C29C9AA47B2DA747FC7E49B348771E66CF3AB707EE4FC0F8FF56F5007818148.gif" width="416" height="337"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例6自定义背板图样式">示例6（自定义背板图样式）<i class="anchor-icon anchor-icon-link" anchorid="示例6自定义背板图样式" tips="复制节点链接"></i></h3>          <p>示例6通过配置<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#imagemodifier12">ImageModifier</a>实现Image组件的自定义背板图样式。</p>     <div _ngcontent-nxu-c106="" class="highlight-div"><div _ngcontent-nxu-c106="" class="highlight-div-header"><div _ngcontent-nxu-c106="" class="highlight-div-header-left"><div _ngcontent-nxu-c106="" class="handle-button expand-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxu-c106="" class="highlight-div-header-right"><div _ngcontent-nxu-c106="" class="handle-button ai-button"></div><div _ngcontent-nxu-c106="" class="handle-button line-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxu-c106="" class="handle-button theme-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxu-c106="" class="handle-button copy-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ImageModifier</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct dragPreviewOptionsDemo{</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">myModifier</span>: <span class="hljs-title class_">ImageAttribute</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageModifier</span>().<span class="hljs-title function_">opacity</span>(<span class="hljs-number">0.5</span>)</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">vis</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">changeValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">submitValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">positionInfo</span>: <span class="hljs-title class_">CaretOffset</span> = { <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">SearchController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SearchController</span>()</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-title class_">OpacityIndex</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-title class_">OpacityList</span>:(<span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> | <span class="hljs-literal">null</span>)[]=[</li><li>    <span class="hljs-number">0.3</span>,<span class="hljs-number">0.5</span>,<span class="hljs-number">0.7</span>,<span class="hljs-number">1</span>,-<span class="hljs-number">50</span>,<span class="hljs-number">0</span>,<span class="hljs-number">10</span>,<span class="hljs-literal">undefined</span>,<span class="hljs-literal">null</span></li><li>  ]</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">OpacityList</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">OpacityIndex</span>] + <span class="hljs-string">""</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"Opacity"</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">()=&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">OpacityIndex</span>++</li><li>            <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">OpacityIndex</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">OpacityList</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>){</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">OpacityIndex</span> = <span class="hljs-number">0</span></li><li>            }</li><li>          })</li><li>        <span class="hljs-comment">// $r('app.media.image')需要替换为开发者所需的图像资源文件</span></li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.image'</span>))</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">dragPreviewOptions</span>({<span class="hljs-attr">modifier</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">myModifier</span>.<span class="hljs-title function_">opacity</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">OpacityList</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">OpacityIndex</span>]) <span class="hljs-keyword">as</span> <span class="hljs-title class_">ImageModifier</span>})</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">"50%"</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">"50%"</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="392" originwidth="411" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115808.09685120179546634995296773981551:50001231000000:2800:D6020BD6A25AD233130BAAD5E8F8FC9199212E1F0FFD29428A56E5E5E2D91A73.gif" width="411" height="392"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例7图片拖拽设置">示例7（图片拖拽设置）<i class="anchor-icon anchor-icon-link" anchorid="示例7图片拖拽设置" tips="复制节点链接"></i></h3>          <p>示例7展示了不同图片（在线图片资源、本地图片资源和PixelMap）在拖拽时组件的设置。</p>     <p>使用网络图片时，需要申请权限ohos.permission.INTERNET。具体申请方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions" target="_blank">声明权限</a>。</p>     <div _ngcontent-nxu-c106="" class="highlight-div"><div _ngcontent-nxu-c106="" class="highlight-div-header"><div _ngcontent-nxu-c106="" class="highlight-div-header-left"><div _ngcontent-nxu-c106="" class="handle-button expand-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxu-c106="" class="highlight-div-header-right"><div _ngcontent-nxu-c106="" class="handle-button ai-button"></div><div _ngcontent-nxu-c106="" class="handle-button line-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxu-c106="" class="handle-button theme-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxu-c106="" class="handle-button copy-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { uniformTypeDescriptor, unifiedDataChannel } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { request } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { buffer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageDrag</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">targetImage1</span>: <span class="hljs-built_in">string</span> | <span class="hljs-title class_">PixelMap</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">targetImage2</span>: <span class="hljs-built_in">string</span> | <span class="hljs-title class_">PixelMap</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">targetImage3</span>: <span class="hljs-built_in">string</span> | <span class="hljs-title class_">PixelMap</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-attr">context</span>: <span class="hljs-title class_">Context</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>();</li><li>  filesDir = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>?.<span class="hljs-property">filesDir</span>;</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">createPixelMap</span>(<span class="hljs-attr">pixelMap</span>: unifiedDataChannel.<span class="hljs-property">SystemDefinedPixelMap</span>): <span class="hljs-title class_">Promise</span>&lt;image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">null</span>&gt; {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">mWidth</span>: <span class="hljs-built_in">number</span> = (pixelMap.<span class="hljs-property">details</span>?.<span class="hljs-property">width</span> ?? -<span class="hljs-number">1</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">mHeight</span>: <span class="hljs-built_in">number</span> = (pixelMap.<span class="hljs-property">details</span>?.<span class="hljs-property">height</span> ?? -<span class="hljs-number">1</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">mPixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span> =</li><li>      (pixelMap.<span class="hljs-property">details</span>?.[<span class="hljs-string">'pixel-format'</span>] ?? image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">UNKNOWN</span>) <span class="hljs-keyword">as</span> image.<span class="hljs-property">PixelMapFormat</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">mItemPixelMapData</span>: <span class="hljs-title class_">Uint8Array</span> = pixelMap.<span class="hljs-property">rawData</span>;</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = {</li><li>      <span class="hljs-attr">editable</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">pixelFormat</span>: mPixelFormat, <span class="hljs-attr">size</span>: {</li><li>        <span class="hljs-attr">height</span>: mHeight,</li><li>        <span class="hljs-attr">width</span>: mWidth</li><li>      }</li><li>    };</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">buffer</span>: <span class="hljs-title class_">ArrayBuffer</span> = mItemPixelMapData.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(mItemPixelMapData.<span class="hljs-property">byteOffset</span>,</li><li>      mItemPixelMapData.<span class="hljs-property">byteLength</span> + mItemPixelMapData.<span class="hljs-property">byteOffset</span>);</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">pixelMap</span>: image.<span class="hljs-property">PixelMap</span> = <span class="hljs-keyword">await</span> image.<span class="hljs-title function_">createPixelMap</span>(buffer, opts);</li><li>      <span class="hljs-keyword">return</span> pixelMap;</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'dragtest--&gt; getPixelMap'</span>, err);</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Row</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>        <span class="hljs-comment">// 在线图片资源拖出</span></li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Online Image'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">14</span>)</li><li>          <span class="hljs-title class_">Image</span>(<span class="hljs-string">'https://www.example.com/xxx.png'</span>)<span class="hljs-comment">// 请填写一个具体的网络图片地址</span></li><li>            .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>            .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>            .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        }</li><li>        .<span class="hljs-title function_">border</span>({</li><li>          <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>,</li><li>          <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>,</li><li>          <span class="hljs-attr">radius</span>: <span class="hljs-number">5</span>,</li><li>          <span class="hljs-attr">style</span>: <span class="hljs-title class_">BorderStyle</span>.<span class="hljs-property">Dotted</span></li><li>        })</li><li>        .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>).<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>
</li><li>        <span class="hljs-comment">// 本地图片资源拖出</span></li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Local Image'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">14</span>)</li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.example'</span>))</li><li>            .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>            .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>            .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        }</li><li>        .<span class="hljs-title function_">border</span>({</li><li>          <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>,</li><li>          <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>,</li><li>          <span class="hljs-attr">radius</span>: <span class="hljs-number">5</span>,</li><li>          <span class="hljs-attr">style</span>: <span class="hljs-title class_">BorderStyle</span>.<span class="hljs-property">Dotted</span></li><li>        })</li><li>        .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>).<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>
</li><li>        <span class="hljs-comment">// PixelMap拖出</span></li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'PixelMap'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">14</span>)</li><li>          <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>?.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.example'</span>).<span class="hljs-property">id</span>).<span class="hljs-title function_">getPixelMap</span>())</li><li>            .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>            .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>            .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        }</li><li>        .<span class="hljs-title function_">border</span>({</li><li>          <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>,</li><li>          <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>,</li><li>          <span class="hljs-attr">radius</span>: <span class="hljs-number">5</span>,</li><li>          <span class="hljs-attr">style</span>: <span class="hljs-title class_">BorderStyle</span>.<span class="hljs-property">Dotted</span></li><li>        })</li><li>        .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>).<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>      }</li><li>
</li><li>      <span class="hljs-comment">// 落入数据类型为Image</span></li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Data type is Image'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">14</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">targetImage1</span>)</li><li>          .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'70%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'70%'</span>)</li><li>          .<span class="hljs-title function_">allowDrop</span>([uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">IMAGE</span>])</li><li>          .<span class="hljs-title function_">onDrop</span>(<span class="hljs-function">(<span class="hljs-params">event: DragEvent, extraParams: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (extraParams === <span class="hljs-literal">null</span> || extraParams === <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-keyword">return</span>;</li><li>            }</li><li>            <span class="hljs-comment">// 通过extraParams获取图片</span></li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">arr</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt; = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(extraParams) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt;;</li><li>            <span class="hljs-keyword">let</span> uri = arr[<span class="hljs-string">'extraInfo'</span>];</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> uri == <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetImage1</span> = uri;</li><li>              <span class="hljs-keyword">try</span> {</li><li>                request.<span class="hljs-title function_">downloadFile</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, {</li><li>                  <span class="hljs-attr">url</span>: uri,</li><li>                  <span class="hljs-attr">filePath</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">filesDir</span> + <span class="hljs-string">'/example.png'</span></li><li>                }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">downloadTask: request.DownloadTask</span>) =&gt;</span> {</li><li>                  <span class="hljs-keyword">let</span> file = fileIo.<span class="hljs-title function_">openSync</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">filesDir</span> + <span class="hljs-string">'/example.png'</span>, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span>);</li><li>                  <span class="hljs-keyword">let</span> arrayBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">1024</span>);</li><li>                  <span class="hljs-keyword">let</span> readLen = fileIo.<span class="hljs-title function_">readSync</span>(file.<span class="hljs-property">fd</span>, arrayBuffer);</li><li>                  <span class="hljs-keyword">let</span> buf = buffer.<span class="hljs-title function_">from</span>(arrayBuffer, <span class="hljs-number">0</span>, readLen);</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`The content of file: <span class="hljs-subst">${buf.toString()}</span>`</span>);</li><li>                  fileIo.<span class="hljs-title function_">closeSync</span>(file);</li><li>                })</li><li>              } <span class="hljs-keyword">catch</span> (error) {</li><li>              }</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'70%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'25%'</span>)</li><li>      .<span class="hljs-title function_">border</span>({</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>,</li><li>        <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>,</li><li>        <span class="hljs-attr">radius</span>: <span class="hljs-number">5</span>,</li><li>        <span class="hljs-attr">style</span>: <span class="hljs-title class_">BorderStyle</span>.<span class="hljs-property">Dotted</span></li><li>      })</li><li>      .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>)</li><li>      .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>
</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">targetImage2</span>)</li><li>          .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'70%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'70%'</span>)</li><li>          .<span class="hljs-title function_">allowDrop</span>([uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">IMAGE</span>])</li><li>          .<span class="hljs-title function_">onDrop</span>(<span class="hljs-function">(<span class="hljs-params">event: DragEvent, extraParams: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-comment">// 通过uniformTypeDescriptor获取图片</span></li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">UnifiedData</span> = event.<span class="hljs-title function_">getData</span>();</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">records</span>: <span class="hljs-title class_">Array</span>&lt;unifiedDataChannel.<span class="hljs-property">UnifiedRecord</span>&gt; = data.<span class="hljs-title function_">getRecords</span>();</li><li>            <span class="hljs-keyword">if</span> (records[<span class="hljs-number">0</span>].<span class="hljs-title function_">getType</span>() === uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">IMAGE</span>) {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">image</span>: unifiedDataChannel.<span class="hljs-property">Image</span> = records[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> unifiedDataChannel.<span class="hljs-property">Image</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetImage2</span> = image.<span class="hljs-property">imageUri</span>;</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'70%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'25%'</span>)</li><li>      .<span class="hljs-title function_">border</span>({</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>,</li><li>        <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>,</li><li>        <span class="hljs-attr">radius</span>: <span class="hljs-number">5</span>,</li><li>        <span class="hljs-attr">style</span>: <span class="hljs-title class_">BorderStyle</span>.<span class="hljs-property">Dotted</span></li><li>      })</li><li>      .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>)</li><li>      .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>
</li><li>      <span class="hljs-comment">// 落入数据类型为PixelMap</span></li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Data type is PixelMap'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">14</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">targetImage3</span>)</li><li>          .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'70%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'70%'</span>)</li><li>          .<span class="hljs-title function_">allowDrop</span>([uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">OPENHARMONY_PIXEL_MAP</span>])</li><li>          .<span class="hljs-title function_">onDrop</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">event</span>: <span class="hljs-title class_">DragEvent</span>, <span class="hljs-attr">extraParams</span>: <span class="hljs-built_in">string</span>) =&gt; {</li><li>            <span class="hljs-comment">// 通过uniformTypeDescriptor获取图片</span></li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">UnifiedData</span> = event.<span class="hljs-title function_">getData</span>();</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">records</span>: <span class="hljs-title class_">Array</span>&lt;unifiedDataChannel.<span class="hljs-property">UnifiedRecord</span>&gt; = data.<span class="hljs-title function_">getRecords</span>();</li><li>            <span class="hljs-keyword">if</span> (records[<span class="hljs-number">0</span>].<span class="hljs-title function_">getType</span>() === uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">OPENHARMONY_PIXEL_MAP</span>) {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">record</span>: unifiedDataChannel.<span class="hljs-property">SystemDefinedPixelMap</span> =</li><li>                records[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> unifiedDataChannel.<span class="hljs-property">SystemDefinedPixelMap</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetImage3</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createPixelMap</span>(record);</li><li>
</li><li>              <span class="hljs-comment">// 落盘到本地</span></li><li>              <span class="hljs-keyword">const</span> imagePackerApi = image.<span class="hljs-title function_">createImagePacker</span>();</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">packOpts</span>: image.<span class="hljs-property">PackingOption</span> = { <span class="hljs-attr">format</span>: <span class="hljs-string">"image/jpeg"</span>, <span class="hljs-attr">quality</span>: <span class="hljs-number">98</span> };</li><li>              <span class="hljs-keyword">const</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>?.<span class="hljs-property">cacheDir</span> + <span class="hljs-string">"/pixel_map.jpg"</span>;</li><li>              <span class="hljs-keyword">let</span> file = fileIo.<span class="hljs-title function_">openSync</span>(path, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">CREATE</span> | fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span>);</li><li>              imagePackerApi.<span class="hljs-title function_">packToFile</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">targetImage3</span>, file.<span class="hljs-property">fd</span>, packOpts).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-comment">// 直接打包进文件</span></li><li>              }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to pack the image. And the error is: '</span> + error);</li><li>              })</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'70%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'25%'</span>)</li><li>      .<span class="hljs-title function_">border</span>({</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>,</li><li>        <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>,</li><li>        <span class="hljs-attr">radius</span>: <span class="hljs-number">5</span>,</li><li>        <span class="hljs-attr">style</span>: <span class="hljs-title class_">BorderStyle</span>.<span class="hljs-property">Dotted</span></li><li>      })</li><li>      .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>)</li><li>      .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>
</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="626" originwidth="310" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115808.93376971240991019156860598205195:50001231000000:2800:FF7DDDFA6B704E09B0464DF2E5FEB842B5A33D5375A6BBBA4A5B456147926621.gif" width="310" height="626"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例8设置图片拖拽震动">示例8（设置图片拖拽震动）<i class="anchor-icon anchor-icon-link" anchorid="示例8设置图片拖拽震动" tips="复制节点链接"></i></h3>          <p>从API version 18开始，示例8通过设置<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#draginteractionoptions12">enableHapticFeedback</a>实现图片拖拽的震动效果。</p>     <div _ngcontent-nxu-c106="" class="highlight-div"><div _ngcontent-nxu-c106="" class="highlight-div-header"><div _ngcontent-nxu-c106="" class="highlight-div-header-left"><div _ngcontent-nxu-c106="" class="handle-button expand-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxu-c106="" class="highlight-div-header-right"><div _ngcontent-nxu-c106="" class="handle-button ai-button"></div><div _ngcontent-nxu-c106="" class="handle-button line-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxu-c106="" class="handle-button theme-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxu-c106="" class="handle-button copy-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">DragPreviewDemo</span>{</li><li>  <span class="hljs-meta">@Builder</span> <span class="hljs-title class_">MenuBuilder</span>() {</li><li>    <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Column</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"menu item 1"</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">15</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>)</li><li>      <span class="hljs-title class_">Divider</span>()</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">5</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"menu item 2"</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">15</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.app_icon'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">"30%"</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">dragPreviewOptions</span>({}, {<span class="hljs-attr">isMultiSelectionEnabled</span>:<span class="hljs-literal">true</span>, <span class="hljs-attr">defaultAnimationBeforeLifting</span>:<span class="hljs-literal">true</span>, <span class="hljs-attr">enableHapticFeedback</span>: <span class="hljs-literal">true</span>})</li><li>          .<span class="hljs-title function_">bindContextMenu</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MenuBuilder</span>, <span class="hljs-title class_">ResponseType</span>.<span class="hljs-property">LongPress</span>)</li><li>          .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Image onDragStart"</span>)</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="示例9自定义预览图">示例9（自定义预览图）<i class="anchor-icon anchor-icon-link" anchorid="示例9自定义预览图" tips="复制节点链接"></i></h3>          <p>从API version 15开始，示例9通过配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#previewconfiguration15">onlyForLifting</a>实现自定义预览图，仅用于浮起效果以及配置<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#draginteractionoptions12">isLiftingDisabled</a>实现禁用浮起效果。</p>     <div _ngcontent-nxu-c106="" class="highlight-div"><div _ngcontent-nxu-c106="" class="highlight-div-header"><div _ngcontent-nxu-c106="" class="highlight-div-header-left"><div _ngcontent-nxu-c106="" class="handle-button expand-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxu-c106="" class="highlight-div-header-right"><div _ngcontent-nxu-c106="" class="handle-button ai-button"></div><div _ngcontent-nxu-c106="" class="handle-button line-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxu-c106="" class="handle-button theme-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxu-c106="" class="handle-button copy-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">LiftingExampleDemo</span> {</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">dragPreviewBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"dragPreview builder"</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">150</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>)</li><li>    }</li><li>  }</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">MenuBuilder</span>() {</li><li>    <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Column</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"menu 1"</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">25</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>)</li><li>      <span class="hljs-title class_">Divider</span>()</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">5</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"menu 2"</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">25</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"禁用浮起效果"</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFFFFF'</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">30</span> })</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">"40%"</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">15</span> })</li><li>          .<span class="hljs-title function_">bindContextMenu</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MenuBuilder</span>, <span class="hljs-title class_">ResponseType</span>.<span class="hljs-property">LongPress</span>)</li><li>          .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          })</li><li>          .<span class="hljs-title function_">dragPreviewOptions</span>({}, {</li><li>            <span class="hljs-attr">isLiftingDisabled</span>: <span class="hljs-literal">true</span></li><li>          })</li><li>          .<span class="hljs-title function_">dragPreview</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dragPreviewBuilder</span>, {</li><li>            <span class="hljs-attr">onlyForLifting</span>: <span class="hljs-literal">true</span>,</li><li>            <span class="hljs-attr">delayCreating</span>: <span class="hljs-literal">true</span></li><li>          })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">"%"</span>)</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"仅用于浮起效果"</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFFFFF'</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">80</span> })</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">"40%"</span>)</li><li>          .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">15</span> })</li><li>          .<span class="hljs-title function_">onDragStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          })</li><li>          .<span class="hljs-title function_">dragPreviewOptions</span>({}, {</li><li>            <span class="hljs-attr">isLiftingDisabled</span>: <span class="hljs-literal">false</span></li><li>          })</li><li>          .<span class="hljs-title function_">dragPreview</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dragPreviewBuilder</span>, {</li><li>            <span class="hljs-attr">onlyForLifting</span>: <span class="hljs-literal">true</span>,</li><li>            <span class="hljs-attr">delayCreating</span>: <span class="hljs-literal">true</span></li><li>          })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>自定义预览图用于浮起效果。</p>     <p><span><img originheight="542" originwidth="345" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115808.25637376774240835131364773859163:50001231000000:2800:9D8ABA17217717C8F7D1CEFE3C63B7909B76B61F4BBD835A58BB3332F1646D60.gif" width="345" height="542"></span></p>     <p>自定义预览图禁用浮起效果。</p>     <p><span><img originheight="520" originwidth="342" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115808.00956162523103933057631685342407:50001231000000:2800:8B43A5B77B8D58E61A5D5E6B785973E78EFC2DBEC75010AA60C69C7237E939EA.gif" width="342" height="520"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例10以拖拽预览图初始尺寸计算跟手点位置">示例10（以拖拽预览图初始尺寸计算跟手点位置）<i class="anchor-icon anchor-icon-link" anchorid="示例10以拖拽预览图初始尺寸计算跟手点位置" tips="复制节点链接"></i></h3>          <p>从API version 19开始，示例10通过配置<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreviewmode11枚举说明">DragPreviewMode</a>为ENABLE_TOUCH_POINT_CALCULATION_BASED_ON_FINAL_PREVIEW实现根据拖拽预览图的初始尺寸来计算拖拽过程中跟手点位置。当设置<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#dragpreviewmode11枚举说明">DragPreviewMode</a>为ENABLE_MULTI_TILE_EFFECT时，该属性不生效。</p>     <div _ngcontent-nxu-c106="" class="highlight-div"><div _ngcontent-nxu-c106="" class="highlight-div-header"><div _ngcontent-nxu-c106="" class="highlight-div-header-left"><div _ngcontent-nxu-c106="" class="handle-button expand-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxu-c106="" class="highlight-div-header-right"><div _ngcontent-nxu-c106="" class="handle-button ai-button"></div><div _ngcontent-nxu-c106="" class="handle-button line-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxu-c106="" class="handle-button theme-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxu-c106="" class="handle-button copy-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">iconStr</span>: <span class="hljs-title class_">ResourceStr</span> = $r(<span class="hljs-string">"app.media.app_icon"</span>)</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">MyPreview</span>() {</li><li>    <span class="hljs-comment">// $r('app.media.image')需要替换为开发者所需的图像资源文件</span></li><li>    <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.image'</span>))</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">MyMenuPreview</span>() {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// $r('app.media.image')需要替换为开发者所需的图像资源文件</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.image'</span>))</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">300</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">MyMenu</span>() {</li><li>    <span class="hljs-title class_">Menu</span>() {</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">startIcon</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconStr</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"菜单选项"</span> })</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">startIcon</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconStr</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"菜单选项"</span> })</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">SubMenu</span>() {</li><li>    <span class="hljs-title class_">Menu</span>() {</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">content</span>: <span class="hljs-string">"复制"</span>, <span class="hljs-attr">labelInfo</span>: <span class="hljs-string">"Ctrl+C"</span> })</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">content</span>: <span class="hljs-string">"粘贴"</span>, <span class="hljs-attr">labelInfo</span>: <span class="hljs-string">"Ctrl+V"</span> })</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">NavDestination</span>() {</li><li>      <span class="hljs-title class_">Scroll</span>() {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">"no ENABLE_TOUCH_POINT_CALCULATION_BASED_ON_FINAL_PREVIEW"</span>)</li><li>          <span class="hljs-comment">// $r('app.media.image')需要替换为开发者所需的图像资源文件</span></li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.image'</span>))</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>            .<span class="hljs-title function_">bindContextMenu</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MyMenu</span>, <span class="hljs-title class_">ResponseType</span>.<span class="hljs-property">LongPress</span>, {</li><li>              <span class="hljs-attr">preview</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">MyPreview</span></li><li>            })</li><li>            .<span class="hljs-title function_">dragPreview</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MyMenuPreview</span>)</li><li>            .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>
</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">"ENABLE_TOUCH_POINT_CALCULATION_BASED_ON_FINAL_PREVIEW"</span>)</li><li>          <span class="hljs-comment">// $r('app.media.image')需要替换为开发者所需的图像资源文件</span></li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.image'</span>))</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>            .<span class="hljs-title function_">bindContextMenu</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MyMenu</span>, <span class="hljs-title class_">ResponseType</span>.<span class="hljs-property">LongPress</span>, {</li><li>              <span class="hljs-attr">preview</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">MyPreview</span></li><li>            })</li><li>            .<span class="hljs-title function_">dragPreview</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MyMenuPreview</span>)</li><li>            .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>            .<span class="hljs-title function_">dragPreviewOptions</span>({</li><li>              <span class="hljs-attr">mode</span>: [<span class="hljs-title class_">DragPreviewMode</span>.<span class="hljs-property">ENABLE_TOUCH_POINT_CALCULATION_BASED_ON_FINAL_PREVIEW</span>]</li><li>            })</li><li>        }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="633" originwidth="356" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115808.11500582203241929042772026325468:50001231000000:2800:7475BBC931DBE06897F38023A6DE40A9BB7FA86AB86259B5356BC88F1A7024F8.gif" width="356" height="633"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例11长按浮起预览图与拖拽预览图过渡动效">示例11（长按浮起预览图与拖拽预览图过渡动效）<i class="anchor-icon anchor-icon-link" anchorid="示例11长按浮起预览图与拖拽预览图过渡动效" tips="复制节点链接"></i></h3>          <p>从API version 19开始，示例11通过配置<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-drop#draggingsizechangeeffect19枚举说明">DraggingSizeChangeEffect</a>实现不同拖拽过渡效果。</p>     <div _ngcontent-nxu-c106="" class="highlight-div"><div _ngcontent-nxu-c106="" class="highlight-div-header"><div _ngcontent-nxu-c106="" class="highlight-div-header-left"><div _ngcontent-nxu-c106="" class="handle-button expand-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxu-c106="" class="highlight-div-header-right"><div _ngcontent-nxu-c106="" class="handle-button ai-button"></div><div _ngcontent-nxu-c106="" class="handle-button line-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxu-c106="" class="handle-button theme-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxu-c106="" class="handle-button copy-button"><div _ngcontent-nxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">iconStr</span>: <span class="hljs-title class_">ResourceStr</span> = $r(<span class="hljs-string">"app.media.app_icon"</span>)</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">MyPreview</span>() {</li><li>    <span class="hljs-comment">// $r('app.media.image')需要替换为开发者所需的图像资源文件</span></li><li>    <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.image'</span>))</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">MyMenuPreviewSame</span>() {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// $r('app.media.image')需要替换为开发者所需的图像资源文件</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.image'</span>))</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">300</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">MyMenuPreview</span>() {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// $r('app.media.startIcon')需要替换为开发者所需的图像资源文件</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">300</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">MyMenu</span>() {</li><li>    <span class="hljs-title class_">Menu</span>() {</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">startIcon</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconStr</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"菜单选项"</span> })</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">startIcon</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconStr</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"菜单选项"</span> })</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">SubMenu</span>() {</li><li>    <span class="hljs-title class_">Menu</span>() {</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">content</span>: <span class="hljs-string">"复制"</span>, <span class="hljs-attr">labelInfo</span>: <span class="hljs-string">"Ctrl+C"</span> })</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">content</span>: <span class="hljs-string">"粘贴"</span>, <span class="hljs-attr">labelInfo</span>: <span class="hljs-string">"Ctrl+V"</span> })</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"sizeChangeEffect: SIZE_TRANSITION，长按弹出菜单，拖拽移动后菜单预览图过渡到预览图，有缩放无叠加效果"</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>        <span class="hljs-comment">// $r('app.media.image')需要替换为开发者所需的图像资源文件</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.image'</span>))</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>        .<span class="hljs-title function_">bindContextMenu</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MyMenu</span>, <span class="hljs-title class_">ResponseType</span>.<span class="hljs-property">LongPress</span>, {</li><li>          <span class="hljs-attr">preview</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">MyMenuPreviewSame</span></li><li>        })</li><li>        .<span class="hljs-title function_">dragPreview</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MyPreview</span>)</li><li>        .<span class="hljs-title function_">dragPreviewOptions</span>({</li><li>          <span class="hljs-attr">sizeChangeEffect</span>: <span class="hljs-title class_">DraggingSizeChangeEffect</span>.<span class="hljs-property">SIZE_TRANSITION</span></li><li>        })</li><li>        .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>
</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"sizeChangeEffect: SIZE_CONTENT_TRANSITION，长按弹出菜单，拖拽移动后菜单预览图和拖拽预览图两层叠加过渡"</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>      <span class="hljs-comment">// $r('app.media.image')需要替换为开发者所需的图像资源文件</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.image'</span>))</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>        .<span class="hljs-title function_">bindContextMenu</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MyMenu</span>, <span class="hljs-title class_">ResponseType</span>.<span class="hljs-property">LongPress</span>, {</li><li>          <span class="hljs-attr">preview</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">MyMenuPreview</span></li><li>        })</li><li>        .<span class="hljs-title function_">dragPreview</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MyPreview</span>)</li><li>        .<span class="hljs-title function_">dragPreviewOptions</span>({</li><li>          <span class="hljs-attr">sizeChangeEffect</span>: <span class="hljs-title class_">DraggingSizeChangeEffect</span>.<span class="hljs-property">SIZE_CONTENT_TRANSITION</span></li><li>        })</li><li>        .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="754" originwidth="430" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115808.92056460045002002113049404270493:50001231000000:2800:F20A47850AF96CDF179BE0341DEECB59E5AF57422F3F92099EF8F4CA87D5BCAA.gif" width="430" height="754"></span></p>    </div>   </div>   <div></div></div>