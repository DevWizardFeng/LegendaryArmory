<h1 _ngcontent-jnl-c119="" class="doc-title ng-star-inserted" title="数字车钥匙接口"> 数字车钥匙接口 </h1>

<div _ngcontent-jnl-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section37263211548">预置模板<i class="anchor-icon anchor-icon-link" anchorid="section37263211548" tips="复制节点链接"></i></h2>          <p>卡片模板的创建是接入流程的第一步，这一步您将会通过http/https请求的方式向华为钱包云服务提供卡券样式的关键信息，如卡面主标题、副标题、logo、背景图片等；用于华为钱包钥匙页面的展示。</p>     <p>您可以创建多个模板，它们有着相同的机构名和服务号，而模板ID不同；当您申请车钥匙时，每一张卡必须和唯一的模板ID关联；即一个模板可供多张钥匙使用，而一张钥匙只能使用一个模板ID。</p>    </div>    <div class="tiledSection">     <h3 id="section1168717368813" class="firsth2">接口原型<i class="anchor-icon anchor-icon-link" anchorid="section1168717368813" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>               <tbody><tr>         <th class="firstcol" id="mcps1.3.2.2.1.3.1.1" width="20%">          <p>承载协议</p></th>         <td class="cellrowborder" width="80%">          <p>HTTPS POST</p></td>        </tr>        <tr>         <th class="firstcol" id="mcps1.3.2.2.1.3.2.1" width="20%">          <p>接口方向</p></th>         <td class="cellrowborder" width="80%">          <p>三方业务管理服务-&gt;钱包云服务</p></td>        </tr>        <tr>         <th class="firstcol" id="mcps1.3.2.2.1.3.3.1" width="20%">          <p>接口URL</p></th>         <td class="cellrowborder" width="80%">          <p>https://wallet-passentrust-drcn.cloud.huawei.com.cn/hmspass/v2/key_stdcar/model</p></td>        </tr>        <tr>         <th class="firstcol" id="mcps1.3.2.2.1.3.4.1" width="20%">          <p>数据格式</p></th>         <td class="cellrowborder" width="80%">          <p>请求消息：Content-Type: application/json;charset=UTF-8</p>          <p>响应消息：Content-Type: application/json;charset=UTF-8</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section19527740171019">请求参数<i class="anchor-icon anchor-icon-link" anchorid="section19527740171019" tips="复制节点链接"></i></h3>          <p><strong>Request Header</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.5.1.1" width="20%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.5.1.2" width="15%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.5.1.3" width="15%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.5.1.4" width="50%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>Content-Type</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>取值为：Content-Type: application/json;charset=UTF-8</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>Authorization</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>将<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-rest-api-public#section37263211548">获取AccessToken</a>获取到的“access_token”的值拼接在字符串“Bearer”之后，以空格符相隔，组成“Authorization”参数的值</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>Accept</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>取值为：Content-Type: application/json;charset=UTF-8</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>Request Body</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.5.1.1" width="20%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.5.1.2" width="15%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.5.1.3" width="15%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.5.1.4" width="50%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>passTypeIdentifier</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>hwpass.stdcarkey.xxx.xxx（xxx可为公司/产品名称，总长度不超过32个英文小写字符，请严格按照此规则定义)</p>          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wallet-preparations#li69221528123212" target="_blank">创建Wallet Kit服务</a>时注册的服务号，需要开发者到华为AGC网站申请。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>passStyleIdentifier</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>自定义，模板ID，即modelId。在同一个appId下唯一。长度不超过64个字符，只能是字母、数字和（.）、（-）、（_）。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>organizationName</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>自定义，商户名称，最长64个字节，无具体格式要求，中英文均可。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>passVersion</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>版本号，固定10.0</p>          <p>钱包对象版本，开发者可以依据此确定钱包对象的版本信息</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>fields</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>fields</p></td>         <td class="cellrowborder" width="50%">          <p>自定义</p>          <p>卡券展示信息：<strong>appendFields</strong>和<strong>commonFields</strong></p></td>        </tr>             </tbody></table></div>     </div>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.6.1.6.1.1" width="18.5%">          <p>appendFields参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.6.1.6.1.2" width="13.87%">          <p>value</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.6.1.6.1.3" width="13.87%">          <p>label</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.6.1.6.1.4" width="7.5200000000000005%">          <p>是否必须</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.6.1.6.1.5" width="46.239999999999995%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="18.5%">          <p>isCreateWhiteCard</p></td>         <td class="cellrowborder" width="13.87%">          <p>true</p></td>         <td class="cellrowborder" width="13.87%">          <p>NFCCardFlag</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>用于表明是否是NFC卡的flag</p></td>        </tr>             </tbody></table></div>     </div>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.7.1.6.1.1" width="18.5%">          <p>commonFields参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.7.1.6.1.2" width="13.87%">          <p>value</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.7.1.6.1.3" width="13.87%">          <p>label</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.7.1.6.1.4" width="7.5200000000000005%">          <p>是否必须</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.7.1.6.1.5" width="46.239999999999995%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="18.5%">          <p>logo</p></td>         <td class="cellrowborder" width="13.87%">          <p>https://开头的图片链接，具体地址车厂自定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>卡面logo</p>          <p>128*128px，大小&lt;=20kb，直角图片，无需切圆角</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>backgroundImage</p></td>         <td class="cellrowborder" width="13.87%">          <p>https://开头的图片链接，具体地址车厂自定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>卡面背景</p>          <p>1312*820px，直角图片，无需切圆角</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>picUrl</p></td>         <td class="cellrowborder" width="13.87%">          <p>https://开头的图片链接，具体地址车厂自定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>带logo的卡面背景</p>          <p>1312*820px，直角图片，无需切圆角</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>merchantName</p></td>         <td class="cellrowborder" width="13.87%">          <p>车厂定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>卡面主标题</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>卡面主标题</p>          <p>小于256字节</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>name</p></td>         <td class="cellrowborder" width="13.87%">          <p>车厂定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>卡面副标题</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>卡面副标题</p>          <p>小于256字节</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section1559111612399">请求示例<i class="anchor-icon anchor-icon-link" anchorid="section1559111612399" tips="复制节点链接"></i></h3>          <div _ngcontent-jnl-c106="" class="highlight-div"><div _ngcontent-jnl-c106="" class="highlight-div-header"><div _ngcontent-jnl-c106="" class="highlight-div-header-left"><div _ngcontent-jnl-c106="" class="handle-button expand-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jnl-c106="" class="highlight-div-header-right"><div _ngcontent-jnl-c106="" class="handle-button ai-button"></div><div _ngcontent-jnl-c106="" class="handle-button line-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jnl-c106="" class="handle-button theme-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jnl-c106="" class="handle-button copy-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jnl-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"passVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"10.0"</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"passTypeIdentifier"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Replace with the Service ID you applied on AGC"</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"passStyleIdentifier"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"DigitalCarKeyTestModel"</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"organizationName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Replace with your organization name"</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"fields"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"appendFields"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"NFCCardFlag"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"true"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"isCreateWhiteCard"</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"commonFields"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"卡面主标题"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"我的车"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"merchantName"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"卡面副标题"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"XXX车钥匙"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"name"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://xxx/xxx.png"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"logo"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://xxx/xxx.webp"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"backgroundImage"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://xxx/xxx.png"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"picUrl"</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section856371603911">响应参数<i class="anchor-icon anchor-icon-link" anchorid="section856371603911" tips="复制节点链接"></i></h3>          <p>模板预置成功，即http响应为200时，钱包云服务会将DK业务管理服务请求的数据原样返回，即和上面个的请求体中的数据一致；其他错误情况，可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-rest-api-error-code">REST API错误码</a>。</p>    </div>    <div class="tiledSection">     <h3 id="section1127273862419">调用示例<i class="anchor-icon anchor-icon-link" anchorid="section1127273862419" tips="复制节点链接"></i></h3>          <div _ngcontent-jnl-c106="" class="highlight-div"><div _ngcontent-jnl-c106="" class="highlight-div-header"><div _ngcontent-jnl-c106="" class="highlight-div-header-left"><div _ngcontent-jnl-c106="" class="handle-button expand-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jnl-c106="" class="highlight-div-header-right"><div _ngcontent-jnl-c106="" class="handle-button ai-button"></div><div _ngcontent-jnl-c106="" class="handle-button line-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jnl-c106="" class="handle-button theme-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jnl-c106="" class="handle-button copy-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jnl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createStdCarKeyModel</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span> model = <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span>.<span class="hljs-title function_">parseObject</span>(<span class="hljs-title class_">ConfigUtil</span>.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">"StdCarKeyModel.json"</span>));</li><li>        <span class="hljs-title class_">HwWalletObjectUtil</span>.<span class="hljs-title function_">validateModel</span>(model);</li><li>        <span class="hljs-title class_">String</span> urlSegment = <span class="hljs-string">"/v2/key_stdcar/model"</span>;</li><li>        <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span> responseModel = serverApiService.<span class="hljs-title function_">postToWalletServer</span>(urlSegment, <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span>.<span class="hljs-title function_">toJSONString</span>(model));</li><li>    }</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1173453416620">申请ICCE钥匙<i class="anchor-icon anchor-icon-link" anchorid="section1173453416620" tips="复制节点链接"></i></h2>          <p>车主APP向DK业务管理服务申请开通ICCE车钥匙，DK业务管理服务将车钥匙卡片信息添加至钱包云服务中；其中：车主APP-&gt;DK业务管理服务之间的交互由车厂自行实现，本章主要侧重于DK业务管理服务-&gt;钱包云服务申请ICCE车钥匙的过程，主要包括：申请钥匙卡片和生成JWE数据。</p>    </div>    <div class="tiledSection">     <h3 id="section129511211195" class="firsth2">申请钥匙卡片<i class="anchor-icon anchor-icon-link" anchorid="section129511211195" tips="复制节点链接"></i></h3>          <p>DK业务管理服务向华为钱包云服务请求创建车钥匙卡片。</p>    </div>    <div class="tiledSection">     <h3 id="section529592911112">接口原型<i class="anchor-icon anchor-icon-link" anchorid="section529592911112" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>               <tbody><tr>         <th class="firstcol" id="mcps1.3.9.2.1.3.1.1" width="20%">          <p>承载协议</p></th>         <td class="cellrowborder" width="80%">          <p>HTTPS POST</p></td>        </tr>        <tr>         <th class="firstcol" id="mcps1.3.9.2.1.3.2.1" width="20%">          <p>接口方向</p></th>         <td class="cellrowborder" width="80%">          <p>三方业务管理服务-&gt;钱包云服务</p></td>        </tr>        <tr>         <th class="firstcol" id="mcps1.3.9.2.1.3.3.1" width="20%">          <p>接口URL</p></th>         <td class="cellrowborder" width="80%">          <p>https://wallet-passentrust-drcn.cloud.huawei.com.cn/hmspass/v2/key_stdcar/instance</p></td>        </tr>        <tr>         <th class="firstcol" id="mcps1.3.9.2.1.3.4.1" width="20%">          <p>数据格式</p></th>         <td class="cellrowborder" width="80%">          <p>请求消息：Content-Type: application/json;charset=UTF-8</p>          <p>响应消息：Content-Type: application/json;charset=UTF-8</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section72956290114">请求参数<i class="anchor-icon anchor-icon-link" anchorid="section72956290114" tips="复制节点链接"></i></h3>          <p><strong>Request Header</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.5.1.1" width="20%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.5.1.2" width="15%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.5.1.3" width="15%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.5.1.4" width="50%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>Content-Type</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>取值为：Content-Type: application/json;charset=UTF-8</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>Authorization</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>将<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-rest-api-public#section37263211548">获取AccessToken</a>获取到的“access_token”的值拼接在字符串“Bearer”之后，以空格符相隔，组成“Authorization”参数的值</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>Accept</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>Content-Type: application/json;charset=UTF-8</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>Request Body</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.5.1.1" width="20%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.5.1.2" width="15%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.5.1.3" width="15%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.5.1.4" width="50%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>passTypeIdentifier</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>hwpass.stdcarkey.xxx.xxx（xxx可为公司/产品名称，总长度不超过32个英文小写字符，请严格按照此规则定义)</p>          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wallet-preparations#li69221528123212" target="_blank">创建Wallet Kit服务</a>时注册的服务号，需要开发者到华为AGC网站申请。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>passStyleIdentifier</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>自定义，注：示例代码中的默认值仅作说明，请勿直接使用</p>          <p>请使用“预置模板中创建的”模板ID，即modelId。在同一个appId下唯一。长度不超过64个字符，只能是字母、数字和（.）、（-）、（_）。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>organizationName</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>自定义，注：示例代码中的默认值仅作说明，请勿直接使用</p>          <p>请使用预置模板中创建的商户名称，最长64个字节。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>organizationPassId</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String(64)</p></td>         <td class="cellrowborder" width="50%">          <p>自定义，注：示例代码中的默认值仅作说明，请勿直接使用</p>          <p>车钥匙卡片在开发者服务器中的卡号。在同一个appId下唯一。长度16个字节，为保证唯一性，请勿手动输入，建议使用代码随机生成，只能是字母、数字（全大写）。当前和serialNumber保持一致</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>serialNumber</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String(64)</p></td>         <td class="cellrowborder" width="50%">          <p>自定义，注：示例代码中的默认值仅作说明，请勿直接使用</p>          <p>车钥匙卡片在华为钱包服务器中的卡号，即instanceId。在同一个appId下唯一。长度16个字节，为保证唯一性，请勿手动输入，建议使用代码随机生成，只能是字母、数字（全大写）。当前和organizationPassId保持一致。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>fields</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>fields</p></td>         <td class="cellrowborder" width="50%">          <p>自定义</p>          <p>卡券展示信息：<strong>commonFields</strong>、<strong>timeList</strong>和<strong>status</strong></p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>linkDevicePass</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>linkDevicePass</p></td>         <td class="cellrowborder" width="50%">          <p>自定义<strong>linkDevicePass</strong></p>          <p>此参数用于保存车钥匙管理台服务器地址、公钥信息以及是否使能卡券的NFC能力。</p></td>        </tr>             </tbody></table></div>     </div>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.1" width="18.5%">          <p><strong>timeList</strong>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.2" width="13.87%">          <p>value</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.3" width="13.87%">          <p>label</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.4" width="7.5200000000000005%">          <p>是否必须</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.5" width="46.239999999999995%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="18.5%">          <p>linkDevicePassExpireTime</p></td>         <td class="cellrowborder" width="13.87%">          <p>自定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>时间列表</p></td>        </tr>             </tbody></table></div>     </div>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="18.5%">          <p><strong>status</strong>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="16.5%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="15%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="50%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="18.5%">          <p>state</p></td>         <td class="cellrowborder" width="16.5%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <div class="p">           状态值。取值如下           <ul>            <li>active：生效</li>            <li>inactive：未激活</li>            <li>completed：已使用</li>            <li>expired：已过期</li>           </ul>          </div></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>effectTime</p></td>         <td class="cellrowborder" width="16.5%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>UTC格式，生效时间</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>expireTime</p></td>         <td class="cellrowborder" width="16.5%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>UTC格式，失效时间，如果超过此事件，卡券自动按照expired状态处理</p></td>        </tr>             </tbody></table></div>     </div>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.6.1.1" width="18.5%">          <p>commonFields参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.6.1.2" width="13.87%">          <p>value</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.6.1.3" width="13.87%">          <p>label</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.6.1.4" width="7.5200000000000005%">          <p>是否必须</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.6.1.5" width="46.239999999999995%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="18.5%">          <p>bleServiceUuid</p></td>         <td class="cellrowborder" width="13.87%">          <p>由车厂定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>车厂蓝牙设备的SERVIE_UDID，用于手机发现车端蓝牙模块开启的车钥匙服务；请使用蓝牙标准规范：如0000xxxx-0000-1000-8000-00805f9b34fb；如需自行定义，请联系ICCE确认</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>ownerPassTypeIdentifier</p></td>         <td class="cellrowborder" width="13.87%">          <p>固定值</p></td>         <td class="cellrowborder" width="13.87%">          <p>主卡服务号</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>hwpass.stdcarkey.std：归属ICCE车钥匙类别</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>readerMatchValue</p></td>         <td class="cellrowborder" width="13.87%">          <p>由车厂定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>readerId</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>车钥匙标识，建议字节：不超过20字节（第一字节：车厂标识，第二字节：品牌/系列标识，后续字节保证在车厂内唯一）, 只能包含0-9，A-F</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>bleTargetPackage</p></td>         <td class="cellrowborder" width="13.87%">          <p>由车厂定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>车厂app的包名，用于钱包在特定场景下拉起车厂app，注：请提供应用安装后的全包名，即应用的applicationId, 如com.huawei.wallet</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>bleTargetActivity</p></td>         <td class="cellrowborder" width="13.87%">          <p>由车厂定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>车厂app的activity，供钱包在特定场景下拉起车厂app；注：全路径名称，不带文件后缀，如com.huawei.xxx.xxx.ShowCarDetailActivity</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>bleTargetService</p></td>         <td class="cellrowborder" width="13.87%">          <p>由车厂定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>车厂app的service，供钱包在特定场景下拉起车厂app，注：全路径名称，不带文件后缀名，如com.huawei.xxx.xxx.BleICCEService</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>bleMacAddress</p></td>         <td class="cellrowborder" width="13.87%">          <p>由车厂定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>车端蓝牙设备的mac地址，用于华为手机扫描车端蓝牙模块、向车端蓝牙发起Gatt连接等。请注意格式合法性，如：01:23:45:67:89:0A；注：字符必须全大写</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>bleFeature</p></td>         <td class="cellrowborder" width="13.87%">          <p>固定值</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>hwpass.carkey.ble：标识支持蓝牙车钥匙</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>deviceType</p></td>         <td class="cellrowborder" width="13.87%">          <p>设备类型</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>当前钥匙开通的设备类型，如手机：Phone，穿戴：Wear</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>keyHolderType</p></td>         <td class="cellrowborder" width="13.87%">          <p>钥匙持有者性质</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>当前钥匙持有者的性质，如车主：Owner，分享：Share</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>vehicleId</p></td>         <td class="cellrowborder" width="13.87%">          <p>由车厂定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>是</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>车辆vin码，不超过20个字节</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>personalizedData</p></td>         <td class="cellrowborder" width="13.87%">          <p>由车厂定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>车厂个性化数据，可用于储存车辆标定数据等</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>logo</p></td>         <td class="cellrowborder" width="13.87%">          <p>https://开头的图片链接，具体地址车厂自定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>卡面logo；128*128px，大小&lt;=20kb，直角图片，无需切圆角</p>          <p>如果此处携带该参数，则会覆盖对应模板中的相应字段数据。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>backgroundImage</p></td>         <td class="cellrowborder" width="13.87%">          <p>https://开头的图片链接，具体地址车厂自定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>卡面背景；1312*820px，直角图片，无需切圆角</p>          <p>如果此处携带该参数，则会覆盖对应模板中的相应字段数据。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>picUrl</p></td>         <td class="cellrowborder" width="13.87%">          <p>https://开头的图片链接，具体地址车厂自定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>/</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>带logo的卡面背景；1312*820px，直角图片，无需切圆角</p>          <p>如果此处携带该参数，则会覆盖对应模板中的相应字段数据。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>merchantName</p></td>         <td class="cellrowborder" width="13.87%">          <p>车厂定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>卡面主标题</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>卡面主标题；小于256字节</p>          <p>如果此处携带该参数，则会覆盖对应模板中的相应字段数据。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>name</p></td>         <td class="cellrowborder" width="13.87%">          <p>车厂定义</p></td>         <td class="cellrowborder" width="13.87%">          <p>卡面副标题</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="46.239999999999995%">          <p>卡面副标题；小于256字节</p>          <p>如果此处携带该参数，则会覆盖对应模板中的相应字段数据。</p></td>        </tr>             </tbody></table></div>     </div>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.5.1.1" width="18.5%">          <p>linkDevicePass参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.5.1.2" width="16.5%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.5.1.3" width="15%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.5.1.4" width="50%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="18.5%">          <p>webServiceURL</p></td>         <td class="cellrowborder" width="16.5%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>DK业务管理服务地址，用于开通激活过程中向DK业务管理服务发起设备认证、获取个人化token以及获取个人化数据。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>token</p></td>         <td class="cellrowborder" width="16.5%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>DK业务管理服务自行生成，没有格式要求，用于开通激活过程中钱包向DK业务管理服务进行“<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-rest-api-public#section113578586311">设备认证</a>”和“<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wallet-rest-api-public#section257714144308">获取个人化数据Token</a>”请求头中携带的Authorization信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>serialNumber</p></td>         <td class="cellrowborder" width="16.5%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>请和上述提及的serialNumber保持一致</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>passVersion</p></td>         <td class="cellrowborder" width="16.5%">          <p>否</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>DevicePass卡券包版本，固定10.0</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>spPublickey</p></td>         <td class="cellrowborder" width="16.5%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>开发者<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wallet-preparations#li69221528123212" target="_blank">创建Wallet Kit服务</a>步骤5生成的公钥。用于对DK业务管理服务返回的“Applet个人化数据”进行验签。NFC卡片信息不会上传到钱包云服务器，所以终端设备需要这个参数来进行验签。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="18.5%">          <p>nfcType</p></td>         <td class="cellrowborder" width="16.5%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>固定值"1"，表示开启NFC能力。如果这个值不是"1"，当前个人化实例的NFC能力会被关闭。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section3569104718459">请求示例<i class="anchor-icon anchor-icon-link" anchorid="section3569104718459" tips="复制节点链接"></i></h3>          <div _ngcontent-jnl-c106="" class="highlight-div"><div _ngcontent-jnl-c106="" class="highlight-div-header"><div _ngcontent-jnl-c106="" class="highlight-div-header-left"><div _ngcontent-jnl-c106="" class="handle-button expand-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jnl-c106="" class="highlight-div-header-right"><div _ngcontent-jnl-c106="" class="handle-button ai-button"></div><div _ngcontent-jnl-c106="" class="handle-button line-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jnl-c106="" class="handle-button theme-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jnl-c106="" class="handle-button copy-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jnl-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"organizationName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Replace with your organization name"</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"passTypeIdentifier"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Replace with the Service ID you applied on AGC"</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"passStyleIdentifier"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"DigitalCarKeyTestModel"</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"organizationPassId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"serialNumber"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"fields"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"timeList"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"timeListValue"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"linkDevicePassExpireTime"</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"active"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"effectTime"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2020-04-06T00:00:00.111Z"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"expireTime"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2030-04-06T00:00:00.111Z"</span></li><li>    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"commonFields"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xxx.CarActivity"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bleTargetActivity"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"hwpass.carkey.ble"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bleFeature"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"01:23:45:67:89:AB"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bleMacAddress"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"readerId"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"CAD34B258391C097"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"readerMatchValue"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"主卡服务号"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"hwpass.stdcarkey.std"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ownerPassTypeIdentifier"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0000xxxx-0000-1000-8000-00805f9b34fb"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bleServiceUuid"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xxx"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bleTargetPackage"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xxx"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bleTargetService"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Phone"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"deviceType"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Owner"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"keyHolderType"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xxx"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vehicleId"</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"linkDevicePass"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"webServiceURL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://xxx"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"nfcType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"serialNumber"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"passVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"10.0"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"spPublickey"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xxx"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"token"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xxx"</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section125933462283">响应参数<i class="anchor-icon anchor-icon-link" anchorid="section125933462283" tips="复制节点链接"></i></h3>          <p>返回结果中会携带预置模板中的信息一并返回。</p>    </div>    <div class="tiledSection">     <h3 id="section11123442198">调用示例<i class="anchor-icon anchor-icon-link" anchorid="section11123442198" tips="复制节点链接"></i></h3>          <p>完整的调用示例，请参见<a href="https://gitcode.com/harmonyos_samples/wallet-kit-sample-code-severdemo-java" target="_blank">钱包服务-服务端卡片开通</a>示例代码。</p>     <div _ngcontent-jnl-c106="" class="highlight-div"><div _ngcontent-jnl-c106="" class="highlight-div-header"><div _ngcontent-jnl-c106="" class="highlight-div-header-left"><div _ngcontent-jnl-c106="" class="handle-button expand-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jnl-c106="" class="highlight-div-header-right"><div _ngcontent-jnl-c106="" class="handle-button ai-button"></div><div _ngcontent-jnl-c106="" class="handle-button line-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jnl-c106="" class="handle-button theme-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jnl-c106="" class="handle-button copy-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jnl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">addStdCarKeyInstance</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span> instance = <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span>.<span class="hljs-title function_">parseObject</span>(<span class="hljs-title class_">ConfigUtil</span>.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">"StdCarKeyInstance.json"</span>));</li><li>        <span class="hljs-title class_">HwWalletObjectUtil</span>.<span class="hljs-title function_">validateInstance</span>(instance);</li><li>        <span class="hljs-title class_">String</span> urlSegment = <span class="hljs-string">"/v2/key_stdcar/instance"</span>;</li><li>        <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span> responseInstance =</li><li>            serverApiService.<span class="hljs-title function_">postToWalletServer</span>(urlSegment, <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span>.<span class="hljs-title function_">toJSONString</span>(instance));</li><li>
</li><li>        <span class="hljs-keyword">if</span> (responseInstance.<span class="hljs-title function_">containsKey</span>(<span class="hljs-string">"serialNumber"</span>)) {</li><li>            <span class="hljs-title class_">String</span> serialNumber = responseInstance.<span class="hljs-title function_">getString</span>(<span class="hljs-string">"serialNumber"</span>);</li><li>            <span class="hljs-title class_">JweTest</span> test = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JweTest</span>();</li><li>            test.<span class="hljs-title function_">generateThinJWEToBindUser</span>(serialNumber);</li><li>        }</li><li>    }</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section1310081523717">生成JWE数据<i class="anchor-icon anchor-icon-link" anchorid="section1310081523717" tips="复制节点链接"></i></h3>          <p>华为钱包车钥匙卡片的开通是基于JWE（JSON Web Encryption）方式。因此DK业务管理服务向钱包云服务申请创建车钥匙成功后，基于创建成功的车钥匙serialNumber生成JWE数据，并将其返回给车厂app，如下所示：</p>     <p>JWE串包含JWE Encrypted Key，iv，Ciphertext，signature；可参见如下步骤：</p>     <ol>      <li>生成一个随机的Content Encryption Key（CEK）。</li>      <li>使用RSA-OAEP加密算法，用钱包服务器给的公钥加密CEK，生成JWE Encrypted Key。</li>      <li>生成JWE初始化向量。</li>      <li>使用AES GCM加密算法对明文部分进行加密生成密文Ciphertext，算法会随之生成一128位的认证标记Authentication Tag。对以上部分分别进行base64编码。</li>      <li>Signature是使用开发者<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wallet-preparations#li69221528123212" target="_blank">创建Wallet Kit服务</a>步骤5生成的私钥对以上部分进行的签名。</li>     </ol>    </div>    <div class="tiledSection">     <h3 id="section98021468384">调用示例<i class="anchor-icon anchor-icon-link" anchorid="section98021468384" tips="复制节点链接"></i></h3>          <p>完整的调用示例，请参见<a href="https://gitcode.com/harmonyos_samples/wallet-kit-sample-code-severdemo-java" target="_blank">钱包服务-服务端卡片开通</a>示例代码。</p>     <div _ngcontent-jnl-c106="" class="highlight-div"><div _ngcontent-jnl-c106="" class="highlight-div-header"><div _ngcontent-jnl-c106="" class="highlight-div-header-left"><div _ngcontent-jnl-c106="" class="handle-button expand-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jnl-c106="" class="highlight-div-header-right"><div _ngcontent-jnl-c106="" class="handle-button ai-button"></div><div _ngcontent-jnl-c106="" class="handle-button line-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jnl-c106="" class="handle-button theme-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jnl-c106="" class="handle-button copy-button"><div _ngcontent-jnl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jnl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">generateJwe</span><span class="hljs-params">(String jwePrivateKey, String payload)</span> {</li><li>        Map&lt;String, String&gt; jweHeader = getHeader(); </li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">jweHeaderEncode</span> <span class="hljs-operator">=</span> getEncodeHeader(jweHeader);</li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> generateSecureRandomFactor(<span class="hljs-number">16</span>);</li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKeyPublicKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"MIIBojA****"</span>; <span class="hljs-comment">// 填入真实的公钥值</span></li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">encryptedKeyEncode</span> <span class="hljs-operator">=</span> getEncryptedKey(sessionKey, sessionKeyPublicKey);</li><li>        <span class="hljs-type">byte</span>[] iv = AesUtil.getIvByte(<span class="hljs-number">12</span>);</li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">ivHexStr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(Hex.encodeHex(iv, <span class="hljs-literal">false</span>));</li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">ivEncode</span> <span class="hljs-operator">=</span> Base64.encodeBase64URLSafeString(ivHexStr.getBytes(StandardCharsets.UTF_8));</li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">cipherTextEncode</span> <span class="hljs-operator">=</span> getCipherText(payload, sessionKey, iv);</li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> getSignature(jwePrivateKey, sessionKey, payload, jweHeaderEncode, ivEncode);</li><li>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">stringBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>().append(jweHeaderEncode)</li><li>            .append(<span class="hljs-string">"."</span>)</li><li>            .append(encryptedKeyEncode)</li><li>            .append(<span class="hljs-string">"."</span>)</li><li>            .append(ivEncode)</li><li>            .append(<span class="hljs-string">"."</span>)</li><li>            .append(cipherTextEncode)</li><li>            .append(<span class="hljs-string">"."</span>)</li><li>            .append(signature);</li><li>        <span class="hljs-keyword">return</span> stringBuilder.toString();</li><li>    }</li></ol></pre></div></div>    </div>   </div>   <div></div></div>