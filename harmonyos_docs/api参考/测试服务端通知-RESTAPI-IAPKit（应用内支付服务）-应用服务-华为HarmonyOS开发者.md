<h1 _ngcontent-emm-c119="" class="doc-title ng-star-inserted" title="测试服务端通知"> 测试服务端通知 </h1>

<div _ngcontent-emm-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section11671151113913">功能介绍<i class="anchor-icon anchor-icon-link" anchorid="section11671151113913" tips="复制节点链接"></i></h2><p>此接口用于测试服务端通知。</p> </div> <div class="tiledSection"><h2 id="section18579163913426">场景描述<i class="anchor-icon anchor-icon-link" anchorid="section18579163913426" tips="复制节点链接"></i></h2><p>开发者调用此接口，IAP服务器向开发者服务器发送测试通知。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ol><li>5分钟内只允许调用一次，在开发者服务器收到测试通知后，不建议再次调用此接口。</li><li>测试通知只支持开发者的生产环境通知地址。</li><li>测试通知主类型为TEST，无通知子类型，具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-key-event-notifications#section161113819282">NotificationType</a>说明。</li></ol> </div></div></div> </div> <div class="tiledSection"><h2 id="section160735214543">接口原型<i class="anchor-icon anchor-icon-link" anchorid="section160735214543" tips="复制节点链接"></i></h2></div>  <div class="tablenoborder"><div class="tbBox"><table><tbody><tr><th class="firstcol" id="mcps1.3.4.1.3.1.1" width="20%"><p>承载协议</p> </th> <td class="cellrowborder" width="80%"><p>HTTPS POST</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.4.1.3.2.1" width="20%"><p>接口方向</p> </th> <td class="cellrowborder" width="80%"><p>开发者服务器 -&gt; IAP服务器</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.4.1.3.3.1" width="20%"><p>接口URL</p> </th> <td class="cellrowborder" width="80%"><p>{rootUrl}/harmony/v1/application/notifications/test</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>rootUrl：具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-rest-common-statement#section11387155610549">站点信息</a>。</p> </div></div></div> </td> </tr> <tr><th class="firstcol" id="mcps1.3.4.1.3.4.1" width="20%"><p>数据格式</p> </th> <td class="cellrowborder" width="80%"><p>请求消息：Content-Type: application/json;charset=UTF-8</p> <p>响应消息：Content-Type: application/json;charset=UTF-8</p> </td> </tr>  </tbody></table></div> </div> <div class="tiledSection"><h2 id="section158978817551">请求参数<i class="anchor-icon anchor-icon-link" anchorid="section158978817551" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section858815892220" class="firsth2">Request Header<i class="anchor-icon anchor-icon-link" anchorid="section858815892220" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.1" width="20%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.2" width="15%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.3" width="15%"><p>参数类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.4" width="50%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>Content-Type</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="15%"><p>String</p> </td> <td class="cellrowborder" width="50%"><p>取值为：application/json;charset=UTF-8</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>Authorization</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="15%"><p>String</p> </td> <td class="cellrowborder" width="50%"><p>认证信息，使用JWT进行鉴权，具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-jwt-description#section11166125713715">Authorization说明</a>。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section86425305253">请求示例<i class="anchor-icon anchor-icon-link" anchorid="section86425305253" tips="复制节点链接"></i></h2><div _ngcontent-emm-c106="" class="highlight-div"><div _ngcontent-emm-c106="" class="highlight-div-header"><div _ngcontent-emm-c106="" class="highlight-div-header-left"><div _ngcontent-emm-c106="" class="handle-button expand-button"><div _ngcontent-emm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-emm-c106="" class="highlight-div-header-right"><div _ngcontent-emm-c106="" class="handle-button ai-button"></div><div _ngcontent-emm-c106="" class="handle-button line-button"><div _ngcontent-emm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-emm-c106="" class="handle-button theme-button"><div _ngcontent-emm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-emm-c106="" class="handle-button copy-button"><div _ngcontent-emm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-emm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>POST /harmony/v1/application/notifications/test</li><li>Content-Type: application/json;charset=UTF-8</li><li>Authorization：Bearer ***.***.***</li><li>Accept: application/json</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section514779154018">响应参数<i class="anchor-icon anchor-icon-link" anchorid="section514779154018" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section520451532211" class="firsth2">Response Header<i class="anchor-icon anchor-icon-link" anchorid="section520451532211" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.1" width="19.99%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.2" width="15.010000000000002%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.3" width="15%"><p>参数类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.4" width="50%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.99%"><p>Content-Type</p> </td> <td class="cellrowborder" width="15.010000000000002%"><p>是</p> </td> <td class="cellrowborder" width="15%"><p>String</p> </td> <td class="cellrowborder" width="50%"><p>取值为：application/json;charset=UTF-8</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section20779102512214">Response Body<i class="anchor-icon anchor-icon-link" anchorid="section20779102512214" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.1" width="20%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.2" width="15%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.3" width="15%"><p>参数类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.4" width="50%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>responseCode</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="15%"><p>String</p> </td> <td class="cellrowborder" width="50%"><p>返回码。</p> <ul><li>0：成功</li><li>其他：失败，具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-server-error-code">错误码</a></li></ul> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>responseMessage</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>String</p> </td> <td class="cellrowborder" width="50%"><p>响应描述。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>testNotificationId</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="15%"><p>String</p> </td> <td class="cellrowborder" width="50%"><p>测试通知ID。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section34632202404">响应示例<i class="anchor-icon anchor-icon-link" anchorid="section34632202404" tips="复制节点链接"></i></h2><div _ngcontent-emm-c106="" class="highlight-div"><div _ngcontent-emm-c106="" class="highlight-div-header"><div _ngcontent-emm-c106="" class="highlight-div-header-left"><div _ngcontent-emm-c106="" class="handle-button expand-button"><div _ngcontent-emm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-emm-c106="" class="highlight-div-header-right"><div _ngcontent-emm-c106="" class="handle-button ai-button"></div><div _ngcontent-emm-c106="" class="handle-button line-button"><div _ngcontent-emm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-emm-c106="" class="handle-button theme-button"><div _ngcontent-emm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-emm-c106="" class="handle-button copy-button"><div _ngcontent-emm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-emm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.2</span> <span class="hljs-number">200</span> <span class="hljs-variable">OK</span></li><li><span class="hljs-variable">Content</span>-<span class="hljs-variable">Type</span>: <span class="hljs-title class_">application</span>/<span class="hljs-variable">json</span>;<span class="hljs-variable">charset</span>=<span class="hljs-variable">UTF</span>-<span class="hljs-number">8</span></li><li>{</li><li>  <span class="hljs-string">"responseCode"</span>: <span class="hljs-string">"0"</span>,</li><li>  <span class="hljs-string">"testNotificationId"</span>: <span class="hljs-string">"***"</span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section4238143016400">测试服务端通知样例<i class="anchor-icon anchor-icon-link" anchorid="section4238143016400" tips="复制节点链接"></i></h2><div _ngcontent-emm-c106="" class="highlight-div"><div _ngcontent-emm-c106="" class="highlight-div-header"><div _ngcontent-emm-c106="" class="highlight-div-header-left"><div _ngcontent-emm-c106="" class="handle-button expand-button"><div _ngcontent-emm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-emm-c106="" class="highlight-div-header-right"><div _ngcontent-emm-c106="" class="handle-button ai-button"></div><div _ngcontent-emm-c106="" class="handle-button line-button"><div _ngcontent-emm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-emm-c106="" class="handle-button theme-button"><div _ngcontent-emm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-emm-c106="" class="handle-button copy-button"><div _ngcontent-emm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-emm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"notificationType"</span>: <span class="hljs-string">"TEST"</span>, <span class="hljs-comment">// 固定为TEST</span></li><li>  <span class="hljs-string">"notificationRequestId"</span>: <span class="hljs-string">"xxx"</span>,</li><li>  <span class="hljs-string">"notificationMetaData"</span>: {</li><li>    <span class="hljs-string">"environment"</span>: <span class="hljs-string">"NORMAL"</span>, <span class="hljs-comment">// 固定为NORMAL</span></li><li>    <span class="hljs-string">"applicationId"</span>: <span class="hljs-string">"xxx"</span>, <span class="hljs-comment">// 应用ID</span></li><li>    <span class="hljs-string">"packageName"</span>: <span class="hljs-string">"testPackageName"</span>, <span class="hljs-comment">// 固定为testPackageName</span></li><li>    <span class="hljs-string">"type"</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 固定为0</span></li><li>    <span class="hljs-string">"purchaseToken"</span>: <span class="hljs-string">"xxx"</span>, <span class="hljs-comment">// 前缀固定为testPurchaseToken，后面为应用ID</span></li><li>    <span class="hljs-string">"purchaseOrderId"</span>: <span class="hljs-string">"xxx"</span> <span class="hljs-comment">// 前缀固定为testPurchaseOrderId，后面为应用ID</span></li><li>  },</li><li>  <span class="hljs-string">"notificationVersion"</span>: <span class="hljs-string">"v3"</span>, <span class="hljs-comment">// 固定为v3</span></li><li>  <span class="hljs-string">"signedTime"</span>: <span class="hljs-number">1747445946282</span></li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>