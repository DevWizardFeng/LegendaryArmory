<h1 _ngcontent-jrh-c119="" class="doc-title ng-star-inserted" title="浮层"> 浮层 </h1>

<div _ngcontent-jrh-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>设置组件的浮层。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p> 从API version 7开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>  </div></div></div>  <div class="tiledSection"><h2 id="overlay" device-type="phone,2in1,tablet,wearable,tv">overlay<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="overlay" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>overlay(value: string | CustomBuilder | ComponentContent, options?: OverlayOptions ): T</p> <p>在当前组件上，增加遮罩文本或者叠加自定义组件以及<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-overlay#componentcontent12">ComponentContent</a>作为该组件的浮层。浮层的定位同样基于当前组件进行计算。浮层不通过组件树进行渲染，部分接口（例如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-componentutils#componentutilsgetrectanglebyiddeprecated">getRectangleById</a>）不支持获取浮层中的组件。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>overlay会将浮层组件覆盖在所绑定的组件上方，阻塞用户对浮层下方组件的所有交互操作。若需用户可操作下方组件，应参照<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-overlay#示例2通过builder设置浮层">示例2（通过builder设置浮层）</a>中的实现，在浮层builder的最外层组件上配置.hitTestBehavior(HitTestMode.Transparent)。此配置在通过浮层实现水印时尤其重要，因为水印显示不应妨碍用户对下层组件的操作。</p>  </div></div></div> <p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.9.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.3.9.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.3.9.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.3.9.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">string | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#custombuilder8">CustomBuilder</a><sup>10+</sup> | <a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-overlay#componentcontent12">ComponentContent</a><sup>12+</sup></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>遮罩文本内容或自定义组件构造函数。</p> <p><strong>说明：</strong></p> <p>自定义组件作为浮层时，不支持键盘走焦到自定义组件中。通过CustomBuilder设置浮层时，浮层中的内容会在页面刷新时销毁并重新创建，存在一定的性能损耗，页面频繁刷新的场景推荐使用ComponentContent方式设置浮层。</p> </td> </tr> <tr><td class="cellrowborder" width="25%">options</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-overlay#overlayoptions12">OverlayOptions</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>浮层的定位。</p> <p><strong>说明：</strong></p> <p>API version 12之前，options: </p> <p>{</p> <p>align?: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#alignment">Alignment</a>, </p> <p>offset?: {x?: number, y?: number}</p> <p>}</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.3.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.3.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">T</td> <td class="cellrowborder" width="50%">返回当前组件。</td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p> overlay节点不支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-show-hide#onappear">onAppear</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-show-hide#ondisappear">onDisAppear</a>等和节点挂载/卸载相关的事件。</p>  </div></div></div> </div>  <div class="tiledSection"><h2 id="overlayoptions12" device-type="phone,2in1,tablet,wearable,tv">OverlayOptions<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="overlayoptions12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p> 为规范匿名对象的定义，API 12版本修改了此处的元素定义。其中，保留了历史匿名对象的起始版本信息，会出现外层元素@since版本号高于内层元素版本号的情况，但这不影响接口的使用。</p>  </div></div></div> <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.6.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">align<sup>7+</sup></td> <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#alignment">Alignment</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>设置浮层相对于组件的方位。</p> <p>默认值：TopStart</p> <p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> </td> </tr> <tr><td class="cellrowborder" width="20%">offset<sup>7+</sup></td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-overlay#overlayoffset12">OverlayOffset</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>设置浮层基于自身左上角的偏移量。浮层默认处于组件左上角。</p> <p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>align和offset都设置时，效果重叠，浮层相对于组件方位定位后，再基于当前位置的左上角进行偏移。</p>  </div></div></div> </div>  <div class="tiledSection"><h2 id="overlayoffset12" device-type="phone,2in1,tablet,wearable,tv">OverlayOffset<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="overlayoffset12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p> 为规范匿名对象的定义，API 12版本修改了此处的元素定义。其中，保留了历史匿名对象的起始版本信息，会出现外层元素@since版本号高于内层元素版本号的情况，但这不影响接口的使用。</p>  </div></div></div> <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">x<sup>7+</sup></td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>横向偏移量。</p> <p>单位：vp</p> <p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> </td> </tr> <tr><td class="cellrowborder" width="20%">y<sup>7+</sup></td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>纵向偏移量。</p> <p>单位：vp</p> <p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="componentcontent12" device-type="phone,2in1,tablet,wearable,tv">ComponentContent<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="componentcontent12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type ComponentContent&lt;T = Object&gt; = ComponentContent&lt;T&gt;</p> <p>组件内容的实体封装。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-componentcontent">ComponentContent</a>&lt;T&gt;</td> <td class="cellrowborder" width="50%">组件内容的实体封装。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="示例" device-type="phone,2in1,tablet,wearable,tv">示例<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="示例" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="示例1通过string设置浮层" class="firsth2">示例1（通过string设置浮层）<i class="anchor-icon anchor-icon-link" anchorid="示例1通过string设置浮层" tips="复制节点链接"></i></h3><p>该示例通过传入string设置浮层。</p> <div _ngcontent-jrh-c106="" class="highlight-div"><div _ngcontent-jrh-c106="" class="highlight-div-header"><div _ngcontent-jrh-c106="" class="highlight-div-header-left"><div _ngcontent-jrh-c106="" class="handle-button expand-button"><div _ngcontent-jrh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrh-c106="" class="highlight-div-header-right"><div _ngcontent-jrh-c106="" class="handle-button ai-button"></div><div _ngcontent-jrh-c106="" class="handle-button line-button"><div _ngcontent-jrh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrh-c106="" class="handle-button theme-button"><div _ngcontent-jrh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrh-c106="" class="handle-button copy-button"><div _ngcontent-jrh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">OverlayExample</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'floating layer'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">12</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-number">0xCCCCCC</span>).<span class="hljs-title function_">maxLines</span>(<span class="hljs-number">1</span>)</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-comment">// $r('app.media.img')需要替换为开发者所需的图像资源文件</span></li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img'</span>))</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">240</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">240</span>)</li><li>            .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">"Winter is a beautiful season, especially when it snows."</span>, {</li><li>              <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>,</li><li>              <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: -<span class="hljs-number">15</span> }</li><li>            })</li><li>        }.<span class="hljs-title function_">border</span>({ <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }.<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">20</span> })</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="335" originwidth="336" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115828.90103478329172618572709115292659:50001231000000:2800:5FC277F90CF6EB2619015432FEDC49E473587BF3D3F523DEB6FC701C923D1174.png" width="336" height="335"></span></p> </div>  <div class="tiledSection"><h3 id="示例2通过builder设置浮层">示例2（通过builder设置浮层）<i class="anchor-icon anchor-icon-link" anchorid="示例2通过builder设置浮层" tips="复制节点链接"></i></h3><p>该示例通过传入builder设置浮层。</p> <div _ngcontent-jrh-c106="" class="highlight-div"><div _ngcontent-jrh-c106="" class="highlight-div-header"><div _ngcontent-jrh-c106="" class="highlight-div-header-left"><div _ngcontent-jrh-c106="" class="handle-button expand-button"><div _ngcontent-jrh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrh-c106="" class="highlight-div-header-right"><div _ngcontent-jrh-c106="" class="handle-button ai-button"></div><div _ngcontent-jrh-c106="" class="handle-button line-button"><div _ngcontent-jrh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrh-c106="" class="handle-button theme-button"><div _ngcontent-jrh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrh-c106="" class="handle-button copy-button"><div _ngcontent-jrh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">OverlayExample</span> {</li><li>  <span class="hljs-meta">@Builder</span> <span class="hljs-title class_">OverlayNode</span>() {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// $r('app.media.img1')需要替换为开发者所需的图像资源文件</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img1'</span>))</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"This is overlayNode"</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-number">180</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">180</span>)</li><li>    .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>)</li><li>    .<span class="hljs-title function_">hitTestBehavior</span>(<span class="hljs-title class_">HitTestMode</span>.<span class="hljs-property">Transparent</span>) <span class="hljs-comment">// 配置浮层不阻塞交互</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// $r('app.media.img2')需要替换为开发者所需的图像资源文件</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img2'</span>))</li><li>        .<span class="hljs-title function_">overlay</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title class_">OverlayNode</span>(), { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Center</span> })</li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> }).<span class="hljs-title function_">padding</span>(<span class="hljs-number">20</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="425" originwidth="526" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115829.45973167377169465447534801573252:50001231000000:2800:2CCE728881C9B02FACBC75B96C8468FCDD69E0B4038DDCFCB2E5167EEE8DE3F2.png" width="526" height="425"></span></p> </div>  <div class="tiledSection"><h3 id="示例3通过componentcontent设置浮层">示例3（通过ComponentContent设置浮层）<i class="anchor-icon anchor-icon-link" anchorid="示例3通过componentcontent设置浮层" tips="复制节点链接"></i></h3><p>该示例通过overlay传入了ComponentContent使backgroundColor不断发生变化。</p> <div _ngcontent-jrh-c106="" class="highlight-div"><div _ngcontent-jrh-c106="" class="highlight-div-header"><div _ngcontent-jrh-c106="" class="highlight-div-header-left"><div _ngcontent-jrh-c106="" class="handle-button expand-button"><div _ngcontent-jrh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrh-c106="" class="highlight-div-header-right"><div _ngcontent-jrh-c106="" class="handle-button ai-button"></div><div _ngcontent-jrh-c106="" class="handle-button line-button"><div _ngcontent-jrh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrh-c106="" class="handle-button theme-button"><div _ngcontent-jrh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrh-c106="" class="handle-button copy-button"><div _ngcontent-jrh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentContent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Params</span>{</li><li>  <span class="hljs-attr">backgroundColor</span>: <span class="hljs-built_in">string</span> | <span class="hljs-title class_">Resource</span> = <span class="hljs-string">""</span></li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">backgroundColor: <span class="hljs-built_in">string</span> | Resource</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">backgroundColor</span> = backgroundColor;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">overlayBuilder</span>(<span class="hljs-params">params: Params</span>){</li><li>  <span class="hljs-title class_">Row</span>(){</li><li>  }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">backgroundColor</span>(params.<span class="hljs-property">backgroundColor</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span>_4040 {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">overlayColor</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'rgba(0, 0, 0, 0.6)'</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">overlayNode</span>: <span class="hljs-title class_">ComponentContent</span>&lt;<span class="hljs-title class_">Params</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentContent</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>, <span class="hljs-title function_">wrapBuilder</span>(overlayBuilder), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayColor</span>))</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayColor</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'0.6'</span>)) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayColor</span> = <span class="hljs-string">'rgba(0, 0, 0, 0.1)'</span></li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayNode</span>.<span class="hljs-title function_">update</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayColor</span>));</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayColor</span> = <span class="hljs-string">'rgba(0, 0, 0, 0.6)'</span></li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayNode</span>.<span class="hljs-title function_">update</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayColor</span>));</li><li>      }</li><li>    }, <span class="hljs-number">1000</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>(){</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayColor</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">overlay</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayNode</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="438" originwidth="199" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115829.34986145128335118104537601662039:50001231000000:2800:70D11FED9F88A3ADFC294B061FA5983CBBAC0D4683B43899BB7FE7F39404B711.gif" class="notEnlarge" width="199" height="438"></span></p> </div> </div> <div></div></div>