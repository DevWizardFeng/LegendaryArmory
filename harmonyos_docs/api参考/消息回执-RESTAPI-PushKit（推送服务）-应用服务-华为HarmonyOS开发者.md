<h1 _ngcontent-xwe-c119="" class="doc-title ng-star-inserted" title="消息回执"> 消息回执 </h1>

<div _ngcontent-xwe-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">      <p id="ZH-CN_TOPIC_0000002368705984__zh-cn_topic_0000002368546112_zh-cn_topic_0000002368705820_p3965173117620">为了更安全的网络访问，华为推送服务于2022年11月30日关闭Push相关域名的TLS1.0、TLS1.1协议及规定之外的加密套件，关闭后，应用使用TLS1.2以下协议或使用规定外的加密套件将无法正常推送消息。</p>      <p id="ZH-CN_TOPIC_0000002368705984__zh-cn_topic_0000002368546112_zh-cn_topic_0000002368705820_p1296512311065">若您的应用访问Push相关域名使用协议是TLS1.0或TLS1.1，可能无法正常发送消息，请您务必升级到TLS1.2及以上版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="section4459147879">功能介绍<i class="anchor-icon anchor-icon-link" anchorid="section4459147879" tips="复制节点链接"></i></h2>          <p>华为推送服务器调用此接口给您的服务器推送回执消息。</p>    </div>    <div class="tiledSection">     <h2 id="section102391932170">接口约束<i class="anchor-icon anchor-icon-link" anchorid="section102391932170" tips="复制节点链接"></i></h2>          <p>您需要在AppGallery Connect上开通“消息回执”权益，如何开通请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-msg-receipt#section86338111648" target="_blank">开通回执权益</a>。</p>     <p>回执接口版本分为V1和V2，场景化消息发送<strong>仅V2版本的回执接口支持</strong>。</p>     <p><strong>回执接口V2版本</strong>支持的场景化消息接口为：</p>     <p>https://push-api.cloud.huawei.com/v3/[projectId]/messages:send</p>    </div>    <div class="tiledSection">     <h2 id="section108798431185">接口原型<i class="anchor-icon anchor-icon-link" anchorid="section108798431185" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.5.1.1" width="10.15%">          <p>承载协议</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.5.1.2" width="19.49%">          <p>接口方向</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.5.1.3" width="29.18%">          <p>接口URL</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.5.1.4" width="41.18%">          <p>数据格式</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="10.15%">          <p>HTTPS POST</p></td>         <td class="cellrowborder" width="19.49%">          <p>华为Push服务器 -&gt; 开发者回执消息接收服务器</p></td>         <td class="cellrowborder" width="29.18%">          <p>您的回执接收服务器的地址，由您定义，同<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>上配置的回执地址一致。</p></td>         <td class="cellrowborder" width="41.18%">          <p>请求消息：Content-Type: application/json</p>          <p>响应消息：Content-Type: application/json</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1764735411145">请求参数<i class="anchor-icon anchor-icon-link" anchorid="section1764735411145" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section944115420157" class="firsth2">Request Header<i class="anchor-icon anchor-icon-link" anchorid="section944115420157" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.4.1.1" width="20.25202520252025%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.4.1.2" width="27.74277427742774%">          <p>取值描述</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.4.1.3" width="52.00520052005201%">          <p>样例</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20.25202520252025%">          <p>X-HUAWEI-CALLBACK-ID</p></td>         <td class="cellrowborder" width="27.74277427742774%">          <p>消息头鉴权参数，可选字段。当回执配置中回调用户名与回调秘钥均已配置时为必选参数。</p></td>         <td class="cellrowborder" width="52.00520052005201%">          <p>timestamp=1563*****1261; nonce=a07bfa17-6d82-4b53-a9a2-07c*****eef1; value=E4Ye*****HZ6592U8B9S37238E+Hwtjfrmpf8AQXF+c=</p>          <ul>           <li>timestamp为毫秒级时间戳</li>           <li>nonce为UUID随机数</li>           <li>value为待加密字符串（value示例中为了展示各字段，实际上是由timestamp、nonce、回调用户名拼接而成，不需要“+”），使用回调秘钥进行HmacSHA256加密后，经Base64编码后获得，具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-msg-receipt#li6429181516577" target="_blank">示例代码</a></li>          </ul></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section4373191412186">Request Body<i class="anchor-icon anchor-icon-link" anchorid="section4373191412186" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.1" width="12.22%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.2" width="12.36%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.3" width="20.59%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.4" width="54.83%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="12.22%">          <p>statuses</p></td>         <td class="cellrowborder" width="12.36%">          <p>是</p></td>         <td class="cellrowborder" width="20.59%">          <p>Array [<a href="/consumer/cn/doc/harmonyos-references/push-api-msg-receipt#section1667405472412">statuses</a> Object ]</p></td>         <td class="cellrowborder" width="54.83%">          <p>回执消息内容，包含最多100个<a href="/consumer/cn/doc/harmonyos-references/push-api-msg-receipt#section1667405472412">statuses</a>结构的数组，分为V1和V2版本。此处仅支持V2版本。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1667405472412">statuses V2版本<i class="anchor-icon anchor-icon-link" anchorid="section1667405472412" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.1" width="12.22%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.2" width="12.36%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.3" width="20.59%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.4" width="54.83%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="12.22%">          <p>token</p></td>         <td class="cellrowborder" width="12.36%">          <p>是</p></td>         <td class="cellrowborder" width="20.59%">          <p>String</p></td>         <td class="cellrowborder" width="54.83%">          <p>消息发送目标用户Token，携带给应用服务器。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.22%">          <p>pushType</p></td>         <td class="cellrowborder" width="12.36%">          <p>是</p></td>         <td class="cellrowborder" width="20.59%">          <p>Integer</p></td>         <td class="cellrowborder" width="54.83%">          <p>消息类型，详情见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-scenariozed-api-request-struct#section20573634202313">push-type</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.22%">          <p>appPackageName</p></td>         <td class="cellrowborder" width="12.36%">          <p>是</p></td>         <td class="cellrowborder" width="20.59%">          <p>String</p></td>         <td class="cellrowborder" width="54.83%">          <p>消息发送方的应用包名。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.22%">          <p>biTag</p></td>         <td class="cellrowborder" width="12.36%">          <p>否</p></td>         <td class="cellrowborder" width="20.59%">          <p>String</p></td>         <td class="cellrowborder" width="54.83%">          <p>您在发送消息时携带的biTag。如果下发推送消息未设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-scenariozed-api-request-param#section418321011212">biTag</a>字段，则该字段内容为空。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.22%">          <p>requestId</p></td>         <td class="cellrowborder" width="12.36%">          <p>是</p></td>         <td class="cellrowborder" width="20.59%">          <p>String</p></td>         <td class="cellrowborder" width="54.83%">          <p>请求ID，在发送接口中返回的值。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.22%">          <p>deliveryStatus</p></td>         <td class="cellrowborder" width="12.36%">          <p>否</p></td>         <td class="cellrowborder" width="20.59%">          <p><a href="/consumer/cn/doc/harmonyos-references/push-api-msg-receipt#section19136204192210">deliveryStatus</a> Object</p></td>         <td class="cellrowborder" width="54.83%">          <p>消息的送达状态<a href="/consumer/cn/doc/harmonyos-references/push-api-msg-receipt#section19136204192210">deliveryStatus</a>结构体。非卡片刷新消息时回执。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.22%">          <p>formStatus</p></td>         <td class="cellrowborder" width="12.36%">          <p>否</p></td>         <td class="cellrowborder" width="20.59%">          <p><a href="/consumer/cn/doc/harmonyos-references/push-api-msg-receipt#section72022214244">formStatus</a> Object</p></td>         <td class="cellrowborder" width="54.83%">          <p>卡片刷新消息的送达状态<a href="/consumer/cn/doc/harmonyos-references/push-api-msg-receipt#section72022214244">formStatus</a>结构体，仅当消息类型为卡片刷新时回执。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section19136204192210">deliveryStatus<i class="anchor-icon anchor-icon-link" anchorid="section19136204192210" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.1" width="12.2%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.2" width="12.379999999999999%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.3" width="20.59%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.4" width="54.83%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="12.2%">          <p>result</p></td>         <td class="cellrowborder" width="12.379999999999999%">          <p>是</p></td>         <td class="cellrowborder" width="20.59%">          <p>Integer</p></td>         <td class="cellrowborder" width="54.83%">          <p>消息到达的回执状态码，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-msg-receipt#section19100519195717" target="_blank">回执状态码</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.2%">          <p>timestamp</p></td>         <td class="cellrowborder" width="12.379999999999999%">          <p>是</p></td>         <td class="cellrowborder" width="20.59%">          <p>Long</p></td>         <td class="cellrowborder" width="54.83%">          <p>消息成功到达客户端的时间戳（毫秒级时间戳），失败则为回执消息生成的时间戳。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section72022214244">formStatus<i class="anchor-icon anchor-icon-link" anchorid="section72022214244" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.1" width="12.2%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.2" width="12.379999999999999%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.3" width="20.59%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.4" width="54.83%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="12.2%">          <p>formId</p></td>         <td class="cellrowborder" width="12.379999999999999%">          <p>是</p></td>         <td class="cellrowborder" width="20.59%">          <p>Long</p></td>         <td class="cellrowborder" width="54.83%">          <p>服务卡片的实例ID，当卡片<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-form-formextensionability#formextensionabilityonaddform" target="_blank">onAddForm</a>（卡片使用方添加卡片至桌面）时获取。最大值为<strong>2^31-1</strong>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.2%">          <p>result</p></td>         <td class="cellrowborder" width="12.379999999999999%">          <p>是</p></td>         <td class="cellrowborder" width="20.59%">          <p>Integer</p></td>         <td class="cellrowborder" width="54.83%">          <p>消息到达的回执状态码，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-msg-receipt#section19100519195717" target="_blank">回执状态码</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.2%">          <p>timestamp</p></td>         <td class="cellrowborder" width="12.379999999999999%">          <p>是</p></td>         <td class="cellrowborder" width="20.59%">          <p>Long</p></td>         <td class="cellrowborder" width="54.83%">          <p>消息成功到达客户端的时间戳（毫秒级时间戳），失败则为回执消息生成的时间戳。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section4896125192319">请求示例<i class="anchor-icon anchor-icon-link" anchorid="section4896125192319" tips="复制节点链接"></i></h2>          <div _ngcontent-xwe-c106="" class="highlight-div"><div _ngcontent-xwe-c106="" class="highlight-div-header"><div _ngcontent-xwe-c106="" class="highlight-div-header-left"><div _ngcontent-xwe-c106="" class="handle-button expand-button"><div _ngcontent-xwe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xwe-c106="" class="highlight-div-header-right"><div _ngcontent-xwe-c106="" class="handle-button ai-button"></div><div _ngcontent-xwe-c106="" class="handle-button line-button"><div _ngcontent-xwe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xwe-c106="" class="handle-button theme-button"><div _ngcontent-xwe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xwe-c106="" class="handle-button copy-button"><div _ngcontent-xwe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xwe-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"statuses"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>    <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"biTag"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"131415"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"pushType"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"appPackageName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"com.****"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"token"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"148896*******000001"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"requestId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1*******0"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"deliveryStatus"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1607832761768</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>     <p></p>    </div>    <div class="tiledSection">     <h2 id="section202832199302">响应参数<i class="anchor-icon anchor-icon-link" anchorid="section202832199302" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.2.1.5.1.1" width="12.22%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.2.1.5.1.2" width="12.36%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.2.1.5.1.3" width="20.59%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.2.1.5.1.4" width="54.83%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="12.22%">          <p>code</p></td>         <td class="cellrowborder" width="12.36%">          <p>是</p></td>         <td class="cellrowborder" width="20.59%">          <p>String</p></td>         <td class="cellrowborder" width="54.83%">          <p>应用服务器返回的处理结果状态。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.22%">          <p>message</p></td>         <td class="cellrowborder" width="12.36%">          <p>是</p></td>         <td class="cellrowborder" width="20.59%">          <p>String</p></td>         <td class="cellrowborder" width="54.83%">          <p>应用服务器返回的处理结果描述信息。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section11681353203010">响应示例<i class="anchor-icon anchor-icon-link" anchorid="section11681353203010" tips="复制节点链接"></i></h2>          <div _ngcontent-xwe-c106="" class="highlight-div"><div _ngcontent-xwe-c106="" class="highlight-div-header"><div _ngcontent-xwe-c106="" class="highlight-div-header-left"><div _ngcontent-xwe-c106="" class="handle-button expand-button"><div _ngcontent-xwe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xwe-c106="" class="highlight-div-header-right"><div _ngcontent-xwe-c106="" class="handle-button ai-button"></div><div _ngcontent-xwe-c106="" class="handle-button line-button"><div _ngcontent-xwe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xwe-c106="" class="handle-button theme-button"><div _ngcontent-xwe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xwe-c106="" class="handle-button copy-button"><div _ngcontent-xwe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xwe-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0"</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"success"</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>   </div>   <div></div></div>