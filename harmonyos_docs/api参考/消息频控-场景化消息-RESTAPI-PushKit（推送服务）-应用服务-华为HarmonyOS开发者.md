<h1 _ngcontent-vey-c119="" class="doc-title ng-star-inserted" title="消息频控"> 消息频控 </h1>

<div _ngcontent-vey-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>Push Kit消息频控包括场景化消息频控、设备消息频控、测试消息频控和消息推送速率管控，当超过了某个频控规则限制会返回对应的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-msg-receipt#section19100519195717" target="_blank">回执状态码</a>。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>消息频控的数量是指应用发起消息推送请求的数量，无论设备是否成功展示消息都会增加计数，如果消息未按预期展示，建议不要频繁发起消息推送请求，请先进行<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-faq-2" target="_blank">问题排查</a>。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="section551882820368">场景化消息频控<i class="anchor-icon anchor-icon-link" anchorid="section551882820368" tips="复制节点链接"></i></h2>          <p>为了给用户提供更好的体验，营造清朗网络空间，华为推送服务根据不同的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-scenes" target="_blank">推送场景</a>，设置了多条频控规则。</p>     <p>若场景化消息超出对应的频控规则限制，推送服务将向您的回执服务器返回<strong>256结果码</strong>，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-msg-receipt#section19100519195717" target="_blank">回执状态码</a>。</p>     <p>具体频控规则见下表：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.3.1.1" width="29.45%">          <p>场景</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.3.1.2" width="70.55%">          <p>频控规则</p></th>        </tr><tr>         <td class="cellrowborder" width="29.45%">          <p>通知消息</p></td>         <td class="cellrowborder" width="70.55%">          <p>1.应用违规处罚时，按照处罚频次限制，参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-punishment-standards" target="_blank">通知违规处罚标准</a>。</p>          <p>2.<span>消息为资讯营销类（</span><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-scenariozed-api-request-param#section17371529101117">category</a><span>取值为MARKETING）时，按照应用营销消息频次限制，参考</span><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-apply-right#section1128516504398" target="_blank">通知消息推送数量管理规则</a><span>（若未</span><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-send-alert#section15809122792917" target="_blank">开通消息自分类权益</a><span>，则推送的通知消息默认为资讯营销类消息）。</span></p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.45%">          <p>卡片刷新消息</p></td>         <td class="cellrowborder" width="70.55%">          <p>按照应用下单个卡片限制刷新频次。</p>          <p>默认频次：应用每个设备单个卡片已上架为2条/天，未上架为5条/天。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.45%">          <p>实况窗消息</p></td>         <td class="cellrowborder" width="70.55%">          <p>单个实况窗消息每个设备每5分钟最多更新10次，每小时最多更新60次。</p>          <p>出行打车与赛事比分场景，5分钟最多更新30次，每小时最多更新180次。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section993063213715">设备消息频控<i class="anchor-icon anchor-icon-link" anchorid="section993063213715" tips="复制节点链接"></i></h2>          <p>除了单个场景的次数限制外，推送服务还对单个设备一天内所能接收的所有消息总量进行了限制，系统会根据现网使用场景和流量进行管控，不合理的使用场景系统会进行频控，并且推送服务将向您的回执服务器返回<strong>102结果码</strong>，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-msg-receipt#section19100519195717" target="_blank">回执状态码</a>。</p>    </div>    <div class="tiledSection">     <h2 id="section8492328123517">测试消息频控<i class="anchor-icon anchor-icon-link" anchorid="section8492328123517" tips="复制节点链接"></i></h2>          <p>为了方便开发者测试消息，您可以设置pushOptions.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-scenariozed-api-request-param#section418321011212">testMessage</a>为true，发送测试消息。</p>     <p>每个项目每日可推送总共<span>1000</span>条测试消息（非设备级，所有设备共用<span>1000</span>条）且不受<a href="/consumer/cn/doc/harmonyos-references/push-msg-freq-control#section551882820368">场景化消息频控</a>。若项目当天已推送超过<span>1000</span>条测试消息，则会进行消息限流（限流直到次日后恢复），并且推送服务将向您的回执服务器返回<strong>256结果码</strong>，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-msg-receipt#section19100519195717" target="_blank">回执状态码</a>。</p>    </div>    <div class="tiledSection">     <h2 id="section1753812287251">消息推送速率管控<i class="anchor-icon anchor-icon-link" anchorid="section1753812287251" tips="复制节点链接"></i></h2>          <p>消息推送速率是指应用QPS（每秒推送的设备个数），当应用QPS超过阈值时请求会返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-scenariozed-api-response#section4405122736">HTTP响应码</a> 503。应用QPS与应用类型相关，并且随着应用在华为终端上的月活跃用户人数增加而增长，您可以登录<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>查询到应用QPS阈值，查询路径：“开发与服务 &gt; 推送服务 &gt; 配置 &gt; 选择应用”，选择需要查看的应用，下方即可查到对应的QPS阈值。</p>     <p><span><img originheight="231" originwidth="661" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115304.90887998423899829061130153498192:50001231000000:2800:40CA0EDA07CDFA2CD04DBBEFEFF5EDEF06A70497043992069A9FD0FBBA63B605.png" width="661" height="231"></span></p>     <p></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>全网流量较高时，会出现系统级流控，请求也会返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-scenariozed-api-response#section4405122736">HTTP响应码</a> 503。</li>       </ul>      </div></div></div>    </div>   </div>   <div></div></div>