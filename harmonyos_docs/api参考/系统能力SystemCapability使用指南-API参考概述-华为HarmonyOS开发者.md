<h1 _ngcontent-hpw-c119="" class="doc-title ng-star-inserted" title="系统能力SystemCapability使用指南"> 系统能力SystemCapability使用指南 </h1>

<div _ngcontent-hpw-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述">概述<i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2></div>  <div class="tiledSection"><h3 id="系统能力与-api" class="firsth2">系统能力与 API<i class="anchor-icon anchor-icon-link" anchorid="系统能力与-api" tips="复制节点链接"></i></h3><p>SysCap，全称SystemCapability，即系统能力，指操作系统中每一个相对独立的特性，如蓝牙，WIFI，NFC，摄像头等，都是系统能力之一。每个系统能力对应多个API，随着目标设备是否支持该系统能力共同存在或消失，也会随着DevEco Studio一起提供给开发者做联想。</p> <p><span><img originheight="498" originwidth="1265" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115123.89902608995731123388110976015153:50001231000000:2800:95CFB0C6B8D4C15DCC5AB37DC2D4A38B646ECEE6687BA9A0FEAB6124C0EC24E5.png" width="920" height="362.1818181818182"></span></p> </div>  <div class="tiledSection"><h3 id="支持能力集联想能力集与要求能力集">支持能力集，联想能力集与要求能力集<i class="anchor-icon anchor-icon-link" anchorid="支持能力集联想能力集与要求能力集" tips="复制节点链接"></i></h3><p>支持能力集，联想能力集与要求能力集都是系统能力的集合。</p> <p>支持能力集描述的是设备能力，要求能力集描述的是应用能力。若应用A的要求能力集是设备N的支持能力集的子集，则应用A可分发到设备N上安装运行，否则不能分发。</p> <p>联想能力集是该应用开发时，DevEco Studio可联想的API所在的系统能力集合。</p> <p><span><img originheight="213" originwidth="656" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115123.16492954021923328527164063906187:50001231000000:2800:5A57CEA138582B3CF1D62C1A420666511B22B72EA506219A4DC0A3ED33CAB6F1.png" width="656" height="213"></span></p> </div>  <div class="tiledSection"><h3 id="设备与支持能力集">设备与支持能力集<i class="anchor-icon anchor-icon-link" anchorid="设备与支持能力集" tips="复制节点链接"></i></h3><p>每个设备根据其硬件能力，对应不同的支持能力集。</p> <p>SDK将设备分为两组，典型设备和自定义设备，典型设备的支持能力集由HarmonyOS来定义，自定义设备由设备厂商给出。</p> <p><span><img originheight="685" originwidth="1117" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115123.66703904702293656192575408019067:50001231000000:2800:0DAA1EF6D8B5286C16B427C3F21ABB505C3916145E0617B6B61E144718EF027C.png" width="920" height="564.189794091316"></span></p> </div>  <div class="tiledSection"><h3 id="设备与sdk能力的对应">设备与SDK能力的对应<i class="anchor-icon anchor-icon-link" anchorid="设备与sdk能力的对应" tips="复制节点链接"></i></h3><p>SDK向DevEco Studio提供全量API，DevEco Studio识别开发者项目中选择的设备形态，找到该设备的支持能力集，筛选支持能力集包含的API并提供API联想。</p> <p><span><img originheight="268" originwidth="826" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115123.04394313818050433834980997177039:50001231000000:2800:3A9654DBD5C41FD7BE005C6CC953F818DB92B9D7276F8B7154713481051C95BC.png" width="826" height="268"></span></p> </div>  <div class="tiledSection"><h2 id="syscap开发指导">SysCap开发指导<i class="anchor-icon anchor-icon-link" anchorid="syscap开发指导" tips="复制节点链接"></i></h2></div>  <div class="tiledSection"><h3 id="加入自定义syscap" class="firsth2">加入自定义syscap<i class="anchor-icon anchor-icon-link" anchorid="加入自定义syscap" tips="复制节点链接"></i></h3><p>在某具体的设备型号上，能力可能超出工程默认设备定义的能力集范围，如果需要使用此部分能力，需要额外配置自定义的syscap。</p> <p>请在DevEco Studio工程的模块/src/main目录下，手动创建syscap.json文件。如在entry/src/main目录右键，点击New &gt; File。</p> <p><span><img originheight="138" originwidth="549" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115123.96880849468489125577144081953957:50001231000000:2800:623BFEBB10ACDEBA8C618105D6AFCED7B043A39F5DBB9AB7346D60289E6DC269.png" width="549" height="138"></span></p> <p>新建文件命名为syscap.json。</p> <p><span><img originheight="58" originwidth="337" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115123.33982201932399099959627063910703:50001231000000:2800:961C6959112F94525FD50B78B1129858C288DC632BA7972FDDF3AA56F39E9533.png" width="337" height="58"></span></p> <p>打开新建的syscap.json文件。</p> <p><span><img originheight="141" originwidth="281" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115123.76503568771953311305677912208979:50001231000000:2800:1297EB3485119527FBC286BDD03FF2945A1499492C710E51AC194F62369BDD0B.png" class="notEnlarge" width="281" height="141"></span></p> <p>按如下格式填入所需要使用的SysCaps。以使用NFC能力为例，syscap.json文件示例如下。</p> <div _ngcontent-hpw-c106="" class="highlight-div"><div _ngcontent-hpw-c106="" class="highlight-div-header"><div _ngcontent-hpw-c106="" class="highlight-div-header-left"><div _ngcontent-hpw-c106="" class="handle-button expand-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hpw-c106="" class="highlight-div-header-right"><div _ngcontent-hpw-c106="" class="handle-button ai-button"></div><div _ngcontent-hpw-c106="" class="handle-button line-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hpw-c106="" class="handle-button theme-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hpw-c106="" class="handle-button copy-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hpw-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"devices"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"general"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-comment">// 每一个典型设备对应一个syscap支持能力集，可配置多个典型设备，应与工程所选择的设备一致</span></li><li>      <span class="hljs-string">"phone"</span></li><li>    <span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"development"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-comment">// addedSysCaps内的sycap集合与devices中配置的各设备支持的syscap集合的并集共同构成联想能力集。</span></li><li>    <span class="hljs-attr">"addedSysCaps"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-string">"SystemCapability.Communication.NFC.Core"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-string">"SystemCapability.Communication.NFC.CardEmulation"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-string">"SystemCapability.Communication.NFC.Tag"</span></li><li>    <span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="单设备应用开发">单设备应用开发<i class="anchor-icon anchor-icon-link" anchorid="单设备应用开发" tips="复制节点链接"></i></h3><p>默认应用的联想能力集，要求系统能力集和设备的支持系统能力集相等，开发者修改要求能力集需要慎重。</p> <p><span><img originheight="456" originwidth="903" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115123.76769095476420629626647719320624:50001231000000:2800:E9B2CF8857C9B135F05BE2BF734457CBA0198DEEFD901482AFC9438B02EFAC77.png" width="903" height="456"></span></p> </div>  <div class="tiledSection"><h3 id="跨设备应用开发">跨设备应用开发<i class="anchor-icon anchor-icon-link" anchorid="跨设备应用开发" tips="复制节点链接"></i></h3><p>默认应用的联想能力集是多个设备支持能力集的并集，要求能力集则是交集。</p> <p><span><img originheight="436" originwidth="638" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115123.38819410334421448722606571398631:50001231000000:2800:D18BE420A9AA266733772A518CC12409B35DF5C905CE4FDDB47EE39F62B737CD.png" width="638" height="436"></span></p> </div>  <div class="tiledSection"><h3 id="判断-api-是否可以使用">判断 API 是否可以使用<i class="anchor-icon anchor-icon-link" anchorid="判断-api-是否可以使用" tips="复制节点链接"></i></h3><p>当前提供了ArkTS API和Native API用于帮助判断某个API是否可以使用。</p> <ul><li><p>ArkTS API</p>  <ul><li><p>方法1：HarmonyOS定义了API canIUse帮助开发者来判断该设备是否支持某个特定的syscap。</p>  <div _ngcontent-hpw-c106="" class="highlight-div"><div _ngcontent-hpw-c106="" class="highlight-div-header"><div _ngcontent-hpw-c106="" class="highlight-div-header-left"><div _ngcontent-hpw-c106="" class="handle-button expand-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hpw-c106="" class="highlight-div-header-right"><div _ngcontent-hpw-c106="" class="handle-button ai-button"></div><div _ngcontent-hpw-c106="" class="handle-button line-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hpw-c106="" class="handle-button theme-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hpw-c106="" class="handle-button copy-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hpw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">if</span> (<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">"SystemCapability.ArkUI.ArkUI.Full"</span>)) {</li><li>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"该设备支持SystemCapability.ArkUI.ArkUI.Full"</span>);</li><li>} <span class="hljs-keyword">else</span> {</li><li>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"该设备不支持SystemCapability.ArkUI.ArkUI.Full"</span>);</li><li>}</li></ol></pre></div></div>  </li><li><p>方法2：开发者可通过import的方式将模块导入，若当前设备不支持该模块，import的结果为undefined，开发者在使用其API时，需要判断其是否存在。</p>  <div _ngcontent-hpw-c106="" class="highlight-div"><div _ngcontent-hpw-c106="" class="highlight-div-header"><div _ngcontent-hpw-c106="" class="highlight-div-header-left"><div _ngcontent-hpw-c106="" class="handle-button expand-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hpw-c106="" class="highlight-div-header-right"><div _ngcontent-hpw-c106="" class="handle-button ai-button"></div><div _ngcontent-hpw-c106="" class="handle-button line-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hpw-c106="" class="handle-button theme-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hpw-c106="" class="handle-button copy-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hpw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { geoLocationManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>geoLocationManager.<span class="hljs-title function_">getCurrentLocation</span>(<span class="hljs-function">(<span class="hljs-params">location</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'current location: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(location));</li><li>});</li><li>} <span class="hljs-keyword">catch</span>(err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'该设备不支持位置信息'</span> + err);</li><li>}</li></ol></pre></div></div>  </li></ul>  </li><li><p>Native API</p>  <div _ngcontent-hpw-c106="" class="highlight-div"><div _ngcontent-hpw-c106="" class="highlight-div-header"><div _ngcontent-hpw-c106="" class="highlight-div-header-left"><div _ngcontent-hpw-c106="" class="handle-button expand-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hpw-c106="" class="highlight-div-header-right"><div _ngcontent-hpw-c106="" class="handle-button ai-button"></div><div _ngcontent-hpw-c106="" class="handle-button line-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hpw-c106="" class="handle-button theme-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hpw-c106="" class="handle-button copy-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hpw-c106="" class="highlight-scroll-div"><pre class="c prettyprint linenums hljs language-c" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"syscap_ndk.h"</span></span></li><li>
</li><li><span class="hljs-type">char</span> syscap[] = <span class="hljs-string">"SystemCapability.ArkUI.ArkUI.Full"</span>;</li><li><span class="hljs-type">bool</span> result = canIUse(syscap);</li><li><span class="hljs-keyword">if</span> (result) {</li><li>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"SysCap: %s is supported!\n"</span>, syscap);</li><li>} <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"SysCap: %s is not supported!\n"</span>, syscap);</li><li>}</li></ol></pre></div></div>  </li></ul> <p>除此之外，开发者可以通过API参考文档查询API接口所属的SysCap。</p> </div>  <div class="tiledSection"><h3 id="不同设备相同能力的差异检查">不同设备相同能力的差异检查<i class="anchor-icon anchor-icon-link" anchorid="不同设备相同能力的差异检查" tips="复制节点链接"></i></h3><p>即使是相同的系统能力，在不同的设备下，也会有能力的差异。比如同是摄像头的能力，平板设备优于智能穿戴设备。</p> <p>以下示例通过人脸识别功能进行举例：</p> <div _ngcontent-hpw-c106="" class="highlight-div"><div _ngcontent-hpw-c106="" class="highlight-div-header"><div _ngcontent-hpw-c106="" class="highlight-div-header-left"><div _ngcontent-hpw-c106="" class="handle-button expand-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hpw-c106="" class="highlight-div-header-right"><div _ngcontent-hpw-c106="" class="handle-button ai-button"></div><div _ngcontent-hpw-c106="" class="handle-button line-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hpw-c106="" class="handle-button theme-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hpw-c106="" class="handle-button copy-button"><div _ngcontent-hpw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hpw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> authParam : userAuth.<span class="hljs-property">AuthParam</span> = {</li><li>  <span class="hljs-attr">challenge</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(),</li><li>  <span class="hljs-attr">authType</span>: [userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">PIN</span>],</li><li>  <span class="hljs-attr">authTrustLevel</span>: userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL1</span>,</li><li>};</li><li><span class="hljs-keyword">const</span> widgetParam :userAuth.<span class="hljs-property">WidgetParam</span> = {</li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'请输入密码'</span>,</li><li>};</li><li>
</li><li><span class="hljs-comment">// 在使用接口时可通过try...catch捕获异常。如果接口的SysCap不支持当前设备，将返回801错误码。</span></li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> userAuthInstance = userAuth.<span class="hljs-title function_">getUserAuthInstance</span>(authParam, widgetParam);</li><li>  userAuthInstance.<span class="hljs-title function_">start</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'设备认证成功'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'auth catch error: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="设备间的syscap差异如何产生的">设备间的SysCap差异如何产生的<i class="anchor-icon anchor-icon-link" anchorid="设备间的syscap差异如何产生的" tips="复制节点链接"></i></h3><p>设备的SysCap因产品解决方案厂商拼装的部件组合不同而不同，整体流程如下图：</p> <p><span><img originheight="685" originwidth="1202" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115123.89640743956911381981615495446118:50001231000000:2800:F55D298F46EA3860B04C213CBDA146843DD37021AFBD22D7B054814C3C86D793.png" width="920" height="524.2928452579035"></span></p> <ol><li><p>一套操作系统源码由可选和必选部件集组成，不同的部件为对外体现的系统能力不同，即部件与 SysCap 之间映射关系。</p>  </li><li><p>发布归一化的SDK，API与SysCap之间存在映射关系。</p>  </li><li><p>产品解决方案厂商按硬件能力和产品诉求，可按需拼装部件。</p>  </li><li><p>产品配置的部件可以是系统部件，也可以是三方开发的私有部件，由于部件与SysCap间存在映射，所有拼装后即可得到该产品的SysCap集合。</p>  </li><li><p>SysCap集编码生成 PCID (Product Compatibility ID， 产品兼容性标识)，应用开发者可将PCID导入IDE解码成SysCap，开发时对设备的SysCap差异做兼容性处理。</p>  </li><li><p>部署到设备上的系统参数中包含了SysCap集，系统提供了native的接口和应用接口，可供系统内的部件和应用查询某个SysCap是否存在。</p>  </li><li><p>应用开发过程中，应用必要的SysCap将被编码成RPCID（Required Product Compatibility ID），并写入应用安装包中。应用安装时，包管理器将解码RPCID得到应用需要的 SysCap，与设备当前具备的SysCap比较，若应用要求的SysCap都被满足，则安装成功。</p>  </li><li><p>应用运行时，可通过canIUse接口查询设备的SysCap，保证在不同设备上的兼容性。</p>  </li></ol> </div> </div> <div></div></div>