<h1 _ngcontent-iky-c119="" class="doc-title ng-star-inserted" title="组件描述"> 组件描述 </h1>

<div _ngcontent-iky-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>提供具有网页显示能力的Web组件，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview">@ohos.web.webview</a>提供Web控制能力。</p>    <p>元服务中使用ArkWeb的说明，请参考<a href="https://developer.huawei.com/consumer/cn/doc/atomic-guides/atomicserviceweb-guidelines" target="_blank">https://developer.huawei.com/consumer/cn/doc/atomic-guides/atomicserviceweb-guidelines</a></p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>        <p>该组件首批接口从API version 8开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p></li>       <li>        <p>示例效果请以真机运行为准，当前DevEco Studio预览器不支持。</p></li>      </ul>     </div></div></div>    <p>该模块提供以下Web组件网页显示相关的常用功能：</p>    <ul>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/s-basic-components-web-clientauthenticationhandler">ClientAuthenticationHandler</a>：客户端证书请求事件。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-consolemessage">ConsoleMessage</a>：控制台信息。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-controllerhandler">ControllerHandler</a>：新建Web组件的WebviewController对象。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-dataresubmissionhandler">DataResubmissionHandler</a>：表单数据操作对象。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-eventresult">EventResult</a>：同层事件消费结果。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-fileselectorparam">FileSelectorParam</a>：Web组件获取文件对象。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-fileselectorresult">FileSelectorResult</a>：Web组件文件选择结果。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-fullscreenexithandler">FullScreenExitHandler</a>：Web组件退出全屏的操作对象。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-httpauthhandler">HttpAuthHandler</a>：HttpAuth认证请求相关操作功能对象。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-jsgeolocation">JsGeolocation</a>：地理位置信息权限功能。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-jsresult">JsResult</a>：弹窗操作。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-permissionrequest">PermissionRequest</a>：权限请求。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-screencapturehandler">ScreenCaptureHandler</a>：屏幕捕获相关权限操作。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-sslerrorhandler">SslErrorHandler</a>：SSL错误事件操作功能。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-webcontextmenuparam">WebContextMenuParam</a>：长按或鼠标右键弹出菜单信息。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-webcontextmenuresult">WebContextMenuResult</a>：控制长按或鼠标右键弹出菜单。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-webcookie">WebCookie</a>：当前应用中Web组件的Cookie管理操作。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-webkeyboardcontroller">WebKeyboardController</a>：控制自定义键盘。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-webresourceerror">WebResourceError</a>：资源管理错误。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-webresourcerequest">WebResourceRequest</a>：资源获取请求。</li>     <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-webresourceresponse">WebResourceResponse</a>：资源获取响应。</li>    </ul>    <div class="tiledSection">     <h2 id="需要权限" device-type="phone,2in1,tablet,wearable,tv">需要权限<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="需要权限" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>访问在线网页时需添加网络权限：ohos.permission.INTERNET，具体申请方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions" target="_blank">声明权限</a>。</p>    </div>    <div class="tiledSection">     <h2 id="子组件" device-type="phone,2in1,tablet,wearable,tv">子组件<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="子组件" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>无</p>    </div>    <div class="tiledSection">     <h2 id="接口" device-type="phone,2in1,tablet,wearable,tv">接口<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="接口" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>Web(value: WebOptions)</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>不支持转场动画。</p>       <p>同一页面的多个Web组件，必须绑定不同的WebviewController。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-i#weboptions">WebOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">定义Web选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>加载在线网页。</p>     <div _ngcontent-iky-c106="" class="highlight-div"><div _ngcontent-iky-c106="" class="highlight-div-header"><div _ngcontent-iky-c106="" class="highlight-div-header-left"><div _ngcontent-iky-c106="" class="handle-button expand-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iky-c106="" class="highlight-div-header-right"><div _ngcontent-iky-c106="" class="handle-button ai-button"></div><div _ngcontent-iky-c106="" class="handle-button line-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iky-c106="" class="handle-button theme-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iky-c106="" class="handle-button copy-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iky-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>隐私模式Webview加载在线网页。</p>     <div _ngcontent-iky-c106="" class="highlight-div"><div _ngcontent-iky-c106="" class="highlight-div-header"><div _ngcontent-iky-c106="" class="highlight-div-header-left"><div _ngcontent-iky-c106="" class="handle-button expand-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iky-c106="" class="highlight-div-header-right"><div _ngcontent-iky-c106="" class="handle-button ai-button"></div><div _ngcontent-iky-c106="" class="handle-button line-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iky-c106="" class="handle-button theme-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iky-c106="" class="handle-button copy-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iky-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>, <span class="hljs-attr">incognitoMode</span>: <span class="hljs-literal">true</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>Web组件同步渲染模式。</p>     <div _ngcontent-iky-c106="" class="highlight-div"><div _ngcontent-iky-c106="" class="highlight-div-header"><div _ngcontent-iky-c106="" class="highlight-div-header-left"><div _ngcontent-iky-c106="" class="handle-button expand-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iky-c106="" class="highlight-div-header-right"><div _ngcontent-iky-c106="" class="handle-button ai-button"></div><div _ngcontent-iky-c106="" class="handle-button line-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iky-c106="" class="handle-button theme-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iky-c106="" class="handle-button copy-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iky-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>, <span class="hljs-attr">renderMode</span>: <span class="hljs-title class_">RenderMode</span>.<span class="hljs-property">SYNC_RENDER</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>Web组件指定共享渲染进程。</p>     <div _ngcontent-iky-c106="" class="highlight-div"><div _ngcontent-iky-c106="" class="highlight-div-header"><div _ngcontent-iky-c106="" class="highlight-div-header-left"><div _ngcontent-iky-c106="" class="handle-button expand-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iky-c106="" class="highlight-div-header-right"><div _ngcontent-iky-c106="" class="handle-button ai-button"></div><div _ngcontent-iky-c106="" class="handle-button line-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iky-c106="" class="handle-button theme-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iky-c106="" class="handle-button copy-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iky-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller1</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">controller2</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller1</span>, <span class="hljs-attr">sharedRenderProcessToken</span>: <span class="hljs-string">"111"</span> })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.w3.org'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller2</span>, <span class="hljs-attr">sharedRenderProcessToken</span>: <span class="hljs-string">"111"</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载本地网页。</p>     <p>通过$rawfile方式加载。</p>     <div _ngcontent-iky-c106="" class="highlight-div"><div _ngcontent-iky-c106="" class="highlight-div-header"><div _ngcontent-iky-c106="" class="highlight-div-header-left"><div _ngcontent-iky-c106="" class="handle-button expand-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iky-c106="" class="highlight-div-header-right"><div _ngcontent-iky-c106="" class="handle-button ai-button"></div><div _ngcontent-iky-c106="" class="handle-button line-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iky-c106="" class="handle-button theme-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iky-c106="" class="handle-button copy-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iky-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 通过$rawfile加载本地资源文件。</span></li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>通过resources协议加载。</p>     <p>使用 resource://rawfile/ 协议前缀可以避免常规 $rawfile 方式在处理带有“#”路由链接时的局限性。当URL中包含“#”号时，“#”后面的内容会被视为锚点（fragment）。</p>     <div _ngcontent-iky-c106="" class="highlight-div"><div _ngcontent-iky-c106="" class="highlight-div-header"><div _ngcontent-iky-c106="" class="highlight-div-header-left"><div _ngcontent-iky-c106="" class="handle-button expand-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iky-c106="" class="highlight-div-header-right"><div _ngcontent-iky-c106="" class="handle-button ai-button"></div><div _ngcontent-iky-c106="" class="handle-button line-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iky-c106="" class="handle-button theme-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iky-c106="" class="handle-button copy-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iky-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 通过resource协议加载本地资源文件。</span></li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">"resource://rawfile/index.html#home"</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>在“src\main\resources\rawfile”文件夹下创建index.html：</p>     <div _ngcontent-iky-c106="" class="highlight-div"><div _ngcontent-iky-c106="" class="highlight-div-header"><div _ngcontent-iky-c106="" class="highlight-div-header-left"><div _ngcontent-iky-c106="" class="handle-button expand-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iky-c106="" class="highlight-div-header-right"><div _ngcontent-iky-c106="" class="handle-button ai-button"></div><div _ngcontent-iky-c106="" class="handle-button line-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iky-c106="" class="handle-button theme-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iky-c106="" class="handle-button copy-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iky-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"content"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li>
</li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadContent</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">      <span class="hljs-keyword">var</span> hash = <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>;</span></li><li><span class="language-javascript">      <span class="hljs-keyword">var</span> contentDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>);</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">      <span class="hljs-keyword">if</span> (hash === <span class="hljs-string">'#home'</span>) {</span></li><li><span class="language-javascript">        contentDiv.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;h1&gt;Home Page&lt;/h1&gt;&lt;p&gt;Welcome to the Home Page!&lt;/p&gt;'</span>;</span></li><li><span class="language-javascript">      } <span class="hljs-keyword">else</span> {</span></li><li><span class="language-javascript">        contentDiv.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;h1&gt;Default Page&lt;/h1&gt;&lt;p&gt;This is the default content.&lt;/p&gt;'</span>;</span></li><li><span class="language-javascript">      }</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-comment">// 加载界面</span></span></li><li><span class="language-javascript">    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, loadContent);</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-comment">// 当hash变化时，更新界面</span></span></li><li><span class="language-javascript">    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'hashchange'</span>, loadContent);</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>     <p>加载沙箱路径下的本地资源文件，需要开启应用中文件系统的访问<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-attributes#fileaccess">fileAccess</a>权限。</p>     <ol>      <li>       <p>通过构造的单例对象GlobalContext获取沙箱路径。</p>       <div _ngcontent-iky-c106="" class="highlight-div"><div _ngcontent-iky-c106="" class="highlight-div-header"><div _ngcontent-iky-c106="" class="highlight-div-header-left"><div _ngcontent-iky-c106="" class="handle-button expand-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iky-c106="" class="highlight-div-header-right"><div _ngcontent-iky-c106="" class="handle-button ai-button"></div><div _ngcontent-iky-c106="" class="handle-button line-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iky-c106="" class="handle-button theme-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iky-c106="" class="handle-button copy-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iky-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// GlobalContext.ets</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalContext</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {}</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">GlobalContext</span>;</li><li>  <span class="hljs-keyword">private</span> _objects = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt;();</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">getContext</span>(): <span class="hljs-title class_">GlobalContext</span> {</li><li>    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">GlobalContext</span>.<span class="hljs-property">instance</span>) {</li><li>      <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-property">instance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GlobalContext</span>();</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-property">instance</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">getObject</span>(<span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Object</span> | <span class="hljs-literal">undefined</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_objects</span>.<span class="hljs-title function_">get</span>(value);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">setObject</span>(<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">objectClass</span>: <span class="hljs-title class_">Object</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_objects</span>.<span class="hljs-title function_">set</span>(key, objectClass);</li><li>  }</li><li>}</li></ol></pre></div></div>       <div _ngcontent-iky-c106="" class="highlight-div"><div _ngcontent-iky-c106="" class="highlight-div-header"><div _ngcontent-iky-c106="" class="highlight-div-header-left"><div _ngcontent-iky-c106="" class="handle-button expand-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iky-c106="" class="highlight-div-header-right"><div _ngcontent-iky-c106="" class="handle-button ai-button"></div><div _ngcontent-iky-c106="" class="handle-button line-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iky-c106="" class="handle-button theme-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iky-c106="" class="handle-button copy-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iky-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">GlobalContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../GlobalContext'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> url = <span class="hljs-string">'file://'</span> + <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-title function_">getContext</span>().<span class="hljs-title function_">getObject</span>(<span class="hljs-string">"filesDir"</span>) + <span class="hljs-string">'/index.html'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 加载沙箱路径文件。</span></li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: url, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>      .<span class="hljs-title function_">fileAccess</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>修改EntryAbility.ets。</p>       <p>以filesDir为例，获取沙箱路径。若想获取其他路径，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/application-context-stage#获取应用文件路径" target="_blank">应用文件路径</a>。</p>       <div _ngcontent-iky-c106="" class="highlight-div"><div _ngcontent-iky-c106="" class="highlight-div-header"><div _ngcontent-iky-c106="" class="highlight-div-header-left"><div _ngcontent-iky-c106="" class="handle-button expand-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iky-c106="" class="highlight-div-header-right"><div _ngcontent-iky-c106="" class="handle-button ai-button"></div><div _ngcontent-iky-c106="" class="handle-button line-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iky-c106="" class="handle-button theme-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iky-c106="" class="handle-button copy-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iky-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">GlobalContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../GlobalContext'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    <span class="hljs-comment">// 通过在GlobalContext对象上绑定filesDir，可以实现UIAbility组件与UI之间的数据同步。</span></li><li>    <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-title function_">getContext</span>().<span class="hljs-title function_">setObject</span>(<span class="hljs-string">"filesDir"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">filesDir</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Sandbox path is "</span> + <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-title function_">getContext</span>().<span class="hljs-title function_">getObject</span>(<span class="hljs-string">"filesDir"</span>));</li><li>  }</li><li>}</li></ol></pre></div></div>       <p>加载的html文件。</p>       <div _ngcontent-iky-c106="" class="highlight-div"><div _ngcontent-iky-c106="" class="highlight-div-header"><div _ngcontent-iky-c106="" class="highlight-div-header-left"><div _ngcontent-iky-c106="" class="handle-button expand-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iky-c106="" class="highlight-div-header-right"><div _ngcontent-iky-c106="" class="handle-button ai-button"></div><div _ngcontent-iky-c106="" class="handle-button line-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iky-c106="" class="handle-button theme-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iky-c106="" class="handle-button copy-button"><div _ngcontent-iky-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iky-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>