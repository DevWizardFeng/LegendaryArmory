<h1 _ngcontent-opj-c119="" class="doc-title ng-star-inserted" title="自定义弹窗 (CustomDialog)"> 自定义弹窗 (CustomDialog) </h1>

<div _ngcontent-opj-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>通过CustomDialogController类显示自定义弹窗。使用弹窗组件时，优先考虑自定义弹窗，便于弹窗样式与内容的自定义。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>从API version 7开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="customdialogcontroller" device-type="phone,2in1,tablet,wearable,tv">CustomDialogController<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="customdialogcontroller" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>自定义弹窗的控制器。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection">     <h3 id="导入对象" class="firsth2">导入对象<i class="anchor-icon anchor-icon-link" anchorid="导入对象" tips="复制节点链接"></i></h3>          <div _ngcontent-opj-c106="" class="highlight-div"><div _ngcontent-opj-c106="" class="highlight-div-header"><div _ngcontent-opj-c106="" class="highlight-div-header-left"><div _ngcontent-opj-c106="" class="handle-button expand-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opj-c106="" class="highlight-div-header-right"><div _ngcontent-opj-c106="" class="handle-button ai-button"></div><div _ngcontent-opj-c106="" class="handle-button line-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opj-c106="" class="handle-button theme-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opj-c106="" class="handle-button copy-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>dialogController : <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>(<span class="hljs-title class_">CustomDialogControllerOptions</span>)</li></ol></pre></div></div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>         <p>CustomDialogController仅在作为@CustomDialog和@Component struct成员变量，且在@Component struct内部定义时赋值才有效，具体用法可参考下方示例。</p></li>        <li>         <p>若尝试在CustomDialog中传入多个其他的Controller，以实现在CustomDialog中打开另一个或另一些CustomDialog，那么此处需要将指向自己的controller放在所有controller的后面。详细用法可参考<a href="/consumer/cn/doc/harmonyos-references/ts-methods-custom-dialog-box#示例1弹出嵌套弹窗">示例1弹出嵌套弹窗</a>。</p></li>       </ul>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="constructor" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(value: CustomDialogControllerOptions)</p>     <p>自定义弹窗的构造器。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>自定义弹窗的所有参数，不支持动态刷新，但可以通过设置customStyle为true，并在自定义组件上设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-background#backgroundcolor">背景色</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-background#backgroundblurstyle9">背景模糊</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-size">宽高</a>等属性，通过属性绑定的状态变量来实现动态刷新的效果。</p>       <p>在CustomDialogController作为全局变量以实现全局自定义弹窗的场景下，若对controller重新赋值，则无法通过其关闭之前的弹窗。建议在重新赋值前先关闭弹窗。</p>       <p>在自定义弹窗内拉起另一个自定义弹窗时，不建议直接关闭拉起方。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-methods-custom-dialog-box#customdialogcontrolleroptions对象说明">CustomDialogControllerOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">配置自定义弹窗的参数。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="open" device-type="phone,2in1,tablet,wearable,tv">open<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="open" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>open()</p>     <p>显示自定义弹窗内容，允许多次使用，但如果弹框为SubWindow模式，则该弹框不允许再弹出SubWindow弹框。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>不支持在输入法类型窗口中使用子窗（showInSubwindow为true）的CustomDialog，详情见输入法框架的约束与限制说明<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inputmethodengine#createpanel10-1">createPanel</a>。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection">     <h3 id="close" device-type="phone,2in1,tablet,wearable,tv">close<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="close" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>close()</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p>关闭显示的自定义弹窗，若已关闭，则不生效。</p>    </div>    <div class="tiledSection">     <h3 id="getstate20" device-type="phone,2in1,tablet,wearable,tv">getState<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getstate20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getState(): PromptActionCommonState</p>     <p>获取自定义弹窗的状态。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-methods-custom-dialog-box#promptactioncommonstate20">PromptActionCommonState</a></td>         <td class="cellrowborder" width="50%">返回对应的弹窗状态。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="promptactioncommonstate20" device-type="phone,2in1,tablet,wearable,tv">PromptActionCommonState<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="promptactioncommonstate20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type PromptActionCommonState = promptAction.CommonState</p>     <p>自定义弹窗的状态。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction#commonstate20枚举说明">promptAction.CommonState</a></td>         <td class="cellrowborder" width="50%">返回对应的弹窗状态。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="customdialogcontrolleroptions对象说明" device-type="phone,2in1,tablet,wearable,tv">CustomDialogControllerOptions对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="customdialogcontrolleroptions对象说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>自定义弹窗的样式。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">builder</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-common-components-custom-dialog" target="_blank">CustomDialog</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>自定义弹窗内容构造器。</p>          <p><strong>说明：</strong></p>          <p>若builder构造器使用回调函数作为入参，请注意使用this绑定问题，如builder: custombuilder({ callback: ()=&gt; {...}})。</p>          <p>若在builder中监听数据变化可以使用@Link或@Consume，而其他方式如@Prop、@ObjectLink不适用此场景。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">cancel</td>         <td class="cellrowborder" width="20%">() =&gt; void</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>返回、ESC键和点击遮障层弹窗退出时的回调。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">autoCancel</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>是否允许点击遮障层退出，true表示关闭弹窗。false表示不关闭弹窗。</p>          <p>默认值：true</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">alignment</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-methods-alert-dialog-box#dialogalignment枚举说明">DialogAlignment</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>弹窗在竖直方向上的对齐方式。</p>          <p>默认值：DialogAlignment.Default</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">offset</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#offset">Offset</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>弹窗相对alignment所在位置的偏移量。</p>          <p>默认值：{ dx: 0, dy: 0 }</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">customStyle</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>弹窗容器样式是否自定义。值为true表示弹窗容器样式不能自定义，值为false表示弹窗容器样式能自定义。</p>          <p>默认值：false</p>          <p>设置为false时：</p>          <p>1. 默认圆角为32vp。</p>          <p>2. 未设置弹窗宽度高度：弹窗容器的宽度根据栅格系统自适应。高度自适应自定义的内容节点。</p>          <p>3. 设置弹窗宽度高度：弹窗容器的宽度不超过默认样式下的最大宽度（自定义节点设置100%的宽度），弹窗容器的高度不超过默认样式下的最大高度（自定义节点设置100%的高度）。</p>          <p>4. 受安全区域的影响，弹窗显示区域将排除安全区域。例如在PC/2in1设备上避让屏幕边缘以及窗口标题栏。</p>          <p>设置为true时：</p>          <p>1. 圆角为0，弹窗背景色为透明色。</p>          <p>2. 不支持设置弹窗宽度、高度、边框宽度、边框样式、边框颜色以及阴影宽度。</p>          <p>3. 弹窗显示区域为屏幕。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">gridCount<sup>8+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>弹窗宽度占<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-grid-layout" target="_blank">栅格宽度</a>的个数。</p>          <p>默认为按照窗口大小自适应，异常值按默认值处理，最大栅格数为系统最大栅格数。</p>          <p>取值范围：大于等于0的整数。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">maskColor<sup>10+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcecolor">ResourceColor</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>自定义蒙层颜色。</p>          <p>默认值：0x33000000</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">maskRect<sup>10+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-methods-alert-dialog-box#rectangle8类型说明">Rectangle</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>弹窗遮蔽层区域，在遮蔽层区域内的事件不透传，在遮蔽层区域外的事件透传。</p>          <p>默认值：{ x: 0, y: 0, width: '100%', height: '100%' }</p>          <p><strong>说明：</strong></p>          <p>showInSubWindow为true时，maskRect不生效。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">openAnimation<sup>10+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-explicit-animation#animateparam对象说明">AnimateParam</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>自定义设置弹窗弹出的动画效果相关参数。</p>          <p><strong>说明</strong>：</p>          <p>tempo默认值为1，当设置小于等于0的值时按默认值处理。</p>          <p>iterations默认值为1，默认播放一次，设置为其他数值时按默认值处理。</p>          <p>playMode控制动画播放模式，默认值为PlayMode.Normal，设置为其他数值时按照默认值处理。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">closeAnimation<sup>10+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-explicit-animation#animateparam对象说明">AnimateParam</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>自定义设置弹窗关闭的动画效果相关参数。</p>          <p><strong>说明</strong>：</p>          <p>tempo默认值为1，当设置小于等于0的值时按默认值处理。</p>          <p>iterations默认值为1，默认播放一次，设置为其他数值时按默认值处理。</p>          <p>playMode控制动画播放模式，默认值为PlayMode.Normal，设置为其他数值时按照默认值处理。</p>          <p>页面转场切换时，建议使用默认关闭动效。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">showInSubWindow<sup>10+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>某弹框需要显示在主窗口之外时，是否在子窗口显示此弹窗。值为true表示在子窗口显示弹窗。</p>          <p>默认值：false，弹窗显示在应用内，而非独立子窗口。</p>          <p><strong>说明</strong>：showInSubWindow为true的弹窗无法触发显示另一个showInSubWindow为true的弹窗。不建议在showInSubWindow为true的弹窗中使用CalendarPicker、CalendarPickerDialog、DatePickerDialog、TextPickerDialog、TimePickerDialog、Toast组件，弹窗会影响上述组件行为。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">backgroundColor<sup>10+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcecolor">ResourceColor</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置弹窗背板填充。</p>          <p>默认值：Color.Transparent</p>          <p><strong>说明：</strong> 如果同时设置了内容构造器的背景色，则backgroundColor会被内容构造器的背景色覆盖。</p>          <p>backgroundColor会与模糊属性backgroundBlurStyle叠加产生效果，如果不符合预期，可将backgroundBlurStyle设置为BlurStyle.NONE，即可取消模糊。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">cornerRadius<sup>10+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#dimension10">Dimension</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#borderradiuses9">BorderRadiuses</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置背板的圆角半径。</p>          <p>可分别设置4个圆角的半径。</p>          <p>默认值：{ topLeft: '32vp', topRight: '32vp', bottomLeft: '32vp', bottomRight: '32vp' }</p>          <p><strong>说明</strong>：自定义弹窗默认的背板圆角半径为32vp，如果需要使用cornerRadius属性，请和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-border#borderradius">borderRadius</a>属性一起使用。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">isModal<sup>11+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>弹窗是否为模态窗口。值为true表示为模态窗口且有蒙层，不可与弹窗周围其他控件进行交互，即蒙层区域无法事件透传。值为false表示为非模态窗口且无蒙层，可以与弹窗周围其他控件进行交互。</p>          <p>默认值：true</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">onWillDismiss<sup>12+</sup></td>         <td class="cellrowborder" width="20%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/ts-methods-custom-dialog-box#dismissdialogaction12">DismissDialogAction</a>&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>交互式关闭回调函数。</p>          <p><strong>说明：</strong></p>          <p>1.当用户执行点击遮障层关闭、侧滑（左滑/右滑）、三键back、键盘ESC关闭交互操作时，如果注册该回调函数，则不会立刻关闭弹窗。在回调函数中可以通过reason得到阻拦关闭弹窗的操作类型，从而根据原因选择是否能关闭弹窗。当前组件返回的reason中，暂不支持CLOSE_BUTTON的枚举值。</p>          <p>2.在onWillDismiss回调中，不能再做onWillDismiss拦截。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">borderWidth<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#dimension10">Dimension</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#edgewidths9">EdgeWidths</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置弹窗背板的边框宽度。</p>          <p>可分别设置4个边框宽度。</p>          <p>默认值：0。</p>          <p>百分比参数方式：以父元素弹窗宽的百分比来设置弹窗的边框宽度。</p>          <p>当弹窗左边框和右边框大于弹窗宽度，弹窗上边框和下边框大于弹窗高度，显示可能不符合预期。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">borderColor<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcecolor">ResourceColor</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#edgecolors9">EdgeColors</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置弹窗背板的边框颜色。</p>          <p>默认值：Color.Black</p>          <p>如果使用borderColor属性，需要和borderWidth属性一起使用。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">borderStyle<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#borderstyle">BorderStyle</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#edgestyles9">EdgeStyles</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置弹窗背板的边框样式。</p>          <p>默认值：BorderStyle.Solid</p>          <p>如果使用borderStyle属性，需要和borderWidth属性一起使用。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">width<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#dimension10">Dimension</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置弹窗背板的宽度。</p>          <p><strong>说明：</strong></p>          <p>- 弹窗宽度默认最大值：400vp。</p>          <p>- 百分比参数方式：弹窗参考宽度为所在窗口的宽度，在此基础上调小或调大。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">height<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#dimension10">Dimension</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置弹窗背板的高度。</p>          <p><strong>说明：</strong></p>          <p>- 弹窗高度默认最大值：0.9 *（窗口高度 - 安全区域）。</p>          <p>- 百分比参数方式：弹窗参考高度为（窗口高度 - 安全区域），在此基础上调小或调大。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">shadow<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-image-effect#shadowoptions对象说明">ShadowOptions</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-image-effect#shadowstyle10枚举说明">ShadowStyle</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置弹窗背板的阴影。</p>          <p>当设备为2in1时，默认场景下获焦阴影值为ShadowStyle.OUTER_FLOATING_MD，失焦为ShadowStyle.OUTER_FLOATING_SM。其他设备默认无阴影。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">backgroundBlurStyle<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-background#blurstyle9">BlurStyle</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>弹窗背板模糊材质。</p>          <p>默认值：BlurStyle.COMPONENT_ULTRA_THICK</p>          <p><strong>说明：</strong></p>          <p>设置为BlurStyle.NONE即可关闭背景虚化。当设置了backgroundBlurStyle为非NONE值时，则不要设置backgroundColor，否则颜色显示将不符合预期效果。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">backgroundBlurStyleOptions<sup>19+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-background#backgroundblurstyleoptions10对象说明">BackgroundBlurStyleOptions</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>背景模糊效果。默认值请参考BackgroundBlurStyleOptions类型说明。</p>          <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">backgroundEffect<sup>19+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-background#backgroundeffectoptions11">BackgroundEffectOptions</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>背景效果参数。默认值请参考BackgroundEffectOptions类型说明。</p>          <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">keyboardAvoidMode<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-popup#keyboardavoidmode12枚举说明">KeyboardAvoidMode</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>用于设置弹窗是否在拉起软键盘时进行自动避让。</p>          <p>默认值：KeyboardAvoidMode.DEFAULT</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">enableHoverMode<sup>14+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>是否响应悬停态，值为true时，响应悬停态。</p>          <p>默认值：false，默认不响应。</p>          <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">hoverModeArea<sup>14+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-sheet-transition#hovermodeareatype14">HoverModeAreaType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>悬停态下弹窗默认展示区域。</p>          <p>默认值：HoverModeAreaType.BOTTOM_SCREEN。</p>          <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">onWillAppear<sup>19+</sup></td>         <td class="cellrowborder" width="20%">Callback&lt;void&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>弹窗显示动效前的事件回调。</p>          <p><strong>说明：</strong></p>          <p>1.正常时序依次为：onWillAppear&gt;&gt;onDidAppear&gt;&gt;onWillDisappear&gt;&gt;onDidDisappear。</p>          <p>2.在onWillAppear内设置改变弹窗显示效果的回调事件，二次弹出生效。</p>          <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">onDidAppear<sup>19+</sup></td>         <td class="cellrowborder" width="20%">Callback&lt;void&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>弹窗弹出后的事件回调。</p>          <p><strong>说明：</strong></p>          <p>1.正常时序依次为：onWillAppear&gt;&gt;onDidAppear&gt;&gt;onWillDisappear&gt;&gt;onDidDisappear。</p>          <p>2.在onDidAppear内设置改变弹窗显示效果的回调事件，二次弹出生效。</p>          <p>3.快速点击弹出，关闭弹窗时，onWillDisappear在onDidAppear前生效。</p>          <p>4.弹窗入场动效未完成时彻底关闭弹窗，动效打断，onDidAppear不会触发。</p>          <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">onWillDisappear<sup>19+</sup></td>         <td class="cellrowborder" width="20%">Callback&lt;void&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>弹窗退出动效前的事件回调。</p>          <p><strong>说明：</strong></p>          <p>1.正常时序依次为：onWillAppear&gt;&gt;onDidAppear&gt;&gt;onWillDisappear&gt;&gt;onDidDisappear。</p>          <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">onDidDisappear<sup>19+</sup></td>         <td class="cellrowborder" width="20%">Callback&lt;void&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>弹窗消失后的事件回调。</p>          <p><strong>说明：</strong></p>          <p>1.正常时序依次为：onWillAppear&gt;&gt;onDidAppear&gt;&gt;onWillDisappear&gt;&gt;onDidDisappear。</p>          <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">keyboardAvoidDistance<sup>15+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#lengthmetrics12">LengthMetrics</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>弹窗避让键盘后，和键盘之间的距离。</p>          <p><strong>说明：</strong></p>          <p>- 默认值：16vp。</p>          <p>- 默认单位：vp。</p>          <p>- 当且仅当keyboardAvoidMode属性设置为DEFAULT时生效。</p>          <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">levelMode<sup>15+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction#levelmode15枚举说明">LevelMode</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置弹窗显示层级。</p>          <p><strong>说明：</strong></p>          <p>- 默认值：LevelMode.OVERLAY。</p>          <p>- 当且仅当showInSubWindow属性设置为false时生效。</p>          <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">levelUniqueId<sup>15+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置页面级弹窗需要显示的层级下的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-framenode#getuniqueid12">节点 uniqueId</a>。</p>          <p>取值范围：大于等于0的数字。</p>          <p><strong>说明：</strong></p>          <p>- 当且仅当levelMode属性设置为LevelMode.EMBEDDED时生效。</p>          <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">immersiveMode<sup>15+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction#immersivemode15枚举说明">ImmersiveMode</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置页面内弹窗蒙层效果。</p>          <p><strong>说明：</strong></p>          <p>- 默认值：ImmersiveMode.DEFAULT</p>          <p>- 当且仅当levelMode属性设置为LevelMode.EMBEDDED时生效。</p>          <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">levelOrder<sup>18+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction#levelorder18">LevelOrder</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置弹窗显示的顺序。</p>          <p><strong>说明：</strong></p>          <p>- 默认值：LevelOrder.clamp(0)</p>          <p>- 不支持动态刷新顺序。</p>          <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">focusable<sup>19+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置弹窗是否获取焦点。值为true表示获取焦点，值为false表示不获取焦点。</p>          <p>默认值：true</p>          <p><strong>说明：</strong></p>          <p>只有弹出覆盖在当前窗口之上的弹窗才可以获取焦点。</p>          <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>按下返回键和ESC键时会让弹窗退出。</li>        <li>         <p>弹窗在避让软键盘时到达极限高度之后会压缩高度。</p>         <p>需要注意：高度压缩生效在外层容器上，如果容器根节点中的子组件设置了较大的固定高度，由于容器默认不裁剪，依然可能存在超出屏幕显示的情况。</p></li>        <li>自定义弹窗仅适用于简单提示场景，不能替代页面使用。弹窗避让软键盘时，与软键盘之间存在16vp的安全间距。</li>        <li>         <p>为了达成良好的视觉体验，弹窗的显示和关闭存在默认动画，动画时长不同设备间可能存在差异。</p>         <p>需要注意：在动画播放过程中，页面不响应触摸、滑动、点击操作。关闭默认弹窗动画效果可设置openAnimation和closeAnimation的duration为0。</p></li>        <li>当前，ArkUI弹出框默认为非页面级弹出框，在页面路由跳转时，如果开发者未调用close方法将其关闭，弹出框将不会自动关闭。若需实现在跳转页面时覆盖弹出框的场景，可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-navigation-navigation#页面显示类型" target="_blank">组件导航子页面显示类型的弹窗类型</a>或者<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-embedded-dialog" target="_blank">页面级弹出框</a>。</li>       </ul>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="dismissdialogaction12" device-type="phone,2in1,tablet,wearable,tv">DismissDialogAction<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dismissdialogaction12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>Dialog关闭的信息。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection">     <h3 id="属性" class="firsth2">属性<i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.2.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.2.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.2.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.2.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.2.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">dismiss</td>         <td class="cellrowborder" width="20%">Callback&lt;void&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">Dialog关闭回调函数。开发者需要退出时调用，不需要退出时无需调用。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">reason</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-popup#dismissreason12枚举说明">DismissReason</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">Dialog无法关闭原因。根据开发者需要选择不同操作下，Dialog是否需要关闭。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="示例" device-type="phone,2in1,tablet,wearable,tv">示例<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="示例" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection">     <h3 id="示例1弹出嵌套弹窗" class="firsth2">示例1（弹出嵌套弹窗）<i class="anchor-icon anchor-icon-link" anchorid="示例1弹出嵌套弹窗" tips="复制节点链接"></i></h3>          <p>该示例实现了在CustomDialog中打开另一个或另一些CustomDialog。</p>     <div _ngcontent-opj-c106="" class="highlight-div"><div _ngcontent-opj-c106="" class="highlight-div-header"><div _ngcontent-opj-c106="" class="highlight-div-header-left"><div _ngcontent-opj-c106="" class="handle-button expand-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opj-c106="" class="highlight-div-header-right"><div _ngcontent-opj-c106="" class="handle-button ai-button"></div><div _ngcontent-opj-c106="" class="handle-button line-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opj-c106="" class="handle-button theme-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opj-c106="" class="handle-button copy-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@CustomDialog</span></li><li>struct <span class="hljs-title class_">CustomDialogExampleTwo</span> {</li><li>  controllerTwo?: <span class="hljs-title class_">CustomDialogController</span>;</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'我是第二个弹窗'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我关闭第二个弹窗'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controllerTwo</span> != <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controllerTwo</span>.<span class="hljs-title function_">close</span>();</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>    }</li><li>  }</li><li>}</li><li><span class="hljs-meta">@CustomDialog</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogExample</span> {</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">textValue</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">inputValue</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-attr">dialogControllerTwo</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomDialogExampleTwo</span>(),</li><li>    <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-property">Bottom</span>,</li><li>    <span class="hljs-attr">onWillDismiss</span>:<span class="hljs-function">(<span class="hljs-params">dismissDialogAction: DismissDialogAction</span>)=&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`reason= <span class="hljs-subst">${dismissDialogAction.reason}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'dialog onWillDismiss'</span>);</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">PRESS_BACK</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">TOUCH_OUTSIDE</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>    },</li><li>    <span class="hljs-attr">offset</span>: { <span class="hljs-attr">dx</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">dy</span>: -<span class="hljs-number">25</span> } })</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span>;</li><li>  <span class="hljs-comment">// 若尝试在CustomDialog中传入多个其他的Controller，以实现在CustomDialog中打开另一个或另一些CustomDialog，那么此处需要将指向自己的controller放在所有controller的后面</span></li><li>  <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>  <span class="hljs-attr">confirm</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Change text'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span> }).<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>        .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span> = value;</li><li>        })</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Whether to change a text?'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>      <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceAround</span> }) {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'cancel'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> != <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancel</span>();</li><li>            }</li><li>          }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xffffff</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'confirm'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> != <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">confirm</span>();</li><li>            }</li><li>          }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xffffff</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>)</li><li>      }.<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>
</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我打开第二个弹窗'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogControllerTwo</span> != <span class="hljs-literal">null</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogControllerTwo</span>.<span class="hljs-title function_">open</span>();</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>    }.<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>    <span class="hljs-comment">// 如果需要使用border属性或cornerRadius属性，请和borderRadius属性一起使用。</span></li><li>  }</li><li>}</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogUser</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">textValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">inputValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'click me'</span></li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomDialogExample</span>({</li><li>      <span class="hljs-attr">cancel</span>: <span class="hljs-function">()=&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onCancel</span>(); },</li><li>      <span class="hljs-attr">confirm</span>: <span class="hljs-function">()=&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onAccept</span>(); },</li><li>      <span class="hljs-attr">textValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span>,</li><li>      <span class="hljs-attr">inputValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span></li><li>    }),</li><li>    <span class="hljs-attr">cancel</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">exitApp</span>,</li><li>    <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">onWillDismiss</span>:<span class="hljs-function">(<span class="hljs-params">dismissDialogAction: DismissDialogAction</span>)=&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`reason= <span class="hljs-subst">${dismissDialogAction.reason}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'dialog onWillDismiss'</span>);</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">PRESS_BACK</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">TOUCH_OUTSIDE</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>    },</li><li>    <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-property">Bottom</span>,</li><li>    <span class="hljs-attr">offset</span>: { <span class="hljs-attr">dx</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">dy</span>: -<span class="hljs-number">20</span> },</li><li>    <span class="hljs-attr">gridCount</span>: <span class="hljs-number">4</span>,</li><li>    <span class="hljs-attr">customStyle</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">cornerRadius</span>: <span class="hljs-number">10</span>,</li><li>  })</li><li>
</li><li>  <span class="hljs-comment">// 在自定义组件即将析构销毁时将dialogController置空</span></li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// 将dialogController置空</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onCancel</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the first button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onAccept</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the second button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">exitApp</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Click the callback in the blank area'</span>);</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> != <span class="hljs-literal">null</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>();</li><li>          }</li><li>        }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x317aff</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="729" originwidth="332" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115507.17166067449355130752790608767060:50001231000000:2800:303B0DF592E6788B30DF545B399B76AE396343580C9FB9DB7C19B3104D3297A4.gif" width="332" height="729"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例2可在主窗外弹出的弹窗">示例2（可在主窗外弹出的弹窗）<i class="anchor-icon anchor-icon-link" anchorid="示例2可在主窗外弹出的弹窗" tips="复制节点链接"></i></h3>          <p>在2in1设备上设置showInSubWindow为true时，可以弹出在主窗外显示的弹窗。</p>     <div _ngcontent-opj-c106="" class="highlight-div"><div _ngcontent-opj-c106="" class="highlight-div-header"><div _ngcontent-opj-c106="" class="highlight-div-header-left"><div _ngcontent-opj-c106="" class="handle-button expand-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opj-c106="" class="highlight-div-header-right"><div _ngcontent-opj-c106="" class="handle-button ai-button"></div><div _ngcontent-opj-c106="" class="handle-button line-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opj-c106="" class="handle-button theme-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opj-c106="" class="handle-button copy-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@CustomDialog</span></li><li>struct <span class="hljs-title class_">CustomDialogExample</span> {</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span>;</li><li>  <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>  <span class="hljs-attr">confirm</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'可展示在主窗口外的弹窗'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我关闭弹窗'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> != <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>    }</li><li>  }</li><li>}</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogUser</span> {</li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomDialogExample</span>({</li><li>      <span class="hljs-attr">cancel</span>: <span class="hljs-function">()=&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onCancel</span>(); },</li><li>      <span class="hljs-attr">confirm</span>: <span class="hljs-function">()=&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onAccept</span>(); }</li><li>    }),</li><li>    <span class="hljs-attr">cancel</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">existApp</span>,</li><li>    <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">onWillDismiss</span>:<span class="hljs-function">(<span class="hljs-params">dismissDialogAction: DismissDialogAction</span>)=&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`reason= <span class="hljs-subst">${dismissDialogAction.reason}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'dialog onWillDismiss'</span>);</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">PRESS_BACK</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">TOUCH_OUTSIDE</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>    },</li><li>    <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-property">Center</span>,</li><li>    <span class="hljs-attr">offset</span>: { <span class="hljs-attr">dx</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">dy</span>: -<span class="hljs-number">20</span> },</li><li>    <span class="hljs-attr">gridCount</span>: <span class="hljs-number">4</span>,</li><li>    <span class="hljs-attr">showInSubWindow</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">isModal</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">customStyle</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">cornerRadius</span>: <span class="hljs-number">10</span>,</li><li>    <span class="hljs-attr">focusable</span>: <span class="hljs-literal">true</span></li><li>  })</li><li>  <span class="hljs-comment">// 在自定义组件即将析构销毁时将dialogController置空</span></li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// 将dialogController置空</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onCancel</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the first button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onAccept</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the second button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">existApp</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Click the callback in the blank area'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'click me'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> != <span class="hljs-literal">null</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>();</li><li>          }</li><li>        }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x317aff</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="550" originwidth="382" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115507.12798711202027512073086743309695:50001231000000:2800:5A614AAB9C67B495EE497BF36C7937FEB387EC91B197553133931ED8C90B2471.jpg" width="382" height="550"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例3设置弹窗的样式">示例3（设置弹窗的样式）<i class="anchor-icon anchor-icon-link" anchorid="示例3设置弹窗的样式" tips="复制节点链接"></i></h3>          <p>该示例定义了CustomDialog的样式，包括宽度、高度、背景色、阴影等。</p>     <div _ngcontent-opj-c106="" class="highlight-div"><div _ngcontent-opj-c106="" class="highlight-div-header"><div _ngcontent-opj-c106="" class="highlight-div-header-left"><div _ngcontent-opj-c106="" class="handle-button expand-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opj-c106="" class="highlight-div-header-right"><div _ngcontent-opj-c106="" class="handle-button ai-button"></div><div _ngcontent-opj-c106="" class="handle-button line-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opj-c106="" class="handle-button theme-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opj-c106="" class="handle-button copy-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@CustomDialog</span></li><li>struct <span class="hljs-title class_">CustomDialogExample</span> {</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span>;</li><li>  <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>  <span class="hljs-attr">confirm</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'这是自定义弹窗'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我关闭弹窗'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> != <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>    }</li><li>  }</li><li>}</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogUser</span> {</li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomDialogExample</span>({</li><li>      <span class="hljs-attr">cancel</span>: <span class="hljs-function">()=&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onCancel</span>(); },</li><li>      <span class="hljs-attr">confirm</span>: <span class="hljs-function">()=&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onAccept</span>(); }</li><li>    }),</li><li>    <span class="hljs-attr">cancel</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">existApp</span>,</li><li>    <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">onWillDismiss</span>:<span class="hljs-function">(<span class="hljs-params">dismissDialogAction: DismissDialogAction</span>)=&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`reason= <span class="hljs-subst">${dismissDialogAction.reason}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'dialog onWillDismiss'</span>)</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">PRESS_BACK</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">TOUCH_OUTSIDE</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>    },</li><li>    <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-property">Center</span>,</li><li>    <span class="hljs-attr">offset</span>: { <span class="hljs-attr">dx</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">dy</span>: -<span class="hljs-number">20</span> },</li><li>    <span class="hljs-attr">customStyle</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">cornerRadius</span>: <span class="hljs-number">20</span>,</li><li>    <span class="hljs-attr">width</span>: <span class="hljs-number">300</span>,</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-number">200</span>,</li><li>    <span class="hljs-attr">borderWidth</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">borderStyle</span>: <span class="hljs-title class_">BorderStyle</span>.<span class="hljs-property">Dashed</span>,<span class="hljs-comment">//使用borderStyle属性，需要和borderWidth属性一起使用</span></li><li>    <span class="hljs-attr">borderColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>,<span class="hljs-comment">//使用borderColor属性，需要和borderWidth属性一起使用</span></li><li>    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>,</li><li>    <span class="hljs-attr">shadow</span>: ({ <span class="hljs-attr">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Grey</span>, <span class="hljs-attr">offsetX</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">offsetY</span>: <span class="hljs-number">0</span>}),</li><li>  })</li><li>  <span class="hljs-comment">// 在自定义组件即将析构销毁时将dialogController置空</span></li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// 将dialogController置空</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onCancel</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the first button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onAccept</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the second button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">existApp</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Click the callback in the blank area'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'click me'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> != <span class="hljs-literal">null</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>();</li><li>          }</li><li>        }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x317aff</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="500" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115507.24331063795662076672874314856107:50001231000000:2800:257BC316F50E92A831021EC24DF08D595875697807FCBCD6016878CD018EEC60.gif" width="348" height="500"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例4悬停态弹窗">示例4（悬停态弹窗）<i class="anchor-icon anchor-icon-link" anchorid="示例4悬停态弹窗" tips="复制节点链接"></i></h3>          <p>该示例展示了在折叠屏悬停态下设置dialog布局区域的效果。</p>     <div _ngcontent-opj-c106="" class="highlight-div"><div _ngcontent-opj-c106="" class="highlight-div-header"><div _ngcontent-opj-c106="" class="highlight-div-header-left"><div _ngcontent-opj-c106="" class="handle-button expand-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opj-c106="" class="highlight-div-header-right"><div _ngcontent-opj-c106="" class="handle-button ai-button"></div><div _ngcontent-opj-c106="" class="handle-button line-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opj-c106="" class="handle-button theme-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opj-c106="" class="handle-button copy-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@CustomDialog</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogExample</span> {</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">textValue</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">inputValue</span>: <span class="hljs-built_in">string</span>;</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Change text'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span> }).<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>        .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span> = value;</li><li>        })</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Whether to change a text?'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>      <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceAround</span> }) {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'cancel'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> != <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>            }</li><li>          }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xffffff</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'confirm'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> != <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>            }</li><li>          }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xffffff</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>)</li><li>      }.<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>    }.<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>    <span class="hljs-comment">// 如果需要使用border属性或cornerRadius属性，请和borderRadius属性一起使用。</span></li><li>  }</li><li>}</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogUser</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">textValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">inputValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'click me'</span>;</li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomDialogExample</span>({</li><li>      <span class="hljs-attr">textValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span>,</li><li>      <span class="hljs-attr">inputValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span></li><li>    }),</li><li>    <span class="hljs-attr">cancel</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">exitApp</span>,</li><li>    <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">onWillDismiss</span>: <span class="hljs-function">(<span class="hljs-params">dismissDialogAction: DismissDialogAction</span>)=&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`reason= <span class="hljs-subst">${dismissDialogAction.reason}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'dialog onWillDismiss'</span>);</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">PRESS_BACK</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">TOUCH_OUTSIDE</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>    },</li><li>    <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-property">Bottom</span>,</li><li>    <span class="hljs-attr">offset</span>: { <span class="hljs-attr">dx</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">dy</span>: -<span class="hljs-number">20</span> },</li><li>    <span class="hljs-attr">gridCount</span>: <span class="hljs-number">4</span>,</li><li>    <span class="hljs-attr">customStyle</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">cornerRadius</span>: <span class="hljs-number">10</span>,</li><li>    <span class="hljs-attr">enableHoverMode</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">hoverModeArea</span>: <span class="hljs-title class_">HoverModeAreaType</span>.<span class="hljs-property">TOP_SCREEN</span></li><li>  })</li><li>
</li><li>  <span class="hljs-comment">// 在自定义组件即将析构销毁时将dialogController置空</span></li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// 将dialogController置空</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">exitApp</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Click the callback in the blank area'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> != <span class="hljs-literal">null</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>();</li><li>          }</li><li>        }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x317aff</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="1019" originwidth="1210" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115507.15568475070710019985813931348873:50001231000000:2800:0D7073946A866FE39F0B27F486C6A5DA88A0FC6A8AD28039E54502F5928EBCDE.gif" width="920" height="774.7768595041323"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例5获取弹窗的状态">示例5（获取弹窗的状态）<i class="anchor-icon anchor-icon-link" anchorid="示例5获取弹窗的状态" tips="复制节点链接"></i></h3>          <p>该示例实现了在CustomDialogController中调用getState获取弹窗当前状态。</p>     <div _ngcontent-opj-c106="" class="highlight-div"><div _ngcontent-opj-c106="" class="highlight-div-header"><div _ngcontent-opj-c106="" class="highlight-div-header-left"><div _ngcontent-opj-c106="" class="handle-button expand-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opj-c106="" class="highlight-div-header-right"><div _ngcontent-opj-c106="" class="handle-button ai-button"></div><div _ngcontent-opj-c106="" class="handle-button line-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opj-c106="" class="handle-button theme-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opj-c106="" class="handle-button copy-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@CustomDialog</span></li><li>struct <span class="hljs-title class_">CustomDialogExample</span> {</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"点我查询弹窗状态:通过自定义组件自带controller"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDialogController</span>() != <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'state:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDialogController</span>().<span class="hljs-title function_">getState</span>())</li><li>          } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'state: no exist'</span>)</li><li>          }</li><li>        }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我查询弹窗状态:通过CustomDialogController '</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'state:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">getState</span>())</li><li>        }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我关闭弹窗'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDialogController</span>() != <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDialogController</span>().<span class="hljs-title function_">close</span>()</li><li>          }</li><li>        }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>      </li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogUser</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">bg</span>: <span class="hljs-title class_">ResourceColor</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span></li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomDialogExample</span>({</li><li>    }),</li><li>    <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">false</span></li><li>  })</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'click me'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> != <span class="hljs-literal">null</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>()</li><li>          }</li><li>        }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x317aff</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">bg</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="示例6使用link和consume监听数据变化">示例6（使用@Link和@Consume监听数据变化）<i class="anchor-icon anchor-icon-link" anchorid="示例6使用link和consume监听数据变化" tips="复制节点链接"></i></h3>          <p>该示例使用@Link和@Consume实现页面与弹窗内数据的双向绑定。</p>     <div _ngcontent-opj-c106="" class="highlight-div"><div _ngcontent-opj-c106="" class="highlight-div-header"><div _ngcontent-opj-c106="" class="highlight-div-header-left"><div _ngcontent-opj-c106="" class="handle-button expand-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opj-c106="" class="highlight-div-header-right"><div _ngcontent-opj-c106="" class="handle-button ai-button"></div><div _ngcontent-opj-c106="" class="handle-button line-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opj-c106="" class="handle-button theme-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opj-c106="" class="handle-button copy-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@CustomDialog</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogExample</span> {</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">textValue</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-meta">@Consume</span> <span class="hljs-attr">inputValue</span>: <span class="hljs-built_in">string</span>;</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span>;</li><li>
</li><li>  <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>  <span class="hljs-attr">confirm</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Change text'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span> }).<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>        .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span> = value;</li><li>        })</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Whether to change a text?'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>      <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceAround</span> }) {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'cancel'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> != <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancel</span>();</li><li>            }</li><li>          }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xffffff</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'confirm'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> != <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">confirm</span>();</li><li>            }</li><li>          }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xffffff</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>)</li><li>      }.<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>    }.<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>  }</li><li>}</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogUser</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">textValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span></li><li>  <span class="hljs-meta">@Provide</span> <span class="hljs-attr">inputValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'click me'</span></li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomDialogExample</span>({</li><li>      <span class="hljs-attr">cancel</span>: <span class="hljs-function">()=&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onCancel</span>(); },</li><li>      <span class="hljs-attr">confirm</span>: <span class="hljs-function">()=&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onAccept</span>(); },</li><li>      <span class="hljs-attr">textValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span></li><li>    }),</li><li>    <span class="hljs-attr">cancel</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">exitApp</span>,</li><li>    <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">onWillDismiss</span>:<span class="hljs-function">(<span class="hljs-params">dismissDialogAction: DismissDialogAction</span>)=&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">PRESS_BACK</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">TOUCH_OUTSIDE</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>    },</li><li>    <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-property">Center</span>,</li><li>    <span class="hljs-attr">offset</span>: { <span class="hljs-attr">dx</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">dy</span>: -<span class="hljs-number">20</span> },</li><li>    <span class="hljs-attr">gridCount</span>: <span class="hljs-number">4</span>,</li><li>    <span class="hljs-attr">customStyle</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">cornerRadius</span>: <span class="hljs-number">10</span>,</li><li>  })</li><li>
</li><li>  <span class="hljs-comment">// 在自定义组件即将析构销毁时将dialogController置空</span></li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// 将dialogController置空</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onCancel</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the first button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onAccept</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the second button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">exitApp</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Click the callback in the blank area'</span>);</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> != <span class="hljs-literal">null</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>();</li><li>          }</li><li>        }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x317aff</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="522" originwidth="323" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115507.93881253175509082889983380793796:50001231000000:2800:EED9796F82EBABF4111A7C769B6C7CFDE423E4EDC34DAC7599A2148C7FCA243E.gif" width="323" height="522"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例7自定义带loading的弹窗">示例7（自定义带loading的弹窗）<i class="anchor-icon anchor-icon-link" anchorid="示例7自定义带loading的弹窗" tips="复制节点链接"></i></h3>          <p>该示例使用maskColor，maskRect和LoadingProgress，实现带loading的弹窗，并展示不在maskRect区域的事件透传效果。</p>     <div _ngcontent-opj-c106="" class="highlight-div"><div _ngcontent-opj-c106="" class="highlight-div-header"><div _ngcontent-opj-c106="" class="highlight-div-header-left"><div _ngcontent-opj-c106="" class="handle-button expand-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opj-c106="" class="highlight-div-header-right"><div _ngcontent-opj-c106="" class="handle-button ai-button"></div><div _ngcontent-opj-c106="" class="handle-button line-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opj-c106="" class="handle-button theme-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opj-c106="" class="handle-button copy-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@CustomDialog</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">LoadingDialogExample</span> {</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span>;</li><li>  <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>  <span class="hljs-attr">confirm</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">LoadingProgress</span>().<span class="hljs-title function_">color</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>).<span class="hljs-title function_">layoutWeight</span>(<span class="hljs-number">1</span>)</li><li>    }.<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogUser</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">number</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-comment">// 在自定义组件即将析构销毁时将dialogController置空</span></li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// 将dialogController置空</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onCancel</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the first button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onAccept</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the second button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">exitApp</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Click the callback in the blank area'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"click "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">number</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">number</span>++;</li><li>      })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"show loading dialog"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">//获取窗口对象</span></li><li>        <span class="hljs-keyword">let</span> windowClass = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getLastWindow</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li>        windowClass.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">window</span> =&gt;</span> {</li><li>          <span class="hljs-comment">//获取窗口信息，设置maskRect</span></li><li>          <span class="hljs-keyword">let</span> properties = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getWindowProperties</span>();</li><li>          <span class="hljs-keyword">let</span> maskRect = {</li><li>            <span class="hljs-attr">x</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">px2vp</span>(properties.<span class="hljs-property">windowRect</span>.<span class="hljs-property">left</span> + <span class="hljs-number">150</span>),</li><li>            <span class="hljs-attr">y</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">px2vp</span>(properties.<span class="hljs-property">windowRect</span>.<span class="hljs-property">top</span> + <span class="hljs-number">350</span>),</li><li>            <span class="hljs-attr">width</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">px2vp</span>(properties.<span class="hljs-property">windowRect</span>.<span class="hljs-property">width</span> - <span class="hljs-number">300</span>),</li><li>            <span class="hljs-attr">height</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">px2vp</span>(properties.<span class="hljs-property">windowRect</span>.<span class="hljs-property">height</span> - <span class="hljs-number">700</span>)</li><li>          } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Rectangle</span></li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> == <span class="hljs-literal">null</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>              <span class="hljs-attr">builder</span>: <span class="hljs-title class_">LoadingDialogExample</span>({</li><li>                <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onCancel</span>();</li><li>                },</li><li>                <span class="hljs-attr">confirm</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onAccept</span>();</li><li>                },</li><li>              }),</li><li>              <span class="hljs-attr">cancel</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">exitApp</span>,</li><li>              <span class="hljs-attr">maskRect</span>: maskRect,</li><li>              <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">false</span>,</li><li>              <span class="hljs-attr">maskColor</span>: <span class="hljs-string">"#33AA0000"</span>,</li><li>              <span class="hljs-attr">showInSubWindow</span>: <span class="hljs-literal">false</span>,</li><li>              <span class="hljs-attr">backgroundBlurStyle</span>: <span class="hljs-title class_">BlurStyle</span>.<span class="hljs-property">NONE</span>,</li><li>              <span class="hljs-attr">onWillDismiss</span>: <span class="hljs-function">(<span class="hljs-params">dismissDialogAction: DismissDialogAction</span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">PRESS_BACK</span>) {</li><li>                  dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>                }</li><li>                <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">TOUCH_OUTSIDE</span>) {</li><li>                  dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-property">Center</span>,</li><li>              <span class="hljs-attr">customStyle</span>: <span class="hljs-literal">false</span>,</li><li>              <span class="hljs-attr">cornerRadius</span>: <span class="hljs-number">10</span>,</li><li>              <span class="hljs-attr">openAnimation</span>: { <span class="hljs-attr">duration</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">tempo</span>: <span class="hljs-number">0</span> },</li><li>              <span class="hljs-attr">closeAnimation</span>: { <span class="hljs-attr">duration</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">tempo</span>: <span class="hljs-number">0</span> }</li><li>            })</li><li>          }</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">close</span>();</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>();</li><li>        })</li><li>      }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x317aff</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="652" originwidth="297" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115507.82977290439462261200961689001760:50001231000000:2800:C80CE5D6E2035F9792463530C147090476DA64AD5908EB4133FEB3EEE4CF731F.gif" class="notEnlarge" width="297" height="652"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例8不使用keyboardavoiddistance调整弹窗与软键盘的间距">示例8（不使用keyboardAvoidDistance调整弹窗与软键盘的间距）<i class="anchor-icon anchor-icon-link" anchorid="示例8不使用keyboardavoiddistance调整弹窗与软键盘的间距" tips="复制节点链接"></i></h3>          <p>该示例通过监听键盘变化，调整布局margin的bottom，实现与使用keyboardAvoidDistance调整弹窗与软键盘的间距一样的效果。</p>     <div _ngcontent-opj-c106="" class="highlight-div"><div _ngcontent-opj-c106="" class="highlight-div-header"><div _ngcontent-opj-c106="" class="highlight-div-header-left"><div _ngcontent-opj-c106="" class="handle-button expand-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opj-c106="" class="highlight-div-header-right"><div _ngcontent-opj-c106="" class="handle-button ai-button"></div><div _ngcontent-opj-c106="" class="handle-button line-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opj-c106="" class="handle-button theme-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opj-c106="" class="handle-button copy-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@CustomDialog</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogExample</span> {</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">textValue</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">inputValue</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">isKeyboardShow</span>: <span class="hljs-built_in">boolean</span></li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">navigationBarHeight</span>: <span class="hljs-built_in">number</span></li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span>;</li><li>  <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>  <span class="hljs-attr">confirm</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Change text'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span> }).<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>        .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span> = value;</li><li>        })</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Whether to change a text?'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>      <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceAround</span> }) {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'cancel'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> != <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancel</span>();</li><li>            }</li><li>          }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xffffff</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'confirm'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> != <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">confirm</span>();</li><li>            }</li><li>          }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xffffff</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>)</li><li>      }.<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>    }.<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>    .<span class="hljs-title function_">margin</span>({</li><li>      <span class="hljs-comment">// 通过键盘显隐调整间距（键盘与弹窗间距为16vp）</span></li><li>      <span class="hljs-attr">bottom</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isKeyboardShow</span> ? -<span class="hljs-number">16</span> : <span class="hljs-variable language_">this</span>.<span class="hljs-property">navigationBarHeight</span></li><li>    }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogUser</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">textValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">inputValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'click me'</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isKeyboardShow</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">navigationBarHeight</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span></li><li>  <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span></li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomDialogExample</span>({</li><li>      <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onCancel</span>();</li><li>      },</li><li>      <span class="hljs-attr">confirm</span>: <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onAccept</span>();</li><li>      },</li><li>      <span class="hljs-attr">textValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">textValue</span>,</li><li>      <span class="hljs-attr">inputValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span>,</li><li>      <span class="hljs-attr">isKeyboardShow</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isKeyboardShow</span>,</li><li>      <span class="hljs-attr">navigationBarHeight</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">navigationBarHeight</span></li><li>    }),</li><li>    <span class="hljs-attr">cancel</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">exitApp</span>,</li><li>    <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">onWillDismiss</span>: <span class="hljs-function">(<span class="hljs-params">dismissDialogAction: DismissDialogAction</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">PRESS_BACK</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">TOUCH_OUTSIDE</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>    },</li><li>    <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-property">Bottom</span>,</li><li>    <span class="hljs-attr">customStyle</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">cornerRadius</span>: <span class="hljs-number">10</span>,</li><li>  })</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> windowClass = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getLastWindow</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li>    windowClass.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">win</span> =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">windowClass</span> = win;</li><li>      <span class="hljs-comment">// 获取底部导航栏高度</span></li><li>      <span class="hljs-keyword">let</span> navigationArea = <span class="hljs-variable language_">this</span>.<span class="hljs-property">windowClass</span>?.<span class="hljs-title function_">getWindowAvoidArea</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">AvoidAreaType</span>.<span class="hljs-property">TYPE_NAVIGATION_INDICATOR</span>);</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">navigationBarHeight</span> = navigationArea.<span class="hljs-property">bottomRect</span>.<span class="hljs-property">height</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">windowClass</span>?.<span class="hljs-title function_">on</span>(<span class="hljs-string">'avoidAreaChange'</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (data.<span class="hljs-property">type</span> == <span class="hljs-variable language_">window</span>.<span class="hljs-property">AvoidAreaType</span>.<span class="hljs-property">TYPE_KEYBOARD</span>) {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isKeyboardShow</span> = data.<span class="hljs-property">area</span>.<span class="hljs-property">bottomRect</span>.<span class="hljs-property">height</span> &gt; <span class="hljs-number">0</span>;</li><li>        }</li><li>      })</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 在自定义组件即将析构销毁时将dialogController置空</span></li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// 将dialogController置空</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">windowClass</span>?.<span class="hljs-title function_">off</span>(<span class="hljs-string">'avoidAreaChange'</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onCancel</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the first button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onAccept</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the second button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">exitApp</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Click the callback in the blank area'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> != <span class="hljs-literal">null</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>();</li><li>          }</li><li>        }).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x317aff</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="683" originwidth="336" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115507.06776143748212472081558062905574:50001231000000:2800:1CF3B4E2C2215B5EFEE4766FFED5ED7B7169EF4BD32F7EAD7632A6338D46EC00.gif" width="336" height="683"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例9弹窗生命周期">示例9（弹窗生命周期）<i class="anchor-icon anchor-icon-link" anchorid="示例9弹窗生命周期" tips="复制节点链接"></i></h3>          <p>该示例展示了弹窗生命周期的相关接口的使用方法。</p>     <div _ngcontent-opj-c106="" class="highlight-div"><div _ngcontent-opj-c106="" class="highlight-div-header"><div _ngcontent-opj-c106="" class="highlight-div-header-left"><div _ngcontent-opj-c106="" class="handle-button expand-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opj-c106="" class="highlight-div-header-right"><div _ngcontent-opj-c106="" class="handle-button ai-button"></div><div _ngcontent-opj-c106="" class="handle-button line-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opj-c106="" class="handle-button theme-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opj-c106="" class="handle-button copy-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@CustomDialog</span></li><li>struct <span class="hljs-title class_">CustomDialogExample1</span> {</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span></li><li>  <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>  <span class="hljs-attr">confirm</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'允许访问相机？'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我关闭弹窗'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> != <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Example3</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">log</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Log information:'</span>;</li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomDialogExample1</span>({</li><li>      <span class="hljs-attr">cancel</span>: <span class="hljs-function">()=&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onCancel</span>(); },</li><li>      <span class="hljs-attr">confirm</span>: <span class="hljs-function">()=&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onAccept</span>(); }</li><li>    }),</li><li>    <span class="hljs-attr">cancel</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">existApp</span>,</li><li>    <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-property">Bottom</span>,</li><li>    <span class="hljs-attr">onWillDismiss</span>:<span class="hljs-function">(<span class="hljs-params">dismissDialogAction: DismissDialogAction</span>)=&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`reason= <span class="hljs-subst">${dismissDialogAction.reason}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'dialog onWillDismiss'</span>);</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">PRESS_BACK</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>      <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">TOUCH_OUTSIDE</span>) {</li><li>        dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>      }</li><li>    },</li><li>    <span class="hljs-attr">onDidAppear</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">log</span> += <span class="hljs-string">'# onDidAppear'</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'CustomDialog,is onDidAppear!'</span>);</li><li>    },</li><li>    <span class="hljs-attr">onDidDisappear</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">log</span> += <span class="hljs-string">'# onDidDisappear'</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'CustomDialog,is onDidDisappear!'</span>);</li><li>    },</li><li>    <span class="hljs-attr">onWillAppear</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">log</span> = <span class="hljs-string">'Log information:onWillAppear'</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'CustomDialog,is onWillAppear!'</span>);</li><li>    },</li><li>    <span class="hljs-attr">onWillDisappear</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">log</span> += <span class="hljs-string">'# onWillDisappear'</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'CustomDialog,is onWillDisappear!'</span>);</li><li>    },</li><li>    <span class="hljs-attr">offset</span>: { <span class="hljs-attr">dx</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">dy</span>: -<span class="hljs-number">20</span> },</li><li>    <span class="hljs-attr">customStyle</span>: <span class="hljs-literal">false</span>,</li><li>  })</li><li>  <span class="hljs-title function_">onCancel</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'CustomDialog Callback when the first button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onAccept</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'CustomDialog Callback when the second button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">existApp</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'CustomDialog Click the callback in the blank area'</span>);</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'CustomDialog'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>?.<span class="hljs-title function_">open</span>();</li><li>        })</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">log</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">200</span> })</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="668" originwidth="404" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115507.08424731162147853717857439787251:50001231000000:2800:D675EE362097CBDD1FFBFCD6547CC0704B1AF222AC6B17EDBF2B74A6765B43F1.gif" width="404" height="668"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例10不同customstyle下的弹窗示例">示例10（不同customStyle下的弹窗示例）<i class="anchor-icon anchor-icon-link" anchorid="示例10不同customstyle下的弹窗示例" tips="复制节点链接"></i></h3>          <p>该示例是在对齐方式为DialogAlignment.Bottom时，展示customStyle不同值下，弹窗内容与安全区域的效果。</p>     <div _ngcontent-opj-c106="" class="highlight-div"><div _ngcontent-opj-c106="" class="highlight-div-header"><div _ngcontent-opj-c106="" class="highlight-div-header-left"><div _ngcontent-opj-c106="" class="handle-button expand-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opj-c106="" class="highlight-div-header-right"><div _ngcontent-opj-c106="" class="handle-button ai-button"></div><div _ngcontent-opj-c106="" class="handle-button line-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opj-c106="" class="handle-button theme-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opj-c106="" class="handle-button copy-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@CustomDialog</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomStyleDialogExample</span> {</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span>;</li><li>  <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>  <span class="hljs-attr">confirm</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">() =&gt;</span> {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>().<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">110</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">110</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">"#2787d9"</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogUser</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">customStyle</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-comment">// 在自定义组件即将析构销毁时将dialogController置空</span></li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// 将dialogController置空</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onCancel</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the first button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onAccept</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the second button is clicked'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">exitApp</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Click the callback in the blank area'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'change  customStyle:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">customStyle</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">customStyle</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">customStyle</span>;</li><li>      })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'show dialog'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> != <span class="hljs-literal">null</span>) {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">close</span>();</li><li>        }</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>          <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomStyleDialogExample</span>({</li><li>            <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onCancel</span>();</li><li>            },</li><li>            <span class="hljs-attr">confirm</span>: <span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onAccept</span>();</li><li>            },</li><li>          }),</li><li>          <span class="hljs-attr">cancel</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">exitApp</span>,</li><li>          <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">true</span>,</li><li>          <span class="hljs-attr">showInSubWindow</span>: <span class="hljs-literal">false</span>,</li><li>          <span class="hljs-attr">onWillDismiss</span>: <span class="hljs-function">(<span class="hljs-params">dismissDialogAction: DismissDialogAction</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">PRESS_BACK</span>) {</li><li>              dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>            }</li><li>            <span class="hljs-keyword">if</span> (dismissDialogAction.<span class="hljs-property">reason</span> == <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">TOUCH_OUTSIDE</span>) {</li><li>              dismissDialogAction.<span class="hljs-title function_">dismiss</span>();</li><li>            }</li><li>          },</li><li>          <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-property">Bottom</span>,</li><li>          <span class="hljs-attr">customStyle</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">customStyle</span>,</li><li>          <span class="hljs-attr">cornerRadius</span>: <span class="hljs-number">10</span>,</li><li>          <span class="hljs-attr">openAnimation</span>: { <span class="hljs-attr">duration</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">tempo</span>: <span class="hljs-number">0</span> },</li><li>          <span class="hljs-attr">closeAnimation</span>: { <span class="hljs-attr">duration</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">tempo</span>: <span class="hljs-number">0</span> }</li><li>        })</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>();</li><li>      }).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="657" originwidth="289" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115507.31246115819359794782397076929981:50001231000000:2800:2B4BB3F5FC58D2EDCD4A7DC749D896344EF94D1B4500E2F3D86A82C4B2879DDA.gif" class="notEnlarge" width="289" height="657"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例11自定义背景模糊效果参数">示例11（自定义背景模糊效果参数）<i class="anchor-icon anchor-icon-link" anchorid="示例11自定义背景模糊效果参数" tips="复制节点链接"></i></h3>          <p>从API version 19开始，该示例通过配置<a href="/consumer/cn/doc/harmonyos-references/ts-methods-custom-dialog-box#customdialogcontrolleroptions对象说明">backgroundBlurStyleOptions</a>，实现自定义背景模糊效果。</p>     <div _ngcontent-opj-c106="" class="highlight-div"><div _ngcontent-opj-c106="" class="highlight-div-header"><div _ngcontent-opj-c106="" class="highlight-div-header-left"><div _ngcontent-opj-c106="" class="handle-button expand-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opj-c106="" class="highlight-div-header-right"><div _ngcontent-opj-c106="" class="handle-button ai-button"></div><div _ngcontent-opj-c106="" class="handle-button line-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opj-c106="" class="handle-button theme-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opj-c106="" class="handle-button copy-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@CustomDialog</span></li><li>struct <span class="hljs-title class_">CustomDialogExample</span> {</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'这是自定义弹窗'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我关闭弹窗'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> != <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogUser</span> {</li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomDialogExample</span>(),</li><li>    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-literal">undefined</span>,</li><li>    <span class="hljs-attr">backgroundBlurStyle</span>: <span class="hljs-title class_">BlurStyle</span>.<span class="hljs-property">Thin</span>,</li><li>    <span class="hljs-attr">backgroundBlurStyleOptions</span>: {</li><li>      <span class="hljs-attr">colorMode</span>: <span class="hljs-title class_">ThemeColorMode</span>.<span class="hljs-property">LIGHT</span>,</li><li>      <span class="hljs-attr">adaptiveColor</span>: <span class="hljs-title class_">AdaptiveColor</span>.<span class="hljs-property">AVERAGE</span>,</li><li>      <span class="hljs-attr">scale</span>: <span class="hljs-number">1</span>,</li><li>      <span class="hljs-attr">blurOptions</span>: { <span class="hljs-attr">grayscale</span>: [<span class="hljs-number">20</span>, <span class="hljs-number">20</span>] },</li><li>    },</li><li>  })</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>({ <span class="hljs-attr">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Top</span> }) {</li><li>      <span class="hljs-comment">// $r('app.media.bg')需要替换为开发者所需的图像资源文件。</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.bg'</span>))</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'CustomDialog'</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> != <span class="hljs-literal">null</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>();</li><li>            }</li><li>          })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="680" originwidth="315" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115507.11618978086254376049025992604815:50001231000000:2800:87025BB134C81ECAF86F507734DC6EC26C50983F574C41A218B538D0EB5BE34E.png" width="315" height="680"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例12自定义背景效果参数">示例12（自定义背景效果参数）<i class="anchor-icon anchor-icon-link" anchorid="示例12自定义背景效果参数" tips="复制节点链接"></i></h3>          <p>从API version 19开始，该示例通过配置<a href="/consumer/cn/doc/harmonyos-references/ts-methods-custom-dialog-box#customdialogcontrolleroptions对象说明">backgroundEffect</a>，实现自定义背景效果。</p>     <div _ngcontent-opj-c106="" class="highlight-div"><div _ngcontent-opj-c106="" class="highlight-div-header"><div _ngcontent-opj-c106="" class="highlight-div-header-left"><div _ngcontent-opj-c106="" class="handle-button expand-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opj-c106="" class="highlight-div-header-right"><div _ngcontent-opj-c106="" class="handle-button ai-button"></div><div _ngcontent-opj-c106="" class="handle-button line-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opj-c106="" class="handle-button theme-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opj-c106="" class="handle-button copy-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@CustomDialog</span></li><li>struct <span class="hljs-title class_">CustomDialogExample</span> {</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'这是自定义弹窗'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我关闭弹窗'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> != <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogUser</span> {</li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomDialogExample</span>(),</li><li>    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-literal">undefined</span>,</li><li>    <span class="hljs-attr">backgroundBlurStyle</span>: <span class="hljs-title class_">BlurStyle</span>.<span class="hljs-property">Thin</span>,</li><li>    <span class="hljs-attr">backgroundEffect</span>: {</li><li>      <span class="hljs-attr">radius</span>: <span class="hljs-number">60</span>,</li><li>      <span class="hljs-attr">saturation</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">brightness</span>: <span class="hljs-number">1</span>,</li><li>      <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>,</li><li>      <span class="hljs-attr">blurOptions</span>: { <span class="hljs-attr">grayscale</span>: [<span class="hljs-number">20</span>, <span class="hljs-number">20</span>] }</li><li>    },</li><li>  })</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>({ <span class="hljs-attr">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Top</span> }) {</li><li>      <span class="hljs-comment">// $r('app.media.bg')需要替换为开发者所需的图像资源文件。</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.bg'</span>))</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'CustomDialog'</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> != <span class="hljs-literal">null</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>();</li><li>            }</li><li>          })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="680" originwidth="315" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115507.17325422454086944480982783265893:50001231000000:2800:01231F3FDF93D8EC4BFC19428FBE23A2E09FD9968FAA8AAC09659B1037A8BDEB.png" width="315" height="680"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例13自定义弹窗动态刷新宽度">示例13（自定义弹窗动态刷新宽度）<i class="anchor-icon anchor-icon-link" anchorid="示例13自定义弹窗动态刷新宽度" tips="复制节点链接"></i></h3>          <p>该示例通过状态变量同步自定义组件的宽度，实现自定义弹窗宽度动态切换。</p>     <div _ngcontent-opj-c106="" class="highlight-div"><div _ngcontent-opj-c106="" class="highlight-div-header"><div _ngcontent-opj-c106="" class="highlight-div-header-left"><div _ngcontent-opj-c106="" class="handle-button expand-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opj-c106="" class="highlight-div-header-right"><div _ngcontent-opj-c106="" class="handle-button ai-button"></div><div _ngcontent-opj-c106="" class="handle-button line-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opj-c106="" class="handle-button theme-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opj-c106="" class="handle-button copy-button"><div _ngcontent-opj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@CustomDialog</span></li><li>struct <span class="hljs-title class_">CustomDialogExample</span> {</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span>;</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">currentWidth</span>: <span class="hljs-built_in">number</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'这是自定义弹窗'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我关闭弹窗'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> != <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">close</span>();</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">32</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>    .<span class="hljs-title function_">shadow</span>(<span class="hljs-title class_">ShadowStyle</span>.<span class="hljs-property">OUTER_DEFAULT_SM</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentWidth</span> + <span class="hljs-string">"%"</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogUser</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">currentWidth</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span></li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomDialogExample</span>({ <span class="hljs-attr">currentWidth</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentWidth</span> }),</li><li>    <span class="hljs-attr">customStyle</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">isModal</span>: <span class="hljs-literal">false</span>,</li><li>  })</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>
</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"宽度设置："</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        <span class="hljs-title class_">Slider</span>({ <span class="hljs-attr">min</span>: <span class="hljs-number">60</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">step</span>: <span class="hljs-number">5</span> })</li><li>          .<span class="hljs-title function_">showTips</span>(<span class="hljs-literal">true</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentWidth</span> + <span class="hljs-string">'%'</span>)</li><li>          .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span>, mode: SliderChangeMode</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentWidth</span> = value;</li><li>          }).<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'CustomDialog'</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> != <span class="hljs-literal">null</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>();</li><li>          }</li><li>        })</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="620" originwidth="384" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115507.45989224717915867099330610409328:50001231000000:2800:9708D71F96013090074E8B1158E22A431532E3BC5543F6F877AABD41F6253A37.gif" width="384" height="620"></span></p>    </div>   </div>   <div></div></div>