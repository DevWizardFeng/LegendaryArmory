<h1 _ngcontent-oxx-c119="" class="doc-title ng-star-inserted" title="自定义组件的生命周期"> 自定义组件的生命周期 </h1>

<div _ngcontent-oxx-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>自定义组件的生命周期回调函数用于通知用户该自定义组件的生命周期，这些回调函数是私有的，在运行时由开发框架在特定的时间进行调用，不能从应用程序中手动调用这些回调函数。不要在多个窗口复用同一个自定义组件节点，其生命周期可能会紊乱。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>本模块首批接口从API version 7开始支持，后续版本的新增接口，采用上角标单独标记接口的起始版本。</li>       <li>允许在生命周期函数中使用Promise和异步回调函数，比如网络资源获取，定时器设置等。</li>      </ul>     </div></div></div>    <div class="tiledSection">     <h2 id="build" device-type="phone,2in1,tablet,wearable,tv">build<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="build" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>build(): void</p>     <p>build()函数用于定义自定义组件的声明式UI描述，自定义组件必须定义build()函数。</p>     <p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection">     <h2 id="abouttoappear" device-type="phone,2in1,tablet,wearable,tv">aboutToAppear<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abouttoappear" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>aboutToAppear?(): void</p>     <p>aboutToAppear函数在创建自定义组件的新实例后，在其build()函数执行前调用。允许在aboutToAppear函数中改变状态变量，更改将在后续执行build()函数中生效。实现<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-custom-component-layout">自定义布局</a>的自定义组件的aboutToAppear生命周期在布局过程中触发。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>在该回调函数内，建议仅执行当前节点组件的初始化逻辑，避免高耗时操作阻塞主线程。对于高耗时操作，推荐采用缓存或异步方案替代。最佳实践请参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-ui-component-performance-optimization#section18755173594714" target="_blank">UI组件性能优化-避免在自定义组件的生命周期内执行高耗时操作</a>。</li>        <li>在需要频繁创建和销毁组件的场景中，将会频繁调用该回调函数。最佳实践请参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-time-optimization-of-the-main-thread#section418843713435" target="_blank">主线程耗时操作优化指导-组件生命周期回调</a>。</li>       </ul>      </div></div></div>     <p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection">     <h2 id="ondidbuild12" device-type="phone,2in1,tablet,wearable,tv">onDidBuild<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondidbuild12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onDidBuild?(): void</p>     <p>onDidBuild函数在自定义组件的build()函数执行后调用，开发者可以在这个阶段实现埋点数据上报等不影响实际UI的功能。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection">     <h2 id="abouttodisappear" device-type="phone,2in1,tablet,wearable,tv">aboutToDisappear<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abouttodisappear" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>aboutToDisappear?(): void</p>     <p>aboutToDisappear函数在自定义组件析构销毁时执行。不允许在aboutToDisappear函数中改变状态变量，特别是@Link变量的修改可能会导致应用程序行为不稳定。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>在需要频繁创建和销毁组件的场景中，将会频繁调用该回调函数。最佳实践请参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-time-optimization-of-the-main-thread#section418843713435" target="_blank">主线程耗时操作优化指导-组件生命周期回调</a>。</p>      </div></div></div>     <p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection">     <h2 id="onpageshow" device-type="phone,2in1,tablet,wearable,tv">onPageShow<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onpageshow" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onPageShow?(): void</p>     <p>router路由页面（即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-create-custom-components#entry" target="_blank">@Entry</a>装饰的自定义组件）每次显示时触发一次，包括路由跳转、应用进入前台等场景。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection">     <h2 id="onpagehide" device-type="phone,2in1,tablet,wearable,tv">onPageHide<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onpagehide" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onPageHide?(): void</p>     <p>router路由页面（即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-create-custom-components#entry" target="_blank">@Entry</a>装饰的自定义组件）每次隐藏时触发一次，包括路由跳转、应用进入后台等场景。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>在该回调函数内，建议避免执行高耗时操作阻塞主线程造成卡顿。对于高耗时操作例如相机资源释放，推荐使用异步方案替代。最佳实践请参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-application-latency-optimization-cases#section8783201923819" target="_blank">优化应用时延问题-延迟执行资源释放操作</a>。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection">     <h2 id="onbackpress" device-type="phone,2in1,tablet,wearable,tv">onBackPress<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onbackpress" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onBackPress?(): void | boolean</p>     <p>在router路由页面（即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-create-custom-components#entry" target="_blank">@Entry</a>装饰的自定义组件）生效，当用户点击返回按钮时触发。返回true表示页面自己处理返回逻辑，不进行页面路由；返回false表示使用默认的路由返回逻辑，不设置返回值按照false处理。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">void | boolean</td>         <td class="cellrowborder" width="50%">返回按钮动作。返回true表示页面自己处理返回逻辑，不进行页面路由；返回false表示使用默认的路由返回逻辑，不设置返回值按照false处理。</td>        </tr>             </tbody></table></div>     </div>     <div _ngcontent-oxx-c106="" class="highlight-div"><div _ngcontent-oxx-c106="" class="highlight-div-header"><div _ngcontent-oxx-c106="" class="highlight-div-header-left"><div _ngcontent-oxx-c106="" class="handle-button expand-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oxx-c106="" class="highlight-div-header-right"><div _ngcontent-oxx-c106="" class="handle-button ai-button"></div><div _ngcontent-oxx-c106="" class="handle-button line-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oxx-c106="" class="handle-button theme-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oxx-c106="" class="handle-button copy-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oxx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">IndexComponent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">textColor</span>: <span class="hljs-title class_">Color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>;</li><li>
</li><li>  <span class="hljs-title function_">onPageShow</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">textColor</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'IndexComponent onPageShow'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onPageHide</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">textColor</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Transparent</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'IndexComponent onPageHide'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onBackPress</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">textColor</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'IndexComponent onBackPress'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello World'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">textColor</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">30</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="144" originwidth="338" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115424.57512312005627523121564702507779:50001231000000:2800:8B29EE7003A3048E3E9B9BA525B2CD0A8417585583A6F7C3330C0126480123D5.gif" width="338" height="144"></span></p>    </div>    <div class="tiledSection">     <h2 id="onnewparam19" device-type="phone,2in1,tablet,wearable,tv">onNewParam<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onnewparam19" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onNewParam?(param: ESObject): void</p>     <p>该回调仅生效于由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-create-custom-components#entry" target="_blank">@Entry</a>装饰的、作为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-router">router路由</a>页面存在的自定义组件。当之前存在于路由栈中的页面，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-router#routermode9">单实例模式</a>移动到栈顶时触发该回调。</p>     <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">param</td>         <td class="cellrowborder" width="25%">ESObject</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">路由跳转时传递到目标页面的数据。</td>        </tr>             </tbody></table></div>     </div>     <div _ngcontent-oxx-c106="" class="highlight-div"><div _ngcontent-oxx-c106="" class="highlight-div-header"><div _ngcontent-oxx-c106="" class="highlight-div-header-left"><div _ngcontent-oxx-c106="" class="handle-button expand-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oxx-c106="" class="highlight-div-header-right"><div _ngcontent-oxx-c106="" class="handle-button ai-button"></div><div _ngcontent-oxx-c106="" class="handle-button line-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oxx-c106="" class="handle-button theme-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oxx-c106="" class="handle-button copy-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oxx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// pages/Index.ets</span></li><li><span class="hljs-keyword">import</span> { router } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">routerParam</span> {</li><li>  <span class="hljs-attr">msg</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'__NA__'</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg</span> = msg;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onNewParam'</span>, <span class="hljs-string">'Index aboutToAppear'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onNewParam</span>(<span class="hljs-params">param: ESObject</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onNewParam'</span>, <span class="hljs-string">'Index onNewParam, param: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(param));</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'push pageOne Standard'</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getRouter</span>().<span class="hljs-title function_">pushUrl</span>({</li><li>            <span class="hljs-attr">url</span>: <span class="hljs-string">'pages/PageOne'</span>,</li><li>            <span class="hljs-attr">params</span>: <span class="hljs-keyword">new</span> <span class="hljs-title function_">routerParam</span>(<span class="hljs-string">'push pageOne Standard'</span>)</li><li>          }, router.<span class="hljs-property">RouterMode</span>.<span class="hljs-property">Standard</span>);</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'push pageOne Single'</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getRouter</span>().<span class="hljs-title function_">pushUrl</span>({</li><li>            <span class="hljs-attr">url</span>: <span class="hljs-string">'pages/PageOne'</span>,</li><li>            <span class="hljs-attr">params</span>: <span class="hljs-keyword">new</span> <span class="hljs-title function_">routerParam</span>(<span class="hljs-string">'push pageOne Single'</span>)</li><li>          }, router.<span class="hljs-property">RouterMode</span>.<span class="hljs-property">Single</span>)</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-oxx-c106="" class="highlight-div"><div _ngcontent-oxx-c106="" class="highlight-div-header"><div _ngcontent-oxx-c106="" class="highlight-div-header-left"><div _ngcontent-oxx-c106="" class="handle-button expand-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oxx-c106="" class="highlight-div-header-right"><div _ngcontent-oxx-c106="" class="handle-button ai-button"></div><div _ngcontent-oxx-c106="" class="handle-button line-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oxx-c106="" class="handle-button theme-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oxx-c106="" class="handle-button copy-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oxx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// pages/PageOne.ets</span></li><li><span class="hljs-keyword">import</span> { router } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { routerParam } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Index'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PageOne</span> {</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onNewParam'</span>, <span class="hljs-string">'PageOne aboutToAppear'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onNewParam</span>(<span class="hljs-params">param: ESObject</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onNewParam'</span>, <span class="hljs-string">'PageOne onNewParam, param: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(param));</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'push Index Standard'</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getRouter</span>().<span class="hljs-title function_">pushUrl</span>({</li><li>            <span class="hljs-attr">url</span>: <span class="hljs-string">'pages/Index'</span>,</li><li>            <span class="hljs-attr">params</span>: <span class="hljs-keyword">new</span> <span class="hljs-title function_">routerParam</span>(<span class="hljs-string">'push Index Standard'</span>)</li><li>          }, router.<span class="hljs-property">RouterMode</span>.<span class="hljs-property">Standard</span>);</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'push Index Single'</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getRouter</span>().<span class="hljs-title function_">pushUrl</span>({</li><li>            <span class="hljs-attr">url</span>: <span class="hljs-string">'pages/Index'</span>,</li><li>            <span class="hljs-attr">params</span>: <span class="hljs-keyword">new</span> <span class="hljs-title function_">routerParam</span>(<span class="hljs-string">'push Index Single'</span>)</li><li>          }, router.<span class="hljs-property">RouterMode</span>.<span class="hljs-property">Single</span>)</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abouttoreuse10" device-type="phone,2in1,tablet,wearable,tv">aboutToReuse<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abouttoreuse10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>aboutToReuse?(params: Record&lt;string, Object | undefined | null&gt;): void</p>     <p>当一个可复用的自定义组件从复用缓存中重新加入到节点树时，触发aboutToReuse生命周期回调，并将组件的构造参数传递给aboutToReuse。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li><a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-component-reuse#section7441712174414" target="_blank">避免对@Link/@ObjectLink/@Prop等自动更新的状态变量，在aboutToReuse()中重复赋值</a>。</li>        <li>在滑动场景中，使用组件复用通常需要用该回调函数去更新组件的状态变量，因此在该回调函数中应避免耗时操作，否则会导致丢帧卡顿。最佳实践请参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-time-optimization-of-the-main-thread#section20815336174316" target="_blank">主线程耗时操作优化指导-组件复用回调</a>。</li>       </ul>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">params</td>         <td class="cellrowborder" width="25%">Record&lt;string, Object | undefined | null&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">自定义组件的构造参数。</td>        </tr>             </tbody></table></div>     </div>     <div _ngcontent-oxx-c106="" class="highlight-div"><div _ngcontent-oxx-c106="" class="highlight-div-header"><div _ngcontent-oxx-c106="" class="highlight-div-header-left"><div _ngcontent-oxx-c106="" class="handle-button expand-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oxx-c106="" class="highlight-div-header-right"><div _ngcontent-oxx-c106="" class="handle-button ai-button"></div><div _ngcontent-oxx-c106="" class="handle-button line-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oxx-c106="" class="handle-button theme-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oxx-c106="" class="handle-button copy-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oxx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Message</span> {</li><li>  <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">switch</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Hello World'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">switch</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">switch</span></li><li>        })</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">switch</span>) {</li><li>        <span class="hljs-title class_">Child</span>({ <span class="hljs-attr">message</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(<span class="hljs-string">'Child'</span>) })</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Reusable</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Child</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-title class_">Message</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(<span class="hljs-string">'AboutToReuse'</span>);</li><li>
</li><li>  <span class="hljs-title function_">aboutToReuse</span>(<span class="hljs-params">params: Record&lt;<span class="hljs-built_in">string</span>, ESObject&gt;</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Recycle Child"</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = params.<span class="hljs-property">message</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Message</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>.<span class="hljs-property">value</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">2</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abouttoreuse18" device-type="phone,2in1,tablet,wearable,tv">aboutToReuse<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abouttoreuse18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>aboutToReuse?(): void</p>     <p>当一个状态管理V2的可复用自定义组件从复用池被取出重新加入到节点树时，触发aboutToReuse生命周期回调。</p>     <p>详细内容请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-reusablev2" target="_blank">@ReusableV2</a>。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div _ngcontent-oxx-c106="" class="highlight-div"><div _ngcontent-oxx-c106="" class="highlight-div-header"><div _ngcontent-oxx-c106="" class="highlight-div-header-left"><div _ngcontent-oxx-c106="" class="handle-button expand-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oxx-c106="" class="highlight-div-header-right"><div _ngcontent-oxx-c106="" class="handle-button ai-button"></div><div _ngcontent-oxx-c106="" class="handle-button line-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oxx-c106="" class="handle-button theme-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oxx-c106="" class="handle-button copy-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oxx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">condition</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'回收/复用'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">()=&gt;</span>{<span class="hljs-variable language_">this</span>.<span class="hljs-property">condition</span>=!<span class="hljs-variable language_">this</span>.<span class="hljs-property">condition</span>;}) <span class="hljs-comment">// 点击切换回收/复用状态</span></li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">condition</span>) {</li><li>        <span class="hljs-title class_">ReusableV2Component</span>()</li><li>      }</li><li>    }</li><li>  }</li><li>}</li><li><span class="hljs-meta">@ReusableV2</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">ReusableV2Component</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-title function_">aboutToReuse</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'ReusableV2Component aboutToReuse'</span>); <span class="hljs-comment">// 复用时被调用</span></li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abouttorecycle10" device-type="phone,2in1,tablet,wearable,tv">aboutToRecycle<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abouttorecycle10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>aboutToRecycle?(): void</p>     <p>组件的生命周期回调，在可复用组件从组件树上被加入到复用缓存之前调用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div _ngcontent-oxx-c106="" class="highlight-div"><div _ngcontent-oxx-c106="" class="highlight-div-header"><div _ngcontent-oxx-c106="" class="highlight-div-header-left"><div _ngcontent-oxx-c106="" class="handle-button expand-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oxx-c106="" class="highlight-div-header-right"><div _ngcontent-oxx-c106="" class="handle-button ai-button"></div><div _ngcontent-oxx-c106="" class="handle-button line-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oxx-c106="" class="handle-button theme-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oxx-c106="" class="handle-button copy-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oxx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Message</span> {</li><li>  <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">switch</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Hello World'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">switch</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">switch</span>;</li><li>        })</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">switch</span>) {</li><li>        <span class="hljs-title class_">Child</span>({ <span class="hljs-attr">message</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(<span class="hljs-string">'Child'</span>) })</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Reusable</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Child</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-title class_">Message</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(<span class="hljs-string">'AboutToReuse'</span>);</li><li>
</li><li>  <span class="hljs-title function_">aboutToReuse</span>(<span class="hljs-params">params: Record&lt;<span class="hljs-built_in">string</span>, ESObject&gt;</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Reuse Child"</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = params.<span class="hljs-property">message</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Message</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToRecycle</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">//这里可以释放比较占内存的内容或其他非必要资源引用，避免一直占用内存，引发内存泄漏</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Recycle Child,child进入复用池中"</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>.<span class="hljs-property">value</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">2</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="onwillapplytheme12" device-type="phone,2in1,tablet,wearable,tv">onWillApplyTheme<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onwillapplytheme12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onWillApplyTheme?(theme: Theme): void</p>     <p>onWillApplyTheme函数用于获取当前组件上下文的Theme对象，在创建自定义组件的新实例后，在执行其build()函数之前执行。允许在onWillApplyTheme函数中改变状态变量，更改将在后续执行build()函数中生效。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 18开始，该接口支持在状态管理V2组件中使用。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">theme</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-custom-component-lifecycle#theme12">Theme</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">自定义组件当前生效的Theme对象。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="theme12" device-type="phone,2in1,tablet,wearable,tv">Theme<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="theme12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type Theme = Theme</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-theme#theme">Theme</a></td>         <td class="cellrowborder" width="50%">自定义组件当前生效的Theme对象。</td>        </tr>             </tbody></table></div>     </div>     <p>V1：</p>     <div _ngcontent-oxx-c106="" class="highlight-div"><div _ngcontent-oxx-c106="" class="highlight-div-header"><div _ngcontent-oxx-c106="" class="highlight-div-header-left"><div _ngcontent-oxx-c106="" class="handle-button expand-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oxx-c106="" class="highlight-div-header-right"><div _ngcontent-oxx-c106="" class="handle-button ai-button"></div><div _ngcontent-oxx-c106="" class="handle-button line-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oxx-c106="" class="handle-button theme-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oxx-c106="" class="handle-button copy-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oxx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CustomTheme</span>, <span class="hljs-title class_">CustomColors</span>, <span class="hljs-title class_">Theme</span>, <span class="hljs-title class_">ThemeControl</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">BlueColors</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CustomColors</span> {</li><li>  fontPrimary = <span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>;</li><li>  backgroundPrimary = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>;</li><li>  brand = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>; <span class="hljs-comment">//品牌色</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">PageCustomTheme</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CustomTheme</span> {</li><li>  colors?: <span class="hljs-title class_">CustomColors</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">colors: CustomColors</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">colors</span> = colors;</li><li>  }</li><li>}</li><li><span class="hljs-keyword">const</span> <span class="hljs-title class_">BlueColorsTheme</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageCustomTheme</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BlueColors</span>());</li><li><span class="hljs-comment">// setDefaultTheme应该在应用入口页面调用或者在Ability中调用。</span></li><li><span class="hljs-title class_">ThemeControl</span>.<span class="hljs-title function_">setDefaultTheme</span>(<span class="hljs-title class_">BlueColorsTheme</span>);</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">IndexComponent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">textColor</span>: <span class="hljs-title class_">ResourceColor</span> = $r(<span class="hljs-string">'sys.color.font_primary'</span>);</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">columBgColor</span>: <span class="hljs-title class_">ResourceColor</span> = $r(<span class="hljs-string">'sys.color.background_primary'</span>);</li><li>
</li><li>  <span class="hljs-comment">// onWillApplyTheme中可获取当前组件上下文的Theme对象。此处在onWillApplyTheme中将状态变量textColor、columBgColor，赋值为当前使用的Theme对象（BlueColorsTheme）中的配色。</span></li><li>  <span class="hljs-title function_">onWillApplyTheme</span>(<span class="hljs-params">theme: Theme</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">textColor</span> = theme.<span class="hljs-property">colors</span>.<span class="hljs-property">fontPrimary</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">columBgColor</span> = theme.<span class="hljs-property">colors</span>.<span class="hljs-property">backgroundPrimary</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'IndexComponent onWillApplyTheme'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 组件初始值配色样式</span></li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello World'</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'sys.color.font_primary'</span>))</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'25%'</span>)</li><li>      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-string">'10vp'</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'sys.color.background_primary'</span>))</li><li>
</li><li>      <span class="hljs-comment">// 组件颜色生效为onWillApplyTheme中配置颜色。</span></li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'onWillApplyTheme'</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">textColor</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello World'</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">textColor</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'25%'</span>)</li><li>      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-string">'10vp'</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">columBgColor</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">padding</span>(<span class="hljs-string">'16vp'</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#dcdcdc'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="332" originwidth="332" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115424.94884803037347633378128113515732:50001231000000:2800:78B5124AB66582C5375BEF623A576917F2961F0DEAF7BBF4EDEDBE32C33A9CF4.png" width="332" height="332"></span></p>     <p>V2：</p>     <div _ngcontent-oxx-c106="" class="highlight-div"><div _ngcontent-oxx-c106="" class="highlight-div-header"><div _ngcontent-oxx-c106="" class="highlight-div-header-left"><div _ngcontent-oxx-c106="" class="handle-button expand-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oxx-c106="" class="highlight-div-header-right"><div _ngcontent-oxx-c106="" class="handle-button ai-button"></div><div _ngcontent-oxx-c106="" class="handle-button line-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oxx-c106="" class="handle-button theme-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oxx-c106="" class="handle-button copy-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oxx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CustomTheme</span>, <span class="hljs-title class_">CustomColors</span>, <span class="hljs-title class_">Theme</span>, <span class="hljs-title class_">ThemeControl</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">BlueColors</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CustomColors</span> {</li><li>  fontPrimary = <span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>;</li><li>  backgroundPrimary = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>;</li><li>  brand = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>; <span class="hljs-comment">//品牌色</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">PageCustomTheme</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CustomTheme</span> {</li><li>  colors?: <span class="hljs-title class_">CustomColors</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">colors: CustomColors</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">colors</span> = colors;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-title class_">BlueColorsTheme</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageCustomTheme</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BlueColors</span>());</li><li><span class="hljs-comment">// setDefaultTheme应该在应用入口页面调用或者在Ability中调用。</span></li><li><span class="hljs-title class_">ThemeControl</span>.<span class="hljs-title function_">setDefaultTheme</span>(<span class="hljs-title class_">BlueColorsTheme</span>);</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">IndexComponent</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">textColor</span>: <span class="hljs-title class_">ResourceColor</span> = $r(<span class="hljs-string">'sys.color.font_primary'</span>);</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">columBgColor</span>: <span class="hljs-title class_">ResourceColor</span> = $r(<span class="hljs-string">'sys.color.background_primary'</span>);</li><li>
</li><li>  <span class="hljs-comment">// onWillApplyTheme中可获取当前组件上下文的Theme对象。此处在onWillApplyTheme中将状态变量textColor、columBgColor，赋值为当前使用的Theme对象（BlueColorsTheme）中的配色。</span></li><li>  <span class="hljs-title function_">onWillApplyTheme</span>(<span class="hljs-params">theme: Theme</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">textColor</span> = theme.<span class="hljs-property">colors</span>.<span class="hljs-property">fontPrimary</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">columBgColor</span> = theme.<span class="hljs-property">colors</span>.<span class="hljs-property">backgroundPrimary</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'IndexComponent onWillApplyTheme'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 组件初始值配色样式</span></li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello World'</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'sys.color.font_primary'</span>))</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'25%'</span>)</li><li>      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-string">'10vp'</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'sys.color.background_primary'</span>))</li><li>
</li><li>      <span class="hljs-comment">// 组件颜色生效为onWillApplyTheme中配置颜色。</span></li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'onWillApplyTheme'</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">textColor</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello World'</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">textColor</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'25%'</span>)</li><li>      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-string">'10vp'</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">columBgColor</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">padding</span>(<span class="hljs-string">'16vp'</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#dcdcdc'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="325" originwidth="399" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115424.53516310126987117019956500775479:50001231000000:2800:C31382381EA5F95044800AE3F878029D80961599A1F65F698DFEAD785A405D37.png" width="399" height="325"></span></p>    </div>    <div class="tiledSection">     <h2 id="pagetransition9" device-type="phone,2in1,tablet,wearable,tv">pageTransition<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pagetransition9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pageTransition?(): void</p>     <p>进入此页面或移动到其他页面时实现动画。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection">     <h2 id="onformrecycle11" device-type="phone,2in1,tablet,wearable,tv">onFormRecycle<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onformrecycle11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onFormRecycle?(): string</p>     <p>onFormRecycle回调函数在卡片回收时执行，卡片提供方可以返回需要卡片管理服务代保存的数据，在卡片恢复时通过<a href="/consumer/cn/doc/harmonyos-references/ts-custom-component-lifecycle#onformrecover11">onFormRecover</a>接口传给卡片提供方。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>卡片能力：</strong> 从API version 11开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">返回卡片提供方需要卡片管理服务代保存的数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oxx-c106="" class="highlight-div"><div _ngcontent-oxx-c106="" class="highlight-div-header"><div _ngcontent-oxx-c106="" class="highlight-div-header-left"><div _ngcontent-oxx-c106="" class="handle-button expand-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oxx-c106="" class="highlight-div-header-right"><div _ngcontent-oxx-c106="" class="handle-button ai-button"></div><div _ngcontent-oxx-c106="" class="handle-button line-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oxx-c106="" class="handle-button theme-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oxx-c106="" class="handle-button copy-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oxx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WidgetCard</span> {</li><li>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">actionType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'router'</span>;</li><li>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">abilityName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'EntryAbility'</span>;</li><li>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'add detail'</span>;</li><li>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">fullWidthPercent</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'100%'</span>;</li><li>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">fullHeightPercent</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'100%'</span>;</li><li>
</li><li>  <span class="hljs-title function_">onFormRecycle</span>(): <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">formId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"1859635745"</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"card is recycled, formID: "</span> + formId);</li><li>    <span class="hljs-keyword">return</span> formId;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onFormRecover</span>(<span class="hljs-attr">statusData</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"card has been restored, formID: "</span> + statusData);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>($r(<span class="hljs-string">'app.float.font_size'</span>))</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Medium</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'sys.color.font'</span>))</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fullWidthPercent</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fullHeightPercent</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'sys.color.comp_background_primary'</span>))</li><li>    .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-title function_">postCardAction</span>(<span class="hljs-variable language_">this</span>, {</li><li>        <span class="hljs-attr">action</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">actionType</span>,</li><li>        <span class="hljs-attr">abilityName</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">abilityName</span>,</li><li>        <span class="hljs-attr">params</span>: {</li><li>          <span class="hljs-attr">message</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span></li><li>        }</li><li>      });</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="onformrecover11" device-type="phone,2in1,tablet,wearable,tv">onFormRecover<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onformrecover11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onFormRecover?(statusData: string): void</p>     <p>onFormRecover回调函数在卡片恢复时执行，卡片提供方可以拿到卡片回收时卡片管理服务代保存的数据，该数据可以通过<a href="/consumer/cn/doc/harmonyos-references/ts-custom-component-lifecycle#onformrecycle11">onFormRecycle</a>卡片回收回调函数保存到卡片管理服务。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>卡片能力：</strong> 从API version 11开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">statusData</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">卡片回收时卡片管理服务代保存的数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oxx-c106="" class="highlight-div"><div _ngcontent-oxx-c106="" class="highlight-div-header"><div _ngcontent-oxx-c106="" class="highlight-div-header-left"><div _ngcontent-oxx-c106="" class="handle-button expand-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oxx-c106="" class="highlight-div-header-right"><div _ngcontent-oxx-c106="" class="handle-button ai-button"></div><div _ngcontent-oxx-c106="" class="handle-button line-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oxx-c106="" class="handle-button theme-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oxx-c106="" class="handle-button copy-button"><div _ngcontent-oxx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oxx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WidgetCard</span> {</li><li>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">actionType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'router'</span>;</li><li>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">abilityName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'EntryAbility'</span>;</li><li>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'add detail'</span>;</li><li>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">fullWidthPercent</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'100%'</span>;</li><li>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">fullHeightPercent</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'100%'</span>;</li><li>
</li><li>  <span class="hljs-title function_">onFormRecycle</span>(): <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">formId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"1859635745"</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"card is recycled, formID: "</span> + formId);</li><li>    <span class="hljs-keyword">return</span> formId;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onFormRecover</span>(<span class="hljs-attr">statusData</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"card has been restored, formID: "</span> + statusData);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>($r(<span class="hljs-string">'app.float.font_size'</span>))</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Medium</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'sys.color.font'</span>))</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fullWidthPercent</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fullHeightPercent</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'sys.color.comp_background_primary'</span>))</li><li>    .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-title function_">postCardAction</span>(<span class="hljs-variable language_">this</span>, {</li><li>        <span class="hljs-attr">action</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">actionType</span>,</li><li>        <span class="hljs-attr">abilityName</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">abilityName</span>,</li><li>        <span class="hljs-attr">params</span>: {</li><li>          <span class="hljs-attr">message</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span></li><li>        }</li><li>      });</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>