<h1 _ngcontent-xye-c119="" class="doc-title ng-star-inserted" title="自定义绘制设置"> 自定义绘制设置 </h1>

<div _ngcontent-xye-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>当某些组件本身的绘制内容不满足需求时，可使用自定义组件绘制功能，在原有组件基础上部分绘制，或者全部自行绘制，以达到预期效果。例如：独特的按钮形状、文字和图像混合的图标等。自定义组件绘制提供了自定义绘制修改器，来实现更自由地组件绘制。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>从API version 12开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="drawmodifier" device-type="phone,2in1,tablet,wearable,tv">drawModifier<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="drawmodifier" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>drawModifier(modifier: DrawModifier | undefined): T</p>     <p>设置组件的自定义绘制修改器。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>该接口不支持在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-attribute-modifier#attributemodifier">attributeModifier</a>中调用。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>组件支持范围:</strong></p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-alphabet-indexer">AlphabetIndexer</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-badge">Badge</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-blank">Blank</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-button">Button</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-calendarpicker">CalendarPicker</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-checkbox">Checkbox</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-checkboxgroup">CheckboxGroup</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-drawing-components-circle">Circle</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-column">Column</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-columnsplit">ColumnSplit</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-counter">Counter</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-datapanel">DataPanel</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-datepicker">DatePicker</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-drawing-components-ellipse">Ellipse</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-flex">Flex</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-flowitem">FlowItem</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-folderstack">FolderStack</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-formlink">FormLink</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-gauge">Gauge</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-grid">Grid</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-gridcol">GridCol</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-griditem">GridItem</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-gridrow">GridRow</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-hyperlink">Hyperlink</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image">Image</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-imageanimator">ImageAnimator</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-imagespan">ImageSpan</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-drawing-components-line">Line</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list">List</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-listitem">ListItem</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-listitemgroup">ListItemGroup</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-loadingprogress">LoadingProgress</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-marquee">Marquee</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-menu">Menu</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-menuitem">MenuItem</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-menuitemgroup">MenuItemGroup</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-navigator">Navigator</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navrouter">NavRouter</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-nodecontainer">NodeContainer</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-drawing-components-path">Path</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-patternlock">PatternLock</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-drawing-components-polygon">Polygon</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-drawing-components-polyline">Polyline</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-progress">Progress</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-qrcode">QRCode</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-radio">Radio</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-rating">Rating</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-drawing-components-rect">Rect</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-refresh">Refresh</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-relativecontainer">RelativeContainer</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor">RichEditor</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-row">Row</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-rowsplit">RowSplit</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll">Scroll</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-scrollbar">ScrollBar</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-search">Search</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-select">Select</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-drawing-components-shape">Shape</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-sidebarcontainer">SideBarContainer</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-slider">Slider</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-stack">Stack</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-stepper">Stepper</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-stepperitem">StepperItem</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper">Swiper</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-symbolglyph">SymbolGlyph</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabcontent">TabContent</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs">Tabs</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text">Text</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textarea">TextArea</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textclock">TextClock</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textinput">TextInput</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textpicker">TextPicker</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-texttimer">TextTimer</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-timepicker">TimePicker</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-toggle">Toggle</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-waterflow">WaterFlow</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent">XComponent</a></p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">modifier</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-draw-modifier#drawmodifier-1">DrawModifier</a> | undefined</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>自定义绘制修改器，其中定义了自定义绘制的逻辑。</p>          <p>默认值：undefined</p>          <p><strong>说明：</strong></p>          <p>每个自定义修改器只对当前绑定组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-framenode">FrameNode</a>生效，对其子节点不生效。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.3.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回当前组件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="drawmodifier-1" device-type="phone,2in1,tablet,wearable,tv">DrawModifier<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="drawmodifier-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>DrawModifier可设置前景(drawForeground)、内容前景(drawFront)、内容(drawContent)和内容背景(drawBehind)的绘制方法，还提供主动触发重绘的方法<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-draw-modifier#invalidate">invalidate</a>。每个DrawModifier实例只能设置到一个组件上，禁止进行重复设置。</p>     <p>自定义层级示例图</p>     <p><span><img originheight="682" originwidth="978" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115810.43635503364951323475805464514132:50001231000000:2800:6A10E813442C4094B0BD0F7A30EC93D492E3B6EFA2FD0005A2196D09D7AEDC6A.png" width="920" height="641.5541922290388"></span></p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection">     <h3 id="drawfront" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">drawFront<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="drawfront" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>drawFront?(drawContext: DrawContext): void</p>     <p>自定义绘制内容前景的接口，若重载该方法则可进行内容前景的自定义绘制。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">drawContext</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-draw-modifier#drawcontext">DrawContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图形绘制上下文。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>请参考<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-draw-modifier#示例1通过drawmodifier进行自定义绘制">示例1（通过DrawModifier进行自定义绘制）</a>。</p>    </div>    <div class="tiledSection">     <h3 id="drawcontent" device-type="phone,2in1,tablet,wearable,tv">drawContent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="drawcontent" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>drawContent?(drawContext: DrawContext): void</p>     <p>自定义绘制内容的接口，若重载该方法则可进行内容的自定义绘制，会替换组件原本的内容绘制函数。</p>     <p>该接口的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#drawcontext">DrawContext</a>中的Canvas是用于记录指令的临时Canvas，并非节点的真实Canvas。使用请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-user-defined-extension-drawmodifier#调整自定义绘制canvas的变换矩阵" target="_blank">调整自定义绘制Canvas的变换矩阵</a>。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">drawContext</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-draw-modifier#drawcontext">DrawContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图形绘制上下文。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>请参考<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-draw-modifier#示例1通过drawmodifier进行自定义绘制">示例1（通过DrawModifier进行自定义绘制）</a>。</p>    </div>    <div class="tiledSection">     <h3 id="drawbehind" device-type="phone,2in1,tablet,wearable,tv">drawBehind<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="drawbehind" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>drawBehind?(drawContext: DrawContext): void</p>     <p>自定义绘制背景的接口，若重载该方法则可进行背景的自定义绘制。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">drawContext</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-draw-modifier#drawcontext">DrawContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图形绘制上下文。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>请参考<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-draw-modifier#示例1通过drawmodifier进行自定义绘制">示例1（通过DrawModifier进行自定义绘制）</a>。</p>    </div>    <div class="tiledSection">     <h3 id="drawforeground20" device-type="phone,2in1,tablet,wearable,tv">drawForeground<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="drawforeground20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>drawForeground(drawContext: DrawContext): void</p>     <p>自定义绘制前景的接口，若重载该方法则可进行前景的自定义绘制。需要对其组件的前景层进行绘制时重载该方法。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">drawContext</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-draw-modifier#drawcontext">DrawContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图形绘制上下文。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>请参考<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-draw-modifier#示例2通过drawmodifier对容器的前景进行自定义绘制">示例2（通过DrawModifier对容器的前景进行自定义绘制）</a>。</p>    </div>    <div class="tiledSection">     <h3 id="invalidate" device-type="phone,2in1,tablet,wearable,tv">invalidate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="invalidate" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>invalidate(): void</p>     <p>主动触发重绘的接口，开发者无需也无法重载，调用会触发所绑定组件的重绘。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>示例：</strong></p>     <p>请参考<a href="/consumer/cn/doc/harmonyos-references/ts-universal-attributes-draw-modifier#示例1通过drawmodifier进行自定义绘制">示例1（通过DrawModifier进行自定义绘制）</a>。</p>    </div>    <div class="tiledSection">     <h3 id="drawcontext" device-type="phone,2in1,tablet,wearable,tv">DrawContext<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="drawcontext" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type DrawContext = DrawContext</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#drawcontext">DrawContext</a></td>         <td class="cellrowborder" width="50%">图形绘制上下文。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="示例" device-type="phone,2in1,tablet,wearable,tv">示例<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="示例" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection">     <h3 id="示例1通过drawmodifier进行自定义绘制" class="firsth2">示例1（通过DrawModifier进行自定义绘制）<i class="anchor-icon anchor-icon-link" anchorid="示例1通过drawmodifier进行自定义绘制" tips="复制节点链接"></i></h3>          <p>通过DrawModifier对<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text">Text</a>组件进行自定义绘制。</p>     <div _ngcontent-xye-c106="" class="highlight-div"><div _ngcontent-xye-c106="" class="highlight-div-header"><div _ngcontent-xye-c106="" class="highlight-div-header-left"><div _ngcontent-xye-c106="" class="handle-button expand-button"><div _ngcontent-xye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xye-c106="" class="highlight-div-header-right"><div _ngcontent-xye-c106="" class="handle-button ai-button"></div><div _ngcontent-xye-c106="" class="handle-button line-button"><div _ngcontent-xye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xye-c106="" class="handle-button theme-button"><div _ngcontent-xye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xye-c106="" class="handle-button copy-button"><div _ngcontent-xye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { drawing } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AnimatorResult</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-comment">// 继承DrawModifier实现自定义绘制控制器</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyFullDrawModifier</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">DrawModifier</span> {</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">scaleX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">scaleY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">uiContext: UIContext</span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span> = uiContext;</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 重载drawBehind方法，自定义绘制背景</span></li><li>  <span class="hljs-title function_">drawBehind</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">DrawContext</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">const</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li>    brush.<span class="hljs-title function_">setColor</span>({</li><li>      <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>      <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>      <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>    });</li><li>    context.<span class="hljs-property">canvas</span>.<span class="hljs-title function_">attachBrush</span>(brush);</li><li>    <span class="hljs-keyword">const</span> halfWidth = context.<span class="hljs-property">size</span>.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>;</li><li>    <span class="hljs-keyword">const</span> halfHeight = context.<span class="hljs-property">size</span>.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>;</li><li>    context.<span class="hljs-property">canvas</span>.<span class="hljs-title function_">drawRect</span>({</li><li>      <span class="hljs-attr">left</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfWidth - <span class="hljs-number">50</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleX</span>),</li><li>      <span class="hljs-attr">top</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfHeight - <span class="hljs-number">50</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleY</span>),</li><li>      <span class="hljs-attr">right</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfWidth + <span class="hljs-number">50</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleX</span>),</li><li>      <span class="hljs-attr">bottom</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfHeight + <span class="hljs-number">50</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleY</span>)</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 重载drawContent方法，自定义绘制内容</span></li><li>  <span class="hljs-title function_">drawContent</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">DrawContext</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">const</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li>    brush.<span class="hljs-title function_">setColor</span>({</li><li>      <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>      <span class="hljs-attr">red</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">green</span>: <span class="hljs-number">255</span>,</li><li>      <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>    });</li><li>    context.<span class="hljs-property">canvas</span>.<span class="hljs-title function_">attachBrush</span>(brush);</li><li>    <span class="hljs-keyword">const</span> halfWidth = context.<span class="hljs-property">size</span>.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>;</li><li>    <span class="hljs-keyword">const</span> halfHeight = context.<span class="hljs-property">size</span>.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>;</li><li>    context.<span class="hljs-property">canvas</span>.<span class="hljs-title function_">drawRect</span>({</li><li>      <span class="hljs-attr">left</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfWidth - <span class="hljs-number">30</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleX</span>),</li><li>      <span class="hljs-attr">top</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfHeight - <span class="hljs-number">30</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleY</span>),</li><li>      <span class="hljs-attr">right</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfWidth + <span class="hljs-number">30</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleX</span>),</li><li>      <span class="hljs-attr">bottom</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfHeight + <span class="hljs-number">30</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleY</span>)</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 重载drawFront方法，自定义绘制内容前景</span></li><li>  <span class="hljs-title function_">drawFront</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">DrawContext</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">const</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li>    brush.<span class="hljs-title function_">setColor</span>({</li><li>      <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>      <span class="hljs-attr">red</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">blue</span>: <span class="hljs-number">255</span></li><li>    });</li><li>    context.<span class="hljs-property">canvas</span>.<span class="hljs-title function_">attachBrush</span>(brush);</li><li>    <span class="hljs-keyword">const</span> halfWidth = context.<span class="hljs-property">size</span>.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>;</li><li>    <span class="hljs-keyword">const</span> halfHeight = context.<span class="hljs-property">size</span>.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>;</li><li>    <span class="hljs-keyword">const</span> radiusScale = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleX</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleY</span>) / <span class="hljs-number">2</span>;</li><li>    context.<span class="hljs-property">canvas</span>.<span class="hljs-title function_">drawCircle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfWidth), <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfHeight), <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(<span class="hljs-number">20</span> * radiusScale));</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 继承DrawModifier实现自定义绘制控制器，仅支持自定义绘制内容前景</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyFrontDrawModifier</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">DrawModifier</span> {</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">scaleX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">scaleY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">uiContext: UIContext</span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span> = uiContext;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">drawFront</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">DrawContext</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">const</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li>    brush.<span class="hljs-title function_">setColor</span>({</li><li>      <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>      <span class="hljs-attr">red</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">blue</span>: <span class="hljs-number">255</span></li><li>    });</li><li>    context.<span class="hljs-property">canvas</span>.<span class="hljs-title function_">attachBrush</span>(brush);</li><li>    <span class="hljs-keyword">const</span> halfWidth = context.<span class="hljs-property">size</span>.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>;</li><li>    <span class="hljs-keyword">const</span> halfHeight = context.<span class="hljs-property">size</span>.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>;</li><li>    <span class="hljs-keyword">const</span> radiusScale = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleX</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleY</span>) / <span class="hljs-number">2</span>;</li><li>    context.<span class="hljs-property">canvas</span>.<span class="hljs-title function_">drawCircle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfWidth), <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfHeight), <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(<span class="hljs-number">20</span> * radiusScale));</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">DrawModifierExample</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">fullModifier</span>: <span class="hljs-title class_">MyFullDrawModifier</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyFullDrawModifier</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>());</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">frontModifier</span>: <span class="hljs-title class_">MyFrontDrawModifier</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyFrontDrawModifier</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>());</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">drawAnimator</span>: <span class="hljs-title class_">AnimatorResult</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">modifier</span>: <span class="hljs-title class_">DrawModifier</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyFrontDrawModifier</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>());</li><li>  <span class="hljs-keyword">private</span> count = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-comment">// 创建Animator对象并设置动画</span></li><li>  <span class="hljs-title function_">create</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> self = <span class="hljs-variable language_">this</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">drawAnimator</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">createAnimator</span>({</li><li>      <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>,</li><li>      <span class="hljs-attr">easing</span>: <span class="hljs-string">'ease'</span>,</li><li>      <span class="hljs-attr">delay</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">fill</span>: <span class="hljs-string">'forwards'</span>,</li><li>      <span class="hljs-attr">direction</span>: <span class="hljs-string">'normal'</span>,</li><li>      <span class="hljs-attr">iterations</span>: <span class="hljs-number">1</span>,</li><li>      <span class="hljs-attr">begin</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">end</span>: <span class="hljs-number">2</span></li><li>    });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">drawAnimator</span>.<span class="hljs-property">onFrame</span> = <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'frame value ='</span>, value);</li><li>      <span class="hljs-keyword">const</span> tempModifier = self.<span class="hljs-property">modifier</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">MyFullDrawModifier</span> | <span class="hljs-title class_">MyFrontDrawModifier</span>;</li><li>      tempModifier.<span class="hljs-property">scaleX</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(value - <span class="hljs-number">1</span>);</li><li>      tempModifier.<span class="hljs-property">scaleY</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(value - <span class="hljs-number">1</span>);</li><li>      <span class="hljs-comment">// 主动触发重绘</span></li><li>      self.<span class="hljs-property">modifier</span>.<span class="hljs-title function_">invalidate</span>();</li><li>    };</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'test text'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">const</span> tempModifier = <span class="hljs-variable language_">this</span>.<span class="hljs-property">modifier</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">MyFullDrawModifier</span> | <span class="hljs-title class_">MyFrontDrawModifier</span>;</li><li>            tempModifier.<span class="hljs-property">scaleX</span> -= <span class="hljs-number">0.1</span>;</li><li>            tempModifier.<span class="hljs-property">scaleY</span> -= <span class="hljs-number">0.1</span>;</li><li>          })</li><li>          .<span class="hljs-title function_">drawModifier</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">modifier</span>)</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'create'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">create</span>();</li><li>          })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'play'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">drawAnimator</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">drawAnimator</span>.<span class="hljs-title function_">play</span>();</li><li>            }</li><li>          })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'changeModifier'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> += <span class="hljs-number">1</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> % <span class="hljs-number">2</span> === <span class="hljs-number">1</span>) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'change to full modifier'</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">modifier</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">fullModifier</span>;</li><li>            } <span class="hljs-keyword">else</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'change to front modifier'</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">modifier</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">frontModifier</span>;</li><li>            }</li><li>          })</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="261" originwidth="425" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115810.25046543007452691330692651236053:50001231000000:2800:D7DEC86A55104B2957DCF2747EE462B212B614BAB21A9C14A819569ED24B4505.gif" width="425" height="261"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例2通过drawmodifier对容器的前景进行自定义绘制">示例2（通过DrawModifier对容器的前景进行自定义绘制）<i class="anchor-icon anchor-icon-link" anchorid="示例2通过drawmodifier对容器的前景进行自定义绘制" tips="复制节点链接"></i></h3>          <p>通过DrawModifier对<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-column">Column</a>容器的前景进行自定义绘制。</p>     <div _ngcontent-xye-c106="" class="highlight-div"><div _ngcontent-xye-c106="" class="highlight-div-header"><div _ngcontent-xye-c106="" class="highlight-div-header-left"><div _ngcontent-xye-c106="" class="handle-button expand-button"><div _ngcontent-xye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xye-c106="" class="highlight-div-header-right"><div _ngcontent-xye-c106="" class="handle-button ai-button"></div><div _ngcontent-xye-c106="" class="handle-button line-button"><div _ngcontent-xye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xye-c106="" class="handle-button theme-button"><div _ngcontent-xye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xye-c106="" class="handle-button copy-button"><div _ngcontent-xye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { drawing } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyForegroundDrawModifier</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">DrawModifier</span> {</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">scaleX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">3</span>;</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">scaleY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">3</span>;</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">uiContext: UIContext</span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span> = uiContext;</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 重载drawForeground方法，实现自定义绘制前景</span></li><li>  <span class="hljs-title function_">drawForeground</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">DrawContext</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">const</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li>    brush.<span class="hljs-title function_">setColor</span>({</li><li>      <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>      <span class="hljs-attr">red</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">green</span>: <span class="hljs-number">50</span>,</li><li>      <span class="hljs-attr">blue</span>: <span class="hljs-number">100</span></li><li>    });</li><li>    context.<span class="hljs-property">canvas</span>.<span class="hljs-title function_">attachBrush</span>(brush);</li><li>    <span class="hljs-keyword">const</span> halfWidth = context.<span class="hljs-property">size</span>.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>;</li><li>    <span class="hljs-keyword">const</span> halfHeight = context.<span class="hljs-property">size</span>.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>;</li><li>    context.<span class="hljs-property">canvas</span>.<span class="hljs-title function_">drawRect</span>({</li><li>      <span class="hljs-attr">left</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfWidth - <span class="hljs-number">30</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleX</span>),</li><li>      <span class="hljs-attr">top</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfHeight - <span class="hljs-number">30</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleY</span>),</li><li>      <span class="hljs-attr">right</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfWidth + <span class="hljs-number">30</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleX</span>),</li><li>      <span class="hljs-attr">bottom</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">vp2px</span>(halfHeight + <span class="hljs-number">30</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleY</span>)</li><li>    });</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">DrawModifierExample</span> {</li><li>  <span class="hljs-comment">// 将自定义绘制前景的类实例化，传入UIContext实例</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">foregroundModifier</span>: <span class="hljs-title class_">MyForegroundDrawModifier</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyForegroundDrawModifier</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>());</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'此文本是子节点'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">36</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-number">50</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-number">280</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">300</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x87CEEB</span>)</li><li>    <span class="hljs-comment">// 调用此接口并传入自定义绘制前景的类实例，即可实现自定义绘制前景</span></li><li>    .<span class="hljs-title function_">drawModifier</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">foregroundModifier</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="272" originwidth="253" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115810.27019807731330357405237605817558:50001231000000:2800:579F9E00899721521D72464B24C02B7C9BFA33278083CAD7790E07943A444C0B.png" class="notEnlarge" width="253" height="272"></span></p>    </div>   </div>   <div></div></div>