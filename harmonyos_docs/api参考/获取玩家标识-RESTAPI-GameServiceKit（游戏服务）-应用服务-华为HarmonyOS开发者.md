<h1 _ngcontent-usb-c119="" class="doc-title ng-star-inserted" title="获取玩家标识"> 获取玩家标识 </h1>

<div _ngcontent-usb-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section2985105118353">功能介绍<i class="anchor-icon anchor-icon-link" anchorid="section2985105118353" tips="复制节点链接"></i></h2><ul><li>调用该接口，对已经获得的Access Token进行鉴权。</li><li>传入Access Token到华为服务器上获取玩家的gamePlayerId、teamPlayerId等信息。</li></ul> </div> <div class="tiledSection"><h2 id="section59851051113519">场景描述<i class="anchor-icon anchor-icon-link" anchorid="section59851051113519" tips="复制节点链接"></i></h2><p>游戏已经获取到Access Token，要对其进行解析鉴权，通过Access Token到华为服务器上获取玩家的gamePlayerId、teamPlayerId等信息。</p> </div> <div class="tiledSection"><h2 id="section1798515114357">接口原型<i class="anchor-icon anchor-icon-link" anchorid="section1798515114357" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table><tbody><tr><th class="firstcol" id="mcps1.3.3.2.1.3.1.1" width="16.74%"><p>承载协议</p> </th> <td class="cellrowborder" width="83.26%"><p>HTTPS POST</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.3.2.1.3.2.1" width="16.74%"><p>接口方向</p> </th> <td class="cellrowborder" width="83.26%"><p>开发者服务器-&gt;华为游戏服务器</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.3.2.1.3.3.1" width="16.74%"><p>接口URL</p> </th> <td class="cellrowborder" width="83.26%"><p>https://jos-open-api.cloud.huawei.com/gameservice/api/gbClientApi</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>请使用TLS 1.2协议或以上版本。</p> </div></div></div> </td> </tr> <tr><th class="firstcol" id="mcps1.3.3.2.1.3.4.1" width="16.74%"><p>数据格式</p> </th> <td class="cellrowborder" width="83.26%"><p>请求：Content-Type: application/x-www-form-urlencoded（表单方式）</p> <p>响应：Content-Type: application/json</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section13986115113350">请求参数<i class="anchor-icon anchor-icon-link" anchorid="section13986115113350" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.5.1.1" width="14.91%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.5.1.2" width="17.29%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.5.1.3" width="18.26%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.5.1.4" width="49.54%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.91%"><p>method</p> </td> <td class="cellrowborder" width="17.29%"><p>是</p> </td> <td class="cellrowborder" width="18.26%"><p>String</p> </td> <td class="cellrowborder" width="49.54%"><p>固定传入“external.hms.gs.getPlayerInfo”。</p> </td> </tr> <tr><td class="cellrowborder" width="14.91%"><p>accessToken</p> </td> <td class="cellrowborder" width="17.29%"><p>是</p> </td> <td class="cellrowborder" width="18.26%"><p>String</p> </td> <td class="cellrowborder" width="49.54%"><p>游戏调用华为账号的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-obtain-user-token" target="_blank">获取用户级凭证</a>接口获取到的Access Token。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section19989155153512">请求示例<i class="anchor-icon anchor-icon-link" anchorid="section19989155153512" tips="复制节点链接"></i></h2><div _ngcontent-usb-c106="" class="highlight-div"><div _ngcontent-usb-c106="" class="highlight-div-header"><div _ngcontent-usb-c106="" class="highlight-div-header-left"><div _ngcontent-usb-c106="" class="handle-button expand-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usb-c106="" class="highlight-div-header-right"><div _ngcontent-usb-c106="" class="handle-button ai-button"></div><div _ngcontent-usb-c106="" class="handle-button line-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usb-c106="" class="handle-button theme-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usb-c106="" class="handle-button copy-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usb-c106="" class="highlight-scroll-div"><pre class="java prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="">POST /gameservice/api/gbClientApi HTTP/<span class="hljs-number">1.1</span></span></li><li><span class="">Content-Type: </span><span class="">application/x-www-form-urlencoded</span></li><li><span class="">User-Agent: PostmanRuntime/<span class="hljs-number">7.24</span><span class="hljs-number">.0</span></span></li><li><span class="">Accept: *<span class="hljs-comment">/*</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">Host: jos-open-api.cloud.huawei.com</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">Accept-Encoding: gzip, deflate, br</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">Connection: keep-alive</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">Content-Length: 717</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment">// </span><strong><span class="hljs-comment">所有</span></strong><strong><span class="hljs-comment">请求参数</span></strong><strong><span class="hljs-comment">值</span></strong><span class="hljs-comment">均需要urlencode编码后再进行拼接</span></li><li><span class="hljs-comment">method=external.hms.gs.getPlayerInfo&amp;accessToken=******</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section12989451113515">响应参数<i class="anchor-icon anchor-icon-link" anchorid="section12989451113515" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.1" width="14.48%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.2" width="18%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.3" width="17.06%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.4" width="50.46000000000001%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.48%"><p>rtnCode</p> </td> <td class="cellrowborder" width="18%"><p>是</p> </td> <td class="cellrowborder" width="17.06%"><p>int</p> </td> <td class="cellrowborder" width="50.46000000000001%"><p>服务端结果说明：</p> <ul><li>0：获取成功</li><li>-1：获取失败</li><li>2：accessToken无效</li><li>3001：参数错误</li></ul> </td> </tr> <tr><td class="cellrowborder" width="14.48%"><p>acctInfo</p> </td> <td class="cellrowborder" width="18%"><p>否</p> </td> <td class="cellrowborder" width="17.06%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-getplayerinfo#li1628913126415">LoginAcctInfo</a></p> </td> <td class="cellrowborder" width="50.46000000000001%"><p>玩家标识信息，获取成功时返回。</p> </td> </tr> <tr><td class="cellrowborder" width="14.48%"><p>bindInfo</p> </td> <td class="cellrowborder" width="18%"><p>是</p> </td> <td class="cellrowborder" width="17.06%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-getplayerinfo#li0462806435">BindPlayerInfo</a></p> </td> <td class="cellrowborder" width="50.46000000000001%"><p>与华为PlayerId绑定的游戏官方账号信息。</p> </td> </tr> <tr><td class="cellrowborder" width="14.48%"><p>errMsg</p> </td> <td class="cellrowborder" width="18%"><p>否</p> </td> <td class="cellrowborder" width="17.06%"><p>String</p> </td> <td class="cellrowborder" width="50.46000000000001%"><p>异常场景下返回错误码的描述。</p> </td> </tr>  </tbody></table></div> </div> <ul><li id="li1628913126415">LoginAcctInfo <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.3.1.1.1.5.1.1" width="14.48%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.1.1.5.1.2" width="17.98%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.1.1.5.1.3" width="17.07%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.1.1.5.1.4" width="50.470000000000006%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.48%"><p>gamePlayerAcct</p> </td> <td class="cellrowborder" width="17.98%"><p>否</p> </td> <td class="cellrowborder" width="17.07%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-getplayerinfo#li137107744415">PlayerAcct</a></p> </td> <td class="cellrowborder" width="50.470000000000006%"><p>gamePlayerId信息。转移场景默认返回gamePlayerId。</p> </td> </tr> <tr><td class="cellrowborder" width="14.48%"><p>teamPlayerAcct</p> </td> <td class="cellrowborder" width="17.98%"><p>否</p> </td> <td class="cellrowborder" width="17.07%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-getplayerinfo#li137107744415">PlayerAcct</a></p> </td> <td class="cellrowborder" width="50.470000000000006%"><p>teamPlayerId信息。绑定场景默认返回teamPlayerId。</p> </td> </tr>  </tbody></table></div> </div> <ul><li id="li137107744415">PlayerAcct <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.3.1.2.1.1.1.5.1.1" width="14.48%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.2.1.1.1.5.1.2" width="18%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.2.1.1.1.5.1.3" width="17.06%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.2.1.1.1.5.1.4" width="50.46000000000001%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.48%"><p>id</p> </td> <td class="cellrowborder" width="18%"><p>是</p> </td> <td class="cellrowborder" width="17.06%"><p>String</p> </td> <td class="cellrowborder" width="50.46000000000001%"><p>玩家标识ID。</p> </td> </tr> <tr><td class="cellrowborder" width="14.48%"><p>compatibleType</p> </td> <td class="cellrowborder" width="18%"><p>是</p> </td> <td class="cellrowborder" width="17.06%"><p>int</p> </td> <td class="cellrowborder" width="50.46000000000001%"><p>兼容类型。</p> <ul><li id="zh-cn_topic_0000002485678657_li1566619672210">0：gamePlayerId与openId、playerId不兼容，即调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section17453143012584">getLocalPlayer</a>接口时，玩家首次登录游戏生成的玩家标识；teamPlayerId与unionId不兼容，即调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section157848375136">unionLogin</a>接口时，玩家首次登录游戏未选择转移APK游戏数据生成的玩家标识。</li><li id="zh-cn_topic_0000002485678657_li1418416493318">1：gamePlayerId兼容playerId，即玩家首次登录游戏时选择转移APK游戏数据，且APK游戏使用了playerId作为玩家标识，Game Service Kit将playerId作为新的gamePlayerId。</li><li id="zh-cn_topic_0000002485678657_li4184184133311">2：gamePlayerId兼容openId，即玩家首次登录游戏时选择转移APK游戏数据，且APK游戏使用了openId作为玩家标识，Game Service Kit将openId作为新的gamePlayerId。</li></ul> </td> </tr> <tr><td class="cellrowborder" width="14.48%"><p>idType</p> </td> <td class="cellrowborder" width="18%"><p>是</p> </td> <td class="cellrowborder" width="17.06%"><p>int</p> </td> <td class="cellrowborder" width="50.46000000000001%"><p>玩家标识ID类型。</p> <ul><li>1：gamePlayerId</li><li>2：teamPlayerId</li></ul> </td> </tr> <tr><td class="cellrowborder" width="14.48%"><p>bindType</p> </td> <td class="cellrowborder" width="18%"><p>是</p> </td> <td class="cellrowborder" width="17.06%"><p>int</p> </td> <td class="cellrowborder" width="50.46000000000001%"><p>是否可绑定游戏官方账号。</p> <ul><li>0：不可绑定</li><li>1：可绑定</li></ul> </td> </tr>  </tbody></table></div> </div> </li></ul> </li></ul> <ul><li id="li0462806435">BindPlayerInfo <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.4.1.1.1.5.1.1" width="14.48%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.1.1.5.1.2" width="17.98%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.1.1.5.1.3" width="17.07%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.1.1.5.1.4" width="50.470000000000006%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.48%"><p>bindMode</p> </td> <td class="cellrowborder" width="17.98%"><p>否</p> </td> <td class="cellrowborder" width="17.07%"><p>int</p> </td> <td class="cellrowborder" width="50.470000000000006%"><p>绑定模式：</p> <ul><li>0：开发者级别。</li><li>1：游戏级别。</li></ul> </td> </tr> <tr><td class="cellrowborder" width="14.48%"><p>thirdOpenId</p> </td> <td class="cellrowborder" width="17.98%"><p>否</p> </td> <td class="cellrowborder" width="17.07%"><p>String</p> </td> <td class="cellrowborder" width="50.470000000000006%"><p>游戏官方账号ID。</p> </td> </tr>  </tbody></table></div> </div> </li></ul> </div> <div class="tiledSection"><h2 id="section1799113512351">响应示例<i class="anchor-icon anchor-icon-link" anchorid="section1799113512351" tips="复制节点链接"></i></h2><div _ngcontent-usb-c106="" class="highlight-div"><div _ngcontent-usb-c106="" class="highlight-div-header"><div _ngcontent-usb-c106="" class="highlight-div-header-left"><div _ngcontent-usb-c106="" class="handle-button expand-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usb-c106="" class="highlight-div-header-right"><div _ngcontent-usb-c106="" class="handle-button ai-button"></div><div _ngcontent-usb-c106="" class="handle-button line-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usb-c106="" class="handle-button theme-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usb-c106="" class="handle-button copy-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usb-c106="" class="highlight-scroll-div"><pre class="java prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK</span></li><li><span class="">Date: Tue, <span class="hljs-number">19</span> May <span class="hljs-number">2023</span> <span class="hljs-number">06</span>:<span class="hljs-number">28</span>:<span class="hljs-number">02</span> GMT</span></li><li><span class="">Content-Type: application/json; charset=utf-<span class="hljs-number">8</span></span></li><li><span class="">Transfer-Encoding: chunked</span></li><li><span class="">Connection: keep-alive</span></li><li><span class="">Content-Encoding: gzip</span></li><li><span class="">Server: elb</span></li><li>{</li><li>    <span class=""><span class="hljs-string">"acctInfo"</span></span>: {</li><li>        <span class=""><span class="hljs-string">"gamePlayerAcct"</span></span>: {</li><li>            <span class=""><span class="hljs-string">"id"</span></span>: <span class=""><span class="hljs-string">"B7******5E"</span></span>,</li><li>            <span class=""><span class="hljs-string">"compatibleType"</span></span>: <span class=""><span class="hljs-number">0</span></span>,</li><li>            <span class="hljs-string">"idType"</span>: <span class="hljs-number">1</span>,</li><li>            <span class="hljs-string">"bindType"</span>: <span class="hljs-number">0</span></li><li>        }</li><li>    },</li><li>    <span class="hljs-string">"bindInfo"</span>:{</li><li>        <span class="hljs-string">"bindMode"</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-string">"thirdOpenId"</span>: <span class="hljs-string">"u_123***9ab"</span></li><li>   },</li><li>    <span class=""><span class="hljs-string">"rtnCode"</span></span>: <span class=""><span class="hljs-number">0</span></span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section182029402541">调用示例<i class="anchor-icon anchor-icon-link" anchorid="section182029402541" tips="复制节点链接"></i></h2><div class="p">    <div class="switchPre"><div class="preTab preTab-cn"><div class="activePre" switchpre-data="0" switchpre-lang="Java">Java</div><div switchpre-data="1" switchpre-lang="C#">C#</div><div switchpre-data="2" switchpre-lang="PHP">PHP</div><div switchpre-data="3" switchpre-lang="Python">Python</div></div><div class="switchPreBox"><div class="prebox"><div _ngcontent-usb-c106="" class="highlight-div"><div _ngcontent-usb-c106="" class="highlight-div-header"><div _ngcontent-usb-c106="" class="highlight-div-header-left"><div _ngcontent-usb-c106="" class="handle-button expand-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usb-c106="" class="highlight-div-header-right"><div _ngcontent-usb-c106="" class="handle-button ai-button"></div><div _ngcontent-usb-c106="" class="handle-button line-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usb-c106="" class="handle-button theme-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usb-c106="" class="handle-button copy-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usb-c106="" class="highlight-scroll-div"><pre class="java prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">package</span> okhttp.com.post;</li><li><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSONObject;</li><li><span class="hljs-keyword">import</span> okhttp3.*;</li><li><span class="hljs-keyword">import</span> java.io.IOException;</li><li><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GetTokenInfoTest</span> {</li><li>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Integer</span> <span class="hljs-variable">RETURN_CODE_SUCCEED</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * 接口本地调测使用</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {</li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> <span class="hljs-string">"external.hms.gs.getPlayerInfo"</span>; <span class="hljs-comment">// 固定传入</span></li><li>        String accessToken= <span class="hljs-string">"xxxx"</span>; <span class="hljs-comment">// 请使用游戏客户端调用账号获取到的AccessToken</span></li><li>        getPlayerInfoService(method, accessToken);</li><li>    }</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * 根据AccessToken获取玩家标识信息</span></li><li><span class="hljs-comment">     *</span></li><li><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> method 固定传入“external.hms.gs.getPlayerInfo”</span></li><li><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> accessToken 游戏客户端调用账号获取到的AccessToken</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getPlayerInfoService</span><span class="hljs-params">(String method, String accessToken)</span> {</li><li>        <span class="hljs-type">OkHttpClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OkHttpClient</span>().newBuilder().build();</li><li>        <span class="hljs-type">RequestBody</span> <span class="hljs-variable">mFormBody</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormBody</span>.Builder().add(<span class="hljs-string">"method"</span>, method)</li><li>            .add(<span class="hljs-string">"accessToken"</span>, accessToken)</li><li>            .build();</li><li>        <span class="hljs-type">Request</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>.Builder().url(<span class="hljs-string">"https://jos-open-api.cloud.huawei.com/gameservice/api/gbClientApi"</span>)</li><li>            .post(mFormBody)</li><li>            .build();</li><li>        <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-type">Response</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.newCall(request).execute();</li><li>            <span class="hljs-keyword">if</span> (response.isSuccessful()) {</li><li>                <span class="hljs-type">JSONObject</span> <span class="hljs-variable">object</span> <span class="hljs-operator">=</span> JSONObject.parseObject(response.body().string());</li><li>                <span class="hljs-keyword">if</span> (RETURN_CODE_SUCCEED.equals(object.get(<span class="hljs-string">"rtnCode"</span>)) &amp;&amp; object.get(<span class="hljs-string">"acctInfo"</span>) != <span class="hljs-literal">null</span>) {</li><li>                    <span class="hljs-type">JSONObject</span> <span class="hljs-variable">acctInfo</span> <span class="hljs-operator">=</span> JSONObject.parseObject(object.get(<span class="hljs-string">"acctInfo"</span>).toString());</li><li>                    <span class="hljs-keyword">if</span> (acctInfo != <span class="hljs-literal">null</span>){</li><li>                        <span class="hljs-keyword">if</span> (acctInfo.get(<span class="hljs-string">"gamePlayerAcct"</span>) != <span class="hljs-literal">null</span>) {</li><li>                            <span class="hljs-type">JSONObject</span> <span class="hljs-variable">gamePlayerAcct</span> <span class="hljs-operator">=</span> JSONObject.parseObject(acctInfo.get(<span class="hljs-string">"gamePlayerAcct"</span>).toString());</li><li>                            System.out.println(<span class="hljs-string">"gamePlayerId: "</span> + gamePlayerAcct.get(<span class="hljs-string">"id"</span>));</li><li>                            System.out.println(<span class="hljs-string">"gamePlayer compatibleType: "</span> + gamePlayerAcct.get(<span class="hljs-string">"compatibleType"</span>));</li><li>                        }</li><li>                        <span class="hljs-keyword">if</span> (acctInfo.get(<span class="hljs-string">"teamPlayerAcct"</span>) != <span class="hljs-literal">null</span>) {</li><li>                            <span class="hljs-type">JSONObject</span> <span class="hljs-variable">teamPlayerAcct</span> <span class="hljs-operator">=</span> JSONObject.parseObject(acctInfo.get(<span class="hljs-string">"teamPlayerAcct"</span>).toString());</li><li>                            System.out.println(<span class="hljs-string">"teamPlayerId: "</span> + teamPlayerAcct.get(<span class="hljs-string">"id"</span>));</li><li>                            System.out.println(<span class="hljs-string">"teamPlayer compatibleType: "</span> + teamPlayerAcct.get(<span class="hljs-string">"compatibleType"</span>));</li><li>                        }</li><li>                    }</li><li>                    <span class="hljs-type">JSONObject</span> <span class="hljs-variable">bindInfo</span> <span class="hljs-operator">=</span> JSONObject.parseObject(object.get(<span class="hljs-string">"bindInfo"</span>).toString());</li><li>                    <span class="hljs-keyword">if</span> (bindInfo != <span class="hljs-literal">null</span>) {</li><li>                        System.out.println(<span class="hljs-string">"bindMode: "</span> + bindInfo.get(<span class="hljs-string">"bindMode"</span>));</li><li>                        System.out.println(<span class="hljs-string">"thirdOpenId: "</span> + bindInfo.get(<span class="hljs-string">"thirdOpenId"</span>));</li><li>                    }</li><li>                } <span class="hljs-keyword">else</span> {</li><li>                    System.out.println(<span class="hljs-string">"rtnCode: "</span> + object.get(<span class="hljs-string">"rtnCode"</span>));</li><li>                    System.out.println(<span class="hljs-string">"rtnMsg: "</span> + object.get(<span class="hljs-string">"errMsg"</span>));</li><li>                }</li><li>            }</li><li>        } <span class="hljs-keyword">catch</span> (IOException e) {</li><li>            e.printStackTrace();</li><li>        }</li><li>    }</li><li>}</li></ol></pre></div></div></div><div class="prebox"><div _ngcontent-usb-c106="" class="highlight-div"><div _ngcontent-usb-c106="" class="highlight-div-header"><div _ngcontent-usb-c106="" class="highlight-div-header-left"><div _ngcontent-usb-c106="" class="handle-button expand-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usb-c106="" class="highlight-div-header-right"><div _ngcontent-usb-c106="" class="handle-button ai-button"></div><div _ngcontent-usb-c106="" class="handle-button line-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usb-c106="" class="handle-button theme-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usb-c106="" class="handle-button copy-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usb-c106="" class="highlight-scroll-div"><pre class="csharp prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-keyword">using</span></span> System;</li><li><span class=""><span class="hljs-keyword">using</span></span> System.IO;</li><li><span class=""><span class="hljs-keyword">using</span></span> System.Net;</li><li><span class=""><span class="hljs-keyword">using</span></span> System.Text;</li><li><span class=""><span class="hljs-keyword">using</span></span> System.Web;</li><li><span class=""><span class="hljs-keyword">namespace</span></span> <span class="hljs-title">cXdemo</span></li><li>{</li><li>    <span class=""><span class="hljs-keyword">class</span></span> <span class="hljs-title">Program</span></li><li>    {</li><li>        <span class=""><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class=""><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> <span class="hljs-title">Main</span>(</span><span class=""><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span>)</span></li><li>        {</li><li>            <span class=""><span class="hljs-comment">// 固定传入“external.hms.gs.getPlayerInfo”</span></span></li><li>            <span class=""><span class="hljs-built_in">string</span></span> <span class="">method</span> = <span class=""><span class="hljs-string">"external.hms.gs.getPlayerInfo"</span></span>;</li><li>            <span class=""><span class="hljs-comment">// 取自当前玩家的Player对象中获取到的Access Token。</span></span></li><li>            <span class=""><span class="hljs-built_in">string</span></span> accessToken = <span class=""><span class="hljs-string">"xxxxx"</span></span>;</li><li>            <span class=""><span class="hljs-comment">// 请求接口</span></span></li><li>            requestgameInfo(<span class="">method</span>, accessToken);</li><li>        }</li><li>        <span class=""><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class=""><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> <span class="hljs-title">requestgameInfo</span>(</span><span class=""><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class=""><span class="hljs-function"><span class="hljs-params">method</span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class=""><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> accessToken</span>)</span> </li><li>        {</li><li>            <span class=""><span class="hljs-keyword">var</span></span> requestUrl = <span class=""><span class="hljs-string">"https://jos-open-api.cloud.huawei.com/gameservice/api/gbClientApi"</span></span>;</li><li>            HttpWebRequest request = WebRequest.Create(requestUrl) <span class=""><span class="hljs-keyword">as</span></span> HttpWebRequest;</li><li>            request.Method = <span class=""><span class="hljs-string">"post"</span></span>;</li><li>            request.ContentType = <span class=""><span class="hljs-string">"application/x-www-form-urlencoded"</span></span>;</li><li>            StringBuilder data = <span class=""><span class="hljs-keyword">new</span></span> StringBuilder();</li><li>            data.Append(<span class=""><span class="hljs-string">"method="</span></span> + HttpUtility.UrlEncode(<span class="">method</span>));</li><li>            data.Append(<span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&amp;</span></span><span class=""><span class="hljs-string">accessToken="</span></span> + HttpUtility.UrlEncode(accessToken));</li><li>            <span class=""><span class="hljs-built_in">byte</span></span>[] byteData = Encoding.UTF8.GetBytes(data.ToString());</li><li>            request.ContentLength = byteData.Length;</li><li>            Stream postStream = request.GetRequestStream();</li><li>            postStream.Write(byteData, <span class=""><span class="hljs-number">0</span></span>, byteData.Length);</li><li>            postStream.Close();</li><li>            WebResponse response = request.GetResponse();</li><li>            StreamReader reader = <span class=""><span class="hljs-keyword">new</span></span> StreamReader(response.GetResponseStream(), Encoding.UTF8);</li><li>            <span class=""><span class="hljs-built_in">string</span></span> strJson = reader.ReadToEnd();</li><li>            Console.WriteLine(strJson);</li><li>            reader.Close();</li><li>            response.Close();</li><li>        }</li><li>    }</li><li>}</li></ol></pre></div></div></div><div class="prebox"><div _ngcontent-usb-c106="" class="highlight-div"><div _ngcontent-usb-c106="" class="highlight-div-header"><div _ngcontent-usb-c106="" class="highlight-div-header-left"><div _ngcontent-usb-c106="" class="handle-button expand-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usb-c106="" class="highlight-div-header-right"><div _ngcontent-usb-c106="" class="handle-button ai-button"></div><div _ngcontent-usb-c106="" class="handle-button line-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usb-c106="" class="handle-button theme-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usb-c106="" class="handle-button copy-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usb-c106="" class="highlight-scroll-div"><pre class="php prettyprint linenums hljs language-php" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> <span class="hljs-title">get_token_info</span></span></li><li><span class="hljs-class"></span>{</li><li>    <span class=""><span class="hljs-comment">/**</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">     * 根据AccessToken获取玩家信息</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">     *</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> string $method 固定传入“external.hms.gs.getPlayerInfo”</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> string $accessToken 请使用客户端Player对象中的AccessToken</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">     */</span></span></li><li>    <span class=""><span class="hljs-keyword">public</span></span> <span class=""><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> <span class="hljs-title">call_https</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> </span></span><span class=""><span class="hljs-function"><span class="hljs-params"><span class="hljs-variable">$method</span></span></span></span><span class="hljs-function"><span class="hljs-params">, <span class="hljs-keyword">string</span> </span></span><span class=""><span class="hljs-function"><span class="hljs-params"><span class="hljs-variable">$accessToken</span></span></span></span><span class="hljs-function">): <span class="hljs-title">void</span></span></li><li><span class="hljs-function">    </span>{</li><li>        <span class=""><span class="hljs-variable">$data</span></span> = <span class=""><span class="hljs-keyword">array</span></span>(<span class=""><span class="hljs-string">"method"</span></span> =&gt; <span class=""><span class="hljs-variable">$method</span></span>, <span class=""><span class="hljs-string">"accessToken"</span></span> =&gt; <span class=""><span class="hljs-variable">$accessToken</span></span>);</li><li>        <span class=""><span class="hljs-variable">$curl</span></span> = <span class="hljs-title function_ invoke__">curl_init</span>();</li><li>        <span class="hljs-title function_ invoke__">curl_setopt_array</span>(<span class=""><span class="hljs-variable">$curl</span></span>, <span class=""><span class="hljs-keyword">array</span></span>(</li><li>            CURLOPT_URL =&gt; <span class=""><span class="hljs-string">'https://jos-open-api.cloud.huawei.com/gameservice/api/gbClientApi'</span></span>,</li><li>            CURLOPT_RETURNTRANSFER =&gt; <span class=""><span class="hljs-literal">true</span></span>,</li><li>            CURLOPT_ENCODING =&gt; <span class=""><span class="hljs-string">''</span></span>,</li><li>            CURLOPT_MAXREDIRS =&gt; <span class=""><span class="hljs-number">10</span></span>,</li><li>            CURLOPT_TIMEOUT =&gt; <span class=""><span class="hljs-number">0</span></span>,</li><li>            CURLOPT_FOLLOWLOCATION =&gt; <span class=""><span class="hljs-literal">true</span></span>,</li><li>            CURLOPT_CUSTOMREQUEST =&gt; <span class=""><span class="hljs-string">'POST'</span></span>,</li><li>            CURLOPT_SSL_VERIFYHOST =&gt; <span class=""><span class="hljs-literal">false</span></span>,</li><li>            CURLOPT_SSL_VERIFYPEER =&gt; <span class=""><span class="hljs-literal">false</span></span>,</li><li>            CURLOPT_HTTP_VERSION =&gt; CURL_HTTP_VERSION_1_1,</li><li>            CURLOPT_POSTFIELDS =&gt; <span class="hljs-title function_ invoke__">http_build_query</span>(<span class=""><span class="hljs-variable">$data</span></span>),</li><li>            CURLOPT_HTTPHEADER =&gt; <span class=""><span class="hljs-keyword">array</span></span>(</li><li>                <span class=""><span class="hljs-string">'Content-Type: application/x-www-form-urlencoded'</span></span></li><li>            ),</li><li>        ));</li><li>        <span class=""><span class="hljs-variable">$response</span></span> = <span class="hljs-title function_ invoke__">curl_exec</span>(<span class=""><span class="hljs-variable">$curl</span></span>);</li><li>        <span class=""><span class="hljs-keyword">if</span></span> (<span class="hljs-title function_ invoke__">curl_error</span>(<span class=""><span class="hljs-variable">$curl</span></span>)) {</li><li>            <span class=""><span class="hljs-keyword">throw</span></span> <span class=""><span class="hljs-keyword">new</span></span> <span class="hljs-built_in">Exception</span>(<span class="hljs-title function_ invoke__">curl_error</span>(<span class=""><span class="hljs-variable">$curl</span></span>));</li><li>        }</li><li>        <span class="hljs-title function_ invoke__">curl_close</span>(<span class=""><span class="hljs-variable">$curl</span></span>);</li><li>        <span class=""><span class="hljs-variable">$result</span></span> = <span class="hljs-title function_ invoke__">json_decode</span>(<span class=""><span class="hljs-variable">$response</span></span>, <span class=""><span class="hljs-literal">true</span></span>);</li><li>        <span class="hljs-title function_ invoke__">var_dump</span>(<span class=""><span class="hljs-variable">$result</span></span>);</li><li>    }</li><li>}</li><li><span class=""><span class="hljs-variable">$get_token_info</span></span> = <span class=""><span class="hljs-keyword">new</span></span> <span class="hljs-title function_ invoke__">get_token_info</span>();</li><li><span class=""><span class="hljs-variable">$method</span></span> = <span class=""><span class="hljs-string">"external.hms.gs.getPlayerInfo"</span></span>; <span class=""><span class="hljs-comment">// 固定传入</span></span></li><li><span class=""><span class="hljs-variable">$accessToken</span></span> = <span class=""><span class="hljs-string">"xxxxx"</span></span>; <span class=""><span class="hljs-comment">// 请使用客户端Player对象中的AccessToken</span></span></li><li><span class=""><span class="hljs-variable">$get_token_info</span></span>-&gt;<span class="hljs-title function_ invoke__">call_https</span>(<span class=""><span class="hljs-variable">$method</span></span>, <span class=""><span class="hljs-variable">$accessToken</span></span>);</li></ol></pre></div></div></div><div class="prebox"><div _ngcontent-usb-c106="" class="highlight-div"><div _ngcontent-usb-c106="" class="highlight-div-header"><div _ngcontent-usb-c106="" class="highlight-div-header-left"><div _ngcontent-usb-c106="" class="handle-button expand-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usb-c106="" class="highlight-div-header-right"><div _ngcontent-usb-c106="" class="handle-button ai-button"></div><div _ngcontent-usb-c106="" class="handle-button line-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usb-c106="" class="handle-button theme-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usb-c106="" class="handle-button copy-button"><div _ngcontent-usb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usb-c106="" class="highlight-scroll-div"><pre class="python prettyprint linenums hljs language-python" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-keyword">from</span></span> typing <span class=""><span class="hljs-keyword">import</span></span> <span class="hljs-type">Any</span></li><li><span class=""><span class="hljs-keyword">import</span></span> requests</li><li><span class=""><span class="hljs-keyword">import</span></span> urllib.parse</li><li><span class=""><span class="hljs-keyword">class</span></span> <span class="hljs-title class_">GetTokenInfoSolution</span>:</li><li>    <span class=""><span class="hljs-keyword">def</span></span> <span class="hljs-title function_">get_token_info</span>(<span class=""><span class="hljs-params">self</span></span><span class="hljs-params">, method, accessToken</span>):</li><li>        url = <span class=""><span class="hljs-string">"https://jos-open-api.cloud.huawei.com/gameservice/api/gbClientApi"</span></span></li><li>        params: <span class=""><span class="hljs-built_in">dict</span></span>[<span class=""><span class="hljs-built_in">str</span></span>, <span class="hljs-type">Any</span>] = {</li><li>            <span class=""><span class="hljs-string">'method'</span></span>: method,</li><li>            <span class=""><span class="hljs-string">'accessToken'</span></span>: accessToken</li><li>        }</li><li>        encodedParams = urllib.parse.urlencode(params)</li><li>        headers = {</li><li>            <span class=""><span class="hljs-string">'Content-Type'</span></span>: <span class=""><span class="hljs-string">'application/x-www-form-urlencoded'</span></span></li><li>        }</li><li>        response = requests.post(url, headers=headers, data=encodedParams)</li><li>        <span class=""><span class="hljs-built_in">print</span></span>(response.text)</li><li><span class=""><span class="hljs-keyword">if</span></span> <span class="">__name__</span> == <span class=""><span class="hljs-string">"__main__"</span></span>:</li><li>    <span class=""><span class="hljs-comment"># 固定传入“external.hms.gs.getPlayerInfo”</span></span></li><li>    input_method = <span class=""><span class="hljs-string">'external.hms.gs.getPlayerInfo'</span></span></li><li>    <span class=""><span class="hljs-comment"># 请使用客户端Player对象中的AccessToken</span></span></li><li>    input_accessToken = <span class=""><span class="hljs-string">'xxx'</span></span></li><li>    function = GetTokenInfoSolution()</li><li>    function.get_token_info(input_method, input_accessToken)</li></ol></pre></div></div></div></div></div></div> </div> </div> <div></div></div>