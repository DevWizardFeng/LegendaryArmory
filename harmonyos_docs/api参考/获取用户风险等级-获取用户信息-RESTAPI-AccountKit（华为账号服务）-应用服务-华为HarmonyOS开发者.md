<h1 _ngcontent-dgw-c119="" class="doc-title ng-star-inserted" title="获取用户风险等级"> 获取用户风险等级 </h1>

<div _ngcontent-dgw-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">      <p>为了更安全的网络访问，请务必升级到TLS1.2版本。若使用协议是TLS1.0、TLS1.1或规定外的加密套件，可能无法正常访问华为账号服务。</p>      <p>关于TLS1.2协议及加密套件的信息，可以点击这里进行详细了解：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-common#section1329115361128">TLS协议及加密套件</a>。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="section1211262695115">功能介绍<i class="anchor-icon anchor-icon-link" anchorid="section1211262695115" tips="复制节点链接"></i></h2>          <p>当应用服务端需要<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/account-get-risklevel" target="_blank">获取风险等级</a>时，应用服务端向华为账号服务器调用该接口获取华为账号用户风险等级。</p>    </div>    <div class="tiledSection">     <h2 id="section1538865994615">场景描述<i class="anchor-icon anchor-icon-link" anchorid="section1538865994615" tips="复制节点链接"></i></h2>          <p>应用已经通过授权码（Authorization Code）获取到Access Token后，应用获取用户风险等级。</p>    </div>    <div class="tiledSection">     <h2 id="section74906714178">使用约束<i class="anchor-icon anchor-icon-link" anchorid="section74906714178" tips="复制节点链接"></i></h2>          <ul>      <li>需确保调用端网络正常。</li>      <li>应用使用此功能之前，需要完成riskLevel（获取用户风险等级）的scope权限申请，在获取Authorization Code时携带riskLevel（获取用户风险等级）的scope，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/account-get-risklevel-byquicklogin#section13466111683216" target="_blank">开发前提</a>。</li>     </ul>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>应用未申请riskLevel（获取用户风险等级）的scope权限，或获取Authorization Code时未携带riskLevel（获取用户风险等级）的scope，调用接口将返回错误，响应体中errCode=403。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="section2520125725115">接口原型<i class="anchor-icon anchor-icon-link" anchorid="section2520125725115" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table>               <tbody><tr>         <th class="firstcol" id="mcps1.3.5.2.1.3.1.1" width="18.740000000000002%">          <p><strong>承载协议</strong></p></th>         <td class="cellrowborder" width="81.26%">          <p>HTTPS POST</p></td>        </tr>        <tr>         <th class="firstcol" id="mcps1.3.5.2.1.3.2.1" width="18.740000000000002%">          <p><strong>接口方向</strong></p></th>         <td class="cellrowborder" width="81.26%">          <p><span style="color: rgb(36,39,40);">开发者服务器-</span><span style="color: rgb(36,39,40);">&gt;</span><span style="color: rgb(36,39,40);">华为账号服务器</span></p></td>        </tr>        <tr>         <th class="firstcol" id="mcps1.3.5.2.1.3.3.1" width="18.740000000000002%">          <p><strong>接口URL</strong></p></th>         <td class="cellrowborder" width="81.26%">          <p>https://account.cloud.huawei.com/user/getuserrisklevel</p></td>        </tr>        <tr>         <th class="firstcol" id="mcps1.3.5.2.1.3.4.1" width="18.740000000000002%">          <p><strong>数据格式</strong></p></th>         <td class="cellrowborder" width="81.26%">          <p>请求消息：Content-Type: application/json;charset=utf-8</p>          <p>响应消息：Content-Type: application/json;charset=utf-8</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section47171329481">请求参数<i class="anchor-icon anchor-icon-link" anchorid="section47171329481" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section2078014064020" class="firsth2">Request Header<i class="anchor-icon anchor-icon-link" anchorid="section2078014064020" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.1" width="20.562056205620564%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.2" width="19.781978197819782%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.3" width="22.492249224922492%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.4" width="37.163716371637165%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>Content-Type</p></td>         <td class="cellrowborder" width="19.781978197819782%">          <p>是</p></td>         <td class="cellrowborder" width="22.492249224922492%">          <p>String</p></td>         <td class="cellrowborder" width="37.163716371637165%">          <p>取值为：application/json;charset=utf-8。</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p>Request Body传参，请务必遵循此请求头格式，否则可能导致请求失败，具体传参方式可参考<a href="/consumer/cn/doc/harmonyos-references/account-api-getuserrisklevel#section1888515151299">示例代码</a>。</p>           </div></div></div></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section10980936104011">Request Query Parameter<i class="anchor-icon anchor-icon-link" anchorid="section10980936104011" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.1" width="20.562056205620564%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.2" width="8.66086608660866%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.3" width="12.56125612561256%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.4" width="58.21582158215821%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>clientID</p></td>         <td class="cellrowborder" width="8.66086608660866%">          <p>是</p></td>         <td class="cellrowborder" width="12.56125612561256%">          <p>String</p></td>         <td class="cellrowborder" width="58.21582158215821%">          <p>在创建应用后，由AppGallery Connect（简称AGC）为应用分配的唯一标识。参数取值详见<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-appinfo-0000001100014694" target="_blank">查看应用基本信息</a>中的<strong>OAuth 2.0客户端ID(凭据)-Client ID</strong>参数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>transactionID</p></td>         <td class="cellrowborder" width="8.66086608660866%">          <p>是</p></td>         <td class="cellrowborder" width="12.56125612561256%">          <p>String</p></td>         <td class="cellrowborder" width="58.21582158215821%">          <p>交易流水号，每个消息都需要带该字段；</p>          <p>生成规则：YYYYMMDDhhmmssxxxxxxxxxx，例如： 202502121546232352164151</p>          <p>其中：YYYYMMDDhhmmss：请求产生时间，14位；</p>          <p>xxxxxxxxxx：随机数，可变长，10至20位</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section10692630184016">Request Body<i class="anchor-icon anchor-icon-link" anchorid="section10692630184016" tips="复制节点链接"></i></h3>         </div>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.5.1.1" width="20.562056205620564%">         <p>参数</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.5.1.2" width="19.781978197819782%">         <p>是否必选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.5.1.3" width="21.04210421042104%">         <p>参数类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.5.1.4" width="38.613861386138616%">         <p>描述</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="20.562056205620564%">         <p>accessToken</p></td>        <td class="cellrowborder" width="19.781978197819782%">         <p>是</p></td>        <td class="cellrowborder" width="21.04210421042104%">         <p>String</p></td>        <td class="cellrowborder" width="38.613861386138616%">         <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-obtain-user-token">获取用户级凭证</a>获取的Access Token。获取凭证时Authorization Code需包含riskLevel scope的授权。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="20.562056205620564%">         <p>scene</p></td>        <td class="cellrowborder" width="19.781978197819782%">         <p>是</p></td>        <td class="cellrowborder" width="21.04210421042104%">         <p>String</p></td>        <td class="cellrowborder" width="38.613861386138616%">         <p>获取用户风险等级的业务场景</p>         <ul>          <li>registration：注册</li>          <li>marketing：营销活动</li>         </ul></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection">     <h2 id="section191878131473">请求示例<i class="anchor-icon anchor-icon-link" anchorid="section191878131473" tips="复制节点链接"></i></h2>          <p>请通过POST方式调用，示例如下：</p>     <div _ngcontent-dgw-c106="" class="highlight-div"><div _ngcontent-dgw-c106="" class="highlight-div-header"><div _ngcontent-dgw-c106="" class="highlight-div-header-left"><div _ngcontent-dgw-c106="" class="handle-button expand-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgw-c106="" class="highlight-div-header-right"><div _ngcontent-dgw-c106="" class="handle-button ai-button"></div><div _ngcontent-dgw-c106="" class="handle-button line-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgw-c106="" class="handle-button theme-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgw-c106="" class="handle-button copy-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">POST</span> /<span class="hljs-variable">user</span>/<span class="hljs-variable">getuserrisklevel</span>?<span class="hljs-variable">clientID</span>=<i><div class="varname_wrapper"><span class="varname"><span>&lt;</span><span><span class="hljs-title class_">clientID</span></span><span>&gt;</span></span></div></i>&amp;<span class="hljs-variable">transactionID</span>=<i><div class="varname_wrapper"><span class="varname"><span>&lt;</span><span><span class="hljs-title class_">transactionID</span></span><span>&gt;</span></span></div></i> <span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.1</span></li><li><span class="hljs-variable">Host</span>: <span class="hljs-title class_">account</span>.<span class="hljs-title class_">cloud</span>.<span class="hljs-title class_">huawei</span>.<span class="hljs-title class_">com</span></li><li><span class="hljs-variable">Content</span>-<span class="hljs-variable">Type</span>: <span class="hljs-title class_">application</span>/<span class="hljs-variable">json</span>;<span class="hljs-variable">charset</span>=<span class="hljs-variable">utf</span>-<span class="hljs-number">8</span></li><li>
</li><li>{<span class="hljs-string">"accessToken"</span>:<span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span><span class="hljs-string">&lt;</span></span><span><span class="hljs-string">Access Token</span></span><span><span class="hljs-string">&gt;</span></span></span></div></i><span class="hljs-string">"</span>, <span class="hljs-string">"scene"</span>:<span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span><span class="hljs-string">&lt;</span></span><span><span class="hljs-string">scene</span></span><span><span class="hljs-string">&gt;</span></span></span></div></i><span class="hljs-string">"</span>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section6936191411485">响应参数<i class="anchor-icon anchor-icon-link" anchorid="section6936191411485" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section7932127174018" class="firsth2">Response Header<i class="anchor-icon anchor-icon-link" anchorid="section7932127174018" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.2.1.5.1.1" width="20.562056205620564%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.2.1.5.1.2" width="19.781978197819782%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.2.1.5.1.3" width="22.492249224922492%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.2.1.5.1.4" width="37.163716371637165%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>Content-Type</p></td>         <td class="cellrowborder" width="19.781978197819782%">          <p>是</p></td>         <td class="cellrowborder" width="22.492249224922492%">          <p>String</p></td>         <td class="cellrowborder" width="37.163716371637165%">          <p>取值为：application/json;charset=utf-8。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section1994831118402">Response Body<i class="anchor-icon anchor-icon-link" anchorid="section1994831118402" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.2.1.5.1.1" width="20.562056205620564%">          <p><strong>参数</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.2.1.5.1.2" width="19.781978197819786%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.2.1.5.1.3" width="18.001800180018%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.2.1.5.1.4" width="41.65416541654166%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>errCode</p></td>         <td class="cellrowborder" width="19.781978197819786%">          <p>是</p></td>         <td class="cellrowborder" width="18.001800180018%">          <p>Int</p></td>         <td class="cellrowborder" width="41.65416541654166%">          <p>错误码，调用成功时返回0，调用失败时返回对应错误码。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>errMsg</p></td>         <td class="cellrowborder" width="19.781978197819786%">          <p>是</p></td>         <td class="cellrowborder" width="18.001800180018%">          <p>String</p></td>         <td class="cellrowborder" width="41.65416541654166%">          <p>错误描述，调用成功时返回空字符串，调用失败时返回对应描述。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>riskLevel</p></td>         <td class="cellrowborder" width="19.781978197819786%">          <p>是</p></td>         <td class="cellrowborder" width="18.001800180018%">          <p>Int</p></td>         <td class="cellrowborder" width="41.65416541654166%">          <p>风险等级(详见后文附表①)</p>          <ul>           <li>0：未发现显著风险</li>           <li>1：低风险</li>           <li>2：中风险</li>           <li>3：高风险</li>           <li>4：风险未知</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>riskTag</p></td>         <td class="cellrowborder" width="19.781978197819786%">          <p>否</p></td>         <td class="cellrowborder" width="18.001800180018%">          <p>String[]</p></td>         <td class="cellrowborder" width="41.65416541654166%">          <p>风险标签(详见后文附表②)</p></td>        </tr>             </tbody></table></div>     </div>     <p>附表①: 风险等级含义与建议处置方案</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.4.1.1" width="7.240724072407241%">          <p><strong><span style="color: rgb(73,73,73);">等级</span></strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.4.1.2" width="45.52455245524553%">          <p><strong><span style="color: rgb(73,73,73);">含义</span></strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.4.1.3" width="47.234723472347234%">          <p><strong><span style="color: rgb(73,73,73);">建议处置方案</span></strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="7.240724072407241%">          <p><span style="color: rgb(73,73,73);">0</span></p></td>         <td class="cellrowborder" width="45.52455245524553%">          <p><span style="color: rgb(73,73,73);">未发现显著风险项。例如通过合法途径注册，正常使用华为手机，无批量操作、使用自动机、养号等异常行为的场景。</span></p></td>         <td class="cellrowborder" width="47.234723472347234%">          <p><span style="color: rgb(73,73,73);">建议确认无风险后放通</span></p></td>        </tr>        <tr>         <td class="cellrowborder" width="7.240724072407241%">          <p><span style="color: rgb(73,73,73);">1</span></p></td>         <td class="cellrowborder" width="45.52455245524553%">          <p><span style="color: rgb(73,73,73);">低风险。发现风险因素，结合总体评分后风险较低。</span></p></td>         <td class="cellrowborder" width="47.234723472347234%">          <p><span style="color: rgb(73,73,73);">建议进行简单验证（如验证码、短信等），或人工审核</span></p></td>        </tr>        <tr>         <td class="cellrowborder" width="7.240724072407241%">          <p><span style="color: rgb(73,73,73);">2</span></p></td>         <td class="cellrowborder" width="45.52455245524553%">          <p><span style="color: rgb(73,73,73);">中风险。发现风险因素，结合总体评分后风险中等。</span></p></td>         <td class="cellrowborder" width="47.234723472347234%">          <p><span style="color: rgb(73,73,73);">建议根据业务场景采取一定措施规避伤害。例如，营销活动可降低高等级奖励的概率、打榜类活动对此类投票降低权重、登录注册要求二次验证等。</span></p></td>        </tr>        <tr>         <td class="cellrowborder" width="7.240724072407241%">          <p><span style="color: rgb(73,73,73);">3</span></p></td>         <td class="cellrowborder" width="45.52455245524553%">          <p><span style="color: rgb(73,73,73);">高风险。发现风险因素，结合总体评分后风险较高。</span></p></td>         <td class="cellrowborder" width="47.234723472347234%">          <p><span style="color: rgb(73,73,73);">建议业务逻辑直接拦截。例如，红包类活动返回不中奖或最小额红包、打榜类活动不计算票数、登录</span><span style="color: rgb(73,73,73);">/</span><span style="color: rgb(73,73,73);">注册操作要求二次验证、高危业务可选择限制本次操作。</span></p></td>        </tr>        <tr>         <td class="cellrowborder" width="7.240724072407241%">          <p><span style="color: rgb(73,73,73);">4</span></p></td>         <td class="cellrowborder" width="45.52455245524553%">          <p><span style="color: rgb(73,73,73);">风险未知。暂无明确风险等级</span></p></td>         <td class="cellrowborder" width="47.234723472347234%">          <p><span style="color: rgb(73,73,73);">建议结合账号历史行为及业务场景做出最终决策</span></p></td>        </tr>             </tbody></table></div>     </div>     <p>附表②: 风险标签及解释</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.4.1.1" width="17.261726172617262%">          <p><strong>riskTag</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.4.1.2" width="30.323032303230324%">          <p><strong><span style="color: rgb(73,73,73);">名称</span></strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.4.1.3" width="52.415241524152414%">          <p><strong><span style="color: rgb(73,73,73);">解释</span></strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="17.261726172617262%">          <p>spamMailbox</p></td>         <td class="cellrowborder" width="30.323032303230324%">          <p>绑定垃圾邮箱</p></td>         <td class="cellrowborder" width="52.415241524152414%">          <p>疑似绑定垃圾邮箱</p></td>        </tr>        <tr>         <td class="cellrowborder" width="17.261726172617262%">          <p>riskPhoneNumber</p></td>         <td class="cellrowborder" width="30.323032303230324%">          <p>绑定卡商手机号</p></td>         <td class="cellrowborder" width="52.415241524152414%">          <p>疑似绑定卡商手机号</p></td>        </tr>        <tr>         <td class="cellrowborder" width="17.261726172617262%">          <p>riskDevice</p></td>         <td class="cellrowborder" width="30.323032303230324%">          <p><span style="color: rgb(73,73,73);">使用风险设备</span></p></td>         <td class="cellrowborder" width="52.415241524152414%">          <p>疑似使用自动机、群控等异常设备注册或登录</p></td>        </tr>        <tr>         <td class="cellrowborder" width="17.261726172617262%">          <p><span style="color: rgb(73,73,73);">ipCluster</span></p></td>         <td class="cellrowborder" width="30.323032303230324%">          <p><span style="color: rgb(73,73,73);">IP</span><span style="color: rgb(73,73,73);">聚集</span></p></td>         <td class="cellrowborder" width="52.415241524152414%">          <p><span style="color: rgb(73,73,73);">疑似半年内存在</span><span style="color: rgb(73,73,73);">IP</span><span style="color: rgb(73,73,73);">的聚集性异常</span></p></td>        </tr>        <tr>         <td class="cellrowborder" width="17.261726172617262%">          <p><span style="color: rgb(73,73,73);">deviceCluster</span></p></td>         <td class="cellrowborder" width="30.323032303230324%">          <p><span style="color: rgb(73,73,73);">设备聚集</span></p></td>         <td class="cellrowborder" width="52.415241524152414%">          <p><span style="color: rgb(73,73,73);">疑似半年内存在设备的聚集性异常</span></p></td>        </tr>        <tr>         <td class="cellrowborder" width="17.261726172617262%">          <p>batchBehavior</p></td>         <td class="cellrowborder" width="30.323032303230324%">          <p>批量操作</p></td>         <td class="cellrowborder" width="52.415241524152414%">          <p>疑似半年内与大量垃圾账号存在批量协同行为轨迹</p></td>        </tr>        <tr>         <td class="cellrowborder" width="17.261726172617262%">          <p>illegalLogin</p></td>         <td class="cellrowborder" width="30.323032303230324%">          <p>非法登录</p></td>         <td class="cellrowborder" width="52.415241524152414%">          <p>当前华为账号疑似通过非法手段登录</p></td>        </tr>        <tr>         <td class="cellrowborder" width="17.261726172617262%">          <p>activityFraud</p></td>         <td class="cellrowborder" width="30.323032303230324%">          <p><span style="color: rgb(73,73,73);">恶意行为</span><span style="color: rgb(73,73,73);">-</span><span style="color: rgb(73,73,73);">薅羊毛</span></p></td>         <td class="cellrowborder" width="52.415241524152414%">          <p><span style="color: rgb(73,73,73);">疑似半年内在营销活动中存在薅羊毛的行为</span></p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section2409115094716">响应示例<i class="anchor-icon anchor-icon-link" anchorid="section2409115094716" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section135361410417" class="firsth2">请求成功时<i class="anchor-icon anchor-icon-link" anchorid="section135361410417" tips="复制节点链接"></i></h3>          <div _ngcontent-dgw-c106="" class="highlight-div"><div _ngcontent-dgw-c106="" class="highlight-div-header"><div _ngcontent-dgw-c106="" class="highlight-div-header-left"><div _ngcontent-dgw-c106="" class="handle-button expand-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgw-c106="" class="highlight-div-header-right"><div _ngcontent-dgw-c106="" class="handle-button ai-button"></div><div _ngcontent-dgw-c106="" class="handle-button line-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgw-c106="" class="handle-button theme-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgw-c106="" class="handle-button copy-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgw-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" data-highlighted="yes"><ol class="linenums"><li>HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK</li><li>Content-Type<span class="hljs-punctuation">:</span> application/json;charset=utf<span class="hljs-number">-8</span></li><li>
</li><li><span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"errCode"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"errMsg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"riskLevel"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"riskTag"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>        <span class="hljs-string">"spamMailbox"</span></li><li>    <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section101521611542">请求失败时<i class="anchor-icon anchor-icon-link" anchorid="section101521611542" tips="复制节点链接"></i></h3>          <div _ngcontent-dgw-c106="" class="highlight-div"><div _ngcontent-dgw-c106="" class="highlight-div-header"><div _ngcontent-dgw-c106="" class="highlight-div-header-left"><div _ngcontent-dgw-c106="" class="handle-button expand-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgw-c106="" class="highlight-div-header-right"><div _ngcontent-dgw-c106="" class="handle-button ai-button"></div><div _ngcontent-dgw-c106="" class="handle-button line-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgw-c106="" class="handle-button theme-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgw-c106="" class="handle-button copy-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgw-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" data-highlighted="yes"><ol class="linenums"><li>HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK</li><li>Content-Type<span class="hljs-punctuation">:</span> application/json;charset=utf<span class="hljs-number">-8</span></li><li>
</li><li><span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"errCode"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">403</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"errMsg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"no permission"</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1888515151299">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section1888515151299" tips="复制节点链接"></i></h2>          <p>Java示例代码如下，运行前需要进行<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-common#section444143185314">示例代码环境配置</a>：</p>     <div _ngcontent-dgw-c106="" class="highlight-div"><div _ngcontent-dgw-c106="" class="highlight-div-header"><div _ngcontent-dgw-c106="" class="highlight-div-header-left"><div _ngcontent-dgw-c106="" class="handle-button expand-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgw-c106="" class="highlight-div-header-right"><div _ngcontent-dgw-c106="" class="handle-button ai-button"></div><div _ngcontent-dgw-c106="" class="handle-button line-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgw-c106="" class="handle-button theme-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgw-c106="" class="handle-button copy-button"><div _ngcontent-dgw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgw-c106="" class="highlight-scroll-div"><pre class="java prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> com.alibaba.fastjson2.JSONArray;</li><li><span class="hljs-keyword">import</span> com.alibaba.fastjson2.JSONObject;</li><li><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;</li><li><span class="hljs-keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;</li><li><span class="hljs-keyword">import</span> org.apache.http.client.methods.HttpPost;</li><li><span class="hljs-keyword">import</span> org.huawei.uniaccount.util.CallUtils;</li><li><span class="hljs-keyword">import</span> java.io.IOException;</li><li><span class="hljs-keyword">import</span> java.util.HashMap;</li><li><span class="hljs-keyword">import</span> java.util.Map;</li><li><span class="hljs-keyword">import</span> java.util.Objects;</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 获取用户风险等级</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-meta">@Slf4j</span></li><li><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GetUserRiskLevelDemo</span> {</li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {</li><li>        <span class="hljs-comment">// 获取用户风险等级的接口URL</span></li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"https://account.cloud.huawei.com/user/getuserrisklevel"</span>;</li><li>        <span class="hljs-comment">// 替换为您实际的Client ID</span></li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">clientID</span> <span class="hljs-operator">=</span> <span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span><span class="hljs-string">&lt;</span></span><span><span class="hljs-string">Client ID</span></span><span><span class="hljs-string">&gt;</span></span></span></div></i><span class="hljs-string">"</span>;</li><li>        <span class="hljs-comment">// 替换为您实际的transactionID</span></li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">transactionID</span> <span class="hljs-operator">=</span> <span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span><span class="hljs-string">&lt;</span></span><span><span class="hljs-string">transactionID</span></span><span><span class="hljs-string">&gt;</span></span></span></div></i><span class="hljs-string">"</span>;</li><li>        <span class="hljs-comment">// 替换为您实际的获取到的用户级凭证Access Token</span></li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">accessToken</span> <span class="hljs-operator">=</span> <span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span><span class="hljs-string">&lt;</span></span><span><span class="hljs-string">Access Token</span></span><span><span class="hljs-string">&gt;</span></span></span></div></i><span class="hljs-string">"</span>;</li><li>        <span class="hljs-comment">// 替换为您实际的scene</span></li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">scene</span> <span class="hljs-operator">=</span> <span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">&lt;scene&gt;</span></span></div></i><span class="hljs-string">"</span>;</li><li>        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> getUserRiskLevel(url, clientID, transactionID, accessToken, scene);</li><li>        <span class="hljs-comment">// 解析获取errCode</span></li><li>        <span class="hljs-type">Integer</span> <span class="hljs-variable">errCode</span> <span class="hljs-operator">=</span> result.getInteger(<span class="hljs-string">"errCode"</span>);</li><li>        <span class="hljs-comment">// 解析获取errMsg</span></li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">errMsg</span> <span class="hljs-operator">=</span> result.getString(<span class="hljs-string">"errMsg"</span>);</li><li>        <span class="hljs-comment">// 解析获取riskLevel</span></li><li>        <span class="hljs-type">Integer</span> <span class="hljs-variable">riskLevel</span> <span class="hljs-operator">=</span> result.getInteger(<span class="hljs-string">"riskLevel"</span>);</li><li>        <span class="hljs-comment">// 解析获取riskTag</span></li><li>        <span class="hljs-type">JSONArray</span> <span class="hljs-variable">riskTag</span> <span class="hljs-operator">=</span> result.getJSONArray(<span class="hljs-string">"riskTag"</span>);</li><li>
</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> JSONObject <span class="hljs-title function_">getUserRiskLevel</span><span class="hljs-params">(String url, String clientID, String transactionID,</span></li><li><span class="hljs-params">        String accessToken, String scene)</span> <span class="hljs-keyword">throws</span> IOException {</li><li>        <span class="hljs-type">HttpPost</span> <span class="hljs-variable">httpPost</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpPost</span>(url + <span class="hljs-string">"?"</span> + <span class="hljs-string">"clientID="</span> + clientID + <span class="hljs-string">"&amp;transactionID="</span> + transactionID);</li><li>        Map&lt;String, String&gt; reqBody = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();</li><li>        reqBody.put(<span class="hljs-string">"accessToken"</span>, accessToken);</li><li>        reqBody.put(<span class="hljs-string">"scene"</span>, scene);</li><li>        httpPost.setEntity(CallUtils.wrapJsonEntity(reqBody));</li><li>        <span class="hljs-keyword">return</span> CallUtils.toJsonObject(CallUtils.remoteCall(httpPost, (CloseableHttpResponse response, String rawBody) -&gt; {</li><li>            <span class="hljs-type">int</span> <span class="hljs-variable">statusCode</span> <span class="hljs-operator">=</span> response.getStatusLine().getStatusCode();</li><li>            <span class="hljs-comment">// http状态码不是200，请求失败</span></li><li>            <span class="hljs-keyword">if</span> (statusCode != <span class="hljs-number">200</span>) {</li><li>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IOException</span>(<span class="hljs-string">"call failed! http status code: "</span> + statusCode + <span class="hljs-string">", response data: "</span> + rawBody);</li><li>            }</li><li>            <span class="hljs-comment">// http状态码为200，解析响应的body，判断业务错误码</span></li><li>            <span class="hljs-type">JSONObject</span> <span class="hljs-variable">errorResponseBody</span> <span class="hljs-operator">=</span> CallUtils.toJsonObject(rawBody);</li><li>            <span class="hljs-comment">// 错误码</span></li><li>            <span class="hljs-type">Integer</span> <span class="hljs-variable">errCode</span> <span class="hljs-operator">=</span> errorResponseBody.getInteger(<span class="hljs-string">"errCode"</span>);</li><li>            <span class="hljs-comment">// errCode为0表示成功，非0表示失败</span></li><li>            <span class="hljs-keyword">if</span> (Objects.nonNull(errCode) &amp;&amp; errCode != <span class="hljs-number">0</span>) {</li><li>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IOException</span>(<span class="hljs-string">"call failed! http status code: "</span> + statusCode + <span class="hljs-string">", response data: "</span> + rawBody);</li><li>            }</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;</li><li>        }));</li><li>    }</li><li>}</li><li>
</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section15782984912">错误码<i class="anchor-icon anchor-icon-link" anchorid="section15782984912" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.2.1.4.1.1" width="19.81%">          <p>HTTP响应码</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.2.1.4.1.2" width="37.93%">          <p>描述</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.2.1.4.1.3" width="42.26%">          <p>解决方法</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.81%">          <p>200</p></td>         <td class="cellrowborder" width="37.93%">          <p>仅表示本次接口调用成功，实际业务处理结果需要通过<strong>Response Body</strong>中的<strong>errCode</strong>进行判断。</p></td>         <td class="cellrowborder" width="42.26%">          <p>-</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.81%">          <p>400</p></td>         <td class="cellrowborder" width="37.93%">          <p>参数错误。</p></td>         <td class="cellrowborder" width="42.26%">          <p>请根据文档排查请求参数是否符合规范。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.81%">          <p>403</p></td>         <td class="cellrowborder" width="37.93%">          <p>无权限访问。</p></td>         <td class="cellrowborder" width="42.26%">          <p>请检查调用环境及配置。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.81%">          <p>404</p></td>         <td class="cellrowborder" width="37.93%">          <p>找不到服务。</p></td>         <td class="cellrowborder" width="42.26%">          <p>请检查请求URI是否正确。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.81%">          <p>405</p></td>         <td class="cellrowborder" width="37.93%">          <p>不支持的http请求method。</p></td>         <td class="cellrowborder" width="42.26%">          <p>请检查http请求method是否与接口说明一致。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.81%">          <p>415</p></td>         <td class="cellrowborder" width="37.93%">          <p>不支持的媒体类型</p></td>         <td class="cellrowborder" width="42.26%">          <p>请检查http请求的contentType是否与接口说明一致。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.81%">          <p>500</p></td>         <td class="cellrowborder" width="37.93%">          <p>服务内部错误。</p></td>         <td class="cellrowborder" width="42.26%">          <p>请通过<a href="https://developer.huawei.com/consumer/cn/support/feedback/#/" target="_blank">在线提单</a>提交问题。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.81%">          <p>502</p></td>         <td class="cellrowborder" width="37.93%">          <p>请求连接异常，常见于网络状况不稳定。</p></td>         <td class="cellrowborder" width="42.26%">          <p>建议稍后重试，若仍无法解决，请通过<a href="https://developer.huawei.com/consumer/cn/support/feedback/#/" target="_blank">在线提单</a>提交问题。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.81%">          <p>504</p></td>         <td class="cellrowborder" width="37.93%">          <p>请求连接超时，常见于网络状况不稳定。</p></td>         <td class="cellrowborder" width="42.26%">          <p>建议稍后重试，若仍无法解决，请通过<a href="https://developer.huawei.com/consumer/cn/support/feedback/#/" target="_blank">在线提单</a>提交问题。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.81%">          <p>590</p></td>         <td class="cellrowborder" width="37.93%">          <p>服务内部错误。</p></td>         <td class="cellrowborder" width="42.26%">          <p>请通过<a href="https://developer.huawei.com/consumer/cn/support/feedback/#/" target="_blank">在线提单</a>提交问题。</p></td>        </tr>             </tbody></table></div>     </div>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.3.1.4.1.1" width="21.38%">          <p>errCode</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.3.1.4.1.2" width="39.2%">          <p>描述</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.3.1.4.1.3" width="39.42%">          <p>解决方法</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21.38%">          <p>6</p></td>         <td class="cellrowborder" width="39.2%">          <p>Access Token无效或已过期。</p></td>         <td class="cellrowborder" width="39.42%">          <p>请重新获取新的access_token。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.38%">          <p>403</p></td>         <td class="cellrowborder" width="39.2%">          <p>无权访问</p></td>         <td class="cellrowborder" width="39.42%">          <p>请前往AppGallery Connect（简称AGC）为应用申请开放权限，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/account-config-permissions" target="_blank">申请账号权限</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.38%">          <p>503</p></td>         <td class="cellrowborder" width="39.2%">          <p>触发系统流控。</p></td>         <td class="cellrowborder" width="39.42%">          <p>请稍后重试。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.38%">          <p>70001201</p></td>         <td class="cellrowborder" width="39.2%">          <p>请求参数错误</p></td>         <td class="cellrowborder" width="39.42%">          <p>修改请求url或者请求体中的参数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.38%">          <p>70001402</p></td>         <td class="cellrowborder" width="39.2%">          <p>系统鉴权错误。</p></td>         <td class="cellrowborder" width="39.42%">          <p>鉴权系统异常，若重试无法解决，请通过<a href="https://developer.huawei.com/consumer/cn/support/feedback/#/" target="_blank">在线提单</a>提交问题。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.38%">          <p>70020002</p></td>         <td class="cellrowborder" width="39.2%">          <p>接口内部超时</p></td>         <td class="cellrowborder" width="39.42%">          <p>稍后重试。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.38%">          <p>70001401</p></td>         <td class="cellrowborder" width="39.2%">          <p>接口内部错误</p></td>         <td class="cellrowborder" width="39.42%">          <p>根据返回的错误描述进行处理，若仍无法解决，请通过<a href="https://developer.huawei.com/consumer/cn/support/feedback/#/" target="_blank">在线提单</a>提交问题。</p></td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>