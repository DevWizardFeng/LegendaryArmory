<h1 _ngcontent-lrj-c119="" class="doc-title ng-star-inserted" title="订阅确认发货"> 订阅确认发货 </h1>

<div _ngcontent-lrj-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section1950214943118">功能介绍<i class="anchor-icon anchor-icon-link" anchorid="section1950214943118" tips="复制节点链接"></i></h2>          <p>此接口用于确认购买的自动续期订阅商品已经发放权益。</p>    </div>    <div class="tiledSection">     <h2 id="section1503119153112">场景描述<i class="anchor-icon anchor-icon-link" anchorid="section1503119153112" tips="复制节点链接"></i></h2>          <p>开发者服务器收到IAP服务器关键事件通知后，调用订阅状态查询接口获取订阅的最新状态，再根据订阅状态发放权益，具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/iap-delivering-subscriptions#section1880231055910" target="_blank">确保权益发放</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>一个购买订单号ID（purchaseOrderId）只可以发货一次，请勿重复发货。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="section127414615399">接口原型<i class="anchor-icon anchor-icon-link" anchorid="section127414615399" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table>               <tbody><tr>         <th class="firstcol" id="mcps1.3.3.2.1.3.1.1" width="20%">          <p>承载协议</p></th>         <td class="cellrowborder" width="80%">          <p>HTTPS POST</p></td>        </tr>        <tr>         <th class="firstcol" id="mcps1.3.3.2.1.3.2.1" width="20%">          <p>接口方向</p></th>         <td class="cellrowborder" width="80%">          <p>开发者服务器 -&gt; IAP服务器</p></td>        </tr>        <tr>         <th class="firstcol" id="mcps1.3.3.2.1.3.3.1" width="20%">          <p>接口URL</p></th>         <td class="cellrowborder" width="80%">          <p>{rootUrl}/subscription/harmony/v1/application/purchase/shipped/confirm</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p>rootUrl：具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-rest-common-statement#section11387155610549">站点信息</a>。</p>           </div></div></div></td>        </tr>        <tr>         <th class="firstcol" id="mcps1.3.3.2.1.3.4.1" width="20%">          <p>数据格式</p></th>         <td class="cellrowborder" width="80%">          <p>请求消息：Content-Type: application/json;charset=UTF-8</p>          <p>响应消息：Content-Type: application/json;charset=UTF-8</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1854194512114">请求参数<i class="anchor-icon anchor-icon-link" anchorid="section1854194512114" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section394182122312" class="firsth2">Request Header<i class="anchor-icon anchor-icon-link" anchorid="section394182122312" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.5.1.1" width="20%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.5.1.2" width="15%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.5.1.3" width="15%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.5.1.4" width="50%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>Content-Type</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>取值为：application/json;charset=UTF-8</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>Authorization</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>认证信息，使用JWT进行鉴权，具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-jwt-description#section11166125713715">Authorization说明</a>。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section1324816375233">Request Body<i class="anchor-icon anchor-icon-link" anchorid="section1324816375233" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.1" width="20%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.2" width="15%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.3" width="15%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.4" width="50%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>purchaseOrderId</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>具体一笔订单中对应的购买订单号ID。最大长度256。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>purchaseToken</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>商品的购买Token，发起购买和查询订单信息均会返回。最大长度256。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section86425305253">请求示例<i class="anchor-icon anchor-icon-link" anchorid="section86425305253" tips="复制节点链接"></i></h2>          <p>更多语言及详细的代码示例，请参考<strong><a href="https://gitcode.com/HarmonyOS_Samples/iapkit-sample-serverdemo" target="_blank">IAP Kit-Sample-ServerDemo</a></strong>。</p>     <div _ngcontent-lrj-c106="" class="highlight-div"><div _ngcontent-lrj-c106="" class="highlight-div-header"><div _ngcontent-lrj-c106="" class="highlight-div-header-left"><div _ngcontent-lrj-c106="" class="handle-button expand-button"><div _ngcontent-lrj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lrj-c106="" class="highlight-div-header-right"><div _ngcontent-lrj-c106="" class="handle-button ai-button"></div><div _ngcontent-lrj-c106="" class="handle-button line-button"><div _ngcontent-lrj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lrj-c106="" class="handle-button theme-button"><div _ngcontent-lrj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lrj-c106="" class="handle-button copy-button"><div _ngcontent-lrj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lrj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">POST</span> /<span class="hljs-variable">subscription</span>/<span class="hljs-variable">harmony</span>/<span class="hljs-variable">v1</span>/<span class="hljs-variable">application</span>/<span class="hljs-variable">purchase</span>/<span class="hljs-variable">shipped</span>/<span class="hljs-variable">confirm</span></li><li><span class="hljs-variable">Content</span>-<span class="hljs-variable">Type</span>: <span class="hljs-title class_">application</span>/<span class="hljs-variable">json</span>;<span class="hljs-variable">charset</span>=<span class="hljs-variable">UTF</span>-<span class="hljs-number">8</span></li><li><span class="hljs-variable">Authorization</span>：<span class="hljs-variable">Bearer</span> ***.***.***</li><li><span class="hljs-variable">Accept</span>: <span class="hljs-title class_">application</span>/<span class="hljs-variable">json</span></li><li>{</li><li>  <span class="hljs-string">"purchaseToken"</span>: <span class="hljs-string">"***.*.***"</span>,</li><li>  <span class="hljs-string">"purchaseOrderId"</span>: <span class="hljs-string">"***.***"</span></li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section514779154018">响应参数<i class="anchor-icon anchor-icon-link" anchorid="section514779154018" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section964441242415" class="firsth2">Response Header<i class="anchor-icon anchor-icon-link" anchorid="section964441242415" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.1" width="20%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.2" width="15%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.3" width="15%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.5.1.4" width="50%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>Content-Type</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>取值为：application/json;charset=UTF-8</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section155791831182420">Response Body<i class="anchor-icon anchor-icon-link" anchorid="section155791831182420" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.1" width="20%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.2" width="15%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.3" width="15%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.2.1.5.1.4" width="50%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>responseCode</p></td>         <td class="cellrowborder" width="15%">          <p>是</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>返回码。</p>          <ul>           <li>0：成功。</li>           <li>其他：失败，具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-server-error-code">错误码</a>。</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>responseMessage</p></td>         <td class="cellrowborder" width="15%">          <p>否</p></td>         <td class="cellrowborder" width="15%">          <p>String</p></td>         <td class="cellrowborder" width="50%">          <p>响应描述。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section184174571403">响应示例<i class="anchor-icon anchor-icon-link" anchorid="section184174571403" tips="复制节点链接"></i></h2>          <div _ngcontent-lrj-c106="" class="highlight-div"><div _ngcontent-lrj-c106="" class="highlight-div-header"><div _ngcontent-lrj-c106="" class="highlight-div-header-left"><div _ngcontent-lrj-c106="" class="handle-button expand-button"><div _ngcontent-lrj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lrj-c106="" class="highlight-div-header-right"><div _ngcontent-lrj-c106="" class="handle-button ai-button"></div><div _ngcontent-lrj-c106="" class="handle-button line-button"><div _ngcontent-lrj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lrj-c106="" class="handle-button theme-button"><div _ngcontent-lrj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lrj-c106="" class="handle-button copy-button"><div _ngcontent-lrj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lrj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.2</span> <span class="hljs-number">200</span> <span class="hljs-variable">OK</span></li><li><span class="hljs-variable">Content</span>-<span class="hljs-variable">Type</span>: <span class="hljs-title class_">application</span>/<span class="hljs-variable">json</span>;<span class="hljs-variable">charset</span>=<span class="hljs-variable">UTF</span>-<span class="hljs-number">8</span></li><li>{</li><li>  <span class="hljs-string">"responseCode"</span>: <span class="hljs-string">"0"</span></li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>