<h1 _ngcontent-dyw-c119="" class="doc-title ng-star-inserted" title="通用事件"> 通用事件 </h1>

<div _ngcontent-dyw-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>从API version 4开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="事件说明" device-type="phone,2in1,tablet,wearable,tv">事件说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="事件说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><ul>      <li>       <p>事件绑定在组件上，当组件达到事件触发条件时，会执行JS中对应的事件回调函数，实现页面UI视图和页面JS逻辑层的交互。</p></li>      <li>       <p>事件回调函数中通过参数可以携带额外的信息，如组件上的数据对象dataset，事件特有的回调参数。</p></li>     </ul>     <p>相对于私有事件，大部分组件都可以绑定如下事件。</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.6.1.2" width="20%">参数</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.6.1.3" width="20%">描述</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.6.1.4" width="20%">是否支持冒泡</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.6.1.5" width="20%">是否支持捕获</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">touchstart</td>         <td class="cellrowborder" width="20%">TouchEvent</td>         <td class="cellrowborder" width="20%">手指刚触摸屏幕时触发该事件。TouchEvent具体可参考表2。</td>         <td class="cellrowborder" width="20%">是<sup>5+</sup></td>         <td class="cellrowborder" width="20%">是<sup>5+</sup></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">touchmove</td>         <td class="cellrowborder" width="20%">TouchEvent</td>         <td class="cellrowborder" width="20%">手指触摸屏幕后移动时触发该事件。</td>         <td class="cellrowborder" width="20%">是<sup>5+</sup></td>         <td class="cellrowborder" width="20%">是<sup>5+</sup></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">touchcancel</td>         <td class="cellrowborder" width="20%">TouchEvent</td>         <td class="cellrowborder" width="20%">手指触摸屏幕中动作被打断时触发该事件。</td>         <td class="cellrowborder" width="20%">是<sup>5+</sup></td>         <td class="cellrowborder" width="20%">是<sup>5+</sup></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">touchend</td>         <td class="cellrowborder" width="20%">TouchEvent</td>         <td class="cellrowborder" width="20%">手指触摸结束离开屏幕时触发该事件。</td>         <td class="cellrowborder" width="20%">是<sup>5+</sup></td>         <td class="cellrowborder" width="20%">是<sup>5+</sup></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">click</td>         <td class="cellrowborder" width="20%">BaseEvent</td>         <td class="cellrowborder" width="20%">点击动作触发该事件。</td>         <td class="cellrowborder" width="20%">是<sup>6+</sup></td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">doubleclick<sup>7+</sup></td>         <td class="cellrowborder" width="20%">BaseEvent</td>         <td class="cellrowborder" width="20%">双击动作触发该事件</td>         <td class="cellrowborder" width="20%">          <p>否</p>          <p>从API Version 9 开始支持冒泡。</p></td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">longpress</td>         <td class="cellrowborder" width="20%">BaseEvent</td>         <td class="cellrowborder" width="20%">长按动作触发该事件。</td>         <td class="cellrowborder" width="20%">          <p>否</p>          <p>从API Version 9 开始支持冒泡。</p></td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">swipe<sup>5+</sup></td>         <td class="cellrowborder" width="20%">SwipeEvent</td>         <td class="cellrowborder" width="20%">组件上快速滑动后触发该事件。 SwipeEvent具体可参考表4 。</td>         <td class="cellrowborder" width="20%">          <p>否</p>          <p>从API Version 9 开始支持冒泡。</p></td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">attached<sup>6+</sup></td>         <td class="cellrowborder" width="20%">-</td>         <td class="cellrowborder" width="20%">当前组件节点挂载在渲染树后触发。</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">detached<sup>6+</sup></td>         <td class="cellrowborder" width="20%">-</td>         <td class="cellrowborder" width="20%">当前组件节点从渲染树中移除后触发。</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">pinchstart<sup>7+</sup></td>         <td class="cellrowborder" width="20%">PinchEvent</td>         <td class="cellrowborder" width="20%">          <p>手指开始执行捏合操作时触发该事件。</p>          <p>PinchEvent具体可参考表5。</p></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">pinchupdate<sup>7+</sup></td>         <td class="cellrowborder" width="20%">PinchEvent</td>         <td class="cellrowborder" width="20%">手指执行捏合操作过程中触发该事件。</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">pinchend<sup>7+</sup></td>         <td class="cellrowborder" width="20%">PinchEvent</td>         <td class="cellrowborder" width="20%">手指捏合操作结束离开屏幕时触发该事件。</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">pinchcancel<sup>7+</sup></td>         <td class="cellrowborder" width="20%">PinchEvent</td>         <td class="cellrowborder" width="20%">手指捏合操作被打断时触发该事件。</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">dragstart<sup>7+</sup></td>         <td class="cellrowborder" width="20%">DragEvent</td>         <td class="cellrowborder" width="20%">          <p>用户开始拖拽时触发该事件。</p>          <p>DragEvent具体可参考表6。</p></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">drag<sup>7+</sup></td>         <td class="cellrowborder" width="20%">DragEvent</td>         <td class="cellrowborder" width="20%">拖拽过程中触发该事件。</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">dragend<sup>7+</sup></td>         <td class="cellrowborder" width="20%">DragEvent</td>         <td class="cellrowborder" width="20%">用户拖拽完成后触发。</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">dragenter<sup>7+</sup></td>         <td class="cellrowborder" width="20%">DragEvent</td>         <td class="cellrowborder" width="20%">进入释放目标时触发该事件。</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">dragover<sup>7+</sup></td>         <td class="cellrowborder" width="20%">DragEvent</td>         <td class="cellrowborder" width="20%">在释放目标内拖动时触发。</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">dragleave<sup>7+</sup></td>         <td class="cellrowborder" width="20%">DragEvent</td>         <td class="cellrowborder" width="20%">离开释放目标区域时触发。</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">drop<sup>7+</sup></td>         <td class="cellrowborder" width="20%">DragEvent</td>         <td class="cellrowborder" width="20%">在可释放目标区域内释放时触发。</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>除上述事件外，其他事件均为非冒泡事件，如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-components-basic-input#事件">input的change事件</a>，详见各个组件。</p>      </div></div></div>     <p><strong>表1</strong> BaseEvent对象属性列表</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.7.1.4.1.1" width="33.33333333333333%">属性</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.7.1.4.1.2" width="33.33333333333333%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.7.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">type</td>         <td class="cellrowborder" width="33.33333333333333%">string</td>         <td class="cellrowborder" width="33.33333333333333%">当前事件的类型，比如click、longpress等。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">timestamp</td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">该事件触发时的时间戳。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">deviceId<sup>8+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">触发该事件的设备ID信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">target<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/js-components-common-events#target对象6">Target</a></td>         <td class="cellrowborder" width="33.33333333333333%">触发该事件的目标对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>表2</strong> TouchEvent对象属性列表(继承BaseEvent)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.9.1.4.1.1" width="33.33333333333333%">属性</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.9.1.4.1.2" width="33.33333333333333%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.9.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">touches</td>         <td class="cellrowborder" width="33.33333333333333%">Array&lt;TouchInfo&gt;</td>         <td class="cellrowborder" width="33.33333333333333%">触摸事件时的属性集合，包含屏幕触摸点的信息数组。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">changedTouches</td>         <td class="cellrowborder" width="33.33333333333333%">Array&lt;TouchInfo&gt;</td>         <td class="cellrowborder" width="33.33333333333333%">触摸事件时的属性集合，包括产生变化的屏幕触摸点的信息数组。数据格式和touches一样。该属性表示有变化的触摸点，如从无变有，位置变化，从有变无。例如用户手指刚接触屏幕时，touches数组中有数据，但changedTouches无数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>表3</strong> TouchInfo</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.11.1.4.1.1" width="33.33333333333333%">属性</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.11.1.4.1.2" width="33.33333333333333%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.11.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">globalX</td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">距离屏幕左上角（不包括状态栏）横向距离。屏幕的左上角为原点。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">globalY</td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">距离屏幕左上角（不包括状态栏）纵向距离。屏幕的左上角为原点。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">localX</td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">距离被触摸组件左上角横向距离。组件的左上角为原点。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">localY</td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">距离被触摸组件左上角纵向距离。组件的左上角为原点。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">size</td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">触摸接触面积。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">force<sup>6+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">接触力信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>表4</strong> SwipeEvent 基础事件对象属性列表（继承BaseEvent）</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.13.1.4.1.1" width="33.33333333333333%">属性</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.13.1.4.1.2" width="33.33333333333333%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.13.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">direction</td>         <td class="cellrowborder" width="33.33333333333333%">string</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>滑动方向，可能值有：</p>          <p>- left：向左滑动；</p>          <p>- right：向右滑动；</p>          <p>- up：向上滑动；</p>          <p>- down：向下滑动。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">distance<sup>6+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">在滑动方向上的滑动距离。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>表5</strong> PinchEvent 对象属性列表<sup>7+</sup></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.15.1.4.1.1" width="33.33333333333333%">属性</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.15.1.4.1.2" width="33.33333333333333%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.15.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">scale</td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">缩放比例。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">pinchCenterX</td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">捏合中心点X轴坐标，单位px。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">pinchCenterY</td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">捏合中心点Y轴坐标，单位px。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>表6</strong> DragEvent对象属性列表(继承BaseEvent)<sup>7+</sup></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.17.1.4.1.1" width="33.33333333333333%">属性</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.17.1.4.1.2" width="33.33333333333333%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.17.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">type</td>         <td class="cellrowborder" width="33.33333333333333%">string</td>         <td class="cellrowborder" width="33.33333333333333%">事件名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">globalX</td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">距离屏幕左上角坐标原点横向距离。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">globalY</td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">距离屏幕左上角坐标原点纵向距离。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">timestamp</td>         <td class="cellrowborder" width="33.33333333333333%">number</td>         <td class="cellrowborder" width="33.33333333333333%">时间戳。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">dataTransfer<sup>9+</sup></td>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/js-components-common-events#datatransfer对象9">DataTransfer</a></td>         <td class="cellrowborder" width="33.33333333333333%">用于传输数据。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="target对象6" device-type="phone,2in1,tablet,wearable,tv">Target对象<sup>6+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="target对象6" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>当组件触发事件后，事件回调函数默认会收到一个事件对象，通过该事件对象可以获取相应的信息。</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.4.1.1" width="33.33333333333333%">属性</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.4.1.2" width="33.33333333333333%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">dataSet<sup>6+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">Object</td>         <td class="cellrowborder" width="33.33333333333333%">组件上通过通用属性设置的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-components-common-attributes">data-*</a>的自定义属性组成的集合。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dyw-c106="" class="highlight-div"><div _ngcontent-dyw-c106="" class="highlight-div-header"><div _ngcontent-dyw-c106="" class="highlight-div-header-left"><div _ngcontent-dyw-c106="" class="handle-button expand-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dyw-c106="" class="highlight-div-header-right"><div _ngcontent-dyw-c106="" class="handle-button ai-button"></div><div _ngcontent-dyw-c106="" class="handle-button line-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dyw-c106="" class="handle-button theme-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dyw-c106="" class="handle-button copy-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dyw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- xxx.hml --&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-a</span>=<span class="hljs-string">"dataA"</span> <span class="hljs-attr">data-b</span>=<span class="hljs-string">"dataB"</span></span></li><li><span class="hljs-tag">    <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%; height: 50%; background-color: saddlebrown;"</span>@<span class="hljs-attr">touchstart</span>=<span class="hljs-string">'touchstartfunc'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li></ol></pre></div></div>     <div _ngcontent-dyw-c106="" class="highlight-div"><div _ngcontent-dyw-c106="" class="highlight-div-header"><div _ngcontent-dyw-c106="" class="highlight-div-header-left"><div _ngcontent-dyw-c106="" class="handle-button expand-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dyw-c106="" class="highlight-div-header-right"><div _ngcontent-dyw-c106="" class="handle-button ai-button"></div><div _ngcontent-dyw-c106="" class="handle-button line-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dyw-c106="" class="handle-button theme-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dyw-c106="" class="handle-button copy-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dyw-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.js</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>  <span class="hljs-title function_">touchstartfunc</span>(<span class="hljs-params">msg</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`on touch start, point is: <span class="hljs-subst">${msg.touches[<span class="hljs-number">0</span>].globalX}</span>`</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`on touch start, data is: <span class="hljs-subst">${msg.target.dataSet.a}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="datatransfer对象9" device-type="phone,2in1,tablet,wearable,tv">DataTransfer对象<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="datatransfer对象9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>在拖拽操作的过程中，可以通过dataTransfer对象来传输数据，以便在拖拽操作结束的时候对数据进行其他操作。</p>    </div>    <div class="tiledSection">     <h3 id="setdata9" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">setData<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setdata9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setData(key: string, value: object): boolean</p>     <p>设置给定key关联的数据。如果没有与该key关联的数据，则将其添加到末尾。如果该key关联的数据已经存在，则在相同位置替换现有数据。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.2" width="25%">参数类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.4" width="25%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">数据键值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">object</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要存储的数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">执行结果，true表示成功，false表示失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dyw-c106="" class="highlight-div"><div _ngcontent-dyw-c106="" class="highlight-div-header"><div _ngcontent-dyw-c106="" class="highlight-div-header-left"><div _ngcontent-dyw-c106="" class="handle-button expand-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dyw-c106="" class="highlight-div-header-right"><div _ngcontent-dyw-c106="" class="handle-button ai-button"></div><div _ngcontent-dyw-c106="" class="handle-button line-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dyw-c106="" class="handle-button theme-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dyw-c106="" class="handle-button copy-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dyw-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// setData的value参数，可以是基本数据类型。</span></li><li><span class="hljs-title function_">dragStart</span>(<span class="hljs-params">e</span>) {</li><li>    <span class="hljs-keyword">var</span> isSetOK = e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">setData</span>(<span class="hljs-string">'name'</span>, <span class="hljs-number">1</span>);</li><li>},</li><li><span class="hljs-comment">// setData的value参数，也可以是对象类型。</span></li><li><span class="hljs-title function_">dragStart</span>(<span class="hljs-params">e</span>) {</li><li>    <span class="hljs-keyword">var</span> person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();</li><li>    person.<span class="hljs-property">name</span> = <span class="hljs-string">"tom"</span>;</li><li>    person.<span class="hljs-property">age</span> = <span class="hljs-number">21</span>;</li><li>    <span class="hljs-keyword">var</span> isSetOK = e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">setData</span>(<span class="hljs-string">'person'</span>, person);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getdata9" device-type="phone,2in1,tablet,wearable,tv">getData<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdata9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getData(key: string): object</p>     <p>获取给定key关联的数据，如果没有与该key关联的数据，则返回空字符串。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.5.1.2" width="25%">参数类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.5.1.4" width="25%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">数据键值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">object</td>         <td class="cellrowborder" width="50%">获取的数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dyw-c106="" class="highlight-div"><div _ngcontent-dyw-c106="" class="highlight-div-header"><div _ngcontent-dyw-c106="" class="highlight-div-header-left"><div _ngcontent-dyw-c106="" class="handle-button expand-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dyw-c106="" class="highlight-div-header-right"><div _ngcontent-dyw-c106="" class="handle-button ai-button"></div><div _ngcontent-dyw-c106="" class="handle-button line-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dyw-c106="" class="handle-button theme-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dyw-c106="" class="handle-button copy-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dyw-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">dragStart</span>(<span class="hljs-params">e</span>) {</li><li>    <span class="hljs-keyword">var</span> person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();</li><li>    person.<span class="hljs-property">name</span> = <span class="hljs-string">"tom"</span>;</li><li>    person.<span class="hljs-property">age</span> = <span class="hljs-number">21</span>;</li><li>    e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">setData</span>(<span class="hljs-string">'person'</span>, person);</li><li>},</li><li><span class="hljs-title function_">dragEnd</span>(<span class="hljs-params">e</span>){</li><li>    <span class="hljs-keyword">var</span> person = e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">getData</span>(<span class="hljs-string">'person'</span>);</li><li>},</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="cleardata9" device-type="phone,2in1,tablet,wearable,tv">clearData<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cleardata9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clearData(key?: string): boolean</p>     <p>删除给定key关联的数据。如果没有与该key关联的数据，则该方法不会产生任何效果。</p>     <p>如果key为空，则删除所有数据。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.2" width="25%">参数类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.4" width="25%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">数据键值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">执行结果，true表示成功，false表示失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dyw-c106="" class="highlight-div"><div _ngcontent-dyw-c106="" class="highlight-div-header"><div _ngcontent-dyw-c106="" class="highlight-div-header-left"><div _ngcontent-dyw-c106="" class="handle-button expand-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dyw-c106="" class="highlight-div-header-right"><div _ngcontent-dyw-c106="" class="handle-button ai-button"></div><div _ngcontent-dyw-c106="" class="handle-button line-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dyw-c106="" class="handle-button theme-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dyw-c106="" class="handle-button copy-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dyw-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">dragEnd</span>(<span class="hljs-params">e</span>) {</li><li>    <span class="hljs-keyword">var</span> isSuccess = e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">clearData</span>(<span class="hljs-string">'name'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setdragimage9" device-type="phone,2in1,tablet,wearable,tv">setDragImage<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setdragimage9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setDragImage(pixelMap: PixelMap, offsetX: number,offsetY: number): boolean</p>     <p>用于设置自定义的拖动图像。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.5.1.2" width="25%">参数类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.5.1.4" width="25%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">pixelMap</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">前端传入的图片资源。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">offsetX</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">相对于图片的横向偏移量。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">offsetY</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">相对于图片的纵向偏移量。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">执行结果，true表示成功，false表示失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dyw-c106="" class="highlight-div"><div _ngcontent-dyw-c106="" class="highlight-div-header"><div _ngcontent-dyw-c106="" class="highlight-div-header-left"><div _ngcontent-dyw-c106="" class="handle-button expand-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dyw-c106="" class="highlight-div-header-right"><div _ngcontent-dyw-c106="" class="handle-button ai-button"></div><div _ngcontent-dyw-c106="" class="handle-button line-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dyw-c106="" class="handle-button theme-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dyw-c106="" class="handle-button copy-button"><div _ngcontent-dyw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dyw-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> image <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.multimedia.image'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>    <span class="hljs-title function_">createPixelMap</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-keyword">let</span> color = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">4</span> * <span class="hljs-number">96</span> * <span class="hljs-number">96</span>);</li><li>        <span class="hljs-keyword">var</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; buffer.<span class="hljs-property">length</span>; i++) {</li><li>            buffer[i] = (i + <span class="hljs-number">1</span>) % <span class="hljs-number">255</span>;</li><li>        }</li><li>        <span class="hljs-keyword">let</span> opts = {</li><li>            <span class="hljs-attr">alphaType</span>: <span class="hljs-number">0</span>,</li><li>            <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>,</li><li>            <span class="hljs-attr">pixelFormat</span>: <span class="hljs-number">4</span>,</li><li>            <span class="hljs-attr">scaleMode</span>: <span class="hljs-number">1</span>,</li><li>            <span class="hljs-attr">size</span>: {</li><li>                <span class="hljs-attr">height</span>: <span class="hljs-number">96</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">96</span></li><li>            }</li><li>        }</li><li>        <span class="hljs-keyword">const</span> promise = image.<span class="hljs-title function_">createPixelMap</span>(color, opts);</li><li>        promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'-create pixelMap has info message:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMap</span> = data;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMapReader</span> = data;</li><li>        })</li><li>    },</li><li>
</li><li>    <span class="hljs-title function_">onInit</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createPixelMap</span>()</li><li>    },</li><li>
</li><li>    <span class="hljs-title function_">dragStart</span>(<span class="hljs-params">e</span>) {</li><li>        e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">setDragImage</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMapReader</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>