<h1 _ngcontent-tre-c119="" class="doc-title ng-star-inserted" title="通行密钥"> 通行密钥 </h1>

<div _ngcontent-tre-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块主要提供了以下能力：</p> <ul><li>通行密钥注册：支持使用用户身份认证特征（如人脸、指纹、PIN码）作为平台认证器，在本设备上创建应用或网页的通行密钥。</li><li>本地免密认证：支持使用用户身份认证特征（如人脸、指纹、PIN码）作为平台认证器，使用通行密钥在本设备上进行应用或网页的免密认证。</li><li>跨设备扫码认证：支持使用已注册通行密钥的移动设备作为漫游认证器，使用跨设备扫码的方式，在其他设备上进行应用或网页的免密认证。</li></ul> <p><strong>起始版本：</strong>6.0.0(20)</p> <div class="tiledSection"><h2 id="section1317192033519" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1317192033519" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-tre-c106="" class="highlight-div"><div _ngcontent-tre-c106="" class="highlight-div-header"><div _ngcontent-tre-c106="" class="highlight-div-header-left"><div _ngcontent-tre-c106="" class="handle-button expand-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tre-c106="" class="highlight-div-header-right"><div _ngcontent-tre-c106="" class="handle-button ai-button"></div><div _ngcontent-tre-c106="" class="handle-button line-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tre-c106="" class="handle-button theme-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tre-c106="" class="handle-button copy-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">fido2 </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.OnlineAuthenticationKit'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span></li></ol></pre></div></div> </div> <p></p> <div class="tiledSection"><h2 id="section116196263442" device-type="phone,2in1,tablet">AuthenticatorAttestationResponse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section116196263442" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>以Uint8Array格式表示的认证器声明响应。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.1" width="28.82%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.2" width="12.42%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.3" width="8.41%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.4" width="5.81%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.5" width="44.54%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="28.82%"><p>attestationObject</p> </td> <td class="cellrowborder" width="12.42%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="8.41%"><p>是</p> </td> <td class="cellrowborder" width="5.81%"><p>否</p> </td> <td class="cellrowborder" width="44.54%"><p>声明对象。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>clientDataJson</p> </td> <td class="cellrowborder" width="12.42%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="8.41%"><p>是</p> </td> <td class="cellrowborder" width="5.81%"><p>否</p> </td> <td class="cellrowborder" width="44.54%"><p>获取客户端数据，表示WebAuthn依赖方和客户端的上下文绑定，包含类型、挑战值及源等数据。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>publicKeyAlgorithm</p> </td> <td class="cellrowborder" width="12.42%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section19820253379">Algorithm</a></p> </td> <td class="cellrowborder" width="8.41%"><p>否</p> </td> <td class="cellrowborder" width="5.81%"><p>否</p> </td> <td class="cellrowborder" width="44.54%"><p>密码算法。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>publicKey</p> </td> <td class="cellrowborder" width="12.42%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="8.41%"><p>否</p> </td> <td class="cellrowborder" width="5.81%"><p>是</p> </td> <td class="cellrowborder" width="44.54%"><p>publicKey凭证请求的选项。默认值为空 。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>authenticatorData</p> </td> <td class="cellrowborder" width="12.42%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="8.41%"><p>否</p> </td> <td class="cellrowborder" width="5.81%"><p>否</p> </td> <td class="cellrowborder" width="44.54%"><p>认证器数据。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>transports</p> </td> <td class="cellrowborder" width="12.42%"><p>string[]</p> </td> <td class="cellrowborder" width="8.41%"><p>否</p> </td> <td class="cellrowborder" width="5.81%"><p>否</p> </td> <td class="cellrowborder" width="44.54%"><p>定义身份认证器访问类型，取值范围为<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section117661146498">AuthenticatorTransport</a>枚举。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1679071213552" device-type="phone,2in1,tablet">AuthenticatorAttestationResponseJson<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1679071213552" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>认证器声明响应，JSON字符串的结构。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.1" width="28.82%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.2" width="12.42%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.3" width="8.41%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.4" width="6.72%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.5" width="43.63%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="28.82%"><p>clientDataJson</p> </td> <td class="cellrowborder" width="12.42%"><p>string</p> </td> <td class="cellrowborder" width="8.41%"><p>否</p> </td> <td class="cellrowborder" width="6.72%"><p>否</p> </td> <td class="cellrowborder" width="43.63%"><p>获取客户端数据，表示WebAuthn依赖方和客户端的上下文绑定，包含类型、挑战值及源等数据。长度限制0到4096。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>authenticatorData</p> </td> <td class="cellrowborder" width="12.42%"><p>string</p> </td> <td class="cellrowborder" width="8.41%"><p>否</p> </td> <td class="cellrowborder" width="6.72%"><p>否</p> </td> <td class="cellrowborder" width="43.63%"><p>认证器数据。长度限制0到4096。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>transports</p> </td> <td class="cellrowborder" width="12.42%"><p>Array&lt;string&gt;</p> </td> <td class="cellrowborder" width="8.41%"><p>否</p> </td> <td class="cellrowborder" width="6.72%"><p>否</p> </td> <td class="cellrowborder" width="43.63%"><p>定义身份认证器访问类型，取值范围为<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section117661146498">AuthenticatorTransport</a>枚举。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>publicKey</p> </td> <td class="cellrowborder" width="12.42%"><p>string</p> </td> <td class="cellrowborder" width="8.41%"><p>否</p> </td> <td class="cellrowborder" width="6.72%"><p>是</p> </td> <td class="cellrowborder" width="43.63%"><p>publicKey凭证请求的选项。默认值为空 。长度限制0到4096。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>publicKeyAlgorithm</p> </td> <td class="cellrowborder" width="12.42%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section19820253379">Algorithm</a></p> </td> <td class="cellrowborder" width="8.41%"><p>否</p> </td> <td class="cellrowborder" width="6.72%"><p>否</p> </td> <td class="cellrowborder" width="43.63%"><p>密码算法。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>attestationObject</p> </td> <td class="cellrowborder" width="12.42%"><p>string</p> </td> <td class="cellrowborder" width="8.41%"><p>否</p> </td> <td class="cellrowborder" width="6.72%"><p>否</p> </td> <td class="cellrowborder" width="43.63%"><p>声明对象。长度限制0到10000。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section66671169415" device-type="phone,2in1,tablet">AuthenticationExtensionsClientOutputsJson<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section66671169415" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>当依赖方调用 create() 或 get() 时，处理依赖方请求的客户端扩展的结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p> </div> <div class="tiledSection"><h2 id="section1333349185918" device-type="phone,2in1,tablet">AuthenticatorAssertionResponseJson<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1333349185918" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>认证器声明响应，JSON字符串的结构。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.1" width="28.82%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.2" width="12.42%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.3" width="8.4%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.4" width="7.82%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.5" width="42.54%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="28.82%"><p>clientDataJson</p> </td> <td class="cellrowborder" width="12.42%"><p>string</p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>客户端数据。长度限制0到4096。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>authenticatorData</p> </td> <td class="cellrowborder" width="12.42%"><p>string</p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>认证器数据。长度限制0到4096。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>signature</p> </td> <td class="cellrowborder" width="12.42%"><p>string</p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>签名。长度限制0到4096。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>userHandle</p> </td> <td class="cellrowborder" width="12.42%"><p>string</p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>是</p> </td> <td class="cellrowborder" width="42.54%"><p>用户句柄。默认值为空。长度限制0到4096。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section2146056964" device-type="phone,2in1,tablet">AuthenticatorAssertionResponse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2146056964" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>认证器声明响应。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.1" width="28.82%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.2" width="12.42%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.3" width="8.41%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.4" width="7.8100000000000005%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.5" width="42.54%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="28.82%"><p>authenticatorData</p> </td> <td class="cellrowborder" width="12.42%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="8.41%"><p>是</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>认证器数据。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>signature</p> </td> <td class="cellrowborder" width="12.42%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="8.41%"><p>是</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>签名。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>userHandle</p> </td> <td class="cellrowborder" width="12.42%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="8.41%"><p>是</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>是</p> </td> <td class="cellrowborder" width="42.54%"><p>用户句柄。默认值为空。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>clientDataJson</p> </td> <td class="cellrowborder" width="12.42%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="8.41%"><p>是</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>客户端数据。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section182993334919" device-type="phone,2in1,tablet">AuthenticationExtensionsClientOutputs<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section182993334919" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>身份验证扩展。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p> </div> <div class="tiledSection"><h2 id="section10797172295315" device-type="phone,2in1,tablet">PublicKeyAttestationCredential<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10797172295315" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>注册返回参数。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.6.1.6.1.1" width="20.47572815533981%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.6.1.2" width="23.854368932038838%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.6.1.3" width="6.796116504854371%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.6.1.4" width="7.5728155339805845%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.6.1.5" width="41.30097087378641%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20.47572815533981%"><p>rawId</p> </td> <td class="cellrowborder" width="23.854368932038838%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="6.796116504854371%"><p>是</p> </td> <td class="cellrowborder" width="7.5728155339805845%"><p>否</p> </td> <td class="cellrowborder" width="41.30097087378641%"><p>凭据唯一索引。</p> </td> </tr> <tr><td class="cellrowborder" width="20.47572815533981%"><p>response</p> </td> <td class="cellrowborder" width="23.854368932038838%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section116196263442">AuthenticatorAttestationResponse</a></p> </td> <td class="cellrowborder" width="6.796116504854371%"><p>是</p> </td> <td class="cellrowborder" width="7.5728155339805845%"><p>否</p> </td> <td class="cellrowborder" width="41.30097087378641%"><p>返回报文。</p> </td> </tr> <tr><td class="cellrowborder" width="20.47572815533981%"><p>authenticatorAttachment</p> </td> <td class="cellrowborder" width="23.854368932038838%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section354238124118">AuthenticatorAttachment</a></p> </td> <td class="cellrowborder" width="6.796116504854371%"><p>是</p> </td> <td class="cellrowborder" width="7.5728155339805845%"><p>是</p> </td> <td class="cellrowborder" width="41.30097087378641%"><p>认证器附属信息（平台、漫游），默认值为platform。</p> </td> </tr> <tr><td class="cellrowborder" width="20.47572815533981%"><p>id</p> </td> <td class="cellrowborder" width="23.854368932038838%"><p>string</p> </td> <td class="cellrowborder" width="6.796116504854371%"><p>是</p> </td> <td class="cellrowborder" width="7.5728155339805845%"><p>否</p> </td> <td class="cellrowborder" width="41.30097087378641%"><p>凭据ID（base64格式）。长度限制0到512。</p> </td> </tr> <tr><td class="cellrowborder" width="20.47572815533981%"><p>type</p> </td> <td class="cellrowborder" width="23.854368932038838%"><p>string</p> </td> <td class="cellrowborder" width="6.796116504854371%"><p>是</p> </td> <td class="cellrowborder" width="7.5728155339805845%"><p>否</p> </td> <td class="cellrowborder" width="41.30097087378641%"><p>凭据类型。长度限制0到512。</p> </td> </tr> <tr><td class="cellrowborder" width="20.47572815533981%"><p>clientExtensionResults</p> </td> <td class="cellrowborder" width="23.854368932038838%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section182993334919">AuthenticationExtensionsClientOutputs</a></p> </td> <td class="cellrowborder" width="6.796116504854371%"><p>是</p> </td> <td class="cellrowborder" width="7.5728155339805845%"><p>否</p> </td> <td class="cellrowborder" width="41.30097087378641%"><p>客户端扩展结果。</p> </td> </tr> <tr><td class="cellrowborder" width="20.47572815533981%"><p>registrationResponseJson</p> </td> <td class="cellrowborder" width="23.854368932038838%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section8630134312122">RegistrationResponseJson</a></p> </td> <td class="cellrowborder" width="6.796116504854371%"><p>否</p> </td> <td class="cellrowborder" width="7.5728155339805845%"><p>否</p> </td> <td class="cellrowborder" width="41.30097087378641%"><p>认证结果，json格式。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section8630134312122" device-type="phone,2in1,tablet">RegistrationResponseJson<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section8630134312122" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>注册结果的Json格式。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.6.1.6.1.1" width="18.11%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.6.1.2" width="23.73%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.6.1.3" width="7.8100000000000005%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.6.1.4" width="7.8100000000000005%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.6.1.5" width="42.54%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="18.11%"><p>id</p> </td> <td class="cellrowborder" width="23.73%"><p>string</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>否</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>凭据的标识符。对于每种类型的凭据，标识符的要求都是不同的。长度限制0到512。</p> </td> </tr> <tr><td class="cellrowborder" width="18.11%"><p>rawId</p> </td> <td class="cellrowborder" width="23.73%"><p>string</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>否</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>原始凭据ID。长度限制0到512。</p> </td> </tr> <tr><td class="cellrowborder" width="18.11%"><p>response</p> </td> <td class="cellrowborder" width="23.73%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section1679071213552">AuthenticatorAttestationResponseJson</a></p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>否</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>认证器响应。</p> </td> </tr> <tr><td class="cellrowborder" width="18.11%"><p>authenticatorAttachment</p> </td> <td class="cellrowborder" width="23.73%"><p>string</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>否</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>是</p> </td> <td class="cellrowborder" width="42.54%"><p>认证器附属信息（平台、漫游），默认值为platform。长度限制0到512。</p> </td> </tr> <tr><td class="cellrowborder" width="18.11%"><p>clientExtensionResults</p> </td> <td class="cellrowborder" width="23.73%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section66671169415">AuthenticationExtensionsClientOutputsJson</a></p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>否</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>客户端扩展结果。当前版本不支持扩展，因此占位符始终为NULL，必须将clientExtensionResults键对应的值解析为{}。</p> </td> </tr> <tr><td class="cellrowborder" width="18.11%"><p>type</p> </td> <td class="cellrowborder" width="23.73%"><p>string</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>否</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>该属性返回对象的接口对象的插槽的值，它指定此对象所表示的凭据类型。长度限制0到512。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section12880914141610" device-type="phone,2in1,tablet">PublicKeyCredentialRequestOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12880914141610" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>定义通行密钥认证请求参数。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.6.1.6.1.1" width="19.07%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.6.1.2" width="23.3%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.6.1.3" width="7.28%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.6.1.4" width="6.63%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.6.1.5" width="43.72%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.07%"><p>challenge</p> </td> <td class="cellrowborder" width="23.3%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="7.28%"><p>否</p> </td> <td class="cellrowborder" width="6.63%"><p>否</p> </td> <td class="cellrowborder" width="43.72%"><p>获取挑战值。</p> </td> </tr> <tr><td class="cellrowborder" width="19.07%"><p>timeout</p> </td> <td class="cellrowborder" width="23.3%"><p>number</p> </td> <td class="cellrowborder" width="7.28%"><p>否</p> </td> <td class="cellrowborder" width="6.63%"><p>是</p> </td> <td class="cellrowborder" width="43.72%"><p>认证操作最长时间，单位为毫秒。默认值为300000ms。</p> </td> </tr> <tr><td class="cellrowborder" width="19.07%"><p>rpId</p> </td> <td class="cellrowborder" width="23.3%"><p>string</p> </td> <td class="cellrowborder" width="7.28%"><p>否</p> </td> <td class="cellrowborder" width="6.63%"><p>是</p> </td> <td class="cellrowborder" width="43.72%"><p>依赖方标识。默认值为空。长度限制0到512。</p> </td> </tr> <tr><td class="cellrowborder" width="19.07%"><p>allowCredentials</p> </td> <td class="cellrowborder" width="23.3%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section453614462519">PublicKeyCredentialDescriptor</a>&gt;</p> </td> <td class="cellrowborder" width="7.28%"><p>否</p> </td> <td class="cellrowborder" width="6.63%"><p>是</p> </td> <td class="cellrowborder" width="43.72%"><p>认证凭据的附加参数列表。默认值为空。</p> </td> </tr> <tr><td class="cellrowborder" width="19.07%"><p>userVerification</p> </td> <td class="cellrowborder" width="23.3%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section41573116347">UserVerificationRequirement</a></p> </td> <td class="cellrowborder" width="7.28%"><p>否</p> </td> <td class="cellrowborder" width="6.63%"><p>是</p> </td> <td class="cellrowborder" width="43.72%"><p>用户认证需求枚举。默认值为preferred。</p> </td> </tr> <tr><td class="cellrowborder" width="19.07%"><p>hints</p> </td> <td class="cellrowborder" width="23.3%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section3221184619427">PublicKeyCredentialHint</a>&gt;</p> </td> <td class="cellrowborder" width="7.28%"><p>否</p> </td> <td class="cellrowborder" width="6.63%"><p>是</p> </td> <td class="cellrowborder" width="43.72%"><p>认证方式指示。默认值为[]。</p> </td> </tr> <tr><td class="cellrowborder" width="19.07%"><p>extensions</p> </td> <td class="cellrowborder" width="23.3%"><p>Map&lt;string, Object&gt;</p> </td> <td class="cellrowborder" width="7.28%"><p>否</p> </td> <td class="cellrowborder" width="6.63%"><p>是</p> </td> <td class="cellrowborder" width="43.72%"><p>扩展名必须是表示Map&lt;string，Object&gt; object的JSON字符串。默认值为空。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section16498195211554" device-type="phone,2in1,tablet">PublicKeyAssertionCredential<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16498195211554" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>认证返回参数。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.6.1.6.1.1" width="17.82%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.6.1.2" width="23.419999999999998%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.6.1.3" width="8.42%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.6.1.4" width="7.8%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.6.1.5" width="42.54%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="17.82%"><p>rawId</p> </td> <td class="cellrowborder" width="23.419999999999998%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="8.42%"><p>是</p> </td> <td class="cellrowborder" width="7.8%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>凭据唯一索引。</p> </td> </tr> <tr><td class="cellrowborder" width="17.82%"><p>response</p> </td> <td class="cellrowborder" width="23.419999999999998%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section2146056964">AuthenticatorAssertionResponse</a></p> </td> <td class="cellrowborder" width="8.42%"><p>是</p> </td> <td class="cellrowborder" width="7.8%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>返回报文。</p> </td> </tr> <tr><td class="cellrowborder" width="17.82%"><p>authenticatorAttachment</p> </td> <td class="cellrowborder" width="23.419999999999998%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section354238124118">AuthenticatorAttachment</a></p> </td> <td class="cellrowborder" width="8.42%"><p>是</p> </td> <td class="cellrowborder" width="7.8%"><p>是</p> </td> <td class="cellrowborder" width="42.54%"><p>认证器附属信息（平台、漫游），默认值为platform。</p> </td> </tr> <tr><td class="cellrowborder" width="17.82%"><p>id</p> </td> <td class="cellrowborder" width="23.419999999999998%"><p>string</p> </td> <td class="cellrowborder" width="8.42%"><p>是</p> </td> <td class="cellrowborder" width="7.8%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>凭据ID（base64格式）。长度限制0到512。</p> </td> </tr> <tr><td class="cellrowborder" width="17.82%"><p>type</p> </td> <td class="cellrowborder" width="23.419999999999998%"><p>string</p> </td> <td class="cellrowborder" width="8.42%"><p>是</p> </td> <td class="cellrowborder" width="7.8%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>凭据类型。长度限制0到512。</p> </td> </tr> <tr><td class="cellrowborder" width="17.82%"><p>clientExtensionResults</p> </td> <td class="cellrowborder" width="23.419999999999998%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section182993334919">AuthenticationExtensionsClientOutputs</a></p> </td> <td class="cellrowborder" width="8.42%"><p>否</p> </td> <td class="cellrowborder" width="7.8%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>客户端扩展结果。</p> </td> </tr> <tr><td class="cellrowborder" width="17.82%"><p>authenticationResponseJson</p> </td> <td class="cellrowborder" width="23.419999999999998%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section94791352208">AuthenticationResponseJson</a></p> </td> <td class="cellrowborder" width="8.42%"><p>否</p> </td> <td class="cellrowborder" width="7.8%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>认证响应数据，格式为JSON字符串。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section94791352208" device-type="phone,2in1,tablet">AuthenticationResponseJson<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section94791352208" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>认证响应数据，格式为JSON字符串。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.6.1.6.1.1" width="19.38%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.6.1.2" width="21.86%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.6.1.3" width="6.78%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.6.1.4" width="6.819999999999999%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.6.1.5" width="45.16%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.38%"><p>id</p> </td> <td class="cellrowborder" width="21.86%"><p>string</p> </td> <td class="cellrowborder" width="6.78%"><p>否</p> </td> <td class="cellrowborder" width="6.819999999999999%"><p>否</p> </td> <td class="cellrowborder" width="45.16%"><p>凭据的标识符，作为JSON字符串。对于每种类型的凭据，标识符的要求都是不同的。长度限制0到512。</p> </td> </tr> <tr><td class="cellrowborder" width="19.38%"><p>rawId</p> </td> <td class="cellrowborder" width="21.86%"><p>string</p> </td> <td class="cellrowborder" width="6.78%"><p>否</p> </td> <td class="cellrowborder" width="6.819999999999999%"><p>否</p> </td> <td class="cellrowborder" width="45.16%"><p>原始凭据Id，格式为JSON字符串。长度限制0到512。</p> </td> </tr> <tr><td class="cellrowborder" width="19.38%"><p>response</p> </td> <td class="cellrowborder" width="21.86%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section1333349185918">AuthenticatorAssertionResponseJson</a></p> </td> <td class="cellrowborder" width="6.78%"><p>否</p> </td> <td class="cellrowborder" width="6.819999999999999%"><p>否</p> </td> <td class="cellrowborder" width="45.16%"><p>认证器声明响应，JSON字符串的结构。</p> </td> </tr> <tr><td class="cellrowborder" width="19.38%"><p>authenticatorAttachment</p> </td> <td class="cellrowborder" width="21.86%"><p>string</p> </td> <td class="cellrowborder" width="6.78%"><p>否</p> </td> <td class="cellrowborder" width="6.819999999999999%"><p>是</p> </td> <td class="cellrowborder" width="45.16%"><p>认证器的附件，默认值为platform。长度限制0到512。</p> </td> </tr> <tr><td class="cellrowborder" width="19.38%"><p>clientExtensionResults</p> </td> <td class="cellrowborder" width="21.86%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section66671169415">AuthenticationExtensionsClientOutputsJson</a></p> </td> <td class="cellrowborder" width="6.78%"><p>否</p> </td> <td class="cellrowborder" width="6.819999999999999%"><p>否</p> </td> <td class="cellrowborder" width="45.16%"><p>客户端扩展结果。当前版本不支持扩展，因此占位符始终为NULL，必须将clientExtensionResults键对应的值解析为{}。</p> </td> </tr> <tr><td class="cellrowborder" width="19.38%"><p>type</p> </td> <td class="cellrowborder" width="21.86%"><p>string</p> </td> <td class="cellrowborder" width="6.78%"><p>否</p> </td> <td class="cellrowborder" width="6.819999999999999%"><p>否</p> </td> <td class="cellrowborder" width="45.16%"><p>该属性以JSON字符串形式返回对象的接口对象的插槽的值，该插槽指定此对象所表示的凭据类型。长度限制0到512。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section191181130202510" device-type="phone,2in1,tablet">CredentialMediationRequirement<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section191181130202510" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>用户介入要求的枚举。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.6.1.4.1.1" width="25.75%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.4.1.2" width="37.5%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.4.1.3" width="36.75%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.75%"><p>SILENT</p> </td> <td class="cellrowborder" width="37.5%"><p>'silent'</p> </td> <td class="cellrowborder" width="36.75%"><p>禁止用户介入指定的操作。如果可以在不需要用户介入的情况下进行操作，则正常。 如果需要用户介入，则操作将返回null。</p> </td> </tr> <tr><td class="cellrowborder" width="25.75%"><p>OPTIONAL</p> </td> <td class="cellrowborder" width="37.5%"><p>'optional'</p> </td> <td class="cellrowborder" width="36.75%"><p>如果在没有用户介入的情况下，可以为给定的操作传递凭据，则正常传递。 如果需要用户介入，那么用户代理将让用户介入决策。</p> </td> </tr> <tr><td class="cellrowborder" width="25.75%"><p>CONDITIONAL</p> </td> <td class="cellrowborder" width="37.5%"><p>'conditional'</p> </td> <td class="cellrowborder" width="36.75%"><p>如果可以在没有用户介入的情况下为给定操作传递凭据，则正常传递。 如果需要用户介入，那么用户代理将让用户介入决策。</p> </td> </tr> <tr><td class="cellrowborder" width="25.75%"><p>REQUIRED</p> </td> <td class="cellrowborder" width="37.5%"><p>'required'</p> </td> <td class="cellrowborder" width="36.75%"><p>在没有用户介入的情况下，用户代理将不会移交凭证。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section3125554145615" device-type="phone,2in1,tablet">CredentialCreationOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3125554145615" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>注册信息字典对象，包含原始的注册报文。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.6.1.6.1.1" width="19.98%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.6.1.2" width="21.6%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.6.1.3" width="18.42%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.6.1.4" width="15.65%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.6.1.5" width="24.349999999999998%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.98%"><p>mediation</p> </td> <td class="cellrowborder" width="21.6%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section191181130202510">CredentialMediationRequirement</a></p> </td> <td class="cellrowborder" width="18.42%"><p>否</p> </td> <td class="cellrowborder" width="15.65%"><p>是</p> </td> <td class="cellrowborder" width="24.349999999999998%"><p>该操作是否需要用户参与，默认值为"optional"。</p> </td> </tr> <tr><td class="cellrowborder" width="19.98%"><p>publicKey</p> </td> <td class="cellrowborder" width="21.6%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section155669563012">PublicKeyCredentialCreationOptions</a></p> </td> <td class="cellrowborder" width="18.42%"><p>否</p> </td> <td class="cellrowborder" width="15.65%"><p>否</p> </td> <td class="cellrowborder" width="24.349999999999998%"><p>FIDO2注册报文，包含challenge、rp、用户信息、认证器选择结果等信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section433810416530" device-type="phone,2in1,tablet">CredentialRequestOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section433810416530" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>认证信息字典对象，包含原始的认证报文和是否需要用户参与选项。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.7.1.6.1.1" width="19.2%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.6.1.2" width="20.78%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.6.1.3" width="20.02%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.6.1.4" width="11.379999999999999%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.6.1.5" width="28.62%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>mediation</p> </td> <td class="cellrowborder" width="20.78%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section191181130202510">CredentialMediationRequirement</a></p> </td> <td class="cellrowborder" width="20.02%"><p>否</p> </td> <td class="cellrowborder" width="11.379999999999999%"><p>是</p> </td> <td class="cellrowborder" width="28.62%"><p>该操作是否需要用户参与，默认值为"optional"。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>publicKey</p> </td> <td class="cellrowborder" width="20.78%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section12880914141610">PublicKeyCredentialRequestOptions</a></p> </td> <td class="cellrowborder" width="20.02%"><p>否</p> </td> <td class="cellrowborder" width="11.379999999999999%"><p>否</p> </td> <td class="cellrowborder" width="28.62%"><p>FIDO2认证报文，包含challenge、依赖方信息、用户信息、认证器选择结果等信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section15870155832812" device-type="phone,2in1,tablet">TokenBindingStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section15870155832812" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>TokenBinding协议的状态枚举。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.6.1.4.1.1" width="25.75%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.4.1.2" width="37.5%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.4.1.3" width="36.75%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.75%"><p>PRESENT</p> </td> <td class="cellrowborder" width="37.5%"><p>'present'</p> </td> <td class="cellrowborder" width="36.75%"><p>正常通信时的状态。</p> </td> </tr> <tr><td class="cellrowborder" width="25.75%"><p>SUPPORTED</p> </td> <td class="cellrowborder" width="37.5%"><p>'supported'</p> </td> <td class="cellrowborder" width="36.75%"><p>支持令牌绑定，但通信尚不可用。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section3745131173015" device-type="phone,2in1,tablet">TokenBinding<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3745131173015" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>Token binding协议，用于客户端与依赖方通信。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.6.1.6.1.1" width="25.25%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.6.1.2" width="15.989999999999998%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.6.1.3" width="8.4%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.6.1.4" width="7.82%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.6.1.5" width="42.54%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.25%"><p>status</p> </td> <td class="cellrowborder" width="15.989999999999998%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section15870155832812">TokenBindingStatus</a></p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>TokenBinding协议中客户端的绑定状态。</p> </td> </tr> <tr><td class="cellrowborder" width="25.25%"><p>id</p> </td> <td class="cellrowborder" width="15.989999999999998%"><p>string</p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>标识符。长度限制0到512。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1199618304321" device-type="phone,2in1,tablet">AttestationConveyancePreference<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1199618304321" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>供WebAuthn依赖方在生成凭据时参考的枚举值，用于指定凭据传递的首选项。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.6.1.4.1.1" width="25.75%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.4.1.2" width="23.14%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.4.1.3" width="51.11%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.75%"><p>NONE</p> </td> <td class="cellrowborder" width="23.14%"><p>'none'</p> </td> <td class="cellrowborder" width="51.11%"><p>依赖方对验证者证明不感兴趣，默认值为none。</p> </td> </tr> <tr><td class="cellrowborder" width="25.75%"><p>INDIRECT</p> </td> <td class="cellrowborder" width="23.14%"><p>'indirect'</p> </td> <td class="cellrowborder" width="51.11%"><p>间接依赖方倾向于提供可验证的证明声明文档，但允许客户决定如何获得这种证明声明。</p> </td> </tr> <tr><td class="cellrowborder" width="25.75%"><p>DIRECT</p> </td> <td class="cellrowborder" width="23.14%"><p>'direct'</p> </td> <td class="cellrowborder" width="51.11%"><p>直接依赖方希望接收验证者生成的证明声明。</p> </td> </tr> <tr><td class="cellrowborder" width="25.75%"><p>ENTERPRISE</p> </td> <td class="cellrowborder" width="23.14%"><p>'enterprise'</p> </td> <td class="cellrowborder" width="51.11%"><p>依赖方希望接收企业证明，企业证明是一个证明声明， 其中可能包括唯一标识认证者的信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section41573116347" device-type="phone,2in1,tablet">UserVerificationRequirement<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section41573116347" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>依赖方可能需要对某些操作进行用户鉴权（验证当前用户是否为用户）， 但不需要对其他操作进行验证。定义枚举类型是为了区分不同的需求级别。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.6.1.4.1.1" width="25.75%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.4.1.2" width="20.23%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.4.1.3" width="54.02%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.75%"><p>REQUIRED</p> </td> <td class="cellrowborder" width="20.23%"><p>'required'</p> </td> <td class="cellrowborder" width="54.02%"><p>需要进行用户验证。</p> </td> </tr> <tr><td class="cellrowborder" width="25.75%"><p>PREFERRED</p> </td> <td class="cellrowborder" width="20.23%"><p>'preferred'</p> </td> <td class="cellrowborder" width="54.02%"><p>在可能的情况下，依赖方优先处理操作的用户验证， 但如果响应没有设置用户验证标志，则不会失败。</p> </td> </tr> <tr><td class="cellrowborder" width="25.75%"><p>DISCOURAGED</p> </td> <td class="cellrowborder" width="20.23%"><p>'discouraged'</p> </td> <td class="cellrowborder" width="54.02%"><p>依赖方在操作过程中不希望使用用户鉴权。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section94101434361" device-type="phone,2in1,tablet">ResidentKeyRequirement<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section94101434361" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>标识是否需要可发现凭证的枚举。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.6.1.4.1.1" width="25.75%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.4.1.2" width="23.7%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.4.1.3" width="50.55%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.75%"><p>DISCOURAGED</p> </td> <td class="cellrowborder" width="23.7%"><p>'discouraged'</p> </td> <td class="cellrowborder" width="50.55%"><p>依赖方更倾向于创建服务器端凭证，但也可以接受客户端可发现的凭证。客户端和验证器应尽可能创建服务器端凭证。</p> </td> </tr> <tr><td class="cellrowborder" width="25.75%"><p>PREFERRED</p> </td> <td class="cellrowborder" width="23.7%"><p>'preferred'</p> </td> <td class="cellrowborder" width="50.55%"><p>依赖方强烈倾向于创建客户端可发现的凭证，但也可以接受服务器端凭证。</p> </td> </tr> <tr><td class="cellrowborder" width="25.75%"><p>REQUIRED</p> </td> <td class="cellrowborder" width="23.7%"><p>'required'</p> </td> <td class="cellrowborder" width="50.55%"><p>依赖方需要客户端可发现的凭证。如果无法创建客户端可发现的凭证，客户端必须返回错误。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section354238124118" device-type="phone,2in1,tablet">AuthenticatorAttachment<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section354238124118" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>认证器枚举。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.6.1.4.1.1" width="25.75%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.4.1.2" width="37.5%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.4.1.3" width="36.75%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.75%"><p>PLATFORM</p> </td> <td class="cellrowborder" width="37.5%"><p>'platform'</p> </td> <td class="cellrowborder" width="36.75%"><p>平台认证器，例如PIN码、指纹、人脸等。</p> </td> </tr> <tr><td class="cellrowborder" width="25.75%"><p>CROSS_PLATFORM</p> </td> <td class="cellrowborder" width="37.5%"><p>'cross-platform'</p> </td> <td class="cellrowborder" width="36.75%"><p>跨平台认证器，即漫游认证器，包括蓝牙、NFC、USB等。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section16855415432" device-type="phone,2in1,tablet">AuthenticatorSelectionCriteria<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16855415432" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>由webAuthn依赖方指定，与认证器有关。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.26.6.1.6.1.1" width="24.08%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.6.1.2" width="17.16%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.6.1.3" width="8.4%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.6.1.4" width="7.82%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.6.1.5" width="42.54%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="24.08%"><p>authenticatorAttachment</p> </td> <td class="cellrowborder" width="17.16%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section354238124118">AuthenticatorAttachment</a></p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>是</p> </td> <td class="cellrowborder" width="42.54%"><p>认证器附件。默认值为platform。</p> </td> </tr> <tr><td class="cellrowborder" width="24.08%"><p>residentKey</p> </td> <td class="cellrowborder" width="17.16%"><p>string</p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>是</p> </td> <td class="cellrowborder" width="42.54%"><p>常驻键。默认值为空。长度限制0到4096。</p> </td> </tr> <tr><td class="cellrowborder" width="24.08%"><p>requireResidentKey</p> </td> <td class="cellrowborder" width="17.16%"><p>boolean</p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>是</p> </td> <td class="cellrowborder" width="42.54%"><p>是否需要常驻键，true代表需要常驻键，false代表不需要。默认值为false。</p> </td> </tr> <tr><td class="cellrowborder" width="24.08%"><p>userVerification</p> </td> <td class="cellrowborder" width="17.16%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section41573116347">UserVerificationRequirement</a></p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>是</p> </td> <td class="cellrowborder" width="42.54%"><p>用户认证需求枚举。默认值为preferred。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section117661146498" device-type="phone,2in1,tablet">AuthenticatorTransport<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section117661146498" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>用于身份验证传输的枚举。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.27.6.1.4.1.1" width="28.87%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.4.1.2" width="13.99%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.4.1.3" width="57.14%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="28.87%"><p>USB</p> </td> <td class="cellrowborder" width="13.99%"><p>'usb'</p> </td> <td class="cellrowborder" width="57.14%"><p>通用串行总线。</p> </td> </tr> <tr><td class="cellrowborder" width="28.87%"><p>NFC</p> </td> <td class="cellrowborder" width="13.99%"><p>'nfc'</p> </td> <td class="cellrowborder" width="57.14%"><p>近场通信。</p> </td> </tr> <tr><td class="cellrowborder" width="28.87%"><p>BLE</p> </td> <td class="cellrowborder" width="13.99%"><p>'ble'</p> </td> <td class="cellrowborder" width="57.14%"><p>蓝牙。</p> </td> </tr> <tr><td class="cellrowborder" width="28.87%"><p>SMART_CARD</p> </td> <td class="cellrowborder" width="13.99%"><p>'smart-card'</p> </td> <td class="cellrowborder" width="57.14%"><p>智能卡。</p> </td> </tr> <tr><td class="cellrowborder" width="28.87%"><p>HYBRID</p> </td> <td class="cellrowborder" width="13.99%"><p>'hybrid'</p> </td> <td class="cellrowborder" width="57.14%"><p>混合。</p> </td> </tr> <tr><td class="cellrowborder" width="28.87%"><p>INTERNAL</p> </td> <td class="cellrowborder" width="13.99%"><p>'internal'</p> </td> <td class="cellrowborder" width="57.14%"><p>设备内置。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section453614462519" device-type="phone,2in1,tablet">PublicKeyCredentialDescriptor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section453614462519" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>注册或验证凭据的参数。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.28.6.1.6.1.1" width="21.12%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.6.1.2" width="20.119999999999997%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.6.1.3" width="8.4%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.6.1.4" width="7.82%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.6.1.5" width="42.54%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.12%"><p>type</p> </td> <td class="cellrowborder" width="20.119999999999997%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section384116164912">PublicKeyCredentialType</a></p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>凭证类型。</p> </td> </tr> <tr><td class="cellrowborder" width="21.12%"><p>id</p> </td> <td class="cellrowborder" width="20.119999999999997%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>凭据的标识符。</p> </td> </tr> <tr><td class="cellrowborder" width="21.12%"><p>transports</p> </td> <td class="cellrowborder" width="20.119999999999997%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section117661146498">AuthenticatorTransport</a>&gt;</p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>是</p> </td> <td class="cellrowborder" width="42.54%"><p>定义身份认证器访问类型，取值范围为<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section117661146498">AuthenticatorTransport</a>枚举，默认值为空列表。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section19820253379" device-type="phone,2in1,tablet">Algorithm<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section19820253379" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>算法枚举。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.29.6.1.4.1.1" width="28.87%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.4.1.2" width="13.99%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.4.1.3" width="57.14%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="28.87%"><p>ES256</p> </td> <td class="cellrowborder" width="13.99%"><p>-7</p> </td> <td class="cellrowborder" width="57.14%"><p>ES256算法。</p> </td> </tr> <tr><td class="cellrowborder" width="28.87%"><p>ES384</p> </td> <td class="cellrowborder" width="13.99%"><p>-35</p> </td> <td class="cellrowborder" width="57.14%"><p>ES384算法。</p> </td> </tr> <tr><td class="cellrowborder" width="28.87%"><p>ES512</p> </td> <td class="cellrowborder" width="13.99%"><p>-36</p> </td> <td class="cellrowborder" width="57.14%"><p>ES512算法。</p> </td> </tr> <tr><td class="cellrowborder" width="28.87%"><p>RS256</p> </td> <td class="cellrowborder" width="13.99%"><p>-257</p> </td> <td class="cellrowborder" width="57.14%"><p>RS256算法。</p> </td> </tr> <tr><td class="cellrowborder" width="28.87%"><p>RS384</p> </td> <td class="cellrowborder" width="13.99%"><p>-258</p> </td> <td class="cellrowborder" width="57.14%"><p>RS384算法。</p> </td> </tr> <tr><td class="cellrowborder" width="28.87%"><p>RS512</p> </td> <td class="cellrowborder" width="13.99%"><p>-259</p> </td> <td class="cellrowborder" width="57.14%"><p>RS512算法。</p> </td> </tr> <tr><td class="cellrowborder" width="28.87%"><p>PS256</p> </td> <td class="cellrowborder" width="13.99%"><p>-37</p> </td> <td class="cellrowborder" width="57.14%"><p>PS256算法。</p> </td> </tr> <tr><td class="cellrowborder" width="28.87%"><p>PS384</p> </td> <td class="cellrowborder" width="13.99%"><p>-38</p> </td> <td class="cellrowborder" width="57.14%"><p>PS384算法。</p> </td> </tr> <tr><td class="cellrowborder" width="28.87%"><p>PS512</p> </td> <td class="cellrowborder" width="13.99%"><p>-39</p> </td> <td class="cellrowborder" width="57.14%"><p>PS512算法。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section3221184619427" device-type="phone,2in1,tablet">PublicKeyCredentialHint<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3221184619427" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>用于公共密钥凭据提示的枚举。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.30.6.1.4.1.1" width="28.849999999999998%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.4.1.2" width="14.000000000000002%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.4.1.3" width="57.15%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="28.849999999999998%"><p>SECURITY_KEY</p> </td> <td class="cellrowborder" width="14.000000000000002%"><p>'security-key'</p> </td> <td class="cellrowborder" width="57.15%"><p>安全密钥。</p> </td> </tr> <tr><td class="cellrowborder" width="28.849999999999998%"><p>CLIENT_DEVICE</p> </td> <td class="cellrowborder" width="14.000000000000002%"><p>'client-device'</p> </td> <td class="cellrowborder" width="57.15%"><p>客户端设备。</p> </td> </tr> <tr><td class="cellrowborder" width="28.849999999999998%"><p>HYBRID</p> </td> <td class="cellrowborder" width="14.000000000000002%"><p>'hybrid'</p> </td> <td class="cellrowborder" width="57.15%"><p>混合。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section384116164912" device-type="phone,2in1,tablet">PublicKeyCredentialType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section384116164912" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>用于公共密钥凭证类型的枚举。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.31.6.1.4.1.1" width="28.83%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.4.1.2" width="14.02%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.4.1.3" width="57.15%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="28.83%"><p>PUBLIC_KEY</p> </td> <td class="cellrowborder" width="14.02%"><p>'public-key'</p> </td> <td class="cellrowborder" width="57.15%"><p>公共密钥。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section105667308366" device-type="phone,2in1,tablet">PublicKeyCredentialParameters<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section105667308366" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>注册或验证凭据的参数。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.32.6.1.6.1.1" width="21.12%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.6.1.2" width="20.119999999999997%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.6.1.3" width="8.4%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.6.1.4" width="7.82%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.6.1.5" width="42.54%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.12%"><p>type</p> </td> <td class="cellrowborder" width="20.119999999999997%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section384116164912">PublicKeyCredentialType</a></p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>凭证类型。</p> </td> </tr> <tr><td class="cellrowborder" width="21.12%"><p>alg</p> </td> <td class="cellrowborder" width="20.119999999999997%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section19820253379">Algorithm</a></p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>算法。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section151096116327" device-type="phone,2in1,tablet">PublicKeyCredentialUserEntity<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section151096116327" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>创建新凭据时用户的属性。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.33.6.1.6.1.1" width="21.11%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.6.1.2" width="20.13%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.6.1.3" width="8.4%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.6.1.4" width="7.82%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.6.1.5" width="42.54%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.11%"><p>id</p> </td> <td class="cellrowborder" width="20.13%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>凭据的标识符。长度限制0到64。</p> </td> </tr> <tr><td class="cellrowborder" width="21.11%"><p>displayName</p> </td> <td class="cellrowborder" width="20.13%"><p>string</p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>前台显示的用户名。长度限制0到512。</p> </td> </tr> <tr><td class="cellrowborder" width="21.11%"><p>name</p> </td> <td class="cellrowborder" width="20.13%"><p>string</p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>用户名。长度限制0到512。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section143231528100" device-type="phone,2in1,tablet">PublicKeyCredentialRpEntity<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section143231528100" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>创建新凭据时依赖方的属性。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.34.6.1.6.1.1" width="21.11%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.6.1.2" width="20.13%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.6.1.3" width="8.4%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.6.1.4" width="7.82%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.6.1.5" width="42.54%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.11%"><p>id</p> </td> <td class="cellrowborder" width="20.13%"><p>string</p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>是</p> </td> <td class="cellrowborder" width="42.54%"><p>凭据的标识符。默认值为空。长度限制0到512。</p> </td> </tr> <tr><td class="cellrowborder" width="21.11%"><p>name</p> </td> <td class="cellrowborder" width="20.13%"><p>string</p> </td> <td class="cellrowborder" width="8.4%"><p>否</p> </td> <td class="cellrowborder" width="7.82%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>用户名。长度限制0到512。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section155669563012" device-type="phone,2in1,tablet">PublicKeyCredentialCreationOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section155669563012" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>创建新身份验证凭据的选项。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.35.6.1.6.1.1" width="17.05577805997851%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.6.1.2" width="23.229461756373937%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.6.1.3" width="6.83794080296962%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.6.1.4" width="5.431278694930155%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.6.1.5" width="47.44554068574778%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="17.05577805997851%"><p>rp</p> </td> <td class="cellrowborder" width="23.229461756373937%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section143231528100">PublicKeyCredentialRpEntity</a></p> </td> <td class="cellrowborder" width="6.83794080296962%"><p>否</p> </td> <td class="cellrowborder" width="5.431278694930155%"><p>否</p> </td> <td class="cellrowborder" width="47.44554068574778%"><p>创建新凭证时依赖方属性。</p> </td> </tr> <tr><td class="cellrowborder" width="17.05577805997851%"><p>user</p> </td> <td class="cellrowborder" width="23.229461756373937%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section151096116327">PublicKeyCredentialUserEntity</a></p> </td> <td class="cellrowborder" width="6.83794080296962%"><p>否</p> </td> <td class="cellrowborder" width="5.431278694930155%"><p>否</p> </td> <td class="cellrowborder" width="47.44554068574778%"><p>创建新凭据时用户的属性。</p> </td> </tr> <tr><td class="cellrowborder" width="17.05577805997851%"><p>challenge</p> </td> <td class="cellrowborder" width="23.229461756373937%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="6.83794080296962%"><p>否</p> </td> <td class="cellrowborder" width="5.431278694930155%"><p>否</p> </td> <td class="cellrowborder" width="47.44554068574778%"><p>挑战值。长度限制16到512。</p> </td> </tr> <tr><td class="cellrowborder" width="17.05577805997851%"><p>pubKeyCredParams</p> </td> <td class="cellrowborder" width="23.229461756373937%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section105667308366">PublicKeyCredentialParameters</a>&gt;</p> </td> <td class="cellrowborder" width="6.83794080296962%"><p>否</p> </td> <td class="cellrowborder" width="5.431278694930155%"><p>否</p> </td> <td class="cellrowborder" width="47.44554068574778%"><p>身份验证凭据的附加参数列表。</p> </td> </tr> <tr><td class="cellrowborder" width="17.05577805997851%"><p>timeout</p> </td> <td class="cellrowborder" width="23.229461756373937%"><p>number</p> </td> <td class="cellrowborder" width="6.83794080296962%"><p>否</p> </td> <td class="cellrowborder" width="5.431278694930155%"><p>是</p> </td> <td class="cellrowborder" width="47.44554068574778%"><p>超时时间。默认值为300000ms。限制300s到600s。</p> </td> </tr> <tr><td class="cellrowborder" width="17.05577805997851%"><p>excludeCredentials</p> </td> <td class="cellrowborder" width="23.229461756373937%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section453614462519">PublicKeyCredentialDescriptor</a>&gt;</p> </td> <td class="cellrowborder" width="6.83794080296962%"><p>否</p> </td> <td class="cellrowborder" width="5.431278694930155%"><p>是</p> </td> <td class="cellrowborder" width="47.44554068574778%"><p>身份验证凭据的附加参数列表，默认值为空数组。</p> </td> </tr> <tr><td class="cellrowborder" width="17.05577805997851%"><p>authenticatorSelection</p> </td> <td class="cellrowborder" width="23.229461756373937%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section16855415432">AuthenticatorSelectionCriteria</a></p> </td> <td class="cellrowborder" width="6.83794080296962%"><p>否</p> </td> <td class="cellrowborder" width="5.431278694930155%"><p>是</p> </td> <td class="cellrowborder" width="47.44554068574778%"><p>身份验证器相关配置项。默认值为空。</p> </td> </tr> <tr><td class="cellrowborder" width="17.05577805997851%"><p>hints</p> </td> <td class="cellrowborder" width="23.229461756373937%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section3221184619427">PublicKeyCredentialHint</a>&gt;</p> </td> <td class="cellrowborder" width="6.83794080296962%"><p>否</p> </td> <td class="cellrowborder" width="5.431278694930155%"><p>是</p> </td> <td class="cellrowborder" width="47.44554068574778%"><p>提示。默认值为空数组。</p> </td> </tr> <tr><td class="cellrowborder" width="17.05577805997851%"><p>attestation</p> </td> <td class="cellrowborder" width="23.229461756373937%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section1199618304321">AttestationConveyancePreference</a></p> </td> <td class="cellrowborder" width="6.83794080296962%"><p>否</p> </td> <td class="cellrowborder" width="5.431278694930155%"><p>是</p> </td> <td class="cellrowborder" width="47.44554068574778%"><p>凭证首选项，默认值为“none”。</p> </td> </tr> <tr><td class="cellrowborder" width="17.05577805997851%"><p>attestationFormats</p> </td> <td class="cellrowborder" width="23.229461756373937%"><p>Array&lt;string&gt;</p> </td> <td class="cellrowborder" width="6.83794080296962%"><p>否</p> </td> <td class="cellrowborder" width="5.431278694930155%"><p>是</p> </td> <td class="cellrowborder" width="47.44554068574778%"><p>依赖方可以使用此可选成员来指定对验证器使用的验证声明格式的偏好，默认值为空数组。</p> </td> </tr> <tr><td class="cellrowborder" width="17.05577805997851%"><p>extensions</p> </td> <td class="cellrowborder" width="23.229461756373937%"><p>Map&lt;string, Object&gt;</p> </td> <td class="cellrowborder" width="6.83794080296962%"><p>否</p> </td> <td class="cellrowborder" width="5.431278694930155%"><p>是</p> </td> <td class="cellrowborder" width="47.44554068574778%"><p>扩展参数。默认值为空。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section17462111214112" device-type="phone,2in1,tablet">Uvm<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17462111214112" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>平台认证器的枚举值。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.36.6.1.4.1.1" width="25.75%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.4.1.2" width="37.54%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.4.1.3" width="36.71%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.75%"><p>UVM_FINGERPRINT</p> </td> <td class="cellrowborder" width="37.54%"><p>2</p> </td> <td class="cellrowborder" width="36.71%"><p>指纹</p> </td> </tr> <tr><td class="cellrowborder" width="25.75%"><p>UVM_PIN</p> </td> <td class="cellrowborder" width="37.54%"><p>4</p> </td> <td class="cellrowborder" width="36.71%"><p>PIN码</p> </td> </tr> <tr><td class="cellrowborder" width="25.75%"><p>UVM_FACE</p> </td> <td class="cellrowborder" width="37.54%"><p>16</p> </td> <td class="cellrowborder" width="36.71%"><p>人脸</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section44620019103" device-type="phone,2in1,tablet">ClientCapability<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section44620019103" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>当前设备/版本支持的认证能力的枚举值。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.37.6.1.4.1.1" width="27.700000000000003%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.4.1.2" width="35.55%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.4.1.3" width="36.75%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="27.700000000000003%"><p>CONDITIONAL_CREATE</p> </td> <td class="cellrowborder" width="35.55%"><p>'conditionalCreate'</p> </td> <td class="cellrowborder" width="36.75%"><p>通行密钥注册</p> </td> </tr> <tr><td class="cellrowborder" width="27.700000000000003%"><p>CONDITIONAL_GET</p> </td> <td class="cellrowborder" width="35.55%"><p>'conditionalGet'</p> </td> <td class="cellrowborder" width="36.75%"><p>通行密钥认证</p> </td> </tr> <tr><td class="cellrowborder" width="27.700000000000003%"><p>HYBRID_TRANSPORT</p> </td> <td class="cellrowborder" width="35.55%"><p>'hybridTransport'</p> </td> <td class="cellrowborder" width="36.75%"><p>漫游认证</p> </td> </tr> <tr><td class="cellrowborder" width="27.700000000000003%"><p>PASSKEY_PLATFORM_AUTHENTICATOR</p> </td> <td class="cellrowborder" width="35.55%"><p>'passkeyPlatformAuthenticator'</p> </td> <td class="cellrowborder" width="36.75%"><p>通行密钥同步</p> </td> </tr> <tr><td class="cellrowborder" width="27.700000000000003%"><p>USER_VERIFYING_PLATFORM_AUTHENTICATOR</p> </td> <td class="cellrowborder" width="35.55%"><p>'userVerifyingPlatformAuthenticator'</p> </td> <td class="cellrowborder" width="36.75%"><p>用户确认</p> </td> </tr> <tr><td class="cellrowborder" width="27.700000000000003%"><p>RELATED_ORIGINS</p> </td> <td class="cellrowborder" width="35.55%"><p>'relatedOrigins'</p> </td> <td class="cellrowborder" width="36.75%"><p>APP和网页关联</p> </td> </tr> <tr><td class="cellrowborder" width="27.700000000000003%"><p>SIGNAL_ALL_ACCEPTED_CREDENTIALS</p> </td> <td class="cellrowborder" width="35.55%"><p>'signalAllAcceptedCredentials'</p> </td> <td class="cellrowborder" width="36.75%"><p>发送所有接受的凭据。</p> </td> </tr> <tr><td class="cellrowborder" width="27.700000000000003%"><p>SIGNAL_CURRENT_USER_DETAILS</p> </td> <td class="cellrowborder" width="35.55%"><p>'signalCurrentUserDetails'</p> </td> <td class="cellrowborder" width="36.75%"><p>发送当前用户详细信息。</p> </td> </tr> <tr><td class="cellrowborder" width="27.700000000000003%"><p>SIGNAL_UNKNOWN_CREDENTIAL</p> </td> <td class="cellrowborder" width="35.55%"><p>'signalUnknownCredential'</p> </td> <td class="cellrowborder" width="36.75%"><p>发送未知凭据。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section107571524911" device-type="phone,2in1,tablet">AuthenticatorMetadata<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section107571524911" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>认证器元数据。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.38.6.1.6.1.1" width="28.82%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.6.1.2" width="12.42%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.6.1.3" width="8.43%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.6.1.4" width="7.79%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.6.1.5" width="42.54%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="28.82%"><p>aaguid</p> </td> <td class="cellrowborder" width="12.42%"><p>string</p> </td> <td class="cellrowborder" width="8.43%"><p>是</p> </td> <td class="cellrowborder" width="7.79%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>认证器唯一标识。长度限制0到512。</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>uvm</p> </td> <td class="cellrowborder" width="12.42%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section17462111214112">Uvm</a></p> </td> <td class="cellrowborder" width="8.43%"><p>是</p> </td> <td class="cellrowborder" width="7.79%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>支持的平台认证器类型，人脸、指纹、PIN码</p> </td> </tr> <tr><td class="cellrowborder" width="28.82%"><p>isAvailable</p> </td> <td class="cellrowborder" width="12.42%"><p>boolean</p> </td> <td class="cellrowborder" width="8.43%"><p>是</p> </td> <td class="cellrowborder" width="7.79%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>true表示该认证器可用，false表示该认证器不可用</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1122315266414" device-type="phone,2in1,tablet">getClientCapabilities<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1122315266414" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getClientCapabilities(context: common.Context): Promise&lt;Map&lt;ClientCapability, boolean&gt;&gt;</p> <p>查询当前设备/版本支持的认证能力列表，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.1" width="12.438756124387561%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.2" width="17.458254174582542%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.3" width="8.279172082791721%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.4" width="61.823817618238174%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="12.438756124387561%"><p>context</p> </td> <td class="cellrowborder" width="17.458254174582542%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="8.279172082791721%"><p>是</p> </td> <td class="cellrowborder" width="61.823817618238174%"><p>当前Ability的上下文</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.1" width="24.91%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.2" width="75.09%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="24.91%"><p>Promise&lt;Map&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section44620019103">ClientCapability</a>, boolean&gt;&gt;</p> </td> <td class="cellrowborder" width="75.09%"><p>Promise对象，返回能力枚举的列表，用true和false代表支持或不支持。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-passkey">通行密钥服务错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.13.1.3.1.1" width="49.95%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.39.13.1.3.1.2" width="50.05%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="49.95%"><p>801</p> </td> <td class="cellrowborder" width="50.05%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300007</p> </td> <td class="cellrowborder" width="50.05%"><p>Unknown error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300011</p> </td> <td class="cellrowborder" width="50.05%"><p>Failed to connect to the service.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例: </strong><div _ngcontent-tre-c106="" class="highlight-div"><div _ngcontent-tre-c106="" class="highlight-div-header"><div _ngcontent-tre-c106="" class="highlight-div-header-left"><div _ngcontent-tre-c106="" class="handle-button expand-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tre-c106="" class="highlight-div-header-right"><div _ngcontent-tre-c106="" class="handle-button ai-button"></div><div _ngcontent-tre-c106="" class="handle-button line-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tre-c106="" class="handle-button theme-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tre-c106="" class="handle-button copy-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">common </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.AbilityKit'</span></span></li><li>
</li><li><span class=""><span class="hljs-attr">uiContext1</span></span><span class="">: </span><span class=""><span class="hljs-title class_">UIContext</span> </span><span class="">= </span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-title function_">getUIContext</span></span><span class="">()</span><span class="">;</span></li><li><span class=""><span class="hljs-attr">uiContext</span></span><span class="">: </span><span class="">common</span><span class="">.</span><span class=""><span class="hljs-property">UIAbilityContext</span> </span><span class="">= </span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">uiContext1</span></span><span class="">.</span><span class=""><span class="hljs-title function_">getHostContext</span></span><span class="">() </span><span class="hljs-keyword">as</span> <span class="">common</span><span class="">.</span><span class=""><span class="hljs-property">UIAbilityContext</span></span><span class="">;</span> <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">使用</span></span><span class=""><span class="hljs-comment">uiContext</span></span><span class=""><span class="hljs-comment">需要获取页面</span></span><span class=""><span class="hljs-comment">UIAbility</span></span><span class=""><span class="hljs-comment">的</span></span><span class=""><span class="hljs-comment">Context</span></span><span class=""><span class="hljs-comment">，一个页面获取一次即可</span></span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">clientCapabilities</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Map</span></span><span class="">&lt;</span><span class="">fido2</span><span class="">.</span><span class=""><span class="hljs-property">ClientCapability</span></span><span class="">, </span><span class=""><span class="hljs-built_in">boolean</span></span><span class="">&gt;</span><span class=""> =</span></li><li>      <span class="hljs-keyword">await</span> <span class="">fido2</span><span class="">.</span><span class=""><span class="hljs-title function_">getClientCapabilities</span></span><span class="">(<span class="hljs-variable language_">this</span>.</span><span class=""><span class="hljs-property">uiContext</span></span><span class="">)</span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取</span></span><span class=""><span class="hljs-comment">认证能力列表</span></span></li><li><span class="">    <span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">"Succeeded in doing getClientCapabilities."</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">error</span><span class="">) </span><span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">err</span></span><span class="">: </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">= </span><span class="">error </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">BusinessError</span></span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`Failed to call discover. Code is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, message is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>}</li></ol></pre></div></div> </div> <p></p> </div> <div class="tiledSection"><h2 id="section36194215542" device-type="phone,2in1,tablet">getPlatformAuthenticators<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section36194215542" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getPlatformAuthenticators(context: common.Context): Promise&lt;Array&lt;AuthenticatorMetadata&gt;&gt;</p> <p>查询当前支持的平台认证器能力列表（人脸、指纹、PIN码），使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.1" width="12.438756124387561%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.2" width="17.458254174582542%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.3" width="8.289171082891711%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.4" width="61.813818618138185%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="12.438756124387561%"><p>context</p> </td> <td class="cellrowborder" width="17.458254174582542%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="8.289171082891711%"><p>是</p> </td> <td class="cellrowborder" width="61.813818618138185%"><p>当前Ability的上下文</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.10.1.3.1.1" width="38.68%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.40.10.1.3.1.2" width="61.31999999999999%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="38.68%"><p>Promise&lt;Array&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section107571524911">AuthenticatorMetadata</a>&gt;&gt;</p> </td> <td class="cellrowborder" width="61.31999999999999%"><p>Promise对象，返回认证器元数据列表</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-passkey">通行密钥服务错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.13.1.3.1.1" width="49.95%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.40.13.1.3.1.2" width="50.05%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="49.95%"><p>801</p> </td> <td class="cellrowborder" width="50.05%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300007</p> </td> <td class="cellrowborder" width="50.05%"><p>Unknown error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300011</p> </td> <td class="cellrowborder" width="50.05%"><p>Failed to connect to the service.</p> </td> </tr>  </tbody></table></div> </div> <p></p> <div class="p"><strong>示例: </strong><div _ngcontent-tre-c106="" class="highlight-div"><div _ngcontent-tre-c106="" class="highlight-div-header"><div _ngcontent-tre-c106="" class="highlight-div-header-left"><div _ngcontent-tre-c106="" class="handle-button expand-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tre-c106="" class="highlight-div-header-right"><div _ngcontent-tre-c106="" class="handle-button ai-button"></div><div _ngcontent-tre-c106="" class="handle-button line-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tre-c106="" class="handle-button theme-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tre-c106="" class="handle-button copy-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">common </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.AbilityKit'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-attr">uiContext1</span></span><span class="">: </span><span class=""><span class="hljs-title class_">UIContext</span> </span><span class="">= </span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-title function_">getUIContext</span></span><span class="">()</span><span class="">;</span></li><li><span class=""><span class="hljs-attr">uiContext</span></span><span class="">: </span><span class="">common</span><span class="">.</span><span class=""><span class="hljs-property">UIAbilityContext</span> </span><span class="">= </span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">uiContext1</span></span><span class="">.</span><span class=""><span class="hljs-title function_">getHostContext</span></span><span class="">() </span><span class="hljs-keyword">as</span> <span class="">common</span><span class="">.</span><span class=""><span class="hljs-property">UIAbilityContext</span></span><span class="">;</span> <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">使用</span></span><span class=""><span class="hljs-comment">uiContext</span></span><span class=""><span class="hljs-comment">需要获取页面</span></span><span class=""><span class="hljs-comment">UIAbility</span></span><span class=""><span class="hljs-comment">的</span></span><span class=""><span class="hljs-comment">Context</span></span><span class=""><span class="hljs-comment">，一个页面获取一次即可</span></span></li><li>
</li><li><span class="hljs-keyword">try</span>{</li><li>  <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">platformAuthenticators</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Array</span></span><span class="">&lt;</span><span class="">fido2</span><span class="">.</span><span class=""><span class="hljs-property">AuthenticatorMetadata</span></span><span class="">&gt;</span><span class=""> =</span></li><li>    <span class="hljs-keyword">await</span> <span class="">fido2</span><span class="">.</span><span class=""><span class="hljs-title function_">getPlatformAuthenticators</span></span><span class="">(</span><span class=""><span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span></span><span class="">)</span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取平台认证器信息</span></span></li><li><span class="">  <span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">"Succeeded in doing getPlatformAuthenticators."</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">error</span><span class="">) </span><span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">err</span></span><span class="">: </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">= </span><span class="">error </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">BusinessError</span></span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`Failed to call discover. Code is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, message is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1447385117810" device-type="phone,2in1,tablet">register<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1447385117810" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>register(context: common.Context, options: CredentialCreationOptions, tokenBinding?: TokenBinding): Promise&lt;PublicKeyAttestationCredential&gt;</p> <p>进行通行密钥的注册，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.1" width="15.808419158084192%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.2" width="20.857914208579142%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.3" width="9.469053094690532%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.4" width="53.86461353864613%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15.808419158084192%"><p>context</p> </td> <td class="cellrowborder" width="20.857914208579142%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="9.469053094690532%"><p>是</p> </td> <td class="cellrowborder" width="53.86461353864613%"><p>当前Ability的上下文</p> </td> </tr> <tr><td class="cellrowborder" width="15.808419158084192%"><p>options</p> </td> <td class="cellrowborder" width="20.857914208579142%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section3125554145615">CredentialCreationOptions</a></p> </td> <td class="cellrowborder" width="9.469053094690532%"><p>是</p> </td> <td class="cellrowborder" width="53.86461353864613%"><p>注册报文选项</p> </td> </tr> <tr><td class="cellrowborder" width="15.808419158084192%"><p>tokenBinding</p> </td> <td class="cellrowborder" width="20.857914208579142%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section3745131173015">TokenBinding</a></p> </td> <td class="cellrowborder" width="9.469053094690532%"><p>否</p> </td> <td class="cellrowborder" width="53.86461353864613%"><p>通道参数，默认值为空。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.10.1.3.1.1" width="32.83%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.10.1.3.1.2" width="67.17%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="32.83%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section10797172295315">PublicKeyAttestationCredential</a>&gt;</p> </td> <td class="cellrowborder" width="67.17%"><p>Promise对象，返回注册返回参数</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-passkey">通行密钥服务错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.13.1.3.1.1" width="49.95%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.13.1.3.1.2" width="50.05%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="49.95%"><p>801</p> </td> <td class="cellrowborder" width="50.05%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300001</p> </td> <td class="cellrowborder" width="50.05%"><p>The system does not support.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300002</p> </td> <td class="cellrowborder" width="50.05%"><p>Invalid state.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300003</p> </td> <td class="cellrowborder" width="50.05%"><p>System integrity check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300004</p> </td> <td class="cellrowborder" width="50.05%"><p>User abort.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300005</p> </td> <td class="cellrowborder" width="50.05%"><p>Time out.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300006</p> </td> <td class="cellrowborder" width="50.05%"><p>Encoding error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300007</p> </td> <td class="cellrowborder" width="50.05%"><p>Unknown error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300008</p> </td> <td class="cellrowborder" width="50.05%"><p>The constraint condition is incorrect.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300009</p> </td> <td class="cellrowborder" width="50.05%"><p>Data error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300010</p> </td> <td class="cellrowborder" width="50.05%"><p>User Rejects.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300011</p> </td> <td class="cellrowborder" width="50.05%"><p>Failed to connect to the service.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300012</p> </td> <td class="cellrowborder" width="50.05%"><p>The number of credentials has reached the maximum limit.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例: </strong><div _ngcontent-tre-c106="" class="highlight-div"><div _ngcontent-tre-c106="" class="highlight-div-header"><div _ngcontent-tre-c106="" class="highlight-div-header-left"><div _ngcontent-tre-c106="" class="handle-button expand-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tre-c106="" class="highlight-div-header-right"><div _ngcontent-tre-c106="" class="handle-button ai-button"></div><div _ngcontent-tre-c106="" class="handle-button line-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tre-c106="" class="handle-button theme-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tre-c106="" class="handle-button copy-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">common </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.AbilityKit'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-attr">uiContext1</span></span><span class="">: </span><span class=""><span class="hljs-title class_">UIContext</span> </span><span class="">= </span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-title function_">getUIContext</span></span><span class="">()</span><span class="">;</span></li><li><span class=""><span class="hljs-attr">uiContext</span></span><span class="">: </span><span class="">common</span><span class="">.</span><span class=""><span class="hljs-property">UIAbilityContext</span> </span><span class="">= </span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">uiContext1</span></span><span class="">.</span><span class=""><span class="hljs-title function_">getHostContext</span></span><span class="">() </span><span class="hljs-keyword">as</span> <span class="">common</span><span class="">.</span><span class=""><span class="hljs-property">UIAbilityContext</span></span><span class="">;</span> <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">使用</span></span><span class=""><span class="hljs-comment">uiContext</span></span><span class=""><span class="hljs-comment">需要获取页面</span></span><span class=""><span class="hljs-comment">UIAbility</span></span><span class=""><span class="hljs-comment">的</span></span><span class=""><span class="hljs-comment">Context</span></span><span class=""><span class="hljs-comment">，一个页面获取一次即可</span></span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">credentialCreationOp</span></span><span class="">: </span><span class="">fido2</span><span class="">.</span><span class=""><span class="hljs-property">CredentialCreationOptions</span> </span><span class="">= </span><span class="">{</span></li><li>  <span class="">  <span class="hljs-attr">publicKey</span></span><span class="">: </span><span class="">pkOptions </span><span class=""><span class="hljs-comment">// pkOptions</span></span><span class=""><span class="hljs-comment">为从</span></span><span class=""><span class="hljs-comment">FIDO</span></span><span class=""><span class="hljs-comment">服务器获取的注册报文</span></span></li><li><span class="">  } </span><span class=""><span class="hljs-comment">// credentialCreationOp</span></span><span class=""><span class="hljs-comment">为应用组装的注册信息</span></span></li><li>  <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">publicKeyAttestationCredential</span></span><span class="">: </span><span class="">fido2</span><span class="">.</span><span class=""><span class="hljs-property">PublicKeyAttestationCredential</span> </span><span class="">=</span></li><li>    <span class="hljs-keyword">await</span> <span class="">fido2</span><span class="">.</span><span class=""><span class="hljs-title function_">register</span></span><span class="">(</span><span class=""><span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span></span><span class="">, </span><span class="">credentialCreationOp</span><span class="">)</span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">进行</span></span><span class=""><span class="hljs-comment">FIDO2</span></span><span class=""><span class="hljs-comment">注册</span></span></li><li><span class="">  <span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">"Succeeded in doing register."</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">error</span><span class="">) </span><span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">err</span></span><span class="">: </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">= </span><span class="">error </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">BusinessError</span></span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`Failed to call discover. Code is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, message is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section193521359131510" device-type="phone,2in1,tablet">authenticate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section193521359131510" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>authenticate(context: common.Context, options: CredentialRequestOptions, tokenBinding?: TokenBinding): Promise&lt;PublicKeyAssertionCredential&gt;</p> <p>进行通行密钥的认证，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO2</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.1" width="10.58894110588941%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.2" width="21.207879212078794%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.3" width="6.37936206379362%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.4" width="61.823817618238174%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.58894110588941%"><p>context</p> </td> <td class="cellrowborder" width="21.207879212078794%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="6.37936206379362%"><p>是</p> </td> <td class="cellrowborder" width="61.823817618238174%"><p>当前Ability的上下文</p> </td> </tr> <tr><td class="cellrowborder" width="10.58894110588941%"><p>options</p> </td> <td class="cellrowborder" width="21.207879212078794%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section433810416530">CredentialRequestOptions</a></p> </td> <td class="cellrowborder" width="6.37936206379362%"><p>是</p> </td> <td class="cellrowborder" width="61.823817618238174%"><p>认证报文选项</p> </td> </tr> <tr><td class="cellrowborder" width="10.58894110588941%"><p>tokenBinding</p> </td> <td class="cellrowborder" width="21.207879212078794%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section3745131173015">TokenBinding</a></p> </td> <td class="cellrowborder" width="6.37936206379362%"><p>否</p> </td> <td class="cellrowborder" width="61.823817618238174%"><p>通道参数，默认值为空。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.10.1.3.1.1" width="37.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.42.10.1.3.1.2" width="62.529999999999994%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="37.47%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-passkey-api#section16498195211554">PublicKeyAssertionCredential</a>&gt;</p> </td> <td class="cellrowborder" width="62.529999999999994%"><p>Promise对象，返回认证返回参数</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-passkey">通行密钥服务错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.13.1.3.1.1" width="49.95%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.42.13.1.3.1.2" width="50.05%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="49.95%"><p>801</p> </td> <td class="cellrowborder" width="50.05%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300002</p> </td> <td class="cellrowborder" width="50.05%"><p>Invalid state.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300003</p> </td> <td class="cellrowborder" width="50.05%"><p>System integrity check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300004</p> </td> <td class="cellrowborder" width="50.05%"><p>User abort.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300005</p> </td> <td class="cellrowborder" width="50.05%"><p>Time out.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300006</p> </td> <td class="cellrowborder" width="50.05%"><p>Encoding error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300007</p> </td> <td class="cellrowborder" width="50.05%"><p>Unknown error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300009</p> </td> <td class="cellrowborder" width="50.05%"><p>Data error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300010</p> </td> <td class="cellrowborder" width="50.05%"><p>User Rejects.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021300011</p> </td> <td class="cellrowborder" width="50.05%"><p>Failed to connect to the service.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021310001</p> </td> <td class="cellrowborder" width="50.05%"><p>Invalid CTAP command.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021310002</p> </td> <td class="cellrowborder" width="50.05%"><p>The command contains invalid parameters.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021310003</p> </td> <td class="cellrowborder" width="50.05%"><p>Invalid message or attribute length.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021310004</p> </td> <td class="cellrowborder" width="50.05%"><p>Invalid CBOR or unpredictable error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021310005</p> </td> <td class="cellrowborder" width="50.05%"><p>Failed to parse the CBOR.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021310006</p> </td> <td class="cellrowborder" width="50.05%"><p>Not found valid credentials.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021310007</p> </td> <td class="cellrowborder" width="50.05%"><p>Not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021310008</p> </td> <td class="cellrowborder" width="50.05%"><p>User verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1021310009</p> </td> <td class="cellrowborder" width="50.05%"><p>Other error.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例: </strong><div _ngcontent-tre-c106="" class="highlight-div"><div _ngcontent-tre-c106="" class="highlight-div-header"><div _ngcontent-tre-c106="" class="highlight-div-header-left"><div _ngcontent-tre-c106="" class="handle-button expand-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tre-c106="" class="highlight-div-header-right"><div _ngcontent-tre-c106="" class="handle-button ai-button"></div><div _ngcontent-tre-c106="" class="handle-button line-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tre-c106="" class="handle-button theme-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tre-c106="" class="handle-button copy-button"><div _ngcontent-tre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">common </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.AbilityKit'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-attr">uiContext1</span></span><span class="">: </span><span class=""><span class="hljs-title class_">UIContext</span> </span><span class="">= </span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-title function_">getUIContext</span></span><span class="">()</span><span class="">;</span></li><li><span class=""><span class="hljs-attr">uiContext</span></span><span class="">: </span><span class="">common</span><span class="">.</span><span class=""><span class="hljs-property">UIAbilityContext</span> </span><span class="">= </span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">uiContext1</span></span><span class="">.</span><span class=""><span class="hljs-title function_">getHostContext</span></span><span class="">() </span><span class="hljs-keyword">as</span> <span class="">common</span><span class="">.</span><span class=""><span class="hljs-property">UIAbilityContext</span></span><span class="">;</span> <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">使用</span></span><span class=""><span class="hljs-comment">uiContext</span></span><span class=""><span class="hljs-comment">需要获取页面</span></span><span class=""><span class="hljs-comment">UIAbility</span></span><span class=""><span class="hljs-comment">的</span></span><span class=""><span class="hljs-comment">Context</span></span><span class=""><span class="hljs-comment">，一个页面获取一次即可</span></span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">authCredentialRequestOptions</span></span><span class="">: </span><span class="">fido2</span><span class="">.</span><span class=""><span class="hljs-property">CredentialRequestOptions</span> </span><span class="">= </span><span class="">{</span></li><li>  <span class="">  <span class="hljs-attr">publicKey</span></span><span class="">: </span><span class="">authPub</span><span class="">,</span> <span class=""><span class="hljs-comment">// authPub</span></span><span class=""><span class="hljs-comment">为从</span></span><span class=""><span class="hljs-comment">FIDO</span></span><span class=""><span class="hljs-comment">服务器获取的认证报文</span></span></li><li>  <span class="">  <span class="hljs-attr">mediation</span></span><span class="">: </span><span class=""><span class="hljs-string">"optional"</span> </span><span class="hljs-keyword">as</span> <span class="">fido2</span><span class="">.</span><span class=""><span class="hljs-property">CredentialMediationRequirement</span></span> <span class=""><span class="hljs-comment">// </span></span></li><li><span class="">  } </span><span class=""><span class="hljs-comment">// authCredentialRequestOptions</span></span><span class=""><span class="hljs-comment">为应用组装的认证信息</span></span></li><li>  <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">pkAssertionCredential</span></span><span class="">: </span><span class="">fido2</span><span class="">.</span><span class=""><span class="hljs-property">PublicKeyAssertionCredential</span> </span><span class="">=</span></li><li>    <span class="hljs-keyword">await</span> <span class="">fido2</span><span class="">.</span><span class=""><span class="hljs-title function_">authenticate</span></span><span class="">(<span class="hljs-variable language_">this</span>.</span><span class=""><span class="hljs-property">uiContext</span></span><span class="">, </span><span class="">authCredentialRequestOptions</span><span class="">)</span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">进行</span></span><span class=""><span class="hljs-comment">FIDO2</span></span><span class=""><span class="hljs-comment">认证</span></span></li><li><span class="">  <span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">"Succeeded in doing authenticate."</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">error</span><span class="">) </span><span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">err</span></span><span class="">: </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">= </span><span class="">error </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">BusinessError</span></span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`Failed to call discover. Code is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, message is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>}</li></ol></pre></div></div> </div> </div> <p></p> </div> <div></div></div>