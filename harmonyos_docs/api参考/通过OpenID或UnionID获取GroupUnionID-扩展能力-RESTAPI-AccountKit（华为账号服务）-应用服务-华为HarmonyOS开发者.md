<h1 _ngcontent-arn-c119="" class="doc-title ng-star-inserted" title="通过OpenID或UnionID获取GroupUnionID"> 通过OpenID或UnionID获取GroupUnionID </h1>

<div _ngcontent-arn-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">      <p>为了更安全的网络访问，请务必升级到TLS1.2版本。若使用协议是TLS1.0、TLS1.1或规定外的加密套件，可能无法正常访问华为账号服务。</p>      <p>关于TLS1.2协议及加密套件的信息，可以点击这里进行详细了解：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-common#section1329115361128">TLS协议及加密套件</a>。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="section1106154520383">功能介绍<i class="anchor-icon anchor-icon-link" anchorid="section1106154520383" tips="复制节点链接"></i></h2>          <p>应用服务端调用华为账号服务的接口，通过用户的OpenID或UnionID获取GroupUnionID信息。</p>    </div>    <div class="tiledSection">     <h2 id="section15696259396">场景描述<i class="anchor-icon anchor-icon-link" anchorid="section15696259396" tips="复制节点链接"></i></h2>          <p>不同开发者的应用可通过GroupUnionID关联用户数据，实现数据互通。如果需要实现数据互通的不同开发者应用已具备用户OpenID或UnionID，可以通过该接口批量将用户OpenID或UnionID转换为GroupUnionID。</p>    </div>    <div class="tiledSection">     <h2 id="section1216822193912">使用约束<i class="anchor-icon anchor-icon-link" anchorid="section1216822193912" tips="复制节点链接"></i></h2>          <ul>      <li>需确保调用端网络正常。</li>      <li>仅对企业开发者开放。</li>      <li>开发者账号必须加入关联主体账号组。具体可通过<a href="https://developer.huawei.com/consumer/cn/doc/start/cag-0000001265390541" target="_blank">创建账号组</a>创建关联主体账号组，然后在关联主体账号组中<a href="https://developer.huawei.com/consumer/cn/doc/start/aai-0000001265430513" target="_blank">添加账号组成员</a>。</li>      <li>仅能获取当前应用的用户OpenID、UnionID对应的GroupUnionID。</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="section1429712382397">接口原型<i class="anchor-icon anchor-icon-link" anchorid="section1429712382397" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table>               <tbody><tr>         <th class="firstcol" id="mcps1.3.5.2.1.3.1.1" width="18.740000000000002%">          <p><strong>承载协议</strong></p></th>         <td class="cellrowborder" width="81.26%">          <p>HTTPS POST</p></td>        </tr>        <tr>         <th class="firstcol" id="mcps1.3.5.2.1.3.2.1" width="18.740000000000002%">          <p><strong>接口方向</strong></p></th>         <td class="cellrowborder" width="81.26%">          <p><span style="color: rgb(36,39,40);">开发者服务器-</span><span style="color: rgb(36,39,40);">&gt;</span><span style="color: rgb(36,39,40);">华为账号服务器</span></p></td>        </tr>        <tr>         <th class="firstcol" id="mcps1.3.5.2.1.3.3.1" width="18.740000000000002%">          <p><strong>接口URL</strong></p></th>         <td class="cellrowborder" width="81.26%">          <p>https://account-api.cloud.huawei.com/oauth2/v6/groupUnionId/batchGet</p></td>        </tr>        <tr>         <th class="firstcol" id="mcps1.3.5.2.1.3.4.1" width="18.740000000000002%">          <p><strong>数据格式</strong></p></th>         <td class="cellrowborder" width="81.26%">          <p>请求消息：<span style="color: rgb(36,39,40);">Content-Type: application/json</span>;charset=utf-8</p>          <p>响应消息：Content-Type: <span style="color: rgb(36,39,40);">application/json</span>;charset=utf-8</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section294573564019">请求参数<i class="anchor-icon anchor-icon-link" anchorid="section294573564019" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section191012432556" class="firsth2">Request Header<i class="anchor-icon anchor-icon-link" anchorid="section191012432556" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.1" width="20.562056205620564%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.2" width="19.781978197819782%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.3" width="21.322132213221323%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.4" width="38.33383338333833%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>Content-Type</p></td>         <td class="cellrowborder" width="19.781978197819782%">          <p>是</p></td>         <td class="cellrowborder" width="21.322132213221323%">          <p>String</p></td>         <td class="cellrowborder" width="38.33383338333833%">          <p>取值为：<span style="color: rgb(36,39,40);">application/json</span>;charset=utf-8。</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p>Request Body传参，请务必遵循此请求头格式，否则可能导致请求失败，具体传参方式可参考<a href="/consumer/cn/doc/harmonyos-references/account-api-get-groupunionid#section2649820204212">示例代码</a>。</p>           </div></div></div></td>        </tr>        <tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>Authorization</p></td>         <td class="cellrowborder" width="19.781978197819782%">          <p>是</p></td>         <td class="cellrowborder" width="21.322132213221323%">          <p>String</p></td>         <td class="cellrowborder" width="38.33383338333833%">          <p>接口的访问凭证，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-obtain-app-token">获取应用级凭证</a>获取的Access Token。</p>          <p>传参格式：Bearer ${Access Token}</p>          <p>样例：Bearer DgEEn******Y+Aj==</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section1412411467550">Request Body<i class="anchor-icon anchor-icon-link" anchorid="section1412411467550" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.1" width="20.562056205620564%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.2" width="19.781978197819782%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.3" width="21.04210421042104%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.4" width="38.613861386138616%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>openIdList</p></td>         <td class="cellrowborder" width="19.781978197819782%">          <p>否</p></td>         <td class="cellrowborder" width="21.04210421042104%">          <p>List&lt;String&gt;</p></td>         <td class="cellrowborder" width="38.613861386138616%">          <p>用户的OpenID列表，每次请求最大支持传100个OpenID。</p>          <p>请求参数unionIdList为空时，此参数必填。</p>          <p>请求参数unionIdList不为空时，此参数不允许填写。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>unionIdList</p></td>         <td class="cellrowborder" width="19.781978197819782%">          <p>否</p></td>         <td class="cellrowborder" width="21.04210421042104%">          <p>List&lt;String&gt;</p></td>         <td class="cellrowborder" width="38.613861386138616%">          <p>用户的UnionID列表，每次请求最大支持传100个UnionID。</p>          <p>当请求参数openIdList为空时，此参数必填。</p>          <p>当请求参数openIdList不为空时，此参数不允许填写。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1729194519408">请求示例<i class="anchor-icon anchor-icon-link" anchorid="section1729194519408" tips="复制节点链接"></i></h2>          <p>请通过POST方式调用，示例如下：</p>     <div _ngcontent-arn-c106="" class="highlight-div"><div _ngcontent-arn-c106="" class="highlight-div-header"><div _ngcontent-arn-c106="" class="highlight-div-header-left"><div _ngcontent-arn-c106="" class="handle-button expand-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-arn-c106="" class="highlight-div-header-right"><div _ngcontent-arn-c106="" class="handle-button ai-button"></div><div _ngcontent-arn-c106="" class="handle-button line-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-arn-c106="" class="handle-button theme-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-arn-c106="" class="handle-button copy-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-arn-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">POST</span> /<span class="hljs-variable">oauth2</span>/<span class="hljs-variable">v6</span>/<span class="hljs-variable">groupUnionId</span>/<span class="hljs-variable">batchGet</span> <span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.1</span></li><li><span class="hljs-variable">Host</span>: <span class="hljs-title class_">account</span>-<span class="hljs-title class_">api</span>.<span class="hljs-title class_">cloud</span>.<span class="hljs-title class_">huawei</span>.<span class="hljs-title class_">com</span></li><li><span class="hljs-variable">Content</span>-<span class="hljs-variable">Type</span>: <span class="hljs-title class_">application</span>/<span class="hljs-variable">json</span></li><li><span class="hljs-variable">Authorization</span>：<span class="hljs-variable">Bearer</span> *****</li><li>
</li><li>{</li><li>  <span class="hljs-string">"openIdList"</span>: [<span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">&lt;open_id1&gt;</span></span></div></i><span class="hljs-string">"</span>,<span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">&lt;open_id2&gt;</span></span></div></i><span class="hljs-string">"</span>]</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section0728855124020">响应参数<i class="anchor-icon anchor-icon-link" anchorid="section0728855124020" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section12857244203415" class="firsth2">Response Header<i class="anchor-icon anchor-icon-link" anchorid="section12857244203415" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.2.1.5.1.1" width="20.562056205620564%">          <p>参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.2.1.5.1.2" width="19.781978197819782%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.2.1.5.1.3" width="22.492249224922492%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.2.1.5.1.4" width="37.163716371637165%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>Content-Type</p></td>         <td class="cellrowborder" width="19.781978197819782%">          <p>是</p></td>         <td class="cellrowborder" width="22.492249224922492%">          <p>String</p></td>         <td class="cellrowborder" width="37.163716371637165%">          <p>取值为：<span style="color: rgb(36,39,40);">application/json</span>;charset=utf-8。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section8117513193516">Response Body<i class="anchor-icon anchor-icon-link" anchorid="section8117513193516" tips="复制节点链接"></i></h3>          <p>调用成功时，响应消息体返回如下：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.3.1.5.1.1" width="20.562056205620564%">          <p><strong>参数</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.3.1.5.1.2" width="19.781978197819782%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.3.1.5.1.3" width="22.492249224922492%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.3.1.5.1.4" width="37.163716371637165%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>openIdToGroupUnionIdList</p></td>         <td class="cellrowborder" width="19.781978197819782%">          <p>否</p></td>         <td class="cellrowborder" width="22.492249224922492%">          <p>List&lt;<a href="/consumer/cn/doc/harmonyos-references/account-api-get-groupunionid#section2428192910350">OpenIdToGroupUnionIdInfo</a>&gt;</p></td>         <td class="cellrowborder" width="37.163716371637165%">          <p>用户的OpenID转GroupUnionID的列表。当传入openIdList参数时返回。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>unionIdToGroupUnionIdList</p></td>         <td class="cellrowborder" width="19.781978197819782%">          <p>否</p></td>         <td class="cellrowborder" width="22.492249224922492%">          <p>List&lt;<a href="/consumer/cn/doc/harmonyos-references/account-api-get-groupunionid#section1045552103514">UnionIdToGroupUnionIdInfo</a>&gt;</p></td>         <td class="cellrowborder" width="37.163716371637165%">          <p>用户的UnionID转GroupUnionID的列表，当传入unionIdList参数时返回。</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>响应参数openIdToGroupUnionIdList和unionIdToGroupUnionIdList列表为去重后的结果，因此响应参数的openIdToGroupUnionIdList数量可能与请求参数的openIdList数量不一致；请求参数unionIdList与响应参数unionIdToGroupUnionIdList同理。</p>      </div></div></div>     <p>调用失败时，响应消息体返回如下：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" width="20.562056205620564%">          <p><strong>参数</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" width="19.781978197819782%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" width="22.492249224922492%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" width="37.163716371637165%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>resultCode</p></td>         <td class="cellrowborder" width="19.781978197819782%">          <p>是</p></td>         <td class="cellrowborder" width="22.492249224922492%">          <p>int</p></td>         <td class="cellrowborder" width="37.163716371637165%">          <p>错误码，详见<a href="/consumer/cn/doc/harmonyos-references/account-api-get-groupunionid#section1017492821211">错误码</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>resultDesc</p></td>         <td class="cellrowborder" width="19.781978197819782%">          <p>是</p></td>         <td class="cellrowborder" width="22.492249224922492%">          <p>String</p></td>         <td class="cellrowborder" width="37.163716371637165%">          <p>错误描述信息。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section2428192910350">OpenIdToGroupUnionIdInfo<i class="anchor-icon anchor-icon-link" anchorid="section2428192910350" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.2.1.5.1.1" width="20.562056205620564%">          <p><strong>参数</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.2.1.5.1.2" width="19.781978197819782%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.2.1.5.1.3" width="22.492249224922492%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.2.1.5.1.4" width="37.163716371637165%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>openId</p></td>         <td class="cellrowborder" width="19.781978197819782%">          <p>是</p></td>         <td class="cellrowborder" width="22.492249224922492%">          <p>String</p></td>         <td class="cellrowborder" width="37.163716371637165%">          <p>用户的OpenID，具体格式要求请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/account-faq-9" target="_blank">OpenID和UnionID的格式说明</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>groupUnionId</p></td>         <td class="cellrowborder" width="19.781978197819782%">          <p>是</p></td>         <td class="cellrowborder" width="22.492249224922492%">          <p>String</p></td>         <td class="cellrowborder" width="37.163716371637165%">          <p>GroupUnionID是用户在关联主体账号组内的统一身份标识，使用场景详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/account-faq-19" target="_blank">不同开发者的应用之间如何实现用户数据互通</a>。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section1045552103514">UnionIdToGroupUnionIdInfo<i class="anchor-icon anchor-icon-link" anchorid="section1045552103514" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.2.1.5.1.1" width="20.562056205620564%">          <p><strong>参数</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.2.1.5.1.2" width="19.781978197819782%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.2.1.5.1.3" width="22.492249224922492%">          <p>参数类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.2.1.5.1.4" width="37.163716371637165%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>unionId</p></td>         <td class="cellrowborder" width="19.781978197819782%">          <p>是</p></td>         <td class="cellrowborder" width="22.492249224922492%">          <p>String</p></td>         <td class="cellrowborder" width="37.163716371637165%">          <p>用户的UnionID，具体格式要求请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/account-faq-9" target="_blank">OpenID和UnionID的格式说明</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20.562056205620564%">          <p>groupUnionId</p></td>         <td class="cellrowborder" width="19.781978197819782%">          <p>是</p></td>         <td class="cellrowborder" width="22.492249224922492%">          <p>String</p></td>         <td class="cellrowborder" width="37.163716371637165%">          <p>GroupUnionID是用户在关联主体账号组内的统一身份标识，使用场景详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/account-faq-19" target="_blank">不同开发者的应用之间如何实现用户数据互通</a>。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section374512884216">响应示例<i class="anchor-icon anchor-icon-link" anchorid="section374512884216" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section333613385112" class="firsth2">请求成功时<i class="anchor-icon anchor-icon-link" anchorid="section333613385112" tips="复制节点链接"></i></h3>          <div _ngcontent-arn-c106="" class="highlight-div"><div _ngcontent-arn-c106="" class="highlight-div-header"><div _ngcontent-arn-c106="" class="highlight-div-header-left"><div _ngcontent-arn-c106="" class="handle-button expand-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-arn-c106="" class="highlight-div-header-right"><div _ngcontent-arn-c106="" class="handle-button ai-button"></div><div _ngcontent-arn-c106="" class="handle-button line-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-arn-c106="" class="handle-button theme-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-arn-c106="" class="handle-button copy-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-arn-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" data-highlighted="yes"><ol class="linenums"><li>HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK</li><li>Content-Type<span class="hljs-punctuation">:</span> application/json;charset=utf<span class="hljs-number">-8</span></li><li>
</li><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"openIdToGroupUnionIdList"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> </li><li>     <span class="hljs-punctuation">{</span> <span class="hljs-attr">"openId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">&lt;open_id1&gt;</span></span></div></i><span class="hljs-string">"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"groupUnionId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">&lt;group_union_id1&gt;</span></span></div></i><span class="hljs-string">"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>     <span class="hljs-punctuation">{</span> <span class="hljs-attr">"openId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">&lt;open_id2&gt;</span></span></div></i><span class="hljs-string">"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"groupUnionId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">&lt;group_union_id2&gt;</span></span></div></i><span class="hljs-string">"</span> <span class="hljs-punctuation">}</span> </li><li>  <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section19503642418">请求失败时<i class="anchor-icon anchor-icon-link" anchorid="section19503642418" tips="复制节点链接"></i></h3>          <div _ngcontent-arn-c106="" class="highlight-div"><div _ngcontent-arn-c106="" class="highlight-div-header"><div _ngcontent-arn-c106="" class="highlight-div-header-left"><div _ngcontent-arn-c106="" class="handle-button expand-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-arn-c106="" class="highlight-div-header-right"><div _ngcontent-arn-c106="" class="handle-button ai-button"></div><div _ngcontent-arn-c106="" class="handle-button line-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-arn-c106="" class="handle-button theme-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-arn-c106="" class="handle-button copy-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-arn-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" data-highlighted="yes"><ol class="linenums"><li>HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK</li><li>Content-Type<span class="hljs-punctuation">:</span> application/json;charset=utf<span class="hljs-number">-8</span></li><li>
</li><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"resultCode"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">60010003</span><span class="hljs-punctuation">,</span> </li><li>  <span class="hljs-attr">"resultDesc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Authorization error."</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section2649820204212">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section2649820204212" tips="复制节点链接"></i></h2>          <div _ngcontent-arn-c106="" class="highlight-div"><div _ngcontent-arn-c106="" class="highlight-div-header"><div _ngcontent-arn-c106="" class="highlight-div-header-left"><div _ngcontent-arn-c106="" class="handle-button expand-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-arn-c106="" class="highlight-div-header-right"><div _ngcontent-arn-c106="" class="handle-button ai-button"></div><div _ngcontent-arn-c106="" class="handle-button line-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-arn-c106="" class="handle-button theme-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-arn-c106="" class="handle-button copy-button"><div _ngcontent-arn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-arn-c106="" class="highlight-scroll-div"><pre class="java prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> com.alibaba.fastjson2.JSONObject;</li><li><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;</li><li><span class="hljs-keyword">import</span> org.apache.http.client.methods.HttpPost;</li><li><span class="hljs-keyword">import</span> org.huawei.uniaccount.util.CallUtils;</li><li><span class="hljs-keyword">import</span> java.io.IOException;</li><li><span class="hljs-keyword">import</span> java.util.Collections;</li><li><span class="hljs-keyword">import</span> java.util.HashMap;</li><li><span class="hljs-keyword">import</span> java.util.List;</li><li><span class="hljs-keyword">import</span> java.util.Map;</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 通过OpenID或UnionID获取GroupUnionID</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-meta">@Slf4j</span></li><li><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GroupUnionIdBatchGetDemo</span> {</li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {</li><li>        <span class="hljs-comment">// 通过OpenID或UnionID获取GroupUnionID的接口URL</span></li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"https://account-api.cloud.huawei.com/oauth2/v6/groupUnionId/batchGet"</span>;</li><li>        <span class="hljs-comment">// 替换为您实际的获取到应用级凭证</span></li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">accessToken</span> <span class="hljs-operator">=</span> <span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">&lt;Access Token&gt;</span></span></div></i><span class="hljs-string">"</span>;</li><li>        <span class="hljs-comment">// openIdList 和 unionIdList两者只允许传一个</span></li><li>        List&lt;String&gt; openIdList = Collections.singletonList(<span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">&lt;OpenID&gt;</span></span></div></i><span class="hljs-string">"</span>);</li><li>        List&lt;String&gt; unionIdList = Collections.emptyList();</li><li>        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> batchGetGroupUnionId(url, accessToken, openIdList, unionIdList);</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> JSONObject <span class="hljs-title function_">batchGetGroupUnionId</span><span class="hljs-params">(</span></li><li><span class="hljs-params">            String url, String accessToken, List&lt;String&gt; openIdList, List&lt;String&gt; unionIdList)</span> <span class="hljs-keyword">throws</span> IOException {</li><li>        <span class="hljs-keyword">if</span> ((openIdList == <span class="hljs-literal">null</span> || openIdList.size() == <span class="hljs-number">0</span>) &amp;&amp; (unionIdList == <span class="hljs-literal">null</span> || unionIdList.size() == <span class="hljs-number">0</span>)) {</li><li>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"openIdList and unionIdList cannot be empty at the same time"</span>);</li><li>        }</li><li>        <span class="hljs-keyword">if</span> ((openIdList != <span class="hljs-literal">null</span> &amp;&amp; openIdList.size() &gt; <span class="hljs-number">0</span>) &amp;&amp; (unionIdList != <span class="hljs-literal">null</span> &amp;&amp; unionIdList.size() &gt; <span class="hljs-number">0</span>)) {</li><li>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"openIdList and unionIdList cannot be non-empty at the same time"</span>);</li><li>        }</li><li>        <span class="hljs-type">HttpPost</span> <span class="hljs-variable">httpPost</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpPost</span>(url);</li><li>        Map&lt;String, Object&gt; reqBody = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();</li><li>        reqBody.put(<span class="hljs-string">"openIdList"</span>, openIdList);</li><li>        reqBody.put(<span class="hljs-string">"unionIdList"</span>, unionIdList);</li><li>        httpPost.setEntity(CallUtils.wrapJsonEntity(reqBody));</li><li>        httpPost.setHeader(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + accessToken);</li><li>
</li><li>        <span class="hljs-comment">// 如需要自定义异常处理请使用api CallUtils#remoteCall(HttpUriRequest, BiFunction&lt;CloseableHttpResponse,String,E&gt;)</span></li><li>        <span class="hljs-keyword">return</span> CallUtils.toJsonObject(CallUtils.remoteCallAccountApi(httpPost));</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1017492821211">错误码<i class="anchor-icon anchor-icon-link" anchorid="section1017492821211" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.2.1.4.1.1" width="24.88%">          <p>HTTP响应码</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.2.1.4.1.2" width="31.840000000000003%">          <p>描述</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.2.1.4.1.3" width="43.28%">          <p>解决方法</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="24.88%">          <p>200</p></td>         <td class="cellrowborder" width="31.840000000000003%">          <p>仅表示本次接口调用成功，实际业务处理结果需要通过<strong>Response Body</strong>中的<strong>resultCode（错误码）</strong>进行判断。</p></td>         <td class="cellrowborder" width="43.28%">          <p>-</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.88%">          <p>403</p></td>         <td class="cellrowborder" width="31.840000000000003%">          <p>无权限访问。</p></td>         <td class="cellrowborder" width="43.28%">          <p>请检查调用环境、配置及http请求方式。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.88%">          <p>404</p></td>         <td class="cellrowborder" width="31.840000000000003%">          <p>找不到服务。</p></td>         <td class="cellrowborder" width="43.28%">          <p>请检查请求URI是否正确。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.88%">          <p>405</p></td>         <td class="cellrowborder" width="31.840000000000003%">          <p>不支持的http请求method。</p></td>         <td class="cellrowborder" width="43.28%">          <p>请检查http请求method是否与接口说明一致。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.88%">          <p>500</p></td>         <td class="cellrowborder" width="31.840000000000003%">          <p>服务内部错误。</p></td>         <td class="cellrowborder" width="43.28%">          <p>请通过<a href="https://developer.huawei.com/consumer/cn/support/feedback/#/" target="_blank">在线提单</a>提交问题。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.88%">          <p>502</p></td>         <td class="cellrowborder" width="31.840000000000003%">          <p>请求连接异常，常见于网络状况不稳定。</p></td>         <td class="cellrowborder" width="43.28%">          <p>建议稍后重试，若仍无法解决，请通过<a href="https://developer.huawei.com/consumer/cn/support/feedback/#/" target="_blank">在线提单</a>提交问题。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.88%">          <p>503</p></td>         <td class="cellrowborder" width="31.840000000000003%">          <p>系统流控。</p></td>         <td class="cellrowborder" width="43.28%">          <p>触发系统流控，请稍后重试。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.88%">          <p>504</p></td>         <td class="cellrowborder" width="31.840000000000003%">          <p>请求连接超时，常见于网络状况不稳定。</p></td>         <td class="cellrowborder" width="43.28%">          <p>建议稍后重试，若仍无法解决，请通过<a href="https://developer.huawei.com/consumer/cn/support/feedback/#/" target="_blank">在线提单</a>提交问题。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.88%">          <p>590</p></td>         <td class="cellrowborder" width="31.840000000000003%">          <p>服务内部错误。</p></td>         <td class="cellrowborder" width="43.28%">          <p>请通过<a href="https://developer.huawei.com/consumer/cn/support/feedback/#/" target="_blank">在线提单</a>提交问题。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.20.1.4.1.1" width="21.349999999999998%">         <p>错误码</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.20.1.4.1.2" width="39.23%">         <p>描述</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.20.1.4.1.3" width="39.42%">         <p>解决方法</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="21.349999999999998%">         <p>60010002</p></td>        <td class="cellrowborder" width="39.23%">         <p>参数错误。</p></td>        <td class="cellrowborder" width="39.42%">         <p>请按照响应描述中的提示，检查并修改<a href="/consumer/cn/doc/harmonyos-references/account-api-get-groupunionid#section294573564019">请求参数</a>。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="21.349999999999998%">         <p>60010003</p></td>        <td class="cellrowborder" width="39.23%">         <p>鉴权头Authorization校验不通过。</p></td>        <td class="cellrowborder" width="39.42%">         <p>检查并修改<a href="/consumer/cn/doc/harmonyos-references/account-api-get-groupunionid#section294573564019">请求参数</a>中Authorization参数。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="21.349999999999998%">         <p>60170001</p></td>        <td class="cellrowborder" width="39.23%">         <p>开发者账号未加入关联主体账号组。</p></td>        <td class="cellrowborder" width="39.42%">         <p>可通过<a href="https://developer.huawei.com/consumer/cn/doc/start/cag-0000001265390541" target="_blank">创建账号组</a>创建关联主体账号组，然后在关联主体账号组中<a href="https://developer.huawei.com/consumer/cn/doc/start/aai-0000001265430513" target="_blank">添加账号组成员</a>。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="21.349999999999998%">         <p>60010001</p></td>        <td class="cellrowborder" width="39.23%">         <p>系统内部错误。</p></td>        <td class="cellrowborder" width="39.42%">         <p>可重试，若仍无法解决，请通过<a href="https://developer.huawei.com/consumer/cn/support/feedback/#/" target="_blank">在线提单</a>提交问题。</p></td>       </tr>           </tbody></table></div>    </div>   </div>   <div></div></div>