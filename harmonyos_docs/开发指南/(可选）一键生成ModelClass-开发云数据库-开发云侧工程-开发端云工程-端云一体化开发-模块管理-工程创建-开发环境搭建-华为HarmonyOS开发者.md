<h1 _ngcontent-ajt-c119="" class="doc-title ng-star-inserted" title="(可选）一键生成Model Class"> (可选）一键生成Model Class </h1>

<div _ngcontent-ajt-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001760354089"><p id="ZH-CN_TOPIC_0000002179338344__p1016516434371">云数据库支持从端侧或者云侧云函数（含云对象）访问云数据库，代码涉及调用云数据库时，需引入对应云数据库对象类型的Model Class。DevEco Studio当前支持为对象类型一键生成Server Model与Client Model，供您在端侧及云侧云函数（含云对象）开发时引用。</p> <div class="tiledSection"><h2 id="section0125164810278">生成Server Model<i class="anchor-icon anchor-icon-link" anchorid="section0125164810278" tips="复制节点链接"></i></h2><ol id="ZH-CN_TOPIC_0000002179338344__ol1512512115422"><li id="li1012572174213">右击需要调用的对象类型文件（以“Post.json”为例），选择“Generate Server Model”。<p id="ZH-CN_TOPIC_0000002179338344__p360604913346"><span><img originheight="443" originwidth="685" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104752.62917784186314939973710236268812:50001231000000:2800:A726909C71474A7F9B6B4B245B7BFE11A7881376FDED6067939C0C41BC0E0D05.png" width="685" height="443"></span></p> </li><li id="li8168453114518">选择生成的Server Model文件存放的云函数目录，以“id-generator”为例。<p id="ZH-CN_TOPIC_0000002179338344__p096395574615"><span><img originheight="139" originwidth="613" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104752.62122704868862662335975195084795:50001231000000:2800:D42DCDE52856181FF8561559247A6AF4731D0A3D95109A4D0C826E7A72EC29F8.png" width="613" height="139"></span></p> </li><li id="li12134411124910">点击“OK”。<p id="ZH-CN_TOPIC_0000002179338344__p13371413493">指定目录下生成对应对象类型的Server Model文件，后续您便可以在代码中方便地引用该Server Model 。</p> <p id="ZH-CN_TOPIC_0000002179338344__p162561720133813"><span><img originheight="771" originwidth="902" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104752.03208348165354677662938559774609:50001231000000:2800:7BDACFFB4241DF54C553863DFBF13E94FD8542652278935758E22A2E1862642D.png" width="902" height="771"></span></p> </li><li id="li10505183910414">在云对象“id-generator”目录的package.json文件中引入@hw-agconnect/cloud-server依赖。<div _ngcontent-ajt-c106="" class="highlight-div"><div _ngcontent-ajt-c106="" class="highlight-div-header"><div _ngcontent-ajt-c106="" class="highlight-div-header-left"><div _ngcontent-ajt-c106="" class="handle-button expand-button"><div _ngcontent-ajt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajt-c106="" class="highlight-div-header-right"><div _ngcontent-ajt-c106="" class="handle-button ai-button"></div><div _ngcontent-ajt-c106="" class="handle-button line-button"><div _ngcontent-ajt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajt-c106="" class="handle-button theme-button"><div _ngcontent-ajt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajt-c106="" class="handle-button copy-button"><div _ngcontent-ajt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000002179338344__screen3507836276" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"dependencies"</span>: {</li><li>  <span class="hljs-string">"@hw-agconnect/cloud-server"</span>: <span class="hljs-string">"latest"</span></li><li>}</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002179338344__p481175388"><span><img originheight="338" originwidth="462" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104752.01896692693820328695384850260299:50001231000000:2800:87DDE6BEF6D81FAA49F8D25E9ECBF94F97C931ABB78D7DF6CF0241D929424A2B.png" width="462" height="338"></span></p> </li><li id="li1184020197183">在云对象文件idGenerator.ts中添加如下代码，实现云函数访问云数据库。<div _ngcontent-ajt-c106="" class="highlight-div"><div _ngcontent-ajt-c106="" class="highlight-div-header"><div _ngcontent-ajt-c106="" class="highlight-div-header-left"><div _ngcontent-ajt-c106="" class="handle-button expand-button"><div _ngcontent-ajt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajt-c106="" class="highlight-div-header-right"><div _ngcontent-ajt-c106="" class="handle-button ai-button"></div><div _ngcontent-ajt-c106="" class="handle-button line-button"><div _ngcontent-ajt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajt-c106="" class="handle-button theme-button"><div _ngcontent-ajt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajt-c106="" class="handle-button copy-button"><div _ngcontent-ajt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002179338344__screen114217144115" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloud } <span class="hljs-keyword">from</span> <span class="hljs-string">'@hw-agconnect/cloud-server'</span>; </li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Post</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Post'</span>; <span class="hljs-comment">// Post是Server Model </span></li><li>
</li><li><span class="hljs-comment">// Demo是Post对象类型使用的存储区名</span></li><li><span class="hljs-keyword">const</span> collection = cloud.<span class="hljs-title function_">database</span>({ <span class="hljs-attr">zoneName</span>: <span class="hljs-string">'Demo'</span> }).<span class="hljs-title function_">collection</span>(<span class="hljs-title class_">Post</span>);</li><li>
</li><li><span class="hljs-comment">// IdGenerator云对象，实现了对Post对象类型的查询和更新</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdGenerator</span> {</li><li>  <span class="hljs-title function_">query</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">return</span> collection.<span class="hljs-title function_">query</span>().<span class="hljs-title function_">get</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">upsert</span>(<span class="hljs-params">posts: Post[]</span>) {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {</li><li>      collection.<span class="hljs-title function_">upsert</span>(posts.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">post</span> =&gt;</span> <span class="hljs-title class_">Post</span>.<span class="hljs-title function_">parseFrom</span>(post)))</li><li>        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> <span class="hljs-title function_">resolve</span>({ result }))</li><li>        .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-title function_">reject</span>(err))</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p id="ZH-CN_TOPIC_0000002179338344__p628417492617">如果定义的云数据库表字段中包含ByteArray或Date类型的字段，在插入或者更新云数据库时需要使用Server Model的parseFrom方法将入参转化成API识别的类型，例如上述示例中的Post.parseFrom方法。</p> </div></div></div> </li></ol> </div> <div class="tiledSection"><h2 id="section1037851593420">生成Client Model<i class="anchor-icon anchor-icon-link" anchorid="section1037851593420" tips="复制节点链接"></i></h2><ol id="ZH-CN_TOPIC_0000002179338344__ol6378715173417"><li id="li1837861563419">右击需要调用的对象类型文件（以“Post.json”为例），选择“Generate Client Model”。<p id="ZH-CN_TOPIC_0000002179338344__p2378181513346"><span><img originheight="459" originwidth="584" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104752.75120771824695058145490036896613:50001231000000:2800:7A03286D3DAF0E4C840540C10DB35BD1567135C850A43C3191C925EB20426E65.png" width="584" height="459"></span></p> </li><li id="li1737831583411">选择生成的Client Model文件存放的端侧目录。<p id="ZH-CN_TOPIC_0000002179338344__p183781915123416"><span><img originheight="139" originwidth="620" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104752.38635803906617002472425278161544:50001231000000:2800:B5165AEFC46F0D88D69F0D217A277CB4DBAEB30B8CA27B99ADCCB6A34E266149.png" width="620" height="139"></span></p> </li><li id="li1137881593415">点击“OK”。<p id="ZH-CN_TOPIC_0000002179338344__p13378151583413">指定目录下生成对应对象类型的Client Model文件，后续您便可以在端侧代码中方便地引用该Client Model，具体可参考端云一体化工程初始化代码中的Client Model示例（“ets/pages/CloudDb/Post.ts”）在CloudDb.ets以及DbInset.ets中的引用。</p> <p id="ZH-CN_TOPIC_0000002179338344__p19378141510343"></p> <p id="ZH-CN_TOPIC_0000002179338344__p988910147257"><span><img originheight="566" originwidth="875" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104752.17309049247676366436586272764174:50001231000000:2800:2D88C36C31A6DE6B94518B59EFAEF753B25FB0BB892464D65863170AF5FCE64F.png" width="875" height="566"></span></p> </li></ol> </div> </div> <div></div></div>