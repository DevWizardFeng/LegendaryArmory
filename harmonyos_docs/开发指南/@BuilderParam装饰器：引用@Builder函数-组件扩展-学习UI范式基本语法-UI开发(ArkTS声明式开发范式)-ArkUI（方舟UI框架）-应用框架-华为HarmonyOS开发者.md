<h1 _ngcontent-dgj-c119="" class="doc-title ng-star-inserted" title="@BuilderParam装饰器：引用@Builder函数"> @BuilderParam装饰器：引用@Builder函数 </h1>

<div _ngcontent-dgj-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>当开发者创建自定义组件并需要为其添加特定功能（例如页面跳转功能）时，如果直接在组件内嵌入事件方法，会导致所有该自定义组件的实例都增加此功能。为了解决此问题，ArkUI引入了@BuilderParam装饰器。@BuilderParam用于装饰指向@Builder方法的变量，开发者可以在初始化自定义组件时，使用不同的方式（如参数修改、尾随闭包、借用箭头函数等）对@BuilderParam装饰的自定义构建函数进行传参赋值。在自定义组件内部，通过调用@BuilderParam为组件增加特定功能。</p> <p>在阅读本文档前，建议提前阅读：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-builder">@Builder</a>。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 9开始，该装饰器支持在ArkTS卡片中使用。</p>  <p>从API version 11开始，该装饰器支持在元服务中使用。</p>  </div></div></div>  <div class="tiledSection"><h2 id="装饰器使用说明">装饰器使用说明<i class="anchor-icon anchor-icon-link" anchorid="装饰器使用说明" tips="复制节点链接"></i></h2></div>  <div class="tiledSection"><h3 id="初始化builderparam装饰的方法" class="firsth2">初始化@BuilderParam装饰的方法<i class="anchor-icon anchor-icon-link" anchorid="初始化builderparam装饰的方法" tips="复制节点链接"></i></h3><p>@BuilderParam装饰的方法只能被自定义构建函数（@Builder装饰的方法）初始化。</p> <ul><li><p>使用所属自定义组件的自定义构建函数或者全局的自定义构建函数，在本地初始化@BuilderParam装饰的方法。</p>  <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params"></span>) {</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Child</span> {</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">doNothingBuilder</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 使用自定义组件的自定义构建函数初始化@BuilderParam装饰的方法</span></li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">customBuilderParam</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">doNothingBuilder</span>;</li><li>  <span class="hljs-comment">// 使用全局自定义构建函数初始化@BuilderParam装饰的方法</span></li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">customOverBuilderParam</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = overBuilder;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>}</li></ol></pre></div></div>  </li><li><p>使用父组件自定义构建函数初始化子组件@BuilderParam装饰的方法。</p>  <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Child</span> {</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">customBuilder</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">customBuilderParam</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">customBuilder</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customBuilderParam</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">componentBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`Parent builder `</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Child</span>({ <span class="hljs-attr">customBuilderParam</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">componentBuilder</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>  <p><strong>图1</strong> 示例效果图</p>  <p><span><img originheight="88" originwidth="379" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114931.37378708808881373047253017587235:50001231000000:2800:8550D62507E78C68E13A18E4CB0A2A6C39325065D2826F5FBBAE968AEA5ECD3B.png" width="379" height="88"></span></p>  </li><li><p>需要注意this的指向。</p>  <p>示例如下：</p>  <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Child</span> {</li><li>  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Child'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">customBuilder</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">customChangeThisBuilder</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">customBuilderParam</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">customBuilder</span>;</li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">customChangeThisBuilderParam</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">customChangeThisBuilder</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customBuilderParam</span>()</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customChangeThisBuilderParam</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Parent'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">componentBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.label}</span>`</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 调用this.componentBuilder()时，this指向当前@Entry所装饰的Parent组件，即label变量的值为'Parent'。</span></li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">componentBuilder</span>()</li><li>      <span class="hljs-title class_">Child</span>({</li><li>        <span class="hljs-comment">// 把this.componentBuilder传给子组件Child的@BuilderParam customBuilderParam，this指向的是子组件Child，即label变量的值为'Child'。</span></li><li>        <span class="hljs-attr">customBuilderParam</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">componentBuilder</span>,</li><li>        <span class="hljs-comment">// 把():void=&gt;{this.componentBuilder()}传给子组件Child的@BuilderParam customChangeThisBuilderParam，</span></li><li>        <span class="hljs-comment">// 因为箭头函数的this指向的是宿主对象，所以label变量的值为'Parent'。</span></li><li>        <span class="hljs-attr">customChangeThisBuilderParam</span>: (): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">componentBuilder</span>()</li><li>        }</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>  <p><strong>图2</strong> 示例效果图</p>  <p><span><img originheight="167" originwidth="144" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114931.71724485258246252252508792940642:50001231000000:2800:25DF2AD535F0E871DCDE3537E2B3176E3A2A1812209A12022BB6404097AC5559.png" class="notEnlarge" width="144" height="167"></span></p>  </li></ul> </div>  <div class="tiledSection"><h2 id="限制条件">限制条件<i class="anchor-icon anchor-icon-link" anchorid="限制条件" tips="复制节点链接"></i></h2><ul><li><p>使用@BuilderParam装饰的变量只能通过@Builder函数进行初始化。具体参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-builderparam#builderparam装饰器初始化的值必须为builder">@BuilderParam装饰器初始化的值必须为@Builder</a>。</p>  </li><li><p>当@Require装饰器和@BuilderParam装饰器一起使用时，必须初始化@BuilderParam装饰器。具体参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-builderparam#require装饰器和builderparam装饰器联合使用">@Require装饰器和@BuilderParam装饰器联合使用</a>。</p>  </li><li><p>在自定义组件尾随闭包的场景下，子组件有且仅有一个@BuilderParam用来接收此尾随闭包，且此@BuilderParam装饰的方法不能有参数。具体参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-builderparam#尾随闭包初始化组件">尾随闭包初始化组件</a>。</p>  </li></ul> </div>  <div class="tiledSection"><h2 id="使用场景">使用场景<i class="anchor-icon anchor-icon-link" anchorid="使用场景" tips="复制节点链接"></i></h2></div>  <div class="tiledSection"><h3 id="参数初始化组件" class="firsth2">参数初始化组件<i class="anchor-icon anchor-icon-link" anchorid="参数初始化组件" tips="复制节点链接"></i></h3><p>@BuilderParam装饰的方法为有参数或无参数的形式，必须与指向的@Builder方法类型匹配。</p> <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tmp</span> {</li><li>  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params">$$: Tmp</span>) {</li><li>  <span class="hljs-title class_">Text</span>($$.<span class="hljs-property">label</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Child</span> {</li><li>  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Child'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">customBuilder</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 无参数类型，指向的customBuilder也是无参数类型</span></li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">customBuilderParam</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">customBuilder</span>;</li><li>  <span class="hljs-comment">// 有参数类型，指向的overBuilder也是有参数类型的方法</span></li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">customOverBuilderParam</span>: <span class="hljs-function">(<span class="hljs-params">$$: Tmp</span>) =&gt;</span> <span class="hljs-built_in">void</span> = overBuilder;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customBuilderParam</span>()</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customOverBuilderParam</span>({ <span class="hljs-attr">label</span>: <span class="hljs-string">'global Builder label'</span> })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Parent'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">componentBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.label}</span>`</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">componentBuilder</span>()</li><li>      <span class="hljs-title class_">Child</span>({ <span class="hljs-attr">customBuilderParam</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">componentBuilder</span>, <span class="hljs-attr">customOverBuilderParam</span>: overBuilder })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <p><strong>图3</strong> 示例效果图</p> <p><span><img originheight="123" originwidth="503" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114931.57013493784270649183137255291257:50001231000000:2800:999CA057C679428BCEA694B0B5E4E6D4F035739279025BBB6E5BAEC6FB38F427.png" width="503" height="123"></span></p> </div>  <div class="tiledSection"><h3 id="尾随闭包初始化组件">尾随闭包初始化组件<i class="anchor-icon anchor-icon-link" anchorid="尾随闭包初始化组件" tips="复制节点链接"></i></h3><p>在自定义组件中，使用@BuilderParam装饰的属性可通过尾随闭包进行初始化。初始化时，组件后需紧跟一个大括号“{}”形成尾随闭包场景。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li><p>此场景下自定义组件内仅有一个使用@BuilderParam装饰的属性。</p>  </li><li><p>此场景下自定义组件不支持通用属性。</p>  </li></ul>  </div></div></div> <p>开发者可将尾随闭包内的内容看作@Builder装饰的函数传给@BuilderParam。</p> <p>示例1：</p> <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomContainer</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">header</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">closerBuilder</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 使用父组件的尾随闭包{}(@Builder装饰的方法)初始化子组件@BuilderParam装饰的方法</span></li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">closer</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">closerBuilder</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">header</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">closer</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">specificParam</span>(<span class="hljs-params">label1: <span class="hljs-built_in">string</span>, label2: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(label1)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>    <span class="hljs-title class_">Text</span>(label2)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomContainerUser</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'header'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 创建CustomContainer，在创建CustomContainer时，通过其后紧跟一个大括号“{}”形成尾随闭包</span></li><li>      <span class="hljs-comment">// 作为传递给子组件CustomContainer @BuilderParam closer: () =&gt; void的参数</span></li><li>      <span class="hljs-title class_">CustomContainer</span>({ <span class="hljs-attr">header</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> }) {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title function_">specificParam</span>(<span class="hljs-string">'testA'</span>, <span class="hljs-string">'testB'</span>)</li><li>        }.<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Yellow</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = <span class="hljs-string">'changeHeader'</span>;</li><li>        })</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <p><strong>图4</strong> 示例效果图</p> <p><span><img originheight="257" originwidth="236" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114931.98010666492658555095158932977167:50001231000000:2800:5092D55E317A01949DBC589152C11534572ED9768501D5898FDA092520EC60F9.png" class="notEnlarge" width="236" height="257"></span></p> <p>可以使用全局或局部@Builder通过尾随闭包的形式对@ComponentV2装饰的自定义组件中的@BuilderParam装饰的方法进行初始化。</p> <p>示例2：</p> <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">ChildPage</span> {</li><li>  <span class="hljs-meta">@Require</span> <span class="hljs-meta">@Param</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">customBuilder</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">customBuilderParam</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">customBuilder</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customBuilderParam</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">builder_value</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`全局 Builder: <span class="hljs-subst">${builder_value}</span>`</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">ParentPage</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Parent Page'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">componentBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`局部 Builder :<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.label}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">ChildPage</span>({ <span class="hljs-attr">message</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span> }) {</li><li>        <span class="hljs-title class_">Column</span>() { <span class="hljs-comment">// 使用局部@Builder，通过组件后紧跟一个大括号“{}”形成尾随闭包去初始化自定义组件@BuilderParam装饰的方法</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">componentBuilder</span>();</li><li>        }</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">Line</span>()</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#000000'</span>).<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      <span class="hljs-title class_">ChildPage</span>({ <span class="hljs-attr">message</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span> }) { <span class="hljs-comment">// 使用全局@Builder，通过组件后紧跟一个大括号“{}”形成尾随闭包去初始化自定义组件@BuilderParam装饰的方法</span></li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title function_">overBuilder</span>();</li><li>        }</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="使用builderparam隔离多组件对builder跳转逻辑的调用">使用@BuilderParam隔离多组件对@Builder跳转逻辑的调用<i class="anchor-icon anchor-icon-link" anchorid="使用builderparam隔离多组件对builder跳转逻辑的调用" tips="复制节点链接"></i></h3><p>当@Builder封装的系统组件包含跳转逻辑时，所有调用该@Builder的自定义组件将具备该跳转功能。如果需要禁用特定组件的跳转功能，可使用@BuilderParam来隔离跳转逻辑。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>当前示例代码中使用了Navigation组件导航，具体实现逻辑可以查询<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-navigation-navigation">Navigation</a>指南。</p>  </div></div></div> <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HelloWorldPageBuilder</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./helloworld'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">navigationParams</span> {</li><li>  <span class="hljs-attr">pathStack</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>();</li><li>  <span class="hljs-attr">boo</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">navigationAction</span>(<span class="hljs-params">params: navigationParams</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Navigation</span>(params.<span class="hljs-property">pathStack</span>) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'router to page'</span>, { <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 通过修改@BuilderParam参数决定是否跳转。</span></li><li>          <span class="hljs-keyword">if</span> (params.<span class="hljs-property">boo</span>) {</li><li>            params.<span class="hljs-property">pathStack</span>.<span class="hljs-title function_">pushPath</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'HelloWorldPage'</span> });</li><li>          } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'@BuilderParam setting does not jump'</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">navDestination</span>(<span class="hljs-title class_">HelloWorldPageBuilder</span>)</li><li>    .<span class="hljs-title function_">hideTitleBar</span>(<span class="hljs-literal">true</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-string">'25%'</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ParentPage</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">info</span>: navigationParams = <span class="hljs-keyword">new</span> <span class="hljs-title function_">navigationParams</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'ParentPage'</span>)</li><li>      <span class="hljs-title function_">navigationAction</span>({ <span class="hljs-attr">pathStack</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">info</span>.<span class="hljs-property">pathStack</span>, <span class="hljs-attr">boo</span>: <span class="hljs-literal">true</span> })</li><li>      <span class="hljs-title class_">ChildPageOne</span>()</li><li>      <span class="hljs-title class_">ChildPage</span>_BuilderParam({ <span class="hljs-attr">eventBuilder</span>: navigationAction })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ChildPageOne</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">info</span>: navigationParams = <span class="hljs-keyword">new</span> <span class="hljs-title function_">navigationParams</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'ChildPage'</span>)</li><li>      <span class="hljs-title function_">navigationAction</span>({ <span class="hljs-attr">pathStack</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">info</span>.<span class="hljs-property">pathStack</span>, <span class="hljs-attr">boo</span>: <span class="hljs-literal">true</span> })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ChildPage</span>_BuilderParam {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">info</span>: navigationParams = <span class="hljs-keyword">new</span> <span class="hljs-title function_">navigationParams</span>();</li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">eventBuilder</span>: <span class="hljs-function">(<span class="hljs-params">param: navigationParams</span>) =&gt;</span> <span class="hljs-built_in">void</span> = navigationAction;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'ChildPage_BuilderParam'</span>)</li><li>      <span class="hljs-comment">// 对传递过来的全局@Builder进行参数修改，可以实现禁用点击跳转的功能。</span></li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">eventBuilder</span>({ <span class="hljs-attr">pathStack</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">info</span>.<span class="hljs-property">pathStack</span>, <span class="hljs-attr">boo</span>: <span class="hljs-literal">false</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// helloworld.ets</span></li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">HelloWorldPageBuilder</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">HelloWorldPage</span>()</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">HelloWorldPage</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">pathStack</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">NavDestination</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p><strong>router_map.json</strong></p> <p>这个文件位于项目的resources/base/profile目录下。</p> <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"routerMap"</span>: [</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"HelloWorldPage"</span>,</li><li>      <span class="hljs-string">"buildFunction"</span>: <span class="hljs-string">"HelloWorldPageBuilder"</span>,</li><li>      <span class="hljs-string">"pageSourceFile"</span>: <span class="hljs-string">"src/main/ets/pages/helloworld.ets"</span></li><li>    }</li><li>  ]</li><li>}</li></ol></pre></div></div> <p><strong>module.json5</strong></p> <p>这个文件位于应用模块的根目录下，例如entry/src/main/module.json5。</p> <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"module"</span>: {</li><li>    <span class="hljs-string">"routerMap"</span>: <span class="hljs-string">"$profile:router_map"</span>,</li><li>    ......</li><li>  }</li><li>}</li></ol></pre></div></div> <p><strong>图5</strong> 示例效果图</p> <p><span><img originheight="461" originwidth="314" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114931.85396984972073392612829071273988:50001231000000:2800:6C5E22F66904B91F0FC288043D279459AD5C173378339018406CB7B07A790898.gif" width="314" height="461"></span></p> </div>  <div class="tiledSection"><h3 id="使用全局和局部builder初始化builderparam">使用全局和局部@Builder初始化@BuilderParam<i class="anchor-icon anchor-icon-link" anchorid="使用全局和局部builder初始化builderparam" tips="复制节点链接"></i></h3><p>在自定义组件中，使用@BuilderParam装饰的变量接收父组件通过@Builder传递的内容进行初始化，由于父组件的@Builder可以使用箭头函数改变当前的this指向，因此使用@BuilderParam装饰的变量会展示不同的内容。</p> <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ChildPage</span> {</li><li>  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Child Page'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">customBuilder</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">customBuilderParam</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">customBuilder</span>;</li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">customChangeThisBuilderParam</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">customBuilder</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customBuilderParam</span>()</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customChangeThisBuilderParam</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">builder_value</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`全局 Builder: <span class="hljs-subst">${builder_value}</span>`</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ParentPage</span> {</li><li>  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Parent Page'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">componentBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`局部 Builder :<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.label}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 调用this.componentBuilder()时，this指向当前@Entry所装饰的ParentPage组件，所以label变量的值为'Parent Page'。</span></li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">componentBuilder</span>()</li><li>      <span class="hljs-title class_">ChildPage</span>({</li><li>        <span class="hljs-comment">// 把this.componentBuilder传给子组件ChildPage的@BuilderParam customBuilderParam，this指向的是子组件ChildPage，所以label变量的值为'Child Page'。</span></li><li>        <span class="hljs-attr">customBuilderParam</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">componentBuilder</span>,</li><li>        <span class="hljs-comment">// 把():void=&gt;{this.componentBuilder()}传给子组件ChildPage的@BuilderParam customChangeThisBuilderParam，</span></li><li>        <span class="hljs-comment">// 因为箭头函数的this指向的是宿主对象，所以label变量的值为'Parent Page'。</span></li><li>        <span class="hljs-attr">customChangeThisBuilderParam</span>: (): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">componentBuilder</span>()</li><li>        }</li><li>      })</li><li>      <span class="hljs-title class_">Line</span>()</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#000000'</span>).<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      <span class="hljs-comment">// 调用全局overBuilder()时，this指向当前整个活动页，所以展示的内容为'Hello World'。</span></li><li>      <span class="hljs-title function_">overBuilder</span>()</li><li>      <span class="hljs-title class_">ChildPage</span>({</li><li>        <span class="hljs-comment">// 把全局overBuilder传给子组件ChildPage的@BuilderParam customBuilderParam，this指向当前整个活动页，所以展示的内容为'Hello World'。</span></li><li>        <span class="hljs-attr">customBuilderParam</span>: overBuilder,</li><li>        <span class="hljs-comment">// 把全局overBuilder传给子组件ChildPage的@BuilderParam customChangeThisBuilderParam，this指向当前整个活动页，所以展示的内容为'Hello World'。</span></li><li>        <span class="hljs-attr">customChangeThisBuilderParam</span>: overBuilder</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <p><strong>图6</strong> 示例效果图</p> <p><span><img originheight="216" originwidth="354" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114931.09613112261595782409110257463384:50001231000000:2800:5F6F10FE5F862170EE6F51A3917E411BA769A92A17CFADE4AEC1FFAB839E951E.png" width="354" height="216"></span></p> </div>  <div class="tiledSection"><h3 id="在componentv2装饰的自定义组件中使用builderparam">在@ComponentV2装饰的自定义组件中使用@BuilderParam<i class="anchor-icon anchor-icon-link" anchorid="在componentv2装饰的自定义组件中使用builderparam" tips="复制节点链接"></i></h3><p>使用全局或局部@Builder初始化@ComponentV2装饰的自定义组件中的@BuilderParam属性。</p> <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">ChildPage</span> {</li><li>  <span class="hljs-meta">@Param</span> <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Child Page'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">customBuilder</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">customBuilderParam</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">customBuilder</span>;</li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">customChangeThisBuilderParam</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">customBuilder</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customBuilderParam</span>()</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customChangeThisBuilderParam</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">builder_value</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`全局 Builder: <span class="hljs-subst">${builder_value}</span>`</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">ParentPage</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Parent Page'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">componentBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`局部 Builder :<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.label}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 调用this.componentBuilder()时，this指向当前@Entry所装饰的ParentPage组件，所以label变量的值为'Parent Page'。</span></li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">componentBuilder</span>()</li><li>      <span class="hljs-title class_">ChildPage</span>({</li><li>        <span class="hljs-comment">// 把this.componentBuilder传给子组件ChildPage的@BuilderParam customBuilderParam，this指向的是子组件ChildPage，所以label变量的值为'Child Page'。</span></li><li>        <span class="hljs-attr">customBuilderParam</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">componentBuilder</span>,</li><li>        <span class="hljs-comment">// 把():void=&gt;{this.componentBuilder()}传给子组件ChildPage的@BuilderParam customChangeThisBuilderPara</span></li><li>        <span class="hljs-comment">// 因为箭头函数的this指向的是宿主对象，所以label变量的值为'Parent Page'。</span></li><li>        <span class="hljs-attr">customChangeThisBuilderParam</span>: (): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">componentBuilder</span>()</li><li>        }</li><li>      })</li><li>      <span class="hljs-title class_">Line</span>()</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">5</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#000000'</span>).<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      <span class="hljs-comment">// 调用全局overBuilder()时，this指向当前整个活动页，所以展示的内容为'Hello World'。</span></li><li>      <span class="hljs-title function_">overBuilder</span>()</li><li>      <span class="hljs-title class_">ChildPage</span>({</li><li>        <span class="hljs-comment">// 把全局overBuilder传给子组件ChildPage的@BuilderParam customBuilderParam，this指向当前整个活动页，所以展示的内容为'Hello World'。</span></li><li>        <span class="hljs-attr">customBuilderParam</span>: overBuilder,</li><li>        <span class="hljs-comment">// 把全局overBuilder传给子组件ChildPage的@BuilderParam customChangeThisBuilderParam，this指向当前整个活动页，所以展示的内容为'Hello World'。</span></li><li>        <span class="hljs-attr">customChangeThisBuilderParam</span>: overBuilder</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <p><strong>图7</strong> 示例效果图</p> <p><span><img originheight="211" originwidth="355" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114931.27758085256089217625663550609815:50001231000000:2800:FF836527ACE8CF0218BA652DEA5EC61CC8E47F7742F129535A12A2601B663E89.png" width="355" height="211"></span></p> </div>  <div class="tiledSection"><h2 id="常见问题">常见问题<i class="anchor-icon anchor-icon-link" anchorid="常见问题" tips="复制节点链接"></i></h2></div>  <div class="tiledSection"><h3 id="改变内容ui不刷新" class="firsth2">改变内容UI不刷新<i class="anchor-icon anchor-icon-link" anchorid="改变内容ui不刷新" tips="复制节点链接"></i></h3><p>调用自定义组件ChildPage时，通过this.componentBuilder传递@Builder参数。this指向自定义组件内部，因此父组件中改变label的值时，ChildPage无法感知这一变化。</p> <p>【反例】</p> <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ChildPage</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Child Page'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">customBuilder</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">customChangeThisBuilderParam</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">customBuilder</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customChangeThisBuilderParam</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ParentPage</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Parent Page'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">componentBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`Builder :<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.label}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">ChildPage</span>({</li><li>        <span class="hljs-comment">// 当前写法this指向ChildPage组件内</span></li><li>        <span class="hljs-attr">customChangeThisBuilderParam</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">componentBuilder</span></li><li>      })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击改变label内容'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span> = <span class="hljs-string">'Hello World'</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <p>使用箭头函数将@Builder传递到自定义组件ChildPage中，this指向会停留在父组件ParentPage里。在父组件中改变label的值时，ChildPage会感知到并重新渲染UI。</p> <p>【正例】</p> <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ChildPage</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Child Page'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">customBuilder</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-attr">customChangeThisBuilderParam</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">customBuilder</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customChangeThisBuilderParam</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ParentPage</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Parent Page'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">componentBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`Builder :<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.label}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">ChildPage</span>({</li><li>        <span class="hljs-attr">customChangeThisBuilderParam</span>: <span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">componentBuilder</span>()</li><li>        }</li><li>      })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击改变label内容'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span> = <span class="hljs-string">'Hello World'</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="require装饰器和builderparam装饰器联合使用">@Require装饰器和@BuilderParam装饰器联合使用<i class="anchor-icon anchor-icon-link" anchorid="require装饰器和builderparam装饰器联合使用" tips="复制节点链接"></i></h3><p>由于@Require装饰器所装饰的变量需进行初始化，未初始化会导致编译报错。</p> <p>【反例】</p> <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">globalBuilder</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello World'</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomBuilderDemo</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 由于未对子组件ChildBuilder进行赋值，此处无论是编译还是编辑，均会报错。</span></li><li>      <span class="hljs-title class_">ChildPage</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ChildPage</span> {</li><li>  <span class="hljs-meta">@Require</span> <span class="hljs-meta">@BuilderParam</span> <span class="hljs-title class_">ChildBuilder</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = globalBuilder;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">ChildBuilder</span>()</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <p>@Require装饰的变量必须从外部初始化。</p> <p>【正例】</p> <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">globalBuilder</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello World'</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomBuilderDemo</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">ChildPage</span>({ <span class="hljs-title class_">ChildBuilder</span>: globalBuilder })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ChildPage</span> {</li><li>  <span class="hljs-meta">@Require</span> <span class="hljs-meta">@BuilderParam</span> <span class="hljs-title class_">ChildBuilder</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = globalBuilder;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">ChildBuilder</span>()</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="builderparam装饰器初始化的值必须为builder">@BuilderParam装饰器初始化的值必须为@Builder<i class="anchor-icon anchor-icon-link" anchorid="builderparam装饰器初始化的值必须为builder" tips="复制节点链接"></i></h3><p>使用@State装饰器装饰的变量，在初始化子组件的@BuilderParam和ChildBuilder变量时，编译时会输出报错信息。</p> <p>【反例】</p> <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">globalBuilder</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello World'</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomBuilderDemo</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 子组件ChildBuilder接收@State装饰的变量，会出现编译和编辑报错</span></li><li>      <span class="hljs-title class_">ChildPage</span>({ <span class="hljs-title class_">ChildBuilder</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ChildPage</span> {</li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-title class_">ChildBuilder</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = globalBuilder;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">ChildBuilder</span>()</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <p>使用全局@Builder装饰的globalBuilder()方法为子组件@BuilderParam装饰的ChildBuilder变量初始化，编译无报错，功能正常。</p> <p>【正例】</p> <div _ngcontent-dgj-c106="" class="highlight-div"><div _ngcontent-dgj-c106="" class="highlight-div-header"><div _ngcontent-dgj-c106="" class="highlight-div-header-left"><div _ngcontent-dgj-c106="" class="handle-button expand-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dgj-c106="" class="highlight-div-header-right"><div _ngcontent-dgj-c106="" class="handle-button ai-button"></div><div _ngcontent-dgj-c106="" class="handle-button line-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dgj-c106="" class="handle-button theme-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dgj-c106="" class="handle-button copy-button"><div _ngcontent-dgj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dgj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">globalBuilder</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello World'</span>)</li><li>}</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomBuilderDemo</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">ChildPage</span>({<span class="hljs-title class_">ChildBuilder</span>: globalBuilder})</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ChildPage</span> {</li><li>  <span class="hljs-meta">@BuilderParam</span> <span class="hljs-title class_">ChildBuilder</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = globalBuilder;</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">ChildBuilder</span>()</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>