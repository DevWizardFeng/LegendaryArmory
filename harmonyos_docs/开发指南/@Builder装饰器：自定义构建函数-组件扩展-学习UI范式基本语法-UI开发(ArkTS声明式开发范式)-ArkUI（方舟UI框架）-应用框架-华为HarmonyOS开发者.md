<h1 _ngcontent-hey-c119="" class="doc-title ng-star-inserted" title="@Builder装饰器：自定义构建函数"> @Builder装饰器：自定义构建函数 </h1>

<div _ngcontent-hey-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>ArkUI提供轻量的UI元素复用机制@Builder，其内部UI结构固定，仅与使用方进行数据传递。开发者可将重复使用的UI元素抽象成函数，在build函数中调用。</p>    <p>@Builder装饰的函数也称为“自定义构建函数”。</p>    <p>在阅读本文档前，建议提前阅读：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-basic-syntax-overview">基本语法概述</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-declarative-ui-description">声明式UI描述</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-create-custom-components">自定义组件-创建自定义组件</a>。</p>    <p>@Builder装饰器和@Component装饰器在功能和使用方式上的主要差异：</p>    <ol>     <li>      <p>@Builder装饰器用于封装可复用的UI结构，通过提取重复的布局代码提高开发效率。该装饰器严格禁止在其内部定义状态变量或使用生命周期函数，必须通过参数传递或者访问所属组件的状态变量完成数据交互。</p></li>     <li>      <p>在ArkUI框架中，@Component装饰器作为封装复杂UI组件的核心机制，允许开发者通过组合多个基础组件来构建可复用的复合界面。该装饰器不仅支持内部状态变量的定义，还能完整管理组件的生命周期。</p></li>    </ol>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>从API version 9开始，该装饰器支持在ArkTS卡片中使用。</p>      <p>从API version 11开始，该装饰器支持在元服务中使用。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="装饰器使用说明">装饰器使用说明<i class="anchor-icon anchor-icon-link" anchorid="装饰器使用说明" tips="复制节点链接"></i></h2>          <p>@Builder装饰器有两种使用方式，分别是定义在自定义组件内部的<a href="/consumer/cn/doc/harmonyos-guides/arkts-builder#私有自定义构建函数">私有自定义构建函数</a>和定义在全局的<a href="/consumer/cn/doc/harmonyos-guides/arkts-builder#全局自定义构建函数">全局自定义构建函数</a>。</p>    </div>    <div class="tiledSection">     <h3 id="私有自定义构建函数" class="firsth2">私有自定义构建函数<i class="anchor-icon anchor-icon-link" anchorid="私有自定义构建函数" tips="复制节点链接"></i></h3>          <p>示例：</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">BuilderDemo</span> {</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">showTextBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// @Builder装饰此函数，使其能以链式调用的方式配置并构建Text组件</span></li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello World'</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">showTextValueBuilder</span>(<span class="hljs-params">param: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-title class_">Text</span>(param)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 无参数</span></li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showTextBuilder</span>()</li><li>      <span class="hljs-comment">// 有参数</span></li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showTextValueBuilder</span>(<span class="hljs-string">'Hello @Builder'</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>使用方法：</p>     <ul>      <li>       <p>允许在自定义组件内定义一个或多个@Builder函数，该函数被认为是该组件的私有、特殊类型的成员函数。</p></li>      <li>       <p>私有自定义构建函数允许在自定义组件内、build函数和其他自定义构建函数中调用。</p></li>      <li>       <p>在自定义组件中，this指代当前所属组件，组件的状态变量可在自定义构建函数内访问。建议通过this访问组件的状态变量，而不是通过参数传递。</p></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="全局自定义构建函数">全局自定义构建函数<i class="anchor-icon anchor-icon-link" anchorid="全局自定义构建函数" tips="复制节点链接"></i></h3>          <p>示例：</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">showTextBuilder</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello World'</span>)</li><li>    .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>    .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>}</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">BuilderDemo</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title function_">showTextBuilder</span>()</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <ul>      <li>       <p>如果不涉及组件状态变量变化，建议使用全局的自定义构建函数。</p></li>      <li>       <p>全局自定义构建函数允许在build函数和其他自定义构建函数中调用。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="参数传递规则">参数传递规则<i class="anchor-icon anchor-icon-link" anchorid="参数传递规则" tips="复制节点链接"></i></h2>          <p>自定义构建函数的参数传递有<a href="/consumer/cn/doc/harmonyos-guides/arkts-builder#按值传递参数">按值传递</a>和<a href="/consumer/cn/doc/harmonyos-guides/arkts-builder#按引用传递参数">按引用传递</a>两种，均需遵守以下规则：</p>     <ul>      <li>       <p>@Builder装饰的函数参数类型不允许为undefined、null和返回undefined、null的表达式。</p></li>      <li>       <p>在@Builder装饰的函数内部，不允许改变参数值。</p></li>      <li>       <p>@Builder内UI语法遵循<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-create-custom-components#build函数">UI语法规则</a>。</p></li>      <li>       <p>只有当传入一个参数且该参数直接传入对象字面量时，才会按引用传递，其他传递方式均为按值传递。</p></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="按值传递参数" class="firsth2">按值传递参数<i class="anchor-icon anchor-icon-link" anchorid="按值传递参数" tips="复制节点链接"></i></h3>          <p>调用@Builder装饰的函数默认按值传递。当传递的参数为状态变量时，状态变量的改变不会引起@Builder函数内的UI刷新。所以当使用状态变量的时候，推荐使用<a href="/consumer/cn/doc/harmonyos-guides/arkts-builder#按引用传递参数">按引用传递</a>。</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params">paramA1: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`UseStateVarByValue: <span class="hljs-subst">${paramA1}</span> `</span>)</li><li>  }</li><li>}</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title function_">overBuilder</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="按引用传递参数">按引用传递参数<i class="anchor-icon anchor-icon-link" anchorid="按引用传递参数" tips="复制节点链接"></i></h3>          <p>按引用传递参数时，传递的参数可为状态变量，且状态变量的改变会引起@Builder函数内的UI刷新。</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tmp</span> {</li><li>  <span class="hljs-attr">paramA1</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params">params: Tmp</span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`UseStateVarByReference: <span class="hljs-subst">${params.paramA1}</span> `</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 在父组件中调用overBuilder组件时，</span></li><li>      <span class="hljs-comment">// 把this.label通过引用传递的方式传给overBuilder组件。</span></li><li>      <span class="hljs-title function_">overBuilder</span>({ <span class="hljs-attr">paramA1</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span> })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Click me'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 单击Click me后，UI文本从Hello更改为ArkUI。</span></li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span> = <span class="hljs-string">'ArkUI'</span>;</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="限制条件">限制条件<i class="anchor-icon anchor-icon-link" anchorid="限制条件" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>@Builder装饰的函数内部在没有使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#mutablebindingt20" target="_blank">MutableBinding</a>时不允许修改参数值，修改不会触发UI刷新。若<a href="/consumer/cn/doc/harmonyos-guides/arkts-builder#按引用传递参数">按引用传递参数</a>且仅传入一个参数时，修改参数内部的属性会抛出运行时错误。使用MutableBinding可以帮助开发者在@Builder装饰的函数内部修改参数值，请参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-builder#在builder装饰的函数内部修改入参内容">在@Builder装饰的函数内部修改入参内容</a>。</p></li>      <li>       <p>@Builder按引用传递且仅传入一个参数时，才会触发动态渲染UI。请参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-builder#按引用传递参数">按引用传递参数</a>。</p></li>      <li>       <p>如果@Builder传入的参数是两个或两个以上，不会触发动态渲染UI，请参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-builder#builder存在两个或两个以上参数">@Builder存在两个或两个以上参数</a>。</p></li>      <li>       <p>@Builder传入的参数中同时包含按值传递和按引用传递，不会触发动态渲染UI，请参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-builder#builder存在两个或两个以上参数">@Builder存在两个或两个以上参数</a>。</p></li>      <li>       <p>@Builder的参数必须按照对象字面量的形式，把所需属性一一传入，才会触发动态渲染UI，请参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-builder#builder存在两个或两个以上参数">@Builder存在两个或两个以上参数</a>。</p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="使用场景">使用场景<i class="anchor-icon anchor-icon-link" anchorid="使用场景" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="自定义组件内使用自定义构建函数" class="firsth2">自定义组件内使用自定义构建函数<i class="anchor-icon anchor-icon-link" anchorid="自定义组件内使用自定义构建函数" tips="复制节点链接"></i></h3>          <p>创建私有的@Builder函数，在Column中使用this.builder()调用。通过aboutToAppear生命周期函数和按钮的点击事件更新builder_value，实现UI的动态渲染。</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PrivateBuilder</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">builder_value</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">builder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">builder_value</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">230</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#ffeae5e5'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">12</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">builder_value</span> = <span class="hljs-string">'Hello World'</span>;</li><li>    }, <span class="hljs-number">2000</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">builder_value</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">230</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#ffeae5e5'</span>)</li><li>          .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">builder</span>()</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击改变builder_value内容'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">builder_value</span> = <span class="hljs-string">'builder_value被点击了'</span>;</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>示例效果图</p>     <p><span><img originheight="271" originwidth="415" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114910.70035302041942438953343701933136:50001231000000:2800:6738BD0509F5893666E43D7FA8B29484954BD9F416CBD5E29E8C4A0B7F6EA69A.gif" width="415" height="271"></span></p>    </div>    <div class="tiledSection">     <h3 id="全局自定义构建函数-1">全局自定义构建函数<i class="anchor-icon anchor-icon-link" anchorid="全局自定义构建函数-1" tips="复制节点链接"></i></h3>          <p>创建全局的@Builder函数，并在Column中通过overBuilder()方式调用。传递参数时，可以使用对象字面量形式，无论是简单类型还是复杂类型，值的任何变化都会触发UI界面的刷新。</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">ChildTmp</span> {</li><li>  <span class="hljs-attr">val</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tmp</span> {</li><li>  <span class="hljs-attr">str_value</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>  <span class="hljs-attr">num_value</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-attr">tmp_value</span>: <span class="hljs-title class_">ChildTmp</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChildTmp</span>();</li><li>  <span class="hljs-attr">arrayTmp_value</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">ChildTmp</span>&gt; = [];</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params">param: Tmp</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`str_value: <span class="hljs-subst">${param.str_value}</span>`</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">230</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">12</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>      .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`num_value: <span class="hljs-subst">${param.num_value}</span>`</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">230</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">12</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>      .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`tmp_value: <span class="hljs-subst">${param.tmp_value.val}</span>`</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">230</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">12</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>      .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>    <span class="hljs-title class_">ForEach</span>(param.<span class="hljs-property">arrayTmp_value</span>, <span class="hljs-function">(<span class="hljs-params">item: ChildTmp</span>) =&gt;</span> {</li><li>      <span class="hljs-title class_">ListItem</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">`arrayTmp_value: <span class="hljs-subst">${item.val}</span>`</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">230</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">12</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>          .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>      }</li><li>    }, <span class="hljs-function">(<span class="hljs-params">item: ChildTmp</span>) =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(item))</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">objParam</span>: <span class="hljs-title class_">Tmp</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tmp</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'通过调用@Builder渲染UI界面'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">12</span>)</li><li>      <span class="hljs-title function_">overBuilder</span>({</li><li>        <span class="hljs-attr">str_value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">objParam</span>.<span class="hljs-property">str_value</span>,</li><li>        <span class="hljs-attr">num_value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">objParam</span>.<span class="hljs-property">num_value</span>,</li><li>        <span class="hljs-attr">tmp_value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">objParam</span>.<span class="hljs-property">tmp_value</span>,</li><li>        <span class="hljs-attr">arrayTmp_value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">objParam</span>.<span class="hljs-property">arrayTmp_value</span></li><li>      })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击改变参数值'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">objParam</span>.<span class="hljs-property">str_value</span> = <span class="hljs-string">'Hello World'</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">objParam</span>.<span class="hljs-property">num_value</span> = <span class="hljs-number">1</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">objParam</span>.<span class="hljs-property">tmp_value</span>.<span class="hljs-property">val</span> = <span class="hljs-number">8</span>;</li><li>        <span class="hljs-keyword">const</span> <span class="hljs-attr">child_value</span>: <span class="hljs-title class_">ChildTmp</span> = {</li><li>          <span class="hljs-attr">val</span>: <span class="hljs-number">2</span></li><li>        }</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">objParam</span>.<span class="hljs-property">arrayTmp_value</span>.<span class="hljs-title function_">push</span>(child_value);</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>示例效果图</p>     <p><span><img originheight="534" originwidth="442" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114910.24314537637277769821999406605192:50001231000000:2800:55450F7DC31EB24536435ACDF6CA7D1D4609C53F1D1708158EB9E058E1160B31.gif" width="442" height="534"></span></p>    </div>    <div class="tiledSection">     <h3 id="修改装饰器修饰的变量触发ui刷新">修改装饰器修饰的变量触发UI刷新<i class="anchor-icon anchor-icon-link" anchorid="修改装饰器修饰的变量触发ui刷新" tips="复制节点链接"></i></h3>          <p>在该场景中，@Builder被用来展示Text组件，不会参与动态UI刷新。Text组件中值的变化是通过使用装饰器的特性，监听到值的改变触发的UI刷新，而不是通过@Builder的能力触发的。</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tmp</span> {</li><li>  <span class="hljs-attr">str_value</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">objParam</span>: <span class="hljs-title class_">Tmp</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tmp</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'World'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">privateBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`wrapBuilder str_value: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.objParam.str_value}</span>`</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">350</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">12</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`wrapBuilder num: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.label}</span>`</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">350</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">12</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'通过调用@Builder渲染UI界面'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">privateBuilder</span>()</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击改变参数值'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">objParam</span>.<span class="hljs-property">str_value</span> = <span class="hljs-string">'str_value Hello World'</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span> = <span class="hljs-string">'label Hello World'</span>;</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>示例效果图</p>     <p><span><img originheight="314" originwidth="535" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114910.96111721990706492684148741019892:50001231000000:2800:9F24DBF59F0343F4A253F55A5D066825757DF88D833A9E94062D74297B2B6F52.gif" width="535" height="314"></span></p>    </div>    <div class="tiledSection">     <h3 id="将builder装饰的函数当作custombuilder类型使用">将@Builder装饰的函数当作CustomBuilder类型使用<i class="anchor-icon anchor-icon-link" anchorid="将builder装饰的函数当作custombuilder类型使用" tips="复制节点链接"></i></h3>          <p>当参数类型为CustomBuilder时，可以传入定义的@Builder函数。因为CustomBuilder实际上是Function(() =&gt; any)或void类型，而@Builder也是Function类型。所以通过传入@Builder可以实现特定效果。</p>     <p>全局@Builder函数当作CustomBuilder类型传递时需要绑定this上下文，开发者可以直接调用全局@Builder函数，编译工具链会自动生成绑定this上下文的代码。</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">'全局 Builder'</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct customBuilderDemo {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">arr</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">privateBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'局部 Builder'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {</li><li>        <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${item}</span>`</span>)</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>              .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>              .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>              .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>              .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xFFFFFF</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">swipeAction</span>({</li><li>            <span class="hljs-attr">start</span>: {</li><li>              <span class="hljs-attr">builder</span>: <span class="hljs-title function_">overBuilder</span>() <span class="hljs-comment">// 编译工具链会自动绑定this上下文</span></li><li>            },</li><li>            <span class="hljs-attr">end</span>: {</li><li>              <span class="hljs-attr">builder</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-comment">// 在箭头函数中调用局部@Builder会自动绑定this上下文，无需编译工具链处理</span></li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">privateBuilder</span>()</li><li>              }</li><li>            }</li><li>          })</li><li>        }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(item))</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>示例效果图</p>     <p><span><img originheight="398" originwidth="266" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114910.46822016880421658507651347933047:50001231000000:2800:C916BF99B7E0F8BDFAA2E3A6BA59FA55044A709F752A4A57D9DA73CDE56B771E.gif" class="notEnlarge" width="266" height="398"></span></p>    </div>    <div class="tiledSection">     <h3 id="多层builder函数嵌套">多层@Builder函数嵌套<i class="anchor-icon anchor-icon-link" anchorid="多层builder函数嵌套" tips="复制节点链接"></i></h3>          <p>在@Builder函数内调用自定义组件或其他@Builder函数，实现多个@Builder嵌套使用。若要实现最内层的@Builder动态UI刷新功能，每层调用@Builder的地方必须使用按引用传递的方式。这里$$不是必须的参数形式，可以换成其他名称。</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tmp</span> {</li><li>  <span class="hljs-attr">paramA1</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">parentBuilder</span>(<span class="hljs-params">$$: Tmp</span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`parentBuilder===<span class="hljs-subst">${$$.paramA1}</span>`</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>      <span class="hljs-title class_">HelloComponent</span>({ <span class="hljs-attr">message</span>: $$.<span class="hljs-property">paramA1</span> })</li><li>      <span class="hljs-title function_">childBuilder</span>({ <span class="hljs-attr">paramA1</span>: $$.<span class="hljs-property">paramA1</span> })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">HelloComponent</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`HelloComponent===<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.message}</span>`</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">childBuilder</span>(<span class="hljs-params">$$: Tmp</span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`childBuilder===<span class="hljs-subst">${$$.paramA1}</span>`</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>      <span class="hljs-title class_">HelloChildComponent</span>({ <span class="hljs-attr">message</span>: $$.<span class="hljs-property">paramA1</span> })</li><li>      <span class="hljs-title function_">grandsonBuilder</span>({ <span class="hljs-attr">paramA1</span>: $$.<span class="hljs-property">paramA1</span> })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">HelloChildComponent</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`HelloChildComponent===<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.message}</span>`</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">grandsonBuilder</span>(<span class="hljs-params">$$: Tmp</span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`grandsonBuilder===<span class="hljs-subst">${$$.paramA1}</span>`</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>      <span class="hljs-title class_">HelloGrandsonComponent</span>({ <span class="hljs-attr">message</span>: $$.<span class="hljs-property">paramA1</span> })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">HelloGrandsonComponent</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`HelloGrandsonComponent===<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.message}</span>`</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title function_">parentBuilder</span>({ <span class="hljs-attr">paramA1</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span> })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Click me'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span> = <span class="hljs-string">'ArkUI'</span>;</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>示例效果图</p>     <p><span><img originheight="615" originwidth="497" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114910.37381882833885777361906802103461:50001231000000:2800:66CAE597B33B458DEC4F7008F381816787833794386E98C5476C51F2D988ECEB.gif" width="497" height="615"></span></p>    </div>    <div class="tiledSection">     <h3 id="builder函数联合v2装饰器">@Builder函数联合V2装饰器<i class="anchor-icon anchor-icon-link" anchorid="builder函数联合v2装饰器" tips="复制节点链接"></i></h3>          <p>由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-observedv2-and-trace">@ObservedV2</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-observedv2-and-trace">@Trace</a>装饰的类对象实例具备深度观测属性变化的能力。在@ComponentV2装饰的自定义组件中，当调用全局Builder或局部Builder且使用值传递的方式传递参数时，修改@Trace装饰的对象属性可以触发UI刷新。</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Info</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params">param: Info</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`全局@Builder name: <span class="hljs-subst">${param.name}</span>`</span>)</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`全局@Builder age: <span class="hljs-subst">${param.age}</span>`</span>)</li><li>  }</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">230</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>  .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>  .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">20</span> })</li><li>  .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>  .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">ChildPage</span> {</li><li>  <span class="hljs-meta">@Require</span> <span class="hljs-meta">@Param</span> <span class="hljs-attr">childInfo</span>: <span class="hljs-title class_">Info</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 此处必须为值传递方式，如果使用引用传递的方式会被ArkTS语法拦截</span></li><li>      <span class="hljs-title function_">overBuilder</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">childInfo</span>)</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">ParentPage</span> {</li><li>  <span class="hljs-attr">info1</span>: <span class="hljs-title class_">Info</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Info</span>(<span class="hljs-string">'Tom'</span>, <span class="hljs-number">25</span>);</li><li>  <span class="hljs-attr">info2</span>: <span class="hljs-title class_">Info</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Info</span>(<span class="hljs-string">'Tom'</span>, <span class="hljs-number">25</span>);</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">privateBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`局部@Builder name: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.info1.name}</span>`</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`局部@Builder age: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.info1.age}</span>`</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-number">230</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>    .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Flex</span>() {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">`info1: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.info1.name}</span>  <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.info1.age}</span>`</span>) <span class="hljs-comment">// Text1</span></li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">`info2: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.info2.name}</span>  <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.info2.age}</span>`</span>) <span class="hljs-comment">// Text2</span></li><li>        }</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">230</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">60</span> })</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>
</li><li>      <span class="hljs-comment">// 调用局部@Builder</span></li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">privateBuilder</span>()</li><li>      <span class="hljs-comment">// 调用全局@Builder, 此处必须为值传递方式，如果使用引用传递的方式会被ArkTS语法拦截</span></li><li>      <span class="hljs-title function_">overBuilder</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">info2</span>)</li><li>      <span class="hljs-title class_">ChildPage</span>({ <span class="hljs-attr">childInfo</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">info1</span> }) <span class="hljs-comment">// 调用自定义组件</span></li><li>      <span class="hljs-title class_">ChildPage</span>({ <span class="hljs-attr">childInfo</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">info2</span> }) <span class="hljs-comment">// 调用自定义组件</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'change info1&amp;info2'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">info1</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'Cat'</span>; <span class="hljs-comment">// 修改Text1显示的info1的name值</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">info1</span>.<span class="hljs-property">age</span> = <span class="hljs-number">18</span>; <span class="hljs-comment">// 修改Text1显示的info1的age值</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">info2</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'Cat'</span>; <span class="hljs-comment">// 修改Text2显示的info2的name值</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">info2</span>.<span class="hljs-property">age</span> = <span class="hljs-number">18</span>; <span class="hljs-comment">// 修改Text2显示的info2的age值</span></li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>示例效果图</p>     <p><span><img originheight="338" originwidth="243" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114910.96882260931602180944195464234015:50001231000000:2800:7821FC72BB95C752746B392B47FB1FECA1886BDF60E6F459FA2A4BC2CA2A8AC1.gif" class="notEnlarge" width="243" height="338"></span></p>     <p>当通过引用传递方式向@Builder传递参数时，若参数为@Local装饰的对象，对该对象进行整体赋值会触发@Builder中UI刷新。</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Info</span> {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Tom'</span>;</li><li>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">25</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params">param: Info</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`全局@Builder name: <span class="hljs-subst">${param.name}</span>`</span>)</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`全局@Builder age: <span class="hljs-subst">${param.age}</span>`</span>)</li><li>  }</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">230</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>  .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>  .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">20</span> })</li><li>  .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>  .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">ChildPage</span> {</li><li>  <span class="hljs-meta">@Require</span> <span class="hljs-meta">@Param</span> <span class="hljs-attr">childInfo</span>: <span class="hljs-title class_">Info</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 此处为引用传递方式</span></li><li>      <span class="hljs-title function_">overBuilder</span>({ <span class="hljs-attr">name</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">childInfo</span>.<span class="hljs-property">name</span>, <span class="hljs-attr">age</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">childInfo</span>.<span class="hljs-property">age</span> })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">ParentPage</span> {</li><li>  <span class="hljs-attr">info1</span>: <span class="hljs-title class_">Info</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Tom'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> };</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">info2</span>: <span class="hljs-title class_">Info</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Tom'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> };</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">privateBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`局部@Builder name: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.info1.name}</span>`</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`局部@Builder age: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.info1.age}</span>`</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-number">230</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>    .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Flex</span>() {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">`info1: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.info1.name}</span>  <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.info1.age}</span>`</span>) <span class="hljs-comment">// Text1</span></li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">`info2: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.info2.name}</span>  <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.info2.age}</span>`</span>) <span class="hljs-comment">// Text2</span></li><li>        }</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">230</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">60</span> })</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>
</li><li>      <span class="hljs-comment">// 调用局部@Builder</span></li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">privateBuilder</span>()</li><li>      <span class="hljs-comment">// 调用全局@Builder, 此处为引用传递方式</span></li><li>      <span class="hljs-title function_">overBuilder</span>({ <span class="hljs-attr">name</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">info2</span>.<span class="hljs-property">name</span>, <span class="hljs-attr">age</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">info2</span>.<span class="hljs-property">age</span> })</li><li>      <span class="hljs-title class_">ChildPage</span>({ <span class="hljs-attr">childInfo</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">info1</span> }) <span class="hljs-comment">// 调用自定义组件</span></li><li>      <span class="hljs-title class_">ChildPage</span>({ <span class="hljs-attr">childInfo</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">info2</span> }) <span class="hljs-comment">// 调用自定义组件</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'change info1&amp;info2'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">info1</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Cat'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span> }; <span class="hljs-comment">// Text1不会刷新，原因是没有装饰器修饰监听不到值的改变</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">info2</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Cat'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span> }; <span class="hljs-comment">// Text2会刷新，原因是有装饰器修饰，可以监听到值的改变</span></li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>示例效果图</p>     <p><span><img originheight="340" originwidth="242" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114910.48806878931794799603930910335858:50001231000000:2800:44902E1DD914628C621CB3098A8DD06B818845A08C655E3C028CFC7C2D2D2C56.gif" class="notEnlarge" width="242" height="340"></span></p>    </div>    <div class="tiledSection">     <h3 id="跨组件复用的全局builder">跨组件复用的全局@Builder<i class="anchor-icon anchor-icon-link" anchorid="跨组件复用的全局builder" tips="复制节点链接"></i></h3>          <p>在跨组件的场景中调用全局@Builder，通过按引用传递的方式传递参数，可以实现UI的动态刷新功能。</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tmp</span> {</li><li>  <span class="hljs-attr">componentName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Child'</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">itemBuilder</span>(<span class="hljs-params">params: Tmp</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`Builder ===<span class="hljs-subst">${params.componentName}</span>`</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>      .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ReusablePage</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">switchFlag</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">switchFlag</span>) {</li><li>        <span class="hljs-title class_">ReusableChildPage</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'Child'</span> })</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-title class_">ReusableChildTwoPage</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'ChildTwo'</span> })</li><li>      }</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Click me'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">switchFlag</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">switchFlag</span>;</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Reusable</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ReusableChildPage</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Child'</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToReuse</span>(<span class="hljs-attr">params</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">ESObject</span>&gt;): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Recycle ====Child'</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = params.<span class="hljs-property">message</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`ReusableChildPage ===<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.message}</span>`</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>      <span class="hljs-title function_">itemBuilder</span>({ <span class="hljs-attr">componentName</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Reusable</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ReusableChildTwoPage</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'ChildTwo'</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToReuse</span>(<span class="hljs-attr">params</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">ESObject</span>&gt;): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Recycle ====ChildTwo'</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = params.<span class="hljs-property">message</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`ReusableChildTwoPage ===<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.message}</span>`</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>      <span class="hljs-title function_">itemBuilder</span>({ <span class="hljs-attr">componentName</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>示例效果图</p>     <p><span><img originheight="280" originwidth="518" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114910.71684345903423142409363055679323:50001231000000:2800:8E15A0F25F9CBC514D92BC900723D3D6D3C1A15E7C9462616044E03EE139B9FB.gif" width="518" height="280"></span></p>    </div>    <div class="tiledSection">     <h3 id="builder支持状态变量刷新">@Builder支持状态变量刷新<i class="anchor-icon anchor-icon-link" anchorid="builder支持状态变量刷新" tips="复制节点链接"></i></h3>          <p>从API version 20开始，开发者可以通过使用UIUtils.makeBinding()函数、Binding类和MutableBinding类实现@Builder函数中状态变量的刷新。详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#makebinding20" target="_blank">状态管理API文档</a>。</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Binding</span>, <span class="hljs-title class_">MutableBinding</span>, <span class="hljs-title class_">UIUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassA</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">props</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomButton</span>(<span class="hljs-params">num1: Binding&lt;<span class="hljs-built_in">number</span>&gt;, num2: MutableBinding&lt;<span class="hljs-built_in">number</span>&gt;</span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`number1 === <span class="hljs-subst">${num1.value}</span>,  number2 === <span class="hljs-subst">${num2.value}</span>`</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>
</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">`only change number2`</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          num2.<span class="hljs-property">value</span> += <span class="hljs-number">1</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomButtonObj</span>(<span class="hljs-params">obj1: MutableBinding&lt;ClassA&gt;</span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`props === <span class="hljs-subst">${obj1.value.props}</span>`</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>
</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">`change props`</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          obj1.<span class="hljs-property">value</span>.<span class="hljs-property">props</span> += <span class="hljs-string">'Hi'</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Single</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number1</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">5</span>;</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number2</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">12</span>;</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">classA</span>: <span class="hljs-title class_">ClassA</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassA</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">`change both number1 and number2`</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">number1</span> += <span class="hljs-number">1</span>;</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">number2</span> += <span class="hljs-number">2</span>;</li><li>        })</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`number1 === <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.number1}</span>`</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`number2 === <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.number2}</span>`</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>      <span class="hljs-title class_">CustomButton</span>(</li><li>        <span class="hljs-title class_">UIUtils</span>.<span class="hljs-property">makeBinding</span>&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">number1</span>),</li><li>        <span class="hljs-title class_">UIUtils</span>.<span class="hljs-property">makeBinding</span>&lt;<span class="hljs-built_in">number</span>&gt;(</li><li>          <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">number2</span>,</li><li>          <span class="hljs-function">(<span class="hljs-params">val: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">number2</span> = val;</li><li>          })</li><li>      )</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`classA.props === <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.classA.props}</span>`</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0d000000'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#e6000000'</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>      <span class="hljs-title class_">CustomButtonObj</span>(</li><li>        <span class="hljs-title class_">UIUtils</span>.<span class="hljs-property">makeBinding</span>&lt;<span class="hljs-title class_">ClassA</span>&gt;(</li><li>          <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">classA</span>,</li><li>          <span class="hljs-function">(<span class="hljs-params">val: ClassA</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">classA</span> = val;</li><li>          })</li><li>      )</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>示例效果图</p>     <p><span><img originheight="511" originwidth="395" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114910.94802700650392974613487363599079:50001231000000:2800:0F4B5CB0AF907A3FDDF14498758B37E1D25AF2409F7B89FBB21FE638DCD6F814.gif" width="395" height="511"></span></p>    </div>    <div class="tiledSection">     <h2 id="常见问题">常见问题<i class="anchor-icon anchor-icon-link" anchorid="常见问题" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="builder存在两个或两个以上参数" class="firsth2">@Builder存在两个或两个以上参数<i class="anchor-icon anchor-icon-link" anchorid="builder存在两个或两个以上参数" tips="复制节点链接"></i></h3>          <p>当存在两个或两个以上的参数时，即使通过对象字面量形式传递，值的改变也不会触发UI刷新。</p>     <p>【反例】</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalTmp</span> {</li><li>  <span class="hljs-attr">str_value</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params">param: GlobalTmp, num: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`str_value: <span class="hljs-subst">${param.str_value}</span>`</span>)</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`num: <span class="hljs-subst">${num}</span>`</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">objParam</span>: <span class="hljs-title class_">GlobalTmp</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GlobalTmp</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">num</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'通过调用@Builder渲染UI界面'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-comment">// 使用了两个参数，用法错误。</span></li><li>      <span class="hljs-title function_">overBuilder</span>({<span class="hljs-attr">str_value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">objParam</span>.<span class="hljs-property">str_value</span>}, <span class="hljs-variable language_">this</span>.<span class="hljs-property">num</span>)</li><li>      <span class="hljs-title class_">Line</span>()</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#000000'</span>).<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击改变参数值'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">objParam</span>.<span class="hljs-property">str_value</span> = <span class="hljs-string">'Hello World'</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">num</span> = <span class="hljs-number">1</span>;</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>【反例】</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalTmp</span> {</li><li>  <span class="hljs-attr">str_value</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>}</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">SecondTmp</span> {</li><li>  <span class="hljs-attr">num_value</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>}</li><li><span class="hljs-meta">@Builder</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params">param: GlobalTmp, num: SecondTmp</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`str_value: <span class="hljs-subst">${param.str_value}</span>`</span>)</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`num: <span class="hljs-subst">${num.num_value}</span>`</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">strParam</span>: <span class="hljs-title class_">GlobalTmp</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GlobalTmp</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">numParam</span>: <span class="hljs-title class_">SecondTmp</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SecondTmp</span>();</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'通过调用@Builder渲染UI界面'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-comment">// 使用了两个参数，用法错误。</span></li><li>      <span class="hljs-title function_">overBuilder</span>({<span class="hljs-attr">str_value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">strParam</span>.<span class="hljs-property">str_value</span>}, {<span class="hljs-attr">num_value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">numParam</span>.<span class="hljs-property">num_value</span>})</li><li>      <span class="hljs-title class_">Line</span>()</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#000000'</span>).<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击改变参数值'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">strParam</span>.<span class="hljs-property">str_value</span> = <span class="hljs-string">'Hello World'</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">numParam</span>.<span class="hljs-property">num_value</span> = <span class="hljs-number">1</span>;</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>@Builder只接受一个参数。当传入一个参数的时候，通过对象字面量的形式传递，值的改变会引起UI的刷新。</p>     <p>【正例】</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalTmp</span> {</li><li>  <span class="hljs-attr">str_value</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>  <span class="hljs-attr">num_value</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>}</li><li><span class="hljs-meta">@Builder</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params">param: GlobalTmp</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`str_value: <span class="hljs-subst">${param.str_value}</span>`</span>)</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`num: <span class="hljs-subst">${param.num_value}</span>`</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">objParam</span>: <span class="hljs-title class_">GlobalTmp</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GlobalTmp</span>();</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'通过调用@Builder渲染UI界面'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-title function_">overBuilder</span>({<span class="hljs-attr">str_value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">objParam</span>.<span class="hljs-property">str_value</span>, <span class="hljs-attr">num_value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">objParam</span>.<span class="hljs-property">num_value</span>})</li><li>      <span class="hljs-title class_">Line</span>()</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#000000'</span>).<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击改变参数值'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">objParam</span>.<span class="hljs-property">str_value</span> = <span class="hljs-string">'Hello World'</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">objParam</span>.<span class="hljs-property">num_value</span> = <span class="hljs-number">1</span>;</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="使用componentv2装饰器触发动态刷新">使用@ComponentV2装饰器触发动态刷新<i class="anchor-icon anchor-icon-link" anchorid="使用componentv2装饰器触发动态刷新" tips="复制节点链接"></i></h3>          <p>在@ComponentV2装饰的组件中，配合@ObservedV2和@Trace装饰器，通过按值传递实现UI刷新功能。</p>     <p>【反例】</p>     <p>在@ComponentV2装饰的自定义组件中，使用简单数据类型不可以触发UI的刷新。</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">ParamTmp</span> {</li><li>  <span class="hljs-meta">@Trace</span> count : <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderNumber</span>(<span class="hljs-params">paramNum: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-title class_">Text</span>(<span class="hljs-string">`paramNum : <span class="hljs-subst">${paramNum}</span>`</span>)</li><li>    .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>    .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">PageBuilder</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">class_value</span>: <span class="hljs-title class_">ParamTmp</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ParamTmp</span>();</li><li>  <span class="hljs-comment">// 此处使用简单数据类型不支持刷新UI的能力。</span></li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">num_value</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">progressTimer</span>: <span class="hljs-built_in">number</span> = -<span class="hljs-number">1</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">progressTimer</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">class_value</span>.<span class="hljs-property">count</span> &lt; <span class="hljs-number">100</span>) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">class_value</span>.<span class="hljs-property">count</span> += <span class="hljs-number">5</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">num_value</span> += <span class="hljs-number">5</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">progressTimer</span>);</li><li>      }</li><li>    }, <span class="hljs-number">500</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title function_">renderNumber</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">num_value</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">padding</span>(<span class="hljs-number">50</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>【正例】</p>     <p>在@ComponentV2装饰器装饰的自定义组件中，只有使用@ObservedV2装饰的ParamTmp类和使用@Trace装饰的count属性才能触发UI刷新。</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">ParamTmp</span> {</li><li>  <span class="hljs-meta">@Trace</span> count : <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderText</span>(<span class="hljs-params">param: ParamTmp</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`param : <span class="hljs-subst">${param.count}</span>`</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderMap</span>(<span class="hljs-params">paramMap: <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">string</span>,<span class="hljs-built_in">number</span>&gt;</span>) {</li><li>  <span class="hljs-title class_">Text</span>(<span class="hljs-string">`paramMap : <span class="hljs-subst">${paramMap.get(<span class="hljs-string">'name'</span>)}</span>`</span>)</li><li>    .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>    .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderSet</span>(<span class="hljs-params">paramSet: <span class="hljs-built_in">Set</span>&lt;<span class="hljs-built_in">number</span>&gt;</span>) {</li><li>  <span class="hljs-title class_">Text</span>(<span class="hljs-string">`paramSet : <span class="hljs-subst">${paramSet.size}</span>`</span>)</li><li>    .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>    .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderNumberArr</span>(<span class="hljs-params">paramNumArr: <span class="hljs-built_in">number</span>[]</span>) {</li><li>  <span class="hljs-title class_">Text</span>(<span class="hljs-string">`paramNumArr : <span class="hljs-subst">${paramNumArr[<span class="hljs-number">0</span>]}</span>`</span>)</li><li>    .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>    .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">PageBuilder</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">builderParams</span>: <span class="hljs-title class_">ParamTmp</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ParamTmp</span>();</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">map_value</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>,<span class="hljs-built_in">number</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">set_value</span>: <span class="hljs-title class_">Set</span>&lt;<span class="hljs-built_in">number</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">0</span>]);</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">numArr_value</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">0</span>];</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">progressTimer</span>: <span class="hljs-built_in">number</span> = -<span class="hljs-number">1</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">progressTimer</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">builderParams</span>.<span class="hljs-property">count</span> &lt; <span class="hljs-number">100</span>) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">builderParams</span>.<span class="hljs-property">count</span> += <span class="hljs-number">5</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">map_value</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'name'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">builderParams</span>.<span class="hljs-property">count</span>);</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">set_value</span>.<span class="hljs-title function_">add</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">builderParams</span>.<span class="hljs-property">count</span>);</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">numArr_value</span>[<span class="hljs-number">0</span>] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">builderParams</span>.<span class="hljs-property">count</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">progressTimer</span>);</li><li>      }</li><li>    }, <span class="hljs-number">500</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">localBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`localBuilder : <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.builderParams.count}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">localBuilder</span>()</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`builderParams :<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.builderParams.count}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>      <span class="hljs-title function_">renderText</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">builderParams</span>)</li><li>      <span class="hljs-title function_">renderText</span>({ <span class="hljs-attr">count</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">builderParams</span>.<span class="hljs-property">count</span> })</li><li>      <span class="hljs-title function_">renderMap</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map_value</span>)</li><li>      <span class="hljs-title function_">renderSet</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">set_value</span>)</li><li>      <span class="hljs-title function_">renderNumberArr</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">numArr_value</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="在builder内创建自定义组件传递参数不刷新问题">在@Builder内创建自定义组件传递参数不刷新问题<i class="anchor-icon anchor-icon-link" anchorid="在builder内创建自定义组件传递参数不刷新问题" tips="复制节点链接"></i></h3>          <p>在parentBuilder函数中创建自定义组件HelloComponent，传递参数为class对象并修改对象内的值时，UI不会触发刷新功能。</p>     <p>【反例】</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tmp</span> {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">16</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">parentBuilder</span>(<span class="hljs-params">params: Tmp</span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`parentBuilder===<span class="hljs-subst">${params.name}</span>===<span class="hljs-subst">${params.age}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>      <span class="hljs-comment">// 此写法不属于按引用传递方式，用法错误导致UI不刷新。</span></li><li>      <span class="hljs-title class_">HelloComponent</span>({ <span class="hljs-attr">info</span>: params })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">HelloComponent</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">info</span>: <span class="hljs-title class_">Tmp</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tmp</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`HelloComponent===<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.info.name}</span>===<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.info.age}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ParentPage</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">nameValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'张三'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">ageValue</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">18</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title function_">parentBuilder</span>({ <span class="hljs-attr">name</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">nameValue</span>, <span class="hljs-attr">age</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">ageValue</span> })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Click me'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 此处修改内容时，不会引起HelloComponent处的变化</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">nameValue</span> = <span class="hljs-string">'李四'</span>;</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">ageValue</span> = <span class="hljs-number">20</span>;</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>在parentBuilder函数中创建自定义组件HelloComponent，传递参数为对象字面量形式并修改对象内的值时，UI触发刷新功能。</p>     <p>【正例】</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tmp</span> {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">16</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">parentBuilder</span>(<span class="hljs-params">params: Tmp</span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`parentBuilder===<span class="hljs-subst">${params.name}</span>===<span class="hljs-subst">${params.age}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>      <span class="hljs-comment">// 将整个对象拆分开变成简单类型，属于按引用传递方式，更改属性能够触发UI刷新。</span></li><li>      <span class="hljs-title class_">HelloComponent</span>({ <span class="hljs-attr">childName</span>: params.<span class="hljs-property">name</span>, <span class="hljs-attr">childAge</span>: params.<span class="hljs-property">age</span> })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">HelloComponent</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">childName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">childAge</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`HelloComponent===<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.childName}</span>===<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.childAge}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ParentPage</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">nameValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'张三'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">ageValue</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">18</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title function_">parentBuilder</span>({ <span class="hljs-attr">name</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">nameValue</span>, <span class="hljs-attr">age</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">ageValue</span> })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Click me'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 此处修改内容时，会引起HelloComponent处的变化</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">nameValue</span> = <span class="hljs-string">'李四'</span>;</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">ageValue</span> = <span class="hljs-number">20</span>;</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="在ui语句外调用builder函数或方法影响节点正常刷新">在UI语句外调用@Builder函数或方法影响节点正常刷新<i class="anchor-icon anchor-icon-link" anchorid="在ui语句外调用builder函数或方法影响节点正常刷新" tips="复制节点链接"></i></h3>          <p>当@Builder方法赋值给变量或者数组后，在UI方法中无法使用，且会造成刷新时节点显示异常。</p>     <p>【反例】</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">BackGround</span> {</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">myImages</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 从应用media目录加载名为startIcon的图像资源。此处'app.media.startIcon'仅作示例，请开发者自行替换。</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.startIcon'</span>)).<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  };</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">myImages2</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.startIcon'</span>)).<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  };</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title class_">Bg</span><span class="hljs-attr">_list</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">CustomBuilder</span>&gt; =[<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">myImages</span>(), <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">myImages2</span>()]; <span class="hljs-comment">// 错误用法，应避免在UI方法外调用@Builder方法</span></li><li>
</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">bg_builder</span>: <span class="hljs-title class_">CustomBuilder</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">myImages</span>(); <span class="hljs-comment">// 错误用法，应避免在UI方法外调用@Builder方法</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">bg_Color</span>: <span class="hljs-title class_">ResourceColor</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">bg_Color2</span>: <span class="hljs-title class_">ResourceColor</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({<span class="hljs-attr">space</span>: <span class="hljs-number">10</span>}) {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'1'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'2'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'3'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>
</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'4-1'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">bg_Color</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'5-1'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'4-2'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'5-2'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>      <span class="hljs-title class_">Stack</span>() {</li><li>        <span class="hljs-title class_">Column</span>(){</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Vsync2'</span>)</li><li>        }</li><li>        .<span class="hljs-title function_">size</span>({ <span class="hljs-attr">width</span>: <span class="hljs-string">'100%'</span>, <span class="hljs-attr">height</span>: <span class="hljs-string">'100%'</span> })</li><li>        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span> })</li><li>      }</li><li>      .<span class="hljs-title function_">size</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">80</span> })</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#ffbbd4bb'</span>)</li><li>
</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'change'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">(<span class="hljs-params">event: ClickEvent</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> = <span class="hljs-number">1</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">bg_Color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">bg_Color2</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>;</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>@Builder方法赋值给变量或数组后在UI方法中无法使用，开发者应避免将@Builder赋值给变量或数组后再使用。</p>     <p>【正例】</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">BackGround</span> {</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">myImages</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.startIcon'</span>)).<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">myImages2</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.startIcon'</span>)).<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">bg_Color</span>: <span class="hljs-title class_">ResourceColor</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">bg_Color2</span>: <span class="hljs-title class_">ResourceColor</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'1'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'2'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">background</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myImages</span>) <span class="hljs-comment">// 直接传递@Builder方法</span></li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'3'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">background</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">myImages</span>()) <span class="hljs-comment">// 直接调用@Builder方法</span></li><li>
</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'4-1'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">bg_Color</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'5-1'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'4-2'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'5-2'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>      <span class="hljs-title class_">Stack</span>() {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Vsync2'</span>)</li><li>        }</li><li>        .<span class="hljs-title function_">size</span>({ <span class="hljs-attr">width</span>: <span class="hljs-string">'100%'</span>, <span class="hljs-attr">height</span>: <span class="hljs-string">'100%'</span> })</li><li>        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span> })</li><li>      }</li><li>      .<span class="hljs-title function_">size</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">80</span> })</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#ffbbd4bb'</span>)</li><li>
</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'change'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">(<span class="hljs-params">event: ClickEvent</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> = <span class="hljs-number">1</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">bg_Color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">bg_Color2</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>;</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="在builder方法中使用mutablebinding未传递set访问器">在@Builder方法中使用MutableBinding未传递set访问器<i class="anchor-icon anchor-icon-link" anchorid="在builder方法中使用mutablebinding未传递set访问器" tips="复制节点链接"></i></h3>          <p>@Builder方法定义时使用MutableBinding，构造时没有给MutableBinding类型参数传递set访问器，触发set访问器会造成运行时错误。</p>     <p>【反例】</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIUtils</span>, <span class="hljs-title class_">Binding</span>, <span class="hljs-title class_">MutableBinding</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalTmp</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">str_value</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">builderWithTwoParams</span>(<span class="hljs-params">param1: Binding&lt;GlobalTmp&gt;, param2: MutableBinding&lt;<span class="hljs-built_in">number</span>&gt;</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`str_value: <span class="hljs-subst">${param1.value.str_value}</span>`</span>)</li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">`num: <span class="hljs-subst">${param2.value}</span>`</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">()=&gt;</span>{</li><li>        param2.<span class="hljs-property">value</span> += <span class="hljs-number">1</span>; <span class="hljs-comment">// 点击Button触发set访问器会造成运行时错误</span></li><li>      })</li><li>  }.<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">MakeBindingTest</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">globalTmp</span>: <span class="hljs-title class_">GlobalTmp</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GlobalTmp</span>();</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">num</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.globalTmp.str_value}</span>`</span>)</li><li>      <span class="hljs-title function_">builderWithTwoParams</span>(<span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">makeBinding</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">globalTmp</span>),</li><li>        <span class="hljs-title class_">UIUtils</span>.<span class="hljs-property">makeBinding</span>&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">num</span>)) <span class="hljs-comment">// 构造MutableBinding类型参数时没有传SetterCallback</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击改变参数值'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">globalTmp</span>.<span class="hljs-property">str_value</span> = <span class="hljs-string">'Hello World 2025'</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">num</span> = <span class="hljs-number">1</span>;</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>MutableBinding的使用规格详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#mutablebindingt20" target="_blank">状态管理API文档</a>。</p>     <p>【正例】</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIUtils</span>, <span class="hljs-title class_">Binding</span>, <span class="hljs-title class_">MutableBinding</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalTmp</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">str_value</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">builderWithTwoParams</span>(<span class="hljs-params">param1: Binding&lt;GlobalTmp&gt;, param2: MutableBinding&lt;<span class="hljs-built_in">number</span>&gt;</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`str_value: <span class="hljs-subst">${param1.value.str_value}</span>`</span>)</li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">`num: <span class="hljs-subst">${param2.value}</span>`</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        param2.<span class="hljs-property">value</span> += <span class="hljs-number">1</span>; <span class="hljs-comment">// 修改了MutableBinding类型参数的value属性</span></li><li>      })</li><li>  }.<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">MakeBindingTest</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">globalTmp</span>: <span class="hljs-title class_">GlobalTmp</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GlobalTmp</span>();</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">num</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.globalTmp.str_value}</span>`</span>)</li><li>      <span class="hljs-title function_">builderWithTwoParams</span>(<span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">makeBinding</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">globalTmp</span>),</li><li>        <span class="hljs-title class_">UIUtils</span>.<span class="hljs-property">makeBinding</span>&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">num</span>,</li><li>          <span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">num</span> = val;</li><li>          }))</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击改变参数值'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">globalTmp</span>.<span class="hljs-property">str_value</span> = <span class="hljs-string">'Hello World 2025'</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">num</span> = <span class="hljs-number">1</span>;</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="在builder装饰的函数内部修改入参内容">在@Builder装饰的函数内部修改入参内容<i class="anchor-icon anchor-icon-link" anchorid="在builder装饰的函数内部修改入参内容" tips="复制节点链接"></i></h3>          <p>不使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#mutablebindingt20" target="_blank">MutableBinding</a>的情况下，在@Builder装饰的函数内部修改参数值，修改不会生效且可能造成运行时错误。</p>     <p>【反例】</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyGlobalBuilder</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`MyGlobalBuilder: <span class="hljs-subst">${value}</span> `</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 简单类型按值传递的@Builder函数中修改参数，不闪退但UI不刷新</span></li><li>        value = <span class="hljs-string">'value change'</span>;</li><li>      })</li><li>  }.<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>}</li><li>
</li><li><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Temp</span> {</li><li>  <span class="hljs-attr">paramA</span>: <span class="hljs-built_in">string</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params">param: Temp</span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">`overBuilder === <span class="hljs-subst">${param.paramA}</span>`</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 错误写法，不允许在@Builder装饰的函数内部修改对象类型参数的属性，闪退且UI不刷新</span></li><li>          param.<span class="hljs-property">paramA</span> = <span class="hljs-string">'Yes'</span>;</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'change'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 错误写法，不允许在@Builder装饰的函数内部修改对象类型参数的引用，不闪退但UI不刷新</span></li><li>          param = { <span class="hljs-attr">paramA</span>: <span class="hljs-string">'change trial'</span> };</li><li>        })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message1</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Value Passing'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">extendBlank</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Blank</span>()</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">20</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 按引用传递能实现参数变化时的UI刷新，但不能在@Builder函数内部修改参数</span></li><li>      <span class="hljs-title function_">overBuilder</span>({ <span class="hljs-attr">paramA</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span> });</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">extendBlank</span>();</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'click me'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span> = <span class="hljs-string">'ArkUI'</span>;</li><li>        })</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">extendBlank</span>();</li><li>      <span class="hljs-title class_">MyGlobalBuilder</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message1</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>正确使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#mutablebindingt20" target="_blank">MutableBinding</a>可以帮助开发者在@Builder装饰的函数内部修改参数值。</p>     <p>【正例】</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIUtils</span>, <span class="hljs-title class_">MutableBinding</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-comment">// 使用MutableBinding在@Builder装饰的函数中修改参数值</span></li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyGlobalBuilderMod</span>(<span class="hljs-params">str: MutableBinding&lt;<span class="hljs-built_in">string</span>&gt;</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`Mod--MyGlobalBuilder: <span class="hljs-subst">${str.value}</span>`</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        str.<span class="hljs-property">value</span> = <span class="hljs-string">'value change mod'</span>;</li><li>      })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Temp</span> {</li><li>  <span class="hljs-attr">paramA</span>: <span class="hljs-built_in">string</span>;</li><li>}</li><li>
</li><li><span class="hljs-comment">// 使用MutableBinding在@Builder装饰的函数内部修改参数值</span></li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilderMod</span>(<span class="hljs-params">param: MutableBinding&lt;Temp&gt;</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">`Mod--overBuilder === <span class="hljs-subst">${param.value.paramA}</span>`</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        param.<span class="hljs-property">value</span>.<span class="hljs-property">paramA</span> = <span class="hljs-string">'Yes'</span>;</li><li>      })</li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">`change`</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        param.<span class="hljs-property">value</span> = { <span class="hljs-attr">paramA</span>: <span class="hljs-string">'trialOne'</span> };</li><li>      })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message1</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Value Passing'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">objectOne</span>: <span class="hljs-title class_">Temp</span> = {</li><li>    <span class="hljs-attr">paramA</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span></li><li>  };</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">extendBlank</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Blank</span>()</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">20</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 使用MutableBinding时无法传对象字面量，需要先将字面量对象抽出为状态变量</span></li><li>      <span class="hljs-title function_">overBuilderMod</span>(</li><li>        <span class="hljs-title class_">UIUtils</span>.<span class="hljs-property">makeBinding</span>&lt;<span class="hljs-title class_">Temp</span>&gt;(</li><li>          <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">objectOne</span>,</li><li>          <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">objectOne</span> = value; <span class="hljs-comment">// 必须要传SetterCallback，否则触发时会造成运行时错误</span></li><li>          }</li><li>        )</li><li>      )</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">extendBlank</span>();</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'click me'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">objectOne</span>.<span class="hljs-property">paramA</span> = <span class="hljs-string">'ArkUI'</span>;</li><li>        })</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">extendBlank</span>();</li><li>      <span class="hljs-title class_">MyGlobalBuilderMod</span>(</li><li>        <span class="hljs-title class_">UIUtils</span>.<span class="hljs-property">makeBinding</span>&lt;<span class="hljs-built_in">string</span>&gt;(</li><li>          <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">message1</span>,</li><li>          <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">message1</span> = value; <span class="hljs-comment">// 必须要传SetterCallback，否则触发时会造成运行时错误</span></li><li>          }</li><li>        )</li><li>      );</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="在watch函数中执行builder函数">在@Watch函数中执行@Builder函数<i class="anchor-icon anchor-icon-link" anchorid="在watch函数中执行builder函数" tips="复制节点链接"></i></h3>          <p>在@Watch函数中执行@Builder函数，会导致UI刷新异常。</p>     <p>【反例】</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Child</span> {</li><li>  <span class="hljs-meta">@Provide</span> <span class="hljs-meta">@Watch</span>(<span class="hljs-string">'provideWatch'</span>) <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Index: hello world'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">watchBuilder</span>(<span class="hljs-params">content: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${content}</span>`</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">provideWatch</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">watchBuilder</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>); <span class="hljs-comment">// 错误写法，在@Watch函数中使用@Builder函数</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">`content value: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.content}</span>`</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> += <span class="hljs-string">'_world'</span>;</li><li>        })</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">watchBuilder</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>Button按钮会出现UI异常的情况，开发者需要避免在@Watch函数中使用@Builder函数。</p>     <p>【正例】</p>     <div _ngcontent-hey-c106="" class="highlight-div"><div _ngcontent-hey-c106="" class="highlight-div-header"><div _ngcontent-hey-c106="" class="highlight-div-header-left"><div _ngcontent-hey-c106="" class="handle-button expand-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hey-c106="" class="highlight-div-header-right"><div _ngcontent-hey-c106="" class="handle-button ai-button"></div><div _ngcontent-hey-c106="" class="handle-button line-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hey-c106="" class="handle-button theme-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hey-c106="" class="handle-button copy-button"><div _ngcontent-hey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Child</span> {</li><li>  <span class="hljs-meta">@Provide</span> <span class="hljs-meta">@Watch</span>(<span class="hljs-string">'provideWatch'</span>) <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Index: hello world'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">watchBuilder</span>(<span class="hljs-params">content: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${content}</span>`</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">provideWatch</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`content value has changed.`</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">`content value: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.content}</span>`</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> += <span class="hljs-string">'_world'</span>;</li><li>        })</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">watchBuilder</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>