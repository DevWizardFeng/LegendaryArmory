<h1 _ngcontent-ytj-c119="" class="doc-title ng-star-inserted" title="@ComponentV2装饰器：自定义组件"> @ComponentV2装饰器：自定义组件 </h1>

<div _ngcontent-ytj-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>为了在自定义组件中使用V2版本状态变量装饰器的能力，开发者可以使用@ComponentV2装饰器装饰自定义组件。</p> <p>@ComponentV2主要配合状态管理V2使用。阅读本文档前，建议提前阅读<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-state-management-overview">状态管理概述</a>。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>@ComponentV2装饰器从API version 12开始支持。</p>  <p>从API version 12开始，该装饰器支持在元服务中使用。</p>  </div></div></div>  <div class="tiledSection"><h2 id="概述">概述<i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><p>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-create-custom-components#component">@Component装饰器</a>一样，@ComponentV2装饰器用于装饰自定义组件：</p> <ul><li><p>在@ComponentV2装饰的自定义组件中，开发者仅可以使用全新的状态变量装饰器，包括<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-local">@Local</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-param">@Param</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-once">@Once</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-event">@Event</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-provider-and-consumer">@Provider</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-provider-and-consumer">@Consumer</a>等。</p>  </li><li><p>@ComponentV2装饰的自定义组件暂不支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-localstorage">LocalStorage</a>等现有自定义组件的能力。</p>  </li><li><p>无法同时使用@ComponentV2与@Component装饰同一个struct结构。</p>  </li><li><p>@ComponentV2支持一个可选的boolean类型参数freezeWhenInactive，来实现<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-custom-components-freezev2">组件冻结功能</a>。</p>  </li><li><p>一个简单的@ComponentV2装饰的自定义组件应具有以下部分：</p>  <div _ngcontent-ytj-c106="" class="highlight-div"><div _ngcontent-ytj-c106="" class="highlight-div-header"><div _ngcontent-ytj-c106="" class="highlight-div-header-left"><div _ngcontent-ytj-c106="" class="handle-button expand-button"><div _ngcontent-ytj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ytj-c106="" class="highlight-div-header-right"><div _ngcontent-ytj-c106="" class="handle-button ai-button"></div><div _ngcontent-ytj-c106="" class="handle-button line-button"><div _ngcontent-ytj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ytj-c106="" class="handle-button theme-button"><div _ngcontent-ytj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ytj-c106="" class="handle-button copy-button"><div _ngcontent-ytj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ytj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@ComponentV2</span> <span class="hljs-comment">// 装饰器</span></li><li>struct <span class="hljs-title class_">Index</span> { <span class="hljs-comment">// struct声明的数据结构</span></li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) { <span class="hljs-comment">// build定义的UI</span></li><li>  }</li><li>}</li></ol></pre></div></div>  </li></ul> <p>除非特别说明，@ComponentV2装饰的自定义组件将与@Component装饰的自定义组件保持相同的行为。</p> </div>  <div class="tiledSection"><h2 id="限制条件">限制条件<i class="anchor-icon anchor-icon-link" anchorid="限制条件" tips="复制节点链接"></i></h2><p>在将@Component装饰的自定义组件与@ComponentV2装饰的自定义组件混合使用时，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-custom-component-mixed-scenarios">混用文档</a>。</p> </div> </div> <div></div></div>