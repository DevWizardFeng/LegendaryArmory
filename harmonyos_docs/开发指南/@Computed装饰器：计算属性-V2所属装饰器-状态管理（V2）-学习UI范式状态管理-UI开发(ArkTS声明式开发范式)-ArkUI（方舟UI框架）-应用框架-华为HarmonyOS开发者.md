<h1 _ngcontent-usf-c119="" class="doc-title ng-star-inserted" title="@Computed装饰器：计算属性"> @Computed装饰器：计算属性 </h1>

<div _ngcontent-usf-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>当开发者使用相同的计算逻辑重复绑定在UI上时，为了防止重复计算，可以使用@Computed计算属性。计算属性中的依赖的状态变量变化时，只会计算一次。这解决了UI多次重用该属性导致的重复计算和性能问题。如下面例子。</p> <div _ngcontent-usf-c106="" class="highlight-div"><div _ngcontent-usf-c106="" class="highlight-div-header"><div _ngcontent-usf-c106="" class="highlight-div-header-left"><div _ngcontent-usf-c106="" class="handle-button expand-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usf-c106="" class="highlight-div-header-right"><div _ngcontent-usf-c106="" class="handle-button ai-button"></div><div _ngcontent-usf-c106="" class="handle-button line-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usf-c106="" class="handle-button theme-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usf-c106="" class="handle-button copy-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Computed</span></li><li><span class="hljs-keyword">get</span> <span class="hljs-title function_">sum</span>() {</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count1</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">count2</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">count3</span>;</li><li>}</li><li><span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.count1 + <span class="hljs-variable language_">this</span>.count2 + <span class="hljs-variable language_">this</span>.count3}</span>`</span>) <span class="hljs-comment">// 计算this.count1 + this.count2 + this.count3</span></li><li><span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.count1 + <span class="hljs-variable language_">this</span>.count2 + <span class="hljs-variable language_">this</span>.count3}</span>`</span>) <span class="hljs-comment">// 重复计算this.count1 + this.count2 + this.count3</span></li><li><span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.sum}</span>`</span>) <span class="hljs-comment">// 读取@Computed sum的缓存值，节省上述重复计算</span></li><li><span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.sum}</span>`</span>) <span class="hljs-comment">// 读取@Computed sum的缓存值，节省上述重复计算</span></li></ol></pre></div></div> <p>在阅读本文档前，建议提前阅读：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-componentv2">@ComponentV2</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-observedv2-and-trace">@ObservedV2和@Trace</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-local">@Local</a>。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>@Computed装饰器从API version 12开始支持。</p>  <p>从API version 12开始，该装饰器支持在元服务中使用。</p>  </div></div></div>  <div class="tiledSection"><h2 id="概述">概述<i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><p>@Computed为方法装饰器，装饰getter方法。@Computed会检测被计算的属性变化，当被计算的属性变化时，@Computed只会被求解一次。不建议在@Computed中修改变量，错误的使用会导致数据无法被追踪或appfreeze等问题，详情见<a href="/consumer/cn/doc/harmonyos-guides/arkts-new-computed#使用限制">使用限制</a>。</p> <p>但需要注意，对于简单计算，不建议使用计算属性，因为计算属性本身也有开销。对于复杂的计算，@Computed能带来性能收益。</p> </div>  <div class="tiledSection"><h2 id="装饰器说明">装饰器说明<i class="anchor-icon anchor-icon-link" anchorid="装饰器说明" tips="复制节点链接"></i></h2><p>@Computed语法：</p> <div _ngcontent-usf-c106="" class="highlight-div"><div _ngcontent-usf-c106="" class="highlight-div-header"><div _ngcontent-usf-c106="" class="highlight-div-header-left"><div _ngcontent-usf-c106="" class="handle-button expand-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usf-c106="" class="highlight-div-header-right"><div _ngcontent-usf-c106="" class="handle-button ai-button"></div><div _ngcontent-usf-c106="" class="handle-button line-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usf-c106="" class="handle-button theme-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usf-c106="" class="handle-button copy-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Computed</span></li><li><span class="hljs-keyword">get</span> <span class="hljs-title function_">varName</span>(): T {</li><li>    <span class="hljs-keyword">return</span> value;</li><li>}</li></ol></pre></div></div>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.4.1.3.1.1" valign="top" width="50%">@Computed方法装饰器</th> <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.3.1.2" valign="top" width="50%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%">支持类型</td> <td class="cellrowborder" valign="top" width="50%">getter访问器。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">从父组件初始化</td> <td class="cellrowborder" valign="top" width="50%">禁止。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">可初始化子组件</td> <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-param">@Param</a>。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">被执行的时机</td> <td class="cellrowborder" valign="top" width="50%"><p>@ComponentV2中的@Computed会在自定义组件创建的时候初始化，触发@Computed计算。</p> <p>@ObservedV2装饰的类中的@Computed，会在@ObservedV2装饰的类实例创建后，异步初始化，触发@Computed计算。</p> <p>在@Computed中计算的状态变量被改变时，计算属性会重新计算。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">是否允许赋值</td> <td class="cellrowborder" valign="top" width="50%">@Computed装饰的属性是只读的，不允许赋值，详情见<a href="/consumer/cn/doc/harmonyos-guides/arkts-new-computed#使用限制">使用限制</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="使用限制">使用限制<i class="anchor-icon anchor-icon-link" anchorid="使用限制" tips="复制节点链接"></i></h2><ul><li><p>@Computed为方法装饰器，仅能装饰getter方法。</p>  <div _ngcontent-usf-c106="" class="highlight-div"><div _ngcontent-usf-c106="" class="highlight-div-header"><div _ngcontent-usf-c106="" class="highlight-div-header-left"><div _ngcontent-usf-c106="" class="handle-button expand-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usf-c106="" class="highlight-div-header-right"><div _ngcontent-usf-c106="" class="handle-button ai-button"></div><div _ngcontent-usf-c106="" class="handle-button line-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usf-c106="" class="handle-button theme-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usf-c106="" class="handle-button copy-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Computed</span></li><li><span class="hljs-keyword">get</span> <span class="hljs-title function_">fullName</span>() { <span class="hljs-comment">// 正确用法</span></li><li>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-string">' '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span>;</li><li>}</li><li><span class="hljs-meta">@Computed</span> <span class="hljs-attr">val</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>; <span class="hljs-comment">// 错误用法，编译时报错</span></li><li><span class="hljs-meta">@Computed</span></li><li><span class="hljs-title function_">func</span>(<span class="hljs-params"></span>) { <span class="hljs-comment">// 错误用法，编译时报错</span></li><li>}</li></ol></pre></div></div>  </li><li><p>@Computed装饰的方法只有在初始化，或者其被计算的状态变量改变时，才会发生重新计算。不建议开发者在@Computed装饰的getter方法中做除获取数据外其余的逻辑操作，如下面例子。</p>  </li></ul> <div _ngcontent-usf-c106="" class="highlight-div"><div _ngcontent-usf-c106="" class="highlight-div-header"><div _ngcontent-usf-c106="" class="highlight-div-header-left"><div _ngcontent-usf-c106="" class="handle-button expand-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usf-c106="" class="highlight-div-header-right"><div _ngcontent-usf-c106="" class="handle-button ai-button"></div><div _ngcontent-usf-c106="" class="handle-button line-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usf-c106="" class="handle-button theme-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usf-c106="" class="handle-button copy-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">firstName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hua'</span>;</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">lastName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Li'</span>;</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">showFullNameRequestCount</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">fullNameRequestCount</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-meta">@Computed</span></li><li>  <span class="hljs-keyword">get</span> <span class="hljs-title function_">fullName</span>() {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'fullName'</span>);</li><li>    <span class="hljs-comment">// 不建议在@Computed的计算中做赋值逻辑，因为@Computed本质是一个getter访问器，用来节约重复计算</span></li><li>    <span class="hljs-comment">// 在这个例子中，fullNameRequestCount仅代表@Computed计算次数，不能代表fullName被访问的次数</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fullNameRequestCount</span>++;</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-string">' '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.fullName}</span>`</span>) <span class="hljs-comment">// 获取一次fullName</span></li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.fullName}</span>`</span>) <span class="hljs-comment">// 获取一次fullName，累计获取两次fullName，但是fullName不会重新计算，读取缓存值</span></li><li>
</li><li>      <span class="hljs-comment">// 点击Button，获取fullNameRequestCount次数</span></li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`count <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.showFullNameRequestCount}</span>`</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'get fullName'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">showFullNameRequestCount</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">fullNameRequestCount</span>;</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <ul><li><p>在@Computed装饰的getter方法中，不能改变参与计算的属性，以防止重复执行计算属性导致的appfreeze。</p> <p> 在下面例子中，计算fullName1时触发了this.lastName的改变，this.lastName的改变，触发fullName2的计算，在fullName2的计算中，改变了this.firstName，再次触发fullName1的重新计算，从而导致循环计算，最终引起appfreeze。</p> </li></ul> <div _ngcontent-usf-c106="" class="highlight-div"><div _ngcontent-usf-c106="" class="highlight-div-header"><div _ngcontent-usf-c106="" class="highlight-div-header-left"><div _ngcontent-usf-c106="" class="handle-button expand-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usf-c106="" class="highlight-div-header-right"><div _ngcontent-usf-c106="" class="handle-button ai-button"></div><div _ngcontent-usf-c106="" class="handle-button line-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usf-c106="" class="handle-button theme-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usf-c106="" class="handle-button copy-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">firstName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hua'</span>;</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">lastName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Li'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Computed</span></li><li>  <span class="hljs-keyword">get</span> <span class="hljs-title function_">fullName1</span>() {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'fullName1'</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> += <span class="hljs-string">'a'</span>; <span class="hljs-comment">// 错误，不能改变参与计算的属性</span></li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-string">' '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Computed</span></li><li>  <span class="hljs-keyword">get</span> <span class="hljs-title function_">fullName2</span>() {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'fullName2'</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> += <span class="hljs-string">'a'</span>; <span class="hljs-comment">// 错误，不能改变参与计算的属性</span></li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-string">' '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.fullName1}</span>`</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.fullName2}</span>`</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <ul><li><p>@Computed不能和双向绑定!!连用，@Computed装饰的是getter访问器，不会被子组件同步，也不能被赋值。开发者自己实现的计算属性的setter不生效，且产生编译时报错。</p>  <div _ngcontent-usf-c106="" class="highlight-div"><div _ngcontent-usf-c106="" class="highlight-div-header"><div _ngcontent-usf-c106="" class="highlight-div-header-left"><div _ngcontent-usf-c106="" class="handle-button expand-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usf-c106="" class="highlight-div-header-right"><div _ngcontent-usf-c106="" class="handle-button ai-button"></div><div _ngcontent-usf-c106="" class="handle-button line-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usf-c106="" class="handle-button theme-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usf-c106="" class="handle-button copy-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Child</span> {</li><li>  <span class="hljs-meta">@Param</span> <span class="hljs-attr">double</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>  <span class="hljs-meta">@Event</span> <span class="hljs-attr">$double</span>: <span class="hljs-function">(<span class="hljs-params">val: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">'ChildChange'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.$double(<span class="hljs-number">200</span>);</li><li>      })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>
</li><li>  <span class="hljs-meta">@Computed</span></li><li>  <span class="hljs-keyword">get</span> <span class="hljs-title function_">double</span>() {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// @Computed装饰的属性是只读的，开发者自己实现的setter不生效，编译时报错。</span></li><li>  <span class="hljs-keyword">set</span> <span class="hljs-title function_">double</span>(<span class="hljs-params">newValue : <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = newValue / <span class="hljs-number">2</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Scroll</span>() {</li><li>      <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">3</span> }) {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.count}</span>`</span>)</li><li>        <span class="hljs-comment">// 错误写法，@Computed装饰的属性是只读的，无法与双向绑定连用，编译时报错。</span></li><li>        <span class="hljs-title class_">Child</span>({ <span class="hljs-attr">double</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">double</span>!! })</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>  </li><li><p>@Computed为状态管理V2提供的能力，只能在@ComponentV2和@ObservedV2中使用。</p>  </li><li><p>多个@Computed一起使用时，警惕循环求解，以防止计算过程中的死循环。</p>  <div _ngcontent-usf-c106="" class="highlight-div"><div _ngcontent-usf-c106="" class="highlight-div-header"><div _ngcontent-usf-c106="" class="highlight-div-header-left"><div _ngcontent-usf-c106="" class="handle-button expand-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usf-c106="" class="highlight-div-header-right"><div _ngcontent-usf-c106="" class="handle-button ai-button"></div><div _ngcontent-usf-c106="" class="handle-button line-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usf-c106="" class="handle-button theme-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usf-c106="" class="handle-button copy-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Local</span> a : <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li><span class="hljs-meta">@Computed</span></li><li><span class="hljs-keyword">get</span> <span class="hljs-title function_">b</span>() {</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> + <span class="hljs-string">' '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">c</span>;  <span class="hljs-comment">// 错误写法，存在循环b -&gt; c -&gt; b</span></li><li>}</li><li><span class="hljs-meta">@Computed</span></li><li><span class="hljs-keyword">get</span> <span class="hljs-title function_">c</span>() {</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> + <span class="hljs-string">' '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">b</span>; <span class="hljs-comment">// 错误写法，存在循环c -&gt; b -&gt; c</span></li><li>}</li></ol></pre></div></div>  </li></ul> </div>  <div class="tiledSection"><h2 id="使用场景">使用场景<i class="anchor-icon anchor-icon-link" anchorid="使用场景" tips="复制节点链接"></i></h2></div>  <div class="tiledSection"><h3 id="当被计算的属性变化时computed装饰的getter访问器只会被求解一次" class="firsth2">当被计算的属性变化时，@Computed装饰的getter访问器只会被求解一次<i class="anchor-icon anchor-icon-link" anchorid="当被计算的属性变化时computed装饰的getter访问器只会被求解一次" tips="复制节点链接"></i></h3><ol><li>在自定义组件中使用计算属性。</li></ol> <ul><li>点击第一个Button改变lastName，触发@Computed fullName重新计算。</li><li>this.fullName被绑定在两个Text组件上，观察fullName日志，可以发现，计算只发生了一次。</li><li>对于前两个Text组件，this.lastName + ' '+ this.firstName这段逻辑被求解了两次。</li><li>如果UI中有多处需要使用this.lastName + ' '+ this.firstName这段计算逻辑，可以使用计算属性，减少计算次数。</li><li>点击第二个Button，age自增，UI无变化。因为age非状态变量，只有被观察到的变化才会触发@Computed fullName重新计算。</li></ul> <div _ngcontent-usf-c106="" class="highlight-div"><div _ngcontent-usf-c106="" class="highlight-div-header"><div _ngcontent-usf-c106="" class="highlight-div-header-left"><div _ngcontent-usf-c106="" class="handle-button expand-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usf-c106="" class="highlight-div-header-right"><div _ngcontent-usf-c106="" class="handle-button ai-button"></div><div _ngcontent-usf-c106="" class="handle-button line-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usf-c106="" class="handle-button theme-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usf-c106="" class="handle-button copy-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">firstName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Li'</span>;</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">lastName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hua'</span>;</li><li>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">20</span>; <span class="hljs-comment">// 无法触发Computed</span></li><li>
</li><li>  <span class="hljs-meta">@Computed</span></li><li>  <span class="hljs-keyword">get</span> <span class="hljs-title function_">fullName</span>() {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'---------Computed----------'</span>);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-string">' '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> + <span class="hljs-string">' '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> + <span class="hljs-string">' '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span>)</li><li>      <span class="hljs-title class_">Divider</span>()</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fullName</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fullName</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'changed lastName'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> += <span class="hljs-string">'a'</span>;</li><li>      })</li><li>
</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'changed age'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span>++;  <span class="hljs-comment">// 无法触发Computed</span></li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <p>计算属性本身会带来性能开销，在实际应用开发中需要注意：</p> <ul><li>对于简单的计算逻辑，可以不使用计算属性。</li><li>如果计算逻辑在视图中仅使用一次，则不使用计算属性，直接求解。</li></ul> <ol><li>在@ObservedV2装饰的类中使用计算属性。</li></ol> <ul><li>点击Button改变lastName，触发@Computed fullName重新计算，且只被计算一次。</li></ul> <div _ngcontent-usf-c106="" class="highlight-div"><div _ngcontent-usf-c106="" class="highlight-div-header"><div _ngcontent-usf-c106="" class="highlight-div-header-left"><div _ngcontent-usf-c106="" class="handle-button expand-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usf-c106="" class="highlight-div-header-right"><div _ngcontent-usf-c106="" class="handle-button ai-button"></div><div _ngcontent-usf-c106="" class="handle-button line-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usf-c106="" class="handle-button theme-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usf-c106="" class="handle-button copy-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Name</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">firstName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hua'</span>;</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">lastName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Li'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Computed</span></li><li>  <span class="hljs-keyword">get</span> <span class="hljs-title function_">fullName</span>() {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'---------Computed----------'</span>);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-string">' '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span>;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">name</span>: <span class="hljs-title class_">Name</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Name</span>();</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">name1</span>: <span class="hljs-title class_">Name</span> = name;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name1</span>.<span class="hljs-property">fullName</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name1</span>.<span class="hljs-property">fullName</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'changed lastName'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name1</span>.<span class="hljs-property">lastName</span> += <span class="hljs-string">'a'</span>;</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="computed装饰的属性可以被monitor监听变化">@Computed装饰的属性可以被@Monitor监听变化<i class="anchor-icon anchor-icon-link" anchorid="computed装饰的属性可以被monitor监听变化" tips="复制节点链接"></i></h3><p>如何使用计算属性求解fahrenheit和kelvin。示例如下：</p> <ul><li>点击“-”，celsius-- -&gt; fahrenheit -&gt; kelvin --&gt; kelvin变化时调用onKelvinMonitor。</li><li>点击“+”，celsius++ -&gt; fahrenheit -&gt; kelvin --&gt; kelvin变化时调用onKelvinMonitor。</li></ul> <div _ngcontent-usf-c106="" class="highlight-div"><div _ngcontent-usf-c106="" class="highlight-div-header"><div _ngcontent-usf-c106="" class="highlight-div-header-left"><div _ngcontent-usf-c106="" class="handle-button expand-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usf-c106="" class="highlight-div-header-right"><div _ngcontent-usf-c106="" class="handle-button ai-button"></div><div _ngcontent-usf-c106="" class="handle-button line-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usf-c106="" class="handle-button theme-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usf-c106="" class="handle-button copy-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">MyView</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">celsius</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">20</span>;</li><li>
</li><li>  <span class="hljs-meta">@Computed</span></li><li>  <span class="hljs-keyword">get</span> <span class="hljs-title function_">fahrenheit</span>(): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">celsius</span> * <span class="hljs-number">9</span> / <span class="hljs-number">5</span> + <span class="hljs-number">32</span>; <span class="hljs-comment">// C -&gt; F</span></li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Computed</span></li><li>  <span class="hljs-keyword">get</span> <span class="hljs-title function_">kelvin</span>(): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">fahrenheit</span> - <span class="hljs-number">32</span>) * <span class="hljs-number">5</span> / <span class="hljs-number">9</span> + <span class="hljs-number">273.15</span>; <span class="hljs-comment">// F -&gt; K</span></li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Monitor</span>(<span class="hljs-string">'kelvin'</span>)</li><li>  <span class="hljs-title function_">onKelvinMonitor</span>(<span class="hljs-params">mon: IMonitor</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'kelvin changed from '</span> + mon.<span class="hljs-title function_">value</span>()?.<span class="hljs-property">before</span> + <span class="hljs-string">' to '</span> + mon.<span class="hljs-title function_">value</span>()?.<span class="hljs-property">now</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span> }) {</li><li>      <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span> }) {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'-'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">celsius</span>--;</li><li>          })</li><li>
</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">`Celsius <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.celsius.toFixed(<span class="hljs-number">1</span>)}</span>`</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">40</span>)</li><li>
</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'+'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">celsius</span>++;</li><li>          })</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`Fahrenheit <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.fahrenheit.toFixed(<span class="hljs-number">2</span>)}</span>`</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">40</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`Kelvin <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.kelvin.toFixed(<span class="hljs-number">2</span>)}</span>`</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">40</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="computed装饰的属性可以初始化param">@Computed装饰的属性可以初始化@Param<i class="anchor-icon anchor-icon-link" anchorid="computed装饰的属性可以初始化param" tips="复制节点链接"></i></h3><p>下面的例子使用@Computed初始化@Param。</p> <ul><li>点击Button('-')和Button('+')改变商品数量，quantity是被@Trace装饰的，其改变时可以被观察到的。</li><li>quantity的改变会触发total和qualifiesForDiscount重新计算，计算商品总价和是否可以享有优惠。</li><li>total和qualifiesForDiscount的改变会触发子组件Child对应Text组件刷新。</li></ul> <div _ngcontent-usf-c106="" class="highlight-div"><div _ngcontent-usf-c106="" class="highlight-div-header"><div _ngcontent-usf-c106="" class="highlight-div-header-left"><div _ngcontent-usf-c106="" class="handle-button expand-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usf-c106="" class="highlight-div-header-right"><div _ngcontent-usf-c106="" class="handle-button ai-button"></div><div _ngcontent-usf-c106="" class="handle-button line-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usf-c106="" class="handle-button theme-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usf-c106="" class="handle-button copy-button"><div _ngcontent-usf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Article</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">quantity</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-attr">unitPrice</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">quantity: <span class="hljs-built_in">number</span>, unitPrice: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">quantity</span> = quantity;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">unitPrice</span> = unitPrice;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">shoppingBasket</span>: <span class="hljs-title class_">Article</span>[] = [<span class="hljs-keyword">new</span> <span class="hljs-title class_">Article</span>(<span class="hljs-number">1</span>, <span class="hljs-number">20</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Article</span>(<span class="hljs-number">5</span>, <span class="hljs-number">2</span>)];</li><li>
</li><li>  <span class="hljs-meta">@Computed</span></li><li>  <span class="hljs-keyword">get</span> <span class="hljs-title function_">total</span>(): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">shoppingBasket</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc: <span class="hljs-built_in">number</span>, item: Article</span>) =&gt;</span> acc + (item.<span class="hljs-property">quantity</span> * item.<span class="hljs-property">unitPrice</span>), <span class="hljs-number">0</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Computed</span></li><li>  <span class="hljs-keyword">get</span> <span class="hljs-title function_">qualifiesForDiscount</span>(): <span class="hljs-built_in">boolean</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">total</span> &gt;= <span class="hljs-number">100</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`Shopping List: `</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">shoppingBasket</span>, <span class="hljs-function">(<span class="hljs-params">item: Article</span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">Row</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">`unitPrice: <span class="hljs-subst">${item.unitPrice}</span>`</span>)</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">'-'</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-keyword">if</span> (item.<span class="hljs-property">quantity</span> &gt; <span class="hljs-number">0</span>) {</li><li>                item.<span class="hljs-property">quantity</span>--;</li><li>              }</li><li>            })</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">`quantity: <span class="hljs-subst">${item.quantity}</span>`</span>)</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">'+'</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              item.<span class="hljs-property">quantity</span>++;</li><li>            })</li><li>        }</li><li>
</li><li>        <span class="hljs-title class_">Divider</span>()</li><li>      })</li><li>      <span class="hljs-title class_">Child</span>({ <span class="hljs-attr">total</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">total</span>, <span class="hljs-attr">qualifiesForDiscount</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">qualifiesForDiscount</span> })</li><li>    }.<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Start</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Child</span> {</li><li>  <span class="hljs-meta">@Param</span> <span class="hljs-attr">total</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@Param</span> <span class="hljs-attr">qualifiesForDiscount</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`Total: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.total}</span> `</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`Discount: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.qualifiesForDiscount}</span> `</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>