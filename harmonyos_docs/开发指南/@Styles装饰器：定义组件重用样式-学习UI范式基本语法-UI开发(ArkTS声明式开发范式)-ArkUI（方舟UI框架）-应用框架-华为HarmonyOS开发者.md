<h1 _ngcontent-bvg-c119="" class="doc-title ng-star-inserted" title="@Styles装饰器：定义组件重用样式"> @Styles装饰器：定义组件重用样式 </h1>

<div _ngcontent-bvg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>如果每个组件的样式都需要单独设置，在开发过程中会出现大量代码在进行重复样式设置，虽然可以复制粘贴，但为了代码简洁性和后续方便维护，我们推出了可以提炼公共样式进行复用的装饰器@Styles。</p>    <p>@Styles装饰器可以将多条样式设置提炼成一个方法，直接在组件声明的位置调用。通过@Styles装饰器可以快速定义并复用自定义样式。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>从API version 9开始，该装饰器支持在ArkTS卡片中使用。</p>      <p>从API version 11开始，该装饰器支持在元服务中使用。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="装饰器使用说明">装饰器使用说明<i class="anchor-icon anchor-icon-link" anchorid="装饰器使用说明" tips="复制节点链接"></i></h2>          <ul>      <li>       <p>当前@Styles仅支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-component-general-attributes" target="_blank">通用属性</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-component-general-events" target="_blank">通用事件</a>。</p></li>      <li>       <p>@Styles可以定义在组件内或全局，在全局定义时需在方法名前面添加function关键字，组件内定义时则不需要添加function关键字。请参考用例<a href="/consumer/cn/doc/harmonyos-guides/arkts-style#组件内styles和全局styles的用法">组件内styles和全局styles的用法</a>。</p></li>      <li>       <p>组件内@Styles的优先级高于全局@Styles。框架优先找当前组件内的@Styles，如果找不到，则会全局查找。</p></li>     </ul>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>只能在当前文件内使用@Styles，不支持export。</p>       <p>若需要实现样式导出，推荐使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-user-defined-extension-attributemodifier">AttributeModifier</a>。</p>      </div></div></div>     <p>定义在组件内的@Styles可以通过this访问组件的常量和状态变量，并可以在@Styles里通过事件来改变状态变量的值，示例如下：</p>     <div _ngcontent-bvg-c106="" class="highlight-div"><div _ngcontent-bvg-c106="" class="highlight-div-header"><div _ngcontent-bvg-c106="" class="highlight-div-header-left"><div _ngcontent-bvg-c106="" class="handle-button expand-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bvg-c106="" class="highlight-div-header-right"><div _ngcontent-bvg-c106="" class="handle-button ai-button"></div><div _ngcontent-bvg-c106="" class="handle-button line-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bvg-c106="" class="handle-button theme-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bvg-c106="" class="handle-button copy-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bvg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">FancyUse</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">heightValue</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">50</span>;</li><li>
</li><li>  <span class="hljs-meta">@Styles</span></li><li>  <span class="hljs-title function_">fancy</span>(<span class="hljs-params"></span>) {</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">heightValue</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>)</li><li>    .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">heightValue</span> = <span class="hljs-number">100</span>;</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'change height'</span>)</li><li>        .<span class="hljs-title function_">fancy</span>()</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="限制条件">限制条件<i class="anchor-icon anchor-icon-link" anchorid="限制条件" tips="复制节点链接"></i></h2>          <ul>      <li>@Styles方法不能有参数，编译期会报错，表明@Styles方法不支持参数。</li>     </ul>     <div _ngcontent-bvg-c106="" class="highlight-div"><div _ngcontent-bvg-c106="" class="highlight-div-header"><div _ngcontent-bvg-c106="" class="highlight-div-header-left"><div _ngcontent-bvg-c106="" class="handle-button expand-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bvg-c106="" class="highlight-div-header-right"><div _ngcontent-bvg-c106="" class="handle-button ai-button"></div><div _ngcontent-bvg-c106="" class="handle-button line-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bvg-c106="" class="handle-button theme-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bvg-c106="" class="handle-button copy-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bvg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 错误写法： @Styles不支持参数，编译期报错</span></li><li><span class="hljs-meta">@Styles</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">globalFancy</span> (<span class="hljs-attr">value</span>: <span class="hljs-built_in">number</span>) {</li><li>  .<span class="hljs-title function_">width</span>(value)</li><li>}</li><li>
</li><li><span class="hljs-comment">// 正确写法</span></li><li><span class="hljs-meta">@Styles</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">globalFancy</span> () {</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>}</li></ol></pre></div></div>     <ul>      <li>不支持在@Styles方法内使用逻辑组件，逻辑组件内的属性不生效。</li>     </ul>     <div _ngcontent-bvg-c106="" class="highlight-div"><div _ngcontent-bvg-c106="" class="highlight-div-header"><div _ngcontent-bvg-c106="" class="highlight-div-header-left"><div _ngcontent-bvg-c106="" class="handle-button expand-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bvg-c106="" class="highlight-div-header-right"><div _ngcontent-bvg-c106="" class="handle-button ai-button"></div><div _ngcontent-bvg-c106="" class="handle-button line-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bvg-c106="" class="handle-button theme-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bvg-c106="" class="handle-button copy-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bvg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 错误写法</span></li><li><span class="hljs-meta">@Styles</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">backgroundColorStyle</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 正确写法</span></li><li><span class="hljs-meta">@Styles</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">backgroundColorStyle</span>(<span class="hljs-params"></span>) {</li><li>  .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>)</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="使用场景">使用场景<i class="anchor-icon anchor-icon-link" anchorid="使用场景" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="组件内styles和全局styles的用法" class="firsth2">组件内@Styles和全局@Styles的用法<i class="anchor-icon anchor-icon-link" anchorid="组件内styles和全局styles的用法" tips="复制节点链接"></i></h3>          <div _ngcontent-bvg-c106="" class="highlight-div"><div _ngcontent-bvg-c106="" class="highlight-div-header"><div _ngcontent-bvg-c106="" class="highlight-div-header-left"><div _ngcontent-bvg-c106="" class="handle-button expand-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bvg-c106="" class="highlight-div-header-right"><div _ngcontent-bvg-c106="" class="handle-button ai-button"></div><div _ngcontent-bvg-c106="" class="handle-button line-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bvg-c106="" class="handle-button theme-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bvg-c106="" class="handle-button copy-button"><div _ngcontent-bvg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bvg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 定义在全局的@Styles封装的样式</span></li><li><span class="hljs-meta">@Styles</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">globalFancy</span> () {</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">150</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>  .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">FancyUse</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">heightValue</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>  <span class="hljs-comment">// 定义在组件内的@Styles封装的样式</span></li><li>  <span class="hljs-meta">@Styles</span> <span class="hljs-title function_">fancy</span>(<span class="hljs-params"></span>) {</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">heightValue</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Yellow</span>)</li><li>    .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">heightValue</span> = <span class="hljs-number">200</span>;</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {</li><li>      <span class="hljs-comment">// 使用全局的@Styles封装的样式</span></li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'FancyA'</span>)</li><li>        .<span class="hljs-title function_">globalFancy</span>()</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      <span class="hljs-comment">// 使用组件内的@Styles封装的样式</span></li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'FancyB'</span>)</li><li>        .<span class="hljs-title function_">fancy</span>()</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>