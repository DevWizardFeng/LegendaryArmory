<h1 _ngcontent-brs-c119="" class="doc-title ng-star-inserted" title="ArkTS卡片为组件添加动效"> ArkTS卡片为组件添加动效 </h1>

<div _ngcontent-brs-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>ArkTS卡片开放了使用动画效果的能力，支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-explicit-animation" target="_blank">显式动画</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-animatorproperty" target="_blank">属性动画</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-transition-animation-component" target="_blank">组件内转场</a>能力。ArkTS卡片使用动画效果时具有以下限制：</p>    <p><strong>表1</strong> 动效参数限制</p>    <div class="tablenoborder">     <div class="tbBox"><table class="layoutFixed idpTab">      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.3.1.4.1.1" valign="top" width="33.33333333333333%">名称</th>        <th align="left" class="cellrowborder" id="mcps1.3.3.1.4.1.2" valign="top" width="33.33333333333333%">参数说明</th>        <th align="left" class="cellrowborder" id="mcps1.3.3.1.4.1.3" valign="top" width="33.33333333333333%">限制描述</th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" valign="top" width="33.33333333333333%">duration</td>        <td class="cellrowborder" valign="top" width="33.33333333333333%">动画播放时长</td>        <td class="cellrowborder" valign="top" width="33.33333333333333%">限制最长的动效播放时长为1秒，当设置大于1秒的时间时，动效时长仍为1秒。</td>       </tr>       <tr>        <td class="cellrowborder" valign="top" width="33.33333333333333%">tempo</td>        <td class="cellrowborder" valign="top" width="33.33333333333333%">动画播放速度</td>        <td class="cellrowborder" valign="top" width="33.33333333333333%">卡片中禁止设置此参数，使用默认值1。</td>       </tr>       <tr>        <td class="cellrowborder" valign="top" width="33.33333333333333%">delay</td>        <td class="cellrowborder" valign="top" width="33.33333333333333%">动画延迟执行的时长</td>        <td class="cellrowborder" valign="top" width="33.33333333333333%">卡片中禁止设置此参数，使用默认值0毫秒。</td>       </tr>       <tr>        <td class="cellrowborder" valign="top" width="33.33333333333333%">iterations</td>        <td class="cellrowborder" valign="top" width="33.33333333333333%">动画播放次数</td>        <td class="cellrowborder" valign="top" width="33.33333333333333%">卡片中禁止设置此参数，使用默认值1次。</td>       </tr>           </tbody></table></div>    </div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>静态卡片不支持使用动效能力。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="组件自身动效">组件自身动效<i class="anchor-icon anchor-icon-link" anchorid="组件自身动效" tips="复制节点链接"></i></h2>          <p>以下示例代码使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-animatorproperty" target="_blank">animation</a>接口实现了按钮旋转的动画效果。</p>     <p><span><img originheight="170" originwidth="176" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114918.37736397557218990206718142278126:50001231000000:2800:72CF0EBAABFD7C5E3198620B1D83CE924894E152545BB0A97A8E6B637E7E5741.gif" class="notEnlarge" width="176" height="170"></span></p>     <div _ngcontent-brs-c106="" class="highlight-div"><div _ngcontent-brs-c106="" class="highlight-div-header"><div _ngcontent-brs-c106="" class="highlight-div-header-left"><div _ngcontent-brs-c106="" class="handle-button expand-button"><div _ngcontent-brs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-brs-c106="" class="highlight-div-header-right"><div _ngcontent-brs-c106="" class="handle-button ai-button"></div><div _ngcontent-brs-c106="" class="handle-button line-button"><div _ngcontent-brs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-brs-c106="" class="handle-button theme-button"><div _ngcontent-brs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-brs-c106="" class="handle-button copy-button"><div _ngcontent-brs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-brs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// entry/src/main/ets/widget/pages/WidgetCard.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">AnimationCard</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">rotateAngle</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'change rotate angle'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'20%'</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-string">'5%'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">rotateAngle</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rotateAngle</span> === <span class="hljs-number">0</span> ? <span class="hljs-number">90</span> : <span class="hljs-number">0</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">rotate</span>({ <span class="hljs-attr">angle</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">rotateAngle</span> })</li><li>        .<span class="hljs-title function_">animation</span>({</li><li>          <span class="hljs-attr">curve</span>: <span class="hljs-title class_">Curve</span>.<span class="hljs-property">EaseOut</span>,</li><li>          <span class="hljs-attr">playMode</span>: <span class="hljs-title class_">PlayMode</span>.<span class="hljs-property">Normal</span>,</li><li>        })</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">VerticalAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="组件转场动效">组件转场动效<i class="anchor-icon anchor-icon-link" anchorid="组件转场动效" tips="复制节点链接"></i></h2>          <p>以下示例代码使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-transition-animation-component" target="_blank">transition</a>接口实现了在卡片内图片出现与消失的动画效果。</p>     <p><span><img originheight="367" originwidth="369" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114918.10154988135961139788508729938099:50001231000000:2800:81FB62BC10631128D1F3317B037F4CF40A0562D63C0A08C1B492FED2DB2B5E96.gif" width="369" height="367"></span></p>     <div _ngcontent-brs-c106="" class="highlight-div"><div _ngcontent-brs-c106="" class="highlight-div-header"><div _ngcontent-brs-c106="" class="highlight-div-header-left"><div _ngcontent-brs-c106="" class="handle-button expand-button"><div _ngcontent-brs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-brs-c106="" class="highlight-div-header-right"><div _ngcontent-brs-c106="" class="handle-button ai-button"></div><div _ngcontent-brs-c106="" class="handle-button line-button"><div _ngcontent-brs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-brs-c106="" class="handle-button theme-button"><div _ngcontent-brs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-brs-c106="" class="handle-button copy-button"><div _ngcontent-brs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-brs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// entry/src/main/ets/widget/pages/WidgetCard.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">TransitionEffectExample1</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">flag</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">show</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'show'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">show</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">80</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">30</span>).<span class="hljs-title function_">margin</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 点击Button控制Image的显示和消失</span></li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">show</span> = <span class="hljs-string">'hide'</span>;</li><li>          } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">show</span> = <span class="hljs-string">'show'</span>;</li><li>          }</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span>;</li><li>        })</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span>) {</li><li>        <span class="hljs-comment">// Image的显示和消失配置为相同的过渡效果（出现和消失互为逆过程）</span></li><li>        <span class="hljs-comment">// 出现时从指定的透明度为0、绕z轴旋转180°的状态，变为默认的透明度为1、旋转角为0的状态，透明度与旋转动画时长都为1000ms</span></li><li>        <span class="hljs-comment">// 消失时从默认的透明度为1、旋转角为0的状态，变为指定的透明度为0、绕z轴旋转180°的状态，透明度与旋转动画时长都为1000ms</span></li><li>        <span class="hljs-comment">// $r('app.media.testImg')需要替换开发者所需的图像资源文件</span></li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.testImg'</span>)).<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">transition</span>(<span class="hljs-title class_">TransitionEffect</span>.<span class="hljs-property">OPACITY</span>.<span class="hljs-title function_">animation</span>({ <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">curve</span>: <span class="hljs-title class_">Curve</span>.<span class="hljs-property">Ease</span> }).<span class="hljs-title function_">combine</span>(</li><li>            <span class="hljs-title class_">TransitionEffect</span>.<span class="hljs-title function_">rotate</span>({ <span class="hljs-attr">z</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">angle</span>: <span class="hljs-number">180</span> })</li><li>          ))</li><li>      }</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>