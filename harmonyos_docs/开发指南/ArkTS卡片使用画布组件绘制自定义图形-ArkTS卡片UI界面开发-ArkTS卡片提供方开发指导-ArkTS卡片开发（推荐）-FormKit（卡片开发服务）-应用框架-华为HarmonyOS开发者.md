<h1 _ngcontent-deu-c119="" class="doc-title ng-star-inserted" title="ArkTS卡片使用画布组件绘制自定义图形"> ArkTS卡片使用画布组件绘制自定义图形 </h1>

<div _ngcontent-deu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>ArkTS卡片开放了自定义绘制的能力，在卡片上可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-components-canvas-canvas" target="_blank">Canvas</a>组件创建一块画布，然后通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-canvasrenderingcontext2d" target="_blank">CanvasRenderingContext2D</a>对象在画布上进行自定义图形的绘制，如下示例代码实现了在画布的中心绘制了一个笑脸。</p>    <div _ngcontent-deu-c106="" class="highlight-div"><div _ngcontent-deu-c106="" class="highlight-div-header"><div _ngcontent-deu-c106="" class="highlight-div-header-left"><div _ngcontent-deu-c106="" class="handle-button expand-button"><div _ngcontent-deu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-deu-c106="" class="highlight-div-header-right"><div _ngcontent-deu-c106="" class="handle-button ai-button"></div><div _ngcontent-deu-c106="" class="handle-button line-button"><div _ngcontent-deu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-deu-c106="" class="handle-button theme-button"><div _ngcontent-deu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-deu-c106="" class="handle-button copy-button"><div _ngcontent-deu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-deu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomCanvasDrawingCard</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">canvasWidth</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">canvasHeight</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-comment">// 初始化CanvasRenderingContext2D和RenderingContextSettings</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">settings</span>: <span class="hljs-title class_">RenderingContextSettings</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RenderingContextSettings</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">CanvasRenderingContext2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CanvasRenderingContext2D</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">settings</span>);</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Canvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-comment">// 在onReady回调中获取画布的实际宽和高</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasWidth</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">width</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasHeight</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">height</span>;</li><li>            <span class="hljs-comment">// 绘制画布的背景</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">'#EEF0FF'</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasWidth</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvasHeight</span>);</li><li>            <span class="hljs-comment">// 在画布的中心绘制一个圆</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">beginPath</span>();</li><li>            <span class="hljs-keyword">let</span> radius = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">width</span> / <span class="hljs-number">3</span>;</li><li>            <span class="hljs-keyword">let</span> circleX = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>;</li><li>            <span class="hljs-keyword">let</span> circleY = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">moveTo</span>(circleX - radius, circleY);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">arc</span>(circleX, circleY, radius, <span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">true</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">closePath</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">'#5A5FFF'</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fill</span>();</li><li>            <span class="hljs-comment">// 绘制笑脸的左眼</span></li><li>            <span class="hljs-keyword">let</span> leftR = radius / <span class="hljs-number">13</span>;</li><li>            <span class="hljs-keyword">let</span> leftX = circleX - (radius / <span class="hljs-number">2.3</span>);</li><li>            <span class="hljs-keyword">let</span> leftY = circleY - (radius / <span class="hljs-number">4.5</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">beginPath</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">arc</span>(leftX, leftY, leftR, <span class="hljs-number">0</span>, <span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>, <span class="hljs-literal">true</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">closePath</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">'#FFFFFF'</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">15</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">stroke</span>();</li><li>            <span class="hljs-comment">// 绘制笑脸的右眼</span></li><li>            <span class="hljs-keyword">let</span> rightR = radius / <span class="hljs-number">13</span>;</li><li>            <span class="hljs-keyword">let</span> rightX = circleX + (radius / <span class="hljs-number">2.3</span>);</li><li>            <span class="hljs-keyword">let</span> rightY = circleY - (radius / <span class="hljs-number">4.5</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">beginPath</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">arc</span>(rightX, rightY, rightR, <span class="hljs-number">0</span>, <span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>, <span class="hljs-literal">true</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">closePath</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">'#FFFFFF'</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">15</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">stroke</span>();</li><li>            <span class="hljs-comment">// 绘制笑脸的鼻子</span></li><li>            <span class="hljs-keyword">let</span> startX = circleX;</li><li>            <span class="hljs-keyword">let</span> startY = circleY - <span class="hljs-number">20</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">beginPath</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">moveTo</span>(startX, startY);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">lineTo</span>(startX - <span class="hljs-number">8</span>, startY + <span class="hljs-number">40</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">lineTo</span>(startX + <span class="hljs-number">8</span>, startY + <span class="hljs-number">40</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">'#FFFFFF'</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">15</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">lineCap</span> = <span class="hljs-string">'round'</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">lineJoin</span> = <span class="hljs-string">'round'</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">stroke</span>();</li><li>            <span class="hljs-comment">// 绘制笑脸的嘴巴</span></li><li>            <span class="hljs-keyword">let</span> mouthR = radius / <span class="hljs-number">2</span>;</li><li>            <span class="hljs-keyword">let</span> mouthX = circleX;</li><li>            <span class="hljs-keyword">let</span> mouthY = circleY + <span class="hljs-number">10</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">beginPath</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">arc</span>(mouthX, mouthY, mouthR, <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">1.4</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">3.4</span>, <span class="hljs-literal">true</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">'#FFFFFF'</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">15</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">stroke</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">closePath</span>();</li><li>          })</li><li>      }</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    <p>运行效果如下图所示。</p>    <p><span><img originheight="768" originwidth="432" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114929.62274126446278931567097102181542:50001231000000:2800:F6ECE66B3331DD759512365AB9771F4F0200D255B908BE4351F37C9C0498304A.jpeg" width="432" height="768"></span></p>   </div>   <div></div></div>