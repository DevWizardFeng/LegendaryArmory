<h1 _ngcontent-jvm-c119="" class="doc-title ng-star-inserted" title="ArkUI分析"> ArkUI分析 </h1>

<div _ngcontent-jvm-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001893335140"><p id="ZH-CN_TOPIC_0000002510294279__p124781592051">ArkUI分析用于定位由于组件耗时、页面布局、状态变量更新导致的卡顿问题。常见场景包含：</p> <p id="ZH-CN_TOPIC_0000002510294279__p393713361969">场景1：布局嵌套过多引起的性能问题；</p> <p id="ZH-CN_TOPIC_0000002510294279__p8937143618614">场景2：数据结构设计不合理，应用使用一个较大的Object，在更新时，只更新某些属性，导致其他没变化的属性也会更新，产生冗余刷新；</p> <p id="ZH-CN_TOPIC_0000002510294279__p1193717367611">场景3：父组件中的子组件重复绑定同一个状态变量进行更新；</p> <p id="ZH-CN_TOPIC_0000002510294279__p99374361161">场景4：未正确使用装饰器，如错误使用@Prop传递一个大的对象进行深度拷贝。</p> <div class="tiledSection"><h2 id="section8313153319542">ArkUI Component 泳道：查看组件绘制耗时<i class="anchor-icon anchor-icon-link" anchorid="section8313153319542" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510294279__p7313143318548">开发者通过ArkUI Component泳道可以直观感知组件绘制频率、耗时等统计情况。</p> <ol id="ZH-CN_TOPIC_0000002510294279__ol17313633185414"><li id="li15313133365411"><span>在时间轴上拖拽鼠标选定要查看的时间段。</span></li><li id="li531383311545"><span>详情区Summary列表给出录制时段内定制组件以及系统组件的绘制统计情况，包括绘制次数、总耗时、最小耗时、平均耗时、最大耗时、耗时标准差。</span><p></p><p id="ZH-CN_TOPIC_0000002510294279__p13313113311543"><span><img height="291.66900000000004" originheight="554" originwidth="1544" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104937.41249382057690189538074897204279:50001231000000:2800:DD6247EB4B11E33281B034D393F989D9E2E34CA53928B909115AC3A757400155.png" title="点击放大" width="807.3100000000001"></span></p> <p></p></li><li id="li103131033165412"><span>详情区Details列表可以查看按照时间线排序的组件详情，同时more区域展示以该组件为根节点的组件树信息。</span><p></p><p id="ZH-CN_TOPIC_0000002510294279__p431363355416"><span><img height="320.01130000000006" originheight="608" originwidth="1543" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104937.68238180946638219242658673762503:50001231000000:2800:EDF600DF45FED1F5DA7AD4E0B6E0130A2997DD9BACAD4911297D0337976E355F.png" title="点击放大" width="807.3100000000001"></span></p> <p></p></li><li id="li9313163355415"><span>点选ArkUI Component泳道中的条块，展示Slice Detail数据，Slice Detail中的Name支持跳转至对应trace泳道并选中trace信息，同时more区域展示以该组件为根节点的组件树信息。</span><p></p><p id="ZH-CN_TOPIC_0000002510294279__p113134336541"><span><img height="341.9164" originheight="653" originwidth="1550" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104937.16058560749161765925288750629407:50001231000000:2800:6D32F8524272B8E1BFAE8EF3176758272EA5FCEBEF2F2A21ADD5004FCB0AF642.png" title="点击放大" width="807.3100000000001"></span></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002510294279__p133131633205411">由于隐私安全政策，已上架应用市场的应用不支持录制ArkUI Component泳道。</p> </div></div></div> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section142568235815">ArkUI State 泳道分析<i class="anchor-icon anchor-icon-link" anchorid="section142568235815" tips="复制节点链接"></i></h2><ol id="ZH-CN_TOPIC_0000002510294279__ol14187161917286"><li id="li13187619152814"><span>点击ArkUI模板创建session并启动录制，录制过程中触发组件刷新。</span></li><li id="li3187141912814"><span>录制结束等待处理数据完成。点击ArkUI State泳道，可在下方数据区查看录制过程中发生的状态变量变化。Summary区域可查看状态变量名称，变化次数，状态变量类型、所属组件和所属类。</span><p></p><p id="ZH-CN_TOPIC_0000002510294279__p741035914132"><span><img height="368.82564102564106" originheight="619" originwidth="1553" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104937.36370710649161381599974486521512:50001231000000:2800:22391B0ECB86AC3B43F308EB5ADB12870BCEEE0C3D202A5CE2B6E11930211D98.png" title="点击放大" width="920"></span></p> <p id="ZH-CN_TOPIC_0000002510294279__p172340370483">Current Value以时间顺序展示状态变量变化，Current Values列展示变化后的值。</p> <p id="ZH-CN_TOPIC_0000002510294279__p15720123020285"><span><img height="237.97085020242912" originheight="300" originwidth="1177" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104937.64324349297606238495508418165772:50001231000000:2800:C09C634CF72968D182EEF17B49C3A4E7913AB97F9AC89B4ECB7D1AF7A61E81A2.png" title="点击放大" width="920"></span></p> <p></p></li><li id="li31872191282"><span>选择Current Value中某一个数据，泳道区域将以虚线展示其时间位置。同时，右侧more区域展示该状态变量影响的组件关联关系。打开页面下方的<strong>Delivery Chain</strong>开关，该状态变量影响的组件关联关系将以图形展示。</span><p></p><p id="ZH-CN_TOPIC_0000002510294279__p165138344284"><span><img height="397.9194366197183" originheight="667" originwidth="1550" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104937.10915417822419220884356873065350:50001231000000:2800:927E3FC9697FFC35DA239225899AD902DA00821A2B7CAAB323AB23B68190B00B.png" title="点击放大" width="920"></span></p> <p></p></li><li id="li6187151912285"><span>定位到可能造成卡顿的状态变量变化时间点，框选对应时间段，选择ArkUI Component泳道查看对应组件刷新时间。</span><p></p><p id="ZH-CN_TOPIC_0000002510294279__p2559845192818"><span><img height="348.7966197183099" originheight="579" originwidth="1537" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104937.28346087524659614795932306281356:50001231000000:2800:926A0897800A75FC2CF0F82AC3583B085DE2368FE2BC1FF7B9B3569F72ACE5C9.png" title="点击放大" width="920"></span></p> <p></p></li></ol> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002510294279__ul16357651965"><li id="li13571851467">如需查看其他泳道信息，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-insight-session-frame">Frame分析</a>。</li><li id="li992375219612">由于隐私安全政策，已上架应用市场的应用不支持录制ArkUI State泳道。</li></ul> </div></div></div> </div> <div></div></div>