<h1 _ngcontent-kqx-c119="" class="doc-title ng-star-inserted" title="AscendC API列表"> AscendC API列表 </h1>

<div _ngcontent-kqx-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>AscendC提供一组类库API，开发者使用标准C++语法和类库API进行编程。AscendC编程类库API示意图如下所示，分为：</p> <ul><li>Kernel API：用于实现算子核函数的API接口。包括：<ul><li><strong>基本数据结构：</strong>Kernel API中使用到的基本数据结构，比如GlobalTensor和LocalTensor。</li><li><strong>基础API：</strong>实现对硬件能力的抽象，开放芯片的能力，保证完备性和兼容性。标注为ISASI（Instruction Set Architecture Special Interface，硬件体系结构相关的接口）类别的API，不能保证跨硬件版本兼容。</li><li><strong>高阶API：</strong>实现一些常用的计算算法，用于提高编程开发效率，通常会调用多种基础API实现。高阶API包括数学库、Matmul、Softmax等API。高阶API可以保证兼容性。</li></ul> </li><li>Host API：<ul><li>高阶API配套的Tiling API：kernel侧高阶API配套的Tiling API，方便开发者获取kernel计算时所需的Tiling参数。</li><li>AscendC算子原型注册与管理API：用于AscendC算子原型定义和注册的API。</li><li>Tiling数据结构注册API：用于AscendC算子TilingData数据结构定义和注册的API。</li><li>平台信息获取API：在实现Host侧的Tiling函数时，可能需要获取一些硬件平台的信息，来支撑Tiling的计算，比如获取硬件平台的核数等信息。平台信息获取API提供获取这些平台信息的功能。</li></ul> </li><li>算子调测API：用于算子调测的API，包括孪生调试，性能调测等。<p>进行AscendC算子Host侧编程时，需要使用基础数据结构和API，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-anchorinstanceinfo-introduction">gert命名空间</a>，完成算子开发后，需要使用Runtime API完成算子的调用。</p> <p class="msonormal"><span><img height="335.16" originheight="611" originwidth="973" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114257.00157797316554176700883293286239:50001231000000:2800:CF7D2C38F8979EE7C9537847FC42F8045B709D8F44B93DB690B5E1FD97D83BC3.png" title="点击放大" width="526.6800000000001"></span></p> </li></ul> <div class="tiledSection"><h2 id="section6199mcpsimp">Kernel API-基础API<i class="anchor-icon anchor-icon-link" anchorid="section6199mcpsimp" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表1 </b>标量计算API列表</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.2.3.1.1" valign="top" width="34.52%"><p>接口名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.2.3.1.2" valign="top" width="65.48%"><p>功能描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="34.52%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-scalargetcountofvalue">ScalarGetCountOfValue</a></p> </td> <td class="cellrowborder" valign="top" width="65.48%"><p>获取一个uint64_t类型数字的二进制中0或者1的个数。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="34.52%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-scalarcountleadingzero">ScalarCountLeadingZero</a></p> </td> <td class="cellrowborder" valign="top" width="65.48%"><p>计算一个uint64_t类型数字前导0的个数（二进制从最高位到第一个1一共有多少个0）。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="34.52%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-scalarcast">ScalarCast</a></p> </td> <td class="cellrowborder" valign="top" width="65.48%"><p>将一个scalar的类型转换为指定的类型。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="34.52%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-countbitscntsameassignbit">CountBitsCntSameAsSignBit</a></p> </td> <td class="cellrowborder" valign="top" width="65.48%"><p>计算一个uint64_t类型数字的二进制中，从最高数值位开始与符号位相同的连续比特位的个数。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="34.52%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-scalargetsffvalue">ScalarGetSFFValue</a></p> </td> <td class="cellrowborder" valign="top" width="65.48%"><p>获取一个uint64_t类型数字的二进制中第一个0或1出现的位置。</p> </td> </tr>  </tbody></table></div> </div>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表2 </b>矢量计算API列表</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.3.2.5.1.1" valign="top" width="14.799999999999999%"><p>分类</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.3.2.5.1.2" valign="top" width="26.82%"><p>接口名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.3.2.5.1.3" valign="top" width="47.12%"><p>功能描述</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.3.2.5.1.4" valign="top" width="11.26%"><p>当前是否支持孪生调试</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" rowspan="8" valign="top" width="14.799999999999999%"><p>单目指令</p> </td> <td class="cellrowborder" valign="top" width="26.82%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-vector-calculation-exp">Exp</a></p> </td> <td class="cellrowborder" valign="top" width="47.12%"><p>按元素取自然指数。</p> </td> <td class="cellrowborder" valign="top" width="11.26%"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-vector-calculation-lnln">Ln</a></p> </td> <td class="cellrowborder" valign="top"><p>按元素取自然对数。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-vector-calculation-abs">Abs</a></p> </td> <td class="cellrowborder" valign="top"><p>按元素取绝对值。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-reciprocal">Reciprocal</a></p> </td> <td class="cellrowborder" valign="top"><p>按元素取倒数。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-vector-calculation-sqrt">Sqrt</a></p> </td> <td class="cellrowborder" valign="top"><p>按元素做开方。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-rsqrt">Rsqrt</a></p> </td> <td class="cellrowborder" valign="top"><p>按元素做开方后取倒数。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-vector-calculation-not">Not</a></p> </td> <td class="cellrowborder" valign="top"><p>按元素做按位取反。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-vector-calculation-relu">Relu</a></p> </td> <td class="cellrowborder" valign="top"><p>按元素做线性整流Relu。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" rowspan="8" valign="top" width="14.799999999999999%"><p>双目指令</p> </td> <td class="cellrowborder" valign="top" width="26.82%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-add">Add</a></p> </td> <td class="cellrowborder" valign="top" width="47.12%"><p>按元素求和。</p> </td> <td class="cellrowborder" valign="top" width="11.26%"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-cannkit-sub">Sub</a></p> </td> <td class="cellrowborder" valign="top"><p>按元素求差。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-vector-calculation-binocular-mul">Mul</a></p> </td> <td class="cellrowborder" valign="top"><p>按元素求积。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-vector-calculation-binocular-div">Div</a></p> </td> <td class="cellrowborder" valign="top"><p>按元素求商。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-vector-calculation-binocular-max">Max</a></p> </td> <td class="cellrowborder" valign="top"><p>按元素求最大值。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-vector-calculation-binocular-min">Min</a></p> </td> <td class="cellrowborder" valign="top"><p>按元素求最小值。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-vector-calculation-binocular-and">And</a></p> </td> <td class="cellrowborder" valign="top"><p>针对每对元素执行按位与运算。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-vector-calculation-binocular-or">Or</a></p> </td> <td class="cellrowborder" valign="top"><p>针对每对元素执行按位或运算。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" rowspan="7" valign="top" width="14.799999999999999%"><p>标量双目指令</p> </td> <td class="cellrowborder" valign="top" width="26.82%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-scalar-binocular-adds">Adds</a></p> </td> <td class="cellrowborder" valign="top" width="47.12%"><p>矢量内每个元素与标量求和。</p> </td> <td class="cellrowborder" valign="top" width="11.26%"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-scalar-binocular-muls">Muls</a></p> </td> <td class="cellrowborder" valign="top"><p>矢量内每个元素与标量求积。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-scalar-binocular-maxs">Maxs</a></p> </td> <td class="cellrowborder" valign="top"><p>源操作数矢量内每个元素与标量相比，如果比标量大，则取源操作数值，比标量的值小，则取标量值。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-scalar-binocular-mins">Mins</a></p> </td> <td class="cellrowborder" valign="top"><p>源操作数矢量内每个元素与标量相比，如果比标量大，则取标量值，比标量的值小，则取源操作数。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-scalar-binocular-shiftleft">ShiftLeft</a></p> </td> <td class="cellrowborder" valign="top"><p>源操作数内每个元素做逻辑左移，逻辑左移的位数由输入参数scalar决定。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-scalar-binocular-shiftright">ShiftRight</a></p> </td> <td class="cellrowborder" valign="top"><p>源操作数内每个元素做右移，右移的位数由输入参数scalar决定。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-scalar-binocular-leakyrelu">LeakyRelu</a></p> </td> <td class="cellrowborder" valign="top"><p>按元素做带泄露线性整流Leaky ReLU。</p> </td> <td class="cellrowborder" valign="top"><p>否</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="14.799999999999999%"><p>标量三目指令</p> </td> <td class="cellrowborder" valign="top" width="26.82%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-axpy">Axpy</a></p> </td> <td class="cellrowborder" valign="top" width="47.12%"><p>源操作数(srcLocal)中每个元素与标量求积后和目的操作数(dstLocal)中的对应元素相加。</p> </td> <td class="cellrowborder" valign="top" width="11.26%"><p>否</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="14.799999999999999%"><p>精度转换指令</p> </td> <td class="cellrowborder" valign="top" width="26.82%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-precision-conversion-instruction#section2123310174717">Cast</a></p> </td> <td class="cellrowborder" valign="top" width="47.12%"><p>根据源操作数和目的操作数Tensor的数据类型进行精度转换。</p> </td> <td class="cellrowborder" valign="top" width="11.26%"><p>是</p> </td> </tr> <tr><td class="cellrowborder" rowspan="2" valign="top" width="14.799999999999999%"><p>数据转换</p> </td> <td class="cellrowborder" valign="top" width="26.82%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-transpose">Transpose</a></p> </td> <td class="cellrowborder" valign="top" width="47.12%"><p>可实现16*16的二维矩阵数据块的转置。可实现[N,C,H,W]与[N,H,W,C]互相转换。</p> </td> <td class="cellrowborder" valign="top" width="11.26%"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-transdatato5hd">TransDataTo5HD</a></p> </td> <td class="cellrowborder" valign="top"><p>数据格式转换，一般用于将NCHW格式转换成NC1HWC0格式。特别的，也可以用于二维矩阵数据块的转置。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" rowspan="2" valign="top" width="14.799999999999999%"><p>数据填充</p> </td> <td class="cellrowborder" valign="top" width="26.82%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-data-duplicate">Duplicate</a></p> </td> <td class="cellrowborder" valign="top" width="47.12%"><p>将一个变量或一个立即数，复制多次并填充到向量。</p> </td> <td class="cellrowborder" valign="top" width="11.26%"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-data-createvecindex">CreateVecIndex</a></p> </td> <td class="cellrowborder" valign="top"><p>以firstValue为起始值创建向量索引。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="14.799999999999999%"><p>数据分散/数据收集</p> </td> <td class="cellrowborder" valign="top" width="26.82%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-data-distribution-collection#section7147194795310">Gather</a></p> </td> <td class="cellrowborder" valign="top" width="47.12%"><p>给定输入的张量和一个地址偏移张量，Gather指令根据偏移地址将输入张量按元素收集到结果张量中。</p> </td> <td class="cellrowborder" valign="top" width="11.26%"><p>否</p> </td> </tr>  </tbody></table></div> </div>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表3 </b>数据搬运API列表</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.4.2.3.1.1" valign="top" width="40%"><p>接口名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.4.2.3.1.2" valign="top" width="60%"><p>功能描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-datacopy">DataCopy</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>数据搬运接口，包括普通数据搬运、随路格式转换。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-datacopypad">DataCopyPad</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>数据搬运接口，该接口提供数据非对齐搬运的功能。</p> </td> </tr>  </tbody></table></div> </div>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表4 </b>内存管理与同步控制API列表</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.5.2.3.1.1" valign="top" width="40%"><p>接口名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.5.2.3.1.2" valign="top" width="60%"><p>功能描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-tpipe-constructor">TPipe</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>TPipe是用来管理全局内存等资源的框架。通过TPipe类提供的接口可以完成内存等资源的分配管理操作。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-gettpipeptr">GetTPipePtr</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>获取框架当前管理全局内存的TPipe指针，开发者获取指针后，可进行TPipe相关的操作。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-tbufpool-overview">TBufPool</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>TPipe可以管理全局内存资源，而TBufPool可以手动管理或复用Unified Buffer/L1 Buffer物理内存，主要用于多个stage计算中Unified Buffer/L1 Buffer物理内存不足的场景。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-tque-overview">TQue</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>提供入队出队等接口，通过队列（Queue）完成任务间通信和同步。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-overview">TQueBind</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>TQueBind绑定源逻辑位置和目的逻辑位置，根据源位置和目的位置，来确定内存分配的位置 、插入对应的同步事件，帮助开发者解决内存分配和管理、同步等问题。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-tbuf-overview">TBuf</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>使用AscendC编程的过程中，可能会用到一些临时变量。这些临时变量占用的内存可以使用TBuf数据结构来管理。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-getuserworkspace">GetUserWorkspace</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>获取开发者使用的workspace指针。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-setsysworkspace">SetSysWorkSpace</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>在进行融合算子编程时，由于框架通信机制需要使用到workspace，也就是系统workspace，所以在该场景下，开发者要调用该接口，设置系统workspace的指针。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-getsysworkspaceptr">GetSysWorkSpacePtr</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>获取系统workspace指针。</p> </td> </tr>  </tbody></table></div> </div>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表5 </b>系统变量访问API列表</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.6.2.3.1.1" valign="top" width="40%"><p>接口名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.6.2.3.1.2" valign="top" width="60%"><p>功能描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-getblocknum">GetBlockNum</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>获取当前任务配置的Block数，用于代码内部的多核逻辑控制等。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-getblockidx">GetBlockIdx</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>获取当前core的index，用于代码内部的多核逻辑控制及多核偏移量计算等。</p> </td> </tr>  </tbody></table></div> </div>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表6 </b>调测接口列表</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.7.2.3.1.1" valign="top" width="40%"><p>接口名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.7.2.3.1.2" valign="top" width="60%"><p>功能描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-commissioning-interfaces-dumptensor">DumpTensor</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>基于算子工程开发的算子，可以使用该接口Dump指定Tensor的内容。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-commissioning-interfaces-printf">printf</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>基于算子工程开发的算子，可以使用该接口实现CPU侧/NPU侧调试场景下的格式化输出功能。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-commissioning-interfaces-assert">assert</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>基于算子工程开发的算子，可以使用该接口实现CPU/NPU域assert断言功能。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-commissioning-interfaces-dumpaccch">DumpAccChkPoint</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>基于算子工程开发的算子，可以使用该接口Dump指定Tensor的内容。该接口可以支持指定偏移位置的Tensor打印。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="40%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-trap">Trap</a></p> </td> <td class="cellrowborder" valign="top" width="60%"><p>当软件产生异常后，使用该指令使kernel中止运行。</p> </td> </tr>  </tbody></table></div> </div>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表7 </b>其他接口列表</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.8.2.4.1.1" valign="top" width="12%"><p>分类</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.8.2.4.1.2" valign="top" width="33%"><p>接口名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.8.2.4.1.3" valign="top" width="55.00000000000001%"><p>功能描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" rowspan="3" valign="top" width="12%"><p>Kernel Tiling</p> </td> <td class="cellrowborder" valign="top" width="33%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-get-tiling-data">GET_TILING_DATA</a></p> </td> <td class="cellrowborder" valign="top" width="55.00000000000001%"><p>用于获取算子kernel入口函数传入的tiling信息，并填入注册的Tiling结构体中，此函数会以宏展开的方式进行编译。如果开发者注册了多个TilingData结构体，使用该接口返回默认注册的结构体。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-get-tiling-data-with-struct">GET_TILING_DATA_WITH_STRUCT</a></p> </td> <td class="cellrowborder" valign="top"><p>使用该接口指定结构体名称，可获取指定的tiling信息，并填入对应的Tiling结构体中，此函数会以宏展开的方式进行编译。与GET_TILING_DATA的区别是：GET_TILING_DATA只能获取默认注册的结构体，该接口可以根据指定的结构体名称获取对应的结构体，常用于针对不同的TilingKey注册了不同结构体的情况下。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-tiling-key-is">TILING_KEY_IS</a></p> </td> <td class="cellrowborder" valign="top"><p>在核函数中判断本次执行时的tiling_key是否等于某个key，从而标识tiling_key==key的一条kernel分支。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section7366mcpsimp">Kernel API-高阶API<i class="anchor-icon anchor-icon-link" anchorid="section7366mcpsimp" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表8 </b>Matmul API列表</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.2.3.1.1" valign="top" width="38%"><p>接口名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.2.3.1.2" valign="top" width="62%"><p>功能描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="38%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-matmul-usage-description">Matmul</a></p> </td> <td class="cellrowborder" valign="top" width="62%"><p>Matmul矩阵乘法的运算。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section7998mcpsimp">Host API<i class="anchor-icon anchor-icon-link" anchorid="section7998mcpsimp" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表9 </b>Host API列表</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.2.2.4.1.1" valign="top" width="16%"><p>分类</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.2.4.1.2" valign="top" width="28.999999999999996%"><p>接口名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.2.4.1.3" valign="top" width="55.00000000000001%"><p>功能描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" rowspan="5" valign="top" width="16%"><p>原型注册与管理</p> </td> <td class="cellrowborder" valign="top" width="28.999999999999996%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-prototype-api-registration">原型注册接口（OP_ADD）</a></p> </td> <td class="cellrowborder" valign="top" width="55.00000000000001%"><p>注册算子的原型定义。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-input">OpDef</a></p> </td> <td class="cellrowborder" valign="top"><p>用于算子原型定义。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-paramtype">OpParamDef</a></p> </td> <td class="cellrowborder" valign="top"><p>用于算子参数定义。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-opattrdef">OpAttrDef</a></p> </td> <td class="cellrowborder" valign="top"><p>用于算子属性定义。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-settiling">OpAICoreDef</a></p> </td> <td class="cellrowborder" valign="top"><p>用于定义AI处理器上相关实现信息，并关联Tiling实现、Shape推导等函数。</p> </td> </tr> <tr><td class="cellrowborder" rowspan="2" valign="top" width="16%"><p>Tiling数据结构注册</p> </td> <td class="cellrowborder" valign="top" width="28.999999999999996%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-tilingdata-structure-definition">TilingData结构定义</a></p> </td> <td class="cellrowborder" valign="top" width="55.00000000000001%"><p>定义一个TilingData的类，添加所需的成员变量（TilingData字段），用于保存所需TilingData参数。完成该TilingData类的定义后，该类通过继承TilingDef类（用来存放、处理开发者自定义Tiling结构体成员变量的基类）提供TilingData字段设置、序列化和保存等接口。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-tilingdata-structure-registration">TilingData结构注册</a></p> </td> <td class="cellrowborder" valign="top"><p>注册定义的TilingData结构体并和自定义算子绑定。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="16%"><p>平台信息获取</p> </td> <td class="cellrowborder" valign="top" width="28.999999999999996%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-platformascendc-introduction">PlatformAscendC</a></p> </td> <td class="cellrowborder" valign="top" width="55.00000000000001%"><p>在实现Host侧的Tiling函数时，可能需要获取一些硬件平台的信息，来支撑Tiling的计算，比如获取硬件平台的核数等信息。PlatformAscendC类提供获取这些平台信息的功能。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section8105mcpsimp">算子调测API<i class="anchor-icon anchor-icon-link" anchorid="section8105mcpsimp" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表10 </b>算子调测API列表</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.2.2.3.1.1" valign="top" width="38.85%"><p>接口名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.2.3.1.2" valign="top" width="61.150000000000006%"><p>功能描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="38.85%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-gmalloc">GmAlloc</a></p> </td> <td class="cellrowborder" valign="top" width="61.150000000000006%"><p>进行核函数的CPU侧运行验证时，用于创建共享内存：在/tmp目录下创建一个共享文件，并返回该文件的映射指针。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="38.85%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-gmfree">GmFree</a></p> </td> <td class="cellrowborder" valign="top" width="61.150000000000006%"><p>进行核函数的CPU侧运行验证时，用于释放通过GmAlloc申请的共享内存。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="38.85%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-icpu-run-kf">ICPU_RUN_KF</a></p> </td> <td class="cellrowborder" valign="top" width="61.150000000000006%"><p>进行核函数的CPU侧运行验证时，CPU调测总入口，完成CPU侧的算子程序调用。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="38.85%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-icpu-set-tiling-key">ICPU_SET_TILING_KEY</a></p> </td> <td class="cellrowborder" valign="top" width="61.150000000000006%"><p>用于指定本次CPU调测使用的tilingKey。调测执行时，将只执行算子核函数中该tilingKey对应的分支。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>