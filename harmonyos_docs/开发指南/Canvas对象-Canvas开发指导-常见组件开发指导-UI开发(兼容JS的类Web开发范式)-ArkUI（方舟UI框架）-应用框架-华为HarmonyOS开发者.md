<h1 _ngcontent-gnq-c119="" class="doc-title ng-star-inserted" title="Canvas对象"> Canvas对象 </h1>

<div _ngcontent-gnq-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>Canvas组件提供画布，用于自定义绘制图形。具体用法请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-components-canvas-canvasrenderingcontext2d" target="_blank">CanvasRenderingContext2D对象</a>。</p>    <div class="tiledSection">     <h2 id="创建canvas组件">创建Canvas组件<i class="anchor-icon anchor-icon-link" anchorid="创建canvas组件" tips="复制节点链接"></i></h2>          <p>在pages/index目录下的hml文件中创建一个Canvas组件。</p>     <div _ngcontent-gnq-c106="" class="highlight-div"><div _ngcontent-gnq-c106="" class="highlight-div-header"><div _ngcontent-gnq-c106="" class="highlight-div-header-left"><div _ngcontent-gnq-c106="" class="handle-button expand-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gnq-c106="" class="highlight-div-header-right"><div _ngcontent-gnq-c106="" class="handle-button ai-button"></div><div _ngcontent-gnq-c106="" class="handle-button line-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gnq-c106="" class="handle-button theme-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gnq-c106="" class="handle-button copy-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gnq-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- xxx.hml --&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li></ol></pre></div></div>     <div _ngcontent-gnq-c106="" class="highlight-div"><div _ngcontent-gnq-c106="" class="highlight-div-header"><div _ngcontent-gnq-c106="" class="highlight-div-header-left"><div _ngcontent-gnq-c106="" class="handle-button expand-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gnq-c106="" class="highlight-div-header-right"><div _ngcontent-gnq-c106="" class="handle-button ai-button"></div><div _ngcontent-gnq-c106="" class="handle-button line-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gnq-c106="" class="handle-button theme-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gnq-c106="" class="handle-button copy-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gnq-c106="" class="highlight-scroll-div"><pre class="css prettyprint linenums hljs language-css" hw-language="css" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">/* xxx.css */</span></li><li><span class="hljs-selector-class">.container</span>{</li><li>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</li><li>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</li><li>  <span class="hljs-attribute">flex-direction</span>: column;</li><li>  <span class="hljs-attribute">justify-content</span>: center;</li><li>  <span class="hljs-attribute">align-items</span>: center;</li><li>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#F1F3F5</span>;</li><li>}</li><li><span class="hljs-selector-tag">canvas</span>{</li><li>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#00ff73</span>;</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="546" originwidth="350" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114905.84275632002944118388403780867003:50001231000000:2800:29F06516D48B1A52FAA3F4F0443D69F38F55BF4B4E98DE19A76E974AEBFB65F7.png" width="350" height="546"></span></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>         <p>Canvas组件默认背景色与父组件的背景色一致。</p></li>        <li>         <p>Canvas默认宽高为width: 300px，height: 150px。</p></li>       </ul>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="添加样式">添加样式<i class="anchor-icon anchor-icon-link" anchorid="添加样式" tips="复制节点链接"></i></h2>          <p>Canvas组件设置宽（width）、高（height）、背景色（background-color）及边框样式（border）。</p>     <div _ngcontent-gnq-c106="" class="highlight-div"><div _ngcontent-gnq-c106="" class="highlight-div-header"><div _ngcontent-gnq-c106="" class="highlight-div-header-left"><div _ngcontent-gnq-c106="" class="handle-button expand-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gnq-c106="" class="highlight-div-header-right"><div _ngcontent-gnq-c106="" class="handle-button ai-button"></div><div _ngcontent-gnq-c106="" class="handle-button line-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gnq-c106="" class="handle-button theme-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gnq-c106="" class="handle-button copy-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gnq-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- xxx.hml --&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li></ol></pre></div></div>     <div _ngcontent-gnq-c106="" class="highlight-div"><div _ngcontent-gnq-c106="" class="highlight-div-header"><div _ngcontent-gnq-c106="" class="highlight-div-header-left"><div _ngcontent-gnq-c106="" class="handle-button expand-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gnq-c106="" class="highlight-div-header-right"><div _ngcontent-gnq-c106="" class="handle-button ai-button"></div><div _ngcontent-gnq-c106="" class="handle-button line-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gnq-c106="" class="handle-button theme-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gnq-c106="" class="handle-button copy-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gnq-c106="" class="highlight-scroll-div"><pre class="css prettyprint linenums hljs language-css" hw-language="css" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">/* xxx.css */</span></li><li><span class="hljs-selector-class">.container</span>{</li><li>  <span class="hljs-attribute">flex-direction</span>: column;</li><li>  <span class="hljs-attribute">justify-content</span>: center;</li><li>  <span class="hljs-attribute">align-items</span>: center;</li><li>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#F1F3F5</span>;</li><li>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</li><li>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</li><li>}</li><li><span class="hljs-selector-tag">canvas</span>{</li><li>  <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;</li><li>  <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;</li><li>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fdfdfd</span>;</li><li>  <span class="hljs-attribute">border</span>: <span class="hljs-number">5px</span> solid red;</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="709" originwidth="401" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114905.37271735444533226311462005397460:50001231000000:2800:940CF2EF8E713232F191B164ADBA84BD936791D5F579CBFFA227C7C88876DAB1.png" width="401" height="709"></span></p>    </div>    <div class="tiledSection">     <h2 id="添加事件">添加事件<i class="anchor-icon anchor-icon-link" anchorid="添加事件" tips="复制节点链接"></i></h2>          <p>Canvas添加长按事件，长按后可获取Canvas组件的dataUrl值（toDataURL方法返回的图片信息），打印在下方文本区域内。</p>     <div _ngcontent-gnq-c106="" class="highlight-div"><div _ngcontent-gnq-c106="" class="highlight-div-header"><div _ngcontent-gnq-c106="" class="highlight-div-header-left"><div _ngcontent-gnq-c106="" class="handle-button expand-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gnq-c106="" class="highlight-div-header-right"><div _ngcontent-gnq-c106="" class="handle-button ai-button"></div><div _ngcontent-gnq-c106="" class="handle-button line-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gnq-c106="" class="handle-button theme-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gnq-c106="" class="handle-button copy-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gnq-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- xxx.hml --&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"canvas1"</span> <span class="hljs-attr">onlongpress</span>=<span class="hljs-string">"getUrl"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>dataURL<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>{{dataURL}}<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li></ol></pre></div></div>     <div _ngcontent-gnq-c106="" class="highlight-div"><div _ngcontent-gnq-c106="" class="highlight-div-header"><div _ngcontent-gnq-c106="" class="highlight-div-header-left"><div _ngcontent-gnq-c106="" class="handle-button expand-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gnq-c106="" class="highlight-div-header-right"><div _ngcontent-gnq-c106="" class="handle-button ai-button"></div><div _ngcontent-gnq-c106="" class="handle-button line-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gnq-c106="" class="handle-button theme-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gnq-c106="" class="handle-button copy-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gnq-c106="" class="highlight-scroll-div"><pre class="css prettyprint linenums hljs language-css" hw-language="css" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">/* xxx.css */</span></li><li><span class="hljs-selector-class">.container</span>{</li><li>  <span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;</li><li>  <span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;</li><li>  <span class="hljs-attribute">flex-direction</span>: column;</li><li>  <span class="hljs-attribute">justify-content</span>: center;</li><li>  <span class="hljs-attribute">align-items</span>: center;</li><li>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#F1F3F5</span>;</li><li>  }</li><li>  <span class="hljs-selector-tag">canvas</span>{</li><li>    <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;</li><li>    <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;</li><li>    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fdfdfd</span>;</li><li>    <span class="hljs-attribute">border</span>: <span class="hljs-number">5px</span> solid red;</li><li>    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">50px</span>;</li><li>}</li><li><span class="hljs-selector-class">.content</span>{</li><li>  <span class="hljs-attribute">border</span>: <span class="hljs-number">5px</span> solid blue;</li><li>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;</li><li>  <span class="hljs-attribute">width</span>: <span class="hljs-number">90%</span>;</li><li>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;</li><li>  <span class="hljs-attribute">overflow</span>: scroll;</li><li>}</li></ol></pre></div></div>     <div _ngcontent-gnq-c106="" class="highlight-div"><div _ngcontent-gnq-c106="" class="highlight-div-header"><div _ngcontent-gnq-c106="" class="highlight-div-header-left"><div _ngcontent-gnq-c106="" class="handle-button expand-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gnq-c106="" class="highlight-div-header-right"><div _ngcontent-gnq-c106="" class="handle-button ai-button"></div><div _ngcontent-gnq-c106="" class="handle-button line-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gnq-c106="" class="handle-button theme-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gnq-c106="" class="handle-button copy-button"><div _ngcontent-gnq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gnq-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" hw-language="js" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.js</span></li><li><span class="hljs-keyword">import</span> promptAction <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.promptAction'</span>;</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>  <span class="hljs-attr">data</span>:{</li><li>    <span class="hljs-attr">dataURL</span>:<span class="hljs-literal">null</span>,</li><li>  },</li><li>  <span class="hljs-title function_">onShow</span>(<span class="hljs-params"></span>){</li><li>    <span class="hljs-keyword">let</span> el = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">canvas1</span>;</li><li>    <span class="hljs-keyword">let</span> ctx = el.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">"2d"</span>);</li><li>    ctx.<span class="hljs-title function_">strokeRect</span>(<span class="hljs-number">100</span>,<span class="hljs-number">100</span>,<span class="hljs-number">300</span>,<span class="hljs-number">300</span>);</li><li>  },</li><li>  <span class="hljs-title function_">getUrl</span>(<span class="hljs-params"></span>){</li><li>    <span class="hljs-keyword">let</span> el = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">canvas1</span></li><li>    <span class="hljs-keyword">let</span> dataUrl = el.<span class="hljs-title function_">toDataURL</span>()</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataURL</span> = dataUrl;</li><li>    promptAction.<span class="hljs-title function_">showToast</span>({<span class="hljs-attr">duration</span>:<span class="hljs-number">2000</span>,<span class="hljs-attr">message</span>:<span class="hljs-string">"long press,get dataURL"</span>})</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="584" originwidth="313" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114905.41887222916937792360574914130859:50001231000000:2800:1FA18B0709CABF032A6E7FAE077E53C2D9F75CC829A7A1F330D906EDAEE1721E.gif" width="313" height="584"></span></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>画布不支持在onInit和onReady中进行创建。</p>      </div></div></div>    </div>   </div>   <div></div></div>