<h1 _ngcontent-gyh-c119="" class="doc-title ng-star-inserted" title="ContentSlot：混合开发"> ContentSlot：混合开发 </h1>

<div _ngcontent-gyh-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>用于渲染并管理Native层使用C-API创建的组件。</p>    <p>支持混合模式开发。当容器为ArkTS组件，且子组件在Native侧创建时，推荐使用ContentSlot占位组件。</p>    <div class="tiledSection">     <h2 id="接口">接口<i class="anchor-icon anchor-icon-link" anchorid="接口" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="arkts侧接口" class="firsth2">ArkTS侧接口<i class="anchor-icon anchor-icon-link" anchorid="arkts侧接口" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.3.1.1" valign="top" width="50%">接口名</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">ContentSlot(content: Content)</td>         <td class="cellrowborder" valign="top" width="50%">Content作为ContentSlot的管理器，通过Native侧提供的接口，可以注册并触发ContentSlot的上下树事件回调以及管理ContentSlot的子组件。</td>        </tr>             </tbody></table></div>     </div>     <div _ngcontent-gyh-c106="" class="highlight-div"><div _ngcontent-gyh-c106="" class="highlight-div-header"><div _ngcontent-gyh-c106="" class="highlight-div-header-left"><div _ngcontent-gyh-c106="" class="handle-button expand-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gyh-c106="" class="highlight-div-header-right"><div _ngcontent-gyh-c106="" class="handle-button ai-button"></div><div _ngcontent-gyh-c106="" class="handle-button line-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gyh-c106="" class="handle-button theme-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gyh-c106="" class="handle-button copy-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gyh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Content</span> {</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="native侧接口">Native侧接口<i class="anchor-icon anchor-icon-link" anchorid="native侧接口" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.1" valign="top" width="50%">接口名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-node-h#oh_arkui_nodecontent_registercallback" target="_blank">OH_ArkUI_NodeContent_RegisterCallback(ArkUI_NodeContentHandle content, ArkUI_NodeContentCallback callback)</a></td>         <td class="cellrowborder" valign="top" width="50%">向管理器Content上注册事件。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-node-h#oh_arkui_nodecontentevent_geteventtype" target="_blank">OH_ArkUI_NodeContentEvent_GetEventType(ArkUI_NodeContentEvent* event)</a></td>         <td class="cellrowborder" valign="top" width="50%">获取Content上触发的事件类型。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-node-h#oh_arkui_nodecontent_addnode" target="_blank">OH_ArkUI_NodeContent_AddNode(ArkUI_NodeContentHandle content, ArkUI_NodeHandle node)</a></td>         <td class="cellrowborder" valign="top" width="50%">在Content上添加子组件。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-node-h#oh_arkui_nodecontent_insertnode" target="_blank">OH_ArkUI_NodeContent_InsertNode(ArkUI_NodeContentHandle content, ArkUI_NodeHandle node, int32_t position)</a></td>         <td class="cellrowborder" valign="top" width="50%">在Content上插入子组件。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-node-h#oh_arkui_nodecontent_removenode" target="_blank">OH_ArkUI_NodeContent_RemoveNode(ArkUI_NodeContentHandle content, ArkUI_NodeHandle node)</a></td>         <td class="cellrowborder" valign="top" width="50%">在Content上移除子组件。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-node-napi-h#oh_arkui_getnodecontentfromnapivalue" target="_blank">OH_ArkUI_GetNodeContentFromNapiValue(napi_env env, napi_value value, ArkUI_NodeContentHandle* content)</a></td>         <td class="cellrowborder" valign="top" width="50%">在Native侧获取ArkTS侧Content指针。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-node-h#oh_arkui_nodecontentevent_getnodecontenthandle" target="_blank">OH_ArkUI_NodeContentEvent_GetNodeContentHandle(ArkUI_NodeContentEvent* event)</a></td>         <td class="cellrowborder" valign="top" width="50%">获取触发上下树事件的Content对象。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-node-h#oh_arkui_nodecontent_setuserdata" target="_blank">OH_ArkUI_NodeContent_SetUserData(ArkUI_NodeContentHandle content, void* userData)</a></td>         <td class="cellrowborder" valign="top" width="50%">在Content上设置用户自定义属性。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-node-h#oh_arkui_nodecontent_getuserdata" target="_blank">OH_ArkUI_NodeContent_GetUserData(ArkUI_NodeContentHandle content)</a></td>         <td class="cellrowborder" valign="top" width="50%">在Content上获取用户自定义属性。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">          <p>typedef enum {</p>          <p>NODE_CONTENT_EVENT_ON_ATTACH_TO_WINDOW = 0,</p>          <p>NODE_CONTENT_EVENT_ON_DETACH_FROM_WINDOW = 1,</p>          <p>} <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-node-h#arkui_nodecontenteventtype" target="_blank">ArkUI_NodeContentEventType</a></p></td>         <td class="cellrowborder" valign="top" width="50%">Content上会触发的上树和下树事件类型。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="开发实现">开发实现<i class="anchor-icon anchor-icon-link" anchorid="开发实现" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="arkts侧代码实现" class="firsth2">ArkTS侧代码实现<i class="anchor-icon anchor-icon-link" anchorid="arkts侧代码实现" tips="复制节点链接"></i></h3>          <div _ngcontent-gyh-c106="" class="highlight-div"><div _ngcontent-gyh-c106="" class="highlight-div-header"><div _ngcontent-gyh-c106="" class="highlight-div-header-left"><div _ngcontent-gyh-c106="" class="handle-button expand-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gyh-c106="" class="highlight-div-header-right"><div _ngcontent-gyh-c106="" class="handle-button ai-button"></div><div _ngcontent-gyh-c106="" class="handle-button line-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gyh-c106="" class="handle-button theme-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gyh-c106="" class="handle-button copy-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gyh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { nativeNode } <span class="hljs-keyword">from</span> <span class="hljs-string">'libNativeNode.so'</span>; <span class="hljs-comment">// 开发者自己实现的so</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeContent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">nodeContent</span>: <span class="hljs-title class_">Content</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NodeContent</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 通过C-API创建节点，并添加到管理器nodeContent上</span></li><li>    nativeNode.<span class="hljs-title function_">createNativeNode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeContent</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 显示nodeContent管理器里存放的Native侧的组件</span></li><li>      <span class="hljs-title class_">ContentSlot</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeContent</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="native侧代码实现">Native侧代码实现<i class="anchor-icon anchor-icon-link" anchorid="native侧代码实现" tips="复制节点链接"></i></h3>          <p>Napi的基础开发知识请查看以下文档：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-development-overview">开发导读</a>。</p>     <p>本章节描述实现ContentSlot相关逻辑代码。创建C侧组件的具体步骤，请参阅<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-build-ui-overview">使用NDK接口构建UI</a>。</p>     <div _ngcontent-gyh-c106="" class="highlight-div"><div _ngcontent-gyh-c106="" class="highlight-div-header"><div _ngcontent-gyh-c106="" class="highlight-div-header-left"><div _ngcontent-gyh-c106="" class="handle-button expand-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gyh-c106="" class="highlight-div-header-right"><div _ngcontent-gyh-c106="" class="handle-button ai-button"></div><div _ngcontent-gyh-c106="" class="handle-button line-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gyh-c106="" class="handle-button theme-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gyh-c106="" class="handle-button copy-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gyh-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"napi/native_api.h"</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"arkui/native_type.h"</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"arkui/native_node.h"</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"arkui/native_node_napi.h"</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"arkui/native_interface.h"</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"hilog/log.h"</span></span></li><li>
</li><li>ArkUI_NodeContentHandle nodeContentHandle_ = <span class="hljs-literal">nullptr</span>;</li><li>ArkUI_NativeNodeAPI_1 *nodeAPI;</li><li><span class="hljs-type">const</span> <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> LOG_PRINT_DOMAIN = <span class="hljs-number">0xFF00</span>;</li><li>
</li><li><span class="hljs-comment">// 在Native侧创建一个宽高为480vp*480vp、背景色为0xFFFF0000（红色）的Column组件。对于更详细的节点树创建方法，请参考ArkUI API文档的C API章节。</span></li><li><span class="hljs-function">ArkUI_NodeHandle <span class="hljs-title">CreateNodeHandle</span><span class="hljs-params">()</span> </span>{</li><li>    ArkUI_NodeHandle column = nodeAPI-&gt;<span class="hljs-built_in">createNode</span>(ARKUI_NODE_COLUMN);</li><li>    ArkUI_NumberValue value[] = {<span class="hljs-number">480</span>};</li><li>    ArkUI_AttributeItem item{value, <span class="hljs-number">1</span>};</li><li>    nodeAPI-&gt;<span class="hljs-built_in">setAttribute</span>(column, NODE_WIDTH, &amp;item);</li><li>    nodeAPI-&gt;<span class="hljs-built_in">setAttribute</span>(column, NODE_HEIGHT, &amp;item);</li><li>    value[<span class="hljs-number">0</span>].u32 = <span class="hljs-number">0xFFFF0000</span>;</li><li>    nodeAPI-&gt;<span class="hljs-built_in">setAttribute</span>(column, NODE_BACKGROUND_COLOR, &amp;item);</li><li>    <span class="hljs-keyword">return</span> column;</li><li>}</li><li>
</li><li><span class="hljs-comment">// ArkTS侧createNativeNode方法在Native侧的具体实现</span></li><li><span class="hljs-function">napi_value <span class="hljs-title">CreateNativeNode</span><span class="hljs-params">(napi_env env, napi_callback_info info)</span> </span>{</li><li>    <span class="hljs-comment">// napi相关处理空指针&amp;数据越界等问题</span></li><li>    <span class="hljs-keyword">if</span> ((env == <span class="hljs-literal">nullptr</span>) || (info == <span class="hljs-literal">nullptr</span>)) {</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;</li><li>    }</li><li>
</li><li>    <span class="hljs-type">size_t</span> argc = <span class="hljs-number">1</span>;</li><li>    napi_value args[<span class="hljs-number">1</span>] = { <span class="hljs-literal">nullptr</span> };</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">napi_get_cb_info</span>(env, info, &amp;argc, args, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>) != napi_ok) {</li><li>        <span class="hljs-built_in">OH_LOG_Print</span>(LOG_APP, LOG_ERROR, LOG_PRINT_DOMAIN, <span class="hljs-string">"Manager"</span>, <span class="hljs-string">"CreateNativeNode napi_get_cb_info failed"</span>);</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">if</span> (argc != <span class="hljs-number">1</span>) {</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;</li><li>    }</li><li>
</li><li>    nodeAPI = <span class="hljs-built_in">reinterpret_cast</span>&lt;ArkUI_NativeNodeAPI_1 *&gt;(</li><li>        <span class="hljs-built_in">OH_ArkUI_QueryModuleInterfaceByName</span>(ARKUI_NATIVE_NODE, <span class="hljs-string">"ArkUI_NativeNodeAPI_1"</span>));</li><li>
</li><li>    <span class="hljs-comment">// 将nodeContentHandle_指向ArkTS侧传入的nodeContent</span></li><li>    <span class="hljs-built_in">OH_ArkUI_GetNodeContentFromNapiValue</span>(env, args[<span class="hljs-number">0</span>], &amp;nodeContentHandle_);</li><li>
</li><li>    <span class="hljs-keyword">if</span> (nodeAPI != <span class="hljs-literal">nullptr</span>) {</li><li>        <span class="hljs-keyword">if</span> (nodeAPI-&gt;createNode != <span class="hljs-literal">nullptr</span> &amp;&amp; nodeAPI-&gt;addChild != <span class="hljs-literal">nullptr</span>) {</li><li>            ArkUI_NodeHandle component;</li><li>            <span class="hljs-comment">// 创建C侧组件</span></li><li>            component = <span class="hljs-built_in">CreateNodeHandle</span>();</li><li>            <span class="hljs-comment">// 将组件添加到nodeContent管理器中</span></li><li>            <span class="hljs-built_in">OH_ArkUI_NodeContent_AddNode</span>(nodeContentHandle_, component);</li><li>        }</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="native侧主要接口使用说明">Native侧主要接口使用说明<i class="anchor-icon anchor-icon-link" anchorid="native侧主要接口使用说明" tips="复制节点链接"></i></h3>          <ul>      <li>       <p>注册上下树事件，并通过事件获取对应的Content对象。</p>       <div _ngcontent-gyh-c106="" class="highlight-div"><div _ngcontent-gyh-c106="" class="highlight-div-header"><div _ngcontent-gyh-c106="" class="highlight-div-header-left"><div _ngcontent-gyh-c106="" class="handle-button expand-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gyh-c106="" class="highlight-div-header-right"><div _ngcontent-gyh-c106="" class="handle-button ai-button"></div><div _ngcontent-gyh-c106="" class="handle-button line-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gyh-c106="" class="handle-button theme-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gyh-c106="" class="handle-button copy-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gyh-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li>auto nodeContentEvent = [](ArkUI_NodeContentEvent *<span class="hljs-keyword">event</span>) {</li><li>    ArkUI_NodeContentHandle content = OH_ArkUI_NodeContentEvent_GetNodeContentHandle(<span class="hljs-keyword">event</span>);</li><li>    <span class="hljs-comment">// 针对不同content需要额外做的逻辑</span></li><li>    <span class="hljs-keyword">if</span> (OH_ArkUINodeContentEvent_GetEventType(<span class="hljs-keyword">event</span>) = NODE_CONTENT_EVENT_ON_ATTACH_TO_WINDOW) {</li><li>        <span class="hljs-comment">// ContentSlot上树时需要触发的逻辑</span></li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (OH_ArkUINodeContentEvent_GetEventType(<span class="hljs-keyword">event</span>) = NODE_CONTENT_EVENT_ON_DETACH_FROM_WINDOW) {</li><li>        <span class="hljs-comment">// ContentSlot下树时需要触发的逻辑</span></li><li>    };</li><li>};</li><li><span class="hljs-comment">// 将该事件注册到nodeContent上</span></li><li>OH_ArkUI_NodeContent_RegisterCallback(nodeContentHandle_, nodeContentEvent);</li></ol></pre></div></div></li>      <li>       <p>添加子组件。</p>       <div _ngcontent-gyh-c106="" class="highlight-div"><div _ngcontent-gyh-c106="" class="highlight-div-header"><div _ngcontent-gyh-c106="" class="highlight-div-header-left"><div _ngcontent-gyh-c106="" class="handle-button expand-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gyh-c106="" class="highlight-div-header-right"><div _ngcontent-gyh-c106="" class="handle-button ai-button"></div><div _ngcontent-gyh-c106="" class="handle-button line-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gyh-c106="" class="handle-button theme-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gyh-c106="" class="handle-button copy-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gyh-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li>ArkUINodeHandle component;</li><li>component = <span class="hljs-built_in">CreateNodeHandle</span>();</li><li><span class="hljs-comment">// 将组件添加到nodeContent管理器中</span></li><li><span class="hljs-built_in">OH_ArkUI_NodeContent_AddNode</span>(nodeContentHandle_, component);</li></ol></pre></div></div></li>      <li>       <p>插入子组件。</p>       <div _ngcontent-gyh-c106="" class="highlight-div"><div _ngcontent-gyh-c106="" class="highlight-div-header"><div _ngcontent-gyh-c106="" class="highlight-div-header-left"><div _ngcontent-gyh-c106="" class="handle-button expand-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gyh-c106="" class="highlight-div-header-right"><div _ngcontent-gyh-c106="" class="handle-button ai-button"></div><div _ngcontent-gyh-c106="" class="handle-button line-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gyh-c106="" class="handle-button theme-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gyh-c106="" class="handle-button copy-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gyh-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li>ArkUINodeHandle component;</li><li>component = <span class="hljs-built_in">CreateNodeHandle</span>();</li><li><span class="hljs-comment">// 将组件插入nodeContent管理器对应位置</span></li><li><span class="hljs-built_in">OH_ArkUI_NodeContent_InsertNode</span>(nodeContentHandle_, component, position);</li></ol></pre></div></div></li>      <li>       <p>删除子组件。</p>       <div _ngcontent-gyh-c106="" class="highlight-div"><div _ngcontent-gyh-c106="" class="highlight-div-header"><div _ngcontent-gyh-c106="" class="highlight-div-header-left"><div _ngcontent-gyh-c106="" class="handle-button expand-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gyh-c106="" class="highlight-div-header-right"><div _ngcontent-gyh-c106="" class="handle-button ai-button"></div><div _ngcontent-gyh-c106="" class="handle-button line-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gyh-c106="" class="handle-button theme-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gyh-c106="" class="handle-button copy-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gyh-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 在nodeContent中移除对应组件</span></li><li><span class="hljs-built_in">OH_ArkUI_NodeContent_RemoveNode</span>(nodeContentHandle_, component);</li></ol></pre></div></div></li>      <li>       <p>设置自定义属性。</p>       <div _ngcontent-gyh-c106="" class="highlight-div"><div _ngcontent-gyh-c106="" class="highlight-div-header"><div _ngcontent-gyh-c106="" class="highlight-div-header-left"><div _ngcontent-gyh-c106="" class="handle-button expand-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gyh-c106="" class="highlight-div-header-right"><div _ngcontent-gyh-c106="" class="handle-button ai-button"></div><div _ngcontent-gyh-c106="" class="handle-button line-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gyh-c106="" class="handle-button theme-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gyh-c106="" class="handle-button copy-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gyh-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建需要定义的自定义数据</span></li><li><span class="hljs-type">void</span> *userData = <span class="hljs-built_in">CreateUserData</span>();</li><li><span class="hljs-built_in">OH_ArkUI_NodeContent_SetUserData</span>(nodeContentHandle_, userData);</li></ol></pre></div></div></li>      <li>       <p>获取自定义属性。</p>       <div _ngcontent-gyh-c106="" class="highlight-div"><div _ngcontent-gyh-c106="" class="highlight-div-header"><div _ngcontent-gyh-c106="" class="highlight-div-header-left"><div _ngcontent-gyh-c106="" class="handle-button expand-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gyh-c106="" class="highlight-div-header-right"><div _ngcontent-gyh-c106="" class="handle-button ai-button"></div><div _ngcontent-gyh-c106="" class="handle-button line-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gyh-c106="" class="handle-button theme-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gyh-c106="" class="handle-button copy-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gyh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">void</span> *userData = <span class="hljs-built_in">OH_ArkUI_NodeContent_GetUserData</span>(nodeContentHandle_);</li></ol></pre></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="绑定规则说明">绑定规则说明<i class="anchor-icon anchor-icon-link" anchorid="绑定规则说明" tips="复制节点链接"></i></h2>          <p>如果将同一个Content对象绑定到多个ContentSlot组件，最终该Content的内容仅在最后一个绑定的ContentSlot中显示，其他ContentSlot将不显示任何内容。</p>     <p><strong>原因说明：</strong></p>     <p>Content与ContentSlot节点具有一对一的绑定关系。同一Content不能同时关联多个ContentSlot节点。如果尝试将同一Content挂载到多个ContentSlot节点，仅最后一次挂载生效，之前的ContentSlot节点将失去Content的关联，导致组件内容无法显示。</p>     <p>若需在多个ContentSlot节点下显示相同内容，每个节点需创建单独的Content。示例如下：</p>     <div _ngcontent-gyh-c106="" class="highlight-div"><div _ngcontent-gyh-c106="" class="highlight-div-header"><div _ngcontent-gyh-c106="" class="highlight-div-header-left"><div _ngcontent-gyh-c106="" class="handle-button expand-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gyh-c106="" class="highlight-div-header-right"><div _ngcontent-gyh-c106="" class="handle-button ai-button"></div><div _ngcontent-gyh-c106="" class="handle-button line-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gyh-c106="" class="handle-button theme-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gyh-c106="" class="handle-button copy-button"><div _ngcontent-gyh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gyh-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> nativeNode <span class="hljs-keyword">from</span> <span class="hljs-string">'libNativeNode.so'</span>; <span class="hljs-comment">// 开发者自己实现的so</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeContent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">nodeContent_1</span>: <span class="hljs-title class_">Content</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NodeContent</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">nodeContent_2</span>: <span class="hljs-title class_">Content</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NodeContent</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 通过C-API创建节点，并添加到管理器nodeContent_1和nodeContent_2上</span></li><li>    nativeNode.<span class="hljs-title function_">createNativeNode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeContent_1</span>);</li><li>    nativeNode.<span class="hljs-title function_">createNativeNode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeContent_2</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">ContentSlot</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeContent_1</span>) <span class="hljs-comment">// nodeContent_1将被挂载到下一个Contentslot节点，此处无法显示</span></li><li>      <span class="hljs-title class_">ContentSlot</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeContent_1</span>) <span class="hljs-comment">// 正常显示</span></li><li>      <span class="hljs-title class_">ContentSlot</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeContent_2</span>) <span class="hljs-comment">// 正常显示</span></li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>