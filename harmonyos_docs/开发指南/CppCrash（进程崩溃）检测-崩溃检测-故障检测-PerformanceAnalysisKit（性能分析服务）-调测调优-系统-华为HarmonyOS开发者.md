<h1 _ngcontent-fur-c119="" class="doc-title ng-star-inserted" title="Cpp Crash（进程崩溃）检测"> Cpp Crash（进程崩溃）检测 </h1>

<div _ngcontent-fur-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="简介">简介<i class="anchor-icon anchor-icon-link" anchorid="简介" tips="复制节点链接"></i></h2>          <p>进程发生崩溃后，系统首先感知到崩溃，然后抓取崩溃相关的信息，最后生成崩溃日志并上报崩溃事件，为开发者提供详细的维测日志以辅助故障定位。本文分为基本概念、实现原理、约束与限制、日志获取、日志规格五个小节介绍系统提供的CppCrash检测方法。开发者如果想进一步了解如何分析CppCrash问题，请参见<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-stability-app-crash-cpp-way" target="_blank">CppCrash类问题分析方法</a>。</p>    </div>    <div class="tiledSection">     <h2 id="基本概念">基本概念<i class="anchor-icon anchor-icon-link" anchorid="基本概念" tips="复制节点链接"></i></h2>          <ul>      <li>       <p><strong>信号</strong></p>       <p>信号是兼容POSIX的操作系统中进程间通讯的一种方式。一种异步的通知机制，当一个信号发送给一个进程，操作系统中断进程正常的控制流程。</p></li>      <li>       <p><strong>信号处理函数</strong></p>       <p>定义了进程在接收到信号之后进行一系列处理操作的函数，信号处理函数需要明确处理哪些信号。</p></li>      <li>       <p><strong>pc</strong></p>       <p>全称Program Counter（程序计数器），储存当前程序正在执行指令的地址。</p></li>      <li>       <p><strong>lr</strong></p>       <p>全称Link Register（链接寄存器），存储子程序的返回地址。</p></li>      <li>       <p><strong>sp</strong></p>       <p>全称Stack Pointer（堆栈指针寄存器），存储当前函数栈帧的栈顶地址。</p></li>      <li>       <p><strong>fp</strong></p>       <p>全称Frame Pointer（栈帧指针寄存器），存储当前函数栈帧的栈底地址。</p></li>      <li>       <p><strong>调用栈</strong></p>       <p>记录每个线程从开始到执行当前现场（如崩溃现场）整个过程中函数调用顺序。</p></li>      <li>       <p><strong>寄存器</strong></p>       <p>CPU中高速存储单元用于存储计算机程序执行过程中所需的数据、指令地址或状态信息。本文中，寄存器信息是指崩溃时保存在高速存储单元中的数据、指令地址或状态信息。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="实现原理">实现原理<i class="anchor-icon anchor-icon-link" anchorid="实现原理" tips="复制节点链接"></i></h2>          <p>系统检测进程崩溃的流程如下：</p>     <ol>      <li>       <p>进程在运行时发生崩溃，会收到来自内核发送的崩溃信号，由进程在启动时注册的信号处理模块进行处理。</p></li>      <li>       <p>进程接收到崩溃信号后，保存当前进程上下文，并fork出子进程执行ProcessDump二进制抓取崩溃信息。</p></li>      <li>       <p>ProcessDump进程将崩溃日志数据写入到临时目录下进行存储。</p></li>      <li>       <p>ProcessDump进程收集完崩溃日志后，上报给维测进程Hiview，并补充仅Hiview有权限获取的部分信息(如整机内存状态、应用页面切换轨迹)，然后将崩溃日志存储到“/data/log/faultlog/faultlogger”目录下并生成故障事件。</p></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="系统处理的崩溃信号" class="firsth2">系统处理的崩溃信号<i class="anchor-icon anchor-icon-link" anchorid="系统处理的崩溃信号" tips="复制节点链接"></i></h3>          <p>系统的进程崩溃检测能力主要基于POSIX信号机制，目前支持对以下崩溃信号的处理：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.5.1.1" valign="top" width="25%">信号值(signo)</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.5.1.2" valign="top" width="25%">信号</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.5.1.3" valign="top" width="25%">解释</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.5.1.4" valign="top" width="25%">触发原因</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="25%">4</td>         <td class="cellrowborder" valign="top" width="25%">SIGILL</td>         <td class="cellrowborder" valign="top" width="25%">非法指令</td>         <td class="cellrowborder" valign="top" width="25%">进程执行了非法、格式错误、未知或特权指令。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">5</td>         <td class="cellrowborder" valign="top" width="25%">SIGTRAP</td>         <td class="cellrowborder" valign="top" width="25%">断点或陷阱异常</td>         <td class="cellrowborder" valign="top" width="25%">异常或trap指令发生。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">6</td>         <td class="cellrowborder" valign="top" width="25%">SIGABRT</td>         <td class="cellrowborder" valign="top" width="25%">进程终止</td>         <td class="cellrowborder" valign="top" width="25%">进程异常终止，通常为进程自身调用标准函数库的abort()函数。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">7</td>         <td class="cellrowborder" valign="top" width="25%">SIGBUS</td>         <td class="cellrowborder" valign="top" width="25%">非法内存访问</td>         <td class="cellrowborder" valign="top" width="25%">进程访问了未对齐或者不存在的物理地址。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">8</td>         <td class="cellrowborder" valign="top" width="25%">SIGFPE</td>         <td class="cellrowborder" valign="top" width="25%">浮点异常</td>         <td class="cellrowborder" valign="top" width="25%">进程执行了错误的算术运算，如除数为0、浮点溢出、整数溢出等。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">11</td>         <td class="cellrowborder" valign="top" width="25%">SIGSEGV</td>         <td class="cellrowborder" valign="top" width="25%">无效内存访问</td>         <td class="cellrowborder" valign="top" width="25%">进程访问了无效内存引用。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">16</td>         <td class="cellrowborder" valign="top" width="25%">SIGSTKFLT</td>         <td class="cellrowborder" valign="top" width="25%">栈错误</td>         <td class="cellrowborder" valign="top" width="25%">处理器执行了错误的栈操作，如栈空时弹出、栈满时压入。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">31</td>         <td class="cellrowborder" valign="top" width="25%">SIGSYS</td>         <td class="cellrowborder" valign="top" width="25%">错误系统调用</td>         <td class="cellrowborder" valign="top" width="25%">系统调用时使用了错误或非法参数。</td>        </tr>             </tbody></table></div>     </div>     <p>以上系统处理的崩溃信号，根据错误码（code）还有二级分类，二级分类如下：</p>    </div>    <div class="tiledSection">     <h3 id="sigill崩溃类型">SIGILL崩溃类型<i class="anchor-icon anchor-icon-link" anchorid="sigill崩溃类型" tips="复制节点链接"></i></h3>          <p>SIGILL是一个在Unix和类Unix操作系统中的信号，它表示非法指令异常。SIGILL信号通常由以下几种类型的问题场景引起：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.5.1.1" valign="top" width="25%">错误码（code）</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.5.1.2" valign="top" width="25%">信号字符串</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.5.1.3" valign="top" width="25%">解释</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.5.1.4" valign="top" width="25%">触发原因</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="25%">1</td>         <td class="cellrowborder" valign="top" width="25%">ILL_ILLOPC</td>         <td class="cellrowborder" valign="top" width="25%">非法操作码异常</td>         <td class="cellrowborder" valign="top" width="25%">发生在执行不被CPU支持的指令或者无效指令时。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">2</td>         <td class="cellrowborder" valign="top" width="25%">ILL_ILLOPN</td>         <td class="cellrowborder" valign="top" width="25%">非法操作数异常</td>         <td class="cellrowborder" valign="top" width="25%">发生在指令使用了不正确的操作数，或者是操作数的类型不正确时。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">3</td>         <td class="cellrowborder" valign="top" width="25%">ILL_ILLADR</td>         <td class="cellrowborder" valign="top" width="25%">非法地址异常</td>         <td class="cellrowborder" valign="top" width="25%">发生在程序尝试访问无效的内存地址时，或者是在尝试执行未对齐的内存访问时。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">4</td>         <td class="cellrowborder" valign="top" width="25%">ILL_ILLTRP</td>         <td class="cellrowborder" valign="top" width="25%">非法陷阱异常</td>         <td class="cellrowborder" valign="top" width="25%">发生在程序尝试执行一个非法的陷阱指令时，或者是在尝试执行一个未定义的操作时。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">5</td>         <td class="cellrowborder" valign="top" width="25%">ILL_PRVOPC</td>         <td class="cellrowborder" valign="top" width="25%">特权操作码异常</td>         <td class="cellrowborder" valign="top" width="25%">发生在普通用户尝试执行特权指令时。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">6</td>         <td class="cellrowborder" valign="top" width="25%">ILL_PRVREG</td>         <td class="cellrowborder" valign="top" width="25%">特权寄存器异常</td>         <td class="cellrowborder" valign="top" width="25%">发生在普通用户尝试访问特权寄存器时。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">7</td>         <td class="cellrowborder" valign="top" width="25%">ILL_COPROC</td>         <td class="cellrowborder" valign="top" width="25%">协处理器异常</td>         <td class="cellrowborder" valign="top" width="25%">发生在程序尝试使用未定义的协处理器指令时。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">8</td>         <td class="cellrowborder" valign="top" width="25%">ILL_BADSTK</td>         <td class="cellrowborder" valign="top" width="25%">无效的堆栈异常</td>         <td class="cellrowborder" valign="top" width="25%">发生在程序尝试在无效的堆栈地址上执行操作时，或者是在堆栈溢出时。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">0xacac</td>         <td class="cellrowborder" valign="top" width="25%">ILL_ILLPACCFI</td>         <td class="cellrowborder" valign="top" width="25%">指针校验异常</td>         <td class="cellrowborder" valign="top" width="25%">发生在程序校验指针失败时。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="sigtrap崩溃类型">SIGTRAP崩溃类型<i class="anchor-icon anchor-icon-link" anchorid="sigtrap崩溃类型" tips="复制节点链接"></i></h3>          <p>SIGTRAP信号通常用于调试和跟踪程序的执行。下面是SIGTRAP信号类别的问题场景介绍：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.1" valign="top" width="25%">错误码（code）</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.2" valign="top" width="25%">信号字符串</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.3" valign="top" width="25%">解释</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.4" valign="top" width="25%">触发原因</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="25%">1</td>         <td class="cellrowborder" valign="top" width="25%">TRAP_BRKPT</td>         <td class="cellrowborder" valign="top" width="25%">软件断点</td>         <td class="cellrowborder" valign="top" width="25%">由软件断点引起的，当程序执行到设置的断点时会触发该信号。软件断点通常用于调试程序，可以在程序的关键位置设置断点，以便在调试时暂停程序的执行并检查变量值等信息。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">2</td>         <td class="cellrowborder" valign="top" width="25%">TRAP_TRACE</td>         <td class="cellrowborder" valign="top" width="25%">单步调试</td>         <td class="cellrowborder" valign="top" width="25%">由单步执行引起的，当程序执行单个指令时会触发该信号。单步执行通常用于调试程序，可以逐步执行程序并检查每个指令的执行结果。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">3</td>         <td class="cellrowborder" valign="top" width="25%">TRAP_BRANCH</td>         <td class="cellrowborder" valign="top" width="25%">分支跟踪</td>         <td class="cellrowborder" valign="top" width="25%">由分支指令引起的，当程序执行分支指令时会触发该信号。分支指令通常用于控制程序的执行流程，例如if语句和循环语句等。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">4</td>         <td class="cellrowborder" valign="top" width="25%">TRAP_HWBKPT</td>         <td class="cellrowborder" valign="top" width="25%">硬件断点</td>         <td class="cellrowborder" valign="top" width="25%">由硬件断点引起的，当程序执行到设置的硬件断点时会触发该信号。硬件断点通常用于调试程序，可以在程序的关键位置设置断点，以便在调试时暂停程序的执行并检查变量值等信息。与软件断点不同的是，硬件断点是由CPU硬件实现的，因此可以在程序执行过程中实时检测断点是否被触发。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="sigbus崩溃类型">SIGBUS崩溃类型<i class="anchor-icon anchor-icon-link" anchorid="sigbus崩溃类型" tips="复制节点链接"></i></h3>          <p>SIGBUS是一种由操作系统向进程发送的信号，通常表示内存访问错误。其中，不同的信号类别表示不同的错误场景：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.5.1.1" valign="top" width="25%">错误码（code）</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.5.1.2" valign="top" width="25%">信号字符串</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.5.1.3" valign="top" width="25%">解释</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.5.1.4" valign="top" width="25%">触发原因</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="25%">1</td>         <td class="cellrowborder" valign="top" width="25%">BUS_ADRALN</td>         <td class="cellrowborder" valign="top" width="25%">内存地址对齐错误</td>         <td class="cellrowborder" valign="top" width="25%">发生在尝试访问未对齐的内存地址时，例如尝试访问一个4字节整数的非偶数地址。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">2</td>         <td class="cellrowborder" valign="top" width="25%">BUS_ADRERR</td>         <td class="cellrowborder" valign="top" width="25%">非法内存地址错误</td>         <td class="cellrowborder" valign="top" width="25%">发生在尝试访问不属于进程地址空间的内存地址时，例如尝试访问一个空指针。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">3</td>         <td class="cellrowborder" valign="top" width="25%">BUS_OBJERR</td>         <td class="cellrowborder" valign="top" width="25%">对象访问错误</td>         <td class="cellrowborder" valign="top" width="25%">发生在尝试访问一个已经被删除或未初始化的对象时。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">4</td>         <td class="cellrowborder" valign="top" width="25%">BUS_MCEERR_AR</td>         <td class="cellrowborder" valign="top" width="25%">需立即处理的硬件内存校验错误</td>         <td class="cellrowborder" valign="top" width="25%">发生在访问内存时检测到需要立即处理的硬件内存错误。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">5</td>         <td class="cellrowborder" valign="top" width="25%">BUS_MCEERR_AO</td>         <td class="cellrowborder" valign="top" width="25%">可等待或延迟处理的硬件内存校验错误</td>         <td class="cellrowborder" valign="top" width="25%">发生在访问内存时检测到可等待或延迟处理的硬件内存错误。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="sigfpe崩溃类型">SIGFPE崩溃类型<i class="anchor-icon anchor-icon-link" anchorid="sigfpe崩溃类型" tips="复制节点链接"></i></h3>          <p>SIGFPE是一个信号，它表示浮点异常或算术异常。下面是这些SIGFPE信号类别的问题场景：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.3.1.5.1.1" valign="top" width="25%">错误码（code）</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.3.1.5.1.2" valign="top" width="25%">信号字符串</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.3.1.5.1.3" valign="top" width="25%">解释</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.3.1.5.1.4" valign="top" width="25%">触发原因</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="25%">1</td>         <td class="cellrowborder" valign="top" width="25%">FPE_INTDIV</td>         <td class="cellrowborder" valign="top" width="25%">整数除法错误</td>         <td class="cellrowborder" valign="top" width="25%">表示整数除法中的除数为零的情况。当一个程序尝试进行整数除法，但除数为零时，会发出这个信号。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">2</td>         <td class="cellrowborder" valign="top" width="25%">FPE_INTOVF</td>         <td class="cellrowborder" valign="top" width="25%">整数溢出错误</td>         <td class="cellrowborder" valign="top" width="25%">表示整数溢出错误。当一个程序尝试进行整数运算，结果超出整数范围时，会发出这个信号。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">3</td>         <td class="cellrowborder" valign="top" width="25%">FPE_FLTDIV</td>         <td class="cellrowborder" valign="top" width="25%">浮点除法错误</td>         <td class="cellrowborder" valign="top" width="25%">表示浮点数除法中的除数为零的情况。当一个程序尝试进行浮点数除法，但除数为零时，会发出这个信号。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">4</td>         <td class="cellrowborder" valign="top" width="25%">FPE_FLTOVF</td>         <td class="cellrowborder" valign="top" width="25%">浮点上溢错误</td>         <td class="cellrowborder" valign="top" width="25%">表示浮点溢出错误。当一个程序尝试进行浮点数运算，结果超出浮点数上限范围时，会发出这个信号。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">5</td>         <td class="cellrowborder" valign="top" width="25%">FPE_FLTUND</td>         <td class="cellrowborder" valign="top" width="25%">浮点下溢错误</td>         <td class="cellrowborder" valign="top" width="25%">表示浮点下溢错误。当一个程序尝试进行浮点数运算，结果小于浮点数下限范围时，会发出这个信号。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">6</td>         <td class="cellrowborder" valign="top" width="25%">FPE_FLTRES</td>         <td class="cellrowborder" valign="top" width="25%">浮点结果未定义错误</td>         <td class="cellrowborder" valign="top" width="25%">表示浮点结果未定义错误。当一个程序尝试进行浮点数运算，结果未定义时，会发出这个信号。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">7</td>         <td class="cellrowborder" valign="top" width="25%">FPE_FLTINV</td>         <td class="cellrowborder" valign="top" width="25%">无效浮点操作错误</td>         <td class="cellrowborder" valign="top" width="25%">表示无效浮点操作错误。当一个程序尝试进行无效的浮点数运算时，会发出这个信号。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">8</td>         <td class="cellrowborder" valign="top" width="25%">FPE_FLTSUB</td>         <td class="cellrowborder" valign="top" width="25%">浮点运算结果越界错误</td>         <td class="cellrowborder" valign="top" width="25%">表示浮点运算结果越界错误。当一个程序尝试进行浮点数运算，浮点数结果越界，会发出这个信号。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="sigsegv崩溃类型">SIGSEGV崩溃类型<i class="anchor-icon anchor-icon-link" anchorid="sigsegv崩溃类型" tips="复制节点链接"></i></h3>          <p>SIGSEGV是一种信号，它表示进程试图访问一个不属于它的内存地址，或者试图访问一个已被操作系统标记为不可访问的内存地址。SIGSEGV信号通常是由以下两种情况引起的：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.3.1.5.1.1" valign="top" width="25%">错误码（code）</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.3.1.5.1.2" valign="top" width="25%">信号字符串</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.3.1.5.1.3" valign="top" width="25%">解释</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.3.1.5.1.4" valign="top" width="25%">触发原因</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="25%">1</td>         <td class="cellrowborder" valign="top" width="25%">SEGV_MAPERR</td>         <td class="cellrowborder" valign="top" width="25%">不存在的内存地址</td>         <td class="cellrowborder" valign="top" width="25%">进程试图访问一个不存在的内存地址，或者试图访问一个没有映射到进程地址空间的内存地址。这种情况通常是由于程序中的指针错误或内存泄漏引起的。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">2</td>         <td class="cellrowborder" valign="top" width="25%">SEGV_ACCERR</td>         <td class="cellrowborder" valign="top" width="25%">不可访问的内存地址</td>         <td class="cellrowborder" valign="top" width="25%">进程试图访问一个已被操作系统标记为不可访问的内存地址，例如向只读内存写入数据或执行没有执行权限的内存。这种情况通常是由于程序中的缓冲区溢出或者试图修改只读内存等错误引起的。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="信号产生原因分类">信号产生原因分类<i class="anchor-icon anchor-icon-link" anchorid="信号产生原因分类" tips="复制节点链接"></i></h3>          <p>除了以上根据信号值维度分类，还可以根据信号产生的原因维度分类。所有信号值都可以按照信号产生的原因分类，当前已有信号产生原因分类的code值如下：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.5.1.1" valign="top" width="25%">错误码（code）</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.5.1.2" valign="top" width="25%">信号字符串</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.5.1.3" valign="top" width="25%">解释</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.5.1.4" valign="top" width="25%">触发原因</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="25%">0</td>         <td class="cellrowborder" valign="top" width="25%">SI_USER</td>         <td class="cellrowborder" valign="top" width="25%">用户空间信号</td>         <td class="cellrowborder" valign="top" width="25%">由用户空间的进程发送给进程的，通常是通过kill()系统调用发送的。例如，当用户在终端中按下Ctrl+C时，会发送一个SIGINT信号给前台进程组中的所有进程。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">0x80</td>         <td class="cellrowborder" valign="top" width="25%">SI_KERNEL</td>         <td class="cellrowborder" valign="top" width="25%">内核信号</td>         <td class="cellrowborder" valign="top" width="25%">由内核发送给进程的，通常是由内核检测到某些错误或异常情况时发出的。例如，当进程访问无效的内存地址或者执行非法指令时，内核会发送一个SIGSEGV信号给进程。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">-1</td>         <td class="cellrowborder" valign="top" width="25%">SI_QUEUE</td>         <td class="cellrowborder" valign="top" width="25%">sigqueue()函数信号</td>         <td class="cellrowborder" valign="top" width="25%">由sigqueue()系统调用发送的，可以携带一个附加的整数值和一个指针。通常用于进程间高级通信，例如传递数据或者通知进程某个事件已经发生。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">-2</td>         <td class="cellrowborder" valign="top" width="25%">SI_TIMER</td>         <td class="cellrowborder" valign="top" width="25%">定时器信号</td>         <td class="cellrowborder" valign="top" width="25%">由定时器发送的，通常用于定时任务或者周期性任务的执行。例如，当一个定时器到期时，内核会向进程发送一个SIGALRM信号。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">-3</td>         <td class="cellrowborder" valign="top" width="25%">SI_MESGQ</td>         <td class="cellrowborder" valign="top" width="25%">消息队列信号</td>         <td class="cellrowborder" valign="top" width="25%">由消息队列发送的，通常用于进程间通信。例如，当一个进程向一个消息队列发送消息时，内核会向接收进程发送一个MESGQ信号。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">-4</td>         <td class="cellrowborder" valign="top" width="25%">SI_ASYNCIO</td>         <td class="cellrowborder" valign="top" width="25%">异步I/O信号</td>         <td class="cellrowborder" valign="top" width="25%">由异步I/O操作发送的，通常用于非阻塞I/O操作。例如，当一个文件描述符上的I/O操作完成时，内核会向进程发送一个ASYNCIO信号。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">-5</td>         <td class="cellrowborder" valign="top" width="25%">SI_SIGIO</td>         <td class="cellrowborder" valign="top" width="25%">同步I/O信号</td>         <td class="cellrowborder" valign="top" width="25%">由同步I/O操作发送的，通常用于阻塞I/O操作。例如，当一个文件描述符上的I/O操作完成时，内核会向进程发送一个SIGIO信号。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">-6</td>         <td class="cellrowborder" valign="top" width="25%">SI_TKILL</td>         <td class="cellrowborder" valign="top" width="25%">tkill()函数信号</td>         <td class="cellrowborder" valign="top" width="25%">由tkill()系统调用发送的，与kill()系统调用类似，但是可以指定发送信号的线程ID。通常用于多线程程序中，向指定线程发送信号。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="约束与限制">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="约束与限制" tips="复制节点链接"></i></h2>          <ul>      <li>       <p>不建议进程自己注册信号处理函数，进程崩溃后可能会延迟退出，当处理时间超过5s可能会导致进程无响应问题上报</p></li>      <li>       <p>“/data/log/faultlog/faultlogger”目录下同一进程/应用最多保存10份cppcrash日志，日志数量超限时会从最早生成该进程/应用的cppcrash日志开始删除直至数量不超限。建议开发者在开发调试阶段及时查看cppcrash日志，避免因cppcrash日志被删除而无法获取崩溃信息。</p></li>      <li>       <p>上述崩溃信号和35、38、42信号已经被系统注册信号处理函数，建议应用不要对这些信号注册信号处理函数，如果应用注册了可能会造成系统检测能力失效。</p></li>      <li>       <p>异步线程栈跟踪维测功能仅在ARM 64位系统且应用在debug模式下开启，崩溃日志规格请参见<a href="/consumer/cn/doc/harmonyos-guides/cppcrash-guidelines#异步线程栈跟踪故障场景日志规格">异步线程栈跟踪故障场景日志规格</a>。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="日志获取">日志获取<i class="anchor-icon anchor-icon-link" anchorid="日志获取" tips="复制节点链接"></i></h2>          <p>进程崩溃日志是故障日志中的一种，可通过以下方式获取：</p>     <p><strong>方式一：通过DevEco Studio获取日志</strong></p>     <p>DevEco Studio会收集设备“/data/log/faultlog/faultlogger/”路径下的进程崩溃故障日志到FaultLog下，根据进程名和故障类型分类显示。获取日志的方法参见：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-fault-log" target="_blank">DevEco Studio使用指南-FaultLog</a>。</p>     <p><strong>方式二：通过HiAppEvent接口订阅</strong></p>     <p>HiAppEvent给开发者提供了故障订阅接口，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-intro">HiAppEvent介绍</a>。参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-crash-events-arkts">订阅崩溃事件（ArkTS）</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-crash-events-ndk">订阅崩溃事件（C/C++）</a>完成崩溃事件订阅，并通过事件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-crash-events#事件字段说明">external_log</a>字段读取故障日志文件内容。</p>     <p><strong>方式三：通过hdc获取日志，需打开开发者选项</strong></p>     <p>在开发者选项打开的情况下，开发者可以通过“hdc file recv /data/log/faultlog/faultlogger D:\”命令导出故障日志到本地，故障日志文件名格式为：cppcrash-进程名-进程UID-毫秒级时间.log。</p>    </div>    <div class="tiledSection">     <h2 id="日志规格">日志规格<i class="anchor-icon anchor-icon-link" anchorid="日志规格" tips="复制节点链接"></i></h2>          <p>故障日志的字段信息表如下：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.3.1.6.1.1" valign="top" width="20%">字段</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.3.1.6.1.2" valign="top" width="20%">描述</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.3.1.6.1.3" valign="top" width="20%">起始API版本</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.3.1.6.1.4" valign="top" width="20%">是否必选项</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.3.1.6.1.5" valign="top" width="20%">非必选说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="20%">Device info</td>         <td class="cellrowborder" valign="top" width="20%">设备信息</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Build info</td>         <td class="cellrowborder" valign="top" width="20%">版本信息</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Fingerprint</td>         <td class="cellrowborder" valign="top" width="20%">故障特征，聚类同类问题的哈希值</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Enabled app log configs</td>         <td class="cellrowborder" valign="top" width="20%">使能的配置参数列表</td>         <td class="cellrowborder" valign="top" width="20%">20</td>         <td class="cellrowborder" valign="top" width="20%">否</td>         <td class="cellrowborder" valign="top" width="20%">仅用户配置时打印，详见<a href="/consumer/cn/doc/harmonyos-guides/cppcrash-guidelines#应用通过hiappevent设置崩溃日志配置参数场景日志规格">应用通过HiAppEvent设置崩溃日志配置参数场景日志规格</a>。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Module name</td>         <td class="cellrowborder" valign="top" width="20%">模块名</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Version</td>         <td class="cellrowborder" valign="top" width="20%">应用版本号(点分格式)</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">否</td>         <td class="cellrowborder" valign="top" width="20%">仅在应用进程提供。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">VersionCode</td>         <td class="cellrowborder" valign="top" width="20%">应用版本号(整数格式)</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">否</td>         <td class="cellrowborder" valign="top" width="20%">仅在应用进程提供。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">PreInstalled</td>         <td class="cellrowborder" valign="top" width="20%">是否预制应用</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">否</td>         <td class="cellrowborder" valign="top" width="20%">仅在应用进程提供。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Foreground</td>         <td class="cellrowborder" valign="top" width="20%">前后台状态</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">否</td>         <td class="cellrowborder" valign="top" width="20%">仅在应用进程提供。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Page switch history</td>         <td class="cellrowborder" valign="top" width="20%">页面切换轨迹</td>         <td class="cellrowborder" valign="top" width="20%">20</td>         <td class="cellrowborder" valign="top" width="20%">否</td>         <td class="cellrowborder" valign="top" width="20%">如果维测服务进程出现故障或未缓存切换轨迹，则不包含此字段，详见<a href="/consumer/cn/doc/harmonyos-guides/cppcrash-guidelines#实现原理">实现原理</a>。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Timestamp</td>         <td class="cellrowborder" valign="top" width="20%">故障发生时间戳</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Pid</td>         <td class="cellrowborder" valign="top" width="20%">进程号</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Uid</td>         <td class="cellrowborder" valign="top" width="20%">用户ID</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">HiTraceId</td>         <td class="cellrowborder" valign="top" width="20%">HiTraceChain唯一跟踪标识</td>         <td class="cellrowborder" valign="top" width="20%">20</td>         <td class="cellrowborder" valign="top" width="20%">否</td>         <td class="cellrowborder" valign="top" width="20%">进程开启HiTraceChain功能，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h" target="_blank">HiTraceId</a>。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Process name</td>         <td class="cellrowborder" valign="top" width="20%">故障进程名</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Process life time</td>         <td class="cellrowborder" valign="top" width="20%">故障进程存活时间</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Process Memory(kB)</td>         <td class="cellrowborder" valign="top" width="20%">故障进程内存占用</td>         <td class="cellrowborder" valign="top" width="20%">20</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Device Memory(kB)</td>         <td class="cellrowborder" valign="top" width="20%">整机内存状态</td>         <td class="cellrowborder" valign="top" width="20%">20</td>         <td class="cellrowborder" valign="top" width="20%">否</td>         <td class="cellrowborder" valign="top" width="20%">依赖维测服务进程，若发生故障时维测服务进程停止或设备重启则无此字段，详见<a href="/consumer/cn/doc/harmonyos-guides/cppcrash-guidelines#实现原理">实现原理</a>。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Reason</td>         <td class="cellrowborder" valign="top" width="20%">故障原因</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">LastFatalMessage</td>         <td class="cellrowborder" valign="top" width="20%">应用记录的最后一条Fatal级日志</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">否</td>         <td class="cellrowborder" valign="top" width="20%">进程主动abort，hilog中打印包含最后一条Fatal日志时。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Fault thread info</td>         <td class="cellrowborder" valign="top" width="20%">故障线程信息</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">SubmitterStacktrace</td>         <td class="cellrowborder" valign="top" width="20%">提交者线程栈</td>         <td class="cellrowborder" valign="top" width="20%">12</td>         <td class="cellrowborder" valign="top" width="20%">否</td>         <td class="cellrowborder" valign="top" width="20%">异步线程栈跟踪维测功能仅在ARM 64位系统环境下对debug版本应用开启。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Registers</td>         <td class="cellrowborder" valign="top" width="20%">故障现场寄存器</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Other thread info</td>         <td class="cellrowborder" valign="top" width="20%">其他线程信息</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Memory near registers</td>         <td class="cellrowborder" valign="top" width="20%">故障现场寄存器附近内存值</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">FaultStack</td>         <td class="cellrowborder" valign="top" width="20%">故障线程栈内存信息</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Maps</td>         <td class="cellrowborder" valign="top" width="20%">故障时进程的内存空间</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">OpenFiles</td>         <td class="cellrowborder" valign="top" width="20%">故障时进程持有的文件句柄信息</td>         <td class="cellrowborder" valign="top" width="20%">12</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">HiLog</td>         <td class="cellrowborder" valign="top" width="20%">故障之前打印的流水日志，最多1000行</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">[truncated]</td>         <td class="cellrowborder" valign="top" width="20%">故障日志截断标志</td>         <td class="cellrowborder" valign="top" width="20%">20</td>         <td class="cellrowborder" valign="top" width="20%">否</td>         <td class="cellrowborder" valign="top" width="20%">配置故障日志截断大小并发生截断时。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从<strong>API version 20</strong>开始，故障现场寄存器中新增状态寄存器pstate和esr。</p>      </div></div></div>     <p>不同的故障场景中日志规格略有不同，分以下七个场景的日志规格，示例如下：</p>     <ul>      <li>       <p><a href="/consumer/cn/doc/harmonyos-guides/cppcrash-guidelines#一般故障场景日志规格">一般故障场景日志规格</a></p></li>      <li>       <p><a href="/consumer/cn/doc/harmonyos-guides/cppcrash-guidelines#空指针解引用故障场景日志规格">空指针解引用故障场景日志规格</a></p></li>      <li>       <p><a href="/consumer/cn/doc/harmonyos-guides/cppcrash-guidelines#栈溢出故障场景日志规格">栈溢出故障场景日志规格</a></p></li>      <li>       <p><a href="/consumer/cn/doc/harmonyos-guides/cppcrash-guidelines#栈覆盖故障场景日志规格">栈覆盖故障场景日志规格</a></p></li>      <li>       <p><a href="/consumer/cn/doc/harmonyos-guides/cppcrash-guidelines#异步线程栈跟踪故障场景日志规格">异步线程栈跟踪故障场景日志规格</a></p></li>      <li>       <p><a href="/consumer/cn/doc/harmonyos-guides/cppcrash-guidelines#应用通过hiappevent设置崩溃日志配置参数场景日志规格">应用通过HiAppEvent设置崩溃日志配置参数场景日志规格</a></p></li>      <li>       <p><a href="/consumer/cn/doc/harmonyos-guides/cppcrash-guidelines#有页面切换轨迹的故障场景日志规格">有页面切换轨迹的故障场景日志规格</a></p></li>     </ul>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>以下崩溃日志示例中"&lt;-"右边的文字不是日志内容，是用来解释日志格式的说明文字。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="一般故障场景日志规格" class="firsth2">一般故障场景日志规格<i class="anchor-icon anchor-icon-link" anchorid="一般故障场景日志规格" tips="复制节点链接"></i></h3>          <p>本节主要介绍崩溃日志的一般日志规格，其余节介绍特殊场景下日志规格，以下是一份DevEco Studio归档在FaultLog的进程崩溃日志的核心内容。</p>     <div _ngcontent-fur-c106="" class="highlight-div"><div _ngcontent-fur-c106="" class="highlight-div-header"><div _ngcontent-fur-c106="" class="highlight-div-header-left"><div _ngcontent-fur-c106="" class="handle-button expand-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fur-c106="" class="highlight-div-header-right"><div _ngcontent-fur-c106="" class="handle-button ai-button"></div><div _ngcontent-fur-c106="" class="handle-button line-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fur-c106="" class="handle-button theme-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fur-c106="" class="handle-button copy-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fur-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>Generated by HiviewDFX@HarmonyOS</li><li>================================================================</li><li>Device info:HarmonyOS 3.2   &lt;- 设备信息</li><li>Build info:HarmonyOS 5.1.0.101 &lt;- 版本信息</li><li>Fingerprint:a27608aa3ce72b14c242ff04332a122b7bb629b85771a051f25fb1af8c90b613 &lt;- 标识故障特征</li><li>Module name:crasher_cpp &lt;- 模块名</li><li>Timestamp:2017-08-06 21:52:51.000 &lt;- 故障发生时间戳</li><li>Pid:10208 &lt;- 进程号</li><li>Uid:0     &lt;- 用户ID</li><li>HiTraceId:a92ab1c7eae68fa  &lt;- HiTraceId(非必选，进程无HiTraceId不打印)</li><li>Process name:./crasher_cpp &lt;- 进程名称</li><li>Process life time:1s  &lt;- 进程存活时间</li><li>Process Memory(kB): 11902(Rss)     &lt;- 进程占用内存</li><li>Device Memory(kB): Total 1935820, Free 516244, Available 1205608 &lt;- 整机内存状态（非必选）</li><li>Reason:Signal:SIGSEGV(SI_TKILL)@0x000027e0 from:10208:0 &lt;- 故障原因，详见信号值说明</li><li>Fault thread info:           &lt;- 故障线程信息</li><li>Tid:10208, Name:crasher_cpp  &lt;- 故障线程号，线程名</li><li>#00 pc 000e8400 /system/lib/ld-musl-arm.so.1(raise+176)(a40044d0acb68107cfc4adb5049c0725) &lt;- 调用栈，调用顺序#06-&gt;#05-&gt;...-&gt;#00，最终在#00的函数中发生崩溃</li><li>#01 pc 00006e95 /data/crasher_cpp(DfxCrasher::RaiseSegmentFaultException()+92)(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>#02 pc 00008909 /data/crasher_cpp(DfxCrasher::ParseAndDoCrash(char const*) const+612)(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>#03 pc 00008bed /data/crasher_cpp(main+104)(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>#04 pc 00073370 /system/lib/ld-musl-arm.so.1(libc_start_main_stage2+72)(a40044d0acb68107cfc4adb5049c0725)</li><li>#05 pc 00005ad8 /data/crasher_cpp(_start_c+84)(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>#06 pc 00005a7c /data/crasher_cpp(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>Registers:  &lt;- 故障现场寄存器</li><li>r0:00000000 r1:ffc09854 r2:00000000 r3:00000008</li><li>r4:00000000 r5:fffff000 r6:0000000a r7:000000af</li><li>r8:ffc09919 r9:ffc09930 r10:00000000</li><li>fp:ffc098e8 ip:005b76e4 sp:ffc09850 lr:005ade99 pc:f7bb0400</li><li>cpsr:20870010           &lt;-  状态寄存器值（arm32架构为cpsr，aarch64架构为pstate和esr）</li><li>Other thread info:      &lt;- 其他线程信息</li><li>Tid:10209, Name:crasher_cpp &lt;- 线程号，线程名</li><li>#00 pc 00116974 /system/lib/ld-musl-arm.so.1(sleep+132)(a40044d0acb68107cfc4adb5049c0725) &lt;- 调用栈</li><li>#01 pc 0000a137 /data/crasher_cpp(void* std::__h::__thread_proxy[abi:v15004]&lt;std::__h::tuple&lt;std::__h::unique_ptr&lt;std::__h::__thread_struct, std::__h::default_delete&lt;std::__h::__thread_struct&gt;&gt;, DfxCrasher::MultiThreadCrash()::$_1&gt;&gt;(void*)+122)(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>#02 pc 00109104 /system/lib/ld-musl-arm.so.1(start+248)(a40044d0acb68107cfc4adb5049c0725)</li><li>#03 pc 00074134 /system/lib/ld-musl-arm.so.1(a40044d0acb68107cfc4adb5049c0725)</li><li>Memory near registers:  &lt;-  故障现场寄存器的地址（地址必须在有效内存中）附近内存值，括号表示寄存器里的地址是在哪一段内存中</li><li>r1([stack]):          &lt;- 故障现场r1寄存器的地址附近内存值</li><li>    ffc0984c f7bd8348</li><li>    ffc09850 7467a186</li><li>    ffc09854 00000000</li><li>    ffc09858 00000000</li><li>    ...</li><li>r8([stack]):</li><li>    ffc09910 005b51b8</li><li>    ffc09914 ffc09964</li><li>    ffc09918 4749530e</li><li>    ffc0991c 56474553</li><li>    ffc09920 00000000</li><li>    ...</li><li>r9([stack]):</li><li>    ffc09928 005b51a4</li><li>    ffc0992c 00000000</li><li>    ffc09930 005b51f0</li><li>    ffc09934 f7756e08</li><li>    ...</li><li>fp([stack]):</li><li>    ffc098e0 0000000a</li><li>    ffc098e4 ffc09919</li><li>    ffc098e8 005b51a4</li><li>    ffc098ec 005ade99</li><li>    ...</li><li>r12(/data/crasher_cpp):</li><li>    005b76dc f76ee7f4</li><li>    005b76e0 f76ee7dc</li><li>    005b76e4 f7bb0350</li><li>    005b76e8 f75c83e5</li><li>    ...</li><li>sp([stack]):</li><li>    ffc09848 ffc09870</li><li>    ffc0984c f7bd8348</li><li>    ffc09850 7467a186</li><li>    ffc09854 00000000</li><li>    ...</li><li>lr(/data/crasher_cpp):</li><li>    005ade90 200befc0</li><li>    005ade94 ed8cf005</li><li>    005ade98 49099801</li><li>    005ade9c 68094479</li><li>    ...</li><li>pc(/system/lib/ld-musl-arm.so.1):</li><li>    f7bb03f8 e3a03008</li><li>    f7bb03fc ef000000</li><li>    f7bb0400 e51b0014</li><li>    f7bb0404 e59f1024</li><li>    ...</li><li>FaultStack: &lt;- 崩溃线程的栈地址空间</li><li>    ffc09810 00000001</li><li>    ffc09814 00000001</li><li>    ...</li><li>sp0:ffc09850 7467a186 &lt;- #00层栈帧顶部位置</li><li>    ffc09854 00000000</li><li>    ...</li><li>sp1:ffc098f0 f7756e08</li><li>    ffc098f4 7467a186</li><li>    ...</li><li>sp2:ffc09908 00000000</li><li>    ffc0990c 005b51f0</li><li>    ...</li><li>sp3:ffc099f0 ffc09a44</li><li>    ffc099f4 7467a186</li><li>    ...</li><li>    ffc09a00 005afb85</li><li>    ffc09a04 f7b3b374</li><li>    ffc09a08 ffc09a44</li><li>    ffc09a0c 00000000</li><li>    ffc09a10 00000000</li><li>    ffc09a14 f7aeec24</li><li>    ffc09a18 ffc09a38</li><li>    ffc09a1c 005acadc</li><li>    ffc09a20 005b38d0</li><li>    ffc09a24 00000000</li><li>    ffc09a28 00000000</li><li>    ffc09a2c ffc09a44</li><li>    ffc09a30 00000002</li><li>    ffc09a34 ffc09a40</li><li>    ffc09a38 00000000</li><li>    ffc09a3c 005aca80</li><li>sp5:ffc09a40 00000002</li><li>    ffc09a44 ffc09e25</li><li>    ...</li><li>
</li><li>Maps: &lt;- 故障时进程的内存空间</li><li>5a7000-5ac000 r--p 00000000 /data/crasher_cpp</li><li>5ac000-5b5000 r-xp 00004000 /data/crasher_cpp</li><li>5b5000-5b8000 r--p 0000c000 /data/crasher_cpp</li><li>5b8000-5b9000 rw-p 0000e000 /data/crasher_cpp</li><li>2290000-2291000 ---p 00000000 [heap]</li><li>2291000-2293000 rw-p 00000000 [heap]</li><li>...</li><li>f7ac4000-f7ac5000 r-xp 00000000 [sigpage]</li><li>f7ac5000-f7ac7000 r--p 00000000 [vvar]</li><li>f7ac7000-f7ac8000 r-xp 00000000 [vdso]</li><li>f7ac8000-f7b22000 r--p 00000000 /system/lib/ld-musl-arm.so.1</li><li>f7b22000-f7bec000 r-xp 00059000 /system/lib/ld-musl-arm.so.1</li><li>f7bec000-f7bee000 r--p 00122000 /system/lib/ld-musl-arm.so.1</li><li>f7bee000-f7bf0000 rw-p 00123000 /system/lib/ld-musl-arm.so.1</li><li>f7bf0000-f7c00000 rw-p 00000000 [anon:ld-musl-arm.so.1.bss]</li><li>ffbe9000-ffc0a000 rw-p 00000000 [stack]</li><li>ffff0000-ffff1000 r-xp 00000000 [vectors]</li><li>OpenFiles: &lt;- 故障时进程持有文件句柄信息</li><li>0-&gt;/dev/pts/0 native object of unknown type 0</li><li>1-&gt;/dev/pts/0 native object of unknown type 0</li><li>2-&gt;/dev/pts/0 native object of unknown type 0</li><li>3-&gt;socket:[102975] native object of unknown type 0</li><li>9-&gt;socket:[13080] native object of unknown type 0</li><li>14-&gt;/dev/console native object of unknown type 0</li><li>
</li><li>HiLog: &lt;- 故障之前进程打印的流水日志</li><li>08-06 21:52:51.212 10208 10208 E C03f00/MUSL-SIGCHAIN: signal_chain_handler call 2 rd sigchain action for signal: 11 sca_sigaction=f7b3e638 noreturn=0 FREEZE_signo_11 thread_list_lock_status:-1 tl_lock_count=0 tl_lock_waiters=0 tl_lock_tid_fail=-1 tl_lock_count_tid=-1 tl_lock_count_fail=-10000 tl_lock_count_tid_sub=-1 thread_list_lock_after_lock=-1 thread_list_lock_pre_unlock=-1 thread_list_lock_pthread_exit=-1 thread_list_lock_tid_overlimit=-1 tl_lock_unlock_count=0 __pthread_gettid_np_tl_lock=0 __pthread_exit_tl_lock=0 __pthread_create_tl_lock=0 __pthread_key_delete_tl_lock=0 __synccall_tl_lock=0 __membarrier_tl_lock=0 install_new_tls_tl_lock=0 set_syscall_hooks_tl_lock=0 set_syscall_hooks_linux_tl_lock=0 fork_tl_lock=0</li><li>08-06 21:52:51.212 10208 10208 I C02d11/DfxSignalHandler: DFX_SigchainHandler :: signo(11), si_code(-6), pid(10208), tid(10208).</li><li>08-06 21:52:51.212 10208 10208 I C02d11/DfxSignalHandler: DFX_SigchainHandler :: signo(11), pid(10208), processName(./crasher_cpp),         threadName(crasher_cpp).</li></ol></pre></div></div>     <p><strong>HiTraceId说明</strong></p>     <p>HiTraceId：HiTraceChain提供的唯一跟踪标识，参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-trace-h" target="_blank">HiTraceId</a>。</p>     <p><strong>调用栈帧内容说明</strong></p>     <p>以三层调用栈为例，详细解释调用栈帧内容：</p>     <div _ngcontent-fur-c106="" class="highlight-div"><div _ngcontent-fur-c106="" class="highlight-div-header"><div _ngcontent-fur-c106="" class="highlight-div-header-left"><div _ngcontent-fur-c106="" class="handle-button expand-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fur-c106="" class="highlight-div-header-right"><div _ngcontent-fur-c106="" class="handle-button ai-button"></div><div _ngcontent-fur-c106="" class="handle-button line-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fur-c106="" class="handle-button theme-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fur-c106="" class="handle-button copy-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fur-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>#00 pc 000e8400 /system/lib/ld-musl-arm.so.1(raise+176)(a40044d0acb68107cfc4adb5049c0725)</li><li>#01 pc 00006e95 /data/crasher_cpp(DfxCrasher::RaiseSegmentFaultException()+92)(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>#02 pc 00008909 /data/crasher_cpp(DfxCrasher::ParseAndDoCrash(char const*) const+612)(d6cead5be17c9bb7eee2a9b4df4b7626)</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.7.1.1" valign="top" width="16.666666666666664%">序号</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.7.1.2" valign="top" width="16.666666666666664%">pc在文件内的偏移字节数</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.7.1.3" valign="top" width="16.666666666666664%">pc属于内存段的文件名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.7.1.4" valign="top" width="16.666666666666664%">函数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.7.1.5" valign="top" width="16.666666666666664%">函数内偏移的字节数</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.7.1.6" valign="top" width="16.666666666666664%">BuildID</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="16.666666666666664%">#00</td>         <td class="cellrowborder" valign="top" width="16.666666666666664%">000e8400</td>         <td class="cellrowborder" valign="top" width="16.666666666666664%">/system/lib/ld-musl-arm.so.1</td>         <td class="cellrowborder" valign="top" width="16.666666666666664%">raise</td>         <td class="cellrowborder" valign="top" width="16.666666666666664%">176</td>         <td class="cellrowborder" valign="top" width="16.666666666666664%">a40044d0acb68107cfc4adb5049c0725</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="16.666666666666664%">#01</td>         <td class="cellrowborder" valign="top" width="16.666666666666664%">00006e95</td>         <td class="cellrowborder" valign="top" width="16.666666666666664%">/data/crasher_cpp</td>         <td class="cellrowborder" valign="top" width="16.666666666666664%">DfxCrasher::RaiseSegmentFaultException()</td>         <td class="cellrowborder" valign="top" width="16.666666666666664%">92</td>         <td class="cellrowborder" valign="top" width="16.666666666666664%">d6cead5be17c9bb7eee2a9b4df4b7626</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="16.666666666666664%">#02</td>         <td class="cellrowborder" valign="top" width="16.666666666666664%">00008909</td>         <td class="cellrowborder" valign="top" width="16.666666666666664%">/data/crasher_cpp</td>         <td class="cellrowborder" valign="top" width="16.666666666666664%">DfxCrasher::ParseAndDoCrash(char const*) const</td>         <td class="cellrowborder" valign="top" width="16.666666666666664%">612</td>         <td class="cellrowborder" valign="top" width="16.666666666666664%">d6cead5be17c9bb7eee2a9b4df4b7626</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>         <p>文件名也有可能是匿名内存映射，比如[heap]、[stack]等。</p></li>        <li>         <p>日志没有打印函数名可能是由于以下两种原因：</p>         <ol>          <li>           <p>二进制文件中没有保存该函数名信息。</p></li>          <li>           <p>二进制文件中保存的函数名长度超过256字节。</p></li>         </ol></li>        <li>         <p>函数名是通过解析二进制符号表和<a href="https://sourceware.org/gdb/current/onlinedocs/gdb.html/MiniDebugInfo.html" target="_blank">MiniDebugInfo</a>得来，<strong>可能会随版本函数名变更、编译优化等原因而改变</strong>。</p></li>        <li>         <p>如果没打印BuildID，可以通过readelf -n xxx.so确认二进制是否有BuildID。如果没有则尝试在编译选项里增加编译参数--enable-linker-build-id，同时注意编译选项中不要加编译参数--build-id=none。</p></li>       </ul>      </div></div></div>     <p><strong>JS混合栈帧内容说明</strong></p>     <p>ARM 64位系统支持抓取CPP和JS之间跨语言的调用栈，因此如果在函数调用链上有JS代码，崩溃日志还会打印如下格式的JS代码调用栈：</p>     <div _ngcontent-fur-c106="" class="highlight-div"><div _ngcontent-fur-c106="" class="highlight-div-header"><div _ngcontent-fur-c106="" class="highlight-div-header-left"><div _ngcontent-fur-c106="" class="handle-button expand-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fur-c106="" class="highlight-div-header-right"><div _ngcontent-fur-c106="" class="handle-button ai-button"></div><div _ngcontent-fur-c106="" class="handle-button line-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fur-c106="" class="handle-button theme-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fur-c106="" class="handle-button copy-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fur-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>#00 at onPageShow (entry|har1|1.0.0|src/main/ets/pages/Index.ts:7:13)</li></ol></pre></div></div>     <p>详细说明<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/jscrash-guidelines#异常代码调用栈格式">JS异常代码调用栈格式规范</a>。</p>    </div>    <div class="tiledSection">     <h3 id="空指针解引用故障场景日志规格">空指针解引用故障场景日志规格<i class="anchor-icon anchor-icon-link" anchorid="空指针解引用故障场景日志规格" tips="复制节点链接"></i></h3>          <p>空指针解引用通常有以下两个常见的场景：</p>     <p>1.形如SIGSEGV(SEGV_MAPERR)@0x00000000或cppcrash日志的Register中打印的r0，r1等传参寄存器的值为0，应首先考虑调用时是否传入了空指针。</p>     <p>2.形如SIGSEGV(SEGV_MAPERR)@0x0000000c（小于一个内存页大小）或cppcrash日志Register中打印的r1等传参寄存器的值为一个很小的值时应考虑调用入参的结构体成员是否包含空指针。</p>     <p>该场景会在日志中打印出提示信息，表明故障很有可能是因为空指针解引用导致。以下是一份DevEco Studio归档在FaultLog的进程崩溃日志的核心内容。</p>     <div _ngcontent-fur-c106="" class="highlight-div"><div _ngcontent-fur-c106="" class="highlight-div-header"><div _ngcontent-fur-c106="" class="highlight-div-header-left"><div _ngcontent-fur-c106="" class="handle-button expand-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fur-c106="" class="highlight-div-header-right"><div _ngcontent-fur-c106="" class="handle-button ai-button"></div><div _ngcontent-fur-c106="" class="handle-button line-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fur-c106="" class="handle-button theme-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fur-c106="" class="handle-button copy-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fur-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>Generated by HiviewDFX@HarmonyOS</li><li>================================================================</li><li>Device info:HarmonyOS 3.2        &lt;- 设备信息</li><li>Build info:HarmonyOS 5.0.0.23    &lt;- 版本信息</li><li>Fingerprint:cdf52fd0cc328fc432459928f3ed8edfe8a72a92ee7316445143bed179138073 &lt;- 标识故障特征</li><li>Module name:crasher_cpp            &lt;- 模块名</li><li>Timestamp:2024-05-06 20:10:51.000  &lt;- 故障发生时间戳</li><li>Pid:9623   &lt;- 进程号</li><li>Uid:0         &lt;- 用户ID</li><li>HiTraceId:a92ab1c7eae68fa  &lt;- HiTraceId(非必选，进程无HiTraceId不打印)</li><li>Process name:./crasher_cpp         &lt;- 进程名称</li><li>Process life time:1s               &lt;- 进程存活时间</li><li>Process Memory(kB): 11902(Rss)     &lt;- 进程占用内存</li><li>Device Memory(kB): Total 1935820, Free 516244, Available 1205608 &lt;- 整机内存状态（非必选）</li><li>Reason:Signal:SIGSEGV(SEGV_MAPERR)@0x00000004  probably caused by NULL pointer dereference   &lt;- 故障原因和空指针提示</li><li>Fault thread info:</li><li>Tid:9623, Name:crasher_cpp         &lt;- 故障线程号，线程名</li><li>#00 pc 00008d22 /system/bin/crasher_cpp(TestNullPointerDereferenceCrash0()+22)(adfc673300571d2da1e47d1d12f48b44)  &lt;- 调用栈</li><li>#01 pc 000064d1 /system/bin/crasher_cpp(DfxCrasher::ParseAndDoCrash(char const*) const+160)(adfc673300571d2da1e47d1d12f48b44)</li><li>#02 pc 00006569 /system/bin/crasher_cpp(main+92)(adfc673300571d2da1e47d1d12f48b44)</li><li>#03 pc 00072b98 /system/lib/ld-musl-arm.so.1(libc_start_main_stage2+56)(d820b1827e57855d4f9ed03ba5dfea83)</li><li>#04 pc 00004e28 /system/bin/crasher_cpp(_start_c+84)(adfc673300571d2da1e47d1d12f48b44)</li><li>#05 pc 00004dcc /system/bin/crasher_cpp(adfc673300571d2da1e47d1d12f48b44)</li><li>Registers:   &lt;- 故障现场寄存器</li><li>r0:ffffafd2 r1:00000004 r2:00000001 r3:00000000</li><li>r4:ffd27e39 r5:0096e000 r6:00000a40 r7:0096fdfc</li><li>r8:f7ba58d5 r9:f7baea86 r10:f7cadd38</li><li>fp:ffd27308 ip:f7cb2078 sp:ffd272a0 lr:f7c7ab98 pc:0096ad22</li><li>cpsr:20870010           &lt;-  状态寄存器值（arm32架构为cpsr，aarch64架构为pstate和esr）</li><li>...</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="栈溢出故障场景日志规格">栈溢出故障场景日志规格<i class="anchor-icon anchor-icon-link" anchorid="栈溢出故障场景日志规格" tips="复制节点链接"></i></h3>          <p>以下三种场景可能出现栈溢出：</p>     <ul>      <li>       <p>递归调用时未设置递归终止条件导致栈内存耗尽。</p></li>      <li>       <p>局部变量占用过多栈内存导致栈内存耗尽。</p></li>      <li>       <p>在信号栈中使用超过系统限制的栈内存。</p></li>     </ul>     <p>以递归调用时未设置递归终止条件导致栈内存耗尽为例，示例代码如下：</p>     <div _ngcontent-fur-c106="" class="highlight-div"><div _ngcontent-fur-c106="" class="highlight-div-header"><div _ngcontent-fur-c106="" class="highlight-div-header-left"><div _ngcontent-fur-c106="" class="handle-button expand-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fur-c106="" class="highlight-div-header-right"><div _ngcontent-fur-c106="" class="handle-button ai-button"></div><div _ngcontent-fur-c106="" class="handle-button line-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fur-c106="" class="handle-button theme-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fur-c106="" class="handle-button copy-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fur-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> *<span class="hljs-title class_">DoStackOverflow</span>(<span class="hljs-keyword">void</span> * inputArg) <span class="hljs-title function_">__attribute__</span>(<span class="hljs-params">(optnone)</span>)</li><li>{</li><li>    int b[<span class="hljs-number">10</span>] = {<span class="hljs-number">1</span>};</li><li>    <span class="hljs-keyword">if</span> (b[<span class="hljs-number">0</span>] == <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-keyword">return</span> static_cast&lt;<span class="hljs-keyword">void</span>*&gt;(b + <span class="hljs-number">9</span>); <span class="hljs-comment">// 9: last element of array</span></li><li>    }</li><li>    <span class="hljs-title class_">DoStackOverflow</span>(inputArg); <span class="hljs-comment">// 多次递归调用，导致栈内存耗尽后在栈的范围外进行内存的读写，产生崩溃。</span></li><li>    <span class="hljs-keyword">return</span> static_cast&lt;<span class="hljs-keyword">void</span>*&gt;(b + <span class="hljs-number">9</span>); <span class="hljs-comment">// 9: last element of array</span></li><li>}</li></ol></pre></div></div>     <p>该场景会在日志中打印出提示信息，表明故障很有可能是由于栈溢出导致。以下是一份DevEco Studio归档在FaultLog的进程崩溃日志的核心内容。</p>     <div _ngcontent-fur-c106="" class="highlight-div"><div _ngcontent-fur-c106="" class="highlight-div-header"><div _ngcontent-fur-c106="" class="highlight-div-header-left"><div _ngcontent-fur-c106="" class="handle-button expand-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fur-c106="" class="highlight-div-header-right"><div _ngcontent-fur-c106="" class="handle-button ai-button"></div><div _ngcontent-fur-c106="" class="handle-button line-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fur-c106="" class="handle-button theme-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fur-c106="" class="handle-button copy-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fur-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>Generated by HiviewDFX@HarmonyOS</li><li>================================================================</li><li>Device info:HarmonyOS 3.2            &lt;- 设备信息</li><li>Build info:HarmonyOS 5.0.0.23        &lt;- 版本信息</li><li>Fingerprint:8bc3343f50024204e258b8dce86f41f8fcc50c4d25d56b24e71fe26c0a23e321  &lt;- 标识故障特征</li><li>Module name:crasher_cpp                &lt;- 模块名</li><li>Timestamp:2024-05-06 20:18:24.000      &lt;- 故障发生时间戳</li><li>Pid:9838                               &lt;- 进程号</li><li>Uid:0                                  &lt;- 用户ID</li><li>HiTraceId:a92ab1c7eae68fa  &lt;- HiTraceId(非必选，进程无HiTraceId不打印)</li><li>Process name:./crasher_cpp             &lt;- 进程名称</li><li>Process life time:2s                   &lt;- 进程存活时间</li><li>Process Memory(kB): 11902(Rss)     &lt;- 进程占用内存</li><li>Device Memory(kB): Total 1935820, Free 516244, Available 1205608 &lt;- 整机内存状态（非必选）</li><li>Reason:Signal:SIGSEGV(SEGV_ACCERR)@0xf76b7ffc  current thread stack low address = 0xf76b8000, probably caused by stack-buffer-overflow    &lt;- 故障原因和栈溢出提示</li><li>Tid:10343, Name:crasher_cpp</li><li>#00 pc 000072e6 /data/crasher_cpp(DoStackOverflow(void*)+30)(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>#01 pc 00007305 /data/crasher_cpp(DoStackOverflow(void*)+60)(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>#02 pc 00007305 /data/crasher_cpp(DoStackOverflow(void*)+60)(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>#03 pc 00007305 /data/crasher_cpp(DoStackOverflow(void*)+60)(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>#04 pc 00007305 /data/crasher_cpp(DoStackOverflow(void*)+60)(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>#05 pc 00007305 /data/crasher_cpp(DoStackOverflow(void*)+60)(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>...</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="栈覆盖故障场景日志规格">栈覆盖故障场景日志规格<i class="anchor-icon anchor-icon-link" anchorid="栈覆盖故障场景日志规格" tips="复制节点链接"></i></h3>          <p>栈覆盖故障场景是指业务代码运行时改写了原本保存函数调用信息的栈内存，导致无法成功回溯调用栈。系统在回栈失败后尽可能提供开发者信息以分析问题，该场景会在日志中打印信息提示从#xx开始尝试从线程栈内存里解析不可靠的调用栈。之所以说不可靠的调用栈，是因为调用栈可能不是一个完整的函数调用链路，从#xx层往下的调用栈是不可靠的，意味着从#xx层开始相邻两层栈之间可能不存在调用关系，需要开发者结合业务代码分析其中的调用链路，比如下例中正确的调用关系是#05-&gt;#04-&gt;#03-&gt;#01。以下是一份DevEco Studio归档在FaultLog的进程崩溃日志的核心内容。</p>     <div _ngcontent-fur-c106="" class="highlight-div"><div _ngcontent-fur-c106="" class="highlight-div-header"><div _ngcontent-fur-c106="" class="highlight-div-header-left"><div _ngcontent-fur-c106="" class="handle-button expand-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fur-c106="" class="highlight-div-header-right"><div _ngcontent-fur-c106="" class="handle-button ai-button"></div><div _ngcontent-fur-c106="" class="handle-button line-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fur-c106="" class="handle-button theme-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fur-c106="" class="handle-button copy-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fur-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>Generated by HiviewDFX@HarmonyOS</li><li>================================================================</li><li>Device info:HarmonyOS 3.2               &lt;- 设备信息</li><li>Build info:HarmonyOS 5.0.0.23           &lt;- 版本信息</li><li>Fingerprint:79b6d47b87495edf27135a83dda8b1b4f9b13d37bda2560d43f2cf65358cd528    &lt;- 标识故障特征</li><li>Module name:crasher_cpp                   &lt;- 模块名</li><li>Timestamp:2024-05-06 20:27:23.2035266415  &lt;- 故障发生时间戳</li><li>Pid:10026                                 &lt;- 进程号</li><li>Uid:0                                     &lt;- 用户ID</li><li>HiTraceId:a92ab1c7eae68fa  &lt;- HiTraceId(非必选，进程无HiTraceId不打印)</li><li>Process name:./crasher_cpp                &lt;- 进程名称</li><li>Process life time:1s                      &lt;- 进程存活时间</li><li>Process Memory(kB): 11902(Rss)            &lt;- 进程占用内存</li><li>Device Memory(kB): Total 1935820, Free 516244, Available 1205608 &lt;- 整机内存状态（非必选）</li><li>Reason:Signal:SIGSEGV(SEGV_MAPERR)@0000000000  probably caused by NULL pointer dereference      &lt;- 故障原因</li><li>LastFatalMessage:Failed to unwind stack, try to get unreliable call stack from #02 by reparsing thread stack &lt;- #00和#01一般认为是可信的，从#02开始尝试从线程栈内存里解析不可靠的调用栈</li><li>Fault thread info:</li><li>Tid:10026, Name:crasher_cpp               &lt;- 故障线程号，线程名</li><li>#00 pc 00000000 Not mapped</li><li>#01 pc 0002bcdb /system/lib/chipset-pub-sdk/libutils.z.so(memset_s+24)(15f72d32d228b22e72a13b438c75599d)</li><li>#02 pc 000f14a8 /system/lib/ld-musl-arm.so.1(printf+72)(a40044d0acb68107cfc4adb5049c0725)</li><li>#03 pc 00006d3b /data/crasher_cpp(RecursiveHelperFunction(int, int, int)+54)(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>#04 pc 00006d5b /data/crasher_cpp(RecursiveHelperFunction(int, int, int)+86)(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>#05 pc 00006d5b /data/crasher_cpp(RecursiveHelperFunction(int, int, int)+86)(d6cead5be17c9bb7eee2a9b4df4b7626)</li><li>...</li><li>Registers:</li><li>r0:00000000 r1:c2085db0 r2:00000000 r3:ff8970c8</li><li>r4:0000003f r5:00000000 r6:f755c0e0 r7:00000000</li><li>r8:ff8975c9 r9:ff8975e0 r10:00000001</li><li>fp:008de1a4 ip:f76b5c48 sp:ff896fd0 lr:f76abcdf pc:00000000</li><li>cpsr:20870010</li><li>...</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="异步线程栈跟踪故障场景日志规格">异步线程栈跟踪故障场景日志规格<i class="anchor-icon anchor-icon-link" anchorid="异步线程栈跟踪故障场景日志规格" tips="复制节点链接"></i></h3>          <p>当异步线程发生崩溃后，把提交该异步任务的线程栈也打印出来，帮助定位由于异步任务提交者造成的崩溃问题。崩溃线程的调用栈和其提交线程的调用栈通过SubmitterStacktrace字符串分隔。以下是一份DevEco Studio归档在FaultLog的进程崩溃日志的核心内容。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>异步线程栈跟踪维测功能仅在ARM 64位系统环境下且应用处于debug模式下开启。</p>      </div></div></div>     <div _ngcontent-fur-c106="" class="highlight-div"><div _ngcontent-fur-c106="" class="highlight-div-header"><div _ngcontent-fur-c106="" class="highlight-div-header-left"><div _ngcontent-fur-c106="" class="handle-button expand-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fur-c106="" class="highlight-div-header-right"><div _ngcontent-fur-c106="" class="handle-button ai-button"></div><div _ngcontent-fur-c106="" class="handle-button line-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fur-c106="" class="handle-button theme-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fur-c106="" class="handle-button copy-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fur-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>Generated by HiviewDFX@HarmonyOS</li><li>================================================================</li><li>Device info:HarmonyOS 3.2                 &lt;- 设备信息</li><li>Build info:HarmonyOS 5.0.0.23             &lt;- 版本信息</li><li>Fingerprint:8bc3343f50024204e258b8dce86f41f8fcc50c4d25d56b24e71fe26c0a23e321  &lt;- 标识故障特征</li><li>Module name:crasher_cpp                     &lt;- 模块名</li><li>Timestamp:2024-05-06 20:28:24.000           &lt;- 故障发生时间戳</li><li>Pid:9838                                    &lt;- 进程号</li><li>Uid:0                                       &lt;- 用户ID</li><li>HiTraceId:a92ab1c7eae68fa  &lt;- HiTraceId(非必选，进程无HiTraceId不打印)</li><li>Process name:./crasher_cpp                  &lt;- 进程名称</li><li>Process life time:2s                        &lt;- 进程存活时间</li><li>Process Memory(kB): 11902(Rss)            &lt;- 进程占用内存</li><li>Device Memory(kB): Total 1935820, Free 516244, Available 1205608 &lt;- 整机内存状态（非必选）</li><li>Reason:Signal:SIGSEGV(SI_TKILL)@0x000000000004750  from:18256:0  &lt;- 故障原因</li><li>Fault thread info:</li><li>Tid:18257, Name:crasher_cpp                 &lt;- 故障线程号，线程名</li><li>#00 pc 000054e6 /system/bin/ld-musl-aarch64.so.l(raise+228)(adfc673300571d2da1e47d1d12f48b44)  &lt;- 调用栈</li><li>#01 pc 000054f9 /system/bin/crasher_cpp(CrashInSubThread(void*)+56)(adfc673300571d2da1e47d1d12f48b50)</li><li>#02 pc 000054f9 /system/bin/ld-musl-aarch64.so.l(start+236)(adfc673300571d2da1e47d1d12f48b44)</li><li>========SubmitterStacktrace========       &lt;- 任务异常时打印任务提交者调用栈</li><li>#00 pc 000094dc /system/bin/crasher_cpp(DfxCrasher::AsyncStacktrace()+36)(adfc673300571d2da1e47d1d12f48b50)</li><li>#01 pc 00009a58 /system/bin/crasher_cpp(DfxCrasher::ParseAndDoCrash(char const*) const+232)(adfc673300571d2da1e47d1d12f48b50)</li><li>#02 pc 00009b40 /system/bin/crasher_cpp(main+140)(adfc673300571d2da1e47d1d12f48b50)</li><li>#03 pc 0000a4e1c /system/bin/ld-musl-aarch64.so.l(libc_start_main_stage2+68)(adfc673300571d2da1e47d1d12f48b44)</li><li>...</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="应用通过hiappevent设置崩溃日志配置参数场景日志规格">应用通过HiAppEvent设置崩溃日志配置参数场景日志规格<i class="anchor-icon anchor-icon-link" anchorid="应用通过hiappevent设置崩溃日志配置参数场景日志规格" tips="复制节点链接"></i></h3>          <p>系统提供了通用的崩溃日志生成功能，但一些应用对崩溃日志打印内容有个性化的需求，因此从<strong>API version 20</strong>开始HiAppEvent的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-crash-events#崩溃日志规格自定义参数设置">setEventConfig</a>接口支持设置崩溃日志配置参数。以下是一份DevEco Studio归档在FaultLog的32位系统崩溃日志的核心内容：</p>     <div _ngcontent-fur-c106="" class="highlight-div"><div _ngcontent-fur-c106="" class="highlight-div-header"><div _ngcontent-fur-c106="" class="highlight-div-header-left"><div _ngcontent-fur-c106="" class="handle-button expand-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fur-c106="" class="highlight-div-header-right"><div _ngcontent-fur-c106="" class="handle-button ai-button"></div><div _ngcontent-fur-c106="" class="handle-button line-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fur-c106="" class="handle-button theme-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fur-c106="" class="handle-button copy-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fur-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>...</li><li>Build info:HarmonyOS 6.0.0.33</li><li>Enabled app log configs:    &lt;- 使能的配置参数列表，只打印不是默认值的配置参数</li><li>Extend pc lr printing:true  &lt;- extend_pc_lr_printing参数设置为true</li><li>Log cut off size:102400B    &lt;- 崩溃日志大小截断到100KB（仅通过HiAppEvent接口订阅获取的崩溃日志生效）</li><li>Simplify maps printing:true &lt;- simplify_vma_printing参数设置为true</li><li>Timestamp:2025-05-17 19:17:07.000</li><li>...</li><li>Registers: &lt;- 故障现场寄存器</li><li>r0:00000000 r1:ff87d48c r2:00000000 r3:00000008</li><li>r4:00000000 r5:fffff000 r6:00000000 r7:000000af</li><li>r8:00c0b4f0 r9:00c0bdc0 r10:00c0bdc0</li><li>fp:ff87d520 ip:00c0a6e4 sp:ff87d488 lr:f7ecc044 pc:f7f19940</li><li>cpsr:00800010</li><li>Memory near registers:</li><li>...</li><li>lr(/system/lib/ld-musl-arm.so.1): &lt;- lr寄存器地址附近的内存值</li><li>    f7ecbfc8 e0824000 &lt;- extend_pc_lr_printing设置为true时，向前打印内存值到此</li><li>    ...</li><li>    f7ecc03c e3a00006 &lt;- extend_pc_lr_printing设置为false时，向前打印内存值到此</li><li>    f7ecc040 eb013612</li><li>    f7ecc044 e59f10b0 &lt;- lr寄存器地址（f7ecc044）的内存值（e59f10b0）</li><li>    ...</li><li>    f7ecc0b8 e58d4004 &lt;- extend_pc_lr_printing设置为false时，向后打印内存值到此</li><li>    f7ecc0bc e1a0100d</li><li>    f7ecc0c0 e3a00020</li><li>    f7ecc0c4 e3a070af &lt;- extend_pc_lr_printing设置为true时，向后打印内存值到此</li><li>pc(/system/lib/ld-musl-arm.so.1): &lt;- pc寄存器地址附近的内存值</li><li>    f7f198c4 e5900000 &lt;- extend_pc_lr_printing设置为true时，向前打印内存值到此</li><li>    ...</li><li>    f7f19938 e3a03008 &lt;- extend_pc_lr_printing设置为false时，向前打印内存值到此</li><li>    f7f1993c ef000000</li><li>    f7f19940 e51b0014 &lt;- pc寄存器地址（f7f19940）的内存值（e51b0014）</li><li>    ...</li><li>    f7f199b4 e2b52000 &lt;- extend_pc_lr_printing设置为false时，向后打印内存值到此</li><li>    f7f199b8 03530000</li><li>    f7f199bc 0a000003</li><li>    f7f199c0 ebfec957 &lt;- extend_pc_lr_printing设置为true时，向后打印内存值到此</li><li>...</li><li>Maps:       &lt;- simplify_vma_printing设置为true，打印Maps数量减少，只保留崩溃日志中出现的地址所属的Maps</li><li>ba0000-ba9000 r--p 00000000 /data/test/test_signalhandler</li><li>ba9000-bd8000 r-xp 00008000 /data/test/test_signalhandler</li><li>bd8000-bdb000 r--p 00036000 /data/test/test_signalhandler</li><li>bdb000-bdc000 rw-p 00038000 /data/test/test_signalhandler</li><li>... &lt;- 继续打印崩溃日志中出现的地址所属的Maps，此处省略不展示</li><li>OpenFiles:</li><li>...</li><li>[truncated]  &lt;- 日志截断的标志符，如果有打印说明日志被截断了</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="有页面切换轨迹的故障场景日志规格">有页面切换轨迹的故障场景日志规格<i class="anchor-icon anchor-icon-link" anchorid="有页面切换轨迹的故障场景日志规格" tips="复制节点链接"></i></h3>          <p>针对包含页面切换的应用，自API 20起，维测进程会记录应用切换历史。应用发生故障后，生成的故障文件将包含页面切换历史轨迹。</p>     <p>故障日志文件最多记录最新的10条历史轨迹。</p>     <div _ngcontent-fur-c106="" class="highlight-div"><div _ngcontent-fur-c106="" class="highlight-div-header"><div _ngcontent-fur-c106="" class="highlight-div-header-left"><div _ngcontent-fur-c106="" class="handle-button expand-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fur-c106="" class="highlight-div-header-right"><div _ngcontent-fur-c106="" class="handle-button ai-button"></div><div _ngcontent-fur-c106="" class="handle-button line-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fur-c106="" class="handle-button theme-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fur-c106="" class="handle-button copy-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fur-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>...</li><li>Foreground:Yes</li><li>Page switch history:</li><li>  14:08:30:327 /ets/pages/Index:JsError</li><li>  14:08:28:986 /ets/pages/Index</li><li>  14:08:07:606 :leaves foreground</li><li>  14:08:06:246 /ets/pages/Index:AppFreeze</li><li>  14:08:01:955 :enters foreground</li><li>Timestamp:2025-08-20 14:08:30:327</li><li>Pid:10208</li><li>Uid:0</li><li>...</li></ol></pre></div></div>     <p>单条记录的格式如下：</p>     <div _ngcontent-fur-c106="" class="highlight-div"><div _ngcontent-fur-c106="" class="highlight-div-header"><div _ngcontent-fur-c106="" class="highlight-div-header-left"><div _ngcontent-fur-c106="" class="handle-button expand-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fur-c106="" class="highlight-div-header-right"><div _ngcontent-fur-c106="" class="handle-button ai-button"></div><div _ngcontent-fur-c106="" class="handle-button line-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fur-c106="" class="handle-button theme-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fur-c106="" class="handle-button copy-button"><div _ngcontent-fur-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fur-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>  14:08:30:327 /ets/pages/Index:JsError</li><li>       ^             ^            ^</li><li>    切换时间      页面URL       页面名</li></ol></pre></div></div>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>仅在通过Navigation跳转到子页面时才会有页面名，页面名在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-navigation-navigation#系统路由表">系统路由表</a>中定义。</p>       <p>当应用发生前后台切换时，对应的页面URL为空，但是会将enters foreground、leaves foreground作为特殊的页面名进行填充。</p>       <p>enters foreground：应用进入前台运行。</p>       <p>leaves foreground：应用在后台运行。</p>      </div></div></div>    </div>   </div>   <div></div></div>