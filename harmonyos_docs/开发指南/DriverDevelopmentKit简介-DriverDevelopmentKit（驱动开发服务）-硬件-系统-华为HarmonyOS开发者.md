<h1 _ngcontent-auq-c119="" class="doc-title ng-star-inserted" title="Driver Development Kit简介"> Driver Development Kit简介 </h1>

<div _ngcontent-auq-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>Driver Development Kit（驱动开发套件）为外设驱动开发者提供高效、安全、丰富的扩展外设驱动开发解决方案ArkTs-API和C-API，支持外设驱动开发者为消费者带来外设即插即用的极致体验。</p>    <div class="tiledSection">     <h2 id="使用场景">使用场景<i class="anchor-icon anchor-icon-link" anchorid="使用场景" tips="复制节点链接"></i></h2>          <p>支持开发者高效、安全开发专业外设或扩展外设增强能力：</p>     <ol>      <li>       <p>面向专业专用办公外设驱动开发场景。</p>       <p>例如：银行柜台、企业办公、医疗检测等领域专业专用外设，如：高拍仪、身份证扫描仪、指纹识别仪、血氧血糖监测设备。</p></li>      <li>       <p>面向非标外设扩展增强能力开放场景。</p>       <p>例如：厂商私有非标HID外设增强能力开放场景，如：手写板快捷键定制、压感/绘图区域设置、扩展增强能力设置、鼠标灯光效果设置、鼠标扩展按键定制、DPI及X/Y轴等高阶能力设置。</p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="亮点特征">亮点特征<i class="anchor-icon anchor-icon-link" anchorid="亮点特征" tips="复制节点链接"></i></h2>          <ul>      <li>       <p>支持开发者开发外设配件的高阶功能，满足消费者高阶使用场景诉求。</p></li>      <li>       <p>扩展驱动框架支持扩展外设驱动生命周期管理，面向扩展设备应用提供扩展外设查询绑定能力接口。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="基本概念">基本概念<i class="anchor-icon anchor-icon-link" anchorid="基本概念" tips="复制节点链接"></i></h2>          <ul>      <li>扩展外设驱动客户端：查询驱动并绑定驱动，自定义驱动与设备之间的通信方式以及数据处理方式等，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/externaldevice-guidelines">带UI界面基础驱动</a>。</li>      <li>扩展外设驱动：基于DDK能力开发的专业专用扩展外设驱动或扩展外设增强驱动，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/driverextensionability">无UI界面基础驱动</a>。</li>      <li>扩展外设管理服务（External Device Manager）：扩展设备管理，驱动包全生命周期管理等。</li>      <li>BMS（Bundle Manager Service）：包管理服务，在HarmonyOS上主要负责应用的安装、卸载和数据管理。</li>      <li>AMS（Ability Manager Service）：元能力管理服务，用于拉起和关闭扩展驱动能力DriverExtensionAbility。</li>      <li>SA（SystemAbility）：系统元能力，是一种系统服务，对外提供能力。如：外设扩展服务SA就是对外提供非标外设驱动能力的系统服务。</li>      <li>非标外设：指的是采用了非标准的协议通信（也称为厂商自定义协议）的一类外设。</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="实现原理">实现原理<i class="anchor-icon anchor-icon-link" anchorid="实现原理" tips="复制节点链接"></i></h2>          <p>HDF扩展驱动框架为扩展外设驱动开发，提供稳定统一的外设驱动开发接口，支撑用户态扩展外设驱动开发者基于DDK能力开发用户态扩展外设驱动。</p>     <p>扩展外设管理服务作为用户态扩展外设管理的核心服务，实现对扩展外部设备和扩展外设驱动的生命周期管理，同时面向扩展设备应用开发提供标准ArkTS API接口，支持扩展外设查询、绑定及解绑能力接口。</p>    </div>    <div class="tiledSection">     <h3 id="扩展外设驱动架构" class="firsth2">扩展外设驱动架构<i class="anchor-icon anchor-icon-link" anchorid="扩展外设驱动架构" tips="复制节点链接"></i></h3>          <p><strong>图1</strong> 扩展外设驱动原理图</p>     <p><span><img originheight="495" originwidth="895" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115009.18376419289791592046766163339054:50001231000000:2800:762CCFA0BCDD4EE1C3B8E19A11DF6D127A73531CE5AABFE5FD313CF86308720C.png" width="895" height="495"></span></p>    </div>    <div class="tiledSection">     <h3 id="运作流程">运作流程<i class="anchor-icon anchor-icon-link" anchorid="运作流程" tips="复制节点链接"></i></h3>          <p>用户插入外设时，外设与驱动的匹配流程如图2所示。</p>     <p><strong>图2</strong> 非标外设与对应扩展外设驱动应用匹配的时序图</p>     <p><span><img originheight="750" originwidth="1000" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115009.51372855912953593908875726082359:50001231000000:2800:CF585D8EF565FDC2BB1445AD66584D196103C54A19CEDD039A2F489ABBA48782.png" width="920" height="690"></span></p>     <p>用户使用扩展外设驱动客户端时，扩展外设驱动客户端与扩展外设驱动的绑定流程如图3所示。</p>     <p><strong>图3</strong> 扩展外设驱动客户端与扩展外设驱动绑定的时序图</p>     <p><span><img originheight="750" originwidth="1000" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115009.44761438171231794787965666683404:50001231000000:2800:6E7FDF49CC7479A86215BB0954B5480FF041DFC40DD0457C5512560D1856E6F6.png" width="920" height="690"></span></p>    </div>    <div class="tiledSection">     <h2 id="约束与限制">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="约束与限制" tips="复制节点链接"></i></h2>          <p>调用Driver Development Kit提供的ArkTs-API或者C-API，开发者需要申请指定权限，才能使用相关接口。</p>     <p>所需权限如下：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.1" valign="top" width="33.33333333333333%">API 类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.2" valign="top" width="33.33333333333333%">DDK类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.3" valign="top" width="33.33333333333333%">权限名称</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">ArkTs-API</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">不涉及</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">ohos.permission.ACCESS_EXTENSIONAL_DEVICE_DRIVER</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">C-API</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">USB DDK</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">ohos.permission.ACCESS_DDK_USB</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">C-API</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">HID DDK</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">ohos.permission.ACCESS_DDK_HID</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">C-API</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">USB Serial DDK</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">ohos.permission.ACCESS_DDK_USB_SERIAL</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">C-API</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">SCSI Peripheral DDK</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="关联模块">关联模块<i class="anchor-icon anchor-icon-link" anchorid="关联模块" tips="复制节点链接"></i></h2>          <p>在扩展外设驱动开发过程中，需要使用到其他关联模块的部分能力，来协助驱动开发。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.3.1.3.1.1" valign="top" width="50%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.3.1.3.1.2" valign="top" width="50%">作用</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">PerformanceAnalysisKit</td>         <td class="cellrowborder" valign="top" width="50%">引入{<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hilog">hilog</a>}用于日志打印。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">BasicServicesKit</td>         <td class="cellrowborder" valign="top" width="50%">引入{<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#businesserror" target="_blank">BusinessError</a>}用于捕获错误信息。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">IPCKit</td>         <td class="cellrowborder" valign="top" width="50%">引入{<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-rpc" target="_blank">rpc</a>}用于驱动与客户端IPC（Inter-Process Communication）通信。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">AbilityKit</td>         <td class="cellrowborder" valign="top" width="50%">引入{<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-application-want" target="_blank">want</a>}用于生命周期管理。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="驱动应用规格说明">驱动应用规格说明<i class="anchor-icon anchor-icon-link" anchorid="驱动应用规格说明" tips="复制节点链接"></i></h2>          <p>1.驱动应用定义</p>     <ul>      <li>驱动应用是基于Driver Development Kit开发的、面向非标外设的用户态驱动。</li>      <li>驱动应用基于DriverExtensionAbility，开发者需要重写该Ability的生命周期回调接口。</li>     </ul>     <p>2.驱动应用安装卸载规格</p>     <ul>      <li>安装策略       <ul>        <li>当用户安装某一驱动应用时，系统会将应用安装到当前已有的所有用户空间下。</li>        <li>当创建新用户时，系统会将已安装的驱动应用在该用户空间下进行安装。</li>       </ul></li>      <li>卸载策略：当用户在任意用户空间下发起卸载某一驱动应用，系统会将所有用户空间下的该驱动应用卸载。</li>     </ul>     <p>3.基于DriverExtensionAbility生命周期管理说明</p>     <ul>      <li>ExtensionAbility是基于场景服务的扩展能力的统称，简称为扩展能力（例如用户态扩展驱动、卡片、输入法等）以便满足不同的使用场景。</li>      <li>各类Extension的生命周期由各个SA管理，通过connectAbility启动Extension，并驱动定义的业务接口；业务结束，SA调用disconnectAbility接口断开Extension连接，AMS会根据该Extension是否有SA连接来决定是否销毁该Extension及进程。在用户态扩展驱动开发场景下，管理DriverExtensionAbility生命周期的系统SA为外设扩展服务SA。</li>     </ul>     <p>4.在DriverExtensionAbility中API访问安全管控说明</p>     <ul>      <li>系统支持基于ExtensionAbility构建场景化扩展Ability，DriverExtensionAbility为支持开发用户态扩展驱动的一类Ability。</li>      <li>在DriverExtensionAbility中仅支持访问DDK（<a href="https://gitcode.com/openharmony/docs/tree/master/zh-cn/application-dev/reference/apis-driverdevelopment-kit" target="_blank">Driver Development Kit</a>）API，实现对非标外设进行访问控制和数据通信。</li>      <li>基于驱动开发安全约束及驱动开发业务场景，在DriverExtensionAbility中不支持访问其它ArkTS API，以防止恶意行为和数据泄露。</li>      <li>DriverExtensionAbility受限访问ArkTS API方案说明：       <ul>        <li>ArkTS API受限原理：在孵化和创建Extension进程时，会根据Extension配置的受限访问ArkTS API名单加载系统模块。在运行时，如果在DriverExtensionAbility中调用限制ArkTS API，由于孵化和创建阶段未加载相应系统模块，API会调用失败。</li>       </ul></li>      <li>DriverExtensionAbility具体受限ArkTS API名单，请参考<a href="https://gitcode.com/openharmony/ability_ability_runtime/blob/master/frameworks/native/ability/native/etc/extension_blocklist_config.json" target="_blank">受限ArkTS API</a>中DriverExtension配置。</li>     </ul>    </div>   </div>   <div></div></div>