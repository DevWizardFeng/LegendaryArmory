<h1 _ngcontent-rkd-c119="" class="doc-title ng-star-inserted" title="Frame分析"> Frame分析 </h1>

<div _ngcontent-rkd-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001599457033"><p id="ZH-CN_TOPIC_0000002510174361__p0656139111818">开发应用或元服务过程中，如果发现有表单滑动不顺畅、页面交互延迟、动效不流畅等卡顿现象时，可以使用DevEco Profiler提供的Frame场景分析能力，录制卡顿过程中的关键数据进行分析，从而识别出导致卡顿丢帧的原因。此外，Frame任务窗口还集成了Time、CPU、Network场景分析任务的功能，方便开发者在分析丢帧数据时同步对比同一时段的其他资源占用情况。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002510174361__ul107631315298"><li id="li513014452913">在任务分析窗口，可以通过“Ctrl+鼠标滚轮”缩放时间轴，通过“Shift+鼠标滚轮”左右移动时间轴。或使用快捷键W/S放大或缩小时间轴，使用A键/D键可以左右移动时间轴。</li><li id="li182232025112917">将鼠标悬停在泳道任意位置，可以通过M键添加单点时间标签。</li><li id="li1099292513324">鼠标框选要关注的时间段，可以通过“Shift+M”添加时间段时间标签。</li><li id="li540422233317">在任务分析窗口，可以通过“Ctrl+, ”向前选中单点时间标签，通过“Ctrl+. ”向后选中单点时间标签。</li><li id="li1360912834114">在任务分析窗口，可以通过“Ctrl+[ ”向前选中时间段时间标签，通过“Ctrl+]”向后选中时间段时间标签。</li><li id="li876431202914">Frame分析支持离线符号解析能力，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-insight-session-time#section186881175012">离线符号解析</a>。</li><li id="li5432947202">Frame分析支持Energy泳道，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-profiler-energy#section889733410010">定位能耗问题</a>。</li></ul> </div></div></div> <div class="tiledSection"><h2 id="section14698506231">查看GPU使用情况<i class="anchor-icon anchor-icon-link" anchorid="section14698506231" tips="复制节点链接"></i></h2><ol id="ZH-CN_TOPIC_0000002510174361__ol2042415618351"><li id="li583393362510"><span>创建Frame分析任务并录制相关数据，操作方法可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/deep-recording">性能问题定位：深度录制</a>，或在会话区选择<strong>Open File</strong>，导入历史数据。</span></li><li id="li114241756143517"><span>“Frame”泳道显示当前设备的GPU的使用率，将其展开，子泳道显示Render Service侧帧数据和App侧帧数据。</span><p></p><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002510174361__ul1931359121611"><li id="li1475820141582">一帧的绘制，一般需要由App侧提交渲染到Render Service侧，然后Render Service侧再提交给硬件进行合成渲染，因此App侧的帧和Render Service侧的帧存在关联的情况。并且可能多个APP侧的帧/同一APP侧的多个帧提交到同一个Render Service侧帧上，出现帧之间的一对多的关联情况。</li><li id="li84951146389">一帧绘制的期望耗时，与fps的大小有关，一般情况下fps为60，对应的Vsync周期为16.6ms，即App侧/Render Service侧的帧耗时，一般需要在16.6ms以内。App侧帧/Render Service侧帧判断卡顿的标准为帧的实际结束时间晚于帧的期望结束时间。</li><li id="li393111594166">在“RS Frame”和“App Frame”标签的泳道中，正常完成渲染的帧显示为绿色，出现卡顿的帧显示为红色。</li><li id="li4718428174">除“RS Frame”和“App Frame”泳道外的“ArkTS Callstack”、“Callstack”、“CPU Core”等泳道信息，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-insight-session-time">基础耗时分析：Time分析</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-insight-session-cpu">CPU活动分析：CPU分析</a>。</li></ul> </div></div></div> <p id="ZH-CN_TOPIC_0000002510174361__p159641917154"><span><img height="386.4894444444445" originheight="646" originwidth="1546" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104930.95690559606352530523466100813770:50001231000000:2800:48213D108F3E60351D16DC8EE8E142819EC157AC51123F8927E77F3ADFE4BFC9.png" title="点击放大" width="920"></span></p> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section670916141348">查看指定时间段内所有进程的Frame数据统计信息<i class="anchor-icon anchor-icon-link" anchorid="section670916141348" tips="复制节点链接"></i></h2><ol id="ZH-CN_TOPIC_0000002510174361__ol1434171820412"><li id="li13354188412"><span>在时间轴上拖拽鼠标选定要查看的时间段。</span></li><li id="li143510181415"><span>框选Frame主泳道。</span><p></p><p id="ZH-CN_TOPIC_0000002510174361__p535618545">窗口下方的“Statistics”区域中会以进程维度对选定时间段内的Frame信息进行统计，包括卡顿率、卡顿次数、最大连续卡顿次数、最大卡顿耗时、平均卡顿耗时以及平均正常耗时等。</p> <p id="ZH-CN_TOPIC_0000002510174361__p1935161810411"><span><img height="289.4479" originheight="509" originwidth="1544" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104930.59383655560424650368159687011496:50001231000000:2800:A8B728C4477AD83785E6710E5C908BEBBD9A3F0E8B2217FF626AB1ACA053F312.png" title="点击放大" width="871.1500000000001"></span></p> <p></p></li><li id="li123511181242"><span>点击“Statistics”列表中任一进程的跳转按钮，在“Frame List”区域将展现该进程对应的Frame列表。体现各帧的起始时间、总耗时、GPU耗时以及卡顿丢帧类型。</span><p></p><p id="ZH-CN_TOPIC_0000002510174361__p11352180420"><span><img height="328.7627" originheight="624" originwidth="1541" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104930.82589742297344216109626149253484:50001231000000:2800:1B9C358071BF441C2E3BD7A3146E9A32D2ADF528F23D9F83E55E90ED0146685D.png" title="点击放大" width="807.3100000000001"></span></p> <p></p></li><li id="li53514189420"><span>单击“Frame List”列表中任意一帧，右侧的“More”区域会中显示该帧更多关键信息。在获取该帧的预期起始时间、预期持续时间之外，您可以单击<span><img height="13.7123" originheight="16" originwidth="18" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104930.04289870747625746617836537018927:50001231000000:2800:8FB321C86B3D8218938DDBB30E592318D92A02D9A7771C9CC201B5C78617AA4D.png" width="14.9625" class="IconPic notEnlarge"></span>跳转至关联的切片。</span></li></ol> <p id="ZH-CN_TOPIC_0000002510174361__p73264491994"></p> </div> <div class="tiledSection"><h2 id="section58691959194312">查看指定Frame页面布局信息<i class="anchor-icon anchor-icon-link" anchorid="section58691959194312" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510174361__p388315332195">从DevEco Studio 5.1.0 Release版本开始支持查看最新录制的Session中的指定Frame页面布局信息。</p> <p id="ZH-CN_TOPIC_0000002510174361__p88841833161912">暂不支持在Wearable设备上查看指定Frame页面布局信息。</p> </div> <ol id="ZH-CN_TOPIC_0000002510174361__ol114932024610"><li id="li7493180174620"><span>单击RS Frame泳道或APP Frame泳道中任意一帧，”Details”区域中会展示该帧具体信息。单击<strong>Download Layout</strong>或<strong>Open Layout</strong>按钮，下载或打开页面布局信息。点击<strong>Open Layout</strong>按钮，将在ArkUI Inspector中直接打开相应arkli文件。点击<strong>Download Layout</strong>将arkli文件下载保存到指定目录，之后可手动导入ArkUI Inspector查看页面布局信息。</span><p></p><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002510174361__p129324423115">单击“Download Layout”或 “Open Layout”前，需应用进程置于前台，才能正确回放全量渲染数据，获取arkli文件，arkli文件用于ArkUI Inspector展示页面布局信息。</p> </div></div></div> <p id="ZH-CN_TOPIC_0000002510174361__p32747110543"><span><img height="355.8016" originheight="678" originwidth="1546" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104930.28141843459962424115516984723211:50001231000000:2800:64E96DEA7C8884D0AAE6791563213E0B1C7EC4274D0CC01B7A2D07966FC9A080.png" title="点击放大" width="807.3100000000001"></span></p> <p></p></li><li id="li93747205420"><span>在ArkUI Inspector中可查看组件树和组件属性信息，当前支持BackgroundFilter、nodeGroup、nodeGroupReuseCache等组件属性：</span><p></p><ul id="ZH-CN_TOPIC_0000002510174361__ul56925305395"><li id="li1087519554364">BackgroundFilter：背景滤波器。</li><li id="li1474716150358">nodeGroup：节点组类型，0表示非节点组节点，1表示被动画标记的节点组，2表示被UI标记的节点组，4表示被用户标记的节点组，8表示被前景滤波器标记的节点组。</li><li id="li35781534377">nodeGroupReuseCache： 0表示在生成缓存或无需缓存，1表示在重用缓存。</li></ul> <p id="ZH-CN_TOPIC_0000002510174361__p125311059466"><span><img height="418.60542239685657" originheight="609" originwidth="1355" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104930.50631876944033543928956627461820:50001231000000:2800:38047A3316796D5414A1AF68C560D9FF205CBF9EBF9B7FF03B151F053CC6EE89.png" title="点击放大" width="920"></span></p> <p></p></li></ol> <div class="tiledSection"><h2 id="section591814484366">查看指定时间段内指定进程的Frame数据统计信息<i class="anchor-icon anchor-icon-link" anchorid="section591814484366" tips="复制节点链接"></i></h2><ol id="ZH-CN_TOPIC_0000002510174361__ol124453243514"><li id="li167126218382"><span>在时间轴上拖拽鼠标选定要查看的时间段。</span></li><li id="li5696188164614"><span>选择要观察的子泳道（例如带“RS Frame”标签的泳道）。</span><p></p><p id="ZH-CN_TOPIC_0000002510174361__p163241324124820">窗口下方的“Details”区域中会显示选定时间段内的RS帧统计信息列表，体现各帧的起始时间、总耗时、GPU耗时以及卡顿丢帧类型。</p> <p id="ZH-CN_TOPIC_0000002510174361__p1898819171518"><span><img height="425.8961111111111" originheight="712" originwidth="1545" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104930.96796728771055620959137815923647:50001231000000:2800:348DA479861BF13BFF1D98BB2DF99C97F36A7A323B5ED964A3A238F378D29C8E.png" title="点击放大" width="920"></span></p> <p></p></li><li id="li97599376918"><span>单击列表中任意一帧，右侧的“More”区域会中显示该帧更多关键信息。在获取该帧的预期起始时间、预期持续时间之外，您可以单击<span><img height="12.927600000000002" originheight="13" originwidth="16" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104930.52439093648857575390371088394713:50001231000000:2800:282AA3D9050EFB9AECED6C310C6048D53204ACEF7CFEC96158AF91B39A5F11E8.png" width="14.9625" class="IconPic notEnlarge"></span>跳转至关联的切片。</span></li></ol> </div> <div class="tiledSection"><h2 id="section730395917164">查看指定Frame信息<i class="anchor-icon anchor-icon-link" anchorid="section730395917164" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510174361__p4741192913618">在子泳道（例如带“APP Frame”标签的泳道）中选中要查看的Frame，该泳道上方是耗时最长的非UI函数，下方是UI主线程泳道。</p> <p id="ZH-CN_TOPIC_0000002510174361__p43313135311"><span><img height="376.17506631299733" originheight="620" originwidth="1525" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104930.31830548062174566444243043014471:50001231000000:2800:E4BF0556E18C6A1A5FAE1CF096F4C12BC0E767BCBED3850FA2FDA25BC5BD1F9F.png" title="点击放大" width="920"></span></p> <div class="p" id="ZH-CN_TOPIC_0000002510174361__p427492491315">窗口下方的“Frame”区域中会显示选定帧的关键信息，如VSync编号、开始时间、App应用侧持续时间、App应用侧业务逻辑耗时、Render Service侧持续时间、GPU持续时间、总持续时间、卡顿丢帧类型以及可能出现卡顿的原因等。”Non UI”区域中会显示非UI耗时最大的函数，如开始时间、结束时间、持续时间，函数名等。<div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002510174361__ul827592416139"><li id="li1927512240135">在选定观察对象后，DevEco Profiler会自动关联与其相关的切片，用箭头连接。</li><li id="li1027510242134">如果该帧是由于超出期望结束时间引起的，则显示两条线，对应期望开始时间（Expected Start）和期望结束时间（Expected End），用于关联分析同一时刻Trace或者函数采样信息。</li><li id="li7275324111319">将鼠标悬浮在任意帧上，会冒泡显示该帧的Jank信息。</li><li id="li15275152411311">卡顿丢帧类型（Jank Type）：No Jank（不卡顿）、AppDeadlineMissed（App侧的卡顿）、RenderDeadlineMissed（Render Service侧的卡顿）。</li></ul> </div></div></div> </div> <p id="ZH-CN_TOPIC_0000002510174361__p13275624121317"></p> <p id="ZH-CN_TOPIC_0000002510174361__p27941238151610"><span><img height="378.39575596816974" originheight="627" originwidth="1533" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104930.86390003403596609001505139647318:50001231000000:2800:F454A99837CFD793DB6963ADAEEC1CCF1E3A1FCBE65E4D891A72D555F8400295.png" title="点击放大" width="920"></span></p> <p id="ZH-CN_TOPIC_0000002510174361__p868372218284"></p> </div> <div class="tiledSection"><h2 id="section32418339283">查看屏幕帧率动态变化场景下丢帧和卡顿信息<i class="anchor-icon anchor-icon-link" anchorid="section32418339283" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510174361__p155359404546">Frame泳道下新增Lost Frames和Hitch Time两类子泳道，用于识别和优化卡顿和丢帧现象。</p> <ul id="ZH-CN_TOPIC_0000002510174361__ul126531183120"><li id="li1622015610212">Hitch Time：展示当前时间段内卡顿时长。计算方式为渲染前后两帧的间隔减去单帧耗时，若计算结果大于单帧耗时*70%，则视为出现卡顿现象。</li><li id="li12406418132810">Lost Frames：展示当前时间段内丢帧数。Lost Frames计算出的结果，六舍七入统计取整。</li></ul> <ol id="ZH-CN_TOPIC_0000002510174361__ol2014992416507"><li id="li0149112416502"><span>创建Frame模板并录制会话，如存在卡顿和丢帧现象，会在Lost Frames和Hitch Time泳道对应时间显示矩形图。</span><p></p><p id="ZH-CN_TOPIC_0000002510174361__p3267183035016"><span><img height="318.2557" originheight="549" originwidth="1548" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104930.07512790946362320371003396399849:50001231000000:2800:636E4B27252B35F9D4F0EB488178A4A7511E841EDA618A84EBAB2E8AA2FC3F0E.png" title="点击放大" width="891.1"></span></p> <p></p></li><li id="li1088603245010"><span>鼠标点选某一时间点，提示信息会显示该点所属时间段内的丢帧数以及卡顿时间。</span><p></p><p id="ZH-CN_TOPIC_0000002510174361__p122871836115014"><span><img height="123.1181" originheight="215" originwidth="1541" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104930.24818704938684853274808523628337:50001231000000:2800:347190E10A811F18CF367C9ED12865DB984B9578B75056B1CEAA3CBFE68CFE24.png" title="点击放大" width="861.84"></span></p> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section258014238619">支持动效场景调优<i class="anchor-icon anchor-icon-link" anchorid="section258014238619" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510174361__p11580723868">开发者在开发应用时，会使用到动效，动效的卡顿影响到用户的使用体验。DevEco Profiler提供动效场景的调优，能帮助开发者优化动效场景。</p> <p id="ZH-CN_TOPIC_0000002510174361__p1758015239610">鼠标放置在某个动效上，显示该动效的详细信息，包括响应时延、动效持续时间、完成时延、期望帧率、FPS。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002510174361__ul258012234610"><li id="li17580152311613">响应时延：&lt;=85ms 绿色，85ms~150ms 浅绿色，150ms ~250ms 浅红色，&gt;250ms深红色。</li><li id="li1058019238613">期望帧率：当前系统运行满帧帧率，如60HZ、90HZ、120HZ。智能刷新率模式下，不展示期望帧率。</li><li id="li45808238612">动效持续时间：根据帧率展示颜色，FPS大于达标帧率即为绿色，小于则为深红色。智能刷新率模式下，帧率可变，颜色为灰色。达标帧率与期望帧率的大小有关，一般情况下期望帧率为60HZ，则达标帧率= 60HZ * 91.7%。</li><li id="li6580923367">完成时延：响应时延和动效持续时间只要有一个为深红色，完成时延为深红色。</li><li id="li14580723564">Launch模板中Frame泳道点击detail区启动动效详情信息，more区域展示动效帧Animation Data List信息。</li></ul> </div></div></div> <p id="ZH-CN_TOPIC_0000002510174361__p2058018231963"><span><img height="363.59540000000004" originheight="693" originwidth="1546" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104931.77773001034239293018518325653348:50001231000000:2800:5005DABAA18DA7FBEB67AC687727A8B79A34B15951B8F71DFE276BAB92123A84.png" title="点击放大" width="807.3100000000001"></span></p> </div> <div class="tiledSection"><h2 id="section3735165517215">查看组件动画信息<i class="anchor-icon anchor-icon-link" anchorid="section3735165517215" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510174361__p12895371294">从DevEco Studio 6.0.0.828版本开始，Frame泳道下新增Component Animation子泳道，用于从组件的角度展示应用中包含的各种动画类型，包括属性动画 (animation)、显式动画 (animateTo)、关键帧动画 (keyframeAnimateTo)以及页面间转场 (pageTransition)。</p> <p id="ZH-CN_TOPIC_0000002510174361__p289417596310">在Details页签中，可以查看每个动画的详细信息，包括起止时间、帧率、动画曲线类型以及影响的组件属性等。</p> <p id="ZH-CN_TOPIC_0000002510174361__p099318101134">单击列表中任意一动画，右侧的“More”区域会中显示该动画所影响的组件属性的具体变化过程。<span><img height="306.00640000000004" originheight="704" originwidth="1857" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104931.57585948102700558211248797361610:50001231000000:2800:96D8855A3DF56D815B8FEF2C4A15EC1E609DB1E900CE1D5F3D5ADAFDE5E8B0B1.png" title="点击放大" width="807.3100000000001"></span></p> </div> <div class="tiledSection"><h2 id="section4568940760">查看组件帧率信息<i class="anchor-icon anchor-icon-link" anchorid="section4568940760" tips="复制节点链接"></i></h2><div class="p" id="ZH-CN_TOPIC_0000002510174361__p1273915010616">Frame泳道下新增两类子泳道，分别为Display Vsync与DisplaySync_cb(tid)，用于对可变帧率的检测调优。<ul id="ZH-CN_TOPIC_0000002510174361__ul1973915018619"><li id="li147391350164">Display Vsync：该泳道显示对应时间段的屏幕刷新率，支持对框选的时间段内的vsync进行分布统计。区分”&lt;=30HZ”、”30~60HZ”、”60~90HZ”、”&gt;90HZ”。统计值包括框选时间段内各区间的分布比率、最小/最大/平均时长以及平均HZ。如果某场景满足了帧率改变的要求，当底层系统根据机制进行变帧，相应的情况会展现在对应的泳道，帮助开发者了解vsync的变化情况是否符合预期。该泳道仅支持在配备硬件屏幕的设备上进行数据采集。</li><li id="li47391850661">DisplaySync_cb(tid)：该泳道显示对应组件的帧率，如DisplaySync、XComponent两类接口组件动画对应的帧率。调测时，不同场景下由于帧率可变，系统实际表现是否符合预期，需要有实际的检测手段。尤其是由于DisplaySync的渲染均在UI主线程执行，当存在多个需要渲染的组件需要同时执行时，只能在UI主线程排队，此时任何一个组件的延迟都会对其他组件的渲染产生影响，导致UI卡顿。<p id="ZH-CN_TOPIC_0000002510174361__p1473965015617">如下图所示，vsync2和vsync4中，vsync周期内的组件由于渲染耗时长，导致以下两个vsync周期挤掉下一个vsync周期的渲染时间，导致掉帧的情况产生。</p> <p id="ZH-CN_TOPIC_0000002510174361__p1773915501467"><span><img height="124.6875" originheight="272" originwidth="1138" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104931.68925274625126967540730962444370:50001231000000:2800:3A9B93958EA4682BB31CD17F42A014585C7B3F74FCDF8293AB97172FEBA13828.png" title="点击放大" width="523.6875"></span></p> </li></ul> </div> <ol id="ZH-CN_TOPIC_0000002510174361__ol17739450463"><li id="li17396507615"><span>选择Display Vsync泳道，在时间轴上拖拽鼠标选定要查看的时间段。</span></li><li id="li1739155013610"><span>详情区显示当前时间段的屏幕刷新率，当前帧最大持续时间、最小持续时间、平均持续时间以及该时间段内平均帧数。</span><p></p><p id="ZH-CN_TOPIC_0000002510174361__p673918501068"><span><img height="293.9034" originheight="559" originwidth="1546" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104931.95677181924775357087851753952833:50001231000000:2800:89EA6D1E353FB4F7986B27EEFFB8C701F89317EF322F250B7FE91F789DB2A9EE.png" title="点击放大" width="807.3100000000001"></span></p> <p></p></li><li id="li073920508614"><span>点选Display Vsync泳道，可以查看当前帧的耗时和帧率。</span><p></p><p id="ZH-CN_TOPIC_0000002510174361__p6739250162"><span><img height="266.8512" originheight="508" originwidth="1549" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104931.70030116099359760550633110037255:50001231000000:2800:648C92718EE92A66E4CF4C4F5FB8958B429274DBEB5527F2711306BFD4FBDECE.png" title="点击放大" width="807.3100000000001"></span></p> <p></p></li><li id="li6739550565"><span>框选DisplaySync_cb泳道，可以查看应用侧对应组件的帧率，渲染时间等信息。</span><p></p><p id="ZH-CN_TOPIC_0000002510174361__p18739145013619"><span><img height="295.36640000000006" originheight="560" originwidth="1541" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104931.41644689481229357588026626423517:50001231000000:2800:09B8D04ED3DD4E722A83CD10ADA384C2C1252E6FBDB4A60A3C18854C72033065.png" title="点击放大" width="807.3100000000001"></span></p> <p></p></li><li id="li37391250867"><span>同时如果组件有可能的掉帧情况，DisplaySync_cb泳道显示对应的掉帧情况并标红展示。</span><p></p><p id="ZH-CN_TOPIC_0000002510174361__p1173914501162"><span><img height="300.39380000000006" originheight="570" originwidth="1542" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104931.62828584534995506200956463087007:50001231000000:2800:F0F7111D4B178AAD5303D989C773236BA1B55FEAF5A6B9F9EA7371CA9CAD841F.png" title="点击放大" width="807.3100000000001"></span></p> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section145686401365">查看帧率统计信息<i class="anchor-icon anchor-icon-link" anchorid="section145686401365" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510174361__p773917502062">Frame泳道中的App Frame泳道和RS Frame泳道在框选时新增fps标记。RS泳道新增过滤按钮，用于过滤ArkWeb数据。</p> <ol id="ZH-CN_TOPIC_0000002510174361__ol47409501963"><li id="li1274055016615"><span>展开Frame泳道，框选一段数据。</span></li><li id="li1874015507614"><span>泳道出现fps标记，展示当前框选范围内的帧率统计信息。</span><p></p><p id="ZH-CN_TOPIC_0000002510174361__p127409501265"><span><img height="370.72420000000005" originheight="709" originwidth="1551" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104931.07186635953726055167012011078659:50001231000000:2800:24B047583692DFE81CE03A66399DDF3D0B79F12C89E1C006D9E04F258AEE9CFC.png" title="点击放大" width="807.3100000000001"></span></p> <p></p></li><li id="li12740450967"><span>打开Only ArkWeb data开关，筛选过滤出包含ArkWeb帧的数据。</span><p></p><p id="ZH-CN_TOPIC_0000002510174361__p874010501867"><span><img height="192.318" originheight="363" originwidth="1543" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104931.78459329387139650105677820921066:50001231000000:2800:A05FCA0B66AF89C609D002EA81AF11C895FA59EB6A6329CB0C8AD23D97954CB5.png" title="点击放大" width="807.3100000000001"></span></p> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section8198654142516">Anomaly泳道：查看解码过度耗时和超过阈值的序列化、反序列化操作<i class="anchor-icon anchor-icon-link" anchorid="section8198654142516" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510174361__p18161165310296">如果工程中存在图片资源，并感知到解码绘制/渲染过程存在卡顿，可以通过Anomaly泳道查看主线程解码过程中是否存在解码过度耗时告警，并确认发生告警的时段。</p> <p id="ZH-CN_TOPIC_0000002510174361__p13141131743313">如果应用中使用了worker, Taskpool工作线程等场景，通常会触发跨线程对象传递，并触发序列化和反序列化的操作。对于耗时超过阈值的序列化、反序列化操作，Anomaly也会给出对应的耗时告警，并给出发送这个操作的开始时间和耗时时间。</p> <ol id="ZH-CN_TOPIC_0000002510174361__ol333118914300"><li id="li43317943018"><span>在时间轴上拖拽鼠标选定出现告警的时间段。当耗时超过VSync周期的50%时，将在Anomaly泳道中出现红色告警，提示“Image decoding has exceeded 50% of the VSync time“。</span></li><li id="li119331814153018"><span>详情区给出录制时段内解码过度耗时的统计情况，包括类型，图片名，计数，总耗时，最小耗时、平均耗时、最大耗时，耗时标准差、 图源尺寸大小，目标尺寸大小等。</span><p></p><p id="ZH-CN_TOPIC_0000002510174361__p4877454195417"><span><img height="322.92400000000004" originheight="614" originwidth="1544" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104931.66768651702041146512645570304763:50001231000000:2800:DBA43D389B1C4449F27EF7078006DC1BAA52A2FB111BC14B351E3A66632DC90F.png" title="点击放大" width="807.3100000000001"></span></p> <p></p></li><li id="li14599817113912"><span>对于耗时超过阈值的序列化、反序列化操作，Anomaly也会给出对应的耗时告警。其中可以通过泳道启动配置按钮配置检测阈值，默认配置阈值为8ms。</span></li><li id="li010217504220"><span>详情区给出录制时段内序列化、反序列化耗时情况统计信息，包括类型、计数、总耗时、最小耗时、平均耗时、最大耗时、耗时标准差等。</span><p></p><p id="ZH-CN_TOPIC_0000002510174361__p1963820817436"><span><img height="322.29890000000006" originheight="612" originwidth="1542" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104931.52208101749805282431537195390268:50001231000000:2800:13595FE4A4A4B672546C95433F4C0936F6BCF605273B68156C8B9C78AAEB9A13.png" title="点击放大" width="807.3100000000001"></span></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002510174361__p6654914135810">已上架应用市场的应用不支持录制Anomaly泳道。</p> </div></div></div> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section124751346184313">User Events泳道：查看用户事件耗时<i class="anchor-icon anchor-icon-link" anchorid="section124751346184313" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510174361__p27552217472">开发者在卡顿丢帧场景可通过User Event用户事件，查看用户事件开始时间、应用开始处理时间以及应用处理耗时等情况。</p> <ol id="ZH-CN_TOPIC_0000002510174361__ol129634816529"><li id="li596194810522"><span>选择User Event泳道，在时间轴上拖拽鼠标选定要查看的时间段。</span></li><li id="li189784916532"><span>详情区列表给出录制时间段内用户事件详情，包括用户事件ID、事件开始时间Input Time、应用开始处理时间Processing Start、应用处理耗时Duration和事件类型User Event Type。</span><p></p><p id="ZH-CN_TOPIC_0000002510174361__p427613411748"><span><img height="325.7968" originheight="605" originwidth="1508" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104931.02696544383568699747399116883632:50001231000000:2800:4E99E5EBF788A11D03466FB685D851C3B3C4C2444CBCF189895545A49764F846.png" title="点击放大" width="807.3100000000001"></span></p> <p></p></li><li id="li20947115519618"><span>点选User Event泳道中的条块，Slice详情区展示该事件的详情信息。</span><p></p><p id="ZH-CN_TOPIC_0000002510174361__p1811119211893"><span><img height="250.7183" originheight="476" originwidth="1546" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104931.91045038767633226246067439813948:50001231000000:2800:D804058F067ECE0CBA2AF3AF258E4D27D0E2D2565C881FBD3426A11962DD0518.png" title="点击放大" width="807.3100000000001"></span></p> <p></p></li></ol> <p id="ZH-CN_TOPIC_0000002510174361__p178211744174316">更多性能调优最佳实践，请参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-click-to-click-response-optimization" target="_blank">点击响应时延分析</a>、<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-click-to-complete-delay-analysis" target="_blank">点击完成时延分析</a>、<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-zhenlv" target="_blank">帧率问题分析</a>、<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-web-click-response-delay-analysis" target="_blank">Web点击响应时延分析</a>、<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-web-completion-delay-analysis" target="_blank">Web加载完成时延分析</a>。</p> </div> <div class="section" id="section17961105931715"><p id="ZH-CN_TOPIC_0000002510174361__p788125414546"></p> </div> </div> <div></div></div>