<h1 _ngcontent-rfd-c119="" class="doc-title ng-star-inserted" title="HAR"> HAR </h1>

<div _ngcontent-rfd-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>HAR（Harmony Archive）是静态共享包，可以包含代码、C++库、资源和配置文件。通过HAR可以实现多个模块或多个工程共享ArkUI组件、资源等相关代码。</p>    <div class="tiledSection">     <h2 id="使用场景">使用场景<i class="anchor-icon anchor-icon-link" anchorid="使用场景" tips="复制节点链接"></i></h2>          <ul>      <li>支持应用内共享，也可以作为二方库（SDK）、三方库（SDK）发布后供其他应用使用。</li>      <li>作为二方库（SDK），发布到<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo" target="_blank">OHPM私仓</a>，供公司内部其他应用使用。</li>      <li>作为三方库（SDK），发布到<a href="https://ohpm.openharmony.cn/#/cn/home" target="_blank">OHPM中心仓</a>，供其他应用使用。</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="约束限制">约束限制<i class="anchor-icon anchor-icon-link" anchorid="约束限制" tips="复制节点链接"></i></h2>          <ul>      <li>HAR不支持在设备上单独安装或运行，只能作为应用模块的依赖项被引用。</li>      <li>从API version 14开始，HAR支持在配置文件中声明<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-overview">UIAbility</a>组件，配置UIAbility的方法参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-add-new-ability#section18658758104318" target="_blank">在模块中添加Ability</a>，拉起HAR中UIAbility的方式与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-intra-device-interaction">启动应用内的UIAbility</a>方法相同。</li>     </ul>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>如果使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#startability" target="_blank">startAbility</a>接口拉起HAR中的UIAbility，接口参数中的moduleName取值需要为依赖该HAR的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hap-package">HAP</a>/<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/in-app-hsp">HSP</a>的moduleName。</p>      </div></div></div>     <ul>      <li>从API version 18开始，HAR支持在配置文件中声明<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/extensionability-overview">ExtensionAbility</a>组件，但不支持具有入口能力的ExtensionAbility（即skill标签配置了entity.system.home和ohos.want.action.home）。HAR中配置ExtensionAbility的方法和支持的类型请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-add-new-ability#section18891639459" target="_blank">模块中添加ExtensionAbility</a>。API version 17及之前版本，不支持在配置文件中声明<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/extensionability-overview">ExtensionAbility</a>组件。</li>      <li>HAR不支持在配置文件中声明<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#pages标签">pages</a>页面，但是可以包含pages页面，并通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-navigation-navigation#路由操作">Navigation跳转</a>的方式进行跳转。</li>      <li>HAR不支持引用AppScope目录中的资源。在编译构建时，AppScope中的内容不会打包到HAR中，因此会导致HAR资源引用失败。</li>      <li>由于HSP仅支持应用内共享，如果HAR依赖了HSP，则该HAR文件仅支持应用内共享，不支持发布到二方仓或三方仓供其他应用使用，否则会导致编译失败。</li>      <li>多包（HAP/HSP）引用相同的HAR时，会造成多包间代码和资源的重复拷贝，从而导致应用包变大。</li>      <li>HAR可以依赖其他HAR或者HSP，但不支持循环依赖，也不支持依赖传递。</li>      <li>HAP引用HAR时，在编译构建过程中系统会自动合并两者的权限配置。因此开发者无需在HAP和HAR中重复申请相同权限。</li>     </ul>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>循环依赖：例如有三个HAR，HAR-A、HAR-B和HAR-C，循环依赖指HAR-A依赖HAR-B，HAR-B依赖HAR-C，HAR-C又依赖HAR-A。</p>       <p>依赖传递：例如有三个HAR，HAR-A、HAR-B和HAR-C，依赖关系是HAR-A依赖HAR-B，HAR-B依赖HAR-C。不支持传递依赖指HAR-A可以使用HAR-B的方法和组件，但是HAR-A不能直接使用HAR-C的方法和组件。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="创建">创建<i class="anchor-icon anchor-icon-link" anchorid="创建" tips="复制节点链接"></i></h2>          <p>开发者可以通过DevEco Studio创建一个用于调用C++代码的HAR模块，创建过程中需要在Configure New Module界面中开启Enable native。详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-har#section643521083015" target="_blank">创建库模块</a>。</p>    </div>    <div class="tiledSection">     <h2 id="开发">开发<i class="anchor-icon anchor-icon-link" anchorid="开发" tips="复制节点链接"></i></h2>          <p>介绍如何导出HAR的ArkUI组件、接口、资源，供其他应用或当前应用的其他模块引用。</p>     <p>Index.ets文件是HAR导出声明文件的入口，HAR需要导出的接口，统一在Index.ets文件中导出。Index.ets文件是DevEco Studio默认自动生成的，开发者也可以自定义，在模块的oh-package.json5文件中的main字段配置入口声明文件，配置如下所示：</p>     <div _ngcontent-rfd-c106="" class="highlight-div"><div _ngcontent-rfd-c106="" class="highlight-div-header"><div _ngcontent-rfd-c106="" class="highlight-div-header-left"><div _ngcontent-rfd-c106="" class="handle-button expand-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfd-c106="" class="highlight-div-header-right"><div _ngcontent-rfd-c106="" class="handle-button ai-button"></div><div _ngcontent-rfd-c106="" class="handle-button line-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfd-c106="" class="handle-button theme-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfd-c106="" class="handle-button copy-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfd-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Index.ets"</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>HAR在和宿主应用一起编译时，会把HAR的代码直接编译到宿主应用中，HAR包是一个编译中间态产物，不是最终的运行实体。运行时，HAR运行的身份信息是其宿主应用，系统会以宿主应用的版本做行为区分。如果需要在HAR中区分宿主应用的版本做不同的行为区分，可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-bundlemanager#bundlemanagergetbundleinfoforself" target="_blank">getBundleInfoForSelf</a>接口，获取宿主应用的targetVersion，然后根据不同的targetVersion，做不同的逻辑处理。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="导出arkui组件" class="firsth2">导出ArkUI组件<i class="anchor-icon anchor-icon-link" anchorid="导出arkui组件" tips="复制节点链接"></i></h3>          <p>通过export导出ArkUI组件，示例如下：</p>     <div _ngcontent-rfd-c106="" class="highlight-div"><div _ngcontent-rfd-c106="" class="highlight-div-header"><div _ngcontent-rfd-c106="" class="highlight-div-header-left"><div _ngcontent-rfd-c106="" class="handle-button expand-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfd-c106="" class="highlight-div-header-right"><div _ngcontent-rfd-c106="" class="handle-button ai-button"></div><div _ngcontent-rfd-c106="" class="handle-button line-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfd-c106="" class="handle-button theme-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfd-c106="" class="handle-button copy-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// library/src/main/ets/components/mainpage/MainPage.ets</span></li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">MainPage</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'HAR MainPage'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">32</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-string">'32px'</span> })</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">56</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'624px'</span>)</li><li>
</li><li>      <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">alignContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.pic_empty'</span>)).<span class="hljs-title function_">width</span>(<span class="hljs-string">'33%'</span>)</li><li>          <span class="hljs-title class_">Text</span>($r(<span class="hljs-string">'app.string.empty'</span>))</li><li>            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">14</span>)</li><li>            .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'app.color.text_color'</span>))</li><li>        }</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'90%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'app.color.page_background'</span>))</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>HAR对外暴露的接口，在Index.ets导出文件中声明如下所示：</p>     <div _ngcontent-rfd-c106="" class="highlight-div"><div _ngcontent-rfd-c106="" class="highlight-div-header"><div _ngcontent-rfd-c106="" class="highlight-div-header-left"><div _ngcontent-rfd-c106="" class="handle-button expand-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfd-c106="" class="highlight-div-header-right"><div _ngcontent-rfd-c106="" class="handle-button ai-button"></div><div _ngcontent-rfd-c106="" class="handle-button line-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfd-c106="" class="handle-button theme-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfd-c106="" class="handle-button copy-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// library/Index.ets</span></li><li><span class="hljs-keyword">export</span> { <span class="hljs-title class_">MainPage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./src/main/ets/components/mainpage/MainPage'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="导出类和方法">导出类和方法<i class="anchor-icon anchor-icon-link" anchorid="导出类和方法" tips="复制节点链接"></i></h3>          <p>通过export导出类和方法，支持导出多个类和方法，示例如下所示：</p>     <div _ngcontent-rfd-c106="" class="highlight-div"><div _ngcontent-rfd-c106="" class="highlight-div-header"><div _ngcontent-rfd-c106="" class="highlight-div-header-left"><div _ngcontent-rfd-c106="" class="handle-button expand-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfd-c106="" class="highlight-div-header-right"><div _ngcontent-rfd-c106="" class="handle-button ai-button"></div><div _ngcontent-rfd-c106="" class="handle-button line-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfd-c106="" class="handle-button theme-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfd-c106="" class="handle-button copy-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// library/src/main/ets/test.ets</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Log</span> {</li><li>    <span class="hljs-keyword">static</span> <span class="hljs-title function_">info</span>(<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(msg);</li><li>    }</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">func</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-string">'har func'</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">func2</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-string">'har func2'</span>;</li><li>}</li></ol></pre></div></div>     <p>HAR对外暴露的接口，在Index.ets导出文件中声明如下所示：</p>     <div _ngcontent-rfd-c106="" class="highlight-div"><div _ngcontent-rfd-c106="" class="highlight-div-header"><div _ngcontent-rfd-c106="" class="highlight-div-header-left"><div _ngcontent-rfd-c106="" class="handle-button expand-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfd-c106="" class="highlight-div-header-right"><div _ngcontent-rfd-c106="" class="handle-button ai-button"></div><div _ngcontent-rfd-c106="" class="handle-button line-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfd-c106="" class="handle-button theme-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfd-c106="" class="handle-button copy-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// library/Index.ets</span></li><li><span class="hljs-keyword">export</span> { <span class="hljs-title class_">Log</span>, func, func2 } <span class="hljs-keyword">from</span> <span class="hljs-string">'./src/main/ets/test'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="导出native方法">导出native方法<i class="anchor-icon anchor-icon-link" anchorid="导出native方法" tips="复制节点链接"></i></h3>          <p>在HAR中也可以包含C++编写的so。对于so中的native方法，HAR通过以下方式导出，以导出liblibrary.so的加法接口add为例：</p>     <div _ngcontent-rfd-c106="" class="highlight-div"><div _ngcontent-rfd-c106="" class="highlight-div-header"><div _ngcontent-rfd-c106="" class="highlight-div-header-left"><div _ngcontent-rfd-c106="" class="handle-button expand-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfd-c106="" class="highlight-div-header-right"><div _ngcontent-rfd-c106="" class="handle-button ai-button"></div><div _ngcontent-rfd-c106="" class="handle-button line-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfd-c106="" class="handle-button theme-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfd-c106="" class="handle-button copy-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// library/src/main/ets/utils/nativeTest.ets</span></li><li><span class="hljs-keyword">import</span> native <span class="hljs-keyword">from</span> <span class="hljs-string">'liblibrary.so'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">nativeAdd</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-built_in">number</span> = native.<span class="hljs-title function_">add</span>(a, b);</li><li>  <span class="hljs-keyword">return</span> result;</li><li>}</li></ol></pre></div></div>     <p>HAR对外暴露的接口，在Index.ets导出文件中声明如下所示：</p>     <div _ngcontent-rfd-c106="" class="highlight-div"><div _ngcontent-rfd-c106="" class="highlight-div-header"><div _ngcontent-rfd-c106="" class="highlight-div-header-left"><div _ngcontent-rfd-c106="" class="handle-button expand-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfd-c106="" class="highlight-div-header-right"><div _ngcontent-rfd-c106="" class="handle-button ai-button"></div><div _ngcontent-rfd-c106="" class="handle-button line-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfd-c106="" class="handle-button theme-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfd-c106="" class="handle-button copy-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// library/Index.ets</span></li><li><span class="hljs-keyword">export</span> { nativeAdd } <span class="hljs-keyword">from</span> <span class="hljs-string">'./src/main/ets/utils/nativeTest'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="导出资源">导出资源<i class="anchor-icon anchor-icon-link" anchorid="导出资源" tips="复制节点链接"></i></h3>          <p>在编译构建HAP时，DevEco Studio会从HAP模块及依赖的模块中收集资源文件，如果不同模块下的资源文件出现重名冲突时，DevEco Studio会按照以下优先级进行覆盖（优先级由高到低）：</p>     <ul>      <li>AppScope（仅Stage模型支持）。</li>      <li>HAP包自身模块。</li>      <li>依赖的HAR模块，如果依赖的多个HAR之间有资源冲突，会按照工程oh-package.json5中dependencies下的依赖顺序进行覆盖，依赖顺序在前的优先级较高。例如下方示例中dayjs和lottie中包含同名文件时，会优先使用dayjs中的资源。       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p>如果在AppScope、HAP模块或HAR模块的国际化目录中配置了资源，在相同的国际化限定词下，合并的优先级也遵循上述规则。同时，国际化限定词中配置的优先级高于在base中的配置。例如，在AppScope的base中配置了资源字段，在HAR模块的en_US中配置了同样的资源字段，则在en_US的使用场景中，会更优先使用HAR模块中配置的资源字段。</p>        </div></div></div></li>     </ul>     <div _ngcontent-rfd-c106="" class="highlight-div"><div _ngcontent-rfd-c106="" class="highlight-div-header"><div _ngcontent-rfd-c106="" class="highlight-div-header-left"><div _ngcontent-rfd-c106="" class="handle-button expand-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfd-c106="" class="highlight-div-header-right"><div _ngcontent-rfd-c106="" class="handle-button ai-button"></div><div _ngcontent-rfd-c106="" class="handle-button line-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfd-c106="" class="handle-button theme-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfd-c106="" class="handle-button copy-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// oh-package.json5</span></li><li>{</li><li>  <span class="hljs-string">"dependencies"</span>: {</li><li>    <span class="hljs-string">"dayjs"</span>: <span class="hljs-string">"^1.10.4"</span>,</li><li>    <span class="hljs-string">"lottie"</span>: <span class="hljs-string">"^2.0.0"</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="使用">使用<i class="anchor-icon anchor-icon-link" anchorid="使用" tips="复制节点链接"></i></h2>          <p>介绍如何配置HAR依赖，并引用HAR的ArkUI组件、接口、资源。</p>     <p>引用HAR前，需要先配置对HAR的依赖，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-har-import" target="_blank">引用HAR文件和资源</a>。</p>    </div>    <div class="tiledSection">     <h3 id="引用har的arkui组件" class="firsth2">引用HAR的ArkUI组件<i class="anchor-icon anchor-icon-link" anchorid="引用har的arkui组件" tips="复制节点链接"></i></h3>          <p>HAR的依赖配置成功后，可以引用HAR的ArkUI组件。通过import引入HAR导出的ArkUI组件，示例如下所示：</p>     <div _ngcontent-rfd-c106="" class="highlight-div"><div _ngcontent-rfd-c106="" class="highlight-div-header"><div _ngcontent-rfd-c106="" class="highlight-div-header-left"><div _ngcontent-rfd-c106="" class="handle-button expand-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfd-c106="" class="highlight-div-header-right"><div _ngcontent-rfd-c106="" class="handle-button ai-button"></div><div _ngcontent-rfd-c106="" class="handle-button line-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfd-c106="" class="handle-button theme-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfd-c106="" class="handle-button copy-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// entry/src/main/ets/pages/IndexSec.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MainPage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'library'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">IndexSec</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-comment">// 引用HAR的ArkUI组件</span></li><li>      <span class="hljs-title class_">MainPage</span>()</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="引用har的类和方法">引用HAR的类和方法<i class="anchor-icon anchor-icon-link" anchorid="引用har的类和方法" tips="复制节点链接"></i></h3>          <p>通过import引用HAR导出的类和方法，示例如下所示：</p>     <div _ngcontent-rfd-c106="" class="highlight-div"><div _ngcontent-rfd-c106="" class="highlight-div-header"><div _ngcontent-rfd-c106="" class="highlight-div-header-left"><div _ngcontent-rfd-c106="" class="handle-button expand-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfd-c106="" class="highlight-div-header-right"><div _ngcontent-rfd-c106="" class="handle-button ai-button"></div><div _ngcontent-rfd-c106="" class="handle-button line-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfd-c106="" class="handle-button theme-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfd-c106="" class="handle-button copy-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// entry/src/main/ets/pages/Index.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Log</span>, func } <span class="hljs-keyword">from</span> <span class="hljs-string">'library'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>        .<span class="hljs-title function_">fontFamily</span>(<span class="hljs-string">'HarmonyHeiTi'</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">32</span>)</li><li>
</li><li>      <span class="hljs-comment">//引用HAR的ets类和方法</span></li><li>      <span class="hljs-title class_">Button</span>($r(<span class="hljs-string">'app.string.button'</span>))</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'button'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">48</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'624px'</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-string">'4%'</span> })</li><li>        .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 引用HAR的类和方法</span></li><li>          <span class="hljs-title class_">Log</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'har msg'</span>);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-string">'func return: '</span> + <span class="hljs-title function_">func</span>();</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'app.color.page_background'</span>))</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="引用har的native方法">引用HAR的native方法<i class="anchor-icon anchor-icon-link" anchorid="引用har的native方法" tips="复制节点链接"></i></h3>          <p>通过import引用HAR导出的native方法，示例如下所示：</p>     <div _ngcontent-rfd-c106="" class="highlight-div"><div _ngcontent-rfd-c106="" class="highlight-div-header"><div _ngcontent-rfd-c106="" class="highlight-div-header-left"><div _ngcontent-rfd-c106="" class="handle-button expand-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfd-c106="" class="highlight-div-header-right"><div _ngcontent-rfd-c106="" class="handle-button ai-button"></div><div _ngcontent-rfd-c106="" class="handle-button line-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfd-c106="" class="handle-button theme-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfd-c106="" class="handle-button copy-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// entry/src/main/ets/pages/Index.ets</span></li><li><span class="hljs-keyword">import</span> { nativeAdd } <span class="hljs-keyword">from</span> <span class="hljs-string">'library'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>        .<span class="hljs-title function_">fontFamily</span>(<span class="hljs-string">'HarmonyHeiTi'</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">32</span>)</li><li>
</li><li>      <span class="hljs-comment">//引用HAR的native方法</span></li><li>      <span class="hljs-title class_">Button</span>($r(<span class="hljs-string">'app.string.native_add'</span>))</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'nativeAdd'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">48</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'624px'</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-string">'4%'</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-string">'6%'</span> })</li><li>        .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-string">'result: '</span> + <span class="hljs-title function_">nativeAdd</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'app.color.page_background'</span>))</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="引用har的资源">引用HAR的资源<i class="anchor-icon anchor-icon-link" anchorid="引用har的资源" tips="复制节点链接"></i></h3>          <p>通过$r引用HAR中的资源，例如在HAR模块的src/main/resources里添加字符串资源（在string.json中定义，name：hello_har）和图片资源（icon_har.png），然后在Entry模块中引用该字符串和图片资源的示例如下所示：</p>     <div _ngcontent-rfd-c106="" class="highlight-div"><div _ngcontent-rfd-c106="" class="highlight-div-header"><div _ngcontent-rfd-c106="" class="highlight-div-header-left"><div _ngcontent-rfd-c106="" class="handle-button expand-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfd-c106="" class="highlight-div-header-right"><div _ngcontent-rfd-c106="" class="handle-button ai-button"></div><div _ngcontent-rfd-c106="" class="handle-button line-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfd-c106="" class="handle-button theme-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfd-c106="" class="handle-button copy-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// entry/src/main/ets/pages/Index.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 引用HAR的字符串资源</span></li><li>      <span class="hljs-title class_">Text</span>($r(<span class="hljs-string">'app.string.hello_har'</span>))</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'stringHar'</span>)</li><li>        .<span class="hljs-title function_">fontFamily</span>(<span class="hljs-string">'HarmonyHeiTi'</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'app.color.text_color'</span>))</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-number">500</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-string">'40%'</span> })</li><li>
</li><li>      <span class="hljs-title class_">List</span>() {</li><li>        <span class="hljs-title class_">ListItem</span>() {</li><li>          <span class="hljs-comment">// 引用HAR的图片资源</span></li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.icon_har'</span>))</li><li>            .<span class="hljs-title function_">id</span>(<span class="hljs-string">'iconHar'</span>)</li><li>            .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-string">'48px'</span>)</li><li>        }</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-string">'5%'</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'312px'</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">alignListItem</span>(<span class="hljs-title class_">ListItemAlign</span>.<span class="hljs-property">Center</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'app.color.page_background'</span>))</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="编译">编译<i class="anchor-icon anchor-icon-link" anchorid="编译" tips="复制节点链接"></i></h2>          <p>HAR可以作为二方库和三方库提供给其他应用使用，如果需要对代码资产进行保护，建议<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/source-obfuscation-guide#开启源码混淆">开启混淆</a>。</p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/source-obfuscation">混淆能力</a>开启后，DevEco Studio在构建HAR时，会对代码进行编译、混淆及压缩处理，保护代码资产。</p>     <p>HAR模块原先默认开启混淆能力，会对API 10及以上的HAR模块，且编译模块为release时，自动进行简单的代码混淆；<strong>从DevEco Studio 5.0.3.600开始，新建工程默认关闭代码混淆功能</strong>，可以在HAR模块的build-profile.json5文件中的ruleOptions字段下的enable进行开启混淆，详情请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-build-obfuscation" target="_blank">代码混淆</a>，配置如下所示：</p>     <div _ngcontent-rfd-c106="" class="highlight-div"><div _ngcontent-rfd-c106="" class="highlight-div-header"><div _ngcontent-rfd-c106="" class="highlight-div-header-left"><div _ngcontent-rfd-c106="" class="handle-button expand-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfd-c106="" class="highlight-div-header-right"><div _ngcontent-rfd-c106="" class="handle-button ai-button"></div><div _ngcontent-rfd-c106="" class="handle-button line-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfd-c106="" class="handle-button theme-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfd-c106="" class="handle-button copy-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfd-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"apiType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stageMode"</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"buildOption"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"buildOptionSet"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>    <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"release"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"arkOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"obfuscation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>          <span class="hljs-attr">"ruleOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"enable"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"files"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>              <span class="hljs-string">"./obfuscation-rules.txt"</span></li><li>            <span class="hljs-punctuation">]</span></li><li>          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>          <span class="hljs-attr">"consumerFiles"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>            <span class="hljs-string">"./consumer-rules.txt"</span></li><li>          <span class="hljs-punctuation">]</span></li><li>        <span class="hljs-punctuation">}</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"targets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>    <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"default"</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="编译生成ts文件" class="firsth2">编译生成TS文件<i class="anchor-icon anchor-icon-link" anchorid="编译生成ts文件" tips="复制节点链接"></i></h3>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>在HAR中使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable">Sendable</a>时，开启该配置。</p>      </div></div></div>     <p><strong>使用限制</strong></p>     <p>在依赖TS HAR时，禁止引用TS HAR中的ArkUI组件。</p>     <p>HAR模块中arkts文件编译后，默认产物为js文件，想要将产物修改为ts文件，可以在HAR模块下的module.json5文件中将"metadata"字段下的"name"设置为“UseTsHar”，配置如下所示：</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从DevEco Studio NEXT Beta1（5.0.3.800）版本开始，默认构建字节码HAR，详情参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-build-har" target="_blank">构建HAR</a>。</p>      </div></div></div>     <div _ngcontent-rfd-c106="" class="highlight-div"><div _ngcontent-rfd-c106="" class="highlight-div-header"><div _ngcontent-rfd-c106="" class="highlight-div-header-left"><div _ngcontent-rfd-c106="" class="handle-button expand-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfd-c106="" class="highlight-div-header-right"><div _ngcontent-rfd-c106="" class="handle-button ai-button"></div><div _ngcontent-rfd-c106="" class="handle-button line-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfd-c106="" class="handle-button theme-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfd-c106="" class="handle-button copy-button"><div _ngcontent-rfd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfd-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"TsClosedHar"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"har"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"deviceTypes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-string">"default"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-string">"tablet"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-string">"2in1"</span></li><li>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"UseTsHar"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"true"</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="发布">发布<i class="anchor-icon anchor-icon-link" anchorid="发布" tips="复制节点链接"></i></h2>          <p>详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-har-publish" target="_blank">发布HAR</a>。</p>    </div>   </div>   <div></div></div>