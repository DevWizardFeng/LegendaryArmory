<h1 _ngcontent-rdd-c119="" class="doc-title ng-star-inserted" title="Image Kit简介"> Image Kit简介 </h1>

<div _ngcontent-rdd-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>开发者通过调用Image Kit（图片处理服务）提供的接口，可以实现图片的解码、编码、编辑、元数据处理和图片接收等功能。</p>    <div class="tiledSection">     <h2 id="亮点特征">亮点/特征<i class="anchor-icon anchor-icon-link" anchorid="亮点特征" tips="复制节点链接"></i></h2>          <ul>      <li>编解码支持HEIF、JPEG、PNG、WebP等主流图片格式。</li>      <li>支持HDR图片编解码，给用户带来更高质量的色彩体验，还可以使用AI能力将SDR图片转换成HDR图片。</li>      <li>提供丰富的图片编辑和处理的能力，包括：图像变换、位图操作、滤镜效果等。</li>      <li>采用了高效的算法和优化策略，提高了图片处理的速度和效率。</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="基础概念">基础概念<i class="anchor-icon anchor-icon-link" anchorid="基础概念" tips="复制节点链接"></i></h2>          <p>在开发前，需要了解以下基础概念：</p>     <ul>      <li>       <p>PixelMap</p>       <p>位图对象。可用于读取或写入像素数据，可以进行裁剪、缩放、平移、旋转、镜像等操作，并可直接传给<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-graphics-display">Image组件</a>用于显示。还提供了获取图片信息、获取和设置图片色域、HDR元数据的方法。</p></li>      <li>       <p>Picture</p>       <p>多图对象。包含主图、辅助图和元数据。其中，主图包含了主要图像信息；辅助图用于存储与主图相关的附加信息；元数据用于存储与图片相关的其他信息。Picture提供获取主图、合成HDR图、获取辅助图、设置辅助图、获取元数据、设置元数据等方法。</p></li>      <li>       <p>图片解码</p>       <p>将所支持格式的图片文件解码成PixelMap或Picture，以便在应用或系统中进行图片显示或图片处理。</p></li>      <li>       <p>图片编辑和处理</p>       <p>对PixelMap进行相关的操作，如旋转、缩放、设置透明度、获取图片信息、读写像素数据等，操作时坐标系原点为左上角。</p></li>      <li>       <p>图片编码</p>       <p>将PixelMap（或Picture）编码成不同格式的图片文件，用于后续处理，如保存、传输等。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="使用方式">使用方式<i class="anchor-icon anchor-icon-link" anchorid="使用方式" tips="复制节点链接"></i></h2>          <p>Image Kit提供了丰富的图片处理能力，开发者可按需灵活使用。既可以完整调用图片解码、编辑处理、编码的全流程；也可以图片解码后不做处理，直接将解码得到的PixelMap传给<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-graphics-display">Image组件</a>显示。解码、编码过程中均提供了丰富的选项参数，可以满足各种实际开发场景的需求。</p>     <p>Image Kit支持对解码得到的PixelMap进行<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-pixelmap-operation">位图操作</a>，对目标图片中的部分区域进行处理；实现<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-transformation">图像变换</a>，可以对图片做裁剪、缩放、偏移、旋转、翻转、设置透明度等变换。</p>     <p>还可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-effect-guidelines">ImageEffect</a>为图片添加滤镜效果；使用ImageProcessing进行图片细节增强，色彩空间转换以及HDR图片处理。</p>     <p>Image Kit还提供了读取和编辑图片EXIF信息的能力，可以获取和配置图片文件中的附加属性，如：宽、高、旋转方向等图片基本信息，光圈、焦距等图片拍照参数，经度、纬度等图片GPS信息等。</p>     <p>图片解码和图片编码的流程如图1和图2所示。图片解码得到的PixelMap可以直接用于图片显示、图片编辑和处理。</p>     <p><strong>图1</strong> 图片解码流程示意图</p>     <p><span><img originheight="720" originwidth="1180" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114416.32286948432568556166258356537382:50001231000000:2800:237A2CFC2467A8A1B31146D4B65D6782F1FF67CD5F2AA23B2E5493D72C83FC66.png" width="920" height="561.3559322033899"></span></p>     <p><strong>图2</strong> 图片编码流程示意图</p>     <p><span><img originheight="720" originwidth="1180" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114416.01226238195132474701944715090552:50001231000000:2800:A36269C08227660B7B8E40E5FC112120F32F633379FE39EE06023486635CB6F3.png" width="920" height="561.3559322033899"></span></p>    </div>    <div class="tiledSection">     <h2 id="约束与限制">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="约束与限制" tips="复制节点链接"></i></h2>          <ul>      <li>       <p><strong>读写权限限制：</strong></p>       <p>在图片处理中，可能需要使用用户图片，应用需要向用户申请对应的读写操作权限才能保证功能的正常运行，申请方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/request-user-authorization">向用户申请授权</a>。</p></li>      <li>       <p><strong>选择合适的C API接口：</strong></p>       <p>Image Kit当前提供了两套C API接口，分别为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image" target="_blank">依赖于JS对象的C API</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-nativemodule" target="_blank">不依赖于JS对象的C API</a>。</p>       <ul>        <li>         <p>依赖于JS对象的C接口</p>         <p>这类接口可以完成图片编解码，图片接收器，处理图像数据等功能，相关示例代码可以参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-decoding-native">图片开发指导(依赖JS对象)(C/C++)</a>节点下的内容。开发者可查看<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image" target="_blank">Image</a>模块下的C API，确认API范围。这部分API在API version 11之前发布，在后续的版本不再增加新功能，<strong>不再推荐使用</strong>。</p></li>        <li>         <p>不依赖于JS对象的C接口</p>         <p>这类接口除了提供上述图片框架基础功能，还可以完成多图编解码等新特性，相关开发指导请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-source-c">图片开发指导(C/C++)</a>节点下的内容。开发者可查看<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-nativemodule" target="_blank">Image_NativeModule</a>模块下的C API，确认API范围。这部分API从API version 12开始支持，并将持续演进，<strong>推荐开发者使用</strong>。</p></li>       </ul>       <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">         <p>两套C API不建议同时使用，在部分场景下存在不兼容的问题。</p>        </div></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="与相关kit的关系">与相关Kit的关系<i class="anchor-icon anchor-icon-link" anchorid="与相关kit的关系" tips="复制节点链接"></i></h2>          <p>Image Kit提供图片编解码、图片接收、图片编辑和处理等能力，为Image组件、图库以及其他有图片相关需求的应用提供支撑。图片解码得到的PixelMap可以传给<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-graphics-display">Image组件</a>显示。通过ImageReceiver（图片接收）可以实现<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/native-camera-preview-imagereceiver">相机预览流二次处理</a>。</p>    </div>   </div>   <div></div></div>