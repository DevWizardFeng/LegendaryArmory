<h1 _ngcontent-wuv-c119="" class="doc-title ng-star-inserted" title="JS Crash（进程崩溃）检测"> JS Crash（进程崩溃）检测 </h1>

<div _ngcontent-wuv-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="简介">简介<i class="anchor-icon anchor-icon-link" anchorid="简介" tips="复制节点链接"></i></h2>          <p>在ArkTS应用中，Crash（崩溃）检测是一项重要的监控能力，它可以帮助开发者及时发现和修复应用中的问题。</p>    </div>    <div class="tiledSection">     <h2 id="检测原理">检测原理<i class="anchor-icon anchor-icon-link" anchorid="检测原理" tips="复制节点链接"></i></h2>          <p>方舟运行时捕获进程异常。生成故障日志的流程如下：</p>     <ol>      <li>       <p>当代码执行时，未捕获的异常或错误导致应用崩溃，方舟运行时将捕获这些异常。</p></li>      <li>       <p>方舟运行时收集故障信息，并将其上报给维测进程Hiview。</p></li>      <li>       <p>维测进程Hiview补充仅其有权限获取的信息(如整机内存状态、应用页面切换轨迹)，生成对应的崩溃日志文件, 存储在“/data/log/faultlog/faultlogger”目录下。</p></li>      <li>       <p>上报崩溃事件，开发者可通过HiAppEvent订阅<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-crash-events">崩溃事件</a>。如需了解JS Crash问题分析方法，请参见<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-stability-app-crash-js-way" target="_blank">JS Crash类问题分析方法</a>。</p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="约束与限制">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="约束与限制" tips="复制节点链接"></i></h2>          <p>在async修饰的异步函数中主动抛出异常，不会产生JS Crash导致应用崩溃，开发者可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-errormanager#errormanageronerror" target="_blank">ErrorManager</a>观测该异常，样例代码参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-runtime-faq#async函数内部异常的处理机制">Async函数内部异常的处理机制</a>。</p>    </div>    <div class="tiledSection">     <h2 id="日志获取">日志获取<i class="anchor-icon anchor-icon-link" anchorid="日志获取" tips="复制节点链接"></i></h2>          <p>进程崩溃日志是一种故障日志，由FaultLogger模块进行管理，可通过以下方式获取：</p>     <p><strong>方式一：通过DevEco Studio获取日志</strong></p>     <p>DevEco Studio会收集设备/data/log/faultlog/faultlogger/路径下的进程崩溃故障日志到FaultLog中，根据进程名、故障和时间分类显示。获取日志的方法参见：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-fault-log" target="_blank">DevEco Studio使用指南-FaultLog</a>。</p>     <p><strong>方式二：通过HiAppEvent接口订阅</strong></p>     <p>HiAppEvent给开发者提供了故障订阅接口，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-intro">HiAppEvent介绍</a>。参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-crash-events-arkts">订阅崩溃事件（ArkTS）</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-crash-events-ndk">订阅崩溃事件（C/C++）</a>完成崩溃事件订阅，再通过事件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-crash-events#事件字段说明">external_log</a>字段读取故障日志文件内容。</p>     <p><strong>方式三：通过hdc获取日志，需打开开发者选项</strong></p>     <p>在开发者选项打开的情况下，开发者可以通过如下命令获取日志至本地。</p>     <div _ngcontent-wuv-c106="" class="highlight-div"><div _ngcontent-wuv-c106="" class="highlight-div-header"><div _ngcontent-wuv-c106="" class="highlight-div-header-left"><div _ngcontent-wuv-c106="" class="handle-button expand-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wuv-c106="" class="highlight-div-header-right"><div _ngcontent-wuv-c106="" class="handle-button ai-button"></div><div _ngcontent-wuv-c106="" class="handle-button line-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wuv-c106="" class="handle-button theme-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wuv-c106="" class="handle-button copy-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wuv-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>hdc file recv /data/log/faultlog/faultlogger 本地路径</li></ol></pre></div></div>     <p>故障日志文件名格式为：jscrash-进程名-进程UID-毫秒级时间.log。</p>    </div>    <div class="tiledSection">     <h2 id="日志规格">日志规格<i class="anchor-icon anchor-icon-link" anchorid="日志规格" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.6.1.1" valign="top" width="20%">字段</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.6.1.2" valign="top" width="20%">描述</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.6.1.3" valign="top" width="20%">起始API版本</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.6.1.4" valign="top" width="20%">是否必选项</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.6.1.5" valign="top" width="20%">非必选说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="20%">Device info</td>         <td class="cellrowborder" valign="top" width="20%">设备信息</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Build info</td>         <td class="cellrowborder" valign="top" width="20%">版本信息</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Fingerprint</td>         <td class="cellrowborder" valign="top" width="20%">故障特征，聚类同类问题的哈希值</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Timestamp</td>         <td class="cellrowborder" valign="top" width="20%">时间戳</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Module name</td>         <td class="cellrowborder" valign="top" width="20%">包名/进程名</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Version</td>         <td class="cellrowborder" valign="top" width="20%">hap版本</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Version Code</td>         <td class="cellrowborder" valign="top" width="20%">版本编码</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Pid</td>         <td class="cellrowborder" valign="top" width="20%">故障进程号</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Uid</td>         <td class="cellrowborder" valign="top" width="20%">用户ID</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Process Memory(kB)</td>         <td class="cellrowborder" valign="top" width="20%">进程占用内存</td>         <td class="cellrowborder" valign="top" width="20%">20</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Device Memory(kB)</td>         <td class="cellrowborder" valign="top" width="20%">整机内存信息</td>         <td class="cellrowborder" valign="top" width="20%">20</td>         <td class="cellrowborder" valign="top" width="20%">否</td>         <td class="cellrowborder" valign="top" width="20%">依赖维测服务进程，若发生故障时维测服务进程停止或设备重启则无此字段，详见<a href="/consumer/cn/doc/harmonyos-guides/jscrash-guidelines#检测原理">检测原理</a>。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Page switch history</td>         <td class="cellrowborder" valign="top" width="20%">页面切换轨迹</td>         <td class="cellrowborder" valign="top" width="20%">20</td>         <td class="cellrowborder" valign="top" width="20%">否</td>         <td class="cellrowborder" valign="top" width="20%">如果维测服务进程出现故障或未缓存切换轨迹，则不包含此字段。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Reason</td>         <td class="cellrowborder" valign="top" width="20%">故障原因</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Error name</td>         <td class="cellrowborder" valign="top" width="20%">故障类型</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Error message</td>         <td class="cellrowborder" valign="top" width="20%">异常信息</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">Stacktrace</td>         <td class="cellrowborder" valign="top" width="20%">故障堆栈</td>         <td class="cellrowborder" valign="top" width="20%">8</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">SubmitterStacktrace</td>         <td class="cellrowborder" valign="top" width="20%">提交者线程栈</td>         <td class="cellrowborder" valign="top" width="20%">20</td>         <td class="cellrowborder" valign="top" width="20%">否</td>         <td class="cellrowborder" valign="top" width="20%">异步线程栈跟踪维测功能仅在ARM 64位系统环境下对debug版本应用开启。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">HiLog</td>         <td class="cellrowborder" valign="top" width="20%">故障之前打印的流水日志，最多1000行</td>         <td class="cellrowborder" valign="top" width="20%">20</td>         <td class="cellrowborder" valign="top" width="20%">是</td>         <td class="cellrowborder" valign="top" width="20%">-</td>        </tr>             </tbody></table></div>     </div>     <p>以下是JS Crash崩溃日志规格。</p>     <div _ngcontent-wuv-c106="" class="highlight-div"><div _ngcontent-wuv-c106="" class="highlight-div-header"><div _ngcontent-wuv-c106="" class="highlight-div-header-left"><div _ngcontent-wuv-c106="" class="handle-button expand-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wuv-c106="" class="highlight-div-header-right"><div _ngcontent-wuv-c106="" class="handle-button ai-button"></div><div _ngcontent-wuv-c106="" class="handle-button line-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wuv-c106="" class="handle-button theme-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wuv-c106="" class="handle-button copy-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wuv-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>Device info:XXX &lt;- 设备信息</li><li>Build info:XXX-XXXX X.X.X.XX(XXXXXXXX) &lt;- 版本信息</li><li>Fingerprint:ed1811f3f5ae13c7262b51aab73ddd01df95b2c64466a204e0d70e6461cf1697 &lt;- 故障特征</li><li>Timestamp:XXXX-XX-XX XX:XX:XX.XXX &lt;- 时间戳</li><li>Module name:com.example.myapplication &lt;- 包名/进程名</li><li>Version:1.0.0 &lt;- hap版本</li><li>VersionCode:1000000 &lt;- 版本编码</li><li>Pid:579 &lt;- 故障进程号</li><li>Uid:0 &lt;- 用户ID</li><li>Process Memory(kB): 1897(Rss) &lt;- 进程占用内存</li><li>Device Memory(kB): Total 1935820, Free 482136, Available 1204216  &lt;- 整机内存信息</li><li>Page switch history: &lt;- 页面切换轨迹</li><li>  14:08:30:327 /ets/pages/Index:JsError</li><li>  14:08:28:986 /ets/pages/Index</li><li>  14:08:07:606 :leaves foreground</li><li>  14:08:06:246 /ets/pages/Index:AppFreeze</li><li>  14:08:01:955 :enters foreground</li><li>Reason:TypeError &lt;- 故障原因</li><li>Error name:TypeError &lt;- 故障类型</li><li>Error message:Cannot read property c of undefined &lt;- 异常信息</li><li>Cannot get SourceMap info, dump raw stack: &lt;- 应用安装包为release包安装时不包含sourcemap文件，JS栈通过sourcemap行列号解析会失败</li><li>Stacktrace:</li><li>    at onPageShow entry (entry/src/main/ets/pages/Index.ets:7:13)  &lt;-异常代码调用堆栈</li><li>           ^        ^                              ^</li><li>         函数名   模块的包名                   文件行列号位置</li><li>
</li><li>HiLog:</li><li> ^</li><li> 在生成的崩溃日志文件中追加异常相关1000行hilog日志</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="异步线程栈跟踪故障场景日志规格" class="firsth2">异步线程栈跟踪故障场景日志规格<i class="anchor-icon anchor-icon-link" anchorid="异步线程栈跟踪故障场景日志规格" tips="复制节点链接"></i></h3>          <p>当异步线程发生崩溃后，把提交该异步任务的线程栈也打印出来，帮助定位由于异步任务提交者造成的崩溃问题。崩溃线程的调用栈和其提交线程的调用栈通过SubmitterStacktrace字符串分隔。以下是一份DevEco Studio归档在FaultLog的进程崩溃日志的核心内容。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>异步线程栈跟踪维测功能仅在ARM 64位系统环境下且应用处于debug模式下开启，在JSCrash崩溃打印Native堆栈时适用。</p>      </div></div></div>     <p>日志中Stacktrace字段规格如下：</p>     <div _ngcontent-wuv-c106="" class="highlight-div"><div _ngcontent-wuv-c106="" class="highlight-div-header"><div _ngcontent-wuv-c106="" class="highlight-div-header-left"><div _ngcontent-wuv-c106="" class="handle-button expand-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wuv-c106="" class="highlight-div-header-right"><div _ngcontent-wuv-c106="" class="handle-button ai-button"></div><div _ngcontent-wuv-c106="" class="handle-button line-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wuv-c106="" class="handle-button theme-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wuv-c106="" class="handle-button copy-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wuv-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>Stacktrace:</li><li>#00 pc 00000000004d9d4c /system/lib64/platformsdk/libark_jsruntime.so(panda::ecmascript::Backtrace(std::__h::basic_ostringstream&lt;char, std::__h::char_traits&lt;char&gt;, std::__h::allocator&lt;char&gt;&gt;&amp;, bool)+92)(723d1618fe2567539bed3038ccfe92d8)</li><li>#01 pc 000000000038ddcc /system/lib64/platformsdk/libark_jsruntime.so(panda::ecmascript::JsStackInfo::BuildJsStackTrace(panda::ecmascript::JSThread*, bool, panda::ecmascript::JSHandle&lt;panda::ecmascript::JSObject&gt; const&amp;, bool, unsigned int)+2952)(723d1618fe2567539bed3038ccfe92d8)</li><li>#02 pc 000000000038c70c /system/lib64/platformsdk/libark_jsruntime.so(panda::ecmascript::base::ErrorHelper::ErrorCommonConstructor(panda::ecmascript::EcmaRuntimeCallInfo*, panda::ecmascript::base::ErrorType const&amp;)+1704)(723d1618fe2567539bed3038ccfe92d8)</li><li>#03 pc 000000000038c03c /system/lib64/platformsdk/libark_jsruntime.so(panda::ecmascript::builtins::BuiltinsError::ErrorConstructor(panda::ecmascript::EcmaRuntimeCallInfo*)+40)(723d1618fe2567539bed3038ccfe92d8)</li><li>#04 pc 00000000001b5d90 /system/lib64/platformsdk/libark_jsruntime.so(panda::ecmascript::ObjectFactory::NewJSError(panda::ecmascript::JSHandle&lt;panda::ecmascript::GlobalEnv&gt; const&amp;, panda::ecmascript::base::ErrorType const&amp;, panda::ecmascript::JSHandle&lt;panda::ecmascript::EcmaString&gt; const&amp;, panda::ecmascript::StackCheck)+984)(723d1618fe2567539bed3038ccfe92d8)</li><li>#05 pc 000000000093274c /system/lib64/platformsdk/libark_jsruntime.so(panda::Exception::Error(panda::ecmascript::EcmaVM const*, panda::Local&lt;panda::StringRef&gt;)+244)(723d1618fe2567539bed3038ccfe92d8)</li><li>#06 pc 0000000000066398 /system/lib64/platformsdk/libace_napi.z.so(napi_throw_error+152)(c91850afe3629242ed12712b76be08f1)</li><li>#07 pc 00000000000020fc /data/storage/el1/bundle/libs/arm64/libentry.so(02cecfd8fd280aeaa1af7b9d1227afeac0ec4356)   &lt;- 异常抛出位置</li><li>#08 pc 00000000000890c0 /system/lib64/platformsdk/libruntime.z.so(std::__h::__function::__func&lt;OHOS::AbilityRuntime::OHOSJsEnvironmentImpl::PostTaskToHandler(char const*, void (*)(void*, int), void*, int, int)::$_0, std::__h::allocator&lt;OHOS::AbilityRuntime::OHOSJsEnvironmentImpl::PostTaskToHandler(char const*, void (*)(void*, int), void*, int, int)::$_0&gt;, void ()&gt;::operator()() (.3ec3b6b3a88f13b2aa6c613a7afa022b)+128)(50df26f49d9c067da9cf79b804f136ec)</li><li>========SubmitterStacktrace========    &lt;- 当异步线程发生崩溃后，把提交该异步任务的线程的栈也打印出来</li><li>#00 pc 0000000000012cd0 /system/lib64/platformsdk/libuv.so(uv_queue_work+456)(e077582fac1bf7463ca5539c0a2b678a)</li><li>#01 pc 0000000000001fd0 /data/storage/el1/bundle/libs/arm64/libentry.so(02cecfd8fd280aeaa1af7b9d1227afeac0ec4356)</li><li>#02 pc 000000000004d69c /system/lib64/platformsdk/libace_napi.z.so(panda::JSValueRef ArkNativeFunctionCallBack&lt;true&gt;(panda::JsiRuntimeCallInfo*)+220)(c91850afe3629242ed12712b76be08f1)</li><li>#03 pc 0000000000d08e90 /system/lib64/module/arkcompiler/stub.an(RTStub_PushCallArgsAndDispatchNative+44)</li><li>#04 pc 000000000036ae70 /system/lib64/module/arkcompiler/stub.an(BCStub_HandleCallthis2Imm8V8V8V8StwCopy+436)</li><li>#05 at anonymous (entry|entry|1.0.0|src/main/ets/pages/Index.ts:57:79)</li><li>#06 pc 000000000029e144 /system/lib64/platformsdk/libark_jsruntime.so(panda::ecmascript::InterpreterAssembly::Execute(panda::ecmascript::EcmaRuntimeCallInfo*)+540)(723d1618fe2567539bed3038ccfe92d8)</li><li>#07 pc 0000000000327eac /system/lib64/platformsdk/libark_jsruntime.so(panda::ecmascript::JSFunction::Call(panda::ecmascript::EcmaRuntimeCallInfo*) (.419.extracted)+452)(723d1618fe2567539bed3038ccfe92d8)</li><li>#08 pc 0000000000940c18 /system/lib64/platformsdk/libark_jsruntime.so(panda::FunctionRef::Call(panda::ecmascript::EcmaVM const*, panda::Local&lt;panda::JSValueRef&gt;, panda::Local&lt;panda::JSValueRef&gt; const*, int)+1988)(723d1618fe2567539bed3038ccfe92d8)</li><li>#09 pc 00000000009ce8d8 /system/lib64/platformsdk/libace_compatible.z.so(OHOS::Ace::Framework::JsiFunction::Call(OHOS::Ace::Framework::JsiRef&lt;OHOS::Ace::Framework::JsiValue&gt;, int, OHOS::Ace::Framework::JsiRef&lt;OHOS::Ace::Framework::JsiValue&gt;*, bool) const+700)(cdb4712f9d1d7fda83faae9d393a244e)</li><li>#10 pc 0000000000972a38 /system/lib64/platformsdk/libace_compatible.z.so(OHOS::Ace::Framework::JsFunction::ExecuteJS(int, OHOS::Ace::Framework::JsiRef&lt;OHOS::Ace::Framework::JsiValue&gt;*, bool)+384)(cdb4712f9d1d7fda83faae9d393a244e)</li><li>#11 pc 0000000000e1f590 /system/lib64/platformsdk/libace_compatible.z.so(OHOS::Ace::Framework::JsClickFunction::Execute(OHOS::Ace::GestureEvent&amp;)+3396)(cdb4712f9d1d7fda83faae9d393a244e)</li><li>#12 pc 0000000001079384 /system/lib64/platformsdk/libace_compatible.z.so(cdb4712f9d1d7fda83faae9d393a244e)</li><li>#13 pc 00000000026e1b28 /system/lib64/platformsdk/libace_compatible.z.so(cdb4712f9d1d7fda83faae9d393a244e)</li><li>#14 pc 0000000000f435a8 /system/lib64/platformsdk/libace_compatible.z.so(OHOS::Ace::NG::TextPattern::ActTextOnClick(OHOS::Ace::GestureEvent&amp;)+164)(cdb4712f9d1d7fda83faae9d393a244e)</li><li>#15 pc 0000000002751134 /system/lib64/platformsdk/libace_compatible.z.so(cdb4712f9d1d7fda83faae9d393a244e)</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="page-switch-history">Page switch history<i class="anchor-icon anchor-icon-link" anchorid="page-switch-history" tips="复制节点链接"></i></h3>          <p>从API 20起，使用Page switch history段记录页面切换的历史，故障日志最多记录最新的10条历史轨迹。单条记录的格式如下：</p>     <div _ngcontent-wuv-c106="" class="highlight-div"><div _ngcontent-wuv-c106="" class="highlight-div-header"><div _ngcontent-wuv-c106="" class="highlight-div-header-left"><div _ngcontent-wuv-c106="" class="handle-button expand-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wuv-c106="" class="highlight-div-header-right"><div _ngcontent-wuv-c106="" class="handle-button ai-button"></div><div _ngcontent-wuv-c106="" class="handle-button line-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wuv-c106="" class="handle-button theme-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wuv-c106="" class="handle-button copy-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wuv-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>  14:08:30:327 /ets/pages/Index:JsError</li><li>       ^             ^            ^</li><li>    切换时间      页面URL       页面名</li></ol></pre></div></div>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>仅在通过Navigation跳转到子页面时才会有页面名，页面名在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-navigation-navigation#系统路由表">系统路由表</a>中定义。</p>       <p>当应用发生前后台切换时，对应的页面URL为空，但是会将enters foreground、leaves foreground作为特殊的页面名进行填充。</p>       <p>enters foreground：应用进入前台运行。</p>       <p>leaves foreground：应用在后台运行。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="reason">Reason<i class="anchor-icon anchor-icon-link" anchorid="reason" tips="复制节点链接"></i></h3>          <p>JS Crash异常根据不同的异常场景，在Reason字段进行了分类，分为Error、TypeError、SyntaxError、RangeError等错误类型。</p>     <ul>      <li>       <p>Error（自定义）类：Error是最基本的错误类型，其他的错误类型都继承自该类型。Error对象有两个重要属性：Error message（异常信息）和Error name（错误类型）。程序运行过程中抛出的异常一般都有具体的类型，Error类型一般都是开发人员自己抛出的异常。</p></li>      <li>       <p>TypeError（类型错误）类：这是运行时最常见的异常，表示变量或参数不是预期类型。</p></li>      <li>       <p>SyntaxError（语法错误）类：语法错误也称为解析错误，表示不符合编程语言的语法规范。</p></li>      <li>       <p>RangeError（边界错误）类：表示超出有效范围时发生的异常，具体包括以下几种情况：</p>       <ul>        <li>数组长度为负数或超过最大允许长度。</li>        <li>数字类型的方法参数超出预定义的有效范围。</li>        <li>函数堆栈调用深度超过最大限制。</li>       </ul></li>      <li>       <p>ReferenceError （引用错误）类：引用一个不存在的变量时发生的错误。创建变量时，变量名称都会被写入变量存储中心。变量存储中心类似于键值存储，引用变量时，会先在存储中心查找对应的键并返回值。如果未找到对应变量，就会抛出ReferenceError。</p></li>      <li>       <p>URI Error（ URI错误）类：通常发生在处理 URL、URN 或其他资源标识符时，格式不正确或操作非法。主要包括encodeURI()、decodeURI()、encodeURIComponent()、decodeURIComponent()、escape()和unescape()这几个函数。</p></li>      <li>       <p>OOMError（堆内存不够）类：表示应用程序已经耗尽了可用的堆内存，当无法为新对象分配更多堆内存时，就会抛出此错误。</p></li>      <li>       <p>TerminationError（终止错误）类：通常是因为进程被强制终止了。例如，如果Taskpool线程中存在长时间执行或者死循环的任务，将会导致进程被强制终止并抛出此错误。</p></li>      <li>       <p>AggregateError（多个错误）类：用于表示多个错误的集合。它通常在需要处理或报告多个错误（而不是单个错误）的场景中使用。</p></li>      <li>       <p>EvalError（eval函数错误）类：用于表示与 eval() 函数执行相关的异常。然而，在实际开发中，这个错误类型已经很少被使用，更多情况下引擎会直接抛出 SyntaxError 或 TypeError。</p></li>     </ul>     <p>JS Crash通常是应用问题，开发者可通过崩溃文件中的Error message和StackTrace来定位问题。</p>    </div>    <div class="tiledSection">     <h3 id="异常代码调用栈格式">异常代码调用栈格式<i class="anchor-icon anchor-icon-link" anchorid="异常代码调用栈格式" tips="复制节点链接"></i></h3>          <p>异常代码调用栈内容在Release和Debug两种应用构建模式下存在差异：Debug构建模式会保留完整调试信息，Release构建模式会通过代码优化和混淆技术剥离调试信息。</p>     <p><strong>Release模式</strong></p>     <p>Release模式构建的应用中，异常堆栈信息遵循以下标准化格式：</p>     <p>at &lt;执行方法名&gt; (&lt;本模块名|依赖的模块名|版本号|编译产物路径&gt;:&lt;行号&gt;:&lt;列号&gt;)</p>     <p>示例如下：</p>     <div _ngcontent-wuv-c106="" class="highlight-div"><div _ngcontent-wuv-c106="" class="highlight-div-header"><div _ngcontent-wuv-c106="" class="highlight-div-header-left"><div _ngcontent-wuv-c106="" class="handle-button expand-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wuv-c106="" class="highlight-div-header-right"><div _ngcontent-wuv-c106="" class="handle-button ai-button"></div><div _ngcontent-wuv-c106="" class="handle-button line-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wuv-c106="" class="handle-button theme-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wuv-c106="" class="handle-button copy-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wuv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-swift" data-highlighted="yes"><ol class="linenums"><li>at onPageShow (entry<span class="hljs-operator">|</span>har1<span class="hljs-operator">|</span><span class="hljs-number">1.0</span>.<span class="hljs-number">0</span><span class="hljs-operator">|</span>src<span class="hljs-regexp">/main/</span>ets<span class="hljs-regexp">/pages/</span><span class="hljs-type">Index</span>.ts:<span class="hljs-number">7</span>:<span class="hljs-number">13</span>)</li></ol></pre></div></div>     <p>格式解析：</p>     <ol>      <li>       <p>at：堆栈调用链的固定起始标识符。</p></li>      <li>       <p>执行方法名：onPageShow表示触发该异常的调用方法名称。</p></li>      <li>       <p>编译产物结构如下：</p>       <ul>        <li>         <p>编译产物路径：详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-exception-stack-parsing-principle#section1145914292713" target="_blank">异常堆栈解析原理 sourcemap结构：key字段介绍</a>。</p></li>        <li>         <p>文件类型：文件扩展名为.ts文件后缀（.js文件无需 SourceMap 映射可直接定位异常）。</p></li>       </ul></li>      <li>       <p>行列号：发生异常的具体行数和这一行的列数，以“:”为分隔符分隔。</p></li>     </ol>     <p><strong>Debug模式</strong></p>     <p>使用 Source Map 转译 Release 模式构建应用的异常堆栈或使用Debug模式构建的应用中，异常堆栈信息遵循以下标准化格式：</p>     <p>at &lt;执行方法名&gt; &lt;源码依赖的模块名&gt; (&lt;源码路径&gt;:&lt;行号&gt;:&lt;列号&gt;)</p>     <p>示例如下：</p>     <div _ngcontent-wuv-c106="" class="highlight-div"><div _ngcontent-wuv-c106="" class="highlight-div-header"><div _ngcontent-wuv-c106="" class="highlight-div-header-left"><div _ngcontent-wuv-c106="" class="handle-button expand-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wuv-c106="" class="highlight-div-header-right"><div _ngcontent-wuv-c106="" class="handle-button ai-button"></div><div _ngcontent-wuv-c106="" class="handle-button line-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wuv-c106="" class="handle-button theme-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wuv-c106="" class="handle-button copy-button"><div _ngcontent-wuv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wuv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li>at onPageShow har1 (har1/<span class="hljs-attribute">src</span>/<span class="hljs-selector-tag">main</span>/ets/pages/Index<span class="hljs-selector-class">.ets</span>:<span class="hljs-number">7</span>:<span class="hljs-number">13</span>)</li></ol></pre></div></div>     <p>格式解析：</p>     <ol>      <li>       <p>at：堆栈调用链的固定起始标识符。</p></li>      <li>       <p>执行方法名：onPageShow表示触发该异常的调用方法名称。</p></li>      <li>       <p>源码依赖的模块名：har1表示源码路径所属模块名。</p></li>      <li>       <p>源码路径结构如下：</p>       <ul>        <li>源码路径：基于工程目录的源码文件路径。</li>        <li>文件类型：文件扩展名为.ets。</li>       </ul></li>      <li>       <p>行列号：发生异常的具体行数和这一行的列数，以“:”为分隔符分隔。</p></li>     </ol>    </div>   </div>   <div></div></div>