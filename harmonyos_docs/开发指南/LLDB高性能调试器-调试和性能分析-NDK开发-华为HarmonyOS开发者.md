<h1 _ngcontent-lpj-c119="" class="doc-title ng-star-inserted" title="LLDB高性能调试器"> LLDB高性能调试器 </h1>

<div _ngcontent-lpj-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="概述">概述<i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><p>LLDB（Low Level Debugger）是新一代高性能调试器。具备断点设置、变量查看与修改、内存操作、线程控制、表达式计算、堆栈回溯等功能，并支持跨平台和插件扩展。</p> <p>当前HarmonyOS中的LLDB工具是在<a href="https://github.com/llvm/llvm-project/releases/tag/llvmorg-15.0.4" target="_blank">llvm15.0.4</a>基础上适配演进出来的，是HUAWEI DevEco Studio工具链中默认的调试器，支持调试C和C++应用程序。</p> <p>详细说明参考<a href="https://lldb.llvm.org/" target="_blank">LLDB官方文档</a>。</p> </div> <div class="tiledSection"><h2 id="section188901645115318">功能特点<i class="anchor-icon anchor-icon-link" anchorid="section188901645115318" tips="复制节点链接"></i></h2><p>LLDB调试器具备以下功能特点：</p> <ul><li><strong>强大的调试功能</strong>：支持断点设置、变量查看与修改、内存操作、线程控制、表达式计算、堆栈回溯等。</li><li><strong>跨平台支持</strong>：适用于Windows、Linux x86_64、ohos和Mac平台。</li><li><strong>插件扩展性</strong>：支持插件扩展，方便开发者根据需求进行定制。</li></ul> </div> <div class="tiledSection"><h2 id="section797101019528">工具获取路径<i class="anchor-icon anchor-icon-link" anchorid="section797101019528" tips="复制节点链接"></i></h2><ul><li>通过安装HUAWEI DevEco Studio集成开发环境，可在其SDK组件中获取完整的LLDB调试套件。</li><li>以下是基于HUAWEI DevEco Studio的LLDB工具完整路径结构图（以windows为例）:<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-python" data-highlighted="yes"><ol class="linenums"><li>DevEco_Studio_Home/</li><li>└── sdk/</li><li>    ├── default/</li><li>    │   ├── openharmony/</li><li>    │   │   └── native/</li><li>    │   │       └── llvm/</li><li>    │   │           ├── <span class="hljs-built_in">bin</span>/</li><li>    │   │           │   └── lldb.exe                 <span class="hljs-comment"># Windows客户端主程序</span></li><li>    │   │           └── lib/</li><li>    │   │               └── clang/</li><li>    │   │                   └── current/</li><li>    │   │                       └── <span class="hljs-built_in">bin</span>/</li><li>    │   │                           ├── aarch64-linux-ohos/</li><li>    │   │                           │   └── lldb      <span class="hljs-comment"># ARM64独立调试器</span></li><li>    │   │                           └── arm-linux-ohos/</li><li>    │   │                               └── lldb      <span class="hljs-comment"># ARM32独立调试器</span></li><li>    │   └── hms/</li><li>    │       └── native/</li><li>    │           └── lldb/</li><li>    │               ├── aarch64-linux-ohos/</li><li>    │               │   └── lldb-server              <span class="hljs-comment"># ARM64调试服务端</span></li><li>    │               ├── arm-linux-ohos/</li><li>    │               │   └── lldb-server              <span class="hljs-comment"># ARM32调试服务端</span></li><li>    │               └── x86_64-linux-ohos/</li><li>    │                   └── lldb-server              <span class="hljs-comment"># x86_64模拟器调试服务端</span></li></ol></pre></div></div> </li><li>lldb客户端 (Windows系统) 执行文件路径：<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>&lt;DevEco_Studio_Home&gt;\sdk\<span class="hljs-keyword">default</span>\openharmony\<span class="hljs-keyword">native</span>\llvm\bin\lldb.exe</li></ol></pre></div></div> </li><li>静态化lldb <div class="tablenoborder"><div class="tbBox"><table id="table187851036494" class="layoutFixed idpTab"><caption><b>表1 </b>静态化lldb工具目录</caption><thead><tr><th align="center" class="cellrowborder" id="mcps1.3.3.2.4.1.2.3.1.1" valign="top" width="58.78%"><p>路径</p> </th> <th align="center" class="cellrowborder" id="mcps1.3.3.2.4.1.2.3.1.2" valign="top" width="41.22%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="58.78%"><p>\DevEco Studio\sdk\default\openharmony\native\llvm\lib\clang\current\bin\aarch64-linux-ohos\lldb</p> </td> <td class="cellrowborder" valign="top" width="41.22%"><p>适用于aarch64-linux-ohos架构的静态化lldb</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="58.78%"><p>\DevEco Studio\sdk\default\openharmony\native\llvm\lib\clang\current\bin\arm-linux-ohos\lldb</p> </td> <td class="cellrowborder" valign="top" width="41.22%"><p>适用于arm-linux-ohos架构的静态化lldb</p> </td> </tr>  </tbody></table></div> </div> </li><li>lldb-server <div class="tablenoborder"><div class="tbBox"><table id="table15380916136" class="layoutFixed idpTab"><caption><b>表2 </b>lldb-server工具目录</caption><thead><tr><th align="center" class="cellrowborder" id="mcps1.3.3.2.5.1.2.3.1.1" valign="top" width="58.809999999999995%"><p>路径</p> </th> <th align="center" class="cellrowborder" id="mcps1.3.3.2.5.1.2.3.1.2" valign="top" width="41.19%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="58.809999999999995%"><p>\DevEco Studio\sdk\default\hms\native\lldb\aarch64-linux-ohos\lldb-server</p> </td> <td class="cellrowborder" valign="top" width="41.19%"><p>适用于aarch64-linux-ohos架构的lldb-server</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="58.809999999999995%"><p>\DevEco Studio\sdk\default\hms\native\lldb\arm-linux-ohos\lldb-server</p> </td> <td class="cellrowborder" valign="top" width="41.19%"><p>适用于arm-linux-ohos架构的lldb-server</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="58.809999999999995%"><p>\DevEco Studio\sdk\default\hms\native\lldb\x86_64-linux-ohos\lldb-server</p> </td> <td class="cellrowborder" valign="top" width="41.19%"><p>适用于x86_64-linux-ohos架构的lldb-server</p> </td> </tr>  </tbody></table></div> </div> </li></ul> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>签名校验机制</p> <p>lldb-server在运行时会对自身进行数字签名验证，只有通过华为官方签名的lldb-server才能正常调试应用。</p> <p><a href="/consumer/cn/doc/harmonyos-guides/debug-lldb#table15380916136">表2</a>中的lldb-server为是经过闭源签名处理的特殊版本。</p> <p>这种设计主要用于保护鸿蒙（HarmonyOS）调试权限，防止未授权的调试行为。</p> </div></div></div> </div> <div class="tiledSection"><h2 id="功能列表">功能列表<i class="anchor-icon anchor-icon-link" anchorid="功能列表" tips="复制节点链接"></i></h2><p>此处列举LLDB调试器支持的部分功能，更多命令参考：<a href="https://gitee.com/openharmony/third_party_llvm-project/blob/master/lldb/README_zh.md" target="_blank">LLDB工具使用指导</a>和<a href="https://lldb.llvm.org/use/map.html#" target="_blank">LLDB官网手册</a>。Windows、Linux x86_64和Mac平台的LLDB工具有些许差异，以实际应用为准。</p> <ul><li><p>记录日志</p> <div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-r" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment"># 记录完整调试会话到文件</span></li><li><span class="hljs-punctuation">(</span>lldb<span class="hljs-punctuation">)</span> <span class="hljs-built_in">log</span> enable <span class="hljs-operator">-</span><span class="hljs-built_in">F</span> <span class="hljs-operator">-</span><span class="hljs-built_in">T</span> <span class="hljs-operator">-</span>p <span class="hljs-operator">-</span>f d<span class="hljs-operator">:</span><span class="hljs-punctuation">\</span>lldb.log lldb <span class="hljs-built_in">all</span></li><li><span class="hljs-punctuation">(</span>lldb<span class="hljs-punctuation">)</span> <span class="hljs-built_in">log</span> enable <span class="hljs-operator">-</span><span class="hljs-built_in">F</span> <span class="hljs-operator">-</span><span class="hljs-built_in">T</span> <span class="hljs-operator">-</span>p <span class="hljs-operator">-</span>f d<span class="hljs-operator">:</span><span class="hljs-punctuation">\</span>lldbgdbremote.log gdb<span class="hljs-operator">-</span>remote <span class="hljs-built_in">all</span></li><li><span class="hljs-comment"># 示例：过滤只记录断点事件</span></li><li><span class="hljs-punctuation">(</span>lldb<span class="hljs-punctuation">)</span> <span class="hljs-built_in">log</span> enable <span class="hljs-operator">-</span>f <span class="hljs-operator">/</span>tmp<span class="hljs-operator">/</span>breakpoints.log lldb <span class="hljs-keyword">break</span></li><li><span class="hljs-comment"># 查看当前日志配置</span></li><li><span class="hljs-punctuation">(</span>lldb<span class="hljs-punctuation">)</span> <span class="hljs-built_in">log</span> <span class="hljs-built_in">list</span></li></ol></pre></div></div> </li><li><div class="p">断点管理<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-python" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment"># 设置函数断点（支持模糊匹配）</span></li><li>(lldb) <span class="hljs-built_in">breakpoint</span> -f main.cpp -l <span class="hljs-number">266</span></li><li><span class="hljs-comment"># 设置条件断点（当x&gt;100时触发）</span></li><li>(lldb) <span class="hljs-built_in">breakpoint</span> <span class="hljs-built_in">set</span> -f main.cpp -l <span class="hljs-number">20</span> -c <span class="hljs-string">'(x &gt; 100)'</span></li><li><span class="hljs-comment"># 列出所有断点</span></li><li>(lldb) <span class="hljs-built_in">breakpoint</span> <span class="hljs-built_in">list</span></li><li><span class="hljs-comment"># 临时禁用断点</span></li><li>(lldb) <span class="hljs-built_in">breakpoint</span> disable <span class="hljs-number">1</span></li></ol></pre></div></div> </div> </li><li><div class="p">观察点管理<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment"># 监控变量变化</span></li><li>(lldb) watchpoint <span class="hljs-built_in">set</span> variable global_var</li><li><span class="hljs-comment"># 监控内存地址变化</span></li><li>(lldb) watchpoint <span class="hljs-built_in">set</span> expression -w write -- 0x7ffeefbff5d8</li><li><span class="hljs-comment"># 查看观察点列表</span></li><li>(lldb) watchpoint list</li></ol></pre></div></div> </div> </li><li><div class="p">表达式处理<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-perl" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment"># 创建变量</span></li><li>(lldb) <span class="hljs-keyword">print</span> <span class="hljs-keyword">int</span> $value1 = <span class="hljs-number">7</span></li><li>(lldb) expression <span class="hljs-keyword">int</span> $value2 = <span class="hljs-number">7</span></li><li><span class="hljs-comment"># 打印变量值</span></li><li>(lldb) <span class="hljs-keyword">print</span> $value1</li><li>(lldb) expression $value2</li><li><span class="hljs-comment"># 变量运算</span></li><li>(lldb) expression $value1 * <span class="hljs-number">3</span></li><li><span class="hljs-comment"># 格式化输出（16进制显示）</span></li><li>(lldb) p/<span class="hljs-keyword">x</span> <span class="hljs-number">12345</span></li></ol></pre></div></div> </div> </li><li><p>查看变量</p> <div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment"># 查看当前帧的已初始化的局部变量</span></li><li>(lldb) frame variable</li><li><span class="hljs-comment"># 查看全局变量和静态变量</span></li><li>(lldb) frame variable -g</li><li><span class="hljs-comment"># 查看寄存器</span></li><li>(lldb) register <span class="hljs-built_in">read</span></li></ol></pre></div></div> </li><li><div class="p">进程/线程管理<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li># 显示线程回溯（所有线程）</li><li>(lldb) thread backtrace <span class="hljs-attribute">all</span></li><li># 单步跳过（Step over）</li><li>(lldb) thread step-over (或next)</li><li># 跳出当前选定的帧（步出）</li><li>(lldb) thread step-out (或finish)</li></ol></pre></div></div> </div> </li><li><div class="p">汇编处理<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-perl" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment"># 查看寄存器</span></li><li>(lldb) register <span class="hljs-keyword">read</span></li><li><span class="hljs-comment"># 更改pc寄存器</span></li><li>(lldb) register <span class="hljs-keyword">write</span> pc <span class="hljs-string">`$pc+8`</span></li><li><span class="hljs-comment"># 查看当前堆栈帧的汇编指令</span></li><li>(lldb) disassemble --frame (或 dis -f )</li><li><span class="hljs-comment"># 查看main函数的汇编指令</span></li><li>(lldb) disassemble -name main</li><li><span class="hljs-comment"># 汇编单步执行程序，步过（不进入函数体）</span></li><li>(lldb) nexti</li><li><span class="hljs-comment"># 汇编单步执行程序，步入（进入函数体）</span></li><li>(lldb) stepi</li></ol></pre></div></div> </div> </li><li><div class="p">信号处理<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment"># 捕获信号时打印回溯</span></li><li>(lldb) process handle SIGSEGV -s <span class="hljs-literal">true</span></li><li><span class="hljs-comment"># 查看当前信号处理配置</span></li><li>(lldb) process handle</li></ol></pre></div></div> </div> </li><li><div class="p">attach进程<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-yaml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment"># 附加到PID（需调试权限）</span></li><li><span class="hljs-string">(lldb)</span> <span class="hljs-string">process</span> <span class="hljs-string">attach</span> <span class="hljs-string">-p</span> <span class="hljs-number">1234</span></li></ol></pre></div></div> </div> </li></ul> </div> <div class="tiledSection"><h2 id="section9995114681119">环境准备<i class="anchor-icon anchor-icon-link" anchorid="section9995114681119" tips="复制节点链接"></i></h2><ul><li>本地调试（<strong>受限模式</strong>）<ul><li>HarmonyOS设备需获取root权限</li><li>无需DevEco IDE，直接设备端调试</li></ul> <ul><li>选择静态化lldb路径（根据设备CPU架构选择，参考<a href="/consumer/cn/doc/harmonyos-guides/debug-lldb#table187851036494">表1</a>）并使用hdc传输到设备：<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-sql" data-highlighted="yes"><ol class="linenums"><li>hdc file send \DevEco Studio\sdk\<span class="hljs-keyword">default</span>\openharmony\native\llvm\lib\clang\<span class="hljs-keyword">current</span>\bin\aarch64<span class="hljs-operator">-</span>linux<span class="hljs-operator">-</span>ohos\lldb <span class="hljs-operator">/</span>data<span class="hljs-operator">/</span><span class="hljs-keyword">local</span><span class="hljs-operator">/</span>tmp<span class="hljs-operator">/</span>debugserver</li></ol></pre></div></div> </li><li>选择lldb server路径（根据设备CPU架构选择，参考<a href="/consumer/cn/doc/harmonyos-guides/debug-lldb#table15380916136">表2</a>）并使用hdc传输到设备：<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-swift" data-highlighted="yes"><ol class="linenums"><li>hdc file send \<span class="hljs-type">DevEco</span> <span class="hljs-type">Studio</span>\sdk\<span class="hljs-keyword">default</span>\hms\native\lldb\aarch64<span class="hljs-operator">-</span>linux<span class="hljs-operator">-</span>ohos\lldb<span class="hljs-operator">-</span>server <span class="hljs-regexp">/data/</span>local<span class="hljs-regexp">/tmp/</span>debugserver</li></ol></pre></div></div> </li></ul> </li></ul> <ul><li>远程调试（<strong>主要调试方式</strong>）<ul><li>一键调试：<ul><li>下载HUAWEI IDE，根据IDE的调试方法即可进行一键调试：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/debug-performance-profiling-overview">通过DevEco Studio调试</a>。</li><li>支持Windows/Mac连接HarmonyOS设备或模拟器，支持调试Native C++应用。</li><li>直接使用DevEco Studio的Debug功能即可，无需手动推送lldb或lldb-server。</li></ul> </li><li>手动调试：<ul><li>如需要手动进行远程调试（不通过DevEco Studio），如调试二进制等，则需要保证设备上有lldb-server，PC上有lldb。</li><li>准备lldb-server，建议使用DevEco IDE推送。如手动推送，选择lldb-server路径（根据设备CPU架构选择，参考<a href="/consumer/cn/doc/harmonyos-guides/debug-lldb#table15380916136">表2</a>）并使用hdc传输到设备：<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-swift" data-highlighted="yes"><ol class="linenums"><li>hdc file send \<span class="hljs-type">DevEco</span> <span class="hljs-type">Studio</span>\sdk\<span class="hljs-keyword">default</span>\hms\native\lldb\aarch64<span class="hljs-operator">-</span>linux<span class="hljs-operator">-</span>ohos\lldb<span class="hljs-operator">-</span>server <span class="hljs-regexp">/data/</span>local<span class="hljs-regexp">/tmp/</span>debugserver</li></ol></pre></div></div> </li><li>PC上准备lldb，如windows系统则使用<strong>lldb.exe</strong>, 稍后将使用lldb与OH设备上的lldb-server远程连接进行调试。<p><span><img originheight="197" originwidth="407" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114334.90137508769247099180404439232815:50001231000000:2800:BAF4786F933AC8DC6112DDF5D41EE4E4B560620E039A7462CDE12DF19F136F07.png" width="407" height="197"></span></p> </li></ul> </li></ul> <ul><li>设备状态与调试支持矩阵（分三种情况）： <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.3.1.3.1.1.1.4.1.1" style="border: none;" valign="top" width="33.33333333333333%"><p>设备状态</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.3.1.1.1.4.1.2" style="border: none;" valign="top" width="33.33333333333333%"><p>调试支持范围</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.3.1.1.1.4.1.3" style="border: none;" valign="top" width="33.33333333333333%"><p>lldb-server部署路径</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" style="border: none;" valign="top" width="33.33333333333333%"><p>root镜像+SELinux关闭</p> </td> <td class="cellrowborder" style="border: none;" valign="top" width="33.33333333333333%"><p>全类型C/C++应用及二进制</p> </td> <td class="cellrowborder" style="border: none;" valign="top" width="33.33333333333333%"><p>任意可执行目录</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" valign="top" width="33.33333333333333%"><p>root镜像+SELinux开启</p> </td> <td class="cellrowborder" style="border: none;" valign="top" width="33.33333333333333%"><p>全类型C/C++应用及二进制</p> </td> <td class="cellrowborder" style="border: none;" valign="top" width="33.33333333333333%"><p>/data/local/tmp/debugserver</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" valign="top" width="33.33333333333333%"><p>user镜像+SELinux开启</p> </td> <td class="cellrowborder" style="border: none;" valign="top" width="33.33333333333333%"><p>HUAWEI DevEco Studio编译签名debug版HAP包</p> </td> <td class="cellrowborder" style="border: none;" valign="top" width="33.33333333333333%"><p>自动部署</p> </td> </tr>  </tbody></table></div> </div> </li></ul> </li></ul> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>root镜像：使用<b><span class="cmdname">hdc shell id</span></b>命令查询到“uid=0(root)”，或执行<b><span class="cmdname">hdc shell</span></b>进入交互命令环境，提示符为“#”。</p> <p>user镜像：使用<b><span class="cmdname">hdc shell id</span></b>命令查询到“uid=2000(shell)”，或执行<b><span class="cmdname">hdc shell</span></b>进入交互命令环境，提示符为“$”。</p> <p>SELinux开启模式：使用<b><span class="cmdname">hdc shell getenforce</span></b>命令查询到“Enforcing”。</p> <div class="p">SELinux关闭模式：使用<b><span class="cmdname">hdc shell getenforce</span></b>命令查询到“Permissive”。<div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>lldb-server建议通过DevEco IDE创建Native项目并点击Debug按钮自动推送，避免手动推送的版本兼容性和权限问题。</p> </div></div></div> </div> </div></div></div> </div> <div class="tiledSection"><h2 id="使用指导">使用指导-本地调试<i class="anchor-icon anchor-icon-link" anchorid="使用指导" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section78737413424" class="firsth2">使用LLDB工具启动并调试应用<i class="anchor-icon anchor-icon-link" anchorid="section78737413424" tips="复制节点链接"></i></h3><p>此处以在HarmonyOS环境调试一个使用clang编译器生成的带有调试信息的可执行文件a.out为例。</p> <p>源文件：hello.cpp</p> <div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="lldb prettyprint linenums hljs language-cpp" hw-language="lldb" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span></li><li><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;</li><li><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{</li><li>    cout &lt;&lt; <span class="hljs-string">"hello world!"</span> &lt;&lt;endl;</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</li><li>}</li></ol></pre></div></div> <p>编译：</p> <div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="lldb prettyprint linenums hljs language-javascript" hw-language="lldb" data-highlighted="yes"><ol class="linenums"><li>&lt;clang distribution&gt;<span class="hljs-regexp">/bin/</span>clang++ --target=aarch64-linux-ohos --sysroot=<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">sysroot</span> <span class="hljs-attr">distribution</span>&gt;</span> -g hello.cpp -o a.out</span></li></ol></pre></div></div> <ol><li>获取到与LLDB同一版本的clang编译器生成的带有调试信息的可执行文件a.out。</li><li>使用<strong>hdc shell</strong>进入手机交互命令环境，进入lldb路径。</li><li>运行LLDB工具，并指定要调试的文件为a.out。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>./lldb a.out</li></ol></pre></div></div> </li><li>在代码中main函数处设置断点。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li>(lldb) <span class="hljs-selector-tag">b</span> <span class="hljs-selector-tag">main</span></li></ol></pre></div></div> </li><li>运行应用，使其停在断点处。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>(lldb) run</li></ol></pre></div></div> </li><li>继续运行应用。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" data-highlighted="yes"><ol class="linenums"><li>(lldb) <span class="hljs-keyword">continue</span></li></ol></pre></div></div> </li><li>列出所有断点。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-python" data-highlighted="yes"><ol class="linenums"><li>(lldb) <span class="hljs-built_in">breakpoint</span> <span class="hljs-built_in">list</span></li></ol></pre></div></div> </li><li>显示当前帧的参数和局部变量。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>(lldb) frame variable</li></ol></pre></div></div> </li><li>按需执行调试命令进行后续调试操作。</li><li>退出调试。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>(lldb) quit</li></ol></pre></div></div> </li></ol> </div> <div class="tiledSection"><h3 id="section7751350478">使用LLDB工具调试已经启动的应用<i class="anchor-icon anchor-icon-link" anchorid="section7751350478" tips="复制节点链接"></i></h3><p>此处以在手机环境调试一个使用clang编译器生成的带有调试信息和用户输入的可执行文件a.out为例。</p> <p>源文件：hello.cpp</p> <div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="lldb prettyprint linenums hljs language-cpp" hw-language="lldb" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span></li><li><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;</li><li>
</li><li><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{</li><li>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-number">5</span>, sum = <span class="hljs-number">0</span>;</li><li>    cout &lt;&lt; <span class="hljs-string">"Please input a number of type int"</span> &lt;&lt;endl;</li><li>    cin &gt;&gt; i;</li><li>    cout &lt;&lt; i;</li><li>    sum = i + j;</li><li>    cout &lt;&lt; sum &lt;&lt;endl;</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</li><li>}</li></ol></pre></div></div> <p>编译：</p> <div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="lldb prettyprint linenums hljs language-javascript" hw-language="lldb" data-highlighted="yes"><ol class="linenums"><li>&lt;clang distribution&gt;<span class="hljs-regexp">/bin/</span>clang++ --target=aarch64-linux-ohos --sysroot=<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">sysroot</span> <span class="hljs-attr">distribution</span>&gt;</span> -g hello.cpp -o a.out</span></li></ol></pre></div></div> <ol><li>使用<strong>hdc shell</strong>进入手机交互命令环境，进入lldb路径。</li><li>在终端窗口1启动应用。（窗口会返回一条信息“Please input a number of type int”）<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>./a.out</li></ol></pre></div></div> </li><li>在终端窗口2运行LLDB工具。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>./lldb</li></ol></pre></div></div> </li><li id="li185118185491">attach应用。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li>(lldb) process attach <span class="hljs-attr">--name</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.out</span></li></ol></pre></div></div> </li><li id="li15852111874920">在hello.cpp的第10行设置断点。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>(lldb) breakpoint set <span class="hljs-attr">--file</span> hello<span class="hljs-selector-class">.cpp</span> <span class="hljs-attr">--line</span> <span class="hljs-number">10</span></li></ol></pre></div></div> </li><li>在终端窗口1，输入一个int类型的数。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" data-highlighted="yes"><ol class="linenums"><li>88</li></ol></pre></div></div> </li><li>在终端行窗口2继续运行应用，使应用停在断点处。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" data-highlighted="yes"><ol class="linenums"><li>(lldb) <span class="hljs-keyword">continue</span></li></ol></pre></div></div> </li><li>按需执行调试命令进行后续调试操作。</li><li>detach应用。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>(lldb) detach</li></ol></pre></div></div> </li><li>退出调试。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>(lldb) quit</li></ol></pre></div></div> </li></ol> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>步骤<a href="/consumer/cn/doc/harmonyos-guides/debug-lldb#li185118185491">attach应用</a>和<a href="/consumer/cn/doc/harmonyos-guides/debug-lldb#li15852111874920">设置断点</a>可以调换顺序执行。</p> </div></div></div> </div> <div class="tiledSection"><h2 id="section116495915409">使用指导-远程调试<i class="anchor-icon anchor-icon-link" anchorid="section116495915409" tips="复制节点链接"></i></h2><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>远程调试是指使用lldb进行跨端调试。本章节主要针对开发者跨平台调试HarmonyOS设备的应用进行说明。</li><li>基于HUAWEI DevEco Studio的远程调试参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-debug-native-enable-V5" target="_blank">官方调试指导</a>。</li><li>远程调试时需要lldb-server和lldb配合使用。</li><li>Windows，Linux x86_64和Mac远程调试步骤一致。</li></ul> </div></div></div> </div> <div class="tiledSection"><h3 id="section111734955217" class="firsth2">root镜像远程调试<i class="anchor-icon anchor-icon-link" anchorid="section111734955217" tips="复制节点链接"></i></h3><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>支持调试的应用或二进制是aarch64-linux-ohos架构的native C++工程。</li><li>为了方便调试建议调试时关闭SELinux。</li></ul> </div></div></div> <p>源文件：hello.cpp</p> <div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span></li><li><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;</li><li><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{</li><li>    cout &lt;&lt; <span class="hljs-string">"hello world!"</span> &lt;&lt;endl;</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</li><li>}</li></ol></pre></div></div> <p>编译：</p> <div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li>&lt;clang distribution&gt;<span class="hljs-regexp">/bin/</span>clang++ --target=aarch64-linux-ohos --sysroot=<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">sysroot</span> <span class="hljs-attr">distribution</span>&gt;</span> -g hello.cpp -o a.out</span></li></ol></pre></div></div> <ol><li>打开命令行窗口1，关闭SELinux。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" data-highlighted="yes"><ol class="linenums"><li>hdc shell setenforce 0</li></ol></pre></div></div> </li><li>在命令行窗口1，将lldb-server和可执行文件a.out推送到设备。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-swift" data-highlighted="yes"><ol class="linenums"><li>hdc file send lldb<span class="hljs-operator">-</span>server hdc file send a.out <span class="hljs-regexp">/data/</span>local<span class="hljs-regexp">/tmp/</span>debugserver<span class="hljs-operator">/</span>debugserver</li><li>hdc shell chmod <span class="hljs-number">755</span> </li><li><span class="hljs-regexp">/data/</span>local<span class="hljs-regexp">/tmp/</span>debugserver<span class="hljs-regexp">/lldb-server /</span>data<span class="hljs-regexp">/local/</span>tmp<span class="hljs-regexp">/debugserver/</span>a.out</li></ol></pre></div></div> </li><li>运行lldb-server。(8080为有效且当前未被占用的端口号，用户可自定义）<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li>hdc shell /data/local/tmp/debugserver/lldb-server <span class="hljs-selector-tag">p</span> <span class="hljs-attr">--server</span> <span class="hljs-attr">--listen</span> "*:<span class="hljs-number">8080</span><span class="hljs-string">"</span></li></ol></pre></div></div> </li><li>打开命令行窗口2，运行二进制文件lldb。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>./lldb</li></ol></pre></div></div> </li><li>在LLDB命令行窗口进行远端选择与连接。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-perl" data-highlighted="yes"><ol class="linenums"><li>(lldb) platform <span class="hljs-keyword">select</span> remote-ohos</li><li>(lldb) platform <span class="hljs-keyword">connect</span> <span class="hljs-keyword">connect</span>:<span class="hljs-regexp">//l</span>ocalhost:<span class="hljs-number">8080</span> </li></ol></pre></div></div> </li><li>指定要调试的设备上的二进制文件a.out。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" data-highlighted="yes"><ol class="linenums"><li>(lldb) target create /<span class="hljs-keyword">data</span>/local/tmp/debugserver/a.<span class="hljs-keyword">out</span></li></ol></pre></div></div> </li><li>在代码中main函数处设置断点。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li>(lldb) <span class="hljs-selector-tag">b</span> <span class="hljs-selector-tag">main</span></li></ol></pre></div></div> </li><li>启动应用。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>(lldb) run</li></ol></pre></div></div> </li><li>查看当前目标进程的源码。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>(lldb) <span class="hljs-built_in">source</span> list</li></ol></pre></div></div> </li><li>按需执行调试命令进行后续调试操作。</li><li>退出调试。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>(lldb) quit</li></ol></pre></div></div> </li></ol> </div> <div class="tiledSection"><h3 id="section7484137417">user镜像远程调试<i class="anchor-icon anchor-icon-link" anchorid="section7484137417" tips="复制节点链接"></i></h3><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>user镜像SELinux默认开启，无法关闭。</li><li>建议基于HUAWEI DevEco Studio调试user镜像SELinux开启的HarmonyOS设备的hap包。</li><li>lldb-server需推送至指定的目录/data/local/tmp/debugserver。如：/data/local/tmp/debugserver/lldb-server或/data/local/tmp/debugserver/com.example.myapplication/lldb-server。</li><li>lldb-server在aarch64-linux-ohos架构目录获取。详情参考<a href="/consumer/cn/doc/harmonyos-guides/debug-lldb#table15380916136">表1 lldb-server工具目录</a></li><li>此案例中的hap包为基于HUAWEI DevEco Studio创建的native C++默认工程编译的带debug信息的hap包。</li><li>调试过程中需保持设备在非锁屏状态，锁屏不允许启动调试器调试。</li></ul> </div></div></div> <ol><li>打开命令行窗口1，将lldb-server和hap包推送到设备。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">hdc</span> <span class="hljs-variable">shell</span> <span class="hljs-variable">mkdir</span> <span class="hljs-variable">data</span>/<span class="hljs-variable">local</span>/<span class="hljs-variable">tmp</span>/<span class="hljs-variable">debugserver</span>/<span class="hljs-variable">com</span>.<span class="hljs-variable">example</span>.<span class="hljs-variable">myapplication</span></li><li><span class="hljs-variable">hdc</span> <span class="hljs-variable">file</span> <span class="hljs-variable">send</span> <span class="hljs-variable">lldb</span>-<span class="hljs-variable">server</span> <span class="hljs-variable">data</span>/<span class="hljs-variable">local</span>/<span class="hljs-variable">tmp</span>/<span class="hljs-variable">debugserver</span>/<span class="hljs-variable">com</span>.<span class="hljs-variable">example</span>.<span class="hljs-variable">myapplication</span></li><li><span class="hljs-variable">hdc</span> <span class="hljs-variable">shell</span> <span class="hljs-variable">chmod</span> <span class="hljs-number">755</span> <span class="hljs-variable">data</span>/<span class="hljs-variable">local</span>/<span class="hljs-variable">tmp</span>/<span class="hljs-variable">debugserver</span>/<span class="hljs-variable">com</span>.<span class="hljs-variable">example</span>.<span class="hljs-variable">myapplication</span>/<span class="hljs-variable">lldb</span>-<span class="hljs-variable">server</span></li><li><span class="hljs-variable">hdc</span> <span class="hljs-variable">shell</span> <span class="hljs-variable">mkdir</span> <span class="hljs-variable">data</span>/<span class="hljs-variable">local</span>/<span class="hljs-variable">tmp</span>/<span class="hljs-variable">d333e74fe3ab488aad622a7055fbf396</span></li><li><span class="hljs-variable">hdc</span> <span class="hljs-variable">file</span> <span class="hljs-variable">send</span> <span class="hljs-variable">C</span>:\<span class="hljs-title class_">Users</span>\<span class="hljs-title class_">xxx</span>\<span class="hljs-title class_">DevEcoStudioProjects</span>\<span class="hljs-title class_">MyApplication</span>\<span class="hljs-title class_">entry</span>\<span class="hljs-title class_">build</span>\<span class="hljs-title class_">default</span>\<span class="hljs-title class_">outputs</span>\<span class="hljs-title class_">default</span>\<span class="hljs-title class_">entry</span>-<span class="hljs-title class_">default</span>-<span class="hljs-title class_">signed</span>.<span class="hljs-title class_">hap</span> <span class="hljs-title class_">data</span>/<span class="hljs-variable">local</span>/<span class="hljs-variable">tmp</span>/<span class="hljs-variable">d333e74fe3ab488aad622a7055fbf396</span></li></ol></pre></div></div> </li><li>hap包安装运行，关闭appfreeze。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li>hdc shell bm install -<span class="hljs-selector-tag">p</span> data/local/tmp/d333e74fe3ab488aad622a7055fbf396</li><li>hdc shell aa start -<span class="hljs-selector-tag">a</span> EntryAbility -<span class="hljs-selector-tag">b</span> com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.myapplication</span></li><li>hdc shell aa attach -<span class="hljs-selector-tag">b</span> com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.myapplication</span></li></ol></pre></div></div> </li><li>运行lldb-server。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li>hdc shell aa process -<span class="hljs-selector-tag">a</span> EntryAbility -<span class="hljs-selector-tag">b</span> com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.myapplication</span> -D "/data/local/tmp/debugserver/com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.myapplication</span>/lldb-server platform <span class="hljs-attr">--listen</span> unix-abstract:///lldb-server/platform.sock<span class="hljs-string">"</span></li></ol></pre></div></div> </li><li>打开命令行窗口2，运行二进制文件lldb。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>./lldb</li></ol></pre></div></div> </li><li>在LLDB命令行窗口进行远端选择与连接。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-perl" data-highlighted="yes"><ol class="linenums"><li>(lldb) platform <span class="hljs-keyword">select</span> remote-ohos </li><li>(lldb) platform <span class="hljs-keyword">connect</span> unix-abstract-<span class="hljs-keyword">connect</span>:<span class="hljs-regexp">//</span><span class="hljs-regexp">/lldb-server/pla</span>tform.sock</li></ol></pre></div></div> </li><li>添加目标可执行文件搜索路径。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-go" data-highlighted="yes"><ol class="linenums"><li>(lldb) settings <span class="hljs-built_in">append</span> target.exec-search-paths <span class="hljs-string">"C:\Users\xxx\DevEcoStudioProjects\MyApplication \entry\build\default\intermediates\cmake\default\obj\arm64-v8a"</span></li></ol></pre></div></div> </li><li>在源代码第6行处设置断点。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-python" data-highlighted="yes"><ol class="linenums"><li>(lldb) <span class="hljs-built_in">breakpoint</span> <span class="hljs-built_in">set</span> --file <span class="hljs-string">"C:/Users/xxx/DevEcoStudioProjects/MyApplication/entry/src/main/cpp/napi_init.cpp"</span> --line <span class="hljs-number">6</span></li></ol></pre></div></div> </li><li>指定要调试的设备上的hap包对应的应用pid。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>(<span class="hljs-variable">lldb</span>) <span class="hljs-title class_">attach</span> &lt;<span class="hljs-title class_">pid</span>&gt;</li></ol></pre></div></div> </li><li>点击设备应用，使其继续响应，并停止在断点处。</li><li>继续调试。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" data-highlighted="yes"><ol class="linenums"><li>(lldb) <span class="hljs-keyword">continue</span></li></ol></pre></div></div> </li><li>显示当前线程的堆栈回溯。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>(lldb) bt</li></ol></pre></div></div> </li><li>按需执行调试命令进行后续调试操作。</li><li>退出调试。<div _ngcontent-lpj-c106="" class="highlight-div"><div _ngcontent-lpj-c106="" class="highlight-div-header"><div _ngcontent-lpj-c106="" class="highlight-div-header-left"><div _ngcontent-lpj-c106="" class="handle-button expand-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpj-c106="" class="highlight-div-header-right"><div _ngcontent-lpj-c106="" class="handle-button ai-button"></div><div _ngcontent-lpj-c106="" class="handle-button line-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpj-c106="" class="handle-button theme-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpj-c106="" class="handle-button copy-button"><div _ngcontent-lpj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>(lldb) quit</li></ol></pre></div></div> </li></ol> <p></p> </div> <div class="tiledSection"><h2 id="section1879015106164">FAQ<i class="anchor-icon anchor-icon-link" anchorid="section1879015106164" tips="复制节点链接"></i></h2><ul><li>当在LLDB调试环境中执行run命令时，若控制台返回"error: 'A' packet returned an error: 8"或类似错误代码，此问题通常表明调试器无法创建调试进程。<p>该异常现象主要由权限不足引发，建议通过以下步骤排查：</p> <p>1）验证目标设备是否已开启调试授权；</p> <p>验证方式为设备上设置中的”开发者选项”，如果没有开启，开启后再尝试调试。</p> <p>2）确认当前用户是否具有目标进程的调试权限。</p> <p>user用户只能调试应用，不能调试可执行文件。</p> </li></ul> <ul><li>运行lldb-server，报错“Permission denied”。一般是lldb-server无可执行权限导致的，添加权限即可。</li></ul> </div> </div> <div></div></div>