<h1 _ngcontent-hfg-c119="" class="doc-title ng-star-inserted" title="Local Test"> Local Test </h1>

<div _ngcontent-hfg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001853634485"><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478174558__p099865113416">当前不支持测试C/C++方法及系统API。</p> </div></div></div> <div class="tiledSection"><h2 id="section528394205815">创建Local Test测试用例<i class="anchor-icon anchor-icon-link" anchorid="section528394205815" tips="复制节点链接"></i></h2><ol id="ZH-CN_TOPIC_0000002478174558__ol22832420583"><li id="li228312424585"><span>在工程目录下打开待测试模块（支持HAP、HAR、HSP模块）下的ets文件，将光标置于代码中任意位置，单击<strong>右键 &gt; Show Context Actions</strong><strong> &gt; Create Local Test</strong>或快捷键<strong>Alt+Enter</strong><strong>（macOS为Option+Enter） &gt; Create Local Test</strong>创建测试类。</span><p></p><p id="ZH-CN_TOPIC_0000002478174558__p19283642205817"><span><img originheight="177" originwidth="923" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104849.25102893008567713929661433382491:50001231000000:2800:389D522C70CD485D82B136CE21E0E6FE07C4F8A58E3881E409DD907D94A54942.png" width="920" height="176.42470205850486"></span></p> <p></p></li><li id="li12841842135815"><span>在弹出的Create Local Test窗口，输入或选择如下参数。</span><p></p><ul id="ZH-CN_TOPIC_0000002478174558__ul628410421582"><li id="li1284242145812"><strong>Testing library</strong>：测试类型，默认为DECC-ArkTSUnit。</li><li id="li4284142165814"><strong>ArkTS name</strong>：创建的测试文件名称，测试文件中包含了测试用例。测试文件名称要求在工程目录范围内具有唯一性，仅支持字母、数字、下划线（_）和点（.）。</li><li id="li1228494265816"><strong>Destination package</strong>：测试文件存放的位置，建议存放在待测试模块的test目录下。</li></ul> <p id="ZH-CN_TOPIC_0000002478174558__p7284184214584"><span><img originheight="181" originwidth="793" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104849.41331106683756247554164664722675:50001231000000:2800:A34872AD6FD46A43D68F21EE7A85081B3AD65CEA05E37FB11453AD433B443BAA.png" width="793" height="181"></span></p> <p></p></li><li id="li182841042155820"><span>DevEco Studio在test目录下自动生成对应的测试类。在测试类中，DevEco Studio会生成对应方法的用例模板，具体测试代码需要开发者根据业务逻辑进行开发，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/unittest-guidelines" target="_blank">单元测试框架</a>。</span><p></p><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478174558__p12819412136">您也可以手动在test文件夹下创建测试用例，手动创建后，需要在List.test.ets文件中添加创建的用例类。</p> </div></div></div> <p></p></li></ol> <p id="ZH-CN_TOPIC_0000002478174558__p15177165852019"></p> </div> <div class="tiledSection"><h2 id="section62986016217">运行Local Test测试用例<i class="anchor-icon anchor-icon-link" anchorid="section62986016217" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section2284154214589" class="firsth2">运行模式<i class="anchor-icon anchor-icon-link" anchorid="section2284154214589" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478174558__p17441125161020">可以采用运行工程目录（test）、测试文件（如Index.test.ets）、测试套件（describe）、测试方法（it）的方式来执行Local Test，各级别测试执行入口如下。</p>  <div class="tablenoborder"><div class="tbBox"><table id="table8849024115311" style="border-style: none;" class="layoutFixed idpTab"><tbody><tr id="ZH-CN_TOPIC_0000002478174558__row1084920245537"><td align="center" class="nocellnorowborder" style="border: none;" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478174558__p2084932419536"><span><img originheight="443" originwidth="499" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104849.90190213605457970263554962253697:50001231000000:2800:012B9E241D35A055E343F3048596EE1E48B56933A8AC167BE2312E6A42A29FAC.png" width="436" height="387.07014028056113"></span></p> </td> <td align="center" class="cell-norowborder" style="border: none;" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478174558__p48491324125312"><span><img originheight="434" originwidth="466" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104849.66993518846023232084931394784583:50001231000000:2800:8C7262B8E8AC6619DB4E7BBD4A16AB69DD44632C37D8F3E3F4F7C5A04B1D8C56.png" width="436" height="406.0600858369099"></span></p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478174558__row168495245531"><td align="center" class="nocellnorowborder" style="border: none;" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478174558__p108491924115318">目录级</p> </td> <td align="center" class="cell-norowborder" style="border: none;" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478174558__p14849142411534">文件级</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478174558__row88495249531"><td align="center" class="nocellnorowborder" style="border: none;" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478174558__p13849132419537"><span><img originheight="172" originwidth="504" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104849.63396370344746502685843886916676:50001231000000:2800:E2AC99CE13D60A4DD0550B3DCA1996078A8A9AE3AFA26AA2022EEA98011D1078.png" width="436" height="148.7936507936508"></span></p> </td> <td align="center" class="cell-norowborder" style="border: none;" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478174558__p1985018244535"><span><img originheight="172" originwidth="467" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104849.38269845549163983947456125992346:50001231000000:2800:03FFEAFF8F2EB6B33D796E81F55509FABF63A0089ED33F7B6E82F920D3996DE6.png" width="436" height="160.58244111349038"></span></p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478174558__row1885072411535"><td align="center" class="row-nocellborder" style="border: none;" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478174558__p1485092465312">套件级</p> </td> <td align="center" class="cellrowborder" style="border: none;" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478174558__p1085015248538">方法级</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478174558__p77931948124911">以文件级别为例，在工程目录中，选中文件，单击<strong>右键 &gt; Run'测试文件名称'</strong>，执行测试。</p> <p id="ZH-CN_TOPIC_0000002478174558__p29922492014"><span><img originheight="774" originwidth="1394" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104849.03237459829219591450150034973777:50001231000000:2800:EFA42CA02F8245E70C313D8F83BC89BB1EA96866C308D435050DAF15E9232412.png" width="920" height="510.8177905308464"></span></p> <div class="p" id="ZH-CN_TOPIC_0000002478174558__p750232712524">也可以通过如下方式，执行Local Test：<ul id="ZH-CN_TOPIC_0000002478174558__ul1328564235818"><li id="li9285242115813">在工具栏主菜单单击<strong>Run &gt; Run'测试名称'</strong>。</li><li id="li132854427586">在DevEco Studio的右上角，选择一项测试任务的配置，然后单击右侧的<span><img originheight="16" originwidth="15" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104849.59486800175318297102778665960818:50001231000000:2800:766FEB1815497B37B8FF04A806C4433BCB446D41E39A07833708FA78891919BA.png" class="IconPic notEnlarge" width="15" height="16"></span>按钮，执行Local Test。<p id="ZH-CN_TOPIC_0000002478174558__p14164114211"><span><img originheight="27" originwidth="318" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104849.28304654095190616817536211443542:50001231000000:2800:15899DC1A08024BF8CBC6B72F12FC04906603F31F98E0CEE58ADC219437D99B4.png" width="318" height="27"></span></p> </li></ul> </div> <p id="ZH-CN_TOPIC_0000002478174558__p172851942145812">执行完测试任务后，查看测试结果。</p> <p id="ZH-CN_TOPIC_0000002478174558__p3285124219581"><span><img originheight="346" originwidth="924" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104849.58277725293869079044110792252712:50001231000000:2800:AE640B9A0FA8166DB04BFCE18A3EDC62584AFCF7396E7216E942E7A3C0A67B0A.png" width="920" height="344.50216450216453"></span></p> </div> <div class="tiledSection"><h3 id="section015084913532">调试模式<i class="anchor-icon anchor-icon-link" anchorid="section015084913532" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478174558__p27762046182815">调试模式相比运行模式增加了断点管理功能。在断点命中时，可以选择单步执行、步入步出、进入下个断点等方式进行调试，另外可以使用线程堆栈可视化、变量和表达式可视化功能，快速定位问题。</p> <p id="ZH-CN_TOPIC_0000002478174558__p17962155043116">以文件级别为例，在添加断点之后，在工程目录中，选中文件，单击<strong>右键 &gt; Debug'测试文件名称'</strong>，以调试模式执行测试任务。</p> <p id="ZH-CN_TOPIC_0000002478174558__p6528131313314"><span><img originheight="768" originwidth="990" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104849.30458871050066461613487132844998:50001231000000:2800:33BEF2FB9684A57C7AFD74D79EF7A3F4F76DB18CFCD7D2C1534C4AC25D3CB78E.png" width="920" height="713.6969696969697"></span></p> <p id="ZH-CN_TOPIC_0000002478174558__p839112261334">在断点命中时，下方将出现Debug窗口。开发者可在该窗口中进行断点管理与基础调试能力的可视化操作，在断点命中时可查看当前线程的变量和堆栈信息。</p> <p id="ZH-CN_TOPIC_0000002478174558__p7819138173811"><span><img originheight="763" originwidth="1020" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104849.53555417756544650613861984768617:50001231000000:2800:77894EB7A2DA375A784DE399DE54235EFF6C5ADF78D9D3B680B66589D2DFF873.png" width="920" height="688.1960784313726"></span></p> <p id="ZH-CN_TOPIC_0000002478174558__p1710201019379"></p> <p id="ZH-CN_TOPIC_0000002478174558__p233651120378">断点命中时，在代码编辑器窗口单击右键，在弹出的菜单中将出现调试模式特有功能，如计算表达式、添加变量监视等。</p> <p id="ZH-CN_TOPIC_0000002478174558__p21711142195418"><span><img originheight="753" originwidth="1048" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104850.71411174710830898232139633675549:50001231000000:2800:272E9B3E77007515DDE2210AB07C4454F4AA96B422FE90A87F9937EDAE29CE00.png" width="920" height="661.0305343511451"></span></p> <p id="ZH-CN_TOPIC_0000002478174558__p1065793414486">在跳出所有断点后，测试结束，与运行模式相同，在测试窗口查看测试结果。</p> <p id="ZH-CN_TOPIC_0000002478174558__p149839274017"><span><img originheight="594" originwidth="1096" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104850.94849549230403568154321189392456:50001231000000:2800:7C1FD6999C4B81F62648BE38866E92C181627BACFD73152E6BD43772E6A42071.png" width="920" height="498.6131386861314"></span></p> </div> <div class="tiledSection"><h3 id="section544372815411">覆盖率统计模式<i class="anchor-icon anchor-icon-link" anchorid="section544372815411" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478174558__p79371910102815">在LocalTest运行的基础上支持代码覆盖率统计，当前仅支持ArkTS工程。</p> <p id="ZH-CN_TOPIC_0000002478174558__p1221853443">开发者可以自定义需要参与覆盖率测试的文件，具体配置方法请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ui-test#section13756446154">配置覆盖率过滤文件</a>。</p> <p id="ZH-CN_TOPIC_0000002478174558__p5551175385219">如前所述，覆盖率统计模式也有多级别入口，以文件级别为例，有两种方式启动测试：</p> <ul id="ZH-CN_TOPIC_0000002478174558__ul2847102035320"><li id="li1457012175418">方式一：在工程目录中，选中文件，单击<strong>右键 &gt; Run '测试文件名称' with Coverage</strong>，以覆盖率统计模式执行测试任务。<p id="ZH-CN_TOPIC_0000002478174558__p9141927145710"><span><img originheight="473" originwidth="407" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104850.07502145741582196368333432457272:50001231000000:2800:13D409C017D3D971CF8478D18A1A7683B10710D76CBCFD01BEF9E2B10546375C.png" width="407" height="473"></span></p> </li></ul> <p id="ZH-CN_TOPIC_0000002478174558__p206921321813"></p> <ul id="ZH-CN_TOPIC_0000002478174558__ul202250125517"><li id="li1622516120552">方式二：在DevEco Studio的右上角，选择测试任务，然后单击右侧的<span><img originheight="21" originwidth="20" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104850.74159210626772639701610312312246:50001231000000:2800:F58A1D4270BE615DFEBB911017A86B92EF4AD326D52C5B45F7FC44E7431690A9.png" class="IconPic notEnlarge" width="20" height="21"></span>按钮，执行测试。<p id="ZH-CN_TOPIC_0000002478174558__p185284155716"><span><img originheight="26" originwidth="380" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104850.89425818610129191527456998654958:50001231000000:2800:47C3D9F549A726D8BDDDD5D4E6DD5F260EA8D6D8F99FD6A3CDF85517B06EED74.png" width="380" height="26"></span></p> </li></ul> <p id="ZH-CN_TOPIC_0000002478174558__p15623123611514">启动测试后，进行编译构建，底部将出现Cover窗口，构建结束后自动拉起Cover窗口，测试任务结束后，窗口中会打印测试报告的路径。</p> <p id="ZH-CN_TOPIC_0000002478174558__p1040165194111"><span><img originheight="362" originwidth="1511" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104850.89264552194652682463775227899860:50001231000000:2800:A8EEF3652B78433E08861BFABD6988895677459FB62458ED22C299203AC55DC2.png" width="920" height="220.4103242885506"></span></p> <p id="ZH-CN_TOPIC_0000002478174558__p3849339937"></p> <p id="ZH-CN_TOPIC_0000002478174558__p14928319543">点击链接可打开报告，查看代码覆盖率详情，关于覆盖率的计算方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ui-test#section10394362109">查看覆盖率报告</a>。</p> <p id="ZH-CN_TOPIC_0000002478174558__p41951717816"><span><img originheight="463" originwidth="1775" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104850.61872753368257602564223311306594:50001231000000:2800:C576940E553203AD5FD7022C86D661538EBC9957EF932A251AFC8A90D2E9DFAE.png" width="920" height="239.9774647887324"></span></p> <p id="ZH-CN_TOPIC_0000002478174558__p147951331104113">在Cover窗口中，单击rerun按钮可以按照之前的设置，重新执行覆盖率用例。</p> <p id="ZH-CN_TOPIC_0000002478174558__p29243315415"><span><img originheight="186" originwidth="397" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104850.56005042012181407660998269395807:50001231000000:2800:377B553FBC142D80841EAD8981279A790274F0C7FC2DB1573827AD3274403584.png" width="397" height="186"></span></p> </div> <div class="tiledSection"><h2 id="section1028534245818">（可选）自定义测试用例运行任务<i class="anchor-icon anchor-icon-link" anchorid="section1028534245818" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478174558__p1285242105813">默认情况下，测试用例可直接运行。如果需要自定义测试用例运行任务，可通过如下方法进行设置。</p> <ol id="ZH-CN_TOPIC_0000002478174558__ol52851442175812"><li id="li0285342175812"><span>在工具栏主菜单单击<strong>Run</strong>&gt;<strong>Edit Configurations</strong>，进入Run/Debug Configurations界面。</span></li><li id="li202851042155812"><span>在<strong>Run/Debug Configurations</strong>界面，单击<strong>+</strong>按钮，在弹出的下拉菜单中，单击<strong>Local Test</strong>。</span><p></p><p id="ZH-CN_TOPIC_0000002478174558__p86490352189"><span><img originheight="202" originwidth="210" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104850.03794279267745458021300793204379:50001231000000:2800:BA5DD72D0681B72D68072F039936DBD85F2300DC88F10FFF96E91631BA02727E.png" class="notEnlarge" width="210" height="202"></span></p> <p></p></li><li id="li14285194216587"><span>根据实际情况，配置Local Test的运行参数。 然后单击<strong>OK</strong>，完成配置。</span><p></p><p id="ZH-CN_TOPIC_0000002478174558__p2285164212586"><span><img originheight="646" originwidth="1040" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104850.68658895401694122449457223845876:50001231000000:2800:B8FCA1165DC4408AC53460EAD45C12F277BADCE3FBDAC0EF8B096C93C8383278.png" width="920" height="571.4615384615385"></span></p> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section1722814418378">使用命令行执行Local Test<i class="anchor-icon anchor-icon-link" anchorid="section1722814418378" tips="复制节点链接"></i></h2><div class="p" id="ZH-CN_TOPIC_0000002478174558__p2508373311">通过命令行方式执行Local Test，在工程根目录下执行命令：<div _ngcontent-hfg-c106="" class="highlight-div"><div _ngcontent-hfg-c106="" class="highlight-div-header"><div _ngcontent-hfg-c106="" class="highlight-div-header-left"><div _ngcontent-hfg-c106="" class="handle-button expand-button"><div _ngcontent-hfg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hfg-c106="" class="highlight-div-header-right"><div _ngcontent-hfg-c106="" class="handle-button ai-button"></div><div _ngcontent-hfg-c106="" class="handle-button line-button"><div _ngcontent-hfg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hfg-c106="" class="handle-button theme-button"><div _ngcontent-hfg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hfg-c106="" class="handle-button copy-button"><div _ngcontent-hfg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hfg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002478174558__screen1948012317589" data-highlighted="yes"><ol class="linenums"><li>hvigorw <span class="hljs-built_in">test</span> -p module={moduleName} -p coverage={<span class="hljs-literal">true</span> | <span class="hljs-literal">false</span>} -p scope={suiteName}<span class="hljs-comment">#{methodName}</span></li></ol></pre></div></div> <ul id="ZH-CN_TOPIC_0000002478174558__ul16352189265"><li id="li1839917584520">module：执行测试的模块。缺省默认是执行所有模块的用例。</li><li id="li13141185110448">coverage：是否生成覆盖率报告，缺省默认是true。<p id="ZH-CN_TOPIC_0000002478174558__p2999527443">覆盖率测试报告路径：&lt;module-path&gt;/.test/default/outputs/test/reports/index.html</p> </li><li id="li109871928616">scope：格式为{suiteName}#{methodName}或{suiteName}，分别表示测试用例级别或测试套件级别的测试，缺省默认是执行当前模块的所有用例。</li></ul> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002478174558__ul8900848735"><li id="li8900204810319">多个module和scope之间用英文逗号分隔。</li><li id="li8863338712">暂不支持在Linux上执行该命令。</li></ul> </div></div></div> </div> <p id="ZH-CN_TOPIC_0000002478174558__p1894742617436">测试结果文件：&lt;module-path&gt;/.test/default/intermediates/test/coverage_data/test_result.txt</p> </div> </div> <div></div></div>