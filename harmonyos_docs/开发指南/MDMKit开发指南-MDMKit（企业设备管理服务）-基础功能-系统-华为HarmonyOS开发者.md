<h1 _ngcontent-tlj-c119="" class="doc-title ng-star-inserted" title="MDM Kit开发指南"> MDM Kit开发指南 </h1>

<div _ngcontent-tlj-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="功能介绍">功能介绍<i class="anchor-icon anchor-icon-link" anchorid="功能介绍" tips="复制节点链接"></i></h2>          <p>MDM Kit为企业MDM应用提供设备管理能力，包括企业设备管理与事件监听、应用管理、禁用管理、安全管理、设备设置、设备控制、设备信息获取、硬件外设管理、系统管理、网络通信管理等，具体API接口说明详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/mdm-arkts" target="_blank">API参考</a>。</p>     <p>设备管理应用：具备<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/mdm-kit-admin">企业设备管理扩展能力</a>的应用。</p>    </div>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <p>要完成一个设备管理应用开发，需要完成以下步骤：</p>     <ol>      <li>       <p>申请资质。</p></li>      <li>       <p>创建EnterpriseAdminExtensionAbility。</p></li>      <li>       <p>声明接口所需权限。</p></li>      <li>       <p>MDM功能开发与调试。</p></li>      <li>       <p>分发部署。</p></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="申请资质" class="firsth2">申请资质<i class="anchor-icon anchor-icon-link" anchorid="申请资质" tips="复制节点链接"></i></h3>          <p>在开发应用前，需要在AppGallery Connect中配置项目和应用信息。包括：</p>     <ul>      <li><a href="https://developer.huawei.com/consumer/cn/doc/start/registration-and-verification-0000001053628148" target="_blank">注册成为企业开发者</a>。</li>      <li><a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-createproject-0000001100334664" target="_blank">创建项目</a>和<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-createapp-0000001146718717" target="_blank">创建应用</a>。</li>      <li><a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-enterprise-mdm-cert-0000002283256801" target="_blank">申请MDM应用的证书</a>和<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-enterprise-mdm-profile-0000002248341094" target="_blank">Profile</a>。</li>     </ul>    </div>    <div class="tiledSection">     <h3 id="创建enterpriseadminextensionability">创建EnterpriseAdminExtensionAbility<i class="anchor-icon anchor-icon-link" anchorid="创建enterpriseadminextensionability" tips="复制节点链接"></i></h3>          <p>请参阅<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/mdm-kit-admin">EnterpriseAdminExtensionAbility开发指南</a>完成EnterpriseAdminExtensionAbility的创建。</p>    </div>    <div class="tiledSection">     <h3 id="声明接口所需权限">声明接口所需权限<i class="anchor-icon anchor-icon-link" anchorid="声明接口所需权限" tips="复制节点链接"></i></h3>          <p>在申请权限前，请保证符合<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-permission-mgmt-overview#权限使用的基本原则">权限使用的基本原则</a>。然后在工程Module对应的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file">module.json5</a>配置文件中"requestPermissions"标签下声明要使用的接口所需的权限。例如：</p>     <div _ngcontent-tlj-c106="" class="highlight-div"><div _ngcontent-tlj-c106="" class="highlight-div-header"><div _ngcontent-tlj-c106="" class="highlight-div-header-left"><div _ngcontent-tlj-c106="" class="handle-button expand-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tlj-c106="" class="highlight-div-header-right"><div _ngcontent-tlj-c106="" class="handle-button ai-button"></div><div _ngcontent-tlj-c106="" class="handle-button line-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tlj-c106="" class="handle-button theme-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tlj-c106="" class="handle-button copy-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tlj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"requestPermissions"</span>: [</li><li>  {</li><li>    <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohos.permission.ENTERPRISE_MANAGE_RESTRICTIONS"</span></li><li>  },</li><li>]</li></ol></pre></div></div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>所需要申请的权限请参考具体接口，这里提供了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-enterprise-adminmanager" target="_blank">企业设备管理</a>的链接，可基于该文档查看MDM Kit内其他API文档。</p>       <p>声明的MDM权限必须在申请MDM应用的证书和Profile时完成申请，否则后面应用还是无法获取到该权限。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="mdm功能开发">MDM功能开发<i class="anchor-icon anchor-icon-link" anchorid="mdm功能开发" tips="复制节点链接"></i></h3>          <ol>      <li>       <p>导包。MDM Kit目前包含应用管理、通信管理、安全管理、限制策略、系统管理、设备设置和查询、设备控制等多种类型的API，请根据业务需求导入使用。以下为导入adminManager和restrictions的示例。</p>       <div _ngcontent-tlj-c106="" class="highlight-div"><div _ngcontent-tlj-c106="" class="highlight-div-header"><div _ngcontent-tlj-c106="" class="highlight-div-header-left"><div _ngcontent-tlj-c106="" class="handle-button expand-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tlj-c106="" class="highlight-div-header-right"><div _ngcontent-tlj-c106="" class="handle-button ai-button"></div><div _ngcontent-tlj-c106="" class="handle-button line-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tlj-c106="" class="handle-button theme-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tlj-c106="" class="handle-button copy-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tlj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { adminManager, restrictions } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li></ol></pre></div></div></li>      <li>       <p>调用接口，实现相应的功能。以下为禁用设备Wi-Fi的示例。</p>       <div _ngcontent-tlj-c106="" class="highlight-div"><div _ngcontent-tlj-c106="" class="highlight-div-header"><div _ngcontent-tlj-c106="" class="highlight-div-header-left"><div _ngcontent-tlj-c106="" class="handle-button expand-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tlj-c106="" class="highlight-div-header-right"><div _ngcontent-tlj-c106="" class="handle-button ai-button"></div><div _ngcontent-tlj-c106="" class="handle-button line-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tlj-c106="" class="handle-button theme-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tlj-c106="" class="handle-button copy-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tlj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { restrictions } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.xxx'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span>,</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  restrictions.<span class="hljs-title function_">setDisallowedPolicy</span>(wantTemp, <span class="hljs-string">"wifi"</span>, <span class="hljs-literal">true</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"disable wifi success."</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"disable wifi fail."</span>);</li><li>}</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="调试说明">调试说明<i class="anchor-icon anchor-icon-link" anchorid="调试说明" tips="复制节点链接"></i></h3>          <p>由于MDM接口需要在激活企业设备管理扩展能力后使用，调试时需通过hdc命令来激活/解除激活扩展能力，命令如下：</p>     <div _ngcontent-tlj-c106="" class="highlight-div"><div _ngcontent-tlj-c106="" class="highlight-div-header"><div _ngcontent-tlj-c106="" class="highlight-div-header-left"><div _ngcontent-tlj-c106="" class="handle-button expand-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tlj-c106="" class="highlight-div-header-right"><div _ngcontent-tlj-c106="" class="handle-button ai-button"></div><div _ngcontent-tlj-c106="" class="handle-button line-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tlj-c106="" class="handle-button theme-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tlj-c106="" class="handle-button copy-button"><div _ngcontent-tlj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tlj-c106="" class="highlight-scroll-div"><pre class="bash prettyprint linenums hljs language-bash" hw-language="bash" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment"># 激活为超级设备管理应用</span></li><li>hdc shell edm enable-admin -n 包名 -a 企业设备管理扩展能力类名</li><li><span class="hljs-comment"># 激活为BYOD设备管理应用</span></li><li>hdc shell edm enable-admin -n 包名 -a 企业设备管理扩展能力类名 -t byod</li><li><span class="hljs-comment"># 解除激活</span></li><li>hdc shell edm disable-admin -n 包名</li></ol></pre></div></div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>正式使用时，在同一设备上只能激活一个超级设备管理应用。</p>       <p>BYOD（bring your own device），自带设备办公。指一些企业允许员工携带自己的笔记本电脑、平板电脑、智能手机等移动终端设备到办公场所，并可以用这些设备获取公司内部信息、使用企业特许应用的一种政策。</p>       <p>调试之前，需要完成资质申请。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="分发部署">分发部署<i class="anchor-icon anchor-icon-link" anchorid="分发部署" tips="复制节点链接"></i></h3>          <p>暂不支持，即将发布，敬请期待。</p>    </div>   </div>   <div></div></div>