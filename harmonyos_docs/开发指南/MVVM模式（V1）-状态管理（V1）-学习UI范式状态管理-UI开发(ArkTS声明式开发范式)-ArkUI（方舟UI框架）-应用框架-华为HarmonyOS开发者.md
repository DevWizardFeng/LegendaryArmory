<h1 _ngcontent-ijs-c119="" class="doc-title ng-star-inserted" title="MVVM模式（V1）"> MVVM模式（V1） </h1>

<div _ngcontent-ijs-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>当开发者掌握了状态管理的基本概念后，通常会尝试开发自己的应用，在应用开发初期，如果未能精心规划项目结构，随着项目扩展和复杂化，状态变量的增多将导致组件间关系变得错综复杂。此时，开发新功能可能引起连锁反应，维护成本也会增加。为此，本文旨在介绍MVVM模式以及ArkUI的UI开发模式与MVVM的关系，指导开发者如何设计项目结构，以便在产品迭代和升级时能更轻松地开发和维护。</p>    <p>本文档涵盖了大多数状态管理V1装饰器，所以在阅读本文档前，建议开发者对状态管理V1有一定的了解。建议提前阅读：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-state-management-overview">状态管理概述</a>和状态管理V1装饰器相关文档。</p>    <div class="tiledSection">     <h2 id="mvvm模式介绍">MVVM模式介绍<i class="anchor-icon anchor-icon-link" anchorid="mvvm模式介绍" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="概念" class="firsth2">概念<i class="anchor-icon anchor-icon-link" anchorid="概念" tips="复制节点链接"></i></h3>          <p>在应用开发中，UI更新需要实时同步数据状态变化，这直接影响应用程序的性能和用户体验。为了解决数据与UI同步的复杂性，ArkUI采用了 Model-View-ViewModel（MVVM）架构模式。MVVM 将应用分为Model、View和ViewModel三个核心部分，实现数据、视图与逻辑的分离。通过这种模式，UI可以自动更新状态变化，从而更高效地管理数据和视图的绑定与更新。</p>     <ul>      <li>View：用户界面层。负责用户界面展示并与用户交互，不包含任何业务逻辑。它通过绑定ViewModel层提供的数据实现动态更新。</li>      <li>Model：数据访问层。以数据为中心，不直接与用户界面交互。负责数据结构定义，数据管理（获取、存储、更新等），以及业务逻辑处理。</li>      <li>       <p>ViewModel：表示逻辑层。作为连接Model和View的桥梁，通常一个View对应一个ViewModel。View和ViewModel有两种通信方式：</p>       <p>1.方法调用：View通过事件监听用户行为，在回调里面触发ViewModel层的方法。例如当View监听到用户Button点击行为，调用ViewModel对应的方法，处理用户操作。</p>       <p>2.双向绑定：View绑定ViewModel的数据，实现双向同步。</p></li>     </ul>     <p>ArkUI的UI开发模式就属于MVVM模式，通过对MVVM概念的基本介绍，开发者大致能猜到状态管理能在MVVM中起什么样的作用，状态管理旨在数据驱动更新，让开发者只用关注页面设计，而不去关注整个UI的刷新逻辑，数据的维护也无需开发者进行感知，由状态变量自动更新完成，而这就是属于ViewModel层所需要支持的内容，因此开发者使用MVVM模式开发自己的应用是最省心省力的。</p>    </div>    <div class="tiledSection">     <h3 id="arkui开发模式图">ArkUI开发模式图<i class="anchor-icon anchor-icon-link" anchorid="arkui开发模式图" tips="复制节点链接"></i></h3>          <p>ArkUI的UI开发模式即是MVVM模式，而状态变量在MVVM模式中扮演着ViewModel的角色，向上刷新UI，向下更新数据，整体框架如下图：</p>     <p><span><img originheight="519" originwidth="955" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114931.22580233608074936913296823318960:50001231000000:2800:F0E1288F962D2087DA5ABD2427F98FCE3BA438D65C659874DDED5FEDE85CA58E.png" width="920" height="499.979057591623"></span></p>    </div>    <div class="tiledSection">     <h3 id="分层说明">分层说明<i class="anchor-icon anchor-icon-link" anchorid="分层说明" tips="复制节点链接"></i></h3>          <p><strong>View层</strong></p>     <p>View层通常可以分为下列组件：</p>     <ul>      <li>页面组件：所有应用基本都是按照页面进行分类的，比如登录页，列表页，编辑页，帮助页，版权页等。每个页面对应需要的数据可能是完全不一样的，也可能多个页面需要的数据是同一套。</li>      <li>业务组件：本身具备本APP部分业务能力的功能组件，典型的就是这个业务组件可能关联了本项目的ViewModel中的数据，不可以被共享给其他项目使用。</li>      <li>通用组件：像系统组件一样，这类组件不会关联本APP中ViewModel的数据，这些组件可实现跨越多个项目进行共享，来完成比较通用的功能。</li>     </ul>     <p><strong>Model层</strong></p>     <p>Model层是应用的原始数据提供者，代表应用的核心业务逻辑和数据。</p>     <p><strong>ViewModel层</strong></p>     <p>为View层的组件提供对应数据，按照页面组织，当用户浏览页面时，某些页面可能不会被显示，因此，页面数据最好设计成懒加载（按需加载）的模式。</p>     <p>ViewModel层数据和Model层数据的区别：</p>     <p>Model层数据是按照整个工程、项目来组织数据，构成一套完整的APP业务数据体系。</p>     <p>ViewModel层数据，是提供某个页面上使用的数据，它可能是整个APP的业务数据的一部分。另外ViewModel层还可以附加对应Page的辅助页面显示数据，这部分数据可能与本APP的业务完全无关，仅仅是为页面展示提供便利的辅助数据。</p>    </div>    <div class="tiledSection">     <h3 id="架构核心原则">架构核心原则<i class="anchor-icon anchor-icon-link" anchorid="架构核心原则" tips="复制节点链接"></i></h3>          <p><strong>不可跨层访问</strong></p>     <ul>      <li>View层不可以直接调用Model层的数据，只能通过ViewModel提供的方法进行调用。</li>      <li>Model层不能直接操作UI，只能通知ViewModel层数据有更新，由ViewModel层更新对应的数据。</li>     </ul>     <p><strong>下层不可访问上层数据</strong></p>     <p>下层数据通过通知模式更新上层数据。在业务逻辑中，下层不可直接获取上层数据。例如，ViewModel层的逻辑处理不应该依赖View层界面上的某个值。</p>     <p><strong>非父子组件间不可直接访问</strong></p>     <p>这是针对View层设计的核心原则，一个组件应该具备以下逻辑：</p>     <ul>      <li>禁止直接访问父组件（必须使用事件或是订阅能力）。</li>      <li>禁止直接访问兄弟组件。这是因为组件应该仅能访问自己的子节点（通过传参）和父节点（通过事件或通知），以此完成组件之间的解耦。</li>     </ul>     <p>对于一个组件，这样设计的原因如下：</p>     <ul>      <li>组件自己使用了哪些子组件是明确的，因此可以访问。</li>      <li>组件被放置于哪个父节点下是未知的，因此组件想访问父节点，就只能通过通知或者事件能力完成。</li>      <li>组件不可能知道自己的兄弟节点是谁，因此组件不可以操纵兄弟节点。</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="备忘录开发实战">备忘录开发实战<i class="anchor-icon anchor-icon-link" anchorid="备忘录开发实战" tips="复制节点链接"></i></h2>          <p>本节通过备忘录应用的开发，使开发者了解如何使用ArkUI框架设计自己的应用。本节直接进行功能开发，未设计代码架构，即根据需求即时开发，不考虑后续维护，同时，本节还将介绍功能开发所需的装饰器。</p>    </div>    <div class="tiledSection">     <h3 id="state状态变量" class="firsth2">@State状态变量<i class="anchor-icon anchor-icon-link" anchorid="state状态变量" tips="复制节点链接"></i></h3>          <ul>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-state">@State</a>装饰器是最常用的装饰器之一，用于定义状态变量。通常，这些状态变量作为父组件的数据源，开发者点击时，触发状态变量的更新，刷新UI。</li>     </ul>     <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isFinished</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'全部待办'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">margin</span>({<span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span>})</li><li>
</li><li>      <span class="hljs-comment">// 待办事项</span></li><li>      <span class="hljs-title class_">Row</span>({<span class="hljs-attr">space</span>: <span class="hljs-number">15</span>}) {</li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>) {</li><li>          <span class="hljs-comment">// 此处'app.media.finished'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.finished'</span>))</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">28</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">28</span>)</li><li>        }</li><li>        <span class="hljs-keyword">else</span> {</li><li>          <span class="hljs-comment">// 此处'app.media.unfinished'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.unfinished'</span>))</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">28</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">28</span>)</li><li>        }</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'学习高数'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)</li><li>          .<span class="hljs-title function_">decoration</span>({<span class="hljs-attr">type</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span> ? <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span> : <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">None</span>})</li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'40%'</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">border</span>({<span class="hljs-attr">width</span>: <span class="hljs-number">5</span>})</li><li>      .<span class="hljs-title function_">padding</span>({<span class="hljs-attr">left</span>: <span class="hljs-number">15</span>})</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>;</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({<span class="hljs-attr">top</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">5</span>})</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#90f1f3f5'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>效果图：</p>     <p><span><img originheight="636" originwidth="300" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114931.74031375821429419999854856637778:50001231000000:2800:C3731363359DECB706D4BF05773C73143253B21F42DF7FB83DD561E88E740FEB.gif" width="300" height="636"></span></p>    </div>    <div class="tiledSection">     <h3 id="proplink的作用">@Prop、@Link的作用<i class="anchor-icon anchor-icon-link" anchorid="proplink的作用" tips="复制节点链接"></i></h3>          <p>上述示例中，所有代码都写在了@Entry组件中。随着需要渲染的组件越来越多，@Entry组件必然需要进行拆分，为此，拆分出的子组件就需要使用@Prop和@Link装饰器：</p>     <ul>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-prop">@Prop</a>是父子间单向传递，子组件会深拷贝父组件数据，可从父组件更新，也可自己更新数据，但不会同步回父组件。</li>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-link">@Link</a>是父子间双向传递，父组件改变，会通知所有的@Link，同时@Link的更新也会通知父组件的数据源进行刷新。</li>     </ul>     <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">TodoComponent</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'全部待办'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({<span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span>})</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">AllChooseComponent</span> {</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">isFinished</span>: <span class="hljs-built_in">boolean</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'全选'</span>, {<span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Normal</span>})</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#f7f6cc74'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">padding</span>({<span class="hljs-attr">left</span>: <span class="hljs-number">15</span>})</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({<span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span>})</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ThingComponent1</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">isFinished</span>: <span class="hljs-built_in">boolean</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 待办事项1</span></li><li>    <span class="hljs-title class_">Row</span>({<span class="hljs-attr">space</span>: <span class="hljs-number">15</span>}) {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>) {</li><li>        <span class="hljs-comment">// 此处'app.media.finished'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.finished'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">28</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">28</span>)</li><li>      }</li><li>      <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-comment">// 此处'app.media.unfinished'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.unfinished'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">28</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">28</span>)</li><li>      }</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'学习语文'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)</li><li>        .<span class="hljs-title function_">decoration</span>({<span class="hljs-attr">type</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span> ? <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span> : <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">None</span>})</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'40%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">border</span>({<span class="hljs-attr">width</span>: <span class="hljs-number">5</span>})</li><li>    .<span class="hljs-title function_">padding</span>({<span class="hljs-attr">left</span>: <span class="hljs-number">15</span>})</li><li>    .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>;</li><li>    })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ThingComponent2</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">isFinished</span>: <span class="hljs-built_in">boolean</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 待办事项1</span></li><li>    <span class="hljs-title class_">Row</span>({<span class="hljs-attr">space</span>: <span class="hljs-number">15</span>}) {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>) {</li><li>        <span class="hljs-comment">// 此处'app.media.finished'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.finished'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">28</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">28</span>)</li><li>      }</li><li>      <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-comment">// 此处'app.media.unfinished'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.unfinished'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">28</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">28</span>)</li><li>      }</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'学习高数'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)</li><li>        .<span class="hljs-title function_">decoration</span>({<span class="hljs-attr">type</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span> ? <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span> : <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">None</span>})</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'40%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">border</span>({<span class="hljs-attr">width</span>: <span class="hljs-number">5</span>})</li><li>    .<span class="hljs-title function_">padding</span>({<span class="hljs-attr">left</span>: <span class="hljs-number">15</span>})</li><li>    .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>;</li><li>    })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isFinished</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 全部待办</span></li><li>      <span class="hljs-title class_">TodoComponent</span>()</li><li>
</li><li>      <span class="hljs-comment">// 全选</span></li><li>      <span class="hljs-title class_">AllChooseComponent</span>({<span class="hljs-attr">isFinished</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>})</li><li>
</li><li>      <span class="hljs-comment">// 待办事项1</span></li><li>      <span class="hljs-title class_">ThingComponent1</span>({<span class="hljs-attr">isFinished</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>})</li><li>
</li><li>      <span class="hljs-comment">// 待办事项2</span></li><li>      <span class="hljs-title class_">ThingComponent2</span>({<span class="hljs-attr">isFinished</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>})</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({<span class="hljs-attr">top</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">5</span>})</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#90f1f3f5'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>效果图如下：</p>     <p><span><img originheight="640" originwidth="300" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114931.82863840573322173917975193531445:50001231000000:2800:D68C6148DCB99485F8955AC511689C4F05EE14E51988829F6AFE5DAAA2CC2B57.gif" width="300" height="640"></span></p>    </div>    <div class="tiledSection">     <h3 id="循环渲染组件">循环渲染组件<i class="anchor-icon anchor-icon-link" anchorid="循环渲染组件" tips="复制节点链接"></i></h3>          <ul>      <li>上个示例虽然拆分出了子组件，但发现组件1和组件2的代码非常相似，当渲染的组件除了数据外，其他设置都相同时，此时就需要使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-rendering-control-foreach" target="_blank">ForEach循环渲染</a>。</li>      <li>ForEach使用之后，冗余代码变得更少，并且代码结构更加清晰。</li>     </ul>     <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">TodoComponent</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'全部待办'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({<span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span>})</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">AllChooseComponent</span> {</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">isFinished</span>: <span class="hljs-built_in">boolean</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'全选'</span>, {<span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Normal</span>})</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#f7f6cc74'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">padding</span>({<span class="hljs-attr">left</span>: <span class="hljs-number">15</span>})</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({<span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span>})</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ThingComponent</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">isFinished</span>: <span class="hljs-built_in">boolean</span>;</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">thing</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 待办事项1</span></li><li>    <span class="hljs-title class_">Row</span>({<span class="hljs-attr">space</span>: <span class="hljs-number">15</span>}) {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>) {</li><li>        <span class="hljs-comment">// 此处'app.media.finished'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.finished'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">28</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">28</span>)</li><li>      }</li><li>      <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-comment">// 此处'app.media.unfinished'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.unfinished'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">28</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">28</span>)</li><li>      }</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.thing}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)</li><li>        .<span class="hljs-title function_">decoration</span>({<span class="hljs-attr">type</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span> ? <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span> : <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">None</span>})</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'8%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>    .<span class="hljs-title function_">padding</span>({<span class="hljs-attr">left</span>: <span class="hljs-number">15</span>})</li><li>    .<span class="hljs-title function_">opacity</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span> ? <span class="hljs-number">0.3</span>: <span class="hljs-number">1</span>)</li><li>    .<span class="hljs-title function_">border</span>({<span class="hljs-attr">width</span>:<span class="hljs-number">1</span>})</li><li>    .<span class="hljs-title function_">borderColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>    .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">25</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>    .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>;</li><li>    })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isFinished</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">planList</span>: <span class="hljs-built_in">string</span>[] = [</li><li>    <span class="hljs-string">'7.30 起床'</span>,</li><li>    <span class="hljs-string">'8.30 早餐'</span>,</li><li>    <span class="hljs-string">'11.30 中餐'</span>,</li><li>    <span class="hljs-string">'17.30 晚餐'</span>,</li><li>    <span class="hljs-string">'21.30 夜宵'</span>,</li><li>    <span class="hljs-string">'22.30 洗澡'</span>,</li><li>    <span class="hljs-string">'1.30 起床'</span></li><li>  ];</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 全部待办</span></li><li>      <span class="hljs-title class_">TodoComponent</span>()</li><li>
</li><li>      <span class="hljs-comment">// 全选</span></li><li>      <span class="hljs-title class_">AllChooseComponent</span>({<span class="hljs-attr">isFinished</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>})</li><li>
</li><li>      <span class="hljs-title class_">List</span>() {</li><li>        <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">planList</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>          <span class="hljs-comment">// 待办事项1</span></li><li>          <span class="hljs-title class_">ThingComponent</span>({<span class="hljs-attr">isFinished</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>, <span class="hljs-attr">thing</span>: item})</li><li>            .<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>        })</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({<span class="hljs-attr">top</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">5</span>})</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#90f1f3f5'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>效果图如下：</p>     <p><span><img originheight="548" originwidth="260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114931.62020312931231026655937904244852:50001231000000:2800:F2414C6D4122A4B256FE3AB1B2F4EF18E9F2EF281EA1B38E4AD96B7D802BB7DC.gif" class="notEnlarge" width="260" height="548"></span></p>    </div>    <div class="tiledSection">     <h3 id="builder方法">@Builder方法<i class="anchor-icon anchor-icon-link" anchorid="builder方法" tips="复制节点链接"></i></h3>          <ul>      <li>Builder方法用于组件内定义方法，可以使得相同代码可以在组件内进行复用。</li>      <li>本示例不仅使用了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-builder">@Builder</a>方法进行去重，还对数据进行了移除，可以看到此时代码更加清晰易读，相对于最开始的代码，@Entry组件基本只用于处理页面构建逻辑，而不处理大量与页面设计无关的内容。</li>     </ul>     <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Observed</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TodoListData</span> {</li><li>  <span class="hljs-attr">planList</span>: <span class="hljs-built_in">string</span>[] = [</li><li>    <span class="hljs-string">'7.30 起床'</span>,</li><li>    <span class="hljs-string">'8.30 早餐'</span>,</li><li>    <span class="hljs-string">'11.30 中餐'</span>,</li><li>    <span class="hljs-string">'17.30 晚餐'</span>,</li><li>    <span class="hljs-string">'21.30 夜宵'</span>,</li><li>    <span class="hljs-string">'22.30 洗澡'</span>,</li><li>    <span class="hljs-string">'1.30 起床'</span></li><li>  ];</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">TodoComponent</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'全部待办'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({<span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span>})</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">AllChooseComponent</span> {</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">isFinished</span>: <span class="hljs-built_in">boolean</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'全选'</span>, {<span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>})</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#f7f6cc74'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">padding</span>({<span class="hljs-attr">left</span>: <span class="hljs-number">15</span>})</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({<span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span>})</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ThingComponent</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">isFinished</span>: <span class="hljs-built_in">boolean</span>;</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">thing</span>: <span class="hljs-built_in">string</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span> <span class="hljs-title function_">displayIcon</span>(<span class="hljs-params">icon: Resource</span>) {</li><li>    <span class="hljs-title class_">Image</span>(icon)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">28</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">28</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>;</li><li>      })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 待办事项1</span></li><li>    <span class="hljs-title class_">Row</span>({<span class="hljs-attr">space</span>: <span class="hljs-number">15</span>}) {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>) {</li><li>        <span class="hljs-comment">// 此处'app.media.finished'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">displayIcon</span>($r(<span class="hljs-string">'app.media.finished'</span>));</li><li>      }</li><li>      <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-comment">// 此处'app.media.unfinished'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">displayIcon</span>($r(<span class="hljs-string">'app.media.unfinished'</span>));</li><li>      }</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.thing}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)</li><li>        .<span class="hljs-title function_">decoration</span>({<span class="hljs-attr">type</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span> ? <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span> : <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">None</span>})</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">thing</span> += <span class="hljs-string">'啦'</span>;</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'8%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>    .<span class="hljs-title function_">padding</span>({<span class="hljs-attr">left</span>: <span class="hljs-number">15</span>})</li><li>    .<span class="hljs-title function_">opacity</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span> ? <span class="hljs-number">0.3</span>: <span class="hljs-number">1</span>)</li><li>    .<span class="hljs-title function_">border</span>({<span class="hljs-attr">width</span>:<span class="hljs-number">1</span>})</li><li>    .<span class="hljs-title function_">borderColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>    .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">25</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isFinished</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">TodoListData</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TodoListData</span>(); <span class="hljs-comment">// View绑定ViewModel的数据</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 全部待办</span></li><li>      <span class="hljs-title class_">TodoComponent</span>()</li><li>
</li><li>      <span class="hljs-comment">// 全选</span></li><li>      <span class="hljs-title class_">AllChooseComponent</span>({<span class="hljs-attr">isFinished</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>})</li><li>
</li><li>      <span class="hljs-title class_">List</span>() {</li><li>        <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">planList</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>          <span class="hljs-comment">// 待办事项1</span></li><li>          <span class="hljs-title class_">ThingComponent</span>({<span class="hljs-attr">isFinished</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinished</span>, <span class="hljs-attr">thing</span>: item})</li><li>            .<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>        })</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({<span class="hljs-attr">top</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">5</span>})</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#90f1f3f5'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>效果图如下：</p>     <p><span><img originheight="548" originwidth="256" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114931.73654487526200339511724392103985:50001231000000:2800:C0241FF71D509A68980533950E02D133035F49901BBDC61987FF36346CC69E82.gif" class="notEnlarge" width="256" height="548"></span></p>    </div>    <div class="tiledSection">     <h3 id="总结">总结<i class="anchor-icon anchor-icon-link" anchorid="总结" tips="复制节点链接"></i></h3>          <ul>      <li>通过逐步优化代码结构，可以看到@Entry组件作为页面的入口，其build函数应该仅考虑将需要的组件组合起来，类似于搭积木。被page调用的子组件则如同积木，等着被需要的page进行调用。状态变量类似于粘合剂，当触发UI刷新事件时，状态变量自动刷新绑定的组件，实现page的按需刷新。</li>      <li>虽然现有的架构并未使用到MVVM的设计理念，但MVVM的核心理念已初见端倪。ArkUI的UI开发天然适合MVVM模式。在ArkUI中，page和组件构成View层，page负责组织组件，组件则作为构成元素。当组件需要更新时，通过状态变量驱动组件刷新，从而更新page。ViewModel的数据则来源于Model层。</li>      <li>示例中的代码功能较为简单，但随着功能的增加，主页面的代码量也会逐渐增多。当备忘录需要添加更多功能，且其他页面也需要使用到主页面的组件时，可以考虑采用MVVM模式来组织项目结构。</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="通过mvvm开发备忘录实战">通过MVVM开发备忘录实战<i class="anchor-icon anchor-icon-link" anchorid="通过mvvm开发备忘录实战" tips="复制节点链接"></i></h2>          <p>上一章节展示了非MVVM模式下的代码组织方式。随着主页面代码的增加，应该采取合理的分层策略，使项目结构清晰，组件之间不互相引用，避免后期维护时牵一发而动全身，增加功能更新的困难。本章将通过对MVVM的核心文件组织模式，向开发者展示如何使用MVVM来重构上一章节的代码。</p>    </div>    <div class="tiledSection">     <h3 id="mvvm文件结构说明" class="firsth2">MVVM文件结构说明<i class="anchor-icon anchor-icon-link" anchorid="mvvm文件结构说明" tips="复制节点链接"></i></h3>          <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li>├── <span class="hljs-attribute">src</span></li><li>│   ├── ets</li><li>│   │   ├── pages 存放页面组件。</li><li>│   │   ├── views 存放业务组件。</li><li>│   │   ├── shares 存放通用组件。</li><li>│   │   └── viewModel 数据服务。</li><li>│   │   │   ├── LoginViewModel<span class="hljs-selector-class">.ets</span> 登录页ViewModel。</li><li>│   │   │   └── xxxViewModel<span class="hljs-selector-class">.ets</span> 其他页ViewModel。</li><li>│</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="分层设计技巧">分层设计技巧<i class="anchor-icon anchor-icon-link" anchorid="分层设计技巧" tips="复制节点链接"></i></h3>          <p><strong>Model层</strong></p>     <ul>      <li>model层存放本应用核心数据结构，这层本身和UI开发关系不大，让用户按照自己的业务逻辑进行封装。</li>     </ul>     <p><strong>ViewModel层</strong></p>     <p>注意：</p>     <p>ViewModel层不只是存放数据，它同时需要提供数据的服务及处理。</p>     <ul>      <li>ViewModel层是为视图服务的数据层。其设计具有两个特点：       <ol>        <li>按照页面组织数据。</li>        <li>每个页面数据进行懒加载。</li>       </ol></li>     </ul>     <p><strong>View层</strong></p>     <p>View层根据需要来组织，但View层需要区分一下三种组件：</p>     <ul>      <li>页面组件：提供整体页面布局，实现多页面之间的跳转，前后台事件处理等页面内容。</li>      <li>业务组件：被页面引用，构建出页面。</li>      <li>共享组件：与项目无关的多项目共享组件。</li>     </ul>     <p>共享组件和业务组件的区别：</p>     <p>业务组件包含了ViewModel数据，没有ViewModel，这个组件不能运行。</p>     <p>共享组件：不包含ViewModel层的数据，需要的数据从外部传入。共享组件包含一个自定义组件，只要外部参数（无业务参数）满足，就可以工作。</p>    </div>    <div class="tiledSection">     <h3 id="代码示例">代码示例<i class="anchor-icon anchor-icon-link" anchorid="代码示例" tips="复制节点链接"></i></h3>          <p>按MVVM模式组织结构，重构如下：</p>     <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li>├── <span class="hljs-attribute">src</span></li><li>│   ├── ets</li><li>│   │   ├── model</li><li>│   │   │   ├── ThingModel<span class="hljs-selector-class">.ets</span></li><li>│   │   │   └── TodoListModel<span class="hljs-selector-class">.ets</span></li><li>│   │   ├── pages</li><li>│   │   │   ├── Index<span class="hljs-selector-class">.ets</span></li><li>│   │   ├── views</li><li>│   │   │   ├── AllChooseComponent<span class="hljs-selector-class">.ets</span></li><li>│   │   │   ├── ThingComponent<span class="hljs-selector-class">.ets</span></li><li>│   │   │   ├── TodoComponent<span class="hljs-selector-class">.ets</span></li><li>│   │   │   └── TodoListComponent<span class="hljs-selector-class">.ets</span></li><li>│   │   ├── viewModel</li><li>│   │   │   ├── ThingViewModel<span class="hljs-selector-class">.ets</span></li><li>│   │   │   └── TodoListViewModel<span class="hljs-selector-class">.ets</span></li><li>│   └── resources</li><li>│   │   ├── rawfile</li><li>│   │   │   ├── default_tasks<span class="hljs-selector-class">.json</span></li><li>│</li></ol></pre></div></div>     <p>文件代码如下：</p>     <ul>      <li>ThingModel.ets</li>     </ul>     <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThingModel</span> {</li><li>  <span class="hljs-attr">thingName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Todo'</span>;</li><li>  <span class="hljs-attr">isFinish</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>}</li></ol></pre></div></div>     <ul>      <li>TodoListModel.ets</li>     </ul>     <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { util } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">ThingModel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ThingModel'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TodoListModel</span> {</li><li>  <span class="hljs-attr">things</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">ThingModel</span>&gt; = [];</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">things: <span class="hljs-built_in">Array</span>&lt;ThingModel&gt;</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">things</span> = things;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadTasks</span>(<span class="hljs-params">context: common.UIAbilityContext</span>) {</li><li>    <span class="hljs-keyword">let</span> getJson = <span class="hljs-keyword">await</span> context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(<span class="hljs-string">'default_tasks.json'</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">textDecoderOptions</span>: util.<span class="hljs-property">TextDecoderOptions</span> = { <span class="hljs-attr">ignoreBOM</span>: <span class="hljs-literal">true</span> };</li><li>    <span class="hljs-keyword">let</span> textDecoder = util.<span class="hljs-property">TextDecoder</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">'utf-8'</span>, textDecoderOptions);</li><li>    <span class="hljs-keyword">let</span> result = textDecoder.<span class="hljs-title function_">decodeToString</span>(getJson, { <span class="hljs-attr">stream</span>: <span class="hljs-literal">false</span> });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">things</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(result);</li><li>  }</li><li>}</li></ol></pre></div></div>     <ul>      <li>       <p>Index.ets</p>       <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-comment">// import ViewModel</span></li><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoListViewModel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../viewModel/TodoListViewModel'</span>;</li><li>
</li><li><span class="hljs-comment">// import View</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">TodoComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/TodoComponent'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AllChooseComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/AllChooseComponent'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">TodoListComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/TodoListComponent'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">TodoList</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">todoListViewModel</span>: <span class="hljs-title class_">TodoListViewModel</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TodoListViewModel</span>(); <span class="hljs-comment">// View绑定ViewModel的数据</span></li><li>  <span class="hljs-keyword">private</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todoListViewModel</span>.<span class="hljs-title function_">loadTasks</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">40</span> }) {</li><li>        <span class="hljs-comment">// 全部待办</span></li><li>        <span class="hljs-title class_">TodoComponent</span>()</li><li>        <span class="hljs-comment">// 全选</span></li><li>        <span class="hljs-title class_">AllChooseComponent</span>({ <span class="hljs-attr">todoListViewModel</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">todoListViewModel</span> })</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">TodoListComponent</span>({ <span class="hljs-attr">thingViewModelArray</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">todoListViewModel</span>.<span class="hljs-property">things</span> })</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">5</span> })</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#90f1f3f5'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>       <ul>        <li>AllChooseComponent.ets</li>       </ul>       <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoListViewModel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../viewModel/TodoListViewModel"</span>;</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">AllChooseComponent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">titleName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'全选'</span>;</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">todoListViewModel</span>: <span class="hljs-title class_">TodoListViewModel</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.titleName}</span>`</span>, { <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">todoListViewModel</span>.<span class="hljs-title function_">chooseAll</span>(); <span class="hljs-comment">// View层点击事件发生时，调用ViewModel层方法chooseAll处理逻辑</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">titleName</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">todoListViewModel</span>.<span class="hljs-property">isChoosen</span> ? <span class="hljs-string">'全选'</span> : <span class="hljs-string">'取消全选'</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#f7f6cc74'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">todoListViewModel</span>.<span class="hljs-property">isChoosen</span> ? <span class="hljs-number">15</span> : <span class="hljs-number">0</span> })</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>       <ul>        <li>ThingComponent.ets</li>       </ul>       <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">ThingViewModel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../viewModel/ThingViewModel"</span>;</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">ThingComponent</span> {</li><li>  <span class="hljs-meta">@ObjectLink</span> <span class="hljs-attr">thing</span>: <span class="hljs-title class_">ThingViewModel</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">displayIcon</span>(<span class="hljs-params">icon: Resource</span>) {</li><li>    <span class="hljs-title class_">Image</span>(icon)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">28</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">28</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">thing</span>.<span class="hljs-title function_">updateIsFinish</span>(); <span class="hljs-comment">// View层点击事件发生时，调用ViewModel层方法updateIsFinish处理逻辑</span></li><li>      })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 待办事项</span></li><li>    <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">15</span> }) {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">thing</span>.<span class="hljs-property">isFinish</span>) {</li><li>        <span class="hljs-comment">// 此处'app.media.finished'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">displayIcon</span>($r(<span class="hljs-string">'app.media.finished'</span>));</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-comment">// 此处'app.media.unfinished'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">displayIcon</span>($r(<span class="hljs-string">'app.media.unfinished'</span>));</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.thing.thingName}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)</li><li>        .<span class="hljs-title function_">decoration</span>({ <span class="hljs-attr">type</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">thing</span>.<span class="hljs-property">isFinish</span> ? <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span> : <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">None</span> })</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">thing</span>.<span class="hljs-title function_">addSuffixes</span>(); <span class="hljs-comment">// View层点击事件发生时，调用ViewModel层方法addSuffixes处理逻辑</span></li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'8%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>    .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>    .<span class="hljs-title function_">opacity</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">thing</span>.<span class="hljs-property">isFinish</span> ? <span class="hljs-number">0.3</span> : <span class="hljs-number">1</span>)</li><li>    .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>    .<span class="hljs-title function_">borderColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>    .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">25</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>       <ul>        <li>TodoComponent.ets</li>       </ul>       <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">TodoComponent</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'全部待办'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">15</span> })</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'50%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>       <ul>        <li>TodoListComponent.ets</li>       </ul>       <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">ThingViewModel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../viewModel/ThingViewModel"</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ThingViewModelArray</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../viewModel/TodoListViewModel"</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ThingComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./ThingComponent"</span>;</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">TodoListComponent</span> {</li><li>  <span class="hljs-meta">@ObjectLink</span> <span class="hljs-attr">thingViewModelArray</span>: <span class="hljs-title class_">ThingViewModelArray</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">List</span>() {</li><li>        <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">thingViewModelArray</span>, <span class="hljs-function">(<span class="hljs-params">item: ThingViewModel</span>) =&gt;</span> {</li><li>          <span class="hljs-comment">// 待办事项</span></li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">ThingComponent</span>({ <span class="hljs-attr">thing</span>: item })</li><li>              .<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>          }</li><li>        }, <span class="hljs-function">(<span class="hljs-params">item: ThingViewModel</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">return</span> item.<span class="hljs-property">thingName</span>;</li><li>        })</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>       <ul>        <li>ThingViewModel.ets</li>       </ul>       <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">ThingModel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../model/ThingModel"</span>;</li><li>
</li><li><span class="hljs-meta">@Observed</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThingViewModel</span> {</li><li>  <span class="hljs-meta">@Track</span> <span class="hljs-attr">thingName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Todo'</span>;</li><li>  <span class="hljs-meta">@Track</span> <span class="hljs-attr">isFinish</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">updateTask</span>(<span class="hljs-params">thing: ThingModel</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">thingName</span> = thing.<span class="hljs-property">thingName</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinish</span> = thing.<span class="hljs-property">isFinish</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">updateIsFinish</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinish</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFinish</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">addSuffixes</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">thingName</span> += <span class="hljs-string">'啦'</span>;</li><li>  }</li><li>}</li></ol></pre></div></div>       <ul>        <li>TodoListViewModel.ets</li>       </ul>       <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">ThingViewModel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./ThingViewModel"</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.AbilityKit"</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoListModel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../model/TodoListModel"</span>;</li><li>
</li><li><span class="hljs-meta">@Observed</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThingViewModelArray</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Array</span>&lt;<span class="hljs-title class_">ThingViewModel</span>&gt; {</li><li>}</li><li>
</li><li><span class="hljs-meta">@Observed</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TodoListViewModel</span> {</li><li>  <span class="hljs-meta">@Track</span> <span class="hljs-attr">isChoosen</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-meta">@Track</span> <span class="hljs-attr">things</span>: <span class="hljs-title class_">ThingViewModelArray</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThingViewModelArray</span>();</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadTasks</span>(<span class="hljs-params">context: common.UIAbilityContext</span>) {</li><li>    <span class="hljs-keyword">let</span> todoList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TodoListModel</span>([]);</li><li>    <span class="hljs-keyword">await</span> todoList.<span class="hljs-title function_">loadTasks</span>(context);</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> thing <span class="hljs-keyword">of</span> todoList.<span class="hljs-property">things</span>) {</li><li>      <span class="hljs-keyword">let</span> todoListViewModel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThingViewModel</span>();</li><li>      todoListViewModel.<span class="hljs-title function_">updateTask</span>(thing);</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">things</span>.<span class="hljs-title function_">push</span>(todoListViewModel);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">chooseAll</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> thing <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">things</span>) {</li><li>      thing.<span class="hljs-property">isFinish</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">isChoosen</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isChoosen</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isChoosen</span>;</li><li>  }</li><li>}</li></ol></pre></div></div>       <ul>        <li>default_tasks.json</li>       </ul>       <div _ngcontent-ijs-c106="" class="highlight-div"><div _ngcontent-ijs-c106="" class="highlight-div-header"><div _ngcontent-ijs-c106="" class="highlight-div-header-left"><div _ngcontent-ijs-c106="" class="handle-button expand-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ijs-c106="" class="highlight-div-header-right"><div _ngcontent-ijs-c106="" class="handle-button ai-button"></div><div _ngcontent-ijs-c106="" class="handle-button line-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ijs-c106="" class="handle-button theme-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ijs-c106="" class="handle-button copy-button"><div _ngcontent-ijs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ijs-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li>[</li><li>  {<span class="hljs-string">"thingName"</span>: <span class="hljs-string">"7.30起床"</span>, <span class="hljs-string">"isFinish"</span>: <span class="hljs-literal">false</span>},</li><li>  {<span class="hljs-string">"thingName"</span>: <span class="hljs-string">"8.30早餐"</span>, <span class="hljs-string">"isFinish"</span>: <span class="hljs-literal">false</span>},</li><li>  {<span class="hljs-string">"thingName"</span>: <span class="hljs-string">"11.30中餐"</span>, <span class="hljs-string">"isFinish"</span>: <span class="hljs-literal">false</span>},</li><li>  {<span class="hljs-string">"thingName"</span>: <span class="hljs-string">"17.30晚餐"</span>, <span class="hljs-string">"isFinish"</span>: <span class="hljs-literal">false</span>},</li><li>  {<span class="hljs-string">"thingName"</span>: <span class="hljs-string">"21.30夜宵"</span>, <span class="hljs-string">"isFinish"</span>: <span class="hljs-literal">false</span>},</li><li>  {<span class="hljs-string">"thingName"</span>: <span class="hljs-string">"22.30洗澡"</span>, <span class="hljs-string">"isFinish"</span>: <span class="hljs-literal">false</span>},</li><li>  {<span class="hljs-string">"thingName"</span>: <span class="hljs-string">"1.30睡觉"</span>, <span class="hljs-string">"isFinish"</span>: <span class="hljs-literal">false</span>}</li><li>]</li></ol></pre></div></div>       <p>MVVM模式拆分后的代码结构更加清晰，模块职责更明确。新页面需要使用事件组件，比如TodoListComponent组件，只需导入组件。</p>       <p>效果图如下：</p>       <p><span><img originheight="477" originwidth="396" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114932.02878596099125240365055632792987:50001231000000:2800:69FC9770D296D34B6A070E061B98415F1582BEF5BAAD18F420C9297731266233.gif" width="396" height="477"></span></p></li>     </ul>    </div>   </div>   <div></div></div>