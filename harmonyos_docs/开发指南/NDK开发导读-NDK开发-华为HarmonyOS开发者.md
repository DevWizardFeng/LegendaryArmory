<h1 _ngcontent-cay-c119="" class="doc-title ng-star-inserted" title="NDK开发导读"> NDK开发导读 </h1>

<div _ngcontent-cay-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>NDK（Native Development Kit）是HarmonyOS SDK提供的Native API、相应编译脚本和编译工具链的集合，方便开发者使用C或C++语言实现应用的关键功能。NDK只覆盖了HarmonyOS一些基础的底层能力，如C运行时基础库libc、图形库、窗口系统、多媒体、压缩库、面向ArkTS/JS与C跨语言的Node-API等，没有提供ArkTS/JS API的完整能力。</p> <p>运行态，开发者可以使用NDK中的Node-API接口，访问、创建、操作JS对象；也允许JS对象使用Native动态库。</p>  <div class="tiledSection"><h2 id="ndk适用场景">NDK适用场景<i class="anchor-icon anchor-icon-link" anchorid="ndk适用场景" tips="复制节点链接"></i></h2><p><strong>适合使用NDK的场景：应用涉及如下场景时，适合采用NDK开发</strong></p> <ul><li><p>性能敏感的场景，如游戏、物理模拟等计算密集型场景。</p>  </li><li><p>需要复用已有C或C++库的场景。</p>  </li><li><p>需要针对CPU特性进行专项定制库的场景，如Neon加速。</p>  </li></ul> <p><strong>不建议使用NDK的场景：应用涉及如下场景时，不建议采用NDK开发</strong></p> <ul><li><p>纯C或C++的应用。</p>  </li><li><p>希望在尽可能多的HarmonyOS设备上保持兼容的应用。</p>  </li></ul> </div>  <div class="tiledSection"><h2 id="ndk必备基础知识">NDK必备基础知识<i class="anchor-icon anchor-icon-link" anchorid="ndk必备基础知识" tips="复制节点链接"></i></h2><p>为顺利进行NDK开发，开发者需要先掌握必要的基本概念及基础知识。</p> </div>  <div class="tiledSection"><h3 id="前置知识" class="firsth2">前置知识<i class="anchor-icon anchor-icon-link" anchorid="前置知识" tips="复制节点链接"></i></h3><ul><li><p><strong>Linux C语言编程知识</strong></p> <p>内核、libc基础库基于POSIX等标准扩展而来，掌握基本的Linux C编程知识能够更好的帮助理解HarmonyOS NDK开发。</p>  </li><li><p><strong>CMake使用知识</strong></p> <p>CMake是HarmonyOS默认支持的构建系统。请先通过<a href="https://cmake.org/cmake/help/v3.16/guide/tutorial/" target="_blank">CMake官方文档</a>了解基础用法。</p>  </li><li><p><strong>Node Addons开发知识</strong></p> <p>ArkTS采用Node-API作为跨语言调用接口，熟悉基本的<a href="https://nodejs.org/api/addons.html" target="_blank">Node Addons开发模式</a>，可以更好理解NDK中Node-API的使用。</p>  </li><li><p><strong>Clang/LLVM编译器使用知识</strong></p> <p>具备一定的Clang/LLVM编译器基础知识，能够帮助开发者编译出更优的Native动态库。</p>  </li><li><p><strong><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/napi-introduction">Node-API</a></strong></p> <p>曾用名NAPI，是HarmonyOS中提供ArkTS/JS与C/C++跨语言调用的接口，该接口基于Node.js的Node-API扩展而来，但不完全兼容。</p>  </li></ul> </div>  <div class="tiledSection"><h3 id="ndk目录简介">NDK目录简介<i class="anchor-icon anchor-icon-link" anchorid="ndk目录简介" tips="复制节点链接"></i></h3><p>获取NDK开发包，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/build-with-ndk-cmake#获取ndk开发包">NDK开发工具目录</a>。</p> <ul><li><p>build目录：放置预定义的toolchain脚本文件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/build-with-ndk-overview#ohostoolchaincmake简介">ohos.toolchain.cmake</a></p>  <p><span><img originheight="76" originwidth="347" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114332.56141694135509428661330913752219:50001231000000:2800:8FB4F05D92ED26DDE9824475B1F70CD16750FC1A326BD24228F66C8A19AA925E.png" width="347" height="76"></span></p>  <p>CMake编译时需要读取该文件中的默认值，比如编译器架构、C++库链接方式等，因此在编译时会通过CMAKE_TOOLCHAIN_FILE指出该文件的路径，便于CMake在编译时定位到该文件。</p>  </li><li><p>build-tools文件夹：放置NDK提供的编译工具</p>  <div _ngcontent-cay-c106="" class="highlight-div"><div _ngcontent-cay-c106="" class="highlight-div-header"><div _ngcontent-cay-c106="" class="highlight-div-header-left"><div _ngcontent-cay-c106="" class="handle-button expand-button"><div _ngcontent-cay-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cay-c106="" class="highlight-div-header-right"><div _ngcontent-cay-c106="" class="handle-button ai-button"></div><div _ngcontent-cay-c106="" class="handle-button line-button"><div _ngcontent-cay-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cay-c106="" class="handle-button theme-button"><div _ngcontent-cay-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cay-c106="" class="handle-button copy-button"><div _ngcontent-cay-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cay-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment"># 键入下一行命令查看CMake的版本</span></li><li>cmake -version</li><li><span class="hljs-comment"># 结果</span></li><li>cmake version 3.16.5</li><li>CMake suite maintained and supported by Kitware (kitware.com/cmake).</li></ol></pre></div></div>  </li><li><p>llvm文件夹：放置NDK提供的编译器</p>  <p><span><img src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114332.90334016640352521203010967378289:50001231000000:2800:F320FB34307E6A03CD6CAF65E51883E76B768E20DA28A5857590E72D27629979.png"></span></p>  </li></ul> </div>  <div class="tiledSection"><h2 id="ndk常用模块">NDK常用模块<i class="anchor-icon anchor-icon-link" anchorid="ndk常用模块" tips="复制节点链接"></i></h2><p>下表介绍了NDK的常用模块及其功能简介。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.3.1.3.1.1" valign="top" width="50%">模块</th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.3.1.2" valign="top" width="50%">模块简介</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%">标准C库</td> <td class="cellrowborder" valign="top" width="50%">基于musl提供的标准C库接口。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">标准C++库</td> <td class="cellrowborder" valign="top" width="50%">C++运行时库接口，提供C++运行时能力。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">日志</td> <td class="cellrowborder" valign="top" width="50%">提供向系统输出HiLog日志接口。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">Node-API</td> <td class="cellrowborder" valign="top" width="50%">支持ArkTS/JS和C/C++之间的交互接口。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">FFRT</td> <td class="cellrowborder" valign="top" width="50%">基于任务的并发编程框架。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">libuv</td> <td class="cellrowborder" valign="top" width="50%">第三方异步IO库。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">zlib</td> <td class="cellrowborder" valign="top" width="50%">提供基础数据压缩与解压功能的zlib库。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">Rawfile</td> <td class="cellrowborder" valign="top" width="50%">提供访问应用内置资源的接口，可用于读取应用中打包的各种资源。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">XComponent</td> <td class="cellrowborder" valign="top" width="50%">ArkUI XComponent组件，提供surface与触屏事件等接口，便于开发高性能图形应用。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">Drawing</td> <td class="cellrowborder" valign="top" width="50%">系统提供的2D图形库，支持在surface进行绘制。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">OpenGL</td> <td class="cellrowborder" valign="top" width="50%">系统提供的OpenGL 3D图形接口。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">OpenSL ES</td> <td class="cellrowborder" valign="top" width="50%">支持2D、3D音频加速的接口。</td> </tr>  </tbody></table></div> </div> </div> </div></div>