<h1 _ngcontent-bqd-c119="" class="doc-title ng-star-inserted" title="OpenGL ES平台"> OpenGL ES平台 </h1>

<div _ngcontent-bqd-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section1247120472212">业务流程<i class="anchor-icon anchor-icon-link" anchorid="section1247120472212" tips="复制节点链接"></i></h2>          <p>基于OpenGL ES图形API平台，超帧内插模式的主要业务流程如下：</p>     <p><span><img originheight="893" originwidth="965" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114414.10763333798686765223163956310748:50001231000000:2800:CF482047EDF3A765DB341CEEEFB72FFB0D1577BB01DA36CA644BD4FE995AC246.png" width="920" height="851.3575129533679"></span></p>     <ol>      <li>用户进入超帧适用的游戏场景。</li>      <li>游戏应用调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga58e6b601cc4a7e8f0208d4f10f16c7e5" target="_blank">HMS_FG_CreateContext_GLES</a>接口创建超帧上下文实例。如超帧上下文实例创建失败，则无需进入步骤5到步骤9的预测帧、真实帧交替渲染送显的循环流程，只需逐帧对场景进行渲染送显即可。</li>      <li>游戏应用调用接口配置超帧实例属性。包括调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga79cc36ec768553a6560d1c553ef83c3b" target="_blank">HMS_FG_SetAlgorithmMode_GLES</a>（必选）设置超帧算法模式并选择内插模式；调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#gae46fcee6c715a6fda24df727465d42b1" target="_blank">HMS_FG_SetResolution_GLES</a>（必选）设置超帧输入输出图像分辨率；调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga6247264302a139024a92cf89da565b52" target="_blank">HMS_FG_SetCvvZSemantic_GLES</a>（可选）设置齐次裁剪空间Z/W范围及深度测试函数；调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#gaafa490d4377cc5babbc0ac0f4f7b78a7" target="_blank">HMS_FG_SetImageFormat_GLES</a>（可选）设置真实渲染帧颜色缓冲区图像格式；如果颜色缓冲区相对深度模板缓冲区基于y轴翻转180度，则调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#gaa6e340d0b1f1bc4dcd6abf378aa933df" target="_blank">HMS_FG_SetDepthStencilYDirectionInverted_GLES</a>（可选）设置翻转状态。</li>      <li>游戏应用调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#gaa5f1d5b98694100aa3e3dbb4c99ac23a" target="_blank">HMS_FG_Activate_GLES</a>接口激活超帧上下文实例。</li>      <li>游戏应用调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#gab135a0f59582d168d461ef115423cfb4" target="_blank">HMS_FG_Dispatch_GLES</a>接口并传入历史真实渲染帧颜色信息、深度信息、相机矩阵信息，生成预测帧，并更新预测帧缓冲区。当相机视图投影矩阵的平移分量非常大时（如超过10W），预测帧效果下降，画面易出现闪烁。此时可在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#gab135a0f59582d168d461ef115423cfb4" target="_blank">HMS_FG_Dispatch_GLES</a>接口调用前调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#section1450921818712" target="_blank">HMS_FG_SetExtendedCameraInfo_GLES</a>设置相机扩展信息，从而获取精度更高的预测帧效果。</li>      <li>预测帧绘制UI并送显。</li>      <li>绘制缓存中的上一帧真实渲染帧，并绘制UI。</li>      <li>上一帧真实渲染帧送显。</li>      <li>渲染游戏场景获取真实渲染帧，缓存真实渲染帧颜色信息、深度信息、相机矩阵等信息，用于后续超帧预测。由于内插模式真实帧需要等待前一帧预测帧绘制并送显后再送显，因此此处缓存一帧真实帧信息。跳转至序号5继续执行，直到退出游戏场景。</li>      <li>用户退出超帧适用的游戏场景。</li>      <li>游戏应用调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga8c61d12e9e4c8f7e95bed76006ee3335" target="_blank">HMS_FG_DestroyContext_GLES</a>接口销毁超帧上下文实例并释放内存资源。</li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section831014124119">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section831014124119" tips="复制节点链接"></i></h2>          <p>本节阐述基于OpenGL ES图形API平台的超帧调用示例。详细代码请参考<a href="https://gitcode.com/harmonyos_samples/frame-generation-gles-samplecode-clientdemo-cpp" target="_blank">图形开发Sample（超帧GLES）</a>。</p>     <ol>      <li>引用Graphics Accelerate Kit超帧头文件：frame_generation_gles.h。       <div _ngcontent-bqd-c106="" class="highlight-div"><div _ngcontent-bqd-c106="" class="highlight-div-header"><div _ngcontent-bqd-c106="" class="highlight-div-header-left"><div _ngcontent-bqd-c106="" class="handle-button expand-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqd-c106="" class="highlight-div-header-right"><div _ngcontent-bqd-c106="" class="handle-button ai-button"></div><div _ngcontent-bqd-c106="" class="handle-button line-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqd-c106="" class="handle-button theme-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqd-c106="" class="handle-button copy-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqd-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 引用超帧frame_generation_gles.h头文件</span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;graphics_game_sdk/frame_generation_gles.h&gt;</span></span></li></ol></pre></div></div></li>      <li>编写CMakeLists.txt。       <div _ngcontent-bqd-c106="" class="highlight-div"><div _ngcontent-bqd-c106="" class="highlight-div-header"><div _ngcontent-bqd-c106="" class="highlight-div-header-left"><div _ngcontent-bqd-c106="" class="handle-button expand-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqd-c106="" class="highlight-div-header-right"><div _ngcontent-bqd-c106="" class="handle-button ai-button"></div><div _ngcontent-bqd-c106="" class="handle-button line-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqd-c106="" class="handle-button theme-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqd-c106="" class="handle-button copy-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqd-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-built_in">find_library</span>(</li><li>    # Sets the name of the path variable.</li><li>    framegeneration-lib</li><li>    # Specifies the name of the NDK library that you want CMake to locate.</li><li>    libframegeneration.so</li><li>)</li><li>
</li><li><span class="hljs-built_in">target_link_libraries</span>(entry PUBLIC</li><li>    ${framegeneration-lib}</li><li>)</li></ol></pre></div></div></li>      <li>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga58e6b601cc4a7e8f0208d4f10f16c7e5" target="_blank">HMS_FG_CreateContext_GLES</a>接口创建超帧上下文实例。如果返回nullptr，则说明超帧上下文实例创建失败，或当前硬件设备不支持开启超帧。       <div _ngcontent-bqd-c106="" class="highlight-div"><div _ngcontent-bqd-c106="" class="highlight-div-header"><div _ngcontent-bqd-c106="" class="highlight-div-header-left"><div _ngcontent-bqd-c106="" class="handle-button expand-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqd-c106="" class="highlight-div-header-right"><div _ngcontent-bqd-c106="" class="handle-button ai-button"></div><div _ngcontent-bqd-c106="" class="handle-button line-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqd-c106="" class="handle-button theme-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqd-c106="" class="handle-button copy-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqd-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建超帧上下文实例</span></li><li>FG_Context_GLES* context_ = <span class="hljs-built_in">HMS_FG_CreateContext_GLES</span>();</li><li><span class="hljs-keyword">if</span> (context_ == <span class="hljs-literal">nullptr</span>) {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>}</li></ol></pre></div></div></li>      <li>调用超帧实例属性配置接口，超帧算法模式选择内插模式。       <div _ngcontent-bqd-c106="" class="highlight-div"><div _ngcontent-bqd-c106="" class="highlight-div-header"><div _ngcontent-bqd-c106="" class="highlight-div-header-left"><div _ngcontent-bqd-c106="" class="handle-button expand-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqd-c106="" class="highlight-div-header-right"><div _ngcontent-bqd-c106="" class="handle-button ai-button"></div><div _ngcontent-bqd-c106="" class="handle-button line-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqd-c106="" class="handle-button theme-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqd-c106="" class="handle-button copy-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqd-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 初始化超帧接口调用错误码</span></li><li>FG_ErrorCode errorCode = FG_SUCCESS;</li><li>
</li><li><span class="hljs-comment">// 超帧算法模式</span></li><li>FG_AlgorithmModeInfo aInfo{};</li><li>aInfo.predictionMode = FG_PREDICTION_MODE_INTERPOLATION;                  <span class="hljs-comment">// 内插模式</span></li><li>aInfo.meMode = FG_ME_MODE_BASIC;                                          <span class="hljs-comment">// 运动估计基础模式</span></li><li>errorCode = <span class="hljs-built_in">HMS_FG_SetAlgorithmMode_GLES</span>(context_, &amp;aInfo);               <span class="hljs-comment">// [必选] 设置超帧算法模式</span></li><li><span class="hljs-keyword">if</span> (errorCode != FG_SUCCESS) {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>}</li><li>
</li><li><span class="hljs-comment">// 真实帧颜色缓冲区分辨率</span></li><li>FG_Dimension2D inputColorResolution{};                                    </li><li>inputColorResolution.width = <span class="hljs-number">1280</span>;                                        <span class="hljs-comment">// 真实帧颜色缓冲区图像宽度</span></li><li>inputColorResolution.height = <span class="hljs-number">720</span>;                                        <span class="hljs-comment">// 真实帧颜色缓冲区图像高度</span></li><li><span class="hljs-comment">// 真实帧深度模板缓冲区分辨率</span></li><li>FG_Dimension2D inputDepthStencilResolution{};                             </li><li>inputDepthStencilResolution.width = <span class="hljs-number">1280</span>;                                 <span class="hljs-comment">// 真实帧深度模板缓冲区图像宽度</span></li><li>inputDepthStencilResolution.height = <span class="hljs-number">720</span>;                                 <span class="hljs-comment">// 真实帧深度模板缓冲区图像高度</span></li><li><span class="hljs-comment">// 预测帧分辨率</span></li><li>FG_Dimension2D outputColorResolution{};                                    </li><li>outputColorResolution.width = <span class="hljs-number">1280</span>;                                       <span class="hljs-comment">// 预测帧图像宽度</span></li><li>outputColorResolution.height = <span class="hljs-number">720</span>;                                       <span class="hljs-comment">// 预测帧图像高度</span></li><li><span class="hljs-comment">// 超帧输入输出图像分辨率</span></li><li>FG_ResolutionInfo rInfo{};</li><li>rInfo.inputColorResolution = inputColorResolution;</li><li>rInfo.inputDepthStencilResolution = inputDepthStencilResolution;</li><li>rInfo.outputColorResolution = outputColorResolution;</li><li>errorCode = <span class="hljs-built_in">HMS_FG_SetResolution_GLES</span>(context_, &amp;rInfo);                  <span class="hljs-comment">// [必选] 设置超帧输入输出图像分辨率</span></li><li><span class="hljs-keyword">if</span> (errorCode != FG_SUCCESS) {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>}</li><li>
</li><li><span class="hljs-comment">// [可选] 设置齐次裁剪空间Z/W范围及深度测试模式，接口不调用时默认为FG_CVV_Z_SEMANTIC_MINUS_ONE_TO_ONE_FORWARD_Z</span></li><li>errorCode = <span class="hljs-built_in">HMS_FG_SetCvvZSemantic_GLES</span>(context_, FG_CVV_Z_SEMANTIC_MINUS_ONE_TO_ONE_FORWARD_Z);</li><li><span class="hljs-keyword">if</span> (errorCode != FG_SUCCESS) {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>}</li><li>
</li><li><span class="hljs-comment">// [可选] 设置真实渲染帧颜色缓冲区图像格式，接口不调用时默认为FG_FORMAT_R8G8B8A8_UNORM</span></li><li>errorCode = <span class="hljs-built_in">HMS_FG_SetImageFormat_GLES</span>(context_, FG_FORMAT_R8G8B8A8_UNORM);</li><li><span class="hljs-keyword">if</span> (errorCode != FG_SUCCESS) {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>}</li><li>
</li><li><span class="hljs-comment">// [可选] 当颜色缓冲区相对深度模板缓冲区基于y轴翻转180度时，设置第二个参数为true，接口不调用时默认为false</span></li><li>errorCode = <span class="hljs-built_in">HMS_FG_SetDepthStencilYDirectionInverted_GLES</span>(context_, <span class="hljs-literal">true</span>);</li><li><span class="hljs-keyword">if</span> (errorCode != FG_SUCCESS) {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>}</li></ol></pre></div></div></li>      <li>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#gaa5f1d5b98694100aa3e3dbb4c99ac23a" target="_blank">HMS_FG_Activate_GLES</a>接口激活超帧上下文实例。       <div _ngcontent-bqd-c106="" class="highlight-div"><div _ngcontent-bqd-c106="" class="highlight-div-header"><div _ngcontent-bqd-c106="" class="highlight-div-header-left"><div _ngcontent-bqd-c106="" class="handle-button expand-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqd-c106="" class="highlight-div-header-right"><div _ngcontent-bqd-c106="" class="handle-button ai-button"></div><div _ngcontent-bqd-c106="" class="handle-button line-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqd-c106="" class="handle-button theme-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqd-c106="" class="handle-button copy-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqd-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 激活超帧上下文实例</span></li><li>errorCode = <span class="hljs-built_in">HMS_FG_Activate_GLES</span>(context_);</li><li><span class="hljs-keyword">if</span> (errorCode != FG_SUCCESS) {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>}</li></ol></pre></div></div></li>      <li>游戏运行中，真实帧和预测帧交替渲染并送显。渲染真实帧时，缓存颜色信息、深度信息和相机矩阵等属性信息。渲染预测帧时，需调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#gab135a0f59582d168d461ef115423cfb4" target="_blank">HMS_FG_Dispatch_GLES</a>接口并传入上一帧真实帧属性信息，指定预测帧缓冲区索引，生成预测帧，最终更新预测帧缓冲区内存。       <div _ngcontent-bqd-c106="" class="highlight-div"><div _ngcontent-bqd-c106="" class="highlight-div-header"><div _ngcontent-bqd-c106="" class="highlight-div-header-left"><div _ngcontent-bqd-c106="" class="handle-button expand-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqd-c106="" class="highlight-div-header-right"><div _ngcontent-bqd-c106="" class="handle-button ai-button"></div><div _ngcontent-bqd-c106="" class="handle-button line-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqd-c106="" class="handle-button theme-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqd-c106="" class="handle-button copy-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqd-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 帧计数</span></li><li><span class="hljs-type">uint32_t</span> frameNum = <span class="hljs-number">0</span>;</li><li><span class="hljs-comment">// 帧生成属性配置结构体</span></li><li>FG_DispatchDescription_GLES dispatchDescriptionData_ {</li><li>    .inputColor = <span class="hljs-number">0U</span>, </li><li>    .inputDepthStencil = <span class="hljs-number">0U</span>, </li><li>    .viewProj{}, </li><li>    .invViewProj{}, </li><li>    .outputColor = <span class="hljs-number">0U</span></li><li>};</li><li>
</li><li><span class="hljs-comment">// 变量声明</span></li><li><span class="hljs-type">uint32_t</span> inputColor = <span class="hljs-number">0</span>;</li><li><span class="hljs-type">uint32_t</span> inputDepthStencil = <span class="hljs-number">0</span>;</li><li><span class="hljs-type">uint32_t</span> outputColor = <span class="hljs-number">0</span>;</li><li>FG_Mat4x4 preViewProj;</li><li>FG_Mat4x4 preInvViewProj;</li><li>
</li><li><span class="hljs-comment">// 帧循环</span></li><li><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {</li><li>    frameNum += <span class="hljs-number">1</span>;</li><li>    <span class="hljs-keyword">if</span> ((frameNum &amp; <span class="hljs-number">1</span>) != <span class="hljs-number">0</span>) { <span class="hljs-comment">// 预测帧渲染阶段    </span></li><li>        <span class="hljs-comment">// 传入上一帧真实渲染帧颜色缓冲区索引</span></li><li>        dispatchDescriptionData_.inputColor = inputColor;</li><li>        <span class="hljs-comment">// 传入上一帧真实渲染帧深度模板缓冲区索引</span></li><li>        dispatchDescriptionData_.inputDepthStencil = inputDepthStencil;</li><li>        <span class="hljs-comment">// 传入预测帧缓冲区索引</span></li><li>        dispatchDescriptionData_.outputColor = outputColor;</li><li>        <span class="hljs-comment">// 传入上一帧真实渲染帧视图投影矩阵</span></li><li>        dispatchDescriptionData_.viewProj = preViewProj;</li><li>        <span class="hljs-comment">// 传入上一帧真实渲染帧视图投影逆矩阵</span></li><li>        dispatchDescriptionData_.invViewProj= preInvViewProj;</li><li>        </li><li>        <span class="hljs-comment">// 生成预测帧，更新预测帧缓冲区的内存</span></li><li>        errorCode = <span class="hljs-built_in">HMS_FG_Dispatch_GLES</span>(context_, &amp;dispatchDescriptionData_);</li><li>        <span class="hljs-keyword">switch</span> (errorCode) {</li><li>            <span class="hljs-keyword">case</span> FG_SUCCESS: { <span class="hljs-comment">// 生成预测帧成功</span></li><li>                <span class="hljs-comment">// 绘制预测帧</span></li><li>                <span class="hljs-comment">// ...</span></li><li>
</li><li>                <span class="hljs-comment">// 绘制UI</span></li><li>                <span class="hljs-comment">// ...</span></li><li>
</li><li>                <span class="hljs-comment">// 预测帧送显</span></li><li>                <span class="hljs-comment">// ...</span></li><li>                <span class="hljs-keyword">break</span>;</li><li>            }</li><li>            <span class="hljs-keyword">case</span> FG_COLLECTING_PREVIOUS_FRAMES:</li><li>                <span class="hljs-comment">// 传入真实帧数量未达到固定阈值，无预测帧生成，基础内插模式传入真实帧数量&lt;2时返回该状态码，此时不要将预测帧送显</span></li><li>                <span class="hljs-keyword">break</span>;</li><li>            <span class="hljs-keyword">default</span>:</li><li>                <span class="hljs-comment">// 预测帧生成失败</span></li><li>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>        }</li><li>    } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// 真实帧渲染阶段            </span></li><li>        <span class="hljs-comment">// 绘制缓存中的上一帧真实帧</span></li><li>        <span class="hljs-comment">// ...</span></li><li>
</li><li>        <span class="hljs-comment">// 绘制UI</span></li><li>        <span class="hljs-comment">// ...</span></li><li>        </li><li>        <span class="hljs-comment">// 渲染当前帧渲染画面，缓存颜色、深度、相机矩阵等信息，用于下一帧预测帧生成</span></li><li>        <span class="hljs-comment">// ...</span></li><li>       </li><li>        <span class="hljs-comment">// 送显缓存中的上一帧真实帧</span></li><li>        <span class="hljs-comment">// ...</span></li><li>    }</li><li>}</li></ol></pre></div></div></li>      <li>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga8c61d12e9e4c8f7e95bed76006ee3335" target="_blank">HMS_FG_DestroyContext_GLES</a>接口销毁超帧实例，释放内存资源。       <div _ngcontent-bqd-c106="" class="highlight-div"><div _ngcontent-bqd-c106="" class="highlight-div-header"><div _ngcontent-bqd-c106="" class="highlight-div-header-left"><div _ngcontent-bqd-c106="" class="handle-button expand-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bqd-c106="" class="highlight-div-header-right"><div _ngcontent-bqd-c106="" class="handle-button ai-button"></div><div _ngcontent-bqd-c106="" class="handle-button line-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bqd-c106="" class="handle-button theme-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bqd-c106="" class="handle-button copy-button"><div _ngcontent-bqd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bqd-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 销毁超帧上下文实例并释放内存资源</span></li><li>errorCode = <span class="hljs-built_in">HMS_FG_DestroyContext_GLES</span>(&amp;context_);</li><li><span class="hljs-keyword">if</span> (errorCode != FG_SUCCESS) {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>}</li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>