<h1 _ngcontent-cse-c119="" class="doc-title ng-star-inserted" title="PageAbility的启动模式"> PageAbility的启动模式 </h1>

<div _ngcontent-cse-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>启动模式对应PageAbility被启动时的行为，支持单实例模式、多实例模式两种启动模式。</p> <p> <strong>表1</strong> PageAbility的启动模式</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.1.4.1.1" valign="top" width="33.33333333333333%">启动模式</th> <th align="left" class="cellrowborder" id="mcps1.3.3.1.4.1.2" valign="top" width="33.33333333333333%">描述</th> <th align="left" class="cellrowborder" id="mcps1.3.3.1.4.1.3" valign="top" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%">singleton</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">单实例模式</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p>每次调用startAbility方法时，如果应用进程中该类型的Ability实例已经存在，则复用已有的实例，系统中只存在唯一一个实例。表现为在最近任务列表中只有一个Ability实例。</p> <p>典型场景：当用户打开视频播放应用并观看视频，回到桌面后，再次打开视频播放应用，应用仍为回到桌面之前正在观看的视频。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">multiton</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">多实例模式</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p>缺省启动模式。每次调用startAbility方法时，都会在应用进程中创建一个新的Ability实例。表现为在最近任务列表中可以看到有多个该类型的Ability实例。</p> <p>典型场景：当用户打开文档应用，选择新建文档的时候，每次点击新建文档，都会创建一个新的文档任务，在最近任务列表中可以看到多个新建的文档任务。</p> </td> </tr>  </tbody></table></div> </div> <p>应用开发者可在config.json配置文件中通过“launchType”配置启动模式。示例如下：</p> <div _ngcontent-cse-c106="" class="highlight-div"><div _ngcontent-cse-c106="" class="highlight-div-header"><div _ngcontent-cse-c106="" class="highlight-div-header-left"><div _ngcontent-cse-c106="" class="handle-button expand-button"><div _ngcontent-cse-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cse-c106="" class="highlight-div-header-right"><div _ngcontent-cse-c106="" class="handle-button ai-button"></div><div _ngcontent-cse-c106="" class="handle-button line-button"><div _ngcontent-cse-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cse-c106="" class="handle-button theme-button"><div _ngcontent-cse-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cse-c106="" class="handle-button copy-button"><div _ngcontent-cse-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cse-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    ...</li><li>    <span class="hljs-attr">"abilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-comment">// singleton: 单实例模式</span></li><li>        <span class="hljs-comment">// multiton: 多实例模式</span></li><li>        <span class="hljs-attr">"launchType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"multiton"</span><span class="hljs-punctuation">,</span></li><li>        ...</li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div> <p>启动PageAbility时，对于多实例模式启动，以及单实例模式进行首次启动时，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/pageability-lifecycle">PageAbility生命周期回调</a>均会被触发。单实例非首次启动时不会再触发onCreate()接口，而是触发onNewWant()，onNewWant()的说明如下表2所示。</p> <p> <strong>表2</strong> 单实例启动模式特有的回调函数说明</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.1.3.1.1" valign="top" width="50%">接口名</th> <th align="left" class="cellrowborder" id="mcps1.3.8.1.3.1.2" valign="top" width="50%">接口描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%">onNewWant(want: Want)</td> <td class="cellrowborder" valign="top" width="50%">单实例启动模式，PageAbility非首次启动时调用onNewWant方法，开发者可以在该方法中获取want，进而根据want做进一步处理。例如，单实例PageAbility迁移场景，指定页面拉起PageAbility场景。</td> </tr>  </tbody></table></div> </div> </div> <div></div></div>