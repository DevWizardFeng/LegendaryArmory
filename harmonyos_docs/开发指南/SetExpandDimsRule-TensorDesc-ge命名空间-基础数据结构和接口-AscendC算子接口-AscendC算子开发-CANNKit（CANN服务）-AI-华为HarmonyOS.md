<h1 _ngcontent-bhg-c119="" class="doc-title ng-star-inserted" title="SetExpandDimsRule"> SetExpandDimsRule </h1>

<div _ngcontent-bhg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section105219mcpsimp">函数功能<i class="anchor-icon anchor-icon-link" anchorid="section105219mcpsimp" tips="复制节点链接"></i></h2><p>设置补维规则。补维是指在原有shape的基础上，添加一到多个维度。例如原shape[2,2]有两根轴，那么在两根轴中间补两维后的shape为[2,1,1,2]，补维后shape的第0、3根轴被称为原始轴，第1、2根轴被称为补维轴。</p> <p>通过1和0描述补维规则，1代表当前轴为补维轴，0代表当前轴为原始轴，从左到右依次代表当前shape每根轴的来源，例如：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表1 </b>补维规则示例</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.1.4.2.4.1.1" valign="top" width="33.33333333333333%"><p>补维规则</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.4.2.4.1.2" valign="top" width="33.33333333333333%"><p>补维前shape</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.4.2.4.1.3" valign="top" width="33.33333333333333%"><p>补维后shape</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%"><p>0110</p> </td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p>[2, 2]</p> </td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p>[2, 1, 1, 2]</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%"><p>100</p> </td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p>[2, 3]</p> </td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p>[1, 2, 3]</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%"><p>1000</p> </td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p>[2, 3]</p> </td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p>补维规则与补维前shape不匹配，规则指定原始轴有3根，但原始shape只有2根轴，补维报错。</p> </td> </tr>  </tbody></table></div> </div> <p>GE框架对外提供指定运行时格式（整网的输入输出节点的运行时格式）的能力，用于减少不必要的格式转换开销，获取更大的性能收益。开发者自行指定运行时格式的场景下，有两种方式来设置配套的运行时shape：</p> <ul><li>开发者自行指定运行时shape。</li><li><strong>框架推导运行时shape，此时，如果原始shape维度小于原始格式表达的维度，需要通过该接口同步设置补维规则，框架侧基于该补维规则设置运行时的shape。</strong></li></ul> </div> <div class="tiledSection"><h2 id="section105264mcpsimp">函数原型<i class="anchor-icon anchor-icon-link" anchorid="section105264mcpsimp" tips="复制节点链接"></i></h2><div _ngcontent-bhg-c106="" class="highlight-div"><div _ngcontent-bhg-c106="" class="highlight-div-header"><div _ngcontent-bhg-c106="" class="highlight-div-header-left"><div _ngcontent-bhg-c106="" class="handle-button expand-button"><div _ngcontent-bhg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bhg-c106="" class="highlight-div-header-right"><div _ngcontent-bhg-c106="" class="handle-button ai-button"></div><div _ngcontent-bhg-c106="" class="handle-button line-button"><div _ngcontent-bhg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bhg-c106="" class="handle-button theme-button"><div _ngcontent-bhg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bhg-c106="" class="handle-button copy-button"><div _ngcontent-bhg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bhg-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetExpandDimsRule</span><span class="hljs-params">(<span class="hljs-type">const</span> AscendString &amp;expand_dims_rule)</span></span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section105268mcpsimp">参数说明<i class="anchor-icon anchor-icon-link" anchorid="section105268mcpsimp" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" valign="top" width="23.76%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" valign="top" width="11.88%"><p>输入/输出</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" valign="top" width="64.36%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="23.76%"><p>expand_dims_rule</p> </td> <td class="cellrowborder" valign="top" width="11.88%"><p>输入</p> </td> <td class="cellrowborder" valign="top" width="64.36%"><p>需设置的补维规则。AscendString类型。</p> <p>使用样例：原始shape为[2, 3]，原始格式为NCHW，原始shape的维度（2）小于NCHW的维度（4），需要设置补维规则。</p> <p>比如，补维规则设置为“0110”，补维后shape为[2, 1, 1, 3]。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section105293mcpsimp">返回值<i class="anchor-icon anchor-icon-link" anchorid="section105293mcpsimp" tips="复制节点链接"></i></h2><p>无</p> </div> <div class="tiledSection"><h2 id="section105296mcpsimp">异常处理<i class="anchor-icon anchor-icon-link" anchorid="section105296mcpsimp" tips="复制节点链接"></i></h2><p>无</p> </div> <div class="tiledSection"><h2 id="section105299mcpsimp">约束说明<i class="anchor-icon anchor-icon-link" anchorid="section105299mcpsimp" tips="复制节点链接"></i></h2><p>无</p> </div> </div> <div></div></div>