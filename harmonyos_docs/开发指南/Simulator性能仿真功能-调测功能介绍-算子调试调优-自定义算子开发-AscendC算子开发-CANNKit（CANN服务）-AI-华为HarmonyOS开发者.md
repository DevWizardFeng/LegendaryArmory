<h1 _ngcontent-huc-c119="" class="doc-title ng-star-inserted" title="Simulator性能仿真功能"> Simulator性能仿真功能 </h1>

<div _ngcontent-huc-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section1742012811318">CAModel性能仿真<i class="anchor-icon anchor-icon-link" anchorid="section1742012811318" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section12551142103119" class="firsth2">功能介绍<i class="anchor-icon anchor-icon-link" anchorid="section12551142103119" tips="复制节点链接"></i></h3><p>算子可以在仿真器上进行性能仿真，目前主要支持CAModel仿真器。</p> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>由于model本身存在准确性问题，CAModel建议只跑单核，仿真性能会比较准，多核一块跑比较慢，误差也大很多。</li></ul> </div></div></div> <div class="tiledSection"><h3 id="section10235112113212">使用方法（命令行）<i class="anchor-icon anchor-icon-link" anchorid="section10235112113212" tips="复制节点链接"></i></h3><p>通过命令行进行性能仿真的关键步骤如下。</p> </div> <ol><li><span>完成环境搭建，并准备好输入/标杆数据文件。</span></li><li><span>执行如下命令进行CAModel性能仿真，仅提供关键参数项示例，其他参数请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-cli-parameters#section10645104532410">Simulator仿真参数</a>按需设置。</span><p></p><div _ngcontent-huc-c106="" class="highlight-div"><div _ngcontent-huc-c106="" class="highlight-div-header"><div _ngcontent-huc-c106="" class="highlight-div-header-left"><div _ngcontent-huc-c106="" class="handle-button expand-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-huc-c106="" class="highlight-div-header-right"><div _ngcontent-huc-c106="" class="handle-button ai-button"></div><div _ngcontent-huc-c106="" class="handle-button line-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-huc-c106="" class="handle-button theme-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-huc-c106="" class="handle-button copy-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-huc-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>ascendebug kernel<strong> --backend </strong>simulator <strong>--repo-type</strong> customize<strong> --json-file</strong> ${op_config_json_file} <strong>--core-type</strong> ${core_type} –chip-version ${chip_version} <strong>--work-dir</strong> ${work_dir} <strong class="shell, console">--block-num</strong> 1 <strong>--timeout</strong> 1200 ... {其他参数}</li></ol></pre></div></div> <p>一般情况下，CAModel仿真时运行比较慢，--timeout一般设置为1200秒，--block-num一般设置为1，开发者需按实际情况设置。</p> <p></p></li><li><span>查看性能仿真结果，详细说明参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-simulator-performance-simulation#section13646206163219">产物说明</a>。</span></li></ol> <div class="tiledSection"><h3 id="section13646206163219">产物说明<i class="anchor-icon anchor-icon-link" anchorid="section13646206163219" tips="复制节点链接"></i></h3><p>CAModel仿真结果存放在${root}/${work_dir}/simulator路径下，其中${root}表示当前操作路径，${work_dir}表示调测工作空间，默认为/debug_workspace/${op_type}目录，${op_type}为算子名。目录结构示例如下。</p> </div> <div _ngcontent-huc-c106="" class="highlight-div"><div _ngcontent-huc-c106="" class="highlight-div-header"><div _ngcontent-huc-c106="" class="highlight-div-header-left"><div _ngcontent-huc-c106="" class="handle-button expand-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-huc-c106="" class="highlight-div-header-right"><div _ngcontent-huc-c106="" class="handle-button ai-button"></div><div _ngcontent-huc-c106="" class="handle-button line-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-huc-c106="" class="handle-button theme-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-huc-c106="" class="handle-button copy-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-huc-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>├ ${op_type}                           // 算子名</li><li>├── simulator</li><li>│   ├── build                          // 存放NPU编译生成的中间文件</li><li>│   │   ├── launch_args.so</li><li>│   │   └── run_Makefile_0.sh</li><li>│   ├── dump</li><li>│   │   ├── camodel</li><li>│   │   │   ├── log                   // model执行日志</li><li>│   │   └── dump_data                                     </li><li>│   │       ├── 0                     // core number</li><li>│   │       │   └── index_0           // index是dump接口的desc唯一标识值</li><li>│   │       └── index_dtype.json    </li><li>│   ├── output                        // 存放NPU编译运行的输出文件</li><li>│   │   ├── z.bin                     // 运行输出原始数据</li><li>│   │   └── z.txt                     // 精度比对结果文件</li><li>│   └── src                           // 存放NPU编译生成的临时代码文件</li><li>│       └── _gen_args_${op_type}.cpp</li></ol></pre></div></div> <p></p> <ul><li><strong>查看性能仿真数据</strong><ol><li>在执行ascendebug命令的目录下，会生成执行日志debug_op.log。</li><li>查看该日志，搜索"block finish"，可以看到类似如下日志，其中block_idx为芯片的核心序号，total tick为核函数执行的circle数，该值越大代表耗时越长。<div _ngcontent-huc-c106="" class="highlight-div"><div _ngcontent-huc-c106="" class="highlight-div-header"><div _ngcontent-huc-c106="" class="highlight-div-header-left"><div _ngcontent-huc-c106="" class="handle-button expand-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-huc-c106="" class="highlight-div-header-right"><div _ngcontent-huc-c106="" class="handle-button ai-button"></div><div _ngcontent-huc-c106="" class="handle-button line-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-huc-c106="" class="handle-button theme-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-huc-c106="" class="handle-button copy-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-huc-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">block</span> <span class="hljs-variable">finish</span> -&gt; <span class="hljs-title class_">block_idx</span>: <span class=""><span class="hljs-number">0</span></span> <span class="hljs-title class_">total</span> <span class="hljs-title class_">tick</span>: <span class=""><span class="hljs-number">4153</span></span></li></ol></pre></div></div> </li></ol> </li></ul> <ul><li><strong>查看精度比对结果</strong><ol><li>在output目录下，查看是否生成输出文件(bin)和精度比对文件(txt)。</li><li>根据精度比对文件(txt)，确认算子精度比对结果。<p>精度比对结果输出样例如下，主要展示两份数据的均值、部分误差对比以及成功/失败的最终比对结论。若结果是失败，会将最大误差的部分数据展示出来。</p> <div _ngcontent-huc-c106="" class="highlight-div"><div _ngcontent-huc-c106="" class="highlight-div-header"><div _ngcontent-huc-c106="" class="highlight-div-header-left"><div _ngcontent-huc-c106="" class="handle-button expand-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-huc-c106="" class="highlight-div-header-right"><div _ngcontent-huc-c106="" class="handle-button ai-button"></div><div _ngcontent-huc-c106="" class="handle-button line-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-huc-c106="" class="handle-button theme-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-huc-c106="" class="handle-button copy-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-huc-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>data_cmp mean is -1.41e-05 data_gd mean is -1.41e-05 </li><li> split_count:2359296.0; max_diff_hd:0.1; </li><li> --------------------------------------------------------------------------------------- </li><li>   Loop           ExpectOut        RealOut         FpDiff         RateDiff </li><li> --------------------------------------------------------------------------------------- </li><li> 00000001         0.0395813       0.0395813       0.0000000       0.0000000 </li><li> 00000002         0.0160980       0.0160980       0.0000000       0.0000000 </li><li> 00000003         -0.0443420      -0.0443420      0.0000000       0.0000000 </li><li> 00000004         -0.0847778      -0.0847778      0.0000000       0.0000000 </li><li> 00000005         -0.0066605      -0.0066605      0.0000000       0.0000000 </li><li> 00000006         0.0880737       0.0880737       0.0000000       0.0000000 </li><li> 00000007         0.0848389       0.0848389       0.0000000       0.0000000 </li><li> 00000008         0.1083374       0.1083374       0.0000000       0.0000000 </li><li> 00000009         0.0838623       0.0838623       0.0000000       0.0000000 </li><li> 00000010         0.0887451       0.0887451       0.0000000       0.0000000 </li><li> 00000011         0.0572205       0.0572205       0.0000000       0.0000000 </li><li> 00000012         0.0741577       0.0741577       0.0000000       0.0000000 </li><li> 00000013         -0.0762329      -0.0762329      0.0000000       0.0000000 </li><li> 00000014         -0.0957642      -0.0957642      0.0000000       0.0000000 </li><li> 00000015         0.0102234       0.0102234       0.0000000       0.0000000 </li><li>   ...               ...             ...             ...             ... </li><li> --------------------------------------------------------------------------------------- </li><li> DiffThd           PctThd          PctRlt          Result </li><li> --------------------------------------------------------------------------------------- </li><li> 0.0050            99.50%          100.000000%     Pass </li><li> Success Success Success Success Success</li></ol></pre></div></div> </li></ol>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表1 </b>精度比对结果说明</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.1.3.2.3.1.1" valign="top" width="24%"><p>信息项</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.1.3.2.3.1.2" valign="top" width="76%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="24%"><p>data_cmp mean</p> </td> <td class="cellrowborder" valign="top" width="76%"><p>运行输出数据的均值信息。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="24%"><p>data_gd mean</p> </td> <td class="cellrowborder" valign="top" width="76%"><p>标杆数据的均值信息。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="24%"><p>split_count</p> </td> <td class="cellrowborder" valign="top" width="76%"><p>统计输出数据的个数。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="24%"><p>max_diff_hd</p> </td> <td class="cellrowborder" valign="top" width="76%"><p>输出数据和golden数据的最大误差值阈值。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="24%"><p>详细对比数据展示（部分）</p> </td> <td class="cellrowborder" valign="top" width="76%"><p>Loop（数据位置）、ExpectOut（期望输出值）、RealOut（实际输出值）、FpDiff （绝对误差值）、RateDiff（相对误差值）。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="24%"><p>整体对比结果展示</p> </td> <td class="cellrowborder" valign="top" width="76%"><p>DiffThd（相对误差值阈值）、PctThd （精度达标数据占比阈值）、PctRlt（实际精度达标数据占比）、Result（对比结果）。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="24%"><p>Error Line展示项</p> </td> <td class="cellrowborder" valign="top" width="76%"><p>若精度比对结果为Failed，会追加展示部分误差较大的数据的详细信息。</p> </td> </tr>  </tbody></table></div> </div> </li></ul> <ul><li><strong>（可选）查看dump结果</strong><p>若开启<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-commissioning-function-dumptensor">DumpTensor功能</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-commissioning-function-dumpaccchkpoint">DumpAccChkPoint功能</a>，结果文件存放在dump目录下，详细结果介绍参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-commissioning-function-dumptensor#section2903mcpsimp">产物说明</a>。</p> </li></ul> <div class="tiledSection"><h2 id="section9681855123311">Model仿真打点<i class="anchor-icon anchor-icon-link" anchorid="section9681855123311" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section6555958193413" class="firsth2">功能介绍<i class="anchor-icon anchor-icon-link" anchorid="section6555958193413" tips="复制节点链接"></i></h3><p>算子进行CAModel仿真时，可对算子任意运行阶段进行打点，从而分析不同指令的流水图，以便进一步性能调优。</p> </div> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>Kirin9020/KirinX90暂不支持使用该方法进行调优</p> </div></div></div> <div class="tiledSection"><h3 id="section17953143223516">使用方法<i class="anchor-icon anchor-icon-link" anchorid="section17953143223516" tips="复制节点链接"></i></h3></div> <ol><li><span>先在Kernel代码中的目标指令位置分别打上TRACE_START/TRACE_STOP，示例如下，起始/终止接口的说明详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-simulator-performance-simulation#section131121952173512">Trace接口说明</a>。</span><p></p><div _ngcontent-huc-c106="" class="highlight-div"><div _ngcontent-huc-c106="" class="highlight-div-header"><div _ngcontent-huc-c106="" class="highlight-div-header-left"><div _ngcontent-huc-c106="" class="handle-button expand-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-huc-c106="" class="highlight-div-header-right"><div _ngcontent-huc-c106="" class="handle-button ai-button"></div><div _ngcontent-huc-c106="" class="handle-button line-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-huc-c106="" class="handle-button theme-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-huc-c106="" class="handle-button copy-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-huc-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>TRACE_START(0x1); </li><li>DataCopy(zGm, zLocal, this-&gt;totalLength); </li><li>TRACE_STOP(0x1);</li></ol></pre></div></div> <p></p></li><li><span>参考<a href="/consumer/cn/doc/harmonyos-guides/cannkit-simulator-performance-simulation#section10235112113212">使用方法（命令行）</a>中的命令行方式，执行算子仿真流程。</span></li><li><span>在CAModel仿真结果trace图上查看打点结果。</span><p></p><p>如下图所示，其中USER_DEFINE_1_DELAY表示DataCopy指令下发到指令开始执行的时间，USER_DEFINE_1表示指令执行的时间。</p> <div class="fignone"><span class="figcap"><b>图1 </b>仿真打点示意图</span><br><span><img height="167.58" originheight="569" originwidth="1583" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114306.37732598977110696872832708422575:50001231000000:2800:09C8296C6E89F01AADA2786742107D80BDCB5C9E68414FB430DE50284060B216.png" title="点击放大" width="468.16"></span></div> <p></p></li></ol> <div class="tiledSection"><h3 id="section131121952173512">Trace接口说明<i class="anchor-icon anchor-icon-link" anchorid="section131121952173512" tips="复制节点链接"></i></h3><p>Trace接口说明表如下。</p> </div>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表2 </b>TRACE_START接口说明表</caption><tbody><tr><th class="firstcol" id="mcps1.3.18.2.4.1.1" valign="top"><p>函数原型</p> </th> <td class="cellrowborder" colspan="2" valign="top"><p>#define TRACE_START(apid)</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.18.2.4.2.1" valign="top"><p>函数功能</p> </th> <td class="cellrowborder" colspan="2" valign="top"><p>起始位置打点。</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.18.2.4.3.1" valign="top" width="23%"><p>参数(IN)</p> </th> <td class="cellrowborder" valign="top" width="16%"><p>apid</p> </td> <td class="cellrowborder" valign="top" width="61%"><p>当前预留了十个开发者自定义的类型：</p> <ul><li>0x0：USER_DEFINE_0</li><li>0x1：USER_DEFINE_1</li><li>0x2：USER_DEFINE_2</li><li>0x3：USER_DEFINE_3</li><li>0x4：USER_DEFINE_4</li><li>0x5：USER_DEFINE_5</li><li>0x6：USER_DEFINE_6</li><li>0x7：USER_DEFINE_7</li><li>0x8：USER_DEFINE_8</li><li>0x9：USER_DEFINE_9</li></ul> </td> </tr> <tr><th class="firstcol" id="mcps1.3.18.2.4.4.1" valign="top" width="23%"><p>参数(OUT)</p> </th> <td class="cellrowborder" valign="top" width="16%"><p>NA</p> </td> <td class="cellrowborder" valign="top" width="61%"><p>-</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.18.2.4.5.1" valign="top" width="23%"><p>返回值</p> </th> <td class="cellrowborder" valign="top" width="16%"><p>NA</p> </td> <td class="cellrowborder" valign="top" width="61%"><p>-</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.18.2.4.6.1" valign="top"><p>使用约束</p> </th> <td class="cellrowborder" colspan="2" valign="top"><ul><li>TRACE_START/TRACE_STOP需配套使用，若Trace图上未显示打点，则说明两者没有配对。</li><li>不支持跨核使用，例如TRACE_START在AI Cube打点，则TRACE_STOP打点也需要在AI Cube上，不能在AI Vector上。</li></ul> </td> </tr> <tr><th class="firstcol" id="mcps1.3.18.2.4.7.1" valign="top"><p>调用示例</p> </th> <td class="cellrowborder" colspan="2" valign="top"><div _ngcontent-huc-c106="" class="highlight-div"><div _ngcontent-huc-c106="" class="highlight-div-header"><div _ngcontent-huc-c106="" class="highlight-div-header-left"><div _ngcontent-huc-c106="" class="handle-button expand-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-huc-c106="" class="highlight-div-header-right"><div _ngcontent-huc-c106="" class="handle-button ai-button"></div><div _ngcontent-huc-c106="" class="handle-button line-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-huc-c106="" class="handle-button theme-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-huc-c106="" class="handle-button copy-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-huc-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>TRACE_START(0x2); </li><li>Add(zLocal, xLocal, yLocal, dataSize); </li><li>TRACE_STOP(0x2);</li></ol></pre></div></div> </td> </tr>  </tbody></table></div> </div>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表3 </b>TRACE_STOP接口说明表</caption><tbody><tr><th class="firstcol" id="mcps1.3.19.2.4.1.1" valign="top"><p>函数原型</p> </th> <td class="cellrowborder" colspan="2" valign="top"><p>#define TRACE_STOP(apid)</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.19.2.4.2.1" valign="top"><p>函数功能</p> </th> <td class="cellrowborder" colspan="2" valign="top"><p>终止位置打点。</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.19.2.4.3.1" valign="top" width="23%"><p>参数(IN)</p> </th> <td class="cellrowborder" valign="top" width="16%"><p>apid</p> </td> <td class="cellrowborder" valign="top" width="61%"><p>取值需与TRACE_START接口参数取值保持一致，否则影响打点结果。</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.19.2.4.4.1" valign="top" width="23%"><p>参数(OUT)</p> </th> <td class="cellrowborder" valign="top" width="16%"><p>None</p> </td> <td class="cellrowborder" valign="top" width="61%"><p>-</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.19.2.4.5.1" valign="top" width="23%"><p>返回值</p> </th> <td class="cellrowborder" valign="top" width="16%"><p>NA</p> </td> <td class="cellrowborder" valign="top" width="61%"><p>-</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.19.2.4.6.1" valign="top"><p>使用约束</p> </th> <td class="cellrowborder" colspan="2" valign="top"><ul><li>TRACE_START/TRACE_STOP需配套使用，若Trace图上未显示打点，则说明两者没有配对。</li><li>不支持跨核使用，例如TRACE_START在AI Cube打点，则TRACE_STOP打点也需要在AI Cube上，不能在AI Vector上。</li></ul> </td> </tr> <tr><th class="firstcol" id="mcps1.3.19.2.4.7.1" valign="top"><p>调用示例</p> </th> <td class="cellrowborder" colspan="2" valign="top"><div _ngcontent-huc-c106="" class="highlight-div"><div _ngcontent-huc-c106="" class="highlight-div-header"><div _ngcontent-huc-c106="" class="highlight-div-header-left"><div _ngcontent-huc-c106="" class="handle-button expand-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-huc-c106="" class="highlight-div-header-right"><div _ngcontent-huc-c106="" class="handle-button ai-button"></div><div _ngcontent-huc-c106="" class="handle-button line-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-huc-c106="" class="handle-button theme-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-huc-c106="" class="handle-button copy-button"><div _ngcontent-huc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-huc-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>TRACE_START(0x2); </li><li>Add(zLocal, xLocal, yLocal, dataSize); </li><li>TRACE_STOP(0x2);</li></ol></pre></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div></div></div>