<h1 _ngcontent-xse-c119="" class="doc-title ng-star-inserted" title="Stage模型应用程序包结构"> Stage模型应用程序包结构 </h1>

<div _ngcontent-xse-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>为了让开发者能对应用程序包在不同阶段的形态有更加清晰的认知，分别对开发态、编译态、发布态的应用程序结构展开介绍。</p>  <div class="tiledSection"><h2 id="开发态包结构">开发态包结构<i class="anchor-icon anchor-icon-link" anchorid="开发态包结构" tips="复制节点链接"></i></h2><p>在DevEco Studio上创建项目工程，并尝试创建多个不同类型的Module。根据实际工程中的目录对照本章节进行学习，可以有助于理解开发态的应用程序结构。</p> <p><strong>图1</strong> 项目工程结构示意图（以实际为准）</p> <p><span><img originheight="620" originwidth="327" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114346.05223226287465571385348300957039:50001231000000:2800:599142D010A48C2A90848674DA814D74E83727671A4DF977AA89D71EE2F99C3D.png" width="327" height="620"></span></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li>AppScope目录由DevEco Studio自动生成，该目录名称更改会导致当前目录下配置文件和资源加载不到，导致编译报错问题，因此该目录名称请勿修改。</li><li>Module目录名称可以由DevEco Studio自动生成（比如entry、library等），也可以自定义。为了便于说明，下表中统一采用ModuleName表示。</li></ul>  </div></div></div> <p>工程结构主要包含的文件类型及用途如下：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.2.7.1.3.1.1" valign="top" width="50%">文件类型</th> <th align="left" class="cellrowborder" id="mcps1.3.2.7.1.3.1.2" valign="top" width="50%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%">配置文件</td> <td class="cellrowborder" valign="top" width="50%"><p>包括应用级配置信息、以及Module级配置信息：</p> <p> - <strong>AppScope &gt; app.json5</strong>：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-configuration-file">app.json5配置文件</a>，用于声明应用的全局配置信息，比如应用Bundle名称、应用名称、应用图标、应用版本号等。</p> <p> - <strong>ModuleName &gt; src &gt; main &gt; module.json5</strong>：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file">module.json5配置文件</a>，用于声明Module基本信息、支持的设备类型、所含的组件信息、运行所需申请的权限等。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">ArkTS源码文件</td> <td class="cellrowborder" valign="top" width="50%"><strong>ModuleName &gt; src &gt; main &gt; ets</strong>：用于存放Module的ArkTS源码文件（.ets文件）。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">资源文件</td> <td class="cellrowborder" valign="top" width="50%"><p>包括应用级资源文件、以及Module级资源文件，支持图形、多媒体、字符串、布局文件等，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/resource-categories-and-access">资源分类与访问</a>。</p> <p> - <strong>AppScope &gt; resources</strong> ：用于存放应用需要用到的资源文件。</p> <p> - <strong>ModuleName &gt; src &gt; main &gt; resources</strong> ：用于存放该Module需要用到的资源文件。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">其他配置文件</td> <td class="cellrowborder" valign="top" width="50%"><p>用于编译构建，包括构建配置文件、编译构建任务脚本、混淆规则文件、依赖的共享包信息等。</p> <p> - <strong>build-profile.json5</strong>：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-build-profile-app" target="_blank">工程级</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-build-profile" target="_blank">Module级</a>的构建配置文件，包括<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-signing" target="_blank">应用签名</a>、产品配置等。 </p> <p> - <strong>hvigorfile.ts</strong>：工程级或Module级的编译构建任务脚本，开发者可以自定义编译构建工具版本、控制构建行为的配置参数。</p> <p> - <strong><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-build-obfuscation#section760533133313" target="_blank">obfuscation-rules.txt</a></strong>：混淆规则文件。混淆开启后，在使用Release模式进行编译时，会对代码进行编译、混淆及压缩处理，保护代码资产。</p> <p> - <strong><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-oh-package-json5" target="_blank">oh-package.json5</a></strong>：用于存放依赖库的信息，包括所依赖的三方库和共享包。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="编译态包结构">编译态包结构<i class="anchor-icon anchor-icon-link" anchorid="编译态包结构" tips="复制节点链接"></i></h2><p>不同类型的Module编译后会生成对应的HAP、HAR、HSP等文件，编译后可通过DevEco Studio或打包工具打包成APP包，用于上架应用市场。编译HAP和HSP时，会把它们所依赖的HAR直接编译到HAP和HSP中，因此打包成APP包后，编译打包视图中只有.hap和.hsp文件，没有.har文件。开发态视图与编译态视图的对照关系如下：</p> <p><strong>图2</strong> 开发态与编译态的工程结构视图</p> <p><span><img originheight="747" originwidth="1142" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114346.61623109903618448309463851876585:50001231000000:2800:E9C24A2A6ABF191CDB34F877DE5F9975F15F284CADEF198BC5C59BACBE6C2BD9.png" width="920" height="601.7863397548161"></span></p> <p>从开发态到编译态，Module文件变更如下：</p> <ul><li><strong>ets目录</strong>：ArkTS源码编译生成.abc文件。</li><li><strong>resources目录</strong>：AppScope目录下的资源文件会合入到Module下面资源目录中，如果两个目录下存在重名文件，编译打包后只会保留AppScope目录下的资源文件。</li><li><strong>module配置文件</strong>：AppScope目录下的app.json5文件字段会合入到Module下面的module.json5文件之中，编译后生成HAP或HSP最终的module.json文件。</li></ul> </div>  <div class="tiledSection"><h2 id="发布态包结构">发布态包结构<i class="anchor-icon anchor-icon-link" anchorid="发布态包结构" tips="复制节点链接"></i></h2><p>每个应用中至少包含一个.hap文件，可能包含若干个.hsp文件、也可能不含，一个应用中的所有.hap与.hsp文件合在一起称为<strong>Bundle</strong>，其对应的bundleName是应用的唯一标识（详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-configuration-file">app.json5配置文件</a>中的bundleName标签）。</p> <p>当应用发布上架到应用市场时，需要将Bundle打包为一个.app后缀的文件用于上架，这个.app文件称为<strong>App Pack</strong>（Application Package），与此同时，DevEco Studio工具会自动生成一个<strong>pack.info</strong>文件。<strong>pack.info</strong>文件描述了App Pack中每个HAP和HSP的属性，包含APP中的bundleName和versionCode信息、以及Module中的name、type和abilities等信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li>App Pack是发布上架到应用市场的基本单元，但是不能在设备上直接安装和运行。</li><li>在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-signing" target="_blank">应用签名</a>、云端分发、端侧安装时，都是以HAP/HSP为单位进行签名、分发和安装的。</li></ul>  </div></div></div> <p><strong>图3</strong> 编译发布与上架部署流程图</p> <p><span><img originheight="835" originwidth="836" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114346.52530341199376238992326152230484:50001231000000:2800:FF3E84D1781893EF91B49E43F9F1AA9348D7F55B4C67FC0BE14ADB9841D579D0.png" width="836" height="835"></span></p> </div> </div> <div></div></div>