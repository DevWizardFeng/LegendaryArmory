<h1 _ngcontent-mrr-c119="" class="doc-title ng-star-inserted" title="UIAbility组件启动模式"> UIAbility组件启动模式 </h1>

<div _ngcontent-mrr-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>的启动模式是指UIAbility实例在启动时的不同呈现状态。针对不同的业务场景，系统提供了三种启动模式：</p>    <ul>     <li>      <p><a href="/consumer/cn/doc/harmonyos-guides/uiability-launch-type#singleton启动模式">singleton（单实例模式）</a></p></li>     <li>      <p><a href="/consumer/cn/doc/harmonyos-guides/uiability-launch-type#multiton启动模式">multiton（多实例模式）</a></p></li>     <li>      <p><a href="/consumer/cn/doc/harmonyos-guides/uiability-launch-type#specified启动模式">specified（指定实例模式）</a></p></li>    </ul>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>standard是multiton的曾用名，效果与多实例模式一致。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="singleton启动模式">singleton启动模式<i class="anchor-icon anchor-icon-link" anchorid="singleton启动模式" tips="复制节点链接"></i></h2>          <p>singleton启动模式为单实例模式，也是默认情况下的启动模式。</p>     <p>每次调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#startability" target="_blank">startAbility()</a>方法时，如果应用进程中该类型的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>实例已经存在，则复用系统中的UIAbility实例。系统中只存在唯一一个该UIAbility实例，即在最近任务列表中只存在一个该类型的UIAbility实例。</p>     <p><strong>图1</strong> 单实例模式演示效果</p>     <p><span><img originheight="700" originwidth="328" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114919.17820539796232885306439557539426:50001231000000:2800:F09E9CBFCDC5FA0DFE67FAF83D6BD1E0152A3191C3F6BE46BAD1D55D2C07B49D.gif" width="328" height="700"></span></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>应用的UIAbility实例已创建，该UIAbility配置为单实例模式，再次调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#startability" target="_blank">startAbility()</a>方法启动该UIAbility实例。由于启动的还是原来的UIAbility实例，并未重新创建一个新的UIAbility实例，此时只会进入该UIAbility的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability#onnewwant" target="_blank">onNewWant()</a>回调，不会进入其<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability#oncreate" target="_blank">onCreate()</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability#onwindowstagecreate" target="_blank">onWindowStageCreate()</a>生命周期回调。如果已经创建的实例仍在启动过程中，调用startAbility()方法启动该实例，将收到错误码16000082。</p>      </div></div></div>     <p>如果需要使用singleton启动模式，在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file">module.json5配置文件</a>中的launchType字段配置为singleton即可。</p>     <div _ngcontent-mrr-c106="" class="highlight-div"><div _ngcontent-mrr-c106="" class="highlight-div-header"><div _ngcontent-mrr-c106="" class="highlight-div-header-left"><div _ngcontent-mrr-c106="" class="handle-button expand-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrr-c106="" class="highlight-div-header-right"><div _ngcontent-mrr-c106="" class="handle-button ai-button"></div><div _ngcontent-mrr-c106="" class="handle-button line-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrr-c106="" class="handle-button theme-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrr-c106="" class="handle-button copy-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrr-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-attr">"abilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"launchType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"singleton"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-comment">// ...</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="multiton启动模式">multiton启动模式<i class="anchor-icon anchor-icon-link" anchorid="multiton启动模式" tips="复制节点链接"></i></h2>          <p>multiton启动模式为多实例模式，每次调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#startability" target="_blank">startAbility()</a>方法时，都会在应用进程中创建一个新的该类型<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>实例。即在最近任务列表中可以看到有多个该类型的UIAbility实例。这种情况下可以将UIAbility配置为multiton（多实例模式）。</p>     <p><strong>图2</strong> 多实例模式演示效果</p>     <p><span><img originheight="700" originwidth="328" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114919.24732540364595876911969940999374:50001231000000:2800:40B82940AF8B1EF9882CB21D2486E0F36A22BE40946022FC7488AD3015F68BC9.gif" width="328" height="700"></span></p>     <p>multiton启动模式的开发使用，在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file">module.json5配置文件</a>中的launchType字段配置为multiton即可。</p>     <div _ngcontent-mrr-c106="" class="highlight-div"><div _ngcontent-mrr-c106="" class="highlight-div-header"><div _ngcontent-mrr-c106="" class="highlight-div-header-left"><div _ngcontent-mrr-c106="" class="handle-button expand-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrr-c106="" class="highlight-div-header-right"><div _ngcontent-mrr-c106="" class="handle-button ai-button"></div><div _ngcontent-mrr-c106="" class="handle-button line-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrr-c106="" class="handle-button theme-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrr-c106="" class="handle-button copy-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrr-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-attr">"abilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"launchType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"multiton"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-comment">// ...</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="specified启动模式">specified启动模式<i class="anchor-icon anchor-icon-link" anchorid="specified启动模式" tips="复制节点链接"></i></h2>          <p>specified启动模式为指定实例模式，针对一些特殊场景使用（例如文档应用中每次新建文档希望都能新建一个文档实例，重复打开一个已保存的文档希望打开的都是同一个文档实例）。</p>     <p><strong>图3</strong> 指定实例启动模式原理</p>     <p><span><img originheight="569" originwidth="449" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114919.82522760267671186726049690563323:50001231000000:2800:813A1589104AB45B9602963CB718518DF6A5A91CEF130694B1AF1A7B1B579DA1.png" width="449" height="569"></span></p>     <p>假设应用有两个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>实例，即EntryAbility和SpecifiedAbility。EntryAbility以specified模式启动SpecifiedAbility。基本原理如下：</p>     <ol>      <li>EntryAbility调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#startability" target="_blank">startAbility()</a>方法，并在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want" target="_blank">Want</a>的parameters字段中设置唯一的Key值，用于标识SpecifiedAbility。</li>      <li>系统在拉起SpecifiedAbility之前，会先进入对应的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-abilitystage" target="_blank">AbilityStage</a>的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-abilitystage#onacceptwant" target="_blank">onAcceptWant()</a>生命周期回调，获取用于标识目标UIAbility的Key值。</li>      <li>系统会根据获取的Key值来匹配UIAbility。       <ul>        <li>如果匹配到对应的UIAbility，则会启动该UIAbility实例，并进入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability#onnewwant" target="_blank">onNewWant()</a>生命周期回调。</li>        <li>如果无法匹配对应的UIAbility，则会创建一个新的UIAbility实例，并进入该UIAbility实例的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability#oncreate" target="_blank">onCreate()</a>生命周期回调和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability#onwindowstagecreate" target="_blank">onWindowStageCreate()</a>生命周期回调。</li>       </ul></li>     </ol>     <p><strong>图4</strong> 指定实例模式演示效果</p>     <p><span><img originheight="700" originwidth="327" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114919.97274036445412825116927065339880:50001231000000:2800:457DBB1CFD60978B9FF076CAA41131910F1D347398F0187CE1DD96CC1DE92D89.gif" width="327" height="700"></span></p>     <ol>      <li>       <p>在SpecifiedAbility中，需要将<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file">module.json5配置文件</a>的launchType字段配置为specified。</p>       <div _ngcontent-mrr-c106="" class="highlight-div"><div _ngcontent-mrr-c106="" class="highlight-div-header"><div _ngcontent-mrr-c106="" class="highlight-div-header-left"><div _ngcontent-mrr-c106="" class="handle-button expand-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrr-c106="" class="highlight-div-header-right"><div _ngcontent-mrr-c106="" class="handle-button ai-button"></div><div _ngcontent-mrr-c106="" class="handle-button line-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrr-c106="" class="handle-button theme-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrr-c106="" class="handle-button copy-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrr-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-attr">"abilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"launchType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"specified"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-comment">// ...</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div></li>      <li>       <p>在EntryAbility中，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#startability" target="_blank">startAbility()</a>方法时，可以在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want" target="_blank">want</a>参数中传入了自定义参数instanceKey作为唯一标识符，以此来区分不同的UIAbility实例。示例中instanceKey的value值设置为字符串'KEY'。</p>       <div _ngcontent-mrr-c106="" class="highlight-div"><div _ngcontent-mrr-c106="" class="highlight-div-header"><div _ngcontent-mrr-c106="" class="highlight-div-header-left"><div _ngcontent-mrr-c106="" class="handle-button expand-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrr-c106="" class="highlight-div-header-right"><div _ngcontent-mrr-c106="" class="handle-button ai-button"></div><div _ngcontent-mrr-c106="" class="handle-button line-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrr-c106="" class="handle-button theme-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrr-c106="" class="handle-button copy-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li> <span class="hljs-comment">// 在启动指定实例模式的UIAbility时，给每一个UIAbility实例配置一个独立的Key标识</span></li><li> <span class="hljs-comment">// 例如在文档使用场景中，可以用文档路径作为Key标识</span></li><li> <span class="hljs-keyword">import</span> { common, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li> <span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li> <span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'[Page_StartModel]'</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">DOMAIN_NUMBER</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0xFF00</span>;</li><li>
</li><li> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getInstance</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">string</span> {</li><li>   <span class="hljs-keyword">return</span> <span class="hljs-string">'KEY'</span>;</li><li> }</li><li>
</li><li> <span class="hljs-meta">@Entry</span></li><li> <span class="hljs-meta">@Component</span></li><li> struct <span class="hljs-title class_">Page</span>_StartModel {</li><li>   <span class="hljs-keyword">private</span> <span class="hljs-variable constant_">KEY_NEW</span> = <span class="hljs-string">'KEY'</span>;</li><li>
</li><li>   <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>     <span class="hljs-title class_">Row</span>() {</li><li>       <span class="hljs-title class_">Column</span>() {</li><li>         <span class="hljs-comment">// ...</span></li><li>         <span class="hljs-title class_">Button</span>()</li><li>           .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>             <span class="hljs-keyword">let</span> <span class="hljs-attr">context</span>: common.<span class="hljs-property">UIAbilityContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>             <span class="hljs-comment">// context为调用方UIAbility的UIAbilityContext;</span></li><li>             <span class="hljs-keyword">let</span> <span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span> = {</li><li>               <span class="hljs-attr">deviceId</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">// deviceId为空表示本设备</span></li><li>               <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.samples.stagemodelabilitydevelop'</span>,</li><li>               <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'SpecifiedFirstAbility'</span>,</li><li>               <span class="hljs-attr">moduleName</span>: <span class="hljs-string">'entry'</span>, <span class="hljs-comment">// moduleName非必选</span></li><li>               <span class="hljs-attr">parameters</span>: {</li><li>                 <span class="hljs-comment">// 自定义信息</span></li><li>                 <span class="hljs-attr">instanceKey</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">KEY_NEW</span></li><li>               }</li><li>             };</li><li>             context.<span class="hljs-title function_">startAbility</span>(want).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>               hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'Succeeded in starting SpecifiedAbility.'</span>);</li><li>             }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>               hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`Failed to start SpecifiedAbility. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>             })</li><li>             <span class="hljs-variable language_">this</span>.<span class="hljs-property">KEY_NEW</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">KEY_NEW</span> + <span class="hljs-string">'a'</span>;</li><li>           })</li><li>         <span class="hljs-comment">// ...</span></li><li>         <span class="hljs-title class_">Button</span>()</li><li>           .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>             <span class="hljs-keyword">let</span> <span class="hljs-attr">context</span>: common.<span class="hljs-property">UIAbilityContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>             <span class="hljs-comment">// context为调用方UIAbility的UIAbilityContext;</span></li><li>             <span class="hljs-keyword">let</span> <span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span> = {</li><li>               <span class="hljs-attr">deviceId</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">// deviceId为空表示本设备</span></li><li>               <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.samples.stagemodelabilitydevelop'</span>,</li><li>               <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'SpecifiedSecondAbility'</span>,</li><li>               <span class="hljs-attr">moduleName</span>: <span class="hljs-string">'entry'</span>, <span class="hljs-comment">// moduleName非必选</span></li><li>               <span class="hljs-attr">parameters</span>: {</li><li>                 <span class="hljs-comment">// 自定义信息</span></li><li>                 <span class="hljs-attr">instanceKey</span>: <span class="hljs-title function_">getInstance</span>()</li><li>               }</li><li>             };</li><li>             context.<span class="hljs-title function_">startAbility</span>(want).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>               hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'Succeeded in starting SpecifiedAbility.'</span>);</li><li>             }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>               hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`Failed to start SpecifiedAbility. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>             })</li><li>             <span class="hljs-variable language_">this</span>.<span class="hljs-property">KEY_NEW</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">KEY_NEW</span> + <span class="hljs-string">'a'</span>;</li><li>           })</li><li>         <span class="hljs-comment">// ...</span></li><li>       }</li><li>       .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>     }</li><li>     .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>   }</li><li> }</li></ol></pre></div></div></li>      <li>       <p>开发者根据业务在SpecifiedAbility所对应AbilityStage的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-abilitystage#onacceptwant" target="_blank">onAcceptWant()</a>生命周期回调设置该UIAbility的标识。示例中标识设置为SpecifiedAbilityInstance_KEY。</p>       <div _ngcontent-mrr-c106="" class="highlight-div"><div _ngcontent-mrr-c106="" class="highlight-div-header"><div _ngcontent-mrr-c106="" class="highlight-div-header-left"><div _ngcontent-mrr-c106="" class="handle-button expand-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrr-c106="" class="highlight-div-header-right"><div _ngcontent-mrr-c106="" class="handle-button ai-button"></div><div _ngcontent-mrr-c106="" class="handle-button line-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrr-c106="" class="handle-button theme-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrr-c106="" class="handle-button copy-button"><div _ngcontent-mrr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li> <span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityStage</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li> <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbilityStage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">AbilityStage</span> {</li><li>   <span class="hljs-title function_">onAcceptWant</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>): <span class="hljs-built_in">string</span> {</li><li>     <span class="hljs-comment">// 在被调用方的AbilityStage中，针对启动模式为specified的UIAbility返回一个UIAbility实例对应的一个Key值</span></li><li>     <span class="hljs-comment">// 当前示例指的是module1 Module的SpecifiedAbility</span></li><li>     <span class="hljs-keyword">if</span> (want.<span class="hljs-property">abilityName</span> === <span class="hljs-string">'SpecifiedFirstAbility'</span> || want.<span class="hljs-property">abilityName</span> === <span class="hljs-string">'SpecifiedSecondAbility'</span>) {</li><li>       <span class="hljs-comment">// 返回的字符串KEY标识为自定义拼接的字符串内容</span></li><li>       <span class="hljs-keyword">if</span> (want.<span class="hljs-property">parameters</span>) {</li><li>         <span class="hljs-keyword">return</span> <span class="hljs-string">`SpecifiedAbilityInstance_<span class="hljs-subst">${want.parameters.instanceKey}</span>`</span>;</li><li>       }</li><li>     }</li><li>     <span class="hljs-comment">// ...</span></li><li>     <span class="hljs-keyword">return</span> <span class="hljs-string">'MyAbilityStage'</span>;</li><li>   }</li><li> }</li></ol></pre></div></div>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <ol>          <li>当应用的UIAbility实例已经被创建，并且配置为指定实例模式时，如果再次调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#startability" target="_blank">startAbility()</a>方法启动该UIAbility实例，且<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-abilitystage" target="_blank">AbilityStage</a>的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-abilitystage#onacceptwant" target="_blank">onAcceptWant()</a>回调匹配到一个已创建的UIAbility实例，则系统会启动原来的UIAbility实例，并且不会重新创建一个新的UIAbility实例。此时，该UIAbility实例的onNewWant()回调会被触发，而不会触发onCreate()和onWindowStageCreate()生命周期回调。</li>          <li>DevEco Studio默认工程中未自动生成AbilityStage，AbilityStage文件的创建请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/abilitystage#开发步骤">AbilityStage开发步骤</a>。</li>         </ol>        </div></div></div>       <p>例如在文档应用中，可以为不同的文档实例内容绑定不同的Key值。每次新建文档时，可以传入一个新的Key值（例如可以将文件的路径作为一个Key标识），此时<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-abilitystage" target="_blank">AbilityStage</a>中启动<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>时都会创建一个新的UIAbility实例；当新建的文档保存之后，回到桌面，或者新打开一个已保存的文档，回到桌面，此时再次打开该已保存的文档，此时AbilityStage中再次启动该UIAbility时，打开的仍然是之前原来已保存的文档界面。</p>       <p>以如下步骤所示进行举例说明。</p>       <ol>        <li>打开文件A，对应启动一个新的UIAbility实例，例如启动UIAbility实例1。</li>        <li>在最近任务列表中关闭文件A的任务进程，此时UIAbility实例1被销毁，回到桌面，再次打开文件A，此时对应启动一个新的UIAbility实例，例如启动UIAbility实例2。</li>        <li>回到桌面，打开文件B，此时对应启动一个新的UIAbility实例，例如启动UIAbility实例3。</li>        <li>回到桌面，再次打开文件A，此时仍然启动之前的UIAbility实例2，因为系统会自动匹配UIAbility实例的Key值，如果存在与之匹配的Key，则会启动与之绑定的UIAbility实例。在此例中，之前启动的UIAbility实例2与文件A绑定的Key是相同的，因此系统会拉回UIAbility实例2并让其获焦，而不会创建新的实例。</li>       </ol></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="示例代码">示例代码<i class="anchor-icon anchor-icon-link" anchorid="示例代码" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitcode.com/HarmonyOS_Samples/ability-start-mode" target="_blank">UIAbility的启动方式</a></li>     </ul>    </div>   </div>   <div></div></div>