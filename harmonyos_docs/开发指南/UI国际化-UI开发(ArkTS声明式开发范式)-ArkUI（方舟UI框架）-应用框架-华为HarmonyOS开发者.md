<h1 _ngcontent-wfi-c119="" class="doc-title ng-star-inserted" title="UI国际化"> UI国际化 </h1>

<div _ngcontent-wfi-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本文介绍如何实现应用程序UI界面的国际化，包含资源配置和镜像布局，关于应用适配国际化的详细参考，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/i18n-l10n">Localization Kit（本地化开发服务）</a>。</p>    <div class="tiledSection">     <h2 id="利用资源限定词配置国际化资源">利用资源限定词配置国际化资源<i class="anchor-icon anchor-icon-link" anchorid="利用资源限定词配置国际化资源" tips="复制节点链接"></i></h2>          <p>在开发阶段，通过DevEco Studio，可以为应用在对应语言和地区的资源限定词目录下配置不同的资源，来实现UI国际化。详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/resource-categories-and-access">资源分类与访问</a>。</p>    </div>    <div class="tiledSection">     <h2 id="使用镜像能力">使用镜像能力<i class="anchor-icon anchor-icon-link" anchorid="使用镜像能力" tips="复制节点链接"></i></h2>          <p>不同国家对文本对齐方式和读取顺序有所不同，例如英语采用从左到右的顺序，阿拉伯语和希腊语则采用从右到左（RTL）的顺序。为满足不同用户的阅读习惯，ArkUI提供了镜像能力。在特定情况下将显示内容在X轴上进行镜像反转。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.1" valign="top" width="50%">镜像前</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.2" valign="top" width="50%">镜像后</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="221" originwidth="344" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114749.29270577041812670565302889448441:50001231000000:2800:BF5E9B1F45695349CF613290B2CA540319655DC8828CBD4FAF0DA80B63BA6187.png" width="344" height="221"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="226" originwidth="347" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114749.81059681914827496365752459190851:50001231000000:2800:4B29E7E658813AD9B98C02A28403437F85FD1E9AB2CFB54ACB3E48F2749CF98B.png" width="347" height="226"></span></td>        </tr>             </tbody></table></div>     </div>     <p>当组件满足以下任意条件时，镜像能力生效：</p>     <ol>      <li>       <p>组件的direction属性设置为Direction.Rtl。</p></li>      <li>       <p>组件的direction属性设置为Direction.Auto，且当前的系统语言（如维吾尔语）的阅读习惯是从右向左。</p></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="基本概念" class="firsth2">基本概念<i class="anchor-icon anchor-icon-link" anchorid="基本概念" tips="复制节点链接"></i></h3>          <ul>      <li>LTR：顺序为从左向右。</li>      <li>RTL：顺序为从右向左。</li>     </ul>    </div>    <div class="tiledSection">     <h3 id="使用约束">使用约束<i class="anchor-icon anchor-icon-link" anchorid="使用约束" tips="复制节点链接"></i></h3>          <p>ArkUI 如下能力已默认适配镜像：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.3.1.1" valign="top" width="50%">类别</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.3.1.2" valign="top" width="50%">名称</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">基础组件</td>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper" target="_blank">Swiper</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs" target="_blank">Tabs</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabcontent" target="_blank">TabContent</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list" target="_blank">List</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-progress" target="_blank">Progress</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-calendarpicker" target="_blank">CalendarPicker</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-methods-calendarpicker-dialog" target="_blank">CalendarPickerDialog</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textpicker" target="_blank">TextPicker</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-methods-textpicker-dialog" target="_blank">TextPickerDialog</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-datepicker" target="_blank">DatePicker</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-methods-datepicker-dialog" target="_blank">DatePickerDialog</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-grid" target="_blank">Grid</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-waterflow" target="_blank">WaterFlow</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll" target="_blank">Scroll</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-scrollbar" target="_blank">ScrollBar</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-alphabet-indexer" target="_blank">AlphabetIndexer</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-stepper" target="_blank">Stepper</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-sidebarcontainer" target="_blank">SideBarContainer</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation" target="_blank">Navigation</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination" target="_blank">NavDestination</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-rating" target="_blank">Rating</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-slider" target="_blank">Slider</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-toggle" target="_blank">Toggle</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-badge" target="_blank">Badge</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-counter" target="_blank">Counter</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-chip" target="_blank">Chip</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-segmentbutton" target="_blank">SegmentButton</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#bindmenu" target="_blank">bindMenu</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#bindcontextmenu8" target="_blank">bindContextMenu</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textinput" target="_blank">TextInput</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textarea" target="_blank">TextArea</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-search" target="_blank">Search</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-stack" target="_blank">Stack</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-gridrow" target="_blank">GridRow</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text" target="_blank">Text</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-select" target="_blank">Select</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-marquee" target="_blank">Marquee</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-row" target="_blank">Row</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-column" target="_blank">Column</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-flex" target="_blank">Flex</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-relativecontainer" target="_blank">RelativeContainer</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-listitemgroup" target="_blank">ListItemGroup</a></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">高级组件</td>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-selectionmenu" target="_blank">SelectionMenu</a> 、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-treeview" target="_blank">TreeView</a> 、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-filter" target="_blank">Filter</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-splitlayout" target="_blank">SplitLayout</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-toolbar" target="_blank">ToolBar</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-composelistitem" target="_blank">ComposeListItem</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-editabletitlebar" target="_blank">EditableTitleBar</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-progressbutton" target="_blank">ProgressButton</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-subheader" target="_blank">SubHeader</a> 、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-popup" target="_blank">Popup</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-dialog" target="_blank">Dialog</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-swiperefresher" target="_blank">SwipeRefresher</a></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">通用属性</td>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-location#position" target="_blank">position</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-location#markanchor" target="_blank">markAnchor</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-location#offset" target="_blank">offset</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-location#alignrules12" target="_blank">alignRules</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-border#borderwidth" target="_blank">borderWidth</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-border#bordercolor" target="_blank">borderColor</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-border#borderradius" target="_blank">borderRadius</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-size#padding" target="_blank">padding</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-size#margin" target="_blank">margin</a></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">接口</td>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-methods-alert-dialog-box" target="_blank">AlertDialog</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-methods-action-sheet" target="_blank">ActionSheet</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction#promptactionshowdialogdeprecated" target="_blank">promptAction.showDialog</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction#promptactionshowtoastdeprecated" target="_blank">promptAction.showToast</a></td>        </tr>             </tbody></table></div>     </div>     <p>但如下三种场景还需要进行适配：</p>     <ol>      <li>       <p>界面布局、边框设置：关于方向类的通用属性，如果需要支持镜像能力，使用泛化的方向指示词 start/end入参类型替换 left/right、x/y等绝对方向指示词的入参类型，来表示自适应镜像能力。</p></li>      <li>       <p>Canvas组件只有限支持文本绘制的镜像能力。</p></li>      <li>       <p>XComponent组件不支持组件镜像能力。</p></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="界面布局和边框设置">界面布局和边框设置<i class="anchor-icon anchor-icon-link" anchorid="界面布局和边框设置" tips="复制节点链接"></i></h3>          <p>目前，以下三类通用属性需要使用新入参类型适配：</p>     <p>位置设置：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-location#position" target="_blank">position</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-location#markanchor" target="_blank">markAnchor</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-location#offset" target="_blank">offset</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-location#alignrules12" target="_blank">alignRules</a></p>     <p>边框设置：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-border#borderwidth" target="_blank">borderWidth</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-border#bordercolor" target="_blank">borderColor</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-border#borderradius" target="_blank">borderRadius</a></p>     <p>尺寸设置：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-size#padding" target="_blank">padding</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-size#margin" target="_blank">margin</a></p>     <p>以position为例，需要把绝对方向x、y描述改为新入参类型start、end的描述，其他属性类似。</p>     <div _ngcontent-wfi-c106="" class="highlight-div"><div _ngcontent-wfi-c106="" class="highlight-div-header"><div _ngcontent-wfi-c106="" class="highlight-div-header-left"><div _ngcontent-wfi-c106="" class="handle-button expand-button"><div _ngcontent-wfi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfi-c106="" class="highlight-div-header-right"><div _ngcontent-wfi-c106="" class="handle-button ai-button"></div><div _ngcontent-wfi-c106="" class="handle-button line-button"><div _ngcontent-wfi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfi-c106="" class="handle-button theme-button"><div _ngcontent-wfi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfi-c106="" class="handle-button copy-button"><div _ngcontent-wfi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfi-c106="" class="highlight-scroll-div"><pre class="typeScript prettyprint linenums hljs language-typeScript" hw-language="typeScript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LengthMetrics</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index1</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>({ <span class="hljs-attr">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">TopStart</span> }) {</li><li>      <span class="hljs-title class_">Stack</span>({ <span class="hljs-attr">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">TopStart</span> }) {</li><li>        <span class="hljs-title class_">Column</span>()</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>)</li><li>          .<span class="hljs-title function_">position</span>({ <span class="hljs-attr">start</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">px</span>(<span class="hljs-number">200</span>), <span class="hljs-attr">top</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">px</span>(<span class="hljs-number">200</span>) })  <span class="hljs-comment">//需要同时支持LTR和RTL时使用API12新增的LocalizedEdges入参类型,</span></li><li>                                                                                   <span class="hljs-comment">//仅支持LTR时等同于.position({ x: '200px', y: '200px' })</span></li><li>
</li><li>      }.<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>).<span class="hljs-title function_">border</span>({ <span class="hljs-attr">color</span>: <span class="hljs-string">'#880606'</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="自定义绘制canvas组件">自定义绘制Canvas组件<i class="anchor-icon anchor-icon-link" anchorid="自定义绘制canvas组件" tips="复制节点链接"></i></h3>          <p>Canvas组件的绘制内容和坐标均不支持镜像能力。已绘制到Canvas组件上的内容并不会跟随系统语言的切换自动做镜像效果。</p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-canvasrenderingcontext2d" target="_blank">CanvasRenderingContext2D</a>的文本绘制支持镜像能力，在使用时需要与Canvas组件的通用属性direction（组件显示方向）和CanvasRenderingContext2D的属性direction（文本绘制方向）协同使用。具体规格如下：</p>     <ol>      <li>优先级：CanvasRenderingContext2D的direction属性 &gt; Canvas组件通用属性direction &gt; 系统语言决定的水平显示方向。</li>      <li>Canvas组件本身不会自动跟随系统语言切换镜像效果，需要应用监听到系统语言切换后自行重新绘制。</li>      <li>CanvasRenderingContext2D绘制文本时，只有符号等文本会对绘制方向生效，英文字母和数字不响应绘制方向的变化。</li>     </ol>     <div _ngcontent-wfi-c106="" class="highlight-div"><div _ngcontent-wfi-c106="" class="highlight-div-header"><div _ngcontent-wfi-c106="" class="highlight-div-header-left"><div _ngcontent-wfi-c106="" class="handle-button expand-button"><div _ngcontent-wfi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfi-c106="" class="highlight-div-header-right"><div _ngcontent-wfi-c106="" class="handle-button ai-button"></div><div _ngcontent-wfi-c106="" class="handle-button line-button"><div _ngcontent-wfi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfi-c106="" class="handle-button theme-button"><div _ngcontent-wfi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfi-c106="" class="handle-button copy-button"><div _ngcontent-wfi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfi-c106="" class="highlight-scroll-div"><pre class="typeScript prettyprint linenums hljs language-typeScript" hw-language="typeScript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>, commonEventManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello world'</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">settings</span>: <span class="hljs-title class_">RenderingContextSettings</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RenderingContextSettings</span>(<span class="hljs-literal">true</span>)</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">CanvasRenderingContext2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CanvasRenderingContext2D</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">settings</span>)</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// 监听系统语言切换</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">subscriber</span>: commonEventManager.<span class="hljs-property">CommonEventSubscriber</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">subscribeInfo2</span>: commonEventManager.<span class="hljs-property">CommonEventSubscribeInfo</span> = {</li><li>      <span class="hljs-attr">events</span>: [<span class="hljs-string">"usual.event.LOCALE_CHANGED"</span>],</li><li>    }</li><li>    commonEventManager.<span class="hljs-title function_">createSubscriber</span>(subscribeInfo2, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: commonEventManager.CommonEventSubscriber</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create subscriber. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>
</li><li>      subscriber = data;</li><li>      <span class="hljs-keyword">if</span> (subscriber !== <span class="hljs-literal">null</span>) {</li><li>        commonEventManager.<span class="hljs-title function_">subscribe</span>(subscriber, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: commonEventManager.CommonEventData</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (err) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`订阅语言地区状态变化公共事件失败. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>          }</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'成功订阅语言地区状态变化公共事件: data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data))</li><li>          <span class="hljs-comment">// 监听到语言切换后，需要重新绘制Canvas内容</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">drawText</span>();</li><li>        })</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`MayTest Need create subscriber`</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">drawText</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"MayTest drawText"</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">reset</span>()</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">direction</span> = <span class="hljs-string">"inherit"</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">font</span> = <span class="hljs-string">'30px sans-serif'</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillText</span>(<span class="hljs-string">"ab%123&amp;*@"</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Canvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>)</li><li>        .<span class="hljs-title function_">direction</span>(<span class="hljs-title class_">Direction</span>.<span class="hljs-property">Auto</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>)</li><li>        .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span>{</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">drawText</span>()</li><li>        })</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>
</li><li>}</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.1" valign="top" width="50%">镜像前</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.2" valign="top" width="50%">镜像后</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="60" originwidth="272" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114749.25285979444639780862144166883905:50001231000000:2800:645596F4A28EB1DF93AEAFBED7A6ECF9F64FF92BE727902D7678D5A926A0A790.jpg" class="notEnlarge" width="272" height="60"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="60" originwidth="274" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114749.71122496299143264203274382364550:50001231000000:2800:C99CD3BC8F6D1EBB6980004D825FCC366DCE018002E3AC6801CF828DD22752C0.jpg" class="notEnlarge" width="274" height="60"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="镜像状态字符对齐">镜像状态字符对齐<i class="anchor-icon anchor-icon-link" anchorid="镜像状态字符对齐" tips="复制节点链接"></i></h3>          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#direction" target="_blank">Direction</a>是指文字的方向，即文本在屏幕上呈现时字符的顺序。在从左到右（LTR）文本中，显示顺序是从左向右；在从右到左（RTL）文本中，显示顺序是从右向左。</p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#textalign" target="_blank">TextAlign</a>是将文本作为一个整体，在布局上的影响，具体位置会受Direction影响，以TextAlign为start为例，当Direction为LTR时，布局位置靠左；当Direction为RTL时，布局位置靠右。</p>     <p>在LTR与RTL文本混排时，如一个英文句子中包含阿拉伯语的单词或短语，显示顺序将变得复杂。下图为数字和维吾尔语混合时对应的字符逻辑顺序。</p>     <p><span><img originheight="75" originwidth="1174" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114749.48932561477213875116366152639241:50001231000000:2800:3EE53E0A75A1BE77C4B102074D89FAE4070195264F5002CD92B652A43A5DFE3C.png" width="920" height="58.77342419080068"></span></p>     <p>此时，文本渲染引擎会采用名为“双向算法”或“Unicode双向算法”（Unicode Bidirectional Algorithm）的方法来确定字符的显示顺序。下图展示了LTR与RTL文本混合时对应的字符显示顺序，确定字符方向的基本原则如下：</p>     <ol>      <li>       <p>强字符的方向性：强字符具有明确的方向性，例如，中文为LTR，阿拉伯语为RTL，这类字符的方向性会影响其周围的中性字符。</p></li>      <li>       <p>弱字符的方向性：弱字符不具备明确的方向性，这些字符不会影响其周围中性字符的方向。</p></li>      <li>       <p>中性字符的方向性：中性字符无固定方向性，它们会继承其最近的强字符的方向；若附近无强字符，则采用全局方向。</p></li>     </ol>     <p><span><img originheight="274" originwidth="1230" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114749.56220857686407330240294531148971:50001231000000:2800:6D63958713B07A5472874FDF241AD0600A6B61AC0E898FEC91C0723D95BEFC48.png" width="920" height="204.9430894308943"></span></p>    </div>   </div>   <div></div></div>