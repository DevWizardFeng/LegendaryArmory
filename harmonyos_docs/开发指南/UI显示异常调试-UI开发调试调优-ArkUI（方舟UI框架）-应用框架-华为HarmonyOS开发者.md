<h1 _ngcontent-uxr-c119="" class="doc-title ng-star-inserted" title="UI显示异常调试"> UI显示异常调试 </h1>

<div _ngcontent-uxr-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本章节主要介绍UI显示异常问题的调试方法，并结合案例讲解具体的解决步骤。</p>    <div class="tiledSection">     <h2 id="定位ui显示异常问题">定位UI显示异常问题<i class="anchor-icon anchor-icon-link" anchorid="定位ui显示异常问题" tips="复制节点链接"></i></h2>          <p>UI显示异常问题主要是通过分析UI布局信息来定位。当前分析UI布局主要通过getInspectorTree接口获取组件树信息，或者通过getRectangleById接口获取单个节点的信息。</p>     <p><strong>组件树</strong></p>     <p>从API version 9开始，可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-component-id#getinspectortree9" target="_blank">getInspectorTree</a>接口获取组件树及其属性。</p>     <p><strong>单个节点</strong></p>     <p>从API version 10开始，可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-componentutils#getrectanglebyid" target="_blank">getRectangleById</a>接口获取组件的大小、位置、平移、缩放、旋转及仿射矩阵等属性信息。</p>    </div>    <div class="tiledSection">     <h2 id="解决ui显示异常问题">解决UI显示异常问题<i class="anchor-icon anchor-icon-link" anchorid="解决ui显示异常问题" tips="复制节点链接"></i></h2>          <p>下面通过具体案例，介绍如何解决UI显示异常问题。</p>    </div>    <div class="tiledSection">     <h3 id="通过componentutilsgetrectanglebyid获取的tabbar组件坐标尺寸异常" class="firsth2">通过ComponentUtils.getRectangleById获取的tabBar组件坐标尺寸异常<i class="anchor-icon anchor-icon-link" anchorid="通过componentutilsgetrectanglebyid获取的tabbar组件坐标尺寸异常" tips="复制节点链接"></i></h3>          <p><strong>问题现象</strong></p>     <p>在动态控制tabBar显示或隐藏的场景下，通过ComponentUtils.getRectangleById获取的tabBar组件坐标或尺寸可能与预期不符。例如，当tabBar隐藏时（宽度设为0），获取的坐标位于屏幕中央，恢复显示后，该错误坐标仍被沿用。</p>     <p><strong>可能原因</strong></p>     <ul>      <li>使用同步接口查询布局信息时，目标节点的宽度临时设置为0，节点布局默认居中显示，导致获取的坐标位于屏幕中央。</li>      <li>调用接口时，如果当前布局尚未完成渲染（例如，组件刚被隐藏或显示，布局计算未结束），查询到的将是未更新的旧布局信息。</li>     </ul>     <p><strong>解决措施</strong></p>     <ul>      <li>选择合适的调用时机：在组件完成布局渲染后调用接口。例如，tabBar恢复显示后，使用延迟函数等待布局更新完成，再获取坐标。</li>      <li>监听布局变化事件：利用组件的onAreaChange回调，在布局变化并稳定后，触发坐标获取逻辑。</li>      <li>增加有效性校验：获取坐标后，校验组件尺寸，过滤无效数据。宽度或高度为0的组件被视为无效。</li>     </ul>     <p><strong>代码示例</strong></p>     <div _ngcontent-uxr-c106="" class="highlight-div"><div _ngcontent-uxr-c106="" class="highlight-div-header"><div _ngcontent-uxr-c106="" class="highlight-div-header-left"><div _ngcontent-uxr-c106="" class="handle-button expand-button"><div _ngcontent-uxr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxr-c106="" class="highlight-div-header-right"><div _ngcontent-uxr-c106="" class="handle-button ai-button"></div><div _ngcontent-uxr-c106="" class="handle-button line-button"><div _ngcontent-uxr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxr-c106="" class="handle-button theme-button"><div _ngcontent-uxr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxr-c106="" class="handle-button copy-button"><div _ngcontent-uxr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">currentIndex</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">msg</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'info'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">pivotX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">pivotY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">pivotShow</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">tabBarShow</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>
</li><li>  <span class="hljs-keyword">private</span> controller : <span class="hljs-title class_">TabsController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TabsController</span>();</li><li>  <span class="hljs-keyword">private</span> uiContext : <span class="hljs-title class_">UIContext</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-keyword">private</span> componentUtils : <span class="hljs-title class_">ComponentUtils</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-keyword">private</span> componentId : <span class="hljs-built_in">string</span> = <span class="hljs-string">'tab-pink'</span>;</li><li>  <span class="hljs-keyword">private</span> flag : <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-keyword">private</span> baseX : <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">private</span> baseY : <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">tabBuilder</span>(<span class="hljs-params">index: <span class="hljs-built_in">number</span>, name: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(name)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> === index ? <span class="hljs-number">500</span> : <span class="hljs-number">400</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> === index ? <span class="hljs-string">'#007DFF'</span>: <span class="hljs-string">'#182431'</span>)</li><li>        .<span class="hljs-title function_">lineHeight</span>(<span class="hljs-number">22</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">id</span>(<span class="hljs-string">`tab-<span class="hljs-subst">${name}</span>`</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">borderStyle</span>(<span class="hljs-title class_">BorderStyle</span>.<span class="hljs-property">Solid</span>)</li><li>    .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">componentUtils</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getComponentUtils</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">getRectInfo</span>(id?: <span class="hljs-built_in">string</span>) : <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-keyword">let</span> componentId : <span class="hljs-built_in">string</span> = id??<span class="hljs-variable language_">this</span>.<span class="hljs-property">componentId</span>;</li><li>    <span class="hljs-keyword">let</span> info = <span class="hljs-variable language_">this</span>.<span class="hljs-property">componentUtils</span>?.<span class="hljs-title function_">getRectangleById</span>(componentId);</li><li>    <span class="hljs-keyword">let</span> infoStr : <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>    <span class="hljs-keyword">if</span> (info) {</li><li>      infoStr = <span class="hljs-string">'Size: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(info.<span class="hljs-property">size</span>) + <span class="hljs-string">', WindowOffset: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(info.<span class="hljs-property">windowOffset</span>);</li><li>    }</li><li>    <span class="hljs-keyword">return</span> infoStr;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">getBasePosition</span>() : <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span>) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">let</span> info = <span class="hljs-variable language_">this</span>.<span class="hljs-property">componentUtils</span>?.<span class="hljs-title function_">getRectangleById</span>(<span class="hljs-string">'root-stack'</span>);</li><li>    <span class="hljs-keyword">if</span> (info) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseX</span> = info.<span class="hljs-property">windowOffset</span>.<span class="hljs-property">x</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseY</span> = info.<span class="hljs-property">windowOffset</span>.<span class="hljs-property">y</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg</span> = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.componentId}</span>: `</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRectInfo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">componentId</span>) + <span class="hljs-string">`, pivot: {x: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.pivotX}</span>, y: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.pivotY}</span>}`</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span> = <span class="hljs-literal">true</span>;</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onDidBuild</span>(): <span class="hljs-built_in">void</span> {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Brown</span> })</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'30%'</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">50</span> })</li><li>        <span class="hljs-title class_">Row</span>() {</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Rect'</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">componentUtils</span>?.<span class="hljs-title function_">getRectangleById</span>(<span class="hljs-string">'tab-pink'</span>))</li><li>            })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'33%'</span>)</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">'replay'</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">pivotShow</span> = <span class="hljs-literal">false</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabBarShow</span> = <span class="hljs-literal">false</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">pivotShow</span> = <span class="hljs-literal">true</span>;</li><li>              <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabBarShow</span> = <span class="hljs-literal">true</span></li><li>              }, <span class="hljs-number">100</span>)</li><li>            })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'33%'</span>)</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">'pivot'</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">pivotShow</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">pivotShow</span>;</li><li>            })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'33%'</span>)</li><li>        }</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'10%'</span>)</li><li>        .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceEvenly</span>)</li><li>        <span class="hljs-title class_">Tabs</span>({ <span class="hljs-attr">barPosition</span>: <span class="hljs-title class_">BarPosition</span>.<span class="hljs-property">End</span>, <span class="hljs-attr">index</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> }) {</li><li>          <span class="hljs-title class_">TabContent</span>() {</li><li>            <span class="hljs-title class_">Column</span>()</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#00CB87'</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">tabBar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tabBuilder</span>(<span class="hljs-number">0</span>, <span class="hljs-string">'green'</span>))</li><li>          <span class="hljs-title class_">TabContent</span>() {</li><li>            <span class="hljs-title class_">Column</span>()</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#007DFF'</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">tabBar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tabBuilder</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'blue'</span>))</li><li>          <span class="hljs-title class_">TabContent</span>() {</li><li>            <span class="hljs-title class_">Column</span>()</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFBF00'</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">tabBar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tabBuilder</span>(<span class="hljs-number">2</span>, <span class="hljs-string">'yellow'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'25%'</span>)</li><li>          <span class="hljs-title class_">TabContent</span>() {</li><li>            <span class="hljs-title class_">Column</span>()</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#E67C92'</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">tabBar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tabBuilder</span>(<span class="hljs-number">3</span>, <span class="hljs-string">'pink'</span>))</li><li>        }</li><li>        .<span class="hljs-title function_">expandSafeArea</span>([<span class="hljs-title class_">SafeAreaType</span>.<span class="hljs-property">CUTOUT</span>, <span class="hljs-title class_">SafeAreaType</span>.<span class="hljs-property">SYSTEM</span>, <span class="hljs-title class_">SafeAreaType</span>.<span class="hljs-property">KEYBOARD</span>],</li><li>          [<span class="hljs-title class_">SafeAreaEdge</span>.<span class="hljs-property">TOP</span>, <span class="hljs-title class_">SafeAreaEdge</span>.<span class="hljs-property">BOTTOM</span>])</li><li>        .<span class="hljs-title function_">barWidth</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">tabBarShow</span> ? <span class="hljs-string">'100%'</span> : <span class="hljs-number">0</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'40%'</span>)</li><li>        .<span class="hljs-title function_">barHeight</span>(<span class="hljs-number">44</span>)</li><li>        .<span class="hljs-title function_">vertical</span>(<span class="hljs-literal">false</span>)</li><li>        .<span class="hljs-title function_">barMode</span>(<span class="hljs-title class_">BarMode</span>.<span class="hljs-property">Fixed</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#F1F2F3'</span>)</li><li>        .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> = index;</li><li>          <span class="hljs-keyword">if</span> (index == <span class="hljs-number">3</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pivotShow</span> = <span class="hljs-literal">false</span>;</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">animation</span>({ <span class="hljs-attr">duration</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">curve</span>: <span class="hljs-title class_">Curve</span>.<span class="hljs-property">Linear</span> })</li><li>      }</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'col'</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceBetween</span>)</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">pivotShow</span>) {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'X'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">18</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">18</span>)</li><li>          .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>          .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">9</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>)</li><li>          .<span class="hljs-title function_">position</span>({ <span class="hljs-attr">x</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>?.<span class="hljs-title function_">px2vp</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pivotX</span>), <span class="hljs-attr">y</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>?.<span class="hljs-title function_">px2vp</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pivotY</span>) })</li><li>          .<span class="hljs-title function_">onAreaChange</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> info = <span class="hljs-variable language_">this</span>.<span class="hljs-property">componentUtils</span>?.<span class="hljs-title function_">getRectangleById</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">componentId</span>);</li><li>            <span class="hljs-keyword">if</span> (info) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getBasePosition</span>();</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">pivotX</span> = info.<span class="hljs-property">windowOffset</span>.<span class="hljs-property">x</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseX</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">pivotY</span> = info.<span class="hljs-property">windowOffset</span>.<span class="hljs-property">y</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseY</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg</span> = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.componentId}</span>: `</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRectInfo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">componentId</span>) + <span class="hljs-string">`, pivot: {x: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.pivotX}</span>, y: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.pivotY}</span>}`</span>;</li><li>            }</li><li>          })</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">id</span>(<span class="hljs-string">'root-stack'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>