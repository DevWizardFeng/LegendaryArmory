<h1 _ngcontent-kpr-c119="" class="doc-title ng-star-inserted" title="UI测试框架使用指导"> UI测试框架使用指导 </h1>

<div _ngcontent-kpr-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body818580768100314"> <div class="tiledSection"><h2 id="概述">概述<i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002506106491__p625564901100314">UI测试框架（UITest）为开发者提供UI界面查找和模拟操作能力，可覆盖UI自动化测试的关键场景，包括界面控件精准查找、UI交互操作（如点击、滑动、文本输入等）、外设行为模拟（如键盘输入、鼠标操作、触控板手势、手写笔动作等），助力开发者开发高效可靠的界面自动化测试用例。</p> </div>  <div class="tiledSection"><h2 id="功能全景">功能全景<i class="anchor-icon anchor-icon-link" anchorid="功能全景" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002506106491__p1969685900100314">UITest支持采用ArkTS API与命令行两种方式，为界面自动化测试提供灵活高效的技术支撑，其中：</p> <p id="ZH-CN_TOPIC_0000002506106491__p347044538100314"><strong>ArkTS脚本开发能力：</strong></p> <p id="ZH-CN_TOPIC_0000002506106491__p1916564760100314">提供简洁易用的API接口，满足各类测试场景需求，支持点击、双击、长按、滑动等常用UI交互操作，助力开发者快速开发基于界面交互逻辑的自动化测试脚本。</p> <p id="ZH-CN_TOPIC_0000002506106491__p2141640291100314"><strong>命令行测试能力：</strong></p> <p id="ZH-CN_TOPIC_0000002506106491__p550109927100314">支持通过命令行直接实现多元化测试操作，包括获取当前界面截图、获取控件树、录制界面操作流程、便捷注入UI模拟事件等。</p> <p id="ZH-CN_TOPIC_0000002506106491__p1760825910100314"><span><img originheight="597" originwidth="858" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251120201414.78845495239846142199842242284404:50001231000000:2800:26D8802368510A1F613D6D54B3C65BAE240940C9A8BDE878B7D260938379ADC7.png" width="858" height="597"></span></p> <p id="ZH-CN_TOPIC_0000002506106491__p569042103100314">UITest分为客户端和服务端。</p> <p id="ZH-CN_TOPIC_0000002506106491__p920912321100314"><strong>· 客户端：</strong></p> <p id="ZH-CN_TOPIC_0000002506106491__p428618447100314">包含跨语言通信层、IPC模块等，主要功能为对外导出API，为UI测试框架启动提供入口。客户端由测试应用加载，运行在应用进程。其中，跨语言通信层主要进行接口导出、JSON序列化对象处理、上层ArkTS接口与底层C++接口的转换、参数解析和校验。此外，由于本模块涉及C++层对ArkTS层回调函数的调用，跨语言通信层同时负责ArkTS回调函数的管理和调用。</p> <p id="ZH-CN_TOPIC_0000002506106491__p1420950205100314"><strong>· 服务端：</strong></p> <p id="ZH-CN_TOPIC_0000002506106491__p1153019096100314">以独立进程运行，通过IPC与客户端进行通信。服务端启动后，通过广播与客户端建立连接，通过IPC通信确保连接不断开。服务端监听客户端进程状态，实现按需启停。服务端负责UI测试框架核心逻辑的处理，主要分为以下两部分：</p> <ol id="ZH-CN_TOPIC_0000002506106491__ol1975507534100314"><li id="li1439775714100314">框架运行通用能力：进行IPC消息处理、进程管理、C++接口和错误码的管理，包括接口调用监听等。</li><li id="li32682013100314">UI测试能力：解析无障碍节点构建页面控件树、控件匹配查找、操作事件构造、多模事件注入、UI事件监听、屏幕显示控制等。</li></ol> </div>  <div class="tiledSection"><h2 id="使用arkts接口进行ui测试">使用ArkTS接口进行UI测试<i class="anchor-icon anchor-icon-link" anchorid="使用arkts接口进行ui测试" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002506106491__p374648062100314">本章节介绍UI测试框架ArkTS API的具体使用方法。</p> <p id="ZH-CN_TOPIC_0000002506106491__p2043181620100314">UI测试是在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/unittest-guidelines" target="_blank">单元测试</a>基础上进行UITest接口调用，接口的详细定义与参数说明可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-uitest" target="_blank">API文档</a>。</p> </div>  <div class="tiledSection"><h3 id="ui测试示例" class="firsth2">UI测试示例<i class="anchor-icon anchor-icon-link" anchorid="ui测试示例" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p1410379248100314">下面提供一个UI测试的简单示例，介绍如何在单元测试脚本基础上进行UI测试的增量开发，具体实现功能如下：</p> <ol id="ZH-CN_TOPIC_0000002506106491__ol1482175367100314"><li id="li1675313699100314">调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-abilitydelegator" target="_blank">程序框架服务</a>能力，启动目标被测应用，并确认应用运行状态。</li><li id="li15695090100314">调用UI测试框架能力，页面中执行点击操作。</li><li id="li1759357513100314">通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/unittest-guidelines#断言能力" target="_blank">添加断言</a>，验证操作后当前页面的实际变化是否与预期结果一致。</li></ol> <p id="ZH-CN_TOPIC_0000002506106491__p2017696392100314">开发步骤如下:</p> <ol id="ZH-CN_TOPIC_0000002506106491__ol779691602100314"><li id="li932114086100314">在main &gt; ets &gt; pages文件夹下编写Index.ets页面代码，作为被测示例demo。<div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000002506106491__screen305860823100314" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>    <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>    <span class="hljs-meta">@State</span> <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>    <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>            .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"Next"</span>)</li><li>            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>            .<span class="hljs-title function_">margin</span>({<span class="hljs-attr">top</span>:<span class="hljs-number">20</span>})</li><li>            .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)          </li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">(<span class="hljs-params">event?: ClickEvent</span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">if</span>(event){</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = <span class="hljs-string">"after click"</span>;</li><li>                }</li><li>            })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span>).<span class="hljs-title function_">margin</span>(<span class="hljs-number">15</span>)</li><li>        }</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>}</li></ol></pre></div></div>  </li><li id="li1346187115100314">在ohosTest &gt; ets &gt; test文件夹下新建uitest.test.ets文件，并编写具体测试代码。<div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000002506106491__screen943145390100314" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { describe, it, expect, <span class="hljs-title class_">Level</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;</li><li><span class="hljs-comment">// 导入测试依赖kit</span></li><li><span class="hljs-keyword">import</span> { abilityDelegatorRegistry, <span class="hljs-title class_">Driver</span>, <span class="hljs-variable constant_">ON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.TestKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">delegator</span>: abilityDelegatorRegistry.<span class="hljs-property">AbilityDelegator</span> = abilityDelegatorRegistry.<span class="hljs-title function_">getAbilityDelegator</span>();</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">abilityTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'ActsAbilityTest'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'testUiExample'</span>,<span class="hljs-title class_">Level</span>.<span class="hljs-property">LEVEL3</span>, <span class="hljs-keyword">async</span> (<span class="hljs-attr">done</span>: <span class="hljs-title class_">Function</span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"uitest: TestUiExample begin"</span>);        </li><li>      <span class="hljs-comment">// 初始化Driver对象</span></li><li>      <span class="hljs-keyword">const</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-keyword">const</span> bundleName = abilityDelegatorRegistry.<span class="hljs-title function_">getArguments</span>().<span class="hljs-property">bundleName</span>;</li><li>      <span class="hljs-comment">// 指定被测应用包名、ability名，请开发者替换为被测应用包名和ability名</span></li><li>      <span class="hljs-keyword">const</span> <span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span> = {</li><li>          <span class="hljs-attr">bundleName</span>: bundleName,</li><li>          <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span></li><li>      }</li><li>      <span class="hljs-comment">// 拉起被测应用</span></li><li>      <span class="hljs-keyword">await</span> delegator.<span class="hljs-title function_">startAbility</span>(want);</li><li>      <span class="hljs-comment">// 等待应用拉起完成</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">waitForIdle</span>(<span class="hljs-number">4000</span>,<span class="hljs-number">5000</span>);</li><li>      <span class="hljs-comment">// 确认当前应用顶部Ability为指定的ability</span></li><li>      <span class="hljs-keyword">const</span> <span class="hljs-attr">ability</span>: <span class="hljs-title class_">UIAbility</span> = <span class="hljs-keyword">await</span> delegator.<span class="hljs-title function_">getCurrentTopAbility</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"get top ability"</span>);</li><li>      <span class="hljs-title function_">expect</span>(ability.<span class="hljs-property">context</span>.<span class="hljs-property">abilityInfo</span>.<span class="hljs-property">name</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-string">'EntryAbility'</span>);</li><li>
</li><li>      <span class="hljs-comment">// 依据指定文本“Next”查找目标控件</span></li><li>      <span class="hljs-keyword">const</span> next = <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">findComponent</span>(<span class="hljs-variable constant_">ON</span>.<span class="hljs-title function_">text</span>(<span class="hljs-string">'Next'</span>));</li><li>      <span class="hljs-comment">// 点击目标控件</span></li><li>      <span class="hljs-keyword">await</span> next.<span class="hljs-title function_">click</span>();</li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">waitForIdle</span>(<span class="hljs-number">4000</span>,<span class="hljs-number">5000</span>);</li><li>      <span class="hljs-comment">// 通过断言文本为“after click”的控件存在，确认操作后页面变化符合预期</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">assertComponentExist</span>(<span class="hljs-variable constant_">ON</span>.<span class="hljs-title function_">text</span>(<span class="hljs-string">'after click'</span>));</li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">pressBack</span>();</li><li>      <span class="hljs-title function_">done</span>();</li><li>    })</li><li>  })</li><li>}</li></ol></pre></div></div>  </li></ol> </div>  <div class="tiledSection"><h3 id="控件查找与操作">控件查找与操作<i class="anchor-icon anchor-icon-link" anchorid="控件查找与操作" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p813611569100314">UITest支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-uitest#on9" target="_blank">依据多种属性构造匹配器</a>进行控件查找；支持查找当前页面符合匹配条件的单个或多个目标控件，并返回控件对象；支持在滚动组件内部进行滚动查找目标控件；支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-uitest#component9" target="_blank">对控件对象进行操作或获取控件的属性信息</a>。</p> <p id="ZH-CN_TOPIC_0000002506106491__p361472015100314">如下给出控件查找与操作的示例，下面代码执行前请参考UI测试示例，实现对应的Index.ets页面代码。</p> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000002506106491__screen986876366100314" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ohosTest/ets/test/uitest.test.ets</span></li><li><span class="hljs-keyword">import</span> { describe, it, <span class="hljs-title class_">TestType</span>, <span class="hljs-title class_">Size</span>, <span class="hljs-title class_">Level</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;</li><li><span class="hljs-comment">// 导入测试依赖kit</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Driver</span>, <span class="hljs-title class_">Component</span>, <span class="hljs-variable constant_">ON</span>, <span class="hljs-title class_">On</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.TestKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">abilityTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'componentOperationTest'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * 查找类型为'Button'的控件，并进行控件点击操作</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">"componentSearchAndOperation"</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">driver</span>: <span class="hljs-title class_">Driver</span> = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">button</span>: <span class="hljs-title class_">Component</span> = <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">findComponent</span>(<span class="hljs-variable constant_">ON</span>.<span class="hljs-title function_">type</span>(<span class="hljs-string">'Button'</span>));</li><li>      <span class="hljs-keyword">await</span> button.<span class="hljs-title function_">click</span>();</li><li>    })</li><li>
</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * 利用相对位置查找控件，查找'Scroll'类型控件中文本内容为'123'的控件</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">"relativePositioncomponentSearch"</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">driver</span>: <span class="hljs-title class_">Driver</span> = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">on</span>: <span class="hljs-title class_">On</span> = <span class="hljs-variable constant_">ON</span>.<span class="hljs-title function_">text</span>(<span class="hljs-string">'123'</span>).<span class="hljs-title function_">within</span>(<span class="hljs-variable constant_">ON</span>.<span class="hljs-title function_">type</span>(<span class="hljs-string">'Scroll'</span>));</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">items</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Component</span>&gt; = <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">findComponents</span>(on);</li><li>    })</li><li>
</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * 查找类型为'Image'的控件，并进行对其进行双指放大操作</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">"componentPinch"</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">driver</span>: <span class="hljs-title class_">Driver</span> = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">image</span>: <span class="hljs-title class_">Component</span> = <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">findComponent</span>(<span class="hljs-variable constant_">ON</span>.<span class="hljs-title function_">type</span>(<span class="hljs-string">'Image'</span>));</li><li>      <span class="hljs-keyword">await</span> image.<span class="hljs-title function_">pinchOut</span>(<span class="hljs-number">1.5</span>);</li><li>    })</li><li>  })</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="模拟触摸屏手指操作">模拟触摸屏手指操作<i class="anchor-icon anchor-icon-link" anchorid="模拟触摸屏手指操作" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p1635922093100314">UITest支持模拟包括点击、双击、长按、滑动、拖拽、多指操作等事件。</p> <p id="ZH-CN_TOPIC_0000002506106491__p1018535401100314">如下给出触摸屏坐标级的手指操作模拟的示例，下面代码执行前请参考UI测试示例，实现对应的Index.ets页面代码。</p> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000002506106491__screen94616781100314" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ohosTest/ets/test/uitest.test.ets</span></li><li><span class="hljs-keyword">import</span> { describe, it, <span class="hljs-title class_">TestType</span>, <span class="hljs-title class_">Size</span>, <span class="hljs-title class_">Level</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;</li><li><span class="hljs-comment">// 导入测试依赖kit</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Driver</span>, <span class="hljs-title class_">PointerMatrix</span>, <span class="hljs-title class_">UiDirection</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.TestKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">abilityTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'screenOperationTest'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * 基于坐标的触摸屏手指操作</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">"touchScreenOperation"</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">driver</span>: <span class="hljs-title class_">Driver</span> = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-comment">// 单击</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">click</span>(<span class="hljs-number">100</span>,<span class="hljs-number">100</span>);</li><li>      <span class="hljs-comment">// 指定屏幕id进行单击</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">clickAt</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">displayId</span>: <span class="hljs-number">0</span> });</li><li>      <span class="hljs-comment">// 滑动</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">swipe</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">200</span>, <span class="hljs-number">600</span>);</li><li>      <span class="hljs-comment">// 指定屏幕id进行滑动</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">swipeBetween</span>({<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">displayId</span>: <span class="hljs-number">0</span>}, {<span class="hljs-attr">x</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">displayId</span>: <span class="hljs-number">0</span>}, <span class="hljs-number">800</span>);</li><li>      <span class="hljs-comment">// 抛滑</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">fling</span>({<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>},{<span class="hljs-attr">x</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">200</span>}, <span class="hljs-number">5</span>, <span class="hljs-number">600</span>);</li><li>      <span class="hljs-comment">// 指定方向的抛滑</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">fling</span>(<span class="hljs-title class_">UiDirection</span>.<span class="hljs-property">DOWN</span>, <span class="hljs-number">10000</span>);</li><li>      <span class="hljs-comment">// 拖拽</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">drag</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">200</span>, <span class="hljs-number">600</span>);</li><li>      <span class="hljs-comment">// 指定屏幕id和拖拽移动前的长按时间</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">dragBetween</span>( {<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">displayId</span>: <span class="hljs-number">0</span>}, {<span class="hljs-attr">x</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">displayId</span>: <span class="hljs-number">0</span>}, <span class="hljs-number">800</span>, <span class="hljs-number">1500</span>); </li><li>      <span class="hljs-comment">// 多指操作，指定使用两根手指，每根手指基于两个坐标点滑动</span></li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">pointers</span>: <span class="hljs-title class_">PointerMatrix</span> = <span class="hljs-title class_">PointerMatrix</span>.<span class="hljs-title function_">create</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);</li><li>      pointers.<span class="hljs-title function_">setPoint</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, {<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>});</li><li>      pointers.<span class="hljs-title function_">setPoint</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, {<span class="hljs-attr">x</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>});</li><li>      pointers.<span class="hljs-title function_">setPoint</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, {<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">200</span>});</li><li>      pointers.<span class="hljs-title function_">setPoint</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, {<span class="hljs-attr">x</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">200</span>});</li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">injectMultiPointerAction</span>(pointers);</li><li>    })</li><li>  })</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="页面加载等待">页面加载等待<i class="anchor-icon anchor-icon-link" anchorid="页面加载等待" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p137481702100314">在与页面进行交互后，可通过在指定时间内等待某控件的出现或等待页面空闲来判断页面跳转是否完成。</p> <p id="ZH-CN_TOPIC_0000002506106491__p634638847100314">如下给出页面加载等待的示例，下面代码执行前请参考UI测试示例，实现对应的Index.ets页面代码。</p> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000002506106491__screen1915123462100314" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ohosTest/ets/test/uitest.test.ets</span></li><li><span class="hljs-keyword">import</span> { describe, it, <span class="hljs-title class_">Level</span>, <span class="hljs-title class_">TestType</span>, <span class="hljs-title class_">Size</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;</li><li><span class="hljs-comment">// 导入测试依赖kit</span></li><li><span class="hljs-keyword">import</span> { abilityDelegatorRegistry, <span class="hljs-title class_">Driver</span>, <span class="hljs-variable constant_">ON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.TestKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">delegator</span>: abilityDelegatorRegistry.<span class="hljs-property">AbilityDelegator</span> = abilityDelegatorRegistry.<span class="hljs-title function_">getAbilityDelegator</span>();</li><li><span class="hljs-comment">// 指定被测应用包名、ability名，请开发者替换为被测应用包名和ability名</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">bundleName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'com.uitestScene.acts'</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">abilityName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'com.uitestScene.acts.MainAbility'</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">abilityTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'ActsAbilityTest'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'testWaitForComponent_static'</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span> | <span class="hljs-title class_">Size</span>.<span class="hljs-property">MEDIUMTEST</span> | <span class="hljs-title class_">Level</span>.<span class="hljs-property">LEVEL3</span>, <span class="hljs-keyword">async</span> (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-comment">// 拉起目标应用      </span></li><li>      <span class="hljs-keyword">await</span> delegator.<span class="hljs-title function_">executeShellCommand</span>(<span class="hljs-string">`aa start -b <span class="hljs-subst">${bundleName}</span> -a <span class="hljs-subst">${abilityName}</span>`</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`UITestCase, start abilityFinished: <span class="hljs-subst">${result}</span>`</span>)</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`UITestCase, start abilityFailed: <span class="hljs-subst">${err}</span>`</span>)</li><li>      })</li><li>      <span class="hljs-comment">// 通过等待目标应用首页上的指定控件出现，判断应用拉起完成</span></li><li>      <span class="hljs-keyword">let</span> button = <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">waitForComponent</span>(<span class="hljs-variable constant_">ON</span>.<span class="hljs-title function_">text</span>(<span class="hljs-string">'StartAbility Success!'</span>), <span class="hljs-number">1000</span>);</li><li>    })</li><li>  })</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="模拟文本输入">模拟文本输入<i class="anchor-icon anchor-icon-link" anchorid="模拟文本输入" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p1299488124100314">UITest支持向指定坐标点或指定控件输入文本内容，同时支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-uitest#inputtextmode20" target="_blank">指定输入方式</a>：输入文本时是否以复制粘贴方式输入、是否以追加的方式进行输入。</p> <p id="ZH-CN_TOPIC_0000002506106491__p1346003791100314">如下给出文本输入的示例，包括基于控件的文本输入和基于坐标的文本输入两种方式。下面代码执行前请参考UI测试示例，实现对应的Index.ets页面代码。</p> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000002506106491__screen438079143100314" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ohosTest/ets/test/uitest.test.ets</span></li><li><span class="hljs-keyword">import</span> { describe, it, <span class="hljs-title class_">TestType</span>, <span class="hljs-title class_">Size</span>, <span class="hljs-title class_">Level</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;</li><li><span class="hljs-comment">// 导入测试依赖kit</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Driver</span>, <span class="hljs-variable constant_">ON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.TestKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">abilityTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'inputTextTest'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * 基于控件的文本输入，调用接口会默认清空文本框中内容后输入指定文本</span></li><li><span class="hljs-comment">     * 当输入文本中不包含中文、特殊字符，且文本长度不超过200字符时默认为逐字键入</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'componentInputText'</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-keyword">let</span> input = <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">findComponent</span>(<span class="hljs-variable constant_">ON</span>.<span class="hljs-title function_">type</span>(<span class="hljs-string">'TextInput'</span>));</li><li>      <span class="hljs-keyword">await</span> input.<span class="hljs-title function_">inputText</span>(<span class="hljs-string">'abc'</span>);</li><li>    })</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * 基于控件的文本输入，指定以复制粘贴方式注入输入指定文本</span></li><li><span class="hljs-comment">     * 指定以追加方式输入，即在输入文本签不清空原有内容</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'componentInputTextAddition'</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-keyword">let</span> input = <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">findComponent</span>(<span class="hljs-variable constant_">ON</span>.<span class="hljs-title function_">type</span>(<span class="hljs-string">'TextInput'</span>));</li><li>      <span class="hljs-keyword">await</span> input.<span class="hljs-title function_">inputText</span>(<span class="hljs-string">'abc'</span>, {<span class="hljs-attr">paste</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">addition</span>: <span class="hljs-literal">true</span>});</li><li>    })</li><li>
</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * 基于坐标的文本输入，点击指定位置使输入框获焦，并在光标处输入指定文本</span></li><li><span class="hljs-comment">     * 当输入文本中不包含中文、特殊字符，且文本长度不超过200字符时默认为逐字键入</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'pointInputText'</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span> | <span class="hljs-title class_">Size</span>.<span class="hljs-property">MEDIUMTEST</span> | <span class="hljs-title class_">Level</span>.<span class="hljs-property">LEVEL3</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>()</li><li>      <span class="hljs-keyword">let</span> input = <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">findComponent</span>(<span class="hljs-variable constant_">ON</span>.<span class="hljs-title function_">type</span>(<span class="hljs-string">'TextInput'</span>))</li><li>      <span class="hljs-keyword">let</span> center = <span class="hljs-keyword">await</span> input.<span class="hljs-title function_">getBoundsCenter</span>()</li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">inputText</span>(center, <span class="hljs-string">'abc'</span>)</li><li>    })</li><li>
</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * 基于坐标的文本输入，指定以复制粘贴方式注入输入指定文本</span></li><li><span class="hljs-comment">     * 指定以追加方式输入，即点击指定位置使输入框获焦后将光标移动至原有文本末尾后输入</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'pointInputTextAddition'</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span> | <span class="hljs-title class_">Size</span>.<span class="hljs-property">MEDIUMTEST</span> | <span class="hljs-title class_">Level</span>.<span class="hljs-property">LEVEL3</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>()</li><li>      <span class="hljs-keyword">let</span> input = <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">findComponent</span>(<span class="hljs-variable constant_">ON</span>.<span class="hljs-title function_">type</span>(<span class="hljs-string">'TextInput'</span>))</li><li>      <span class="hljs-keyword">let</span> center = <span class="hljs-keyword">await</span> input.<span class="hljs-title function_">getBoundsCenter</span>()</li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">inputText</span>(center, <span class="hljs-string">'123'</span>, {<span class="hljs-attr">paste</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">addition</span>: <span class="hljs-literal">true</span>})</li><li>    })</li><li>
</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * 基于坐标的文本输入，指定以复制粘贴方式注入输入指定文本</span></li><li><span class="hljs-comment">     * 指定以追加方式输入，即点击指定位置使输入框获焦后将光标移动至原有文本末尾后输入</span></li><li><span class="hljs-comment">     * 当输入内容包含中文或特殊字符时，仅支持以复制粘贴方式输入文本，'paste'字段不生效</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'pointInputTextChinese'</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span> | <span class="hljs-title class_">Size</span>.<span class="hljs-property">MEDIUMTEST</span> | <span class="hljs-title class_">Level</span>.<span class="hljs-property">LEVEL3</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>()</li><li>      <span class="hljs-keyword">let</span> input = <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">findComponent</span>(<span class="hljs-variable constant_">ON</span>.<span class="hljs-title function_">type</span>(<span class="hljs-string">'TextInput'</span>))</li><li>      <span class="hljs-keyword">let</span> center = <span class="hljs-keyword">await</span> input.<span class="hljs-title function_">getBoundsCenter</span>()</li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">inputText</span>(center, <span class="hljs-string">'你好'</span>, {<span class="hljs-attr">paste</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">addition</span>: <span class="hljs-literal">true</span>})</li><li>    })</li><li>  })</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="截图">截图<i class="anchor-icon anchor-icon-link" anchorid="截图" tips="复制节点链接"></i></h3><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ol id="ZH-CN_TOPIC_0000002506106491__ol713340524100314"><li id="li1038856166100314">指定截图文件保存路径，路径需为当前应用的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-sandbox-directory" target="_blank">沙箱路径</a>。</li><li id="li647010396100314">测试HAP的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-permission-mgmt-overview#权限机制中的基本概念" target="_blank">APL等级级别</a>为normal，对应要求使用用户级加密区的应用沙箱路径。且需指定将文件保存在应用在本设备上存放持久化数据的子目录。</li></ol>  </div></div></div> <p id="ZH-CN_TOPIC_0000002506106491__p1723372859100314">如下给出屏幕截图的示例，指定屏幕id和截取屏幕区域，并将截图保存到指定路径下。下面代码执行前请参考UI测试示例，实现对应的Index.ets页面代码。多屏场景下，期望对指定屏幕做截图操作时，可以调用display模块的接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/screenproperty-guideline#获取display对象" target="_blank">获取Display对象</a>，实现<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/screenproperty-guideline#获取屏幕相关属性" target="_blank">屏幕相关属性获取</a>。</p> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000002506106491__screen115984209100314" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ohosTest/ets/test/uitest.test.ets</span></li><li><span class="hljs-keyword">import</span> { describe, it, <span class="hljs-title class_">TestType</span>, <span class="hljs-title class_">Size</span>, <span class="hljs-title class_">Level</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;</li><li><span class="hljs-comment">// 导入测试依赖kit</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Driver</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.TestKit'</span>;</li><li><span class="hljs-keyword">import</span> { display } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">abilityTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'screenCaptureTest'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * 截取指定区域的屏幕，并保存到指定路径</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'screenCapture'</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-comment">// 应用沙箱路径，el2为用户级加密区，base为应用在本设备上存放持久化数据的子目录</span></li><li>      <span class="hljs-comment">// 请开发者使用时替换为实际的路径</span></li><li>      <span class="hljs-keyword">let</span> savePath = <span class="hljs-string">'/data/storage/el2/base/cache/1.png'</span>;</li><li>      <span class="hljs-keyword">let</span> res = <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">screenCapture</span>(savePath, {<span class="hljs-attr">left</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">100</span>});</li><li>    })</li><li>
</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * 截取指定屏幕id的屏幕全屏，并保存到指定路径</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'screenCapWithId'</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span> | <span class="hljs-title class_">Size</span>.<span class="hljs-property">MEDIUMTEST</span> | <span class="hljs-title class_">Level</span>.<span class="hljs-property">LEVEL3</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-comment">// 获取默认屏幕对象</span></li><li>      <span class="hljs-keyword">let</span> disPlay = display.<span class="hljs-title function_">getDefaultDisplaySync</span>();</li><li>      <span class="hljs-keyword">let</span> savePath = <span class="hljs-string">'/data/storage/el2/base/cache/1.png'</span></li><li>      <span class="hljs-keyword">let</span> res = <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">screenCap</span>(savePath, disPlay.<span class="hljs-property">id</span>);<span class="hljs-comment">// 获取默认屏幕ID属性</span></li><li>    })</li><li>  })</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="ui事件监听">UI事件监听<i class="anchor-icon anchor-icon-link" anchorid="ui事件监听" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p1890697850100314">如下给出UI界面事件的监听的示例，设置监听回调函数，监听toast、dialog等控件的出现，等待事件发生后进行下一步操作。下面代码执行前请参考UI测试示例，实现对应的Index.ets页面代码。</p> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000002506106491__screen1612152803100314" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ohosTest/ets/test/uitest.test.ets</span></li><li><span class="hljs-keyword">import</span> { describe, it, <span class="hljs-title class_">TestType</span>, <span class="hljs-title class_">Size</span>, <span class="hljs-title class_">Level</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;</li><li><span class="hljs-comment">// 导入测试依赖kit</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Driver</span>, <span class="hljs-title class_">UIElementInfo</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.TestKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">abilityTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'observerTest'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">// 监听Toast控件出现</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">"toastObserver"</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-keyword">let</span> observer = driver.<span class="hljs-title function_">createUIEventObserver</span>();</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">uiElementInfo : UIElementInfo</span>) =&gt; {</li><li>        <span class="hljs-keyword">let</span> bundleName = uiElementInfo.<span class="hljs-property">bundleName</span>;</li><li>        <span class="hljs-keyword">let</span> text = uiElementInfo.<span class="hljs-property">text</span>;</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">type</span> = uiElementInfo.<span class="hljs-property">type</span>;</li><li>      }</li><li>      observer.<span class="hljs-title function_">once</span>(<span class="hljs-string">'toastShow'</span>, callback);</li><li>    })</li><li>  })</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="模拟键鼠操作">模拟键鼠操作<i class="anchor-icon anchor-icon-link" anchorid="模拟键鼠操作" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p1580764114100314">如下给出键鼠模拟操作，包括键盘按键、组合键输入操作的示例，包括鼠标点击、移动、拖拽操作和键鼠组合操作等。下面代码执行前请参考UI测试示例，实现对应的Index.ets页面代码。</p> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000002506106491__screen2090401903100314" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ohosTest/ets/test/uitest.test.ets</span></li><li><span class="hljs-keyword">import</span> { describe, it, <span class="hljs-title class_">TestType</span>, <span class="hljs-title class_">Size</span>, <span class="hljs-title class_">Level</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;</li><li><span class="hljs-comment">// 导入测试依赖kit</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Driver</span>, <span class="hljs-title class_">MouseButton</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.TestKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">KeyCode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.multimodalInput.keyCode'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">abilityTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'KeyboardMouseTest'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">// 模拟键盘按键输入、组合键输入</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'keyBoardOperation'</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span> | <span class="hljs-title class_">Size</span>.<span class="hljs-property">MEDIUMTEST</span> | <span class="hljs-title class_">Level</span>.<span class="hljs-property">LEVEL3</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-comment">// 键盘按键输入（注入返回键）</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">triggerKey</span>(<span class="hljs-title class_">KeyCode</span>.<span class="hljs-property">KEYCODE_BACK</span>);</li><li>      <span class="hljs-comment">// 键盘组合键输入（注入保存组合键）</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">triggerCombineKeys</span>(<span class="hljs-title class_">KeyCode</span>.<span class="hljs-property">KEYCODE_CTRL_LEFT</span>,  <span class="hljs-title class_">KeyCode</span>.<span class="hljs-property">KEYCODE_S</span>);</li><li>    })</li><li>
</li><li>    <span class="hljs-comment">// 模拟鼠标左键单击、鼠标移动、鼠标拖拽操作</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'mouseOperation'</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span> | <span class="hljs-title class_">Size</span>.<span class="hljs-property">MEDIUMTEST</span> | <span class="hljs-title class_">Level</span>.<span class="hljs-property">LEVEL3</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-comment">// 鼠标左键单击</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">mouseClick</span>({<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>}, <span class="hljs-title class_">MouseButton</span>.<span class="hljs-property">MOUSE_BUTTON_LEFT</span>); </li><li>      <span class="hljs-comment">// 鼠标移动</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">mouseMoveTo</span>({<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>});</li><li>      <span class="hljs-comment">// 鼠标拖拽</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">mouseDrag</span>({<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>}, {<span class="hljs-attr">x</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">200</span>}, <span class="hljs-number">600</span>);</li><li>    })</li><li>
</li><li>    <span class="hljs-comment">// 模拟键盘、鼠标组合操作</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'combinedOperation'</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span> | <span class="hljs-title class_">Size</span>.<span class="hljs-property">MEDIUMTEST</span> | <span class="hljs-title class_">Level</span>.<span class="hljs-property">LEVEL3</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-comment">// 按下左CTRL键，同时鼠标滚轮滚动</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">mouseScroll</span>({<span class="hljs-attr">x</span>:<span class="hljs-number">100</span>, <span class="hljs-attr">y</span>:<span class="hljs-number">100</span>}, <span class="hljs-literal">true</span>, <span class="hljs-number">30</span>, <span class="hljs-title class_">KeyCode</span>.<span class="hljs-property">KEYCODE_CTRL_LEFT</span>);</li><li>      <span class="hljs-comment">// 按下左CTRL键，同时鼠标左键长按</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">mouseLongClick</span>({<span class="hljs-attr">x</span>:<span class="hljs-number">100</span>, <span class="hljs-attr">y</span>:<span class="hljs-number">100</span>}, <span class="hljs-title class_">MouseButton</span>.<span class="hljs-property">MOUSE_BUTTON_LEFT</span>, <span class="hljs-title class_">KeyCode</span>.<span class="hljs-property">KEYCODE_CTRL_LEFT</span>);</li><li>    })</li><li>  })</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="窗口查找与操作">窗口查找与操作<i class="anchor-icon anchor-icon-link" anchorid="窗口查找与操作" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p2004698153100314">如下给出窗口查找和操作的示例，根据窗口属性查找窗口，并进行窗口最小化等操作。下面代码执行前请参考UI测试示例，实现对应的Index.ets页面代码。</p> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000002506106491__screen1292830892100314" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ohosTest/ets/test/uitest.test.ets</span></li><li><span class="hljs-keyword">import</span> { describe, it, <span class="hljs-title class_">TestType</span>, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;</li><li><span class="hljs-comment">// 导入测试依赖kit</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Driver</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.TestKit'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-title class_">DeviceErrorCode</span> = <span class="hljs-number">17000005</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">abilityTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'windowOperationTest'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">// 根据指定条件查找活跃窗口，并对其进行窗口最小化操作</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">"windowSearchAndOperation"</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-variable language_">window</span> = <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">findWindow</span>({<span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>});</li><li>        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">minimize</span>();</li><li>      } <span class="hljs-keyword">catch</span> (error) {</li><li>        <span class="hljs-comment">// 在不支持窗口操作的设备上调用minimize接口操作窗口时，将抛出17000005错误码</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`$ windowSearchAndOperation error is: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>        <span class="hljs-title function_">expect</span>(error.<span class="hljs-property">code</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-title class_">DeviceErrorCode</span>);</li><li>      }</li><li>    })</li><li>  })</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="模拟触摸板操作">模拟触摸板操作<i class="anchor-icon anchor-icon-link" anchorid="模拟触摸板操作" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p1407771534100314">如下给出触摸板模拟操作的示例，触摸板三指上滑返回桌面，三指下滑恢复应用窗口。下面代码执行前请参考UI测试示例，实现对应的Index.ets页面代码。</p> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000002506106491__screen1706332723100314" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ohosTest/ets/test/uitest.test.ets</span></li><li><span class="hljs-keyword">import</span> { describe, it, <span class="hljs-title class_">TestType</span>, <span class="hljs-title class_">Size</span>, <span class="hljs-title class_">Level</span>, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;</li><li><span class="hljs-comment">// 导入测试依赖kit</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Driver</span>, <span class="hljs-title class_">UiDirection</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.TestKit'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-title class_">DeviceErrorCode</span> = <span class="hljs-number">17000005</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">abilityTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'touchPadOperationTest'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">// PC/2in1场景，模拟触摸板三指上滑（界面返回桌面），三指下滑（界面恢复窗口）操作</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'touchPadOperation'</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span> | <span class="hljs-title class_">Size</span>.<span class="hljs-property">MEDIUMTEST</span> | <span class="hljs-title class_">Level</span>.<span class="hljs-property">LEVEL3</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-comment">// 触摸板三指上滑返回桌面。</span></li><li>        <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">touchPadMultiFingerSwipe</span>(<span class="hljs-number">3</span>, <span class="hljs-title class_">UiDirection</span>.<span class="hljs-property">UP</span>);</li><li>        <span class="hljs-comment">// 触摸板三指下滑恢复窗口</span></li><li>        <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">touchPadMultiFingerSwipe</span>(<span class="hljs-number">3</span>, <span class="hljs-title class_">UiDirection</span>.<span class="hljs-property">DOWN</span>);</li><li>      } <span class="hljs-keyword">catch</span> (error) {</li><li>        <span class="hljs-comment">// 在不支持触摸板操作的设备上调用时，将抛出17000005错误码</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`$ windowSearchAndOperation error is: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>        <span class="hljs-title function_">expect</span>(error.<span class="hljs-property">code</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-title class_">DeviceErrorCode</span>);</li><li>      }</li><li>    })</li><li>  })</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="模拟手写笔操作">模拟手写笔操作<i class="anchor-icon anchor-icon-link" anchorid="模拟手写笔操作" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p1827484940100314">如下给出手写笔模拟操作，包括点击、滑动等操作的示例，支持设置操作时的压力值大小。下面代码执行前请参考UI测试示例，实现对应的Index.ets页面代码。</p> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000002506106491__screen664712548100314" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ohosTest/ets/test/uitest.test.ets</span></li><li><span class="hljs-keyword">import</span> { describe, it, <span class="hljs-title class_">TestType</span>, <span class="hljs-title class_">Size</span>, <span class="hljs-title class_">Level</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;</li><li><span class="hljs-comment">// 导入测试依赖kit</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Driver</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.TestKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">abilityTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'penOperationTest'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">// 模拟手写笔单击、双击、长按、滑动操作</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'penOperation'</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span> | <span class="hljs-title class_">Size</span>.<span class="hljs-property">MEDIUMTEST</span> | <span class="hljs-title class_">Level</span>.<span class="hljs-property">LEVEL3</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-comment">// 手写笔单击</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">penClick</span>({<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>});</li><li>      <span class="hljs-comment">// 手写笔双击</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">penDoubleClick</span>({<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>});</li><li>      <span class="hljs-comment">// 手写笔长按</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">penLongClick</span>({<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>}, <span class="hljs-number">0.5</span>);</li><li>      <span class="hljs-comment">// 手写笔滑动</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">penSwipe</span>({<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>}, {<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">500</span>}, <span class="hljs-number">600</span>, <span class="hljs-number">0.5</span>);</li><li>    })</li><li>  })</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="模拟表冠操作">模拟表冠操作<i class="anchor-icon anchor-icon-link" anchorid="模拟表冠操作" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p842697568100314">如下给出表冠模拟操作的示例，包括表冠的顺/逆时针旋转。下面代码执行前请参考UI测试示例，实现对应的Index.ets页面代码。</p> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000002506106491__screen577064629100314" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ohosTest/ets/test/uitest.test.ets</span></li><li><span class="hljs-keyword">import</span> { describe, it, <span class="hljs-title class_">TestType</span>, <span class="hljs-title class_">Size</span>, <span class="hljs-title class_">Level</span>, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;</li><li><span class="hljs-comment">// 导入测试依赖kit</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Driver</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.TestKit'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-title class_">CapabilityCode</span> = <span class="hljs-number">801</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">abilityTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'crownRotateTest'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">// 手表场景，模拟表冠顺/逆时针旋转</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'crownRotate'</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span> | <span class="hljs-title class_">Size</span>.<span class="hljs-property">MEDIUMTEST</span> | <span class="hljs-title class_">Level</span>.<span class="hljs-property">LEVEL3</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-comment">// 顺时针旋转50格，旋转速度为30格/秒</span></li><li>        <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">crownRotate</span>(<span class="hljs-number">50</span>, <span class="hljs-number">30</span>);</li><li>        <span class="hljs-comment">// 逆时针旋转20格，旋转速度为30格/秒</span></li><li>        <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">crownRotate</span>(-<span class="hljs-number">20</span>, <span class="hljs-number">30</span>);</li><li>      } <span class="hljs-keyword">catch</span> (error) {</li><li>        <span class="hljs-comment">// driver.crownRotate接口仅在智能表设备上生效，其他设备调用时将抛出801错误码</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`$ testCrownRotate error is: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>        <span class="hljs-title function_">expect</span>(error.<span class="hljs-property">code</span>).<span class="hljs-title function_">assertEqual</span>(<span class="hljs-title class_">CapabilityCode</span>);</li><li>      }</li><li>    })</li><li>  })</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="屏幕显示操作">屏幕显示操作<i class="anchor-icon anchor-icon-link" anchorid="屏幕显示操作" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p450218627100314">如下给出屏幕显示操作的示例，包括获取屏幕大小、分辨率等属性和屏幕唤醒、屏幕旋转等操作。下面代码执行前请参考UI测试示例，实现对应的Index.ets页面代码。</p> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000002506106491__screen1817313499100314" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ohosTest/ets/test/uitest.test.ets</span></li><li><span class="hljs-keyword">import</span> { describe, it, <span class="hljs-title class_">TestType</span>, <span class="hljs-title class_">Size</span>, <span class="hljs-title class_">Level</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hypium'</span>;</li><li><span class="hljs-comment">// 导入测试依赖kit</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Driver</span>, <span class="hljs-title class_">Point</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.TestKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">abilityTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title function_">describe</span>(<span class="hljs-string">'crownRotateTest'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">// 屏幕属性获取和屏幕操作</span></li><li>    <span class="hljs-title function_">it</span>(<span class="hljs-string">'displayOperation'</span>, <span class="hljs-title class_">TestType</span>.<span class="hljs-property">FUNCTION</span> | <span class="hljs-title class_">Size</span>.<span class="hljs-property">MEDIUMTEST</span> | <span class="hljs-title class_">Level</span>.<span class="hljs-property">LEVEL3</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">let</span> driver = <span class="hljs-title class_">Driver</span>.<span class="hljs-title function_">create</span>();</li><li>      <span class="hljs-comment">// 获取屏幕大小</span></li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">size</span>: <span class="hljs-title class_">Point</span> = <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">getDisplaySize</span>();</li><li>      <span class="hljs-comment">// 获取屏幕清晰度</span></li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">density</span>: <span class="hljs-title class_">Point</span> = <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">getDisplayDensity</span>();</li><li>      <span class="hljs-comment">// 唤醒屏幕</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">wakeUpDisplay</span>();</li><li>      <span class="hljs-comment">// 屏幕顺时针旋转90度</span></li><li>      <span class="hljs-keyword">await</span> driver.<span class="hljs-title function_">setDisplayRotation</span>(<span class="hljs-title class_">DisplayRotation</span>.<span class="hljs-property">ROTATION_90</span>);</li><li>    })</li><li>  })</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="基于命令行进行ui测试">基于命令行进行UI测试<i class="anchor-icon anchor-icon-link" anchorid="基于命令行进行ui测试" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002506106491__p1915217118100314">在开发阶段，如果需要快速执行截图、界面操作录制、UI模拟操作注入、控件树获取等测试相关操作，可借助命令行实现，提升测试效率。</p> </div>  <div class="tiledSection"><h3 id="环境要求" class="firsth2">环境要求<i class="anchor-icon anchor-icon-link" anchorid="环境要求" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p1173264608100314">根据hdc命令行工具指导，完成<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hdc#环境准备" target="_blank">环境准备</a>。确保设备已成功连接，并执行hdc shell。</p> </div>  <div class="tiledSection"><h3 id="命令列表">命令列表<i class="anchor-icon anchor-icon-link" anchorid="命令列表" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table id="table9345658100314" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002506106491__row1706565997100314"><th align="left" class="cellrowborder" id="mcps1.3.19.2.1.4.1.1" valign="top" width="33.33333333333333%">命令</th> <th align="left" class="cellrowborder" id="mcps1.3.19.2.1.4.1.2" valign="top" width="33.33333333333333%">参数</th> <th align="left" class="cellrowborder" id="mcps1.3.19.2.1.4.1.3" valign="top" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002506106491__row230368418100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">help</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">-</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">显示UITest工具能够支持的命令信息。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row670729843100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">screenCap</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">[-p] [-d]</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p1384560931100314">截图。</p> <p id="ZH-CN_TOPIC_0000002506106491__p2109376067100314">各参数代表的含义请参考<a href="/consumer/cn/doc/harmonyos-guides/uitest-guidelines#获取截图">获取截图</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1488522544100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">dumpLayout</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">[-p] &lt;-i | -a | -b | -w | -m | -d&gt;</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p738611016100314">获取控件树。</p> <p id="ZH-CN_TOPIC_0000002506106491__p1681449259100314">各参数代表的含义请参考<a href="/consumer/cn/doc/harmonyos-guides/uitest-guidelines#获取控件树">获取控件树</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row341846318100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">uiRecord</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">&lt;record | read&gt;</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p1987859525100314">录制界面操作。 </p> <p id="ZH-CN_TOPIC_0000002506106491__p879552920100314"> <strong>record</strong> ：开始录制，将当前界面操作记录到'/data/local/tmp/record.csv'，结束录制操作使用Ctrl+C结束录制。 </p> <p id="ZH-CN_TOPIC_0000002506106491__p2091131528100314"> <strong>read</strong> ：读取并且打印录制数据。</p> <p id="ZH-CN_TOPIC_0000002506106491__p17054991100314">各参数代表的含义请参考<a href="/consumer/cn/doc/harmonyos-guides/uitest-guidelines#录制界面操作">录制界面操作</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row255636108100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">uiInput</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">&lt;help | click | doubleClick | longClick | fling | swipe | drag | dircFling | inputText | keyEvent | text&gt;</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p461907742100314">注入UI模拟操作。</p> <p id="ZH-CN_TOPIC_0000002506106491__p1248845174100314">各参数代表的含义请参考<a href="/consumer/cn/doc/harmonyos-guides/uitest-guidelines#注入ui模拟操作">注入UI模拟操作</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row134685754100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">--version</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">-</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">获取当前UITest工具版本信息。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1598934674100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">start-daemon</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">-</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">拉起UITest测试进程。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="获取截图">获取截图<i class="anchor-icon anchor-icon-link" anchorid="获取截图" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table id="table460636807100314" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002506106491__row788554907100314"><th align="left" class="cellrowborder" id="mcps1.3.20.2.1.4.1.1" valign="top" width="33.33333333333333%">参数</th> <th align="left" class="cellrowborder" id="mcps1.3.20.2.1.4.1.2" valign="top" width="33.33333333333333%">二级参数</th> <th align="left" class="cellrowborder" id="mcps1.3.20.2.1.4.1.3" valign="top" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002506106491__row584097968100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">-p</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">&lt;savePath&gt;</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">指定存储路径和文件名，只支持存放在'/data/local/tmp/'下。默认存储路径：'/data/local/tmp'，文件名：'时间戳 + .png'。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row181629505100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">-d</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">&lt;displayId&gt;</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p1733403862100314">多屏场景下，获取指定ID屏幕下的截图。</p> <p id="ZH-CN_TOPIC_0000002506106491__p21331107100314"> <strong>说明：</strong> 从API version 20开始支持该命令。</p> </td> </tr>  </tbody></table></div> </div> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="bash prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002506106491__screen1237650268100314" hw-language="bash" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment"># 存储路径：/data/local/tmp，文件名：时间戳 + .png。</span></li><li>hdc shell uitest screenCap</li><li><span class="hljs-comment"># 指定存储路径和文件名，存放在/data/local/tmp/下。</span></li><li>hdc shell uitest screenCap -p /data/local/tmp/1.png</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="获取控件树">获取控件树<i class="anchor-icon anchor-icon-link" anchorid="获取控件树" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table id="table533603088100314" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002506106491__row1543781200100314"><th align="left" class="cellrowborder" id="mcps1.3.21.2.1.4.1.1" valign="top" width="33.33333333333333%">参数</th> <th align="left" class="cellrowborder" id="mcps1.3.21.2.1.4.1.2" valign="top" width="33.33333333333333%">二级参数</th> <th align="left" class="cellrowborder" id="mcps1.3.21.2.1.4.1.3" valign="top" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002506106491__row1838481916100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">-p</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">&lt;savePath&gt;</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">指定存储路径和文件名，只支持存放在'/data/local/tmp/'下。默认存储路径：'/data/local/tmp'，文件名：'时间戳 + .json'。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1849357934100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">-i</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">-</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">不过滤不可见控件，也不做窗口合并。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row2025412567100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">-a</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">-</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p521608765100314">保存控件的BackgroundColor、Content、FontColor、FontSize、extraAttrs属性数据。</p> <p id="ZH-CN_TOPIC_0000002506106491__p34045884100314"><strong>说明</strong> ：默认不保存上述属性数据， <strong>-a和-i不可同时使用。</strong></p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1494033737100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">-b</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">&lt;bundleName&gt;</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">获取指定包名对应目标窗口的控件树信息。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row730083615100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">-w</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">&lt;windowId&gt;</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p780827528100314">获取指定ID目标窗口的控件树信息。</p> <p id="ZH-CN_TOPIC_0000002506106491__p1841596669100314"> <strong>说明:</strong></p> <p id="ZH-CN_TOPIC_0000002506106491__p1888213024100314">可通过hidumper工具<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hidumper#获取应用窗口信息" target="_blank">获取应用窗口信息</a>, 包含应用对应窗口的id。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row424546037100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">-m</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">&lt;true|false&gt;</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">指定在获取控件树信息时是否合并窗口信息。true表示合并窗口信息，false表示不合并窗口信息，不设置时默认为true。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row2023296464100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">-d</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">&lt;displayId&gt;</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p9324598100314">多屏场景下，获取指定ID屏幕下的控件树。</p> <p id="ZH-CN_TOPIC_0000002506106491__p1170199610100314"> <strong>说明：</strong></p> <p id="ZH-CN_TOPIC_0000002506106491__p277204410100314"> 1. 从API version 20开始支持该命令。</p> <p id="ZH-CN_TOPIC_0000002506106491__p193163765100314">2. 可通过hidumper工具<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hidumper#获取应用窗口信息" target="_blank">获取应用窗口信息</a>，包含应用对应窗口的DisplayId。</p> </td> </tr>  </tbody></table></div> </div> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="bash prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002506106491__screen143054743100314" hw-language="bash" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment"># 指定存储路径和文件名，存放在/data/local/tmp/下。</span></li><li>hdc shell uitest dumpLayout -p /data/local/tmp/1.json</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="录制界面操作">录制界面操作<i class="anchor-icon anchor-icon-link" anchorid="录制界面操作" tips="复制节点链接"></i></h3><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p id="ZH-CN_TOPIC_0000002506106491__p847354269100314">录制过程中，需等待当前操作的识别结果在命令行输出后，再进行下一步操作。</p>  </div></div></div> <p id="ZH-CN_TOPIC_0000002506106491__p916193013100314"><strong>参数列表</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table702984906100314" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002506106491__row451993883100314"><th align="left" class="cellrowborder" id="mcps1.3.22.4.1.4.1.1" valign="top" width="33.33333333333333%">参数</th> <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.4.1.2" valign="top" width="33.33333333333333%">二级参数</th> <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.4.1.3" valign="top" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002506106491__row1936530074100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">-W</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">&lt;true/false&gt;</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p717573548100314">录制过程中是否保存操作坐标对应的控件信息到/data/local/tmp/record.csv文件中。true表示保存控件信息，false表示仅记录坐标信息，不设置时默认为true。 </p> <p id="ZH-CN_TOPIC_0000002506106491__p756579198100314"> <strong>说明：</strong> 从API version 20开始支持该命令。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row304760198100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">-l</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">-</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p334920862100314">在每次操作后保存当前布局信息，文件保存路径：/data/local/tmp/layout_录制启动时间戳_操作序号.json。 </p> <p id="ZH-CN_TOPIC_0000002506106491__p712284185100314"> <strong>说明：</strong> 从API version 20开始支持该命令。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1298829571100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">-c</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">&lt;true/false&gt;</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p1075562193100314">是否将录制到的操作事件信息打印到控制台，true表示打印，false表示打印，不设置时默认为true。</p> <p id="ZH-CN_TOPIC_0000002506106491__p289835963100314"> <strong>说明：</strong> 从API version 20开始支持该命令。</p> </td> </tr>  </tbody></table></div> </div> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="bash prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002506106491__screen1038272212100314" hw-language="bash" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment"># 将当前界面操作记录到/data/local/tmp/record.csv，结束录制操作使用Ctrl+C结束录制。</span></li><li>hdc shell uitest uiRecord record</li><li><span class="hljs-comment"># 录制时仅记录操作的坐标，不匹配目标控件。</span></li><li>hdc shell uitest uiRecord record -W <span class="hljs-literal">false</span></li><li><span class="hljs-comment"># 每次操作后，保存页面布局，文件保存路径：/data/local/tmp/layout_录制启动时间戳_操作序号.json。</span></li><li>hdc shell uitest uiRecord record -l</li><li><span class="hljs-comment"># 录制到的操作事件信息不打印到控制台。</span></li><li>hdc shell uitest uiRecord record -c <span class="hljs-literal">false</span></li><li><span class="hljs-comment"># 读取并打印录制数据。</span></li><li>hdc shell uitest uiRecord <span class="hljs-built_in">read</span></li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002506106491__p1367654077100314">录制数据中字段及含义如下。</p> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" id="ZH-CN_TOPIC_0000002506106491__screen1534291503100314" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"ABILITY"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"com.ohos.launcher.MainAbility"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 被操作应用对应的Ability名称</span></li><li>  <span class="hljs-attr">"BUNDLE"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"com.ohos.launcher"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 被操作应用对应的包名</span></li><li>  <span class="hljs-attr">"CENTER_X"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 预留字段，暂未使用</span></li><li>  <span class="hljs-attr">"CENTER_Y"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 预留字段，暂未使用</span></li><li>  <span class="hljs-attr">"EVENT_TYPE"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pointer"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 操作类型</span></li><li>  <span class="hljs-attr">"LENGTH"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 总体步长</span></li><li>  <span class="hljs-attr">"OP_TYPE"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"click"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//事件类型，当前支持点击、双击、长按、拖拽、滑动、抛滑动作录制</span></li><li>  <span class="hljs-attr">"VELO"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.000000"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 离手速度</span></li><li>  <span class="hljs-attr">"direction.X"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.000000"</span><span class="hljs-punctuation">,</span><span class="hljs-comment">// 总体移动X方向</span></li><li>  <span class="hljs-attr">"direction.Y"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.000000"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 总体移动Y方向</span></li><li>  <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">33885000.0</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 手势操作持续时间</span></li><li>  <span class="hljs-attr">"fingerList"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"LENGTH"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 总体步长</span></li><li>    <span class="hljs-attr">"MAX_VEL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"40000"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 最大速度</span></li><li>    <span class="hljs-attr">"VELO"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.000000"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 离手速度</span></li><li>    <span class="hljs-attr">"W1_BOUNDS"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{"</span>bottom<span class="hljs-string">":361,"</span>left<span class="hljs-string">":37,"</span>right<span class="hljs-string">":118,"</span>top<span class="hljs-string">":280}"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 起点控件边界</span></li><li>    <span class="hljs-attr">"W1_HIER"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ROOT,3,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 起点控件页面层级</span></li><li>    <span class="hljs-attr">"W1_ID"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 起点控件id</span></li><li>    <span class="hljs-attr">"W1_Text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 起点控件text</span></li><li>    <span class="hljs-attr">"W1_Type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Image"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 起点控件类型</span></li><li>    <span class="hljs-attr">"W2_BOUNDS"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{"</span>bottom<span class="hljs-string">":361,"</span>left<span class="hljs-string">":37,"</span>right<span class="hljs-string">":118,"</span>top<span class="hljs-string">":280}"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 终点控件边界</span></li><li>    <span class="hljs-attr">"W2_HIER"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ROOT,3,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 终点控件页面层级</span></li><li>    <span class="hljs-attr">"W2_ID"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 终点控件id</span></li><li>    <span class="hljs-attr">"W2_Text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 终点控件text</span></li><li>    <span class="hljs-attr">"W2_Type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Image"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 终点控件类型</span></li><li>    <span class="hljs-attr">"X2_POSI"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"47"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 终点X</span></li><li>    <span class="hljs-attr">"X_POSI"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"47"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 起点X</span></li><li>    <span class="hljs-attr">"Y2_POSI"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"301"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 终点Y</span></li><li>    <span class="hljs-attr">"Y_POSI"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"301"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 起点Y</span></li><li>    <span class="hljs-attr">"direction.X"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.000000"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// X方向移动量</span></li><li>    <span class="hljs-attr">"direction.Y"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.000000"</span> <span class="hljs-comment">// Y方向移动量</span></li><li>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"fingerNumber"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1"</span> <span class="hljs-comment">//手指数量</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="注入ui模拟操作">注入UI模拟操作<i class="anchor-icon anchor-icon-link" anchorid="注入ui模拟操作" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table id="table2064625480100314" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002506106491__row1159826578100314"><th align="left" class="cellrowborder" id="mcps1.3.23.2.1.3.1.1" valign="top" width="50%">参数</th> <th align="left" class="cellrowborder" id="mcps1.3.23.2.1.3.1.2" valign="top" width="50%">说明</th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002506106491__row1373888079100314"><td class="cellrowborder" valign="top" width="50%">help</td> <td class="cellrowborder" valign="top" width="50%">uiInput命令相关帮助信息。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row890601837100314"><td class="cellrowborder" valign="top" width="50%">click</td> <td class="cellrowborder" valign="top" width="50%">模拟单击操作。具体请参考下方<strong>uiInput-click/doubleClick/longClick使用示例</strong>。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row567584583100314"><td class="cellrowborder" valign="top" width="50%">doubleClick</td> <td class="cellrowborder" valign="top" width="50%">模拟双击操作。具体请参考下方<strong>uiInput click/doubleClick/longClick使用示例</strong>。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row318464094100314"><td class="cellrowborder" valign="top" width="50%">longClick</td> <td class="cellrowborder" valign="top" width="50%">模拟长按操作。具体请参考下方<strong>uiInput click/doubleClick/longClick使用示例</strong>。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1145546233100314"><td class="cellrowborder" valign="top" width="50%">fling</td> <td class="cellrowborder" valign="top" width="50%">模拟快滑操作，即操作结束后页面存在惯性滚动。具体请参考下方<strong>uiInput fling使用示例</strong>。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row974378051100314"><td class="cellrowborder" valign="top" width="50%">swipe</td> <td class="cellrowborder" valign="top" width="50%">模拟慢滑操作。具体请参考下方<strong>uiInput swipe/drag使用示例</strong>。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row454797707100314"><td class="cellrowborder" valign="top" width="50%">drag</td> <td class="cellrowborder" valign="top" width="50%">模拟拖拽操作。具体请参考下方<strong>uiInput swipe/drag使用示例</strong>。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1237232881100314"><td class="cellrowborder" valign="top" width="50%">dircFling</td> <td class="cellrowborder" valign="top" width="50%">模拟指定方向滑动操作。具体请参考下方<strong>uiInput dircFling使用示例</strong>。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row973027210100314"><td class="cellrowborder" valign="top" width="50%">inputText</td> <td class="cellrowborder" valign="top" width="50%">指定坐标点，模拟输入框输入文本操作。具体请参考下方<strong>uiInput inputText使用示例</strong>。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row708464293100314"><td class="cellrowborder" valign="top" width="50%">text</td> <td class="cellrowborder" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002506106491__p1031723255100314">无需指定坐标点，在当前获焦处，模拟输入框输入文本操作。具体请参考下方<strong>uiInput text使用示例</strong>。</p> <p id="ZH-CN_TOPIC_0000002506106491__p484582389100314"> <strong>说明：</strong> 从API version 18开始支持该命令。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1339692638100314"><td class="cellrowborder" valign="top" width="50%">keyEvent</td> <td class="cellrowborder" valign="top" width="50%">模拟实体按键事件（如：键盘，电源键，返回上一级，返回桌面等），以及组合按键操作。具体请参考下方<strong>uiInput keyEvent使用示例</strong>。</td> </tr>  </tbody></table></div> </div> <ul id="ZH-CN_TOPIC_0000002506106491__ul719537789100314"><li id="li899506340100314">uiInput-click/doubleClick/longClick使用示例</li></ul>  <div class="tablenoborder"><div class="tbBox"><table id="table697333415100314" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002506106491__row1206637577100314"><th align="left" class="cellrowborder" id="mcps1.3.23.4.1.4.1.1" valign="top" width="33.33333333333333%">参数</th> <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.4.1.2" valign="top" width="33.33333333333333%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.4.1.3" valign="top" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002506106491__row690369138100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">point_x</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">点击x坐标点。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1207701999100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">point_y</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">点击y坐标点。</td> </tr>  </tbody></table></div> </div> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" id="ZH-CN_TOPIC_0000002506106491__screen1574590245100314" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_"># </span><span class="language-bash">执行单击事件。</span></li><li>hdc shell uitest uiInput click 100 100</li><li><span class="hljs-meta prompt_"></span></li><li><span class="hljs-meta prompt_"># </span><span class="language-bash">执行双击事件。</span></li><li>hdc shell uitest uiInput doubleClick 100 100</li><li><span class="hljs-meta prompt_"></span></li><li><span class="hljs-meta prompt_"># </span><span class="language-bash">执行长按事件。</span></li><li>hdc shell uitest uiInput longClick 100 100</li></ol></pre></div></div> <ul id="ZH-CN_TOPIC_0000002506106491__ul1855562568100314"><li id="li1021967730100314">uiInput fling使用示例</li></ul>  <div class="tablenoborder"><div class="tbBox"><table id="table1253986409100314" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002506106491__row712742592100314"><th align="left" class="cellrowborder" id="mcps1.3.23.7.1.4.1.1" valign="top" width="33.33333333333333%">参数</th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.4.1.2" valign="top" width="33.33333333333333%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.4.1.3" valign="top" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002506106491__row1066234678100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">from_x</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">滑动起点x坐标。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1614044540100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">from_y</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">滑动起点y坐标。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1656562666100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">to_x</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">滑动终点x坐标。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1103985721100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">to_y</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">滑动终点y坐标。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1514603856100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">swipeVelocityPps_</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">否</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p584694181100314">滑动速度，单位：px/s，取值范围：200-40000。</p> <p id="ZH-CN_TOPIC_0000002506106491__p1072223737100314"> 默认值：600。取值超出限定范围时，取默认值。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row2076751584100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">stepLength_</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">否</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p1708604226100314">滑动步长，单位：px。默认值：滑动距离/50。 </p> <p id="ZH-CN_TOPIC_0000002506106491__p1432198834100314"> <strong>说明：</strong> </p> <p id="ZH-CN_TOPIC_0000002506106491__p1888247264100314"> 滑动距离根据入参给出的滑动起止坐标点计算得出。 </p> <p id="ZH-CN_TOPIC_0000002506106491__p626161146100314"> <strong>为实现更好的模拟效果，推荐参数缺省/使用默认值。</strong></p> </td> </tr>  </tbody></table></div> </div> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" id="ZH-CN_TOPIC_0000002506106491__screen2008834035100314" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_"># </span><span class="language-bash">执行快滑操作，stepLength_缺省。</span></li><li>hdc shell uitest uiInput fling 10 10 200 200 500 </li></ol></pre></div></div> <ul id="ZH-CN_TOPIC_0000002506106491__ul355006586100314"><li id="li809925165100314">uiInput swipe/drag使用示例</li></ul>  <div class="tablenoborder"><div class="tbBox"><table id="table720358016100314" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002506106491__row712449943100314"><th align="left" class="cellrowborder" id="mcps1.3.23.10.1.4.1.1" valign="top" width="33.33333333333333%">参数</th> <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.4.1.2" valign="top" width="33.33333333333333%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.4.1.3" valign="top" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002506106491__row1423623554100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">from_x</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">滑动起点x坐标。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1375079260100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">from_y</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">滑动起点y坐标。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row2105055914100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">to_x</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">滑动终点x坐标。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1213198697100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">to_y</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">滑动终点y坐标。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1049422404100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">swipeVelocityPps_</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">否</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p203881966100314">滑动速度，单位：px/s，取值范围：200-40000。</p> <p id="ZH-CN_TOPIC_0000002506106491__p1835514950100314"> 默认值：600。取值超出限定范围时，取默认值。</p> </td> </tr>  </tbody></table></div> </div> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" id="ZH-CN_TOPIC_0000002506106491__screen293749787100314" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_"># </span><span class="language-bash">执行慢滑操作。</span></li><li>hdc shell uitest uiInput swipe 10 10 200 200 500</li><li><span class="hljs-meta prompt_"></span></li><li><span class="hljs-meta prompt_"># </span><span class="language-bash">执行拖拽操作。</span> </li><li>hdc shell uitest uiInput drag 10 10 100 100 500 </li></ol></pre></div></div> <ul id="ZH-CN_TOPIC_0000002506106491__ul949038014100314"><li id="li230841487100314">uiInput dircFling使用示例</li></ul>  <div class="tablenoborder"><div class="tbBox"><table id="table1921747423100314" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002506106491__row1137775148100314"><th align="left" class="cellrowborder" id="mcps1.3.23.13.1.4.1.1" valign="top" width="33.33333333333333%">参数</th> <th align="left" class="cellrowborder" id="mcps1.3.23.13.1.4.1.2" valign="top" width="33.33333333333333%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.23.13.1.4.1.3" valign="top" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002506106491__row1953574376100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">direction</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">否</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p2001397176100314">滑动方向，取值范围：[0,1,2,3]，默认值为0。</p> <p id="ZH-CN_TOPIC_0000002506106491__p23415731100314"> 0代表向左滑动，1代表向右滑动，2代表向上滑动，3代表向下滑动。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1990873474100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">swipeVelocityPps_</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">否</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p512001265100314">滑动速度，单位：px/s，取值范围：200-40000。</p> <p id="ZH-CN_TOPIC_0000002506106491__p687959231100314"> <strong>默认值</strong>: 600。取值超出限定范围时，取默认值。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row2134453066100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">stepLength</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">否</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p152608479100314">滑动步长，单位：px。</p> <p id="ZH-CN_TOPIC_0000002506106491__p399546597100314"> <strong>默认值</strong>： 如果滑动方向为0、1，默认值为屏幕宽度/200； 如果滑动方向为2、3，默认值为屏幕高度/200。为更好的模拟效果，推荐参数缺省/使用默认值。</p> </td> </tr>  </tbody></table></div> </div> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" id="ZH-CN_TOPIC_0000002506106491__screen1052757724100314" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_"># </span><span class="language-bash">执行左滑操作。</span></li><li>hdc shell uitest uiInput dircFling 0 500</li><li><span class="hljs-meta prompt_"># </span><span class="language-bash">执行向右滑动操作。</span></li><li>hdc shell uitest uiInput dircFling 1 600</li><li><span class="hljs-meta prompt_"># </span><span class="language-bash">执行向上滑动操作。</span></li><li>hdc shell uitest uiInput dircFling 2 </li><li><span class="hljs-meta prompt_"># </span><span class="language-bash">执行向下滑动操作。</span></li><li>hdc shell uitest uiInput dircFling 3</li></ol></pre></div></div> <ul id="ZH-CN_TOPIC_0000002506106491__ul1416464865100314"><li id="li1415743614100314">uiInput inputText使用示例</li></ul>  <div class="tablenoborder"><div class="tbBox"><table id="table215230591100314" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002506106491__row750933798100314"><th align="left" class="cellrowborder" id="mcps1.3.23.16.1.4.1.1" valign="top" width="33.33333333333333%">参数</th> <th align="left" class="cellrowborder" id="mcps1.3.23.16.1.4.1.2" valign="top" width="33.33333333333333%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.23.16.1.4.1.3" valign="top" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002506106491__row670929881100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">point_x</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">输入框x坐标点。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row924300271100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">point_y</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">输入框y坐标点。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row1553758515100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">text</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">输入文本内容。</td> </tr>  </tbody></table></div> </div> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" id="ZH-CN_TOPIC_0000002506106491__screen380446215100314" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_"># </span><span class="language-bash">执行输入框输入操作。</span></li><li>hdc shell uitest uiInput inputText 100 100 hello </li></ol></pre></div></div> <ul id="ZH-CN_TOPIC_0000002506106491__ul1149209372100314"><li id="li650523331100314">uiInput text使用示例</li></ul>  <div class="tablenoborder"><div class="tbBox"><table id="table127170447100314" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002506106491__row1224966676100314"><th align="left" class="cellrowborder" id="mcps1.3.23.19.1.4.1.1" valign="top" width="33.33333333333333%">参数</th> <th align="left" class="cellrowborder" id="mcps1.3.23.19.1.4.1.2" valign="top" width="33.33333333333333%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.23.19.1.4.1.3" valign="top" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002506106491__row1746753472100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">text</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">输入文本内容。</td> </tr>  </tbody></table></div> </div> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" id="ZH-CN_TOPIC_0000002506106491__screen122713931100314" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_"># </span><span class="language-bash">无需输入坐标点，在当前获焦处，执行输入框输入操作。若当前获焦处不支持文本输入，则无实际效果。</span></li><li>hdc shell uitest uiInput text hello</li></ol></pre></div></div> <ul id="ZH-CN_TOPIC_0000002506106491__ul378893467100314"><li id="li549002733100314">uiInput keyEvent使用示例</li></ul>  <div class="tablenoborder"><div class="tbBox"><table id="table948096797100314" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002506106491__row435442273100314"><th align="left" class="cellrowborder" id="mcps1.3.23.22.1.4.1.1" valign="top" width="33.33333333333333%">参数</th> <th align="left" class="cellrowborder" id="mcps1.3.23.22.1.4.1.2" valign="top" width="33.33333333333333%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.23.22.1.4.1.3" valign="top" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002506106491__row1792265133100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">keyID1</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002506106491__p1150789815100314">实体按键对应ID，取值范围：Back、Home、Power、或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-keycode#keycode" target="_blank">KeyCode键码值</a>。</p> <p id="ZH-CN_TOPIC_0000002506106491__p603948430100314">当取值为Back、Home或Power时，不支持输入组合键。 </p> <p id="ZH-CN_TOPIC_0000002506106491__p622622950100314">当前注入大写锁定键（KeyCode=2074）无效，请使用组合键实现大写字母输入。如“按键shift+按键V”输入大写字母V。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row96576123100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">keyID2</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">否</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">实体按键对应ID，取值范围：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-keycode#keycode" target="_blank">KeyCode键码值</a>，默认值为空。</td> </tr> <tr id="ZH-CN_TOPIC_0000002506106491__row232329607100314"><td class="cellrowborder" valign="top" width="33.33333333333333%">keyID3</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">否</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">实体按键对应ID，取值范围：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-keycode#keycode" target="_blank">KeyCode键码值</a>，默认值为空。</td> </tr>  </tbody></table></div> </div> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" id="ZH-CN_TOPIC_0000002506106491__screen720769729100314" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_"># </span><span class="language-bash">返回主页。</span></li><li>hdc shell uitest uiInput keyEvent Home</li><li><span class="hljs-meta prompt_"># </span><span class="language-bash">返回。</span></li><li>hdc shell uitest uiInput keyEvent Back</li><li><span class="hljs-meta prompt_"># </span><span class="language-bash">组合键粘贴。</span></li><li>hdc shell uitest uiInput keyEvent 2072 2038</li><li><span class="hljs-meta prompt_"># </span><span class="language-bash">输入小写字母v。</span></li><li>hdc shell uitest uiInput keyEvent 2038</li><li><span class="hljs-meta prompt_"># </span><span class="language-bash">输入大写字母V。</span></li><li>hdc shell uitest uiInput keyEvent 2047 2038</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="获取版本信息">获取版本信息<i class="anchor-icon anchor-icon-link" anchorid="获取版本信息" tips="复制节点链接"></i></h3><div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="bash prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002506106491__screen1141833835100314" hw-language="bash" data-highlighted="yes"><ol class="linenums"><li>hdc shell uitest --version</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="拉起uitest测试进程">拉起UITest测试进程<i class="anchor-icon anchor-icon-link" anchorid="拉起uitest测试进程" tips="复制节点链接"></i></h3><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p id="ZH-CN_TOPIC_0000002506106491__p1710558244100314">仅元能力aa test拉起的测试HAP才能调用Uitest的能力，且测试HAP的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-permission-mgmt-overview#权限机制中的基本概念" target="_blank">APL等级级别</a>需为normal。</p>  </div></div></div> <div _ngcontent-kpr-c106="" class="highlight-div"><div _ngcontent-kpr-c106="" class="highlight-div-header"><div _ngcontent-kpr-c106="" class="highlight-div-header-left"><div _ngcontent-kpr-c106="" class="handle-button expand-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpr-c106="" class="highlight-div-header-right"><div _ngcontent-kpr-c106="" class="handle-button ai-button"></div><div _ngcontent-kpr-c106="" class="handle-button line-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpr-c106="" class="handle-button theme-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpr-c106="" class="handle-button copy-button"><div _ngcontent-kpr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpr-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" id="ZH-CN_TOPIC_0000002506106491__screen1520055823100314" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>hdc shell uitest start-daemon</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="常见问题">常见问题<i class="anchor-icon anchor-icon-link" anchorid="常见问题" tips="复制节点链接"></i></h2></div>  <div class="tiledSection"><h3 id="失败日志有uitest-api-does-not-allow-calling-concurrently错误信息" class="firsth2">失败日志有“uitest-api does not allow calling concurrently”错误信息<i class="anchor-icon anchor-icon-link" anchorid="失败日志有uitest-api-does-not-allow-calling-concurrently错误信息" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p632324191100314"><strong>问题描述</strong></p> <p id="ZH-CN_TOPIC_0000002506106491__p1050439056100314">UI测试用例执行失败，查看hilog日志发现日志中有“uitest-api does not allow calling concurrently”错误信息。</p> <p id="ZH-CN_TOPIC_0000002506106491__p709267927100314"><strong>可能原因</strong></p> <ol id="ZH-CN_TOPIC_0000002506106491__ol1131063403100314"><li id="li1748167554100314">用例中UI测试框架提供异步接口没有增加await语法糖调用。</li><li id="li1090537046100314">多进程执行UI测试用例，导致拉起多个UITest进程，框架不支持多进程调用。</li></ol> <p id="ZH-CN_TOPIC_0000002506106491__p1457709593100314"><strong>解决方法</strong></p> <ol id="ZH-CN_TOPIC_0000002506106491__ol200580004100314"><li id="li1186676672100314">检查用例实现，异步接口增加await语法糖调用。</li><li id="li1856188412100314">避免多进程执行UI测试用例。</li></ol> </div>  <div class="tiledSection"><h3 id="失败日志有does-not-exist-on-current-ui-check-if-the-ui-has-changed-after-you-got-the-widget-object错误信息">失败日志有“does not exist on current UI! Check if the UI has changed after you got the widget object”错误信息<i class="anchor-icon anchor-icon-link" anchorid="失败日志有does-not-exist-on-current-ui-check-if-the-ui-has-changed-after-you-got-the-widget-object错误信息" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p38475009100314"><strong>问题描述</strong> </p> <p id="ZH-CN_TOPIC_0000002506106491__p1925562343100314">UI测试用例执行失败，查看hilog日志发现日志中有“does not exist on current UI! Check if the UI has changed after you got the widget object”错误信息。</p> <p id="ZH-CN_TOPIC_0000002506106491__p1590106441100314"><strong>可能原因</strong></p> <p id="ZH-CN_TOPIC_0000002506106491__p1553507102100314">在用例中代码查找到目标控件后，设备界面发生了变化，导致查找到的控件丢失，无法进行下一步的模拟操作。</p> <p id="ZH-CN_TOPIC_0000002506106491__p459861231100314"><strong>解决方法</strong></p> <p id="ZH-CN_TOPIC_0000002506106491__p1961905684100314">重新执行UI测试用例，确保进行模拟操作时控件在界面中存在。</p> </div>  <div class="tiledSection"><h3 id="失败日志有cannot-connect-to-aams-ret_err_connection_exist错误信息">失败日志有“Cannot connect to AAMS, RET_ERR_CONNECTION_EXIST”错误信息<i class="anchor-icon anchor-icon-link" anchorid="失败日志有cannot-connect-to-aams-ret_err_connection_exist错误信息" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002506106491__p144664209100314"><strong>问题描述</strong> </p> <p id="ZH-CN_TOPIC_0000002506106491__p518205550100314">UI测试用例执行失败，查看hilog日志发现日志中有“Cannot connect to AAMS, RET_ERR_CONNECTION_EXIST”错误信息。</p> <p id="ZH-CN_TOPIC_0000002506106491__p1821956865100314"><strong>可能原因</strong></p> <p id="ZH-CN_TOPIC_0000002506106491__p554775079100314">在用例执行的同时使用了其他依赖UI测试框架运行的测试工具。</p> <p id="ZH-CN_TOPIC_0000002506106491__p1458956244100314"><strong>解决方法</strong></p> <p id="ZH-CN_TOPIC_0000002506106491__p1272110827100314">关闭依赖UI测试框架运行的测试工具或重启设备。</p> </div> </div> <div></div></div>