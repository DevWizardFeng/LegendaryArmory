<h1 _ngcontent-aad-c119="" class="doc-title ng-star-inserted" title="UI调优"> UI调优 </h1>

<div _ngcontent-aad-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本章节主要介绍UI的dump和调优能力，用于提高开发效率和优化开发者体验。</p>    <div class="tiledSection">     <h2 id="状态管理hidumper调试与调优">状态管理hidumper、调试与调优<i class="anchor-icon anchor-icon-link" anchorid="状态管理hidumper调试与调优" tips="复制节点链接"></i></h2>          <p>为提升开发者定位状态管理问题的效率，UI提供针对状态变量的hidumper、调试与调优功能，将状态变量的黑盒信息暴露给开发者，帮助开发者深入了解状态变量和UI组件的变化过程，提升开发高性能应用的效率。</p>    </div>    <div class="tiledSection">     <h3 id="状态管理hidumper能力" class="firsth2">状态管理hidumper能力<i class="anchor-icon anchor-icon-link" anchorid="状态管理hidumper能力" tips="复制节点链接"></i></h3>          <p>状态管理接入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hidumper">hidumper</a>，支持通过-jsdump获取状态变量关联的组件、自定义组件树等信息，方便开发者了解状态变量影响的UI范围，写出高性能应用代码。</p>     <p>下面介绍dump状态变量每个参数的含义：</p>     <ul>      <li>jsdump：请求状态管理中的dump信息。</li>      <li>viewHierarchy：打印自定义组件树信息，默认只打印根自定义组件。</li>      <li>r：递归从根节点打印，自定义组件和其拥有组件的elementId。默认值打印根节点信息。</li>      <li>viewId：打印指定viewId的自定义组件的信息。</li>      <li>stateVariable：打印状态变量及关联的组件和同步对象的信息。当前命令不支持r递归dump。</li>      <li>registerdElementIds：打印当前自定义组件拥有的elementId。</li>     </ul>     <p>具体例子如下：</p>     <p>下面的例子为嵌套两层子组件的典型示例，使用了装饰器<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-state">@State</a>和 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-link">@Link</a>。开发者可组合使用上述命令，展示前端组件树、状态变量和其影响的组件等信息。</p>     <div _ngcontent-aad-c106="" class="highlight-div"><div _ngcontent-aad-c106="" class="highlight-div-header"><div _ngcontent-aad-c106="" class="highlight-div-header-left"><div _ngcontent-aad-c106="" class="handle-button expand-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aad-c106="" class="highlight-div-header-right"><div _ngcontent-aad-c106="" class="handle-button ai-button"></div><div _ngcontent-aad-c106="" class="handle-button line-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aad-c106="" class="handle-button theme-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aad-c106="" class="handle-button copy-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'hello world'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Parent:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> += <span class="hljs-string">'1'</span>;</li><li>      })</li><li>      <span class="hljs-title class_">Child</span>({ <span class="hljs-attr">message</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Child</span> {</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Child:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-title class_">GrandChild</span>({ <span class="hljs-attr">message</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">GrandChild</span> {</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'GrandChild: '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>步骤1：获取当前激活窗口的id。</p>     <div _ngcontent-aad-c106="" class="highlight-div"><div _ngcontent-aad-c106="" class="highlight-div-header"><div _ngcontent-aad-c106="" class="highlight-div-header-left"><div _ngcontent-aad-c106="" class="handle-button expand-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aad-c106="" class="highlight-div-header-right"><div _ngcontent-aad-c106="" class="handle-button ai-button"></div><div _ngcontent-aad-c106="" class="handle-button line-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aad-c106="" class="handle-button theme-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aad-c106="" class="handle-button copy-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aad-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>hdc shell hidumper -s WindowManagerService -a <span class="hljs-string">'-a'</span></li></ol></pre></div></div>     <p>步骤2：执行打印状态变量dump信息的命令。</p>     <p>假定激活的窗口id是90，可通过下面的命令dump出自定义组件树和根节点的状态变量的信息。</p>     <ul>      <li>       <p>命令1：递归打印所有自定义组件和根节点的状态变量信息：</p>       <div _ngcontent-aad-c106="" class="highlight-div"><div _ngcontent-aad-c106="" class="highlight-div-header"><div _ngcontent-aad-c106="" class="highlight-div-header-left"><div _ngcontent-aad-c106="" class="handle-button expand-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aad-c106="" class="highlight-div-header-right"><div _ngcontent-aad-c106="" class="handle-button ai-button"></div><div _ngcontent-aad-c106="" class="handle-button line-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aad-c106="" class="handle-button theme-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aad-c106="" class="handle-button copy-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aad-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>hdc shell hidumper -s WindowManagerService -a <span class="hljs-string">'-w 90 -jsdump -dumpAll -r'</span></li></ol></pre></div></div>       <p>执行上述命令后，dump信息代表的含义如下：</p>       <ul>        <li>Page[4]：自定义组件根节点。</li>        <li>View Hierarchy：前端自定义组件树结构信息。</li>        <li>State variables：根节点状态变量。从下面的信息可以看到Page下有状态变量@State 'message'[0]的具体信息：         <ul>          <li>[0]代表状态变量id。</li>          <li>Owned by @Component 'Page'[4]：当前状态变量属于组件'Page'[4],[4]为自定义组件id。</li>          <li>Sync peers：当前状态变量的同步对象，即@State message改变会通知@Link 'message'[-1] &lt;@Component 'Child'[7]&gt;刷新。</li>          <li>dependencies：           <ul>            <li>variable assignment affects elmtIds：状态变量改变会触发的组件的刷新。例如，@State message的改变会触发Text[6]的刷新。</li>            <li>Dependent elements：当前状态变量和其同步对象的关联组件。</li>           </ul></li>         </ul></li>        <li>Registered Element IDs：自定义组件和build()方法下声明的组件。</li>        <li>Dirty Registered Element IDs：自定义组件下未更新的脏节点列表。状态变量变化后，会标记其关联节点为脏节点，并请求在下一帧更新。在下一帧中更新脏节点并清空脏节点列表。手动执行dump时，Dirty Registered Element IDs通常为空。因为以目前大多数设备的帧间隔，开发者难以在两帧之间dump出脏节点列表。</li>       </ul>       <div _ngcontent-aad-c106="" class="highlight-div"><div _ngcontent-aad-c106="" class="highlight-div-header"><div _ngcontent-aad-c106="" class="highlight-div-header-left"><div _ngcontent-aad-c106="" class="handle-button expand-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aad-c106="" class="highlight-div-header-right"><div _ngcontent-aad-c106="" class="handle-button ai-button"></div><div _ngcontent-aad-c106="" class="handle-button line-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aad-c106="" class="handle-button theme-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aad-c106="" class="handle-button copy-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li>--------------------<span class="hljs-title class_">ViewPUInfo</span>--------------------</li><li>[-dumpAll, viewId=<span class="hljs-number">4</span>, isRecursive=<span class="hljs-literal">true</span>]</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-title class_">Page</span>[<span class="hljs-number">4</span>]</li><li>
</li><li><span class="hljs-title class_">View</span> <span class="hljs-title class_">Hierarchy</span>:</li><li>
</li><li>|--<span class="hljs-title class_">Page</span>[<span class="hljs-number">4</span>]<span class="hljs-title class_">ViewPU</span> {<span class="hljs-attr">isViewActive</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">isDeleting_</span>: <span class="hljs-literal">false</span>}</li><li>  |--<span class="hljs-title class_">Child</span>[<span class="hljs-number">7</span>]<span class="hljs-title class_">ViewPU</span> {<span class="hljs-attr">isViewActive</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">isDeleting_</span>: <span class="hljs-literal">false</span>}</li><li>    |--<span class="hljs-title class_">GrandChild</span>[<span class="hljs-number">10</span>]<span class="hljs-title class_">ViewPU</span> {<span class="hljs-attr">isViewActive</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">isDeleting_</span>: <span class="hljs-literal">false</span>}</li><li>
</li><li><span class="hljs-title class_">State</span> <span class="hljs-attr">variables</span>:</li><li>|--<span class="hljs-title class_">Page</span>[<span class="hljs-number">4</span>]</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-string">'message'</span>[<span class="hljs-number">0</span>]</li><li>  |--<span class="hljs-title class_">Owned</span> by <span class="hljs-meta">@Component</span> <span class="hljs-string">'Page'</span>[<span class="hljs-number">4</span>]</li><li>  |--<span class="hljs-title class_">Sync</span> <span class="hljs-attr">peers</span>: {</li><li>    <span class="hljs-meta">@Link</span> <span class="hljs-string">'message'</span>[-<span class="hljs-number">1</span>] &lt;<span class="hljs-meta">@Component</span> <span class="hljs-string">'Child'</span>[<span class="hljs-number">7</span>]&gt;</li><li>  }</li><li>  <span class="hljs-attr">dependencies</span>: variable assignment affects <span class="hljs-attr">elmtIds</span>: <span class="hljs-title class_">Text</span>[<span class="hljs-number">6</span>]</li><li>  |--<span class="hljs-title class_">Dependent</span> <span class="hljs-attr">elements</span>: <span class="hljs-title class_">Text</span>[<span class="hljs-number">6</span>]; <span class="hljs-meta">@Component</span> <span class="hljs-string">'Child'</span>[<span class="hljs-number">7</span>], <span class="hljs-title class_">Text</span>[<span class="hljs-number">9</span>]; <span class="hljs-meta">@Component</span> <span class="hljs-string">'GrandChild'</span>[<span class="hljs-number">10</span>], <span class="hljs-title class_">Text</span>[<span class="hljs-number">12</span>]</li><li>
</li><li><span class="hljs-title class_">Registered</span> <span class="hljs-title class_">Element</span> <span class="hljs-title class_">IDs</span>:</li><li>
</li><li>|--<span class="hljs-title class_">Page</span>[<span class="hljs-number">4</span>]: {</li><li>    <span class="hljs-title class_">Column</span>[<span class="hljs-number">5</span>]</li><li>    <span class="hljs-title class_">Text</span>[<span class="hljs-number">6</span>]</li><li>    <span class="hljs-title class_">Child</span>[<span class="hljs-number">7</span>]</li><li>  }[<span class="hljs-number">3</span>]</li><li>  |--<span class="hljs-title class_">Child</span>[<span class="hljs-number">7</span>]: {</li><li>      <span class="hljs-title class_">Column</span>[<span class="hljs-number">8</span>]</li><li>      <span class="hljs-title class_">Text</span>[<span class="hljs-number">9</span>]</li><li>      <span class="hljs-title class_">GrandChild</span>[<span class="hljs-number">10</span>]</li><li>    }[<span class="hljs-number">3</span>]</li><li>    |--<span class="hljs-title class_">GrandChild</span>[<span class="hljs-number">10</span>]: {</li><li>        <span class="hljs-title class_">Column</span>[<span class="hljs-number">11</span>]</li><li>        <span class="hljs-title class_">Text</span>[<span class="hljs-number">12</span>]</li><li>      }[<span class="hljs-number">2</span>]</li><li><span class="hljs-title class_">Total</span>: <span class="hljs-number">8</span></li><li>
</li><li><span class="hljs-title class_">Dirty</span> <span class="hljs-title class_">Registered</span> <span class="hljs-title class_">Element</span> <span class="hljs-title class_">IDs</span>:</li><li>
</li><li>|--<span class="hljs-title class_">Page</span>[<span class="hljs-number">4</span>]: {</li><li>  }[<span class="hljs-number">0</span>]</li><li>  |--<span class="hljs-title class_">Child</span>[<span class="hljs-number">7</span>]: {</li><li>    }[<span class="hljs-number">0</span>]</li><li>    |--<span class="hljs-title class_">GrandChild</span>[<span class="hljs-number">10</span>]: {</li><li>      }[<span class="hljs-number">0</span>]</li><li><span class="hljs-title class_">Total</span>: <span class="hljs-number">0</span></li></ol></pre></div></div></li>      <li>       <p>命令2：打印指定自定义组件的状态变量信息。例如，dump组件id为7的状态变量，可执行如下命令：</p>       <div _ngcontent-aad-c106="" class="highlight-div"><div _ngcontent-aad-c106="" class="highlight-div-header"><div _ngcontent-aad-c106="" class="highlight-div-header-left"><div _ngcontent-aad-c106="" class="handle-button expand-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aad-c106="" class="highlight-div-header-right"><div _ngcontent-aad-c106="" class="handle-button ai-button"></div><div _ngcontent-aad-c106="" class="handle-button line-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aad-c106="" class="handle-button theme-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aad-c106="" class="handle-button copy-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aad-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>hdc shell hidumper -s WindowManagerService -a <span class="hljs-string">'-w 90 -jsdump -dumpAll -viewId=7'</span></li></ol></pre></div></div>       <p>输出信息如下。</p>       <div _ngcontent-aad-c106="" class="highlight-div"><div _ngcontent-aad-c106="" class="highlight-div-header"><div _ngcontent-aad-c106="" class="highlight-div-header-left"><div _ngcontent-aad-c106="" class="handle-button expand-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aad-c106="" class="highlight-div-header-right"><div _ngcontent-aad-c106="" class="handle-button ai-button"></div><div _ngcontent-aad-c106="" class="handle-button line-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aad-c106="" class="handle-button theme-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aad-c106="" class="handle-button copy-button"><div _ngcontent-aad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li>--------------------<span class="hljs-title class_">ViewPUInfo</span>--------------------</li><li>[-dumpAll, viewId=<span class="hljs-number">7</span>, isRecursive=<span class="hljs-literal">false</span>]</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-title class_">Child</span>[<span class="hljs-number">7</span>]</li><li>
</li><li><span class="hljs-title class_">View</span> <span class="hljs-title class_">Hierarchy</span>:</li><li>
</li><li>|--<span class="hljs-title class_">Child</span>[<span class="hljs-number">7</span>]<span class="hljs-title class_">ViewPU</span> {<span class="hljs-attr">isViewActive</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">isDeleting_</span>: <span class="hljs-literal">false</span>}</li><li>  |--<span class="hljs-title class_">GrandChild</span>[<span class="hljs-number">10</span>]<span class="hljs-title class_">ViewPU</span> {<span class="hljs-attr">isViewActive</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">isDeleting_</span>: <span class="hljs-literal">false</span>}</li><li>
</li><li><span class="hljs-title class_">State</span> <span class="hljs-attr">variables</span>:</li><li>|--<span class="hljs-title class_">Child</span>[<span class="hljs-number">7</span>]</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-string">'message'</span>[-<span class="hljs-number">1</span>]</li><li>  |--<span class="hljs-title class_">Owned</span> by <span class="hljs-meta">@Component</span> <span class="hljs-string">'Child'</span>[<span class="hljs-number">7</span>]</li><li>  |--<span class="hljs-title class_">Sync</span> <span class="hljs-attr">peers</span>: {</li><li>    <span class="hljs-meta">@Link</span> <span class="hljs-string">'message'</span>[-<span class="hljs-number">2</span>] &lt;<span class="hljs-meta">@Component</span> <span class="hljs-string">'GrandChild'</span>[<span class="hljs-number">10</span>]&gt;</li><li>  }</li><li>  <span class="hljs-attr">dependencies</span>: variable assignment affects <span class="hljs-attr">elmtIds</span>: <span class="hljs-title class_">Text</span>[<span class="hljs-number">9</span>]</li><li>  |--<span class="hljs-title class_">Dependent</span> <span class="hljs-attr">elements</span>: <span class="hljs-title class_">Text</span>[<span class="hljs-number">9</span>]; <span class="hljs-meta">@Component</span> <span class="hljs-string">'GrandChild'</span>[<span class="hljs-number">10</span>], <span class="hljs-title class_">Text</span>[<span class="hljs-number">12</span>]</li><li>
</li><li><span class="hljs-title class_">Registered</span> <span class="hljs-title class_">Element</span> <span class="hljs-title class_">IDs</span>:</li><li>
</li><li>|--<span class="hljs-title class_">Child</span>[<span class="hljs-number">7</span>]: {</li><li>    <span class="hljs-title class_">Column</span>[<span class="hljs-number">8</span>]</li><li>    <span class="hljs-title class_">Text</span>[<span class="hljs-number">9</span>]</li><li>    <span class="hljs-title class_">GrandChild</span>[<span class="hljs-number">10</span>]</li><li>  }[<span class="hljs-number">3</span>]</li><li>
</li><li><span class="hljs-title class_">Dirty</span> <span class="hljs-title class_">Registered</span> <span class="hljs-title class_">Element</span> <span class="hljs-title class_">IDs</span>:</li><li>
</li><li>|--<span class="hljs-title class_">Child</span>[<span class="hljs-number">7</span>]: {</li><li>  }[<span class="hljs-number">0</span>]</li></ol></pre></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="状态管理profiler调优能力">状态管理Profiler调优能力<i class="anchor-icon anchor-icon-link" anchorid="状态管理profiler调优能力" tips="复制节点链接"></i></h3>          <p>DevEco Studio的Profiler工具可抓取状态变量的变化打点。在Profiler工具中选择ArkUI，则抓取ArkUI State泳道。该泳道主要展示录制期间有哪些状态变量发生变化，和其会触发哪些关联组件刷新，以便开发者根据状态变量关联组件的数量分析当前场景内的更新负载。</p>     <p>状态管理在Profiler工具中，会展示如下信息内容：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.4.1.3.1.1" valign="top" width="50%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.4.1.3.1.2" valign="top" width="50%">含义</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">Start Time</td>         <td class="cellrowborder" valign="top" width="50%">状态变量修改的时间</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">Attributes</td>         <td class="cellrowborder" valign="top" width="50%">状态变量的属性名</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">Owned by Component</td>         <td class="cellrowborder" valign="top" width="50%">状态变量所属自定义组件名</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">Owned by Class</td>         <td class="cellrowborder" valign="top" width="50%">状态变量所属类名</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">Property Type</td>         <td class="cellrowborder" valign="top" width="50%">状态变量装饰器名称</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">Current Values</td>         <td class="cellrowborder" valign="top" width="50%">状态变量当前值</td>        </tr>             </tbody></table></div>     </div>     <p>录制ArkUI State泳道图步骤如下：</p>     <p>步骤1：点击ArkUI模板创建session，并启动录制。录制过程中点击第一个Text组件，修改状态变量@State message为hello world1，通知其同步对象@Link message的变更，及其关联组件的刷新。</p>     <p>步骤2： 录制结束等待数据处理完成，ArkUI State泳道会记录状态变量变化的事件打点。</p>     <p><strong>图1</strong> 录制ArkUI State泳道流程示意图</p>     <p><span><img originheight="787" originwidth="1888" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114741.42525465667587256463782949079795:50001231000000:2800:5D217962CE6BCC77D7AC460AB9256E2E841DB2917E1CBE2CA069F8C2365C05C0.gif" width="920" height="383.4957627118644"></span></p>     <p>步骤3：选中状态变量变化的打点，将显示当前状态变量更新触发了哪些组件的刷新，以及对应组件的创建、测量和布局的耗时。</p>     <p><strong>图2</strong> ArkUI State泳道图示意图</p>     <p><span><img originheight="742" originwidth="1892" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114741.32487091900228005219283617907158:50001231000000:2800:8EE7C63F888A7C27FA980E7F2D403E3C23669334DCCFC08C2F8E5575FF61EF1F.png" width="920" height="360.8033826638478"></span></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>由于隐私安全政策，已上架应用市场的应用不支持录制ArkUI State泳道。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="状态管理inspector调试能力">状态管理Inspector调试能力<i class="anchor-icon anchor-icon-link" anchorid="状态管理inspector调试能力" tips="复制节点链接"></i></h3>          <p>DevEco Studio的ArkUI Inspector可以显示当前页面自定义组件内的状态变量的详细信息，具体包括以下内容。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.3.1.1" valign="top" width="50%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.3.1.2" valign="top" width="50%">含义</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">decorator</td>         <td class="cellrowborder" valign="top" width="50%">自定义组件内状态变量装饰器，如@State、@Link等。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">name</td>         <td class="cellrowborder" valign="top" width="50%">自定义组件内状态变量的属性名，如@State message: string = 'hello world';中message。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">value</td>         <td class="cellrowborder" valign="top" width="50%">当前状态变量值。对于超长或者嵌套多层的复杂类型会进行截断。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">mode</td>         <td class="cellrowborder" valign="top" width="50%">          <p>状态变量观察模式，包括：</p>          <p>Compatible Mode：状态管理V1状态变量，且其装饰变量的类型没有<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-track">@Track</a>装饰的属性。</p>          <p>Track Mode：状态管理V1状态变量，且其装饰的类型有@Track装饰的属性。</p>          <p>V2：状态管理V2状态变量。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">elmtIds</td>         <td class="cellrowborder" valign="top" width="50%">          <p>状态变量关联的组件。声明式UI语法规则中，状态会驱动UI刷新。</p>          <p>目前状态管理可以做到组件级别的更新，即状态变量变化后仅会触发使用该变量的组件的刷新。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">syncPeers</td>         <td class="cellrowborder" valign="top" width="50%">状态变量同步对象，仅限状态管理V1的状态变量。例如@State的同步对象为@Link。</td>        </tr>             </tbody></table></div>     </div>     <p>打开ArkUI Inspector展示@Component Page自定义组件状态变量相关信息如下。</p>     <p><strong>图3</strong> ArkUI Inspector显示状态变量相关信息</p>     <p><span><img originheight="657" originwidth="1874" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114741.40316356880266080082073855256615:50001231000000:2800:3EC7BC07FA0E3B10CB03B49F19506FCFF62E5DE54E2D490F40EAA677A04723A8.png" width="920" height="322.54002134471716"></span></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>由于隐私安全政策，已上架应用市场的应用不支持使用ArkUI Inspector。</p>      </div></div></div>     <p>以上主要介绍了状态管理的hidumper、调试与调优能力，这些工具方便开发者调测，有助于提升开发高性能应用的效率。</p>    </div>    <div class="tiledSection">     <h2 id="trace调试能力">Trace调试能力<i class="anchor-icon anchor-icon-link" anchorid="trace调试能力" tips="复制节点链接"></i></h2>          <p>ArkUI内部针对关键的UI处理流程添加了Trace信息，帮助开发者通过Trace工具观测应用的UI耗时，辅助定位问题。详细Trace说明及案例参考：<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-optimization-overview#section085643405116" target="_blank">常用Trace使用指导</a>。</p>    </div>    <div class="tiledSection">     <h2 id="inspector调试能力">Inspector调试能力<i class="anchor-icon anchor-icon-link" anchorid="inspector调试能力" tips="复制节点链接"></i></h2>          <p>ArkUI Inspector是DevEco Studio内置的页面布局检查工具，帮助开发者查看应用的UI层级结构、组件属性和布局效果。详细Inspector使用方法及案例参考：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-arkui-inspector" target="_blank">页面布局检查器ArkUI Inspector使用指导</a>。</p>    </div>   </div>   <div></div></div>