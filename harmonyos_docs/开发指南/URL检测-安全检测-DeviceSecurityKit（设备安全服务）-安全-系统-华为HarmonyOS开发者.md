<h1 _ngcontent-nqf-c119="" class="doc-title ng-star-inserted" title="URL检测"> URL检测 </h1>

<div _ngcontent-nqf-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section1880231055910">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section1880231055910" tips="复制节点链接"></i></h2>          <p>应用通过调用Device Security Kit的checkUrlThreat接口检测URL是否为恶意的，并且根据检测结果来提示或拦截该URL。</p>     <p>典型场景：用户访问网址时，判断用户访问的URL是否为恶意网址，对于恶意网址，提示或拦截用户的访问风险。</p>    </div>    <div class="tiledSection">     <h2 id="section9684181513312">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="section9684181513312" tips="复制节点链接"></i></h2>          <ul>      <li>URL检测能力支持Phone、Tablet、PC/2in1设备。并且从5.1.0(18)版本开始，新增支持Wearable设备。</li>      <li>每个应用在每个设备上每天最多可以调用1万次接口；每个设备上最多支持5个并发调用。</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="section1818915573916">业务流程<i class="anchor-icon anchor-icon-link" anchorid="section1818915573916" tips="复制节点链接"></i></h2>          <p><span><img height="423.97852749301023" originheight="512" originwidth="1111" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115037.75942650641528074421873741775567:50001231000000:2800:3728E6D6C903AC00CAD7F8EDE7E8B6750B301ED9114497EF703C914FE1783011.png" title="点击放大" width="920"></span></p>    </div>    <p><strong>流程说明：</strong></p>    <ol>     <li>开发者应用调用URL检测（checkUrlThreat）接口，传入待检测的URL，并获得URL检测结果。      <p>Device Security kit将请求发送到华为服务器检测URL风险，并将检测结果返回给您的应用（NORMAL、PHISHING、MALWARE、OTHERS）。</p></li>     <li>开发者应用可以根据检测结果来决定业务处理策略。</li>    </ol>    <div class="tiledSection">     <h2 id="section5906121818412">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section5906121818412" tips="复制节点链接"></i></h2>          <p>以下是URL检测相关接口，包括ArkTS API，更多接口及使用方法请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi" target="_blank">API参考</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.3.1.1" valign="top" width="38.92%">          <p>接口名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.3.1.2" valign="top" width="61.08%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="38.92%">          <p>checkUrlThreat(req: UrlCheckRequest): Promise&lt;UrlCheckResponse&gt;</p></td>         <td class="cellrowborder" valign="top" width="61.08%">          <p>检测URL风险</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section9187179113620">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section9187179113620" tips="复制节点链接"></i></h2>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>请确保已打开“<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/devicesecurity-deviceverify-activateservice#li19804214204811">安全检测服务</a>”开关并<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-debug-profile-0000002248181278" target="_blank">申请Profile</a>。</p>      </div></div></div>     <ol>      <li><span>导入Device Security Kit模块及相关公共模块。</span>       <p></p>       <div _ngcontent-nqf-c106="" class="highlight-div"><div _ngcontent-nqf-c106="" class="highlight-div-header"><div _ngcontent-nqf-c106="" class="highlight-div-header-left"><div _ngcontent-nqf-c106="" class="handle-button expand-button"><div _ngcontent-nqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nqf-c106="" class="highlight-div-header-right"><div _ngcontent-nqf-c106="" class="handle-button ai-button"></div><div _ngcontent-nqf-c106="" class="handle-button line-button"><div _ngcontent-nqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nqf-c106="" class="handle-button theme-button"><div _ngcontent-nqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nqf-c106="" class="handle-button copy-button"><div _ngcontent-nqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { safetyDetect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li></ol></pre></div></div>       <p></p></li>      <li><span>调用接口获取URL检测结果。</span>       <p></p>       <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">         <p>该接口涉及端云协同，需要联网等耗时操作，因此不要在UI线程中执行，避免阻塞UI线程。</p>        </div></div></div>       <div _ngcontent-nqf-c106="" class="highlight-div"><div _ngcontent-nqf-c106="" class="highlight-div-header"><div _ngcontent-nqf-c106="" class="highlight-div-header-left"><div _ngcontent-nqf-c106="" class="handle-button expand-button"><div _ngcontent-nqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nqf-c106="" class="highlight-div-header-right"><div _ngcontent-nqf-c106="" class="handle-button ai-button"></div><div _ngcontent-nqf-c106="" class="handle-button line-button"><div _ngcontent-nqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nqf-c106="" class="handle-button theme-button"><div _ngcontent-nqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nqf-c106="" class="handle-button copy-button"><div _ngcontent-nqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nqf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"SafetyDetectJsTest"</span>;</li><li>
</li><li><span class="hljs-comment">// 请求URL检测，并处理结果</span></li><li><span class="hljs-keyword">let</span> req : safetyDetect.<span class="hljs-property">UrlCheckRequest</span> = {</li><li>  urls : [<span class="hljs-string">'https://test1.com'</span>]</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'CheckUrlThreat begin.'</span>);</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: safetyDetect.<span class="hljs-property">UrlCheckResponse</span> = <span class="hljs-keyword">await</span> safetyDetect.<span class="hljs-title function_">checkUrlThreat</span>(req);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'Succeeded in checkUrlThreat: %{public}s %{public}d'</span>, data.<span class="hljs-property">results</span>[<span class="hljs-number">0</span>].<span class="hljs-property">url</span>, data.<span class="hljs-property">results</span>[<span class="hljs-number">0</span>].<span class="hljs-property">threat</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'CheckUrlThreat failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>       <p></p></li>     </ol>    </div>   </div>   <div></div></div>