<h1 _ngcontent-qqj-c119="" class="doc-title ng-star-inserted" title="USB串口通信服务开发概述"> USB串口通信服务开发概述 </h1>

<div _ngcontent-qqj-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="简介">简介<i class="anchor-icon anchor-icon-link" anchorid="简介" tips="复制节点链接"></i></h2><p>USB串口通信服务主要提供USB Host设备转串口协议通信的功能，它提供获取遵循USB Host转串口标准协议的已连接的端口列表，同时提供打开端口、关闭端口、设置参数、获取参数、读取数据、写入数据和设备权限管理这些基本功能。</p> <p>USB串口通信服务，配置管理请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/usbserial-configuration">USB串口配置管理</a>，通信管理请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/usbserial-communication">USB串口通信管理</a>。</p> </div>  <div class="tiledSection"><h3 id="基本概念" class="firsth2">基本概念<i class="anchor-icon anchor-icon-link" anchorid="基本概念" tips="复制节点链接"></i></h3><p>在进行USB串口通信服务开发时，开发者应了解以下基本概念：</p> <ul><li><p>串口</p>  <p>即串行接口或串行通讯接口，是采用串行通信方式的扩展接口。串行接口中数据是一位一位地顺序传送。串口特点是通信线路简单，只要一对传输线就可以实现双向通信，适用于远距离通信。</p>  </li></ul> </div>  <div class="tiledSection"><h3 id="实现原理">实现原理<i class="anchor-icon anchor-icon-link" anchorid="实现原理" tips="复制节点链接"></i></h3><p>USB串口服务主要包括两个阶段：</p> <ul><li><p>识别设备并加载驱动。</p>  <p>插入USB转串口设备后，USB Host设备通过USB总线发起枚举过程，获取设备描述符（如厂商ID、设备ID、USB通信设备类标识）。操作系统根据描述符匹配驱动，完成设备初始化和虚拟串口注册。</p>  </li><li><p>收发数据。</p>  <p>发送方向：</p> <p>应用层发送数据 → 驱动通过USB通道传输至设备 → 设备解析数据并通过物理串口发送给串口设备。</p>  <p>接收方向：</p> <p>设备接收物理串口数据 → 数据打包后上传至USB Host设备 → 驱动接收数据并存入串口缓冲区 → 应用层读取数据。</p>  </li></ul> <p><strong>图1</strong> USB串口收发数据流程</p> <p><span><img originheight="453" originwidth="569" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115059.99708839465396080266101854331163:50001231000000:2800:16600EF5060F80EC86E68B620F9D24FF239E7BB4D13F27209833DC3B0CA85288.png" width="569" height="453"></span></p> </div>  <div class="tiledSection"><h3 id="约束和限制">约束和限制<i class="anchor-icon anchor-icon-link" anchorid="约束和限制" tips="复制节点链接"></i></h3><ul><li><p>Host设备与串口设备进行数据传输前，需先申请访问设备的权限，用户授权之后才可以传输数据。</p>  </li><li><p>数据传输时若开发者未主动设置配置参数，则使用默认配置参数（波特率：9600bps，数据位：8，校验位：0，停止位：1）。</p>  </li></ul> </div>  <div class="tiledSection"><h2 id="环境准备">环境准备<i class="anchor-icon anchor-icon-link" anchorid="环境准备" tips="复制节点链接"></i></h2></div>  <div class="tiledSection"><h3 id="环境要求" class="firsth2">环境要求<i class="anchor-icon anchor-icon-link" anchorid="环境要求" tips="复制节点链接"></i></h3><ul><li><p>开发工具及配置：</p>  <p>DevEco Studio作为开发工具，是进行USB串口通信服务开发必备条件之一，开发者可以使用该工具进行开发、调试、打包等操作。请<a href="https://developer.huawei.com/consumer/cn/download/" target="_blank">下载安装</a>该工具，并参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/ide-tools-overview-V14" target="_blank">DevEco Studio使用指南</a>中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/ide-create-new-project-V14" target="_blank">创建工程及运行</a>进行基本的操作验证，保证DevEco Studio可正常运行。</p>  </li><li><p>SDK版本配置：</p>  <p>本模块提供的ArkTs接口，所需SDK版本为API19及以上才可使用。</p>  </li></ul> </div>  <div class="tiledSection"><h3 id="搭建环境">搭建环境<i class="anchor-icon anchor-icon-link" anchorid="搭建环境" tips="复制节点链接"></i></h3><ul><li>在PC上安装<a href="https://developer.huawei.com/consumer/cn/download/deveco-studio" target="_blank">DevEco Studio</a>，要求版本在4.1及以上。</li><li>将public-SDK更新到API 19或以上。</li><li>准备一根USB转串口线缆，线缆的USB接口连接到HarmonyOS设备USB端口（该端口需支持USB转串口），线缆的串口接口连接到目标设备的串口上。</li></ul> </div> </div> <div></div></div>