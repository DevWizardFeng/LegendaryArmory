<h1 _ngcontent-iew-c119="" class="doc-title ng-star-inserted" title="Web组件对接软键盘"> Web组件对接软键盘 </h1>

<div _ngcontent-iew-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>开发者能够通过Web组件对接软键盘，来处理系统软键盘的显示与交互问题，同时实现软键盘的自定义功能。主要有以下场景：</p>    <ul>     <li>拉起系统软键盘输入文字：点击网页输入框时，屏幕下方将弹出系统默认的软键盘。开发者可以通过软键盘输入文字，输入的内容会显示在输入框中。</li>     <li>自定义系统软键盘的回车键类型：设置不同的回车键类型，例如：确认、下一个和提交。</li>     <li>软键盘避让：在移动设备上，由于输入法通常显示在屏幕下方区域，应用可设置不同的Web页面软键盘避让模式，来避让软键盘。例如：平移、调整大小和不避让。</li>     <li>自定义软键盘输入：在移动设备上，可以使用自绘制输入法在Web页面输入，以此替代系统软键盘。</li>    </ul>    <div class="tiledSection">     <h2 id="web页面输入框输入与软键盘交互的w3c标准支持">Web页面输入框输入与软键盘交互的W3C标准支持<i class="anchor-icon anchor-icon-link" anchorid="web页面输入框输入与软键盘交互的w3c标准支持" tips="复制节点链接"></i></h2>          <p>为支持Web页面与系统软键盘、自定义软键盘等的良好交互，ArkWeb遵循并实现了W3C规范中的以下输入控制属性：</p>     <ul>      <li>       <p>type属性</p>       <p>type属性定义了input元素的类型，影响输入的验证、显示方式和键盘类型。常见的type值包括：</p>       <div class="tablenoborder">        <div class="tbBox"><table class="layoutFixed idpTab">         <thead>          <tr>           <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.3.1.1" valign="top" width="50%">type值</th>           <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.3.1.2" valign="top" width="50%">描述</th>          </tr>         </thead>                   <tbody><tr>           <td class="cellrowborder" valign="top" width="50%">text</td>           <td class="cellrowborder" valign="top" width="50%">默认值。普通文本输入</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">number</td>           <td class="cellrowborder" valign="top" width="50%">数字输入</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">email</td>           <td class="cellrowborder" valign="top" width="50%">电子邮件地址输入</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">password</td>           <td class="cellrowborder" valign="top" width="50%">密码输入</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">tel</td>           <td class="cellrowborder" valign="top" width="50%">电话号码输入</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">url</td>           <td class="cellrowborder" valign="top" width="50%">URL输入</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">date</td>           <td class="cellrowborder" valign="top" width="50%">日期选择器</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">time</td>           <td class="cellrowborder" valign="top" width="50%">时间选择器</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">checkbox</td>           <td class="cellrowborder" valign="top" width="50%">复选框</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">radio</td>           <td class="cellrowborder" valign="top" width="50%">单选按钮</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">file</td>           <td class="cellrowborder" valign="top" width="50%">文件上传</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">submit</td>           <td class="cellrowborder" valign="top" width="50%">提交按钮</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">reset</td>           <td class="cellrowborder" valign="top" width="50%">重置按钮</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">button</td>           <td class="cellrowborder" valign="top" width="50%">普通按钮</td>          </tr>                 </tbody></table></div>       </div></li>      <li>       <p>inputmode属性</p>       <p>inputmode属性用于配置输入法类型，默认值：text。</p>       <div class="tablenoborder">        <div class="tbBox"><table class="layoutFixed idpTab">         <thead>          <tr>           <th align="left" class="cellrowborder" id="mcps1.3.3.3.2.3.1.3.1.1" valign="top" width="50%">inputmode</th>           <th align="left" class="cellrowborder" id="mcps1.3.3.3.2.3.1.3.1.2" valign="top" width="50%">描述</th>          </tr>         </thead>                   <tbody><tr>           <td class="cellrowborder" valign="top" width="50%">decimal</td>           <td class="cellrowborder" valign="top" width="50%">只显示数字键盘，通常还有一个逗号键。</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">email</td>           <td class="cellrowborder" valign="top" width="50%">文本键盘，键通常用于电子邮件地址，如[@]。</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">none</td>           <td class="cellrowborder" valign="top" width="50%">不应出现键盘。</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">numeric</td>           <td class="cellrowborder" valign="top" width="50%">只显示数字键盘。</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">search</td>           <td class="cellrowborder" valign="top" width="50%">文本键盘，[enter]键通常显示为[go]。</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">tel</td>           <td class="cellrowborder" valign="top" width="50%">只显示数字键盘，通常还有[+]、[*]和[#]键。</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">text</td>           <td class="cellrowborder" valign="top" width="50%">默认文本键盘。</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">url</td>           <td class="cellrowborder" valign="top" width="50%">文本键盘，键通常用于网址，如[.]和[/]，以及特殊的[.com]键，或者其他通常用于本地设置的域名结束符。</td>          </tr>                 </tbody></table></div>       </div></li>      <li>       <p>enterkeyhint属性</p>       <p>enterkeyhint属性用于指定移动设备虚拟键盘上回车键的显示方式。</p>       <div class="tablenoborder">        <div class="tbBox"><table class="layoutFixed idpTab">         <thead>          <tr>           <th align="left" class="cellrowborder" id="mcps1.3.3.3.3.3.1.3.1.1" valign="top" width="50%">enterkeyhint值</th>           <th align="left" class="cellrowborder" id="mcps1.3.3.3.3.3.1.3.1.2" valign="top" width="50%">描述</th>          </tr>         </thead>                   <tbody><tr>           <td class="cellrowborder" valign="top" width="50%">enter</td>           <td class="cellrowborder" valign="top" width="50%">显示默认的回车键</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">done</td>           <td class="cellrowborder" valign="top" width="50%">表示输入完成</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">go</td>           <td class="cellrowborder" valign="top" width="50%">表示跳转或执行</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">next</td>           <td class="cellrowborder" valign="top" width="50%">进入下一个输入字段</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">previous</td>           <td class="cellrowborder" valign="top" width="50%">返回上一个输入字段</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">search</td>           <td class="cellrowborder" valign="top" width="50%">执行搜索</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">send</td>           <td class="cellrowborder" valign="top" width="50%">发送信息</td>          </tr>                 </tbody></table></div>       </div></li>     </ul>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>点击网页输入框时，屏幕下方将弹出系统默认的软键盘，用户可以进行文字输入。</p>       <p>type属性影响键盘显示、输入验证和元素外观。</p>       <p>inputmode优化移动设备键盘输入体验，不影响基本行为或验证。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="软键盘自动弹出">软键盘自动弹出<i class="anchor-icon anchor-icon-link" anchorid="软键盘自动弹出" tips="复制节点链接"></i></h2>          <p>为提升用户体验，可以在页面完成加载后，输入框自动获焦并弹出软键盘。通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inputmethod#showtextinput10" target="_blank">showTextInput()</a>设置软键盘自动弹出功能。</p>     <div _ngcontent-iew-c106="" class="highlight-div"><div _ngcontent-iew-c106="" class="highlight-div-header"><div _ngcontent-iew-c106="" class="highlight-div-header-left"><div _ngcontent-iew-c106="" class="handle-button expand-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iew-c106="" class="highlight-div-header-right"><div _ngcontent-iew-c106="" class="handle-button ai-button"></div><div _ngcontent-iew-c106="" class="handle-button line-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iew-c106="" class="handle-button theme-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iew-c106="" class="handle-button copy-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iew-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>测试网页<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>DEMO<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"input_a"</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>     <div _ngcontent-iew-c106="" class="highlight-div"><div _ngcontent-iew-c106="" class="highlight-div-header"><div _ngcontent-iew-c106="" class="highlight-div-header-left"><div _ngcontent-iew-c106="" class="handle-button expand-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iew-c106="" class="highlight-div-header-right"><div _ngcontent-iew-c106="" class="handle-button ai-button"></div><div _ngcontent-iew-c106="" class="handle-button line-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iew-c106="" class="handle-button theme-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iew-c106="" class="handle-button copy-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iew-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">//Index.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { inputMethod } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IMEKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>})</li><li>        .<span class="hljs-title function_">onPageEnd</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">runJavaScript</span>(<span class="hljs-string">`document.getElementById('input_a').focus()`</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              inputMethod.<span class="hljs-title function_">getController</span>().<span class="hljs-title function_">showTextInput</span>();</li><li>            }, <span class="hljs-number">10</span>);</li><li>          });</li><li>        });</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="设置软键盘避让模式">设置软键盘避让模式<i class="anchor-icon anchor-icon-link" anchorid="设置软键盘避让模式" tips="复制节点链接"></i></h2>          <p>在移动设备上，支持设置Web页面的软键盘避让模式。</p>     <ol>      <li>在应用代码中设置UIContext的软键盘避让模式<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-expand-safe-area#setkeyboardavoidmode11" target="_blank">setKeyboardAvoidMode()</a>。ArkWeb组件支持Resize和Offset两种模式。</li>     </ol>     <ul>      <li>Resize模式下，应用窗口高度可缩小避开软键盘，ArkWeb组件跟随ArkUI重新布局。</li>      <li>Offset模式下（以及默认模式），应用窗口高度不变，ArkWeb组件根据自身的避让模式进行避让。</li>     </ul>     <p>（1）设置UIContext的软键盘避让模式。</p>     <div _ngcontent-iew-c106="" class="highlight-div"><div _ngcontent-iew-c106="" class="highlight-div-header"><div _ngcontent-iew-c106="" class="highlight-div-header-left"><div _ngcontent-iew-c106="" class="handle-button expand-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iew-c106="" class="highlight-div-header-right"><div _ngcontent-iew-c106="" class="handle-button ai-button"></div><div _ngcontent-iew-c106="" class="handle-button line-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iew-c106="" class="handle-button theme-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iew-c106="" class="handle-button copy-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iew-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">KeyboardAvoidMode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Ability onWindowStageCreate'</span>);</li><li>
</li><li>  windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> keyboardAvoidMode = windowStage.<span class="hljs-title function_">getMainWindowSync</span>().<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getKeyboardAvoidMode</span>();</li><li>    <span class="hljs-comment">// 设置虚拟键盘抬起时压缩页面大小为减去键盘的高度</span></li><li>  windowStage.<span class="hljs-title function_">getMainWindowSync</span>().<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">setKeyboardAvoidMode</span>(<span class="hljs-title class_">KeyboardAvoidMode</span>.<span class="hljs-property">RESIZE</span>);</li><li>    <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to load the content. Cause: %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err) ?? <span class="hljs-string">''</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Succeeded in loading the content. Data: %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data) ?? <span class="hljs-string">''</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>     <p>（2）在Web组件中调起软键盘。</p>     <div _ngcontent-iew-c106="" class="highlight-div"><div _ngcontent-iew-c106="" class="highlight-div-header"><div _ngcontent-iew-c106="" class="highlight-div-header-left"><div _ngcontent-iew-c106="" class="handle-button expand-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iew-c106="" class="highlight-div-header-right"><div _ngcontent-iew-c106="" class="handle-button ai-button"></div><div _ngcontent-iew-c106="" class="handle-button line-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iew-c106="" class="handle-button theme-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iew-c106="" class="handle-button copy-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iew-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>测试网页<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>DEMO<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"input_a"</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>     <div _ngcontent-iew-c106="" class="highlight-div"><div _ngcontent-iew-c106="" class="highlight-div-header"><div _ngcontent-iew-c106="" class="highlight-div-header-left"><div _ngcontent-iew-c106="" class="handle-button expand-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iew-c106="" class="highlight-div-header-right"><div _ngcontent-iew-c106="" class="handle-button ai-button"></div><div _ngcontent-iew-c106="" class="handle-button line-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iew-c106="" class="handle-button theme-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iew-c106="" class="handle-button copy-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iew-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">//Index.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">KeyboardAvoidExample</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>().<span class="hljs-title function_">height</span>(<span class="hljs-string">"50%"</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>)</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>),<span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>})</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"I can see the bottom of the page"</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>).<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>).<span class="hljs-title function_">layoutWeight</span>(<span class="hljs-number">1</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>ArkWeb组件将跟随ArkUI重新布局，效果如图1和图2所示。</p>     <p><strong>图1</strong> Web组件网页默认软键盘避让模式</p>     <p><span><img originheight="597" originwidth="271" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114734.11270785095533517930309510885684:50001231000000:2800:EABEDB3359C0CF03324107744FC56E2E12C3DD43E6F8C3271114AED7B71F07D2.png" class="notEnlarge" width="271" height="597"></span></p>     <p><strong>图2</strong> Web组件网页跟随Arkui软键盘避让模式</p>     <p><span><img originheight="598" originwidth="273" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114734.69696557921039257913444760320036:50001231000000:2800:84755D5406C0DFBEE1854C16035831A671234F70757DB7DE5F19D2E0CFC4E801.png" class="notEnlarge" width="273" height="598"></span></p>     <p>2.在UIContext的键盘避让模式为Offset模式时，应用可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-e#webkeyboardavoidmode12" target="_blank">WebKeyboardAvoidMode()</a>设置ArkWeb组件的键盘避让模式。Web组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-e#webkeyboardavoidmode12" target="_blank">WebKeyboardAvoidMode()</a>接口优先级高于W3C侧virtualKeyboard.overlayContens。</p>     <ul>      <li>RESIZE_VISUAL：仅调整可视视口的大小，而不调整布局视口的大小。</li>      <li>RESIZE_CONTENT：调整视觉视口和布局视口的大小。</li>      <li>OVERLAYS_CONTENT：不调整任何视口的大小，获焦input元素没有滚动到可视区域的行为。</li>     </ul>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>可视视口指用户正在看到的网站的区域，该区域的宽度等于移动设备的浏览器窗口的宽度。</p>       <p>布局视口指网页本身的宽度。</p>      </div></div></div>     <p>在应用代码中设置ArkWeb的软键盘避让模式。</p>     <div _ngcontent-iew-c106="" class="highlight-div"><div _ngcontent-iew-c106="" class="highlight-div-header"><div _ngcontent-iew-c106="" class="highlight-div-header-left"><div _ngcontent-iew-c106="" class="handle-button expand-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iew-c106="" class="highlight-div-header-right"><div _ngcontent-iew-c106="" class="handle-button ai-button"></div><div _ngcontent-iew-c106="" class="handle-button line-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iew-c106="" class="handle-button theme-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iew-c106="" class="handle-button copy-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iew-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">KeyboardAvoidExample</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>().<span class="hljs-title function_">height</span>(<span class="hljs-string">"50%"</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>)</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>),<span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>})</li><li>        .<span class="hljs-title function_">keyboardAvoidMode</span>(<span class="hljs-title class_">WebKeyboardAvoidMode</span>.<span class="hljs-property">OVERLAYS_CONTENT</span>) <span class="hljs-comment">//此时ArkWeb组件不会调整任何视口的大小。</span></li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"I can see the bottom of the page"</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>).<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>).<span class="hljs-title function_">layoutWeight</span>(<span class="hljs-number">1</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>ArkWeb组件根据避让模式进行避让，效果见图3。</p>     <p><strong>图3</strong> Web组件网页自身软键盘避让模式</p>     <p><span><img originheight="601" originwidth="271" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114734.89186498308312212060510447646148:50001231000000:2800:D28C90AA36543A0E912F8B6E11C249081A86C0719C58F6ABCBC7670EF5151AC7.png" class="notEnlarge" width="271" height="601"></span></p>     <p>3.在软键盘弹出时，为使Web组件不发生避让行为，可通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-expand-safe-area#expandsafearea" target="_blank">expandSafeArea()</a>设置Web组件扩展安全区域。更多详细示例可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-safe-area-insets">网页中安全区域计算和避让适配</a>。</p>     <div _ngcontent-iew-c106="" class="highlight-div"><div _ngcontent-iew-c106="" class="highlight-div-header"><div _ngcontent-iew-c106="" class="highlight-div-header-left"><div _ngcontent-iew-c106="" class="handle-button expand-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iew-c106="" class="highlight-div-header-right"><div _ngcontent-iew-c106="" class="handle-button ai-button"></div><div _ngcontent-iew-c106="" class="handle-button line-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iew-c106="" class="handle-button theme-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iew-c106="" class="handle-button copy-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iew-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">expandSafeArea</span>([<span class="hljs-title class_">SafeAreaType</span>.<span class="hljs-property">KEYBOARD</span>, <span class="hljs-title class_">SafeAreaType</span>.<span class="hljs-property">SYSTEM</span>])</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>与其他Web组件行为的交互场景：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.26.1.3.1.1" valign="top" width="50%">交叉场景</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.26.1.3.1.2" valign="top" width="50%">规格</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">同层渲染</td>         <td class="cellrowborder" valign="top" width="50%">          <p>同层Web：软键盘避让方式与普通场景相同。</p>          <p>同层系统组件：由ArkUI负责软键盘避让模式。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">离屏创建组件</td>         <td class="cellrowborder" valign="top" width="50%">默认使用与非离屏创建一致的软键盘避让模式，在添加至组件树前设置其他避让模式即可生效。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">customDialog</td>         <td class="cellrowborder" valign="top" width="50%">customDialog自身避让。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">折叠屏</td>         <td class="cellrowborder" valign="top" width="50%">软键盘避让行为与普通场景行为一致。屏幕软键盘将根据屏幕开合状态进行调整。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">软键盘托管</td>         <td class="cellrowborder" valign="top" width="50%">软键盘避让行为与普通场景行为一致。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">Web嵌套滚动</td>         <td class="cellrowborder" valign="top" width="50%">在嵌套滚动场景下，建议不要使用Web软键盘避让，包括RESIZE_VISUAL和RESIZE_CONTENT。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="拦截系统软键盘与自定义软键盘输入">拦截系统软键盘与自定义软键盘输入<i class="anchor-icon anchor-icon-link" anchorid="拦截系统软键盘与自定义软键盘输入" tips="复制节点链接"></i></h2>          <p>应用可以通过监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#oninterceptkeyboardattach12" target="_blank">onInterceptKeyboardAttach</a>回调，在软键盘拉起前，控制软键盘的显示，包括系统默认软键盘、带有特定Enter键的软键盘，或完全自定义软键盘。借助这一功能，开发者能够实现对软键盘的灵活管理。</p>     <ul>      <li>使用系统默认软键盘</li>      <li>使用带有定制Enter键的系统软键盘</li>      <li>使用完全由应用程序自定义的软键盘</li>     </ul>     <div _ngcontent-iew-c106="" class="highlight-div"><div _ngcontent-iew-c106="" class="highlight-div-header"><div _ngcontent-iew-c106="" class="highlight-div-header-left"><div _ngcontent-iew-c106="" class="handle-button expand-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iew-c106="" class="highlight-div-header-right"><div _ngcontent-iew-c106="" class="handle-button ai-button"></div><div _ngcontent-iew-c106="" class="handle-button line-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iew-c106="" class="handle-button theme-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iew-c106="" class="handle-button copy-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iew-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li>  <span class="hljs-comment">// Index.ets</span></li><li>  <span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>  <span class="hljs-keyword">import</span> { inputMethodEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IMEKit'</span>;</li><li>
</li><li>  <span class="hljs-meta">@Entry</span></li><li>  <span class="hljs-meta">@Component</span></li><li>  struct <span class="hljs-title class_">WebComponent</span> {</li><li>    <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>    <span class="hljs-attr">webKeyboardController</span>: <span class="hljs-title class_">WebKeyboardController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebKeyboardController</span>();</li><li>    <span class="hljs-attr">inputAttributeMap</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([</li><li>        [<span class="hljs-string">'UNSPECIFIED'</span>, inputMethodEngine.<span class="hljs-property">ENTER_KEY_TYPE_UNSPECIFIED</span>],</li><li>        [<span class="hljs-string">'GO'</span>, inputMethodEngine.<span class="hljs-property">ENTER_KEY_TYPE_GO</span>],</li><li>        [<span class="hljs-string">'SEARCH'</span>, inputMethodEngine.<span class="hljs-property">ENTER_KEY_TYPE_SEARCH</span>],</li><li>        [<span class="hljs-string">'SEND'</span>, inputMethodEngine.<span class="hljs-property">ENTER_KEY_TYPE_SEND</span>],</li><li>        [<span class="hljs-string">'NEXT'</span>, inputMethodEngine.<span class="hljs-property">ENTER_KEY_TYPE_NEXT</span>],</li><li>        [<span class="hljs-string">'DONE'</span>, inputMethodEngine.<span class="hljs-property">ENTER_KEY_TYPE_DONE</span>],</li><li>        [<span class="hljs-string">'PREVIOUS'</span>, inputMethodEngine.<span class="hljs-property">ENTER_KEY_TYPE_PREVIOUS</span>]</li><li>      ])</li><li>
</li><li>      <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">       * 自定义键盘组件Builder</span></li><li><span class="hljs-comment">       */</span></li><li>      <span class="hljs-meta">@Builder</span></li><li>      <span class="hljs-title function_">customKeyboardBuilder</span>(<span class="hljs-params"></span>) {</li><li>          <span class="hljs-comment">// 这里实现自定义键盘组件，对接WebKeyboardController实现输入、删除、关闭等操作。</span></li><li>        <span class="hljs-title class_">Row</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">"完成"</span>)</li><li>            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>            .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">webKeyboardController</span>.<span class="hljs-title function_">close</span>();</li><li>            })</li><li>          <span class="hljs-comment">// 插入字符。</span></li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">"insertText"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webKeyboardController</span>.<span class="hljs-title function_">insertText</span>(<span class="hljs-string">'insert '</span>);</li><li>          }).<span class="hljs-title function_">margin</span>({</li><li>            <span class="hljs-attr">bottom</span>: <span class="hljs-number">200</span>,</li><li>          })</li><li>          <span class="hljs-comment">// 从后往前删除length参数指定长度的字符。</span></li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">"deleteForward"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webKeyboardController</span>.<span class="hljs-title function_">deleteForward</span>(<span class="hljs-number">1</span>);</li><li>          }).<span class="hljs-title function_">margin</span>({</li><li>            <span class="hljs-attr">bottom</span>: <span class="hljs-number">200</span>,</li><li>          })</li><li>          <span class="hljs-comment">// 从前往后删除length参数指定长度的字符。</span></li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">"deleteBackward"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webKeyboardController</span>.<span class="hljs-title function_">deleteBackward</span>(<span class="hljs-number">1</span>);</li><li>          }).<span class="hljs-title function_">margin</span>({</li><li>            <span class="hljs-attr">left</span>: -<span class="hljs-number">220</span>,</li><li>          })</li><li>          <span class="hljs-comment">// 插入功能按键。</span></li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">"sendFunctionKey"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webKeyboardController</span>.<span class="hljs-title function_">sendFunctionKey</span>(<span class="hljs-number">6</span>);</li><li>          })</li><li>        }</li><li>      }</li><li>
</li><li>    <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onInterceptKeyboardAttach</span>(<span class="hljs-function">(<span class="hljs-params">KeyboardCallbackInfo</span>) =&gt;</span> {</li><li>          <span class="hljs-comment">// option初始化，默认使用系统默认键盘</span></li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">option</span>: <span class="hljs-title class_">WebKeyboardOptions</span> = {</li><li>            <span class="hljs-attr">useSystemKeyboard</span>: <span class="hljs-literal">true</span>,</li><li>          };</li><li>          <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">KeyboardCallbackInfo</span>) {</li><li>            <span class="hljs-keyword">return</span> option;</li><li>          }</li><li>
</li><li>          <span class="hljs-comment">// 保存WebKeyboardController，使用自定义键盘时候，需要使用该handler控制输入、删除、软键盘关闭等行为</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">webKeyboardController</span> = <span class="hljs-title class_">KeyboardCallbackInfo</span>.<span class="hljs-property">controller</span>;</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">attributes</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = <span class="hljs-title class_">KeyboardCallbackInfo</span>.<span class="hljs-property">attributes</span>;</li><li>          <span class="hljs-comment">// 遍历attributes</span></li><li>          <span class="hljs-keyword">let</span> attributeKeys = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(attributes);</li><li>          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; attributeKeys.<span class="hljs-property">length</span>; i++) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'WebCustomKeyboard key = '</span> + attributeKeys[i] + <span class="hljs-string">', value = '</span> + attributes[attributeKeys[i]]);</li><li>          }</li><li>
</li><li>          <span class="hljs-keyword">if</span> (attributes) {</li><li>            <span class="hljs-keyword">if</span> (attributes[<span class="hljs-string">'data-keyboard'</span>] == <span class="hljs-string">'customKeyboard'</span>) {</li><li>              <span class="hljs-comment">// 根据html可编辑元素的属性，判断使用不同的软键盘，例如这里如果属性包含有data-keyboard，且值为customKeyboard，则使用自定义键盘</span></li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'WebCustomKeyboard use custom keyboard'</span>);</li><li>              option.<span class="hljs-property">useSystemKeyboard</span> = <span class="hljs-literal">false</span>;</li><li>              <span class="hljs-comment">// 设置自定义键盘builder</span></li><li>              option.<span class="hljs-property">customKeyboard</span> = <span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customKeyboardBuilder</span>()</li><li>              }</li><li>              <span class="hljs-keyword">return</span> option;</li><li>            }</li><li>
</li><li>            <span class="hljs-keyword">if</span> (attributes[<span class="hljs-string">'keyboard-return'</span>] != <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-comment">// 根据html可编辑元素的属性，判断使用不同的软键盘，例如这里如果属性包含有keyboard-return，使用系统键盘，并且指定系统软键盘enterKey类型</span></li><li>              option.<span class="hljs-property">useSystemKeyboard</span> = <span class="hljs-literal">true</span>;</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">enterKeyType</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputAttributeMap</span>.<span class="hljs-title function_">get</span>(attributes[<span class="hljs-string">'keyboard-return'</span>]);</li><li>              <span class="hljs-keyword">if</span> (enterKeyType != <span class="hljs-literal">undefined</span>) {</li><li>                option.<span class="hljs-property">enterKeyType</span> = enterKeyType;</li><li>              }</li><li>              <span class="hljs-keyword">return</span> option;</li><li>            }</li><li>          }</li><li>
</li><li>          <span class="hljs-keyword">return</span> option;</li><li>        })</li><li>      }</li><li>    }</li><li>  }</li></ol></pre></div></div>     <div _ngcontent-iew-c106="" class="highlight-div"><div _ngcontent-iew-c106="" class="highlight-div-header"><div _ngcontent-iew-c106="" class="highlight-div-header-left"><div _ngcontent-iew-c106="" class="handle-button expand-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iew-c106="" class="highlight-div-header-right"><div _ngcontent-iew-c106="" class="handle-button ai-button"></div><div _ngcontent-iew-c106="" class="handle-button line-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iew-c106="" class="handle-button theme-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iew-c106="" class="handle-button copy-button"><div _ngcontent-iew-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iew-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li>    <span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>
</li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width,minimum-scale=1.0,maximum-scale=1.0"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>
</li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>
</li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，原有默认行为：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，系统键盘自定义enterKeyType属性 enter key UNSPECIFIED：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">keyboard-return</span>=<span class="hljs-string">"UNSPECIFIED"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，系统键盘自定义enterKeyType属性 enter key GO：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">keyboard-return</span>=<span class="hljs-string">"GO"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，系统键盘自定义enterKeyType属性 enter key SEARCH：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">keyboard-return</span>=<span class="hljs-string">"SEARCH"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，系统键盘自定义enterKeyType属性 enter key SEND：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">keyboard-return</span>=<span class="hljs-string">"SEND"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，系统键盘自定义enterKeyType属性 enter key NEXT：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">keyboard-return</span>=<span class="hljs-string">"NEXT"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，系统键盘自定义enterKeyType属性 enter key DONE：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">keyboard-return</span>=<span class="hljs-string">"DONE"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，系统键盘自定义enterKeyType属性 enter key PREVIOUS：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">keyboard-return</span>=<span class="hljs-string">"PREVIOUS"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:2px;border-width:0;color:gray;background-color:gray"</span>&gt;</span></li><li>
</li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:12px"</span>&gt;</span>input标签，应用自定义键盘：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">data-keyboard</span>=<span class="hljs-string">"customKeyboard"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 20px"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></li><li>
</li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li>
</li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>     <p>ArkWeb自定义键盘的示例效果如图4、图5和图6所示。</p>     <p><strong>图4</strong> ArkWeb自定义键盘数字键盘</p>     <p><span><img originheight="603" originwidth="270" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114734.35985698534278325467887534775635:50001231000000:2800:137A03613CF0BA242789548506F5FE28EFF00E36AE1C9E7FB2EAB3767813B3BC.png" class="notEnlarge" width="270" height="603"></span></p>     <p><strong>图5</strong> ArkWeb自定义键盘字母键盘</p>     <p><span><img originheight="602" originwidth="272" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114734.36620409461067969469759813027479:50001231000000:2800:3B470B89C2C33013BC07EBA6CBBEA8D58CB8CA36D7853B4EAE37620033C67E8F.png" class="notEnlarge" width="272" height="602"></span></p>     <p><strong>图6</strong> ArkWeb自定义键盘符号键盘</p>     <p><span><img originheight="598" originwidth="272" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114734.17698516962973393789692433247205:50001231000000:2800:D533C8A4187A06121ADA0F3543BD171AF953DC5E3652B1370F697F084CC59313.png" class="notEnlarge" width="272" height="598"></span></p>    </div>   </div>   <div></div></div>