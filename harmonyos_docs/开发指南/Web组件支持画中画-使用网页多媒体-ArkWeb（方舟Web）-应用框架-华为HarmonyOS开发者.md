<h1 _ngcontent-pqf-c119="" class="doc-title ng-star-inserted" title="Web组件支持画中画"> Web组件支持画中画 </h1>

<div _ngcontent-pqf-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>Web组件提供画中画功能支持，应用可利用W3C标准的Picture-in-Picture API在网页中创建浮动窗口以播放视频，使用户在浏览其他网页或与其他应用交互时，可通过该画中画窗口继续观看视频。</p>    <p>若使用线上视频资源，则需在配置文件中设置网络权限。权限的添加方法请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions#在配置文件中声明权限">在配置文件中声明权限</a>。</p>    <div _ngcontent-pqf-c106="" class="highlight-div"><div _ngcontent-pqf-c106="" class="highlight-div-header"><div _ngcontent-pqf-c106="" class="highlight-div-header-left"><div _ngcontent-pqf-c106="" class="handle-button expand-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pqf-c106="" class="highlight-div-header-right"><div _ngcontent-pqf-c106="" class="handle-button ai-button"></div><div _ngcontent-pqf-c106="" class="handle-button line-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pqf-c106="" class="handle-button theme-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pqf-c106="" class="handle-button copy-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pqf-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// src/main/module.json5</span></li><li><span class="hljs-attr">"requestPermissions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>  <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ohos.permission.INTERNET"</span></li><li>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li><span class="hljs-punctuation">]</span></li></ol></pre></div></div>    <div class="tiledSection">     <h2 id="约束与限制">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="约束与限制" tips="复制节点链接"></i></h2>          <ol>      <li>当前H264/H265/HLS格式的视频可在创建的画中画窗口中播放。</li>      <li>画中画窗口的大小调整依据系统能力，具体参照设计指南中的系统特性与能力部分。</li>     </ol>    </div>    <div class="tiledSection">     <h2 id="进入画中画">进入画中画<i class="anchor-icon anchor-icon-link" anchorid="进入画中画" tips="复制节点链接"></i></h2>          <p>以仅包含媒体源的video元素和一个用户交互的button元素为例，介绍如何创建一个浮动窗口播放视频，使用户在浏览其他网页或与其他应用交互时，能够通过该画中画窗口持续观看视频。</p>     <div _ngcontent-pqf-c106="" class="highlight-div"><div _ngcontent-pqf-c106="" class="highlight-div-header"><div _ngcontent-pqf-c106="" class="highlight-div-header-left"><div _ngcontent-pqf-c106="" class="handle-button expand-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pqf-c106="" class="highlight-div-header-right"><div _ngcontent-pqf-c106="" class="handle-button ai-button"></div><div _ngcontent-pqf-c106="" class="handle-button line-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pqf-c106="" class="handle-button theme-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pqf-c106="" class="handle-button copy-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pqf-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- 使用时需要自行替换视频链接 --&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"video"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://example.com/file.mp4"</span> <span class="hljs-attr">controls</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"togglePipButton"</span>&gt;</span>开启画中画<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li></ol></pre></div></div>     <p>HTMLVideoElement接口提供的requestPictureInPicture()方法请求启动画中画，如果系统支持画中画能力，则会以画中画模式显示视频。</p>     <div _ngcontent-pqf-c106="" class="highlight-div"><div _ngcontent-pqf-c106="" class="highlight-div-header"><div _ngcontent-pqf-c106="" class="highlight-div-header-left"><div _ngcontent-pqf-c106="" class="handle-button expand-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pqf-c106="" class="highlight-div-header-right"><div _ngcontent-pqf-c106="" class="handle-button ai-button"></div><div _ngcontent-pqf-c106="" class="handle-button line-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pqf-c106="" class="handle-button theme-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pqf-c106="" class="handle-button copy-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pqf-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" hw-language="js" data-highlighted="yes"><ol class="linenums"><li>togglePipButton.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-keyword">async</span> () =&gt; {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 请求进入画中画模式</span></li><li>    <span class="hljs-keyword">await</span> video.<span class="hljs-title function_">requestPictureInPicture</span>();</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-comment">// 如果画中画模式切换失败，打印错误信息</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Picture-in-Picture mode failed:"</span>, err);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="退出画中画">退出画中画<i class="anchor-icon anchor-icon-link" anchorid="退出画中画" tips="复制节点链接"></i></h2>          <p>请求退出画中画模式，请使用Document接口的exitPictureInPicture()方法，视频将重新在原始标签页中显示。</p>     <div _ngcontent-pqf-c106="" class="highlight-div"><div _ngcontent-pqf-c106="" class="highlight-div-header"><div _ngcontent-pqf-c106="" class="highlight-div-header-left"><div _ngcontent-pqf-c106="" class="handle-button expand-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pqf-c106="" class="highlight-div-header-right"><div _ngcontent-pqf-c106="" class="handle-button ai-button"></div><div _ngcontent-pqf-c106="" class="handle-button line-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pqf-c106="" class="handle-button theme-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pqf-c106="" class="handle-button copy-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pqf-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" hw-language="js" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ...</span></li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">if</span> (videoElement !== <span class="hljs-variable language_">document</span>.<span class="hljs-property">pictureInPictureElement</span>) {</li><li>    <span class="hljs-keyword">await</span> videoElement.<span class="hljs-title function_">requestPictureInPicture</span>();</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">exitPictureInPicture</span>();</li><li>  }</li><li>}</li><li><span class="hljs-comment">// ...</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="监听画中画事件">监听画中画事件<i class="anchor-icon anchor-icon-link" anchorid="监听画中画事件" tips="复制节点链接"></i></h2>          <p>当用户启动画中画模式播放视频时，会显示一个悬浮窗口用于播放视频。系统规定每次只能播放一个画中画视频。</p>     <p>HTMLVideoElement的enterpictureinpicture事件在HTMLVideoElement成功进入画中画模式时触发，而HTMLVideoElement的leavepictureinpicture事件在HTMLVideoElement成功退出画中画模式时触发。</p>     <p>在监听到这些事件变化时，开发者可以进行相应的处理。</p>     <div _ngcontent-pqf-c106="" class="highlight-div"><div _ngcontent-pqf-c106="" class="highlight-div-header"><div _ngcontent-pqf-c106="" class="highlight-div-header-left"><div _ngcontent-pqf-c106="" class="handle-button expand-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pqf-c106="" class="highlight-div-header-right"><div _ngcontent-pqf-c106="" class="handle-button ai-button"></div><div _ngcontent-pqf-c106="" class="handle-button line-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pqf-c106="" class="handle-button theme-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pqf-c106="" class="handle-button copy-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pqf-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" hw-language="js" data-highlighted="yes"><ol class="linenums"><li>videoElement.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'enterpictureinpicture'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) {</li><li><span class="hljs-comment">// 视频进入画中画模式。</span></li><li>});</li><li>
</li><li>videoElement.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'leavepictureinpicture'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) {</li><li><span class="hljs-comment">// 视频退出画中画模式。</span></li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="画中画窗口交互">画中画窗口交互<i class="anchor-icon anchor-icon-link" anchorid="画中画窗口交互" tips="复制节点链接"></i></h2>          <ul>      <li>       <p>画中画整体窗口控制：</p>       <p>支持双击画中画窗口控制放大或缩小窗口尺寸；</p>       <p>支持拖拽画中画窗口到屏幕任意位置；</p>       <p>支持单击画中画窗口控制画中画控制层UI控件的显示与隐藏。</p></li>      <li>       <p>画中画控制层UI控件：</p>       <p>画中画窗口控制层包含“关闭”（关闭画中画窗口）、“恢复”（从画中画窗口恢复到原应用界面）；</p>       <p>播放控制包含暂停，播放，前进/后退（默认显示前进/后退UI控件，若原视频不支持前进后退，点击无响应）。</p>       <p><span><img originheight="111" originwidth="193" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114735.93830121054728363266866958719316:50001231000000:2800:F23C1D1E3A0B5D9A55301747557C20798CA1F58A721A8A08BF4B8FA501693108.png" class="notEnlarge" width="193" height="111"></span></p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="完整示例">完整示例<i class="anchor-icon anchor-icon-link" anchorid="完整示例" tips="复制节点链接"></i></h2>          <p>支持启动/退出画中画的完整示例如下：</p>     <ul>      <li>       <p>应用侧ets代码。</p>       <div _ngcontent-pqf-c106="" class="highlight-div"><div _ngcontent-pqf-c106="" class="highlight-div-header"><div _ngcontent-pqf-c106="" class="highlight-div-header-left"><div _ngcontent-pqf-c106="" class="handle-button expand-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pqf-c106="" class="highlight-div-header-right"><div _ngcontent-pqf-c106="" class="handle-button ai-button"></div><div _ngcontent-pqf-c106="" class="handle-button line-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pqf-c106="" class="handle-button theme-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pqf-c106="" class="handle-button copy-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pqf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">videoSrc</span>: <span class="hljs-title class_">Resource</span> = $rawfile(<span class="hljs-string">'PictureInPicture.html'</span>);</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({<span class="hljs-attr">src</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">videoSrc</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>})</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>前端页面html代码。</p>       <div _ngcontent-pqf-c106="" class="highlight-div"><div _ngcontent-pqf-c106="" class="highlight-div-header"><div _ngcontent-pqf-c106="" class="highlight-div-header-left"><div _ngcontent-pqf-c106="" class="handle-button expand-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pqf-c106="" class="highlight-div-header-right"><div _ngcontent-pqf-c106="" class="handle-button ai-button"></div><div _ngcontent-pqf-c106="" class="handle-button line-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pqf-c106="" class="handle-button theme-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pqf-c106="" class="handle-button copy-button"><div _ngcontent-pqf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pqf-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- PictureInPicture.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Picture-in-Picture Demo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></li><li><span class="language-css">        <span class="hljs-selector-tag">body</span> {</span></li><li><span class="language-css">          <span class="hljs-attribute">font-family</span>: Arial, sans-serif;</span></li><li><span class="language-css">          <span class="hljs-attribute">display</span>: flex;</span></li><li><span class="language-css">          <span class="hljs-attribute">flex-direction</span>: column;</span></li><li><span class="language-css">          <span class="hljs-attribute">align-items</span>: center;</span></li><li><span class="language-css">          <span class="hljs-attribute">justify-content</span>: center;</span></li><li><span class="language-css">          <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;</span></li><li><span class="language-css">          <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">        <span class="hljs-selector-tag">video</span> {</span></li><li><span class="language-css">          <span class="hljs-attribute">width</span>: <span class="hljs-number">60%</span>;</span></li><li><span class="language-css">          <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;</span></li><li><span class="language-css">          <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;</span></li><li><span class="language-css">          <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">        <span class="hljs-selector-tag">button</span> {</span></li><li><span class="language-css">          <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;</span></li><li><span class="language-css">          <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span></li><li><span class="language-css">          <span class="hljs-attribute">cursor</span>: pointer;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-comment">&lt;!-- 使用时需要自行替换视频链接 --&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"video"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://example.com/file.mp4"</span> <span class="hljs-attr">controls</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"togglePipButton"</span>&gt;</span>开启画中画<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li>
</li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"video"</span>);</span></li><li><span class="language-javascript">    <span class="hljs-keyword">const</span> togglePipButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"togglePipButton"</span>);</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-comment">// 如果浏览器不支持画中画功能或被禁用，则隐藏按钮</span></span></li><li><span class="language-javascript">    togglePipButton.<span class="hljs-property">hidden</span> =</span></li><li><span class="language-javascript">      !<span class="hljs-variable language_">document</span>.<span class="hljs-property">pictureInPictureEnabled</span> || video.<span class="hljs-property">disablePictureInPicture</span>;</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-comment">// 监听按钮点击事件，切换画中画模式</span></span></li><li><span class="language-javascript">    togglePipButton.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-keyword">async</span> () =&gt; {</span></li><li><span class="language-javascript">      <span class="hljs-keyword">try</span> {</span></li><li><span class="language-javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">pictureInPictureElement</span>) {</span></li><li><span class="language-javascript">          <span class="hljs-comment">// 如果当前处于画中画模式，退出画中画</span></span></li><li><span class="language-javascript">          <span class="hljs-keyword">await</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">exitPictureInPicture</span>();</span></li><li><span class="language-javascript">        } <span class="hljs-keyword">else</span> {</span></li><li><span class="language-javascript">          <span class="hljs-comment">// 否则，进入画中画模式</span></span></li><li><span class="language-javascript">          <span class="hljs-keyword">await</span> video.<span class="hljs-title function_">requestPictureInPicture</span>();</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript">      } <span class="hljs-keyword">catch</span> (err) {</span></li><li><span class="language-javascript">        <span class="hljs-comment">// 如果画中画模式切换失败，打印错误信息</span></span></li><li><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Picture-in-Picture mode failed:"</span>, err);</span></li><li><span class="language-javascript">      }</span></li><li><span class="language-javascript">    });</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-comment">// 监听进入画中画事件</span></span></li><li><span class="language-javascript">    video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"enterpictureinpicture"</span>, <span class="hljs-function">() =&gt;</span> {</span></li><li><span class="language-javascript">      <span class="hljs-comment">// 更新按钮文本为“退出画中画”</span></span></li><li><span class="language-javascript">      togglePipButton.<span class="hljs-property">textContent</span> = <span class="hljs-string">"退出画中画"</span>;</span></li><li><span class="language-javascript">    });</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-comment">// 监听退出画中画事件</span></span></li><li><span class="language-javascript">    video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"leavepictureinpicture"</span>, <span class="hljs-function">() =&gt;</span> {</span></li><li><span class="language-javascript">      <span class="hljs-comment">// 更新按钮文本为“开启画中画”</span></span></li><li><span class="language-javascript">      togglePipButton.<span class="hljs-property">textContent</span> = <span class="hljs-string">"开启画中画"</span>;</span></li><li><span class="language-javascript">    });</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div></li>     </ul>    </div>   </div>   <div></div></div>