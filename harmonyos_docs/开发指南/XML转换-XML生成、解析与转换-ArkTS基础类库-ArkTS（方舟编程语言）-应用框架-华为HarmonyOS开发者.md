<h1 _ngcontent-efd-c119="" class="doc-title ng-star-inserted" title="XML转换"> XML转换 </h1>

<div _ngcontent-efd-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>将XML文本转换为JavaScript对象，便于处理和操作数据，适用于JavaScript应用程序。</p>    <p>语言基础类库提供ConvertXML类，将XML文本转换为JavaScript对象，输入为待转换的XML字符串及转换选项，输出为转换后的JavaScript对象。具体转换选项可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-convertxml" target="_blank">API参考@ohos.convertxml</a>。</p>    <div class="tiledSection">     <h2 id="注意事项">注意事项<i class="anchor-icon anchor-icon-link" anchorid="注意事项" tips="复制节点链接"></i></h2>          <p>XML解析及转换需要确保传入的XML数据符合XML标准格式。</p>    </div>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <p>以XML转换为JavaScript对象为例，说明如何获取标签值。</p>     <ol>      <li>       <p>引入所需的模块。</p>       <div _ngcontent-efd-c106="" class="highlight-div"><div _ngcontent-efd-c106="" class="highlight-div-header"><div _ngcontent-efd-c106="" class="highlight-div-header-left"><div _ngcontent-efd-c106="" class="handle-button expand-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-efd-c106="" class="highlight-div-header-right"><div _ngcontent-efd-c106="" class="handle-button ai-button"></div><div _ngcontent-efd-c106="" class="handle-button line-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-efd-c106="" class="handle-button theme-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-efd-c106="" class="handle-button copy-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-efd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { convertxml } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li></ol></pre></div></div></li>      <li>       <p>输入待转换的XML，设置转换选项。支持的转换选项及含义，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-convertxml#convertoptions" target="_blank">ConvertOptions</a>。</p>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p>请确保传入的XML文本符合标准格式，若包含“&amp;”字符，请使用实体引用“&amp;amp;”替换。</p>        </div></div></div>       <div _ngcontent-efd-c106="" class="highlight-div"><div _ngcontent-efd-c106="" class="highlight-div-header"><div _ngcontent-efd-c106="" class="highlight-div-header-left"><div _ngcontent-efd-c106="" class="handle-button expand-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-efd-c106="" class="highlight-div-header-right"><div _ngcontent-efd-c106="" class="handle-button ai-button"></div><div _ngcontent-efd-c106="" class="handle-button line-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-efd-c106="" class="handle-button theme-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-efd-c106="" class="handle-button copy-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-efd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">xml</span>: <span class="hljs-built_in">string</span> =</li><li> <span class="hljs-string">'&lt;?xml version="1.0" encoding="utf-8"?&gt;'</span> +</li><li> <span class="hljs-string">'&lt;note importance="high" logged="true"&gt;'</span> +</li><li> <span class="hljs-string">'    &lt;title&gt;Happy&lt;/title&gt;'</span> +</li><li> <span class="hljs-string">'    &lt;todo&gt;Work&lt;/todo&gt;'</span> +</li><li> <span class="hljs-string">'    &lt;todo&gt;Play&lt;/todo&gt;'</span> +</li><li> <span class="hljs-string">'&lt;/note&gt;'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: convertxml.<span class="hljs-property">ConvertOptions</span> = {</li><li>  <span class="hljs-comment">// trim: false 转换后是否删除文本前后的空格，否</span></li><li>  <span class="hljs-comment">// declarationKey: "_declaration" 转换后文件声明使用_declaration来标识</span></li><li>  <span class="hljs-comment">// instructionKey: "_instruction" 转换后指令使用_instruction标识</span></li><li>  <span class="hljs-comment">// attributesKey: "_attributes" 转换后属性使用_attributes标识</span></li><li>  <span class="hljs-comment">// textKey: "_text" 转换后标签值使用_text标识</span></li><li>  <span class="hljs-comment">// cdataKey: "_cdata" 转换后未解析数据使用_cdata标识</span></li><li>  <span class="hljs-comment">// docTypeKey: "_doctype" 转换后文档类型使用_doctype标识</span></li><li>  <span class="hljs-comment">// commentKey: "_comment" 转换后注释使用_comment标识</span></li><li>  <span class="hljs-comment">// parentKey: "_parent" 转换后父类使用_parent标识</span></li><li>  <span class="hljs-comment">// typeKey: "_type" 转换后元素类型使用_type标识</span></li><li>  <span class="hljs-comment">// nameKey: "_name" 转换后标签名称使用_name标识</span></li><li>  <span class="hljs-comment">// elementsKey: "_elements" 转换后元素使用_elements标识</span></li><li>  <span class="hljs-attr">trim</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">declarationKey</span>: <span class="hljs-string">"_declaration"</span>,</li><li>  <span class="hljs-attr">instructionKey</span>: <span class="hljs-string">"_instruction"</span>,</li><li>  <span class="hljs-attr">attributesKey</span>: <span class="hljs-string">"_attributes"</span>,</li><li>  <span class="hljs-attr">textKey</span>: <span class="hljs-string">"_text"</span>,</li><li>  <span class="hljs-attr">cdataKey</span>: <span class="hljs-string">"_cdata"</span>,</li><li>  <span class="hljs-attr">doctypeKey</span>: <span class="hljs-string">"_doctype"</span>,</li><li>  <span class="hljs-attr">commentKey</span>: <span class="hljs-string">"_comment"</span>,</li><li>  <span class="hljs-attr">parentKey</span>: <span class="hljs-string">"_parent"</span>,</li><li>  <span class="hljs-attr">typeKey</span>: <span class="hljs-string">"_type"</span>,</li><li>  <span class="hljs-attr">nameKey</span>: <span class="hljs-string">"_name"</span>,</li><li>  <span class="hljs-attr">elementsKey</span>: <span class="hljs-string">"_elements"</span></li><li>}</li></ol></pre></div></div></li>      <li>       <p>调用fastConvertToJSObject函数并打印结果。</p>       <div _ngcontent-efd-c106="" class="highlight-div"><div _ngcontent-efd-c106="" class="highlight-div-header"><div _ngcontent-efd-c106="" class="highlight-div-header-left"><div _ngcontent-efd-c106="" class="handle-button expand-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-efd-c106="" class="highlight-div-header-right"><div _ngcontent-efd-c106="" class="handle-button ai-button"></div><div _ngcontent-efd-c106="" class="handle-button line-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-efd-c106="" class="handle-button theme-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-efd-c106="" class="handle-button copy-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-efd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">conv</span>: convertxml.<span class="hljs-property">ConvertXML</span> = <span class="hljs-keyword">new</span> convertxml.<span class="hljs-title class_">ConvertXML</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-built_in">object</span> = conv.<span class="hljs-title function_">fastConvertToJSObject</span>(xml, options);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">strRes</span>: <span class="hljs-built_in">string</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(result); <span class="hljs-comment">// 将js对象转换为json字符串，用于显式输出</span></li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(strRes);</li></ol></pre></div></div>       <p>输出结果如下所示：</p>       <div _ngcontent-efd-c106="" class="highlight-div"><div _ngcontent-efd-c106="" class="highlight-div-header"><div _ngcontent-efd-c106="" class="highlight-div-header-left"><div _ngcontent-efd-c106="" class="handle-button expand-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-efd-c106="" class="highlight-div-header-right"><div _ngcontent-efd-c106="" class="handle-button ai-button"></div><div _ngcontent-efd-c106="" class="handle-button line-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-efd-c106="" class="handle-button theme-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-efd-c106="" class="handle-button copy-button"><div _ngcontent-efd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-efd-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li>strRes<span class="hljs-punctuation">:</span></li><li><span class="hljs-punctuation">{</span><span class="hljs-attr">"_declaration"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"_attributes"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"1.0"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"encoding"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"utf-8"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"_elements"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"_type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"element"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"_name"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"note"</span><span class="hljs-punctuation">,</span></li><li> <span class="hljs-attr">"_attributes"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"importance"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"logged"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"true"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"_elements"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"_type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"element"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"_name"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"title"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"_parent"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"note"</span><span class="hljs-punctuation">,</span></li><li> <span class="hljs-attr">"_elements"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"_type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"_text"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"Happy"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"_type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"element"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"_name"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"todo"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"_parent"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"note"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"_elements"</span><span class="hljs-punctuation">:</span></li><li> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"_type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"_text"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"Work"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"_type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"element"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"_name"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"todo"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"_parent"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"note"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"_elements"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"_type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span></li><li> <span class="hljs-attr">"_text"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"Play"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span></li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>