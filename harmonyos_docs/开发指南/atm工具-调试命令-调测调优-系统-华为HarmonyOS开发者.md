<h1 _ngcontent-utk-c119="" class="doc-title ng-star-inserted" title="atm工具"> atm工具 </h1>

<div _ngcontent-utk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>Access Token Manager (程序访问控制管理工具，简称atm工具)，是用于查询应用进程的权限、使用类型等信息的工具，为开发者提供了根据tokenid、包名、进程名等信息进行访问控制管理的能力。</p>    <div class="tiledSection">     <h2 id="环境说明">环境说明<i class="anchor-icon anchor-icon-link" anchorid="环境说明" tips="复制节点链接"></i></h2>          <p>在使用本工具前，开发者需要先获取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hdc">hdc工具</a>，执行hdc shell。</p>    </div>    <div class="tiledSection">     <h2 id="atm工具命令列表">atm工具命令列表<i class="anchor-icon anchor-icon-link" anchorid="atm工具命令列表" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" valign="top" width="50%">命令</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">help</td>         <td class="cellrowborder" valign="top" width="50%">帮助命令，显示atm支持的命令信息。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">dump</td>         <td class="cellrowborder" valign="top" width="50%">查询命令，用于查询访问控制相关数据信息。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="帮助命令">帮助命令<i class="anchor-icon anchor-icon-link" anchorid="帮助命令" tips="复制节点链接"></i></h2>          <div _ngcontent-utk-c106="" class="highlight-div"><div _ngcontent-utk-c106="" class="highlight-div-header"><div _ngcontent-utk-c106="" class="highlight-div-header-left"><div _ngcontent-utk-c106="" class="handle-button expand-button"><div _ngcontent-utk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-utk-c106="" class="highlight-div-header-right"><div _ngcontent-utk-c106="" class="handle-button ai-button"></div><div _ngcontent-utk-c106="" class="handle-button line-button"><div _ngcontent-utk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-utk-c106="" class="handle-button theme-button"><div _ngcontent-utk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-utk-c106="" class="handle-button copy-button"><div _ngcontent-utk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-utk-c106="" class="highlight-scroll-div"><pre class="bash prettyprint linenums hljs language-bash" hw-language="bash" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment"># 显示帮助信息</span></li><li>atm <span class="hljs-built_in">help</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="查询命令">查询命令<i class="anchor-icon anchor-icon-link" anchorid="查询命令" tips="复制节点链接"></i></h2>          <div _ngcontent-utk-c106="" class="highlight-div"><div _ngcontent-utk-c106="" class="highlight-div-header"><div _ngcontent-utk-c106="" class="highlight-div-header-left"><div _ngcontent-utk-c106="" class="handle-button expand-button"><div _ngcontent-utk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-utk-c106="" class="highlight-div-header-right"><div _ngcontent-utk-c106="" class="handle-button ai-button"></div><div _ngcontent-utk-c106="" class="handle-button line-button"><div _ngcontent-utk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-utk-c106="" class="handle-button theme-button"><div _ngcontent-utk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-utk-c106="" class="handle-button copy-button"><div _ngcontent-utk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-utk-c106="" class="highlight-scroll-div"><pre class="bash prettyprint linenums hljs language-bash" hw-language="bash" data-highlighted="yes"><ol class="linenums"><li>atm dump [-h] [-t [-i &lt;token-id&gt;] [-b &lt;bundle-name&gt;] [-n &lt;process-name&gt;]] [-v [-i &lt;token-id&gt;] [-p &lt;permission-name&gt;]]</li></ol></pre></div></div>     <p>下表所列命令中，-t为必选参数，-i、-b、-n、-p为可选参数。对atm dump -t命令，-i、-b、-n参数只能单独使用。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.3.1.1" valign="top" width="50%">参数</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.3.1.2" valign="top" width="50%">参数说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">-d</td>         <td class="cellrowborder" valign="top" width="50%">必选参数，查询系统中所有的权限定义。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">-d -p &lt;permission-name&gt;</td>         <td class="cellrowborder" valign="top" width="50%">可选参数，通过权限名，查询权限定义。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">-h</td>         <td class="cellrowborder" valign="top" width="50%">帮助信息。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">-t</td>         <td class="cellrowborder" valign="top" width="50%">必选参数，查询系统中所有应用进程信息。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">-t -i &lt;token-id&gt;</td>         <td class="cellrowborder" valign="top" width="50%">可选参数，通过应用进程的tokenid，查询该应用的基本信息以及对应的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-abilityaccessctrl#grantstatus" target="_blank">权限信息</a>。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">-t -b &lt;bundle-name&gt;</td>         <td class="cellrowborder" valign="top" width="50%">可选参数，通过应用进程的包名bundle-name，查询该应用的基本信息以及对应的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-abilityaccessctrl#grantstatus" target="_blank">权限信息</a>。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">-t -n &lt;process-name&gt;</td>         <td class="cellrowborder" valign="top" width="50%">可选参数，通过应用进程的进程名process-name，查询该应用的基本信息以及对应的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-abilityaccessctrl#grantstatus" target="_blank">权限信息</a>。</td>        </tr>             </tbody></table></div>     </div>     <p>示例：</p>     <div _ngcontent-utk-c106="" class="highlight-div"><div _ngcontent-utk-c106="" class="highlight-div-header"><div _ngcontent-utk-c106="" class="highlight-div-header-left"><div _ngcontent-utk-c106="" class="handle-button expand-button"><div _ngcontent-utk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-utk-c106="" class="highlight-div-header-right"><div _ngcontent-utk-c106="" class="handle-button ai-button"></div><div _ngcontent-utk-c106="" class="handle-button line-button"><div _ngcontent-utk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-utk-c106="" class="handle-button theme-button"><div _ngcontent-utk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-utk-c106="" class="handle-button copy-button"><div _ngcontent-utk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-utk-c106="" class="highlight-scroll-div"><pre class="bash prettyprint linenums hljs language-bash" hw-language="bash" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">#查询系统中所有的权限定义</span></li><li>atm dump -d</li><li>
</li><li><span class="hljs-comment">#按权限名查询权限定义</span></li><li>atm dump -d -p *********</li><li><span class="hljs-comment"># 执行结果</span></li><li><span class="hljs-comment"># {</span></li><li><span class="hljs-comment">#     "permissionName": "ohos.permission.KERNEL_ATM_SELF_USE",</span></li><li><span class="hljs-comment">#     "grantMode": "SYSTEM_GRANT",</span></li><li><span class="hljs-comment">#     "availableLevel": "SYSTEM_CORE",</span></li><li><span class="hljs-comment">#     "availableType": "SYSTEM",</span></li><li><span class="hljs-comment">#     "distributedSceneEnable": true,</span></li><li><span class="hljs-comment">#     "isKernelEffect": true,</span></li><li><span class="hljs-comment">#     "hasValue": true,</span></li><li><span class="hljs-comment"># }</span></li><li>
</li><li><span class="hljs-comment">#显示atm dump的帮助信息</span></li><li>atm dump -h</li><li>
</li><li><span class="hljs-comment">#查询系统中所有应用进程的tokenid和包名</span></li><li>atm dump -t</li><li>
</li><li><span class="hljs-comment">#按tokenid查询权限信息</span></li><li>atm dump -t -i *********</li><li><span class="hljs-comment"># 执行结果</span></li><li><span class="hljs-comment"># {</span></li><li><span class="hljs-comment">#   "tokenID": 672078897,</span></li><li><span class="hljs-comment">#   "processName": "samgr",</span></li><li><span class="hljs-comment">#   "apl": 2,</span></li><li><span class="hljs-comment">#   "permStateList": [</span></li><li><span class="hljs-comment">#     {</span></li><li><span class="hljs-comment">#       "permissionName": "ohos.permission.DISTRIBUTED_DATASYNC",</span></li><li><span class="hljs-comment">#       "grantStatus": 0,</span></li><li><span class="hljs-comment">#       "grantFlag": 4,</span></li><li><span class="hljs-comment">#     }</span></li><li><span class="hljs-comment">#   ]</span></li><li><span class="hljs-comment"># }</span></li><li>
</li><li><span class="hljs-comment">#按包名查询权限信息</span></li><li>atm dump -t -b ohos.telephony.resources</li><li><span class="hljs-comment"># 执行结果</span></li><li><span class="hljs-comment"># {</span></li><li><span class="hljs-comment">#   "tokenID": 537280686,</span></li><li><span class="hljs-comment">#   "tokenAttr": 1,</span></li><li><span class="hljs-comment">#   "ver": 1,</span></li><li><span class="hljs-comment">#   "userId": 100,</span></li><li><span class="hljs-comment">#   "bundleName": "ohos.telephony.resources",</span></li><li><span class="hljs-comment">#   "instIndex": 0,</span></li><li><span class="hljs-comment">#   "dlpType": 0,</span></li><li><span class="hljs-comment">#   "isRemote": false,</span></li><li><span class="hljs-comment">#   "isPermDialogForbidden": false,</span></li><li><span class="hljs-comment">#   "permStateList": [</span></li><li><span class="hljs-comment">#     {</span></li><li><span class="hljs-comment">#       "permissionName": "ohos.permission.DISTRIBUTED_DATASYNC",</span></li><li><span class="hljs-comment">#       "grantStatus": 0,</span></li><li><span class="hljs-comment">#       "grantFlag": 4,</span></li><li><span class="hljs-comment">#     }</span></li><li><span class="hljs-comment">#   ]</span></li><li><span class="hljs-comment"># }</span></li><li>
</li><li><span class="hljs-comment">#按进程名查询权限信息</span></li><li>atm dump -t -n *********</li></ol></pre></div></div>    </div>   </div>   <div></div></div>