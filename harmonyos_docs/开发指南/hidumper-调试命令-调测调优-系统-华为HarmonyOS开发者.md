<h1 _ngcontent-djb-c119="" class="doc-title ng-star-inserted" title="hidumper"> hidumper </h1>

<div _ngcontent-djb-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>HiDumper是用于统一系统信息导出的命令行工具，支持分析CPU、内存、存储等系统资源使用情况，查询系统服务运行情况，定位资源使用异常、通信等相关问题。</p>    <p>针对HiDumper所支撑的使用场景，本章节将介绍其查询内存信息、查询CPU使用情况、查询系统能力、查询进程信息、查询存储信息、查询系统信息等基础功能，以及系统故障日志获取，进程间通信记录导出，导出信息支持压缩转储等能力。</p>    <p>HiDumper命令行工具使用常见问题汇总在<a href="/consumer/cn/doc/harmonyos-guides/hidumper#常见问题">常见问题</a>章节。</p>    <div class="tiledSection">     <h2 id="环境要求">环境要求<i class="anchor-icon anchor-icon-link" anchorid="环境要求" tips="复制节点链接"></i></h2>          <ul>      <li>       <p>根据hdc命令行工具指导，完成<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hdc#环境准备">环境准备</a>。</p></li>      <li>       <p>请确保设备已正常连接，并执行hdc shell。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="命令行说明">命令行说明<i class="anchor-icon anchor-icon-link" anchorid="命令行说明" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.1" valign="top" width="50%">选项</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.2" valign="top" width="50%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">-h</td>         <td class="cellrowborder" valign="top" width="50%">帮助命令。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#查询系统信息">-lc</a></td>         <td class="cellrowborder" valign="top" width="50%">列出系统信息簇。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#查询系统服务列表">-ls</a></td>         <td class="cellrowborder" valign="top" width="50%">列出正在运行的系统能力。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#查询系统信息">-c</a></td>         <td class="cellrowborder" valign="top" width="50%">获取系统全量信息簇详细信息，包含设备信息、内核信息和环境变量等。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#查询系统信息">-c [base system]</a></td>         <td class="cellrowborder" valign="top" width="50%">获取指定信息簇详细信息，可选"base"或者"system"。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#获取系统服务详细信息">-s</a></td>         <td class="cellrowborder" valign="top" width="50%">获取所有系统能力详细信息。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#获取系统服务详细信息">-s [SA0 SA1]</a></td>         <td class="cellrowborder" valign="top" width="50%">获取一个或多个系统能力的详细信息。多个系统能力名称之间使用空格分隔。可通过 -ls 查询系统能力名称。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#获取指定系统服务提供的能力">-s [SA] -a ["option"]</a></td>         <td class="cellrowborder" valign="top" width="50%">          <p>执行单个系统能力的特定选项。</p>          <p>SA：系统能力名称。</p>          <p>option：该系统能力支持的选项。可通过 -s [SA] -a ["-h"] 获取单个系统能力支持的所有选项。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#获取系统故障日志">-e</a></td>         <td class="cellrowborder" valign="top" width="50%">获取记录的故障日志。输出日志的规格可参考：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cppcrash-guidelines#日志规格">CppCrash</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/jscrash-guidelines#日志规格">JSCrash</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/appfreeze-guidelines#日志规格">AppFreeze</a>。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#查询网络信息">--net [pid]</a></td>         <td class="cellrowborder" valign="top" width="50%">获取网络信息，包含网络流量、网络接口统计、IP信息等。如果指定了进程的pid，则只输出该进程的网络流量使用信息。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#查询存储信息">--storage [pid]</a></td>         <td class="cellrowborder" valign="top" width="50%">获取存储信息，包含磁盘统计、磁盘使用量、文件句柄等信息。如果指定了进程的pid，则只显示该进程的io信息。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#查询进程信息">-p [pid]</a></td>         <td class="cellrowborder" valign="top" width="50%">获取进程信息，包括进程和线程的列表和信息。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#查询进程cpu使用率">--cpuusage [pid]</a></td>         <td class="cellrowborder" valign="top" width="50%">获取CPU使用率，取值范围(0, CPU核数]，按进程和类别分类；如果指定pid，则获取指定pid的CPU使用率。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#查询cpu频率">--cpufreq</a></td>         <td class="cellrowborder" valign="top" width="50%">获取CPU每个核的真实频率，单位：kHz。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#查询整机内存">--mem [--prune]</a></td>         <td class="cellrowborder" valign="top" width="50%">          <p>获取总内存使用情况。如果指定--prune，只导出精简的内存使用情况。</p>          <p><strong>说明</strong>：从API version 20开始，支持--prune参数。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#查询进程内存">--mem pid [--show-ashmem] [--show-dmabuf]</a></td>         <td class="cellrowborder" valign="top" width="50%">          <p>获取指定pid的进程内存使用情况。</p>          <p>指定 --show-ashmem，则补充打印该进程的ashmem使用详细信息。</p>          <p>如果是应用进程，指定--show-dmabuf，则补充打印DMA内存详情信息。</p>          <p><strong>说明</strong>：从API version 20开始，支持--show-ashmem、--show-dmabuf参数。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#导出信息压缩存储">--zip</a></td>         <td class="cellrowborder" valign="top" width="50%">保存命令输出到 /data/log/hidumper 下的压缩文件，压缩格式为 ZIP。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#获取进程间通信信息">--ipc [pid]/-a --start-stat/stat/--stop-stat</a></td>         <td class="cellrowborder" valign="top" width="50%">统计一段时间进程IPC信息。如果使用-a，则统计所有进程IPC数据。使用--start-stat开始统计，使用--stat获取统计数据，使用--stop-stat结束统计。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#查询进程内存">--mem-smaps pid [-v]</a></td>         <td class="cellrowborder" valign="top" width="50%">          <p>获取pid内存统计信息，数据来源于/proc/pid/smaps，使用-v指定更多详细信息。（仅支持导出<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/performance-analysis-kit-terminology#debug版本应用">debug版本应用</a>）</p>          <p><strong>说明</strong>：从API version 20开始，支持该参数。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="/consumer/cn/doc/harmonyos-guides/hidumper#查询虚拟机堆内存">--mem-jsheap pid [-T tid] [--gc] [--leakobj] [--raw]</a></td>         <td class="cellrowborder" valign="top" width="50%">          <p>必选参数pid。触发ArkTS应用JS线程的gc和堆内存快照导出。指定线程tid时，仅触发该线程的gc和堆内存快照导出；指定--gc时，仅触发gc，不导出快照；指定--leakobj时，应用开启泄露检测可获取泄露对象列表。</p>          <p>文件命名格式为：hidumper-jsheap-进程号-JS线程号-时间戳，文件内容为JSON结构的JS堆快照。</p>          <p>指定--raw时，堆快照以rawheap格式导出。</p>          <p><strong>说明</strong>：从API version 19开始，支持--raw参数。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="查询内存信息">查询内存信息<i class="anchor-icon anchor-icon-link" anchorid="查询内存信息" tips="复制节点链接"></i></h2>          <p>HiDumper内存信息查询模块主要用于查看系统整机内存使用情况和单个进程内存使用情况。开发者需要了解相关的<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-memory-basic-knowledge" target="_blank">内存基础知识</a>。</p>    </div>    <div class="tiledSection">     <h3 id="查询整机内存" class="firsth2">查询整机内存<i class="anchor-icon anchor-icon-link" anchorid="查询整机内存" tips="复制节点链接"></i></h3>          <p>可使用hidumper --mem命令获取整机内存使用情况。</p>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>$ <span class="hljs-variable">hidumper</span> --<span class="hljs-variable">mem</span></li><li>-------------------------------[<span class="hljs-variable">memory</span>]-------------------------------</li><li><span class="hljs-variable">Total</span> <span class="hljs-variable">Memory</span> <span class="hljs-variable">Usage</span> <span class="hljs-variable">by</span> <span class="hljs-variable">PID</span>:</li><li><span class="hljs-variable">PID</span>       <span class="hljs-variable">Total</span> <span class="hljs-title function_">Pss</span>(<span class="hljs-variable">xxx</span> <span class="hljs-keyword">in</span> <span class="hljs-variable">SwapPss</span>)   <span class="hljs-variable">Total</span> <span class="hljs-variable">Vss</span>   <span class="hljs-variable">Total</span> <span class="hljs-variable">Rss</span>   <span class="hljs-variable">Total</span> <span class="hljs-variable">Uss</span>          <span class="hljs-variable">GL</span>       <span class="hljs-variable">Graph</span>         <span class="hljs-variable">Dma</span>     <span class="hljs-variable">PurgSum</span>     <span class="hljs-variable">PurgPin</span>    <span class="hljs-variable">Name</span></li><li><span class="hljs-number">1</span>          <span class="hljs-number">4309</span>(<span class="hljs-number">2216</span> <span class="hljs-keyword">in</span> <span class="hljs-variable">SwapPss</span>) <span class="hljs-variable">kB</span>  <span class="hljs-number">2158196</span> <span class="hljs-variable">kB</span>     <span class="hljs-number">4180</span> <span class="hljs-variable">kB</span>     <span class="hljs-number">1760</span> <span class="hljs-variable">kB</span>        <span class="hljs-number">0</span> <span class="hljs-variable">kB</span>        <span class="hljs-number">0</span> <span class="hljs-variable">kB</span>        <span class="hljs-number">0</span> <span class="hljs-variable">kB</span>        <span class="hljs-number">0</span> <span class="hljs-variable">kB</span>        <span class="hljs-number">0</span> <span class="hljs-variable">kB</span>    <span class="hljs-keyword">init</span></li><li><span class="hljs-number">2</span>            <span class="hljs-number">45613</span>(<span class="hljs-number">0</span> <span class="hljs-keyword">in</span> <span class="hljs-variable">SwapPss</span>) <span class="hljs-variable">kB</span> <span class="hljs-number">17452952</span> <span class="hljs-variable">kB</span>    <span class="hljs-number">48352</span> <span class="hljs-variable">kB</span>    <span class="hljs-number">44088</span> <span class="hljs-variable">kB</span>        <span class="hljs-number">0</span> <span class="hljs-variable">kB</span>        <span class="hljs-number">0</span> <span class="hljs-variable">kB</span>        <span class="hljs-number">0</span> <span class="hljs-variable">kB</span>        <span class="hljs-number">0</span> <span class="hljs-variable">kB</span>        <span class="hljs-number">0</span> <span class="hljs-variable">kB</span>    <span class="hljs-variable">sysmgr</span>-<span class="hljs-keyword">main</span></li><li>...</li><li><span class="hljs-variable">Total</span> <span class="hljs-variable">Memory</span> <span class="hljs-variable">Usage</span> <span class="hljs-variable">by</span> <span class="hljs-variable">Size</span>:</li><li><span class="hljs-variable">PID</span>        <span class="hljs-variable">Total</span> <span class="hljs-title function_">Pss</span>(<span class="hljs-variable">xxx</span> <span class="hljs-keyword">in</span> <span class="hljs-variable">SwapPss</span>)    <span class="hljs-variable">Total</span> <span class="hljs-variable">Vss</span>    <span class="hljs-variable">Total</span> <span class="hljs-variable">Rss</span>    <span class="hljs-variable">Total</span> <span class="hljs-variable">Uss</span>           <span class="hljs-variable">GL</span>        <span class="hljs-variable">Graph</span>          <span class="hljs-variable">Dma</span>      <span class="hljs-variable">PurgSum</span>      <span class="hljs-variable">PurgPin</span>     <span class="hljs-variable">Name</span></li><li><span class="hljs-number">3031</span>         <span class="hljs-number">421826</span>(<span class="hljs-number">0</span> <span class="hljs-keyword">in</span> <span class="hljs-variable">SwapPss</span>) <span class="hljs-variable">kB</span>   <span class="hljs-number">5199308</span> <span class="hljs-variable">kB</span>    <span class="hljs-number">610812</span> <span class="hljs-variable">kB</span>    <span class="hljs-number">395712</span> <span class="hljs-variable">kB</span>         <span class="hljs-number">0</span> <span class="hljs-variable">kB</span>     <span class="hljs-number">17000</span> <span class="hljs-variable">kB</span>     <span class="hljs-number">17000</span> <span class="hljs-variable">kB</span>         <span class="hljs-number">0</span> <span class="hljs-variable">kB</span>         <span class="hljs-number">0</span> <span class="hljs-variable">kB</span>     <span class="hljs-variable">xxx</span></li><li><span class="hljs-number">1473</span>         <span class="hljs-number">409349</span>(<span class="hljs-number">0</span> <span class="hljs-keyword">in</span> <span class="hljs-variable">SwapPss</span>) <span class="hljs-variable">kB</span>   <span class="hljs-number">7014040</span> <span class="hljs-variable">kB</span>    <span class="hljs-number">449460</span> <span class="hljs-variable">kB</span>    <span class="hljs-number">389528</span> <span class="hljs-variable">kB</span>    <span class="hljs-number">160336</span> <span class="hljs-variable">kB</span>     <span class="hljs-number">57092</span> <span class="hljs-variable">kB</span>     <span class="hljs-number">57092</span> <span class="hljs-variable">kB</span>         <span class="hljs-number">0</span> <span class="hljs-variable">kB</span>         <span class="hljs-number">0</span> <span class="hljs-variable">kB</span>     <span class="hljs-variable">xxx</span></li><li>...</li><li><span class="hljs-variable">Total</span> <span class="hljs-variable">Pss</span> <span class="hljs-variable">by</span> <span class="hljs-variable">OOM</span> <span class="hljs-variable">adjustment</span>:</li><li><span class="hljs-variable">System</span>: <span class="hljs-number">1426777</span> <span class="hljs-title class_">kB</span></li><li>   <span class="hljs-title function_">xxx</span>(<span class="hljs-variable">pid</span>=<span class="hljs-number">1473</span>):  <span class="hljs-number">409349</span> <span class="hljs-title class_">kB</span></li><li>   <span class="hljs-title function_">xxx</span>(<span class="hljs-variable">pid</span>=<span class="hljs-number">992</span>):     <span class="hljs-number">80734</span> <span class="hljs-title class_">kB</span> (<span class="hljs-number">23720</span> <span class="hljs-title class_">kB</span> <span class="hljs-keyword">in</span> <span class="hljs-title class_">SwapPss</span>)</li><li>...</li><li><span class="hljs-variable">Total</span> <span class="hljs-variable">Pss</span> <span class="hljs-variable">by</span> <span class="hljs-variable">Category</span>:</li><li><span class="hljs-variable">File</span>-<span class="hljs-variable">backed</span> <span class="hljs-title function_">Page</span>(<span class="hljs-number">1414160</span> <span class="hljs-variable">kB</span>):</li><li>      <span class="hljs-number">1053457</span> <span class="hljs-variable">kB</span> : .<span class="hljs-title class_">so</span></li><li>       <span class="hljs-number">322813</span> <span class="hljs-variable">kB</span> : <span class="hljs-title class_">other</span></li><li>        <span class="hljs-number">25616</span> <span class="hljs-variable">kB</span> : .<span class="hljs-title class_">hap</span></li><li>         <span class="hljs-number">8064</span> <span class="hljs-variable">kB</span> : .<span class="hljs-title class_">ttf</span></li><li>         <span class="hljs-number">3696</span> <span class="hljs-variable">kB</span> : .<span class="hljs-title class_">db</span></li><li>          <span class="hljs-number">514</span> <span class="hljs-variable">kB</span> : <span class="hljs-title class_">dev</span></li><li><span class="hljs-variable">Anonymous</span> <span class="hljs-title function_">Page</span>(<span class="hljs-number">2280332</span> <span class="hljs-variable">kB</span>):</li><li>      <span class="hljs-number">1348463</span> <span class="hljs-variable">kB</span> : <span class="hljs-title class_">native</span> <span class="hljs-title class_">heap</span></li><li>       <span class="hljs-number">518107</span> <span class="hljs-variable">kB</span> : <span class="hljs-title class_">ark</span> <span class="hljs-title class_">ts</span> <span class="hljs-title class_">heap</span></li><li>       <span class="hljs-number">361195</span> <span class="hljs-variable">kB</span> : <span class="hljs-title class_">other</span></li><li>        <span class="hljs-number">49287</span> <span class="hljs-variable">kB</span> : <span class="hljs-title class_">stack</span></li><li>         <span class="hljs-number">3280</span> <span class="hljs-variable">kB</span> : <span class="hljs-title class_">dev</span></li><li>            <span class="hljs-number">0</span> <span class="hljs-variable">kB</span> : <span class="hljs-title class_">guard</span></li><li><span class="hljs-title function_">GPU</span>(<span class="hljs-number">160340</span> <span class="hljs-variable">kB</span>):</li><li>       <span class="hljs-number">160340</span> <span class="hljs-variable">kB</span> : <span class="hljs-title class_">GL</span></li><li><span class="hljs-title function_">Graph</span>(<span class="hljs-number">350708</span> <span class="hljs-variable">kB</span>):</li><li>       <span class="hljs-number">350708</span> <span class="hljs-variable">kB</span> : <span class="hljs-title class_">Graph</span></li><li><span class="hljs-title function_">DMA</span>(<span class="hljs-number">350708</span> <span class="hljs-variable">kB</span>):</li><li>       <span class="hljs-number">350708</span> <span class="hljs-variable">kB</span> : <span class="hljs-title class_">Dma</span></li><li>
</li><li>      <span class="hljs-variable">Total</span> <span class="hljs-variable">RAM</span>:<span class="hljs-number">15803612</span> <span class="hljs-title class_">kB</span></li><li>       <span class="hljs-variable">Free</span> <span class="hljs-variable">RAM</span>:<span class="hljs-number">10287099</span> <span class="hljs-title class_">kB</span> (<span class="hljs-number">3999535</span> <span class="hljs-variable">cached</span> + <span class="hljs-number">6287564</span> <span class="hljs-title class_">free</span>)</li><li>       <span class="hljs-variable">Used</span> <span class="hljs-variable">RAM</span>:<span class="hljs-number">3961668</span> <span class="hljs-title class_">kB</span> (<span class="hljs-number">3163324</span> <span class="hljs-title class_">total</span> <span class="hljs-variable">pss</span> + <span class="hljs-number">798344</span> <span class="hljs-title class_">kernel</span>)</li><li>       <span class="hljs-variable">Lost</span> <span class="hljs-variable">RAM</span>:<span class="hljs-number">2086013</span> <span class="hljs-title class_">kB</span></li><li>
</li><li><span class="hljs-variable">Total</span> <span class="hljs-variable">RAM</span> <span class="hljs-variable">by</span> <span class="hljs-variable">Category</span>:</li><li><span class="hljs-variable">hidumper</span> - <span class="hljs-variable">Hardware</span> <span class="hljs-variable">Usage</span>:<span class="hljs-number">1860480</span> <span class="hljs-title class_">kB</span></li><li>      <span class="hljs-variable">CMA</span> <span class="hljs-variable">Usage</span>:<span class="hljs-number">0</span> <span class="hljs-title class_">kB</span></li><li>-   <span class="hljs-variable">Kernel</span> <span class="hljs-variable">Usage</span>:<span class="hljs-number">656937</span> <span class="hljs-title class_">kB</span></li><li><span class="hljs-variable">Processes</span> <span class="hljs-variable">Usage</span>:<span class="hljs-number">3694492</span> <span class="hljs-title class_">kB</span></li><li>
</li><li><span class="hljs-variable">Total</span> <span class="hljs-variable">Purgeable</span>:</li><li>  <span class="hljs-variable">Total</span> <span class="hljs-variable">PurgSum</span>:<span class="hljs-number">0</span> <span class="hljs-title class_">kB</span></li><li>  <span class="hljs-variable">Total</span> <span class="hljs-variable">PurgPin</span>:<span class="hljs-number">0</span> <span class="hljs-title class_">kB</span></li></ol></pre></div></div>     <p>VSS (Virtual Set Size)表示当前进程虚拟内存的大小，包括所有映射到该进程地址空间的内存区域。</p>     <p>RSS (Resident Set Size)表示当前进程实际驻留在物理内存中的内存大小。</p>     <p>PSS (Proportional Set Size)是一种更精确的内存使用度量方法，它将共享库所占的内存按比例分配给每个使用该库的进程。</p>     <p>PurgSum（Purgeable Summary）表示当前进程可回收内存的总量。</p>     <p>PurgPin（Purgeable Pinned）表示可回收但暂时无法立即回收的内存。</p>     <p>GL代表GPU内存，包含应用使用的GPU内存和统一渲染在服务进程内产生的GPU内存。</p>     <p>Graph代表图形内存，即DMA内存。</p>     <p>可使用hidumper --mem --prune命令获取整机内存精简的使用情况。</p>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --mem --prune</span></li><li>-------------------------------[memory]-------------------------------</li><li>Total Memory Usage by PID:</li><li>PID        Total Pss(xxx in SwapPss)           GL     AdjLabel     Name</li><li>1           4061(1668 in SwapPss) kB         0 kB        -1000     xxx</li><li>2            101723(0 in SwapPss) kB         0 kB        -1000     xxx</li><li>...</li></ol></pre></div></div>     <p>AdjLabel代表该进程内存的回收优先级，取值范围为[-1000, 1000]，该值越大则表示该进程越不重要，内存会被优先回收。</p>    </div>    <div class="tiledSection">     <h3 id="查询进程内存">查询进程内存<i class="anchor-icon anchor-icon-link" anchorid="查询进程内存" tips="复制节点链接"></i></h3>          <p>可使用hidumper --mem pid命令获取指定进程的内存使用情况，pid为指定的进程号。</p>     <p>使用样例：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --mem 27336</span></li><li>
</li><li>-------------------------------[memory]-------------------------------</li><li>
</li><li>                          Pss         Shared         Shared        Private        Private           Swap        SwapPss           Heap           Heap           Heap</li><li>                        Total          Clean          Dirty          Clean          Dirty          Total          Total           Size          Alloc           Free</li><li>                       ( kB )         ( kB )         ( kB )         ( kB )         ( kB )         ( kB )         ( kB )         ( kB )         ( kB )         ( kB )</li><li>              ------------------------------------------------------------------------------------------------------------------------------------------------------</li><li>            GL              0              0              0              0              0              0              0              0              0              0</li><li>         Graph              0              0              0              0              0              0              0              0              0              0</li><li>   ark ts heap          12676           5516              0          12468              0           3068           3068              0              0              0</li><li>         guard              0              0              0              0              0              0              0              0              0              0</li><li>   native heap          15427          27132              0          14424              0          18776          18776          55796          53564           2809</li><li>          .hap              4              0              0              4              0              0              0              0              0              0</li><li>AnonPage other           1109           4932              0            968              0           4280           4280              0              0              0</li><li>         stack           1404              0              0           1404              0             28             28              0              0              0</li><li>           .db             32              0              0             32              0              0              0              0              0              0</li><li>           .so          12877          58928          18868           5628           2028           1036           1036              0              0              0</li><li>           dev             52              0            284             52              0              0              0              0              0              0</li><li>          .ttf            296           1264              0              0              0              0              0              0              0              0</li><li>FilePage other          21933           1432           4300          21524            148              0              0              0              0              0</li><li>--------------------------------------------------------------------------------------------------------------------------------------------------------------------</li><li>         Total          92998          99204          23452          56504           2176          27188          27188          55796          53564           2809</li><li>
</li><li>native heap:</li><li>  jemalloc meta:          1010            276              0           1000              0            156            156              0              0              0</li><li>  jemalloc heap:         13126          22412              0          12260              0          17876          17876              0              0              0</li><li>       brk heap:          1259           4444              0           1132              0            744            744              0              0              0</li><li>      musl heap:            32              0              0             32              0              0              0              0              0              0</li><li>
</li><li>Purgeable:</li><li>        PurgSum:0 kB</li><li>        PurgPin:0 kB</li><li>
</li><li>DMA:</li><li>            Dma:0 kB</li><li>
</li><li>Ashmem:</li><li>Total Ashmem:144 kB</li></ol></pre></div></div>     <p>可使用hidumper --mem pid --show-ashmem获取指定pid的内存使用情况，同时打印ashmem使用详细信息。</p>     <p>使用样例：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --mem 27336 --show-ashmem</span></li><li>-------------------------------[memory]-------------------------------</li><li>
</li><li>                          Pss         Shared         Shared        Private        Private           Swap        SwapPss           Heap           Heap           Heap</li><li>                        Total          Clean          Dirty          Clean          Dirty          Total          Total           Size          Alloc           Free</li><li>                       ( kB )         ( kB )         ( kB )         ( kB )         ( kB )         ( kB )         ( kB )         ( kB )         ( kB )         ( kB )</li><li>              ------------------------------------------------------------------------------------------------------------------------------------------------------</li><li>            GL              0              0              0              0              0              0              0              0              0              0</li><li>         Graph              0              0              0              0              0              0              0              0              0              0</li><li>   ark ts heap          12657           5516              0          12468              0           3068           3068              0              0              0</li><li>         guard              0              0              0              0              0              0              0              0              0              0</li><li>   native heap          15191          27132              0          14252              0          18780          18780          55792          53527           2629</li><li>          .hap              4              0              0              4              0              0              0              0              0              0</li><li>AnonPage other           1094           4932              0            964              0           4280           4280              0              0              0</li><li>         stack           1388              0              0           1388              0             28             28              0              0              0</li><li>           .db             32              0              0             32              0              0              0              0              0              0</li><li>           .so          12557          59184          18868           5372           2028           1036           1036              0              0              0</li><li>           dev             52              0            284             52              0              0              0              0              0              0</li><li>          .ttf            296           1264              0              0              0              0              0              0              0              0</li><li>FilePage other          21916           1432           4300          21524            148              0              0              0              0              0</li><li>--------------------------------------------------------------------------------------------------------------------------------------------------------------------</li><li>         Total          92379          99460          23452          56056           2176          27192          27192          55792          53527           2629</li><li>
</li><li>native heap:</li><li>  jemalloc meta:          1008            276              0           1000              0            156            156              0              0              0</li><li>  jemalloc heap:         12892          22412              0          12088              0          17880          17880              0              0              0</li><li>       brk heap:          1259           4444              0           1132              0            744            744              0              0              0</li><li>      musl heap:            32              0              0             32              0              0              0              0              0              0</li><li>
</li><li>Purgeable:</li><li>        PurgSum:0 kB</li><li>        PurgPin:0 kB</li><li>
</li><li>DMA:</li><li>            Dma:0 kB</li><li>
</li><li>Ashmem:</li><li>Total Ashmem:144 kB</li><li>Process_name    Process_ID      Fd      Cnode_idx       Applicant_Pid   Ashmem_name     Virtual_size    Physical_size   magic    -&gt; 详细ashmem信息</li><li>wei.xxx.xxx  27336   72      328415  27336   dev/ashmem/Paf.Permission.appImg        147456  147456  14105</li></ol></pre></div></div>     <p>使用hidumper --mem pid --show-dmabuf命令可获取指定PID的内存使用情况，并打印DMA内存详细信息。</p>     <p>使用样例：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --mem 27336 --show-dmabuf</span></li><li>-------------------------------[memory]-------------------------------</li><li>
</li><li>                          Pss         Shared         Shared        Private        Private           Swap        SwapPss           Heap           Heap           Heap</li><li>                        Total          Clean          Dirty          Clean          Dirty          Total          Total           Size          Alloc           Free</li><li>                       ( kB )         ( kB )         ( kB )         ( kB )         ( kB )         ( kB )         ( kB )         ( kB )         ( kB )         ( kB )</li><li>              ------------------------------------------------------------------------------------------------------------------------------------------------------</li><li>            GL              0              0              0              0              0              0              0              0              0              0</li><li>         Graph              0              0              0              0              0              0              0              0              0              0</li><li>   ark ts heap          12657           5516              0          12468              0           3068           3068              0              0              0</li><li>         guard              0              0              0              0              0              0              0              0              0              0</li><li>   native heap          15191          27132              0          14252              0          18780          18780          55792          53527           2629</li><li>          .hap              4              0              0              4              0              0              0              0              0              0</li><li>AnonPage other           1094           4932              0            964              0           4280           4280              0              0              0</li><li>         stack           1388              0              0           1388              0             28             28              0              0              0</li><li>           .db             32              0              0             32              0              0              0              0              0              0</li><li>           .so          12557          59184          18868           5372           2028           1036           1036              0              0              0</li><li>           dev             52              0            284             52              0              0              0              0              0              0</li><li>          .ttf            296           1264              0              0              0              0              0              0              0              0</li><li>FilePage other          21916           1432           4300          21524            148              0              0              0              0              0</li><li>--------------------------------------------------------------------------------------------------------------------------------------------------------------------</li><li>         Total          92379          99460          23452          56056           2176          27192          27192          55792          53527           2629</li><li>
</li><li>native heap:</li><li>  jemalloc meta:          1008            276              0           1000              0            156            156              0              0              0</li><li>  jemalloc heap:         12892          22412              0          12088              0          17880          17880              0              0              0</li><li>       brk heap:          1259           4444              0           1132              0            744            744              0              0              0</li><li>      musl heap:            32              0              0             32              0              0              0              0              0              0</li><li>
</li><li>Purgeable:</li><li>        PurgSum:0 kB</li><li>        PurgPin:0 kB</li><li>
</li><li>DMA:</li><li>            Dma:0 kB</li><li>Process               pid         fd        size_bytes        ino       exp_pid       exp_task_comm     buf_name      exp_name      buf_type      leak_type</li><li>m.xxx.xxx             7612        87        40960             2750      1424          allocatxxxx       RSxxxxxx      xxxxx          xx            xxxx</li><li>
</li><li>Ashmem:</li><li>Total Ashmem:144 kB</li></ol></pre></div></div>     <p>字段说明：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.1" valign="top" width="50%">字段</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.2" valign="top" width="50%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">Process</td>         <td class="cellrowborder" valign="top" width="50%">持有ION内存块的应用进程包名（16个字符截断）。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">pid</td>         <td class="cellrowborder" valign="top" width="50%">发生故障进程pid。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">fd</td>         <td class="cellrowborder" valign="top" width="50%">进程持有的句柄。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">size_bytes</td>         <td class="cellrowborder" valign="top" width="50%">进程持有的ION内存buffer大小，单位：B。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">ino</td>         <td class="cellrowborder" valign="top" width="50%">文件inode号（索引节点号）。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">exp_pid</td>         <td class="cellrowborder" valign="top" width="50%">从内核申请ION内存的进程pid。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">exp_task_comm</td>         <td class="cellrowborder" valign="top" width="50%">从内核申请ION内存的进程名。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">buf_name</td>         <td class="cellrowborder" valign="top" width="50%">ION内存的buffer名字。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">exp_name</td>         <td class="cellrowborder" valign="top" width="50%">ION内存的buffer扩展名。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">buf_type</td>         <td class="cellrowborder" valign="top" width="50%">ION内存的buffer类型。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">leak_type</td>         <td class="cellrowborder" valign="top" width="50%">ION内存泄漏维测的buffer类型。</td>        </tr>             </tbody></table></div>     </div>     <p>可使用hidumper --mem-smaps pid命令获取指定进程的详细内存使用情况，该命令会累加相同内存段的内存值。</p>     <p>使用样例：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="txt prettyprint linenums hljs language-plaintext" hw-language="txt" data-highlighted="yes"><ol class="linenums"><li>$ hidumper --mem-smaps 3456  # 3456 为目标可调试应用进程号</li><li>
</li><li>-------------------------------[memory]-------------------------------</li><li>
</li><li>                                    Shared      Shared      Private     Private</li><li>Size        Rss         Pss         Clean       Dirty       Clean       Dirty       Swap        SwapPss     Counts      Category                         Name</li><li>16          0           0           0           0           0           0           4           4           3           FilePage other                   [anon]</li><li>8           8           8           0           0           8           0           0           0           1           FilePage other                   /bin/init</li><li>2048        52          0           0           52          0           0           0           0           1           dev                              /dev/__parameters__/param_sec_dac</li><li>80          28          1           0           28          0           0           0           0           1           dev                              /dev/__parameters__/param_selinux</li><li>...</li></ol></pre></div></div>     <p>统计信息说明：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.17.1.3.1.1" valign="top" width="50%">字段</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.17.1.3.1.2" valign="top" width="50%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">Counts</td>         <td class="cellrowborder" valign="top" width="50%">相同内存段出现的次数。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">Category</td>         <td class="cellrowborder" valign="top" width="50%">内存所属类别。</td>        </tr>             </tbody></table></div>     </div>     <p>可使用hidumper --mem-smaps pid -v命令获取指定进程的详细内存使用情况，该命令会直接打印进程的所有内存信息，不会对相同内存信息做二次处理。</p>     <p>使用样例：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="txt prettyprint linenums hljs language-plaintext" hw-language="txt" data-highlighted="yes"><ol class="linenums"><li>$ hidumper --mem-smaps 3456 -v   # 3456 为目标可调试应用进程号</li><li>
</li><li>-------------------------------[memory]-------------------------------</li><li>                                    Shared      Shared      Private     Private</li><li>Size        Rss         Pss         Clean       Dirty       Clean       Dirty       Swap        SwapPss     Category                   Name</li><li>4           4           2           0           4           0           0           0           0           FilePage other             [anon]</li><li>4           4           2           0           4           0           0           0           0           FilePage other             /bin/init</li><li>...</li></ol></pre></div></div>     <p><strong>注意事项</strong></p>     <p>hidumper --mem-smaps [pid] [-v]命令调试的进程应为“使用调试证书签名的应用”，同<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/performance-analysis-kit-terminology#debug版本应用">debug版本应用</a>。</p>     <p>要确认命令指定的应用是否为可调试应用，可以执行以下命令进行查询：hdc shell "bm dump -n [应用包名] | grep appProvisionType"，预期返回信息为"appProvisionType": "debug"。</p>     <p>以包名com.example.myapplication为例，可执行如下命令查询：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>hdc shell "bm dump -n com.example.myapplication | grep appProvisionType"</li></ol></pre></div></div>     <p>如包名对应的应用是可调试应用，预期返回信息：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>"appProvisionType": "debug",</li></ol></pre></div></div>     <p>构建可调试应用需要使用调试证书进行签名，申请调试证书及签名可参考：<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-add-debugcert-0000001914263178" target="_blank">申请调试证书</a>。</p>    </div>    <div class="tiledSection">     <h3 id="查询虚拟机堆内存">查询虚拟机堆内存<i class="anchor-icon anchor-icon-link" anchorid="查询虚拟机堆内存" tips="复制节点链接"></i></h3>          <p>使用hidumper --mem-jsheap pid [-T tid] [--gc] [--leakobj] [--raw]命令可以查看ArkTS应用虚拟机堆内存。生成的堆内存文件存放于/data/log/reliability/resource_leak/memory_leak目录。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>hidumper --mem-jsheap pid [-T tid] [--gc] [--leakobj] [--raw]命令调试的进程应为“使用调试证书签名的应用”，同<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/performance-analysis-kit-terminology#debug版本应用">debug版本应用</a>。</p>       <p>确认命令指定的应用是否为可调试应用：参考上述hidumper --mem-smaps [pid] [-v]命令中的注意事项。</p>      </div></div></div>     <ul>      <li>       <p>可使用hidumper --mem-jsheap pid命令获取指定进程所有JS线程的虚拟机堆内存，文件命名为：hidumper-jsheap-进程号-JS线程号-时间戳，如果有多个JS线程会生成多个文件。</p>       <p>使用样例：</p>       <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --mem-jsheap 64949  -&gt; 64949 为目标应用进程号</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">ls</span> | grep jsheap   -&gt; 进入堆内存文件存放目录后执行</span></li><li>hidumper-jsheap-64949-64949-1751075546050</li><li>hidumper-jsheap-64949-64989-1751075546050</li></ol></pre></div></div></li>      <li>       <p>可使用hidumper --mem-jsheap pid -T tid命令获取指定进程指定JS线程的虚拟机堆内存，文件命名为：hidumper-jsheap-进程号-JS线程号-时间戳。</p>       <p>使用样例：</p>       <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="txt prettyprint linenums hljs language-plaintext" hw-language="txt" data-highlighted="yes"><ol class="linenums"><li>$ hidumper --mem-jsheap 64949 -T 64949  -&gt; 64949 为目标应用进程号</li><li>$ ls | grep jsheap  -&gt; 进入堆内存文件存放目录后执行</li><li>hidumper-jsheap-64949-64949-1751075567710</li></ol></pre></div></div></li>      <li>       <p>可使用hidumper --mem-jsheap pid [-T tid] --raw获取指定进程或指定JS线程的虚拟机堆内存，生成的堆内存文件为rawheap格式，文件命名为hidumper-jsheap-进程号-JS线程号-时间戳.rawheap。rawheap的解析转换可参考使用：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/rawheap-translator">rawheap-translator工具</a>。</p>       <p>使用样例：</p>       <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --mem-jsheap 64949 --raw  -&gt; 64949 为目标应用进程号</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">ls</span> | grep jsheap  -&gt; 进入堆内存文件存放目录后执行</span></li><li>hidumper-jsheap-64949-64949-1751075546050.rawheap</li><li>hidumper-jsheap-64949-64989-1751075546050.rawheap</li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --mem-jsheap 64949 -T 64949 --raw  -&gt; 64949 为目标应用进程号</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">ls</span> | grep jsheap</span></li><li>hidumper-jsheap-64949-64949-1751075546055.rawheap</li></ol></pre></div></div></li>      <li>       <p>可使用hidumper --mem-jsheap pid --gc命令触发指定应用进程GC。该命令不会生成任何文件，执行成功不会有命令回显。</p>       <p>使用样例：</p>       <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --mem-jsheap 64949 --gc  -&gt; 64949 为目标应用进程号</span></li></ol></pre></div></div></li>      <li>       <p>可使用hidumper --mem-jsheap pid --leakobj获取指定进程的虚拟机堆内存和泄漏对象信息，文件命名为：hidumper-leaklist-进程号-时间戳。</p>       <p>获取指定进程的虚拟机堆内存和泄露对象信息的前提是应用已通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-jsleakwatcher" target="_blank">@ohos.hiviewdfx.jsLeakWatcher (js泄露检测)</a>接口开启了泄漏检测功能。</p>       <p>具体使用步骤为：</p>       <ol>        <li>应用调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-jsleakwatcher#jsleakwatcherenable" target="_blank">jsLeakWatcher.enable</a>接口。</li>        <li>应用调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-jsleakwatcher#jsleakwatcherwatch" target="_blank">jsLeakWatcher.watch</a>接口。</li>        <li>执行hidumper --mem-jsheap [pid] --leakobj命令，导出虚拟机堆内存和泄漏对象信息。</li>       </ol>       <p>使用样例：</p>       <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --mem-jsheap 64949 --leakobj</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">ls</span> | grep leaklist</span></li><li>hidumper-leaklist-64949-1730873210483</li></ol></pre></div></div></li>     </ul>     <p>上述生成的文件，可以通过hdc<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hdc#文件传输">文件传输</a>命令从设备中获取。</p>    </div>    <div class="tiledSection">     <h2 id="查询cpu使用情况">查询CPU使用情况<i class="anchor-icon anchor-icon-link" anchorid="查询cpu使用情况" tips="复制节点链接"></i></h2>          <p>使用hidumper工具查看CPU相关信息，可以了解到当前系统的CPU负载情况。</p>    </div>    <div class="tiledSection">     <h3 id="查询整机cpu使用率" class="firsth2">查询整机CPU使用率<i class="anchor-icon anchor-icon-link" anchorid="查询整机cpu使用率" tips="复制节点链接"></i></h3>          <p>可使用hidumper --cpuusage获取整机CPU使用率。</p>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --cpuusage</span></li><li>
</li><li>-------------------------------[cpuusage]-------------------------------</li><li>
</li><li>Load average: 12.1 / 12.2 / 12.1; the cpu load average in 1 min, 5 min and 15 min</li><li>CPU usage from 2024-11-06 11:59:33 to 2024-11-06 11:59:38</li><li>Total: 6.38%; User Space: 2.57%; Kernel Space: 3.81%; iowait: 0.02%; irq: 0.14%; idle: 93.46%</li><li>Details of Processes:</li><li>    PID   Total Usage      User Space    Kernel Space    Page Fault Minor    Page Fault Major    Name</li><li>    105      109.01%           0.00%        109.01%             164                   0            tppmgr.elf</li><li>    2          0.89%           0.00%          0.89%               0                   0            sysmgr-main</li><li>...</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="查询进程cpu使用率">查询进程CPU使用率<i class="anchor-icon anchor-icon-link" anchorid="查询进程cpu使用率" tips="复制节点链接"></i></h3>          <p>可使用hidumper --cpuusage pid获取指定进程的CPU使用率。</p>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --cpuusage 1</span></li><li>
</li><li>-------------------------------[cpuusage]-------------------------------</li><li>
</li><li>Load average: 12.1 / 12.2 / 12.1; the cpu load average in 1 min, 5 min and 15 min</li><li>CPU usage from 2024-11-06 11:59:33 to 2024-11-06 11:59:35</li><li>Total: 3.80%; User Space: 1.45%; Kernel Space: 2.35%; iowait: 0.00%; irq: 0.14%; idle: 96.06%</li><li>Details of Processes:</li><li>    PID   Total Usage      User Space    Kernel Space    Page Fault Minor    Page Fault Major    Name</li><li>    1          0.00%           0.00%          0.00%           38368                1394            init</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="查询cpu频率">查询CPU频率<i class="anchor-icon anchor-icon-link" anchorid="查询cpu频率" tips="复制节点链接"></i></h3>          <p>可使用hidumper --cpufreq获取CPU频率信息。</p>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --cpufreq</span></li><li>
</li><li>-------------------------------[cpufreq]-------------------------------</li><li>
</li><li>
</li><li>cmd is: cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq</li><li>
</li><li>1018000</li><li>
</li><li>cmd is: cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_max_freq</li><li>
</li><li>1530000</li><li>...</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="查询系统服务">查询系统服务<i class="anchor-icon anchor-icon-link" anchorid="查询系统服务" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="查询系统服务列表" class="firsth2">查询系统服务列表<i class="anchor-icon anchor-icon-link" anchorid="查询系统服务列表" tips="复制节点链接"></i></h3>          <ul>      <li>可使用hidumper -ls命令获取正在运行的系统服务列表。</li>     </ul>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper -<span class="hljs-built_in">ls</span></span></li><li>System ability list:</li><li>SystemAbilityManager             RenderService                    AbilityManagerService</li><li>DataObserverMgr                  AccountMgr                       AIEngine</li><li>BundleMgr                        FormMgr                          ApplicationManagerService</li><li>AccessibilityManagerService      UserIdmService                   UserAuthService</li><li>AuthExecutorMgrService           PinAuthService                   FaceAuthService</li><li>FingerprintAuthService           WifiDevice                       WifiHotspot</li><li>WifiP2p                          WifiScan                         1125</li><li>1126                             BluetoothHost                    NetConnManager</li><li>NetPolicyManager                 NetStatsManager                  NetTetheringManager</li><li>...</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="获取系统服务详细信息">获取系统服务详细信息<i class="anchor-icon anchor-icon-link" anchorid="获取系统服务详细信息" tips="复制节点链接"></i></h3>          <ul>      <li>可使用hidumper -s获取所有系统服务的详细信息。</li>     </ul>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper -s</span></li><li>
</li><li>-------------------------------[ability]-------------------------------</li><li>
</li><li>
</li><li>----------------------------------SystemAbilityManager----------------------------------</li><li>The arguments are illegal and you can enter '-h' for help.</li><li>
</li><li>-------------------------------[ability]-------------------------------</li><li>
</li><li>
</li><li>----------------------------------RenderService----------------------------------</li><li>------Graphic2D--RenderService ------</li><li>Usage:</li><li>h                             |help text for the tool</li><li>...</li></ol></pre></div></div>     <ul>      <li>可使用hidumper -s [SA0] [SA1]获取指定的一个或多个系统服务的详细信息。其中系统能力名[SA0] [SA1]可通过上述hidumper -ls命令查询得到。</li>     </ul>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper -s WindowManagerService</span></li><li>
</li><li>-------------------------------[ability]-------------------------------</li><li>
</li><li>
</li><li>----------------------------------WindowManagerService----------------------------------</li><li>Usage:</li><li>-h                             |help text for the tool</li><li>-a                             |dump all window information in the system</li><li>-w {window id} [ArkUI Option]  |dump specified window information</li><li>------------------------------------[ArkUI Option]------------------------------------</li><li>...</li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper -s WindowManagerService RenderService</span></li><li>
</li><li>-------------------------------[ability]-------------------------------</li><li>
</li><li>
</li><li>----------------------------------WindowManagerService----------------------------------</li><li>Usage:</li><li>-h                             |help text for the tool</li><li>-a                             |dump all window information in the system</li><li>-w {window id} [ArkUI Option]  |dump specified window information</li><li>------------------------------------[ArkUI Option]------------------------------------</li><li>
</li><li>
</li><li>-------------------------------[ability]-------------------------------</li><li>
</li><li>
</li><li>----------------------------------RenderService----------------------------------</li><li>------Graphic2D--RenderService ------</li><li>Usage:</li><li>h                             |help text for the tool</li><li>screen                         |dump all screen information in the system</li><li>surface                        |dump all surface information</li><li>composer fps                   |dump the fps info of composer</li><li>...</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="获取指定系统服务提供的能力">获取指定系统服务提供的能力<i class="anchor-icon anchor-icon-link" anchorid="获取指定系统服务提供的能力" tips="复制节点链接"></i></h3>          <p>可使用hidumper -s [SA] -a ["option"]可以获取指定系统服务提供的能力。</p>     <p>以RenderService系统渲染服务为例，获取其使用帮助，打印效果如下：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper -s RenderService -a <span class="hljs-string">"h"</span></span></li><li>
</li><li>-------------------------------[ability]-------------------------------</li><li>
</li><li>----------------------------------RenderService----------------------------------</li><li>------ Graphic2D--RenderSerice ------</li><li>Usage:</li><li>gles                          |inquire gpu info</li><li>h                             |help text for the tool</li><li>allInfo                       |dump all info</li><li>fpsCount                      |dump the refresh rate counts info</li><li>surfacenode                   |surfacenode [id]</li><li>trimMem                       |dump trim Mem info</li><li>surface                       |dump all surface information</li><li>MultiRSTrees                  |dump multi RS Trees info</li><li>fpsClear                      |[surface name]/composer fpsClear, clear the fps info</li><li>dumpMem                       |dump Cache</li><li>allSurfacesMem                |dump surface mem info</li><li>RSTree                        |dump RS Tree info</li><li>rsLogFlag                     |set rs log flag</li><li>nodeNotOnTree                 |dump nodeNotOnTree info</li><li>client                        |dump client ui node trees</li><li>clearFpsCount                 |clear the refresh rate counts info</li><li>hitchs                        |[windowname] hitchs, dump the hitchs info of window</li><li>vktextureLimit                |dump vk texture limit info</li><li>EventParamList                |dump EventParamList info</li><li>dumpNode                      |dump render node info</li><li>dumpExistPidMem               |dumpExistPidMem [pid], dump exist pid mem info</li><li>fps                           |[windowname] fps, dump the fps info of window</li><li>flushJankStatsRs              |flush rs jank stats hisysevent</li><li>screen                        |dump all screen infomation in the system</li></ol></pre></div></div>     <p>系统服务提供的具体功能，如获取GPU相关信息，可以使用以下命令，打印结果如下：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper -s RenderService -a <span class="hljs-string">"gles"</span></span></li><li>
</li><li>-------------------------------[ability]-------------------------------</li><li>
</li><li>
</li><li>----------------------------------RenderService----------------------------------</li><li>
</li><li>-- DumpGpuInfo:</li><li>GL_VENDOR: HUAWEI</li><li>GL_RENDERER: Maleoon 910</li><li>GL_VERSION: OpenGL ES 3.2 B283</li><li>GL_SHADING_LANGUAGE_VERSION: OpenGL ES GLSL ES 3.20</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="查询进程信息">查询进程信息<i class="anchor-icon anchor-icon-link" anchorid="查询进程信息" tips="复制节点链接"></i></h2>          <p>可使用hidumper -p [pid]命令获取指定进程的相关信息，包括进程的挂载信息，进程的线程信息，线程的运行时间，进程等待通道信息。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>hidumper -p [pid]命令调试的进程应为“使用调试证书签名的应用”。</p>       <p>确认命令指定的应用是否为可调试应用：参考hidumper --mem-smaps [pid] [-v]命令中的介绍。</p>      </div></div></div>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper -p 64949</span></li><li>
</li><li>-------------------------------[processes]-------------------------------</li><li>
</li><li>
</li><li>cmd is: ps -efT -p 64949</li><li>
</li><li>UID            PID   TID  PPID TCNT STIME TTY          TIME CMD</li><li>20020169     64949 64949   629   17 11:40:14 ?     00:00:00 com.example.jsleakwatcher</li><li>20020169     64949   733   629   17 11:40:28 ?     00:00:00 com.example.jsleakwatcher</li><li>...</li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper -p</span></li><li>
</li><li>-------------------------------[processes]-------------------------------</li><li>
</li><li>
</li><li>cmd is: ps -efT</li><li>
</li><li>UID            PID   TID  PPID TCNT STIME TTY          TIME CMD</li><li>root             1     1     0    1 10:46:59 ?     00:00:08 init --second-stage 2389791</li><li>root             2     2     0  127 10:46:59 ?     00:00:24 [sysmgr-main]</li><li>root             2     4     0  127 10:46:59 ?     00:00:00 [call_ebr]</li><li>...</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="查询网络信息">查询网络信息<i class="anchor-icon anchor-icon-link" anchorid="查询网络信息" tips="复制节点链接"></i></h2>          <p>可使用hidumper --net命令获取网络流量信息，网络接口统计信息、网口统计信息、IP信息、iptable信息和binder信息。该功能是通过netstat、ifconfig、iptables等系统命令获取网络信息。</p>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --net</span></li><li>
</li><li>-------------------------------[net traffic]-------------------------------</li><li>
</li><li>Received Bytes:0</li><li>Sent Bytes:51885</li><li>
</li><li>-------------------------------[net]-------------------------------</li><li>
</li><li>cmd is: netstat -nW  -&gt; 通过netstat -nW命令查询网络连接、路由表、接口统计等网络相关信息。</li><li>...</li></ol></pre></div></div>     <p>可使用hidumper --net [pid]命令获取指定进程的网络流量信息。</p>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --net 1</span></li><li>
</li><li>-------------------------------[net traffic]-------------------------------</li><li>
</li><li>Received Bytes:0</li><li>Sent Bytes:51885</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="查询存储信息">查询存储信息<i class="anchor-icon anchor-icon-link" anchorid="查询存储信息" tips="复制节点链接"></i></h2>          <ul>      <li>可使用hidumper --storage命令获取磁盘统计信息、磁盘使用量信息、文件句柄信息、IO流量统计信息和挂载信息。</li>     </ul>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --storage</span></li><li>
</li><li>-------------------------------[storage]-------------------------------</li><li>
</li><li>
</li><li>cmd is: storaged -u -p</li><li>...</li></ol></pre></div></div>     <ul>      <li>可使用hidumper --storage [pid]命令获取指定进程的IO信息。</li>     </ul>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --storage 1</span></li><li>
</li><li>-------------------------------[storage io]-------------------------------</li><li>
</li><li>
</li><li>/proc/1/io</li><li>
</li><li>rchar: 28848175</li><li>wchar: 4364169</li><li>syscr: 16886</li><li>syscw: 15866</li><li>read_bytes: 30617600</li><li>write_bytes: 10907648</li><li>cancelled_write_bytes: 734003</li></ol></pre></div></div>     <p>IO信息的相关字段解释如下：</p>     <ul>      <li>       <p>rchar：代表自进程启动以来所读取的总字符数，包括通过缓存或直接读取的字符。单位为Byte。</p></li>      <li>       <p>wchar：代表自进程启动以来所写入的总字符数，包括通过缓存或直接写入的字符。单位为Byte。</p></li>      <li>       <p>syscr：代表自进程启动以来所执行的 read 系统调用的次数。</p></li>      <li>       <p>syscw：代表自进程启动以来所执行的 write 系统调用的次数。</p></li>      <li>       <p>read_bytes：代表自进程启动以来所读取的字节数，包括从文件系统、网络等设备读取的字节数。单位为Byte。</p></li>      <li>       <p>write_bytes：代表自进程启动以来所写入的字节数，包括写入到文件系统、网络等设备的字节数。单位为Byte。</p></li>      <li>       <p>cancelled_write_bytes：代表自进程启动以来，因写入操作被取消而未写入的字节数。通常情况下，只有在向磁盘写入数据时发生错误或写入操作被中断时，该字段的值才会非零。单位为Byte。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="查询系统信息">查询系统信息<i class="anchor-icon anchor-icon-link" anchorid="查询系统信息" tips="复制节点链接"></i></h2>          <ul>      <li>可使用hidumper -lc命令获取系统信息簇列表。</li>     </ul>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper -lc</span></li><li>System cluster list:</li><li>base                             system</li></ol></pre></div></div>     <ul>      <li>可使用hidumper -c [系统通信息簇名称]命令获取指定信息簇信息。</li>     </ul>     <p>例如可使用hidumper -c base命令获取设备信息、内核版本、启动参数和启动时间。打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>-------------------------------[base]-------------------------------</li><li>
</li><li>BuildId: ALN-AL00 5.0.1.XXX(XXX)   -&gt; 设备信息</li><li>ReleaseType: Beta1</li><li>OsVersion: phone/HUAWEI/HUAWEI/ALN/HarmonyOS-5.0.1.XXX(Beta1)/ALN-AL10/ALN-AL10/XX/5.0.1.XXX/default</li><li>DeviceType: phone</li><li>...</li><li>
</li><li>/proc/version</li><li>
</li><li>Hongmeng version: HongMeng Kernel X.XX.XX  -&gt; 内核版本</li><li>
</li><li>/proc/cmdline   -&gt; 启动参数</li><li>
</li><li>ohos.boot.post_data_blks=0x0 ohos.boot.ptn_last_blk=0x772AFFF ...</li><li>
</li><li>cmd is: uptime -p</li><li>
</li><li>up 0 weeks, 0 days, 5 hours, 27 minutes   -&gt; 启动时间</li></ol></pre></div></div>     <p>例如可使用hidumper -c system命令获取环境变量、内核模块信息、当前已加载的内核模块、slab信息、zone信息、vmstat、vmalloc信息、cpu频率信息和内存信息。打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper -c system</span></li><li>
</li><li>-------------------------------[system]-------------------------------</li><li>
</li><li>
</li><li>cmd is: printenv   -&gt; 环境变量</li><li>
</li><li>_=/system/bin/printenv</li><li>LANG=en_US.UTF-8</li><li>HOME=/root</li><li>PULSE_STATE_PATH=/data/data/.pulse_dir/state</li><li>OLDPWD=/</li><li>PWD=/</li><li>TMP=/data/local/mtp_tmp/</li><li>PULSE_RUNTIME_PATH=/data/data/.pulse_dir/runtime</li><li>...</li><li>
</li><li>/proc/modules   -&gt; 内核模块信息</li><li>
</li><li>modem_driver 1490944 24 - Live 0x0000000000000000</li><li>hmtpp_freq_dal_kirin 20480 0 [permanent], Live 0x0000000000000000 (O)</li><li>kconsole 20480 0 [permanent], Live 0x0000000000000000 (O)</li><li>hmtpp_dal 40960 2 hmtpp_freq_dal_kirin, Live 0x0000000000000000 (O)</li><li>...</li><li>
</li><li>cmd is: lsmod  -&gt; 当前已加载的内核模块</li><li>
</li><li>Module                  Size  Used by</li><li>modem_driver         1490944  24</li><li>hmtpp_freq_dal_kirin    20480  0 [permanent]</li><li>kconsole               20480  0 [permanent]</li><li>hmtpp_dal              40960  2 hmtpp_freq_dal_kirin</li><li>...</li><li>
</li><li>/proc/slabinfo   -&gt; slab 信息</li><li>
</li><li>slabinfo - version: 2.0</li><li><span class="hljs-meta prompt_">#</span><span class="language-bash">name       &lt;active_objs&gt; &lt;num_objs&gt; &lt;objsize&gt; &lt;objperslab&gt; &lt;pagesperslab&gt; : tunables &lt;<span class="hljs-built_in">limit</span>&gt; &lt;batchcount&gt; &lt;sharedfactor&gt; : slabdata &lt;active_slabs&gt; &lt;num_slabs&gt; &lt;num_pool&gt; &lt;sharedavail&gt; &lt;reclaimable&gt;</span></li><li>slab-[16]                  48459  54432     16    252      1 : tunables 0 0 0 : slabdata    215    216      4 0 0</li><li>slab-[24]                  78315  83328     24    168      1 : tunables 0 0 0 : slabdata    496    496      4 0 0</li><li>slab-[32]                   5834   9954     32    126      1 : tunables 0 0 0 : slabdata     79     79      4 0 0</li><li>...</li><li>
</li><li>/proc/zoneinfo   -&gt; zone 信息</li><li>
</li><li>Node 0, zone      DMA</li><li>  per-node stats</li><li>      nr_inactive_anon 419922</li><li>      nr_active_anon 11737</li><li>      nr_inactive_file 381289</li><li>      nr_active_file 456643</li><li>...</li><li>
</li><li>/proc/vmstat   -&gt; vmstat 信息</li><li>
</li><li>workingset_refault_anon    63071</li><li>workingset_refault_file        0</li><li>workingset_activate_anon     1742</li><li>workingset_activate_file        0</li><li>...</li><li>
</li><li>/proc/vmallocinfo   -&gt; vmalloc 信息</li><li>
</li><li>0x0000000000000000-0x0000000000000000    4096 of_iomap+0xe4/0xec pages=1 phys=0xfb21b000 ioremap</li><li>0x0000000000000000-0x0000000000000000    4096 of_iomap+0xe4/0xec pages=1 phys=0xffb85000 ioremap</li><li>0x0000000000000000-0x0000000000000000    4152 gen_pool_add_owner+0x48/0xc0 pages=2 vmalloc</li><li>0x0000000000000000-0x0000000000000000    4096 of_iomap+0xe4/0xec pages=1 phys=0xee262000 ioremap</li><li>...</li><li>
</li><li>cmd is: cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq   -&gt; CPU 频率信息</li><li>
</li><li>1430000</li><li>
</li><li>cmd is: cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_max_freq</li><li>
</li><li>1530000</li><li>
</li><li>cmd is: cat /sys/devices/system/cpu/cpu1/cpufreq/cpuinfo_cur_freq</li><li>
</li><li>1430000</li><li>...</li><li>
</li><li>-------------------------------[memory]-------------------------------     -&gt; 内存信息</li><li>Total Memory Usage by PID:</li><li>PID        Total Pss(xxx in SwapPss)    Total Vss    Total Rss    Total Uss           GL        Graph          Dma      PurgSum      PurgPin     Name</li><li>1           4001(1672 in SwapPss) kB     59028 kB      5744 kB      1972 kB         0 kB         0 kB         0 kB         0 kB         0 kB     init</li><li>2             50451(0 in SwapPss) kB 18014398163279052 kB     52088 kB     49448 kB         0 kB         0 kB         0 kB         0 kB         0 kB     sysmgr-main</li><li>79             2741(0 in SwapPss) kB   2145468 kB      6052 kB      1292 kB         0 kB         0 kB         0 kB         0 kB         0 kB     crypto.elf</li><li>80             8796(0 in SwapPss) kB   2156116 kB     12584 kB      6940 kB         0 kB         0 kB         0 kB         0 kB         0 kB     devmgr.elf</li><li>85            96861(0 in SwapPss) kB  37180468 kB    100932 kB     94808 kB         0 kB         0 kB         0 kB         0 kB         0 kB     devhost.elf</li><li>501            2256(0 in SwapPss) kB   2142484 kB      3892 kB      1620 kB         0 kB         0 kB         0 kB         0 kB         0 kB     hguard.elf</li><li>586         1656(1412 in SwapPss) kB     32852 kB       744 kB       236 kB         0 kB         0 kB         0 kB         0 kB         0 kB     ueventd</li><li>...</li></ol></pre></div></div>     <ul>      <li>可使用hidumper -c命令获取全量信息簇信息。这包含上述base和system信息簇合集。</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="获取系统故障日志">获取系统故障日志<i class="anchor-icon anchor-icon-link" anchorid="获取系统故障日志" tips="复制节点链接"></i></h2>          <p>可使用hidumper -e命令获取系统故障日志，打印对应故障日志的文件名及详细内容。</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper -e</span></li><li>
</li><li>-------------------------------[faultlog]-------------------------------</li><li>
</li><li>
</li><li>/data/log/faultlog/faultlogger/syswarning-com.ohos.sceneboard-20020022-20241106104006  -&gt; 故障日志文件名</li><li>
</li><li>Generated by HiviewDFX@HarmonyOS  -&gt; 故障日志详细内容</li><li>...</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="获取进程间通信信息">获取进程间通信信息<i class="anchor-icon anchor-icon-link" anchorid="获取进程间通信信息" tips="复制节点链接"></i></h2>          <p>可使用hidumper --ipc -a --start-stat/stop-stat/stat命令获取整机采集时间区间内IPC信息。</p>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --ipc -a --start-stat</span></li><li>StartIpcStatistics pid:1473 success</li><li>StartIpcStatistics pid:775 success</li><li>StartIpcStatistics pid:1472 success</li><li>...</li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --ipc -a --<span class="hljs-built_in">stat</span></span></li><li>GlobalStatisticsInfo</li><li>CurrentPid:1473</li><li>TotalCount:3</li><li>TotalTimeCost:3783</li><li>--------------------------------ProcessStatisticsInfo-------------------------------</li><li>CallingPid:625</li><li>CallingPidTotalCount:3</li><li>...</li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --ipc -a --stop-stat</span></li><li>StopIpcStatistics pid:1473 success</li><li>StopIpcStatistics pid:775 success</li><li>StopIpcStatistics pid:1472 success</li><li>...</li></ol></pre></div></div>     <p>可使用hidumper --ipc [pid] --start-stat/stop-stat/stat命令获取指定进程采集时间区间内的IPC信息。</p>     <p>打印效果为：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --ipc 1473 --start-stat</span></li><li>StartIpcStatistics pid:1473 success</li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --ipc 1473 --<span class="hljs-built_in">stat</span></span></li><li>GlobalStatisticsInfo</li><li>CurrentPid:1473</li><li>TotalCount:2</li><li>TotalTimeCost:2214</li><li>--------------------------------ProcessStatisticsInfo-------------------------------</li><li>CallingPid:625</li><li>CallingPidTotalCount:2</li><li>CallingPidTotalTimeCost:2214</li><li>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~InterfaceStatisticsInfo~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</li><li>DescriptorCode:OHOS.ILocalAbilityManager_6</li><li>DescriptorCodeCount:2</li><li>DescriptorCodeTimeCost:</li><li>Total:2214 | Max:1444 | Min:770 | Avg:1107</li><li>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</li><li>------------------------------------------------------------------------------------</li><li><span class="hljs-meta prompt_"></span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --ipc 1473 --stop-stat</span></li><li>StopIpcStatistics pid:1473 success</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="导出信息压缩存储">导出信息压缩存储<i class="anchor-icon anchor-icon-link" anchorid="导出信息压缩存储" tips="复制节点链接"></i></h2>          <p>hidumper提供有--zip命令支持将任意类型导出信息输出到 /data/log/hidumper 下的压缩文件，可以与其他命令组合使用，压缩格式为ZIP，文件命名为当前时间戳，如下打印效果所示。</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper --zip</span></li><li><span class="hljs-meta prompt_">100%</span><span class="language-bash">,[-],The result is:/data/log/hidumper/20250622-120444-166.zip</span></li></ol></pre></div></div>     <p>例如，对于 hidumper -e 命令获取系统故障日志，其输出的文本内容较多，可以考虑使用压缩存储，打印效果如下：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper -e</span></li><li>
</li><li>-------------------------------[faultlog]-------------------------------</li><li>
</li><li>
</li><li>/data/log/faultlog/faultlogger/syswarning-com.ohos.sceneboard-20020022-20241106104006  -&gt; 故障日志文件名</li><li>
</li><li>Generated by HiviewDFX@HarmonyOS</li><li>...  -&gt; 故障日志详细内容，大量的文本内容，此处省略</li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hidumper -e --zip</span></li><li><span class="hljs-meta prompt_">100%</span><span class="language-bash">,[-],The result is:/data/log/hidumper/20250623-092235-087.zip</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="常用arkui基础信息显示能力">常用ArkUI基础信息显示能力<i class="anchor-icon anchor-icon-link" anchorid="常用arkui基础信息显示能力" tips="复制节点链接"></i></h2>          <p>ArkUI基于hidumper增强开发了获取组件树等信息的能力。</p>    </div>    <div class="tiledSection">     <h3 id="获取应用窗口信息" class="firsth2">获取应用窗口信息<i class="anchor-icon anchor-icon-link" anchorid="获取应用窗口信息" tips="复制节点链接"></i></h3>          <p>打印全量窗口信息，可以在全量信息中找出对应窗口的WinId，将该WinId作为参数传递给其他命令以获取相关信息。</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>hdc shell hidumper -s WindowManagerService -a '-a'</li></ol></pre></div></div>     <p><strong>使用样例：</strong></p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>-------------------------------[ability]-------------------------------</li><li>
</li><li>
</li><li>----------------------------------WindowManagerService---------------------------------</li><li>-------------------------------------ScreenGroup 1-------------------------------------</li><li>WindowName             DisplayId Pid     WinId Type Mode Flag ZOrd Orientation [ x    y    w    h    ]</li><li>ScreenLockWindow       0         1274    2     2110 1    0    4    0           [ 0    0    720  1280 ]</li><li>SystemUi_NavigationBar 0         1274    5     2112 102  1    3    0           [ 0    1208 720  72   ]</li><li>SystemUi_StatusBar     0         1274    4     2108 102  1    2    0           [ 0    0    720  72   ]</li><li>settings0              0         10733   11    1    1    1    1    0           [ 0    72   720  1136 ]</li><li>EntryView              0         1546    8     2001 1    0    0    8           [ 0    0    720  1280 ]</li><li>---------------------------------------------------------------------------------------</li><li>SystemUi_VolumePanel   0         1274    3     2111 1    1    -1   0           [ 0    0    0    0    ]</li><li>SystemUi_DropdownPan   0         1274    6     2109 1    1    -1   0           [ 0    0    0    0    ]</li><li>SystemUi_BannerNotic   0         1274    7     2111 1    1    -1   0           [ 0    0    0    0    ]</li><li>RecentView             0         1546    9     2115 1    1    -1   0           [ 0    0    0    0    ]</li><li>imeWindow              0         1530    10    2105 1    1    -1   0           [ 0    0    0    0    ]</li><li>Focus window: 2</li><li>total window num: 10</li></ol></pre></div></div>     <p>常见windowName与内置应用窗口的对应关系：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.1" valign="top" width="50%">windowName</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.2" valign="top" width="50%">内置应用窗口</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">EntryView</td>         <td class="cellrowborder" valign="top" width="50%">桌面</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">RecentView</td>         <td class="cellrowborder" valign="top" width="50%">最近任务</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">SystemUi_NavigationBar</td>         <td class="cellrowborder" valign="top" width="50%">三键导航</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">SystemUi_StatusBar</td>         <td class="cellrowborder" valign="top" width="50%">状态栏</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">ScreenLockWindow</td>         <td class="cellrowborder" valign="top" width="50%">锁屏</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="获取期望应用组件树">获取期望应用组件树<i class="anchor-icon anchor-icon-link" anchorid="获取期望应用组件树" tips="复制节点链接"></i></h3>          <p>如果需要查看应用中所有组件的信息，可以通过下列命令实现。</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>hdc shell "hidumper -s WindowManagerService -a '-w %windowId% -element'"</li></ol></pre></div></div>     <p>windowId是期望应用的窗口ID。</p>     <p><strong>使用样例：</strong></p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>hdc shell "hidumper -s WindowManagerService -a '-w 5 -element'"</li><li>
</li><li>-------------------------------[ability]-------------------------------</li><li>----------------------------------WindowManagerService---------------------------------</li><li>WindowName: SystemUi_NavigationBar</li><li>DisplayId: 0</li><li>WinId: 5</li><li>Pid: 1274</li><li>Type: 2112</li><li>Mode: 102</li><li>Flag: 1</li><li>Orientation: 0</li><li>IsStartingWindow: false</li><li>FirstFrameCallbackCalled: 0</li><li>IsVisible: false</li><li>WindowRect: [ 0, 1208, 720, 72 ]</li><li>TouchHotAreas: [ 0, 1208, 720, 72 ]</li><li>  |-&gt; RootElement childSize:1</li><li>    | ID: 0</li><li>    | elmtId: -1</li><li>    | retakeID: 16</li><li>    | Active: Y</li><li>    |-&gt; StackElement childSize:2</li><li>      | ID: 1</li><li>      | elmtId: -1</li><li>      | retakeID: 14</li><li>      | Active: Y</li><li>      |-&gt; StageElement childSize:1</li><li>        | ID: 2</li><li>        | elmtId: -1</li><li>        | retakeID: 13</li><li>        | Active: Y</li><li>        |-&gt; PageElement childSize:1</li><li>          | ID: 3</li><li>          | elmtId: -1</li><li>          | retakeID: 569</li><li>          | Active: Y</li><li>......</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="获取应用中指定node的组件信息">获取应用中指定Node的组件信息<i class="anchor-icon anchor-icon-link" anchorid="获取应用中指定node的组件信息" tips="复制节点链接"></i></h3>          <p>如果只需要查看组件中某一节点的组件信息，可以通过下列命令实现。</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>hdc shell "hidumper -s WindowManagerService -a '-w %windowId% -element -lastpage %nodeID%'"</li></ol></pre></div></div>     <p>windowId是应用的窗口ID，nodeID是指定Node的ID。可以通过获取期望应用组件树的操作获取nodeID。</p>     <p><strong>使用样例：</strong></p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>hdc shell "hidumper -s WindowManagerService -a '-w 5 -element -lastpage 3'"</li><li>
</li><li>-------------------------------[ability]-------------------------------</li><li>----------------------------------WindowManagerService---------------------------------</li><li>WindowName: SystemUi_NavigationBar</li><li>DisplayId: 0</li><li>WinId: 5</li><li>Pid: 1274</li><li>Type: 2112</li><li>Mode: 102</li><li>Flag: 1</li><li>Orientation: 0</li><li>IsStartingWindow: false</li><li>FirstFrameCallbackCalled: 0</li><li>IsVisible: false</li><li>WindowRect: [ 0, 1208, 720, 72 ]</li><li>TouchHotAreas: [ 0, 1208, 720, 72 ]</li><li>    |-&gt; PageElement childSize:1</li><li>        | ID: 3</li><li>        | elmtId: -1</li><li>        | retakeID: 569</li><li>        | Active: Y</li><li>......</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="获取期望应用的inspector树">获取期望应用的Inspector树<i class="anchor-icon anchor-icon-link" anchorid="获取期望应用的inspector树" tips="复制节点链接"></i></h3>          <p>上述示例中的element/render树主要包含多项内部实现，与应用代码中的组件无法一一对应。可以通过打印Inspector树来获取与应用中组件对应的树结构及组件基本信息。Inspector树与DevEco Testing及DevEco中的ArkUI Inspector完全匹配。</p>     <p>使用此功能需要先打开ArkUI debug调试开关。</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>hdc shell param set persist.ace.testmode.enabled 1</li></ol></pre></div></div>     <p>set: 设置命令；persist.ace.testmode.enabled：ArkUI debug调试开关名称；1：开关设置为true，打开调试功能。</p>     <p>命令如下：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>hdc shell "hidumper -s WindowManagerService -a '-w %windowId% -inspector'"</li></ol></pre></div></div>     <p><strong>使用样例：</strong></p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>hdc shell "hidumper -s WindowManagerService -a '-w 5 -inspector'"</li><li>
</li><li>|-&gt; rootstacktag childSize:1</li><li>| ID: 2100001</li><li>| compid:</li><li>| text:</li><li>| top: 72.000000</li><li>| left: 0.000000</li><li>| width: 0.000000</li><li>| height: 0.000000</li><li>| visible: 1</li><li>| clickable: 0</li><li>| checkable: 0</li><li>|-&gt; Column childSize:1</li><li>| ID: 128</li><li>| compid:</li><li>| text:</li><li>| top: 72.000000</li><li>| left: 0.000000</li><li>| width: 720.000000</li><li>| height: 1136.000000</li><li>| visible: 1</li><li>| clickable: 0</li><li>| checkable: 0</li><li>|-&gt; GridContainer childSize:1</li><li>| ID: 129</li><li>| compid:</li><li>| text:</li><li>| top: 72.000000</li><li>| left: 0.000000</li><li>| width: 720.000000</li><li>| height: 1136.000000</li><li>| visible: 1</li><li>| clickable: 0</li><li>| checkable: 0</li><li>|-&gt; Column childSize:2</li><li>| ID: 130</li><li>| compid:</li><li>| text:</li><li>| top: 72.000000</li><li>| left: 0.000000</li><li>| width: 720.000000</li><li>| height: 180.000000</li><li>| visible: 1</li><li>| clickable: 0</li><li>| checkable: 0</li><li>
</li><li>......</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="获取期望应用路由栈信息">获取期望应用路由栈信息<i class="anchor-icon anchor-icon-link" anchorid="获取期望应用路由栈信息" tips="复制节点链接"></i></h3>          <p>该命令将输出应用页面路由栈的信息，依据栈的创建顺序及其父子关系排列。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>仅支持通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-navigation-navigation">Navigation</a>组件实现页面路由的应用。</p>      </div></div></div>     <p>命令：</p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>hidumper -s WindowManagerService -a '-w %windowId% -navigation -c'</li></ol></pre></div></div>     <p><strong>使用样例：</strong></p>     <div _ngcontent-djb-c106="" class="highlight-div"><div _ngcontent-djb-c106="" class="highlight-div-header"><div _ngcontent-djb-c106="" class="highlight-div-header-left"><div _ngcontent-djb-c106="" class="handle-button expand-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djb-c106="" class="highlight-div-header-right"><div _ngcontent-djb-c106="" class="handle-button ai-button"></div><div _ngcontent-djb-c106="" class="handle-button line-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djb-c106="" class="handle-button theme-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djb-c106="" class="handle-button copy-button"><div _ngcontent-djb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djb-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>hidumper -s WindowManagerService -a '-w 15 -navigation -c'</li><li>
</li><li>-------------------------------[ability]-------------------------------</li><li>
</li><li>
</li><li>----------------------------------WindowManagerService--------------------------------</li><li>WindowName: myapplication0</li><li>DisplayId: 0</li><li>WinId: 12</li><li>Pid: 5908</li><li>Type: 1</li><li>Mode: 1</li><li>Flag: 0</li><li>Orientation: 0</li><li>IsStartingWindow: false</li><li>FirstFrameCallbackCalled: 1</li><li>VisibilityState: 0</li><li>Focusable: true</li><li>DecoStatus: true</li><li>IsPrivacyMode: false</li><li>isSnapshotSkip: 0</li><li>WindowRect: [ 0, 0, 720, 1280 ]</li><li>TouchHotAreas: [ 0, 0, 720, 1280 ]</li><li>bundleName:com.example.myapplication</li><li>moduleName:entry</li><li> LastRequestVsyncTime: 2351504075334</li><li> transactionFlags: [ 5908, 0 ]</li><li> last vsyncId: 527</li><li>Navigation number: 4</li><li>|-&gt; Navigation ID: 7, Depth: 7, Mode: "SPLIT", NavDestinations:</li><li>  | [0]{ ID: 0, Name: "pageOne", Mode: "STANDARD", IsOnShow: "FALSE" }</li><li>  | [1]{ ID: 1, Name: "pageTwo", Mode: "STANDARD", IsOnShow: "TRUE" }</li><li>|-&gt; Navigation ID: 19, Depth: 7, Mode: "AUTO (STACK)", NavDestinations:</li><li>  |-&gt; Navigation ID: 28, Depth: 11, Mode: "STACK", NavDestinations:</li><li>  | [0]{ ID: 2, Name: "pageOne", Mode: "STANDARD", IsOnShow: "FALSE" }</li><li>  | [1]{ ID: 3, Name: "pageTwo", Mode: "DIALOG", IsOnShow: "FALSE" }</li><li>    |-&gt; Navigation ID: 123, Depth: 11, Mode: "AUTO (SPLIT)", NavDestinations:</li><li>      | [0]{ ID: 4, Name: "pageFive", Mode: "STANDARD", IsOnShow: "FALSE" }</li><li>      | [1]{ ID: 5, Name: "pageSix", Mode: "STANDARD", IsOnShow: "FALSE" }</li><li>  | [2]{ ID: 6, Name: "pageThree", Mode: "STANDARD", IsOnShow: "TRUE" }</li></ol></pre></div></div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>同一级别的节点，显示在最下方的节点为栈顶节点。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="常见问题">常见问题<i class="anchor-icon anchor-icon-link" anchorid="常见问题" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="hidumper-查询到的内存使用情况与hidebug接口获取到的内存使用情况之间的关系" class="firsth2">hidumper 查询到的内存使用情况与Hidebug接口获取到的内存使用情况之间的关系<i class="anchor-icon anchor-icon-link" anchorid="hidumper-查询到的内存使用情况与hidebug接口获取到的内存使用情况之间的关系" tips="复制节点链接"></i></h3>          <p><strong>现象描述</strong></p>     <p>hidumper --mem 系列命令与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-hidebug" target="_blank">HiDebug</a>接口获取到的内存信息存在差异。</p>     <p><strong>可能原因&amp;解决方法</strong></p>     <p>hidumper --mem命令与HiDebug接口内存获取功能详细对比参考下表。</p>     <p><strong>表1</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.1" valign="top" width="25%">命令或接口</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.2" valign="top" width="25%">使用场景</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.3" valign="top" width="25%">数据来源</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.4" valign="top" width="25%">是否导出图形内存</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="25%">hidumper --mem</td>         <td class="cellrowborder" valign="top" width="25%">命令行获取<strong>所有进程</strong>的内存使用情况</td>         <td class="cellrowborder" valign="top" width="25%">系统节点：/proc/pid/smaps_rollup</td>         <td class="cellrowborder" valign="top" width="25%">是</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">hidumper --mem [pid]</td>         <td class="cellrowborder" valign="top" width="25%">命令行获取<strong>单个进程</strong>的内存使用情况</td>         <td class="cellrowborder" valign="top" width="25%">系统节点：/proc/pid/smaps</td>         <td class="cellrowborder" valign="top" width="25%">是</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">hidumper --mem-smaps [pid]</td>         <td class="cellrowborder" valign="top" width="25%">命令行获取<strong>单个进程</strong>的详细内存使用情况</td>         <td class="cellrowborder" valign="top" width="25%">系统节点：/proc/pid/smaps_rollup</td>         <td class="cellrowborder" valign="top" width="25%">否</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-hidebug#hidebuggetappnativememinfo12" target="_blank">hidebug.getAppNativeMemInfo</a></td>         <td class="cellrowborder" valign="top" width="25%">获取<strong>应用自身</strong>的内存使用情况</td>         <td class="cellrowborder" valign="top" width="25%">系统节点：/proc/pid/smaps_rollup</td>         <td class="cellrowborder" valign="top" width="25%">否</td>        </tr>             </tbody></table></div>     </div>     <p>若想通过Hidebug获取图形内存，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hidebug-guidelines">HiDebug能力概述</a>中的相关说明。</p>    </div>    <div class="tiledSection">     <h3 id="hidumper获取进程虚拟机内存和泄露对象信息为空">hidumper获取进程虚拟机内存和泄露对象信息为空<i class="anchor-icon anchor-icon-link" anchorid="hidumper获取进程虚拟机内存和泄露对象信息为空" tips="复制节点链接"></i></h3>          <p><strong>现象描述</strong></p>     <p>通过hidumper --mem-jsheap [pid] --leakobj命令获取指定进程的虚拟机堆内存和泄露对象信息，该命令没有正常生成文件。</p>     <p><strong>可能原因&amp;解决方法</strong></p>     <p>hidumper --mem-jsheap [pid] --leakobj 命令依赖<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-jsleakwatcher" target="_blank">JsLeakWatcher</a>。应用需通过JsLeakWatcher接口开启泄漏检测功能。具体步骤参考：<a href="/consumer/cn/doc/harmonyos-guides/hidumper#查询虚拟机堆内存">查询虚拟机堆内存</a>。</p>    </div>   </div>   <div></div></div>