<h1 _ngcontent-amt-c119="" class="doc-title ng-star-inserted" title="netcopilot工具"> netcopilot工具 </h1>

<div _ngcontent-amt-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>netcopilot是一款帮助开发者进行网络模拟的工具，通过hdc命令行直接调用网络领航员接口，执行网络领航员请求，目前已支持预置场景场景调用和自定义场景调用。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>netcopilot工具从API version 20开始支持。</p> <p>在使用本工具前，开发者需要先获取hdc工具。</p> </div></div></div> <div class="tiledSection"><h2 id="section03762018192815">使用方法<i class="anchor-icon anchor-icon-link" anchorid="section03762018192815" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section11175414311" class="firsth2">命令行说明<i class="anchor-icon anchor-icon-link" anchorid="section11175414311" tips="复制节点链接"></i></h3><div _ngcontent-amt-c106="" class="highlight-div"><div _ngcontent-amt-c106="" class="highlight-div-header"><div _ngcontent-amt-c106="" class="highlight-div-header-left"><div _ngcontent-amt-c106="" class="handle-button expand-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-amt-c106="" class="highlight-div-header-right"><div _ngcontent-amt-c106="" class="handle-button ai-button"></div><div _ngcontent-amt-c106="" class="handle-button line-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-amt-c106="" class="handle-button theme-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-amt-c106="" class="handle-button copy-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-amt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-php-template" data-highlighted="yes"><ol class="linenums"><li><span class="language-xml">hdc shell netcopilot <span class="hljs-tag">&lt;<span class="hljs-name">命令行参数</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">子参数</span>&gt;</span></span></li></ol></pre></div></div> <p>命令行参数和子参数可参考下述参数列表，用户也可先输入hdc shell命令，再执行网络领航员请求。</p> </div> <div class="tiledSection"><h3 id="section48988816318">参数列表<i class="anchor-icon anchor-icon-link" anchorid="section48988816318" tips="复制节点链接"></i></h3><div class="tbBox"><table class="simpletableborder"><tbody><tr><td valign="top"><p>命令行参数</p> </td> <td valign="top"><p>子参数</p> </td> <td valign="top"><p>功能</p> </td> <td valign="top"><p>说明</p> </td> </tr> <tr><td valign="top"><p>-h</p> </td> <td valign="top"><p>NA</p> </td> <td valign="top"><p>输出帮助信息</p> </td> <td valign="top"><p>NA</p> </td> </tr> <tr><td valign="top"><p>-e</p> </td> <td valign="top"><p>0关闭，1开启</p> </td> <td valign="top"><p>开启/关闭领航员</p> </td> <td valign="top"><p>关闭时其他接口不可用。</p> </td> </tr> <tr><td valign="top"><p>-p</p> </td> <td valign="top"><p>NA</p> </td> <td valign="top"><p>打印网络场景列表</p> </td> <td valign="top"><p>默认会打印预置场景列表：</p> <p>进出电梯</p> <p>离家断开WLAN</p> <p>到家连接WLAN</p> <p>人员拥挤的饭堂</p> <p>弱信号的地库</p> <p>乘坐地铁</p> <p>乘坐高铁（多SIM切换）</p> <p>高速公路自驾</p> </td> </tr> <tr><td valign="top"><p>-s</p> </td> <td valign="top"><p>场景id</p> </td> <td valign="top"><p>启动场景模拟</p> </td> <td valign="top"><p>允许在不同场景间直接切换；</p> <p>场景模拟需要满足对应网卡要求，进出电梯、离家断开WLAN、到家连接WLAN场景需要同时连接WLAN和蜂窝网络；其他场景需要连接WLAN或蜂窝网络。</p> </td> </tr> <tr><td valign="top"><p>-c</p> </td> <td valign="top"><p>场景id</p> </td> <td valign="top"><p>取消场景模拟</p> </td> <td valign="top"><p>NA</p> </td> </tr> <tr><td valign="top"><p>-p</p> </td> <td valign="top"><p>场景id</p> </td> <td valign="top"><p>打印自定义场景详情</p> </td> <td valign="top"><p>仅支持自定义场景。</p> </td> </tr> <tr><td valign="top"><p>-a</p> </td> <td valign="top"><p>自定义场景详情</p> </td> <td valign="top"><p>新增自定义场景</p> </td> <td valign="top"><p>通过json字符串增加自定义场景，格式示例：</p> <p>{</p> <p>"scenarioName": "自定义场景",</p> <p>"uplinkBandwidth": 1000000,</p> <p>"downlinkBandwidth": 5000000,</p> <p>"uplinkLatency": 200,</p> <p>"downlinkLatency": 200,</p> <p>"uplinkDropRate": 0.05,</p> <p>"downlinkDropRate": 0.01</p> <p>}</p> </td> </tr> <tr><td valign="top"><p>-d</p> </td> <td valign="top"><p>自定义场景id</p> </td> <td valign="top"><p>删除自定义场景</p> </td> <td valign="top"><p>自定义场景id由网络领航员后端生成，通过-p查询列表获取id后，可以通过-d删除。</p> </td> </tr> </tbody></table></div> </div> <div class="tiledSection"><h2 id="section159145385317">使用示例<i class="anchor-icon anchor-icon-link" anchorid="section159145385317" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section784413484312" class="firsth2">使用帮助<i class="anchor-icon anchor-icon-link" anchorid="section784413484312" tips="复制节点链接"></i></h3><div _ngcontent-amt-c106="" class="highlight-div"><div _ngcontent-amt-c106="" class="highlight-div-header"><div _ngcontent-amt-c106="" class="highlight-div-header-left"><div _ngcontent-amt-c106="" class="handle-button expand-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-amt-c106="" class="highlight-div-header-right"><div _ngcontent-amt-c106="" class="handle-button ai-button"></div><div _ngcontent-amt-c106="" class="handle-button line-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-amt-c106="" class="handle-button theme-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-amt-c106="" class="handle-button copy-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-amt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>&gt; <span class="hljs-variable">hdc</span> <span class="hljs-variable">shell</span> <span class="hljs-variable">netcopilot</span> -<span class="hljs-variable">h</span></li><li><span class="hljs-variable">netcopilot</span> <span class="hljs-variable">usage</span>:</li><li>  -<span class="hljs-variable">h</span> : <span class="hljs-title class_">show</span> <span class="hljs-title class_">help</span> <span class="hljs-title class_">message</span></li><li>  -<span class="hljs-title class_">e</span> &lt;<span class="hljs-title class_">enable</span>&gt;: <span class="hljs-number">0</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">disable</span>, <span class="hljs-number">1</span> <span class="hljs-keyword">for</span> <span class="hljs-variable">enable</span></li><li>  -<span class="hljs-variable">p</span> : <span class="hljs-title class_">print</span> <span class="hljs-title class_">all</span> <span class="hljs-title class_">scenario</span> <span class="hljs-title class_">info</span></li><li>  -<span class="hljs-title class_">s</span> &lt;<span class="hljs-title class_">scenario</span> <span class="hljs-title class_">id</span>&gt;: <span class="hljs-title class_">simulate</span> <span class="hljs-title class_">specified</span> <span class="hljs-title class_">network</span> <span class="hljs-title class_">scenario</span></li><li>  -<span class="hljs-variable">c</span> : <span class="hljs-title class_">cancel</span> <span class="hljs-title class_">simulating</span> <span class="hljs-title class_">scenario</span></li><li>  -<span class="hljs-title class_">P</span> &lt;<span class="hljs-title class_">scenario</span> <span class="hljs-title class_">id</span>&gt;: <span class="hljs-title class_">print</span> <span class="hljs-title class_">specified</span> <span class="hljs-title class_">scenario</span> <span class="hljs-title class_">details</span></li><li>  -<span class="hljs-title class_">a</span> &lt;<span class="hljs-title class_">custom</span> <span class="hljs-title class_">scenario</span> <span class="hljs-title class_">details</span>&gt;: <span class="hljs-title class_">add</span> <span class="hljs-title class_">custom</span> <span class="hljs-title class_">network</span> <span class="hljs-title class_">scenario</span></li><li>  -<span class="hljs-title class_">d</span> &lt;<span class="hljs-title class_">scenario</span> <span class="hljs-title class_">id</span>&gt;: <span class="hljs-title class_">delete</span> <span class="hljs-title class_">custom</span> <span class="hljs-title class_">network</span> <span class="hljs-title class_">scenario</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section11751171212326">开启/关闭领航员<i class="anchor-icon anchor-icon-link" anchorid="section11751171212326" tips="复制节点链接"></i></h3><div _ngcontent-amt-c106="" class="highlight-div"><div _ngcontent-amt-c106="" class="highlight-div-header"><div _ngcontent-amt-c106="" class="highlight-div-header-left"><div _ngcontent-amt-c106="" class="handle-button expand-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-amt-c106="" class="highlight-div-header-right"><div _ngcontent-amt-c106="" class="handle-button ai-button"></div><div _ngcontent-amt-c106="" class="handle-button line-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-amt-c106="" class="handle-button theme-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-amt-c106="" class="handle-button copy-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-amt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-markdown" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-quote">&gt; hdc shell netcopilot -e 0</span></li><li>Disable netcopilot success</li><li>
</li><li><span class="hljs-quote">&gt; hdc shell netcopilot -e 1</span></li><li>Enable netcopilot success</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section13734173553218">查看网络场景列表<i class="anchor-icon anchor-icon-link" anchorid="section13734173553218" tips="复制节点链接"></i></h3><div _ngcontent-amt-c106="" class="highlight-div"><div _ngcontent-amt-c106="" class="highlight-div-header"><div _ngcontent-amt-c106="" class="highlight-div-header-left"><div _ngcontent-amt-c106="" class="handle-button expand-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-amt-c106="" class="highlight-div-header-right"><div _ngcontent-amt-c106="" class="handle-button ai-button"></div><div _ngcontent-amt-c106="" class="handle-button line-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-amt-c106="" class="handle-button theme-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-amt-c106="" class="handle-button copy-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-amt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-lua" data-highlighted="yes"><ol class="linenums"><li>&gt; hdc shell netcopilot -p</li><li>  +<span class="hljs-comment">------------+------------------------------+</span></li><li>  | ScenarioID | ScenarioName                 |</li><li>  +<span class="hljs-comment">------------+------------------------------+</span></li><li>  <span class="hljs-number">1</span>            | 进出电梯</li><li>  <span class="hljs-number">2</span>            | 离家断开WLAN</li><li>  <span class="hljs-number">3</span>            | 到家连上WLAN</li><li>  <span class="hljs-number">4</span>            | 人员拥挤的饭堂</li><li>  <span class="hljs-number">5</span>            | 信号弱的地库</li><li>  <span class="hljs-number">6</span>            | 乘坐地铁</li><li>  <span class="hljs-number">7</span>            | 乘坐高铁（多SIM切换）</li><li>  <span class="hljs-number">8</span>            | 高速公路自驾</li><li>  +<span class="hljs-comment">------------+------------------------------+</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section5682051153216">启动场景模拟<i class="anchor-icon anchor-icon-link" anchorid="section5682051153216" tips="复制节点链接"></i></h3><div _ngcontent-amt-c106="" class="highlight-div"><div _ngcontent-amt-c106="" class="highlight-div-header"><div _ngcontent-amt-c106="" class="highlight-div-header-left"><div _ngcontent-amt-c106="" class="handle-button expand-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-amt-c106="" class="highlight-div-header-right"><div _ngcontent-amt-c106="" class="handle-button ai-button"></div><div _ngcontent-amt-c106="" class="handle-button line-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-amt-c106="" class="handle-button theme-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-amt-c106="" class="handle-button copy-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-amt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li>&gt; hdc shell netcopilot -s <span class="hljs-number">4</span></li><li>Success <span class="hljs-selector-tag">to</span> simulate scenario <span class="hljs-number">4</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section37128343319">停止场景模拟<i class="anchor-icon anchor-icon-link" anchorid="section37128343319" tips="复制节点链接"></i></h3><div _ngcontent-amt-c106="" class="highlight-div"><div _ngcontent-amt-c106="" class="highlight-div-header"><div _ngcontent-amt-c106="" class="highlight-div-header-left"><div _ngcontent-amt-c106="" class="handle-button expand-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-amt-c106="" class="highlight-div-header-right"><div _ngcontent-amt-c106="" class="handle-button ai-button"></div><div _ngcontent-amt-c106="" class="handle-button line-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-amt-c106="" class="handle-button theme-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-amt-c106="" class="handle-button copy-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-amt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li>&gt; hdc shell netcopilot -c <span class="hljs-number">4</span></li><li><span class="hljs-attribute">Clear</span> active net scenario success</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section117841519533">新增自定义场景<i class="anchor-icon anchor-icon-link" anchorid="section117841519533" tips="复制节点链接"></i></h3><div _ngcontent-amt-c106="" class="highlight-div"><div _ngcontent-amt-c106="" class="highlight-div-header"><div _ngcontent-amt-c106="" class="highlight-div-header-left"><div _ngcontent-amt-c106="" class="handle-button expand-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-amt-c106="" class="highlight-div-header-right"><div _ngcontent-amt-c106="" class="handle-button ai-button"></div><div _ngcontent-amt-c106="" class="handle-button line-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-amt-c106="" class="handle-button theme-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-amt-c106="" class="handle-button copy-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-amt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-swift" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-operator">&gt;</span> hdc shell netcopilot <span class="hljs-operator">-</span>a <span class="hljs-string">"{<span class="hljs-subst">\"</span>scenarioName<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>自定义场景1<span class="hljs-subst">\"</span>,<span class="hljs-subst">\"</span>uplinkBandwidth<span class="hljs-subst">\"</span>:100000,<span class="hljs-subst">\"</span>downlinkBandwidth<span class="hljs-subst">\"</span>:500000,<span class="hljs-subst">\"</span>uplinkLatency<span class="hljs-subst">\"</span>:200,<span class="hljs-subst">\"</span>downlinkLatency<span class="hljs-subst">\"</span>:200,<span class="hljs-subst">\"</span>uplinkDropRate<span class="hljs-subst">\"</span>:0.05,<span class="hljs-subst">\"</span>downlinkDropRate<span class="hljs-subst">\"</span>:0.01}"</span></li></ol></pre></div></div> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>自定义场景子参数需要转成json字符串。</p> </div></div></div> </div> <div class="tiledSection"><h3 id="section283525595512">查看自定义场景详情<i class="anchor-icon anchor-icon-link" anchorid="section283525595512" tips="复制节点链接"></i></h3><div _ngcontent-amt-c106="" class="highlight-div"><div _ngcontent-amt-c106="" class="highlight-div-header"><div _ngcontent-amt-c106="" class="highlight-div-header-left"><div _ngcontent-amt-c106="" class="handle-button expand-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-amt-c106="" class="highlight-div-header-right"><div _ngcontent-amt-c106="" class="handle-button ai-button"></div><div _ngcontent-amt-c106="" class="handle-button line-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-amt-c106="" class="handle-button theme-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-amt-c106="" class="handle-button copy-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-amt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>&gt; <span class="hljs-variable">hdc</span> <span class="hljs-variable">shell</span> <span class="hljs-variable">netcopilot</span> -<span class="hljs-variable">P</span> <span class="hljs-number">1000</span></li><li><span class="hljs-variable">Scenario</span> <span class="hljs-variable">Name</span>: <span class="hljs-title class_">自定义场景1</span></li><li><span class="hljs-variable">Uplink</span> <span class="hljs-variable">Bandwidth</span>: <span class="hljs-number">100000</span><span class="hljs-title class_">Kbps</span></li><li><span class="hljs-variable">Downlink</span> <span class="hljs-variable">Bandwidth</span>: <span class="hljs-number">500000</span><span class="hljs-title class_">Kbps</span></li><li><span class="hljs-variable">Uplink</span> <span class="hljs-variable">Latency</span>: <span class="hljs-number">200</span><span class="hljs-title class_">ms</span></li><li><span class="hljs-variable">Downlink</span> <span class="hljs-variable">Latency</span>: <span class="hljs-number">200</span><span class="hljs-title class_">ms</span></li><li><span class="hljs-variable">Uplink</span> <span class="hljs-variable">Drop</span> <span class="hljs-variable">Rate</span>: <span class="hljs-number">0.05</span>%</li><li><span class="hljs-variable">Downlink</span> <span class="hljs-variable">Drop</span> <span class="hljs-variable">Rate</span>: <span class="hljs-number">0.01</span>%</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section3493949185713">删除自定义场景<i class="anchor-icon anchor-icon-link" anchorid="section3493949185713" tips="复制节点链接"></i></h3><div _ngcontent-amt-c106="" class="highlight-div"><div _ngcontent-amt-c106="" class="highlight-div-header"><div _ngcontent-amt-c106="" class="highlight-div-header-left"><div _ngcontent-amt-c106="" class="handle-button expand-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-amt-c106="" class="highlight-div-header-right"><div _ngcontent-amt-c106="" class="handle-button ai-button"></div><div _ngcontent-amt-c106="" class="handle-button line-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-amt-c106="" class="handle-button theme-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-amt-c106="" class="handle-button copy-button"><div _ngcontent-amt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-amt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-markdown" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-quote">&gt; hdc shell netcopilot -d 1000</span></li><li>Delete custom scenario success</li></ol></pre></div></div> </div> </div> <div></div></div>