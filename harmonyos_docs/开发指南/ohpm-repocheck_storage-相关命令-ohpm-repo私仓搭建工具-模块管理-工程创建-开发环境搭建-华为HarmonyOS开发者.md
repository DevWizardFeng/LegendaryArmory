<h1 _ngcontent-ems-c119="" class="doc-title ng-star-inserted" title="ohpm-repo check_storage"> ohpm-repo check_storage </h1>

<div _ngcontent-ems-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001749437796"><p id="ZH-CN_TOPIC_0000002478333738__zh-cn_topic_0000001748470772_p1318901184171146">检查sftp中存储包的完整性。</p> <div class="tiledSection"><h2 id="section154219368103">前提条件<i class="anchor-icon anchor-icon-link" anchorid="section154219368103" tips="复制节点链接"></i></h2><ul id="ZH-CN_TOPIC_0000002478333738__ul0132123142414"><li id="li1324143882413">已成功执行<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-start">start 命令</a>或者<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-restart">restart 命令</a>，ohpm-repo服务启动成功。</li><li id="li151231128162419">数据存储db模块的类型必须为mysql，文件存储store模块的类型必须为sftp。</li></ul> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001748470772_命令格式">命令格式<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001748470772_命令格式" tips="复制节点链接"></i></h2><div _ngcontent-ems-c106="" class="highlight-div"><div _ngcontent-ems-c106="" class="highlight-div-header"><div _ngcontent-ems-c106="" class="highlight-div-header-left"><div _ngcontent-ems-c106="" class="handle-button expand-button"><div _ngcontent-ems-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ems-c106="" class="highlight-div-header-right"><div _ngcontent-ems-c106="" class="handle-button ai-button"></div><div _ngcontent-ems-c106="" class="handle-button line-button"><div _ngcontent-ems-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ems-c106="" class="handle-button theme-button"><div _ngcontent-ems-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ems-c106="" class="handle-button copy-button"><div _ngcontent-ems-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ems-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478333738__zh-cn_topic_0000001748470772_screen1691270342171146" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">ohpm</span>-<span class="hljs-variable">repo</span> <span class="hljs-title class_">check_storage</span> &lt;<span class="hljs-title class_">target</span>&gt; [<span class="hljs-variable">options</span>]</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001748470772_功能描述">功能描述<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001748470772_功能描述" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478333738__zh-cn_topic_0000001748470772_p485600828171146">命令根据元数据检查sftp存储的包是否存在且完整。该命令要求数据存储db模块必须使用mysql，文件存储store模块必须使用sftp。</p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001748470772_参数">参数<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001748470772_参数" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001748470772_target" class="firsth2">&lt;target&gt;<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001748470772_target" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478333738__zh-cn_topic_0000001748470772_ul2069026612171146"><li id="zh-cn_topic_0000001748470772_li1914302858171146">类型：String</li><li id="zh-cn_topic_0000001748470772_li227409404171146">必填参数</li><li id="zh-cn_topic_0000001748470772_li1766928894171146">格式： [&lt;@scope&gt;/]&lt;pkg&gt;[&lt;@version&gt;]或@all</li><li id="zh-cn_topic_0000001748470772_li1581307790171146">说明： &lt;@scope&gt;和&lt;@version&gt;是可选的，&lt;pkg&gt;是包名。</li></ul> <p id="ZH-CN_TOPIC_0000002478333738__zh-cn_topic_0000001748470772_p200757217171146">必须在check_storage命令后面配置&lt;target&gt;参数，指定要检查的包或者用@all指定检查所有包。</p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001748470772_选项">选项<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001748470772_选项" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001748470772_failed" class="firsth2">failed<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001748470772_failed" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478333738__zh-cn_topic_0000001748470772_ul159652722171146"><li id="zh-cn_topic_0000001748470772_li1809739887171146">默认值：无</li><li id="zh-cn_topic_0000001748470772_li1939054436171146">类型：无</li></ul> <p id="ZH-CN_TOPIC_0000002478333738__zh-cn_topic_0000001748470772_p1952522463171146">可以在check_storage命令后面配置--failed选项 ，则只检查在下载错误日志中未被处理的且满足&lt;target&gt;条件的包。</p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001748470772_示例">示例<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001748470772_示例" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478333738__zh-cn_topic_0000001748470772_p253903479171146">执行以下命令，检查包@ohos/basic-ftp的完整性：</p> <div _ngcontent-ems-c106="" class="highlight-div"><div _ngcontent-ems-c106="" class="highlight-div-header"><div _ngcontent-ems-c106="" class="highlight-div-header-left"><div _ngcontent-ems-c106="" class="handle-button expand-button"><div _ngcontent-ems-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ems-c106="" class="highlight-div-header-right"><div _ngcontent-ems-c106="" class="handle-button ai-button"></div><div _ngcontent-ems-c106="" class="handle-button line-button"><div _ngcontent-ems-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ems-c106="" class="handle-button theme-button"><div _ngcontent-ems-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ems-c106="" class="handle-button copy-button"><div _ngcontent-ems-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ems-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002478333738__zh-cn_topic_0000001748470772_screen281224727171146" data-highlighted="yes"><ol class="linenums"><li>ohpm-repo check_storage @ohos/basic-ftp</li></ol></pre></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478333738__zh-cn_topic_0000001748470772_p15561918204512">检查@ohos/basic-ftp包在所有sftp存储目录中的完整性。</p> </div></div></div> <p id="ZH-CN_TOPIC_0000002478333738__zh-cn_topic_0000001748470772_p1810470960171146">结果示例：</p> <p id="ZH-CN_TOPIC_0000002478333738__zh-cn_topic_0000001748470772_p272936291171146"><span><img height="59.79148000000001" originheight="93" originwidth="1095" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104737.21612535442545112956212653470573:50001231000000:2800:DD1EDCAF1FFB754085E68289C4E17951C5A03C5E4DDCD4DA8A2C54CF5A904BB6.png" title="点击放大" width="704.235"></span></p> </div> </div> <div></div></div>