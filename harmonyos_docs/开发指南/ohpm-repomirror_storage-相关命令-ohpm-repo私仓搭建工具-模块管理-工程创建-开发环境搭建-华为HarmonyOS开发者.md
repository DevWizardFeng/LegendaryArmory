<h1 _ngcontent-hpd-c119="" class="doc-title ng-star-inserted" title="ohpm-repo mirror_storage"> ohpm-repo mirror_storage </h1>

<div _ngcontent-hpd-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001749596684"><p id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_p1867556335171146">同步sftp存储的包。</p> <div class="tiledSection"><h2 id="section154219368103">前提条件<i class="anchor-icon anchor-icon-link" anchorid="section154219368103" tips="复制节点链接"></i></h2><ul id="ZH-CN_TOPIC_0000002510293671__ul0132123142414"><li id="li1683311491249">已成功执行<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-start">start 命令</a>或者<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-restart">restart 命令</a>，ohpm-repo服务启动成功。</li><li id="li151231128162419">数据存储db模块的类型必须为mysql，文件存储store模块的类型必须为sftp。</li></ul> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217294_命令格式">命令格式<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217294_命令格式" tips="复制节点链接"></i></h2><div _ngcontent-hpd-c106="" class="highlight-div"><div _ngcontent-hpd-c106="" class="highlight-div-header"><div _ngcontent-hpd-c106="" class="highlight-div-header-left"><div _ngcontent-hpd-c106="" class="handle-button expand-button"><div _ngcontent-hpd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hpd-c106="" class="highlight-div-header-right"><div _ngcontent-hpd-c106="" class="handle-button ai-button"></div><div _ngcontent-hpd-c106="" class="handle-button line-button"><div _ngcontent-hpd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hpd-c106="" class="handle-button theme-button"><div _ngcontent-hpd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hpd-c106="" class="handle-button copy-button"><div _ngcontent-hpd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hpd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_screen1864028030171146" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">ohpm</span>-<span class="hljs-variable">repo</span> <span class="hljs-title class_">mirror_storage</span> &lt;<span class="hljs-title class_">source_sftp</span>&gt; &lt;<span class="hljs-title class_">target_sftp</span>&gt; &lt;<span class="hljs-title class_">target</span>&gt; [<span class="hljs-variable">options</span>]</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217294_功能描述">功能描述<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217294_功能描述" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_p1775300935171146">该命令必须配置文件存储插件模块为sftp。命令会将<strong>源sftp</strong>目录下满足&lt;target&gt;条件的包同步到<strong>目标sftp</strong>目录下。</p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217294_参数">参数<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217294_参数" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217294_source_sftp" class="firsth2">&lt;source_sftp&gt;<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217294_source_sftp" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_ul444440149171146"><li id="zh-cn_topic_0000001745217294_li1310004726171146">类型：String</li><li id="zh-cn_topic_0000001745217294_li1256436216171146">必填参数</li></ul> <p id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_p400749947171146">必须在mirror_storage命令后面配置&lt;source_sftp&gt;参数，指定<strong>源sftp</strong>配置的名字。</p> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217294_target_sftp">&lt;target_sftp&gt;<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217294_target_sftp" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_ul1840945059171146"><li id="zh-cn_topic_0000001745217294_li2123634779171146">类型：String</li><li id="zh-cn_topic_0000001745217294_li846300154171146">必填参数</li></ul> <p id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_p566438653171146">必须在mirror_storage命令后面配置&lt;target_sftp&gt;参数，指定<strong>目标sftp</strong>配置的名字。</p> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217294_target">&lt;target&gt;<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217294_target" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_ul1964769268171146"><li id="zh-cn_topic_0000001745217294_li775269812171146">类型：String</li><li id="zh-cn_topic_0000001745217294_li1770522691171146">必填参数</li><li id="zh-cn_topic_0000001745217294_li901016518171146">格式： [&lt;@scope&gt;/]&lt;pkg&gt;[&lt;@version&gt;] 或 @all</li><li id="zh-cn_topic_0000001745217294_li1761009021171146">说明： &lt;@scope&gt;和&lt;@version&gt;是可选的， &lt;pkg&gt;是包名。</li></ul> <p id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_p2087650869171146">必须在mirror_storage命令后配置&lt;target&gt;参数，指定满足条件的包；或使用@all指定所有包。</p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217294_选项">选项<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217294_选项" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217294_failed" class="firsth2">failed<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217294_failed" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_ul409081511171146"><li id="zh-cn_topic_0000001745217294_li1787413956171146">默认值：无</li><li id="zh-cn_topic_0000001745217294_li1158105575171146">类型：无</li></ul> <p id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_p372518984171146">可以在mirror_storage命令后面配置--failed选项，则只同步在下载错误日志中未被处理的且满足&lt;target&gt;条件的包，如果同步成功，则相应的错误日志会被设置成handled。</p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217294_示例">示例<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217294_示例" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_p1292288165171146">执行以下命令，同步包@ohos/axios@2.0.3：</p> <div _ngcontent-hpd-c106="" class="highlight-div"><div _ngcontent-hpd-c106="" class="highlight-div-header"><div _ngcontent-hpd-c106="" class="highlight-div-header-left"><div _ngcontent-hpd-c106="" class="handle-button expand-button"><div _ngcontent-hpd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hpd-c106="" class="highlight-div-header-right"><div _ngcontent-hpd-c106="" class="handle-button ai-button"></div><div _ngcontent-hpd-c106="" class="handle-button line-button"><div _ngcontent-hpd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hpd-c106="" class="handle-button theme-button"><div _ngcontent-hpd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hpd-c106="" class="handle-button copy-button"><div _ngcontent-hpd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hpd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_screen1341160341171146" data-highlighted="yes"><ol class="linenums"><li>ohpm-repo mirror_storage test_one_sftp test_two_sftp <span class="hljs-keyword">@ohos</span>/axios<span class="hljs-keyword">@2</span>.0.3</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_p366802222171146">说明：将名为test_one_sftp的sftp目录中@ohos/axios@2.0.3包同步到名为test_two_sftp的sftp目录中。</p> <p id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_p549912536171146">结果示例：</p> <p id="ZH-CN_TOPIC_0000002510293671__zh-cn_topic_0000001745217294_p44601551114616"><span><img height="107.021775" originheight="118" originwidth="794" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104737.14876711082540544944420350208939:50001231000000:2800:50EE773D8990B843F3E2B9AB9942A6F9DD1A18E7097FBFB286B7834305DA73DC.png" title="点击放大" width="720.195"></span></p> </div> </div> <div></div></div>