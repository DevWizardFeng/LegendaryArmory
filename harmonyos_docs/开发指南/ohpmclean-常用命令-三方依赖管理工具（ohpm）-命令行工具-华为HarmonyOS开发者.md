<h1 _ngcontent-vyt-c119="" class="doc-title ng-star-inserted" title="ohpm clean"> ohpm clean </h1>

<div _ngcontent-vyt-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001823683981"><p id="ZH-CN_TOPIC_0000002510174373__p174351053361">清理工程下所有模块的ohpm安装产物。</p> <div class="tiledSection"><h2 id="section15031526184116">命令格式<i class="anchor-icon anchor-icon-link" anchorid="section15031526184116" tips="复制节点链接"></i></h2><div _ngcontent-vyt-c106="" class="highlight-div"><div _ngcontent-vyt-c106="" class="highlight-div-header"><div _ngcontent-vyt-c106="" class="highlight-div-header-left"><div _ngcontent-vyt-c106="" class="handle-button expand-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vyt-c106="" class="highlight-div-header-right"><div _ngcontent-vyt-c106="" class="handle-button ai-button"></div><div _ngcontent-vyt-c106="" class="handle-button line-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vyt-c106="" class="handle-button theme-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vyt-c106="" class="handle-button copy-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vyt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002510174373__screen443595123614" data-highlighted="yes"><ol class="linenums"><li>ohpm clean|cls </li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section3562183220411">功能描述<i class="anchor-icon anchor-icon-link" anchorid="section3562183220411" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510174373__p19435155163616">清理工程下所有模块的oh_modules目录、oh-package-lock.json5文件和oh-package-targetName-lock.json5文件（指定选项--target_path安装时生成），清理完成后会在控制台打印耗时信息。</p> </div> <div class="tiledSection"><h2 id="section184194654117">Options<i class="anchor-icon anchor-icon-link" anchorid="section184194654117" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_fetch_timeout" class="firsth2">keep-lockfile<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_fetch_timeout" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002510174373__zh-cn_topic_0000001745217270_ul1418413383204137"><li id="zh-cn_topic_0000001745217270_li1468633224204137">默认值：false</li><li id="zh-cn_topic_0000001745217270_li1037032988204137">类型： Boolean</li><li id="zh-cn_topic_0000001745217270_li1457282337204137">别名：kl</li></ul> <p id="ZH-CN_TOPIC_0000002510174373__p840794412495">可以在 clean 命令后面配置--kl或者--keep-lockfile参数，执行清理时会保留oh-package-lock.json5文件和oh-package-targetName-lock.json5文件（指定选项--target_path安装时生成）。</p> </div> <div class="tiledSection"><h2 id="section85971249174112">注意事项<i class="anchor-icon anchor-icon-link" anchorid="section85971249174112" tips="复制节点链接"></i></h2><ul id="ZH-CN_TOPIC_0000002510174373__ul64357520369"><li id="li15435254361">clean命令只会清理工程根目录和在build-profile.json5文件中modules节点下配置的模块。</li><li id="li144351853364">当build-profile.json5文件不存在时，当前oh-package.json5文件所在目录即为工程根目录。</li></ul> </div> <div class="tiledSection"><h2 id="section11339133216434">示例<i class="anchor-icon anchor-icon-link" anchorid="section11339133216434" tips="复制节点链接"></i></h2><div class="p" id="ZH-CN_TOPIC_0000002510174373__p543517516367">当前工程为 test，子模块为testModule1，工程结构如下：<div _ngcontent-vyt-c106="" class="highlight-div"><div _ngcontent-vyt-c106="" class="highlight-div-header"><div _ngcontent-vyt-c106="" class="highlight-div-header-left"><div _ngcontent-vyt-c106="" class="handle-button expand-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vyt-c106="" class="highlight-div-header-right"><div _ngcontent-vyt-c106="" class="handle-button ai-button"></div><div _ngcontent-vyt-c106="" class="handle-button line-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vyt-c106="" class="handle-button theme-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vyt-c106="" class="handle-button copy-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vyt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-go" id="ZH-CN_TOPIC_0000002510174373__screen2052195194210" data-highlighted="yes"><ol class="linenums"><li>test </li><li>|————testModule1   </li><li>     |————libs   </li><li>     |————oh-<span class="hljs-keyword">package</span>.json5 </li><li>|————build-profile.json5 </li><li>|————oh-<span class="hljs-keyword">package</span>.json5  </li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002510174373__p6801116174618"></p> <div class="p" id="ZH-CN_TOPIC_0000002510174373__p6435054361">在当前工程的任意子目录执行（以libs目录下执行为例）：<div _ngcontent-vyt-c106="" class="highlight-div"><div _ngcontent-vyt-c106="" class="highlight-div-header"><div _ngcontent-vyt-c106="" class="highlight-div-header-left"><div _ngcontent-vyt-c106="" class="handle-button expand-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vyt-c106="" class="highlight-div-header-right"><div _ngcontent-vyt-c106="" class="handle-button ai-button"></div><div _ngcontent-vyt-c106="" class="handle-button line-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vyt-c106="" class="handle-button theme-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vyt-c106="" class="handle-button copy-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vyt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002510174373__screen789616634313" data-highlighted="yes"><ol class="linenums"><li>ohpm clean </li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002510174373__p18143185444512"></p> <div class="p" id="ZH-CN_TOPIC_0000002510174373__p11435454368">结果示例：<div _ngcontent-vyt-c106="" class="highlight-div"><div _ngcontent-vyt-c106="" class="highlight-div-header"><div _ngcontent-vyt-c106="" class="highlight-div-header-left"><div _ngcontent-vyt-c106="" class="handle-button expand-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vyt-c106="" class="highlight-div-header-right"><div _ngcontent-vyt-c106="" class="handle-button ai-button"></div><div _ngcontent-vyt-c106="" class="handle-button line-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vyt-c106="" class="handle-button theme-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vyt-c106="" class="handle-button copy-button"><div _ngcontent-vyt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vyt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510174373__screen917191513436" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">D</span>:\<span class="hljs-title class_">test</span>\<span class="hljs-title class_">testModule1</span>\<span class="hljs-title class_">libs</span>&gt;<span class="hljs-title class_">ohpm</span> <span class="hljs-title class_">clean</span> </li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">DEBUG</span>: <span class="hljs-title class_">startClean</span>. </li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">DEBUG</span>: <span class="hljs-title class_">clean</span> <span class="hljs-title class_">all</span> <span class="hljs-title class_">modules</span> <span class="hljs-title class_">under</span>: <span class="hljs-title class_">D</span>:\<span class="hljs-title class_">test</span> </li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">DEBUG</span>: <span class="hljs-title class_">begin</span> <span class="hljs-title class_">to</span> <span class="hljs-title class_">clean</span> <span class="hljs-title class_">module</span>: <span class="hljs-title class_">D</span>:\<span class="hljs-title class_">test</span>\<span class="hljs-title class_">testModule1</span> </li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">DEBUG</span>: <span class="hljs-title class_">begin</span> <span class="hljs-title class_">to</span> <span class="hljs-title class_">clean</span> <span class="hljs-title class_">module</span>: <span class="hljs-title class_">D</span>:\<span class="hljs-title class_">test</span> </li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">DEBUG</span>: <span class="hljs-title class_">clean</span> <span class="hljs-title class_">module</span>: <span class="hljs-title class_">D</span>:\<span class="hljs-title class_">test</span>\<span class="hljs-title class_">testModule1</span> <span class="hljs-title class_">succeed</span>. </li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">DEBUG</span>: <span class="hljs-title class_">clean</span> <span class="hljs-title class_">module</span>: <span class="hljs-title class_">D</span>:\<span class="hljs-title class_">test</span> <span class="hljs-title class_">succeed</span>. </li><li><span class="hljs-variable">clean</span> <span class="hljs-variable">completed</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span><span class="hljs-variable">s</span> <span class="hljs-number">67</span><span class="hljs-variable">ms</span></li></ol></pre></div></div> </div> </div> </div> <div></div></div>