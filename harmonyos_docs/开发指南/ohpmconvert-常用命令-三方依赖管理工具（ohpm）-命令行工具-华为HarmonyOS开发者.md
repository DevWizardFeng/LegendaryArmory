<h1 _ngcontent-ycr-c119="" class="doc-title ng-star-inserted" title="ohpm convert"> ohpm convert </h1>

<div _ngcontent-ycr-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001840722884"><p id="ZH-CN_TOPIC_0000002510294481__p5621901481">将npm三方库转换为ohpm三方库。因为语法差异，转换时仅对文件进行格式转换，不修改原npm包的代码逻辑。若HAR包在转换后出现代码不兼容的报错，开发者需修改原npm包的代码做适配。</p> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217270_命令格式">命令格式<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_命令格式" tips="复制节点链接"></i></h2><div _ngcontent-ycr-c106="" class="highlight-div"><div _ngcontent-ycr-c106="" class="highlight-div-header"><div _ngcontent-ycr-c106="" class="highlight-div-header-left"><div _ngcontent-ycr-c106="" class="handle-button expand-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ycr-c106="" class="highlight-div-header-right"><div _ngcontent-ycr-c106="" class="handle-button ai-button"></div><div _ngcontent-ycr-c106="" class="handle-button line-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ycr-c106="" class="handle-button theme-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ycr-c106="" class="handle-button copy-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ycr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_screen369140342204137" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">convert</span> [[&lt;@<span class="hljs-title class_">group</span>&gt;/]&lt;<span class="hljs-title class_">pkg</span>&gt;[@&lt;<span class="hljs-title class_">version</span>&gt; | @<span class="hljs-title function_">tag</span>:&lt;<span class="hljs-title class_">tag</span>&gt;]] --<span class="hljs-title class_">registry</span> &lt;<span class="hljs-title class_">string</span>&gt; [--<span class="hljs-variable">publish</span>]</li><li><span class="hljs-variable">ohpm</span> <span class="hljs-title class_">convert</span> &lt;<span class="hljs-title class_">node_modules_path</span>&gt; [--<span class="hljs-variable">publish</span>]</li></ol></pre></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_ul498546928204137"><li id="zh-cn_topic_0000001745217270_li1951201661204137">@group：三方库的命名空间，可选。</li><li id="zh-cn_topic_0000001745217270_li473990679204137">pkg：三方库名称，必选。</li><li id="zh-cn_topic_0000001745217270_li226929744204137">version：三方库的版本号，可选。</li><li id="li19604636172614">tag：三方库的标签，标签会标记三方库的某个版本号，可选。</li></ul> </div></div></div> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217270_功能描述">功能描述<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_功能描述" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_p1172083752204137">将指定npm仓库中的某个包或者本地node_modules目录下的包转换成满足ohpm格式要求的HAR包，并保存至当前工作目录，转换后的包将支持上传至ohpm-repo私仓或OpenHarmony三方库中心仓。</p> <ul id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_ul1155202760204137"><li id="zh-cn_topic_0000001745217270_li332731694204137"><p id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_p1333794576204137">ohpm convert @group/pkg@version --registry &lt;npm仓库地址&gt;</p> <p id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_p416965912204137">下载指定仓库中的某个包及其所有依赖项，并且将该包及其依赖转换为满足ohpm格式要求的HAR包。</p> </li><li id="zh-cn_topic_0000001745217270_li1962626748204137"><p id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_p1294161998204137">ohpm convert &lt;node_modules_path&gt;</p> <p id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_p560551256204137">转换本地node_modules中的所有包为满足ohpm格式要求的HAR包，&lt;node_modules_path&gt;必须为npm执行install命令后生成的node_modules目录。</p> <p id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_p541850181204137">示例：</p> <div _ngcontent-ycr-c106="" class="highlight-div"><div _ngcontent-ycr-c106="" class="highlight-div-header"><div _ngcontent-ycr-c106="" class="highlight-div-header-left"><div _ngcontent-ycr-c106="" class="handle-button expand-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ycr-c106="" class="highlight-div-header-right"><div _ngcontent-ycr-c106="" class="handle-button ai-button"></div><div _ngcontent-ycr-c106="" class="handle-button line-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ycr-c106="" class="handle-button theme-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ycr-c106="" class="handle-button copy-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ycr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_screen1723190472204137" data-highlighted="yes"><ol class="linenums"><li>ohpm convert ./xxxx/node_modules</li></ol></pre></div></div> </li></ul> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002510294481__p11296123615811">ohpm convert命令仅保留npm包中package.json配置文件中的name、version、main、types、license、description、author、keywords、homepage、repository、artifactType、dependencies、devDependencies、dynamicDependencies、overrides、scripts、hooks，module、packageType、typesVersions、exports和jsnext:main字段，具体字段说明请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-oh-package-json5#zh-cn_topic_0000001792256137_oh-packagejson5-字段说明">oh-package.json5 字段说明</a>。</p> </div></div></div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217270_options">Options<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_options" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_registry" class="firsth2">registry<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_registry" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_ul247457455204137"><li id="zh-cn_topic_0000001745217270_li1275077874204137">默认值：无</li><li id="zh-cn_topic_0000001745217270_li1350448840204137">类型：URL</li></ul> <p id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_p875699641204137">可以在convert命令后面配置 --registry &lt;registry&gt; 参数，指定仓库地址。如果指定了--registry，convert命令将从远程仓库地址下载指定的包及其依赖后，进行转换处理。如果没有指定--registry，convert命令将从本地node_modules目录进行转换处理。</p> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_fetch_timeout">publish<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_fetch_timeout" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_ul1418413383204137"><li id="zh-cn_topic_0000001745217270_li1468633224204137">默认值：false</li><li id="zh-cn_topic_0000001745217270_li1037032988204137">类型： Boolean</li></ul> <p id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_p1294596417204137">可以在 convert命令后面配置 --publish 参数 ，若指定该参数，执行convert命令前请确认.ohpmrc推包相关配置无误，当所有包转换完成后将根据.ohpmrc中的配置依次进行推包。</p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217270_示例">示例<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_示例" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510294481__p17210126124610"><strong>转换远程npm三方库中的包</strong></p> <p id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_p83740452204137">转换npm三方库中的axios包，执行以下命令：</p> <div _ngcontent-ycr-c106="" class="highlight-div"><div _ngcontent-ycr-c106="" class="highlight-div-header"><div _ngcontent-ycr-c106="" class="highlight-div-header-left"><div _ngcontent-ycr-c106="" class="handle-button expand-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ycr-c106="" class="highlight-div-header-right"><div _ngcontent-ycr-c106="" class="handle-button ai-button"></div><div _ngcontent-ycr-c106="" class="handle-button line-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ycr-c106="" class="handle-button theme-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ycr-c106="" class="handle-button copy-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ycr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-sql" id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_screen1208639750204137" data-highlighted="yes"><ol class="linenums"><li>ohpm <span class="hljs-keyword">convert</span> axios <span class="hljs-comment">--registry https://registry.npmjs.org/</span></li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_p169938167204137">结果示例：</p> <div _ngcontent-ycr-c106="" class="highlight-div"><div _ngcontent-ycr-c106="" class="highlight-div-header"><div _ngcontent-ycr-c106="" class="highlight-div-header-left"><div _ngcontent-ycr-c106="" class="handle-button expand-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ycr-c106="" class="highlight-div-header-right"><div _ngcontent-ycr-c106="" class="handle-button ai-button"></div><div _ngcontent-ycr-c106="" class="handle-button line-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ycr-c106="" class="handle-button theme-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ycr-c106="" class="handle-button copy-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ycr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294481__screen6268151914717" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">PS</span> <span class="hljs-variable">C</span>:\<span class="hljs-title class_">Users</span>\<span class="hljs-title class_">xxxxx</span>\<span class="hljs-title class_">Desktop</span>&gt; <span class="hljs-title class_">ohpm</span> <span class="hljs-title class_">convert</span> <span class="hljs-title class_">axios</span> --<span class="hljs-title class_">registry</span> <span class="hljs-title class_">https</span>:<span class="hljs-comment">//registry.npmjs.org</span></li><li>...</li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">INFO</span>: &gt; <span class="hljs-title class_">start</span> <span class="hljs-title class_">convert</span> <span class="hljs-keyword">package</span>: <span class="hljs-title class_">asynckit</span>@<span class="hljs-number">0.4</span><span class="hljs-number">.0</span></li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">INFO</span>: &gt; <span class="hljs-title class_">start</span> <span class="hljs-title class_">convert</span> <span class="hljs-keyword">package</span>: <span class="hljs-title class_">axios</span>@<span class="hljs-number">1.6</span><span class="hljs-number">.8</span></li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">INFO</span>: &gt; <span class="hljs-title class_">start</span> <span class="hljs-title class_">convert</span> <span class="hljs-keyword">package</span>: <span class="hljs-title class_">combined</span>-<span class="hljs-title class_">stream</span>@<span class="hljs-number">1.0</span><span class="hljs-number">.8</span></li><li>...</li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">INFO</span>: <span class="hljs-title class_">A</span> <span class="hljs-title class_">total</span> <span class="hljs-title class_">of</span> <span class="hljs-number">9</span> <span class="hljs-title class_">packets</span> <span class="hljs-title class_">are</span> <span class="hljs-title class_">converted</span> <span class="hljs-title class_">successfully</span>.</li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">INFO</span>: <span class="hljs-title class_">Converted</span> <span class="hljs-title class_">packages</span> <span class="hljs-title class_">are</span> <span class="hljs-title class_">saved</span> <span class="hljs-title class_">to</span> <span class="hljs-title class_">the</span> <span class="hljs-string">"C:\Users\xxxxx\Desktop\convert_1712127991590"</span> <span class="hljs-title class_">directory</span>.</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510294481__zh-cn_topic_0000001745217270_p1248713242217"><span><img height="165.275775" originheight="236" originwidth="627" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104951.54837835951866847750601822442818:50001231000000:2800:EFAFDE3AB19EC0A6318E02F79F837B5B38D73DDC39F2BFD88BF09B05F34D26EB.png" title="点击放大" width="432.92603900000006"></span></p> <p id="ZH-CN_TOPIC_0000002510294481__p1718764021519"></p> <p id="ZH-CN_TOPIC_0000002510294481__p12693183485118"><strong>转换本地node_modules目录中的包</strong></p> <p id="ZH-CN_TOPIC_0000002510294481__p614523201516">执行npm install uuid后，转换本地node_modules目录中的包，执行以下命令：</p> <p id="ZH-CN_TOPIC_0000002510294481__p1865735721912"><span><img originheight="103" originwidth="433" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104951.02221087274631661228672173015512:50001231000000:2800:C1572E0872B0332B441C2D2DAC8AE359EE4397B3132DD8550E1176D49961C49C.png" width="433" height="103"></span></p> <div _ngcontent-ycr-c106="" class="highlight-div"><div _ngcontent-ycr-c106="" class="highlight-div-header"><div _ngcontent-ycr-c106="" class="highlight-div-header-left"><div _ngcontent-ycr-c106="" class="handle-button expand-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ycr-c106="" class="highlight-div-header-right"><div _ngcontent-ycr-c106="" class="handle-button ai-button"></div><div _ngcontent-ycr-c106="" class="handle-button line-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ycr-c106="" class="handle-button theme-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ycr-c106="" class="handle-button copy-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ycr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294481__screen314533212157" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">convert</span> <span class="hljs-variable">C</span>:\<span class="hljs-title class_">Users</span>\<span class="hljs-title class_">xxxxx</span>\<span class="hljs-title class_">Desktop</span>\<span class="hljs-title class_">uuidInstallDir</span>\<span class="hljs-title class_">node_modules</span></li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510294481__p11451132201518">结果示例：</p> <div _ngcontent-ycr-c106="" class="highlight-div"><div _ngcontent-ycr-c106="" class="highlight-div-header"><div _ngcontent-ycr-c106="" class="highlight-div-header-left"><div _ngcontent-ycr-c106="" class="handle-button expand-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ycr-c106="" class="highlight-div-header-right"><div _ngcontent-ycr-c106="" class="handle-button ai-button"></div><div _ngcontent-ycr-c106="" class="handle-button line-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ycr-c106="" class="handle-button theme-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ycr-c106="" class="handle-button copy-button"><div _ngcontent-ycr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ycr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294481__screen51459324157" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">PS</span> <span class="hljs-variable">C</span>:\<span class="hljs-title class_">Users</span>\<span class="hljs-title class_">xxxxx</span>\<span class="hljs-title class_">Desktop</span>&gt; <span class="hljs-title class_">ohpm</span> <span class="hljs-title class_">convert</span> <span class="hljs-title class_">C</span>:\<span class="hljs-title class_">Users</span>\<span class="hljs-title class_">xxxxx</span>\<span class="hljs-title class_">Desktop</span>\<span class="hljs-title class_">uuidInstallDir</span>\<span class="hljs-title class_">node_modules</span></li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">INFO</span>: &gt; <span class="hljs-title class_">start</span> <span class="hljs-title class_">convert</span> <span class="hljs-keyword">package</span>: <span class="hljs-title class_">uuid</span></li><li>...</li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">INFO</span>: <span class="hljs-title class_">A</span> <span class="hljs-title class_">total</span> <span class="hljs-title class_">of</span> <span class="hljs-number">1</span> <span class="hljs-keyword">package</span>(<span class="hljs-title class_">s</span>) <span class="hljs-title class_">are</span> <span class="hljs-title class_">converted</span> <span class="hljs-title class_">successfully</span>.</li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">INFO</span>: <span class="hljs-title class_">Converted</span> <span class="hljs-title class_">packages</span> <span class="hljs-title class_">are</span> <span class="hljs-title class_">saved</span> <span class="hljs-title class_">to</span> <span class="hljs-title class_">the</span> <span class="hljs-string">"C:\Users\xxxxx\Desktop\convert_1712128912583"</span> <span class="hljs-title class_">directory</span>.</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510294481__p1014553213159"><span><img originheight="43" originwidth="580" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104951.11053006839594131406724820690238:50001231000000:2800:65FFA762B3A079401F924052E48D736AA663F8738F8F636C76FE6912455FE007.png" width="580" height="43"></span></p> </div> </div> <div></div></div>