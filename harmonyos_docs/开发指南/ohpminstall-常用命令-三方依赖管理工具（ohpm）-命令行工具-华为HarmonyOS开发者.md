<h1 _ngcontent-opa-c119="" class="doc-title ng-star-inserted" title="ohpm install"> ohpm install </h1>

<div _ngcontent-opa-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001749596620"><p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p1504604383204137">安装三方库。</p> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217270_命令格式">命令格式<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_命令格式" tips="复制节点链接"></i></h2><div _ngcontent-opa-c106="" class="highlight-div"><div _ngcontent-opa-c106="" class="highlight-div-header"><div _ngcontent-opa-c106="" class="highlight-div-header-left"><div _ngcontent-opa-c106="" class="handle-button expand-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opa-c106="" class="highlight-div-header-right"><div _ngcontent-opa-c106="" class="handle-button ai-button"></div><div _ngcontent-opa-c106="" class="handle-button line-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opa-c106="" class="handle-button theme-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opa-c106="" class="handle-button copy-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opa-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_screen369140342204137" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">install</span> [<span class="hljs-variable">options</span>] [[&lt;@<span class="hljs-title class_">group</span>&gt;/]&lt;<span class="hljs-title class_">pkg</span>&gt;[@&lt;<span class="hljs-title class_">version</span>&gt; | @<span class="hljs-title function_">tag</span>:&lt;<span class="hljs-title class_">tag</span>&gt;]] ...</li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">install</span> [<span class="hljs-variable">options</span>] &lt;<span class="hljs-title class_">folder</span>&gt; </li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">install</span> [<span class="hljs-variable">options</span>] &lt;<span class="hljs-title class_">har</span> <span class="hljs-title class_">file</span>&gt;</li><li><span class="hljs-variable">alias</span>: <span class="hljs-title class_">i</span></li></ol></pre></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_ul498546928204137"><li id="zh-cn_topic_0000001745217270_li1951201661204137">@group：三方库的命名空间，可选。</li><li id="zh-cn_topic_0000001745217270_li473990679204137">pkg：三方库名称，可选；当 install 后面没有指定三方库名称时，会根据当前目录下 oh-package.json5 定义的依赖关系进行全量安装。</li><li id="zh-cn_topic_0000001745217270_li226929744204137">version：三方库的版本号，可选。</li><li id="li19604636172614">tag：三方库的标签，标签会标记三方库的某个版本号，可选。</li></ul> </div></div></div> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217270_功能描述">功能描述<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_功能描述" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p1172083752204137">用于安装指定组件或 oh-package.json5 文件中所有的依赖。如果存在 oh-package-lock.json5 文件，安装将取决于 oh-package-lock.json5 文件中锁定的版本。</p> <ul id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_ul1155202760204137"><li id="zh-cn_topic_0000001745217270_li332731694204137"><p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p1333794576204137">ohpm install</p> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p416965912204137">将依赖项安装到本地 oh_modules 文件夹中，并将所有依赖项作为 dependencies，写入 oh-package.json5 文件。</p> </li><li id="zh-cn_topic_0000001745217270_li1962626748204137"><p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p1294161998204137">ohpm install &lt;folder&gt;</p> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p560551256204137">安装本地文件夹，则默认会创建一个软链接指向该文件夹。</p> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p541850181204137">示例：</p> <div _ngcontent-opa-c106="" class="highlight-div"><div _ngcontent-opa-c106="" class="highlight-div-header"><div _ngcontent-opa-c106="" class="highlight-div-header-left"><div _ngcontent-opa-c106="" class="handle-button expand-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opa-c106="" class="highlight-div-header-right"><div _ngcontent-opa-c106="" class="handle-button ai-button"></div><div _ngcontent-opa-c106="" class="handle-button line-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opa-c106="" class="handle-button theme-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opa-c106="" class="handle-button copy-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opa-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_screen1723190472204137" data-highlighted="yes"><ol class="linenums"><li>ohpm install ../folder</li></ol></pre></div></div> </li><li id="zh-cn_topic_0000001745217270_li1220047060204137"><p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p1295132057204137">ohpm install &lt;har file&gt;</p> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p2004475040204137">安装压缩包，请注意压缩包的要求：</p> <ol id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_ol1696469635204137"><li id="zh-cn_topic_0000001745217270_li1449121031204137">文件名必须使用 .tar, .tar.gz, .tgz, .har 作为扩展名；</li><li id="zh-cn_topic_0000001745217270_li26504089204137">压缩包里面包含子文件 package；</li><li id="zh-cn_topic_0000001745217270_li1085011018204137">子文件夹 package 下面必须包含 oh-package.json5 文件，且配置文件中必须有 name 和 version 字段。</li></ol> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p1785447513204137">示例：</p> <div _ngcontent-opa-c106="" class="highlight-div"><div _ngcontent-opa-c106="" class="highlight-div-header"><div _ngcontent-opa-c106="" class="highlight-div-header-left"><div _ngcontent-opa-c106="" class="handle-button expand-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opa-c106="" class="highlight-div-header-right"><div _ngcontent-opa-c106="" class="handle-button ai-button"></div><div _ngcontent-opa-c106="" class="handle-button line-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opa-c106="" class="handle-button theme-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opa-c106="" class="handle-button copy-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opa-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_screen525017042204137" data-highlighted="yes"><ol class="linenums"><li>ohpm install ./package.har</li></ol></pre></div></div> </li></ul> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217270_options">Options<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_options" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section1954918211519" class="firsth2">all<i class="anchor-icon anchor-icon-link" anchorid="section1954918211519" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478174568__ul5214192511415"><li id="li1021415252418">默认值：true</li><li id="li12142251646">类型：Boolean</li></ul> <p id="ZH-CN_TOPIC_0000002478174568__p142148259417">可以在 install 命令后面配置 --all 参数，安装您项目下所有模块在其 oh-package.json5 中配置的全部依赖项。</p> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_save-dynamic">save-dynamic<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_save-dynamic" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_ul2144057729204137"><li id="zh-cn_topic_0000001745217270_li1891959699204137">默认值：false</li><li id="zh-cn_topic_0000001745217270_li1439824884204137">类型：Boolean</li></ul> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p46952842204137">可以在 install 命令后面配置 --save-dynamic 参数，安装的三方库信息将会写入 oh-package.json5 文件的 dynamicDependencies 中。</p> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_save-dev">save-dev<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_save-dev" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_ul1272352937204137"><li id="zh-cn_topic_0000001745217270_li1091965625204137">默认值：false</li><li id="zh-cn_topic_0000001745217270_li1162734907204137">类型：Boolean</li></ul> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p802655847204137">可以在 install 命令后面配置 --save-dev 参数，安装的三方库信息将会写入 oh-package.json5 文件的 devDependencies 中。</p> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_save-prod">save-prod<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_save-prod" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_ul1426380891204137"><li id="zh-cn_topic_0000001745217270_li952238904204137">默认值：true</li><li id="zh-cn_topic_0000001745217270_li869906725204137">类型：Boolean</li></ul> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p1176648769204137">可以在 install 命令后面配置 --save-prod 参数，安装的三方库信息将会写入 oh-package.json5 文件的 dependencies 中，这是 ohpm 的默认行为。</p> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_no-save">no-save<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_no-save" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_ul1059234457204137"><li id="zh-cn_topic_0000001745217270_li614868916204137">默认值：false</li><li id="zh-cn_topic_0000001745217270_li28818832204137">类型：Boolean</li></ul> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p1544502921204137">可以在 install 命令后面配置 --no-save 参数，安装的三方库信息将不会写入 oh-package.json5 文件中。</p> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_prefix">prefix<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_prefix" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_ul1079255691204137"><li id="zh-cn_topic_0000001745217270_li652043460204137">默认值：""</li><li id="zh-cn_topic_0000001745217270_li1018232657204137">类型： string</li></ul> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p425373706204137">可以在 install 命令后面配置 --prefix &lt;string&gt; 参数，用来指定包的根目录，该目录下必须存在 oh-package.json5 文件。</p> </div> <div class="tiledSection"><h3 id="section1617219566568">parameterFile<i class="anchor-icon anchor-icon-link" anchorid="section1617219566568" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478174568__ul01721456175612"><li id="li71724567561">默认值：无</li><li id="li131729564565">类型： string</li><li id="li155280428585">别名：pf</li></ul> <p id="ZH-CN_TOPIC_0000002478174568__p117265619568">可以在 install 命令后面配置 --pf &lt;string&gt; 或者 --parameterFile &lt;string&gt; 参数，用来指定参数化配置文件地址。使用该命令前需保证项目级别的oh-package.json5中已配置parameterFile参数。</p> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_registry">registry<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_registry" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_ul247457455204137"><li id="zh-cn_topic_0000001745217270_li1275077874204137">默认值：""</li><li id="zh-cn_topic_0000001745217270_li1350448840204137">类型：URL</li></ul> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p875699641204137">可以在 install 命令后面配置 --registry &lt;registry&gt; 参数，指定仓库地址；如果没有指定，默认从配置中获取仓库地址。</p> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_fetch_timeout">fetch_timeout<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_fetch_timeout" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_ul1418413383204137"><li id="zh-cn_topic_0000001745217270_li1468633224204137">默认值：60000</li><li id="zh-cn_topic_0000001745217270_li1037032988204137">类型： Number</li><li id="zh-cn_topic_0000001745217270_li1457282337204137">别名：ft</li></ul> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p1294596417204137">可以在 install 命令后面配置 --ft &lt;number&gt; 或者 --fetch_timeout &lt;number&gt; 参数，设置操作的超时时间，如果没有指定，默认超时时间为60000ms。</p> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_strict_ssl">strict_ssl<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_strict_ssl" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_ul164215995204137"><li id="zh-cn_topic_0000001745217270_li1621845972204137">默认值：true</li><li id="zh-cn_topic_0000001745217270_li2138493650204137">类型： Boolean</li></ul> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p1121659827204137">可以在 install 命令后面配置 --strict_ssl true 参数，校验 https 证书；配置 --strict_ssl false 参数，不校验 https 证书。</p> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_max_concurrent">max_concurrent<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_max_concurrent" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_ul1070644220204137"><li id="zh-cn_topic_0000001745217270_li1303992041204137">默认值：50</li><li id="zh-cn_topic_0000001745217270_li646973577204137">类型： Number</li><li id="zh-cn_topic_0000001745217270_li838456921204137">别名：mc</li></ul> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p1393357780204137">可以在 install 命令后面配置 --mc &lt;number&gt; 或者 --max_concurrent &lt;number&gt; 参数，设置最大活动并发请求数（即ohpm操作期间任何时间的最大网络请求数），如果没有指定，默认最大并发请求数为50次。</p> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_retry_times">retry_times<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_retry_times" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_ul1379612808204137"><li id="zh-cn_topic_0000001745217270_li1874573397204137">默认值：1</li><li id="zh-cn_topic_0000001745217270_li1390731117204137">类型： Number</li><li id="zh-cn_topic_0000001745217270_li1334987384204137">别名：rt</li></ul> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p1205859329204137">可以在 install 命令后面配置 --rt &lt;number&gt; 或者 --retry_times &lt;number&gt; 参数，设置操作失败前的最大重试次数，如果没有指定，默认最大重试次数为1次。</p> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_retry_interval">retry_interval<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_retry_interval" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_ul1078248998204137"><li id="zh-cn_topic_0000001745217270_li1034001083204137">默认值：1000</li><li id="zh-cn_topic_0000001745217270_li251981899204137">类型： Number</li><li id="zh-cn_topic_0000001745217270_li1145627722204137">别名：ri</li></ul> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p448786560204137">可以在 install 命令后面配置 --ri &lt;number&gt; 或者 --retry_interval &lt;number&gt; 参数，设置重试失败前的等待时间，如果没有指定，默认等待时间为1000ms。</p> </div> <div class="tiledSection"><h3 id="section233184718292">experimental-concurrently-safe<i class="anchor-icon anchor-icon-link" anchorid="section233184718292" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478174568__ul113321447112914"><li id="li1733217471291">默认值：true</li><li id="li16332134710295">类型：Boolean</li></ul> <p id="ZH-CN_TOPIC_0000002478174568__p63323471298">可以在 install 命令后面配置 --experimental-concurrently-safe 参数，并发安全地安装依赖。这是一个实验性选项。</p> </div> <div class="tiledSection"><h3 id="section8466234908">target_path<i class="anchor-icon anchor-icon-link" anchorid="section8466234908" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478174568__ul1846613418012"><li id="li346611340012">默认值：无</li><li id="li1546683411012">类型：string</li></ul> <p id="ZH-CN_TOPIC_0000002478174568__p14668341205">可以在 install 命令后面配置 --target_path &lt;string&gt; 参数，用来指定在特定目标产物target语境下各模块的依赖配置文件（oh-package.json5）的路径。在执行ohpm install时，ohpm会优先安装&lt;target_path&gt;/&lt;moduleName&gt;/oh-package.json5文件中依赖。详情参见<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpm-install#section79331822125611">target_path</a>。</p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217270_示例">示例<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_示例" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p83740452204137">安装 lottie 三方库，执行以下命令：</p> <div _ngcontent-opa-c106="" class="highlight-div"><div _ngcontent-opa-c106="" class="highlight-div-header"><div _ngcontent-opa-c106="" class="highlight-div-header-left"><div _ngcontent-opa-c106="" class="handle-button expand-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opa-c106="" class="highlight-div-header-right"><div _ngcontent-opa-c106="" class="handle-button ai-button"></div><div _ngcontent-opa-c106="" class="handle-button line-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opa-c106="" class="handle-button theme-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opa-c106="" class="handle-button copy-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opa-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_screen1208639750204137" data-highlighted="yes"><ol class="linenums"><li>ohpm install @ohos/lottie</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p169938167204137">结果示例：</p> <p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p1248713242217"><span><img height="39.773118" originheight="49" originwidth="876" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104949.79971891522648558956678465272593:50001231000000:2800:0A4524351B6FECE8F62C9636FB8926E234C4B70D444EA1AD4A0465DA9C733294.png" title="点击放大" width="711.2175000000001"></span></p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217270_oh_modules-">oh_modules <i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_oh_modules-" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_ohpm-100130" class="firsth2">ohpm 1.0.0~1.3.0<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_ohpm-100130" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p1260297869204137">使用 ohpm 安装时，项目中各 Module 的依赖项被统一安装在 Module 根目录下的 oh_modules 目录中，Module 中所有直接依赖和间接依赖都以平铺的方式存储在 oh_modules 目录下的 .ohpm 目录中，Module 的直接依赖则以软链接的方式添加进 oh_modules 文件夹的根目录中。因此，相同依赖项只会安装一次，从而减少磁盘使用空间，加快安装速度。</p> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001745217270_ohpm-14x">ohpm 1.4.x<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217270_ohpm-14x" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478174568__zh-cn_topic_0000001745217270_p830286570204137">ohpm 客户端从 1.4.0 版本开始，同一项目下所有 Module 的依赖都会被统一安装在项目根目录下的 oh_modules 目录中，同时会在项目各 Module 根目录下的 oh_modules 中生成该 Module 的直接依赖的软链接，这些软链接会指向<strong>项目根目录</strong>下 oh_modules 中的 .ohpm 目录下依赖实际存储目录。</p> </div> <div class="tiledSection"><h2 id="section79331822125611">target_path<i class="anchor-icon anchor-icon-link" anchorid="section79331822125611" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478174568__p1901440181813">为了支持在构建过程中针对不同的产物定制不同的依赖，Hvigor会在构建时根据目标产物target为各模块自动生成定制的依赖配置文件（oh-package.json5），开发者可以在ohpm install时使用target_path选项来指定在特定目标产物target语境下各模块的依赖配置文件（oh-package.json5）的路径。</p> <p id="ZH-CN_TOPIC_0000002478174568__p1593473619569">ohpm会优先安装&lt;target_path&gt;/moduleName/oh-package.json5文件中配置的依赖，并在&lt;project_root&gt;/moduleName下生成对应的oh-package-&lt;targetName&gt;-lock.json5文件。当指定target_path时，默认会开启依赖版本冲突自动处理功能，在依赖安装完成后，ohpm还会根据实际安装的依赖版本在&lt;target_path&gt;/resolve-conflict/moduleName目录下生成新的oh-package.json5文件。</p> <p id="ZH-CN_TOPIC_0000002478174568__p18896191515141"></p> <p id="ZH-CN_TOPIC_0000002478174568__p3957135012312">target_path目录结构示例：</p> <div _ngcontent-opa-c106="" class="highlight-div"><div _ngcontent-opa-c106="" class="highlight-div-header"><div _ngcontent-opa-c106="" class="highlight-div-header-left"><div _ngcontent-opa-c106="" class="handle-button expand-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opa-c106="" class="highlight-div-header-right"><div _ngcontent-opa-c106="" class="handle-button ai-button"></div><div _ngcontent-opa-c106="" class="handle-button line-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opa-c106="" class="handle-button theme-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opa-c106="" class="handle-button copy-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opa-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-go" id="ZH-CN_TOPIC_0000002478174568__screen197441405535" data-highlighted="yes"><ol class="linenums"><li>+---<span class="hljs-keyword">default</span>                   <span class="hljs-comment">// &lt;targetName&gt;默认为default</span></li><li>|   |   dependencyMap.json5   <span class="hljs-comment">// 记录在特定target语境下的各模块依赖配置文件路径</span></li><li>|   +---module1               <span class="hljs-comment">// 在特定target语境下某模块的依赖配置文件的存储目录，与原模块根目录同名</span></li><li>|   |       oh-<span class="hljs-keyword">package</span>.json5  <span class="hljs-comment">// 在特定target语境下某模块依赖配置文件</span></li><li>|   +---module2</li><li>|   |       oh-<span class="hljs-keyword">package</span>.json5</li><li>|   |   oh-<span class="hljs-keyword">package</span>.json5      <span class="hljs-comment">// 在特定target语境下生成的工程级依赖配置文件</span></li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478174568__p54681717120"></p> <p id="ZH-CN_TOPIC_0000002478174568__p179435185012">dependencyMap.json5内容示例：</p> <div _ngcontent-opa-c106="" class="highlight-div"><div _ngcontent-opa-c106="" class="highlight-div-header"><div _ngcontent-opa-c106="" class="highlight-div-header-left"><div _ngcontent-opa-c106="" class="handle-button expand-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opa-c106="" class="highlight-div-header-right"><div _ngcontent-opa-c106="" class="handle-button ai-button"></div><div _ngcontent-opa-c106="" class="handle-button line-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opa-c106="" class="handle-button theme-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opa-c106="" class="handle-button copy-button"><div _ngcontent-opa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opa-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478174568__screen89439182012" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-variable">targetName</span>: <span class="hljs-string">"default"</span>,</li><li>  <span class="hljs-variable">rootDependency</span>: <span class="hljs-string">"./oh-package.json5"</span>,</li><li>  <span class="hljs-variable">dependencyMap</span>: {</li><li>       <span class="hljs-string">"module1"</span>: <span class="hljs-string">"./module1/oh-package.json5"</span>,</li><li>       <span class="hljs-string">"module2"</span>: <span class="hljs-string">"./module2/oh-package.json5"</span></li><li>  }</li><li>}</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478174568__p1872693143612"></p> <p id="ZH-CN_TOPIC_0000002478174568__p13664343103717"><strong>ohpm install指定target_path时依赖配置优先级说明：</strong></p> <p id="ZH-CN_TOPIC_0000002478174568__p184332511385">1、&lt;target_path&gt;/dependencyMap.json5中rootDependency配置的oh-package.json5的优先级高于&lt;project_root&gt;/oh-package.json5。</p> <p id="ZH-CN_TOPIC_0000002478174568__p4791192115416">2、.ohpmrc中projectPackageJson指定的项目级配置文件中overrides、overrideDependencyMap配置优先级同时高于&lt;target_path&gt;/dependencyMap.json5中rootDependency配置的oh-package.json5中对应配置 和 &lt;project_root&gt;/oh-package.json5中对应配置。</p> <p id="ZH-CN_TOPIC_0000002478174568__p13327516164412">3、&lt;target_path&gt;/moduleName/oh-package.json5的优先级高于overrideDependencyMap中的依赖配置文件。</p> <p id="ZH-CN_TOPIC_0000002478174568__p95288584243">4、overrides中的依赖版本优先级高于&lt;target_path&gt;/moduleName/oh-package.json5中对应的依赖版本。</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p id="ZH-CN_TOPIC_0000002478174568__p16672557193810">仅当&lt;target_path&gt;/dependencyMap.json5中targetName的值不为空且不等于'default'时，&lt;project_root&gt;/moduleName目录下生成的lock文件名才会变更为：oh-package-targetName-lock.json5。</p> </div></div></div> </div> </div> <div></div></div>