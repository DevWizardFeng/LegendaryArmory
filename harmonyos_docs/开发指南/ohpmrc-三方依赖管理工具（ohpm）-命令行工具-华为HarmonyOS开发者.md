<h1 _ngcontent-qcg-c119="" class="doc-title ng-star-inserted" title="ohpmrc"> ohpmrc </h1>

<div _ngcontent-qcg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001749437724"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p2032579117204137">ohpm配置文件。</p> <div class="tiledSection"><h2 id="zh-cn_topic_0000001792216397_描述">描述<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001792216397_描述" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1344177303204137">ohpm从命令行和.ohpmrc文件中获取其配置内容。ohpm config命令可用于修改用户级.ohpmrc文件的内容。</p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001792216397_文件">文件<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001792216397_文件" tips="复制节点链接"></i></h2><ul id="ZH-CN_TOPIC_0000002478334466__ul1373395719577"><li id="li973395719574">项目级配置文件：/path/to/my/project/.ohpmrc</li><li id="li973316576570">用户级配置文件：~/.ohpm/.ohpmrc</li><li id="li1273314575575">所有 ohpm 配置文件均是 ini 格式：&lt;key&gt;= &lt;value&gt; 的参数列表</li></ul> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><ul id="ZH-CN_TOPIC_0000002478334466__ul715144194712"><li id="li915164174711">命令行工具会优先读取项目级的配置文件。如果缺少某些配置项，将从用户级配置文件中读取缺失的配置项信息。</li><li id="li19151144111471">在工程任意子目录下执行ohpm命令，都可以读取到项目级的.ohpmrc配置。</li></ul> </div></div></div> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001792216397_注释">注释<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001792216397_注释" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p769288940204137">.ohpmrc 文件中以"#"或";"字符为注释符。</p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001792216397_更新配置">更新配置<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001792216397_更新配置" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p746804981204137">执行如下命令可设置用户级配置：</p> <div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-vbnet" id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_screen1310506581204137" data-highlighted="yes"><ol class="linenums"><li>ohpm config <span class="hljs-keyword">set</span> <span class="hljs-keyword">key</span> value</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001792216397_默认配置项">默认配置项<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001792216397_默认配置项" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table id="zh-cn_topic_0000001792216397_table55151253154017" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_row1259612539403"><th align="left" class="cellrowborder" id="mcps1.3.6.2.1.7.1.1" valign="top" width="7.929207079292072%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1359615531403"><strong>配置项</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.7.1.2" valign="top" width="13.818618138186183%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p359645315406"><strong>字段名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.7.1.3" valign="top" width="14.988501149885018%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p459675313408"><strong>字段说明</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.7.1.4" valign="top" width="12.258774122587743%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p659616536405"><strong>字段类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.7.1.5" valign="top" width="14.608539146085395%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1059620532404"><strong>默认值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.7.1.6" valign="top" width="36.39636036396361%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p6596253194013"><strong>备注</strong></p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_row1059695304012"><td class="cellrowborder" rowspan="2" valign="top" width="7.929207079292072%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1596155374014"><strong>仓库设置</strong></p> </td> <td class="cellrowborder" valign="top" width="13.818618138186183%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p959625344013">registry</p> </td> <td class="cellrowborder" valign="top" width="14.988501149885018%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p759612531407">下载仓库</p> </td> <td class="cellrowborder" valign="top" width="12.258774122587743%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p65967530409">字符串</p> </td> <td class="cellrowborder" valign="top" width="14.608539146085395%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1159645314406">https://ohpm.openharmony.cn/ohpm/</p> </td> <td class="cellrowborder" valign="top" width="36.39636036396361%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p15596155314018">支持配置多个仓库地址，以英文逗号分隔。系统将按照配置的先后顺序依次检索这些仓库，直到成功下载目标包。例如：当需要下载包a时，会优先从第一个配置的仓库地址查找，若未找到则自动尝试下一个仓库，依此类推。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_row1959615364014"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p25961536405">@group:registry</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p85961753204014">指定仓库</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p12596653154015">字符串</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p13596153154016">""</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p35964532403">根据group指定组织的仓库地址。支持配置多个仓库地址，以英文逗号间隔，且优先级大于registry配置，系统将按照配置的先后顺序依次检索这些仓库，直到成功下载目标包。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_row759613531403"><td class="cellrowborder" rowspan="2" valign="top" width="7.929207079292072%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p13596105317408"><strong>发布设置</strong></p> </td> <td class="cellrowborder" valign="top" width="13.818618138186183%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1059625324015">publish_registry</p> </td> <td class="cellrowborder" valign="top" width="14.988501149885018%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p13596653134015">发布仓库</p> </td> <td class="cellrowborder" valign="top" width="12.258774122587743%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p5596105310409">字符串</p> </td> <td class="cellrowborder" valign="top" width="14.608539146085395%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p11596165384010">https://ohpm.openharmony.cn/ohpm/</p> </td> <td class="cellrowborder" valign="top" width="36.39636036396361%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p16596153104016">配置发布的仓库地址，仅支持配置一个仓库地址。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_row1659675313406"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p159645310403">publish_id</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p95961453114013">用户发布号</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p17596185384011">字符串</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p17596115364012">""</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p5596145311407">用户发布号，用来发布三方库，全局唯一。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_row0596135314012"><td class="cellrowborder" rowspan="3" valign="top" width="7.929207079292072%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p18597115354015"><strong>路径设置</strong></p> <p id="ZH-CN_TOPIC_0000002478334466__p4384169151015"></p> <p id="ZH-CN_TOPIC_0000002478334466__p1049181210345"></p> <p id="ZH-CN_TOPIC_0000002478334466__p1501212153417"></p> </td> <td class="cellrowborder" valign="top" width="13.818618138186183%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p195971853184011">cache</p> </td> <td class="cellrowborder" valign="top" width="14.988501149885018%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1359715537407">缓存路径</p> </td> <td class="cellrowborder" valign="top" width="12.258774122587743%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p159735317402">字符串</p> </td> <td class="cellrowborder" valign="top" width="14.608539146085395%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1959735374012">~/.ohpm/cache</p> </td> <td class="cellrowborder" valign="top" width="36.39636036396361%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p95971953204011">-</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_row859715364019"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p13597145317401">key_path</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1759714536408">私钥路径</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p759720538402">字符串</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p10597653174013">""</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1059720532409">利用ssh-keygen工具生成的私钥的放置路径地址。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row183841991016"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p16384199121010">crypto_path</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1038417918108">加密组件路径</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p83841912105">字符串</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p10384899109">""</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1384179141010">加密组件路径地址。详情请见：<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section18322038185010">crypto_path</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_row155971353184015"><td class="cellrowborder" rowspan="6" valign="top" width="7.929207079292072%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p859735314404"><strong>网络设置</strong></p> <p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p75971153114018"></p> </td> <td class="cellrowborder" valign="top" width="13.818618138186183%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p18597185318405">no_proxy</p> </td> <td class="cellrowborder" valign="top" width="14.988501149885018%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p105978539404">不使用proxy代理</p> </td> <td class="cellrowborder" valign="top" width="12.258774122587743%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p959735324018">字符串</p> </td> <td class="cellrowborder" valign="top" width="14.608539146085395%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p15597155318403">""</p> </td> <td class="cellrowborder" valign="top" width="36.39636036396361%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p459725310405">配置不使用代理的仓库地址，可配置多个，以英文逗号间隔；值可以是域名或者ip，支持二级域名通配符*（例如：*.huawei.com）。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_row55976537407"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p11597185314404">http_proxy</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p75971853144020">http代理</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p145972053104019">字符串</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1259735315401">""</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p14597115334013">支持用户名和密码的网络代理，特殊字符需要转义。示例：http://proxy_server:port、http://username:password@proxy_server:port。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_row159735314401"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1159711532409">https_proxy</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p259713534405">https代理</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p195971153104019">字符串</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p55979538408">""</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p959765354020">支持用户名和密码的网络代理，特殊字符需要转义。示例：https://proxy_server:port、http://username:password@proxy_server:port。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_row9597165364018"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1359725374010">strict_ssl</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p17597175315408">ssl校验</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p959765316402">布尔</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p159745318400">true</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p559745319406">默认值为true，校验https证书；若配置为false，则不校验https证书。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_row13597175384012"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p159716532409">ca_files</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p205978531402">ca证书路径</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1597195312408">字符串</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p16597155384012">""</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p13598135374010">strict_ssl=true时校验服务端证书需要的ca证书放置路径，可以放置多个证书路径，以英文逗号间隔。详情请见：<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#zh-cn_topic_0000001792216397_ca证书获取及配置">CA证书获取及配置</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_row17598185316408"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1598353174018">fetch_timeout</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p12598205314017">请求超时时间</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p115981953184019">数值</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p135983538409">60000</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p85984530406">取值范围：[10000，360000]，单位为毫秒。如果设置的fetch_timeout值不在取值范围内，则默认为：60000。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row83791732105010"><td class="cellrowborder" rowspan="3" valign="top" width="7.929207079292072%"><p id="ZH-CN_TOPIC_0000002478334466__p14379173215502"><strong>并发设置</strong></p> <p id="ZH-CN_TOPIC_0000002478334466__p15971192075115"></p> <p id="ZH-CN_TOPIC_0000002478334466__p83171726185116"></p> </td> <td class="cellrowborder" valign="top" width="13.818618138186183%"><p id="ZH-CN_TOPIC_0000002478334466__p9379183216507">max_concurrent</p> </td> <td class="cellrowborder" valign="top" width="14.988501149885018%"><p id="ZH-CN_TOPIC_0000002478334466__p737933212509">最大并发量</p> </td> <td class="cellrowborder" valign="top" width="12.258774122587743%"><p id="ZH-CN_TOPIC_0000002478334466__p1937916326507">数值</p> </td> <td class="cellrowborder" valign="top" width="14.608539146085395%"><p id="ZH-CN_TOPIC_0000002478334466__p637914322500">50</p> </td> <td class="cellrowborder" valign="top" width="36.39636036396361%"><p id="ZH-CN_TOPIC_0000002478334466__p17379113275012">取值范围：[1, 200]，设置每个模块在安装时允许的最大并发量。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row18971112011517"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p14971520125116">retry_times</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1897111205515">出错重试次数</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1897114208519">数值</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p189711920155119">1</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p2106151175015">取值范围：[0, 5], 针对白名单内的异常，程序会按配置重试指定次数，白名单有：</p> <ul id="ZH-CN_TOPIC_0000002478334466__ul6884610205110"><li id="li48849103514">ECONNRESET：连接被对端重置</li><li id="li2884101014517">ECONNREFUSED：连接被服务器拒绝</li><li id="li388410107517">ETIMEDOUT：连接超时</li><li id="li15884141025114">RESPONSETIMEOUT：响应超时</li><li id="li148847107515">TARBADARCHIVE：包格式异常</li></ul> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row531722625117"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p163171265517">retry_interval</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1131782695114">出错重试间隔时间</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p16317192611514">数值</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p113175267510">1000</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p7317326135119">取值范围：[1000, 60000], 单位毫秒。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row556123820505"><td class="cellrowborder" rowspan="2" valign="top" width="7.929207079292072%"><p id="ZH-CN_TOPIC_0000002478334466__p4561193825011"><strong>依赖冲突设置</strong></p> <p id="ZH-CN_TOPIC_0000002478334466__p18643151517217"></p> </td> <td class="cellrowborder" valign="top" width="13.818618138186183%"><p id="ZH-CN_TOPIC_0000002478334466__p1856183816505">resolve_conflict</p> </td> <td class="cellrowborder" valign="top" width="14.988501149885018%"><p id="ZH-CN_TOPIC_0000002478334466__p1056143818502">开启自动解决依赖版本冲突功能</p> </td> <td class="cellrowborder" valign="top" width="12.258774122587743%"><p id="ZH-CN_TOPIC_0000002478334466__p10561113815015">布尔</p> </td> <td class="cellrowborder" valign="top" width="14.608539146085395%"><p id="ZH-CN_TOPIC_0000002478334466__p17561133810503">true</p> </td> <td class="cellrowborder" valign="top" width="36.39636036396361%"><p id="ZH-CN_TOPIC_0000002478334466__p15561173855016">默认开启。当设置为true或缺省时，ohpm会自动处理依赖版本冲突，详情请见：<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section368717475562">resolve_conflict</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row1364381510219"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p964451512114">resolve_conflict_strict</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p206445150214">开启严格模式依赖冲突处理功能</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p7644151552120">布尔</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1964418152210">false</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1644161582111">默认关闭。当设置为true时，ohpm会按照严格模式处理依赖版本冲突，详情请见：<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section1942983310492">resolve_conflict_strict</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row1236610257279"><td class="cellrowborder" valign="top" width="7.929207079292072%"><p id="ZH-CN_TOPIC_0000002478334466__p43661925202712"><strong>安全设置</strong></p> </td> <td class="cellrowborder" valign="top" width="13.818618138186183%"><p id="ZH-CN_TOPIC_0000002478334466__p163667254277">key_passphrase</p> </td> <td class="cellrowborder" valign="top" width="14.988501149885018%"><p id="ZH-CN_TOPIC_0000002478334466__p1636612510274">已加密的私钥密码</p> </td> <td class="cellrowborder" valign="top" width="12.258774122587743%"><p id="ZH-CN_TOPIC_0000002478334466__p1536642519272">字符串</p> </td> <td class="cellrowborder" valign="top" width="14.608539146085395%"><p id="ZH-CN_TOPIC_0000002478334466__p9366725102719">""</p> </td> <td class="cellrowborder" valign="top" width="36.39636036396361%"><p id="ZH-CN_TOPIC_0000002478334466__p1036642515273">默认为空，使用加密命令将私钥密码加密，执行涉及公私钥的认证命令时，自动使用key_passphrase对私钥文件进行解密，无需用户手动输入私钥密码。详情请见：<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section10698175182316">key_passphrase</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_row1598135319405"><td class="cellrowborder" rowspan="16" valign="top" width="7.929207079292072%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1859811535402"><strong>其他设置</strong></p> <p id="ZH-CN_TOPIC_0000002478334466__p918495803616"></p> <p id="ZH-CN_TOPIC_0000002478334466__p107742018123918"></p> <p id="ZH-CN_TOPIC_0000002478334466__p1596418454216"></p> <p id="ZH-CN_TOPIC_0000002478334466__p129364053315"></p> <p id="ZH-CN_TOPIC_0000002478334466__p16990174412275"></p> <p id="ZH-CN_TOPIC_0000002478334466__p18192151152812"></p> <p id="ZH-CN_TOPIC_0000002478334466__p192864611214"></p> <p id="ZH-CN_TOPIC_0000002478334466__p16411211323"></p> <p id="ZH-CN_TOPIC_0000002478334466__p7714159528"></p> <p id="ZH-CN_TOPIC_0000002478334466__p964382221117"></p> <p id="ZH-CN_TOPIC_0000002478334466__p1429019711203"></p> <p id="ZH-CN_TOPIC_0000002478334466__p8825165210536"></p> <p id="ZH-CN_TOPIC_0000002478334466__p96953520517"></p> <p id="ZH-CN_TOPIC_0000002478334466__p1849593795516"></p> <p id="ZH-CN_TOPIC_0000002478334466__p125671520361"></p> <p id="ZH-CN_TOPIC_0000002478334466__p175681533615"></p> <p id="ZH-CN_TOPIC_0000002478334466__p20561315173614"></p> <p id="ZH-CN_TOPIC_0000002478334466__p256171583611"></p> <p id="ZH-CN_TOPIC_0000002478334466__p3561915193616"></p> <p id="ZH-CN_TOPIC_0000002478334466__p356715143614"></p> <p id="ZH-CN_TOPIC_0000002478334466__p65615150364"></p> <p id="ZH-CN_TOPIC_0000002478334466__p1056141519365"></p> <p id="ZH-CN_TOPIC_0000002478334466__p35681515365"></p> <p id="ZH-CN_TOPIC_0000002478334466__p55618151368"></p> <p id="ZH-CN_TOPIC_0000002478334466__p656131518368"></p> <p id="ZH-CN_TOPIC_0000002478334466__p1956515143612"></p> <p id="ZH-CN_TOPIC_0000002478334466__p1256181511367"></p> <p id="ZH-CN_TOPIC_0000002478334466__p156181516367"></p> </td> <td class="cellrowborder" valign="top" width="13.818618138186183%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p1859855316407">log_level</p> </td> <td class="cellrowborder" valign="top" width="14.988501149885018%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p859817530404">日志级别</p> </td> <td class="cellrowborder" valign="top" width="12.258774122587743%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p16598185316409">字符串</p> </td> <td class="cellrowborder" valign="top" width="14.608539146085395%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p195981053184019">info</p> </td> <td class="cellrowborder" valign="top" width="36.39636036396361%"><p id="ZH-CN_TOPIC_0000002478334466__zh-cn_topic_0000001792216397_p15981531408">可设置日志输出级别，对应级别类型有debug、info、warn、error。详情请见：<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section1539817345376">log_level</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row562833131215"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p262193361212">install_all</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1162173312128">是否安装工程所有模块的依赖</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p76214335129">布尔</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p206253381210">true</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p36217331123">默认为true。当设置为true或缺省时，在执行ohpm install、ohpm update、ohpm uninstall时，将会安装工程下所有模块的依赖。详情请见<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section1260011476535">install_all</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row1118415883611"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p13184458113616">:_auth和:_read_auth</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p16184105803610">AccessToken配置项</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1618425817367">字符串</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p18184358203618">无</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p718465815364">ohpm-repo支持使用access token进行认证。详情请见<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section74219299467">AccessToken</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row17773318203917"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p197742018163918">enforce_dependency_key</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1577401823914">开启依赖名称校验</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p16774111818399">布尔</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p117741618153918">false</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p117740187399">默认为false。设置为true后，ohpm会校验配置的本地依赖名称与其对应的包名是否一致，若不一致会导致命令执行失败。详情请见<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section920325116547">enforce_dependency_key</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row16964947425"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p196411464213">ensure_dependency_include</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p199641047428">开启依赖扫描功能</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p129643444218">布尔</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1096414412428">false</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p296464174215">默认为false。从ohpm 1.7.0开始，在执行ohpm publish命令时，会检查发布包的源码中，静态导入的三方依赖是否都声明在oh-package.json5的dependencies或dynamicDependencies中。若缺少依赖声明且字段设置为false时，会提示相应告警信息；设置为true时，则会使命令执行失败并提示错误信息。详情请见<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section1291814578276">ensure_dependency_include</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row119363073319"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1193610073312">projectPackageJson:&lt;project_root&gt;</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p149363011339">工程oh-package.json5配置覆盖</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p393614033319">字符串</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p79361043312">无</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p108471144191315">用于覆盖工程根目录下oh-package.json5中的配置。</p> <ul id="ZH-CN_TOPIC_0000002478334466__ul1692711548137"><li id="li1792745419135">配置项名称中的&lt;project_root&gt;表示工程根目录路径（根据实际情况替换为真实的工程根目录路径）。</li><li id="li192795441318">配置项的值为指定的工程级oh-package.json5文件的路径，支持使用相对路径（当使用相对路径时，根路径为&lt;project_root&gt;）。</li></ul> <p id="ZH-CN_TOPIC_0000002478334466__p158141831192312">详情请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-oh-package-json5#section140251819254">.ohpmrc中projectPackageJson配置</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row1398916447277"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p17990244202719">disallow_nested_package</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p333751275912">开启包内.har/.tgz依赖</p> <p id="ZH-CN_TOPIC_0000002478334466__p183335126597">配置路径检测</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p169903441273">布尔</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1990644112713">false</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p19990144452710">默认为false。设置为true后，在执行prepublish/publish时，会扫描包内是否存在'./'形式配置且后缀为.har/.tgz格式的依赖，如果存在，则会使命令执行失败并提示报错信息。详情见<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section1237023983514">disallow_nested_package</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row1219221162819"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p171921411202816">odm_r2_project_root</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p141926113281">开启overrideDependencyMap中相对路径自动转换功能</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p16192151119288">布尔</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p8192511172811">false</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p9192611192815">默认为false。设置为true后，当存在overrideDependencyMap配置且其配置项对应的配置文件内存在相对路径的依赖配置时，ohpm会基于工程根路径解析来查找这些相对路径。详情见<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section136621053184912">odm_r2_project_root</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row928174682118"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p142804616214">enable_cross_process_lock</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p20289467218">启用跨进程锁</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p72816468212">布尔</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p52894617212">false</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p17286468215">默认为false。由于oh_modules目录结构限制，ohpm不支持在同一个工程下并行运行多个ohpm install、ohpm update或ohpm uninstall命令，若需要在同一个工程下执行多个ohpm install、ohpm update或ohpm uninstall命令，则必须将该配置设置为true，以保证这多个命令以串行的方式运行。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row440011324"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p441118324">compability_log_level</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p74119112328">兼容性字段检测日志等级</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p12411215323">字符串</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p541171123214">warn</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1867915864415">默认为warn。在执行prepublish、publish命令时，ohpm会检测oh-package.json5文件中是否配置了兼容性检测需要的所有字段（'compatibleSdkVersion', 'compatibleSdkType', 'obfuscated', 'nativeComponents'），如果未配置，则会根据日志等级打印提示或报错。详情请见<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section96369529419">compability_log_level</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row196421022191110"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p264319227116">use_stream_threshold_size</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p364342271120">流式上传阈值</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1464382215111">数值</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p156431622151116">5</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p12643162231112">取值范围：[0, 300]，单位mb。当publish三方库的文件体积大于此阈值时将会使用流式上传三方库，如果仓库不存在流式上传接口则自动转为Base64方式上传。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row428911712012"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p829019702019">lockfile_stable_order</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p112907702014">oh-package-lock.json5内容稳定排序</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p129012711208">布尔</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1329015712013">false</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p188971454134218">默认为false。若设置为true，会确保在oh-package.json5文件未变更时，当前已生成的oh-package-lock.json5各字段内容不变。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row10824952135311"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1882510521531">enable_unified_lockfile</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1382514529538">lockfile合一</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p58251526535">布尔</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p88251752175318">false</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p178255526533">默认为false。若设置为true，会将所有模块的oh-package-lock.json5文件整合进项目下的oh-package-lock.json5。详情请见<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section101671095818">enable_unified_lockfile</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row469512525110"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p166951258518">enable_boost_extraction_speed</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p18696165115112">文件解压提速</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1569610519515">布尔</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p18696145105113">false</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p176967555119">默认为false。若设置为true，在ohpm安装时，会使用更高效的文件解压方法，该功能当前处于实验阶段，详情请见<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section20410165616573">enable_boost_extraction_speed</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row82761411181419"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p17277111117143">enable_lock_inner_pkg_version</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1927710116149">依赖内部的.har或.tgz依赖版本锁定</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1277161110145">布尔</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p11277191141415">true</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p927791101415">默认为true。若设置为false，在ohpm安装时，不会将依赖内部的.har或.tgz子依赖的版本保存至oh-package-lock.json5，详情请见<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section1834543398">enable_lock_inner_pkg_version</a>。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row14951737185520"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p154951637135514">case_sensitive_check</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p449583720554">路径大小写敏感检测</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p5496103755519">布尔</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p1049619371553">false</p> </td> <td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334466__p104961237145511">默认为false。若设置为true，在执行ohpm相关命令时，如果ohpm检测到工程中文件的配置路径和文件的实际路径存在大小写不一致问题时，则会报错提示开发者修改，详情请见<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section2045412394117">case_sensitive_check</a>。</p> <p id="ZH-CN_TOPIC_0000002478334466__p1430352525510">该配置项仅在Windows环境下生效。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001792216397_ca证书获取及配置">CA证书获取及配置<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001792216397_ca证书获取及配置" tips="复制节点链接"></i></h2><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334466__p194771241377">CA证书的获取需要区分系统：当从Windows系统浏览器下载的证书仅适用于Windows系统，当从Mac系统浏览器中获取的证书适用于Mac系统和Linux系统。</p> </div></div></div> </div> <div class="tiledSection"><h3 id="section1462481834315" class="firsth2">Windows系统获取CA证书<i class="anchor-icon anchor-icon-link" anchorid="section1462481834315" tips="复制节点链接"></i></h3></div> <p id="ZH-CN_TOPIC_0000002478334466__p6183125184315">依次访问以下证书下载地址，并根据下图操作下载CA证书到本地：</p> <div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-perl" id="ZH-CN_TOPIC_0000002478334466__screen1418302564318" data-highlighted="yes"><ol class="linenums"><li>https:<span class="hljs-regexp">//</span>ohpm.openharmony.cn/</li><li>https:<span class="hljs-regexp">//</span>contentcenter-drcn.dbankcdn.cn/   <span class="hljs-regexp">//</span>该域名用于文件资源下载，访问根路径仅可用于获取CA证书</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334466__p111831125114315">访问https://ohpm.openharmony.cn/地址，下载证书，请选择保存类型为<strong>证书链</strong>（访问https://contentcenter-drcn.dbankcdn.cn/ 执行相同操作）。</p> <p id="ZH-CN_TOPIC_0000002478334466__p5183325134320"><span><img height="523.53189" originheight="724" originwidth="1213" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104946.35634363338376746693750889054674:50001231000000:2800:6CFEDF8AAB9C86E7C99E465741D1D70B9437FB069D25C4EC3C916F642BF419C1.png" title="点击放大" width="874.226024"></span></p> <p id="ZH-CN_TOPIC_0000002478334466__p1218315255438">通过访问https://ohpm.openharmony.cn/地址获取证书openharmony.cn.crt，通过访问https://contentcenter-drcn.dbankcdn.cn/地址获取证书update.hicloud.crt，在 .ohpmrc 文件中配置 ca_files=证书路径1，证书路径2（两个文件均需配置）。</p> <div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen13183172584315" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">ca_files</span>=<span class="hljs-variable">D</span>:\<span class="hljs-title class_">_</span>.<span class="hljs-title class_">openharmony</span>.<span class="hljs-title class_">cn</span>.<span class="hljs-title class_">crt</span>,<span class="hljs-variable">D</span>:\<span class="hljs-title class_">update</span>.<span class="hljs-title class_">hicloud</span>.<span class="hljs-title class_">crt</span></li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334466__p17606181214183"></p> <div class="tiledSection"><h3 id="section919553211439">Mac系统获取CA证书<i class="anchor-icon anchor-icon-link" anchorid="section919553211439" tips="复制节点链接"></i></h3></div> <p id="ZH-CN_TOPIC_0000002478334466__p1960621215187">依次访问以下证书下载地址，并根据下图操作下载CA证书到本地：</p> <div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-perl" id="ZH-CN_TOPIC_0000002478334466__screen1860621216188" data-highlighted="yes"><ol class="linenums"><li>https:<span class="hljs-regexp">//</span>ohpm.openharmony.cn/</li><li>https:<span class="hljs-regexp">//</span>contentcenter-drcn.dbankcdn.cn/   <span class="hljs-regexp">//</span>该域名用于文件资源下载，访问根路径仅可用于获取CA证书</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334466__p4606612181818">访问https://ohpm.openharmony.cn/地址，下载证书，请选择保存类型为<strong>证书链</strong>（访问https://contentcenter-drcn.dbankcdn.cn/ 执行相同操作）。</p> <p id="ZH-CN_TOPIC_0000002478334466__p66061712181816"><span><img height="549.8838450000001" originheight="955" originwidth="1448" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104946.97134236075382830378953218052586:50001231000000:2800:4E87CAF54908669E9E5B4EEC731D34EFF57ADD026CE905BA713477C01630E3C4.png" title="点击放大" width="828.9225"></span></p> <p id="ZH-CN_TOPIC_0000002478334466__p1360641211818">通过访问https://ohpm.openharmony.cn/地址获取证书openharmony.cn.pem，通过访问https://contentcenter-drcn.dbankcdn.cn/地址获取证书update.hicloud.pem，在 .ohpmrc 文件中配置 ca_files=证书路径1，证书路径2（两个文件均需配置）。</p> <div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002478334466__screen5293100344" data-highlighted="yes"><ol class="linenums"><li>ca_file=/Users/用户名/_.openharmony.cn.pem,/Users/用户名/_.update.hicloud.pem</li></ol></pre></div></div> <div class="tiledSection"><h2 id="section1539817345376">log_level<i class="anchor-icon anchor-icon-link" anchorid="section1539817345376" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p12821258184114">可设置ohpm日志输出级别，对应级别类型有debug、info、warn、error，默认为：info。开发者在执行ohpm命令时，不同日志级别的区别和效果如下所示。</p> <ul id="ZH-CN_TOPIC_0000002478334466__ul15934215144616"><li id="li10934815114616">debug：控制台会打印debug、info、warn、error日志。<p id="ZH-CN_TOPIC_0000002478334466__p5338185510473"><span><img originheight="461" originwidth="1285" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104946.71744793103712302551736640840876:50001231000000:2800:DB9AD9830BDECB9B6FC96CB506065C47B9BAA7A98C5532EA925A45A199C871C1.png" width="920" height="330.0544747081712"></span></p> </li><li id="li3779917495">info：控制台会打印info、warn、error日志。<p id="ZH-CN_TOPIC_0000002478334466__p174905912128"><span><img originheight="269" originwidth="1287" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104946.77809243297906462632441186184865:50001231000000:2800:E48525D4019FA10D8C01547523359628E68F2C728FD8F0FB586CA163AD1480D7.png" width="920" height="192.2921522921523"></span></p> </li><li id="li1693412153466">warn：控制台会打印warn、error日志。<p id="ZH-CN_TOPIC_0000002478334466__p1091751151519"><span><img originheight="214" originwidth="1292" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104946.42361449483849095015660090828008:50001231000000:2800:511097DE6814DD53E6FC0844DFCEC2E2239E06E1F8F83F00DA364AA6E4E39156.png" width="920" height="152.38390092879257"></span></p> </li><li id="li8934111564610">error：控制台只会打印error日志。<p id="ZH-CN_TOPIC_0000002478334466__p529672071618"><span><img originheight="155" originwidth="1300" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104946.51339191289880151916099972007962:50001231000000:2800:2E067CB8F6C9A5BC53995CCCF8791846B8EC4A9DE2F1068A7BE12F2940D18563.png" width="920" height="109.6923076923077"></span></p> </li></ul> </div> <div class="tiledSection"><h2 id="section1260011476535">install_all<i class="anchor-icon anchor-icon-link" anchorid="section1260011476535" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p14842252155317">在ohpm客户端1.8.0版本的.ohpmrc中支持install_all配置，用于控制ohpm install，ohpm update，ohpm uninstall的行为，install_all在.ohpmrc文件中设置为true或缺省时：</p> <ul id="ZH-CN_TOPIC_0000002478334466__ul985858155914"><li id="li108581883590">使用ohpm install命令时，将安装工程下所有模块的依赖，与使用ohpm install --all行为一致；</li><li id="li188581785598">使用ohpm update时，将默认更新本模块下依赖并安装工程下所有模块的依赖，与使用ohpm update --all一致；</li><li id="li14858286590">使用ohpm uninstall时，将默认删除本模块下依赖并安装工程下所有模块的依赖，与使用ohpm uninstall --all一致。</li></ul> </div> <div class="tiledSection"><h2 id="section368717475562">resolve_conflict<i class="anchor-icon anchor-icon-link" anchorid="section368717475562" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p765516317488">在ohpm客户端1.5.0版本开始支持依赖版本冲突自动解决功能。只需要在.ohpmrc文件中，将resolve_conflict配置为true或缺省，即可开启该功能。依赖冲突的处理策略为：当您的项目同时依赖了某个三方库的不同版本时，ohpm将选择其中的最高版本进行安装。</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334466__p433913117417">若某个三方库同时存在远程版本和本地版本（本地文件或源码依赖），无论本地版本的版本号是否大于远程版本，ohpm的冲突处理策略都会优先选择本地版本作为待安装的版本。</p> </div></div></div> </div> <div class="tiledSection"><h3 id="section1623415477574" class="firsth2">模块内依赖版本冲突<i class="anchor-icon anchor-icon-link" anchorid="section1623415477574" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334466__p6120172663513"><span><img originheight="353" originwidth="716" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104946.46526145728974463472062747550547:50001231000000:2800:5CDD0A4852BE77FEF7776087212DBCDDDDE7A91891B636E06D47CE370EE8960B.png" width="716" height="353"></span></p> <p id="ZH-CN_TOPIC_0000002478334466__p119921814115113">如上图所示的依赖路径中，moduleA 为您正在开发的模块，其直接依赖为 B@1.1，C@1.1。其中 B@1.1 与 C@1.1 分别依赖了 D 的两个版本 D@1.2 与 D@1.3。当您开启了依赖版本冲突自动解决功能，ohpm将会选择 D@1.3 版本作为待安装的版本，最终依赖路径被解析为下图蓝色箭头所指向的路径：</p> <p id="ZH-CN_TOPIC_0000002478334466__p310083533519"><span><img originheight="347" originwidth="710" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104947.30171045002731855254937375367901:50001231000000:2800:240E5162B407C703F7162ADB29A70D71BCD274FF66EC176655FE2686E6649FDB.png" width="710" height="347"></span></p> </div> <div class="tiledSection"><h3 id="section1954921245818">模块间依赖版本冲突<i class="anchor-icon anchor-icon-link" anchorid="section1954921245818" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334466__p1269534193515"><span><img originheight="370" originwidth="723" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104947.12052867700910666044657966785987:50001231000000:2800:C03FF694A00CAEB0AA7F6A9B3B440648BE600A4F6CC1D615E6C00AF6B9182BAA.png" width="723" height="370"></span></p> <p id="ZH-CN_TOPIC_0000002478334466__p1791691525213">如上图所示的依赖路径中，moduleA、moduleB 为您同一项目下正在开发的两个模块，其中moduleA 依赖 B@1.1，moduleB 依赖 C@1.1，B@1.1 与 C@1.1 分别依赖了 D 的两个版本 D@1.2 与 D@1.3。当您开启了依赖版本冲突自动解决功能，并且您是使用 ohpm install --all 进行安装时，ohpm将会选择 D@1.3 版本作为待安装的版本，最终依赖路径被解析为下图蓝色箭头所指向的路径：</p> <p id="ZH-CN_TOPIC_0000002478334466__p91682049173514"><span><img originheight="371" originwidth="715" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104947.99133936086357157092217491949309:50001231000000:2800:538A980557FE0A34D3DEE5FAE69F327CE9BC7BA1483895F3542E8B6180BAE27D.png" width="715" height="371"></span></p> </div> <div class="tiledSection"><h3 id="section4472961801">更新依赖版本的场景<i class="anchor-icon anchor-icon-link" anchorid="section4472961801" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334466__p1484155315218">当您希望将您某个模块的直接依赖更新成另一个版本，如下图所示，您手动将 C@1.1 更新为 C@1.2：</p> <p id="ZH-CN_TOPIC_0000002478334466__p913355533516"><span><img originheight="360" originwidth="716" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104947.26832843680983839275248937189796:50001231000000:2800:1B08ACA70D2333BB885D36E1A1FA613B86743B28BC659E9DADAA86516D50ED5A.png" width="716" height="360"></span></p> <p id="ZH-CN_TOPIC_0000002478334466__p11651147533">由于 C 更新为 C@1.2 后，不再依赖 D，若依赖 D 的版本在更新 C 版本之前已经通过 ohpm 的自动冲突处理机制锁定为 D@1.3 版本，此时 C 版本的升级将不会导致 D 的版本由 D@1.3 回退为 D@1.2，这样可以保证每一次更新都只是在上一次结果上进行影响最小的修改，最终的依赖路径将会被解析为下图蓝色箭头所指向的路径：</p> <p id="ZH-CN_TOPIC_0000002478334466__p6497180173615"><span><img originheight="347" originwidth="715" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104947.93310604994280486354267067792267:50001231000000:2800:E2B8C6982100923FD61C037490C42E85ED5678D6B6575A181B9543EC802C8417.png" width="715" height="347"></span></p> <p id="ZH-CN_TOPIC_0000002478334466__p19442430111719">对于上述场景，如果希望D版本同时也回退至D@1.2版本，则需要在ohpm install之前执行ohpm clean命令清理各模块下的oh-package-lock.json5文件，以消除上一次安装结果的影响。</p> </div> <div class="tiledSection"><h3 id="section135625578279">ohpm install命令带--target_path选项时依赖冲突处理<i class="anchor-icon anchor-icon-link" anchorid="section135625578279" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334466__p14559192075311">target_path下是hvigor在构建时根据目标产物target为各模块自动生成定制的依赖配置文件（oh-package.json5），详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-install#section79331822125611">target_path</a>。在生成的oh-package.json5中，依赖的版本部分可能包含targetName，示例："version": "1.0.0+targetName"。</p> <p id="ZH-CN_TOPIC_0000002478334466__p16393418910">包含targetName信息的版本完整格式为：&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;[-&lt;pre-release&gt;][+&lt;targetName&gt;]，此时冲突处理规则如下：</p> <p id="ZH-CN_TOPIC_0000002478334466__p4701488102">1、&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;[-&lt;pre-release&gt;]部分的比较规则依然遵循上文各场景所描述的处理规则，即取版本号最大的依赖。</p> <p id="ZH-CN_TOPIC_0000002478334466__p2397175041017">2、当两个版本&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;[-&lt;pre-release&gt;]部分一致时，取尾部有[+&lt;targetName&gt;]信息的依赖。</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334466__p167343201410">1、当两个版本尾部均有[+&lt;targetName&gt;]信息，且targetName不一致时，会根据&lt;target_path&gt;/dependencyMap.json5中targetName是否为空进行区分处理。</p> <ul id="ZH-CN_TOPIC_0000002478334466__ul111616517226"><li id="li12161451102217">当targetName空时，打印警告提示。</li><li id="li2016115119226">当targetName有值时，报错提示并中断程序。</li></ul> <p id="ZH-CN_TOPIC_0000002478334466__p12402192242817">2、当两个依赖中有一个是本地依赖时，优先取本地依赖；当两个依赖均是本地依赖时，获取本地依赖包内oh-package.json5配置的version再次按照上述规则继续比较。</p> </div></div></div> </div> <div class="tiledSection"><h3 id="section1467417199016">限制条件说明<i class="anchor-icon anchor-icon-link" anchorid="section1467417199016" tips="复制节点链接"></i></h3><ol id="ZH-CN_TOPIC_0000002478334466__ol9775834165315"><li id="li187751834105310">若希望解决当前项目所有模块下的依赖版本冲突，请使用ohpm install --all完成依赖安装。</li><li id="li5775934115315">若在执行ohpm update或ohpm uninstall命令后，可能会破坏项目原有的依赖版本冲突处理结果。请额外执行一次ohpm install --all命令，重新处理当前项目所有模块下的依赖版本冲突。</li><li id="li12775173418532">当本地文件（.har或.tgz后缀）依赖之间、本地源码模块依赖之间、本地文件（.har或.tgz后缀）依赖与本地源码模块依赖之间出现冲突时，ohpm自动冲突处理机制会比较该依赖内部oh-package.json5文件中version字段配置的版本号大小，版本号大的将会被安装。<div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334466__p1141625811533">如难以感知本地文件或本地源码依赖中的版本号，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-oh-package-json5#zh-cn_topic_0000001792256137_overrides">overrides</a>来处理冲突。</p> </div></div></div> </li></ol> </div> <div class="tiledSection"><h2 id="section1942983310492">resolve_conflict_strict<i class="anchor-icon anchor-icon-link" anchorid="section1942983310492" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p179421338757">ohpm客户端从5.0.9版本，开始支持严格的依赖版本冲突处理机制。在.ohpmrc文件中，将resolve_conflict_strict配置为true开启该功能。</p> <p id="ZH-CN_TOPIC_0000002478334466__p17433124613910">严格模式下，当您的项目同时依赖了某个三方库的不同版本时，ohpm将按照严格模式冲突决策算法决策出最符合要求的版本进行安装，当程序不能决策出符合要求的版本时将报错。</p> </div> <div class="tiledSection"><h3 id="section17250143783314" class="firsth2">严格模式冲突决策算法<i class="anchor-icon anchor-icon-link" anchorid="section17250143783314" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334466__ul1627217154418"><li id="li35593568191">同一依赖，存在一个固定版本（如：1.0.1）、多个范围版本（如：^1.0.0、~1.1.0、&gt;1.0.0等）时，如果该固定版本在所有范围版本交集区间内，则最终安装该固定版本，否则冲突决策失败；</li><li id="li1925161012236">同一依赖，仅存在多个范围版本时，如果所有范围版本存在交集，则最终安装仓库中存在且在交集区间内的最高版本；若所有范围版本不存在交集区间，则冲突决策失败；</li><li id="li147576397401">使用同一本地依赖（如：./a.har），依赖存放路径不一致时，冲突决策失败；</li><li id="li238169431">同一依赖，同时存在本地版本（如：./a.har）与远程版本（如：^1.0.0）时，冲突决策失败；</li><li id="li14506101161011">同一依赖，存在多个固定版本时，冲突决策失败。<p id="ZH-CN_TOPIC_0000002478334466__p261410651010"><span><img height="299.79663" originheight="719" originwidth="2175" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104947.60708024684724420806093912812863:50001231000000:2800:F8E3C442BD69793552B43532C18140DD67758FE72639F52BB86E5B3FA385EE42.png" title="点击放大" width="872.8125"></span></p> </li></ul> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><ol id="ZH-CN_TOPIC_0000002478334466__ol2083442024911"><li id="li8834122015495">严格模式下，依赖冲突决策成功时，ohpm会打印被解决冲突的依赖的警告信息，包含：依赖名称、所有冲突的版本、最终安装版本、受影响的模块列表。</li><li id="li883402034917">严格模式下，依赖冲突决策失败时，ohpm会打印依赖冲突树并在树上高亮显示解决失败的依赖及版本和所有解决失败的依赖的错误信息，包含：依赖名称、所有冲突的版本。当依赖存在版本冲突时，可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-oh-package-json5#zh-cn_topic_0000001792256137_overrides">overrides</a>配置解决。</li></ol> </div></div></div> </div> <div class="tiledSection"><h3 id="section7856649153311">示例<i class="anchor-icon anchor-icon-link" anchorid="section7856649153311" tips="复制节点链接"></i></h3></div> <ol id="ZH-CN_TOPIC_0000002478334466__ol7935103915116"><li id="li69354396511"><span>将resolve_conflict_strict开关设置为true：</span><p></p><div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002478334466__screen18980223615" data-highlighted="yes"><ol class="linenums"><li>ohpm config <span class="hljs-built_in">set</span> resolve_conflict_strict <span class="hljs-literal">true</span></li></ol></pre></div></div> <p></p></li><li id="li12935339125117"><span>在AppTest3工程根目录的oh-package.json5中配置依赖@ohos/axios：</span><p></p><div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen25221732241" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"modelVersion"</span>: <span class="hljs-string">"6.0.1"</span>,</li><li>  <span class="hljs-string">"description"</span>: <span class="hljs-string">"Please describe the basic information."</span>,</li><li>  <span class="hljs-string">"dependencies"</span>: {</li><li>    <span class="hljs-string">"@ohos/axios"</span>: <span class="hljs-string">"2.2.5"</span></li><li>  }</li><li>}</li></ol></pre></div></div> <p></p></li><li id="li1793523916510"><span>在AppTest3工程下entry模块的oh-package.json5中配置依赖@ohos/axios：</span><p></p><div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen51361343443" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"name"</span>: <span class="hljs-string">"entry"</span>,</li><li>  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,</li><li>  <span class="hljs-string">"description"</span>: <span class="hljs-string">"Please describe the basic information."</span>,</li><li>  <span class="hljs-string">"main"</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-string">"author"</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-string">"license"</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-string">"dependencies"</span>: {</li><li>    <span class="hljs-string">"@ohos/axios"</span>: <span class="hljs-string">"2.2.6"</span></li><li>  }</li><li>}</li></ol></pre></div></div> <p></p></li><li id="li1893516396517"><span>在AppTest3工程下任意目录执行命令：ohpm install --all，根据严格的依赖版本冲突处理规则，此时ohpm会安装失败并打印依赖冲突树，如下所示：</span><p></p><p id="ZH-CN_TOPIC_0000002478334466__p126147551514"><span><img originheight="243" originwidth="1048" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104947.20466912603399171694290555382166:50001231000000:2800:6CCBE69E3E5B32BDB617BE190B05EE9250778533EF25084DDA020F077CA22E5C.png" width="920" height="213.3206106870229"></span></p> <p></p></li></ol> <div class="tiledSection"><h2 id="section18322038185010">crypto_path<i class="anchor-icon anchor-icon-link" anchorid="section18322038185010" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p1727382415211">ohpm客户端从5.2.0版本开始，支持对敏感配置项进行加密存储和读取。</p> <p id="ZH-CN_TOPIC_0000002478334466__p12235934145518"><strong>支持加密的敏感配置项</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table id="table983118275618" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334466__row7831828568"><th align="left" class="cellrowborder" id="mcps1.3.35.4.1.4.1.1" valign="top" width="17.16171617161716%"><p id="ZH-CN_TOPIC_0000002478334466__p6831924561">配置项</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.4.1.4.1.2" valign="top" width="49.504950495049506%"><p id="ZH-CN_TOPIC_0000002478334466__p1083116219568">说明</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.4.1.4.1.3" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002478334466__p1483120215611">示例格式</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334466__row118311220565"><td class="cellrowborder" valign="top" width="17.16171617161716%"><p id="ZH-CN_TOPIC_0000002478334466__p11831122165616"><a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section10698175182316">key_passphrase</a></p> </td> <td class="cellrowborder" valign="top" width="49.504950495049506%"><p id="ZH-CN_TOPIC_0000002478334466__p168311729564">必须加密，对应 key_path 的私钥密码</p> </td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002478334466__p138329211561">key_passphrase=security:xxx</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row18832824567"><td class="cellrowborder" valign="top" width="17.16171617161716%"><p id="ZH-CN_TOPIC_0000002478334466__p78327275616">http_proxy</p> </td> <td class="cellrowborder" valign="top" width="49.504950495049506%"><p id="ZH-CN_TOPIC_0000002478334466__p8832926561">代理用户名密码部分可加密（username:password替换为密文）</p> </td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002478334466__p783212265620">http_proxy=http://security:xxx@proxy:port</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row188321215563"><td class="cellrowborder" valign="top" width="17.16171617161716%"><p id="ZH-CN_TOPIC_0000002478334466__p2832142185617">https_proxy</p> </td> <td class="cellrowborder" valign="top" width="49.504950495049506%"><p id="ZH-CN_TOPIC_0000002478334466__p11832102105614">代理用户名密码部分可加密（username:password替换为密文）</p> </td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002478334466__p1483252135619">https_proxy=https://security:xxx@proxy:port</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334466__row193416439578"><td class="cellrowborder" valign="top" width="17.16171617161716%"><p id="ZH-CN_TOPIC_0000002478334466__p1734254310576"><a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section74219299467">AccessToken</a></p> </td> <td class="cellrowborder" valign="top" width="49.504950495049506%"><p id="ZH-CN_TOPIC_0000002478334466__p434215434577">仓库认证配置（:_auth 和 :_read_auth）</p> </td> <td class="cellrowborder" valign="top" width="33.33333333333333%"><p id="ZH-CN_TOPIC_0000002478334466__p63425431575">//&lt;仓库地址&gt;/:_auth=security:xxx</p> <p id="ZH-CN_TOPIC_0000002478334466__p1988356152111">//&lt;仓库地址&gt;/:_read_auth=security:xxx</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334466__p5597202817297">用户可通过以下流程实现配置加密：</p> <ol id="ZH-CN_TOPIC_0000002478334466__ol8264629125218"><li id="li0264192915524">使用 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-config#section1085417514102">ohpm config encrypt</a> 命令生成加密组件并对标准输入的数据加密。</li><li id="li1826462955218">在 .ohpmrc 文件中配置 crypto_path 加密组件路径和敏感配置项。<div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen17506115714353" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">crypto_path</span>=<span class="hljs-variable">D</span>:\<span class="hljs-title class_">path</span>\<span class="hljs-title class_">to</span>\<span class="hljs-title class_">crypto_dir</span></li><li><span class="hljs-variable">key_passphrase</span>=<span class="hljs-variable">security</span>:<span class="hljs-title class_">xxx</span></li><li><span class="hljs-variable">http_proxy</span>=<span class="hljs-variable">http</span>:<span class="hljs-comment">//security:xxx@proxy:port</span></li><li><span class="hljs-variable">https_proxy</span>=<span class="hljs-variable">https</span>:<span class="hljs-comment">//security:xxx@proxy:port</span></li><li><span class="hljs-comment">//&lt;仓库地址&gt;/:_auth=security:xxx</span></li><li><span class="hljs-comment">//&lt;仓库地址&gt;/:_read_auth=security:xxx</span></li></ol></pre></div></div> </li></ol> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334466__p1286619431221">1、key_passphrase 配置项必须使用密文格式配置，其余敏感配置项仍兼容明文配置。</p> <p id="ZH-CN_TOPIC_0000002478334466__p143424014256">2、命令执行时，根据优先级（项目级 &gt; 用户级 .ohpmrc）获取命令所需的敏感配置项后，使用该配置项同层级的 crypto_path 指定的加密组件进行解密。</p> </div></div></div> </div> <div class="tiledSection"><h2 id="section10698175182316">key_passphrase<i class="anchor-icon anchor-icon-link" anchorid="section10698175182316" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p63177417332">ohpm 客户端从5.2.0版本开始，支持在 .ohpmrc 文件中配置 key_passphrase 私钥密码，用于自动解密 key_path 对应的私钥文件。</p> <ul id="ZH-CN_TOPIC_0000002478334466__ul10489191019344"><li id="li548941003414">执行 ohpm publish、ohpm unpublish 等需要认证的命令时，系统会自动使用 key_passphrase 解密私钥，无需手动输入密码。</li><li id="li581002513411">key_passphrase 必须是通过 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-config#section1085417514102">ohpm config encrypt</a> 命令生成的密文。</li><li id="li45103395435">需同时配置 key_path 私钥文件路径。</li><li id="li07553330352">需同时配置 <a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section18322038185010">crypto_path</a> 加密组件路径，用于运行时解密 key_passphrase。</li></ul> <p id="ZH-CN_TOPIC_0000002478334466__p4323659204614"><strong>示例</strong></p> <div class="p" id="ZH-CN_TOPIC_0000002478334466__p181921129144614">在项目级或用户级 .ohpmrc 文件中配置，执行 publish 命令，用户无需手动输入密码即可完成推包操作。<div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen3856195312534" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">key_path</span>=:\<span class="hljs-title class_">path</span>\<span class="hljs-title class_">to</span>\<span class="hljs-title class_">key_file</span></li><li><span class="hljs-variable">crypto_path</span>=<span class="hljs-variable">D</span>:\<span class="hljs-title class_">path</span>\<span class="hljs-title class_">to</span>\<span class="hljs-title class_">crypto_dir</span></li><li><span class="hljs-variable">key_passphrase</span>=<span class="hljs-variable">security</span>:<span class="hljs-title class_">xxx</span></li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002478334466__p72154538388"></p> </div> <div class="tiledSection"><h2 id="section74219299467">AccessToken<i class="anchor-icon anchor-icon-link" anchorid="section74219299467" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p3751728153817">AccessToken是 ohpm-repo 2.1.0版本新引入的认证机制，用户通过ohpm-repo界面生成Token，并将其配置至ohpm客户端配置文件中。</p> <p id="ZH-CN_TOPIC_0000002478334466__p11335330143814">在与 ohpm-repo 交互时，客户端会自动附带Token进行身份验证。该Token分两种权限等级：</p> <ol id="ZH-CN_TOPIC_0000002478334466__ol24391139183816"><li id="li177621412386">只读Token允许执行info和install操作；</li><li id="li20431174573813">读写Token除了包含只读权限外，还支持publish和unpublish操作。</li></ol> <p id="ZH-CN_TOPIC_0000002478334466__p182155117382">每位用户每种权限类型的Token最多可生成10个，首次生成时系统自动复制到剪贴板，后续不再显示完整Token内容。</p> </div> <div class="tiledSection"><h3 id="section1662954384815" class="firsth2">如何获取AccessToken<i class="anchor-icon anchor-icon-link" anchorid="section1662954384815" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334466__p5337355174917">当前AccessToken仅 ohpm-repo 支持，登录成功后，在ohpm-repo首页的右上角 &gt; 认证管理 &gt; AccessToken页面进行生成。<span><img originheight="893" originwidth="1854" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104947.14654550785579844817011371419345:50001231000000:2800:AD78BDB19219BC281874812AD8B15CBA2B0E60E460C8A2BD935ADAA7A21EB86B.png" width="920" height="443.1283710895362"></span></p> </div> <div class="tiledSection"><h3 id="section613915915011">如何配置AccessToken<i class="anchor-icon anchor-icon-link" anchorid="section613915915011" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334466__p13929132411502">在".ohpmrc"文件配置示例如下：</p> <div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-ruby" id="ZH-CN_TOPIC_0000002478334466__screen3355926561" data-highlighted="yes"><ol class="linenums"><li>/<span class="hljs-regexp">/127.0.0.1:8088/repos</span><span class="hljs-regexp">/ohpm/</span><span class="hljs-symbol">:_auth=readWriteToken</span></li><li>/<span class="hljs-regexp">/127.0.0.1:8088/repos</span><span class="hljs-regexp">/ohpm/</span><span class="hljs-symbol">:_read_auth=readOnlyToken</span></li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334466__p15116204310619">其中 ：</p> <ul id="ZH-CN_TOPIC_0000002478334466__ul16748134618618"><li id="li8339205019618">//127.0.0.1:8088/repos/ohpm/ 是ohpm-repo的registry地址去除协议名的部分；</li><li id="li1074874617616">:_auth 和 :_read_auth 分别代表配置为读写Token或只读Token，readWriteToken和readOnlyToken代表Token具体的值。ohpm客户端执行info、install操作会优先使用只读Token，如果只读Token不存在才会使用读写Token。ohpm客户端执行publish、unpublish操作时只会使用读写Token。每种Token最多配置三条。</li></ul> </div> <div class="tiledSection"><h2 id="section920325116547">enforce_dependency_key<i class="anchor-icon anchor-icon-link" anchorid="section920325116547" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p99264137551">ohpm从1.7.0版本开始，支持在.ohpmrc文件中配置enforce_dependency_key，该配置项值为布尔类型，默认为false。将配置设置为true后，ohpm会校验各模块的oh-package.json5中配置的直接依赖中的本地依赖名称与其对应的包名(模块名)是否一致，若不一致会导致依赖安装失败并在错误日志中打印出不一致的依赖名称与其对应的包名(模块名)。</p> <p id="ZH-CN_TOPIC_0000002478334466__p1886294245911"><strong>示例：</strong></p> <p id="ZH-CN_TOPIC_0000002478334466__p65164625915">在MyApplication工程下存在一个名称为foo的模块，foo模块的oh-package.json5如下所示：</p> <div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen54161373216" data-highlighted="yes"><ol class="linenums"><li>{</li><li><span class="">  <span class="hljs-string">"name"</span>: <span class="hljs-string">"foo"</span>,</span></li><li><span class="">  <span class="hljs-string">"version"</span>: <span class="hljs-string">"2.0.0"</span>,</span></li><li><span class="">  <span class="hljs-string">"description"</span>: <span class="hljs-string">"Please describe the basic information."</span>,</span></li><li> }</li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002478334466__p103951561649">在MyApplication工程下存在另一个名称为bar的模块，且bar模块中依赖了foo模块，bar模块的oh-package.json5如下所示：</p> <div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen1183510383510" data-highlighted="yes"><ol class="linenums"><li>{</li><li><span class="">  <span class="hljs-string">"name"</span>: <span class="hljs-string">"bar"</span>,</span></li><li><span class="">  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,</span></li><li><span class="">  <span class="hljs-string">"description"</span>: <span class="hljs-string">"Please describe the basic information."</span>,</span></li><li><span class="">  <span class="hljs-string">"dependencies"</span>: {</span></li><li><span class="">    <span class="hljs-string">"fee"</span>: <span class="hljs-string">"file:../foo"</span>  </span></li><li><span class="">  },</span></li><li> }</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334466__p1978419281961">如上所示，bar模块的oh-package.json5中配置了对foo模块的依赖，并为foo模块起了一个别名为fee。当在.ohpmrc中将enforce_dependency_key配置为true时：</p> <div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-ini" id="ZH-CN_TOPIC_0000002478334466__screen8802132815916" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">enforce_dependency_key</span>=<span class="hljs-literal">true</span></li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334466__p141608511396">此时在MyApplication下执行ohpm install --all命令将打印如下错误日志，同时会中断命令的执行：</p> <div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen1254152418158" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">ERROR</span>: <span class="hljs-title class_">local</span> <span class="hljs-title class_">dependency</span> <span class="hljs-string">"fee"</span> <span class="hljs-title class_">found</span> <span class="hljs-keyword">in</span> <span class="hljs-string">"D:\DevecostudioProjects\MyApplication2\bar\oh-package.json5"</span> <span class="hljs-title class_">does</span> <span class="hljs-title class_">not</span> <span class="hljs-keyword">match</span> <span class="hljs-title class_">the</span> <span class="hljs-title class_">actual</span> <span class="hljs-title class_">name</span> <span class="hljs-string">"foo"</span> <span class="hljs-title class_">of</span> <span class="hljs-title class_">its</span> <span class="hljs-title class_">oh</span>-<span class="hljs-keyword">package</span>.<span class="hljs-title class_">json5</span></li><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">ERROR</span>: <span class="hljs-title class_">Install</span> <span class="hljs-title class_">failed</span>, <span class="hljs-variable">detail</span>: <span class="hljs-title class_">There</span> <span class="hljs-title class_">are</span> <span class="hljs-title class_">some</span> <span class="hljs-title class_">dependency</span> <span class="hljs-title class_">names</span> <span class="hljs-title class_">that</span> <span class="hljs-title class_">are</span> <span class="hljs-title class_">inconsistent</span> <span class="hljs-title class_">with</span> <span class="hljs-title class_">the</span> <span class="hljs-title class_">actual</span> <span class="hljs-keyword">package</span> <span class="hljs-title class_">names</span>.</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334466__p838564311516">若没有配置enforce_dependency_key或将其配置为false时，命令将不会被中断，同时上述错误日志的日志级别将会下调为告警日志：</p> <div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen17846135712188" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">WARN</span>: <span class="hljs-title class_">local</span> <span class="hljs-title class_">dependency</span> <span class="hljs-string">"fee"</span> <span class="hljs-title class_">found</span> <span class="hljs-keyword">in</span> <span class="hljs-string">"D:\DevecostudioProjects\MyApplication2\bar\oh-package.json5"</span> <span class="hljs-title class_">does</span> <span class="hljs-title class_">not</span> <span class="hljs-keyword">match</span> <span class="hljs-title class_">the</span> <span class="hljs-title class_">actual</span> <span class="hljs-title class_">name</span> <span class="hljs-string">"foo"</span> <span class="hljs-title class_">of</span> <span class="hljs-title class_">its</span> <span class="hljs-title class_">oh</span>-<span class="hljs-keyword">package</span>.<span class="hljs-title class_">json5</span></li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334466__p13563174391515">建议在.ohpmrc文件中配置enforce_dependency_key为true，禁止以别名的方式配置本地依赖，避免出现如下场景：</p> <p id="ZH-CN_TOPIC_0000002478334466__p596854314302">基于上述示例，在MyApplication下真的存在一个名称为fee的模块，且该模块的版本号小于foo模块，fee模块的oh-package.json5如下所示：</p> <div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen1248051103120" data-highlighted="yes"><ol class="linenums"><li>{</li><li><span class="">  <span class="hljs-string">"name"</span>: <span class="hljs-string">"fee"</span>,</span></li><li><span class="">  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,</span>  <span class="hljs-comment">// 小于foo的版本号2.0.0</span></li><li><span class="">  <span class="hljs-string">"description"</span>: <span class="hljs-string">"Please describe the basic information."</span>,</span></li><li> }</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334466__p2521940112418">且entry模块中同时依赖了fee与bar，entry模块的oh-package.json5依赖配置如下所示：</p> <div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen18816144219266" data-highlighted="yes"><ol class="linenums"><li>{</li><li><span class="">  <span class="hljs-string">"name"</span>: <span class="hljs-string">"entry"</span>,</span></li><li><span class="">  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,</span></li><li><span class="">  <span class="hljs-string">"dependencies"</span>: {</span></li><li><span class="">    <span class="hljs-string">"fee"</span>: <span class="hljs-string">"file:../fee"</span>,</span></li><li><span class="">    <span class="hljs-string">"bar"</span>: <span class="hljs-string">"file:../bar"</span>  </span></li><li><span class="">  },</span></li><li> }</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334466__p0701164311159">此时在entry的依赖树中，依赖fee存在两个版本：一个别名为fee的foo模块，一个名称为fee的fee模块，若此时开启了<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section368717475562">resolve_conflict</a>，由于fee模块的实际版本号为1.0.0要小于foo模块的版本号2.0.0，在执行ohpm install时将只会在entry模块的oh_modules下安装以fee为别名的foo模块，而实际的fee模块则不会被安装，如下图所示：</p> <p id="ZH-CN_TOPIC_0000002478334466__p11744175418518"><span><img height="99.802801" originheight="139" originwidth="946" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104947.83832977868259129660479344154002:50001231000000:2800:CA1E34DB53824979AC3BD6617A8C7ACE7A4FE8D51B80A77E18F937E5957F8EDD.png" title="点击放大" width="656.355"></span></p> <p id="ZH-CN_TOPIC_0000002478334466__p9285929524">在entry的oh_modules下会生成一个名称为fee的软链接，该链接却指向foo模块的实际路径：</p> <p id="ZH-CN_TOPIC_0000002478334466__p121334111115"><span><img height="59.190985000000005" originheight="133" originwidth="1828" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104947.92753884610416944526994342434054:50001231000000:2800:948119DD1CB1ECCD56DCC29FF642F2E291F0ED8F2FAAC16062885BC5803842AD.png" title="点击放大" width="758.1"></span></p> <p id="ZH-CN_TOPIC_0000002478334466__p08232377811">如果entry实际希望依赖的是真实的fee模块而不是foo模块，则此时会导致entry无法编译成功。</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334466__p9812791330">1、从ohpm客户端5.0.7开始，若项目级build-profile.json5文件中strictMode字段下配置了useNormalizedOHMUrl开关且useNormalizedOHMUrl=true，则该配置优先级高于enforce_dependency_key，如果ohpm检测到依赖别名与oh-package.json5中name不一致时，会报错提示并中止程序执行；若未配置useNormalizedOHMUrl或useNormalizedOHMUrl=false时，是否校验别名一致性则根据enforce_dependency_key配置决定。</p> <p id="ZH-CN_TOPIC_0000002478334466__p192344041316">2、项目级build-profile.json5文件中，products节点下任意product字段配置了useNormalizedOHMUrl=true，则ohpm中useNormalizedOHMUrl开关会被设置为true，即ohpm检测到项目中依赖别名与oh-package.json5中name不一致时，会报错提示并中止程序执行。</p> </div></div></div> <div class="tiledSection"><h2 id="section1291814578276">ensure_dependency_include<i class="anchor-icon anchor-icon-link" anchorid="section1291814578276" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p1422310494019">ohpm从1.7.0版本开始，支持在.ohpmrc文件中配置ensure_dependency_include，该配置项值为布尔类型，默认为false。</p> <p id="ZH-CN_TOPIC_0000002478334466__p102043384215">在ohpm prepublish/publish时，ohpm会扫描待发布包的内容，如果代码中import了某个包的内容，但相应的包没有配置在dependencies/dynamicDependencies中，即如果该配置项的值为true，则ohpm会打印错误信息并中断执行；否则，ohpm只会打印告警提示。</p> <p id="ZH-CN_TOPIC_0000002478334466__p151723162018"></p> <p id="ZH-CN_TOPIC_0000002478334466__p933742315207">例如，test.har包的代码中import了@ohos/hypium包，但test.har的oh-package.json5的dependencies中未配置@ohos/hypium依赖。下面就ensure_dependency_include开关为true/false时ohpm publish的行为进行举例说明。</p> </div> <div class="tiledSection"><h3 id="section12604144912328" class="firsth2">示例1<i class="anchor-icon anchor-icon-link" anchorid="section12604144912328" tips="复制节点链接"></i></h3><ol id="ZH-CN_TOPIC_0000002478334466__ol122011174275"><li id="li132013722716"><span>将ensure_dependency_include开关置为false：</span><p></p><div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002478334466__screen18610154919227" data-highlighted="yes"><ol class="linenums"><li>ohpm config <span class="hljs-built_in">set</span> ensure_dependency_include <span class="hljs-literal">false</span></li></ol></pre></div></div> <p></p></li><li id="li8201197142713"><span>发布test.har包。</span><p></p><div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002478334466__screen2073482962313" data-highlighted="yes"><ol class="linenums"><li>ohpm publish test.har</li></ol></pre></div></div> <p></p></li><li id="li1620107172719"><span>当ensure_dependency_include=false时，发布完成后将打印告警提示。</span><p></p><p id="ZH-CN_TOPIC_0000002478334466__p1774132893018"><span><img originheight="563" originwidth="1274" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104947.97034367943711208500101897926523:50001231000000:2800:94CC1ACD9F0F1B145975EC1C55C5A5DB0D7E6B91FC5E67B3E9E392E80AC2DF4D.png" width="920" height="406.5620094191523"></span></p> <p></p></li></ol> </div> <div class="tiledSection"><h3 id="section169021083316">示例2<i class="anchor-icon anchor-icon-link" anchorid="section169021083316" tips="复制节点链接"></i></h3><ol id="ZH-CN_TOPIC_0000002478334466__ol47791746193116"><li id="li578011468313"><span>将ensure_dependency_include开关置为true：</span><p></p><div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002478334466__screen545847122412" data-highlighted="yes"><ol class="linenums"><li>ohpm config <span class="hljs-built_in">set</span> ensure_dependency_include <span class="hljs-literal">true</span></li></ol></pre></div></div> <p></p></li><li id="li678018461316"><span>发布test.har包。</span><p></p><div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002478334466__screen184574792415" data-highlighted="yes"><ol class="linenums"><li>ohpm publish test.har</li></ol></pre></div></div> <p></p></li><li id="li167801046123120"><span>当ensure_dependency_include=true时，发布时将报错。<span><img originheight="176" originwidth="1270" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104948.25571587041388375316717123892146:50001231000000:2800:651830382C0E810107D69B6B6C00DD8B451EA6B7CA6624A343DF9274B20A27A7.png" width="920" height="127.49606299212599"></span></span></li></ol> </div> <div class="tiledSection"><h2 id="section1237023983514">disallow_nested_package<i class="anchor-icon anchor-icon-link" anchorid="section1237023983514" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p12105124415361">ohpm从1.8.0版本开始，支持在.ohpmrc文件中配置disallow_nested_package，该配置项值为布尔类型，默认为false。在ohpm prepublish/publish时，ohpm会扫描待发布包的dependencies和dynamicDependencies依赖配置，如果依赖配置中存在相对路径或绝对路径配置的.har、.tgz依赖且disallow_nested_package开关为true，则ohpm会报错提示。</p> </div> <div class="tiledSection"><h3 id="section1235774719372" class="firsth2">示例<i class="anchor-icon anchor-icon-link" anchorid="section1235774719372" tips="复制节点链接"></i></h3><ol id="ZH-CN_TOPIC_0000002478334466__ol1666221817382"><li id="li866215187386"><span>lib_nested.har包的dependencies中配置了如下依赖：</span><p></p><div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen17754657037" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"dependencies"</span>: {</li><li>    <span class="hljs-string">"liblib_nested.so"</span>: <span class="hljs-string">"file:./src/main/cpp/types/liblib_nested"</span>,</li><li>    <span class="hljs-string">"hsp"</span>: <span class="hljs-string">"./libs/hsp-default.tgz"</span>,</li><li>    <span class="hljs-string">"lib_har"</span>: <span class="hljs-string">"./libs/lib_har.har"</span></li><li>  }</li><li>}</li></ol></pre></div></div> <p></p></li><li id="li1766251803810"><span>将disallow_nested_package 开关置为true。</span><p></p><div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002478334466__screen1798325093912" data-highlighted="yes"><ol class="linenums"><li>ohpm config <span class="hljs-built_in">set</span> disallow_nested_package <span class="hljs-literal">true</span></li></ol></pre></div></div> <p></p></li><li id="li2662101883816"><span>发布lib_nested.har。</span><p></p><div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002478334466__screen1983165013910" data-highlighted="yes"><ol class="linenums"><li>ohpm publish lib_nested.har</li></ol></pre></div></div> <p></p></li><li id="li14662151873817"><span>当disallow_nested_package=true时，发布时将报错。<span><img originheight="264" originwidth="1296" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104948.69419129194952476755330743330630:50001231000000:2800:068AD81F018C86CD65C084F5505BE43927DE4CC5CFE0DBC740295243E36E2729.png" width="920" height="187.40740740740742"></span></span></li></ol> </div> <div class="tiledSection"><h2 id="section136621053184912">odm_r2_project_root<i class="anchor-icon anchor-icon-link" anchorid="section136621053184912" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p3653614175414">odm_r2_project_root是ohpm客户端1.8.0新增的开关配置，默认为false，可以通过config命令或直接在.ohpmrc文件中修改其值。</p> <p id="ZH-CN_TOPIC_0000002478334466__p13662155384919">当该配置为true时，若在overrideDependencyMap中配置的依赖项替换文件中存在以相对路径配置的本地依赖项时，在ohpm运行时会基于工程根路径来查找这些本地依赖项。</p> <p id="ZH-CN_TOPIC_0000002478334466__p144411617596">示例：</p> <ol id="ZH-CN_TOPIC_0000002478334466__ol203937450613"><li id="li639344516617">.ohpmrc中开启odm_r2_project_root：<div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-ini" id="ZH-CN_TOPIC_0000002478334466__screen1142318552019" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">odm_r2_project_root</span>=<span class="hljs-literal">true</span></li></ol></pre></div></div> </li><li id="li1393145863">overrideDependencyMap配置示例：<div class="p" id="ZH-CN_TOPIC_0000002478334466__p896917501969">在工程根目录下的oh_package.json5中增加overrideDependencyMap配置，如下：<div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen15681112613317" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"overrideDependencyMap"</span>: {</li><li>     <span class="hljs-string">"lib1"</span>: <span class="hljs-string">"lib1-override-dep-map.json5"</span>,  </li><li>     <span class="hljs-string">"lib2"</span>: <span class="hljs-string">"lib2-override-dep-map.json5"</span></li><li>  }</li><li>}</li></ol></pre></div></div> </div> </li><li id="li739424512610">依赖项"lib1"的依赖项替换文件lib1-override-dep-map.json5示例：<div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen39748201189" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"dependencies"</span>: {</li><li>    <span class="hljs-string">"@ohos/test"</span>: <span class="hljs-string">"file:./test.har"</span></li><li>  }</li><li>}</li></ol></pre></div></div> </li></ol> <p id="ZH-CN_TOPIC_0000002478334466__p78691655101516">如上第3步所示，当odm_r2_project_root开关设置为true时，在ohpm运行时会以工程根目录为起点查找"./test.har"，比如：工程根路径为：D:\path\to\MyProject，在ohpm运行时解析得到test.har的绝对路径为：D:\path\to\MyProject\test.har。</p> </div> <div class="tiledSection"><h2 id="section96369529419">compability_log_level<i class="anchor-icon anchor-icon-link" anchorid="section96369529419" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p92531926101314">ohpm客户端从5.0.1开始新增开关配置'compability_log_level'字段，用于控制在缺少兼容性检测需要的字段时ohpm的处理逻辑。</p> <p id="ZH-CN_TOPIC_0000002478334466__p226412614139">compability_log_level字段默认赋值为'warn'，可配置的日志等级请见<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpmrc#section139481140114517">开关配置项说明</a>。</p> <p id="ZH-CN_TOPIC_0000002478334466__p17719435185015">在执行prepublish、publish命令时，ohpm会检测oh-package.json5文件中是否配置了兼容性检测需要的所有字段（'compatibleSdkVersion', 'compatibleSdkType', 'obfuscated', 'nativeComponents'），详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-oh-package-json5#zh-cn_topic_0000001792256137_oh-packagejson5-字段说明">模块级oh-package.json5字段说明</a>，下面统称 '兼容性字段'，如果未配置，则会根据日志等级打印提示或报错。</p> </div> <div class="tiledSection"><h3 id="section139481140114517" class="firsth2">开关配置项说明<i class="anchor-icon anchor-icon-link" anchorid="section139481140114517" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334466__ul6792161585211"><li id="li77922015175215">close：关闭功能，不主动检测兼容性字段。</li><li id="li1579251535214">info：检测到未配置的兼容性字段时，打印info日志。</li><li id="li479211156523">warn：检测到未配置的兼容性字段时，打印警告日志。</li><li id="li3792101565210">error：检测到未配置的兼容性字段时，打印报错提示并中断程序。</li></ul> </div> <div class="tiledSection"><h2 id="section101671095818">enable_unified_lockfile<i class="anchor-icon anchor-icon-link" anchorid="section101671095818" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p1117171045817">ohpm客户端从5.1.1开始新增开关配置enable_unified_lockfile字段。启用此特性后，ohpm将自动整合项目中所有子模块的oh-package-lock.json5文件，统一生成至项目根目录的oh-package-lock.json5文件中。</p> <p id="ZH-CN_TOPIC_0000002478334466__p169261551212">启用enable_unified_lockfile=true后，项目级统一管理lockfile锁文件，针对模块间存在重复依赖的场景，显著减少ohpm install耗时，优化构建流程。</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334466__p193031519183215">启用enable_unified_lockfile=true后，原分散在各模块下的.hsp依赖安装目录将统一迁移至项目根目录。在流水线上开启此特性时，需搭配配套的hvigor使用。</p> </div></div></div> </div> <div class="tiledSection"><h2 id="section20410165616573">enable_boost_extraction_speed<i class="anchor-icon anchor-icon-link" anchorid="section20410165616573" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p8473122165818">ohpm客户端从5.3.0开始新增开关配置enable_boost_extraction_speed字段。ohpm安装时涉及对.har/.tgz三方包文件的解压和遍历，启用此特性后，将使用高性能方法进行解压和遍历，当工程中存在大文件依赖时，可以显著减少ohpm install耗时。该功能当前处于实验阶段，暂不支持解压包含软链接的三方包文件。</p> </div> <div class="tiledSection"><h2 id="section1834543398">enable_lock_inner_pkg_version<i class="anchor-icon anchor-icon-link" anchorid="section1834543398" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p163401414148">ohpm客户端从5.3.1开始新增开关配置enable_lock_inner_pkg_version字段。默认为true，若设置为false，在ohpm安装时，不会将依赖内部的.har或.tgz子依赖的版本保存至oh-package-lock.json5，以防oh-package-lock.json5中保存不存在的路径导致二次安装报错。</p> <p id="ZH-CN_TOPIC_0000002478334466__p172501351691">如下图所示，蓝色箭头标识最终要安装的依赖，安装的依赖D@1.0.0来自依赖B@1.0.0（依赖名称和依赖版本相同的依赖会被定性为相同依赖，最终安装哪个由依赖构建先后顺序决定）, 因B@1.0.0并没有安装，但oh-package-lock.json5中锁定了依赖D的版本，在二次安装时会爆出D的依赖路径不存在错误，此时需要将该开关设置为false。</p> <p id="ZH-CN_TOPIC_0000002478334466__p1595561915116"><span><img originheight="628" originwidth="815" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104948.30331406526662695734218887939298:50001231000000:2800:F7A00298A08178277C2680812FD93AB443E6E6EB09544D24179165C73E652121.png" width="815" height="628"></span></p> <p id="ZH-CN_TOPIC_0000002478334466__p1773113315511"><strong>oh-package-lock.json5示例</strong></p> <ol id="ZH-CN_TOPIC_0000002478334466__ol5996418115711"><li id="li299621814571"><span>生成library.har，oh-package.json5如下。</span><p></p><div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen195632047125717" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"name"</span>: <span class="hljs-string">"library"</span>,</li><li>  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,</li><li>  <span class="hljs-string">"description"</span>: <span class="hljs-string">"Please describe the basic information."</span>,</li><li>  <span class="hljs-string">"author"</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-string">"license"</span>: <span class="hljs-string">"Apache-2.0"</span>,</li><li>  <span class="hljs-string">"dependencies"</span>: {</li><li>    <span class="hljs-string">"inner"</span>: <span class="hljs-string">"./libs/inner.har"</span></li><li>  },</li><li>  <span class="hljs-string">"types"</span>: <span class="hljs-string">"Index.d.ets"</span>,</li><li>  <span class="hljs-string">"artifactType"</span>: <span class="hljs-string">"obfuscation"</span>,</li><li>  <span class="hljs-string">"compatibleSdkVersion"</span>: <span class="hljs-number">21</span>,</li><li>  <span class="hljs-string">"compatibleSdkType"</span>: <span class="hljs-string">"HarmonyOS"</span>,</li><li>  <span class="hljs-string">"obfuscated"</span>: <span class="hljs-keyword">false</span></li><li>}</li></ol></pre></div></div> <p></p></li><li id="li399612189577"><span>entry依赖library.har，oh-package.json5如下。</span><p></p><div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen8938523115115" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"name"</span>: <span class="hljs-string">"entry"</span>,</li><li>  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,</li><li>  <span class="hljs-string">"description"</span>: <span class="hljs-string">"Please describe the basic information."</span>,</li><li>  <span class="hljs-string">"main"</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-string">"author"</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-string">"license"</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-string">"dependencies"</span>: {</li><li>    <span class="hljs-string">"library"</span>: <span class="hljs-string">"./library.har"</span></li><li>  }</li><li>}</li></ol></pre></div></div> <p></p></li><li id="li699618183579"><span>.ohpmrc中配置开关：enable_lock_inner_pkg_version=false，工程任意目录下执行命令：ohpm install --all，此时生成的entry/oh-package-lock.json5中不会锁定内部包inner的版本，如下所示。</span><p></p><div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen39134415412" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  ......</li><li>  <span class="hljs-string">"specifiers"</span>: {</li><li>    <span class="hljs-string">"library@library.har"</span>: <span class="hljs-string">"library@library.har"</span></li><li>  },</li><li>  <span class="hljs-string">"packages"</span>: {</li><li>    <span class="hljs-string">"library@library.har"</span>: {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"library"</span>,</li><li>      <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,</li><li>      <span class="hljs-string">"resolved"</span>: <span class="hljs-string">"library.har"</span>,</li><li>      <span class="hljs-string">"registryType"</span>: <span class="hljs-string">"local"</span>,</li><li>      <span class="hljs-string">"dependencies"</span>: {</li><li>        <span class="hljs-string">"inner"</span>: <span class="hljs-string">"./libs/inner.har"</span></li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334466__p134211333911">enable_lock_inner_pkg_version=true时，entry/oh-package-lock.json5结果如下：</p> <div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen104356141325" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  ......</li><li>  <span class="hljs-string">"specifiers"</span>: {</li><li>    <span class="hljs-string">"inner@../oh_modules/.ohpm/library@85ursk4cfzbgycewlyxweed+cyyeeixxig5mlazoo+g=/oh_modules/library/libs/inner.har"</span>: <span class="hljs-string">"inner@../oh_modules/.ohpm/library@c0jkxsxl3amvdd7rr1enrkrejzharxwucdoyc29br+u=/oh_modules/library/libs/inner.har"</span>,</li><li>    <span class="hljs-string">"library@library.har"</span>: <span class="hljs-string">"library@library.har"</span></li><li>  },</li><li>  <span class="hljs-string">"packages"</span>: {</li><li>    <span class="hljs-string">"inner@../oh_modules/.ohpm/library@c0jkxsxl3amvdd7rr1enrkrejzharxwucdoyc29br+u=/oh_modules/library/libs/inner.har"</span>: {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"inner"</span>,</li><li>      <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,</li><li>      <span class="hljs-string">"resolved"</span>: <span class="hljs-string">"../oh_modules/.ohpm/library@c0jkxsxl3amvdd7rr1enrkrejzharxwucdoyc29br+u=/oh_modules/library/libs/inner.har"</span> </li><li>      <span class="hljs-string">"registryType"</span>: <span class="hljs-string">"local"</span></li><li>    },</li><li>    <span class="hljs-string">"library@library.har"</span>: {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"library"</span>,</li><li>      <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,</li><li>      <span class="hljs-string">"resolved"</span>: <span class="hljs-string">"library.har"</span></li><li>      <span class="hljs-string">"registryType"</span>: <span class="hljs-string">"local"</span>,</li><li>      <span class="hljs-string">"dependencies"</span>: {</li><li>        <span class="hljs-string">"inner"</span>: <span class="hljs-string">"./libs/inner.har"</span></li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section2045412394117">case_sensitive_check<i class="anchor-icon anchor-icon-link" anchorid="section2045412394117" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334466__p1721617372125">ohpm客户端从6.21.0新增开关配置"case_sensitive_check"字段。若设置为true，在执行ohpm相关命令时，如果ohpm检测到工程中文件的配置路径和文件的实际路径存在大小写不一致问题时，则会报错提示开发者修改。该配置项仅在Windows环境下生效。</p> <p id="ZH-CN_TOPIC_0000002478334466__p861514616208"><strong>检测范围</strong></p> <ul id="ZH-CN_TOPIC_0000002478334466__ul1538681010464"><li id="li1695413142461">.har包、.tgz包、工程中的module作为依赖时的路径。</li><li id="li3386161018464">prefix、target_path、parameterFile的命令中配置的目录或路径。</li><li id="li1638711101469">overrides配置项中的本地依赖路径，overrideDependencyMap配置项涉及的配置文件及文件内的本地依赖路径，parameterFile配置文件及文件内的本地依赖路径。</li></ul> <p id="ZH-CN_TOPIC_0000002478334466__p1257817135411"><strong>示例</strong></p> <ol id="ZH-CN_TOPIC_0000002478334466__ol11829115015119"><li id="li97961443911"><span>准备本地har包：test.har，该har包内oh-package.json5中name为：test，将其放置在模块entry的libs目录下。</span></li><li id="li68291250195115"><span>entry依赖test.har，则原始依赖路径为：&lt;project_dir&gt;/entry/libs/test.har， entry的oh-package.json5内容如下：</span><p></p><div _ngcontent-qcg-c106="" class="highlight-div"><div _ngcontent-qcg-c106="" class="highlight-div-header"><div _ngcontent-qcg-c106="" class="highlight-div-header-left"><div _ngcontent-qcg-c106="" class="handle-button expand-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcg-c106="" class="highlight-div-header-right"><div _ngcontent-qcg-c106="" class="handle-button ai-button"></div><div _ngcontent-qcg-c106="" class="handle-button line-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcg-c106="" class="handle-button theme-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcg-c106="" class="handle-button copy-button"><div _ngcontent-qcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334466__screen1482945017513" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"name"</span>: <span class="hljs-string">"entry"</span>,</li><li>  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,</li><li>  <span class="hljs-string">"description"</span>: <span class="hljs-string">"Please describe the basic information."</span>,</li><li>  <span class="hljs-string">"dependencies"</span>: {</li><li>    <span class="hljs-string">"test"</span>: <span class="hljs-string">"./Libs/test.har"</span></li><li>  }</li><li>}</li></ol></pre></div></div> <p></p></li><li id="li16829125011511"><span>执行ohpm install，ohpm可检测到test.har的实际路径（&lt;project_dir&gt;/entry/libs/test.har）与配置路径（&lt;project_dir&gt;/entry/Libs/test.har）大小写不一致(配置时libs目录名存在大写字母：'L'，与原始目录名不一致)，此时ohpm会报错提示并中断执行。</span></li></ol> </div> </div> <div></div></div>