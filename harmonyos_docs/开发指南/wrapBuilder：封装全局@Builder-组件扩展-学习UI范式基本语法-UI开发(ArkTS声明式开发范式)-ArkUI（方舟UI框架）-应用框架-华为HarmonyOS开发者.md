<h1 _ngcontent-dam-c119="" class="doc-title ng-star-inserted" title="wrapBuilder：封装全局@Builder"> wrapBuilder：封装全局@Builder </h1>

<div _ngcontent-dam-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p> 当在一个struct内使用多个全局@Builder函数实现UI的不同效果时，代码维护将变得非常困难，且页面不够整洁。此时，可以使用wrapBuilder封装全局@Builder。</p> <p> 在阅读本文档前，建议阅读：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-builder">@Builder</a>。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 11开始使用。</p>  <p>从API version 12开始，wrapBuilder支持在元服务中使用。</p>  </div></div></div> <p>当@Builder方法赋值给变量或者数组后，在UI方法中无法使用。</p> <div _ngcontent-dam-c106="" class="highlight-div"><div _ngcontent-dam-c106="" class="highlight-div-header"><div _ngcontent-dam-c106="" class="highlight-div-header-left"><div _ngcontent-dam-c106="" class="handle-button expand-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dam-c106="" class="highlight-div-header-right"><div _ngcontent-dam-c106="" class="handle-button ai-button"></div><div _ngcontent-dam-c106="" class="handle-button line-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dam-c106="" class="handle-button theme-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dam-c106="" class="handle-button copy-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dam-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">builderElement</span>(<span class="hljs-params"></span>) {}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">builderArr</span>: <span class="hljs-title class_">Function</span>[] = [builderElement];</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">testBuilder</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">ForEach</span>(builderArr, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">Function</span></span>) =&gt;</span> {</li><li>    <span class="hljs-title function_">item</span>();</li><li>  })</li><li>}</li></ol></pre></div></div> <p>在上述代码中，builderArr是一个由@Builder方法组成的数组。在ForEach循环中取每个@Builder方法时，会出现@Builder方法在UI方法中无法使用的问题。</p> <p>为了解决这一问题，引入wrapBuilder作为全局@Builder封装函数。wrapBuilder返回WrappedBuilder对象，用于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-builder#全局自定义构建函数">全局@Builder</a>的赋值和传递。</p>  <div class="tiledSection"><h2 id="接口说明">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h2><p>wrapBuilder是一个模板函数，返回一个WrappedBuilder对象。</p> <div _ngcontent-dam-c106="" class="highlight-div"><div _ngcontent-dam-c106="" class="highlight-div-header"><div _ngcontent-dam-c106="" class="highlight-div-header-left"><div _ngcontent-dam-c106="" class="handle-button expand-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dam-c106="" class="highlight-div-header-right"><div _ngcontent-dam-c106="" class="handle-button ai-button"></div><div _ngcontent-dam-c106="" class="handle-button line-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dam-c106="" class="handle-button theme-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dam-c106="" class="handle-button copy-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dam-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> wrapBuilder&lt;<span class="hljs-title class_">Args</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Object</span>[]&gt;(<span class="hljs-attr">builder</span>: <span class="hljs-function">(<span class="hljs-params">...args: Args</span>) =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-title class_">WrappedBuilder</span>&lt;<span class="hljs-title class_">Args</span>&gt;;</li></ol></pre></div></div> <p>同时 WrappedBuilder对象也是一个模板类。</p> <div _ngcontent-dam-c106="" class="highlight-div"><div _ngcontent-dam-c106="" class="highlight-div-header"><div _ngcontent-dam-c106="" class="highlight-div-header-left"><div _ngcontent-dam-c106="" class="handle-button expand-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dam-c106="" class="highlight-div-header-right"><div _ngcontent-dam-c106="" class="handle-button ai-button"></div><div _ngcontent-dam-c106="" class="handle-button line-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dam-c106="" class="handle-button theme-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dam-c106="" class="handle-button copy-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dam-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">declare</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WrappedBuilder</span>&lt;<span class="hljs-title class_">Args</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Object</span>[]&gt; {</li><li>  <span class="hljs-attr">builder</span>: <span class="hljs-function">(<span class="hljs-params">...args: Args</span>) =&gt;</span> <span class="hljs-built_in">void</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">builder: (...args: Args) =&gt; <span class="hljs-built_in">void</span></span>);</li><li>}</li></ol></pre></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>模板参数Args extends Object[]需要匹配@Builder函数参数的类型。</p>  </div></div></div> <p>使用方法：</p> <div _ngcontent-dam-c106="" class="highlight-div"><div _ngcontent-dam-c106="" class="highlight-div-header"><div _ngcontent-dam-c106="" class="highlight-div-header-left"><div _ngcontent-dam-c106="" class="handle-button expand-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dam-c106="" class="highlight-div-header-right"><div _ngcontent-dam-c106="" class="handle-button ai-button"></div><div _ngcontent-dam-c106="" class="handle-button line-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dam-c106="" class="handle-button theme-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dam-c106="" class="handle-button copy-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dam-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">builderVar</span>: <span class="hljs-title class_">WrappedBuilder</span>&lt;[<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>]&gt; = <span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-title class_">MyBuilder</span>);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">builderArr</span>: <span class="hljs-title class_">WrappedBuilder</span>&lt;[<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>]&gt;[] = [<span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-title class_">MyBuilder</span>)]; <span class="hljs-comment">//可以放入数组</span></li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="限制条件">限制条件<i class="anchor-icon anchor-icon-link" anchorid="限制条件" tips="复制节点链接"></i></h2><ol><li><p>wrapBuilder方法只能传入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-builder#全局自定义构建函数">全局@Builder</a>方法。</p>  </li><li><p>WrappedBuilder对象的builder属性方法仅限在struct内部使用。</p>  </li></ol> </div>  <div class="tiledSection"><h2 id="builder方法赋值给变量">@Builder方法赋值给变量<i class="anchor-icon anchor-icon-link" anchorid="builder方法赋值给变量" tips="复制节点链接"></i></h2><p>使用@Builder装饰器装饰的方法MyBuilder作为wrapBuilder的参数，然后将wrapBuilder的返回值赋值给变量globalBuilder，以解决@Builder方法赋值给变量后无法使用的问题。</p> <div _ngcontent-dam-c106="" class="highlight-div"><div _ngcontent-dam-c106="" class="highlight-div-header"><div _ngcontent-dam-c106="" class="highlight-div-header-left"><div _ngcontent-dam-c106="" class="handle-button expand-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dam-c106="" class="highlight-div-header-right"><div _ngcontent-dam-c106="" class="handle-button ai-button"></div><div _ngcontent-dam-c106="" class="handle-button line-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dam-c106="" class="handle-button theme-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dam-c106="" class="handle-button copy-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dam-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyBuilder</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span>, size: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-title class_">Text</span>(value)</li><li>    .<span class="hljs-title function_">fontSize</span>(size)</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">globalBuilder</span>: <span class="hljs-title class_">WrappedBuilder</span>&lt;[<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>]&gt; = <span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-title class_">MyBuilder</span>);</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        globalBuilder.<span class="hljs-title function_">builder</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>, <span class="hljs-number">50</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="builder方法赋值给变量在ui语法中使用">@Builder方法赋值给变量在UI语法中使用<i class="anchor-icon anchor-icon-link" anchorid="builder方法赋值给变量在ui语法中使用" tips="复制节点链接"></i></h2><p>自定义组件Index使用ForEach进行不同@Builder函数的渲染，可以使用builderArr声明的wrapBuilder数组来实现不同的@Builder函数的效果。整体代码会更加整洁。</p> <div _ngcontent-dam-c106="" class="highlight-div"><div _ngcontent-dam-c106="" class="highlight-div-header"><div _ngcontent-dam-c106="" class="highlight-div-header-left"><div _ngcontent-dam-c106="" class="handle-button expand-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dam-c106="" class="highlight-div-header-right"><div _ngcontent-dam-c106="" class="handle-button ai-button"></div><div _ngcontent-dam-c106="" class="handle-button line-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dam-c106="" class="handle-button theme-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dam-c106="" class="handle-button copy-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyBuilder</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span>, size: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-title class_">Text</span>(value)</li><li>    .<span class="hljs-title function_">fontSize</span>(size)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">YourBuilder</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span>, size: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-title class_">Text</span>(value)</li><li>    .<span class="hljs-title function_">fontSize</span>(size)</li><li>    .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>)</li><li>}</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">builderArr</span>: <span class="hljs-title class_">WrappedBuilder</span>&lt;[<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>]&gt;[] = [<span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-title class_">MyBuilder</span>), <span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-title class_">YourBuilder</span>)];</li><li>
</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">testBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">ForEach</span>(builderArr, <span class="hljs-function">(<span class="hljs-params">item: WrappedBuilder&lt;[<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>]&gt;</span>) =&gt;</span> {</li><li>      item.<span class="hljs-title function_">builder</span>(<span class="hljs-string">'Hello World'</span>, <span class="hljs-number">30</span>)</li><li>    }</li><li>
</li><li>    )</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">testBuilder</span>()</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="引用传递">引用传递<i class="anchor-icon anchor-icon-link" anchorid="引用传递" tips="复制节点链接"></i></h2><p>按引用传递参数时，状态变量的改变会引起@Builder方法内的UI刷新。</p> <div _ngcontent-dam-c106="" class="highlight-div"><div _ngcontent-dam-c106="" class="highlight-div-header"><div _ngcontent-dam-c106="" class="highlight-div-header-left"><div _ngcontent-dam-c106="" class="handle-button expand-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dam-c106="" class="highlight-div-header-right"><div _ngcontent-dam-c106="" class="handle-button ai-button"></div><div _ngcontent-dam-c106="" class="handle-button line-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dam-c106="" class="handle-button theme-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dam-c106="" class="handle-button copy-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dam-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tmp</span> {</li><li>  <span class="hljs-attr">paramA2</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'hello'</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">overBuilder</span>(<span class="hljs-params">param: Tmp</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`wrapBuildervalue:<span class="hljs-subst">${param.paramA2}</span>`</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">wBuilder</span>: <span class="hljs-title class_">WrappedBuilder</span>&lt;[<span class="hljs-title class_">Tmp</span>]&gt; = <span class="hljs-title function_">wrapBuilder</span>(overBuilder);</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">label</span>: <span class="hljs-title class_">Tmp</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tmp</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      wBuilder.<span class="hljs-title function_">builder</span>({ <span class="hljs-attr">paramA2</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span>.<span class="hljs-property">paramA2</span> })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Click me'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span>.<span class="hljs-property">paramA2</span> = <span class="hljs-string">'ArkUI'</span>;</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="常见问题">常见问题<i class="anchor-icon anchor-icon-link" anchorid="常见问题" tips="复制节点链接"></i></h2></div>  <div class="tiledSection"><h3 id="重复定义wrapbuilder失效" class="firsth2">重复定义wrapBuilder失效<i class="anchor-icon anchor-icon-link" anchorid="重复定义wrapbuilder失效" tips="复制节点链接"></i></h3><p>在同一个自定义组件内，同一个wrapBuilder只能初始化一次。例如，builderObj通过wrapBuilder(MyBuilderFirst)初始化后，再次对builderObj赋值wrapBuilder(MyBuilderSecond)将不会生效。</p> <div _ngcontent-dam-c106="" class="highlight-div"><div _ngcontent-dam-c106="" class="highlight-div-header"><div _ngcontent-dam-c106="" class="highlight-div-header-left"><div _ngcontent-dam-c106="" class="handle-button expand-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dam-c106="" class="highlight-div-header-right"><div _ngcontent-dam-c106="" class="handle-button ai-button"></div><div _ngcontent-dam-c106="" class="handle-button line-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dam-c106="" class="handle-button theme-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dam-c106="" class="handle-button copy-button"><div _ngcontent-dam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dam-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyBuilderFirst</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span>, size: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-title class_">Text</span>(<span class="hljs-string">'MyBuilderFirst：'</span> + value)</li><li>    .<span class="hljs-title function_">fontSize</span>(size)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyBuilderSecond</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span>, size: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-title class_">Text</span>(<span class="hljs-string">'MyBuilderSecond：'</span> + value)</li><li>    .<span class="hljs-title function_">fontSize</span>(size)</li><li>}</li><li>
</li><li><span class="hljs-keyword">interface</span> <span class="hljs-title class_">BuilderModel</span> {</li><li>  <span class="hljs-attr">globalBuilder</span>: <span class="hljs-title class_">WrappedBuilder</span>&lt;[<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>]&gt;;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">builderObj</span>: <span class="hljs-title class_">BuilderModel</span> = { <span class="hljs-attr">globalBuilder</span>: <span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-title class_">MyBuilderFirst</span>) };</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-comment">// wrapBuilder(MyBuilderSecond) 不会生效</span></li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">builderObj</span>.<span class="hljs-property">globalBuilder</span> = <span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-title class_">MyBuilderSecond</span>);</li><li>    }, <span class="hljs-number">1000</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">builderObj</span>.<span class="hljs-property">globalBuilder</span>.<span class="hljs-title function_">builder</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>, <span class="hljs-number">20</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>