<h1 _ngcontent-wbm-c119="" class="doc-title ng-star-inserted" title="一键登录场景下无法获取到匿名手机号如何解决"> 一键登录场景下无法获取到匿名手机号如何解决 </h1>

<div _ngcontent-wbm-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>在华为账号一键登录场景下无法获取到匿名手机号时，建议通过以下步骤排查解决：</p>    <ol>     <li>开发者开启了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/source-obfuscation-guide" target="_blank">代码混淆</a>，quickLoginAnonymousPhone（匿名手机号）属性需要配置混淆白名单防止release包被混淆。在调用获取匿名手机号方法工程模块的混淆文件obfuscation-rules.txt中添加：      <div _ngcontent-wbm-c106="" class="highlight-div"><div _ngcontent-wbm-c106="" class="highlight-div-header"><div _ngcontent-wbm-c106="" class="highlight-div-header-left"><div _ngcontent-wbm-c106="" class="handle-button expand-button"><div _ngcontent-wbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wbm-c106="" class="highlight-div-header-right"><div _ngcontent-wbm-c106="" class="handle-button ai-button"></div><div _ngcontent-wbm-c106="" class="handle-button line-button"><div _ngcontent-wbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wbm-c106="" class="handle-button theme-button"><div _ngcontent-wbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wbm-c106="" class="handle-button copy-button"><div _ngcontent-wbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wbm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li># 开发者开启属性混淆需要配置quickLoginAnonymousPhone属性白名单防止其被混淆</li><li>-enable-property-obfuscation</li><li>-keep-property-name</li><li>quickLoginAnonymousPhone</li></ol></pre></div></div></li>     <li>Wearable、TV（非5.1.1版本）设备无法获取到手机号，会报<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section116574197436" target="_blank">1001500003 不支持该scopes或permissions</a>。</li>     <li>华为账号未绑定手机号，该异常场景应用需要展示其他登录方式。</li>     <li>使用华为账号一键登录服务的账号必须是中国境内（不包含中国香港、中国澳门、中国台湾）华为账号。</li>     <li>确认是否在AGC的<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html#/myProject" target="_blank">开发与服务</a>中申请华为账号一键登录权限。图示为未申请状态，未申请将报错<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/account-faq-2">1001502014 应用未申请scopes或permissions权限</a>。      <p><span><img height="121.69500000000001" originheight="586" originwidth="2518" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114554.70912592099573987628902716176927:50001231000000:2800:53FF15854610B7D1923BCCAFF9BC583DD82E9B53A58E84EDDC6541966707CFAA.png" title="点击放大" width="523.6875"></span></p>      <p></p></li>     <li>申请的华为账号一键登录权限待审批或待生效，<strong>权限申请后需要24小时后生效或将调试设备系统时间向后调整24小时后重试。</strong></li>     <li>权限申请成功后，确认scope参数是否传入的是quickLoginAnonymousPhone，详情可参考一键登录<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/account-phone-unionid-login#section834212543125">客户端开发</a>。      <div _ngcontent-wbm-c106="" class="highlight-div"><div _ngcontent-wbm-c106="" class="highlight-div-header"><div _ngcontent-wbm-c106="" class="highlight-div-header-left"><div _ngcontent-wbm-c106="" class="handle-button expand-button"><div _ngcontent-wbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wbm-c106="" class="highlight-div-header-right"><div _ngcontent-wbm-c106="" class="handle-button ai-button"></div><div _ngcontent-wbm-c106="" class="handle-button line-button"><div _ngcontent-wbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wbm-c106="" class="handle-button theme-button"><div _ngcontent-wbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wbm-c106="" class="handle-button copy-button"><div _ngcontent-wbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wbm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li>    <span class="hljs-comment">// 创建授权请求，并设置参数</span></li><li>    <span class="hljs-keyword">const</span> authRequest = <span class="hljs-keyword">new</span> authentication.<span class="hljs-title class_">HuaweiIDProvider</span>().<span class="hljs-title function_">createAuthorizationWithHuaweiIDRequest</span>();</li><li>    <span class="hljs-comment">// 获取匿名手机号需传quickLoginAnonymousPhone这个scope，传参之前需要先申请“华为账号一键登录”权限，否则会返回1001502014错误码</span></li><li>    authRequest.<span class="hljs-property">scopes</span> = [<span class="hljs-string">'quickLoginAnonymousPhone'</span>];</li></ol></pre></div></div></li>    </ol>   </div>   <div></div></div>