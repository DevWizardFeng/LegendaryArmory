<h1 _ngcontent-rje-c119="" class="doc-title ng-star-inserted" title="万能卡片生成"> 万能卡片生成 </h1>

<div _ngcontent-rje-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000002196888996"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p336992764019">基于AI大模型理解开发者的卡片需求信息，通过对话式的交互智能生成HarmonyOS万能卡片工程。</p> <p id="ZH-CN_TOPIC_0000002510294311__p93791810112514">从DevEco Studio 6.0.1 Beta1开始，在输入框新增卡片生成的入口。</p> <div class="tiledSection"><h2 id="section1539218472534">使用约束<i class="anchor-icon anchor-icon-link" anchorid="section1539218472534" tips="复制节点链接"></i></h2></div> <ol id="ZH-CN_TOPIC_0000002510294311__ol35221493310"><li id="li14522798312">建议从以下维度描述卡片需求： <div class="tablenoborder"><div class="tbBox"><table id="zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_table2777121365114" class="layoutFixed idpTab"><tbody><tr id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_row2811101335110"><td class="cellrowborder" valign="top" width="6.646410938093431%"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p15811613175119"><strong>序号</strong></p> </td> <td class="cellrowborder" valign="top" width="13.406760349411318%"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p1781111316515"><strong>建议描述维度</strong></p> </td> <td class="cellrowborder" valign="top" width="43.7998480820357%"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p281131395110"><strong>说明</strong></p> </td> <td class="cellrowborder" valign="top" width="36.14698063045955%"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p4812111317512"><strong>举例</strong></p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_row9812413115112"><td class="cellrowborder" valign="top" width="6.646410938093431%"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p3812171325119">1</p> </td> <td class="cellrowborder" valign="top" width="13.406760349411318%"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p281231365113">卡片用途</p> </td> <td class="cellrowborder" valign="top" width="43.7998480820357%"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p081218133513">卡片的用途/业务场景，比如电商购物、娱乐、生活服务类等。</p> </td> <td class="cellrowborder" valign="top" width="36.14698063045955%"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p198129138516">例如“电商购物卡片”、“娱乐类卡片”。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_row1481210131516"><td class="cellrowborder" valign="top" width="6.646410938093431%"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p181217131518">2</p> </td> <td class="cellrowborder" valign="top" width="13.406760349411318%"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p1081251355111">卡片功能</p> </td> <td class="cellrowborder" valign="top" width="43.7998480820357%"><p id="ZH-CN_TOPIC_0000002510294311__p1331319111119">卡片包含的组件，如图标、标题、按钮等。</p> <p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p1681211318517">组件的状态信息，如图标主题、标题内容、按钮显示的文字等。</p> </td> <td class="cellrowborder" valign="top" width="36.14698063045955%"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p1781251395119">例如“新品上市主标题”、“商品搜索按钮”、“热门电影子板块入口”等。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_row177060116214"><td class="cellrowborder" valign="top" width="6.646410938093431%"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p10812161313516">3</p> </td> <td class="cellrowborder" valign="top" width="13.406760349411318%"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p2081281385110">卡片尺寸</p> </td> <td class="cellrowborder" valign="top" width="43.7998480820357%"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p671218463455">HarmonyOS官网提供的四种卡片尺寸：1*2（微卡片）、2*2（小卡片）、2*4（中卡片）、4*4（大卡片）。</p> <p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p18812513155113">卡片尺寸为非必选项，AI会根据前两个维度描述的信息，智能选择效果最佳的尺寸。</p> </td> <td class="cellrowborder" valign="top" width="36.14698063045955%"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p681211316518">例如“2*2尺寸的卡片”、“中卡片”等。</p> </td> </tr>  </tbody></table></div> </div> </li><li id="li45221995316">当前不支持在生成卡片预览图后，继续描述需求进行增量修改。</li></ol> <div class="tiledSection"><h2 id="section14677124015586">万能卡片生成<i class="anchor-icon anchor-icon-link" anchorid="section14677124015586" tips="复制节点链接"></i></h2><ol id="ZH-CN_TOPIC_0000002510294311__ol11538101213516"><li id="li924425172110">点击页面右侧菜单栏CodeGenie图标，完成登录后，在对话区域输入"/"调出命令，选择<strong>Service Widget</strong>；或者在输入框左下角下拉框选择<strong>Service Widget</strong>，输入万能卡片的需求，并点击发送。开发者可以根据模型提示进行多轮交互，不断完善需求。<p id="ZH-CN_TOPIC_0000002510294311__p1685930172115">DevEco Studio 6.0.0 Beta1之前的版本，请在对话区域下拉框中选择<strong>Service Widget</strong>后输入需求。</p> <p id="ZH-CN_TOPIC_0000002510294311__p73641996911"><span><img originheight="634" originwidth="622" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104754.52605955357229946804808827654590:50001231000000:2800:37181102DF21DA2E90BBD9BD076CC0F0FE5B0A9D968DEFF952E9822E8D330934.png" width="622" height="634"></span></p> </li><li id="li1853810127511">需求描述完成后，智能生成卡片（1~3张）及预览效果图。生成效果示例<strong>：</strong><p id="ZH-CN_TOPIC_0000002510294311__p161818465167"><span><img originheight="956" originwidth="1380" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104754.00619308558578478554094913049793:50001231000000:2800:AD77096652B3E3F5AF3BBED7AD62A19CCBF5192CB72AD27368F9A6EC35EF9DFF.gif" width="920" height="637.3333333333333"></span></p> </li></ol> </div> <div class="tiledSection"><h2 id="section8133541171119">万能卡片保存<i class="anchor-icon anchor-icon-link" anchorid="section8133541171119" tips="复制节点链接"></i></h2><ol id="ZH-CN_TOPIC_0000002510294311__ol587516385149"><li id="li12875338141419">点击<span><img originheight="32" originwidth="86" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104754.69540668885827585684683079823885:50001231000000:2800:15B9F3DBCC6512A11A22769549C8478E40C09B98253076BAB27D94AFE42F622E.png" class="notEnlarge" width="86" height="32"></span>，可查看生成卡片的UI代码、配置信息和下载静态资源文件。</li><li id="li10875938111410">保存卡片工程有两种方式：<p id="ZH-CN_TOPIC_0000002510294311__p1961054161417">方式一：使用代码/配置查看窗口的“复制”、“插入”或“创建文件”等按钮，手动保存卡片代码和配置信息。</p> <p id="ZH-CN_TOPIC_0000002510294311__p11611054111417">方式二：点击“保存工程”按钮，自动保存卡片工程，卡片代码、配置、静态资源文件等会自动保存到工程对应目录中。默认勾选保存逻辑代码，逻辑代码用于配置卡片事件及卡片数据等信息，具体请参考<a href="/consumer/cn/doc/harmonyos-guides/ide-codegenie-service-widget#section17840955102711">自定义配置逻辑代码</a>。</p> <p id="ZH-CN_TOPIC_0000002510294311__p186195419141"><strong>流程示例：</strong></p> <p id="ZH-CN_TOPIC_0000002510294311__p1132412934119"><span><img originheight="956" originwidth="1380" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104754.56726708111142160741430086976902:50001231000000:2800:97E35046A669288AB4EEAC536DB12E7F0B979166FF746C2FF9E4CA3CB1045171.gif" width="920" height="637.3333333333333"></span></p> <p id="ZH-CN_TOPIC_0000002510294311__p13480107175">工程保存完成后，工程中会新增如下卡片相关文件：</p> <p id="ZH-CN_TOPIC_0000002510294311__p1788520211155"><span><img height="709.76913" originheight="1804" originwidth="716" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104755.39703364170043941333081049524110:50001231000000:2800:BD81EEB7B2F5455B95A15C9750716D1C803CBE5E77684C1D07447C8BD0F0AFC8.png" title="点击放大" width="286.2825"></span></p> </li></ol> </div> <div class="tiledSection"><h2 id="section17840955102711">自定义配置逻辑代码<i class="anchor-icon anchor-icon-link" anchorid="section17840955102711" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p17435426143919">逻辑代码包含实现卡片数据交互和卡片事件两类。</p> <ul id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_ul133981641193914"><li id="zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_li1339894163918">卡片数据交互：触发卡片页面刷新。应用工程生成的卡片数据交互，可通过数据库或网络请求两种方式来触发卡片页面刷新；对于元服务工程生成的卡片，数据交互为通过网络请求方式触发卡片页面刷新。</li><li id="zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_li4398114116398">卡片事件：使用router事件跳转到指定的UIAbility、使用call事件拉起UIAbility到后台、使用message事件刷新卡片内容。</li></ul> </div> <div class="tiledSection"><h3 id="section195636277408" class="firsth2">目录结构<i class="anchor-icon anchor-icon-link" anchorid="section195636277408" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p3203619124419">在module &gt; src &gt; main &gt; ets 路径下， formcommon目录用于存放生成卡片的逻辑代码。</p> <p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p38082521912"><span><img height="299.8884" originheight="383" originwidth="355" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104755.38304046672949652826661751843663:50001231000000:2800:566C6373EFD4501F6C4B3F0F93A93A59D822F47585DE5EEB96126934628C714D.png" title="点击放大" width="278.3025"></span></p> <ul id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_ul151339196457"><li id="zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_li123221555712">formsetting：存放用户可配置的文件。<ul id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_ul7153171920578"><li id="zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_li613361914512">formsetting &gt; formdbsetting：自定义配置以数据库方式进行卡片刷新的相关参数。<ul id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_ul677813298490"><li id="zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_li021118173492">formdbsetting &gt; formdbinfo：存放包含卡片信息的Info.ets文件，可在Info.ets文件中，添加卡片刷新所需要的具体的数据，后续会读取该文件并将数据存入数据库中。</li><li id="zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_li331015380505">UserSettings.ets：可以自定义卡片刷新时从数据库获取数据的规则、数据解析规则、message内容刷新规则。</li></ul> </li><li id="zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_li176323408454">formsetting &gt; formhttpsetting：自定义配置以网络请求方式进行卡片刷新的相关参数。<ul id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_ul280417165317"><li id="zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_li44616016536">formhttpsetting &gt; formhttpinfo：存放包含卡片信息的Info.ets文件，可在Info.ets文件中添加获取卡片刷新数据的URL。</li><li id="zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_li143075125316">UserSettings.ets：可以自定义卡片刷新时从URL获取数据的规则、数据解析规则、message内容刷新规则。</li></ul> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p1543761055">如需使用网络请求方式刷新卡片页面，需在EntryFormAbility.ets文件中将FormDbUpdate的接口注释掉，并将启用FormHttpUpdate接口。</p> </div></div></div> </li><li id="zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_li71501310800">formsetting &gt; FormAction.ets：配置卡片事件。</li></ul> </li><li id="zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_li52641634155717">utils：存放工具类的目录，用户不可修改，如果修改再次生成逻辑代码时utils目录会被刷新。</li></ul> </div> <div class="tiledSection"><h3 id="section1559897262">自定义配置卡片事件<i class="anchor-icon anchor-icon-link" anchorid="section1559897262" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p3136134115314"><span><img originheight="262" originwidth="316" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104755.34389848340362277017407480093787:50001231000000:2800:852B4E20A90215025F39A0A3523CC02CFE9705B3BD92B8DC6107E20D23E752F4.png" width="316" height="262"></span></p> <p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p16806132463112">1. 在FormAction.ets文件中，配置触发卡片router事件时具体的页面分发规则。</p> </div> <p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p1910451861">2. 在EntryAbility.ets文件的onWindowStageCreate方法中，会插入页面分发接口的调用，示例如下：</p> <p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p5299839145814"><span><img originheight="185" originwidth="681" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104755.07220906273031994276490792332760:50001231000000:2800:8BB3F38A2705CAFF245C2AA76D706CE92A4AEE3B3A796C7B69AEB560C98FBF90.png" width="681" height="185"></span></p> <p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p13307191402116"></p> <p id="ZH-CN_TOPIC_0000002510294311__zh-cn_topic_0000002202129389_zh-cn_topic_0000002122296749_zh-cn_topic_0000002035518129_p18863124182118">此接口默认插入到方法开头，可根据当前工程onWindowStageCreate逻辑来将此接口移动至合适的位置，保证页面能正常跳转。</p> </div> <div></div></div>