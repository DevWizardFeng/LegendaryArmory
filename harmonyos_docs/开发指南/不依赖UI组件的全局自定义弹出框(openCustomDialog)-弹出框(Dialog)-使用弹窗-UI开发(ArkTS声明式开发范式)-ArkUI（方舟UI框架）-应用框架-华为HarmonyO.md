<h1 _ngcontent-ocp-c119="" class="doc-title ng-star-inserted" title="不依赖UI组件的全局自定义弹出框 (openCustomDialog)"> 不依赖UI组件的全局自定义弹出框 (openCustomDialog) </h1>

<div _ngcontent-ocp-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>在广告、中奖、警告、软件更新等与用户交互响应操作的场景下，可以使用UIContext中获取到的PromptAction对象提供的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction#opencustomdialog12" target="_blank">openCustomDialog</a>接口来实现自定义弹出框。相较于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-methods-custom-dialog-box#customdialogcontroller" target="_blank">CustomDialogController</a>优势点在于页面解耦，支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-componentcontent#update" target="_blank">动态刷新</a>。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>弹出框（openCustomDialog）存在两种入参方式创建自定义弹出框：</p>      <ul>       <li>openCustomDialog（传参为ComponentContent形式）：通过ComponentContent封装内容可以与UI界面解耦，调用更加灵活，可以满足开发者的封装诉求。具有较高的灵活性，弹出框样式完全自定义，并且在弹出框打开后可以使用updateCustomDialog方法动态更新弹出框的参数。</li>       <li>openCustomDialog（传参为builder形式）：相对于ComponentContent，builder必须要与上下文做绑定，与UI存在一定耦合。此方法有用默认的弹出框样式，适合于开发者想要实现与系统弹窗默认风格一致的效果。</li>      </ul>      <p>本文介绍通过入参形式为ComponentContent创建自定义弹出框，传builder形式的弹出框使用方法可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction#opencustomdialog12-1" target="_blank">openCustomDialog</a>。</p>     </div></div></div>    <p>弹出框（openCustomDialog）默认为模态弹窗且有蒙层，不可与蒙层下方控件进行交互（不支持点击和手势等向下透传）。可以通过配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction#basedialogoptions11" target="_blank">promptAction.BaseDialogOptions</a>类型中的isModal属性来实现模态和非模态弹窗，详细说明可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-dialog-overview#弹窗的种类">弹窗的种类</a>。</p>    <p>当isModal为true时，弹出框为模态弹窗，且弹窗周围的蒙层区不支持透传。isModal为false时，弹出框为非模态弹窗，且弹窗周围的蒙层区可以透传。因此如果需要同时允许弹出框的交互和弹出框外页面的交互行为，需要将弹出框设置为非模态。</p>    <div class="tiledSection">     <h2 id="生命周期">生命周期<i class="anchor-icon anchor-icon-link" anchorid="生命周期" tips="复制节点链接"></i></h2>          <p>弹出框提供了生命周期函数用于通知用户该弹出框的生命周期。生命周期的触发时序依次为：onWillAppear -&gt; onDidAppear -&gt; onWillDisappear -&gt; onDidDisappear。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.4.1.1" valign="top" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.4.1.2" valign="top" width="33.33333333333333%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.4.1.3" valign="top" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">onDidAppear</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">() =&gt; void</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">弹出框弹出后的事件回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">onDidDisappear</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">() =&gt; void</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">弹出框消失后的事件回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">onWillAppear</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">() =&gt; void</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">弹出框显示动效前的事件回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">onWillDisappear</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">() =&gt; void</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">弹出框退出动效前的事件回调。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="自定义弹出框的打开与关闭">自定义弹出框的打开与关闭<i class="anchor-icon anchor-icon-link" anchorid="自定义弹出框的打开与关闭" tips="复制节点链接"></i></h2>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>详细变量定义请参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-uicontext-custom-dialog#完整示例">完整示例</a>。</p>      </div></div></div>     <ol>      <li>       <p>创建ComponentContent。</p>       <p>ComponentContent用于定义自定义弹出框的内容。其中，wrapBuilder(buildText)封装自定义组件，new Params(this.message)是自定义组件的入参，可以缺省，也可以传入基础数据类型。</p>       <div _ngcontent-ocp-c106="" class="highlight-div"><div _ngcontent-ocp-c106="" class="highlight-div-header"><div _ngcontent-ocp-c106="" class="highlight-div-header-left"><div _ngcontent-ocp-c106="" class="handle-button expand-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ocp-c106="" class="highlight-div-header-right"><div _ngcontent-ocp-c106="" class="handle-button ai-button"></div><div _ngcontent-ocp-c106="" class="handle-button line-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ocp-c106="" class="handle-button theme-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ocp-c106="" class="handle-button copy-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ocp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">private</span> <span class="hljs-attr">contentNode</span>: <span class="hljs-title class_">ComponentContent</span>&lt;<span class="hljs-title class_">Object</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentContent</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">ctx</span>, <span class="hljs-title function_">wrapBuilder</span>(buildText), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>));</li></ol></pre></div></div></li>      <li>       <p>打开自定义弹出框。</p>       <p>调用openCustomDialog接口打开的弹出框默认customStyle为true，即弹出框的内容样式完全按照contentNode自定义样式显示。</p>       <div _ngcontent-ocp-c106="" class="highlight-div"><div _ngcontent-ocp-c106="" class="highlight-div-header"><div _ngcontent-ocp-c106="" class="highlight-div-header-left"><div _ngcontent-ocp-c106="" class="handle-button expand-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ocp-c106="" class="highlight-div-header-right"><div _ngcontent-ocp-c106="" class="handle-button ai-button"></div><div _ngcontent-ocp-c106="" class="handle-button line-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ocp-c106="" class="handle-button theme-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ocp-c106="" class="handle-button copy-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ocp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">ctx</span>.<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">openCustomDialog</span>(<span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">contentNode</span>, <span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'OpenCustomDialog complete.'</span>);</li><li>  })</li><li>  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>    <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`OpenCustomDialog args error code is <span class="hljs-subst">${code}</span>, message is <span class="hljs-subst">${message}</span>`</span>);</li><li>  })</li></ol></pre></div></div></li>      <li>       <p>关闭自定义弹出框。</p>       <p>由于closeCustomDialog接口需要传入待关闭弹出框对应的ComponentContent。因此，如果需要在弹出框中设置关闭方法，则可参考完整示例封装静态方法来实现。</p>       <p>关闭弹出框之后若需要释放对应的ComponentContent，则需要调用ComponentContent的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-componentcontent#dispose" target="_blank">dispose</a>方法。</p>       <div _ngcontent-ocp-c106="" class="highlight-div"><div _ngcontent-ocp-c106="" class="highlight-div-header"><div _ngcontent-ocp-c106="" class="highlight-div-header-left"><div _ngcontent-ocp-c106="" class="handle-button expand-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ocp-c106="" class="highlight-div-header-right"><div _ngcontent-ocp-c106="" class="handle-button ai-button"></div><div _ngcontent-ocp-c106="" class="handle-button line-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ocp-c106="" class="handle-button theme-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ocp-c106="" class="handle-button copy-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ocp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">ctx</span>.<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">closeCustomDialog</span>(<span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">contentNode</span>)</li><li>  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'CloseCustomDialog complete.'</span>);</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">contentNode</span> !== <span class="hljs-literal">null</span>) {</li><li>         <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentNode</span>.<span class="hljs-title function_">dispose</span>();   <span class="hljs-comment">// 释放contentNode</span></li><li>     }</li><li>  })</li><li>  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>    <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`CloseCustomDialog args error code is <span class="hljs-subst">${code}</span>, message is <span class="hljs-subst">${message}</span>`</span>);</li><li>  })</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="更新自定义弹出框的内容">更新自定义弹出框的内容<i class="anchor-icon anchor-icon-link" anchorid="更新自定义弹出框的内容" tips="复制节点链接"></i></h2>          <p>ComponentContent与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-buildernode" target="_blank">BuilderNode</a>有相同的使用限制，不支持自定义组件使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-reusable">@Reusable</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-link">@Link</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-provide-and-consume">@Provide</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-provide-and-consume">@Consume</a>等装饰器，来同步弹出框弹出的页面与ComponentContent中自定义组件的状态。因此，若需要更新弹出框中自定义组件的内容可以通过ComponentContent提供的update方法来实现。</p>     <div _ngcontent-ocp-c106="" class="highlight-div"><div _ngcontent-ocp-c106="" class="highlight-div-header"><div _ngcontent-ocp-c106="" class="highlight-div-header-left"><div _ngcontent-ocp-c106="" class="handle-button expand-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ocp-c106="" class="highlight-div-header-right"><div _ngcontent-ocp-c106="" class="handle-button ai-button"></div><div _ngcontent-ocp-c106="" class="handle-button line-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ocp-c106="" class="handle-button theme-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ocp-c106="" class="handle-button copy-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ocp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable language_">this</span>.<span class="hljs-property">contentNode</span>.<span class="hljs-title function_">update</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-string">'update'</span>))</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="更新自定义弹出框的属性">更新自定义弹出框的属性<i class="anchor-icon anchor-icon-link" anchorid="更新自定义弹出框的属性" tips="复制节点链接"></i></h2>          <p>通过updateCustomDialog可以动态更新弹出框的属性。目前支持更新弹出框的对齐方式、基于对齐方式的偏移量、是否点击蒙层自动关闭以及蒙层颜色，对应的属性分别为alignment、offset、autoCancel、maskColor。</p>     <p>更新属性时，未设置的属性会恢复为默认值。例如，初始设置{ alignment: DialogAlignment.Top, offset: { dx: 0, dy: 50 } }，更新时设置{ alignment: DialogAlignment.Bottom }，则初始设置的offset: { dx: 0, dy: 50 }不会保留，会恢复为默认值。</p>     <div _ngcontent-ocp-c106="" class="highlight-div"><div _ngcontent-ocp-c106="" class="highlight-div-header"><div _ngcontent-ocp-c106="" class="highlight-div-header-left"><div _ngcontent-ocp-c106="" class="handle-button expand-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ocp-c106="" class="highlight-div-header-right"><div _ngcontent-ocp-c106="" class="handle-button ai-button"></div><div _ngcontent-ocp-c106="" class="handle-button line-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ocp-c106="" class="handle-button theme-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ocp-c106="" class="handle-button copy-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ocp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">ctx</span>.<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">updateCustomDialog</span>(<span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">contentNode</span>, options)</li><li>  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'UpdateCustomDialog complete.'</span>);</li><li>  })</li><li>  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>    <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`UpdateCustomDialog args error code is <span class="hljs-subst">${code}</span>, message is <span class="hljs-subst">${message}</span>`</span>);</li><li>  })</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="为弹出框内容和蒙层设置不同的动画效果">为弹出框内容和蒙层设置不同的动画效果<i class="anchor-icon anchor-icon-link" anchorid="为弹出框内容和蒙层设置不同的动画效果" tips="复制节点链接"></i></h2>          <p>当弹出框出现时，内容与蒙层显示动效一致。若开发者希望为弹出框内容及蒙层设定不同动画效果，从API version 19开始，可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction#basedialogoptions11" target="_blank">BaseDialogOptions</a>中dialogTransition和maskTransition属性单独配置弹窗内容与蒙层的动画。具体的动画效果请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-transition-animation-component" target="_blank">组件内转场 (transition)</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当isModal为true时，蒙层将显示，此时可以设置蒙层的动画效果；否则，maskTransition将不生效。</p>      </div></div></div>     <div _ngcontent-ocp-c106="" class="highlight-div"><div _ngcontent-ocp-c106="" class="highlight-div-header"><div _ngcontent-ocp-c106="" class="highlight-div-header-left"><div _ngcontent-ocp-c106="" class="handle-button expand-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ocp-c106="" class="highlight-div-header-right"><div _ngcontent-ocp-c106="" class="handle-button ai-button"></div><div _ngcontent-ocp-c106="" class="handle-button line-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ocp-c106="" class="handle-button theme-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ocp-c106="" class="handle-button copy-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ocp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">customDialogComponentId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">customDialogComponent</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">50</span> }) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"这是一个弹窗"</span>)</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span> }) {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'打开弹窗'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()</li><li>              .<span class="hljs-title function_">getPromptAction</span>()</li><li>              .<span class="hljs-title function_">openCustomDialog</span>({</li><li>                <span class="hljs-attr">builder</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customDialogComponent</span>()</li><li>                },</li><li>                <span class="hljs-attr">isModal</span>: <span class="hljs-literal">true</span>,</li><li>                <span class="hljs-attr">showInSubWindow</span>: <span class="hljs-literal">false</span>,</li><li>                <span class="hljs-attr">maskColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>,</li><li>                <span class="hljs-attr">maskRect</span>: {</li><li>                  <span class="hljs-attr">x</span>: <span class="hljs-number">20</span>,</li><li>                  <span class="hljs-attr">y</span>: <span class="hljs-number">20</span>,</li><li>                  <span class="hljs-attr">width</span>: <span class="hljs-string">'90%'</span>,</li><li>                  <span class="hljs-attr">height</span>: <span class="hljs-string">'90%'</span></li><li>                },</li><li>
</li><li>                <span class="hljs-attr">dialogTransition</span>: <span class="hljs-comment">// 设置弹窗内容显示的过渡效果</span></li><li>                <span class="hljs-title class_">TransitionEffect</span>.<span class="hljs-title function_">translate</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">290</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span> })</li><li>                  .<span class="hljs-title function_">animation</span>({ <span class="hljs-attr">duration</span>: <span class="hljs-number">4000</span>, <span class="hljs-attr">curve</span>: <span class="hljs-title class_">Curve</span>.<span class="hljs-property">Smooth</span> }), <span class="hljs-comment">// 四秒钟的偏移渐变动画</span></li><li>
</li><li>                <span class="hljs-attr">maskTransition</span>: <span class="hljs-comment">// 设置蒙层显示的过渡效果</span></li><li>                <span class="hljs-title class_">TransitionEffect</span>.<span class="hljs-title function_">opacity</span>(<span class="hljs-number">0</span>)</li><li>                  .<span class="hljs-title function_">animation</span>({ <span class="hljs-attr">duration</span>: <span class="hljs-number">4000</span>, <span class="hljs-attr">curve</span>: <span class="hljs-title class_">Curve</span>.<span class="hljs-property">Smooth</span> }) <span class="hljs-comment">// 四秒钟的透明渐变动画</span></li><li>
</li><li>              })</li><li>              .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">dialogId: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">customDialogComponentId</span> = dialogId;</li><li>              })</li><li>              .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`openCustomDialog error code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>              })</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="740" originwidth="349" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114911.79184924622263443306317747280712:50001231000000:2800:9595CD0B5E0FE9807280D3EFF414F36E606AAE551BB0B89A0E5D4554FE4ECE2D.gif" width="349" height="740"></span></p>    </div>    <div class="tiledSection">     <h2 id="设置弹出框避让软键盘的距离">设置弹出框避让软键盘的距离<i class="anchor-icon anchor-icon-link" anchorid="设置弹出框避让软键盘的距离" tips="复制节点链接"></i></h2>          <p>为显示弹出框的独立性，弹出框弹出时会与周边进行避让，包括状态栏、导航条以及键盘等留有间距。故当软键盘弹出时，默认情况下，弹出框会自动避开软键盘，并与之保持16vp的距离。从API version 15开始，开发者可以利用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction#basedialogoptions11" target="_blank">BaseDialogOptions</a>中的keyboardAvoidMode和keyboardAvoidDistance这两个配置项，来设置弹出框在软键盘弹出时的行为，包括是否需要避开软键盘以及与软键盘之间的距离。</p>     <p>设置软键盘间距时，需要将keyboardAvoidMode值设为KeyboardAvoidMode.DEFAULT。</p>     <div _ngcontent-ocp-c106="" class="highlight-div"><div _ngcontent-ocp-c106="" class="highlight-div-header"><div _ngcontent-ocp-c106="" class="highlight-div-header-left"><div _ngcontent-ocp-c106="" class="handle-button expand-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ocp-c106="" class="highlight-div-header-right"><div _ngcontent-ocp-c106="" class="handle-button ai-button"></div><div _ngcontent-ocp-c106="" class="handle-button line-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ocp-c106="" class="handle-button theme-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ocp-c106="" class="handle-button copy-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ocp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LengthMetrics</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">customDialogComponent</span>(<span class="hljs-params"></span>) {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'keyboardAvoidDistance: 0vp'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">36</span> })</li><li>        <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">''</span> })</li><li>      }.<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFF0F0F0'</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span> }) {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'打开弹窗'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">openCustomDialog</span>({</li><li>              <span class="hljs-attr">builder</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customDialogComponent</span>()</li><li>              },</li><li>              <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-property">Bottom</span>,</li><li>              <span class="hljs-attr">keyboardAvoidMode</span>: <span class="hljs-title class_">KeyboardAvoidMode</span>.<span class="hljs-property">DEFAULT</span>, <span class="hljs-comment">// 软键盘弹出时，弹出框自动避让</span></li><li>              <span class="hljs-attr">keyboardAvoidDistance</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">0</span>) <span class="hljs-comment">// 软键盘弹出时与弹出框的距离为0vp</span></li><li>            }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`openCustomDialog error code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>)</li><li>              })</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="662" originwidth="400" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114912.21727934460523025002785423920236:50001231000000:2800:76A9FF2C617E6EB9CBAA581213943633FCA2BE06A111379390F82FB18B341F84.gif" width="400" height="662"></span></p>    </div>    <div class="tiledSection">     <h2 id="完整示例">完整示例<i class="anchor-icon anchor-icon-link" anchorid="完整示例" tips="复制节点链接"></i></h2>          <div _ngcontent-ocp-c106="" class="highlight-div"><div _ngcontent-ocp-c106="" class="highlight-div-header"><div _ngcontent-ocp-c106="" class="highlight-div-header-left"><div _ngcontent-ocp-c106="" class="handle-button expand-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ocp-c106="" class="highlight-div-header-right"><div _ngcontent-ocp-c106="" class="handle-button ai-button"></div><div _ngcontent-ocp-c106="" class="handle-button line-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ocp-c106="" class="handle-button theme-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ocp-c106="" class="handle-button copy-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ocp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// PromptActionClass.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentContent</span>, promptAction, <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PromptActionClass</span> {</li><li>  <span class="hljs-keyword">static</span> <span class="hljs-attr">ctx</span>: <span class="hljs-title class_">UIContext</span>;</li><li>  <span class="hljs-keyword">static</span> <span class="hljs-attr">contentNode</span>: <span class="hljs-title class_">ComponentContent</span>&lt;<span class="hljs-title class_">Object</span>&gt;;</li><li>  <span class="hljs-keyword">static</span> <span class="hljs-attr">options</span>: promptAction.<span class="hljs-property">BaseDialogOptions</span>;</li><li>
</li><li>  <span class="hljs-keyword">static</span> <span class="hljs-title function_">setContext</span>(<span class="hljs-params">context: UIContext</span>) {</li><li>    <span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">ctx</span> = context;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">static</span> <span class="hljs-title function_">setContentNode</span>(<span class="hljs-params">node: ComponentContent&lt;<span class="hljs-built_in">Object</span>&gt;</span>) {</li><li>    <span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">contentNode</span> = node;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">static</span> <span class="hljs-title function_">setOptions</span>(<span class="hljs-params">options: promptAction.BaseDialogOptions</span>) {</li><li>    <span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">options</span> = options;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">static</span> <span class="hljs-title function_">openDialog</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">contentNode</span> !== <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">ctx</span>.<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">openCustomDialog</span>(<span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">contentNode</span>, <span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">options</span>)</li><li>        .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'OpenCustomDialog complete.'</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>          <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`OpenCustomDialog args error code is <span class="hljs-subst">${code}</span>, message is <span class="hljs-subst">${message}</span>`</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">static</span> <span class="hljs-title function_">closeDialog</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">contentNode</span> !== <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">ctx</span>.<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">closeCustomDialog</span>(<span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">contentNode</span>)</li><li>        .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'CloseCustomDialog complete.'</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>          <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`CloseCustomDialog args error code is <span class="hljs-subst">${code}</span>, message is <span class="hljs-subst">${message}</span>`</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">static</span> <span class="hljs-title function_">updateDialog</span>(<span class="hljs-params">options: promptAction.BaseDialogOptions</span>) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">contentNode</span> !== <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">ctx</span>.<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">updateCustomDialog</span>(<span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-property">contentNode</span>, options)</li><li>        .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'UpdateCustomDialog complete.'</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>          <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`UpdateCustomDialog args error code is <span class="hljs-subst">${code}</span>, message is <span class="hljs-subst">${message}</span>`</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-ocp-c106="" class="highlight-div"><div _ngcontent-ocp-c106="" class="highlight-div-header"><div _ngcontent-ocp-c106="" class="highlight-div-header-left"><div _ngcontent-ocp-c106="" class="handle-button expand-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ocp-c106="" class="highlight-div-header-right"><div _ngcontent-ocp-c106="" class="handle-button ai-button"></div><div _ngcontent-ocp-c106="" class="handle-button line-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ocp-c106="" class="handle-button theme-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ocp-c106="" class="handle-button copy-button"><div _ngcontent-ocp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ocp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentContent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PromptActionClass</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./PromptActionClass'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Params</span> {</li><li>  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = text;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">buildText</span>(<span class="hljs-params">params: Params</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(params.<span class="hljs-property">text</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>      .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">36</span> })</li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Close'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-title function_">closeDialog</span>();</li><li>      })</li><li>  }.<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFF0F0F0'</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"hello"</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">ctx</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">contentNode</span>: <span class="hljs-title class_">ComponentContent</span>&lt;<span class="hljs-title class_">Object</span>&gt; =</li><li>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentContent</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">ctx</span>, <span class="hljs-title function_">wrapBuilder</span>(buildText), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>));</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-title function_">setContext</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">ctx</span>);</li><li>    <span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-title function_">setContentNode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contentNode</span>);</li><li>    <span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-title function_">setOptions</span>({ <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-property">Top</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">dx</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">dy</span>: <span class="hljs-number">50</span> } });</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"open dialog and update options"</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">50</span> })</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-title function_">openDialog</span>();</li><li>
</li><li>            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-title function_">updateDialog</span>({</li><li>                <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-property">Bottom</span>,</li><li>                <span class="hljs-attr">offset</span>: { <span class="hljs-attr">dx</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">dy</span>: -<span class="hljs-number">50</span> }</li><li>              });</li><li>            }, <span class="hljs-number">1500</span>)</li><li>          })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"open dialog and update content"</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">50</span> })</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-title class_">PromptActionClass</span>.<span class="hljs-title function_">openDialog</span>();</li><li>
</li><li>            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentNode</span>.<span class="hljs-title function_">update</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-string">'update'</span>));</li><li>            }, <span class="hljs-number">1500</span>)</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="730" originwidth="352" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114912.37029278734706371735951496879952:50001231000000:2800:5FABBB13D6F3414461BEFF1653EF61990922AB4487008FCE7AF733525533D182.gif" width="352" height="730"></span></p>    </div>   </div>   <div></div></div>