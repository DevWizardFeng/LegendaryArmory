<h1 _ngcontent-ojo-c119="" class="doc-title ng-star-inserted" title="事件订阅简介"> 事件订阅简介 </h1>

<div _ngcontent-ojo-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="事件介绍">事件介绍<i class="anchor-icon anchor-icon-link" anchorid="事件介绍" tips="复制节点链接"></i></h2>          <p>HiAppEvent能够订阅应用事件和系统事件。</p>    </div>    <div class="tiledSection">     <h3 id="应用事件" class="firsth2">应用事件<i class="anchor-icon anchor-icon-link" anchorid="应用事件" tips="复制节点链接"></i></h3>          <p>应用事件由开发者自行定义，例如点击按钮。应用事件的事件参数对象params包含的字段来源于应用，由开发者通过打点接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventwrite-1" target="_blank">write</a>自定义配置。具体字段含义根据开发者需求确定。</p>    </div>    <div class="tiledSection">     <h3 id="系统事件">系统事件<i class="anchor-icon anchor-icon-link" anchorid="系统事件" tips="复制节点链接"></i></h3>          <p>系统事件是指应用运行期间发生的性能、功耗、稳定性等问题。系统事件的事件参数对象params包含的字段来源于系统服务，已由系统服务定义。此外，系统事件中的崩溃事件和应用冻屏事件还支持开发者通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventseteventparam12" target="_blank">setEventParam</a>接口向事件参数对象params中添加自定义参数。</p>     <p>已支持的系统事件介绍、检测原理及事件参数对象params包含的字段说明，请查阅各系统事件介绍的详细文档。</p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-crash-events">崩溃事件介绍</a></p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-freeze-events">应用冻屏事件介绍</a></p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-resourceleak-events">资源泄漏事件介绍</a></p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-address-sanitizer-events">地址越界事件介绍</a></p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-mainthreadjank-events">主线程超时事件介绍</a></p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-apphicollie-events">任务执行超时事件介绍</a></p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-app-killed-events">应用终止事件介绍</a></p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-app-launch-event" target="_blank">启动耗时事件介绍</a></p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-scroll-jank-event" target="_blank">滑动丢帧事件介绍</a></p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-cpu-usage-high-event" target="_blank">CPU高负载事件介绍</a></p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-battery-usage-event" target="_blank">24h功耗器件分解统计事件介绍</a></p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-audio-jank-event" target="_blank">音频卡顿事件介绍</a></p>    </div>    <div class="tiledSection">     <h2 id="事件订阅的三种方式">事件订阅的三种方式<i class="anchor-icon anchor-icon-link" anchorid="事件订阅的三种方式" tips="复制节点链接"></i></h2>          <p>HiAppEvent通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventaddwatcher" target="_blank">addWatcher</a>接口提供系统事件的订阅功能，支持三种订阅方式。</p>     <p>方式一：设置回调条件triggerCondition，实现onTrigger()回调。当满足回调条件时，系统将自动触发回调。</p>     <p>方式二：未设置回调条件参数，使用事件订阅返回的holder对象主动获取监听的事件。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>主动获取监听的事件时，如果事件未生成或者日志信息未捕获完成，查询结果可能为空。此时，建议多次调用查询接口。</p>      </div></div></div>     <p>方式三：实现onReceive()回调，当监听的事件发生后实时触发回调。</p>     <p>ArkTS接口事件订阅参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventaddwatcher" target="_blank">hiAppEvent.addWatcher</a>；C/C++接口事件订阅只支持方式一和方式三，参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-app-events-ndk#步骤二订阅事件">事件订阅</a>。</p>    </div>   </div>   <div></div></div>