<h1 _ngcontent-vpu-c119="" class="doc-title ng-star-inserted" title="事件订阅（ArkTS）"> 事件订阅（ArkTS） </h1>

<div _ngcontent-vpu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>HiAppEvent提供了事件订阅接口，用于获取应用的事件。</p>    <div class="tiledSection">     <h2 id="接口说明">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h2>          <p>API接口使用说明，包括参数使用限制和具体取值范围。请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent" target="_blank">@ohos.hiviewdfx.hiAppEvent (应用事件打点)ArkTS API文档</a>。</p>     <p><strong>订阅接口功能介绍</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.3.1.1" valign="top" width="50%">接口名</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">addWatcher(watcher: Watcher): AppEventPackageHolder</td>         <td class="cellrowborder" valign="top" width="50%">添加应用的事件观察者。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">removeWatcher(watcher: Watcher): void</td>         <td class="cellrowborder" valign="top" width="50%">移除应用的事件观察者。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>addWatcher接口涉及I/O操作。在对性能敏感的业务场景中，开发者应根据实际需要确定该接口是在主线程还是在子线程中调用。</p>       <p>如果选择在子线程中调用addWatcher，需要确保该子线程在整个接口使用周期内不会被销毁，以免影响接口的正常工作。</p>       <p>可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/multi-thread-concurrency-overview">多线程并发概述</a>，以实现在子线程中调用接口。</p>      </div></div></div>     <p><strong>打点接口功能介绍</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.7.1.3.1.1" valign="top" width="50%">接口名</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.7.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">write(info: AppEventInfo, callback: AsyncCallback&lt;void&gt;): void</td>         <td class="cellrowborder" valign="top" width="50%">应用事件异步打点方法，使用callback方式作为异步回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">write(info: AppEventInfo): Promise&lt;void&gt;</td>         <td class="cellrowborder" valign="top" width="50%">应用事件异步打点方法，使用Promise方式作为异步回调。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>write接口涉及I/O操作，执行时间通常在毫秒级别。因此，开发者应根据实际业务需求，确定该接口是在主线程还是在子线程中调用。</p>       <p>可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/multi-thread-concurrency-overview">多线程并发概述</a>，以实现在子线程中调用接口。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="事件订阅开发指导">事件订阅开发指导<i class="anchor-icon anchor-icon-link" anchorid="事件订阅开发指导" tips="复制节点链接"></i></h2>          <p>以订阅崩溃事件（系统事件）和按钮点击事件（应用事件）为例，说明开发步骤。</p>     <ol>      <li>       <p>新建一个ArkTS应用工程，编辑工程中的“entry &gt; src &gt; main &gt; ets &gt; entryability &gt; EntryAbility.ets”文件，导入所需的依赖模块：</p>       <div _ngcontent-vpu-c106="" class="highlight-div"><div _ngcontent-vpu-c106="" class="highlight-div-header"><div _ngcontent-vpu-c106="" class="highlight-div-header-left"><div _ngcontent-vpu-c106="" class="handle-button expand-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vpu-c106="" class="highlight-div-header-right"><div _ngcontent-vpu-c106="" class="handle-button ai-button"></div><div _ngcontent-vpu-c106="" class="handle-button line-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vpu-c106="" class="handle-button theme-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vpu-c106="" class="handle-button copy-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vpu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hiAppEvent, hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li></ol></pre></div></div></li>      <li>       <p>编辑工程中的“entry &gt; src &gt; main &gt; ets &gt; entryability &gt; EntryAbility.ets” 文件，在onCreate函数中添加对崩溃事件、按钮点击事件的订阅。</p>       <p>订阅崩溃事件，采用OnReceive类型观察者的订阅方式，观察者接收到事件后会立即触发OnReceive()回调。编辑“EntryAbility.ets”文件，定义OnReceive类型观察者相关方法：</p>       <div _ngcontent-vpu-c106="" class="highlight-div"><div _ngcontent-vpu-c106="" class="highlight-div-header"><div _ngcontent-vpu-c106="" class="highlight-div-header-left"><div _ngcontent-vpu-c106="" class="handle-button expand-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vpu-c106="" class="highlight-div-header-right"><div _ngcontent-vpu-c106="" class="handle-button ai-button"></div><div _ngcontent-vpu-c106="" class="handle-button line-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vpu-c106="" class="handle-button theme-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vpu-c106="" class="handle-button copy-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vpu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li>hiAppEvent.<span class="hljs-title function_">addWatcher</span>({</li><li>  <span class="hljs-comment">// 开发者可以自定义观察者名称，系统会使用名称来标识不同的观察者</span></li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"AppCrashWatcher"</span>,</li><li>  <span class="hljs-comment">// 订阅过滤条件，这里是订阅了系统事件中的崩溃事件</span></li><li>  <span class="hljs-attr">appEventFilters</span>: [</li><li>    {</li><li>      <span class="hljs-attr">domain</span>: hiAppEvent.<span class="hljs-property">domain</span>.<span class="hljs-property">OS</span>,</li><li>      <span class="hljs-attr">names</span>: [hiAppEvent.<span class="hljs-property">event</span>.<span class="hljs-property">APP_CRASH</span>]</li><li>    }</li><li>  ],</li><li>  <span class="hljs-comment">// 实现onReceive回调，监听到事件后实时回调</span></li><li>  <span class="hljs-attr">onReceive</span>: <span class="hljs-function">(<span class="hljs-params">domain: <span class="hljs-built_in">string</span>, appEventGroups: <span class="hljs-built_in">Array</span>&lt;hiAppEvent.AppEventGroup&gt;</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`domain=<span class="hljs-subst">${domain}</span>`</span>);</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> eventGroup <span class="hljs-keyword">of</span> appEventGroups) {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`HiAppEvent eventName=<span class="hljs-subst">${eventGroup.name}</span>`</span>);</li><li>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> eventInfo <span class="hljs-keyword">of</span> eventGroup.<span class="hljs-property">appEventInfos</span>) {</li><li>        <span class="hljs-comment">// 开发者可以获取到崩溃事件发生的时间戳</span></li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`HiAppEvent eventInfo.params.time=<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(eventInfo.params[<span class="hljs-string">'time'</span>])}</span>`</span>);</li><li>        <span class="hljs-comment">// 开发者可以获取到崩溃应用的包名</span></li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`HiAppEvent eventInfo.params.bundle_name=<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(eventInfo.params[<span class="hljs-string">'bundle_name'</span>])}</span>`</span>);</li><li>        <span class="hljs-comment">// 开发者可以获取到崩溃事件发生时的故障日志文件</span></li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`HiAppEvent eventInfo.params.external_log=<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(eventInfo.params[<span class="hljs-string">'external_log'</span>])}</span>`</span>);</li><li>      }</li><li>    }</li><li>  }</li><li>});</li></ol></pre></div></div>       <p>订阅按钮点击事件，采用OnTrigger类型观察者的订阅方式。需满足triggerCondition设置的条件，才能触发OnTrigger()回调。编辑“EntryAbility.ets”文件，定义OnTrigger类型观察者相关方法：</p>       <div _ngcontent-vpu-c106="" class="highlight-div"><div _ngcontent-vpu-c106="" class="highlight-div-header"><div _ngcontent-vpu-c106="" class="highlight-div-header-left"><div _ngcontent-vpu-c106="" class="handle-button expand-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vpu-c106="" class="highlight-div-header-right"><div _ngcontent-vpu-c106="" class="handle-button ai-button"></div><div _ngcontent-vpu-c106="" class="handle-button line-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vpu-c106="" class="handle-button theme-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vpu-c106="" class="handle-button copy-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vpu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li>hiAppEvent.<span class="hljs-title function_">addWatcher</span>({</li><li>  <span class="hljs-comment">// 开发者可以自定义观察者名称，系统会使用名称来标识不同的观察者</span></li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"ButtonClickWatcher"</span>,</li><li>  <span class="hljs-comment">// 开发者可以订阅感兴趣的应用事件，此处是订阅了按钮事件</span></li><li>  <span class="hljs-attr">appEventFilters</span>: [{ <span class="hljs-attr">domain</span>: <span class="hljs-string">"button"</span> }],</li><li>  <span class="hljs-comment">// 开发者可以设置订阅回调触发的条件，此处是设置为事件打点数量满足1个</span></li><li>  <span class="hljs-attr">triggerCondition</span>: { <span class="hljs-attr">row</span>: <span class="hljs-number">1</span> },</li><li>  <span class="hljs-comment">// 开发者可以自行实现订阅回调函数，以便对订阅获取到的事件打点数据进行自定义处理</span></li><li>  <span class="hljs-attr">onTrigger</span>: <span class="hljs-function">(<span class="hljs-params">curRow: <span class="hljs-built_in">number</span>, curSize: <span class="hljs-built_in">number</span>, holder: hiAppEvent.AppEventPackageHolder</span>) =&gt;</span> {</li><li>    <span class="hljs-comment">// 如果返回的holder对象为null，表示订阅过程发生异常。因此，在记录错误日志后直接返回</span></li><li>    <span class="hljs-keyword">if</span> (holder == <span class="hljs-literal">null</span>) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">"HiAppEvent holder is null"</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`HiAppEvent onTrigger: curRow=%{public}d, curSize=%{public}d`</span>, curRow, curSize);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">eventPkg</span>: hiAppEvent.<span class="hljs-property">AppEventPackage</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>    <span class="hljs-comment">// 根据设置阈值大小（默认为1条事件）去获取订阅事件包，直到将订阅数据全部取出</span></li><li>    <span class="hljs-comment">// 返回的事件包对象为null，表示当前订阅数据已被全部取出，此次订阅回调触发结束</span></li><li>    <span class="hljs-keyword">while</span> ((eventPkg = holder.<span class="hljs-title function_">takeNext</span>()) != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-comment">// 开发者可以对事件包中的事件打点数据进行自定义处理，此处是将事件打点数据打印在日志中</span></li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`HiAppEvent eventPkg.packageId=%{public}d`</span>, eventPkg.<span class="hljs-property">packageId</span>);</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`HiAppEvent eventPkg.row=%{public}d`</span>, eventPkg.<span class="hljs-property">row</span>);</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`HiAppEvent eventPkg.size=%{public}d`</span>, eventPkg.<span class="hljs-property">size</span>);</li><li>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> eventInfo <span class="hljs-keyword">of</span> eventPkg.<span class="hljs-property">data</span>) {</li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`HiAppEvent eventPkg.info=%{public}s`</span>, eventInfo);</li><li>      }</li><li>    }</li><li>  }</li><li>});</li></ol></pre></div></div></li>      <li>       <p>编辑工程中的“entry &gt; src &gt; main &gt; ets &gt; pages &gt; Index.ets” 文件，导入依赖模块：</p>       <div _ngcontent-vpu-c106="" class="highlight-div"><div _ngcontent-vpu-c106="" class="highlight-div-header"><div _ngcontent-vpu-c106="" class="highlight-div-header-left"><div _ngcontent-vpu-c106="" class="handle-button expand-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vpu-c106="" class="highlight-div-header-right"><div _ngcontent-vpu-c106="" class="handle-button ai-button"></div><div _ngcontent-vpu-c106="" class="handle-button line-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vpu-c106="" class="handle-button theme-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vpu-c106="" class="handle-button copy-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vpu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hiAppEvent, hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li></ol></pre></div></div></li>      <li>       <p>编辑工程中的“entry &gt; src &gt; main &gt; ets &gt; pages &gt; Index.ets” 文件，新增“appCrash”按钮触发崩溃事件；新增“buttonClick”按钮，在按钮点击的函数中进行事件打点。示例代码如下：</p>       <p>触发崩溃事件。</p>       <div _ngcontent-vpu-c106="" class="highlight-div"><div _ngcontent-vpu-c106="" class="highlight-div-header"><div _ngcontent-vpu-c106="" class="highlight-div-header-left"><div _ngcontent-vpu-c106="" class="handle-button expand-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vpu-c106="" class="highlight-div-header-right"><div _ngcontent-vpu-c106="" class="handle-button ai-button"></div><div _ngcontent-vpu-c106="" class="handle-button line-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vpu-c106="" class="handle-button theme-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vpu-c106="" class="handle-button copy-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vpu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li>  <span class="hljs-title class_">Button</span>(<span class="hljs-string">"appCrash"</span>)</li><li>    .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">()=&gt;</span>{</li><li>      <span class="hljs-comment">// 在按钮点击函数中构造一个crash场景，触发崩溃事件</span></li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-built_in">object</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">""</span>);</li><li>    })</li><li>    .<span class="hljs-title function_">position</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span> }) <span class="hljs-comment">// 设置按钮位置</span></li></ol></pre></div></div>       <p>在按钮点击的函数中进行事件打点。</p>       <div _ngcontent-vpu-c106="" class="highlight-div"><div _ngcontent-vpu-c106="" class="highlight-div-header"><div _ngcontent-vpu-c106="" class="highlight-div-header-left"><div _ngcontent-vpu-c106="" class="handle-button expand-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vpu-c106="" class="highlight-div-header-right"><div _ngcontent-vpu-c106="" class="handle-button ai-button"></div><div _ngcontent-vpu-c106="" class="handle-button line-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vpu-c106="" class="handle-button theme-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vpu-c106="" class="handle-button copy-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vpu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li>  <span class="hljs-title class_">Button</span>(<span class="hljs-string">"buttonClick"</span>)</li><li>    .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">()=&gt;</span>{</li><li>      <span class="hljs-comment">// 在按钮点击函数中进行事件打点，以记录按钮点击事件</span></li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">eventParams</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = { <span class="hljs-string">"click_time"</span>: <span class="hljs-number">100</span> };</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">eventInfo</span>: hiAppEvent.<span class="hljs-property">AppEventInfo</span> = {</li><li>        <span class="hljs-comment">// 事件领域定义</span></li><li>        <span class="hljs-attr">domain</span>: <span class="hljs-string">"button"</span>,</li><li>        <span class="hljs-comment">// 事件名称定义</span></li><li>        <span class="hljs-attr">name</span>: <span class="hljs-string">"click"</span>,</li><li>        <span class="hljs-comment">// 事件类型定义</span></li><li>        <span class="hljs-attr">eventType</span>: hiAppEvent.<span class="hljs-property">EventType</span>.<span class="hljs-property">BEHAVIOR</span>,</li><li>        <span class="hljs-comment">// 事件参数定义</span></li><li>        <span class="hljs-attr">params</span>: eventParams</li><li>      };</li><li>      hiAppEvent.<span class="hljs-title function_">write</span>(eventInfo).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`HiAppEvent success to write event`</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`HiAppEvent err.code: <span class="hljs-subst">${err.code}</span>, err.message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`HiAppEvent write event`</span>);</li><li>    })</li><li>    .<span class="hljs-title function_">position</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">200</span> }) <span class="hljs-comment">// 设置按钮的位置</span></li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="调测验证">调测验证<i class="anchor-icon anchor-icon-link" anchorid="调测验证" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>点击DevEco Studio界面中的运行按钮，运行应用工程。在应用界面中点击“appCrash”按钮，触发崩溃事件。应用退出后，重新打开应用。</p></li>      <li>       <p>在HiLog窗口搜索“HiAppEvent”关键字，查看应用处理崩溃事件数据的日志：</p>       <div _ngcontent-vpu-c106="" class="highlight-div"><div _ngcontent-vpu-c106="" class="highlight-div-header"><div _ngcontent-vpu-c106="" class="highlight-div-header-left"><div _ngcontent-vpu-c106="" class="handle-button expand-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vpu-c106="" class="highlight-div-header-right"><div _ngcontent-vpu-c106="" class="handle-button ai-button"></div><div _ngcontent-vpu-c106="" class="handle-button line-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vpu-c106="" class="handle-button theme-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vpu-c106="" class="handle-button copy-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vpu-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>HiAppEvent eventName=APP_CRASH</li><li>HiAppEvent eventInfo.params.time=1750747995874</li><li>HiAppEvent eventInfo.params.bundle_name="com.example.txxxxx"</li><li>HiAppEvent eventInfo.params.external_log=</li><li>["/data/storage/el2/log/hiappevent/APP_CRASH_1750747996042_28962.log"]</li></ol></pre></div></div></li>      <li>       <p>点击DevEco Studio界面中的运行按钮，运行应用工程。在应用界面中点击“buttonClick”按钮，触发按钮点击事件并打点。</p></li>      <li>       <p>在HiLog窗口搜索“HiAppEvent”关键字，查看应用处理按钮点击事件数据的日志：</p>       <div _ngcontent-vpu-c106="" class="highlight-div"><div _ngcontent-vpu-c106="" class="highlight-div-header"><div _ngcontent-vpu-c106="" class="highlight-div-header-left"><div _ngcontent-vpu-c106="" class="handle-button expand-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vpu-c106="" class="highlight-div-header-right"><div _ngcontent-vpu-c106="" class="handle-button ai-button"></div><div _ngcontent-vpu-c106="" class="handle-button line-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vpu-c106="" class="handle-button theme-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vpu-c106="" class="handle-button copy-button"><div _ngcontent-vpu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vpu-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>HiAppEvent write event</li><li>HiAppEvent onTrigger: curRow=1, curSize=121</li><li>HiAppEvent eventPkg.packageId=0</li><li>HiAppEvent eventPkg.row=1</li><li>HiAppEvent eventPkg.size=121</li><li>HiAppEvent eventPkg.info={"domain_":"button","name_":"click","type_":4,"time_":1750754529033,"tz_":"","pid_":40664,"tid_":40664,"click_time":100}</li><li>HiAppEvent success to write event</li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>