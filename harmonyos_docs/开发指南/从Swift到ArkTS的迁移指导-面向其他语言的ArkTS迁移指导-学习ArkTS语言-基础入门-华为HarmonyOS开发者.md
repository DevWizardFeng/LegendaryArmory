<h1 _ngcontent-ief-c119="" class="doc-title ng-star-inserted" title="从Swift到ArkTS的迁移指导"> 从Swift到ArkTS的迁移指导 </h1>

<div _ngcontent-ief-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>对于熟悉Swift的开发者而言，ArkTS作为新的开发语言，带来了全新的开发体验与机遇。ArkTS在语法和编程范式上不仅继承了现代语言的特性，还针对生态进行了深度优化。理解Swift与ArkTS的差异和共性，能够帮助开发者快速上手应用开发，避开常见的编程误区。</p> <p>本文档基于Swift语言对ArkTS语言进行对比和介绍。如需更详细的了解，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/introduction-to-arkts">ArkTS语言介绍</a>。</p>  <div class="tiledSection"><h2 id="探索swift与arkts的差异">探索Swift与ArkTS的差异<i class="anchor-icon anchor-icon-link" anchorid="探索swift与arkts的差异" tips="复制节点链接"></i></h2><p>本文档将帮助Swift开发者梳理在转向ArkTS开发过程中会遇到的误解和陷阱。ArkTS的语法、类型系统以及应用开发模式与Swift存在差异，在学习过程中需特别注意这些关键区别。建议先掌握ArkTS的基础语法和运行时行为，再重点对比其与Swift的不同之处。</p> </div>  <div class="tiledSection"><h2 id="基础语法">基础语法<i class="anchor-icon anchor-icon-link" anchorid="基础语法" tips="复制节点链接"></i></h2></div>  <div class="tiledSection"><h3 id="变量声明" class="firsth2">变量声明<i class="anchor-icon anchor-icon-link" anchorid="变量声明" tips="复制节点链接"></i></h3><p><strong>ArkTS示例：</strong></p> <div _ngcontent-ief-c106="" class="highlight-div"><div _ngcontent-ief-c106="" class="highlight-div-header"><div _ngcontent-ief-c106="" class="highlight-div-header-left"><div _ngcontent-ief-c106="" class="handle-button expand-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ief-c106="" class="highlight-div-header-right"><div _ngcontent-ief-c106="" class="handle-button ai-button"></div><div _ngcontent-ief-c106="" class="handle-button line-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ief-c106="" class="handle-button theme-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ief-c106="" class="handle-button copy-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ief-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 类型注解（类似Swift）。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">20</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">program</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'ArkTS'</span>;</li><li>
</li><li><span class="hljs-comment">// 类型推断（类似Swift的局部变量类型推断）。</span></li><li><span class="hljs-keyword">let</span> version = <span class="hljs-number">5.0</span>;</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="基础数据类型">基础数据类型<i class="anchor-icon anchor-icon-link" anchorid="基础数据类型" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.1" valign="top" width="25%">Swift类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.2" valign="top" width="25%">ArkTS类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.3" valign="top" width="25%">示例代码</th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.5.1.4" valign="top" width="25%">核心差异说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="25%">Bool</td> <td class="cellrowborder" valign="top" width="25%">boolean</td> <td class="cellrowborder" valign="top" width="25%">let isDone: boolean = false;</td> <td class="cellrowborder" valign="top" width="25%">定义方式相似，均用于逻辑判断。</td> </tr> <tr><td class="cellrowborder" valign="top" width="25%">Int8</td> <td class="cellrowborder" valign="top" width="25%">number</td> <td class="cellrowborder" valign="top" width="25%">let count: number = 10;</td> <td class="cellrowborder" valign="top" width="25%"><p>Swift的Int8为8位整数。</p> <p>ArkTS统一用number表示小整数类型。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%">Int16</td> <td class="cellrowborder" valign="top" width="25%">number</td> <td class="cellrowborder" valign="top" width="25%">let count: number = 10;</td> <td class="cellrowborder" valign="top" width="25%"><p>Swift的Int16为16位整数。</p> <p>ArkTS统一用number表示小整数类型。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%">Int32</td> <td class="cellrowborder" valign="top" width="25%">number</td> <td class="cellrowborder" valign="top" width="25%">let count: number = 10;</td> <td class="cellrowborder" valign="top" width="25%"><p>Swift的Int32为32位整数。</p> <p>ArkTS的number是双精度浮点型，可存储整数和浮点数。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%">Int64</td> <td class="cellrowborder" valign="top" width="25%">number</td> <td class="cellrowborder" valign="top" width="25%">let largeNum: number = 9007199254740991;</td> <td class="cellrowborder" valign="top" width="25%"><p>Swift需处理大整数。</p> <p>ArkTS用同一类型表示。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%">Float</td> <td class="cellrowborder" valign="top" width="25%">number</td> <td class="cellrowborder" valign="top" width="25%">let pi: number = 3.14;</td> <td class="cellrowborder" valign="top" width="25%"><p>Swift需显式指定Float。</p> <p>ArkTS直接使用number。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%">Double</td> <td class="cellrowborder" valign="top" width="25%">number</td> <td class="cellrowborder" valign="top" width="25%">let e: number = 2.71828;</td> <td class="cellrowborder" valign="top" width="25%"><p>Swift区分Float和Double。</p> <p>ArkTS统一用number表示所有数值类型。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%">Character</td> <td class="cellrowborder" valign="top" width="25%">string</td> <td class="cellrowborder" valign="top" width="25%">let c: string = 'a';</td> <td class="cellrowborder" valign="top" width="25%">ArkTS无Character类型，单字符场景使用string。</td> </tr> <tr><td class="cellrowborder" valign="top" width="25%">String</td> <td class="cellrowborder" valign="top" width="25%">string</td> <td class="cellrowborder" valign="top" width="25%">let message: string = 'Hello';</td> <td class="cellrowborder" valign="top" width="25%">定义方式类似，但ArkTS字符串支持模板字面量和更灵活的操作。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="复杂数据类型">复杂数据类型<i class="anchor-icon anchor-icon-link" anchorid="复杂数据类型" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.1" valign="top" width="25%">Swift类型体系</th> <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.2" valign="top" width="25%">ArkTS类型体系</th> <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.3" valign="top" width="25%">ArkTS示例代码</th> <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.5.1.4" valign="top" width="25%">核心差异说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="25%"><strong>数组</strong>：var arr: [Int] = [1, 2, 3]</td> <td class="cellrowborder" valign="top" width="25%"><strong>Array</strong>：let arr: number[] = [1, 2, 3];</td> <td class="cellrowborder" valign="top" width="25%"><p>// 动态长度语法糖</p> <p>let dynamicArr = [4, 5, 6];</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>Swift数组长度可变。</p> <p>ArkTS的Array是动态数组，支持push/pop等操作；可直接用[]简化初始化。数组不会越界，当数组下标超过数组长度时会得到undefined。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><strong>集合 - Set</strong>：var mySet: Set&lt;String&gt; = ["a", "b"]</td> <td class="cellrowborder" valign="top" width="25%"><strong>Set</strong>：let mySet: Set&lt;string&gt; = new Set(["a", "b"]);</td> <td class="cellrowborder" valign="top" width="25%"><p>mySet.add('c'); // 向集合内添加元素</p> <p>for (const item of mySet) {...); // 迭代访问</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>Swift集合通过类型声明。</p> <p>ArkTS中集合的类型较灵活，适合动态场景。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><strong>字典 - Dictionary</strong>：var dict: [String: Int] = ["key": 1]</td> <td class="cellrowborder" valign="top" width="25%"><strong>Map</strong>：let map: Map&lt;string, number&gt; = new Map();</td> <td class="cellrowborder" valign="top" width="25%"><p>map.set('key', 1); // 添加键值对</p> <p>let value = map.get('key'); // 获取值</p> <p>map.has('key'); // 检查键是否存在</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>Swift的Dictionary需显式声明类型。</p> <p>ArkTS的Map操作更直接，支持链式调用。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><strong>协议</strong>：protocol Shape { func area() -&gt; Double }</td> <td class="cellrowborder" valign="top" width="25%"><strong>interface</strong>：interface Shapes { area(): number; }</td> <td class="cellrowborder" valign="top" width="25%"><p>class Rectangles implements Shapes {</p> <p> public width: number = 0;</p> <p> public height: number = 0;</p> <p> area(): number { return this.width * this.height; }</p> <p>}</p> </td> <td class="cellrowborder" valign="top" width="25%">语法结构相似，但ArkTS接口实现无需显式修饰符，且支持可选属性。</td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><strong>类</strong>：class Circle: Shape { /* 类定义 */ }</td> <td class="cellrowborder" valign="top" width="25%"><strong>class</strong>：class Circles implements Shape { /* 类定义 */ }</td> <td class="cellrowborder" valign="top" width="25%"><p>class Circles {</p> <p> radius: number;</p> <p> constructor(radius: number = 10) { // 支持参数默认值</p> <p> this.radius = radius;</p> <p> }</p> <p>}</p> </td> <td class="cellrowborder" valign="top" width="25%">ArkTS类支持属性默认值、可选参数，构造函数参数可直接声明为类属性，语法更简洁。</td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><strong>枚举</strong>：enum Color { case red, green, blue }</td> <td class="cellrowborder" valign="top" width="25%"><strong>enum</strong>：enum Colors { Red, Green, Blue }</td> <td class="cellrowborder" valign="top" width="25%"><p>enum Colors { Red = 1, Green, Blue };</p> <p>let color = Colors.Green; // 值为2（自动递增）</p> </td> <td class="cellrowborder" valign="top" width="25%">基本概念一致，但ArkTS枚举不支持Swift中的自定义构造函数和方法，仅支持简单的数值或字符串枚举。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="函数与闭包">函数与闭包<i class="anchor-icon anchor-icon-link" anchorid="函数与闭包" tips="复制节点链接"></i></h3><p>Swift和ArkTS在函数方面语法趋同，细节上有差别。</p> <p>相似点：常规函数定义和箭头函数。</p> <p><strong>ArkTS示例：</strong> 函数定义</p> <div _ngcontent-ief-c106="" class="highlight-div"><div _ngcontent-ief-c106="" class="highlight-div-header"><div _ngcontent-ief-c106="" class="highlight-div-header-left"><div _ngcontent-ief-c106="" class="handle-button expand-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ief-c106="" class="highlight-div-header-right"><div _ngcontent-ief-c106="" class="handle-button ai-button"></div><div _ngcontent-ief-c106="" class="handle-button line-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ief-c106="" class="handle-button theme-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ief-c106="" class="handle-button copy-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ief-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 常规函数定义，与Swift类似。</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">return</span> x + y;</li><li>}</li><li>
</li><li><span class="hljs-comment">// 简洁的箭头函数形式，类似Swift的闭包语法。</span></li><li><span class="hljs-keyword">const</span> multiply = (<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> a * b;</li></ol></pre></div></div> <p>差异点：</p> <ol><li>ArkTS提供类型声明层面的多态，仅用于类型检查和文档提示，实际只有一个实现函数。</li></ol> <p><strong>ArkTS示例：</strong> ArkTS函数重载</p> <div _ngcontent-ief-c106="" class="highlight-div"><div _ngcontent-ief-c106="" class="highlight-div-header"><div _ngcontent-ief-c106="" class="highlight-div-header-left"><div _ngcontent-ief-c106="" class="handle-button expand-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ief-c106="" class="highlight-div-header-right"><div _ngcontent-ief-c106="" class="handle-button ai-button"></div><div _ngcontent-ief-c106="" class="handle-button line-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ief-c106="" class="handle-button theme-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ief-c106="" class="handle-button copy-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ief-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">x: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span>;            <span class="hljs-comment">/*  第一个函数定义。  */</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">x: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span>;            <span class="hljs-comment">/*  第二个函数定义。  */</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">x: <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span> {  <span class="hljs-comment">/*  函数实现。       */</span></li><li>}</li><li>
</li><li><span class="hljs-title function_">foo</span>(<span class="hljs-number">123</span>);     <span class="hljs-comment">//  OK，使用第一个定义。</span></li><li><span class="hljs-title function_">foo</span>(<span class="hljs-string">'aa'</span>); <span class="hljs-comment">// OK，使用第二个定义。</span></li></ol></pre></div></div> <ol><li>ArkTS可选参数使用?，如function foo(name?: string)，而非Swift的默认值语法。</li></ol> <div _ngcontent-ief-c106="" class="highlight-div"><div _ngcontent-ief-c106="" class="highlight-div-header"><div _ngcontent-ief-c106="" class="highlight-div-header-left"><div _ngcontent-ief-c106="" class="handle-button expand-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ief-c106="" class="highlight-div-header-right"><div _ngcontent-ief-c106="" class="handle-button ai-button"></div><div _ngcontent-ief-c106="" class="handle-button line-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ief-c106="" class="handle-button theme-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ief-c106="" class="handle-button copy-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ief-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">name?: <span class="hljs-built_in">string</span></span>){}  <span class="hljs-comment">/*  name为可选参数。  */</span></li><li>
</li><li><span class="hljs-title function_">foo</span>(<span class="hljs-string">'hello'</span>);     <span class="hljs-comment">//  OK，传入name参数。</span></li><li><span class="hljs-title function_">foo</span>();     <span class="hljs-comment">//  OK，不传name参数。</span></li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="基础类库">基础类库<i class="anchor-icon anchor-icon-link" anchorid="基础类库" tips="复制节点链接"></i></h3><p>ArkTS基础类库和容器类库增强了语言的基础功能，包括高精度浮点运算、二进制Buffer、XML生成解析转换和多种容器库等能力，协助开发者简化开发工作，提升开发效率。</p> </div>  <div class="tiledSection"><h2 id="语言结构">语言结构<i class="anchor-icon anchor-icon-link" anchorid="语言结构" tips="复制节点链接"></i></h2><p>Swift是一种融合面向对象、函数式和协议导向范式的现代语言，强调安全性、性能与简洁性，适用于跨平台开发。</p> <p>ArkTS融合声明式UI、函数式和面向对象范式，通过响应式系统和跨设备适配能力，高效构建多端一致的高性能应用。</p> </div>  <div class="tiledSection"><h3 id="模块与包管理" class="firsth2">模块与包管理<i class="anchor-icon anchor-icon-link" anchorid="模块与包管理" tips="复制节点链接"></i></h3><p>在Swift中，开发者使用模块（module）来组织代码，通过import语句引入其他模块中的类。</p> <p>ArkTS也有自己的模块和包管理机制，同样通过import语句引入其他模块中的功能。</p> <p><strong>ArkTS示例：</strong></p> <div _ngcontent-ief-c106="" class="highlight-div"><div _ngcontent-ief-c106="" class="highlight-div-header"><div _ngcontent-ief-c106="" class="highlight-div-header-left"><div _ngcontent-ief-c106="" class="handle-button expand-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ief-c106="" class="highlight-div-header-right"><div _ngcontent-ief-c106="" class="handle-button ai-button"></div><div _ngcontent-ief-c106="" class="handle-button line-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ief-c106="" class="handle-button theme-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ief-c106="" class="handle-button copy-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ief-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 引入ArkTS标准库中的ArkTS容器集。</span></li><li>
</li><li><span class="hljs-keyword">import</span> { collections } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li></ol></pre></div></div> <p>由于ArkTS的模块系统更注重模块化开发和代码复用，能够更便捷地管理不同功能模块之间的依赖关系，所以在使用方式上，与Swift的模块管理会有所区别。</p> </div>  <div class="tiledSection"><h3 id="类与命名空间特性">类与命名空间特性<i class="anchor-icon anchor-icon-link" anchorid="类与命名空间特性" tips="复制节点链接"></i></h3><p>ArkTS的类系统在语法层面与Swift相似，但在高阶特性上展现出更现代的设计理念。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.3.1.5.1.1" valign="top" width="25%">特性</th> <th align="left" class="cellrowborder" id="mcps1.3.12.3.1.5.1.2" valign="top" width="25%">Swift实现方式</th> <th align="left" class="cellrowborder" id="mcps1.3.12.3.1.5.1.3" valign="top" width="25%">ArkTS实现方式</th> <th align="left" class="cellrowborder" id="mcps1.3.12.3.1.5.1.4" valign="top" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="25%">命名空间组织</td> <td class="cellrowborder" valign="top" width="25%">嵌套结构/内部类</td> <td class="cellrowborder" valign="top" width="25%">namespace关键字或模块文件结构。</td> <td class="cellrowborder" valign="top" width="25%">支持显式命名空间与模块化组织的混合模式。</td> </tr> <tr><td class="cellrowborder" valign="top" width="25%">类继承机制</td> <td class="cellrowborder" valign="top" width="25%">基于类的继承体系</td> <td class="cellrowborder" valign="top" width="25%">基于原型链的继承机制。</td> <td class="cellrowborder" valign="top" width="25%">语法相似但底层机制不同。</td> </tr> <tr><td class="cellrowborder" valign="top" width="25%">类成员可见性</td> <td class="cellrowborder" valign="top" width="25%">public/private/internal</td> <td class="cellrowborder" valign="top" width="25%">同Swift，但支持模块级可见性控制。</td> <td class="cellrowborder" valign="top" width="25%">增加了模块导出控制的维度。</td> </tr>  </tbody></table></div> </div> <p><strong>命名空间管理</strong></p> <p>ArkTS支持显式命名空间（namespace）和模块化组织。</p> <p><strong>ArkTS示例：</strong></p> <div _ngcontent-ief-c106="" class="highlight-div"><div _ngcontent-ief-c106="" class="highlight-div-header"><div _ngcontent-ief-c106="" class="highlight-div-header-left"><div _ngcontent-ief-c106="" class="handle-button expand-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ief-c106="" class="highlight-div-header-right"><div _ngcontent-ief-c106="" class="handle-button ai-button"></div><div _ngcontent-ief-c106="" class="handle-button line-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ief-c106="" class="handle-button theme-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ief-c106="" class="handle-button copy-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ief-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Models</span> {</li><li>    <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {</li><li>        <span class="hljs-comment">// 实现细节。</span></li><li>    }</li><li>    </li><li>    <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Repository</span> {</li><li>        <span class="hljs-comment">// 接口定义。</span></li><li>    }</li><li>}</li></ol></pre></div></div> <p>相比Swift的模块+内部类组合，ArkTS的命名空间能更直观地实现代码分层。</p> </div>  <div class="tiledSection"><h3 id="异步编程模型">异步编程模型<i class="anchor-icon anchor-icon-link" anchorid="异步编程模型" tips="复制节点链接"></i></h3><p><strong>单线程vs多线程</strong></p> <p>Swift使用async/await + Task实现异步编程，使用多线程和DispatchQueue实现并发。</p> <p>ArkTS基于事件循环，使用Promise/async/await处理异步，避免阻塞主线程。</p> <p><strong>错误处理</strong></p> <p>Swift的同步代码通过try/catch捕获异常，异步异常需特殊处理。</p> <p>ArkTS中未捕获的Promise错误可能导致静默失败，需显式使用try/catch或.catch。</p> </div>  <div class="tiledSection"><h3 id="this的绑定">this的绑定<i class="anchor-icon anchor-icon-link" anchorid="this的绑定" tips="复制节点链接"></i></h3><p>Swift的方法中，self始终指向类的实例对象，由代码结构在编译时确定。在方法中，self指向调用该方法的对象实例，无法通过调用方式改变self的指向。</p> <p><strong>Swift示例：</strong></p> <div _ngcontent-ief-c106="" class="highlight-div"><div _ngcontent-ief-c106="" class="highlight-div-header"><div _ngcontent-ief-c106="" class="highlight-div-header-left"><div _ngcontent-ief-c106="" class="handle-button expand-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ief-c106="" class="highlight-div-header-right"><div _ngcontent-ief-c106="" class="handle-button ai-button"></div><div _ngcontent-ief-c106="" class="handle-button line-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ief-c106="" class="handle-button theme-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ief-c106="" class="handle-button copy-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ief-c106="" class="highlight-scroll-div"><pre class="swift prettyprint linenums hljs language-swift" hw-language="swift" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> {</li><li>  <span class="hljs-keyword">func</span> <span class="hljs-title function_">method</span>() {</li><li>    <span class="hljs-built_in">print</span>(<span class="hljs-keyword">self</span>) <span class="hljs-comment">// 始终指向MyClass的实例。</span></li><li>  }</li><li>}</li></ol></pre></div></div> <p>ArkTS的this指向取决于函数调用时的上下文。</p> <p><strong>ArkTS示例：</strong></p> <div _ngcontent-ief-c106="" class="highlight-div"><div _ngcontent-ief-c106="" class="highlight-div-header"><div _ngcontent-ief-c106="" class="highlight-div-header-left"><div _ngcontent-ief-c106="" class="handle-button expand-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ief-c106="" class="highlight-div-header-right"><div _ngcontent-ief-c106="" class="handle-button ai-button"></div><div _ngcontent-ief-c106="" class="handle-button line-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ief-c106="" class="handle-button theme-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ief-c106="" class="handle-button copy-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ief-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {</li><li>  <span class="hljs-attr">bar</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'I am A'</span>;</li><li>
</li><li>  <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">bar</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> {</li><li>  <span class="hljs-attr">bar</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'I am B'</span>;</li><li>
</li><li>  <span class="hljs-title function_">callFunction</span>(<span class="hljs-params">fn: () =&gt; <span class="hljs-built_in">void</span></span>) {</li><li>    <span class="hljs-title function_">fn</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">callFunction</span>(<span class="hljs-params">fn: () =&gt; <span class="hljs-built_in">void</span></span>) {</li><li>  <span class="hljs-title function_">fn</span>();</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: A = <span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">b</span>: B = <span class="hljs-keyword">new</span> <span class="hljs-title function_">B</span>();</li><li>
</li><li><span class="hljs-title function_">callFunction</span>(a.<span class="hljs-property">foo</span>); <span class="hljs-comment">// 程序crash。this的上下文发生了变化。</span></li><li>b.<span class="hljs-title function_">callFunction</span>(a.<span class="hljs-property">foo</span>); <span class="hljs-comment">// 程序crash。this的上下文发生了变化。</span></li><li>b.<span class="hljs-title function_">callFunction</span>(a.<span class="hljs-property">foo</span>.<span class="hljs-title function_">bind</span>(b)) <span class="hljs-comment">// 输出'I'm B'。</span></li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="类型系统">类型系统<i class="anchor-icon anchor-icon-link" anchorid="类型系统" tips="复制节点链接"></i></h2><p>ArkTS与Swift的类型系统也存在差异。</p> </div>  <div class="tiledSection"><h3 id="类型推断与可选类型" class="firsth2">类型推断与可选类型<i class="anchor-icon anchor-icon-link" anchorid="类型推断与可选类型" tips="复制节点链接"></i></h3><p>相较于Swift需要显式类型声明和严格的nil检查，ArkTS的类型系统提供了更灵活的表达方式。</p> <p>ArkTS具有强大的类型推断能力，编译器能够根据上下文自动推断出变量的类型，所以很多时候不需要显式声明变量的类型。</p> <p><strong>ArkTS示例：</strong></p> <div _ngcontent-ief-c106="" class="highlight-div"><div _ngcontent-ief-c106="" class="highlight-div-header"><div _ngcontent-ief-c106="" class="highlight-div-header-left"><div _ngcontent-ief-c106="" class="handle-button expand-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ief-c106="" class="highlight-div-header-right"><div _ngcontent-ief-c106="" class="handle-button ai-button"></div><div _ngcontent-ief-c106="" class="handle-button line-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ief-c106="" class="handle-button theme-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ief-c106="" class="handle-button copy-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ief-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> num = <span class="hljs-number">10</span>; <span class="hljs-comment">// 编译器自动推断num为number类型。</span></li></ol></pre></div></div> <p>同时，ArkTS支持可选类型，通过在类型后面添加问号（?）来表示该变量可以为null或undefined。</p> <p><strong>ArkTS示例：</strong></p> <div _ngcontent-ief-c106="" class="highlight-div"><div _ngcontent-ief-c106="" class="highlight-div-header"><div _ngcontent-ief-c106="" class="highlight-div-header-left"><div _ngcontent-ief-c106="" class="handle-button expand-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ief-c106="" class="highlight-div-header-right"><div _ngcontent-ief-c106="" class="handle-button ai-button"></div><div _ngcontent-ief-c106="" class="handle-button line-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ief-c106="" class="handle-button theme-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ief-c106="" class="handle-button copy-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ief-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Person</span> {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;</li><li>  age?: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">// age是可选属性。</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">person</span>: <span class="hljs-title class_">Person</span> = {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span>,</li><li>};</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="联合类型">联合类型<i class="anchor-icon anchor-icon-link" anchorid="联合类型" tips="复制节点链接"></i></h3><p>联合类型这种类型组合能力为复杂场景提供了更强的表达力，是ArkTS类型系统的重要创新点。</p> <p>ArkTS支持联合类型（|）。联合类型表示一个值可以是多种类型中的一种。</p> <p><strong>ArkTS示例：</strong></p> <div _ngcontent-ief-c106="" class="highlight-div"><div _ngcontent-ief-c106="" class="highlight-div-header"><div _ngcontent-ief-c106="" class="highlight-div-header-left"><div _ngcontent-ief-c106="" class="handle-button expand-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ief-c106="" class="highlight-div-header-right"><div _ngcontent-ief-c106="" class="handle-button ai-button"></div><div _ngcontent-ief-c106="" class="handle-button line-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ief-c106="" class="handle-button theme-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ief-c106="" class="handle-button copy-button"><div _ngcontent-ief-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ief-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 联合类型示例。</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;</li><li>value = <span class="hljs-string">'hello'</span>;</li><li>value = <span class="hljs-number">123</span>;</li></ol></pre></div></div> </div> </div> <div></div></div>