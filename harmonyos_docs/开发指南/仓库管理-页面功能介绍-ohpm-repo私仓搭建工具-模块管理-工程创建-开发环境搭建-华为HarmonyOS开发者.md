<h1 _ngcontent-oyu-c119="" class="doc-title ng-star-inserted" title="仓库管理"> 仓库管理 </h1>

<div _ngcontent-oyu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001796357517"><p id="ZH-CN_TOPIC_0000002510173715__zh-cn_topic_0000001792256181_p63634425204137">仓库管理主要负责管理仓库信息，包括仓库中所有包权限管理，包的上传与下架和uplinks管理。</p> <div class="tiledSection"><h2 id="zh-cn_topic_0000001792256181_管理仓库">管理仓库<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001792256181_管理仓库" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510173715__p6361138124415">ohpm-repo从5.3.0开始支持多仓配置，并且支持对每个仓库进行权限编辑。</p> <p id="ZH-CN_TOPIC_0000002510173715__p9769155212449">仓库权限分为读权限和写权限。当用户在执行下载包、上传包、下架现有包和编辑包标签时，需要同时具有仓库的对应权限和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-package-permission-management">包的对应权限</a>，缺一不可。</p>  <div class="tablenoborder"><div class="tbBox"><table id="table576315549457" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002510173715__row178695419453"><th align="left" class="cellrowborder" id="mcps1.3.2.4.1.5.1.1" valign="top" width="18.91%"><p id="ZH-CN_TOPIC_0000002510173715__p2786175411456">仓库权限类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.5.1.2" valign="top" width="31.09%"><p id="ZH-CN_TOPIC_0000002510173715__p678615415457">前提条件</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.5.1.3" valign="top" width="25%"><p id="ZH-CN_TOPIC_0000002510173715__p6786125444518">可执行操作</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.5.1.4" valign="top" width="25%"><p id="ZH-CN_TOPIC_0000002510173715__p12786254124511">典型场景</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002510173715__row67861548457"><td class="cellrowborder" valign="top" width="18.91%"><p id="ZH-CN_TOPIC_0000002510173715__p2786175413457">可读</p> </td> <td class="cellrowborder" valign="top" width="31.09%"><p id="ZH-CN_TOPIC_0000002510173715__p157861854144513">1. 公开可读</p> <p id="ZH-CN_TOPIC_0000002510173715__p87861554184513">2. 授权可读，用户位于授权可读白名单中</p> </td> <td class="cellrowborder" valign="top" width="25%"><ul id="ZH-CN_TOPIC_0000002510173715__ul15941310184810"><li id="li69441094820">下载包</li></ul> <p id="ZH-CN_TOPIC_0000002510173715__p10786454164511"></p> </td> <td class="cellrowborder" valign="top" width="25%"><p id="ZH-CN_TOPIC_0000002510173715__p137865548457">开发者获取依赖包</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173715__row1578695474520"><td class="cellrowborder" valign="top" width="18.91%"><p id="ZH-CN_TOPIC_0000002510173715__p1278615454514">可写</p> </td> <td class="cellrowborder" valign="top" width="31.09%"><p id="ZH-CN_TOPIC_0000002510173715__p127861754154518">1. 公开可写</p> <p id="ZH-CN_TOPIC_0000002510173715__p178615444513">2. 授权可写，用户位于授权可写白名单中</p> </td> <td class="cellrowborder" valign="top" width="25%"><ul id="ZH-CN_TOPIC_0000002510173715__ul154011212144814"><li id="li1040161204817">下载包</li><li id="li31811814134811">上传包</li><li id="li15209916194812">下架现有包</li><li id="li2400191984814">编辑包标签（Tag）</li></ul> </td> <td class="cellrowborder" valign="top" width="25%"><p id="ZH-CN_TOPIC_0000002510173715__p13786105419455">维护者更新仓库内容</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002510173715__p19943104162713">管理仓库页面展示当前所拥有的仓库信息，包含如下四个功能：</p> <ol id="ZH-CN_TOPIC_0000002510173715__ol443510211273"><li id="li9435121152712">管理ohpm仓库三方包。</li><li id="li843617215270">编辑仓库。</li><li id="li13436202111271">删除仓库。</li><li id="li64361721192719">新增仓库。</li></ol> <p id="ZH-CN_TOPIC_0000002510173715__p1065531319494"><span><img height="428.33049" originheight="680" originwidth="1220" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104728.83577025362944141434053951034307:50001231000000:2800:C25F92A7C7A227AFBA1C01020E9617855972E70ABB3CA63DFBEE1C37C8A5201B.png" title="点击放大" width="757.1025000000001"></span></p> <p id="ZH-CN_TOPIC_0000002510173715__zh-cn_topic_0000001792256181_p470080766204137"></p> <p id="ZH-CN_TOPIC_0000002510173715__p383714734415"></p> </div> <div class="tiledSection"><h3 id="section584185119293" class="firsth2">管理三方包<i class="anchor-icon anchor-icon-link" anchorid="section584185119293" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510173715__p13408932103016">管理三方包页面包含权限管理和上下架两部分。</p> </div> <div class="tiledSection"><h3 id="section1091534410316"><strong>权限管理</strong><i class="anchor-icon anchor-icon-link" anchorid="section1091534410316" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510173715__p769635452515">ohpm-repo从5.3.0版本开始支持配置包级别的访问权限。系统管理员能够对仓库中所有的包进行权限管理，支持配置包的可见性、白名单和管理所有者。支持通过包名模糊检索到需要管理权限的包。</p> <p id="ZH-CN_TOPIC_0000002510173715__p3803191619414"><span><img height="381.00403600000004" originheight="668" originwidth="1259" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104728.01960901666495305453645709810220:50001231000000:2800:3885B6F07160FBA1DC412D34B9C5F7B01A7669731C8DF470EB854BFB91619ABF.png" title="点击放大" width="711.2175000000001"></span></p> <ul id="ZH-CN_TOPIC_0000002510173715__ul3393714162620"><li id="li183931814142614">区域1：可见性配置，能够配置一个包的可见性，默认为公开可读。当配置为授权可读时，支持在区域2中添加可读白名单。当包设置为公开可读时，所有用户对包具有下载和查看权限；当包设置为授权可读时，仅添加在可读白名单中的用户具有包的下载权限。<p id="ZH-CN_TOPIC_0000002510173715__p12233183785913"><span><img height="389.055989" originheight="668" originwidth="1259" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104728.58809914019905821116837850152857:50001231000000:2800:F4D8590738498CB05CAA18878B781BE0E1189BBE43D750645705C81166457F4C.png" title="点击放大" width="721.3780350000001"></span></p> </li></ul> <ul id="ZH-CN_TOPIC_0000002510173715__ul7433181716113"><li id="li174331117117">区域2：白名单配置，在白名单中的用户将具有包的下载和查看权限，包的所有者和维护者会自动添加到包的白名单中。点击“新增用户”或“删除”按钮，可以在白名单配置中添加或者删除查看者用户，所有者和维护者用户禁止被删除。<p id="ZH-CN_TOPIC_0000002510173715__p24334171613"><span><img height="353.14598900000004" originheight="911" originwidth="1920" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104728.07442813151741501899931359551791:50001231000000:2800:196FA20B344E96700150B54372AB55D3A1B8CC507C7E6B12F349F987BAC39245.png" title="点击放大" width="725.152575"></span></p> </li></ul> <ul id="ZH-CN_TOPIC_0000002510173715__ul14434217313"><li id="li16434141710110">区域3：管理所有者，包的所有者具有包的下载，上传，下架和编辑包tag权限。支持对包所有者进行新增和删除，当包仅剩唯一一个所有者用户时，禁止被删除。<p id="ZH-CN_TOPIC_0000002510173715__p543412171814"><span><img height="357.13598900000005" originheight="911" originwidth="1920" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104728.48847368384684937937403465718972:50001231000000:2800:B414143C21459FF152B86235DDD3181BAAB81D4EB08CF6A69EB80FBEB50B27F8.png" title="点击放大" width="728.3216990000001"></span></p> </li></ul> </div> <div class="tiledSection"><h3 id="section13809313268"><strong>上下架</strong><i class="anchor-icon anchor-icon-link" anchorid="section13809313268" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510173715__p24341617610">点击“管理ohpm仓库三方包”按钮，进入仓库管理详情面板，展示所有已上传至ohpm-repo的三方包信息。上下架包含上传三方包、单个包下架、批量包下架和搜索三方包四个功能。</p> <p id="ZH-CN_TOPIC_0000002510173715__p1543491710113"><span><img height="357.13598900000005" originheight="911" originwidth="1920" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104728.44243257262612075304190980439519:50001231000000:2800:2F9A085EFD34BA62F02DCC1731FD2CC5E65F2B3E5C71D190FCC5D3E24839C50B.png" title="点击放大" width="733.579455"></span></p> <ul id="ZH-CN_TOPIC_0000002510173715__ul10218184015619"><li id="li174341317710">区域1：上传三方包，点击“上传三方包”按钮，能够上传指定的包文件或选择本地三方包文件，将其上传至仓库中，页面效果如下图所示：<p id="ZH-CN_TOPIC_0000002510173715__p0434317115"><span><img height="379.08098900000005" originheight="668" originwidth="1259" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104729.70616554564724327174750507982060:50001231000000:2800:12240F19D4CFDCEC0EA6D00FA5993A5A110742C0218B21D0E6834D9C547EA05A.png" title="点击放大" width="703.2973499999999"></span></p> </li><li id="li10434111712111">区域2：下架，点击指定包右边的“下架”按钮，进行单个包下架操作，输入下架原因即可完成包的下架，页面效果如下图所示：<p id="ZH-CN_TOPIC_0000002510173715__p15434117318"><span><img height="381.07598900000005" originheight="668" originwidth="1259" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104729.86136096672845501181850709311254:50001231000000:2800:86C08204AB220ABDCF10FAA75D6D239A04A59B9421D8471574250982A487DDF8.png" title="点击放大" width="706.184115"></span></p> </li><li id="li7434217611">区域3：批量下架，勾选包左边的待选框，点击“批量下架”按钮，能够批量下架已勾选的包，可以通过改变页面底部每页包含的数据值，批量下架更多的包。<p id="ZH-CN_TOPIC_0000002510173715__p184341417815"><span><img height="384.77964000000003" originheight="668" originwidth="1259" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104729.16050672731770130052383803656572:50001231000000:2800:A22199EC5893E367B406B5B69359F60E92DEA3B06BA4BF1C97003A81F22B5671.png" title="点击放大" width="717.2025"></span></p> </li><li id="li1921818409620">区域4：筛选，点击列表标题旁的漏斗图标，可以进行包数据的筛选。支持通过Name、Version、Publisher、Author和PublishTime字段筛选包数据。例如筛选出Name带有数字3，版本号大于等于2.0.0，发布人为accessToken1的包，数据筛选效果如下图所示：<p id="ZH-CN_TOPIC_0000002510173715__p0434217318">- Name：支持对包名进行模糊搜索。</p> <p id="ZH-CN_TOPIC_0000002510173715__p143410171110">- Version：支持输入最小版本号和最大版本号，进行版本号区间搜索。</p> <p id="ZH-CN_TOPIC_0000002510173715__p0434191710110">- Publisher：支持对包发布者名称进行模糊搜索。</p> <p id="ZH-CN_TOPIC_0000002510173715__p543481710118">- Author：支持对包作者名称进行模糊搜索。</p> <p id="ZH-CN_TOPIC_0000002510173715__p8434121713113">- PublishTime：支持对包发布时间进行区间搜索。</p> <p id="ZH-CN_TOPIC_0000002510173715__p11218164018618"><span><img height="378.08348900000004" originheight="668" originwidth="1259" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104729.74529173099817185849814648770009:50001231000000:2800:2387D8CA6CBF12397055DDC639E4B15EAA71381D86509A07BEFBEA7DB569F4FC.png" title="点击放大" width="709.608599"></span></p> </li></ul> </div> <div class="tiledSection"><h3 id="section96571812133120">编辑仓库<i class="anchor-icon anchor-icon-link" anchorid="section96571812133120" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510173715__p65371135131812">点击指定仓库的“编辑”图标按钮，进入仓库信息编辑界面，可以修改仓库的Name 、Uplink、可读策略、授权可读白名单、可写策略，授权可写白名单、发布策略和描述信息。</p> <p id="ZH-CN_TOPIC_0000002510173715__p185371354187"><span><img height="425.11720279720276" originheight="851" originwidth="1881" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104729.84342473930486866950473225987061:50001231000000:2800:874FE09A52AD4A010F7CB48EE1673DED78CD239718C7AB6702D957D54095E10F.png" title="点击放大" width="920"></span></p> <ul id="ZH-CN_TOPIC_0000002510173715__ul2829152420171"><li id="li68292024131715">Name：仓库的名称。当仓库发过包或者已添加授权可读白名单或可写白名单时，禁止修改仓库名。</li><li id="li138291324101719">Uplink：配置代理仓库地址。其中Uplink为下拉框选择，选项为仓库管理页面的<a href="/consumer/cn/doc/harmonyos-guides/ide-ohpm-depot-management#zh-cn_topic_0000001792256181_uplinks">uplinks</a>面板配置的Uplink仓库。</li><li id="li882913249172">可读策略： 分为公开可读和授权可读。当一个仓库被设置为授权可读时，将出现授权可读名单配置项，系统管理员默认具有仓库读和写权限。当仓库设置为公开可读时，所有用户对仓库具有读权限，能够访问仓库中包的信息和下载包；当设置为授权可读时，仅授权可读白名单中用户拥有仓库的读权限。当仓库可读策略设置为授权可读时，可写策略默认选择授权可写，不可修改。</li><li id="li283018246177">授权可读名单：当可读策略选择授权可读时，将出现授权可读名单配置项，能够逐个添加仓库可读用户。授权可读白名单最多添加200个。支持搜索用户名逐个添加，也支持使用英文逗号分割用户名批量添加。</li><li id="li1683042441720">可写策略：分为公开可写和授权可写。当一个仓库被设置为授权可写时，将出现授权可写名单配置项，仅在可写名单中的用户具有仓库的写权限，具有写权限默认具有读权限，系统管理员默认具有仓库读写权限。当仓库设置为公开可写时，所有用户对仓库具有写权限，能够对仓库中的包进行下载，上传，下架和编辑tag操作；当设置为授权可写时，仅授权可写白名单中用户拥有仓库的写权限。</li><li id="li1983012461717">授权可写名单：当可写策略选择授权可写时，将出现授权可写名单配置项，能够逐个添加仓库可写用户。授权可写白名单最多添加200个。支持搜索用户名逐个添加，也支持使用英文逗号分割用户名批量添加。</li><li id="li15830824141711">发布策略：分为禁止同版本覆盖和支持同版本覆盖两种模式。在禁止同版本覆盖模式下，若尝试向仓库重复发布同一版本的包，系统会报错提示“该三方库已存在此版本”，确保版本唯一性。在支持同版本覆盖模式下，允许重复发布同版本包，新包将直接覆盖旧包，适用于需要持续更新的场景。用户可通过配置灵活选择适合的发布策略。<strong>覆盖操作不可逆，请谨慎选择</strong>。</li></ul> </div> <div class="tiledSection"><h3 id="section692726163411">删除仓库<i class="anchor-icon anchor-icon-link" anchorid="section692726163411" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510173715__p5409736121913">点击“删除”图标按钮将删除当前选中的仓库。当仓库下存在上架包时禁止删除仓库，当仅剩最后一个仓库时禁止被删除。</p> <p id="ZH-CN_TOPIC_0000002510173715__p1447612357347"><span><img height="496.60146720214186" originheight="668" originwidth="1259" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104729.72696693914503472814777720116714:50001231000000:2800:FC57259707CBBA4F1D21427F8F0B430D805B1B9F86551A16435440E54A0A393E.png" title="点击放大" width="920"></span></p> </div> <div class="tiledSection"><h3 id="section717353923413">新增仓库<i class="anchor-icon anchor-icon-link" anchorid="section717353923413" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510173715__p2025514343413">点击“+”图标按钮将新增一个仓库，可以对仓库的Name、Uplink、可读策略、可写策略、发布策略和描述信息进行编辑。可读策略默认为公开可读，可写策略默认为公开可写，发布策略默认为禁止同版本覆盖。最多支持创建20个仓库。<span><img height="495.58482762754363" originheight="668" originwidth="1259" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104729.84360790116503480562860549666278:50001231000000:2800:0CCA70334686425A7C662F642AE8948BCEE003EC06BFD45A3C41E76CAD4B63D6.png" title="点击放大" width="920"></span></p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001792256181_uplinks">uplinks<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001792256181_uplinks" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510173715__zh-cn_topic_0000001792256181_p1643188047204137">uplink功能可以让当前仓库获取配置的uplink仓库的所有包，若从某个已配置uplink的仓库下载当前仓库中不存在的三方包时，则会通过uplink仓库下载该包，如果访问uplink仓库需要代理，请配置好所需代理信息，uplink页面如下图所示：</p> <p id="ZH-CN_TOPIC_0000002510173715__p13467143415406"><span><img height="385.023961" originheight="946" originwidth="1896" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104729.73625715551853629105140219689058:50001231000000:2800:5EDB1EA1A6CABFBED0E85734349E557F0DD25CD052FBFED46D50AE45830581A4.png" title="点击放大" width="759.0975000000001"></span></p> <p id="ZH-CN_TOPIC_0000002510173715__zh-cn_topic_0000001792256181_p609706270204137"></p> <ol id="ZH-CN_TOPIC_0000002510173715__ol12372192312447"><li id="li437232314419">点击新增按钮，可以创建新的uplink仓库。一旦完成新增uplink仓库的设置，必须前往仓库管理 &gt; 管理仓库 &gt; 编辑页面进行应用，这样该功能才会生效，且ohpm-repo只允许同时配置一个uplink仓库。uplink仓库地址不建议配置为其他ohpm-repo的地址，避免出现仓库A配置uplink为仓库B，仓库B配置uplink为仓库A，导致循环查找问题。页面效果如下图所示：<p id="ZH-CN_TOPIC_0000002510173715__p0498194294113"><span><img height="373.52690900000005" originheight="946" originwidth="1896" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104729.78249814404127339135010742741421:50001231000000:2800:6BD0002709C648C2A16864E7C4A7B0E25D7965638DEA794E5BCF3DCEC56A861C.png" title="点击放大" width="740.1450000000001"></span></p> </li><li id="li1337222313443">点击编辑，可以修改已配置的uplink仓库信息，页面效果如下图所示：<p id="ZH-CN_TOPIC_0000002510173715__p050995215432"><span><img height="369.550874" originheight="946" originwidth="1896" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104729.21044610364244059116675809126705:50001231000000:2800:E10343FCE4116DCA18DA0C98516B7E17ED31F425422130A07D66CE46AD9CAEC8.png" title="点击放大" width="728.1750000000001"></span></p> </li><li id="li1637292313445">点击删除，可以删除配置的uplink仓库，页面效果如下图所示：<p id="ZH-CN_TOPIC_0000002510173715__p874910124515"><span><img height="454.67247" originheight="946" originwidth="1896" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104729.04462482937971885891195134006958:50001231000000:2800:6AB075D12D8F321E9ED724D16B9ABA42AADBF4303EDC8AAB9302A5EFF839A422.png" title="点击放大" width="905.27913"></span></p> <p id="ZH-CN_TOPIC_0000002510173715__p102191798453"></p> </li><li id="li12372223174413">由于搭建的ohpm-repo私仓可能需要通过代理来访问已配置的uplink仓库，因此ohpm-repo提供了代理功能。点击配置代理，可以添加代理信息，页面效果如下图所示：<p id="ZH-CN_TOPIC_0000002510173715__p185818019462"><span><img height="463.472415" originheight="946" originwidth="1896" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104729.71927421709765877137595251296159:50001231000000:2800:DC140CB3C2B70C1732F8881F1662140924EB03A7A3CC20DCDCD294FB05AE7E85.png" title="点击放大" width="918.6975000000001"></span></p> <p id="ZH-CN_TOPIC_0000002510173715__p14858175924514"></p> </li></ol> </div> </div> <div></div></div>