<h1 _ngcontent-goh-c119="" class="doc-title ng-star-inserted" title="代理提醒(ArkTS)"> 代理提醒(ArkTS) </h1>

<div _ngcontent-goh-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="功能介绍">功能介绍<i class="anchor-icon anchor-icon-link" anchorid="功能介绍" tips="复制节点链接"></i></h2>          <p>应用退到后台或进程终止后，仍然有一些提醒用户的定时类通知，为满足此类功能场景，系统提供了代理提醒的能力。当应用退至后台或进程终止后，系统会代理应用做定时提醒。当前支持的提醒类型包括：倒计时、日历和闹钟。为了防止代理提醒被滥用于广告、营销类提醒，影响用户体验，部分设备上代理提醒增加了管控机制，应用无法直接使用代理提醒，管控后的使用方法请参考<a href="/consumer/cn/doc/harmonyos-guides/agent-powered-reminder#约束与限制">管控限制</a>。</p>    </div>    <div class="tiledSection">     <h2 id="约束与限制">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="约束与限制" tips="复制节点链接"></i></h2>          <ul>      <li>       <p><strong>设备限制</strong>：代理提醒适用于手机、平板、PC/2in1、智慧屏、智能穿戴设备。</p></li>      <li>       <p><strong>管控限制</strong>：</p></li>     </ul>     <ol>      <li>手机、平板、PC/2in1设备存在管控，智慧屏、智能穿戴设备无管控限制。</li>      <li>管控后可通过日历Calendar Kit替代代理提醒，实现相应的提醒功能，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/calendarmanager-overview">开发指南</a>；或者参考<a href="/consumer/cn/doc/harmonyos-guides/agent-powered-reminder#代理提醒开放能力申请">代理提醒开放能力申请</a>向华为侧申请代理提醒权限，申请通过后会开通权益，即可正常调用代理提醒接口。</li>     </ol>     <ul>      <li>       <p><strong>应用限制</strong>：</p>       <p>代理提醒仅对如下类型的应用开放申请：工具类、商务类、效率类、金融理财类、教育类、生活服务类、旅游类、医疗类、运动健康类、游戏类应用。若您的应用不在上述类型中，则不符合申请条件。符合上述类型的应用，请在线上申请时一并在附件中提交应用分类截图。应用分类信息可登录<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>网站，在“APP”页签中选择“应用上架”-&gt;“应用信息”查询。</p></li>      <li>       <p><strong>场景限制</strong>：</p>       <p>营销类场景（如电商/红包/优惠券抢购、直播预约等）不支持申请代理提醒权限，以下给出几种常见的开放代理提醒申请的场景示例：</p></li>     </ul>     <ol>      <li>生活类提醒（闹钟提醒、记账提醒、时间/日程提醒、临期提醒、习惯打卡、计时提醒、日历/纪念日提醒、行程提醒）。</li>      <li>运动健康类提醒（运动/训练提醒、经期提醒、喝水提醒、饮食记录提醒、测血糖/吃药提醒、睡眠提醒、疫苗/产检提醒）。</li>      <li>学习类提醒（学习提醒、课程提醒、背单词提醒）。</li>      <li>办公类提醒（排班、办公打卡提醒）。</li>      <li>游戏类提醒（游戏内玩家重要任务预警提醒，包含角色/资产受到损害，游戏任务完成提醒）。</li>     </ol>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>代理提醒需要同时满足应用限制和场景限制。单个应用可能涉及多个场景，例如某个游戏类应用包含直播预约和游戏任务完成提醒两种场景，因为直播预约属于营销类场景，因此不支持申请代理提醒。</p>      </div></div></div>     <ul>      <li><strong>个数限制</strong>：</li>     </ul>     <ol>      <li>单个普通应用有效/未过期的提醒数量不超过30个。</li>      <li>从API version 10开始，所有应用有效/未过期的提醒数量总和不超过12000个。API version 9及之前的版本，有效/未过期的提醒数量总和不超过2000个。</li>     </ol>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当到达设置的提醒时间点时，通知中心会弹出相应提醒。若未点击提醒上的关闭/CLOSE按钮，则代理提醒是有效/未过期的；若点击了关闭/CLOSE按钮，则代理提醒过期。</p>       <p>当代理提醒是周期性提醒时，如设置每天提醒，无论是否点击关闭/CLOSE按钮，代理提醒都是有效的。</p>      </div></div></div>     <ul>      <li><strong>跳转限制</strong>：点击提醒通知后跳转的应用必须是申请代理提醒的本应用。</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="与相关kit的关系">与相关Kit的关系<i class="anchor-icon anchor-icon-link" anchorid="与相关kit的关系" tips="复制节点链接"></i></h2>          <ul>      <li>当到达设置的提醒时间点后，代理提醒使用Notification Kit发布通知，通知会显示在通知中心，通知样式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/notification-overview#通知样式">Notification Kit通知样式</a>中文本类型。</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="模拟器支持情况">模拟器支持情况<i class="anchor-icon anchor-icon-link" anchorid="模拟器支持情况" tips="复制节点链接"></i></h2>          <p>从API version 20开始，本能力支持模拟器开发。</p>    </div>    <div class="tiledSection">     <h2 id="接口说明">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h2>          <p>以下是代理提醒的相关接口，下表均以Promise形式为例，更多接口及使用方式请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-reminderagentmanager" target="_blank">后台代理提醒</a>文档。</p>     <p><strong>表1</strong> 主要接口</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.3.1.1" valign="top" width="50%">接口名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">publishReminder(reminderReq: ReminderRequest): Promise&lt;number&gt;</td>         <td class="cellrowborder" valign="top" width="50%">发布后台代理提醒。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">cancelReminder(reminderId: number): Promise&lt;void&gt;</td>         <td class="cellrowborder" valign="top" width="50%">取消指定id的代理提醒。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">getValidReminders(): Promise&lt;Array&lt;ReminderRequest&gt;&gt;</td>         <td class="cellrowborder" valign="top" width="50%">获取当前应用设置的所有<a href="/consumer/cn/doc/harmonyos-guides/agent-powered-reminder#约束与限制">有效（未过期）的代理提醒</a>。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">cancelAllReminders(): Promise&lt;void&gt;</td>         <td class="cellrowborder" valign="top" width="50%">取消当前应用设置的所有代理提醒。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">addNotificationSlot(slot: NotificationSlot): Promise&lt;void&gt;</td>         <td class="cellrowborder" valign="top" width="50%">添加通知渠道。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">removeNotificationSlot(slotType: notification.SlotType): Promise&lt;void&gt;</td>         <td class="cellrowborder" valign="top" width="50%">删除指定的通知渠道类型。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="代理提醒开放能力申请" class="firsth2">代理提醒开放能力申请<i class="anchor-icon anchor-icon-link" anchorid="代理提醒开放能力申请" tips="复制节点链接"></i></h3>          <ol>      <li>登录<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>，选择“开发与服务”。</li>      <li>在项目列表中找到您的项目，在项目下的应用列表中选择需要申请代理提醒的应用。如果无对应应用，请先<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-create-app-0000002247955506" target="_blank">创建HarmonyOS应用</a>。</li>      <li>       <p>进入“项目设置”-&gt;“开放能力管理”页面，点击“代理提醒”卡片对应的“申请”按钮。</p>       <p><span><img originheight="381" originwidth="1851" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114716.50139835546577821643793951448794:50001231000000:2800:95C4A3978DF6EFC4EB0B9608994A0D6B12C71B33245A3FD21FA6396810C4F843.png" width="920" height="189.3679092382496"></span></p></li>      <li>       <p>在“新建业务申请”窗口填写申请原因，上传代理提醒功能场景截图和应用分类信息截图，然后点击“提交”。应用分类信息可登录<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>网站，在“APP”页签中选择“应用上架”-&gt;“应用信息”查询。</p>       <p><span><img originheight="567" originwidth="877" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114716.17294043853508070001075691161922:50001231000000:2800:8714E81289E4371F194F6C3B03B76D82285579AB58FE93FBF98327BFA3EDEBFA.png" width="877" height="567"></span></p></li>      <li>       <p>返回“开放能力接入”页面，原“申请”按钮变为“申请中”，8个工作日反馈申请结果。</p>       <p><span><img originheight="116" originwidth="1506" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114716.88570137790983883534388317913581:50001231000000:2800:D72C9F29F4757BFD2DFC0688FA4EFC309631AC7BDFD9B28AD1001EF41A07D340.png" width="920" height="70.86321381142099"></span></p></li>      <li>申请审批通过后，互动中心会发送通知给您，同时“申请中”按钮会变为置灰显示的“申请”。</li>      <li>       <p>能力申请通过后，勾选代理提醒的能力开关，点击右上角“保存”。至此，您的应用已成功接入开放能力。此时，调试和发布应用必须使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-signing" target="_blank">手动签名</a>。</p>       <p><span><img originheight="195" originwidth="1531" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114716.99117169187153157330690992505799:50001231000000:2800:78BF37AD154C4C8C4BC2BB7A64C9075C6552145731119C084C3BDC864E5F9E0F.png" width="920" height="117.17831482691051"></span></p></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="申请权限">申请权限<i class="anchor-icon anchor-icon-link" anchorid="申请权限" tips="复制节点链接"></i></h3>          <p>申请ohos.permission.PUBLISH_AGENT_REMINDER权限，配置方式请参阅<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions">声明权限</a>。</p>    </div>    <div class="tiledSection">     <h3 id="请求通知授权">请求通知授权<i class="anchor-icon anchor-icon-link" anchorid="请求通知授权" tips="复制节点链接"></i></h3>          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/notification-enable">请求通知授权</a>。获得用户授权后，才能使用代理提醒功能。</p>    </div>    <div class="tiledSection">     <h3 id="功能开发">功能开发<i class="anchor-icon anchor-icon-link" anchorid="功能开发" tips="复制节点链接"></i></h3>          <ol>      <li>       <p>导入模块。</p>       <div _ngcontent-goh-c106="" class="highlight-div"><div _ngcontent-goh-c106="" class="highlight-div-header"><div _ngcontent-goh-c106="" class="highlight-div-header-left"><div _ngcontent-goh-c106="" class="handle-button expand-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-goh-c106="" class="highlight-div-header-right"><div _ngcontent-goh-c106="" class="handle-button ai-button"></div><div _ngcontent-goh-c106="" class="handle-button line-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-goh-c106="" class="handle-button theme-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-goh-c106="" class="handle-button copy-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-goh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { reminderAgentManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BackgroundTasksKit'</span>;</li><li><span class="hljs-keyword">import</span> { notificationManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NotificationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li></ol></pre></div></div></li>      <li>       <p>定义目标提醒代理。开发者根据实际需要，选择定义如下类型的提醒。</p>       <ul>        <li>         <p>定义倒计时实例。</p>         <div _ngcontent-goh-c106="" class="highlight-div"><div _ngcontent-goh-c106="" class="highlight-div-header"><div _ngcontent-goh-c106="" class="highlight-div-header-left"><div _ngcontent-goh-c106="" class="handle-button expand-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-goh-c106="" class="highlight-div-header-right"><div _ngcontent-goh-c106="" class="handle-button ai-button"></div><div _ngcontent-goh-c106="" class="handle-button line-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-goh-c106="" class="handle-button theme-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-goh-c106="" class="handle-button copy-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-goh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">targetReminderAgent</span>: reminderAgentManager.<span class="hljs-property">ReminderRequestTimer</span> = {</li><li>  <span class="hljs-attr">reminderType</span>: reminderAgentManager.<span class="hljs-property">ReminderType</span>.<span class="hljs-property">REMINDER_TYPE_TIMER</span>,   <span class="hljs-comment">// 提醒类型为倒计时类型</span></li><li>  <span class="hljs-attr">triggerTimeInSeconds</span>: <span class="hljs-number">10</span>,</li><li>  <span class="hljs-attr">actionButton</span>: [ <span class="hljs-comment">// 设置弹出的提醒通知信息上显示的按钮类型和标题</span></li><li>    {</li><li>      <span class="hljs-attr">title</span>: <span class="hljs-string">'close'</span>,</li><li>      <span class="hljs-attr">type</span>: reminderAgentManager.<span class="hljs-property">ActionButtonType</span>.<span class="hljs-property">ACTION_BUTTON_TYPE_CLOSE</span></li><li>    }</li><li>  ],</li><li>  <span class="hljs-attr">wantAgent</span>: {     <span class="hljs-comment">// 点击提醒通知后跳转的目标UIAbility信息</span></li><li>    <span class="hljs-attr">pkgName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>    <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span></li><li>  },</li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'this is title'</span>, <span class="hljs-comment">// 指明提醒标题</span></li><li>  <span class="hljs-attr">content</span>: <span class="hljs-string">'this is content'</span>, <span class="hljs-comment">// 指明提醒内容</span></li><li>  <span class="hljs-attr">expiredContent</span>: <span class="hljs-string">'this reminder has expired'</span>, <span class="hljs-comment">// 指明提醒过期后需要显示的内容</span></li><li>  <span class="hljs-attr">notificationId</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// 指明提醒使用的通知的ID号，相同ID号的提醒会覆盖</span></li><li>  <span class="hljs-attr">slotType</span>: notificationManager.<span class="hljs-property">SlotType</span>.<span class="hljs-property">SOCIAL_COMMUNICATION</span> <span class="hljs-comment">// 指明提醒的Slot类型</span></li><li>}</li></ol></pre></div></div></li>        <li>         <p>定义日历实例。</p>         <div _ngcontent-goh-c106="" class="highlight-div"><div _ngcontent-goh-c106="" class="highlight-div-header"><div _ngcontent-goh-c106="" class="highlight-div-header-left"><div _ngcontent-goh-c106="" class="handle-button expand-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-goh-c106="" class="highlight-div-header-right"><div _ngcontent-goh-c106="" class="handle-button ai-button"></div><div _ngcontent-goh-c106="" class="handle-button line-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-goh-c106="" class="handle-button theme-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-goh-c106="" class="handle-button copy-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-goh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">targetReminderAgent</span>: reminderAgentManager.<span class="hljs-property">ReminderRequestCalendar</span> = {</li><li>  <span class="hljs-attr">reminderType</span>: reminderAgentManager.<span class="hljs-property">ReminderType</span>.<span class="hljs-property">REMINDER_TYPE_CALENDAR</span>, <span class="hljs-comment">// 提醒类型为日历类型</span></li><li>  <span class="hljs-attr">dateTime</span>: {   <span class="hljs-comment">// 指明提醒的目标时间</span></li><li>    <span class="hljs-attr">year</span>: <span class="hljs-number">2023</span>,</li><li>    <span class="hljs-attr">month</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">day</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">hour</span>: <span class="hljs-number">11</span>,</li><li>    <span class="hljs-attr">minute</span>: <span class="hljs-number">14</span>,</li><li>    <span class="hljs-attr">second</span>: <span class="hljs-number">30</span></li><li>  },</li><li>  <span class="hljs-attr">repeatMonths</span>: [<span class="hljs-number">1</span>], <span class="hljs-comment">// 指明重复提醒的月份</span></li><li>  <span class="hljs-attr">repeatDays</span>: [<span class="hljs-number">1</span>], <span class="hljs-comment">// 指明重复提醒的日期</span></li><li>  <span class="hljs-attr">actionButton</span>: [ <span class="hljs-comment">// 设置弹出的提醒通知信息上显示的按钮类型和标题</span></li><li>    {</li><li>      <span class="hljs-attr">title</span>: <span class="hljs-string">'close'</span>,</li><li>      <span class="hljs-attr">type</span>: reminderAgentManager.<span class="hljs-property">ActionButtonType</span>.<span class="hljs-property">ACTION_BUTTON_TYPE_CLOSE</span></li><li>    },</li><li>    {</li><li>      <span class="hljs-attr">title</span>: <span class="hljs-string">'snooze'</span>,</li><li>      <span class="hljs-attr">type</span>: reminderAgentManager.<span class="hljs-property">ActionButtonType</span>.<span class="hljs-property">ACTION_BUTTON_TYPE_SNOOZE</span></li><li>    },</li><li>  ],</li><li>  <span class="hljs-attr">wantAgent</span>: { <span class="hljs-comment">// 点击提醒通知后跳转的目标UIAbility信息</span></li><li>    <span class="hljs-attr">pkgName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>    <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span></li><li>  },</li><li>  <span class="hljs-attr">ringDuration</span>: <span class="hljs-number">5</span>, <span class="hljs-comment">// 指明响铃时长（单位：秒）</span></li><li>  <span class="hljs-attr">snoozeTimes</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">// 指明延迟提醒次数</span></li><li>  <span class="hljs-attr">timeInterval</span>: <span class="hljs-number">5</span>*<span class="hljs-number">60</span>, <span class="hljs-comment">// 执行延迟提醒间隔（单位：秒）</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'this is title'</span>, <span class="hljs-comment">// 指明提醒标题</span></li><li>  <span class="hljs-attr">content</span>: <span class="hljs-string">'this is content'</span>, <span class="hljs-comment">// 指明提醒内容</span></li><li>  <span class="hljs-attr">expiredContent</span>: <span class="hljs-string">'this reminder has expired'</span>, <span class="hljs-comment">// 指明提醒过期后需要显示的内容</span></li><li>  <span class="hljs-attr">snoozeContent</span>: <span class="hljs-string">'remind later'</span>, <span class="hljs-comment">// 指明延迟提醒时需要显示的内容</span></li><li>  <span class="hljs-attr">notificationId</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// 指明提醒使用的通知的ID号，相同ID号的提醒会覆盖</span></li><li>  <span class="hljs-attr">slotType</span>: notificationManager.<span class="hljs-property">SlotType</span>.<span class="hljs-property">SOCIAL_COMMUNICATION</span> <span class="hljs-comment">// 指明提醒的Slot类型</span></li><li>}</li></ol></pre></div></div></li>        <li>         <p>定义闹钟实例。</p>         <div _ngcontent-goh-c106="" class="highlight-div"><div _ngcontent-goh-c106="" class="highlight-div-header"><div _ngcontent-goh-c106="" class="highlight-div-header-left"><div _ngcontent-goh-c106="" class="handle-button expand-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-goh-c106="" class="highlight-div-header-right"><div _ngcontent-goh-c106="" class="handle-button ai-button"></div><div _ngcontent-goh-c106="" class="handle-button line-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-goh-c106="" class="handle-button theme-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-goh-c106="" class="handle-button copy-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-goh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">targetReminderAgent</span>: reminderAgentManager.<span class="hljs-property">ReminderRequestAlarm</span> = {</li><li>  <span class="hljs-attr">reminderType</span>: reminderAgentManager.<span class="hljs-property">ReminderType</span>.<span class="hljs-property">REMINDER_TYPE_ALARM</span>, <span class="hljs-comment">// 提醒类型为闹钟类型</span></li><li>  <span class="hljs-attr">hour</span>: <span class="hljs-number">23</span>, <span class="hljs-comment">// 指明提醒的目标时刻</span></li><li>  <span class="hljs-attr">minute</span>: <span class="hljs-number">9</span>, <span class="hljs-comment">// 指明提醒的目标分钟</span></li><li>  <span class="hljs-attr">daysOfWeek</span>: [<span class="hljs-number">2</span>], <span class="hljs-comment">// 指明每周哪几天需要重复提醒</span></li><li>  <span class="hljs-attr">actionButton</span>: [ <span class="hljs-comment">// 设置弹出的提醒通知信息上显示的按钮类型和标题</span></li><li>    {</li><li>      <span class="hljs-attr">title</span>: <span class="hljs-string">'close'</span>,</li><li>      <span class="hljs-attr">type</span>: reminderAgentManager.<span class="hljs-property">ActionButtonType</span>.<span class="hljs-property">ACTION_BUTTON_TYPE_CLOSE</span></li><li>    },</li><li>    {</li><li>      <span class="hljs-attr">title</span>: <span class="hljs-string">'snooze'</span>,</li><li>      <span class="hljs-attr">type</span>: reminderAgentManager.<span class="hljs-property">ActionButtonType</span>.<span class="hljs-property">ACTION_BUTTON_TYPE_SNOOZE</span></li><li>    },</li><li>  ],</li><li>  <span class="hljs-attr">wantAgent</span>: { <span class="hljs-comment">// 点击提醒通知后跳转的目标UIAbility信息</span></li><li>    <span class="hljs-attr">pkgName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>    <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span></li><li>  },</li><li>  <span class="hljs-attr">ringDuration</span>: <span class="hljs-number">5</span>, <span class="hljs-comment">// 指明响铃时长（单位：秒）</span></li><li>  <span class="hljs-attr">snoozeTimes</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">// 指明延迟提醒次数</span></li><li>  <span class="hljs-attr">timeInterval</span>: <span class="hljs-number">5</span>*<span class="hljs-number">60</span>, <span class="hljs-comment">// 执行延迟提醒间隔（单位：秒）</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'this is title'</span>, <span class="hljs-comment">// 指明提醒标题</span></li><li>  <span class="hljs-attr">content</span>: <span class="hljs-string">'this is content'</span>, <span class="hljs-comment">// 指明提醒内容</span></li><li>  <span class="hljs-attr">expiredContent</span>: <span class="hljs-string">'this reminder has expired'</span>, <span class="hljs-comment">// 指明提醒过期后需要显示的内容</span></li><li>  <span class="hljs-attr">snoozeContent</span>: <span class="hljs-string">'remind later'</span>, <span class="hljs-comment">// 指明延迟提醒时需要显示的内容</span></li><li>  <span class="hljs-attr">notificationId</span>: <span class="hljs-number">99</span>, <span class="hljs-comment">// 指明提醒使用的通知的ID号，相同ID号的提醒会覆盖</span></li><li>  <span class="hljs-attr">slotType</span>: notificationManager.<span class="hljs-property">SlotType</span>.<span class="hljs-property">SOCIAL_COMMUNICATION</span> <span class="hljs-comment">// 指明提醒的Slot类型</span></li><li>}</li></ol></pre></div></div></li>       </ul></li>      <li>       <p>发布相应的提醒代理。代理发布后，应用即可使用后台代理提醒功能。</p>       <div _ngcontent-goh-c106="" class="highlight-div"><div _ngcontent-goh-c106="" class="highlight-div-header"><div _ngcontent-goh-c106="" class="highlight-div-header-left"><div _ngcontent-goh-c106="" class="handle-button expand-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-goh-c106="" class="highlight-div-header-right"><div _ngcontent-goh-c106="" class="handle-button ai-button"></div><div _ngcontent-goh-c106="" class="handle-button line-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-goh-c106="" class="handle-button theme-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-goh-c106="" class="handle-button copy-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-goh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li> reminderAgentManager.<span class="hljs-title function_">publishReminder</span>(targetReminderAgent).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in publishing reminder. '</span>);</li><li>   <span class="hljs-keyword">let</span> <span class="hljs-attr">reminderId</span>: <span class="hljs-built_in">number</span> = res; <span class="hljs-comment">// 发布的提醒ID</span></li><li> }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to publish reminder. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li> })</li></ol></pre></div></div></li>      <li>       <p>根据需要删除提醒任务。</p>       <div _ngcontent-goh-c106="" class="highlight-div"><div _ngcontent-goh-c106="" class="highlight-div-header"><div _ngcontent-goh-c106="" class="highlight-div-header-left"><div _ngcontent-goh-c106="" class="handle-button expand-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-goh-c106="" class="highlight-div-header-right"><div _ngcontent-goh-c106="" class="handle-button ai-button"></div><div _ngcontent-goh-c106="" class="handle-button line-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-goh-c106="" class="handle-button theme-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-goh-c106="" class="handle-button copy-button"><div _ngcontent-goh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-goh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li> <span class="hljs-keyword">let</span> <span class="hljs-attr">reminderId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li> <span class="hljs-comment">// reminderId的值从发布提醒代理成功之后的回调中获得</span></li><li> reminderAgentManager.<span class="hljs-title function_">cancelReminder</span>(reminderId).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in canceling reminder.'</span>);</li><li> }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to cancel reminder. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li> });</li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>