<h1 _ngcontent-max-c119="" class="doc-title ng-star-inserted" title="任务执行类场景方案（配置文件接入方式）"> 任务执行类场景方案（配置文件接入方式） </h1>

<div _ngcontent-max-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section19881111914366">方案概述<i class="anchor-icon anchor-icon-link" anchorid="section19881111914366" tips="复制节点链接"></i></h2><p>开发者需要按照意图定义，进行意图注册并实现意图调用；用户通过对小艺对话进行自然语言输入，小艺理解语义转换成意图调用（含意图参数），执行意图调用实现对应交互体验。</p> <p><span><img height="424.935" originheight="2193" originwidth="2700" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114252.06800182569111251948397494339200:50001231000000:2800:B02A8BE868D081BC2D4329583A251D6F9FE0621D31C4E45EFD8A074ED9118B57.png" title="点击放大" width="523.6875"></span></p> </div> <div class="json" id="section29111929183714"><a name="section29111929183714"></a><a name="section29111929183714"></a><h4>意图声明</h4><p>以“搜索旅游攻略”特性为例，开发者首先要注册“查看旅游攻略”（viewTravelGuides），其他意图见<a href="https://developer.huawei.com/consumer/cn/doc/service/intents-schema-0000001901962713" target="_blank">各垂域意图Schema</a>。</p> <p>开发者需要编辑对应的意图配置insight_intent.json文件实现意图注册。insight_intent.json文件需要放置在module下面的指定目录：src/main/resources/base/profile/insight_intent.json，并且整个工程中只能存在一个insight_intent.json文件。</p> <div _ngcontent-max-c106="" class="highlight-div"><div _ngcontent-max-c106="" class="highlight-div-header"><div _ngcontent-max-c106="" class="highlight-div-header-left"><div _ngcontent-max-c106="" class="handle-button expand-button"><div _ngcontent-max-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-max-c106="" class="highlight-div-header-right"><div _ngcontent-max-c106="" class="handle-button ai-button"></div><div _ngcontent-max-c106="" class="handle-button line-button"><div _ngcontent-max-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-max-c106="" class="handle-button theme-button"><div _ngcontent-max-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-max-c106="" class="handle-button copy-button"><div _ngcontent-max-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-max-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-punctuation">{</span></span></li><li>  <span class=""><span class="hljs-comment">// 应用支持的意图列表</span></span></li><li><span class="">  <span class="hljs-comment">// 必须声明应用支持插件包含的必选意图，应用上架时会进行校验</span></span></li><li>  <span class=""><span class="hljs-attr">"insightIntents"</span></span><span class=""><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></span></li><li><span class="">    <span class="hljs-punctuation">{</span></span></li><li>      <span class=""><span class="hljs-comment">// 意图名称</span></span></li><li><span class="">      <span class="hljs-comment">// 名称应当遵循意图框架规范，当前仅支持预置垂域意图，不允许自定义</span></span></li><li><span class="">      <span class="hljs-comment">// 应用内意图名称唯一，不允许出现相同的名称定义</span></span></li><li>      <span class=""><span class="hljs-attr">"intentName"</span></span><span class=""><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"ViewTravelGuides"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>      <span class=""><span class="hljs-comment">// 意图所属的垂域</span></span></li><li>      <span class=""><span class="hljs-attr">"domain"</span></span><span class=""><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"TravelDomain"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>      <span class=""><span class="hljs-comment">// 意图版本号</span></span></li><li><span class="">      <span class="hljs-comment">// 插件引用意图时会校验该版本号，只有和插件定义的版本号一致才能正常调用</span></span></li><li>      <span class=""><span class="hljs-attr">"intentVersion"</span></span><span class=""><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"1.0.1"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>      <span class=""><span class="hljs-comment">// 意图调用逻辑入口</span></span></li><li>      <span class=""><span class="hljs-attr">"srcEntry"</span></span><span class=""><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"./ets/entryability/InsightIntentExecutorImpl.ets"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>      <span class=""><span class="hljs-attr">"uiAbility"</span></span><span class=""><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></span></li><li>        <span class=""><span class="hljs-comment">// 意图所在ability</span></span></li><li>        <span class=""><span class="hljs-attr">"ability"</span></span><span class=""><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"EntryAbility"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>        <span class=""><span class="hljs-comment">// UIAbility支持前后台两种执行模式</span></span></li><li>        <span class=""><span class="hljs-attr">"executeMode"</span></span><span class=""><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></span></li><li>          <span class=""><span class="hljs-string">"background"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>          <span class=""><span class="hljs-string">"foreground"</span></span></li><li>        <span class=""><span class="hljs-punctuation">]</span></span></li><li><span class="">      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></span></li><li><span class="">      <span class="hljs-attr">"uiExtension"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-comment">//提供意图执行的窗口化界面时需要进行的声明配置</span></span></li><li><span class="">        <span class="hljs-attr">"ability"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"insightIntentUIExtensionAbility"</span>，<span class="hljs-comment">//意图调用API所在ability名称</span></span></li><li><span class="">      <span class="hljs-punctuation">}</span></span></li><li><span class="">    <span class="hljs-punctuation">}</span></span></li><li><span class="">  <span class="hljs-punctuation">]</span></span></li><li><span class=""><span class="hljs-punctuation">}</span></span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1570145013399">端侧前台意图调用<i class="anchor-icon anchor-icon-link" anchorid="section1570145013399" tips="复制节点链接"></i></h2><p>开发者需自己实现InsightIntentExecutor，并在对应回调实现打开落地页（点击推荐卡片跳转的界面，如旅游攻略详情页）的能力，ViewTravelGuides的意图调用字段定义见查看旅游攻略（ViewTravelGuides）。</p> <p>步骤如下：</p> <ol><li>继承InsightIntentExecutor。</li><li>重写对应方法，例如目标拉起前台页面，则可重写onExecuteInUIAbilityForegroundMode方法。</li><li>通过意图名称，识别查看旅游攻略意图（ViewTravelGuides），在对应的方法中传递意图参数（param），并拉起对应落地页（点击推荐卡片跳转的界面，如旅游攻略页面）。</li></ol> <div _ngcontent-max-c106="" class="highlight-div"><div _ngcontent-max-c106="" class="highlight-div-header"><div _ngcontent-max-c106="" class="highlight-div-header-left"><div _ngcontent-max-c106="" class="handle-button expand-button"><div _ngcontent-max-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-max-c106="" class="highlight-div-header-right"><div _ngcontent-max-c106="" class="handle-button ai-button"></div><div _ngcontent-max-c106="" class="handle-button line-button"><div _ngcontent-max-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-max-c106="" class="handle-button theme-button"><div _ngcontent-max-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-max-c106="" class="handle-button copy-button"><div _ngcontent-max-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-max-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">insightIntent</span><span class="">, </span><span class=""><span class="hljs-title class_">InsightIntentExecutor</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.AbilityKit'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-variable language_">window</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.ArkUI'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span><span class="">;</span></li><li><span class=""><span class="hljs-comment">/**</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment"> * 意图调用样例 */</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class=""><span class="hljs-title class_">InsightIntentExecutorImpl</span> </span><span class="hljs-keyword">extends</span> <span class=""><span class="hljs-title class_ inherited__">InsightIntentExecutor</span> </span><span class="">{</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class=""><span class="hljs-variable constant_">VIEW_TRAVEL_GUIDES</span> </span><span class="">= </span><span class=""><span class="hljs-string">'ViewTravelGuides'</span></span><span class="">;</span></li><li>  <span class=""><span class="hljs-comment">/**</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * override 执行前台UIAbility意图</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   *</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> name 意图名称</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> param 意图参数</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> pageLoader 窗口</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * <span class="hljs-doctag">@returns</span> 意图调用结果</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   */</span></span></li><li>  <span class=""><span class="hljs-title function_">onExecuteInUIAbilityForegroundMode</span></span><span class="">(</span><span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span></span><span class="">, </span><span class=""><span class="hljs-attr">param</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Record</span></span><span class="">&lt;</span><span class=""><span class="hljs-built_in">string</span></span><span class="">, </span><span class=""><span class="hljs-title class_">Object</span></span><span class="">&gt;</span><span class="">, </span><span class=""><span class="hljs-attr">pageLoader</span></span><span class="">: </span><span class=""><span class="hljs-variable language_">window</span></span><span class="">.</span><span class=""><span class="hljs-property">WindowStage</span></span><span class="">)</span><span class="">:</span></li><li>    <span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-property">ExecuteResult</span></span><span class="">&gt;</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-comment">// 根据意图名称分发处理逻辑</span></span><span class=""><span class="hljs-comment">。</span></span><span class=""><span class="hljs-comment">接入方可根据实际业务实现页面跳转</span></span></li><li>    <span class="hljs-keyword">switch</span> <span class="">(</span><span class="">name</span><span class="">) </span><span class="">{</span></li><li>      <span class="hljs-keyword">case</span> <span class=""><span class="hljs-title class_">InsightIntentExecutorImpl</span></span><span class="">.</span><span class=""><span class="hljs-property">VIEW_TRAVEL_GUIDES</span></span><span class="">:</span></li><li>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-title function_">viewTravelGuides</span></span><span class="">(</span><span class="">param</span><span class="">, </span><span class="">pageLoader</span><span class="">)</span><span class="">;</span></li><li>      <span class="hljs-attr">default</span><span class="">:</span></li><li>        <span class="hljs-keyword">break</span><span class="">;</span></li><li>    <span class="">}</span></li><li>    <span class="hljs-keyword">return</span> <span class=""><span class="hljs-title class_">Promise</span></span><span class="">.</span><span class=""><span class="hljs-title function_">resolve</span></span><span class="">(</span><span class="">{</span></li><li>      <span class=""><span class="hljs-attr">code</span></span><span class="">: -</span><span class=""><span class="hljs-number">1</span></span><span class="">,</span></li><li>      <span class=""><span class="hljs-attr">result</span></span><span class="">: </span><span class="">{</span></li><li>        <span class=""><span class="hljs-attr">message</span></span><span class="">: </span><span class=""><span class="hljs-string">'unknown intent'</span></span></li><li>      <span class="">}</span></li><li><span class="">    } </span><span class="hljs-keyword">as</span> <span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-property">ExecuteResult</span></span><span class="">)</span></li><li>  <span class="">}</span></li><li>  <span class=""><span class="hljs-comment">/**</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * 实现调用查看旅游攻略功能</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   *</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> param 意图参数</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> pageLoader 窗口</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   */</span></span></li><li>  <span class="hljs-keyword">private</span> <span class=""><span class="hljs-title function_">viewTravelGuides</span></span><span class="">(</span><span class=""><span class="hljs-attr">param</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Record</span></span><span class="">&lt;</span><span class=""><span class="hljs-built_in">string</span></span><span class="">, </span><span class=""><span class="hljs-title class_">Object</span></span><span class="">&gt;</span><span class="">, </span><span class=""><span class="hljs-attr">pageLoader</span></span><span class="">: </span><span class=""><span class="hljs-variable language_">window</span></span><span class="">.</span><span class=""><span class="hljs-property">WindowStage</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-property">ExecuteResult</span></span><span class="">&gt;</span> <span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Promise</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">resolve</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">, </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">reject</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>      <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">TODO 实现意图调用，loadContent的入参为旅游攻略落地页路径，例如：pages/TravelGuidePage</span></span></li><li>      <span class="">pageLoader</span><span class="">.</span><span class=""><span class="hljs-title function_">loadContent</span></span><span class="">(</span><span class=""><span class="hljs-string">'pages/TravelGuidePage'</span></span><span class="">)</span></li><li>        <span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>          <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">entityId</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class="">(</span><span class="">param</span><span class="">.</span><span class=""><span class="hljs-property">items</span> </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Array</span></span><span class="">&lt;</span><span class=""><span class="hljs-built_in">object</span></span><span class="">&gt;</span><span class="">)</span><span class="">?.</span><span class="">[</span><span class=""><span class="hljs-number">0</span></span><span class="">]</span><span class="">?.</span><span class="">[</span><span class=""><span class="hljs-string">'entityId'</span></span><span class="">]</span><span class="">;</span></li><li>          <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">TODO 调用成功的情况，此处可以打印日志</span></span></li><li>          <span class=""><span class="hljs-title function_">resolve</span></span><span class="">(</span><span class="">{</span></li><li>            <span class=""><span class="hljs-attr">code</span></span><span class="">: </span><span class=""><span class="hljs-number">0</span></span><span class="">,</span></li><li>            <span class=""><span class="hljs-attr">result</span></span><span class="">: </span><span class="">{</span></li><li>              <span class=""><span class="hljs-attr">message</span></span><span class="">: </span><span class=""><span class="hljs-string">'Intent execute success'</span></span></li><li>            <span class="">}</span></li><li><span class="">          }</span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span><span class="">)</span></li><li>        <span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>          <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">TODO 调用失败的情况</span></span></li><li>          <span class=""><span class="hljs-title function_">resolve</span></span><span class="">(</span><span class="">{</span></li><li>            <span class=""><span class="hljs-attr">code</span></span><span class="">: -</span><span class=""><span class="hljs-number">1</span></span><span class="">,</span></li><li>            <span class=""><span class="hljs-attr">result</span></span><span class="">: </span><span class="">{</span></li><li>              <span class=""><span class="hljs-attr">message</span></span><span class="">: </span><span class=""><span class="hljs-string">'Intent execute failed'</span></span></li><li>            <span class="">}</span></li><li><span class="">          }</span><span class="">)</span></li><li>        <span class="">}</span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">)</span></li><li>  <span class="">}</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section2029114305413">端侧前台窗口意图调用<i class="anchor-icon anchor-icon-link" anchorid="section2029114305413" tips="复制节点链接"></i></h2><p>开发者需自己实现InsightIntentExecutor，并在对应回调实现窗口页面内容加载的能力。</p> <p>步骤如下：</p> <ol><li>继承InsightIntentExecutor。</li><li>重写对应方法，例如目标拉起前台窗口化页面，则可重写onExecuteInUIExtensionAbility方法。</li><li>通过意图名称，识别打开蓝牙意图（LoadBluetoothCard）调用扩展意图，在对应的方法中传递意图参数（param），并拉起对应窗口化页面（如打开蓝牙窗口化页面）。</li></ol> <div _ngcontent-max-c106="" class="highlight-div"><div _ngcontent-max-c106="" class="highlight-div-header"><div _ngcontent-max-c106="" class="highlight-div-header-left"><div _ngcontent-max-c106="" class="handle-button expand-button"><div _ngcontent-max-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-max-c106="" class="highlight-div-header-right"><div _ngcontent-max-c106="" class="handle-button ai-button"></div><div _ngcontent-max-c106="" class="handle-button line-button"><div _ngcontent-max-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-max-c106="" class="handle-button theme-button"><div _ngcontent-max-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-max-c106="" class="handle-button copy-button"><div _ngcontent-max-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-max-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">insightIntent</span><span class="">, </span><span class=""><span class="hljs-title class_">InsightIntentExecutor</span></span><span class="">, </span><span class=""><span class="hljs-title class_">UIExtensionContentSession</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.AbilityKit'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-variable language_">window</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.ArkUI'</span></span><span class="">;</span></li><li><span class=""><span class="hljs-comment">/**</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment"> * 意图调用样例 */</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class=""><span class="hljs-title class_">IntentExecutorImpl</span> </span><span class="hljs-keyword">extends</span> <span class=""><span class="hljs-title class_ inherited__">InsightIntentExecutor</span> </span><span class="">{</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'IntentExecutorImpl'</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class=""><span class="hljs-attr">LOAD_BLUETOOTH_CARD</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'LoadBluetoothCard'</span></span><span class="">;</span></li><li>  <span class=""><span class="hljs-comment">/**</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * override 执行前台UI扩展意图</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   *</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> name 意图名称</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> param 意图参数</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> pageLoader 窗口</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * <span class="hljs-doctag">@returns</span> 意图调用结果</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   */</span></span></li><li>  <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">onExecuteInUIExtensionAbility</span></span><span class="">(</span><span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span></span><span class="">, </span><span class=""><span class="hljs-attr">param</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Record</span></span><span class="">&lt;</span><span class=""><span class="hljs-built_in">string</span></span><span class="">, </span><span class=""><span class="hljs-title class_">Object</span></span><span class="">&gt;</span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">pageLoader</span></span><span class="">: </span><span class=""><span class="hljs-title class_">UIExtensionContentSession</span></span><span class="">)</span><span class="">:</span></li><li>    <span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-property">ExecuteResult</span></span><span class="">&gt;</span> <span class="">{</span></li><li>    <span class="hljs-variable language_">console</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-title class_">IntentExecutorImpl</span></span><span class="">.</span><span class=""><span class="hljs-property">TAG</span></span><span class="">, </span><span class=""><span class="hljs-string">`onExecuteInUIExtensionAbility`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="hljs-keyword">switch</span> <span class="">(</span><span class="">name</span><span class="">) </span><span class="">{</span></li><li>      <span class="hljs-keyword">case</span> <span class=""><span class="hljs-title class_">IntentExecutorImpl</span></span><span class="">.</span><span class=""><span class="hljs-property">LOAD_BLUETOOTH_CARD</span></span><span class="">:</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-title class_">IntentExecutorImpl</span>.<span class="hljs-property">TAG</span>, <span class="hljs-string">`onExecuteInUIAbilityForegroundMode::ForegroundUiAbility intent`</span>);</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-title function_">openLoadBluetoothCard</span></span><span class="">(</span><span class="">pageLoader</span><span class="">)</span><span class="">;</span></li><li>      <span class="hljs-attr">default</span><span class="">:</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-title class_">IntentExecutorImpl</span>.<span class="hljs-property">TAG</span>, <span class="hljs-string">`onExecuteInUIAbilityForegroundMode::invalid intent`</span>);</li><li>        <span class="hljs-keyword">break</span><span class="">;</span></li><li>    <span class="">}</span></li><li>    <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">result</span></span><span class="">: </span><span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-property">ExecuteResult</span> </span><span class="">= </span><span class="">{</span></li><li>      <span class=""><span class="hljs-attr">code</span></span><span class="">: -</span><span class=""><span class="hljs-number">1</span></span><span class="">,</span></li><li>      <span class=""><span class="hljs-attr">result</span></span><span class="">: </span><span class="">{</span></li><li>        <span class=""><span class="hljs-attr">message</span></span><span class="">: </span><span class=""><span class="hljs-string">'onExecuteInUIExtensionAbility failed'</span></span></li><li>      <span class="">}</span></li><li><span class="">    }</span><span class="">;</span></li><li>    <span class="hljs-keyword">return</span> <span class="">result</span><span class="">;</span></li><li>  <span class="">}</span></li><li>  <span class=""><span class="hljs-comment">/**</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * 打开加载蓝牙卡片意图</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   *</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> pageLoader 意图内容Session对象</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * <span class="hljs-doctag">@returns</span> 执行结果</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   */</span></span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">openLoadBluetoothCard</span></span><span class="">(</span><span class=""><span class="hljs-attr">pageLoader</span></span><span class="">: </span><span class=""><span class="hljs-title class_">UIExtensionContentSession</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-property">ExecuteResult</span></span><span class="">&gt;</span> <span class="">{</span></li><li>    <span class="">pageLoader</span><span class="">.</span><span class=""><span class="hljs-title function_">loadContent</span></span><span class="">(</span><span class=""><span class="hljs-string">'pages/UiExtensionPage'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">result</span></span><span class="">: </span><span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-property">ExecuteResult</span> </span><span class="">= </span><span class="">{</span></li><li>      <span class=""><span class="hljs-attr">code</span></span><span class="">: </span><span class=""><span class="hljs-number">0</span></span><span class="">,</span></li><li>      <span class=""><span class="hljs-attr">result</span></span><span class="">: </span><span class="">{</span></li><li>        <span class=""><span class="hljs-attr">message</span></span><span class="">: </span><span class=""><span class="hljs-string">'intent execute success'</span></span></li><li>      <span class="">}</span></li><li><span class="">    }</span></li><li>    <span class="hljs-keyword">return</span> <span class="">result</span><span class="">;</span></li><li>  <span class="">}</span></li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>