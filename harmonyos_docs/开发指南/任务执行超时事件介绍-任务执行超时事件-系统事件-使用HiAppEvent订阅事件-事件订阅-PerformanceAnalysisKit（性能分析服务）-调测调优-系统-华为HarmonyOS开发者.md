<h1 _ngcontent-gpj-c119="" class="doc-title ng-star-inserted" title="任务执行超时事件介绍"> 任务执行超时事件介绍 </h1>

<div _ngcontent-gpj-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="简介">简介<i class="anchor-icon anchor-icon-link" anchorid="简介" tips="复制节点链接"></i></h2><p>任务执行超时指要监控的业务代码逻辑执行时长超过业务逻辑预期时间。为了更好地定位和分析问题，开发者可以利用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/apptask-timeout-guidelines#任务执行超时检测">任务执行超时检测</a>机制，根据生成的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/apptask-timeout-guidelines#日志规格">日志规格</a>，主动分析任务执行超时的执行情况。</p> </div>  <div class="tiledSection"><h2 id="检测原理">检测原理<i class="anchor-icon anchor-icon-link" anchorid="检测原理" tips="复制节点链接"></i></h2><p>详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/apptask-timeout-guidelines#检测原理">任务执行超时检测原理</a>。</p> </div>  <div class="tiledSection"><h2 id="接口说明">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h2><p>开发者可以通过HiAppEvent提供接口订阅任务执行超时事件“EVENT_APP_HICOLLIE”，系统检测到任务执行超时后，会抓取维测信息通过HiAppEvent将任务执行超时回调给应用进程。</p> <ul><li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-apphicollie-events-arkts">订阅任务执行超时事件（ArkTS）</a></li><li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-apphicollie-events-ndk">订阅任务执行超时事件（C/C++）</a></li></ul> </div>  <div class="tiledSection"><h2 id="事件字段说明">事件字段说明<i class="anchor-icon anchor-icon-link" anchorid="事件字段说明" tips="复制节点链接"></i></h2></div>  <div class="tiledSection"><h3 id="params字段说明" class="firsth2">params字段说明<i class="anchor-icon anchor-icon-link" anchorid="params字段说明" tips="复制节点链接"></i></h3><p>任务执行超时事件信息中params属性的详细描述如下：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.3.1.4.1.1" valign="top" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.4.1.2" valign="top" width="33.33333333333333%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.4.1.3" valign="top" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%">time</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">number</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">事件触发时间，单位为ms。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">foreground</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">boolean</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">应用是否处于前台状态。true表示应用处于前台；false表示应用处于后台。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">bundle_version</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">string</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">应用版本。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">process_name</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">string</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">应用的进程名称。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">pid</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">number</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">应用的进程ID。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">uid</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">number</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">应用的用户ID。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">uuid</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">string</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">根据故障信息生成的故障特征码，用于标识特征相同的崩溃故障。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">exception</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">object</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">异常信息，详见exception属性。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">hilog</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">string[]</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">日志信息。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">peer_binder</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">string[]</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">binder调用信息，binder调用链及相关抓栈信息。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">memory</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">object</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">内存信息，详见memory属性。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">external_log</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">string[]</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">故障日志文件路径。<strong>为避免目录空间超限（限制参考log_over_limit），导致新生成的日志文件写入失败，日志文件处理完后请及时删除。</strong></td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">log_over_limit</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">boolean</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">生成的故障日志文件与已存在的日志文件总大小是否超过5M上限。true表示超过上限，日志写入失败；false表示未超过上限。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="exception字段说明">exception字段说明<i class="anchor-icon anchor-icon-link" anchorid="exception字段说明" tips="复制节点链接"></i></h3><p>exception属性的详细描述如下：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.3.1.4.1.1" valign="top" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.4.1.2" valign="top" width="33.33333333333333%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.4.1.3" valign="top" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%">name</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">string</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">异常类型</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">message</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">string</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">异常原因</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="memory字段说明">memory字段说明<i class="anchor-icon anchor-icon-link" anchorid="memory字段说明" tips="复制节点链接"></i></h3><p>memory属性的详细描述如下：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.3.1.4.1.1" valign="top" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.4.1.2" valign="top" width="33.33333333333333%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.4.1.3" valign="top" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%">rss</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">number</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">进程实际占用内存大小，单位KB。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">vss</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">number</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">进程向系统申请的虚拟内存大小，单位KB。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">pss</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">number</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">进程实际使用的物理内存大小，单位KB。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">sys_free_mem</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">number</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">空闲内存大小，单位KB。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">sys_avail_mem</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">number</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">可用内存大小，单位KB。</td> </tr> <tr><td class="cellrowborder" valign="top" width="33.33333333333333%">sys_total_mem</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">number</td> <td class="cellrowborder" valign="top" width="33.33333333333333%">总内存大小，单位KB。</td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>