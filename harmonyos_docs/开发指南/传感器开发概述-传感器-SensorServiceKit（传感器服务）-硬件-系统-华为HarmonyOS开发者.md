<h1 _ngcontent-spw-c119="" class="doc-title ng-star-inserted" title="传感器开发概述"> 传感器开发概述 </h1>

<div _ngcontent-spw-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="传感器类型">传感器类型<i class="anchor-icon anchor-icon-link" anchorid="传感器类型" tips="复制节点链接"></i></h2>          <p>系统传感器是应用访问底层硬件传感器的一种设备抽象概念。开发者根据传感器提供的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-sensor" target="_blank">Sensor接口</a>，可以查询设备上的传感器，订阅传感器数据，并根据传感器数据定制相应的算法开发各类应用，比如指南针、运动健康、游戏等。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.1.3.1.5.1.1" valign="top" width="25%">传感器类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.1.3.1.5.1.2" valign="top" width="25%">描述</th>         <th align="left" class="cellrowborder" id="mcps1.3.1.3.1.5.1.3" valign="top" width="25%">说明</th>         <th align="left" class="cellrowborder" id="mcps1.3.1.3.1.5.1.4" valign="top" width="25%">主要用途</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="25%">ACCELEROMETER</td>         <td class="cellrowborder" valign="top" width="25%">加速度传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量三个物理轴（x、y 和 z）上，施加在设备上的加速度（包括重力加速度），单位 : m/s²。</td>         <td class="cellrowborder" valign="top" width="25%">检测运动状态。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">ACCELEROMETER_UNCALIBRATED</td>         <td class="cellrowborder" valign="top" width="25%">未校准加速度传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量三个物理轴（x、y 和 z）上，施加在设备上的未校准的加速度（包括重力加速度），单位 : m/s²。</td>         <td class="cellrowborder" valign="top" width="25%">检测加速度偏差估值。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">LINEAR_ACCELEROMETER</td>         <td class="cellrowborder" valign="top" width="25%">线性加速度传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量三个物理轴（x、y 和 z）上，施加在设备上的线性加速度（不包括重力加速度），单位 : m/s²。</td>         <td class="cellrowborder" valign="top" width="25%">检测每个单轴方向上的线性加速度。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">GRAVITY</td>         <td class="cellrowborder" valign="top" width="25%">重力传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量三个物理轴（x、y 和 z）上，施加在设备上的重力加速度，单位 : m/s²。</td>         <td class="cellrowborder" valign="top" width="25%">测量重力大小。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">GYROSCOPE</td>         <td class="cellrowborder" valign="top" width="25%">陀螺仪传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量三个物理轴（x、y 和 z）上，设备的旋转角速度，单位 : rad/s。</td>         <td class="cellrowborder" valign="top" width="25%">测量旋转的角速度。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">GYROSCOPE_UNCALIBRATED</td>         <td class="cellrowborder" valign="top" width="25%">未校准陀螺仪传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量三个物理轴（x、y 和 z）上，设备的未校准旋转角速度，单位 : rad/s。</td>         <td class="cellrowborder" valign="top" width="25%">测量旋转的角速度及偏差估值。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">SIGNIFICANT_MOTION</td>         <td class="cellrowborder" valign="top" width="25%">大幅度动作传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量三个物理轴（x、y 和 z）上，设备是否存在大幅度运动；如果取值为1则代表存在大幅度运动，取值为0则代表没有大幅度运动。</td>         <td class="cellrowborder" valign="top" width="25%">用于检测设备是否存在大幅度运动。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">PEDOMETER_DETECTION</td>         <td class="cellrowborder" valign="top" width="25%">计步器检测传感器</td>         <td class="cellrowborder" valign="top" width="25%">检测用户的计步动作；如果取值为1则代表用户产生了计步行走的动作；取值为0则代表用户没有发生运动。</td>         <td class="cellrowborder" valign="top" width="25%">用于检测用户是否有计步的动作。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">PEDOMETER</td>         <td class="cellrowborder" valign="top" width="25%">计步器传感器</td>         <td class="cellrowborder" valign="top" width="25%">统计用户的行走步数。</td>         <td class="cellrowborder" valign="top" width="25%">用于提供用户行走的步数数据。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">AMBIENT_TEMPERATURE</td>         <td class="cellrowborder" valign="top" width="25%">环境温度传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量环境温度，单位 : 摄氏度 (°C)。</td>         <td class="cellrowborder" valign="top" width="25%">测量环境温度。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">MAGNETIC_FIELD</td>         <td class="cellrowborder" valign="top" width="25%">磁场传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量三个物理轴向（x、y、z）上，环境地磁场，单位 : μT。</td>         <td class="cellrowborder" valign="top" width="25%">创建指南针。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">MAGNETIC_FIELD_UNCALIBRATED</td>         <td class="cellrowborder" valign="top" width="25%">未校准磁场传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量三个物理轴向（x、y、z）上，未校准环境地磁场，单位 : μT。</td>         <td class="cellrowborder" valign="top" width="25%">测量地磁偏差估值。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">HUMIDITY</td>         <td class="cellrowborder" valign="top" width="25%">湿度传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量环境的相对湿度，以百分比 (%) 表示。</td>         <td class="cellrowborder" valign="top" width="25%">监测露点、绝对湿度和相对湿度。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">BAROMETER</td>         <td class="cellrowborder" valign="top" width="25%">气压计传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量环境气压，单位 : hPa 或 mbar。</td>         <td class="cellrowborder" valign="top" width="25%">测量环境气压。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">ORIENTATION</td>         <td class="cellrowborder" valign="top" width="25%">方向传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量设备围绕所有三个物理轴（z、x、y）旋转的角度值，单位：rad。</td>         <td class="cellrowborder" valign="top" width="25%">用于测量屏幕旋转的3个角度值。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">ROTATION_VECTOR</td>         <td class="cellrowborder" valign="top" width="25%">旋转矢量传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量设备旋转矢量，复合传感器：由加速度传感器、磁场传感器、陀螺仪传感器合成。</td>         <td class="cellrowborder" valign="top" width="25%">检测设备相对于东北天坐标系的方向。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">PROXIMITY</td>         <td class="cellrowborder" valign="top" width="25%">接近光传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量可见物体相对于设备显示屏的接近或远离状态。</td>         <td class="cellrowborder" valign="top" width="25%">通话中设备相对人的位置。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">AMBIENT_LIGHT</td>         <td class="cellrowborder" valign="top" width="25%">环境光传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量设备周围光线强度，单位：lux。</td>         <td class="cellrowborder" valign="top" width="25%">自动调节屏幕亮度，检测屏幕上方是否有遮挡。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">HEART_RATE</td>         <td class="cellrowborder" valign="top" width="25%">心率传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量用户的心率数值。</td>         <td class="cellrowborder" valign="top" width="25%">用于提供用户的心率健康数据。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">WEAR_DETECTION</td>         <td class="cellrowborder" valign="top" width="25%">佩戴检测传感器</td>         <td class="cellrowborder" valign="top" width="25%">检测用户是否佩戴。</td>         <td class="cellrowborder" valign="top" width="25%">用于检测用户是否佩戴智能穿戴。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">HALL</td>         <td class="cellrowborder" valign="top" width="25%">霍尔传感器</td>         <td class="cellrowborder" valign="top" width="25%">测量设备周围是否存在磁力吸引。</td>         <td class="cellrowborder" valign="top" width="25%">设备的皮套模式。</td>        </tr>             </tbody></table></div>     </div>     <p>方向类传感器坐标系和设备的器件贴片方向相关，基本是基于产品定义屏幕自然方向（不同型号的设备屏幕自然方向可能会有所差异）。</p>     <p>以常见的直板手机为例，将手机竖直地拿在面前，屏幕正对着使用者：</p>     <p>X轴：沿着屏幕的短边方向，从左到右；</p>     <p>Y轴：沿着屏幕的长边方向，从下到上；</p>     <p>Z轴：垂直于屏幕，从屏幕向外指向用户的方向。</p>     <p>使用者可以结合设备自然方向及当前的屏幕方向，根据自身的业务场景来决定如何解释和使用这些原始数据。例如，一个体感交互的赛车游戏需要通过倾斜设备来控制方向。无论玩家是竖着还是横着玩，传感器提供的X、Y轴数据始终是相对于屏幕自然方向的数据。开发者需要根据当前的屏幕方向/应用界面显示需求，决定是使用X轴的数据还是Y轴的数据来控制赛车的左右转向，从而确保用户体验的一致性。</p>     <p>对于方向传感器，建议先调用DMS相关接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-display#display" target="_blank">display</a>获取屏幕方向，再进行开发操作。</p>    </div>    <div class="tiledSection">     <h2 id="运作机制">运作机制<i class="anchor-icon anchor-icon-link" anchorid="运作机制" tips="复制节点链接"></i></h2>          <p>传感器包含如下四个模块：Sensor API、Sensor Framework、Sensor Service和HDF层。</p>     <p><strong>图1</strong> 传感器</p>     <p><span><img originheight="702" originwidth="509" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115034.00749045364260998864015969966000:50001231000000:2800:D756A92EF3F90B69B041E19435C84A19546F9561E6A7E20F185E26D0F0845CBD.png" width="509" height="702"></span></p>     <ul>      <li>       <p>Sensor API：提供传感器的基础API，主要包含查询传感器列表，订阅/取消传感器的数据、执行控制命令等，简化应用开发。</p></li>      <li>       <p>Sensor Framework：主要实现传感器的订阅管理，数据通道的创建、销毁、订阅与取消订阅，实现与SensorService的通信。</p></li>      <li>       <p>Sensor Service：主要实现HD_IDL层数据接收、解析、分发，前后台的策略管控，对该设备Sensor的管理，Sensor权限管控等。</p></li>      <li>       <p>HDF层：对不同的FIFO、频率进行策略选择，以及适配不同设备。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="约束与限制">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="约束与限制" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>针对下面所列传感器，开发者需要请求相应的权限，才能获取到相应传感器的数据。</p>       <div class="tablenoborder">        <div class="tbBox"><table class="layoutFixed idpTab">         <thead>          <tr>           <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.2.1.5.1.1" valign="top" width="25%">传感器</th>           <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.2.1.5.1.2" valign="top" width="25%">权限名</th>           <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.2.1.5.1.3" valign="top" width="25%">敏感级别</th>           <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.2.1.5.1.4" valign="top" width="25%">权限描述</th>          </tr>         </thead>                   <tbody><tr>           <td class="cellrowborder" valign="top" width="25%">加速度传感器，加速度未校准传感器，线性加速度传感器</td>           <td class="cellrowborder" valign="top" width="25%">ohos.permission.ACCELEROMETER</td>           <td class="cellrowborder" valign="top" width="25%">system_grant</td>           <td class="cellrowborder" valign="top" width="25%">允许应用读取加速度传感器的数据，包括：加速度传感器、加速度未校准传感器、线性加速度传感器。</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="25%">陀螺仪传感器，陀螺仪未校准传感器</td>           <td class="cellrowborder" valign="top" width="25%">ohos.permission.GYROSCOPE</td>           <td class="cellrowborder" valign="top" width="25%">system_grant</td>           <td class="cellrowborder" valign="top" width="25%">允许应用读取陀螺仪传感器的数据，包括：陀螺仪传感器、陀螺仪未校准传感器。</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="25%">计步器</td>           <td class="cellrowborder" valign="top" width="25%">ohos.permission.ACTIVITY_MOTION</td>           <td class="cellrowborder" valign="top" width="25%">user_grant</td>           <td class="cellrowborder" valign="top" width="25%">该权限允许应用读取用户当前的运动状态。例如：判断用户是否处于运动中、记录用户行走步数。</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="25%">心率计</td>           <td class="cellrowborder" valign="top" width="25%">ohos.permission.READ_HEALTH_DATA</td>           <td class="cellrowborder" valign="top" width="25%">user_grant</td>           <td class="cellrowborder" valign="top" width="25%">该权限允许应用读取用户的健康数据，如：心率数据等。</td>          </tr>                 </tbody></table></div>       </div></li>      <li>       <p>传感器数据订阅和取消订阅接口成对调用，当不再需要订阅传感器数据时，开发者需要调用取消订阅接口停止数据上报。</p></li>     </ol>    </div>   </div>   <div></div></div>