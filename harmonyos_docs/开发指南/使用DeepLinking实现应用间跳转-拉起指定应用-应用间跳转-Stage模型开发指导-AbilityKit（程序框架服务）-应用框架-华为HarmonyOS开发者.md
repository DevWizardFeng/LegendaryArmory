<h1 _ngcontent-wnn-c119="" class="doc-title ng-star-inserted" title="使用Deep Linking实现应用间跳转"> 使用Deep Linking实现应用间跳转 </h1>

<div _ngcontent-wnn-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>采用Deep Linking进行跳转时，系统会根据接口中传入的uri信息，在本地已安装的应用中寻找到符合条件的应用并进行拉起。当匹配到多个应用时，会拉起应用选择框。</p>    <div class="tiledSection">     <h2 id="实现原理">实现原理<i class="anchor-icon anchor-icon-link" anchorid="实现原理" tips="复制节点链接"></i></h2>          <p>Deep Linking基于隐式Want匹配机制中的uri匹配来查询、拉起目标应用。隐式Want的uri匹配规则详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/explicit-implicit-want-mappings#uri匹配规则">uri匹配规则</a>。</p>    </div>    <div class="tiledSection">     <h2 id="目标应用操作指导">目标应用操作指导<i class="anchor-icon anchor-icon-link" anchorid="目标应用操作指导" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="配置modulejson5文件" class="firsth2">配置module.json5文件<i class="anchor-icon anchor-icon-link" anchorid="配置modulejson5文件" tips="复制节点链接"></i></h3>          <p>为了能够支持被其他应用访问，目标应用需要在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file">module.json5配置文件</a>中配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#skills标签">skills标签</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>skills标签下默认包含一个skill对象，用于标识应用入口。应用跳转链接不能在该skill对象中配置，需要创建独立的skill对象。如果存在多个跳转场景，需要在skills标签下创建不同的skill对象，否则会导致配置无法生效。</p>       <p>Deep Linking中的scheme取值不以"ohos"开头。通常不为"https"、"http"、"file"等已被系统应用使用的值，否则会匹配到对应的系统应用。</p>      </div></div></div>     <p>配置示例如下：</p>     <div _ngcontent-wnn-c106="" class="highlight-div"><div _ngcontent-wnn-c106="" class="highlight-div-header"><div _ngcontent-wnn-c106="" class="highlight-div-header-left"><div _ngcontent-wnn-c106="" class="handle-button expand-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wnn-c106="" class="highlight-div-header-right"><div _ngcontent-wnn-c106="" class="handle-button ai-button"></div><div _ngcontent-wnn-c106="" class="handle-button line-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wnn-c106="" class="handle-button theme-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wnn-c106="" class="handle-button copy-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wnn-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-attr">"abilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-attr">"skills"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>          <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"entities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>              <span class="hljs-string">"entity.system.home"</span></li><li>            <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"actions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>              <span class="hljs-string">"ohos.want.action.home"</span></li><li>            <span class="hljs-punctuation">]</span></li><li>          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>          <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"actions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>              <span class="hljs-comment">// actions不能为空，actions为空会造成目标方匹配失败。</span></li><li>              <span class="hljs-string">"ohos.want.action.viewData"</span></li><li>            <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"uris"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>              <span class="hljs-punctuation">{</span></li><li>                <span class="hljs-comment">// scheme必选，可以自定义，以link为例，需要替换为实际的scheme</span></li><li>                <span class="hljs-attr">"scheme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"link"</span><span class="hljs-punctuation">,</span></li><li>                <span class="hljs-comment">// host必选，配置待匹配的域名</span></li><li>                <span class="hljs-attr">"host"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"www.example.com"</span></li><li>              <span class="hljs-punctuation">}</span></li><li>            <span class="hljs-punctuation">]</span></li><li>          <span class="hljs-punctuation">}</span> <span class="hljs-comment">// 新增一个skill对象，用于跳转场景。如果存在多个跳转场景，需配置多个skill对象。</span></li><li>        <span class="hljs-punctuation">]</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="获取并解析拉起方传入的应用链接">获取并解析拉起方传入的应用链接<i class="anchor-icon anchor-icon-link" anchorid="获取并解析拉起方传入的应用链接" tips="复制节点链接"></i></h3>          <p>在目标应用的UIAbility的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability#oncreate" target="_blank">onCreate()</a>或者<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability#onnewwant" target="_blank">onNewWant()</a>生命周期回调中，获取、解析拉起方传入的应用链接。</p>     <div _ngcontent-wnn-c106="" class="highlight-div"><div _ngcontent-wnn-c106="" class="highlight-div-header"><div _ngcontent-wnn-c106="" class="highlight-div-header-left"><div _ngcontent-wnn-c106="" class="handle-button expand-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wnn-c106="" class="highlight-div-header-right"><div _ngcontent-wnn-c106="" class="handle-button ai-button"></div><div _ngcontent-wnn-c106="" class="handle-button line-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wnn-c106="" class="handle-button theme-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wnn-c106="" class="handle-button copy-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wnn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 以EntryAbility.ets为例</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { url } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// 从want中获取传入的链接信息。</span></li><li>    <span class="hljs-comment">// 如传入的url为：link://www.example.com/programs?action=showall</span></li><li>    <span class="hljs-keyword">let</span> uri = want?.<span class="hljs-property">uri</span>;</li><li>    <span class="hljs-keyword">if</span> (uri) {</li><li>      <span class="hljs-comment">// 从链接中解析query参数，拿到参数后，开发者可根据自己的业务需求进行后续的处理。</span></li><li>      <span class="hljs-keyword">let</span> urlObject = url.<span class="hljs-property">URL</span>.<span class="hljs-title function_">parseURL</span>(want?.<span class="hljs-property">uri</span>);</li><li>      <span class="hljs-keyword">let</span> action = urlObject.<span class="hljs-property">params</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'action'</span>);</li><li>      <span class="hljs-comment">// 例如，当action为showall时，展示所有的节目。</span></li><li>      <span class="hljs-keyword">if</span> (action === <span class="hljs-string">"showall"</span>) {</li><li>         <span class="hljs-comment">// ...</span></li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="拉起方应用实现应用跳转">拉起方应用实现应用跳转<i class="anchor-icon anchor-icon-link" anchorid="拉起方应用实现应用跳转" tips="复制节点链接"></i></h2>          <p>下面通过三个案例，分别介绍如何使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#openlink12" target="_blank">openLink()</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#startability" target="_blank">startAbility()</a>接口实现应用跳转，以及如何在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web" target="_blank">Web组件</a>中实现应用跳转。</p>    </div>    <div class="tiledSection">     <h3 id="使用openlink实现应用跳转" class="firsth2">使用openLink实现应用跳转<i class="anchor-icon anchor-icon-link" anchorid="使用openlink实现应用跳转" tips="复制节点链接"></i></h3>          <p>在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#openlink12" target="_blank">openLink</a>接口的link字段中传入目标应用的URL信息，并将options字段中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-openlinkoptions#openlinkoptions" target="_blank">appLinkingOnly</a>配置为false。</p>     <p>示例代码如下：</p>     <div _ngcontent-wnn-c106="" class="highlight-div"><div _ngcontent-wnn-c106="" class="highlight-div-header"><div _ngcontent-wnn-c106="" class="highlight-div-header-left"><div _ngcontent-wnn-c106="" class="handle-button expand-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wnn-c106="" class="highlight-div-header-right"><div _ngcontent-wnn-c106="" class="handle-button ai-button"></div><div _ngcontent-wnn-c106="" class="handle-button line-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wnn-c106="" class="handle-button theme-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wnn-c106="" class="handle-button copy-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wnn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common, <span class="hljs-title class_">OpenLinkOptions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'[UIAbilityComponentsOpenLink]'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">DOMAIN_NUMBER</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0xFF00</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">'start link'</span>, { <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>, <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span> })</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'87%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'5%'</span>)</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-string">'12vp'</span> })</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">link</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"link://www.example.com"</span>;</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">openLinkOptions</span>: <span class="hljs-title class_">OpenLinkOptions</span> = {</li><li>          <span class="hljs-attr">appLinkingOnly</span>: <span class="hljs-literal">false</span></li><li>        };</li><li>
</li><li>        <span class="hljs-keyword">try</span> {</li><li>          context.<span class="hljs-title function_">openLink</span>(link, openLinkOptions)</li><li>            .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'openLink success.'</span>);</li><li>            }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>              hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`openLink failed. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            });</li><li>        } <span class="hljs-keyword">catch</span> (paramError) {</li><li>          hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`Failed to start link. Code is <span class="hljs-subst">${paramError.code}</span>, message is <span class="hljs-subst">${paramError.message}</span>`</span>);</li><li>        }</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="使用startability实现应用跳转">使用startAbility实现应用跳转<i class="anchor-icon anchor-icon-link" anchorid="使用startability实现应用跳转" tips="复制节点链接"></i></h3>          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#startability" target="_blank">startAbility</a>接口是将应用链接放入want中，通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/explicit-implicit-want-mappings#隐式want匹配原理">隐式want匹配</a>的方法触发应用跳转。</p>     <p>示例代码如下：</p>     <div _ngcontent-wnn-c106="" class="highlight-div"><div _ngcontent-wnn-c106="" class="highlight-div-header"><div _ngcontent-wnn-c106="" class="highlight-div-header-left"><div _ngcontent-wnn-c106="" class="handle-button expand-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wnn-c106="" class="highlight-div-header-right"><div _ngcontent-wnn-c106="" class="handle-button ai-button"></div><div _ngcontent-wnn-c106="" class="handle-button line-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wnn-c106="" class="handle-button theme-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wnn-c106="" class="handle-button copy-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wnn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'[UIAbilityComponentsOpenLink]'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">DOMAIN_NUMBER</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0xFF00</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">'start ability'</span>, { <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>, <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span> })</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'87%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'5%'</span>)</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-string">'12vp'</span> })</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span> = {</li><li>          <span class="hljs-attr">uri</span>: <span class="hljs-string">"link://www.example.com"</span></li><li>        };</li><li>
</li><li>        <span class="hljs-keyword">try</span> {</li><li>          context.<span class="hljs-title function_">startAbility</span>(want).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'startAbility success.'</span>);</li><li>          }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`startAbility failed. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          });</li><li>        } <span class="hljs-keyword">catch</span> (paramError) {</li><li>          hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`Failed to start ability. Code is <span class="hljs-subst">${paramError.code}</span>, message is <span class="hljs-subst">${paramError.message}</span>`</span>);</li><li>        }</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="使用web组件实现应用跳转">使用Web组件实现应用跳转<i class="anchor-icon anchor-icon-link" anchorid="使用web组件实现应用跳转" tips="复制节点链接"></i></h3>          <p>Web组件可以在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onloadintercept10" target="_blank">onLoadIntercept</a>的回调函数中实现应用跳转。</p>     <p>示例代码如下：</p>     <div _ngcontent-wnn-c106="" class="highlight-div"><div _ngcontent-wnn-c106="" class="highlight-div-header"><div _ngcontent-wnn-c106="" class="highlight-div-header-left"><div _ngcontent-wnn-c106="" class="handle-button expand-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wnn-c106="" class="highlight-div-header-right"><div _ngcontent-wnn-c106="" class="handle-button ai-button"></div><div _ngcontent-wnn-c106="" class="handle-button line-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wnn-c106="" class="handle-button theme-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wnn-c106="" class="handle-button copy-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wnn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// index.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onLoadIntercept</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">const</span> <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span> = event.<span class="hljs-property">data</span>.<span class="hljs-title function_">getRequestUrl</span>();</li><li>          <span class="hljs-keyword">if</span> (url === <span class="hljs-string">'link://www.example.com'</span>) {</li><li>            (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>).<span class="hljs-title function_">openLink</span>(url)</li><li>              .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'openLink success.'</span>);</li><li>              }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`openLink failed, err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>.`</span>);</li><li>              });</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>          }</li><li>          <span class="hljs-comment">// 返回true表示阻止此次加载，否则允许此次加载</span></li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>前端页面代码：</p>     <div _ngcontent-wnn-c106="" class="highlight-div"><div _ngcontent-wnn-c106="" class="highlight-div-header"><div _ngcontent-wnn-c106="" class="highlight-div-header-left"><div _ngcontent-wnn-c106="" class="handle-button expand-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wnn-c106="" class="highlight-div-header-right"><div _ngcontent-wnn-c106="" class="handle-button ai-button"></div><div _ngcontent-wnn-c106="" class="handle-button line-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wnn-c106="" class="handle-button theme-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wnn-c106="" class="handle-button copy-button"><div _ngcontent-wnn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wnn-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li>// index.html</li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></li><li><span class="hljs-comment">&lt;!--方式一、通过绑定事件window.open方法实现跳转--&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"doOpenLink"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"doOpenLink()"</span>&gt;</span>跳转其他应用一<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li><span class="hljs-comment">&lt;!--方式二、通过超链接实现跳转--&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"link://www.example.com"</span>&gt;</span>跳转其他应用二<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">doOpenLink</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(<span class="hljs-string">"link://www.example.com"</span>)</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li></ol></pre></div></div>    </div>   </div>   <div></div></div>