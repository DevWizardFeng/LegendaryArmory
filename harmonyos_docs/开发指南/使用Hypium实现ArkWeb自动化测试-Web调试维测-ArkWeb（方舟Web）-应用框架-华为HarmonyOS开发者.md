<h1 _ngcontent-pkk-c119="" class="doc-title ng-star-inserted" title="使用Hypium实现ArkWeb自动化测试"> 使用Hypium实现ArkWeb自动化测试 </h1>

<div _ngcontent-pkk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述">概述<i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><p>ArkWeb页面支持使用Hypium集成Selenium框架、ChromeDriver驱动进行UI自动化测试。</p> </div>  <div class="tiledSection"><h2 id="环境配置">环境配置<i class="anchor-icon anchor-icon-link" anchorid="环境配置" tips="复制节点链接"></i></h2><p>1.Hypium环境搭建</p> <p>参考：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hypium-python-guidelines" target="_blank">应用UI测试（基于Python）</a>。</p> <p>2.安装Selenium</p> <p>Selenium主要用于Web应用程序的自动化测试，核心功能是模拟用户在浏览器中的操作，例如点击按钮、输入文本、导航页面等。</p> <div _ngcontent-pkk-c106="" class="highlight-div"><div _ngcontent-pkk-c106="" class="highlight-div-header"><div _ngcontent-pkk-c106="" class="highlight-div-header-left"><div _ngcontent-pkk-c106="" class="handle-button expand-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pkk-c106="" class="highlight-div-header-right"><div _ngcontent-pkk-c106="" class="handle-button ai-button"></div><div _ngcontent-pkk-c106="" class="handle-button line-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pkk-c106="" class="handle-button theme-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pkk-c106="" class="handle-button copy-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pkk-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>pip install selenium</li></ol></pre></div></div> <p>3.集成ChromeDriver驱动</p> <p>ChromeDriver充当了Selenium WebDriver和Web页面之间的中介。通过Selenium发送命令时，ChromeDriver会将这些命令转换为Web内核能够理解的协议，并将响应返回给Selenium。ArkWeb基于谷歌Chromium内核开发，系统版本与Chromium版本的对应关系参考：ArkWeb简介<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-component-overview#约束与限制" target="_blank">约束与限制</a>。访问ChromeDriver官方网站<a href="https://developer.chrome.google.cn/docs/chromedriver/downloads?hl=zh-cn" target="_blank">ChromeDriver下载|Chrome for Developers</a>，获取与Chromium版本对应的ChromeDriver。</p> <p>首先将ChromeDriver集成到测试工程的resource文件夹下，然后调用WebDriverSetupTool类中的set_chromedriver_exe_path方法指定chromedriver文件的存放路径或者调用set_chromedriver_exe_search_path方法指定chromedriver所在文件夹的路径。</p> <div _ngcontent-pkk-c106="" class="highlight-div"><div _ngcontent-pkk-c106="" class="highlight-div-header"><div _ngcontent-pkk-c106="" class="highlight-div-header-left"><div _ngcontent-pkk-c106="" class="handle-button expand-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pkk-c106="" class="highlight-div-header-right"><div _ngcontent-pkk-c106="" class="handle-button ai-button"></div><div _ngcontent-pkk-c106="" class="handle-button line-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pkk-c106="" class="handle-button theme-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pkk-c106="" class="handle-button copy-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pkk-c106="" class="highlight-scroll-div"><pre class="python prettyprint linenums hljs language-python" hw-language="python" data-highlighted="yes"><ol class="linenums"><li>self.web_tools = WebDriverSetupTool(self.driver)</li><li><span class="hljs-comment"># 使用set_chromedriver_exe_path指定chromedriver路径，需指定到对应版本的可执行chromedriver文件</span></li><li>self.web_tools.set_chromedriver_exe_path(<span class="hljs-string">r"D:\WebAutoTest\resource\web_debug_tools\chromedriver_132\chromedriver.exe"</span>)</li></ol></pre></div></div> <div _ngcontent-pkk-c106="" class="highlight-div"><div _ngcontent-pkk-c106="" class="highlight-div-header"><div _ngcontent-pkk-c106="" class="highlight-div-header-left"><div _ngcontent-pkk-c106="" class="handle-button expand-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pkk-c106="" class="highlight-div-header-right"><div _ngcontent-pkk-c106="" class="handle-button ai-button"></div><div _ngcontent-pkk-c106="" class="handle-button line-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pkk-c106="" class="handle-button theme-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pkk-c106="" class="handle-button copy-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pkk-c106="" class="highlight-scroll-div"><pre class="python prettyprint linenums hljs language-python" hw-language="python" data-highlighted="yes"><ol class="linenums"><li>self.web_tools = WebDriverSetupTool(self.driver)</li><li><span class="hljs-comment"># 使用set_chromedriver_ext_search_path方法指定chromedriver所在文件夹，Hypium在指定的文件夹寻找对应版本的chromedriver文件</span></li><li>self.web_tools.set_chromedriver_exe_search_path(<span class="hljs-string">r"D:\WebAutoTest\resource\web_debug_tools"</span>)</li></ol></pre></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li><p>使用set_chromedriver_exe_search_path方法指定chromedriver所在文件夹的路径时，下层文件夹命名规则为chromedriver_版本号，参考下图。</p> <p><span><img originheight="342" originwidth="596" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114739.59218758356848463723573794401806:50001231000000:2800:C8F0272C1037CC26068CFF4974F3B54EF7F7B600E826C649A862611A8949A620.png" width="596" height="342"></span></p> </li></ul>  </div></div></div> </div>  <div class="tiledSection"><h2 id="示例代码">示例代码<i class="anchor-icon anchor-icon-link" anchorid="示例代码" tips="复制节点链接"></i></h2><p>参考以下代码完成ArkWeb页面的自动化测试，先初始化Selenium的webdriver，后通过webdriver与Web页面交互的API，实现导航页面、查找页面元素操作。</p> <p>webdriver更多使用方法参考Selenium官方文档：<a href="https://www.selenium.dev/zh-cn/documentation/webdriver/drivers/" target="_blank">驱动会话 | Selenium</a>。</p> <div _ngcontent-pkk-c106="" class="highlight-div"><div _ngcontent-pkk-c106="" class="highlight-div-header"><div _ngcontent-pkk-c106="" class="highlight-div-header-left"><div _ngcontent-pkk-c106="" class="handle-button expand-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pkk-c106="" class="highlight-div-header-right"><div _ngcontent-pkk-c106="" class="handle-button ai-button"></div><div _ngcontent-pkk-c106="" class="handle-button line-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pkk-c106="" class="handle-button theme-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pkk-c106="" class="handle-button copy-button"><div _ngcontent-pkk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pkk-c106="" class="highlight-scroll-div"><pre class="python prettyprint linenums hljs language-python" hw-language="python" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">from</span> devicetest.core.test_case <span class="hljs-keyword">import</span> TestCase, Step, CheckPoint</li><li><span class="hljs-keyword">from</span> hypium <span class="hljs-keyword">import</span> UiDriver, BY</li><li><span class="hljs-keyword">from</span> hypium.webdriver.webdriver_setup_tool <span class="hljs-keyword">import</span> WebDriverSetupTool</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">ArkWeb_AutoTests</span>(<span class="hljs-title class_ inherited__">TestCase</span>):</li><li>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, configs</span>):</li><li>        self.TAG = self.__class__.__name__</li><li>        TestCase.__init__(self, self.TAG, configs)</li><li>        self.driver = UiDriver(self.device1)</li><li>        self.driver_width, self.driver_height = self.driver.get_display_size()</li><li>        self.web_tools = WebDriverSetupTool(self.driver)</li><li>        <span class="hljs-comment"># 设置chromedriver存放路径</span></li><li>        self.web_tools.set_chromedriver_exe_search_path(<span class="hljs-string">r"D:\WebAutoTest\resource\web_debug_tools"</span>)</li><li>        <span class="hljs-comment"># 使用应用包名连接到指定应用的webview页面</span></li><li>        self.web_tools.connect(<span class="hljs-string">"com.huawei.hmos.browser"</span>)</li><li>        <span class="hljs-comment"># 初始化Selenium的webdriver</span></li><li>        self.web_driver = self.web_tools.driver</li><li>
</li><li>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params">self</span>):</li><li>        <span class="hljs-keyword">pass</span></li><li>        </li><li>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">process</span>(<span class="hljs-params">self</span>):</li><li>        <span class="hljs-comment"># 导航页面：使用Selenium的webdriver访问https://developer.huawei.com/网站</span></li><li>        self.web_driver.get(<span class="hljs-string">"https://developer.huawei.com/"</span>)</li><li>        <span class="hljs-comment"># 查找页面元素：使用Selenium的webdriver查找页面ID为th的元素</span></li><li>        self.web_driver.find_element(BY.ID, <span class="hljs-string">"th"</span>)</li><li>
</li><li>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">teardown</span>(<span class="hljs-params">self</span>):</li><li>        <span class="hljs-comment"># 使用结束需要调用webdriver_setup_tool中的close方法关闭web_tools建立的连接</span></li><li>        self.web_tools.close()</li></ol></pre></div></div> </div> </div> <div></div></div>