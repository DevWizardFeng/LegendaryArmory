<h1 _ngcontent-jde-c119="" class="doc-title ng-star-inserted" title="使用Node-API接口操作bigint类型值"> 使用Node-API接口操作bigint类型值 </h1>

<div _ngcontent-jde-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="简介">简介<i class="anchor-icon anchor-icon-link" anchorid="简介" tips="复制节点链接"></i></h2><p>BigInt是ArkTS中用于表示任意精度整数的数据类型，它能够处理比Number类型更大范围的整数值。通过Node-API提供的接口，可以在Node-API模块中创建、获取和操作BigInt类型值，从而实现与BigInt相关的功能扩展。</p> </div>  <div class="tiledSection"><h2 id="基本概念">基本概念<i class="anchor-icon anchor-icon-link" anchorid="基本概念" tips="复制节点链接"></i></h2><p>在使用Node-API接口操作BigInt类型值时，需要理解以下基本概念：</p> <ul><li><strong>BigInt类型：</strong> BigInt是ArkTS中的一种数据类型，用于表示任意精度的整数。与Number类型不同，BigInt类型可以精确表示非常大的整数，而不会丢失精度或溢出。</li><li><strong>BigInt创建：</strong> 使用Node-API提供的接口，可以通过传递C的int64或uint64数据来创建对应的ArkTS BigInt。这使得在Node-API模块中可以方便地创建BigInt类型值。</li><li><strong>BigInt操作：</strong> Node-API提供了多个接口用于操作BigInt类型值。通过这些接口，可以获取BigInt的数值，进行数值转换，以及执行常见的算术和位运算操作。</li></ul> </div>  <div class="tiledSection"><h2 id="场景和功能介绍">场景和功能介绍<i class="anchor-icon anchor-icon-link" anchorid="场景和功能介绍" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" valign="top" width="50%">接口</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" valign="top" width="50%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%">napi_create_bigint_int64</td> <td class="cellrowborder" valign="top" width="50%">用于创建64位带符号整数（int64）的BigInt对象的函数。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">napi_create_bigint_uint64</td> <td class="cellrowborder" valign="top" width="50%">用于创建64位无符号整数（uint64）的BigInt对象的函数。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">napi_create_bigint_words</td> <td class="cellrowborder" valign="top" width="50%">用于根据提供的64位无符号（uint64）字节数据创建BigInt对象的函数。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">napi_get_value_bigint_int64</td> <td class="cellrowborder" valign="top" width="50%">用于从BigInt对象中获取64位带符号整数（int64）值的函数。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">napi_get_value_bigint_uint64</td> <td class="cellrowborder" valign="top" width="50%">用于从BigInt对象中获取64位无符号整数（uint64）值的函数。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">napi_get_value_bigint_words</td> <td class="cellrowborder" valign="top" width="50%">用于从BigInt对象中获取底层的64位无符号（uint64）字节数据。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="使用示例">使用示例<i class="anchor-icon anchor-icon-link" anchorid="使用示例" tips="复制节点链接"></i></h2><p>Node-API接口开发流程参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/use-napi-process">使用Node-API实现跨语言交互开发流程</a>，本文仅对接口对应C++及ArkTS相关代码进行展示。</p> </div>  <div class="tiledSection"><h3 id="napi_create_bigint_int64" class="firsth2">napi_create_bigint_int64<i class="anchor-icon anchor-icon-link" anchorid="napi_create_bigint_int64" tips="复制节点链接"></i></h3><p>这个函数用于在给定的Node-API环境中依据一个带有符号的64位整数创建一个ArkTS的BigInt对象。</p> <p>cpp部分代码</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"napi/native_api.h"</span></span></li><li>
</li><li><span class="hljs-function"><span class="hljs-type">static</span> napi_value <span class="hljs-title">CreateBigintInt64t</span><span class="hljs-params">(napi_env env, napi_callback_info info)</span></span></li><li><span class="hljs-function"></span>{</li><li>    <span class="hljs-comment">// 声明int64_t的变量value</span></li><li>    <span class="hljs-type">int64_t</span> value = <span class="hljs-number">-5555555555555555555</span>;</li><li>    <span class="hljs-comment">// 将value转化为napi_value类型返回</span></li><li>    napi_value returnValue = <span class="hljs-literal">nullptr</span>;</li><li>    <span class="hljs-built_in">napi_create_bigint_int64</span>(env, value, &amp;returnValue);</li><li>    <span class="hljs-keyword">return</span> returnValue;</li><li>}</li></ol></pre></div></div> <p>接口声明</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// index.d.ts</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">createBigintInt64t</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">bigint</span>;</li></ol></pre></div></div> <p>ArkTS侧示例代码</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> testNapi <span class="hljs-keyword">from</span> <span class="hljs-string">'libentry.so'</span>;</li><li>
</li><li>hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API napi_create_bigint_int64: %{public}d'</span>, testNapi.<span class="hljs-title function_">createBigintInt64t</span>());</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="napi_create_bigint_uint64">napi_create_bigint_uint64<i class="anchor-icon anchor-icon-link" anchorid="napi_create_bigint_uint64" tips="复制节点链接"></i></h3><p>这个函数用于在给定的Node-API环境中依据一个无符号的64位整数创建一个ArkTS的BigInt对象。</p> <p>cpp部分代码</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"napi/native_api.h"</span></span></li><li>
</li><li><span class="hljs-function"><span class="hljs-type">static</span> napi_value <span class="hljs-title">CreateBigintUint64t</span><span class="hljs-params">(napi_env env, napi_callback_info info)</span></span></li><li><span class="hljs-function"></span>{</li><li>    <span class="hljs-comment">// 声明uint64_t的变量value</span></li><li>    <span class="hljs-type">uint64_t</span> value = <span class="hljs-number">5555555555555555555</span>;</li><li>    <span class="hljs-comment">// 将value转化为napi_value类型返回</span></li><li>    napi_value returnValue = <span class="hljs-literal">nullptr</span>;</li><li>    <span class="hljs-built_in">napi_create_bigint_uint64</span>(env, value, &amp;returnValue);</li><li>    <span class="hljs-keyword">return</span> returnValue;</li><li>}</li></ol></pre></div></div> <p>接口声明</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// index.d.ts</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">createBigintUint64t</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">bigint</span>;</li></ol></pre></div></div> <p>ArkTS侧示例代码</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> testNapi <span class="hljs-keyword">from</span> <span class="hljs-string">'libentry.so'</span>;</li><li>
</li><li>hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API napi_create_bigint_uint64: %{public}d'</span>, testNapi.<span class="hljs-title function_">createBigintUint64t</span>());</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="napi_create_bigint_words">napi_create_bigint_words<i class="anchor-icon anchor-icon-link" anchorid="napi_create_bigint_words" tips="复制节点链接"></i></h3><p>这个函数用于在给定的Node-API环境中由一系列无符号64位整数创建一个ArkTS的BigInt对象。</p> <p>cpp部分代码</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"napi/native_api.h"</span></span></li><li>
</li><li><span class="hljs-function"><span class="hljs-type">static</span> napi_value <span class="hljs-title">CreateBigintWords</span><span class="hljs-params">(napi_env env, napi_callback_info info)</span></span></li><li><span class="hljs-function"></span>{</li><li>    <span class="hljs-comment">// 使用napi_create_bigint_words接口创建一个BigInt对象</span></li><li>    <span class="hljs-type">int</span> signBit = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-type">size_t</span> wordCount = <span class="hljs-number">3</span>;</li><li>    <span class="hljs-type">uint64_t</span> words[] = {<span class="hljs-number">12ULL</span>, <span class="hljs-number">34ULL</span>, <span class="hljs-number">56ULL</span>};</li><li>    napi_value returnValue = <span class="hljs-literal">nullptr</span>;</li><li>    napi_status status = <span class="hljs-built_in">napi_create_bigint_words</span>(env, signBit, wordCount, words, &amp;returnValue);</li><li>    <span class="hljs-keyword">if</span> (status != napi_ok) {</li><li>        <span class="hljs-built_in">napi_throw_error</span>(env, <span class="hljs-literal">nullptr</span>, <span class="hljs-string">"napi_create_bigint_words fail"</span>);</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;</li><li>    }</li><li>    <span class="hljs-keyword">return</span> returnValue;</li><li>}</li></ol></pre></div></div> <p>接口声明</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// index.d.ts</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">createBigintWords</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">bigint</span> | <span class="hljs-literal">undefined</span>;</li></ol></pre></div></div> <p>ArkTS侧示例代码</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> testNapi <span class="hljs-keyword">from</span> <span class="hljs-string">'libentry.so'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API napi_create_bigint_words: %{public}d'</span>, testNapi.<span class="hljs-title function_">createBigintWords</span>());</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API NapiGetValueBigint: %{public}s'</span>, error.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="napi_get_value_bigint_int64">napi_get_value_bigint_int64<i class="anchor-icon anchor-icon-link" anchorid="napi_get_value_bigint_int64" tips="复制节点链接"></i></h3><p>用于从传入的参数中提取64位整数的BigInt数据，以供后续处理。</p> <p>cpp部分代码</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"napi/native_api.h"</span></span></li><li>
</li><li><span class="hljs-function"><span class="hljs-type">static</span> napi_value <span class="hljs-title">GetValueBigintInt64t</span><span class="hljs-params">(napi_env env, napi_callback_info info)</span></span></li><li><span class="hljs-function"></span>{</li><li>    <span class="hljs-type">size_t</span> argc = <span class="hljs-number">1</span>;</li><li>    napi_value args[<span class="hljs-number">1</span>] = {<span class="hljs-literal">nullptr</span>};</li><li>    <span class="hljs-built_in">napi_get_cb_info</span>(env, info, &amp;argc, args, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>);</li><li>    <span class="hljs-comment">// 从传入的参数中提取64位整数的BigInt数据</span></li><li>    <span class="hljs-type">int64_t</span> value = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-type">bool</span> lossLess = <span class="hljs-literal">false</span>;</li><li>    napi_status status = <span class="hljs-built_in">napi_get_value_bigint_int64</span>(env, args[<span class="hljs-number">0</span>], &amp;value, &amp;lossLess);</li><li>    <span class="hljs-comment">// 判断从ArkTS侧获取bigint是否为无损转换，如果不是抛出异常</span></li><li>    <span class="hljs-keyword">if</span> (!lossLess) {</li><li>        <span class="hljs-built_in">napi_throw_error</span>(env, <span class="hljs-literal">nullptr</span>, <span class="hljs-string">"BigInt values have not been lossless converted"</span>);</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;</li><li>    }</li><li>    <span class="hljs-comment">// 如果接口调用成功正常调用则返回true给ArkTS侧</span></li><li>    napi_value returnValue = <span class="hljs-literal">nullptr</span>;</li><li>    <span class="hljs-keyword">if</span> (status == napi_ok) {</li><li>      <span class="hljs-built_in">napi_get_boolean</span>(env, <span class="hljs-literal">true</span>, &amp;returnValue);</li><li>      <span class="hljs-keyword">return</span> returnValue;</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-built_in">napi_throw_error</span>(env, <span class="hljs-literal">nullptr</span>, <span class="hljs-string">"napi_get_value_bigint_int64 failed"</span>);</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;</li><li>    }</li><li>}</li></ol></pre></div></div> <p>接口声明</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// index.d.ts</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">getValueBigintInt64t</span>: <span class="hljs-function">(<span class="hljs-params">bigInt64: <span class="hljs-built_in">bigint</span></span>) =&gt;</span> <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">undefined</span>;</li></ol></pre></div></div> <p>ArkTS侧示例代码</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> testNapi <span class="hljs-keyword">from</span> <span class="hljs-string">'libentry.so'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> bigInt = <span class="hljs-title class_">BigInt</span>(-<span class="hljs-number">5555555555555555</span>);</li><li><span class="hljs-keyword">try</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API napi_get_value_bigint_int64: %{public}s'</span>,</li><li>             <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(testNapi.<span class="hljs-title function_">getValueBigintInt64t</span>(bigInt)));</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API NapiGetValueBigint: %{public}s'</span>, error.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="napi_get_value_bigint_uint64">napi_get_value_bigint_uint64<i class="anchor-icon anchor-icon-link" anchorid="napi_get_value_bigint_uint64" tips="复制节点链接"></i></h3><p>用于从传入的参数中提取无符号64位整数的BigInt数据，以供后续处理。</p> <p>cpp部分代码</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"napi/native_api.h"</span></span></li><li>
</li><li><span class="hljs-function"><span class="hljs-type">static</span> napi_value <span class="hljs-title">GetValueBigintUint64t</span><span class="hljs-params">(napi_env env, napi_callback_info info)</span></span></li><li><span class="hljs-function"></span>{</li><li>    <span class="hljs-type">size_t</span> argc = <span class="hljs-number">1</span>;</li><li>    napi_value args[<span class="hljs-number">1</span>] = {<span class="hljs-literal">nullptr</span>};</li><li>    <span class="hljs-built_in">napi_get_cb_info</span>(env, info, &amp;argc, args, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>);</li><li>    <span class="hljs-comment">// 从参数值中获取BigInt的数值</span></li><li>    <span class="hljs-type">uint64_t</span> value = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-type">bool</span> lossLess = <span class="hljs-literal">false</span>;</li><li>    napi_status status = <span class="hljs-built_in">napi_get_value_bigint_uint64</span>(env, args[<span class="hljs-number">0</span>], &amp;value, &amp;lossLess);</li><li>    <span class="hljs-comment">// 判断从ArkTS侧获取bigint是否为无损转换，如果不是抛出异常</span></li><li>    <span class="hljs-keyword">if</span> (!lossLess) {</li><li>        <span class="hljs-built_in">napi_throw_error</span>(env, <span class="hljs-literal">nullptr</span>, <span class="hljs-string">"BigInt values have no lossless converted"</span>);</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;</li><li>    }</li><li>    <span class="hljs-comment">// 如果接口调用成功正常调用则返回true给ArkTS侧</span></li><li>    napi_value returnValue = <span class="hljs-literal">nullptr</span>;</li><li>    <span class="hljs-built_in">napi_get_boolean</span>(env, status == napi_ok, &amp;returnValue);</li><li>    <span class="hljs-keyword">return</span> returnValue;</li><li>}</li></ol></pre></div></div> <p>接口声明</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// index.d.ts</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">getValueBigintUint64t</span>: <span class="hljs-function">(<span class="hljs-params">bigUint64: <span class="hljs-built_in">bigint</span></span>) =&gt;</span> <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">undefined</span>;</li></ol></pre></div></div> <p>ArkTS侧示例代码</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> testNapi <span class="hljs-keyword">from</span> <span class="hljs-string">'libentry.so'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> bigUint = <span class="hljs-title class_">BigInt</span>(<span class="hljs-number">5555555555555555</span>);</li><li><span class="hljs-keyword">try</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API napi_get_value_bigint_uint64: %{public}s'</span>,</li><li>             <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(testNapi.<span class="hljs-title function_">getValueBigintUint64t</span>(bigUint)));</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API NapiGetValueBigint: %{public}s'</span>, error.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="napi_get_value_bigint_words">napi_get_value_bigint_words<i class="anchor-icon anchor-icon-link" anchorid="napi_get_value_bigint_words" tips="复制节点链接"></i></h3><p>用于获取ArkTS的BigInt对象底层的64位无符号（uint64）二进制字节数据。</p> <p>cpp部分代码</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"hilog/log.h"</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"napi/native_api.h"</span></span></li><li>
</li><li><span class="hljs-function"><span class="hljs-type">static</span> napi_value <span class="hljs-title">GetValueBigintWords</span><span class="hljs-params">(napi_env env, napi_callback_info info)</span></span></li><li><span class="hljs-function"></span>{</li><li>    <span class="hljs-type">size_t</span> argc = <span class="hljs-number">1</span>;</li><li>    napi_value args[<span class="hljs-number">1</span>] = {<span class="hljs-literal">nullptr</span>};</li><li>    <span class="hljs-built_in">napi_get_cb_info</span>(env, info, &amp;argc, args, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>);</li><li>    <span class="hljs-type">int</span> signBit = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-type">size_t</span> wordCount = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">// 调用napi_get_value_bigint_words接口获取wordCount</span></li><li>    napi_status status = <span class="hljs-built_in">napi_get_value_bigint_words</span>(env, args[<span class="hljs-number">0</span>], <span class="hljs-literal">nullptr</span>, &amp;wordCount, <span class="hljs-literal">nullptr</span>);</li><li>    <span class="hljs-built_in">OH_LOG_INFO</span>(LOG_APP, <span class="hljs-string">"Node-API , wordCount:%{public}d."</span>, wordCount);</li><li>    <span class="hljs-keyword">if</span> (status != napi_ok) {</li><li>        <span class="hljs-built_in">OH_LOG_ERROR</span>(LOG_APP, <span class="hljs-string">"Node-API , get wordCount fail, status:%{public}d."</span>, status);</li><li>        <span class="hljs-built_in">napi_throw_error</span>(env, <span class="hljs-literal">nullptr</span>, <span class="hljs-string">"napi_get_value_bigint_words call failed"</span>);</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (wordCount == <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-built_in">OH_LOG_ERROR</span>(LOG_APP, <span class="hljs-string">"Node-API , wordCount is 0, invalid BigInt or empty value."</span>);</li><li>        <span class="hljs-built_in">napi_throw_error</span>(env, <span class="hljs-literal">nullptr</span>, <span class="hljs-string">"napi_get_value_bigint_words returned wordCount 0"</span>);</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;</li><li>    }</li><li>    <span class="hljs-comment">// 分配足够空间存储所有word</span></li><li>    <span class="hljs-type">uint64_t</span>* words = <span class="hljs-keyword">new</span> <span class="hljs-type">uint64_t</span>[wordCount];</li><li>    <span class="hljs-comment">// 调用napi_get_value_bigint_words接口获取传入bigInt相关信息，如：signBit传入bigInt正负信息</span></li><li>    status = <span class="hljs-built_in">napi_get_value_bigint_words</span>(env, args[<span class="hljs-number">0</span>], &amp;signBit, &amp;wordCount, words);</li><li>    <span class="hljs-built_in">OH_LOG_INFO</span>(LOG_APP, <span class="hljs-string">"Node-API , signBit: %{public}d."</span>, signBit);</li><li>    <span class="hljs-keyword">if</span> (status != napi_ok) {</li><li>        <span class="hljs-built_in">OH_LOG_ERROR</span>(LOG_APP, <span class="hljs-string">"Node-API , reason:%{public}d."</span>, status);</li><li>        <span class="hljs-keyword">delete</span>[] words;</li><li>        <span class="hljs-built_in">napi_throw_error</span>(env, <span class="hljs-literal">nullptr</span>, <span class="hljs-string">"napi_get_value_bigint_words fail"</span>);</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;</li><li>    }</li><li>    <span class="hljs-comment">// 可在此处处理words数组内容，如日志输出等</span></li><li>    <span class="hljs-comment">// ...</span></li><li>     <span class="hljs-comment">// 将符号位转化为int类型传出去</span></li><li>    napi_value returnValue = <span class="hljs-literal">nullptr</span>;</li><li>    <span class="hljs-built_in">napi_create_int32</span>(env, signBit, &amp;returnValue);</li><li>    <span class="hljs-keyword">delete</span>[] words;</li><li>    <span class="hljs-keyword">return</span> returnValue;</li><li>}</li></ol></pre></div></div> <p>接口声明</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// index.d.ts</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">getValueBigintWords</span>: <span class="hljs-function">(<span class="hljs-params">bigIntWords: <span class="hljs-built_in">bigint</span></span>) =&gt;</span> <span class="hljs-built_in">bigint</span> | <span class="hljs-literal">undefined</span>;</li></ol></pre></div></div> <p>ArkTS侧示例代码</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> testNapi <span class="hljs-keyword">from</span> <span class="hljs-string">'libentry.so'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> bigInt = <span class="hljs-title class_">BigInt</span>(-<span class="hljs-number">5555555555555555</span>);</li><li><span class="hljs-keyword">let</span> bigUint = <span class="hljs-title class_">BigInt</span>(<span class="hljs-number">5555555555555555</span>);</li><li><span class="hljs-keyword">try</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API napi_get_value_bigint_words signBit is: %{public}d'</span>, testNapi.<span class="hljs-title function_">getValueBigintWords</span>(bigInt));</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API napi_get_value_bigint_words signBit is: %{public}d'</span>, testNapi.<span class="hljs-title function_">getValueBigintWords</span>(bigUint));</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API NapiGetValueBigint: %{public}s'</span>, error.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> <p>以上代码如果要在native cpp中打印日志，需在CMakeLists.txt文件中添加以下配置信息（并添加头文件：#include "hilog/log.h"）：</p> <div _ngcontent-jde-c106="" class="highlight-div"><div _ngcontent-jde-c106="" class="highlight-div-header"><div _ngcontent-jde-c106="" class="highlight-div-header-left"><div _ngcontent-jde-c106="" class="handle-button expand-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jde-c106="" class="highlight-div-header-right"><div _ngcontent-jde-c106="" class="handle-button ai-button"></div><div _ngcontent-jde-c106="" class="handle-button line-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jde-c106="" class="handle-button theme-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jde-c106="" class="handle-button copy-button"><div _ngcontent-jde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jde-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>// CMakeLists.txt</li><li>add_definitions( "-DLOG_DOMAIN=0xd0d0" )</li><li>add_definitions( "-DLOG_TAG=\"testTag\"" )</li><li>target_link_libraries(entry PUBLIC libace_napi.z.so libhilog_ndk.z.so)</li></ol></pre></div></div> </div> </div> <div></div></div>