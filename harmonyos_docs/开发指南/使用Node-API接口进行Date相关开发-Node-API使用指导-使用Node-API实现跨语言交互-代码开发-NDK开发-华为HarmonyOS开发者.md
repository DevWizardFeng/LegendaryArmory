<h1 _ngcontent-ttk-c119="" class="doc-title ng-star-inserted" title="使用Node-API接口进行Date相关开发"> 使用Node-API接口进行Date相关开发 </h1>

<div _ngcontent-ttk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="简介">简介<i class="anchor-icon anchor-icon-link" anchorid="简介" tips="复制节点链接"></i></h2><p>Node-API中date相关接口用于处理ArkTS Date对象，并在Node-API模块和ArkTS代码之间进行日期数据的转换和处理。这对于在Node-API模块中处理时间和日期相关逻辑非常有用。</p> </div>  <div class="tiledSection"><h2 id="基本概念">基本概念<i class="anchor-icon anchor-icon-link" anchorid="基本概念" tips="复制节点链接"></i></h2><p>在Node-API中，ArkTS Date对象的数据表示从UTC时间1970年1月1日0时0分0秒起至现在的总毫秒数。</p> <p>ArkTS Date对象提供了一种在ArkTS中表示和操作日期和时间的方式。它们允许您创建表示特定时刻的日期对象，执行各种日期和时间相关的计算（如添加或减去时间间隔），以及格式化日期为字符串以供显示。</p> <p>在Node-API中，通过提供与Date对象交互的函数，Node-API模块能够更紧密地与ArkTS环境集成，执行更复杂的日期和时间相关操作。</p> </div>  <div class="tiledSection"><h2 id="场景和功能介绍">场景和功能介绍<i class="anchor-icon anchor-icon-link" anchorid="场景和功能介绍" tips="复制节点链接"></i></h2><p>以下Node-API函数通常在开发Node-API模块中与ArkTS的Date对象进行交互时使用，来处理和操作日期数据。以下是一些可能的使用场景：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.1" valign="top" width="50%">接口</th> <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.2" valign="top" width="50%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%">napi_create_date</td> <td class="cellrowborder" valign="top" width="50%">在需要根据当前系统时间或特定计算生成一个Date对象时，可通过使用此接口创建表示这些时间的ArkTS Date对象，然后将其传递给ArkTS代码进行进一步处理。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">napi_get_date_value</td> <td class="cellrowborder" valign="top" width="50%">在Node-API模块中接收到一个ArkTS的Date对象，并且需要获取其对应的时间戳或日期值时，可以使用此接口。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">napi_is_date</td> <td class="cellrowborder" valign="top" width="50%">在需要确定一个ArkTS对象是否为Date对象时，可使用此接口判断给定的值是否为Date对象。例如，在接收函数参数时，需要验证参数是否为Date对象以确保正确的数据类型。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="使用示例">使用示例<i class="anchor-icon anchor-icon-link" anchorid="使用示例" tips="复制节点链接"></i></h2><p>Node-API接口开发流程参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/use-napi-process">使用Node-API实现跨语言交互开发流程</a>，本文仅对接口对应的C++及ArkTS相关代码进行展示。</p> </div>  <div class="tiledSection"><h3 id="napi_create_date" class="firsth2">napi_create_date<i class="anchor-icon anchor-icon-link" anchorid="napi_create_date" tips="复制节点链接"></i></h3><p>通过一个C++的double数据创建ArkTS的Date对象。</p> <p>cpp部分代码</p> <div _ngcontent-ttk-c106="" class="highlight-div"><div _ngcontent-ttk-c106="" class="highlight-div-header"><div _ngcontent-ttk-c106="" class="highlight-div-header-left"><div _ngcontent-ttk-c106="" class="handle-button expand-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ttk-c106="" class="highlight-div-header-right"><div _ngcontent-ttk-c106="" class="handle-button ai-button"></div><div _ngcontent-ttk-c106="" class="handle-button line-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ttk-c106="" class="handle-button theme-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ttk-c106="" class="handle-button copy-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ttk-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"napi/native_api.h"</span></span></li><li>
</li><li><span class="hljs-function"><span class="hljs-type">static</span> napi_value <span class="hljs-title">CreateDate</span><span class="hljs-params">(napi_env env, napi_callback_info info)</span></span></li><li><span class="hljs-function"></span>{</li><li>    <span class="hljs-comment">// 获取传入的Unix Time Stamp时间</span></li><li>    <span class="hljs-type">double</span> value = <span class="hljs-number">1501924876711</span>;</li><li>    <span class="hljs-comment">// 调用napi_create_date接口将double值转换成表示日期时间的ArkTS对象，并放入returnValue中</span></li><li>    napi_value returnValue = <span class="hljs-literal">nullptr</span>;</li><li>    <span class="hljs-built_in">napi_create_date</span>(env, value, &amp;returnValue);</li><li>    <span class="hljs-keyword">return</span> returnValue;</li><li>}</li></ol></pre></div></div> <p>接口声明</p> <div _ngcontent-ttk-c106="" class="highlight-div"><div _ngcontent-ttk-c106="" class="highlight-div-header"><div _ngcontent-ttk-c106="" class="highlight-div-header-left"><div _ngcontent-ttk-c106="" class="handle-button expand-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ttk-c106="" class="highlight-div-header-right"><div _ngcontent-ttk-c106="" class="handle-button ai-button"></div><div _ngcontent-ttk-c106="" class="handle-button line-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ttk-c106="" class="handle-button theme-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ttk-c106="" class="handle-button copy-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ttk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// index.d.ts</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">createDate</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Date</span>;</li></ol></pre></div></div> <p>ArkTS侧示例代码</p> <div _ngcontent-ttk-c106="" class="highlight-div"><div _ngcontent-ttk-c106="" class="highlight-div-header"><div _ngcontent-ttk-c106="" class="highlight-div-header-left"><div _ngcontent-ttk-c106="" class="handle-button expand-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ttk-c106="" class="highlight-div-header-right"><div _ngcontent-ttk-c106="" class="handle-button ai-button"></div><div _ngcontent-ttk-c106="" class="handle-button line-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ttk-c106="" class="handle-button theme-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ttk-c106="" class="handle-button copy-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ttk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> testNapi <span class="hljs-keyword">from</span> <span class="hljs-string">'libentry.so'</span>;</li><li>
</li><li>hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API napi_create_date: %{public}s'</span>, testNapi.<span class="hljs-title function_">createDate</span>().<span class="hljs-title function_">toString</span>());</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="napi_get_date_value">napi_get_date_value<i class="anchor-icon anchor-icon-link" anchorid="napi_get_date_value" tips="复制节点链接"></i></h3><p>获取给定ArkTS Date对应的C++ double值。</p> <p>cpp部分代码</p> <div _ngcontent-ttk-c106="" class="highlight-div"><div _ngcontent-ttk-c106="" class="highlight-div-header"><div _ngcontent-ttk-c106="" class="highlight-div-header-left"><div _ngcontent-ttk-c106="" class="handle-button expand-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ttk-c106="" class="highlight-div-header-right"><div _ngcontent-ttk-c106="" class="handle-button ai-button"></div><div _ngcontent-ttk-c106="" class="handle-button line-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ttk-c106="" class="handle-button theme-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ttk-c106="" class="handle-button copy-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ttk-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;hilog/log.h&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"napi/native_api.h"</span></span></li><li>
</li><li><span class="hljs-function"><span class="hljs-type">static</span> napi_value <span class="hljs-title">GetDateValue</span><span class="hljs-params">(napi_env env, napi_callback_info info)</span></span></li><li><span class="hljs-function"></span>{</li><li>    <span class="hljs-type">size_t</span> argc = <span class="hljs-number">1</span>;</li><li>    napi_value args[<span class="hljs-number">1</span>] = {<span class="hljs-literal">nullptr</span>};</li><li>    <span class="hljs-built_in">napi_get_cb_info</span>(env, info, &amp;argc, args, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>);</li><li>
</li><li>    <span class="hljs-comment">// 获取传入的Unix Time Stamp时间</span></li><li>    <span class="hljs-type">double</span> value = <span class="hljs-number">0</span>;</li><li>    napi_status status = <span class="hljs-built_in">napi_get_date_value</span>(env, args[<span class="hljs-number">0</span>], &amp;value);</li><li>    <span class="hljs-keyword">if</span> (status != napi_ok) {</li><li>        <span class="hljs-built_in">napi_throw_error</span>(env, <span class="hljs-literal">nullptr</span>, <span class="hljs-string">"napi_get_date_value fail"</span>);</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;</li><li>    }</li><li>
</li><li>    <span class="hljs-comment">// 将获取到的Unix Time Stamp时间打印</span></li><li>    <span class="hljs-built_in">OH_LOG_INFO</span>(LOG_APP, <span class="hljs-string">"Node-API gets unix time stamp is:%{public}lf."</span>, value);</li><li>
</li><li>    <span class="hljs-comment">// 把转换后的Unix Time Stamp时间创建成ArkTS double数值，并放入returnValue中</span></li><li>    napi_value returnValue = <span class="hljs-literal">nullptr</span>;</li><li>    <span class="hljs-built_in">napi_create_double</span>(env, value, &amp;returnValue);</li><li>    <span class="hljs-keyword">return</span> returnValue;</li><li>}</li></ol></pre></div></div> <p>接口声明</p> <div _ngcontent-ttk-c106="" class="highlight-div"><div _ngcontent-ttk-c106="" class="highlight-div-header"><div _ngcontent-ttk-c106="" class="highlight-div-header-left"><div _ngcontent-ttk-c106="" class="handle-button expand-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ttk-c106="" class="highlight-div-header-right"><div _ngcontent-ttk-c106="" class="handle-button ai-button"></div><div _ngcontent-ttk-c106="" class="handle-button line-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ttk-c106="" class="handle-button theme-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ttk-c106="" class="handle-button copy-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ttk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// index.d.ts</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">getDateValue</span>: <span class="hljs-function">(<span class="hljs-params">date: <span class="hljs-built_in">Date</span></span>) =&gt;</span> <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span>;</li></ol></pre></div></div> <p>ArkTS侧示例代码</p> <div _ngcontent-ttk-c106="" class="highlight-div"><div _ngcontent-ttk-c106="" class="highlight-div-header"><div _ngcontent-ttk-c106="" class="highlight-div-header-left"><div _ngcontent-ttk-c106="" class="handle-button expand-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ttk-c106="" class="highlight-div-header-right"><div _ngcontent-ttk-c106="" class="handle-button ai-button"></div><div _ngcontent-ttk-c106="" class="handle-button line-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ttk-c106="" class="handle-button theme-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ttk-c106="" class="handle-button copy-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ttk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> testNapi <span class="hljs-keyword">from</span> <span class="hljs-string">'libentry.so'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Node-API: output the Unix Time Stamp: %{public}d'</span>, date.<span class="hljs-title function_">getTime</span>());</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API napi_get_date_value: %{public}d'</span>, testNapi.<span class="hljs-title function_">getDateValue</span>(date));</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API napi_get_date_value error: %{public}s'</span>, error.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="napi_is_date">napi_is_date<i class="anchor-icon anchor-icon-link" anchorid="napi_is_date" tips="复制节点链接"></i></h3><p>判断给定ArkTS value是否为ArkTS Date对象。</p> <p>cpp部分代码</p> <div _ngcontent-ttk-c106="" class="highlight-div"><div _ngcontent-ttk-c106="" class="highlight-div-header"><div _ngcontent-ttk-c106="" class="highlight-div-header-left"><div _ngcontent-ttk-c106="" class="handle-button expand-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ttk-c106="" class="highlight-div-header-right"><div _ngcontent-ttk-c106="" class="handle-button ai-button"></div><div _ngcontent-ttk-c106="" class="handle-button line-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ttk-c106="" class="handle-button theme-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ttk-c106="" class="handle-button copy-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ttk-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"napi/native_api.h"</span></span></li><li>
</li><li><span class="hljs-function"><span class="hljs-type">static</span> napi_value <span class="hljs-title">IsDate</span><span class="hljs-params">(napi_env env, napi_callback_info info)</span></span></li><li><span class="hljs-function"></span>{</li><li>    <span class="hljs-comment">// 接受一个入参</span></li><li>    <span class="hljs-type">size_t</span> argc = <span class="hljs-number">1</span>;</li><li>    napi_value args[<span class="hljs-number">1</span>] = {<span class="hljs-literal">nullptr</span>};</li><li>    <span class="hljs-built_in">napi_get_cb_info</span>(env, info, &amp;argc, args, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>);</li><li>
</li><li>    <span class="hljs-comment">// 调用napi_is_date接口判断给定入参是否为Date数据</span></li><li>    <span class="hljs-type">bool</span> result = <span class="hljs-literal">false</span>;</li><li>    napi_status status = <span class="hljs-built_in">napi_is_date</span>(env, args[<span class="hljs-number">0</span>], &amp;result);</li><li>    <span class="hljs-keyword">if</span> (status != napi_ok) {</li><li>        <span class="hljs-built_in">napi_throw_error</span>(env, <span class="hljs-literal">nullptr</span>, <span class="hljs-string">"Node-API napi_is_date fail"</span>);</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;</li><li>    }</li><li>    <span class="hljs-comment">// 将结果转成napi_value类型返回</span></li><li>    napi_value returnValue = <span class="hljs-literal">nullptr</span>;</li><li>    <span class="hljs-built_in">napi_get_boolean</span>(env, result, &amp;returnValue);</li><li>
</li><li>    <span class="hljs-keyword">return</span> returnValue;</li><li>}</li></ol></pre></div></div> <p>接口声明</p> <div _ngcontent-ttk-c106="" class="highlight-div"><div _ngcontent-ttk-c106="" class="highlight-div-header"><div _ngcontent-ttk-c106="" class="highlight-div-header-left"><div _ngcontent-ttk-c106="" class="handle-button expand-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ttk-c106="" class="highlight-div-header-right"><div _ngcontent-ttk-c106="" class="handle-button ai-button"></div><div _ngcontent-ttk-c106="" class="handle-button line-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ttk-c106="" class="handle-button theme-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ttk-c106="" class="handle-button copy-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ttk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// index.d.ts</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">isDate</span>: &lt;T&gt;<span class="hljs-function">(<span class="hljs-params">date: T</span>) =&gt;</span> <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">undefined</span>;</li></ol></pre></div></div> <p>ArkTS侧示例代码</p> <div _ngcontent-ttk-c106="" class="highlight-div"><div _ngcontent-ttk-c106="" class="highlight-div-header"><div _ngcontent-ttk-c106="" class="highlight-div-header-left"><div _ngcontent-ttk-c106="" class="handle-button expand-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ttk-c106="" class="highlight-div-header-right"><div _ngcontent-ttk-c106="" class="handle-button ai-button"></div><div _ngcontent-ttk-c106="" class="handle-button line-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ttk-c106="" class="handle-button theme-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ttk-c106="" class="handle-button copy-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ttk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> testNapi <span class="hljs-keyword">from</span> <span class="hljs-string">'libentry.so'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">now</span>: <span class="hljs-title class_">Date</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();</li><li>  <span class="hljs-keyword">let</span> date = <span class="hljs-string">"123"</span>;</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API napi_is_date: %{public}s'</span>, testNapi.<span class="hljs-title function_">isDate</span>(now));</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API napi_is_date: %{public}s'</span>, testNapi.<span class="hljs-title function_">isDate</span>(date));</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Test Node-API napi_is_date error: %{public}s'</span>, error.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> <p>以上代码如果要在native cpp中打印日志，需在CMakeLists.txt文件中添加以下配置信息（并添加头文件：#include "hilog/log.h"）：</p> <div _ngcontent-ttk-c106="" class="highlight-div"><div _ngcontent-ttk-c106="" class="highlight-div-header"><div _ngcontent-ttk-c106="" class="highlight-div-header-left"><div _ngcontent-ttk-c106="" class="handle-button expand-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ttk-c106="" class="highlight-div-header-right"><div _ngcontent-ttk-c106="" class="handle-button ai-button"></div><div _ngcontent-ttk-c106="" class="handle-button line-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ttk-c106="" class="handle-button theme-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ttk-c106="" class="handle-button copy-button"><div _ngcontent-ttk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ttk-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>// CMakeLists.txt</li><li>add_definitions( "-DLOG_DOMAIN=0xd0d0" )</li><li>add_definitions( "-DLOG_TAG=\"testTag\"" )</li><li>target_link_libraries(entry PUBLIC libace_napi.z.so libhilog_ndk.z.so)</li></ol></pre></div></div> </div> </div> <div></div></div>