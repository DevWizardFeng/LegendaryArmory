<h1 _ngcontent-rwr-c119="" class="doc-title ng-star-inserted" title="使用PhotoPicker推荐图片"> 使用PhotoPicker推荐图片 </h1>

<div _ngcontent-rwr-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>应用在调用PhotoPicker接口时，如果配置了PhotoPicker图片推荐参数，当设备中有满足图片推荐参数的图片，且设备中的图片已经分析完成时，PhotoPicker界面除了展示全量的图片外，还会展示符合条件的推荐图片供用户参考选择，从而缩短用户筛选图片的时间。</p> <ul><li>选择特定类型（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#recommendationtype11" target="_blank">RecommendationType</a>）的图片，如身份证、银行卡、驾驶证、行驶证、二维码等。当有符合应用指定类型的图片传入时，将显示对应的图片推荐页。<p>以指定图片类型为二维码为例，PhotoPicker界面上将出现“二维码”的Tab页，展示图库中的二维码图片。</p> <p><span><img height="574.2408" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114421.62632411755313076673613743198107:50001231000000:2800:7419C2655D8B4514EEF0583E899E8DF3C1D135C647526E9CF069EDAE22DF38AF.jpg" title="点击放大" width="266"></span></p> </li><li>在图文编辑时选择图片，系统可以根据应用传入的文本信息，提取出时间、地点、事物或活动，并根据提取的信息，推荐对应的图片展示在PhotoPicker中。<p>举例说明，如设置的推荐参数文本是“国庆节，带着女儿去了上海野生动物园，看到了凶猛的大象，漂亮的火烈鸟，还有她心心念念的大熊猫，小家伙可开心了。”</p> <p>而且手机中有相应的图片，图片分析完成时，会在“推荐”的Tab页中展示出时间是国庆节，地点是上海野生动物园的大熊猫、火烈鸟、大象的图片。</p> <p><span><img height="557.7488000000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114421.34220475113749805628707086181334:50001231000000:2800:E9043ADE95F7ED7B25FBF72B38E35494969A626C2A4FC5C59A133FB27A48B5BF.jpg" title="点击放大" width="266"></span></p> </li></ul> <div class="tiledSection"><h2 id="section238012561509">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="section238012561509" tips="复制节点链接"></i></h2><ul><li>PhotoPicker推荐图片的功能依赖于图片分析的结果，只有在媒体库中的图片分析完成后，系统才会进行推荐。<p>当设备在灭屏充电时，在电量充足、温度正常的情况下，系统将自动进行图片分析。</p> <p>如果图片带有地理位置信息，设备需要联网才可以正常解析图片中的位置信息。</p> </li><li>当前仅支持推荐图片类型的文件。</li></ul> </div> <div class="tiledSection"><h2 id="section1384213614211">开发方式<i class="anchor-icon anchor-icon-link" anchorid="section1384213614211" tips="复制节点链接"></i></h2><p><strong>前提条件</strong></p> <p>开发者可以通过两种方式实现PhotoPicker，拉起系统图库。请选择其中一种方式，实现PhotoPicker。</p> <ul><li>参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-photoviewpicker" target="_blank">PhotoPicker接口的开发指导</a>，实现PhotoPicker。<p>在配置参数<strong>photoAccessHelper.PhotoSelectOptions</strong>时，媒体文件类型MIMEType（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#photoviewmimetypes" target="_blank">PhotoViewMIMETypes</a>）需要配置为IMAGE_TYPE或IMAGE_VIDEO_TYPE。</p> </li><li>参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/component-guidelines-photoviewpicker" target="_blank">PhotoPicker组件的开发指导</a>，实现PhotoPicker。<p>在配置PhotoPickerComponent的属性<strong>pickerOptions</strong>时，媒体文件类型MIMEType（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#photoviewmimetypes" target="_blank">PhotoViewMIMETypes</a>）需要配置为IMAGE_TYPE或IMAGE_VIDEO_TYPE。</p> </li></ul> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>当MIMEType配置为IMAGE_TYPE或IMAGE_VIDEO_TYPE，并在后续步骤中配置了推荐参数，将根据参数推荐<strong>图片类型</strong>的文件。页签“全部”下展示的文件类型与MIMEType配置项一致。</li><li>当MIMEType配置为其他类型，推荐不生效。正常展示PhotoPicker筛选的全部照片。</li></ul> </div></div></div> <p>接下来将以通过PhotoPickerComponent为例，指导开发者如何配置PhotoPicker推荐参数，从而实现PhotoPicker推荐图片。</p> </div> <div class="tiledSection"><h3 id="section839414137598" class="firsth2">根据特定类型推荐图片<i class="anchor-icon anchor-icon-link" anchorid="section839414137598" tips="复制节点链接"></i></h3><p>当需要推荐特定类型的图片，如身份证、银行卡、驾驶证、行驶证、二维码等，可通过配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-class#recommendationoptions11" target="_blank">RecommendationOptions</a>.recommendationType，指定推荐的图片类型。支持的图片类型可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#recommendationtype11" target="_blank">RecommendationType</a>。</p> <div _ngcontent-rwr-c106="" class="highlight-div"><div _ngcontent-rwr-c106="" class="highlight-div-header"><div _ngcontent-rwr-c106="" class="highlight-div-header-left"><div _ngcontent-rwr-c106="" class="handle-button expand-button"><div _ngcontent-rwr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rwr-c106="" class="highlight-div-header-right"><div _ngcontent-rwr-c106="" class="handle-button ai-button"></div><div _ngcontent-rwr-c106="" class="handle-button line-button"><div _ngcontent-rwr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rwr-c106="" class="handle-button theme-button"><div _ngcontent-rwr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rwr-c106="" class="handle-button copy-button"><div _ngcontent-rwr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rwr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">recommendationOptions</span>: photoAccessHelper.<span class="hljs-property">RecommendationOptions</span> = {</li><li>  <span class="hljs-attr">recommendationType</span>: photoAccessHelper.<span class="hljs-property">RecommendationType</span>.<span class="hljs-property">QR_CODE</span> <span class="hljs-comment">// 配置枚举类型，不同的枚举值，推荐不同种类的图片</span></li><li>};</li><li><span class="hljs-variable language_">this</span>.<span class="hljs-property">pickerOptions</span>.<span class="hljs-property">recommendationOptions</span> = recommendationOptions;<span class="hljs-comment">// 将推荐参数赋值给 pickerOptions.recommendationOptions</span></li></ol></pre></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前示例以通过Picker组件实现推荐图片为例。</p> <p>如果使用Picker接口，需要将推荐参数赋值给 photoSelectOptions.recommendationOptions。</p> </div></div></div> </div> <div class="tiledSection"><h3 id="section149595171668">根据文本信息推荐图片<i class="anchor-icon anchor-icon-link" anchorid="section149595171668" tips="复制节点链接"></i></h3><p>当需要在图文编辑时，根据文本信息推荐图片，可通过配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-class#recommendationoptions11" target="_blank">RecommendationOptions</a>.textContextInfo。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>如果RecommendationOptions同时配置了recommendationType和textContextInfo，仅textContextInfo生效。</p> </div></div></div> <div _ngcontent-rwr-c106="" class="highlight-div"><div _ngcontent-rwr-c106="" class="highlight-div-header"><div _ngcontent-rwr-c106="" class="highlight-div-header-left"><div _ngcontent-rwr-c106="" class="handle-button expand-button"><div _ngcontent-rwr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rwr-c106="" class="highlight-div-header-right"><div _ngcontent-rwr-c106="" class="handle-button ai-button"></div><div _ngcontent-rwr-c106="" class="handle-button line-button"><div _ngcontent-rwr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rwr-c106="" class="handle-button theme-button"><div _ngcontent-rwr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rwr-c106="" class="handle-button copy-button"><div _ngcontent-rwr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rwr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">textInfo</span>: photoAccessHelper.<span class="hljs-property">TextContextInfo</span> = {</li><li>  <span class="hljs-attr">text</span>: <span class="hljs-string">'国庆节，带着女儿去了上海野生动物园，看到了凶猛的大象，漂亮的火烈鸟，还有她心心念念的大熊猫，小家伙可开心了。'</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">recommendationOptions</span>: photoAccessHelper.<span class="hljs-property">RecommendationOptions</span> = {</li><li>  <span class="hljs-attr">textContextInfo</span>: textInfo</li><li>};</li><li><span class="hljs-variable language_">this</span>.<span class="hljs-property">pickerOptions</span>.<span class="hljs-property">recommendationOptions</span> = recommendationOptions;<span class="hljs-comment">// 将推荐参数赋值给 pickerOptions.recommendationOptions</span></li></ol></pre></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前示例以通过Picker组件实现推荐图片为例。</p> <p>如果使用Picker接口，需要将推荐参数赋值给 photoSelectOptions.recommendationOptions。</p> </div></div></div> </div> <div class="tiledSection"><h2 id="section1388111383915">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section1388111383915" tips="复制节点链接"></i></h2><ul><li><a href="https://gitee.com/harmonyos_samples/SmartPhotoPicker" target="_blank">基于PhotoPicker实现图片推荐功能</a></li></ul> </div> </div> <div></div></div>