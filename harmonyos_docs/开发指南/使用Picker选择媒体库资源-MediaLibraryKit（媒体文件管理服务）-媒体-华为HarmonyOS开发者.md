<h1 _ngcontent-upq-c119="" class="doc-title ng-star-inserted" title="使用Picker选择媒体库资源"> 使用Picker选择媒体库资源 </h1>

<div _ngcontent-upq-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>当用户需要分享图片、视频等文件时，开发者可以通过特定接口拉起系统图库，让用户自行选择待分享的资源，完成分享。此接口本身无需申请权限，目前适用于界面UIAbility，使用窗口组件触发。具体使用方式如下：</p>    <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">      <p>Media Library Kit提供图片和视频的管理能力，当需要读取和保存音频文件时，请使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-picker#audioviewpicker" target="_blank">AudioViewPicker（音频选择器对象）</a>。</p>     </div></div></div>    <ol>     <li>      <p>导入选择器模块和文件管理模块。</p>      <div _ngcontent-upq-c106="" class="highlight-div"><div _ngcontent-upq-c106="" class="highlight-div-header"><div _ngcontent-upq-c106="" class="highlight-div-header-left"><div _ngcontent-upq-c106="" class="handle-button expand-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-upq-c106="" class="highlight-div-header-right"><div _ngcontent-upq-c106="" class="handle-button ai-button"></div><div _ngcontent-upq-c106="" class="handle-button line-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-upq-c106="" class="handle-button theme-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-upq-c106="" class="handle-button copy-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-upq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li></ol></pre></div></div></li>     <li>      <p>创建图片-音频类型文件选择选项实例。</p>      <div _ngcontent-upq-c106="" class="highlight-div"><div _ngcontent-upq-c106="" class="highlight-div-header"><div _ngcontent-upq-c106="" class="highlight-div-header-left"><div _ngcontent-upq-c106="" class="handle-button expand-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-upq-c106="" class="highlight-div-header-right"><div _ngcontent-upq-c106="" class="handle-button ai-button"></div><div _ngcontent-upq-c106="" class="handle-button line-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-upq-c106="" class="handle-button theme-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-upq-c106="" class="handle-button copy-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-upq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> photoSelectOptions = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoSelectOptions</span>();</li></ol></pre></div></div></li>     <li>      <p>配置可选的媒体文件类型和媒体文件的最大数目。</p>      <p>以下示例以图片选择为例，媒体文件类型请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#photoviewmimetypes" target="_blank">PhotoViewMIMETypes</a>。</p>      <div _ngcontent-upq-c106="" class="highlight-div"><div _ngcontent-upq-c106="" class="highlight-div-header"><div _ngcontent-upq-c106="" class="highlight-div-header-left"><div _ngcontent-upq-c106="" class="handle-button expand-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-upq-c106="" class="highlight-div-header-right"><div _ngcontent-upq-c106="" class="handle-button ai-button"></div><div _ngcontent-upq-c106="" class="handle-button line-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-upq-c106="" class="handle-button theme-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-upq-c106="" class="handle-button copy-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-upq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li>photoSelectOptions.<span class="hljs-property">MIMEType</span> = photoAccessHelper.<span class="hljs-property">PhotoViewMIMETypes</span>.<span class="hljs-property">IMAGE_TYPE</span>; <span class="hljs-comment">// 过滤选择媒体文件类型为IMAGE。</span></li><li>photoSelectOptions.<span class="hljs-property">maxSelectNumber</span> = <span class="hljs-number">5</span>; <span class="hljs-comment">// 选择媒体文件的最大数目。</span></li></ol></pre></div></div></li>     <li>      <p>创建图库选择器实例，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoviewpicker#select" target="_blank">PhotoViewPicker.select</a>接口拉起图库界面进行文件选择。文件选择成功后，返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-class#photoselectresult" target="_blank">PhotoSelectResult</a>结果集。</p>      <div _ngcontent-upq-c106="" class="highlight-div"><div _ngcontent-upq-c106="" class="highlight-div-header"><div _ngcontent-upq-c106="" class="highlight-div-header-left"><div _ngcontent-upq-c106="" class="handle-button expand-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-upq-c106="" class="highlight-div-header-right"><div _ngcontent-upq-c106="" class="handle-button ai-button"></div><div _ngcontent-upq-c106="" class="handle-button line-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-upq-c106="" class="handle-button theme-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-upq-c106="" class="handle-button copy-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-upq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uris</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [];</li><li><span class="hljs-keyword">const</span> photoViewPicker = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoViewPicker</span>();</li><li>photoViewPicker.<span class="hljs-title function_">select</span>(photoSelectOptions).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">photoSelectResult: photoAccessHelper.PhotoSelectResult</span>) =&gt;</span> {</li><li>  uris = photoSelectResult.<span class="hljs-property">photoUris</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'photoViewPicker.select to file succeed and uris are:'</span> + uris);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Invoke photoViewPicker.select failed, code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>      <p>select返回的uri权限是只读权限，可以根据结果集中uri进行读取文件数据操作。注意不能在picker的回调里直接使用此uri进行打开文件操作，需要定义一个全局变量保存uri，类似使用一个按钮去触发打开文件。可参考<a href="/consumer/cn/doc/harmonyos-guides/photoaccesshelper-photoviewpicker#指定uri读取文件数据">指定URI读取文件数据</a>。</p>      <p>也可以通过返回的uri<a href="/consumer/cn/doc/harmonyos-guides/photoaccesshelper-photoviewpicker#指定uri获取图片或视频资源">获取图片或视频资源</a>。</p>      <p>如有获取元数据需求，可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-fs" target="_blank">文件管理接口</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-fileuri" target="_blank">文件URI</a>根据uri获取部分文件属性信息，比如文件大小、访问时间、修改时间、文件名、文件路径等。</p></li>    </ol>    <div class="tiledSection">     <h2 id="指定uri读取文件数据">指定URI读取文件数据<i class="anchor-icon anchor-icon-link" anchorid="指定uri读取文件数据" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>待界面从图库返回后，再通过一个类似按钮的组件去调用其他函数，使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-fs#fsopensync" target="_blank">fileIo.openSync</a>接口，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/user-file-uri-intro#媒体文件uri">媒体文件uri</a>打开这个文件得到fd。这里需要注意接口权限参数是fileIo.OpenMode.READ_ONLY。</p>       <div _ngcontent-upq-c106="" class="highlight-div"><div _ngcontent-upq-c106="" class="highlight-div-header"><div _ngcontent-upq-c106="" class="highlight-div-header-left"><div _ngcontent-upq-c106="" class="handle-button expand-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-upq-c106="" class="highlight-div-header-right"><div _ngcontent-upq-c106="" class="handle-button ai-button"></div><div _ngcontent-upq-c106="" class="handle-button line-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-upq-c106="" class="handle-button theme-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-upq-c106="" class="handle-button copy-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-upq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">let</span> file = fileIo.<span class="hljs-title function_">openSync</span>(uri, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'file fd: '</span> + file.<span class="hljs-property">fd</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'openSync failed with err: '</span> + error);</li><li>}</li></ol></pre></div></div></li>      <li>       <p>通过fd使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-fs#readsync" target="_blank">fileIo.readSync</a>接口读取这个文件内的数据，读取完成后关闭fd。</p>       <div _ngcontent-upq-c106="" class="highlight-div"><div _ngcontent-upq-c106="" class="highlight-div-header"><div _ngcontent-upq-c106="" class="highlight-div-header-left"><div _ngcontent-upq-c106="" class="handle-button expand-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-upq-c106="" class="highlight-div-header-right"><div _ngcontent-upq-c106="" class="handle-button ai-button"></div><div _ngcontent-upq-c106="" class="handle-button line-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-upq-c106="" class="handle-button theme-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-upq-c106="" class="handle-button copy-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-upq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// buffer为缓冲区长度，由开发者自定义。</span></li><li>  <span class="hljs-keyword">let</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">4096</span>);</li><li>  <span class="hljs-keyword">let</span> readLen = fileIo.<span class="hljs-title function_">readSync</span>(file.<span class="hljs-property">fd</span>, buffer);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'readSync data to file succeed and buffer size is:'</span> + readLen);</li><li>  fileIo.<span class="hljs-title function_">closeSync</span>(file);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'readSync or closeSync failed with err: '</span> + error);</li><li>}</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="指定uri获取图片或视频资源">指定URI获取图片或视频资源<i class="anchor-icon anchor-icon-link" anchorid="指定uri获取图片或视频资源" tips="复制节点链接"></i></h2>          <p>媒体库支持Picker选择<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/user-file-uri-intro#媒体文件uri">媒体文件</a>URI后，根据指定URI获取图片或视频资源，下面以查询指定URI为'file://media/Photo/1/IMG_datetime_0001/displayName.jpg'为例。</p>     <ol>      <li>       <p>定义媒体资源处理器<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-mediaassetdatahandler" target="_blank">MediaAssetDataHandler</a>，系统在资源准备就绪时向应用回调onDataPrepared。</p>       <div _ngcontent-upq-c106="" class="highlight-div"><div _ngcontent-upq-c106="" class="highlight-div-header"><div _ngcontent-upq-c106="" class="highlight-div-header-left"><div _ngcontent-upq-c106="" class="handle-button expand-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-upq-c106="" class="highlight-div-header-right"><div _ngcontent-upq-c106="" class="handle-button ai-button"></div><div _ngcontent-upq-c106="" class="handle-button line-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-upq-c106="" class="handle-button theme-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-upq-c106="" class="handle-button copy-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-upq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MediaDataHandler</span> <span class="hljs-keyword">implements</span> photoAccessHelper.<span class="hljs-property">MediaAssetDataHandler</span>&lt;<span class="hljs-title class_">ArrayBuffer</span>&gt; {</li><li>  <span class="hljs-title function_">onDataPrepared</span>(<span class="hljs-params">data: <span class="hljs-built_in">ArrayBuffer</span></span>) {</li><li>    <span class="hljs-keyword">if</span> (data === <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error occurred when preparing data'</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'on image data prepared'</span>);</li><li>    <span class="hljs-comment">// 应用自定义对资源数据的处理逻辑。</span></li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoaccesshelper#getassets-1" target="_blank">getAssets</a>接口获取要访问的资产，并通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-mediaassetmanager#requestimagedata11" target="_blank">requestImageData</a>获取对应资源。</p>       <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">         <p>出于对用户隐私安全的保护，对媒体资源EXIF中的地理位置和拍摄参数信息做了去隐私化处理。如果需要获取被去隐私化的EXIF信息，需要<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-preparation#申请相册管理模块功能相关权限">申请相册管理模块权限</a>'ohos.permission.MEDIA_LOCATION'。</p>        </div></div></div>       <div _ngcontent-upq-c106="" class="highlight-div"><div _ngcontent-upq-c106="" class="highlight-div-header"><div _ngcontent-upq-c106="" class="highlight-div-header-left"><div _ngcontent-upq-c106="" class="handle-button expand-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-upq-c106="" class="highlight-div-header-right"><div _ngcontent-upq-c106="" class="handle-button ai-button"></div><div _ngcontent-upq-c106="" class="handle-button line-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-upq-c106="" class="handle-button theme-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-upq-c106="" class="handle-button copy-button"><div _ngcontent-upq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-upq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper, context: Context</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">predicates</span>: dataSharePredicates.<span class="hljs-property">DataSharePredicates</span> = <span class="hljs-keyword">new</span> dataSharePredicates.<span class="hljs-title class_">DataSharePredicates</span>();</li><li>  <span class="hljs-keyword">let</span> uri = <span class="hljs-string">'file://media/Photo/1/IMG_datetime_0001/displayName.jpg'</span> <span class="hljs-comment">// 需保证此uri已存在。</span></li><li>  predicates.<span class="hljs-title function_">equalTo</span>(photoAccessHelper.<span class="hljs-property">PhotoKeys</span>.<span class="hljs-property">URI</span>, uri);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchOptions</span>: photoAccessHelper.<span class="hljs-property">FetchOptions</span> = {</li><li>    <span class="hljs-attr">fetchColumns</span>: [photoAccessHelper.<span class="hljs-property">PhotoKeys</span>.<span class="hljs-property">TITLE</span>],</li><li>    <span class="hljs-attr">predicates</span>: predicates</li><li>  };</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchResult</span>: photoAccessHelper.<span class="hljs-property">FetchResult</span>&lt;photoAccessHelper.<span class="hljs-property">PhotoAsset</span>&gt; =</li><li>     <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">getAssets</span>(fetchOptions);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">photoAsset</span>: photoAccessHelper.<span class="hljs-property">PhotoAsset</span> = <span class="hljs-keyword">await</span> fetchResult.<span class="hljs-title function_">getFirstObject</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAssets photoAsset.uri : '</span> + photoAsset.<span class="hljs-property">uri</span>);</li><li>    <span class="hljs-comment">// 获取属性值，以标题为例；对于非默认查询的属性，get前需要在fetchColumns中添加对应列名。</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'title : '</span> + photoAsset.<span class="hljs-title function_">get</span>(photoAccessHelper.<span class="hljs-property">PhotoKeys</span>.<span class="hljs-property">TITLE</span>));</li><li>    <span class="hljs-comment">// 请求图片资源数据。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">requestOptions</span>: photoAccessHelper.<span class="hljs-property">RequestOptions</span> = {</li><li>      <span class="hljs-attr">deliveryMode</span>: photoAccessHelper.<span class="hljs-property">DeliveryMode</span>.<span class="hljs-property">HIGH_QUALITY_MODE</span>,</li><li>    }</li><li>    <span class="hljs-keyword">await</span> photoAccessHelper.<span class="hljs-property">MediaAssetManager</span>.<span class="hljs-title function_">requestImageData</span>(</li><li>     context, photoAsset, requestOptions, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaDataHandler</span>());</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'requestImageData successfully'</span>);</li><li>    fetchResult.<span class="hljs-title function_">close</span>();</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getAssets failed with err: '</span> + err);</li><li>  }</li><li>}</li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>