<h1 _ngcontent-nid-c119="" class="doc-title ng-star-inserted" title="使用PixelMap完成图像变换"> 使用PixelMap完成图像变换 </h1>

<div _ngcontent-nid-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>图片处理指对PixelMap进行相关的操作，如获取图片信息、裁剪、缩放、偏移、旋转、翻转、设置透明度、读写像素数据等。图片处理主要包括图像变换、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-pixelmap-operation">位图操作</a>，本文介绍图像变换。</p>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <p>图像变换相关API的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">API参考</a>。</p>     <ol>      <li>       <p>完成<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-decoding">图片解码</a>，获取PixelMap对象。</p></li>      <li>       <p>获取图片信息。</p>       <div _ngcontent-nid-c106="" class="highlight-div"><div _ngcontent-nid-c106="" class="highlight-div-header"><div _ngcontent-nid-c106="" class="highlight-div-header-left"><div _ngcontent-nid-c106="" class="handle-button expand-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nid-c106="" class="highlight-div-header-right"><div _ngcontent-nid-c106="" class="handle-button ai-button"></div><div _ngcontent-nid-c106="" class="handle-button line-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nid-c106="" class="handle-button theme-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nid-c106="" class="handle-button copy-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-comment">// 获取图片大小。</span></li><li>pixelMap.<span class="hljs-title function_">getImageInfo</span>().<span class="hljs-title function_">then</span>( <span class="hljs-function">(<span class="hljs-params">info : image.ImageInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'info.width = '</span> + info.<span class="hljs-property">size</span>.<span class="hljs-property">width</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'info.height = '</span> + info.<span class="hljs-property">size</span>.<span class="hljs-property">height</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to obtain the image pixel map information.And the error is: "</span> + err);</li><li>});</li></ol></pre></div></div></li>      <li>       <p>进行图像变换操作。</p>       <p>原图：</p>       <p><span><img originheight="750" originwidth="720" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114443.25959439674675362191773487875916:50001231000000:2800:B12FF60E4601ED03BD30B732CDF3C01C2C04338D0BE3C3F97CF2A7237548B903.jpeg" width="720" height="750"></span></p>       <ul>        <li>         <p>裁剪</p>         <div _ngcontent-nid-c106="" class="highlight-div"><div _ngcontent-nid-c106="" class="highlight-div-header"><div _ngcontent-nid-c106="" class="highlight-div-header-left"><div _ngcontent-nid-c106="" class="handle-button expand-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nid-c106="" class="highlight-div-header-right"><div _ngcontent-nid-c106="" class="handle-button ai-button"></div><div _ngcontent-nid-c106="" class="handle-button line-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nid-c106="" class="handle-button theme-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nid-c106="" class="handle-button copy-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// x：裁剪起始点横坐标0。</span></li><li><span class="hljs-comment">// y：裁剪起始点纵坐标0。</span></li><li><span class="hljs-comment">// height：裁剪高度400，方向为从上往下（裁剪后的图片高度为400）。</span></li><li><span class="hljs-comment">// width：裁剪宽度400，方向为从左到右（裁剪后的图片宽度为400）。</span></li><li>pixelMap.<span class="hljs-title function_">crop</span>({<span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">400</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">400</span> } });</li></ol></pre></div></div>         <p><span><img originheight="750" originwidth="720" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114443.03488877215594260646265865000738:50001231000000:2800:71A3D6374EA89F425F13FB5880C175322170E6FBD4BE0F560B283DFAB2BA02B6.jpeg" width="720" height="750"></span></p></li>        <li>         <p>缩放</p>         <div _ngcontent-nid-c106="" class="highlight-div"><div _ngcontent-nid-c106="" class="highlight-div-header"><div _ngcontent-nid-c106="" class="highlight-div-header-left"><div _ngcontent-nid-c106="" class="handle-button expand-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nid-c106="" class="highlight-div-header-right"><div _ngcontent-nid-c106="" class="handle-button ai-button"></div><div _ngcontent-nid-c106="" class="handle-button line-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nid-c106="" class="handle-button theme-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nid-c106="" class="handle-button copy-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 宽为原来的0.5。</span></li><li><span class="hljs-comment">// 高为原来的0.5。</span></li><li>pixelMap.<span class="hljs-title function_">scale</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>);</li></ol></pre></div></div>         <p><span><img originheight="763" originwidth="720" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114443.95419956235412923150610333715759:50001231000000:2800:4C4BBB908CDB7D98C6156171C8B3A70F47AE16115598EE161DEFB0181132907E.jpeg" width="720" height="763"></span></p></li>        <li>         <p>偏移</p>         <div _ngcontent-nid-c106="" class="highlight-div"><div _ngcontent-nid-c106="" class="highlight-div-header"><div _ngcontent-nid-c106="" class="highlight-div-header-left"><div _ngcontent-nid-c106="" class="handle-button expand-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nid-c106="" class="highlight-div-header-right"><div _ngcontent-nid-c106="" class="handle-button ai-button"></div><div _ngcontent-nid-c106="" class="handle-button line-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nid-c106="" class="handle-button theme-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nid-c106="" class="handle-button copy-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 向下偏移100。</span></li><li><span class="hljs-comment">// 向右偏移100。</span></li><li>pixelMap.<span class="hljs-title function_">translate</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>);</li></ol></pre></div></div>         <p><span><img originheight="750" originwidth="720" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114443.48769591708787143021939068519791:50001231000000:2800:8450DD0A13BB680E60D5BDFFED8AA5BDE83436777A56ECB1D7B1F8F561F825AD.jpeg" width="720" height="750"></span></p></li>        <li>         <p>旋转</p>         <div _ngcontent-nid-c106="" class="highlight-div"><div _ngcontent-nid-c106="" class="highlight-div-header"><div _ngcontent-nid-c106="" class="highlight-div-header-left"><div _ngcontent-nid-c106="" class="handle-button expand-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nid-c106="" class="highlight-div-header-right"><div _ngcontent-nid-c106="" class="handle-button ai-button"></div><div _ngcontent-nid-c106="" class="handle-button line-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nid-c106="" class="handle-button theme-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nid-c106="" class="handle-button copy-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 顺时针旋转90°。</span></li><li>pixelMap.<span class="hljs-title function_">rotate</span>(<span class="hljs-number">90</span>);</li></ol></pre></div></div>         <p><span><img originheight="763" originwidth="720" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114443.96815123301514525735514719309226:50001231000000:2800:629079BE4C2A792FA54D792ECF568A60D9A8A4048D614F93E721D936441EC374.jpeg" width="720" height="763"></span></p></li>        <li>         <p>翻转</p>         <div _ngcontent-nid-c106="" class="highlight-div"><div _ngcontent-nid-c106="" class="highlight-div-header"><div _ngcontent-nid-c106="" class="highlight-div-header-left"><div _ngcontent-nid-c106="" class="handle-button expand-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nid-c106="" class="highlight-div-header-right"><div _ngcontent-nid-c106="" class="handle-button ai-button"></div><div _ngcontent-nid-c106="" class="handle-button line-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nid-c106="" class="handle-button theme-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nid-c106="" class="handle-button copy-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 垂直翻转。</span></li><li>pixelMap.<span class="hljs-title function_">flip</span>(<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);</li></ol></pre></div></div>         <p><span><img originheight="752" originwidth="720" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114443.83580751549479333764306832868227:50001231000000:2800:79516C4D8E9DDF6EEF4F489A7472707226DEDC8F3F0B5D1520A542384F83E184.jpeg" width="720" height="752"></span></p>         <div _ngcontent-nid-c106="" class="highlight-div"><div _ngcontent-nid-c106="" class="highlight-div-header"><div _ngcontent-nid-c106="" class="highlight-div-header-left"><div _ngcontent-nid-c106="" class="handle-button expand-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nid-c106="" class="highlight-div-header-right"><div _ngcontent-nid-c106="" class="handle-button ai-button"></div><div _ngcontent-nid-c106="" class="handle-button line-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nid-c106="" class="handle-button theme-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nid-c106="" class="handle-button copy-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 水平翻转。</span></li><li>pixelMap.<span class="hljs-title function_">flip</span>(<span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>);</li></ol></pre></div></div>         <p><span><img originheight="750" originwidth="720" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114443.68679135717146155119305354146446:50001231000000:2800:8850E5AF9C3F4DBB7BED4579C0BB18FE9E9460CEDE1E7852724FF3951276248D.jpeg" width="720" height="750"></span></p></li>        <li>         <p>透明度</p>         <div _ngcontent-nid-c106="" class="highlight-div"><div _ngcontent-nid-c106="" class="highlight-div-header"><div _ngcontent-nid-c106="" class="highlight-div-header-left"><div _ngcontent-nid-c106="" class="handle-button expand-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nid-c106="" class="highlight-div-header-right"><div _ngcontent-nid-c106="" class="handle-button ai-button"></div><div _ngcontent-nid-c106="" class="handle-button line-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nid-c106="" class="handle-button theme-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nid-c106="" class="handle-button copy-button"><div _ngcontent-nid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 透明度0.5。</span></li><li>pixelMap.<span class="hljs-title function_">opacity</span>(<span class="hljs-number">0.5</span>);</li></ol></pre></div></div>         <p><span><img originheight="690" originwidth="637" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114443.80070742592102717191167085266321:50001231000000:2800:8A8ECF743776E2AB94C1E329E75D823AA986FC54B4C66ED041FCE77D090D2C16.png" width="637" height="690"></span></p></li>       </ul></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="示例代码">示例代码<i class="anchor-icon anchor-icon-link" anchorid="示例代码" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitee.com/harmonyos_samples/game-puzzle" target="_blank">拼图</a></li>     </ul>    </div>   </div>   <div></div></div>