<h1 _ngcontent-tum-c119="" class="doc-title ng-star-inserted" title="使用Web组件加载页面"> 使用Web组件加载页面 </h1>

<div _ngcontent-tum-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>页面加载是Web组件的基本功能。根据页面加载数据来源可以分为三种常用场景，包括加载网络页面、加载本地页面、加载HTML格式的富文本数据。</p>    <p>页面加载过程中，若涉及网络资源获取，请在module.json5中配置网络访问权限，添加方法请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions#在配置文件中声明权限">在配置文件中声明权限</a>。</p>    <div _ngcontent-tum-c106="" class="highlight-div"><div _ngcontent-tum-c106="" class="highlight-div-header"><div _ngcontent-tum-c106="" class="highlight-div-header-left"><div _ngcontent-tum-c106="" class="handle-button expand-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tum-c106="" class="highlight-div-header-right"><div _ngcontent-tum-c106="" class="handle-button ai-button"></div><div _ngcontent-tum-c106="" class="handle-button line-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tum-c106="" class="handle-button theme-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tum-c106="" class="handle-button copy-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tum-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"requestPermissions"</span>:[</li><li>    {</li><li>      <span class="hljs-string">"name"</span> : <span class="hljs-string">"ohos.permission.INTERNET"</span></li><li>    }</li><li>  ]</li></ol></pre></div></div>    <div class="tiledSection">     <h2 id="加载网络页面">加载网络页面<i class="anchor-icon anchor-icon-link" anchorid="加载网络页面" tips="复制节点链接"></i></h2>          <p>开发者可以在Web组件创建时，指定默认加载的网络页面。在默认页面加载完成后，如果需要变更此Web组件显示的网络页面，可以通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#loadurl" target="_blank">loadUrl()</a>接口加载指定的网页。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web" target="_blank">Web组件</a>的第一个参数变量src不能通过状态变量（例如：@State）动态更改地址，如需更改，请通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#loadurl" target="_blank">loadUrl()</a>重新加载。</p>     <p>在下面的示例中，在Web组件加载完“www.example.com”页面后，开发者可通过loadUrl接口将此Web组件显示页面变更为“www.example1.com”。</p>     <div _ngcontent-tum-c106="" class="highlight-div"><div _ngcontent-tum-c106="" class="highlight-div-header"><div _ngcontent-tum-c106="" class="highlight-div-header-left"><div _ngcontent-tum-c106="" class="handle-button expand-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tum-c106="" class="highlight-div-header-right"><div _ngcontent-tum-c106="" class="handle-button ai-button"></div><div _ngcontent-tum-c106="" class="handle-button line-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tum-c106="" class="handle-button theme-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tum-c106="" class="handle-button copy-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tum-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'loadUrl'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 点击按钮时，通过loadUrl，跳转到www.example1.com</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadUrl</span>(<span class="hljs-string">'www.example1.com'</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-comment">// 组件创建时，加载www.example.com</span></li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="加载本地页面">加载本地页面<i class="anchor-icon anchor-icon-link" anchorid="加载本地页面" tips="复制节点链接"></i></h2>          <p>为了在启动、跳转、弱网等场景下减少用户等待感知，同时为动态内容加载争取时间，可以加载本地页面优化用户体验。</p>     <p>在下面的示例中展示加载本地页面文件的方法：</p>     <p>将本地页面文件放在应用的rawfile目录下，开发者可以在Web组件创建的时候指定默认加载的本地页面，并且加载完成后可通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#loadurl" target="_blank">loadUrl()</a>接口变更当前Web组件的页面。</p>     <p>加载本地html文件时引用本地css样式文件可以通过以下方法实现。</p>     <div _ngcontent-tum-c106="" class="highlight-div"><div _ngcontent-tum-c106="" class="highlight-div-header"><div _ngcontent-tum-c106="" class="highlight-div-header-left"><div _ngcontent-tum-c106="" class="handle-button expand-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tum-c106="" class="highlight-div-header-right"><div _ngcontent-tum-c106="" class="handle-button ai-button"></div><div _ngcontent-tum-c106="" class="handle-button line-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tum-c106="" class="handle-button theme-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tum-c106="" class="handle-button copy-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tum-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"resource://rawfile/xxx.css"</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"file:///data/storage/el2/base/haps/entry/cache/xxx.css"</span>&gt;</span>// 加载沙箱路径下的本地css文件。</li></ol></pre></div></div>     <ul>      <li>       <p>将资源文件放置在应用的resources/rawfile目录下。</p>       <p><strong>图1</strong> 资源文件路径</p>       <p><span><img originheight="526" originwidth="643" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114722.65243039706806188475101463152354:50001231000000:2800:A1F8179E30E8AA953207CBF9060B74C163DA01207565ECD560606D2C318AE93A.png" width="643" height="526"></span></p></li>      <li>       <p>应用侧代码。</p>       <div _ngcontent-tum-c106="" class="highlight-div"><div _ngcontent-tum-c106="" class="highlight-div-header"><div _ngcontent-tum-c106="" class="highlight-div-header-left"><div _ngcontent-tum-c106="" class="handle-button expand-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tum-c106="" class="highlight-div-header-right"><div _ngcontent-tum-c106="" class="handle-button ai-button"></div><div _ngcontent-tum-c106="" class="handle-button line-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tum-c106="" class="handle-button theme-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tum-c106="" class="handle-button copy-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tum-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'loadUrl'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 点击按钮时，通过loadUrl，跳转到local1.html</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadUrl</span>($rawfile(<span class="hljs-string">"local1.html"</span>));</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-comment">// 组件创建时，通过$rawfile加载本地文件local.html</span></li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"local.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>local.html页面代码。</p>       <div _ngcontent-tum-c106="" class="highlight-div"><div _ngcontent-tum-c106="" class="highlight-div-header"><div _ngcontent-tum-c106="" class="highlight-div-header-left"><div _ngcontent-tum-c106="" class="handle-button expand-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tum-c106="" class="highlight-div-header-right"><div _ngcontent-tum-c106="" class="handle-button ai-button"></div><div _ngcontent-tum-c106="" class="handle-button line-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tum-c106="" class="handle-button theme-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tum-c106="" class="handle-button copy-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tum-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- local.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div></li>      <li>       <p>local1.html页面代码。</p>       <div _ngcontent-tum-c106="" class="highlight-div"><div _ngcontent-tum-c106="" class="highlight-div-header"><div _ngcontent-tum-c106="" class="highlight-div-header-left"><div _ngcontent-tum-c106="" class="handle-button expand-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tum-c106="" class="highlight-div-header-right"><div _ngcontent-tum-c106="" class="handle-button ai-button"></div><div _ngcontent-tum-c106="" class="handle-button line-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tum-c106="" class="handle-button theme-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tum-c106="" class="handle-button copy-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tum-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- local1.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>This is local1 page<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div></li>     </ul>     <p>加载沙箱路径下的本地页面文件。</p>     <ol>      <li>       <p>通过构造的单例对象GlobalContext获取沙箱路径。需要开启应用中文件系统的访问<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-attributes#fileaccess" target="_blank">fileAccess</a>权限。</p>       <div _ngcontent-tum-c106="" class="highlight-div"><div _ngcontent-tum-c106="" class="highlight-div-header"><div _ngcontent-tum-c106="" class="highlight-div-header-left"><div _ngcontent-tum-c106="" class="handle-button expand-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tum-c106="" class="highlight-div-header-right"><div _ngcontent-tum-c106="" class="handle-button ai-button"></div><div _ngcontent-tum-c106="" class="handle-button line-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tum-c106="" class="handle-button theme-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tum-c106="" class="handle-button copy-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tum-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// GlobalContext.ets</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalContext</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {}</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">GlobalContext</span>;</li><li>  <span class="hljs-keyword">private</span> _objects = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt;();</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">getContext</span>(): <span class="hljs-title class_">GlobalContext</span> {</li><li>    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">GlobalContext</span>.<span class="hljs-property">instance</span>) {</li><li>      <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-property">instance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GlobalContext</span>();</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-property">instance</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">getObject</span>(<span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Object</span> | <span class="hljs-literal">undefined</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_objects</span>.<span class="hljs-title function_">get</span>(value);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">setObject</span>(<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">objectClass</span>: <span class="hljs-title class_">Object</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_objects</span>.<span class="hljs-title function_">set</span>(key, objectClass);</li><li>  }</li><li>}</li></ol></pre></div></div>       <div _ngcontent-tum-c106="" class="highlight-div"><div _ngcontent-tum-c106="" class="highlight-div-header"><div _ngcontent-tum-c106="" class="highlight-div-header-left"><div _ngcontent-tum-c106="" class="handle-button expand-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tum-c106="" class="highlight-div-header-right"><div _ngcontent-tum-c106="" class="handle-button ai-button"></div><div _ngcontent-tum-c106="" class="handle-button line-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tum-c106="" class="handle-button theme-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tum-c106="" class="handle-button copy-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tum-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">GlobalContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../GlobalContext'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> url = <span class="hljs-string">'file://'</span> + <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-title function_">getContext</span>().<span class="hljs-title function_">getObject</span>(<span class="hljs-string">"filesDir"</span>) + <span class="hljs-string">'/index.html'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 加载沙箱路径文件。</span></li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: url, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>      .<span class="hljs-title function_">fileAccess</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>修改EntryAbility.ets文件。</p>       <p>以filesDir为例，获取沙箱路径。若想获取其他路径，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/application-context-stage#获取应用文件路径">应用文件路径</a>。</p>       <div _ngcontent-tum-c106="" class="highlight-div"><div _ngcontent-tum-c106="" class="highlight-div-header"><div _ngcontent-tum-c106="" class="highlight-div-header-left"><div _ngcontent-tum-c106="" class="handle-button expand-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tum-c106="" class="highlight-div-header-right"><div _ngcontent-tum-c106="" class="handle-button ai-button"></div><div _ngcontent-tum-c106="" class="handle-button line-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tum-c106="" class="handle-button theme-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tum-c106="" class="handle-button copy-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tum-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">GlobalContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../GlobalContext'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    <span class="hljs-comment">// 通过在GlobalContext对象上绑定filesDir，可以实现UIAbility组件与UI之间的数据同步。</span></li><li>    <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-title function_">getContext</span>().<span class="hljs-title function_">setObject</span>(<span class="hljs-string">"filesDir"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">filesDir</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Sandbox path is "</span> + <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-title function_">getContext</span>().<span class="hljs-title function_">getObject</span>(<span class="hljs-string">"filesDir"</span>));</li><li>  }</li><li>}</li></ol></pre></div></div>       <p>加载的html文件。</p>       <div _ngcontent-tum-c106="" class="highlight-div"><div _ngcontent-tum-c106="" class="highlight-div-header"><div _ngcontent-tum-c106="" class="highlight-div-header-left"><div _ngcontent-tum-c106="" class="handle-button expand-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tum-c106="" class="highlight-div-header-right"><div _ngcontent-tum-c106="" class="handle-button ai-button"></div><div _ngcontent-tum-c106="" class="handle-button line-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tum-c106="" class="handle-button theme-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tum-c106="" class="handle-button copy-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tum-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="加载html格式的文本数据">加载HTML格式的文本数据<i class="anchor-icon anchor-icon-link" anchorid="加载html格式的文本数据" tips="复制节点链接"></i></h2>          <p>Web组件可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#loaddata" target="_blank">loadData()</a>接口实现加载HTML格式的文本数据。当开发者不需要加载整个页面，只需要显示一些页面片段时，可通过此功能来快速加载页面，当加载大量html文件时，需设置第四个参数baseUrl为"data"。</p>     <div _ngcontent-tum-c106="" class="highlight-div"><div _ngcontent-tum-c106="" class="highlight-div-header"><div _ngcontent-tum-c106="" class="highlight-div-header-left"><div _ngcontent-tum-c106="" class="handle-button expand-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tum-c106="" class="highlight-div-header-right"><div _ngcontent-tum-c106="" class="handle-button ai-button"></div><div _ngcontent-tum-c106="" class="handle-button line-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tum-c106="" class="handle-button theme-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tum-c106="" class="handle-button copy-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tum-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'loadData'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 点击按钮时，通过loadData，加载HTML格式的文本数据</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadData</span>(</li><li>              <span class="hljs-string">"&lt;html&gt;&lt;body bgcolor=\"white\"&gt;Source:&lt;pre&gt;source&lt;/pre&gt;&lt;/body&gt;&lt;/html&gt;"</span>,</li><li>              <span class="hljs-string">"text/html"</span>,</li><li>              <span class="hljs-string">"UTF-8"</span></li><li>            );</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-comment">// 组件创建时，加载www.example.com</span></li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>Web组件可以通过data url方式直接加载HTML字符串。</p>     <div _ngcontent-tum-c106="" class="highlight-div"><div _ngcontent-tum-c106="" class="highlight-div-header"><div _ngcontent-tum-c106="" class="highlight-div-header-left"><div _ngcontent-tum-c106="" class="handle-button expand-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tum-c106="" class="highlight-div-header-right"><div _ngcontent-tum-c106="" class="handle-button ai-button"></div><div _ngcontent-tum-c106="" class="handle-button line-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tum-c106="" class="handle-button theme-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tum-c106="" class="handle-button copy-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tum-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">htmlStr</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"data:text/html, &lt;html&gt;&lt;body bgcolor=\"white\"&gt;Source:&lt;pre&gt;source&lt;/pre&gt;&lt;/body&gt;&lt;/html&gt;"</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 组件创建时，加载htmlStr</span></li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">htmlStr</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="resource协议加载本地资源">resource协议加载本地资源<i class="anchor-icon anchor-icon-link" anchorid="resource协议加载本地资源" tips="复制节点链接"></i></h2>          <p>resource协议允许访问应用资源目录中的文件。</p>     <div _ngcontent-tum-c106="" class="highlight-div"><div _ngcontent-tum-c106="" class="highlight-div-header"><div _ngcontent-tum-c106="" class="highlight-div-header-left"><div _ngcontent-tum-c106="" class="handle-button expand-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tum-c106="" class="highlight-div-header-right"><div _ngcontent-tum-c106="" class="handle-button ai-button"></div><div _ngcontent-tum-c106="" class="handle-button line-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tum-c106="" class="handle-button theme-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tum-c106="" class="handle-button copy-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tum-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ResourceWebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'加载Resource资源'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 通过resource加载resources/rawfile目录下的index1.html文件</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadUrl</span>(<span class="hljs-string">'resource://rawfile/index1.html'</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${error.code}</span>, Message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>          }</li><li>        })</li><li>
</li><li>      <span class="hljs-comment">// 组件创建时直接使用resource协议加载资源</span></li><li>      <span class="hljs-title class_">Web</span>({</li><li>        <span class="hljs-attr">src</span>: <span class="hljs-string">'resource://rawfile/index.html'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>})</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>在“src\main\resources\rawfile”文件夹下创建index.html：</p>     <div _ngcontent-tum-c106="" class="highlight-div"><div _ngcontent-tum-c106="" class="highlight-div-header"><div _ngcontent-tum-c106="" class="highlight-div-header-left"><div _ngcontent-tum-c106="" class="handle-button expand-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tum-c106="" class="highlight-div-header-right"><div _ngcontent-tum-c106="" class="handle-button ai-button"></div><div _ngcontent-tum-c106="" class="handle-button line-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tum-c106="" class="handle-button theme-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tum-c106="" class="handle-button copy-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tum-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>     <p>在“src\main\resources\rawfile”文件夹下创建index1.html：</p>     <div _ngcontent-tum-c106="" class="highlight-div"><div _ngcontent-tum-c106="" class="highlight-div-header"><div _ngcontent-tum-c106="" class="highlight-div-header-left"><div _ngcontent-tum-c106="" class="handle-button expand-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tum-c106="" class="highlight-div-header-right"><div _ngcontent-tum-c106="" class="handle-button ai-button"></div><div _ngcontent-tum-c106="" class="handle-button line-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tum-c106="" class="handle-button theme-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tum-c106="" class="handle-button copy-button"><div _ngcontent-tum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tum-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index1.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello World Again<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>   </div>   <div></div></div>