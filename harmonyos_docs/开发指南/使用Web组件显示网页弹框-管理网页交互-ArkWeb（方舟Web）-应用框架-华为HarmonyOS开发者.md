<h1 _ngcontent-wfq-c119="" class="doc-title ng-star-inserted" title="使用Web组件显示网页弹框"> 使用Web组件显示网页弹框 </h1>

<div _ngcontent-wfq-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>在HTML中，可以使用JavaScript创建三种类型的弹框：警告框window.alert(message)、确认框window.confirm(message)和提示框window.prompt(message, defaultValue)。这些弹框可以用于向用户传递信息、确认操作或请求输入。</p>    <p>当前，ArkWeb暂未提供默认的应用弹框。如果需要网页的弹框能够正常使用，应用需要通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onalert" target="_blank">onAlert</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onconfirm" target="_blank">onConfirm</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onprompt9" target="_blank">onPrompt</a>接口自定义弹框功能。</p>    <div class="tiledSection">     <h2 id="实现alert弹框">实现Alert弹框<i class="anchor-icon anchor-icon-link" anchorid="实现alert弹框" tips="复制节点链接"></i></h2>          <p>window.alert()用于显示一个包含可选信息的对话框。警告框用于确保用户可以得到某些信息。当警告框出现后，用户需要点击确定按钮才能继续进行操作。</p>     <ul>      <li>可选参数message是要显示在警告对话框中的字符串，如果传入其他类型的值，会转换成字符串。</li>      <li>该方法不存在返回值。</li>     </ul>     <p>应用可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onalert" target="_blank">onAlert</a>事件监听网页alert方法，并创建合适的弹框。</p>     <ul>      <li>       <p>用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-methods-alert-dialog-box" target="_blank">AlertDialog</a>创建弹框。</p>       <div _ngcontent-wfq-c106="" class="highlight-div"><div _ngcontent-wfq-c106="" class="highlight-div-header"><div _ngcontent-wfq-c106="" class="highlight-div-header-left"><div _ngcontent-wfq-c106="" class="handle-button expand-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfq-c106="" class="highlight-div-header-right"><div _ngcontent-wfq-c106="" class="handle-button ai-button"></div><div _ngcontent-wfq-c106="" class="handle-button line-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfq-c106="" class="handle-button theme-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfq-c106="" class="handle-button copy-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'test.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span> })</li><li>        .<span class="hljs-title function_">onAlert</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.url:"</span> + event.<span class="hljs-property">url</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.message:"</span> + event.<span class="hljs-property">message</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">showAlertDialog</span>({</li><li>              <span class="hljs-attr">title</span>: <span class="hljs-string">"来自"</span> + event.<span class="hljs-property">url</span> + <span class="hljs-string">"的警告"</span>,</li><li>              <span class="hljs-attr">message</span>: event.<span class="hljs-property">message</span>,</li><li>              <span class="hljs-attr">confirm</span>:{</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">"确认"</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Alert confirmed.'</span>);</li><li>                  event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleConfirm</span>();</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleCancel</span>();</li><li>              }</li><li>            })</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>       <p>加载的html。</p>       <div _ngcontent-wfq-c106="" class="highlight-div"><div _ngcontent-wfq-c106="" class="highlight-div-header"><div _ngcontent-wfq-c106="" class="highlight-div-header-left"><div _ngcontent-wfq-c106="" class="handle-button expand-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfq-c106="" class="highlight-div-header-right"><div _ngcontent-wfq-c106="" class="handle-button ai-button"></div><div _ngcontent-wfq-c106="" class="handle-button line-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfq-c106="" class="handle-button theme-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfq-c106="" class="handle-button copy-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfq-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- test.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span></span></li><li><span class="hljs-tag">          <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></li><li><span class="language-css">        <span class="hljs-selector-tag">button</span>,<span class="hljs-selector-tag">label</span>,<span class="hljs-selector-tag">input</span> {</span></li><li><span class="language-css">        <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"alert-message"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"message for alert"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"handleAlert()"</span>&gt;</span>alert<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleAlert</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        <span class="hljs-keyword">let</span> message = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"alert-message"</span>).<span class="hljs-property">value</span>;</span></li><li><span class="language-javascript">        <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">alert</span>(message ? message : <span class="hljs-string">'alert'</span>);</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div></li>      <li>       <p>用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-dialog#alertdialog" target="_blank">CustomDialog-AlertDialog</a>创建弹框。</p>       <div _ngcontent-wfq-c106="" class="highlight-div"><div _ngcontent-wfq-c106="" class="highlight-div-header"><div _ngcontent-wfq-c106="" class="highlight-div-header-left"><div _ngcontent-wfq-c106="" class="handle-button expand-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfq-c106="" class="highlight-div-header-right"><div _ngcontent-wfq-c106="" class="handle-button ai-button"></div><div _ngcontent-wfq-c106="" class="handle-button line-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfq-c106="" class="handle-button theme-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfq-c106="" class="handle-button copy-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AlertDialog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">AlertDialogPage</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">subtitle</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">JsResult</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">dialogControllerAlert</span>: <span class="hljs-title class_">CustomDialogController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">AlertDialog</span>({</li><li>      <span class="hljs-attr">primaryTitle</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>,</li><li>      <span class="hljs-attr">secondaryTitle</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">subtitle</span>,</li><li>      <span class="hljs-attr">content</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>,</li><li>      <span class="hljs-attr">primaryButton</span>: {</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'确认'</span>,</li><li>        <span class="hljs-attr">role</span>: <span class="hljs-title class_">ButtonRole</span>.<span class="hljs-property">ERROR</span>,</li><li>        <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the second button is clicked'</span>);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">handleConfirm</span>();</li><li>        }</li><li>      },</li><li>    }),</li><li>    <span class="hljs-attr">onWillDismiss</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">handleCancel</span>();</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogControllerAlert</span>.<span class="hljs-title function_">close</span>();</li><li>    }</li><li>  })</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'alert.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span> })</li><li>        .<span class="hljs-title function_">onAlert</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.url:"</span> + event.<span class="hljs-property">url</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.message:"</span> + event.<span class="hljs-property">message</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">"来自"</span> + event.<span class="hljs-property">url</span> + <span class="hljs-string">"的警告"</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = event.<span class="hljs-property">message</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span> = event.<span class="hljs-property">result</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogControllerAlert</span>.<span class="hljs-title function_">open</span>();</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>       <p>加载的html。</p>       <div _ngcontent-wfq-c106="" class="highlight-div"><div _ngcontent-wfq-c106="" class="highlight-div-header"><div _ngcontent-wfq-c106="" class="highlight-div-header-left"><div _ngcontent-wfq-c106="" class="handle-button expand-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfq-c106="" class="highlight-div-header-right"><div _ngcontent-wfq-c106="" class="handle-button ai-button"></div><div _ngcontent-wfq-c106="" class="handle-button line-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfq-c106="" class="handle-button theme-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfq-c106="" class="handle-button copy-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfq-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- alert.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span></span></li><li><span class="hljs-tag">          <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></li><li><span class="language-css">        <span class="hljs-selector-tag">button</span>,<span class="hljs-selector-tag">label</span>,<span class="hljs-selector-tag">input</span> {</span></li><li><span class="language-css">        <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"alert-message"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"message for alert"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"handleAlert()"</span>&gt;</span>alert<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleAlert</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        <span class="hljs-keyword">let</span> message = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"alert-message"</span>).<span class="hljs-property">value</span>;</span></li><li><span class="language-javascript">        <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">alert</span>(message ? message : <span class="hljs-string">'alert'</span>);</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>       <p><span><img originheight="533" originwidth="901" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114745.71806516388620076899359074727602:50001231000000:2800:5B7DB224D24DB2782EF24757FECF5FF6FD1C25FAC552CFEE37CFBCFC79E6A95C.gif" width="901" height="533"></span></p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="实现confirm弹框">实现Confirm弹框<i class="anchor-icon anchor-icon-link" anchorid="实现confirm弹框" tips="复制节点链接"></i></h2>          <p>window.confirm()用于显示一个包含可选消息的对话框，并等待用户确认或取消该对话框。</p>     <ul>      <li>可选参数message是要显示在对话框中的字符串，如果传入其他类型的值，会转换成字符串。</li>      <li>该方法返回一个布尔值，表示是否选择了确定（true）或取消（false）。如果应用忽略了页面内的对话框，那么返回值总是false。</li>     </ul>     <p>确认框用于验证用户是否接受某个操作，常用于询问用户是否离开网页，以防页面表单等数据丢失。</p>     <p>应用可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onconfirm" target="_blank">onConfirm</a>事件监听网页confirm方法，并创建合适的弹框。</p>     <ul>      <li>       <p>用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-methods-alert-dialog-box" target="_blank">AlertDialog</a>创建弹框。</p>       <div _ngcontent-wfq-c106="" class="highlight-div"><div _ngcontent-wfq-c106="" class="highlight-div-header"><div _ngcontent-wfq-c106="" class="highlight-div-header-left"><div _ngcontent-wfq-c106="" class="handle-button expand-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfq-c106="" class="highlight-div-header-right"><div _ngcontent-wfq-c106="" class="handle-button ai-button"></div><div _ngcontent-wfq-c106="" class="handle-button line-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfq-c106="" class="handle-button theme-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfq-c106="" class="handle-button copy-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'test.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span> })</li><li>        .<span class="hljs-title function_">onConfirm</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.url:"</span> + event.<span class="hljs-property">url</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.message:"</span> + event.<span class="hljs-property">message</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">showAlertDialog</span>({</li><li>              <span class="hljs-attr">title</span>: <span class="hljs-string">"来自"</span> + event.<span class="hljs-property">url</span> + <span class="hljs-string">"的消息"</span>,</li><li>              <span class="hljs-attr">message</span>: event.<span class="hljs-property">message</span>,</li><li>              <span class="hljs-attr">primaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'cancel'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleCancel</span>();</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">secondaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'ok'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleConfirm</span>();</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleCancel</span>();</li><li>              }</li><li>            })</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>       <p>加载的html。</p>       <div _ngcontent-wfq-c106="" class="highlight-div"><div _ngcontent-wfq-c106="" class="highlight-div-header"><div _ngcontent-wfq-c106="" class="highlight-div-header-left"><div _ngcontent-wfq-c106="" class="handle-button expand-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfq-c106="" class="highlight-div-header-right"><div _ngcontent-wfq-c106="" class="handle-button ai-button"></div><div _ngcontent-wfq-c106="" class="handle-button line-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfq-c106="" class="handle-button theme-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfq-c106="" class="handle-button copy-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfq-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- test.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span></span></li><li><span class="hljs-tag">          <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></li><li><span class="language-css">        <span class="hljs-selector-tag">button</span>,<span class="hljs-selector-tag">label</span>,<span class="hljs-selector-tag">input</span> {</span></li><li><span class="language-css">        <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>result：<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"confirmLabel"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"confirm"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"confirm-message"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"message for confirm"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"confirm"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"handleConfirm()"</span>&gt;</span>confirm<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleConfirm</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        <span class="hljs-keyword">let</span> message = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"confirm-message"</span>).<span class="hljs-property">value</span>;</span></li><li><span class="language-javascript">        <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">confirm</span>(message ? message : <span class="hljs-string">'confirm'</span>);</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(result);</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"confirmLabel"</span>).<span class="hljs-property">innerHTML</span>=<span class="hljs-title class_">String</span>(result);</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div></li>      <li>       <p>用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-dialog#confirmdialog" target="_blank">CustomDialog-ConfirmDialog</a>创建弹框。</p>       <div _ngcontent-wfq-c106="" class="highlight-div"><div _ngcontent-wfq-c106="" class="highlight-div-header"><div _ngcontent-wfq-c106="" class="highlight-div-header-left"><div _ngcontent-wfq-c106="" class="handle-button expand-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfq-c106="" class="highlight-div-header-right"><div _ngcontent-wfq-c106="" class="handle-button ai-button"></div><div _ngcontent-wfq-c106="" class="handle-button line-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfq-c106="" class="handle-button theme-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfq-c106="" class="handle-button copy-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfirmDialog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">DialogConfirmDialog</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">JsResult</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  isChecked = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-attr">dialogControllerCheckBox</span>: <span class="hljs-title class_">CustomDialogController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">ConfirmDialog</span>({</li><li>      <span class="hljs-attr">title</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>,</li><li>      <span class="hljs-attr">content</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>,</li><li>      <span class="hljs-comment">// 勾选框选中状态</span></li><li>      <span class="hljs-attr">isChecked</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isChecked</span>,</li><li>      <span class="hljs-comment">// 勾选框说明文本</span></li><li>      <span class="hljs-attr">checkTips</span>: <span class="hljs-string">'禁止后不再提示'</span>,</li><li>      <span class="hljs-attr">primaryButton</span>: {</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'禁止'</span>,</li><li>        <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">handleCancel</span>();</li><li>        },</li><li>      },</li><li>      <span class="hljs-attr">secondaryButton</span>: {</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'允许'</span>,</li><li>        <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isChecked</span> = <span class="hljs-literal">false</span>;</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the second button is clicked'</span>);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">handleConfirm</span>();</li><li>        }</li><li>      },</li><li>      <span class="hljs-attr">onCheckedChange</span>: <span class="hljs-function">(<span class="hljs-params">checked</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isChecked</span> = checked;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the checkbox is clicked'</span>);</li><li>      },</li><li>    }),</li><li>    <span class="hljs-attr">onWillDismiss</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">handleCancel</span>();</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogControllerCheckBox</span>.<span class="hljs-title function_">close</span>();</li><li>    },</li><li>    <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">true</span></li><li>  })</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'confirm.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span> })</li><li>        .<span class="hljs-title function_">onConfirm</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isChecked</span>) {</li><li>              event.<span class="hljs-property">result</span>.<span class="hljs-title function_">handleCancel</span>();</li><li>            } <span class="hljs-keyword">else</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.url:"</span> + event.<span class="hljs-property">url</span>);</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.message:"</span> + event.<span class="hljs-property">message</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">"来自"</span> + event.<span class="hljs-property">url</span> + <span class="hljs-string">"的消息"</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = event.<span class="hljs-property">message</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span> = event.<span class="hljs-property">result</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogControllerCheckBox</span>.<span class="hljs-title function_">open</span>();</li><li>            }</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>       <p>加载的html。</p>       <div _ngcontent-wfq-c106="" class="highlight-div"><div _ngcontent-wfq-c106="" class="highlight-div-header"><div _ngcontent-wfq-c106="" class="highlight-div-header-left"><div _ngcontent-wfq-c106="" class="handle-button expand-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfq-c106="" class="highlight-div-header-right"><div _ngcontent-wfq-c106="" class="handle-button ai-button"></div><div _ngcontent-wfq-c106="" class="handle-button line-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfq-c106="" class="handle-button theme-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfq-c106="" class="handle-button copy-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfq-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- confirm.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span></span></li><li><span class="hljs-tag">          <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></li><li><span class="language-css">        <span class="hljs-selector-tag">button</span>,<span class="hljs-selector-tag">label</span>,<span class="hljs-selector-tag">input</span> {</span></li><li><span class="language-css">        <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>result：<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"confirmLabel"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"confirm"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"confirm-message"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"message for confirm"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"confirm"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"handleConfirm()"</span>&gt;</span>confirm<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleConfirm</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        <span class="hljs-keyword">let</span> message = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"confirm-message"</span>).<span class="hljs-property">value</span>;</span></li><li><span class="language-javascript">        <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">confirm</span>(message ? message : <span class="hljs-string">'confirm'</span>);</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(result);</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"confirmLabel"</span>).<span class="hljs-property">innerHTML</span>=<span class="hljs-title class_">String</span>(result);</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>       <p><span><img originheight="533" originwidth="901" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114745.75668803620637648319539500306712:50001231000000:2800:B04DEC1BADCFDD3C0C1C9C4D62F4497F512B40683E9FECEA0E4B83F9801853B0.gif" width="901" height="533"></span></p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="实现prompt弹框">实现Prompt弹框<i class="anchor-icon anchor-icon-link" anchorid="实现prompt弹框" tips="复制节点链接"></i></h2>          <p>window.prompt()用于显示一个对话框，并等待用户提交文本或取消对话框。用户需要输入某个值，然后点击确认或取消按钮。点击确认返回输入的值，点击取消返回null。</p>     <ul>      <li>可选参数message向用户显示的一串文本。如果在提示窗口中没有什么可显示的，可以省略。</li>      <li>可选参数defaultValue是一个字符串，包含文本输入字段中显示的默认值。</li>      <li>返回值为用户输入文本的字符串，或null。</li>     </ul>     <p>提示框用于提示用户输入某个值，常用于需要用户输入临时的口令或验证码等场景。</p>     <p>应用可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onprompt9" target="_blank">onPrompt</a>事件监听网页prompt方法，并创建合适的弹框。</p>     <ul>      <li>       <p>用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-dialog#customcontentdialog12" target="_blank">CustomDialog-CustomContentDialog</a>创建弹框。</p>       <div _ngcontent-wfq-c106="" class="highlight-div"><div _ngcontent-wfq-c106="" class="highlight-div-header"><div _ngcontent-wfq-c106="" class="highlight-div-header-left"><div _ngcontent-wfq-c106="" class="handle-button expand-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfq-c106="" class="highlight-div-header-right"><div _ngcontent-wfq-c106="" class="handle-button ai-button"></div><div _ngcontent-wfq-c106="" class="handle-button line-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfq-c106="" class="handle-button theme-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfq-c106="" class="handle-button copy-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CustomContentDialog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PromptDialog</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">JsResult</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-attr">promptResult</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">CustomDialogController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomContentDialog</span>({</li><li>      <span class="hljs-attr">primaryTitle</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>,</li><li>      <span class="hljs-attr">contentBuilder</span>: <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">buildContent</span>();</li><li>      },</li><li>      <span class="hljs-attr">buttons</span>: [</li><li>        {</li><li>          <span class="hljs-attr">value</span>: <span class="hljs-string">'取消'</span>,</li><li>          <span class="hljs-attr">buttonStyle</span>: <span class="hljs-title class_">ButtonStyleMode</span>.<span class="hljs-property">TEXTUAL</span>,</li><li>          <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the button is clicked'</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">handleCancel</span>();</li><li>          }</li><li>        },</li><li>        {</li><li>          <span class="hljs-attr">value</span>: <span class="hljs-string">'确认'</span>,</li><li>          <span class="hljs-attr">buttonStyle</span>: <span class="hljs-title class_">ButtonStyleMode</span>.<span class="hljs-property">TEXTUAL</span>,</li><li>          <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">handlePromptConfirm</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">promptResult</span>);</li><li>          }</li><li>        }</li><li>      ],</li><li>    }),</li><li>    <span class="hljs-attr">onWillDismiss</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>?.<span class="hljs-title function_">handleCancel</span>();</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">close</span>();</li><li>    }</li><li>  });</li><li>
</li><li>  <span class="hljs-comment">// 自定义弹出框的内容区</span></li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">buildContent</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>      <span class="hljs-title class_">TextInput</span>()</li><li>        .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">promptResult</span> = value;</li><li>        })</li><li>        .<span class="hljs-title function_">defaultFocus</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'prompt.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span> })</li><li>        .<span class="hljs-title function_">onPrompt</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.url:"</span> + event.<span class="hljs-property">url</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.message:"</span> + event.<span class="hljs-property">message</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"event.value:"</span> + event.<span class="hljs-property">value</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">"来自"</span> + event.<span class="hljs-property">url</span> + <span class="hljs-string">"的消息"</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = event.<span class="hljs-property">message</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">promptResult</span> = event.<span class="hljs-property">value</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span> = event.<span class="hljs-property">result</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">open</span>();</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>       <p>加载的html。</p>       <div _ngcontent-wfq-c106="" class="highlight-div"><div _ngcontent-wfq-c106="" class="highlight-div-header"><div _ngcontent-wfq-c106="" class="highlight-div-header-left"><div _ngcontent-wfq-c106="" class="handle-button expand-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfq-c106="" class="highlight-div-header-right"><div _ngcontent-wfq-c106="" class="handle-button ai-button"></div><div _ngcontent-wfq-c106="" class="handle-button line-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfq-c106="" class="handle-button theme-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfq-c106="" class="handle-button copy-button"><div _ngcontent-wfq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfq-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- prompt.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span></span></li><li><span class="hljs-tag">          <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></li><li><span class="language-css">        <span class="hljs-selector-tag">button</span>,<span class="hljs-selector-tag">label</span>,<span class="hljs-selector-tag">input</span> {</span></li><li><span class="language-css">        <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>result：<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"promptLabel"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"prompt"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"prompt-message"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"message for prompt"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"prompt-value"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"default value for prompt"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"prompt"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"handlePrompt()"</span>&gt;</span>prompt<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handlePrompt</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        <span class="hljs-keyword">let</span> message = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"prompt-message"</span>).<span class="hljs-property">value</span>;</span></li><li><span class="language-javascript">        <span class="hljs-keyword">let</span> defaultValue = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"prompt-value"</span>).<span class="hljs-property">value</span>;</span></li><li><span class="language-javascript">        <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">prompt</span>(message ? message : <span class="hljs-string">'prompt'</span>, defaultValue);</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(result);</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"promptLabel"</span>).<span class="hljs-property">innerHTML</span>=result;</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>       <p><span><img originheight="513" originwidth="893" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114745.58495156397161410015070730007496:50001231000000:2800:738EFFCCF431764B2524C8CA598DB8FE234A55BE976769FFB532E7B29AF36F95.gif" width="893" height="513"></span></p></li>     </ul>    </div>   </div>   <div></div></div>