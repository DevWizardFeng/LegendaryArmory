<h1 _ngcontent-qoh-c119="" class="doc-title ng-star-inserted" title="使用Web组件管理网页缩放"> 使用Web组件管理网页缩放 </h1>

<div _ngcontent-qoh-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>Web组件支持手势缩放、鼠标滚轮、键盘缩放，以方便用户调整到舒适的显示大小。并对应用提供监听、控制页面缩放比例的功能，以便应用实现个性化的视觉效果。</p>    <div class="tiledSection">     <h2 id="启用禁用网页缩放">启用/禁用网页缩放<i class="anchor-icon anchor-icon-link" anchorid="启用禁用网页缩放" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="启用禁用网页手势缩放" class="firsth2">启用/禁用网页手势缩放<i class="anchor-icon anchor-icon-link" anchorid="启用禁用网页手势缩放" tips="复制节点链接"></i></h3>          <p>通过属性<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-attributes#zoomaccess" target="_blank">zoomAccess</a>控制网页缩放功能，当设置为false时，网页不允许手势缩放行为。</p>     <p>当html网页设置&lt;meta name="viewport" id="viewport" content="user-scalable=no"&gt;时，网页不允许手势缩放。</p>     <p>仅当zoomAccess和viewport标签都设置为允许缩放时，才允许手势缩放。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>在PC/2in1设备上，viewport标签不生效，仅能通过设置zoomAccess为false来禁用手势缩放。</p>       <p>以上方法仅能控制缩放功能的开关，但如果网页在viewport标签中设置了minimum-scale和maximum-scale，那么缩放的范围也会受到这两个属性的限制，当最大、最小值相等时，网页也是不能缩放的。</p>       <p>另外，网页的内容宽度也会限制缩小的比例。</p>      </div></div></div>     <div _ngcontent-qoh-c106="" class="highlight-div"><div _ngcontent-qoh-c106="" class="highlight-div-header"><div _ngcontent-qoh-c106="" class="highlight-div-header-left"><div _ngcontent-qoh-c106="" class="handle-button expand-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qoh-c106="" class="highlight-div-header-right"><div _ngcontent-qoh-c106="" class="handle-button ai-button"></div><div _ngcontent-qoh-c106="" class="handle-button line-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qoh-c106="" class="handle-button theme-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qoh-c106="" class="handle-button copy-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qoh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">zoomAccess</span>(<span class="hljs-literal">false</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="启用禁用手势强制缩放">启用/禁用手势强制缩放<i class="anchor-icon anchor-icon-link" anchorid="启用禁用手势强制缩放" tips="复制节点链接"></i></h3>          <p>通过属性<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-attributes#forceenablezoom21" target="_blank">forceEnableZoom</a>控制网页强制缩放功能，当设置为true时，手势缩放行为不受minimum-scale和maximum-scale以及user-scalable=no的限制。</p>    </div>    <div class="tiledSection">     <h3 id="启用禁用网页键盘鼠标缩放">启用/禁用网页键盘鼠标缩放<i class="anchor-icon anchor-icon-link" anchorid="启用禁用网页键盘鼠标缩放" tips="复制节点链接"></i></h3>          <p>ArkWeb默认支持通过Ctrl+按键'-'/'+' 或者 Ctrl+鼠标滚轮进行缩放。应用可以通过拦截键盘事件来阻止按键缩放，当前暂未支持拦截Ctrl+鼠标滚轮缩放。</p>     <p>通过拦截键盘事件来阻止按键缩放：</p>     <div _ngcontent-qoh-c106="" class="highlight-div"><div _ngcontent-qoh-c106="" class="highlight-div-header"><div _ngcontent-qoh-c106="" class="highlight-div-header-left"><div _ngcontent-qoh-c106="" class="handle-button expand-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qoh-c106="" class="highlight-div-header-right"><div _ngcontent-qoh-c106="" class="handle-button ai-button"></div><div _ngcontent-qoh-c106="" class="handle-button line-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qoh-c106="" class="handle-button theme-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qoh-c106="" class="handle-button copy-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qoh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">KeyCode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.InputKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">zoomAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onKeyPreIme</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event.<span class="hljs-property">type</span> == <span class="hljs-title class_">KeyType</span>.<span class="hljs-property">Down</span> &amp;&amp;</li><li>              event.<span class="hljs-property">getModifierKeyState</span> &amp;&amp;</li><li>              event.<span class="hljs-title function_">getModifierKeyState</span>([<span class="hljs-string">'Ctrl'</span>]) &amp;&amp;</li><li>              (event.<span class="hljs-property">keyCode</span> == <span class="hljs-title class_">KeyCode</span>.<span class="hljs-property">KEYCODE_MINUS</span> || event.<span class="hljs-property">keyCode</span> == <span class="hljs-title class_">KeyCode</span>.<span class="hljs-property">KEYCODE_EQUALS</span> ||</li><li>               event.<span class="hljs-property">keyCode</span> == <span class="hljs-title class_">KeyCode</span>.<span class="hljs-property">KEYCODE_NUMPAD_SUBTRACT</span> || event.<span class="hljs-property">keyCode</span> == <span class="hljs-title class_">KeyCode</span>.<span class="hljs-property">KEYCODE_NUMPAD_ADD</span>)) {</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="监听页面缩放比例变化">监听页面缩放比例变化<i class="anchor-icon anchor-icon-link" anchorid="监听页面缩放比例变化" tips="复制节点链接"></i></h2>          <p>应用可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onscalechange9" target="_blank">onScaleChange</a>接口监听页面缩放比例的变化。</p>     <p>该接口事件对应手势事件(双指缩放)，event.newScale对应网页属性visualViewport.scale。</p>     <div _ngcontent-qoh-c106="" class="highlight-div"><div _ngcontent-qoh-c106="" class="highlight-div-header"><div _ngcontent-qoh-c106="" class="highlight-div-header-left"><div _ngcontent-qoh-c106="" class="handle-button expand-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qoh-c106="" class="highlight-div-header-right"><div _ngcontent-qoh-c106="" class="handle-button ai-button"></div><div _ngcontent-qoh-c106="" class="handle-button line-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qoh-c106="" class="handle-button theme-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qoh-c106="" class="handle-button copy-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qoh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onScaleChange</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onScaleChange changed from '</span> + event.<span class="hljs-property">oldScale</span> + <span class="hljs-string">' to '</span> + event.<span class="hljs-property">newScale</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="控制网页的缩放比例">控制网页的缩放比例<i class="anchor-icon anchor-icon-link" anchorid="控制网页的缩放比例" tips="复制节点链接"></i></h2>          <p>应用可以通过设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-attributes#initialscale9" target="_blank">initialScale</a>属性设置页面初始缩放比例。</p>     <p>应用可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#zoom" target="_blank">zoom</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#zoomin" target="_blank">zoomIn</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#zoomout" target="_blank">zoomOut</a>接口控制页面缩放。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用以上接口控制页面缩放时，必须设置属性zoomAccess为true。zoomAccess为false时，zoom类接口会抛出异常17100004。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="以固定比例缩放页面" class="firsth2">以固定比例缩放页面<i class="anchor-icon anchor-icon-link" anchorid="以固定比例缩放页面" tips="复制节点链接"></i></h3>          <p>zoomIn将当前网页进行放大，比例为25%；zoomOut将当前网页进行缩小，比例为20%。</p>     <div _ngcontent-qoh-c106="" class="highlight-div"><div _ngcontent-qoh-c106="" class="highlight-div-header"><div _ngcontent-qoh-c106="" class="highlight-div-header-left"><div _ngcontent-qoh-c106="" class="handle-button expand-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qoh-c106="" class="highlight-div-header-right"><div _ngcontent-qoh-c106="" class="handle-button ai-button"></div><div _ngcontent-qoh-c106="" class="handle-button line-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qoh-c106="" class="handle-button theme-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qoh-c106="" class="handle-button copy-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qoh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'zoomIn'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">zoomIn</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'zoomOut'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">zoomOut</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">zoomAccess</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="根据输入值控制页面缩放比例">根据输入值控制页面缩放比例:<i class="anchor-icon anchor-icon-link" anchorid="根据输入值控制页面缩放比例" tips="复制节点链接"></i></h3>          <p>zoom基于当前网页比例进行缩放，入参要求大于0，当入参为1时为默认加载网页的缩放比例，入参小于1为缩小，入参大于1为放大。</p>     <div _ngcontent-qoh-c106="" class="highlight-div"><div _ngcontent-qoh-c106="" class="highlight-div-header"><div _ngcontent-qoh-c106="" class="highlight-div-header-left"><div _ngcontent-qoh-c106="" class="handle-button expand-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qoh-c106="" class="highlight-div-header-right"><div _ngcontent-qoh-c106="" class="handle-button ai-button"></div><div _ngcontent-qoh-c106="" class="handle-button line-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qoh-c106="" class="handle-button theme-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qoh-c106="" class="handle-button copy-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qoh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">factor</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">TextInput</span>()</li><li>        .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">InputType</span>.<span class="hljs-property">NUMBER_DECIMAL</span>)</li><li>        .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value</span>)=&gt;</span>{</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">factor</span> = <span class="hljs-title class_">Number</span>(value);</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'zoom'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">zoom</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">factor</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">zoomAccess</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="654" originwidth="1036" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114744.22578372374280362518480737636381:50001231000000:2800:29D1F88C3189B17376AA94B7844114F8FAB7D7D21E479587B8CAE6FC3640BC19.gif" width="920" height="580.7722007722008"></span></p>    </div>    <div class="tiledSection">     <h3 id="缩放页面到目标比例">缩放页面到目标比例:<i class="anchor-icon anchor-icon-link" anchorid="缩放页面到目标比例" tips="复制节点链接"></i></h3>          <p>通过onScaleChange接口，应用可以得知当前网页的缩放比例，配合zoom接口即可实现将页面缩放至指定比例的功能。根据当前页面缩放比例pageFactor和目标比例targetFactor计算zoom入参的公式为：</p>     <div _ngcontent-qoh-c106="" class="highlight-div"><div _ngcontent-qoh-c106="" class="highlight-div-header"><div _ngcontent-qoh-c106="" class="highlight-div-header-left"><div _ngcontent-qoh-c106="" class="handle-button expand-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qoh-c106="" class="highlight-div-header-right"><div _ngcontent-qoh-c106="" class="handle-button ai-button"></div><div _ngcontent-qoh-c106="" class="handle-button line-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qoh-c106="" class="handle-button theme-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qoh-c106="" class="handle-button copy-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qoh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-ini" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">factor</span> = <span class="hljs-number">100</span> * targetFactor / pageFactor</li></ol></pre></div></div>     <div _ngcontent-qoh-c106="" class="highlight-div"><div _ngcontent-qoh-c106="" class="highlight-div-header"><div _ngcontent-qoh-c106="" class="highlight-div-header-left"><div _ngcontent-qoh-c106="" class="handle-button expand-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qoh-c106="" class="highlight-div-header-right"><div _ngcontent-qoh-c106="" class="handle-button ai-button"></div><div _ngcontent-qoh-c106="" class="handle-button line-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qoh-c106="" class="handle-button theme-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qoh-c106="" class="handle-button copy-button"><div _ngcontent-qoh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qoh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">targetFactor</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">pageFactor</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">TextInput</span>()</li><li>        .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">InputType</span>.<span class="hljs-property">NUMBER_DECIMAL</span>)</li><li>        .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value</span>)=&gt;</span>{</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetFactor</span> = <span class="hljs-title class_">Number</span>(value);</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'zoom'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> factor = <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetFactor</span> * <span class="hljs-number">100</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageFactor</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">zoom</span>(factor);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">zoomAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onScaleChange</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onScaleChange changed from '</span> + event.<span class="hljs-property">oldScale</span> + <span class="hljs-string">' to '</span> + event.<span class="hljs-property">newScale</span>);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageFactor</span> = event.<span class="hljs-property">newScale</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="652" originwidth="1036" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114744.99694956863277610696039620247195:50001231000000:2800:B8AFA23A3DB2203C0C428522D84C223CBECD46F7B7F99C3B3C9CBBF82918B29B.gif" width="920" height="578.996138996139"></span></p>    </div>   </div>   <div></div></div>