<h1 _ngcontent-ktd-c119="" class="doc-title ng-star-inserted" title="使用picker管理联系人"> 使用picker管理联系人 </h1>

<div _ngcontent-ktd-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="接口说明">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.1.2.1.3.1.1" valign="top" width="50%">接口名</th> <th align="left" class="cellrowborder" id="mcps1.3.1.2.1.3.1.2" valign="top" width="50%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%">addContactViaUI(context: Context, contact: Contact): Promise&lt;number&gt;</td> <td class="cellrowborder" valign="top" width="50%">调用新建联系人接口，打开新建联系人UI界面，新建完成。使用Promise异步回调。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">saveToExistingContactViaUI(context: Context, contact: Contact): Promise&lt;number&gt;</td> <td class="cellrowborder" valign="top" width="50%">调用保存至已有联系人接口，选择联系人UI界面并完成编辑。使用Promise异步回调。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="使用picker新建联系人">使用picker新建联系人<i class="anchor-icon anchor-icon-link" anchorid="使用picker新建联系人" tips="复制节点链接"></i></h2><p>调用新建联系人接口，打开新建联系人UI界面，用户可在UI界面中填写并新建联系人。</p> <div _ngcontent-ktd-c106="" class="highlight-div"><div _ngcontent-ktd-c106="" class="highlight-div-header"><div _ngcontent-ktd-c106="" class="highlight-div-header-left"><div _ngcontent-ktd-c106="" class="handle-button expand-button"><div _ngcontent-ktd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ktd-c106="" class="highlight-div-header-right"><div _ngcontent-ktd-c106="" class="handle-button ai-button"></div><div _ngcontent-ktd-c106="" class="handle-button line-button"><div _ngcontent-ktd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ktd-c106="" class="handle-button theme-button"><div _ngcontent-ktd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ktd-c106="" class="handle-button copy-button"><div _ngcontent-ktd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ktd-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" hw-language="js" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { contact } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ContactsKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>
</li><li>@<span class="hljs-title class_">Entry</span></li><li>@<span class="hljs-title class_">Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  @<span class="hljs-title class_">State</span> <span class="hljs-attr">message</span>: string = <span class="hljs-string">'Hello World'</span>;</li><li>    </li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">contactInfo</span>: contact.<span class="hljs-property">Contact</span> = {</li><li>            <span class="hljs-attr">name</span>: {</li><li>              <span class="hljs-attr">fullName</span>: <span class="hljs-string">'xxx'</span></li><li>            },</li><li>            <span class="hljs-attr">phoneNumbers</span>: [{</li><li>              <span class="hljs-attr">phoneNumber</span>: <span class="hljs-string">'138xxxxxx'</span></li><li>            }]</li><li>          }</li><li>          <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>          <span class="hljs-keyword">let</span> promise = contact.<span class="hljs-title function_">addContactViaUI</span>(context, contactInfo);</li><li>          promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in add Contact via UI.data-&gt;<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>            }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to add Contact via UI. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            });</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="使用picker更新联系人信息">使用picker更新联系人信息<i class="anchor-icon anchor-icon-link" anchorid="使用picker更新联系人信息" tips="复制节点链接"></i></h2><p>可以通过拉起picker，将选中的联系人信息更新到现有联系人中。</p> <div _ngcontent-ktd-c106="" class="highlight-div"><div _ngcontent-ktd-c106="" class="highlight-div-header"><div _ngcontent-ktd-c106="" class="highlight-div-header-left"><div _ngcontent-ktd-c106="" class="handle-button expand-button"><div _ngcontent-ktd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ktd-c106="" class="highlight-div-header-right"><div _ngcontent-ktd-c106="" class="handle-button ai-button"></div><div _ngcontent-ktd-c106="" class="handle-button line-button"><div _ngcontent-ktd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ktd-c106="" class="handle-button theme-button"><div _ngcontent-ktd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ktd-c106="" class="handle-button copy-button"><div _ngcontent-ktd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ktd-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" hw-language="js" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { contact } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ContactsKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>
</li><li>@<span class="hljs-title class_">Entry</span></li><li>@<span class="hljs-title class_">Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  @<span class="hljs-title class_">State</span> <span class="hljs-attr">message</span>: string = <span class="hljs-string">'Hello World'</span>;</li><li>    </li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">contactInfo</span>: contact.<span class="hljs-property">Contact</span> = {</li><li>            <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,</li><li>            <span class="hljs-attr">name</span>: {</li><li>              <span class="hljs-attr">fullName</span>: <span class="hljs-string">'xxx'</span></li><li>            },</li><li>            <span class="hljs-attr">phoneNumbers</span>: [{</li><li>              <span class="hljs-attr">phoneNumber</span>: <span class="hljs-string">'138xxxxxx'</span></li><li>            }]</li><li>          }</li><li>          <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>          <span class="hljs-keyword">let</span> promise = contact.<span class="hljs-title function_">saveToExistingContactViaUI</span>(context, contactInfo);</li><li>          promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in save to existing Contact via UI.data-&gt;<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>            }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to save to existing Contact via UI. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            });</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>