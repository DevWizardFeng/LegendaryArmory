<h1 _ngcontent-ulf-c119="" class="doc-title ng-star-inserted" title="使用智能防跟踪功能"> 使用智能防跟踪功能 </h1>

<div _ngcontent-ulf-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>Web组件支持智能防跟踪功能，即当跟踪型网站作为第三方插入到其他网页时，其发送的网络请求将禁止携带cookie。</p>    <ul>     <li>      <p>通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#enableintelligenttrackingprevention12" target="_blank">enableIntelligentTrackingPrevention</a>接口启用或关闭Web组件的智能防跟踪功能。默认情况下，该功能未启用。</p>      <div _ngcontent-ulf-c106="" class="highlight-div"><div _ngcontent-ulf-c106="" class="highlight-div-header"><div _ngcontent-ulf-c106="" class="highlight-div-header-left"><div _ngcontent-ulf-c106="" class="handle-button expand-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ulf-c106="" class="highlight-div-header-right"><div _ngcontent-ulf-c106="" class="handle-button ai-button"></div><div _ngcontent-ulf-c106="" class="handle-button line-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ulf-c106="" class="handle-button theme-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ulf-c106="" class="handle-button copy-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ulf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'enableIntelligentTrackingPrevention'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">enableIntelligentTrackingPrevention</span>(<span class="hljs-literal">true</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"enableIntelligentTrackingPrevention: true"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>     <li>      <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#isintelligenttrackingpreventionenabled12" target="_blank">isIntelligentTrackingPreventionEnabled</a>接口，判断Web组件是否开启了智能防跟踪功能。</p>      <div _ngcontent-ulf-c106="" class="highlight-div"><div _ngcontent-ulf-c106="" class="highlight-div-header"><div _ngcontent-ulf-c106="" class="highlight-div-header-left"><div _ngcontent-ulf-c106="" class="handle-button expand-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ulf-c106="" class="highlight-div-header-right"><div _ngcontent-ulf-c106="" class="handle-button ai-button"></div><div _ngcontent-ulf-c106="" class="handle-button line-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ulf-c106="" class="handle-button theme-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ulf-c106="" class="handle-button copy-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ulf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'isIntelligentTrackingPreventionEnabled'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">isIntelligentTrackingPreventionEnabled</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"result: "</span> + result);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>     <li>      <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onintelligenttrackingpreventionresult12" target="_blank">onIntelligentTrackingPreventionResult</a>接口将被拦截的跟踪型域名及其触发网站的域名回调给应用。</p>      <div _ngcontent-ulf-c106="" class="highlight-div"><div _ngcontent-ulf-c106="" class="highlight-div-header"><div _ngcontent-ulf-c106="" class="highlight-div-header-left"><div _ngcontent-ulf-c106="" class="handle-button expand-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ulf-c106="" class="highlight-div-header-right"><div _ngcontent-ulf-c106="" class="handle-button ai-button"></div><div _ngcontent-ulf-c106="" class="handle-button line-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ulf-c106="" class="handle-button theme-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ulf-c106="" class="handle-button copy-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ulf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 需要打开智能防跟踪功能，才会触发onIntelligentTrackingPreventionResult回调</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'enableIntelligentTrackingPrevention'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">enableIntelligentTrackingPrevention</span>(<span class="hljs-literal">true</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onIntelligentTrackingPreventionResult</span>(<span class="hljs-function">(<span class="hljs-params">details</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onIntelligentTrackingPreventionResult: [websiteHost]= "</span> + details.<span class="hljs-property">host</span> +</li><li>            <span class="hljs-string">", [trackerHost]="</span> + details.<span class="hljs-property">trackerHost</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>    </ul>    <p>智能防跟踪功能提供了一组接口，用于设置绕过该功能的域名列表。这些接口设置的域名列表适用于整个应用，而非特定的Web组件。</p>    <ul>     <li>      <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#addintelligenttrackingpreventionbypassinglist12" target="_blank">addIntelligentTrackingPreventionBypassingList</a>接口设置绕过域名列表。</p>      <div _ngcontent-ulf-c106="" class="highlight-div"><div _ngcontent-ulf-c106="" class="highlight-div-header"><div _ngcontent-ulf-c106="" class="highlight-div-header-left"><div _ngcontent-ulf-c106="" class="handle-button expand-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ulf-c106="" class="highlight-div-header-right"><div _ngcontent-ulf-c106="" class="handle-button ai-button"></div><div _ngcontent-ulf-c106="" class="handle-button line-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ulf-c106="" class="handle-button theme-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ulf-c106="" class="handle-button copy-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ulf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'addIntelligentTrackingPreventionBypassingList'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> hostList = [<span class="hljs-string">"www.test1.com"</span>, <span class="hljs-string">"www.test2.com"</span>, <span class="hljs-string">"www.test3.com"</span>];</li><li>            webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">addIntelligentTrackingPreventionBypassingList</span>(hostList);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>     <li>      <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#removeintelligenttrackingpreventionbypassinglist12" target="_blank">removeIntelligentTrackingPreventionBypassingList</a>接口删除部分绕过域名列表。</p>      <div _ngcontent-ulf-c106="" class="highlight-div"><div _ngcontent-ulf-c106="" class="highlight-div-header"><div _ngcontent-ulf-c106="" class="highlight-div-header-left"><div _ngcontent-ulf-c106="" class="handle-button expand-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ulf-c106="" class="highlight-div-header-right"><div _ngcontent-ulf-c106="" class="handle-button ai-button"></div><div _ngcontent-ulf-c106="" class="handle-button line-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ulf-c106="" class="handle-button theme-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ulf-c106="" class="handle-button copy-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ulf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'removeIntelligentTrackingPreventionBypassingList'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> hostList = [ <span class="hljs-string">"www.test1.com"</span>, <span class="hljs-string">"www.test2.com"</span> ];</li><li>            webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">removeIntelligentTrackingPreventionBypassingList</span>(hostList);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>     <li>      <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#clearintelligenttrackingpreventionbypassinglist12" target="_blank">clearIntelligentTrackingPreventionBypassingList</a>接口清除所有绕过域名列表。</p>      <div _ngcontent-ulf-c106="" class="highlight-div"><div _ngcontent-ulf-c106="" class="highlight-div-header"><div _ngcontent-ulf-c106="" class="highlight-div-header-left"><div _ngcontent-ulf-c106="" class="handle-button expand-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ulf-c106="" class="highlight-div-header-right"><div _ngcontent-ulf-c106="" class="handle-button ai-button"></div><div _ngcontent-ulf-c106="" class="handle-button line-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ulf-c106="" class="handle-button theme-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ulf-c106="" class="handle-button copy-button"><div _ngcontent-ulf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ulf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'clearIntelligentTrackingPreventionBypassingList'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">clearIntelligentTrackingPreventionBypassingList</span>();</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>    </ul>   </div>   <div></div></div>