<h1 _ngcontent-vum-c119="" class="doc-title ng-star-inserted" title="使用系统预置CA证书校验证书链"> 使用系统预置CA证书校验证书链 </h1>

<div _ngcontent-vum-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>从API 20开始，支持使用系统预置CA证书校验证书链。</p>    <p>以校验证书链为例，完成证书链对象的创建，使用系统预置CA证书对证书链进行校验。</p>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>导入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cert" target="_blank">证书算法库框架模块</a>。</p>       <div _ngcontent-vum-c106="" class="highlight-div"><div _ngcontent-vum-c106="" class="highlight-div-header"><div _ngcontent-vum-c106="" class="highlight-div-header-left"><div _ngcontent-vum-c106="" class="handle-button expand-button"><div _ngcontent-vum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vum-c106="" class="highlight-div-header-right"><div _ngcontent-vum-c106="" class="handle-button ai-button"></div><div _ngcontent-vum-c106="" class="handle-button line-button"><div _ngcontent-vum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vum-c106="" class="handle-button theme-button"><div _ngcontent-vum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vum-c106="" class="handle-button copy-button"><div _ngcontent-vum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vum-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cert } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li></ol></pre></div></div></li>      <li>       <p>基于已有的证书数据，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cert#certcreatex509certchain11" target="_blank">cert.createX509CertChain</a>创建X509证书链对象，并返回结果。</p></li>      <li>       <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cert#validate11" target="_blank">x509CertChain.validate</a>设置校验参数trustSystemCa为true，使用系统预置CA证书校验证书链并返回结果。</p></li>     </ol>     <div _ngcontent-vum-c106="" class="highlight-div"><div _ngcontent-vum-c106="" class="highlight-div-header"><div _ngcontent-vum-c106="" class="highlight-div-header-left"><div _ngcontent-vum-c106="" class="handle-button expand-button"><div _ngcontent-vum-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vum-c106="" class="highlight-div-header-right"><div _ngcontent-vum-c106="" class="handle-button ai-button"></div><div _ngcontent-vum-c106="" class="handle-button line-button"><div _ngcontent-vum-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vum-c106="" class="handle-button theme-button"><div _ngcontent-vum-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vum-c106="" class="handle-button copy-button"><div _ngcontent-vum-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vum-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cert } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { util } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> certChainData = <span class="hljs-string">"-----BEGIN CERTIFICATE-----\r\n"</span> +</li><li><span class="hljs-string">"MIIJ7DCCCNSgAwIBAgIMTkADpl62gfh/S9jrMA0GCSqGSIb3DQEBCwUAMFAxCzAJ\r\n"</span> +</li><li><span class="hljs-string">"BgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWduIG52LXNhMSYwJAYDVQQDEx1H\r\n"</span> +</li><li><span class="hljs-string">"bG9iYWxTaWduIFJTQSBPViBTU0wgQ0EgMjAxODAeFw0yNDA3MDgwMTQxMDJaFw0y\r\n"</span> +</li><li><span class="hljs-string">"NTA4MDkwMTQxMDFaMIGAMQswCQYDVQQGEwJDTjEQMA4GA1UECBMHYmVpamluZzEQ\r\n"</span> +</li><li><span class="hljs-string">"MA4GA1UEBxMHYmVpamluZzE5MDcGA1UEChMwQmVpamluZyBCYWlkdSBOZXRjb20g\r\n"</span> +</li><li><span class="hljs-string">"U2NpZW5jZSBUZWNobm9sb2d5IENvLiwgTHRkMRIwEAYDVQQDEwliYWlkdS5jb20w\r\n"</span> +</li><li><span class="hljs-string">"ggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC1wFMskJ2dseOqoHptNwot\r\n"</span> +</li><li><span class="hljs-string">"FOhdBERsZ4VQnRNKXEEXMQEfgbNtScQ+C/Z+IpRAt1EObhYlifn74kt2nTsCQLng\r\n"</span> +</li><li><span class="hljs-string">"jfQkRVBuO/6PNGKdlCYGBeGqAL7xR+LOyHnpH9mwCBJc+WVt2zYM9I1clpXCJa+I\r\n"</span> +</li><li><span class="hljs-string">"tsq6qpb1AGoQxRDZ2n4K8Gd61wgNCPHDHc/Lk9NPJoUBMvYWvEe5lKhHsJtWtHe4\r\n"</span> +</li><li><span class="hljs-string">"QC3y58Vi+r5R0PWn2hyTBr9fCo58p/stDiRqp9Irtmi95YhwkNkmgwpMB8RhcGoN\r\n"</span> +</li><li><span class="hljs-string">"h+Uw5TkPZVj4AVaoPT1ED/GMKZev0+ypmp0+nmjVg2x7yUfLUfp3X7oBdI4TS2hv\r\n"</span> +</li><li><span class="hljs-string">"AgMBAAGjggaTMIIGjzAOBgNVHQ8BAf8EBAMCBaAwDAYDVR0TAQH/BAIwADCBjgYI\r\n"</span> +</li><li><span class="hljs-string">"KwYBBQUHAQEEgYEwfzBEBggrBgEFBQcwAoY4aHR0cDovL3NlY3VyZS5nbG9iYWxz\r\n"</span> +</li><li><span class="hljs-string">"aWduLmNvbS9jYWNlcnQvZ3Nyc2FvdnNzbGNhMjAxOC5jcnQwNwYIKwYBBQUHMAGG\r\n"</span> +</li><li><span class="hljs-string">"K2h0dHA6Ly9vY3NwLmdsb2JhbHNpZ24uY29tL2dzcnNhb3Zzc2xjYTIwMTgwVgYD\r\n"</span> +</li><li><span class="hljs-string">"VR0gBE8wTTBBBgkrBgEEAaAyARQwNDAyBggrBgEFBQcCARYmaHR0cHM6Ly93d3cu\r\n"</span> +</li><li><span class="hljs-string">"Z2xvYmFsc2lnbi5jb20vcmVwb3NpdG9yeS8wCAYGZ4EMAQICMD8GA1UdHwQ4MDYw\r\n"</span> +</li><li><span class="hljs-string">"NKAyoDCGLmh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vZ3Nyc2FvdnNzbGNhMjAx\r\n"</span> +</li><li><span class="hljs-string">"OC5jcmwwggNhBgNVHREEggNYMIIDVIIJYmFpZHUuY29tggxiYWlmdWJhby5jb22C\r\n"</span> +</li><li><span class="hljs-string">"DHd3dy5iYWlkdS5jboIQd3d3LmJhaWR1LmNvbS5jboIPbWN0LnkubnVvbWkuY29t\r\n"</span> +</li><li><span class="hljs-string">"ggthcG9sbG8uYXV0b4IGZHd6LmNuggsqLmJhaWR1LmNvbYIOKi5iYWlmdWJhby5j\r\n"</span> +</li><li><span class="hljs-string">"b22CESouYmFpZHVzdGF0aWMuY29tgg4qLmJkc3RhdGljLmNvbYILKi5iZGltZy5j\r\n"</span> +</li><li><span class="hljs-string">"b22CDCouaGFvMTIzLmNvbYILKi5udW9taS5jb22CDSouY2h1YW5rZS5jb22CDSou\r\n"</span> +</li><li><span class="hljs-string">"dHJ1c3Rnby5jb22CDyouYmNlLmJhaWR1LmNvbYIQKi5leXVuLmJhaWR1LmNvbYIP\r\n"</span> +</li><li><span class="hljs-string">"Ki5tYXAuYmFpZHUuY29tgg8qLm1iZC5iYWlkdS5jb22CESouZmFueWkuYmFpZHUu\r\n"</span> +</li><li><span class="hljs-string">"Y29tgg4qLmJhaWR1YmNlLmNvbYIMKi5taXBjZG4uY29tghAqLm5ld3MuYmFpZHUu\r\n"</span> +</li><li><span class="hljs-string">"Y29tgg4qLmJhaWR1cGNzLmNvbYIMKi5haXBhZ2UuY29tggsqLmFpcGFnZS5jboIN\r\n"</span> +</li><li><span class="hljs-string">"Ki5iY2Vob3N0LmNvbYIQKi5zYWZlLmJhaWR1LmNvbYIOKi5pbS5iYWlkdS5jb22C\r\n"</span> +</li><li><span class="hljs-string">"EiouYmFpZHVjb250ZW50LmNvbYILKi5kbG5lbC5jb22CCyouZGxuZWwub3JnghIq\r\n"</span> +</li><li><span class="hljs-string">"LmR1ZXJvcy5iYWlkdS5jb22CDiouc3UuYmFpZHUuY29tgggqLjkxLmNvbYISKi5o\r\n"</span> +</li><li><span class="hljs-string">"YW8xMjMuYmFpZHUuY29tgg0qLmFwb2xsby5hdXRvghIqLnh1ZXNodS5iYWlkdS5j\r\n"</span> +</li><li><span class="hljs-string">"b22CESouYmouYmFpZHViY2UuY29tghEqLmd6LmJhaWR1YmNlLmNvbYIOKi5zbWFy\r\n"</span> +</li><li><span class="hljs-string">"dGFwcHMuY26CDSouYmR0anJjdi5jb22CDCouaGFvMjIyLmNvbYIMKi5oYW9rYW4u\r\n"</span> +</li><li><span class="hljs-string">"Y29tgg8qLnBhZS5iYWlkdS5jb22CESoudmQuYmRzdGF0aWMuY29tghEqLmNsb3Vk\r\n"</span> +</li><li><span class="hljs-string">"LmJhaWR1LmNvbYISY2xpY2suaG0uYmFpZHUuY29tghBsb2cuaG0uYmFpZHUuY29t\r\n"</span> +</li><li><span class="hljs-string">"ghBjbS5wb3MuYmFpZHUuY29tghB3bi5wb3MuYmFpZHUuY29tghR1cGRhdGUucGFu\r\n"</span> +</li><li><span class="hljs-string">"LmJhaWR1LmNvbTAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwHwYDVR0j\r\n"</span> +</li><li><span class="hljs-string">"BBgwFoAU+O9/8s14Z6jeb48kjYjxhwMCs+swHQYDVR0OBBYEFK3KAFTK2OWUto+D\r\n"</span> +</li><li><span class="hljs-string">"2ieAKE5ZJDsYMIIBfwYKKwYBBAHWeQIEAgSCAW8EggFrAWkAdgCvGBoo1oyj4KmK\r\n"</span> +</li><li><span class="hljs-string">"TJxnqwn4u7wiuq68sTijoZ3T+bYDDQAAAZCQAGzzAAAEAwBHMEUCIFwF5Jc+zyIF\r\n"</span> +</li><li><span class="hljs-string">"Gnpxchz9fY1qzlqg/oVrs2nnuxcpBuuIAiEAu3scD6u51VOP/9aMSqR2yKHZLbHw\r\n"</span> +</li><li><span class="hljs-string">"Fos9U7AzSdLIZa8AdgAS8U40vVNyTIQGGcOPP3oT+Oe1YoeInG0wBYTr5YYmOgAA\r\n"</span> +</li><li><span class="hljs-string">"AZCQAG3iAAAEAwBHMEUCIBBYQ6NP7VUDgfktWRg5QxT23QAbTqYovtV2D9O8Qc0T\r\n"</span> +</li><li><span class="hljs-string">"AiEA2P7+44EvQ5adwL1y56oyxv/m+Gujeia7wpo7+Xbhv6MAdwAN4fIwK9MNwUBi\r\n"</span> +</li><li><span class="hljs-string">"EgnqVS78R3R8sdfpMO8OQh60fk6qNAAAAZCQAGy+AAAEAwBIMEYCIQDU7Hxtx4c9\r\n"</span> +</li><li><span class="hljs-string">"p9Jd+cr+DCMtyRYSc0b8cktCcbMmtDE9ygIhAIpJd4yb7jtxnaEC8oLWDushbK1v\r\n"</span> +</li><li><span class="hljs-string">"0BIuZu6YrQvsf1nQMA0GCSqGSIb3DQEBCwUAA4IBAQCh9DfewC012/+fHZpmSpCn\r\n"</span> +</li><li><span class="hljs-string">"y+h3/+ClAZ8cJVO+LCmYz9r6bkyhcFquJ5qUpyoW8AYtU0oUFlqH6zLIyujW+7lq\r\n"</span> +</li><li><span class="hljs-string">"wFxB6NsXKKdwBKmMbmnZr2Fca5f+TtwD/GDJgG/egr7fI1u8194j9KEl8cK8Fujm\r\n"</span> +</li><li><span class="hljs-string">"+UsoWklEzd1It9xkLazJR/6SwbhSR4k610pvj8rQrS4wAewuYFDaDOfqsHtDIsx1\r\n"</span> +</li><li><span class="hljs-string">"tZfIfoB/O1wGWZQJU2M9wC8uYq0jQ2Q0MQJXuyJz04MFiGrPAS1Uk8mWd8M+3p65\r\n"</span> +</li><li><span class="hljs-string">"Xy4iAf8uWzs1M+fcwBE8BNBghkQgE+FSUsldm+5ZBCazU0joJswzldWisXMLTagI\r\n"</span> +</li><li><span class="hljs-string">"-----END CERTIFICATE-----\r\n"</span> +</li><li><span class="hljs-string">"-----BEGIN CERTIFICATE-----\r\n"</span> +</li><li><span class="hljs-string">"MIIETjCCAzagAwIBAgINAe5fIh38YjvUMzqFVzANBgkqhkiG9w0BAQsFADBMMSAw\r\n"</span> +</li><li><span class="hljs-string">"HgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xvYmFs\r\n"</span> +</li><li><span class="hljs-string">"U2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0xODExMjEwMDAwMDBaFw0yODEx\r\n"</span> +</li><li><span class="hljs-string">"MjEwMDAwMDBaMFAxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWduIG52\r\n"</span> +</li><li><span class="hljs-string">"LXNhMSYwJAYDVQQDEx1HbG9iYWxTaWduIFJTQSBPViBTU0wgQ0EgMjAxODCCASIw\r\n"</span> +</li><li><span class="hljs-string">"DQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdaydUMGCEAI9WXD+uu3Vxoa2uP\r\n"</span> +</li><li><span class="hljs-string">"UGATeoHLl+6OimGUSyZ59gSnKvuk2la77qCk8HuKf1UfR5NhDW5xUTolJAgvjOH3\r\n"</span> +</li><li><span class="hljs-string">"idaSz6+zpz8w7bXfIa7+9UQX/dhj2S/TgVprX9NHsKzyqzskeU8fxy7quRU6fBhM\r\n"</span> +</li><li><span class="hljs-string">"abO1IFkJXinDY+YuRluqlJBJDrnw9UqhCS98NE3QvADFBlV5Bs6i0BDxSEPouVq1\r\n"</span> +</li><li><span class="hljs-string">"lVW9MdIbPYa+oewNEtssmSStR8JvA+Z6cLVwzM0nLKWMjsIYPJLJLnNvBhBWk0Cq\r\n"</span> +</li><li><span class="hljs-string">"o8VS++XFBdZpaFwGue5RieGKDkFNm5KQConpFmvv73W+eka440eKHRwup08CAwEA\r\n"</span> +</li><li><span class="hljs-string">"AaOCASkwggElMA4GA1UdDwEB/wQEAwIBhjASBgNVHRMBAf8ECDAGAQH/AgEAMB0G\r\n"</span> +</li><li><span class="hljs-string">"A1UdDgQWBBT473/yzXhnqN5vjySNiPGHAwKz6zAfBgNVHSMEGDAWgBSP8Et/qC5F\r\n"</span> +</li><li><span class="hljs-string">"JK5NUPpjmove4t0bvDA+BggrBgEFBQcBAQQyMDAwLgYIKwYBBQUHMAGGImh0dHA6\r\n"</span> +</li><li><span class="hljs-string">"Ly9vY3NwMi5nbG9iYWxzaWduLmNvbS9yb290cjMwNgYDVR0fBC8wLTAroCmgJ4Yl\r\n"</span> +</li><li><span class="hljs-string">"aHR0cDovL2NybC5nbG9iYWxzaWduLmNvbS9yb290LXIzLmNybDBHBgNVHSAEQDA+\r\n"</span> +</li><li><span class="hljs-string">"MDwGBFUdIAAwNDAyBggrBgEFBQcCARYmaHR0cHM6Ly93d3cuZ2xvYmFsc2lnbi5j\r\n"</span> +</li><li><span class="hljs-string">"b20vcmVwb3NpdG9yeS8wDQYJKoZIhvcNAQELBQADggEBAJmQyC1fQorUC2bbmANz\r\n"</span> +</li><li><span class="hljs-string">"EdSIhlIoU4r7rd/9c446ZwTbw1MUcBQJfMPg+NccmBqixD7b6QDjynCy8SIwIVbb\r\n"</span> +</li><li><span class="hljs-string">"0615XoFYC20UgDX1b10d65pHBf9ZjQCxQNqQmJYaumxtf4z1s4DfjGRzNpZ5eWl0\r\n"</span> +</li><li><span class="hljs-string">"6r/4ngGPoJVpjemEuunl1Ig423g7mNA2eymw0lIYkN5SQwCuaifIFJ6GlazhgDEw\r\n"</span> +</li><li><span class="hljs-string">"fpolu4usBCOmmQDo8dIm7A9+O4orkjgTHY+GzYZSR+Y0fFukAj6KYXwidlNalFMz\r\n"</span> +</li><li><span class="hljs-string">"hriSqHKvoflShx8xpfywgVcvzfTO3PYkz6fiNJBonf6q8amaEsybwMbDqKWwIX7e\r\n"</span> +</li><li><span class="hljs-string">"SPY=\r\n"</span> +</li><li><span class="hljs-string">"-----END CERTIFICATE-----\r\n"</span> +</li><li><span class="hljs-string">"-----BEGIN CERTIFICATE-----\r\n"</span> +</li><li><span class="hljs-string">"MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G\r\n"</span> +</li><li><span class="hljs-string">"A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp\r\n"</span> +</li><li><span class="hljs-string">"Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4\r\n"</span> +</li><li><span class="hljs-string">"MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG\r\n"</span> +</li><li><span class="hljs-string">"A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI\r\n"</span> +</li><li><span class="hljs-string">"hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8\r\n"</span> +</li><li><span class="hljs-string">"RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT\r\n"</span> +</li><li><span class="hljs-string">"gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm\r\n"</span> +</li><li><span class="hljs-string">"KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd\r\n"</span> +</li><li><span class="hljs-string">"QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ\r\n"</span> +</li><li><span class="hljs-string">"XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw\r\n"</span> +</li><li><span class="hljs-string">"DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o\r\n"</span> +</li><li><span class="hljs-string">"LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU\r\n"</span> +</li><li><span class="hljs-string">"RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp\r\n"</span> +</li><li><span class="hljs-string">"jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK\r\n"</span> +</li><li><span class="hljs-string">"6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX\r\n"</span> +</li><li><span class="hljs-string">"mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs\r\n"</span> +</li><li><span class="hljs-string">"Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH\r\n"</span> +</li><li><span class="hljs-string">"WD9f\r\n"</span> +</li><li><span class="hljs-string">"-----END CERTIFICATE-----\r\n"</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sample</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> textEncoder = <span class="hljs-keyword">new</span> util.<span class="hljs-title class_">TextEncoder</span>();</li><li>  <span class="hljs-comment">// 证书链二进制数据，需业务自行赋值。</span></li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">encodingBlob</span>: cert.<span class="hljs-property">EncodingBlob</span> = {</li><li>    <span class="hljs-attr">data</span>: textEncoder.<span class="hljs-title function_">encodeInto</span>(certChainData),</li><li>    <span class="hljs-comment">// 根据encodingData的格式进行赋值，支持FORMAT_PEM、FORMAT_DER和FORMAT_PKCS7。</span></li><li>    <span class="hljs-attr">encodingFormat</span>: cert.<span class="hljs-property">EncodingFormat</span>.<span class="hljs-property">FORMAT_PEM</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">x509CertChain</span>: cert.<span class="hljs-property">X509CertChain</span> = {} <span class="hljs-keyword">as</span> cert.<span class="hljs-property">X509CertChain</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    x509CertChain = <span class="hljs-keyword">await</span> cert.<span class="hljs-title function_">createX509CertChain</span>(encodingBlob);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createX509CertChain failed, errCode: <span class="hljs-subst">${e.code}</span>, errMsg: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 证书链校验数据，需业务自行赋值。</span></li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">param</span>: cert.<span class="hljs-property">CertChainValidationParameters</span> = {</li><li>    <span class="hljs-attr">date</span>: <span class="hljs-string">'20250623163000Z'</span>,</li><li>    <span class="hljs-attr">trustAnchors</span>: [{}],</li><li>    <span class="hljs-attr">trustSystemCa</span>: <span class="hljs-literal">true</span>,</li><li>  };</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> validationRes = <span class="hljs-keyword">await</span> x509CertChain.<span class="hljs-title function_">validate</span>(param);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'X509CertChain validate success'</span>);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'X509CertChain validate failed'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>