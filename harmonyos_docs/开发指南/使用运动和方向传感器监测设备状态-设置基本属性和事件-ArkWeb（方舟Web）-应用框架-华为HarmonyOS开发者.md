<h1 _ngcontent-sfu-c119="" class="doc-title ng-star-inserted" title="使用运动和方向传感器监测设备状态"> 使用运动和方向传感器监测设备状态 </h1>

<div _ngcontent-sfu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="概述">概述<i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2>          <p>运动和方向传感器，如加速度计、陀螺仪等，能够监测设备的运动状态和方向变化，例如设备的旋转、倾斜等。</p>     <p>通过W3C标准协议接口，Web组件能够访问这些传感器的数据，进而实现更加丰富的用户交互功能。例如，开发者在网页应用中可以利用加速度计识别运动模式，指导用户进行健身运动，利用陀螺仪捕获玩家手中设备的倾斜和旋转动作，实现无按钮操控的游戏体验。</p>     <p>通过在JavaScript中调用以下支持的W3C标准协议接口，可以访问运动和方向传感器。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.1.5.1.4.1.1" valign="top" width="33.33333333333333%">接口</th>         <th align="left" class="cellrowborder" id="mcps1.3.1.5.1.4.1.2" valign="top" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.1.5.1.4.1.3" valign="top" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">Accelerometer</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">加速度</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">可获取设备X、Y、Z轴方向的加速度数据。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">Gyroscope</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">陀螺仪</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">可获取设备X、Y、Z轴方向的角速度数据。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">AbsoluteOrientationSensor</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">绝对定位</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">可获取表示设备绝对定位方向的四元数，包含X、Y、Z和W分量。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">RelativeOrientationSensor</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">相对定位</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">可获取表示设备相对定位方向的四元数，包含X、Y、Z和W分量。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">DeviceMotionEvent</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">设备运动事件</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">通过监听该事件，可获取设备在X、Y、Z轴方向上的加速度数据，设备在X、Y、Z轴方向上包含重力的加速度数据，以及设备在alpha、beta、gamma轴方向上旋转的速率数据。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">DeviceOrientationEvent</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">设备方向事件</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">通过监听该事件，可获取设备绕X、Y、Z轴的角度。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="需要权限">需要权限<i class="anchor-icon anchor-icon-link" anchorid="需要权限" tips="复制节点链接"></i></h2>          <p>使用加速度、陀螺仪及设备运动事件接口时，需在配置文件module.json5中声明相应的传感器权限。具体配置方法请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions#在配置文件中声明权限">在配置文件中声明权限</a>。</p>     <div _ngcontent-sfu-c106="" class="highlight-div"><div _ngcontent-sfu-c106="" class="highlight-div-header"><div _ngcontent-sfu-c106="" class="highlight-div-header-left"><div _ngcontent-sfu-c106="" class="handle-button expand-button"><div _ngcontent-sfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sfu-c106="" class="highlight-div-header-right"><div _ngcontent-sfu-c106="" class="handle-button ai-button"></div><div _ngcontent-sfu-c106="" class="handle-button line-button"><div _ngcontent-sfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sfu-c106="" class="handle-button theme-button"><div _ngcontent-sfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sfu-c106="" class="handle-button copy-button"><div _ngcontent-sfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sfu-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li>    <span class="hljs-attr">"requestPermissions"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"name"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"ohos.permission.ACCELEROMETER"</span> <span class="hljs-comment">// 加速度权限</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"name"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"ohos.permission.GYROSCOPE"</span>     <span class="hljs-comment">// 陀螺仪权限</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li></ol></pre></div></div>     <p>Web组件在对接运动和方向传感器时，需配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onpermissionrequest9" target="_blank">onPermissionRequest</a>接口，通过该接口接收权限请求通知。</p>    </div>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>应用侧代码中，Web组件配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onpermissionrequest9" target="_blank">onPermissionRequest</a>接口，可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-permissionrequest" target="_blank">PermissionRequest</a>的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-permissionrequest#getaccessibleresource9" target="_blank">getAccessibleResource</a>接口获取请求权限的资源类型，当资源类型为TYPE_SENSOR时，进行传感器授权处理。</p>       <div _ngcontent-sfu-c106="" class="highlight-div"><div _ngcontent-sfu-c106="" class="highlight-div-header"><div _ngcontent-sfu-c106="" class="highlight-div-header-left"><div _ngcontent-sfu-c106="" class="handle-button expand-button"><div _ngcontent-sfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sfu-c106="" class="highlight-div-header-right"><div _ngcontent-sfu-c106="" class="handle-button ai-button"></div><div _ngcontent-sfu-c106="" class="handle-button line-button"><div _ngcontent-sfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sfu-c106="" class="handle-button theme-button"><div _ngcontent-sfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sfu-c106="" class="handle-button copy-button"><div _ngcontent-sfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sfu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { abilityAccessCtrl, <span class="hljs-title class_">PermissionRequestResult</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 配置Web开启调试模式</span></li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setWebDebuggingAccess</span>(<span class="hljs-literal">true</span>);</li><li>    <span class="hljs-comment">// 访问控制管理, 获取访问控制模块对象。</span></li><li>    <span class="hljs-keyword">let</span> atManager = abilityAccessCtrl.<span class="hljs-title function_">createAtManager</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      atManager.<span class="hljs-title function_">requestPermissionsFromUser</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getHostContext</span>(), [<span class="hljs-string">'ohos.permission.ACCELEROMETER'</span>, <span class="hljs-string">'ohos.permission.GYROSCOPE'</span>]</li><li>        , <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: PermissionRequestResult</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`requestPermissionsFromUser fail, err-&gt;<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'data permissions:'</span> + data.<span class="hljs-property">permissions</span>);</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'data authResults:'</span> + data.<span class="hljs-property">authResults</span>);</li><li>        }</li><li>      })</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onPermissionRequest</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>             <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">showAlertDialog</span>({</li><li>              <span class="hljs-attr">title</span>: <span class="hljs-string">'title'</span>,</li><li>              <span class="hljs-attr">message</span>: <span class="hljs-string">'text'</span>,</li><li>              <span class="hljs-attr">primaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'deny'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">request</span>.<span class="hljs-title function_">deny</span>();</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">secondaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'onConfirm'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">request</span>.<span class="hljs-title function_">grant</span>(event.<span class="hljs-property">request</span>.<span class="hljs-title function_">getAccessibleResource</span>());</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">false</span>,</li><li>              <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                event.<span class="hljs-property">request</span>.<span class="hljs-title function_">deny</span>();</li><li>              }</li><li>            })</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>在前端页面代码中，利用JavaScript调用传感器相关的W3C标准协议接口。</p>       <div _ngcontent-sfu-c106="" class="highlight-div"><div _ngcontent-sfu-c106="" class="highlight-div-header"><div _ngcontent-sfu-c106="" class="highlight-div-header-left"><div _ngcontent-sfu-c106="" class="handle-button expand-button"><div _ngcontent-sfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sfu-c106="" class="highlight-div-header-right"><div _ngcontent-sfu-c106="" class="handle-button ai-button"></div><div _ngcontent-sfu-c106="" class="handle-button line-button"><div _ngcontent-sfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sfu-c106="" class="handle-button theme-button"><div _ngcontent-sfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sfu-c106="" class="handle-button copy-button"><div _ngcontent-sfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sfu-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">HTML</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span> /&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"initial-scale=1.0, maximum-scale=1.0, user-scalable=no"</span> /&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"msapplication-tap-highlight"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"no"</span> /&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"HandheldFriendly"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"true"</span> /&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"MobileOptimized"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"320"</span> /&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>运动和方向传感器<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></li><li><span class="language-css">        <span class="hljs-selector-tag">body</span> {</span></li><li><span class="language-css">            <span class="hljs-attribute">font-family</span>: Arial, sans-serif;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-comment">// 访问设备的加速度计传感器，并获取其数据。</span></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">getAccelerometer</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">            <span class="hljs-keyword">var</span> acc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Accelerometer</span>({<span class="hljs-attr">frequency</span>: <span class="hljs-number">60</span>});</span></li><li><span class="language-javascript">            acc.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'activate'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Ready to measure.'</span>));</span></li><li><span class="language-javascript">            acc.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Error type: '</span> + error.<span class="hljs-property">type</span> + <span class="hljs-string">', error: '</span> + error.<span class="hljs-property">error</span> ));</span></li><li><span class="language-javascript">            acc.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'reading'</span>, <span class="hljs-function">() =&gt;</span> {</span></li><li><span class="language-javascript">                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Accelerometer <span class="hljs-subst">${acc.timestamp}</span>, <span class="hljs-subst">${acc.x}</span>, <span class="hljs-subst">${acc.y}</span>, <span class="hljs-subst">${acc.z}</span>.`</span>);</span></li><li><span class="language-javascript">            });</span></li><li><span class="language-javascript">            acc.<span class="hljs-title function_">start</span>();</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-comment">// 访问设备的陀螺仪传感器，并获取其数据。</span></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">getGyroscope</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">            <span class="hljs-keyword">var</span> gyr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gyroscope</span>({<span class="hljs-attr">frequency</span>: <span class="hljs-number">60</span>});</span></li><li><span class="language-javascript">            gyr.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'activate'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Ready to measure.'</span>));</span></li><li><span class="language-javascript">            gyr.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Error type: '</span> + error.<span class="hljs-property">type</span> + <span class="hljs-string">', error: '</span> + error.<span class="hljs-property">error</span> ));</span></li><li><span class="language-javascript">            gyr.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'reading'</span>, <span class="hljs-function">() =&gt;</span> {</span></li><li><span class="language-javascript">                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Gyroscope <span class="hljs-subst">${gyr.timestamp}</span>, <span class="hljs-subst">${gyr.x}</span>, <span class="hljs-subst">${gyr.y}</span>, <span class="hljs-subst">${gyr.z}</span>.`</span>);</span></li><li><span class="language-javascript">            });</span></li><li><span class="language-javascript">            gyr.<span class="hljs-title function_">start</span>();</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-comment">// 访问设备的方向传感器，并获取其数据。</span></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">getAbsoluteOrientationSensor</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">            <span class="hljs-keyword">var</span> aos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbsoluteOrientationSensor</span>({<span class="hljs-attr">frequency</span>: <span class="hljs-number">60</span>});</span></li><li><span class="language-javascript">            aos.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'activate'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Ready to measure.'</span>));</span></li><li><span class="language-javascript">            aos.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Error type: '</span> + error.<span class="hljs-property">type</span> + <span class="hljs-string">', error: '</span> + error.<span class="hljs-property">error</span> ));</span></li><li><span class="language-javascript">            aos.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'reading'</span>, <span class="hljs-function">() =&gt;</span> {</span></li><li><span class="language-javascript">                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AbsoluteOrientationSensor data: <span class="hljs-subst">${aos.timestamp}</span>, <span class="hljs-subst">${aos.quaternion}</span>`</span>);</span></li><li><span class="language-javascript">            });</span></li><li><span class="language-javascript">            aos.<span class="hljs-title function_">start</span>();</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-comment">// 监听设备的运动事件，并执行相应的处理逻辑。</span></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">listenDeviceMotionEvent</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">            <span class="hljs-title function_">removeDeviceMotionEvent</span>();</span></li><li><span class="language-javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-string">'DeviceMotionEvent'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {</span></li><li><span class="language-javascript">                <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'devicemotion'</span>, handleMotionEvent, <span class="hljs-literal">false</span>);</span></li><li><span class="language-javascript">            } <span class="hljs-keyword">else</span> {</span></li><li><span class="language-javascript">              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'不支持DeviceMotionEvent'</span>);</span></li><li><span class="language-javascript">            }</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-comment">// 移除之前添加的设备运动事件监听器。</span></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">removeDeviceMotionEvent</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-string">'DeviceMotionEvent'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {</span></li><li><span class="language-javascript">              <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'devicemotion'</span>, handleMotionEvent, <span class="hljs-literal">false</span>);</span></li><li><span class="language-javascript">            } <span class="hljs-keyword">else</span> {</span></li><li><span class="language-javascript">              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'不支持DeviceMotionEvent'</span>);</span></li><li><span class="language-javascript">            }</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-comment">// 处理运动事件。</span></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMotionEvent</span>(<span class="hljs-params">event</span>) {</span></li><li><span class="language-javascript">            <span class="hljs-keyword">const</span> x = event.<span class="hljs-property">accelerationIncludingGravity</span>.<span class="hljs-property">x</span>;</span></li><li><span class="language-javascript">            <span class="hljs-keyword">const</span> y = event.<span class="hljs-property">accelerationIncludingGravity</span>.<span class="hljs-property">y</span>;</span></li><li><span class="language-javascript">            <span class="hljs-keyword">const</span> z = event.<span class="hljs-property">accelerationIncludingGravity</span>.<span class="hljs-property">z</span>;</span></li><li><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`DeviceMotionEvent data: <span class="hljs-subst">${event.timeStamp}</span>, <span class="hljs-subst">${x}</span>, <span class="hljs-subst">${y}</span>, <span class="hljs-subst">${z}</span>`</span>);</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-comment">// 监听设备方向的变化，并执行相应的处理逻辑。</span></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">listenDeviceOrientationEvent</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">            <span class="hljs-title function_">removeDeviceOrientationEvent</span>();</span></li><li><span class="language-javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-string">'DeviceOrientationEvent'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {</span></li><li><span class="language-javascript">                <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'deviceorientation'</span>, handleOrientationEvent, <span class="hljs-literal">false</span>);</span></li><li><span class="language-javascript">            } <span class="hljs-keyword">else</span> {</span></li><li><span class="language-javascript">                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'不支持DeviceOrientationEvent'</span>);</span></li><li><span class="language-javascript">            }</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-comment">// 移除之前添加的设备方向事件监听器。</span></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">removeDeviceOrientationEvent</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-string">'DeviceOrientationEvent'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {</span></li><li><span class="language-javascript">              <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'deviceorientation'</span>, handleOrientationEvent, <span class="hljs-literal">false</span>);</span></li><li><span class="language-javascript">            } <span class="hljs-keyword">else</span> {</span></li><li><span class="language-javascript">              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'不支持DeviceOrientationEvent'</span>);</span></li><li><span class="language-javascript">            }</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-comment">// 监听设备方向的变化，并执行相应的处理逻辑。</span></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">listenDeviceOrientationEvent2</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">            <span class="hljs-title function_">removeDeviceOrientationEvent2</span>();</span></li><li><span class="language-javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-string">'DeviceOrientationEvent'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {</span></li><li><span class="language-javascript">                <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'deviceorientationabsolute'</span>, handleOrientationEvent, <span class="hljs-literal">false</span>);</span></li><li><span class="language-javascript">            } <span class="hljs-keyword">else</span> {</span></li><li><span class="language-javascript">                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'不支持DeviceOrientationEvent'</span>);</span></li><li><span class="language-javascript">            }</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-comment">// 移除之前添加的设备方向事件监听器。</span></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">removeDeviceOrientationEvent2</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-string">'DeviceOrientationEvent'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {</span></li><li><span class="language-javascript">              <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'deviceorientationabsolute'</span>, handleOrientationEvent, <span class="hljs-literal">false</span>);</span></li><li><span class="language-javascript">            } <span class="hljs-keyword">else</span> {</span></li><li><span class="language-javascript">              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'不支持DeviceOrientationEvent'</span>);</span></li><li><span class="language-javascript">            }</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-comment">// 处理方向事件。</span></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleOrientationEvent</span>(<span class="hljs-params">event</span>) {</span></li><li><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`DeviceOrientationEvent data: <span class="hljs-subst">${event.timeStamp}</span>, <span class="hljs-subst">${event.absolute}</span>, <span class="hljs-subst">${event.alpha}</span>, <span class="hljs-subst">${event.beta}</span>, <span class="hljs-subst">${event.gamma}</span>`</span>);</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dcontent"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dcontent"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>运动和方向:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dlist"</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"getAccelerometer()"</span>&gt;</span>加速度<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"getGyroscope()"</span>&gt;</span>陀螺仪<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"getAbsoluteOrientationSensor()"</span>&gt;</span>设备方向(绝对定位)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"listenDeviceMotionEvent()"</span>&gt;</span>设备运动事件<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"listenDeviceOrientationEvent()"</span>&gt;</span>设备方向事件<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"listenDeviceOrientationEvent2()"</span>&gt;</span>设备方向事件(绝对定位)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>