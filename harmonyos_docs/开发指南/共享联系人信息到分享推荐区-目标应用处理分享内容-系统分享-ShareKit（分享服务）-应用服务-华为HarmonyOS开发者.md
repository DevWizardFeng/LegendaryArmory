<h1 _ngcontent-pgb-c119="" class="doc-title ng-star-inserted" title="共享联系人信息到分享推荐区"> 共享联系人信息到分享推荐区 </h1>

<div _ngcontent-pgb-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>通过意图框架服务，目标应用可以将联系人信息共享到分享推荐区。参考：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/intents-habit-rec-access-programme" target="_blank">习惯推荐-接入方案</a>。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>该示例代码无法直接运行，需要申请意图框架白名单。参见：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/intents-access-flow" target="_blank">Intents Kit接入流程</a>。</p> </div></div></div> <div class="tiledSection"><h2 id="section17705159171017">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section17705159171017" tips="复制节点链接"></i></h2><ol><li>导入相关模块。<div _ngcontent-pgb-c106="" class="highlight-div"><div _ngcontent-pgb-c106="" class="highlight-div-header"><div _ngcontent-pgb-c106="" class="highlight-div-header-left"><div _ngcontent-pgb-c106="" class="handle-button expand-button"><div _ngcontent-pgb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pgb-c106="" class="highlight-div-header-right"><div _ngcontent-pgb-c106="" class="handle-button ai-button"></div><div _ngcontent-pgb-c106="" class="handle-button line-button"><div _ngcontent-pgb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pgb-c106="" class="handle-button theme-button"><div _ngcontent-pgb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pgb-c106="" class="handle-button copy-button"><div _ngcontent-pgb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pgb-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">BuildProfile</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'BuildProfile'</span>;</li><li><span class="hljs-keyword">import</span> { util } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { insightIntent } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IntentsKit'</span>;</li></ol></pre></div></div> </li><li>目标应用构造联系人数据。<div _ngcontent-pgb-c106="" class="highlight-div"><div _ngcontent-pgb-c106="" class="highlight-div-header"><div _ngcontent-pgb-c106="" class="highlight-div-header-left"><div _ngcontent-pgb-c106="" class="handle-button expand-button"><div _ngcontent-pgb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pgb-c106="" class="highlight-div-header-right"><div _ngcontent-pgb-c106="" class="handle-button ai-button"></div><div _ngcontent-pgb-c106="" class="handle-button line-button"><div _ngcontent-pgb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pgb-c106="" class="handle-button theme-button"><div _ngcontent-pgb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pgb-c106="" class="handle-button copy-button"><div _ngcontent-pgb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pgb-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class="hljs-attr">intent</span>: insightIntent.<span class="hljs-property">InsightIntent</span> = {</li><li>  <span class="hljs-attr">intentName</span>: <span class="hljs-string">'SendMessage'</span>, <span class="hljs-comment">// 意图名</span></li><li>  <span class="hljs-attr">intentVersion</span>: <span class="hljs-string">'1.0'</span>, <span class="hljs-comment">// 意图版本</span></li><li>  <span class="hljs-attr">identifier</span>: util.<span class="hljs-title function_">generateRandomUUID</span>(), <span class="hljs-comment">// 意图标识符</span></li><li>  <span class="hljs-attr">intentActionInfo</span>: { <span class="hljs-comment">// 意图执行信息</span></li><li>    <span class="hljs-attr">actionMode</span>: <span class="hljs-string">'EXECUTED'</span>, <span class="hljs-comment">// 动作模式</span></li><li>    <span class="hljs-attr">executedTimeSlots</span>: { <span class="hljs-comment">// 实际发生时间段</span></li><li>      <span class="hljs-attr">executedStartTime</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>(),</li><li>      <span class="hljs-attr">executedEndTime</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>(),</li><li>    }</li><li>  },</li><li>  <span class="hljs-attr">intentEntityInfo</span>: { <span class="hljs-comment">// 意图实体信息</span></li><li>    <span class="hljs-attr">entityId</span>: <span class="hljs-string">'this-is-id'</span>, <span class="hljs-comment">// 实体Id</span></li><li>    <span class="hljs-attr">entityName</span>: <span class="hljs-string">'Contact'</span>, <span class="hljs-comment">// 实体名称</span></li><li>    <span class="hljs-attr">name</span>: <span class="hljs-string">'Nickname'</span>, <span class="hljs-comment">// 联系人昵称</span></li><li>    <span class="hljs-attr">icon</span>: <span class="hljs-string">'data:image/png;base64,...'</span>, <span class="hljs-comment">// 联系人头像</span></li><li>    <span class="hljs-attr">phoneNumbers</span>: [], <span class="hljs-comment">// 联系人电话号码</span></li><li>    <span class="hljs-attr">extras</span>: {</li><li>      <span class="hljs-attr">shareParams</span>: {</li><li>        <span class="hljs-attr">bundleName</span>: <span class="hljs-title class_">BuildProfile</span>.<span class="hljs-property">BUNDLE_NAME</span>, <span class="hljs-comment">// 应用包名</span></li><li>        <span class="hljs-attr">moduleName</span>: <span class="hljs-string">'entry'</span>, <span class="hljs-comment">// 应用模块名 根据实际填写</span></li><li>        <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'SampleContactAbility'</span>, <span class="hljs-comment">// 应用ability名 根据实际填写</span></li><li>        <span class="hljs-attr">action</span>: <span class="hljs-string">'ohos.want.action.sendData'</span>, <span class="hljs-comment">// 标识分享 不可修改</span></li><li>      }</li><li>    }</li><li>  }</li><li>};</li></ol></pre></div></div> </li><li>目标应用共享联系人数据。<div _ngcontent-pgb-c106="" class="highlight-div"><div _ngcontent-pgb-c106="" class="highlight-div-header"><div _ngcontent-pgb-c106="" class="highlight-div-header-left"><div _ngcontent-pgb-c106="" class="handle-button expand-button"><div _ngcontent-pgb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pgb-c106="" class="highlight-div-header-right"><div _ngcontent-pgb-c106="" class="handle-button ai-button"></div><div _ngcontent-pgb-c106="" class="handle-button line-button"><div _ngcontent-pgb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pgb-c106="" class="handle-button theme-button"><div _ngcontent-pgb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pgb-c106="" class="handle-button copy-button"><div _ngcontent-pgb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pgb-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">Context</span> = uiContext.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">Context</span>;</li><li>insightIntent.<span class="hljs-title function_">shareIntent</span>(context, [intent]).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'shareIntent ok'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`shareIntent failed. Code: <span class="hljs-subst">${err.code}</span>. message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div> </li></ol> </div> </div> <div></div></div>