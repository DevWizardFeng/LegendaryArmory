<h1 _ngcontent-cqn-c119="" class="doc-title ng-star-inserted" title="内存零拷贝"> 内存零拷贝 </h1>

<div _ngcontent-cqn-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section158395175618">概述<i class="anchor-icon anchor-icon-link" anchorid="section158395175618" tips="复制节点链接"></i></h2><p>对于GPU的纹理数据或模型的输入数据等已经存在于ION内存中的场景，就可以使用“内存零拷贝方式”，即将存放数据的ION内存封装为输入输出张量，直接进行推理，不需要进行输入张量和输出张量的数据拷贝，以便节省内存以及推理时间。</p> </div> <div class="tiledSection"><h2 id="section1024612216568">使用说明<i class="anchor-icon anchor-icon-link" anchorid="section1024612216568" tips="复制节点链接"></i></h2><p>对于零拷贝使用场景，在模型加载完成后，使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-neural-network-core-h#oh_nntensor_createwithfd" target="_blank">OH_NNTensor_CreateWithFd</a>，将ION内存封装为输入张量“input_tensor”，输出张量"output_tensor"，执行推理。</p> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>若size为模型输出大小，对于输出张量，建议开发者申请ION内存的大小为<span><img originheight="16" originwidth="264" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114247.19293922932978131012363267743243:50001231000000:2800:8D9A6BDC31F90975D92A54D9CB2F98A102B05EFCC92D5C6EEAAB1674CCBE7756.png" class="notEnlarge" width="264" height="16"></span>。</p> </div></div></div> </div> <div></div></div>