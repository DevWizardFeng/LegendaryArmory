<h1 _ngcontent-wnx-c119="" class="doc-title ng-star-inserted" title="内容动态变化场景"> 内容动态变化场景 </h1>

<div _ngcontent-wnx-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section911195122016">设计场景<i class="anchor-icon anchor-icon-link" anchorid="section911195122016" tips="复制节点链接"></i></h2><p>界面上重要内容在动态变化后，需要实时发送变化后的朗读内容。具体地，当界面上内容发生动态变化且其内容对用户具有必要的提示/告知/指导作用，则其发生变化后需对其变化内容进行播报，可调用无障碍提供的主动播报接口进行播报。</p> <p><span><img originheight="731" originwidth="359" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114853.56357116714197652542412416427703:50001231000000:2800:AC4C275D1B7772B761228FCEF82D9DE9F42E9EC56C1D9225CE0DFAF47792BC4E.png" width="359" height="731"></span></p> <p>主动播报接口相关参数说明：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表1 </b>EventInfo 说明</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.1.5.2.5.1.1" valign="top" width="25%"><p>属性</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.5.2.5.1.2" valign="top" width="24.98%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.5.2.5.1.3" valign="top" width="25.019999999999996%"><p>说明</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.5.2.5.1.4" valign="top" width="25%"><p>例</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="25%"><p>type</p> </td> <td class="cellrowborder" valign="top" width="24.98%"><p>EventType</p> </td> <td class="cellrowborder" valign="top" width="25.019999999999996%"><p>主动播报事件类型</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>announceForAccessibility</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><p>bundleName</p> </td> <td class="cellrowborder" valign="top" width="24.98%"><p>string</p> </td> <td class="cellrowborder" valign="top" width="25.019999999999996%"><p>目标应用名</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>当前应用包名</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><p>triggerAction</p> </td> <td class="cellrowborder" valign="top" width="24.98%"><p>Action</p> </td> <td class="cellrowborder" valign="top" width="25.019999999999996%"><p>触发事件的Action</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>click或其他都不会有任何影响</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><p>textAnnouncedForAccessibility</p> </td> <td class="cellrowborder" valign="top" width="24.98%"><p>string</p> </td> <td class="cellrowborder" valign="top" width="25.019999999999996%"><p>主动播报的内容</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>test123 text</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1072311992016">开发实例<i class="anchor-icon anchor-icon-link" anchorid="section1072311992016" tips="复制节点链接"></i></h2><div _ngcontent-wnx-c106="" class="highlight-div"><div _ngcontent-wnx-c106="" class="highlight-div-header"><div _ngcontent-wnx-c106="" class="highlight-div-header-left"><div _ngcontent-wnx-c106="" class="handle-button expand-button"><div _ngcontent-wnx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wnx-c106="" class="highlight-div-header-right"><div _ngcontent-wnx-c106="" class="handle-button ai-button"></div><div _ngcontent-wnx-c106="" class="handle-button line-button"><div _ngcontent-wnx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wnx-c106="" class="handle-button theme-button"><div _ngcontent-wnx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wnx-c106="" class="handle-button copy-button"><div _ngcontent-wnx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wnx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">accessibility </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos.accessibility'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-meta">@Entry</span></span></li><li><span class=""><span class="hljs-meta">@Component</span></span></li><li><span class="hljs-keyword">export</span> struct <span class=""><span class="hljs-title class_">Rule</span>_2_1_7 </span><span class="">{</span></li><li>  <span class=""><span class="hljs-attr">title</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'Rule 2.1.7'</span></span><span class="">;</span></li><li>  <span class=""><span class="hljs-attr">shortText</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'Button'</span></span><span class="">;</span></li><li>  <span class=""><span class="hljs-attr">longText</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'sendAccessibilityEvent'</span></span><span class="">;</span></li><li>  <span class=""><span class="hljs-attr">eventInfo</span></span><span class="">: </span><span class="">accessibility</span><span class="">.</span><span class=""><span class="hljs-property">EventInfo</span> </span><span class="">= </span><span class="">(</span><span class="">{</span></li><li>    <span class=""><span class="hljs-attr">type</span></span><span class="">: </span><span class=""><span class="hljs-string">'announceForAccessibility'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">bundleName</span></span><span class="">: </span><span class=""><span class="hljs-string">'com.example.pagesrouter'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">triggerAction</span></span><span class="">: </span><span class=""><span class="hljs-string">'common'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">textAnnouncedForAccessibility</span></span><span class="">: </span><span class=""><span class="hljs-string">'test123 text'</span></span></li><li>  <span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li>  <span class=""><span class="hljs-title function_">build</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>    <span class=""><span class="hljs-title class_">NavDestination</span></span><span class="">() </span><span class="">{</span></li><li>      <span class=""><span class="hljs-title class_">Column</span></span><span class="">() </span><span class="">{</span></li><li>        <span class=""><span class="hljs-title class_">Blank</span></span><span class="">()</span></li><li>        <span class=""><span class="hljs-title class_">Button</span></span><span class="">(</span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">shortText</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">accessibilityText</span></span><span class="">(</span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">longText</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">align</span></span><span class="">(</span><span class=""><span class="hljs-title class_">Alignment</span></span><span class="">.</span><span class=""><span class="hljs-property">Center</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">fontSize</span></span><span class="">(</span><span class=""><span class="hljs-number">20</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">onClick</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>            <span class="">accessibility</span><span class="">.</span><span class=""><span class="hljs-title function_">sendAccessibilityEvent</span></span><span class="">(</span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">eventInfo</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>              <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">`test123 Succeeded in send event, eventInfo is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">JSON</span></span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">stringify</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">(</span></span></span><span class="hljs-string"><span class="hljs-subst"><span class="hljs-variable language_">this</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">eventInfo</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">)</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>            <span class="">}</span><span class="">)</span><span class="">;</span></li><li>          <span class="">}</span><span class="">)</span></li><li>        <span class=""><span class="hljs-title class_">Blank</span></span><span class="">()</span></li><li>      <span class="">}</span></li><li>      <span class="">.</span><span class=""><span class="hljs-title function_">width</span></span><span class="">(</span><span class=""><span class="hljs-string">'100%'</span></span><span class="">)</span></li><li>      <span class="">.</span><span class=""><span class="hljs-title function_">height</span></span><span class="">(</span><span class=""><span class="hljs-string">'100%'</span></span><span class="">)</span></li><li>    <span class="">}</span></li><li>    <span class="">.</span><span class=""><span class="hljs-title function_">title</span></span><span class="">(</span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">title</span></span><span class="">)</span></li><li>  <span class="">}</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div></div></div>