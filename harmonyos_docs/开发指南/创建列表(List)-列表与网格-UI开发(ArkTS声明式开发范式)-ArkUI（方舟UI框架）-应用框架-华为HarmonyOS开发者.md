<h1 _ngcontent-cvm-c119="" class="doc-title ng-star-inserted" title="创建列表 (List)"> 创建列表 (List) </h1>

<div _ngcontent-cvm-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="概述">概述<i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2>          <p>列表是一种复杂的容器，当列表项达到一定数量，内容超过屏幕大小时，可以自动提供滚动功能。它适合用于呈现同类数据类型或数据类型集，例如图片和文本。在列表中显示数据集合是许多应用程序中的常见要求（如通讯录、音乐列表、购物清单等）。</p>     <p>使用列表可以轻松高效地显示结构化、可滚动的信息。通过在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list" target="_blank">List</a>组件中按垂直或者水平方向线性排列子组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-listitemgroup" target="_blank">ListItemGroup</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-listitem" target="_blank">ListItem</a>，为列表中的行或列提供单个视图，或使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-rendering-control-foreach">循环渲染</a>迭代一组行或列，或混合任意数量的单个视图和ForEach结构，构建一个列表。List组件支持使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-rendering-control-ifelse">条件渲染</a>、循环渲染、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-rendering-control-lazyforeach">懒加载</a>等<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-rendering-control-overview">渲染控制</a>方式生成子组件。</p>     <p>在圆形屏幕设备上，推荐使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-arclist" target="_blank">ArcList</a>组件，使用方式可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-create-arclist">创建弧形列表 (ArcList)</a>。</p>    </div>    <div class="tiledSection">     <h2 id="布局与约束">布局与约束<i class="anchor-icon anchor-icon-link" anchorid="布局与约束" tips="复制节点链接"></i></h2>          <p>列表作为一种容器，会自动按其滚动方向排列子组件，向列表中添加组件或从列表中移除组件会重新排列子组件。</p>     <p>如下图所示，在垂直列表中，List按垂直方向自动排列ListItemGroup或ListItem。</p>     <p>ListItemGroup用于列表数据的分组展示，其子组件也是ListItem。ListItem表示单个列表项，可以包含单个子组件。</p>     <p><strong>图1</strong> List、ListItemGroup和ListItem组件关系</p>     <p><span><img originheight="445" originwidth="319" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114808.04964880470194262379656303249527:50001231000000:2800:F5FC1C374757CF291E86E78E0BF5F53ED224B9B6EC21DCE832DB06DB6253059D.png" width="319" height="445"></span></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>List的子组件必须是ListItemGroup或ListItem，ListItem和ListItemGroup必须配合List来使用。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="布局" class="firsth2">布局<i class="anchor-icon anchor-icon-link" anchorid="布局" tips="复制节点链接"></i></h3>          <p>List除了提供垂直和水平布局能力、超出屏幕时可以滚动的自适应延伸能力之外，还提供了自适应交叉轴方向上排列个数的布局能力。</p>     <p>利用垂直布局能力可以构建单列或者多列垂直滚动列表，如下图所示。</p>     <p><strong>图2</strong> 垂直滚动列表（左：单列；右：多列）</p>     <p><span><img originheight="334" originwidth="1036" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114808.94986303902332115320548719121917:50001231000000:2800:BF62A7D135A2774DB0DF385AA249E0F260B162148519FEA35232810711E25CD5.png" width="920" height="296.6023166023166"></span></p>     <p>利用水平布局能力可以构建单行或多行水平滚动列表，如下图所示。</p>     <p><strong>图3</strong> 水平滚动列表（左：单行；右：多行）</p>     <p><span><img originheight="330" originwidth="1078" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114808.98227546319836109577950211537514:50001231000000:2800:7464168167D94015CCE3A4E45D35F3CFEA049682E89A39F635D58F9DF43E8ACB.png" width="920" height="281.6326530612245"></span></p>     <p>Grid和WaterFlow也可以实现单列、多列布局，如果布局每列等宽，且不需要跨行跨列布局，相比Grid和WaterFlow，则更推荐使用List。</p>    </div>    <div class="tiledSection">     <h3 id="约束">约束<i class="anchor-icon anchor-icon-link" anchorid="约束" tips="复制节点链接"></i></h3>          <p>列表的主轴方向是指子组件列的排列方向，也是列表的滚动方向。垂直于主轴的轴称为交叉轴，其方向与主轴方向相互垂直。</p>     <p>如下图所示，垂直列表的主轴是垂直方向，交叉轴是水平方向；水平列表的主轴是水平方向，交叉轴是垂直方向。</p>     <p><strong>图4</strong> 列表的主轴与交叉轴</p>     <p><span><img originheight="379" originwidth="1125" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114808.79801376226785277337767955687988:50001231000000:2800:7D606BA877B4AD47F016A01664EECE560255F0D43C00DF2EFFA0409D7B3E6BD3.png" width="920" height="309.9377777777778"></span></p>     <p>如果List组件主轴或交叉轴方向设置了尺寸，则其对应方向上的尺寸为设置值。</p>     <p>如果List组件主轴方向没有设置尺寸，当List子组件主轴方向总尺寸小于List的父组件尺寸时，List主轴方向尺寸自动适应子组件的总尺寸。</p>     <p>如下图所示，一个垂直列表B没有设置高度时，其父组件A高度为200vp，若其所有子组件C的高度总和为150vp，则此时列表B的高度为150vp。</p>     <p><strong>图5</strong> 列表主轴高度约束示例1（<strong>A</strong>: List的父组件; <strong>B</strong>: List组件; <strong>C</strong>: List的所有子组件）</p>     <p><span><img originheight="244" originwidth="442" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114808.35010154961630879429259350079300:50001231000000:2800:228598C1D5F4EE587DBDFB51724E13C5F030F18751929E32EE0BB0E968A5B5FF.png" width="442" height="244"></span></p>     <p>如果子组件主轴方向总尺寸超过List父组件尺寸时，List主轴方向尺寸适应List的父组件尺寸。</p>     <p>如下图所示，同样是没有设置高度的垂直列表B，其父组件A高度为200vp，若其所有子组件C的高度总和为300vp，则此时列表B的高度为200vp。</p>     <p><strong>图6</strong> 列表主轴高度约束示例2（<strong>A</strong>: List的父组件; <strong>B</strong>: List组件; <strong>C</strong>: List的所有子组件）</p>     <p><span><img originheight="277" originwidth="442" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114808.88352129945476086684981280293984:50001231000000:2800:594C25D7EEF28CFFF041AACCAC04EF5B09009D496192211C6D743FF1A2AC6270.png" width="442" height="277"></span></p>     <p>List组件交叉轴方向在没有设置尺寸时，其尺寸默认自适应父组件尺寸。</p>    </div>    <div class="tiledSection">     <h2 id="开发布局">开发布局<i class="anchor-icon anchor-icon-link" anchorid="开发布局" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="设置主轴方向" class="firsth2">设置主轴方向<i class="anchor-icon anchor-icon-link" anchorid="设置主轴方向" tips="复制节点链接"></i></h3>          <p>List组件主轴默认是垂直方向，即默认情况下不需要手动设置List方向，就可以构建一个垂直滚动列表。</p>     <p>若是水平滚动列表场景，将List的listDirection属性设置为Axis.Horizontal即可实现。listDirection默认为Axis.Vertical，即主轴默认是垂直方向。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">List</span>() {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li>.<span class="hljs-title function_">listDirection</span>(<span class="hljs-title class_">Axis</span>.<span class="hljs-property">Horizontal</span>)</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="设置交叉轴布局">设置交叉轴布局<i class="anchor-icon anchor-icon-link" anchorid="设置交叉轴布局" tips="复制节点链接"></i></h3>          <p>List组件的交叉轴布局可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#lanes9" target="_blank">lanes</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#alignlistitem9" target="_blank">alignListItem</a>属性进行设置，lanes属性用于确定交叉轴排列的列表项数量，alignListItem用于设置子组件在交叉轴方向的对齐方式。</p>     <p>List组件的lanes属性通常用于在不同尺寸的设备自适应构建不同行数或列数的列表，即一次开发、多端部署的场景。lanes属性的取值类型是"number | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#lengthconstrain" target="_blank">LengthConstrain</a>"，即整数或者LengthConstrain类型。以垂直列表为例，如果将lanes属性设为2，表示构建的是一个两列的垂直列表，如图2中右图所示。lanes的默认值为1，即默认情况下，垂直列表的列数是1。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">List</span>() {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li>.<span class="hljs-title function_">lanes</span>(<span class="hljs-number">2</span>)</li></ol></pre></div></div>     <p>当其取值为LengthConstrain类型时，表示会根据LengthConstrain与List组件的尺寸自适应决定行或列数。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">EgLanes</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">egLanes</span>: <span class="hljs-title class_">LengthConstrain</span> = { <span class="hljs-attr">minLength</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">maxLength</span>: <span class="hljs-number">300</span> };</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">List</span>() {</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    .<span class="hljs-title function_">lanes</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">egLanes</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>例如，假设在垂直列表中设置了lanes的值为{ minLength: 200, maxLength: 300 }。此时：</p>     <ul>      <li>       <p>当List组件宽度为300vp时，由于minLength为200vp，此时列表为一列。</p></li>      <li>       <p>当List组件宽度变化至400vp时，符合两倍的minLength，则此时列表自适应为两列。</p></li>     </ul>     <p>同样以垂直列表为例，当alignListItem属性设置为ListItemAlign.Center表示列表项在水平方向上居中对齐。alignListItem的默认值是ListItemAlign.Start，即列表项在列表交叉轴方向上默认按首部对齐。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">List</span>() {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li>.<span class="hljs-title function_">alignListItem</span>(<span class="hljs-title class_">ListItemAlign</span>.<span class="hljs-property">Center</span>)</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="listitem生命周期">ListItem生命周期<i class="anchor-icon anchor-icon-link" anchorid="listitem生命周期" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="使用foreach创建listitem" class="firsth2">使用ForEach创建ListItem<i class="anchor-icon anchor-icon-link" anchorid="使用foreach创建listitem" tips="复制节点链接"></i></h3>          <p>List组件创建时，所有ListItem将会被创建。显示区域内的ListItem在首帧进行布局，预加载范围内的ListItem在空闲时完成布局。预加载范围之外的ListItem仅创建ListItem自身，ListItem其内部的子组件不会被创建。</p>     <p>当List组件滑动时，进入预加载及显示区域的ListItem将会创建其内部的子组件并完成布局，而滑出预加载及显示区域的ListItem将不会被销毁。</p>     <p><strong>图7</strong> ForEach创建ListItem的生命周期</p>     <p><span><img originheight="692" originwidth="1015" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114808.02881063327765851545937316770718:50001231000000:2800:2A4E7D618AC5A124D2B942F9F7C2557562E4DB106562D57B26D555EEFB7FA17A.png" width="920" height="627.231527093596"></span></p>    </div>    <div class="tiledSection">     <h3 id="使用lazyforeach创建listitem">使用LazyForEach创建ListItem<i class="anchor-icon anchor-icon-link" anchorid="使用lazyforeach创建listitem" tips="复制节点链接"></i></h3>          <p>List组件创建时，显示区域中的ListItem会被创建与布局。预加载范围内的ListItem在空闲时创建与布局，但是不会被挂载到组件树上。预加载范围外的ListItem则不会被创建。</p>     <p>当List组件滑动时，进入预加载及显示区域的ListItem将被创建与布局，创建ListItem过程中，若ListItem内部包含@Reusable标记的自定义组件，则会优先从缓存池中复用。滑出预加载及显示区域的ListItem将被销毁，其内部若含@Reusable标记的自定义组件，则会被回收并加入缓存池。</p>     <p><strong>图8</strong> LazyForEach创建ListItem的生命周期</p>     <p><span><img originheight="720" originwidth="995" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114808.90358998191804711808393366104692:50001231000000:2800:B7A4B60907262CD3754C6AF1C830F9E1D28110482A20A4A2E0AC4F8628EECB26.png" width="920" height="665.7286432160804"></span></p>    </div>    <div class="tiledSection">     <h3 id="使用repeat创建listitem">使用Repeat创建ListItem<i class="anchor-icon anchor-icon-link" anchorid="使用repeat创建listitem" tips="复制节点链接"></i></h3>          <p><strong>使用virtualScroll</strong></p>     <p>List组件创建时，使用设置了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-rendering-control-repeat#virtualscroll" target="_blank">virtualScroll</a>的Repeat生成ListItem，此时显示区域内的ListItem将被创建和布局。预加载范围内的ListItem在渲染线程空闲时创建和布局，并且挂载至组件树上。预加载范围外的ListItem则不会被创建。</p>     <p>当List组件滑动时，进入预加载及显示区域的ListItem，将从缓存池中获取ListItem并复用及布局，若缓存池中无ListItem，则会新创建并布局。滑出预加载及显示区域的ListItem将被回收至缓存池。</p>     <p><strong>图9</strong> Repeat使用virtualScroll创建ListItem的生命周期</p>     <p><span><img originheight="680" originwidth="922" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114808.02937849150761236461804249925914:50001231000000:2800:A2C823562CCA927D145B3CE1C460C8CDC1BE96A20DD8D36064B463A946FDED04.png" width="920" height="678.5249457700651"></span></p>     <p><strong>不使用virtualScroll</strong></p>     <p>List组件创建时，所有ListItem均被创建。显示区域内的ListItem在首帧完成布局，预加载范围内的ListItem在空闲时完成布局。预加载范围外的ListItem不会进行布局。</p>     <p>当List组件滑动时，进入预加载及显示区域的ListItem将进行布局。滑出预加载及显示区域的ListItem不会销毁。</p>     <p><strong>图10</strong> Repeat不使用virtualScroll创建ListItem的生命周期</p>     <p><span><img originheight="646" originwidth="937" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114808.00198140126223275214428017407027:50001231000000:2800:0BA5D627FFD1254698417C3CCEB7281186FCCEE153F2A63F008F92DC1E7DC698.png" width="920" height="634.2796157950908"></span></p>    </div>    <div class="tiledSection">     <h2 id="在列表中显示数据">在列表中显示数据<i class="anchor-icon anchor-icon-link" anchorid="在列表中显示数据" tips="复制节点链接"></i></h2>          <p>列表视图垂直或水平显示项目集合，在行或列超出屏幕时提供滚动功能，使其适合显示大型数据集合。在最简单的列表形式中，List静态地创建其列表项ListItem的内容。</p>     <p><strong>图11</strong> 城市列表</p>     <p><span><img originheight="68" originwidth="387" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114808.02750651853557014043085838182607:50001231000000:2800:021B275D38082928D147339DD6AA32774E422CF74E0CF17368C756ABA28CE712.png" width="387" height="68"></span></p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CityList</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">List</span>() {</li><li>      <span class="hljs-title class_">ListItem</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'北京'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">ListItem</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'杭州'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">ListItem</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'上海'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFF1F3F5'</span>)</li><li>    .<span class="hljs-title function_">alignListItem</span>(<span class="hljs-title class_">ListItemAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>由于在ListItem中只能有一个根节点组件，不支持以平铺形式使用多个组件。因此，若列表项是由多个组件元素组成的，则需要将这多个元素组合到一个容器组件内或组成一个自定义组件。</p>     <p><strong>图12</strong> 联系人列表项示例</p>     <p><span><img originheight="91" originwidth="335" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114809.76950149597020827568785622008260:50001231000000:2800:A89EB4B3EDB80A5BFE5AE0676386039D6DE79D717062E5DAD1A605D99834C9AC.png" width="335" height="91"></span></p>     <p>如上图所示，联系人列表的列表项中，每个联系人都有头像和名称。此时，需要将Image和Text封装到一个Row容器内。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">List</span>() {</li><li>  <span class="hljs-title class_">ListItem</span>() {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-comment">// app.media.iconE为自定义资源</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.iconE'</span>))</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>
</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'小明'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title class_">ListItem</span>() {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-comment">// app.media.iconF为自定义资源</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.iconF'</span>))</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>
</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'小红'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="迭代列表内容">迭代列表内容<i class="anchor-icon anchor-icon-link" anchorid="迭代列表内容" tips="复制节点链接"></i></h2>          <p>通常，应用通过数据集合动态地创建列表。使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-rendering-control-foreach">循环渲染</a>可从数据源中迭代获取数据，并在每次迭代过程中创建相应的组件，降低代码复杂度。</p>     <p>ArkTS通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-rendering-control-foreach">ForEach</a>提供了组件的循环渲染能力。以简单形式的联系人列表为例，将联系人名称和头像数据以Contact类结构存储到contacts数组，使用ForEach中嵌套ListItem的形式来代替多个平铺的、内容相似的ListItem，从而减少重复代码。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { util } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Contact</span> {</li><li>  <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span> = util.<span class="hljs-title function_">generateRandomUUID</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-attr">icon</span>: <span class="hljs-title class_">Resource</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, icon: Resource</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">icon</span> = icon;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">SimpleContacts</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">contacts</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">object</span>&gt; = [</li><li>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Contact</span>(<span class="hljs-string">'小明'</span>, $r(<span class="hljs-string">"app.media.iconA"</span>)),</li><li>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Contact</span>(<span class="hljs-string">'小红'</span>, $r(<span class="hljs-string">"app.media.iconB"</span>)),</li><li>  ];</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">List</span>() {</li><li>      <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contacts</span>, <span class="hljs-function">(<span class="hljs-params">item: Contact</span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">ListItem</span>() {</li><li>          <span class="hljs-title class_">Row</span>() {</li><li>            <span class="hljs-title class_">Image</span>(item.<span class="hljs-property">icon</span>)</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-number">40</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>              .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>            <span class="hljs-title class_">Text</span>(item.<span class="hljs-property">name</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Start</span>)</li><li>        }</li><li>      }, <span class="hljs-function">(<span class="hljs-params">item: Contact</span>) =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(item))</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>在List组件中，ForEach除了可以用来循环渲染ListItem，也可以用来循环渲染ListItemGroup。ListItemGroup的循环渲染详细使用请参见<a href="/consumer/cn/doc/harmonyos-guides/arkts-layout-development-create-list#支持分组列表">支持分组列表</a>。</p>    </div>    <div class="tiledSection">     <h2 id="自定义列表样式">自定义列表样式<i class="anchor-icon anchor-icon-link" anchorid="自定义列表样式" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="设置内容间距" class="firsth2">设置内容间距<i class="anchor-icon anchor-icon-link" anchorid="设置内容间距" tips="复制节点链接"></i></h3>          <p>在初始化列表时，如需在列表项之间添加间距，可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#listoptions18对象说明" target="_blank">ListOptions</a>的space参数。例如，在每个列表项之间沿主轴方向添加10vp的间距。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="添加分隔线">添加分隔线<i class="anchor-icon anchor-icon-link" anchorid="添加分隔线" tips="复制节点链接"></i></h3>          <p>分隔线用来将界面元素隔开，使单个元素更加容易识别。以系统设置场景为例（如下图所示），列表项左侧为图标（如蓝牙图标），右侧为文字描述且分割线在文字下方。</p>     <p><strong>图13</strong> 设置列表分隔线样式</p>     <p><span><img originheight="186" originwidth="360" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114809.07064514967218121962830215314046:50001231000000:2800:23EDF5152C4A3DA5894B5E5977F03D1E7DFF65A3366107AF160495FF2F584690.png" width="360" height="186"></span></p>     <p>List提供了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#divider" target="_blank">divider</a>属性用于给列表项之间添加分隔线。在设置divider属性时，可以通过strokeWidth和color属性设置分隔线的粗细和颜色。</p>     <p>startMargin和endMargin属性分别用于设置分隔线距离列表侧边起始端的距离和距离列表侧边结束端的距离。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">DividerTmp</span> {</li><li>  <span class="hljs-attr">strokeWidth</span>: <span class="hljs-title class_">Length</span> = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-attr">startMargin</span>: <span class="hljs-title class_">Length</span> = <span class="hljs-number">60</span>;</li><li>  <span class="hljs-attr">endMargin</span>: <span class="hljs-title class_">Length</span> = <span class="hljs-number">10</span>;</li><li>  <span class="hljs-attr">color</span>: <span class="hljs-title class_">ResourceColor</span> = <span class="hljs-string">'#ffe9f0f0'</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">strokeWidth: Length, startMargin: Length, endMargin: Length, color: ResourceColor</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">strokeWidth</span> = strokeWidth;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">startMargin</span> = startMargin;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">endMargin</span> = endMargin;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = color;</li><li>  }</li><li>}</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">EgDivider</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">egDivider</span>: <span class="hljs-title class_">DividerTmp</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DividerTmp</span>(<span class="hljs-number">1</span>, <span class="hljs-number">60</span>, <span class="hljs-number">10</span>, <span class="hljs-string">'#ffe9f0f0'</span>);</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">List</span>() {</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    .<span class="hljs-title function_">divider</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">egDivider</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>此示例表示从距离列表侧边起始端60vp开始到距离结束端10vp的位置，画一条粗细为1vp的分割线，可以实现图9设置列表分隔线的样式。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ol>        <li>         <p>分隔线的宽度会使ListItem之间存在一定间隔，当List设置的内容间距小于分隔线宽度时，ListItem之间的间隔会使用分隔线的宽度。</p></li>        <li>         <p>当List存在多列时，分割线的startMargin和endMargin作用于每一列上。</p></li>        <li>         <p>List组件的分隔线画在两个ListItem之间，第一个ListItem上方和最后一个ListItem下方不会绘制分隔线。</p></li>       </ol>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="添加滚动条">添加滚动条<i class="anchor-icon anchor-icon-link" anchorid="添加滚动条" tips="复制节点链接"></i></h3>          <p>当列表项高度（宽度）超出屏幕高度（宽度）时，列表可以沿垂直（水平）方向滚动。在页面内容很多时，若用户需快速定位，可拖拽滚动条，如下图所示。</p>     <p><strong>图14</strong> 列表的滚动条</p>     <p><span><img originheight="311" originwidth="391" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114809.18801991178579174676326389888728:50001231000000:2800:C293B8265A5E8397EE7283106EAAF5CD7FC4C93567538A131E3EBD1AE723AF00.gif" width="391" height="311"></span></p>     <p>在使用List组件时，可通过scrollBar属性控制列表滚动条的显示。scrollBar的取值类型为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#barstate" target="_blank">BarState</a>，当取值为BarState.Auto表示按需显示滚动条。此时，当触摸到滚动条区域时显示控件，可上下拖拽滚动条快速浏览内容，拖拽时会变粗。若不进行任何操作，2秒后滚动条自动消失。</p>     <p>scrollBar属性API version 9及以下版本默认值为BarState.Off，从API version 10版本开始默认值为BarState.Auto。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">List</span>() {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li>.<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">Auto</span>)</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="添加外置滚动条">添加外置滚动条<i class="anchor-icon anchor-icon-link" anchorid="添加外置滚动条" tips="复制节点链接"></i></h2>          <p>列表<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list" target="_blank">List</a>可与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-scrollbar" target="_blank">ScrollBar</a>组件配合使用，为列表添加外置滚动条。两者通过绑定同一个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll#scroller" target="_blank">Scroller</a>滚动控制器对象实现联动。</p>     <ol>      <li>       <p>首先，需要创建一个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll#scroller" target="_blank">Scroller</a>类型的对象listScroller。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">private</span> <span class="hljs-attr">listScroller</span>: <span class="hljs-title class_">Scroller</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scroller</span>();</li></ol></pre></div></div></li>      <li>       <p>然后，列表通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#listoptions18对象说明" target="_blank">scroller</a>参数绑定滚动控制器。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// listScroller初始化List组件的scroller参数，绑定listScroller与列表。</span></li><li><span class="hljs-title class_">List</span>({ <span class="hljs-attr">scroller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">listScroller</span> }) {</li><li><span class="hljs-comment">// ...</span></li><li>}</li></ol></pre></div></div></li>      <li>       <p>最后，滚动条通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-scrollbar#scrollbaroptions对象说明" target="_blank">scroller</a>参数绑定滚动控制器。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// listScroller初始化ScrollBar组件的scroller参数，绑定listScroller与列表。</span></li><li><span class="hljs-title class_">ScrollBar</span>({ <span class="hljs-attr">scroller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">listScroller</span> })</li></ol></pre></div></div></li>     </ol>     <p><strong>图15</strong> 列表的外置滚动条</p>     <p><span><img originheight="408" originwidth="384" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114809.31901969717532861795386658433082:50001231000000:2800:CDCE70CEDF2321074C800329F786978FCE333F74E10AC69946C801C88FE0C233.gif" width="384" height="408"></span></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>滚动条组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-scrollbar" target="_blank">ScrollBar</a>，还可配合其他可滚动组件使用，如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-arclist" target="_blank">ArcList</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-grid" target="_blank">Grid</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll" target="_blank">Scroll</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-waterflow" target="_blank">WaterFlow</a>。</li>        <li>在圆形屏幕设备上，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list" target="_blank">List</a>可以与弧形滚动条组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-arcscrollbar" target="_blank">ArcScrollBar</a>配合使用为列表添加弧形外置滚动条，使用方式可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-create-arclist">创建弧形列表 (ArcList)</a>的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-create-arclist#添加外置滚动条arcscrollbar">添加外置滚动条ArcScrollBar</a>章节。</li>       </ul>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="支持分组列表">支持分组列表<i class="anchor-icon anchor-icon-link" anchorid="支持分组列表" tips="复制节点链接"></i></h2>          <p>在列表中支持数据的分组展示，可以使列表显示结构清晰，查找方便，从而提高使用效率。分组列表在实际应用中十分常见，如下图所示联系人列表。</p>     <p><strong>图16</strong> 联系人分组列表</p>     <p><span><img originheight="312" originwidth="369" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114809.04810216406696045130078216536288:50001231000000:2800:56490784C3000CA644D544DDF3320FD7E0088BAAB4340C7BD55C13EFA0924548.png" width="369" height="312"></span></p>     <p>在List组件中使用ListItemGroup对项目进行分组，可以构建二维列表。</p>     <p>在List组件中可以直接使用一个或者多个ListItemGroup组件，ListItemGroup的宽度默认充满List组件。在初始化ListItemGroup时，可通过header参数设置列表分组的头部组件。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ContactsList</span> {</li><li>  </li><li>  <span class="hljs-meta">@Builder</span> <span class="hljs-title function_">itemHead</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-comment">// 列表分组的头部组件，对应联系人分组A、B等位置的组件</span></li><li>    <span class="hljs-title class_">Text</span>(text)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#fff1f3f5'</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">List</span>() {</li><li>      <span class="hljs-title class_">ListItemGroup</span>({ <span class="hljs-attr">header</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">itemHead</span>(<span class="hljs-string">'A'</span>) }) {</li><li>        <span class="hljs-comment">// 循环渲染分组A的ListItem</span></li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">ListItemGroup</span>({ <span class="hljs-attr">header</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">itemHead</span>(<span class="hljs-string">'B'</span>) }) {</li><li>        <span class="hljs-comment">// 循环渲染分组B的ListItem</span></li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>如果多个ListItemGroup结构类似，可以将多个分组的数据组成数组，然后使用ForEach对多个分组进行循环渲染。例如在联系人列表中，将每个分组的联系人数据contacts（可参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-layout-development-create-list#迭代列表内容">迭代列表内容</a>章节）和对应分组的标题title数据进行组合，定义为数组contactsGroups。然后在ForEach中对contactsGroups进行循环渲染，即可实现多个分组的联系人列表。可参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-layout-development-create-list#添加粘性标题">添加粘性标题</a>章节示例代码。</p>    </div>    <div class="tiledSection">     <h2 id="添加粘性标题">添加粘性标题<i class="anchor-icon anchor-icon-link" anchorid="添加粘性标题" tips="复制节点链接"></i></h2>          <p>粘性标题是一种常见的标题模式，常用于定位字母列表的头部元素。如下图所示，在联系人列表中滚动A部分时，B部分开始的头部元素始终处于A的下方。而在开始滚动B部分时，B的头部会固定在屏幕顶部，直到所有B的项均完成滚动后，才被后面的头部替代。</p>     <p>粘性标题不仅有助于阐明列表中数据的表示形式和用途，还可以帮助用户在大量信息中进行数据定位，从而避免用户在标题所在的表的顶部与感兴趣区域之间反复滚动。</p>     <p><strong>图17</strong> 粘性标题</p>     <p><span><img originheight="279" originwidth="390" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114809.13743711127426332567977320077652:50001231000000:2800:9C5748F39BF627E34645412B93AED79902A2564BC4DC2C2DC2923CED1C4202E9.gif" width="390" height="279"></span></p>     <p>List组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#sticky9" target="_blank">sticky</a>属性配合ListItemGroup组件使用，用于设置ListItemGroup中的头部组件是否呈现吸顶效果或者尾部组件是否呈现吸底效果。</p>     <p>通过给List组件设置sticky属性为StickyStyle.Header，即可实现列表的粘性标题效果。如果需要支持吸底效果，可以通过footer参数初始化ListItemGroup的底部组件，并将sticky属性设置为StickyStyle.Footer。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { util } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Contact</span> {</li><li>  <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span> = util.<span class="hljs-title function_">generateRandomUUID</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-attr">icon</span>: <span class="hljs-title class_">Resource</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, icon: Resource</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">icon</span> = icon;</li><li>  }</li><li>}</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ContactsGroup</span> {</li><li>  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-attr">contacts</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">object</span>&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ContactsGroupDataSource</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IDataSource</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">list</span>: <span class="hljs-built_in">object</span>[] = [];</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">list: <span class="hljs-built_in">object</span>[]</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span> = list;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">totalCount</span>(): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-property">length</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">getData</span>(<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">object</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>[index];</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">registerDataChangeListener</span>(<span class="hljs-attr">listener</span>: <span class="hljs-title class_">DataChangeListener</span>): <span class="hljs-built_in">void</span> {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">unregisterDataChangeListener</span>(<span class="hljs-attr">listener</span>: <span class="hljs-title class_">DataChangeListener</span>): <span class="hljs-built_in">void</span> {</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> <span class="hljs-attr">contactsGroups</span>: <span class="hljs-built_in">object</span>[] = [</li><li>  {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">'A'</span>,</li><li>    <span class="hljs-attr">contacts</span>: [</li><li>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Contact</span>(<span class="hljs-string">'艾佳'</span>, $r(<span class="hljs-string">'app.media.iconA'</span>)),</li><li>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Contact</span>(<span class="hljs-string">'安安'</span>, $r(<span class="hljs-string">'app.media.iconB'</span>)),</li><li>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Contact</span>(<span class="hljs-string">'Angela'</span>, $r(<span class="hljs-string">'app.media.iconC'</span>)),</li><li>    ],</li><li>    <span class="hljs-attr">key</span>: util.<span class="hljs-title function_">generateRandomUUID</span>(<span class="hljs-literal">true</span>)</li><li>  } <span class="hljs-keyword">as</span> <span class="hljs-title class_">ContactsGroup</span>,</li><li>  {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">'B'</span>,</li><li>    <span class="hljs-attr">contacts</span>: [</li><li>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Contact</span>(<span class="hljs-string">'白叶'</span>, $r(<span class="hljs-string">'app.media.iconD'</span>)),</li><li>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Contact</span>(<span class="hljs-string">'伯明'</span>, $r(<span class="hljs-string">'app.media.iconE'</span>)),</li><li>    ],</li><li>    <span class="hljs-attr">key</span>: util.<span class="hljs-title function_">generateRandomUUID</span>(<span class="hljs-literal">true</span>)</li><li>  } <span class="hljs-keyword">as</span> <span class="hljs-title class_">ContactsGroup</span>,</li><li>  <span class="hljs-comment">// ...</span></li><li>]</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> <span class="hljs-attr">contactsGroupsDataSource</span>: <span class="hljs-title class_">ContactsGroupDataSource</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ContactsGroupDataSource</span>(contactsGroups);</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ContactsList</span> {</li><li>  <span class="hljs-comment">// 定义分组联系人数据集合contactsGroups数组</span></li><li>  <span class="hljs-meta">@Builder</span> <span class="hljs-title function_">itemHead</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-comment">// 列表分组的头部组件，对应联系人分组A、B等位置的组件</span></li><li>    <span class="hljs-title class_">Text</span>(text)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#fff1f3f5'</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">List</span>() {</li><li>      <span class="hljs-comment">// 懒加载ListItemGroup，contactsGroups为多个分组联系人contacts和标题title的数据集合</span></li><li>      <span class="hljs-title class_">LazyForEach</span>(contactsGroupsDataSource, <span class="hljs-function">(<span class="hljs-params">itemGroup: ContactsGroup</span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">ListItemGroup</span>({ <span class="hljs-attr">header</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">itemHead</span>(itemGroup.<span class="hljs-property">title</span>) }) {</li><li>          <span class="hljs-comment">// 懒加载ListItem</span></li><li>          <span class="hljs-keyword">if</span> (itemGroup.<span class="hljs-property">contacts</span>) {</li><li>            <span class="hljs-title class_">LazyForEach</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ContactsGroupDataSource</span>(itemGroup.<span class="hljs-property">contacts</span>), <span class="hljs-function">(<span class="hljs-params">item: Contact</span>) =&gt;</span> {</li><li>              <span class="hljs-title class_">ListItem</span>() {</li><li>                <span class="hljs-comment">// ...</span></li><li>              }</li><li>            }, <span class="hljs-function">(<span class="hljs-params">item: Contact</span>) =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(item))</li><li>          }</li><li>        }</li><li>      }, <span class="hljs-function">(<span class="hljs-params">itemGroup: ContactsGroup</span>) =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(itemGroup))</li><li>    }.<span class="hljs-title function_">sticky</span>(<span class="hljs-title class_">StickyStyle</span>.<span class="hljs-property">Header</span>)  <span class="hljs-comment">// 设置吸顶，实现粘性标题效果</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="控制滚动位置">控制滚动位置<i class="anchor-icon anchor-icon-link" anchorid="控制滚动位置" tips="复制节点链接"></i></h2>          <p>控制滚动位置在实际应用中十分常见，例如当新闻页列表项数量庞大，用户滚动列表到一定位置时，希望快速滚动到列表底部或返回列表顶部。此时，可以通过控制滚动位置来实现列表的快速定位，如下图所示。</p>     <p><strong>图18</strong> 返回列表顶部</p>     <p><span><img originheight="620" originwidth="421" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114809.71947067632325021087301464058311:50001231000000:2800:6527C801D82DAAB6CA31FEFE37664C472714081100BFF957E217ABC8DD311835.gif" width="421" height="620"></span></p>     <p>List组件初始化时，可以通过scroller参数绑定一个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll#scroller" target="_blank">Scroller</a>对象，进行列表的滚动控制。例如，用户在新闻应用中，点击新闻页面底部的返回顶部按钮时，就可以通过Scroller对象的scrollToIndex方法使列表滚动到指定的列表项索引位置。</p>     <p>首先，需要创建一个Scroller的对象listScroller。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">private</span> <span class="hljs-attr">listScroller</span>: <span class="hljs-title class_">Scroller</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scroller</span>();</li></ol></pre></div></div>     <p>然后，通过将listScroller用于初始化List组件的scroller参数，完成listScroller与列表的绑定。在需要跳转的位置指定scrollToIndex的参数为0，表示返回列表顶部。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Stack</span>({ <span class="hljs-attr">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span> }) {</li><li>  <span class="hljs-comment">// 将listScroller用于初始化List组件的scroller参数，完成listScroller与列表的绑定。</span></li><li>  <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">scroller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">listScroller</span> }) {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title class_">Button</span>() {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">// 点击按钮时，指定跳转位置，返回列表顶部</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listScroller</span>.<span class="hljs-title function_">scrollToIndex</span>(<span class="hljs-number">0</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="响应滚动位置">响应滚动位置<i class="anchor-icon anchor-icon-link" anchorid="响应滚动位置" tips="复制节点链接"></i></h2>          <p>许多应用需要监听列表的滚动位置变化并作出响应。例如，在联系人列表滚动时，如果跨越了不同字母开头的分组，则侧边字母索引栏也需要更新到对应的字母位置。</p>     <p>除了字母索引之外，滚动列表结合多级分类索引在应用开发过程中也很常见，例如购物应用的商品分类页面，多级分类也需要监听列表的滚动位置。</p>     <p><strong>图19</strong> 字母索引响应联系人列表滚动</p>     <p><span><img originheight="279" originwidth="421" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114809.81082852785512898383909349584137:50001231000000:2800:39BE57121A4E44806D627A4F5275DFCBF7CC23FF5B9CD506E78C3D061D9F9C34.gif" width="421" height="279"></span></p>     <p>如上图所示，当联系人列表从A滚动到B时，右侧索引栏也需要同步从选中A状态变成选中B状态。此场景可以通过监听List组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#onscrollindex" target="_blank">onScrollIndex</a>事件来实现，右侧索引栏需要使用字母表索引组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-alphabet-indexer" target="_blank">AlphabetIndexer</a>。</p>     <p>在列表滚动时，根据列表此时所在的索引值位置firstIndex，重新计算字母索引栏对应字母的位置selectedIndex。由于AlphabetIndexer组件通过selected属性设置了选中项索引值，当selectedIndex变化时会触发AlphabetIndexer组件重新渲染，从而显示为选中对应字母的状态。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> alphabets = [<span class="hljs-string">'#'</span>, <span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>, <span class="hljs-string">'D'</span>, <span class="hljs-string">'E'</span>, <span class="hljs-string">'F'</span>, <span class="hljs-string">'G'</span>, <span class="hljs-string">'H'</span>, <span class="hljs-string">'I'</span>, <span class="hljs-string">'J'</span>, <span class="hljs-string">'K'</span>,</li><li>  <span class="hljs-string">'L'</span>, <span class="hljs-string">'M'</span>, <span class="hljs-string">'N'</span>, <span class="hljs-string">'O'</span>, <span class="hljs-string">'P'</span>, <span class="hljs-string">'Q'</span>, <span class="hljs-string">'R'</span>, <span class="hljs-string">'S'</span>, <span class="hljs-string">'T'</span>, <span class="hljs-string">'U'</span>, <span class="hljs-string">'V'</span>, <span class="hljs-string">'W'</span>, <span class="hljs-string">'X'</span>, <span class="hljs-string">'Y'</span>, <span class="hljs-string">'Z'</span>];</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ContactsList</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">selectedIndex</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">listScroller</span>: <span class="hljs-title class_">Scroller</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scroller</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>({ <span class="hljs-attr">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">End</span> }) {</li><li>      <span class="hljs-title class_">List</span>({ <span class="hljs-attr">scroller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">listScroller</span> }) {}</li><li>      .<span class="hljs-title function_">onScrollIndex</span>(<span class="hljs-function">(<span class="hljs-params">firstIndex: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-comment">// 根据列表滚动到的索引值，重新计算对应联系人索引栏的位置this.selectedIndex</span></li><li>      })</li><li>
</li><li>      <span class="hljs-comment">// 字母表索引组件</span></li><li>      <span class="hljs-title class_">AlphabetIndexer</span>({ <span class="hljs-attr">arrayValue</span>: alphabets, <span class="hljs-attr">selected</span>: <span class="hljs-number">0</span> })</li><li>        .<span class="hljs-title function_">selected</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedIndex</span>)</li><li>        .<span class="hljs-title function_">onSelect</span>(<span class="hljs-function">(<span class="hljs-params">index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">listScroller</span>.<span class="hljs-title function_">scrollToIndex</span>(index);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>计算索引值时，ListItemGroup作为一个整体占一个索引值，不计算ListItemGroup内部ListItem的索引值。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="响应列表项侧滑">响应列表项侧滑<i class="anchor-icon anchor-icon-link" anchorid="响应列表项侧滑" tips="复制节点链接"></i></h2>          <p>侧滑菜单在许多应用中都很常见。例如，通讯类应用通常会给消息列表提供侧滑删除功能，即用户可以通过向左侧滑列表的某一项，再点击删除按钮删除消息，如下图所示。其中，列表项头像右上角标记设置参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-layout-development-create-list#给列表项添加标记">给列表项添加标记</a>。</p>     <p><strong>图20</strong> 侧滑删除列表项</p>     <p><span><img originheight="279" originwidth="421" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114809.80990465049190758424215663753130:50001231000000:2800:A25C7AB3487E96BEBC3D5650BAF62A77F1720C7A85FA40EFC8AB974889FCC320.gif" width="421" height="279"></span></p>     <p>ListItem的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-listitem#swipeaction9" target="_blank">swipeAction属性</a>可用于实现列表项的左右滑动功能。swipeAction属性方法初始化时有必填参数SwipeActionOptions，其中，start参数表示设置列表项右滑时起始端滑出的组件，end参数表示设置列表项左滑时尾端滑出的组件。</p>     <p>在消息列表中，end参数表示设置ListItem左滑时尾端划出自定义组件，即删除按钮。在初始化end方法时，将滑动列表项的索引传入删除按钮组件，当用户点击删除按钮时，可以根据索引值来删除列表项对应的数据，从而实现侧滑删除功能。</p>     <ol>      <li>       <p>实现尾端滑出组件的构建。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span> <span class="hljs-title function_">itemEnd</span>(<span class="hljs-params">index: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-comment">// 构建尾端滑出组件</span></li><li>  <span class="hljs-title class_">Button</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Circle</span> }) {</li><li>    <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.ic_public_delete_filled'</span>))</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">20</span>)</li><li>  }</li><li>  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">// this.messages为列表数据源，可根据实际场景构造。点击后从数据源删除指定数据项。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messages</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);</li><li>  })</li><li>}</li></ol></pre></div></div></li>      <li>       <p>绑定swipeAction属性到可左滑的ListItem上。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 构建List时，通过ForEach基于数据源this.messages循环渲染ListItem。</span></li><li><span class="hljs-title class_">ListItem</span>() {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li>.<span class="hljs-title function_">swipeAction</span>({</li><li>  <span class="hljs-attr">end</span>: {</li><li>    <span class="hljs-comment">// index为该ListItem在List中的索引值。</span></li><li>    <span class="hljs-attr">builder</span>: <span class="hljs-function">() =&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">itemEnd</span>(index) },</li><li>  }</li><li>}) <span class="hljs-comment">// 设置侧滑属性.</span></li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="给列表项添加标记">给列表项添加标记<i class="anchor-icon anchor-icon-link" anchorid="给列表项添加标记" tips="复制节点链接"></i></h2>          <p>添加标记是一种无干扰性且直观的方法，用于显示通知或将注意力集中到应用内的某个区域。例如，当消息列表接收到新消息时，通常对应的联系人头像的右上方会出现标记，提示有若干条未读消息，如下图所示。</p>     <p><strong>图21</strong> 给列表项添加标记</p>     <p><span><img originheight="279" originwidth="423" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114809.06487511447116550412594022509704:50001231000000:2800:F72F0DA6ADD011FA2446F3D556BBCA825B5BF8ED7247E6E6A086022ED5343111.png" width="423" height="279"></span></p>     <p>在ListItem中使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-badge" target="_blank">Badge</a>组件可实现给列表项添加标记功能。Badge是可以附加在单个组件上用于信息标记的容器组件。</p>     <p>在消息列表中，若希望在联系人头像右上角添加标记，可在实现消息列表项ListItem的联系人头像时，将头像Image组件作为Badge的子组件。</p>     <p>在Badge组件中，count和position参数用于设置需要展示的消息数量和提示点显示位置，还可以通过style参数灵活设置标记的样式。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">ListItem</span>() {</li><li>  <span class="hljs-title class_">Badge</span>({</li><li>    <span class="hljs-attr">count</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">position</span>: <span class="hljs-title class_">BadgePosition</span>.<span class="hljs-property">RightTop</span>,</li><li>    <span class="hljs-attr">style</span>: { <span class="hljs-attr">badgeSize</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">badgeColor</span>: <span class="hljs-string">'#FA2A2D'</span> }</li><li>  }) {</li><li>    <span class="hljs-comment">// Image组件实现消息联系人头像</span></li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="下拉刷新与上拉加载">下拉刷新与上拉加载<i class="anchor-icon anchor-icon-link" anchorid="下拉刷新与上拉加载" tips="复制节点链接"></i></h2>          <p>页面的下拉刷新与上拉加载功能在移动应用中十分常见，例如，新闻页面的内容刷新和加载。这两种操作的原理都是通过响应用户的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-touch" target="_blank">触摸事件</a>，在顶部或者底部显示一个刷新或加载视图，完成后再将此视图隐藏。</p>     <p>以下拉刷新为例，其实现主要分成三步：</p>     <ol>      <li>       <p>监听手指按下事件，记录其初始位置的值。</p></li>      <li>       <p>监听手指按压移动事件，记录并计算当前移动的位置与初始值的差值，大于0表示向下移动，同时设置一个允许移动的最大值。</p></li>      <li>       <p>监听手指抬起事件，若此时移动达到最大值，则触发数据加载并显示刷新视图，加载完成后将此视图隐藏。</p></li>     </ol>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>页面的下拉刷新操作推荐使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-refresh" target="_blank">Refresh</a>组件实现。</p>      </div></div></div>     <p>下拉刷新与上拉加载的具体实现可参考<a href="https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_NEXT-NewsDataArkTS" target="_blank">新闻数据加载</a>。</p>    </div>    <div class="tiledSection">     <h2 id="编辑列表">编辑列表<i class="anchor-icon anchor-icon-link" anchorid="编辑列表" tips="复制节点链接"></i></h2>          <p>列表的编辑模式用途十分广泛，常见于待办事项管理、文件管理、备忘录的记录管理等应用场景。在列表的编辑模式下，新增和删除列表项是最基础的功能，其核心是对列表项对应的数据集合进行数据添加和删除。</p>     <p>下面以待办事项管理为例，介绍如何快速实现新增和删除列表项功能。</p>    </div>    <div class="tiledSection">     <h3 id="新增列表项" class="firsth2">新增列表项<i class="anchor-icon anchor-icon-link" anchorid="新增列表项" tips="复制节点链接"></i></h3>          <p>如下图所示，当用户点击添加按钮时，提供用户新增列表项内容选择或填写的交互界面，用户点击确定后，列表中新增对应的项目。</p>     <p><strong>图22</strong> 新增待办</p>     <p><span><img originheight="707" originwidth="393" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114809.55053913619977983231168079218780:50001231000000:2800:5EE8108194CB2CFB532485CEFD9B8BB497AD342C9DFFF5697B576CF427ABC881.gif" width="393" height="707"></span></p>     <p>添加列表项功能实现主要流程如下：</p>     <ol>      <li>       <p>定义列表项数据结构，以待办事项管理为例，首先定义待办数据结构。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">//ToDo.ets</span></li><li><span class="hljs-keyword">import</span> { util } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToDo</span> {</li><li>  <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span> = util.<span class="hljs-title function_">generateRandomUUID</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>构建列表整体布局和列表项。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">//ToDoListItem.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ToDo</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./ToDo'</span>;</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">ToDoListItem</span> {</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">isEditMode</span>: <span class="hljs-built_in">boolean</span>;</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">selectedItems</span>: <span class="hljs-title class_">ToDo</span>[];</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">toDoItem</span>: <span class="hljs-title class_">ToDo</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToDo</span>(<span class="hljs-string">""</span>);</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>   <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceBetween</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>     <span class="hljs-comment">// ...</span></li><li>   }</li><li>   .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>   .<span class="hljs-title function_">height</span>(<span class="hljs-number">80</span>)</li><li>   <span class="hljs-comment">//.padding() 根据具体使用场景设置</span></li><li>   .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">24</span>)</li><li>   <span class="hljs-comment">//.linearGradient() 根据具体使用场景设置</span></li><li>   .<span class="hljs-title function_">gesture</span>(</li><li>     <span class="hljs-title class_">GestureGroup</span>(<span class="hljs-title class_">GestureMode</span>.<span class="hljs-property">Exclusive</span>,</li><li>     <span class="hljs-title class_">LongPressGesture</span>()</li><li>       .<span class="hljs-title function_">onAction</span>(<span class="hljs-function">() =&gt;</span> {</li><li>         <span class="hljs-comment">// ...</span></li><li>       })</li><li>     )</li><li>   )</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>初始化待办列表数据和可选事项，最后，构建列表布局和列表项。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">//ToDoList.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ToDo</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./ToDo'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ToDoListItem</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./ToDoListItem'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ToDoList</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">toDoData</span>: <span class="hljs-title class_">ToDo</span>[] = [];</li><li>  <span class="hljs-meta">@Watch</span>(<span class="hljs-string">'onEditModeChange'</span>) <span class="hljs-meta">@State</span> <span class="hljs-attr">isEditMode</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">selectedItems</span>: <span class="hljs-title class_">ToDo</span>[] = [];</li><li> <span class="hljs-keyword">private</span> <span class="hljs-attr">availableThings</span>: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">'读书'</span>, <span class="hljs-string">'运动'</span>, <span class="hljs-string">'旅游'</span>, <span class="hljs-string">'听音乐'</span>, <span class="hljs-string">'看电影'</span>, <span class="hljs-string">'唱歌'</span>];</li><li>
</li><li>  <span class="hljs-title function_">onEditModeChange</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isEditMode</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedItems</span> = [];</li><li>    }</li><li> }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isEditMode</span>) {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'X'</span>)</li><li>            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">isEditMode</span> = <span class="hljs-literal">false</span>;</li><li>            })</li><li>            .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">20</span> })</li><li>        } <span class="hljs-keyword">else</span> {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'待办'</span>)</li><li>            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">36</span>)</li><li>            .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">40</span> })</li><li>          <span class="hljs-title class_">Blank</span>()</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'+'</span>) <span class="hljs-comment">//提供新增列表项入口，即给新增按钮添加点击事件</span></li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">showTextPickerDialog</span>({</li><li>                <span class="hljs-attr">range</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">availableThings</span>,</li><li>                <span class="hljs-attr">onAccept</span>: <span class="hljs-function">(<span class="hljs-params">value: TextPickerResult</span>) =&gt;</span> {</li><li>                  <span class="hljs-keyword">let</span> arr = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(value.<span class="hljs-property">index</span>) ? value.<span class="hljs-property">index</span> : [value.<span class="hljs-property">index</span>];</li><li>                  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-property">length</span>; i++) {</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">toDoData</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ToDo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">availableThings</span>[arr[i]])); <span class="hljs-comment">// 新增列表项数据toDoData(可选事项)</span></li><li>                  }</li><li>                },</li><li>              })</li><li>            })</li><li>        }</li><li>        <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {</li><li>          <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">toDoData</span>, <span class="hljs-function">(<span class="hljs-params">toDoItem: ToDo</span>) =&gt;</span> {</li><li>            <span class="hljs-title class_">ListItem</span>() {</li><li>              <span class="hljs-comment">// 将toDoData的每个数据放入到以model的形式放进ListItem里</span></li><li>              <span class="hljs-title class_">ToDoListItem</span>({</li><li>                <span class="hljs-attr">isEditMode</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isEditMode</span>,</li><li>                <span class="hljs-attr">toDoItem</span>: toDoItem,</li><li>                <span class="hljs-attr">selectedItems</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedItems</span> })</li><li>            }</li><li>          }, <span class="hljs-function">(<span class="hljs-params">toDoItem: ToDo</span>) =&gt;</span> toDoItem.<span class="hljs-property">key</span>.<span class="hljs-title function_">toString</span>())</li><li>        }</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="删除列表项">删除列表项<i class="anchor-icon anchor-icon-link" anchorid="删除列表项" tips="复制节点链接"></i></h3>          <p>如下图所示，当用户长按列表项进入删除模式时，提供用户删除列表项选择的交互界面，用户勾选完成后点击删除按钮，列表中删除对应的项目。</p>     <p><strong>图23</strong> 长按删除待办事项</p>     <p><span><img originheight="707" originwidth="393" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114810.67598706191668331712410396595759:50001231000000:2800:B24B92BFB9C372D35F718EF750364A2AB0E7F8BB0D68C4F3D280F9FFAA45981F.gif" width="393" height="707"></span></p>     <p>删除列表项功能实现主要流程如下：</p>     <ol>      <li>       <p>列表的删除功能一般进入编辑模式后才可使用，所以需要提供编辑模式的入口。</p>       <p>以待办列表为例，通过监听列表项的长按事件，当用户长按列表项时，进入编辑模式。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 结构参考</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToDo</span> {</li><li>  <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span> = util.<span class="hljs-title function_">generateRandomUUID</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-attr">toDoData</span>: <span class="hljs-title class_">ToDo</span>[] = [];</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;</li><li>  }</li><li>}</li></ol></pre></div></div>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 实现参考</span></li><li><span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceBetween</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li>.<span class="hljs-title function_">gesture</span>(</li><li><span class="hljs-title class_">GestureGroup</span>(<span class="hljs-title class_">GestureMode</span>.<span class="hljs-property">Exclusive</span>,</li><li>  <span class="hljs-title class_">LongPressGesture</span>()</li><li>    .<span class="hljs-title function_">onAction</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isEditMode</span>) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isEditMode</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">//进入编辑模式</span></li><li>      }</li><li>    })</li><li>  )</li><li>)</li></ol></pre></div></div></li>      <li>       <p>需要响应用户的选择交互，记录要删除的列表项数据。</p>       <p>在待办列表中，通过勾选框的勾选或取消勾选，响应用户勾选列表项变化，记录所有选择的列表项。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 结构参考</span></li><li><span class="hljs-keyword">import</span> { util } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToDo</span> {</li><li> <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span> = util.<span class="hljs-title function_">generateRandomUUID</span>(<span class="hljs-literal">true</span>);</li><li> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;</li><li> <span class="hljs-attr">toDoData</span>: <span class="hljs-title class_">ToDo</span>[] = [];</li><li>
</li><li> <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {</li><li>   <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;</li><li> }</li><li>}</li></ol></pre></div></div>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 实现参考</span></li><li><span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isEditMode</span>) {</li><li>  <span class="hljs-title class_">Checkbox</span>()</li><li>    .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">isSelected</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (isSelected) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedItems</span>.<span class="hljs-title function_">push</span>(toDoList.<span class="hljs-property">toDoItem</span>); <span class="hljs-comment">// this.selectedItems为勾选时，记录选中的列表项，可根据实际场景构造</span></li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-keyword">let</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedItems</span>.<span class="hljs-title function_">indexOf</span>(toDoList.<span class="hljs-property">toDoItem</span>);</li><li>        <span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedItems</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>); <span class="hljs-comment">// 取消勾选时，则将此项从selectedItems中删除</span></li><li>        }</li><li>      }</li><li>    })</li><li>}</li></ol></pre></div></div></li>      <li>       <p>需要响应用户点击删除按钮事件，删除列表中对应的选项。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 结构参考</span></li><li><span class="hljs-keyword">import</span> { util } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToDo</span> {</li><li>  <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span> = util.<span class="hljs-title function_">generateRandomUUID</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-attr">toDoData</span>: <span class="hljs-title class_">ToDo</span>[] = [];</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;</li><li>  }</li><li>}</li></ol></pre></div></div>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 实现参考</span></li><li><span class="hljs-title class_">Button</span>(<span class="hljs-string">'删除'</span>)</li><li>  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">// this.toDoData为待办的列表项，可根据实际场景构造。点击后删除选中的列表项对应的toDoData数据</span></li><li>    <span class="hljs-keyword">let</span> leftData = <span class="hljs-variable language_">this</span>.<span class="hljs-property">toDoData</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">return</span> !<span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedItems</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">selectedItem</span>) =&gt;</span> selectedItem == item);</li><li>    })</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">toDoData</span> = leftData;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isEditMode</span> = <span class="hljs-literal">false</span>;</li><li>  })</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="长列表的处理">长列表的处理<i class="anchor-icon anchor-icon-link" anchorid="长列表的处理" tips="复制节点链接"></i></h2>          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-rendering-control-foreach">循环渲染</a>适用于短列表，当构建具有大量列表项的长列表时，如果直接采用循环渲染方式，会一次性加载所有的列表元素，会导致页面启动时间过长，影响用户体验。因此，推荐使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-rendering-control-lazyforeach">数据懒加载</a>（LazyForEach）方式实现按需迭代加载数据，从而提升列表性能。</p>     <p>关于长列表按需加载优化的具体实现可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-rendering-control-lazyforeach">数据懒加载</a>章节中的示例。</p>     <p>当使用懒加载方式渲染列表时，为了更好的列表滚动体验，减少列表滑动时出现白块，List组件提供了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#cachedcount" target="_blank">cachedCount</a>参数用于设置列表项缓存数，懒加载方式只会预加载List显示区域外cachedCount的内容，而非懒加载会全部加载。无论懒加载还是非懒加载都只布局List显示区域+List显示区域外cachedCount的内容。</p>     <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">List</span>() {</li><li>  <span class="hljs-comment">// ...</span></li><li>}.<span class="hljs-title function_">cachedCount</span>(<span class="hljs-number">3</span>)</li></ol></pre></div></div>     <p>以垂直列表为例：</p>     <ul>      <li>       <p>List设置cachedCount后，显示区域外上下各会预加载并布局cachedCount行ListItem。计算ListItem行数时，会计算ListItemGroup内部的ListItem行数。如果ListItemGroup内没有ListItem，则整个ListItemGroup算一行。</p></li>      <li>       <p>List下嵌套使用LazyForEach，并且LazyForEach下嵌套使用ListItemGroup时，LazyForEach会在List显示区域外上下各会创建cachedCount个ListItemGroup。</p></li>     </ul>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ol>        <li>         <p>cachedCount的增加会增大UI的CPU、内存开销。使用时需要根据实际情况，综合性能和用户体验进行调整。</p></li>        <li>         <p>列表使用数据懒加载时，除了显示区域的列表项和前后缓存的列表项，其他列表项会被销毁。</p></li>       </ol>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="折叠与展开">折叠与展开<i class="anchor-icon anchor-icon-link" anchorid="折叠与展开" tips="复制节点链接"></i></h2>          <p>列表项的折叠与展开用途广泛，常用于信息清单的展示、填写等应用场景。</p>     <p><strong>图24</strong> 列表项的折叠与展开</p>     <p><span><img originheight="559" originwidth="434" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114810.40261861683430691718461821852127:50001231000000:2800:AE011DD99003B9D1290A5FCC6EAC61E00E7640AEE4B635F28C6E15EBAA0BE8E3.gif" width="434" height="559"></span></p>     <p>列表项折叠与展开效果实现主要流程如下：</p>     <ol>      <li>       <p>定义列表项数据结构。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { curves } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ItemInfo</span> {</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>,</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>,</li><li>  <span class="hljs-attr">label</span>: <span class="hljs-title class_">ResourceStr</span>,</li><li>  <span class="hljs-keyword">type</span>?: <span class="hljs-built_in">string</span>,</li><li>}</li><li>
</li><li><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ItemGroupInfo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ItemInfo</span> {</li><li>  <span class="hljs-attr">children</span>: <span class="hljs-title class_">ItemInfo</span>[]</li><li>}</li></ol></pre></div></div></li>      <li>       <p>构造列表结构。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@State</span> <span class="hljs-attr">routes</span>: <span class="hljs-title class_">ItemGroupInfo</span>[] = [</li><li>  {</li><li>    <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">name</span>: <span class="hljs-string">'basicInfo'</span>,</li><li>    <span class="hljs-attr">label</span>: <span class="hljs-string">'个人基本资料'</span>,</li><li>    <span class="hljs-attr">children</span>: [</li><li>      {</li><li>        <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">name</span>: <span class="hljs-string">'昵称'</span>,</li><li>        <span class="hljs-attr">label</span>: <span class="hljs-string">'xxxx'</span>,</li><li>        <span class="hljs-attr">type</span>: <span class="hljs-string">'Text'</span></li><li>      },</li><li>      {</li><li>        <span class="hljs-attr">index</span>: <span class="hljs-number">1</span>,</li><li>        <span class="hljs-attr">name</span>: <span class="hljs-string">'头像'</span>,</li><li>        <span class="hljs-attr">label</span>: $r(<span class="hljs-string">'sys.media.ohos_user_auth_icon_face'</span>),</li><li>        <span class="hljs-attr">type</span>: <span class="hljs-string">'Image'</span></li><li>      },</li><li>      {</li><li>        <span class="hljs-attr">index</span>: <span class="hljs-number">2</span>,</li><li>        <span class="hljs-attr">name</span>: <span class="hljs-string">'年龄'</span>,</li><li>        <span class="hljs-attr">label</span>: <span class="hljs-string">'xxxx'</span>,</li><li>        <span class="hljs-attr">type</span>: <span class="hljs-string">'Text'</span></li><li>      },</li><li>      {</li><li>        <span class="hljs-attr">index</span>: <span class="hljs-number">3</span>,</li><li>        <span class="hljs-attr">name</span>: <span class="hljs-string">'生日'</span>,</li><li>        <span class="hljs-attr">label</span>: <span class="hljs-string">'xxxxxxxxx'</span>,</li><li>        <span class="hljs-attr">type</span>: <span class="hljs-string">'Text'</span></li><li>      },</li><li>      {</li><li>        <span class="hljs-attr">index</span>: <span class="hljs-number">4</span>,</li><li>        <span class="hljs-attr">name</span>: <span class="hljs-string">'性别'</span>,</li><li>        <span class="hljs-attr">label</span>: <span class="hljs-string">'xxxxxxxx'</span>,</li><li>        <span class="hljs-attr">type</span>: <span class="hljs-string">'Text'</span></li><li>      },</li><li>    ]</li><li>  },</li><li>  {</li><li>    <span class="hljs-attr">index</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">name</span>: <span class="hljs-string">'equipInfo'</span>,</li><li>    <span class="hljs-attr">label</span>: <span class="hljs-string">'设备信息'</span>,</li><li>    <span class="hljs-attr">children</span>: []</li><li>  },</li><li>  {</li><li>    <span class="hljs-attr">index</span>: <span class="hljs-number">2</span>,</li><li>    <span class="hljs-attr">name</span>: <span class="hljs-string">'appInfo'</span>,</li><li>    <span class="hljs-attr">label</span>: <span class="hljs-string">'应用使用信息'</span>,</li><li>    <span class="hljs-attr">children</span>: []</li><li>  },</li><li>  {</li><li>    <span class="hljs-attr">index</span>: <span class="hljs-number">3</span>,</li><li>    <span class="hljs-attr">name</span>: <span class="hljs-string">'uploadInfo'</span>,</li><li>    <span class="hljs-attr">label</span>: <span class="hljs-string">'您主动上传的数据'</span>,</li><li>    <span class="hljs-attr">children</span>: []</li><li>  },</li><li>  {</li><li>    <span class="hljs-attr">index</span>: <span class="hljs-number">4</span>,</li><li>    <span class="hljs-attr">name</span>: <span class="hljs-string">'tradeInfo'</span>,</li><li>    <span class="hljs-attr">label</span>: <span class="hljs-string">'交易与资产信息'</span>,</li><li>    <span class="hljs-attr">children</span>: []</li><li>  },</li><li>  {</li><li>    <span class="hljs-attr">index</span>: <span class="hljs-number">5</span>,</li><li>    <span class="hljs-attr">name</span>: <span class="hljs-string">'otherInfo'</span>,</li><li>    <span class="hljs-attr">label</span>: <span class="hljs-string">'其他资料'</span>,</li><li>    <span class="hljs-attr">children</span>: []</li><li>  },</li><li>];</li><li><span class="hljs-meta">@State</span> <span class="hljs-attr">expandedItems</span>: <span class="hljs-built_in">boolean</span>[] = <span class="hljs-title class_">Array</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>.<span class="hljs-property">length</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">false</span>);</li><li><span class="hljs-meta">@State</span> <span class="hljs-attr">selection</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li><span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-comment">// ...</span></li><li>
</li><li>    <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {</li><li>      <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>, <span class="hljs-function">(<span class="hljs-params">itemGroup: ItemGroupInfo</span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">ListItemGroup</span>({</li><li>          <span class="hljs-attr">header</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">ListItemGroupHeader</span>(itemGroup),</li><li>          <span class="hljs-attr">style</span>: <span class="hljs-title class_">ListItemGroupStyle</span>.<span class="hljs-property">CARD</span>,</li><li>        }) {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">expandedItems</span>[itemGroup.<span class="hljs-property">index</span>] &amp;&amp; itemGroup.<span class="hljs-property">children</span>) {</li><li>            <span class="hljs-title class_">ForEach</span>(itemGroup.<span class="hljs-property">children</span>, <span class="hljs-function">(<span class="hljs-params">item: ItemInfo</span>) =&gt;</span> {</li><li>              <span class="hljs-title class_">ListItem</span>({ <span class="hljs-attr">style</span>: <span class="hljs-title class_">ListItemStyle</span>.<span class="hljs-property">CARD</span> }) {</li><li>                <span class="hljs-title class_">Row</span>() {</li><li>                  <span class="hljs-title class_">Text</span>(item.<span class="hljs-property">name</span>)</li><li>                  <span class="hljs-title class_">Blank</span>()</li><li>                  <span class="hljs-keyword">if</span> (item.<span class="hljs-property">type</span> === <span class="hljs-string">'Image'</span>) {</li><li>                    <span class="hljs-title class_">Image</span>(item.<span class="hljs-property">label</span>)</li><li>                      .<span class="hljs-title function_">height</span>(<span class="hljs-number">20</span>)</li><li>                      .<span class="hljs-title function_">width</span>(<span class="hljs-number">20</span>)</li><li>                  } <span class="hljs-keyword">else</span> {</li><li>                    <span class="hljs-title class_">Text</span>(item.<span class="hljs-property">label</span>)</li><li>                  }</li><li>                  <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'sys.media.ohos_ic_public_arrow_right'</span>))</li><li>                    .<span class="hljs-title function_">fillColor</span>($r(<span class="hljs-string">'sys.color.ohos_id_color_fourth'</span>))</li><li>                    .<span class="hljs-title function_">height</span>(<span class="hljs-number">30</span>)</li><li>                    .<span class="hljs-title function_">width</span>(<span class="hljs-number">30</span>)</li><li>                }</li><li>                .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>              }</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>              .<span class="hljs-title function_">animation</span>({ <span class="hljs-attr">curve</span>: curves.<span class="hljs-title function_">interpolatingSpring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">528</span>, <span class="hljs-number">39</span>) })</li><li>            })</li><li>          }</li><li>        }.<span class="hljs-title function_">clip</span>(<span class="hljs-literal">true</span>)</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>  }</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Start</span>)</li><li>  .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'sys.color.ohos_id_color_sub_background'</span>))</li><li>}</li></ol></pre></div></div></li>      <li>       <p>通过改变ListItem的状态，来控制每个列表项是否展开，并通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-animatorproperty#animation" target="_blank">animation</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext#animateto" target="_blank">animateTo</a>来实现展开与折叠过程中的动效效果。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-title class_">ListItemGroupHeader</span>(<span class="hljs-attr">itemGroup</span>: <span class="hljs-title class_">ItemGroupInfo</span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Text</span>(itemGroup.<span class="hljs-property">label</span>)</li><li>    <span class="hljs-title class_">Blank</span>()</li><li>    <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'sys.media.ohos_ic_public_arrow_down'</span>))</li><li>      .<span class="hljs-title function_">fillColor</span>($r(<span class="hljs-string">'sys.color.ohos_id_color_fourth'</span>))</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">30</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">30</span>)</li><li>      .<span class="hljs-title function_">rotate</span>({ <span class="hljs-attr">angle</span>: !!itemGroup.<span class="hljs-property">children</span>.<span class="hljs-property">length</span> ? (<span class="hljs-variable language_">this</span>.<span class="hljs-property">expandedItems</span>[itemGroup.<span class="hljs-property">index</span>] ? <span class="hljs-number">0</span> : <span class="hljs-number">180</span>) : <span class="hljs-number">180</span> })</li><li>      .<span class="hljs-title function_">animation</span>({ <span class="hljs-attr">curve</span>: curves.<span class="hljs-title function_">interpolatingSpring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">228</span>, <span class="hljs-number">22</span>) })</li><li>  }</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>  .<span class="hljs-title function_">padding</span>(<span class="hljs-number">10</span>)</li><li>  .<span class="hljs-title function_">animation</span>({ <span class="hljs-attr">curve</span>: curves.<span class="hljs-title function_">interpolatingSpring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">528</span>, <span class="hljs-number">39</span>) })</li><li>  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (itemGroup.<span class="hljs-property">children</span>.<span class="hljs-property">length</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">animateTo</span>({ <span class="hljs-attr">curve</span>: curves.<span class="hljs-title function_">interpolatingSpring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">528</span>, <span class="hljs-number">39</span>) }, <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">expandedItems</span>[itemGroup.<span class="hljs-property">index</span>] = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">expandedItems</span>[itemGroup.<span class="hljs-property">index</span>];</li><li>      })</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="切换布局方向">切换布局方向<i class="anchor-icon anchor-icon-link" anchorid="切换布局方向" tips="复制节点链接"></i></h2>          <p>部分业务场景需要列表底部插入数据时，自动向上滚动，把新插入的节点展示出来。例如，直播评论、即时聊天等应用场景。而List组件正常布局时, 在内容下方增加节点，内容是保持不变的。此时，可以通过切换布局方向来实现所需效果。</p>     <p><strong>图25</strong> 实时消息滚动显示</p>     <p><span><img originheight="352" originwidth="320" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114810.95585588089671615989118874591218:50001231000000:2800:2F928D59F182FBBECDF60FD32B2CA8BF71478859355A950F4E7F2C0280332355.gif" width="320" height="352"></span></p>     <ol>      <li>       <p>定义列表项数据结构。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Message</span> {</li><li>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span></li><li>  <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span></li><li>  <span class="hljs-attr">sender</span>: <span class="hljs-built_in">string</span></li><li>}</li></ol></pre></div></div></li>      <li>       <p>构造列表结构，同时把<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#stackfromend19" target="_blank">stackFromEnd</a>接口值设置为true，即可实现List列表在底部插入数据时，内容向上滚动。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@State</span> <span class="hljs-attr">messages</span>: <span class="hljs-title class_">Message</span>[] = [</li><li>    { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'欢迎来到直播间！'</span>, <span class="hljs-attr">sender</span>: <span class="hljs-string">'系统'</span> },</li><li>    { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'大家好啊~'</span>, <span class="hljs-attr">sender</span>: <span class="hljs-string">'主播'</span> }</li><li>];</li><li><span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {</li><li>      <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">messages</span>, <span class="hljs-function">(<span class="hljs-params">item: Message</span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">ListItem</span>() {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">MessageItem</span>(item)</li><li>        }</li><li>      }, <span class="hljs-function">(<span class="hljs-params">item: Message</span>) =&gt;</span> item.<span class="hljs-property">id</span>.<span class="hljs-title function_">toString</span>())</li><li>    }</li><li>    .<span class="hljs-title function_">stackFromEnd</span>(<span class="hljs-literal">true</span>)</li><li>    .<span class="hljs-title function_">layoutWeight</span>(<span class="hljs-number">1</span>)</li><li>    .<span class="hljs-title function_">alignListItem</span>(<span class="hljs-title class_">ListItemAlign</span>.<span class="hljs-property">Center</span>)</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>}</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="支持滑动离手事件">支持滑动离手事件<i class="anchor-icon anchor-icon-link" anchorid="支持滑动离手事件" tips="复制节点链接"></i></h2>          <p>从API version 20开始，滚动类组件（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-grid" target="_blank">Grid</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list" target="_blank">List</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll" target="_blank">Scroll</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-waterflow" target="_blank">WaterFlow</a>）支持滑动离手事件回调功能，当用户手指离开屏幕时，会触发该事件并上报离手瞬间的滑动速度。开发者可利用此接口实现类似新闻浏览页面的自定义限位滚动效果，短新闻限位滚动，长新闻自由滚动。</p>     <p><strong>图26</strong> 自定义限位滚动效果</p>     <p><span><img originheight="431" originwidth="351" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114810.20072978394366007616337539497192:50001231000000:2800:10A0BECB96F1AA884BF3BEF3AB03AE927593F67BDEF682DA512CEA3022A67CFF.gif" width="351" height="431"></span></p>     <ol>      <li>       <p>定义新闻条目数据结构。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 结构参考</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">news</span> {</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">type</span>: <span class="hljs-built_in">string</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span>, title: <span class="hljs-built_in">string</span>, content: <span class="hljs-built_in">string</span>, <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = title;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = content;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> = <span class="hljs-keyword">type</span>;</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>构造新闻条目结构，通过type属性来区分长新闻，短新闻。</p>       <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 实现参考</span></li><li><span class="hljs-meta">@State</span> <span class="hljs-attr">newsData</span>: <span class="hljs-title class_">Array</span>&lt;news&gt; = [</li><li>  <span class="hljs-keyword">new</span> <span class="hljs-title function_">news</span>(<span class="hljs-string">'1'</span>, <span class="hljs-string">'新闻标题1'</span>, <span class="hljs-string">'这是第一条短新闻，内容较少，快速滑动切换'</span>, <span class="hljs-string">'short'</span>),</li><li>  <span class="hljs-keyword">new</span> <span class="hljs-title function_">news</span>(<span class="hljs-string">'2'</span>, <span class="hljs-string">'新闻标题2'</span>, <span class="hljs-string">'这是第一条短新闻，内容较少，快速滑动切换'</span>, <span class="hljs-string">'short'</span>),</li><li>  <span class="hljs-keyword">new</span> <span class="hljs-title function_">news</span>(<span class="hljs-string">'3'</span>, <span class="hljs-string">'新闻标题3'</span>, <span class="hljs-string">'这是第二条长新闻，内容较多，可以自由滑动查看完整内容。'</span>.<span class="hljs-title function_">repeat</span>(<span class="hljs-number">20</span>), <span class="hljs-string">'long'</span>),</li><li>  <span class="hljs-keyword">new</span> <span class="hljs-title function_">news</span>(<span class="hljs-string">'4'</span>, <span class="hljs-string">'新闻标题4'</span>, <span class="hljs-string">'这是第三条短新闻，内容较少，快速滑动切换'</span>, <span class="hljs-string">'short'</span>),</li><li>  <span class="hljs-keyword">new</span> <span class="hljs-title function_">news</span>(<span class="hljs-string">'5'</span>, <span class="hljs-string">'新闻标题5'</span>, <span class="hljs-string">'这是第四条长新闻，内容较多，可以自由滑动查看完整内容。'</span>, <span class="hljs-string">'long'</span>)</li><li>];</li></ol></pre></div></div></li>      <li>       <p>滑动离手事件onWillStopDragging及新闻处理逻辑：</p>       <ul>        <li>         <p>上报离手瞬间滑动速度，支持正负方向速度检测，向上滑动为正，向下滑动为负。</p>         <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 实现参考</span></li><li><span class="hljs-title function_">onWillStopDragging</span>(<span class="hljs-function">(<span class="hljs-params">velocity: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (velocity &lt; <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-comment">// 向下滑动处理</span></li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-comment">// 向上滑动处理</span></li><li>  }</li><li>})</li></ol></pre></div></div></li>        <li>         <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll#getitemrect11" target="_blank">getItemRect</a>接口方法获取当前项位置信息。</p>         <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 实现参考</span></li><li><span class="hljs-keyword">let</span> rect = <span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollerForList</span>.<span class="hljs-title function_">getItemRect</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span>);</li></ol></pre></div></div></li>        <li>         <p>处理短新闻：直接跳转相邻项。</p>         <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 实现参考</span></li><li><span class="hljs-keyword">if</span> (velocity &gt; <span class="hljs-number">10</span>) {</li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollerForList</span>.<span class="hljs-title function_">scrollToIndex</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span>, <span class="hljs-literal">true</span>, <span class="hljs-title class_">ScrollAlign</span>.<span class="hljs-property">START</span>);</li><li>} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (velocity &lt; -<span class="hljs-number">10</span>) {</li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollerForList</span>.<span class="hljs-title function_">scrollToIndex</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> + <span class="hljs-number">1</span>, <span class="hljs-literal">true</span>, <span class="hljs-title class_">ScrollAlign</span>.<span class="hljs-property">START</span>);</li><li>}</li></ol></pre></div></div></li>        <li>         <p>处理长新闻：计算剩余显示范围决定滚动终点。</p>         <div _ngcontent-cvm-c106="" class="highlight-div"><div _ngcontent-cvm-c106="" class="highlight-div-header"><div _ngcontent-cvm-c106="" class="highlight-div-header-left"><div _ngcontent-cvm-c106="" class="handle-button expand-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cvm-c106="" class="highlight-div-header-right"><div _ngcontent-cvm-c106="" class="handle-button ai-button"></div><div _ngcontent-cvm-c106="" class="handle-button line-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cvm-c106="" class="handle-button theme-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cvm-c106="" class="handle-button copy-button"><div _ngcontent-cvm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cvm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> rect = <span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollerForList</span>.<span class="hljs-title function_">getItemRect</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span>);</li><li><span class="hljs-keyword">if</span> (velocity &lt; -<span class="hljs-number">30</span>) {</li><li>  <span class="hljs-keyword">if</span> (rect) {</li><li>    <span class="hljs-comment">// 当前节点在页面内的剩余显示范围</span></li><li>    <span class="hljs-keyword">let</span> leftRect = rect.<span class="hljs-property">y</span> + rect.<span class="hljs-property">height</span>;</li><li>    <span class="hljs-comment">//   终点位置</span></li><li>    <span class="hljs-keyword">let</span> mainPosition = -velocity * <span class="hljs-variable constant_">DEFAULT_FRICTION</span> / <span class="hljs-variable constant_">FRICTION_SCALE</span>;</li><li>    <span class="hljs-keyword">if</span> (leftRect + mainPosition &gt; <span class="hljs-number">0.75</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">listHeight</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollerForList</span>.<span class="hljs-title function_">scrollToIndex</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> + <span class="hljs-number">1</span>, <span class="hljs-literal">true</span>, <span class="hljs-title class_">ScrollAlign</span>.<span class="hljs-property">START</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (leftRect + mainPosition &lt; <span class="hljs-number">0.25</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">listHeight</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollerForList</span>.<span class="hljs-title function_">scrollToIndex</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span>, <span class="hljs-literal">true</span>, <span class="hljs-title class_">ScrollAlign</span>.<span class="hljs-property">END</span>,</li><li>        { <span class="hljs-attr">extraOffset</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">listHeight</span> * <span class="hljs-number">0.3</span>) })</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>  }</li><li>} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (velocity &gt; <span class="hljs-number">30</span>) {</li><li>  <span class="hljs-keyword">let</span> leftRect = rect?.<span class="hljs-property">y</span> + rect?.<span class="hljs-property">height</span>;</li><li>  <span class="hljs-keyword">let</span> mainPosition = velocity * <span class="hljs-variable constant_">DEFAULT_FRICTION</span> / <span class="hljs-variable constant_">FRICTION_SCALE</span>;</li><li>  <span class="hljs-keyword">if</span> (leftRect + mainPosition &gt; <span class="hljs-number">0.75</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">listHeight</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollerForList</span>.<span class="hljs-title function_">scrollToIndex</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span>, <span class="hljs-literal">true</span>, <span class="hljs-title class_">ScrollAlign</span>.<span class="hljs-property">START</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}</li></ol></pre></div></div></li>       </ul></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="设置边缘滑动效果">设置边缘滑动效果<i class="anchor-icon anchor-icon-link" anchorid="设置边缘滑动效果" tips="复制节点链接"></i></h2>          <p>边缘滑动效果是指当用户滑动滚动组件至边缘后，继续滑动时触发的交互效果。当前List支持通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#edgeeffect" target="_blank">edgeEffect</a>属性设置三种边缘滑动效果，分别为弹簧效果（即回弹效果）、阴影效果、无效果。具体效果说明请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#edgeeffect" target="_blank">EdgeEffect</a>的枚举说明。</p>     <p>当List组件的内容区大于等于一屏时，List的边缘滑动效果默认为回弹效果，如下图所示。</p>     <p><strong>图27</strong> 边缘回弹效果</p>     <p><span><img originheight="761" originwidth="374" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114810.97142493416112940823582276584473:50001231000000:2800:F7615DA92001ACD8A0B472683FE1126CEF262A87E31678DFC50F975E398F67E5.gif" width="374" height="761"></span></p>     <p>设置.edgeEffect(EdgeEffect.None)时，List无边缘滑动效果，如下图所示。</p>     <p><strong>图28</strong> 无边缘滑动效果</p>     <p><span><img originheight="761" originwidth="374" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114810.74027051625707414231563711267867:50001231000000:2800:8EB10A2EE1E833D9333119F4C13E27D00C3144575F2B4560E90A9C5484CB99CF.gif" width="374" height="761"></span></p>     <p>从API version 18开始，List还支持只设置单边的边缘滑动效果，如设置.edgeEffect(EdgeEffect.Spring, { alwaysEnabled: true, effectEdge: EffectEdge.START })来实现起始边有边缘回弹效果，末尾边无效果，如下图所示。</p>     <p><strong>图29</strong> 单边边缘滑动效果</p>     <p><span><img originheight="761" originwidth="374" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114810.10628350218937419921680066377054:50001231000000:2800:23BE89D73B8C389B15F4A7E96CA62F6B58889CC50229DBAB89448273CB3CFE7F.gif" width="374" height="761"></span></p>     <p>需要注意的是，当List组件的内容区小于一屏时，List默认无边缘滑动效果。若要启用边缘回弹效果，可以通过设置.edgeEffect(EdgeEffect.Spring, { alwaysEnabled: true })来实现。</p>    </div>    <div class="tiledSection">     <h2 id="示例代码">示例代码<i class="anchor-icon anchor-icon-link" anchorid="示例代码" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitcode.com/harmonyos_samples/two-dimension-list" target="_blank">二维列表</a></li>      <li><a href="https://gitcode.com/harmonyos_samples/nested-list" target="_blank">List组件嵌套滑动</a></li>      <li><a href="https://gitcode.com/harmonyos_samples/list-item-edit" target="_blank">列表编辑效果</a></li>     </ul>    </div>   </div>   <div></div></div>