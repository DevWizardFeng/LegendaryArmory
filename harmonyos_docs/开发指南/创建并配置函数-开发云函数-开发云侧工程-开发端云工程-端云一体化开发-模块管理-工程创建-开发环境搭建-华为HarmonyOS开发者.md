<h1 _ngcontent-cew-c119="" class="doc-title ng-star-inserted" title="创建并配置函数"> 创建并配置函数 </h1>

<div _ngcontent-cew-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001563764876"><p id="ZH-CN_TOPIC_0000002179338360__p14546163911150">您可直接在DevEco Studio创建函数、为函数配置调用的触发器等。</p> <div class="tiledSection"><h2 id="section651113591957">创建函数<i class="anchor-icon anchor-icon-link" anchorid="section651113591957" tips="复制节点链接"></i></h2><ol id="ZH-CN_TOPIC_0000002179338360__ol993116522211"><li id="li159311352924">右击“cloudfunctions”目录，选择“New &gt; Cloud Function”。<p id="ZH-CN_TOPIC_0000002179338360__p796610263110"><span><img originheight="416" originwidth="693" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104745.12913592975955591871605352717080:50001231000000:2800:6682CF65CA72999B10B4E4279212DF9934DAAFADF1EC854056B6C4CF429BD6C4.png" width="693" height="416"></span></p> </li><li id="li1691431311316">在“Select the Cloud Function Type”栏选择“Cloud Function”，输入云函数名称（如“my-cloud-function”），点击“OK”。<p id="ZH-CN_TOPIC_0000002179338360__p779732111501">函数名称长度2-63个字符，仅支持小写英文字母、数字、中划线（-），首字符必须为小写字母，结尾不能为中划线（-）。</p> <p id="ZH-CN_TOPIC_0000002179338360__p87285345467"><span><img originheight="219" originwidth="415" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104746.03167838160080493313836737798925:50001231000000:2800:2CAA2BFBB8BF0A7C27FBE2797ED2778A78185F02B22A07BE065C0C271CF4BE5B.png" width="415" height="219"></span></p> <p id="ZH-CN_TOPIC_0000002179338360__p12824538412">“cloudfunctions”目录下生成新建的“my-cloud-function”函数目录，目录下主要包含如下文件：</p> <ul id="ZH-CN_TOPIC_0000002179338360__ul4904155819413"><li id="li3639521256">函数配置文件“function-config.json”</li><li id="li5113104355">函数入口文件“myCloudFunction.ts”</li><li id="li119051558749">依赖配置文件“package.json”</li></ul> <p id="ZH-CN_TOPIC_0000002179338360__p12782649912"><span><img originheight="424" originwidth="854" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104746.10002797760333633661562151794664:50001231000000:2800:47492130FABD515EBE7E95E39AF2C998258B1BDB7F5CF5E33A061422B859BF4C.png" width="854" height="424"></span></p> </li></ol> </div> <div class="tiledSection"><h2 id="section69561242360">配置函数<i class="anchor-icon anchor-icon-link" anchorid="section69561242360" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002179338360__p916314457129">函数创建完毕后，您可在配置文件“function-config.json”的“triggers”下配置触发器，通过触发器暴露的触发条件来实现函数调用。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002179338360__p17415194718547">“functionType”表示函数类型，“0”表示云函数，“1”表示云对象。“functionType”的值为创建时自动生成，不可手动修改，否则将导致云函数部署失败。</p> </div></div></div> <p id="ZH-CN_TOPIC_0000002179338360__p135974461768"></p> <p id="ZH-CN_TOPIC_0000002179338360__p171088282419"><span><img originheight="374" originwidth="625" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104746.98520294792735315091183629036648:50001231000000:2800:3A9E3B823446977E3D09047AE04F2175EF9A06283846BBBDE85CD5D6C509EBB5.png" width="625" height="374"></span></p> <p id="ZH-CN_TOPIC_0000002179338360__p117882571612">云函数当前仅支持HTTP触发器， “function-config.json”文件中已为您自动完成HTTP触发器配置。配置了HTTP触发器的函数被部署到云端后，您的应用即可通过Cloud Foundation Kit调用函数。关于如何使用HTTP触发器调用函数，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cloudfoundation-call-function" target="_blank">调用函数</a>。</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p id="ZH-CN_TOPIC_0000002179338360__p12519131171412">如您需在函数部署完成后更新触发器，请先删除之前的触发器配置，再添加新的触发器配置，否则您的更新将不生效。</p> </div></div></div> <div _ngcontent-cew-c106="" class="highlight-div"><div _ngcontent-cew-c106="" class="highlight-div-header"><div _ngcontent-cew-c106="" class="highlight-div-header-left"><div _ngcontent-cew-c106="" class="handle-button expand-button"><div _ngcontent-cew-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cew-c106="" class="highlight-div-header-right"><div _ngcontent-cew-c106="" class="handle-button ai-button"></div><div _ngcontent-cew-c106="" class="handle-button line-button"><div _ngcontent-cew-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cew-c106="" class="handle-button theme-button"><div _ngcontent-cew-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cew-c106="" class="handle-button copy-button"><div _ngcontent-cew-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cew-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002179338360__screen199111177915" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class=""><span class="hljs-string">"type"</span></span><span class="">: </span><span class=""><span class="hljs-string">"http"</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-string">"properties"</span></span><span class="">: </span>{</li><li>    <span class=""><span class="hljs-string">"enableUrlDecode"</span></span><span class="">: <span class="hljs-keyword">true</span>,</span></li><li>    <span class=""><span class="hljs-string">"authFlag"</span></span><span class="">: </span><span class=""><span class="hljs-string">"true"</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-string">"authAlgor"</span></span><span class="">: </span><span class=""><span class="hljs-string">"HDA-SYSTEM"</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-string">"authType"</span></span><span class="">: </span><span class=""><span class="hljs-string">"apigw-client"</span></span></li><li>  }</li><li>}</li></ol></pre></div></div> <ul id="ZH-CN_TOPIC_0000002179338360__ul335142720911"><li id="li335132718911">type：触发器类型，配置为“http”。</li><li id="li123527273910">properties：触发器属性，属性参数如下表所示。 <div class="tablenoborder"><div class="tbBox"><table id="table1135218278918" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002179338360__row635214271796"><th align="left" class="cellrowborder" id="mcps1.3.3.9.2.1.1.3.1.1" valign="top" width="17.8%"><p id="ZH-CN_TOPIC_0000002179338360__p4352192713910">参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.9.2.1.1.3.1.2" valign="top" width="82.19999999999999%"><p id="ZH-CN_TOPIC_0000002179338360__p1735242719916">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002179338360__row93525272092"><td class="cellrowborder" valign="top" width="17.8%"><p id="ZH-CN_TOPIC_0000002179338360__p1535252716914">enableUrlDecode</p> </td> <td class="cellrowborder" valign="top" width="82.19999999999999%"><p id="ZH-CN_TOPIC_0000002179338360__p153526271992">通过HTTP触发器触发函数时，对于contentType为“application/x-www-form-urlencoded”的触发请求，是否使用URLDecoder对请求body进行解码再转发到函数中。</p> <ul id="ZH-CN_TOPIC_0000002179338360__ul93529275916"><li id="li7352122716912">true：启用。</li><li id="li83521227596">false：不启用。</li></ul> </td> </tr> <tr id="ZH-CN_TOPIC_0000002179338360__row133520279919"><td class="cellrowborder" valign="top" width="17.8%"><p id="ZH-CN_TOPIC_0000002179338360__p11352327999">authFlag</p> </td> <td class="cellrowborder" valign="top" width="82.19999999999999%"><p id="ZH-CN_TOPIC_0000002179338360__p1235313272098">是否鉴权，默认为true。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002179338360__row135312271997"><td class="cellrowborder" valign="top" width="17.8%"><p id="ZH-CN_TOPIC_0000002179338360__p1135311276911">authAlgor</p> </td> <td class="cellrowborder" valign="top" width="82.19999999999999%"><p id="ZH-CN_TOPIC_0000002179338360__p3353182710914">鉴权算法，默认为HDA-SYSTEM。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002179338360__row03537271792"><td class="cellrowborder" valign="top" width="17.8%"><p id="ZH-CN_TOPIC_0000002179338360__p1635362711917">authType</p> </td> <td class="cellrowborder" valign="top" width="82.19999999999999%"><p id="ZH-CN_TOPIC_0000002179338360__p53531273920">HTTP触发器的认证类型。</p> <ul id="ZH-CN_TOPIC_0000002179338360__ul73537271692"><li id="li123535271799">apigw-client：端侧网关认证，适用于来自APP客户端侧（即本地应用或者项目）的函数调用。</li><li id="li93539271914">cloudgw-client：云侧网关认证，适用于来自APP服务器侧（即云函数）的函数调用。</li></ul> </td> </tr>  </tbody></table></div> </div> </li></ul> <p id="ZH-CN_TOPIC_0000002179338360__p6693162033018"></p> </div> </div> <div></div></div>