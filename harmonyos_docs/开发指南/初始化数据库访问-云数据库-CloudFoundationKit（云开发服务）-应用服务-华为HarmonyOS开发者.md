<h1 _ngcontent-rjo-c119="" class="doc-title ng-star-inserted" title="初始化数据库访问"> 初始化数据库访问 </h1>

<div _ngcontent-rjo-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section133632819295">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="section133632819295" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002440774424__zh-cn_topic_0000002440774444_p176909276175">支持Phone、Tablet设备。并且从5.1.0(18)版本开始，新增支持Wearable设备；从5.1.1(19)版本开始，新增支持TV设备。</p>    </div>    <div class="tiledSection">     <h2 id="section160501863017">前提条件<i class="anchor-icon anchor-icon-link" anchorid="section160501863017" tips="复制节点链接"></i></h2>          <p>已<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cloudfoundation-database-add-file">引入对象类型文件</a>。</p>    </div>    <div class="tiledSection">     <h2 id="section106891555172511">操作步骤<i class="anchor-icon anchor-icon-link" anchorid="section106891555172511" tips="复制节点链接"></i></h2>          <ol>      <li>设置云数据库配置项。       <div class="p">        在“entry/src/main/module.json5”文件中添加网络权限。        <div _ngcontent-rjo-c106="" class="highlight-div"><div _ngcontent-rjo-c106="" class="highlight-div-header"><div _ngcontent-rjo-c106="" class="highlight-div-header-left"><div _ngcontent-rjo-c106="" class="handle-button expand-button"><div _ngcontent-rjo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rjo-c106="" class="highlight-div-header-right"><div _ngcontent-rjo-c106="" class="handle-button ai-button"></div><div _ngcontent-rjo-c106="" class="handle-button line-button"><div _ngcontent-rjo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rjo-c106="" class="handle-button theme-button"><div _ngcontent-rjo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rjo-c106="" class="handle-button copy-button"><div _ngcontent-rjo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rjo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"requestPermissions"</span>: [</li><li>  {</li><li>    <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohos.permission.INTERNET"</span></li><li>  }</li><li>]</li></ol></pre></div></div>       </div></li>      <li>（可选）如果存在需要登录应用才能操作数据库的场景（如新增或删除数据），您需要执行如下操作：       <ol>        <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudcommon#section136610231214" target="_blank">通过AuthProvider获取用户凭据</a>。</li>        <li>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudcommon#section15555111210233" target="_blank">cloudCommon.init()</a>方法进行初始化时，传入获取的凭据。</li>       </ol></li>      <li>在业务代码中，使用AGC开发平台上创建的存储区“QuickStartDemo”类初始化DatabaseZone。       <div _ngcontent-rjo-c106="" class="highlight-div"><div _ngcontent-rjo-c106="" class="highlight-div-header"><div _ngcontent-rjo-c106="" class="highlight-div-header-left"><div _ngcontent-rjo-c106="" class="handle-button expand-button"><div _ngcontent-rjo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rjo-c106="" class="highlight-div-header-right"><div _ngcontent-rjo-c106="" class="handle-button ai-button"></div><div _ngcontent-rjo-c106="" class="handle-button line-button"><div _ngcontent-rjo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rjo-c106="" class="handle-button theme-button"><div _ngcontent-rjo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rjo-c106="" class="handle-button copy-button"><div _ngcontent-rjo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rjo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudDatabase } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> databaseZone = cloudDatabase.<span class="hljs-title function_">zone</span>(<span class="hljs-string">'QuickStartDemo'</span>);</li></ol></pre></div></div>       <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">         <ul>          <li>cloudDatabase.zone方法接收的入参为“存储区名称”，即cloudDBZoneName，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cloudfoundation-database-add-zone">新增存储区</a>章节。</li>          <li>存储区最多创建4个，超过4个会导致云数据库访问失败。</li>         </ul>        </div></div></div></li>      <li>如果需要使用数据库查询方法，可以使用类（此处以BookInfo为例）初始化DatabaseQuery。       <div _ngcontent-rjo-c106="" class="highlight-div"><div _ngcontent-rjo-c106="" class="highlight-div-header"><div _ngcontent-rjo-c106="" class="highlight-div-header-left"><div _ngcontent-rjo-c106="" class="handle-button expand-button"><div _ngcontent-rjo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rjo-c106="" class="highlight-div-header-right"><div _ngcontent-rjo-c106="" class="handle-button ai-button"></div><div _ngcontent-rjo-c106="" class="handle-button line-button"><div _ngcontent-rjo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rjo-c106="" class="handle-button theme-button"><div _ngcontent-rjo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rjo-c106="" class="handle-button copy-button"><div _ngcontent-rjo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rjo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BookInfo</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'xx/BookInfo'</span>; <span class="hljs-comment">// xx是BookInfo文件的相对路径</span></li><li>
</li><li><span class="hljs-keyword">let</span> condition = <span class="hljs-keyword">new</span> cloudDatabase.<span class="hljs-title class_">DatabaseQuery</span>(<span class="hljs-title class_">BookInfo</span>);</li></ol></pre></div></div>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p>后续“databaseZone”、“condition”都需要在每个查询中独立使用，可以参考此章节创建，下文代码中不再重复创建的操作。</p>        </div></div></div></li>     </ol>    </div>   </div>   <div></div></div>