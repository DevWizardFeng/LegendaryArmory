<h1 _ngcontent-jeh-c119="" class="doc-title ng-star-inserted" title="前端页面调用应用侧函数"> 前端页面调用应用侧函数 </h1>

<div _ngcontent-jeh-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>开发者使用Web组件将应用侧代码注册到前端页面中，注册完成之后，前端页面中使用注册的对象名称就可以调用应用侧的方法，实现在前端页面中调用应用侧方法。</p>    <div class="tiledSection">     <h2 id="如何建立应用侧与h5侧的交互通道">如何建立应用侧与H5侧的交互通道<i class="anchor-icon anchor-icon-link" anchorid="如何建立应用侧与h5侧的交互通道" tips="复制节点链接"></i></h2>          <p>注册应用侧代码有两种方式，一种在Web组件初始化调用，使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-attributes#javascriptproxy" target="_blank">javaScriptProxy()</a>接口。另外一种在Web组件初始化完成后调用，使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#registerjavascriptproxy" target="_blank">registerJavaScriptProxy()</a>接口。两种方式都需要和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#deletejavascriptregister" target="_blank">deleteJavaScriptRegister</a>接口配合使用，防止内存泄漏。</p>     <p>在下面的示例中，将test()方法注册在前端页面中， 该函数可以在前端页面触发运行。</p>     <ul>      <li>       <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-attributes#javascriptproxy" target="_blank">javaScriptProxy()</a>接口使用示例如下。</p>       <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestClass</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">test</span>(): <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-string">'ArkTS Hello World!'</span>;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-comment">// 声明需要注册的对象</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">testObj</span>: <span class="hljs-title class_">TestClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestClass</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'deleteJavaScriptRegister'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-string">"testObjName"</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">refresh</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-comment">// Web组件加载本地index.html页面</span></li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>})</li><li>        <span class="hljs-comment">// 将对象注入到web端</span></li><li>        .<span class="hljs-title function_">javaScriptProxy</span>({</li><li>          <span class="hljs-attr">object</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">testObj</span>,</li><li>          <span class="hljs-attr">name</span>: <span class="hljs-string">"testObjName"</span>,</li><li>          <span class="hljs-attr">methodList</span>: [<span class="hljs-string">"test"</span>],</li><li>          <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>,</li><li>          <span class="hljs-comment">// 可选参数</span></li><li>          <span class="hljs-attr">asyncMethodList</span>: [],</li><li>          <span class="hljs-attr">permission</span>: <span class="hljs-string">'{"javascriptProxyPermission":{"urlPermissionList":[{"scheme":"resource","host":"rawfile","port":"","path":""},'</span> +</li><li>                      <span class="hljs-string">'{"scheme":"e","host":"f","port":"g","path":"h"}],"methodList":[{"methodName":"test","urlPermissionList":'</span> +</li><li>                      <span class="hljs-string">'[{"scheme":"https","host":"xxx.com","port":"","path":""},{"scheme":"resource","host":"rawfile","port":"","path":""}]},'</span> +</li><li>                      <span class="hljs-string">'{"methodName":"test11","urlPermissionList":[{"scheme":"q","host":"r","port":"","path":"t"},'</span> +</li><li>                      <span class="hljs-string">'{"scheme":"u","host":"v","port":"","path":""}]}]}}'</span></li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>应用侧使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#registerjavascriptproxy" target="_blank">registerJavaScriptProxy()</a>接口注册示例如下。</p>       <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestClass</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">test</span>(): <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-string">"ArkUI Web Component"</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">toString</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web Component toString'</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">testObj</span>: <span class="hljs-title class_">TestClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestClass</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'refresh'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">refresh</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Register JavaScript To Window'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">testObj</span>, <span class="hljs-string">"testObjName"</span>, [<span class="hljs-string">"test"</span>, <span class="hljs-string">"toString"</span>],</li><li>                    <span class="hljs-comment">// 可选参数, asyncMethodList</span></li><li>                    [],</li><li>                    <span class="hljs-comment">// 可选参数, permission</span></li><li>                    <span class="hljs-string">'{"javascriptProxyPermission":{"urlPermissionList":[{"scheme":"resource","host":"rawfile","port":"","path":""},'</span> +</li><li>                    <span class="hljs-string">'{"scheme":"e","host":"f","port":"g","path":"h"}],"methodList":[{"methodName":"test","urlPermissionList":'</span> +</li><li>                    <span class="hljs-string">'[{"scheme":"https","host":"xxx.com","port":"","path":""},{"scheme":"resource","host":"rawfile","port":"","path":""}]},'</span> +</li><li>                    <span class="hljs-string">'{"methodName":"test11","urlPermissionList":[{"scheme":"q","host":"r","port":"","path":"t"},'</span> +</li><li>                    <span class="hljs-string">'{"scheme":"u","host":"v","port":"","path":""}]}]}}'</span></li><li>            );</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'deleteJavaScriptRegister'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-string">"testObjName"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <ul>          <li>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#registerjavascriptproxy" target="_blank">registerJavaScriptProxy()</a>方法注册后在下次加载或者重新加载后生效。</li>         </ul>        </div></div></div></li>      <li>       <p>可选参数permission是一个json字符串，示例如下：</p>       <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"javascriptProxyPermission"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"urlPermissionList"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>       <span class="hljs-comment">// Object级权限，如果匹配，所有Method都授权</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"scheme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"resource"</span><span class="hljs-punctuation">,</span>    <span class="hljs-comment">// 精确匹配，不能为空，必填</span></li><li>        <span class="hljs-attr">"host"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rawfile"</span><span class="hljs-punctuation">,</span>       <span class="hljs-comment">// 精确匹配，不能为空，必填</span></li><li>        <span class="hljs-attr">"port"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>              <span class="hljs-comment">// 精确匹配，为空不检查，必填</span></li><li>        <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span>               <span class="hljs-comment">// 前缀匹配，为空不检查，必填</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"scheme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https"</span><span class="hljs-punctuation">,</span>       <span class="hljs-comment">// 精确匹配，不能为空，必填</span></li><li>        <span class="hljs-attr">"host"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xxx.com"</span><span class="hljs-punctuation">,</span>       <span class="hljs-comment">// 精确匹配，不能为空，必填</span></li><li>        <span class="hljs-attr">"port"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"8080"</span><span class="hljs-punctuation">,</span>          <span class="hljs-comment">// 精确匹配，为空不检查，必填</span></li><li>        <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"a/b/c"</span>          <span class="hljs-comment">// 前缀匹配，为空不检查，必填</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"methodList"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"methodName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"test"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"urlPermissionList"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>   <span class="hljs-comment">// Method级权限</span></li><li>          <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"scheme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https"</span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">// 精确匹配，不能为空，必填</span></li><li>            <span class="hljs-attr">"host"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xxx.com"</span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">// 精确匹配，不能为空，必填</span></li><li>            <span class="hljs-attr">"port"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>          <span class="hljs-comment">// 精确匹配，为空不检查，必填</span></li><li>            <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span>           <span class="hljs-comment">// 前缀匹配，为空不检查，必填</span></li><li>          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>          <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"scheme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"resource"</span><span class="hljs-punctuation">,</span><span class="hljs-comment">// 精确匹配，不能为空，必填</span></li><li>            <span class="hljs-attr">"host"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rawfile"</span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">// 精确匹配，不能为空，必填</span></li><li>            <span class="hljs-attr">"port"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>          <span class="hljs-comment">// 精确匹配，为空不检查，必填</span></li><li>            <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span>           <span class="hljs-comment">// 前缀匹配，为空不检查，必填</span></li><li>          <span class="hljs-punctuation">}</span></li><li>        <span class="hljs-punctuation">]</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"methodName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"test11"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"urlPermissionList"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>   <span class="hljs-comment">// Method级权限</span></li><li>          <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"scheme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"q"</span><span class="hljs-punctuation">,</span>       <span class="hljs-comment">// 精确匹配，不能为空，必填</span></li><li>            <span class="hljs-attr">"host"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"r"</span><span class="hljs-punctuation">,</span>         <span class="hljs-comment">// 精确匹配，不能为空，必填</span></li><li>            <span class="hljs-attr">"port"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>          <span class="hljs-comment">// 精确匹配，为空不检查，必填</span></li><li>            <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"t"</span>          <span class="hljs-comment">// 前缀匹配，为空不检查，必填</span></li><li>          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>          <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"scheme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"u"</span><span class="hljs-punctuation">,</span>       <span class="hljs-comment">// 精确匹配，不能为空，必填</span></li><li>            <span class="hljs-attr">"host"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"v"</span><span class="hljs-punctuation">,</span>         <span class="hljs-comment">// 精确匹配，不能为空，必填</span></li><li>            <span class="hljs-attr">"port"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>          <span class="hljs-comment">// 精确匹配，为空不检查，必填</span></li><li>            <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span>           <span class="hljs-comment">// 前缀匹配，为空不检查，必填</span></li><li>          <span class="hljs-punctuation">}</span></li><li>        <span class="hljs-punctuation">]</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div></li>      <li>       <p>index.html前端页面触发应用侧代码。</p>       <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"callArkTS()"</span>&gt;</span>Click Me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">callArkTS</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        <span class="hljs-keyword">let</span> str = testObjName.<span class="hljs-title function_">test</span>();</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"demo"</span>).<span class="hljs-property">innerHTML</span> = str;</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'ArkTS Hello World! :'</span> + str);</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="复杂类型使用方法">复杂类型使用方法<i class="anchor-icon anchor-icon-link" anchorid="复杂类型使用方法" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="应用侧和前端页面之间传递array" class="firsth2">应用侧和前端页面之间传递Array<i class="anchor-icon anchor-icon-link" anchorid="应用侧和前端页面之间传递array" tips="复制节点链接"></i></h3>          <p>Array可以作为注册对象方法的参数或返回值，在应用侧和前端页面之间传递。</p>     <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestClass</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">test</span>(): <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; {</li><li>    <span class="hljs-keyword">return</span> [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">toString</span>(<span class="hljs-attr">param</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web Component toString'</span> + param);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">testObj</span>: <span class="hljs-title class_">TestClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestClass</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'refresh'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">refresh</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Register JavaScript To Window'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">testObj</span>, <span class="hljs-string">"testObjName"</span>, [<span class="hljs-string">"test"</span>, <span class="hljs-string">"toString"</span>]);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'deleteJavaScriptRegister'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-string">"testObjName"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"callArkTS()"</span>&gt;</span>Click Me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">callArkTS</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        testObjName.<span class="hljs-title function_">toString</span>(testObjName.<span class="hljs-title function_">test</span>());</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="非function等复杂类型使用">非Function等复杂类型使用<i class="anchor-icon anchor-icon-link" anchorid="非function等复杂类型使用" tips="复制节点链接"></i></h3>          <p>非Function等复杂类型作为注册对象方法的参数或返回值，在应用侧和前端页面之间传递。</p>     <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestClass</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 传递的基础类型name:"jeck", age:"12"。</span></li><li>  <span class="hljs-title function_">test</span>(): <span class="hljs-title class_">Student</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">st</span>: <span class="hljs-title class_">Student</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">"jeck"</span>, <span class="hljs-attr">age</span>: <span class="hljs-string">"12"</span> };</li><li>    <span class="hljs-keyword">return</span> st;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">toString</span>(<span class="hljs-attr">param</span>: <span class="hljs-title class_">ESObject</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web Component toString'</span> + param[<span class="hljs-string">"name"</span>]);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">testObj</span>: <span class="hljs-title class_">TestClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestClass</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'refresh'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">refresh</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Register JavaScript To Window'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">testObj</span>, <span class="hljs-string">"testObjName"</span>, [<span class="hljs-string">"test"</span>, <span class="hljs-string">"toString"</span>]);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'deleteJavaScriptRegister'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-string">"testObjName"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"callArkTS()"</span>&gt;</span>Click Me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">callArkTS</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        testObjName.<span class="hljs-title function_">toString</span>(testObjName.<span class="hljs-title function_">test</span>());</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="应用侧调用前端页面的callback">应用侧调用前端页面的Callback<i class="anchor-icon anchor-icon-link" anchorid="应用侧调用前端页面的callback" tips="复制节点链接"></i></h3>          <p>Callback可以作为注册对象方法的参数或返回值，在应用侧和前端页面之间传递。</p>     <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestClass</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">test</span>(<span class="hljs-attr">param</span>: <span class="hljs-title class_">Function</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-title function_">param</span>(<span class="hljs-string">"call callback"</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">toString</span>(<span class="hljs-attr">param</span>: <span class="hljs-title class_">String</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web Component toString'</span> + param);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">testObj</span>: <span class="hljs-title class_">TestClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestClass</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'refresh'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">refresh</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Register JavaScript To Window'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">testObj</span>, <span class="hljs-string">"testObjName"</span>, [<span class="hljs-string">"test"</span>, <span class="hljs-string">"toString"</span>]);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'deleteJavaScriptRegister'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-string">"testObjName"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"callArkTS()"</span>&gt;</span>Click Me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">callArkTS</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        testObjName.<span class="hljs-title function_">test</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">param</span>){testObjName.<span class="hljs-title function_">toString</span>(param)});</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="应用侧调用前端页面object里的function">应用侧调用前端页面Object里的Function<i class="anchor-icon anchor-icon-link" anchorid="应用侧调用前端页面object里的function" tips="复制节点链接"></i></h3>          <p>前端页面Object里的Function可以作为注册对象方法的参数或返回值，在应用侧和前端页面之间传递。</p>     <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestClass</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">test</span>(<span class="hljs-attr">param</span>: <span class="hljs-title class_">ESObject</span>): <span class="hljs-built_in">void</span> {</li><li>    param.<span class="hljs-title function_">hello</span>(<span class="hljs-string">"call obj func"</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">toString</span>(<span class="hljs-attr">param</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web Component toString'</span> + param);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">testObj</span>: <span class="hljs-title class_">TestClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestClass</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'refresh'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">refresh</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Register JavaScript To Window'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">testObj</span>, <span class="hljs-string">"testObjName"</span>, [<span class="hljs-string">"test"</span>, <span class="hljs-string">"toString"</span>]);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'deleteJavaScriptRegister'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-string">"testObjName"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"callArkTS()"</span>&gt;</span>Click Me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-comment">// 写法1</span></span></li><li><span class="language-javascript">    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {</span></li><li><span class="language-javascript">        <span class="hljs-title function_">constructor</span>(<span class="hljs-params">nameList</span>) {</span></li><li><span class="language-javascript">            <span class="hljs-variable language_">this</span>.<span class="hljs-property">methodNameListForJsProxy</span> = nameList;</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-title function_">hello</span>(<span class="hljs-params">param</span>) {</span></li><li><span class="language-javascript">            testObjName.<span class="hljs-title function_">toString</span>(param)</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript">    <span class="hljs-keyword">var</span> st = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>([<span class="hljs-string">"hello"</span>])</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-comment">// 写法2</span></span></li><li><span class="language-javascript">    <span class="hljs-comment">//创建一个构造器，构造函数首字母大写</span></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">Obj1</span>(<span class="hljs-params"></span>){</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">methodNameListForJsProxy</span>=[<span class="hljs-string">"hello"</span>];</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">hello</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">param</span>){</span></li><li><span class="language-javascript">            testObjName.<span class="hljs-title function_">toString</span>(param)</span></li><li><span class="language-javascript">        };</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript">    <span class="hljs-comment">//利用构造器，通过new关键字生成对象</span></span></li><li><span class="language-javascript">    <span class="hljs-keyword">var</span> st1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Obj1</span>();</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">callArkTS</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        testObjName.<span class="hljs-title function_">test</span>(st);</span></li><li><span class="language-javascript">        testObjName.<span class="hljs-title function_">test</span>(st1);</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="前端页面调用应用侧object里的function">前端页面调用应用侧Object里的Function<i class="anchor-icon anchor-icon-link" anchorid="前端页面调用应用侧object里的function" tips="复制节点链接"></i></h3>          <p>应用侧Object里的Function可以作为注册对象方法的参数或返回值，在应用侧和前端页面之间传递。</p>     <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjOther</span> {</li><li>  <span class="hljs-attr">methodNameListForJsProxy</span>: <span class="hljs-built_in">string</span>[]</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">list: <span class="hljs-built_in">string</span>[]</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">methodNameListForJsProxy</span> = list</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">testOther</span>(<span class="hljs-attr">json</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(json)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestClass</span> {</li><li>  <span class="hljs-title class_">ObjReturn</span>: <span class="hljs-title class_">ObjOther</span></li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">ObjReturn</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjOther</span>([<span class="hljs-string">"testOther"</span>]);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">test</span>(): <span class="hljs-title class_">ESObject</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">ObjReturn</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">toString</span>(<span class="hljs-attr">param</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web Component toString'</span> + param);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">testObj</span>: <span class="hljs-title class_">TestClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestClass</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'refresh'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">refresh</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Register JavaScript To Window'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">testObj</span>, <span class="hljs-string">"testObjName"</span>, [<span class="hljs-string">"test"</span>, <span class="hljs-string">"toString"</span>]);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'deleteJavaScriptRegister'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-string">"testObjName"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"callArkTS()"</span>&gt;</span>Click Me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">callArkTS</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">      testObjName.<span class="hljs-title function_">test</span>().<span class="hljs-title function_">testOther</span>(<span class="hljs-string">"call other object func"</span>);</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="promise场景">Promise场景<i class="anchor-icon anchor-icon-link" anchorid="promise场景" tips="复制节点链接"></i></h3>          <p>第一种使用方法，在应用侧new Promise，将Promise作为对象方法的参数或返回值，向前端页面传递。</p>     <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestClass</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">test</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">p</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {</li><li>      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'执行完成'</span>);</li><li>        <span class="hljs-title function_">reject</span>(<span class="hljs-string">'fail'</span>);</li><li>      }, <span class="hljs-number">10000</span>);</li><li>    });</li><li>    <span class="hljs-keyword">return</span> p;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">toString</span>(<span class="hljs-attr">param</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">" "</span> + param);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">testObj</span>: <span class="hljs-title class_">TestClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestClass</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'refresh'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">refresh</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Register JavaScript To Window'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">testObj</span>, <span class="hljs-string">"testObjName"</span>, [<span class="hljs-string">"test"</span>, <span class="hljs-string">"toString"</span>]);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'deleteJavaScriptRegister'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-string">"testObjName"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"callArkTS()"</span>&gt;</span>Click Me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">callArkTS</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">      testObjName.<span class="hljs-title function_">test</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">param</span>)=&gt;</span>{testObjName.<span class="hljs-title function_">toString</span>(param)}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">param</span>)=&gt;</span>{testObjName.<span class="hljs-title function_">toString</span>(param)})</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>     <p>第二种使用方法，在前端页面new Promise，将Promise作为对象方法的参数或返回值，向应用侧传递。</p>     <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestClass</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">test</span>(<span class="hljs-attr">param</span>:<span class="hljs-title class_">Function</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-built_in">setTimeout</span>( <span class="hljs-function">() =&gt;</span> { <span class="hljs-title function_">param</span>(<span class="hljs-string">"suc"</span>) }, <span class="hljs-number">10000</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">toString</span>(<span class="hljs-attr">param</span>:<span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">" "</span> + param);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">testObj</span>: <span class="hljs-title class_">TestClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestClass</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'refresh'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">refresh</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Register JavaScript To Window'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">testObj</span>, <span class="hljs-string">"testObjName"</span>, [<span class="hljs-string">"test"</span>, <span class="hljs-string">"toString"</span>]);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'deleteJavaScriptRegister'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-string">"testObjName"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-jeh-c106="" class="highlight-div"><div _ngcontent-jeh-c106="" class="highlight-div-header"><div _ngcontent-jeh-c106="" class="highlight-div-header-left"><div _ngcontent-jeh-c106="" class="handle-button expand-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jeh-c106="" class="highlight-div-header-right"><div _ngcontent-jeh-c106="" class="handle-button ai-button"></div><div _ngcontent-jeh-c106="" class="handle-button line-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jeh-c106="" class="handle-button theme-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jeh-c106="" class="handle-button copy-button"><div _ngcontent-jeh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jeh-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"callArkTS()"</span>&gt;</span>Click Me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">callArkTS</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">      <span class="hljs-keyword">let</span> funpromise</span></li><li><span class="language-javascript">      <span class="hljs-keyword">var</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>){funpromise=<span class="hljs-function">(<span class="hljs-params">param</span>)=&gt;</span>{<span class="hljs-title function_">resolve</span>(param)}})</span></li><li><span class="language-javascript">      testObjName.<span class="hljs-title function_">test</span>(funpromise)</span></li><li><span class="language-javascript">      p.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">param</span>)=&gt;</span>{testObjName.<span class="hljs-title function_">toString</span>(param)})</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="验证通道是否建立成功">验证通道是否建立成功<i class="anchor-icon anchor-icon-link" anchorid="验证通道是否建立成功" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>打开web调试。</p>       <p>开启web调试请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-debugging-with-devtools">使用DevTools工具调试前端页面</a>。</p></li>      <li>       <p>举例说明通道是否建立成功。</p>       <p>使用<a href="/consumer/cn/doc/harmonyos-guides/web-in-page-app-function-invoking#复杂类型使用方法">复杂类型使用方法</a>中应用侧和前端页面之间传递Array作为示例，调试结果如下图所示：</p>       <p><span><img originheight="1042" originwidth="1917" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114729.34744981219701943353983537768369:50001231000000:2800:423C161710223951A642BB9510D5876D45207366FAD0F0DF66FA82D04A04E9F7.png" width="920" height="500.0730307772561"></span></p></li>     </ol>    </div>   </div>   <div></div></div>