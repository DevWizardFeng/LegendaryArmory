<h1 _ngcontent-vvs-c119="" class="doc-title ng-star-inserted" title="功能一步达场景方案"> 功能一步达场景方案 </h1>

<div _ngcontent-vvs-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section1762983017420">方案概述<i class="anchor-icon anchor-icon-link" anchorid="section1762983017420" tips="复制节点链接"></i></h2><p>从5.1.0(18)开始，新增功能一步达接入方案，可通过该方案实现快速打开应用内功能页面。若应用中有“查找路线”和“扫一扫”两个功能需要注册到意图框架中，让用户通过小艺快速打开对应功能页面，比如“帮我打开XXX的查找路线”、“帮我打开XXX的扫一扫”或“帮我打开XXX的扫码”，则需要在意图声明文件中声明JumpFunctionPage意图，以及上述两个功能，并实现对应意图调用。</p> <p><strong>意图名称：跳转App功能页 JumpFunctionPage（端侧前台意图调用）</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.1.4.1.8.1.1" valign="top" width="15.413082616523305%"><p><strong>参数类别</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.4.1.8.1.2" valign="top" width="15.413082616523305%"><p><strong>参数（中文）</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.4.1.8.1.3" valign="top" width="15.413082616523305%"><p><strong>参数（英文）</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.4.1.8.1.4" valign="top" width="15.413082616523305%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.4.1.8.1.5" valign="top" width="15.413082616523305%"><p><strong>描述</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.4.1.8.1.6" valign="top" width="7.5015003000600124%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.4.1.8.1.7" valign="top" width="15.433086617323466%"><p><strong>数据样例</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="15.413082616523305%"><p><strong>Input</strong></p> </td> <td class="cellrowborder" valign="top" width="15.413082616523305%"><p>功能页面标识</p> </td> <td class="cellrowborder" valign="top" width="15.413082616523305%"><p>pageId</p> </td> <td class="cellrowborder" valign="top" width="15.413082616523305%"><p>是</p> </td> <td class="cellrowborder" valign="top" width="15.413082616523305%"><p>具体功能的标识，开发者自定义</p> </td> <td class="cellrowborder" valign="top" width="7.5015003000600124%"><p>string</p> </td> <td class="cellrowborder" valign="top" width="15.433086617323466%"><p>1、2、3…</p> </td> </tr> <tr><td class="cellrowborder" rowspan="2" valign="top" width="15.413082616523305%"><p><strong>Output</strong></p> </td> <td class="cellrowborder" valign="top" width="15.413082616523305%"><p>结果码</p> </td> <td class="cellrowborder" valign="top" width="15.413082616523305%"><p>code</p> </td> <td class="cellrowborder" valign="top" width="15.413082616523305%"><p>是</p> </td> <td class="cellrowborder" valign="top" width="15.413082616523305%"><p>意图调用的结果码。</p> </td> <td class="cellrowborder" valign="top" width="7.5015003000600124%"><p>number</p> </td> <td class="cellrowborder" valign="top" width="15.433086617323466%"><p>0：成功</p> <p>其他：失败（需提前与华为侧协商，不支持自定义）</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>结果体</p> </td> <td class="cellrowborder" valign="top"><p>result</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> <td class="cellrowborder" valign="top"><p>意图调用返回的数据，如果无数据则返回空。</p> </td> <td class="cellrowborder" valign="top"><p>Record&lt;string, Object&gt;</p> </td> <td class="cellrowborder" valign="top"><div _ngcontent-vvs-c106="" class="highlight-div"><div _ngcontent-vvs-c106="" class="highlight-div-header"><div _ngcontent-vvs-c106="" class="highlight-div-header-left"><div _ngcontent-vvs-c106="" class="handle-button expand-button"><div _ngcontent-vvs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vvs-c106="" class="highlight-div-header-right"><div _ngcontent-vvs-c106="" class="handle-button ai-button"></div><div _ngcontent-vvs-c106="" class="handle-button line-button"><div _ngcontent-vvs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vvs-c106="" class="handle-button theme-button"><div _ngcontent-vvs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vvs-c106="" class="handle-button copy-button"><div _ngcontent-vvs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vvs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li><span class="">{</span></li><li><span class="">  message</span><span class="">: </span><span class=""><span class="hljs-string">'Intent execute success'</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section9572143118431">意图声明<i class="anchor-icon anchor-icon-link" anchorid="section9572143118431" tips="复制节点链接"></i></h2><p>开发者需要编辑对应的意图配置insight_intent.json文件实现意图注册。insight_intent.json文件需要放置在module下面的指定目录：src/main/resources/base/profile/insight_intent.json，并且整个工程中只能出现一个insight_intent.json文件。</p> </div> <div _ngcontent-vvs-c106="" class="highlight-div"><div _ngcontent-vvs-c106="" class="highlight-div-header"><div _ngcontent-vvs-c106="" class="highlight-div-header-left"><div _ngcontent-vvs-c106="" class="handle-button expand-button"><div _ngcontent-vvs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vvs-c106="" class="highlight-div-header-right"><div _ngcontent-vvs-c106="" class="handle-button ai-button"></div><div _ngcontent-vvs-c106="" class="handle-button line-button"><div _ngcontent-vvs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vvs-c106="" class="handle-button theme-button"><div _ngcontent-vvs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vvs-c106="" class="handle-button copy-button"><div _ngcontent-vvs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vvs-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>    <span class=""><span class="hljs-attr">"insightIntents"</span></span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>       <span class="hljs-punctuation">{</span></li><li>            <span class=""><span class="hljs-attr">"intentName"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"JumpFunctionPage"</span></span><span class="hljs-punctuation">,</span>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">意图</span></span><span class=""><span class="hljs-comment">名称</span></span></li><li>            <span class=""><span class="hljs-attr">"domain"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">T</span></span><span class=""><span class="hljs-string">oolsDomain"</span></span><span class="hljs-punctuation">,</span></li><li>            <span class=""><span class="hljs-attr">"intentVersion"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"1.0.1"</span></span><span class="hljs-punctuation">,</span> <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">意图本身的版本号</span></span></li><li><span class="">            <span class="hljs-comment">// 意图调用逻辑入口</span></span></li><li>            <span class=""><span class="hljs-attr">"srcEntry"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"./ets/entryability/InsightIntentExecutorImpl.ets"</span></span><span class="hljs-punctuation">,</span></li><li>            <span class=""><span class="hljs-attr">"uiAbility"</span></span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li><span class="">            <span class="hljs-comment">// 意图所在ability</span></span></li><li>        <span class="">    <span class="hljs-attr">"ability"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"EntryAbility"</span></span><span class="hljs-punctuation">,</span></li><li>            <span class=""><span class="hljs-comment">// UIAbility支持前后台两种执行模式</span></span></li><li>            <span class=""><span class="hljs-attr">"executeMode"</span></span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li><span class="">                <span class="hljs-string">"foreground"</span></span></li><li>            <span class="hljs-punctuation">]</span></li><li>            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>            <span class=""><span class="hljs-attr">"inputParams"</span><span class="hljs-punctuation">:</span> </span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">部分意图开放意图参数定义，格式整体参考</span></span><span class=""><span class="hljs-comment">JSON-Schema</span></span><span class=""><span class="hljs-comment">。</span></span><span class="hljs-comment"> </span></li><li>                <span class=""><span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> </span><span class="hljs-punctuation">{</span> <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">描述参数列表，后续可以同级别增加其他描述节点</span></span></li><li><span class="">                    <span class="hljs-attr">"pageId"</span></span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class=""><span class="hljs-comment">// 具体功能的标识</span></span><span class=""><span class="hljs-comment">的key值</span></span></li><li><span class="">                        <span class="hljs-attr">"type"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"string"</span></span><span class="hljs-punctuation">,</span> <span class=""><span class="hljs-comment">// 参数类型</span></span></li><li><span class="">                        <span class="hljs-attr">"enum"</span></span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> </li><li>                            <span class="hljs-punctuation">{</span></li><li><span class="">                                <span class="hljs-attr">"value"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"1"</span></span><span class="hljs-punctuation">,</span> <span class=""><span class="hljs-comment">// 具体功能的标识</span></span><span class=""><span class="hljs-comment">的value值</span></span></li><li><span class="">                                <span class="hljs-attr">"displayName"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"查找路线"</span></span><span class="hljs-punctuation">,</span> <span class=""><span class="hljs-comment">// 功能名，</span></span><span class=""><span class="hljs-comment">用于匹配用户query</span></span></li><li><span class="">                                <span class="hljs-attr">"keywords"</span></span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>                                    <span class=""><span class="hljs-string">"查路线"</span></span><span class="">，<span class="hljs-string">"查询路线"</span>，<span class="hljs-string">"路线查询"</span>，<span class="hljs-string">"找路线"</span></span></li><li>                                <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class=""><span class="hljs-comment">// 参数枚举值别名，可以用于索引、过滤</span></span><span class=""><span class="hljs-comment">，最多不超过5个</span></span></li><li><span class="">                                <span class="hljs-attr">"displayDescription"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"查找到达目的地的路线"</span></span><span class="hljs-punctuation">,</span> <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">功能描述</span></span></li><li><span class="">                                <span class="hljs-attr">"icon"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"https://abc.xx"</span></span> <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">功能图标</span></span></li><li><span class="">                            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></span></li><li>                            <span class="hljs-punctuation">{</span></li><li><span class="">                                <span class="hljs-attr">"value"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"2"</span></span><span class="hljs-punctuation">,</span> <span class=""><span class="hljs-comment">// 具体功能的标识</span></span><span class=""><span class="hljs-comment">的value值</span></span></li><li><span class="">                                <span class="hljs-attr">"displayName"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"扫一扫"</span></span><span class="hljs-punctuation">,</span> <span class=""><span class="hljs-comment">// 功能名，</span></span><span class=""><span class="hljs-comment">用于匹配用户query</span></span></li><li><span class="">                                <span class="hljs-attr">"keywords"</span></span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>                                    <span class=""><span class="hljs-string">"扫码"</span></span></li><li>                                <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class=""><span class="hljs-comment">// 参数枚举值别名，可以用于索引、过滤</span></span></li><li><span class="">                                <span class="hljs-attr">"displayDescription"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"用于扫码"</span></span><span class="hljs-punctuation">,</span> <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">功能描述</span></span></li><li><span class="">                                <span class="hljs-attr">"icon"</span></span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"https://abc.xx"</span></span> <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">功能图标</span></span></li><li>                            <span class="hljs-punctuation">}</span></li><li>                        <span class="hljs-punctuation">]</span></li><li>                    <span class="hljs-punctuation">}</span></li><li>                <span class="hljs-punctuation">}</span></li><li>            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span></li><li>        <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div> <p>若intentName报错Intent 'xxxxxx' is not included in domain 'xxxxxx'. Select an intent from the list of suggestions.该报错不影响正常编译及运行，请忽略。</p> <div class="tiledSection"><h2 id="section79054454410">端侧前台意图调用<i class="anchor-icon anchor-icon-link" anchorid="section79054454410" tips="复制节点链接"></i></h2><p>开发者需自己实现InsightIntentExecutor，并在对应回调实现打开落地页的能力。</p> <p>步骤如下：</p> <ol><li>继承InsightIntentExecutor。</li><li>重写对应方法，例如目标拉起前台页面，则可重写onExecuteInUIAbilityForegroundMode方法。</li><li>通过意图名称，识别跳转功能页面意图(JumpFunctionPage)，在对应的方法中传递意图参数（param），并拉起对应落地页。</li></ol> <div _ngcontent-vvs-c106="" class="highlight-div"><div _ngcontent-vvs-c106="" class="highlight-div-header"><div _ngcontent-vvs-c106="" class="highlight-div-header-left"><div _ngcontent-vvs-c106="" class="handle-button expand-button"><div _ngcontent-vvs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vvs-c106="" class="highlight-div-header-right"><div _ngcontent-vvs-c106="" class="handle-button ai-button"></div><div _ngcontent-vvs-c106="" class="handle-button line-button"><div _ngcontent-vvs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vvs-c106="" class="handle-button theme-button"><div _ngcontent-vvs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vvs-c106="" class="handle-button copy-button"><div _ngcontent-vvs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vvs-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li>import <span class=""><span class="hljs-punctuation">{</span> </span><span class="">insightIntent</span><span class=""><span class="hljs-punctuation">,</span> </span><span class="">InsightIntentExecutor </span><span class=""><span class="hljs-punctuation">}</span> </span>from <span class="">'@kit.AbilityKit'</span><span class="">;</span></li><li>import <span class=""><span class="hljs-punctuation">{</span> </span><span class="">window </span><span class=""><span class="hljs-punctuation">}</span> </span>from <span class="">'@kit.ArkUI'</span><span class="">;</span></li><li>import <span class=""><span class="hljs-punctuation">{</span> </span><span class="">BusinessError </span><span class=""><span class="hljs-punctuation">}</span> </span>from <span class="">'@kit.BasicServicesKit'</span><span class="">;</span></li><li><span class=""><span class="hljs-comment">/**</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment"> * 意图调用样例 */</span></span></li><li>export default class <span class="">InsightIntentExecutorImpl </span>extends <span class="">InsightIntentExecutor </span><span class=""><span class="hljs-punctuation">{</span></span></li><li>  private static readonly JUMP<span class="">_FUNCTION_PAGE </span><span class="">= </span><span class="">'JumpFu</span><span class="">n</span><span class="">ctionPage'</span><span class="">;</span></li><li>  <span class=""><span class="hljs-comment">/**</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * override 执行前台UIAbility意图</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   *</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * @param name 意图名称</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * @param param 意图参数</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * @param pageLoader 窗口</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * @returns 意图调用结果</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   */</span></span></li><li>  <span class="">onExecuteInUIAbilityForegroundMode</span><span class="">(</span><span class="">name</span><span class=""><span class="hljs-punctuation">:</span> </span><span class="">string</span><span class=""><span class="hljs-punctuation">,</span> </span><span class="">param</span><span class=""><span class="hljs-punctuation">:</span> </span><span class="">Record</span><span class="">&lt;</span><span class="">string</span><span class=""><span class="hljs-punctuation">,</span> </span><span class="">Object</span><span class="">&gt;</span><span class=""><span class="hljs-punctuation">,</span> </span><span class="">pageLoader</span><span class=""><span class="hljs-punctuation">:</span> </span><span class="">window</span><span class="">.</span><span class="">WindowStage</span><span class="">)</span><span class=""><span class="hljs-punctuation">:</span></span></li><li>    <span class="">Promise</span><span class="">&lt;</span><span class="">insightIntent</span><span class="">.</span><span class="">ExecuteResult</span><span class="">&gt;</span> <span class=""><span class="hljs-punctuation">{</span></span></li><li>    <span class=""><span class="hljs-comment">// 根据意图名称分发处理逻辑。接入方可根据实际业务实现页面跳转</span></span></li><li>    switch <span class="">(</span><span class="">name</span><span class="">) </span><span class=""><span class="hljs-punctuation">{</span></span></li><li>      case <span class="">InsightIntentExecutorImpl</span><span class="">.</span>JUMP<span class="">_FU</span><span class="">N</span><span class="">CTION_PAGE</span><span class=""><span class="hljs-punctuation">:</span></span></li><li>        return this<span class="">.jumpFu</span><span class="">n</span><span class="">ctionPage</span><span class="">(</span><span class="">param</span><span class=""><span class="hljs-punctuation">,</span> </span><span class="">pageLoader</span><span class="">)</span><span class="">;</span></li><li>      default<span class=""><span class="hljs-punctuation">:</span></span></li><li>        break<span class="">;</span></li><li>    <span class=""><span class="hljs-punctuation">}</span></span></li><li>    return <span class="">Promise</span><span class="">.</span><span class="">resolve</span><span class="">(</span><span class=""><span class="hljs-punctuation">{</span></span></li><li>      <span class="">code</span><span class=""><span class="hljs-punctuation">:</span> <span class="hljs-number">-</span></span><span class=""><span class="hljs-number">1</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>      <span class="">result</span><span class=""><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-punctuation">{</span></span></li><li>        <span class="">message</span><span class=""><span class="hljs-punctuation">:</span> </span><span class="">'unknown intent'</span></li><li>      <span class=""><span class="hljs-punctuation">}</span></span></li><li><span class="">    <span class="hljs-punctuation">}</span> </span>as <span class="">insightIntent</span><span class="">.</span><span class="">ExecuteResult</span><span class="">)</span></li><li>  <span class=""><span class="hljs-punctuation">}</span></span></li><li>  <span class=""><span class="hljs-comment">/**</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * 实现跳转目标页面的功能</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   *</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * @param param 意图参数</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   * @param pageLoader 窗口</span></span><span class="hljs-comment"></span></li><li><span class="hljs-comment"></span><span class=""><span class="hljs-comment">   */</span></span></li><li>  private <span class="">jumpFu</span><span class="">n</span><span class="">ctionPage</span><span class="">(</span><span class="">param</span><span class=""><span class="hljs-punctuation">:</span> </span><span class="">Record</span><span class="">&lt;</span><span class="">string</span><span class=""><span class="hljs-punctuation">,</span> </span><span class="">Object</span><span class="">&gt;</span><span class=""><span class="hljs-punctuation">,</span> </span><span class="">pageLoader</span><span class=""><span class="hljs-punctuation">:</span> </span><span class="">window</span><span class="">.</span><span class="">WindowStage</span><span class="">)</span><span class=""><span class="hljs-punctuation">:</span> </span><span class="">Promise</span><span class="">&lt;</span><span class="">insightIntent</span><span class="">.</span><span class="">ExecuteResult</span><span class="">&gt;</span> <span class=""><span class="hljs-punctuation">{</span></span></li><li>    return new <span class="">Promise</span><span class="">((</span><span class="">resolve</span><span class=""><span class="hljs-punctuation">,</span> </span><span class="">reject</span><span class="">) </span><span class="">=</span><span class="">&gt;</span> <span class=""><span class="hljs-punctuation">{</span></span></li><li>      let pageId<span class="hljs-punctuation">:</span> string = param?.pageId as string;</li><li>      <span class="">pageLoader</span><span class="">.</span><span class="">loadContent</span><span class="">(</span><span class="">'pages/'+ </span>pageId<span class="">)</span></li><li>        <span class="">.</span><span class="">then</span><span class="">(() </span><span class="">=</span><span class="">&gt;</span> <span class=""><span class="hljs-punctuation">{</span></span></li><li>        <span class="">resolve</span><span class="">(</span><span class=""><span class="hljs-punctuation">{</span></span></li><li>            <span class="">code</span><span class=""><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-number">0</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>            <span class="">result</span><span class=""><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-punctuation">{</span></span></li><li>              <span class="">message</span><span class=""><span class="hljs-punctuation">:</span> </span><span class="">'Intent execute success'</span></li><li>            <span class=""><span class="hljs-punctuation">}</span></span></li><li><span class="">          <span class="hljs-punctuation">}</span></span><span class="">)</span><span class="">;</span></li><li>        <span class=""><span class="hljs-punctuation">}</span></span><span class="">)</span></li><li>        <span class="">.</span><span class="">catch</span><span class="">((</span><span class="">err</span><span class=""><span class="hljs-punctuation">:</span> </span><span class="">BusinessError</span><span class="">) </span><span class="">=</span><span class="">&gt;</span> <span class=""><span class="hljs-punctuation">{</span></span></li><li>          <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">TODO 调用失败的情况</span></span></li><li>          <span class="">resolve</span><span class="">(</span><span class=""><span class="hljs-punctuation">{</span></span></li><li>            <span class="">code</span><span class=""><span class="hljs-punctuation">:</span> <span class="hljs-number">-</span></span><span class=""><span class="hljs-number">1</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>            <span class="">result</span><span class=""><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-punctuation">{</span></span></li><li>              <span class="">message</span><span class=""><span class="hljs-punctuation">:</span> </span><span class="">'Intent execute failed'</span></li><li>            <span class=""><span class="hljs-punctuation">}</span></span></li><li><span class="">          <span class="hljs-punctuation">}</span></span><span class="">)</span></li><li>        <span class=""><span class="hljs-punctuation">}</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-punctuation">}</span></span><span class="">)</span></li><li>  <span class=""><span class="hljs-punctuation">}</span></span></li><li><span class=""><span class="hljs-punctuation">}</span></span></li></ol></pre></div></div> </div> </div> <div></div></div>