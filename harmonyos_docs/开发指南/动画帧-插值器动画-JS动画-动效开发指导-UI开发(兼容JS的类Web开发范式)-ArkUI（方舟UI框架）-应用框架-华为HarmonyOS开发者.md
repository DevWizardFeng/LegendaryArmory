<h1 _ngcontent-ohl-c119="" class="doc-title ng-star-inserted" title="动画帧"> 动画帧 </h1>

<div _ngcontent-ohl-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="请求动画帧">请求动画帧<i class="anchor-icon anchor-icon-link" anchorid="请求动画帧" tips="复制节点链接"></i></h2><p>请求动画帧时通过requestAnimationFrame函数逐帧回调，传入一个回调函数。</p> <p>runframe在调用requestAnimationFrame时传入带有timestamp参数的回调函数step，将step中的timestamp赋予起始的startTime。当timestamp与startTime的差值小于规定的时间时，会再次调用requestAnimationFrame，最终动画将会停止。</p> <div _ngcontent-ohl-c106="" class="highlight-div"><div _ngcontent-ohl-c106="" class="highlight-div-header"><div _ngcontent-ohl-c106="" class="highlight-div-header-left"><div _ngcontent-ohl-c106="" class="handle-button expand-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohl-c106="" class="highlight-div-header-right"><div _ngcontent-ohl-c106="" class="handle-button ai-button"></div><div _ngcontent-ohl-c106="" class="handle-button line-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohl-c106="" class="handle-button theme-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohl-c106="" class="handle-button copy-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohl-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- xxx.hml --&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">tabs</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">"changecontent"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">tab-content</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">stack</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px;height: 300px;margin-top: 100px;margin-bottom: 100px;"</span>&gt;</span></li><li>          <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"mycanvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%;height: 100%;background-color: coral;"</span>&gt;</span></li><li>          <span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span></li><li>          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 50px;height: 50px;border-radius: 25px;background-color: indigo;position: absolute;left: {{left}};top: {{top}};"</span>&gt;</span></li><li>          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;/<span class="hljs-name">stack</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"capsule"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"play"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"runframe"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">tab-content</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">tabs</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li></ol></pre></div></div> <div _ngcontent-ohl-c106="" class="highlight-div"><div _ngcontent-ohl-c106="" class="highlight-div-header"><div _ngcontent-ohl-c106="" class="highlight-div-header-left"><div _ngcontent-ohl-c106="" class="handle-button expand-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohl-c106="" class="highlight-div-header-right"><div _ngcontent-ohl-c106="" class="handle-button ai-button"></div><div _ngcontent-ohl-c106="" class="handle-button line-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohl-c106="" class="handle-button theme-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohl-c106="" class="handle-button copy-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohl-c106="" class="highlight-scroll-div"><pre class="css prettyprint linenums hljs language-css" hw-language="css" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">/* xxx.css */</span></li><li><span class="hljs-selector-class">.container</span> {</li><li>  <span class="hljs-attribute">flex-direction</span>: column;</li><li>  <span class="hljs-attribute">justify-content</span>: center;</li><li>  <span class="hljs-attribute">align-items</span>: center;</li><li>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</li><li>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</li><li>}</li><li><span class="hljs-selector-tag">button</span>{</li><li>  <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;</li><li>}</li></ol></pre></div></div> <div _ngcontent-ohl-c106="" class="highlight-div"><div _ngcontent-ohl-c106="" class="highlight-div-header"><div _ngcontent-ohl-c106="" class="highlight-div-header-left"><div _ngcontent-ohl-c106="" class="handle-button expand-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohl-c106="" class="highlight-div-header-right"><div _ngcontent-ohl-c106="" class="handle-button ai-button"></div><div _ngcontent-ohl-c106="" class="handle-button line-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohl-c106="" class="handle-button theme-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohl-c106="" class="handle-button copy-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohl-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" hw-language="js" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.js</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>  <span class="hljs-attr">data</span>: {</li><li>    <span class="hljs-attr">timer</span>: <span class="hljs-literal">null</span>,</li><li>    <span class="hljs-attr">left</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">flag</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">animation</span>: <span class="hljs-literal">null</span>,</li><li>    <span class="hljs-attr">startTime</span>: <span class="hljs-number">0</span>,</li><li>  },</li><li>  <span class="hljs-title function_">onShow</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">var</span> test = <span class="hljs-variable language_">this</span>.$element(<span class="hljs-string">"mycanvas"</span>);</li><li>    <span class="hljs-keyword">var</span> ctx = test.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">"2d"</span>);</li><li>    ctx.<span class="hljs-title function_">beginPath</span>();</li><li>    ctx.<span class="hljs-title function_">moveTo</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>    ctx.<span class="hljs-title function_">lineTo</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>);</li><li>    ctx.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">5</span>;</li><li>    ctx.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">"red"</span>;</li><li>    ctx.<span class="hljs-title function_">stroke</span>();</li><li>  },</li><li>  <span class="hljs-title function_">runframe</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span> = <span class="hljs-literal">true</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">animation</span> = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">step</span>);</li><li>  },</li><li>  <span class="hljs-title function_">step</span>(<span class="hljs-params">timestamp</span>) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> += <span class="hljs-number">5</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> += <span class="hljs-number">5</span>;</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span> == <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span> = timestamp;</li><li>      }</li><li>      <span class="hljs-keyword">var</span> elapsed = timestamp - <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span>;</li><li>        <span class="hljs-keyword">if</span> (elapsed &lt; <span class="hljs-number">500</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'callback step timestamp: '</span> + timestamp);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">animation</span> = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">step</span>);</li><li>        }</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> -= <span class="hljs-number">5</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> -= <span class="hljs-number">5</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">animation</span> = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">step</span>);</li><li>      }</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> == <span class="hljs-number">250</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> == <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span>;</li><li>     }</li><li>    },</li><li>    <span class="hljs-title function_">onDestroy</span>(<span class="hljs-params"></span>) {</li><li>      <span class="hljs-title function_">cancelAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animation</span>);</li><li>    }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="296" originwidth="295" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114957.95778815377928729853692264026622:50001231000000:2800:718AC3C61F86B234B6DFDC32E0A2AF31C1A98E5B27A5A238D20462FA9141F866.gif" class="notEnlarge" width="295" height="296"></span></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>requestAnimationFrame函数在调用回调函数时在第一个参数位置传入timestamp时间戳，表示requestAnimationFrame开始去执行回调函数的时刻。</p>  </div></div></div> </div>  <div class="tiledSection"><h2 id="取消动画帧">取消动画帧<i class="anchor-icon anchor-icon-link" anchorid="取消动画帧" tips="复制节点链接"></i></h2><p>通过cancelAnimationFrame函数取消逐帧回调，在调用cancelAnimationFrame函数时取消requestAnimationFrame函数的请求。</p> <div _ngcontent-ohl-c106="" class="highlight-div"><div _ngcontent-ohl-c106="" class="highlight-div-header"><div _ngcontent-ohl-c106="" class="highlight-div-header-left"><div _ngcontent-ohl-c106="" class="handle-button expand-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohl-c106="" class="highlight-div-header-right"><div _ngcontent-ohl-c106="" class="handle-button ai-button"></div><div _ngcontent-ohl-c106="" class="handle-button line-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohl-c106="" class="handle-button theme-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohl-c106="" class="handle-button copy-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohl-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- xxx.hml --&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">tabs</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">"changecontent"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">tab-content</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">stack</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px;height: 300px;margin-top: 100px;margin-bottom: 100px;"</span>&gt;</span></li><li>          <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"mycanvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%;height: 100%;background-color: coral;"</span>&gt;</span></li><li>          <span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span></li><li>          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 50px;height: 50px;border-radius: 25px;background-color: indigo;position: absolute;left: {{left}};top: {{top}};"</span>&gt;</span></li><li>          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;/<span class="hljs-name">stack</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"capsule"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"play"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"runframe"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">tab-content</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">tabs</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li></ol></pre></div></div> <div _ngcontent-ohl-c106="" class="highlight-div"><div _ngcontent-ohl-c106="" class="highlight-div-header"><div _ngcontent-ohl-c106="" class="highlight-div-header-left"><div _ngcontent-ohl-c106="" class="handle-button expand-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohl-c106="" class="highlight-div-header-right"><div _ngcontent-ohl-c106="" class="handle-button ai-button"></div><div _ngcontent-ohl-c106="" class="handle-button line-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohl-c106="" class="handle-button theme-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohl-c106="" class="handle-button copy-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohl-c106="" class="highlight-scroll-div"><pre class="css prettyprint linenums hljs language-css" hw-language="css" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">/* xxx.css */</span></li><li><span class="hljs-selector-class">.container</span> {</li><li>  <span class="hljs-attribute">flex-direction</span>: column;</li><li>  <span class="hljs-attribute">justify-content</span>: center;</li><li>  <span class="hljs-attribute">align-items</span>: center;</li><li>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</li><li>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</li><li>}</li><li><span class="hljs-selector-tag">button</span>{</li><li>  <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;</li><li>}</li></ol></pre></div></div> <div _ngcontent-ohl-c106="" class="highlight-div"><div _ngcontent-ohl-c106="" class="highlight-div-header"><div _ngcontent-ohl-c106="" class="highlight-div-header-left"><div _ngcontent-ohl-c106="" class="handle-button expand-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohl-c106="" class="highlight-div-header-right"><div _ngcontent-ohl-c106="" class="handle-button ai-button"></div><div _ngcontent-ohl-c106="" class="handle-button line-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohl-c106="" class="handle-button theme-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohl-c106="" class="handle-button copy-button"><div _ngcontent-ohl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohl-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" hw-language="js" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.js</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>  <span class="hljs-attr">data</span>: {</li><li>    <span class="hljs-attr">timer</span>: <span class="hljs-literal">null</span>,</li><li>    <span class="hljs-attr">left</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">flag</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">animation</span>: <span class="hljs-literal">null</span></li><li>  },</li><li>  <span class="hljs-title function_">onShow</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">var</span> test = <span class="hljs-variable language_">this</span>.$element(<span class="hljs-string">"mycanvas"</span>);</li><li>    <span class="hljs-keyword">var</span> ctx = test.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">"2d"</span>);</li><li>    ctx.<span class="hljs-title function_">beginPath</span>();</li><li>    ctx.<span class="hljs-title function_">moveTo</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>    ctx.<span class="hljs-title function_">lineTo</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>);</li><li>    ctx.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">5</span>;</li><li>    ctx.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">"red"</span>;</li><li>    ctx.<span class="hljs-title function_">stroke</span>();</li><li>  },</li><li>  <span class="hljs-title function_">runframe</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span> = <span class="hljs-literal">true</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">animation</span> = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">step</span>);</li><li>  },</li><li>  <span class="hljs-title function_">step</span>(<span class="hljs-params">timestamp</span>) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> += <span class="hljs-number">5</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> += <span class="hljs-number">5</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">animation</span> = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">step</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> -= <span class="hljs-number">5</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> -= <span class="hljs-number">5</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">animation</span> = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">step</span>);</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> == <span class="hljs-number">250</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> == <span class="hljs-number">0</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">flag</span>;</li><li>    }</li><li>  },</li><li>  <span class="hljs-title function_">onDestroy</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title function_">cancelAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animation</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="296" originwidth="295" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114957.61368831026549428095544268623366:50001231000000:2800:3AF5A42991D3F9F3D77E7FFAF36073F3E235C729C035037C318ADA21253AC884.gif" class="notEnlarge" width="295" height="296"></span></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>在调用该函数时需传入一个具有标识id的参数。</p>  </div></div></div> </div> </div> <div></div></div>