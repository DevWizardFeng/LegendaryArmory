<h1 _ngcontent-uvo-c119="" class="doc-title ng-star-inserted" title="卡证识别"> 卡证识别 </h1>

<div _ngcontent-uvo-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>从5.1.1(19)开始，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/vision-card-recognition#section143611912403" target="_blank">CardRecognition</a>接口中的callback参数废弃，请使用onResult代替。</p>    <div class="tiledSection">     <h2 id="section157109333309">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section157109333309" tips="复制节点链接"></i></h2>          <p>卡证识别控件提供身份证（目前仅支持中国大陆二代身份证，且不包含民汉双文身份证）、行驶证、驾驶证、护照、银行卡的结构化识别服务，满足卡证的自动分类功能，系统可自动判断所属卡证类型并返回结构化信息和卡证图片信息。</p>     <p>对于需要填充卡证信息的场景，如身份证、银行卡信息等，可使用卡证识别控件读取OCR（Optical Character Recognition）信息，将结果信息返回后进行填充。支持单独识别正面、反面，或同时进行双面识别。</p>     <div class="fignone">      <span class="figcap"><b>图1 </b>银行卡识别示意图</span>     </div>     <p><span><img height="541.019129" originheight="665" originwidth="320" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114226.55387459565907935525451965539985:50001231000000:2800:2AD609DA49C686E747A9BA757107D4BF70E71E81BA7DBF1A67EC6F977CE381D7.png" title="点击放大" width="260.3475"></span></p>    </div>    <div class="tiledSection">     <h2 id="section2020122517405">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="section2020122517405" tips="复制节点链接"></i></h2>          <ul>      <li>支持的语种类型：简体中文、英文。</li>      <li>卡证识别暂时只支持身份证、行驶证、驾驶证、护照、银行卡5种卡证。</li>      <li>不允许被其他组件或窗口遮挡。</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="section1070612236242">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section1070612236242" tips="复制节点链接"></i></h2>          <p>以下仅列出demo中调用的部分主要接口，具体API说明详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/vision-card-recognition" target="_blank">API参考</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.3.1.1" valign="top" width="49.87%">          <p>接口名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.3.1.2" valign="top" width="50.129999999999995%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="49.87%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/vision-card-recognition#section143611912403" target="_blank">CardRecognition</a></p></td>         <td class="cellrowborder" valign="top" width="50.129999999999995%">          <p>卡证识别控件</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="49.87%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/vision-card-recognition#section161551745133610" target="_blank">CardRecognitionResult</a></p></td>         <td class="cellrowborder" valign="top" width="50.129999999999995%">          <p>卡证识别结果</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section620822710914">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section620822710914" tips="复制节点链接"></i></h2>         </div>    <ol>     <li><span>将卡证识别控件相关的类添加至工程。</span>      <p></p>      <div _ngcontent-uvo-c106="" class="highlight-div"><div _ngcontent-uvo-c106="" class="highlight-div-header"><div _ngcontent-uvo-c106="" class="highlight-div-header-left"><div _ngcontent-uvo-c106="" class="handle-button expand-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uvo-c106="" class="highlight-div-header-right"><div _ngcontent-uvo-c106="" class="handle-button ai-button"></div><div _ngcontent-uvo-c106="" class="handle-button line-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uvo-c106="" class="handle-button theme-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uvo-c106="" class="handle-button copy-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uvo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CardRecognition</span>, <span class="hljs-title class_">CardRecognitionResult</span>, <span class="hljs-title class_">CardType</span>, <span class="hljs-title class_">CardSide</span>, <span class="hljs-title class_">CardRecognitionConfig</span>, <span class="hljs-title class_">ShootingMode</span>, <span class="hljs-title class_">CardContentConfig</span>, <span class="hljs-title class_">BankCardConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.VisionKit"</span>;</li></ol></pre></div></div>      <p></p></li>     <li><span>配置页面的布局，选择需要识别的卡证类型和需要识别的卡证页面，配置对应设置项，在回调中获取结果返回值。</span>      <p></p>      <div class="p">       以下分别为身份证、银行卡、护照、驾驶证和行驶证的示例代码。       <div _ngcontent-uvo-c106="" class="highlight-div"><div _ngcontent-uvo-c106="" class="highlight-div-header"><div _ngcontent-uvo-c106="" class="highlight-div-header-left"><div _ngcontent-uvo-c106="" class="handle-button expand-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uvo-c106="" class="highlight-div-header-right"><div _ngcontent-uvo-c106="" class="handle-button ai-button"></div><div _ngcontent-uvo-c106="" class="handle-button line-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uvo-c106="" class="handle-button theme-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uvo-c106="" class="handle-button copy-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uvo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">'CardRecognition'</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 身份证</span></li><li>      <span class="hljs-title class_">CardRecognition</span>({</li><li>        <span class="hljs-attr">supportType</span>: <span class="hljs-title class_">CardType</span>.<span class="hljs-property">CARD_ID</span>,</li><li>        <span class="hljs-comment">// 身份证可双面识别</span></li><li>        <span class="hljs-attr">cardSide</span>: <span class="hljs-title class_">CardSide</span>.<span class="hljs-property">DEFAULT</span>,</li><li>        <span class="hljs-attr">cardRecognitionConfig</span>: {</li><li>          <span class="hljs-attr">defaultShootingMode</span>: <span class="hljs-title class_">ShootingMode</span>.<span class="hljs-property">MANUAL</span>,</li><li>          <span class="hljs-attr">isPhotoSelectionSupported</span>: <span class="hljs-literal">true</span></li><li>        },</li><li>        <span class="hljs-attr">onResult</span>: (<span class="hljs-function">(<span class="hljs-params">params: CardRecognitionResult</span>) =&gt;</span> {</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params code: <span class="hljs-subst">${params.code}</span>`</span>)</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardType: <span class="hljs-subst">${params.cardType}</span>`</span>)</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardInfo front: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(params.cardInfo?.front)}</span>`</span>)</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardInfo back: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(params.cardInfo?.back)}</span>`</span>)</li><li>        })</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>      </div>      <p></p>      <div _ngcontent-uvo-c106="" class="highlight-div"><div _ngcontent-uvo-c106="" class="highlight-div-header"><div _ngcontent-uvo-c106="" class="highlight-div-header-left"><div _ngcontent-uvo-c106="" class="handle-button expand-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uvo-c106="" class="highlight-div-header-right"><div _ngcontent-uvo-c106="" class="handle-button ai-button"></div><div _ngcontent-uvo-c106="" class="handle-button line-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uvo-c106="" class="handle-button theme-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uvo-c106="" class="handle-button copy-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uvo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">'CardRecognition'</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 银行卡</span></li><li>      <span class="hljs-title class_">CardRecognition</span>({</li><li>        <span class="hljs-attr">supportType</span>: <span class="hljs-title class_">CardType</span>.<span class="hljs-property">CARD_BANK</span>,</li><li>        <span class="hljs-comment">// 银行卡为单面识别</span></li><li>        <span class="hljs-attr">cardSide</span>: <span class="hljs-title class_">CardSide</span>.<span class="hljs-property">FRONT</span>,</li><li>        <span class="hljs-attr">cardRecognitionConfig</span>: {</li><li>          <span class="hljs-attr">defaultShootingMode</span>: <span class="hljs-title class_">ShootingMode</span>.<span class="hljs-property">MANUAL</span>,</li><li>          <span class="hljs-attr">isPhotoSelectionSupported</span>: <span class="hljs-literal">true</span>,</li><li>          <span class="hljs-attr">cardContentConfig</span>: { <span class="hljs-attr">bankCard</span>: { <span class="hljs-attr">isBankNumberDialogShown</span>: <span class="hljs-literal">true</span>} }</li><li>        },</li><li>        <span class="hljs-attr">onResult</span>: (<span class="hljs-function">(<span class="hljs-params">params: CardRecognitionResult</span>) =&gt;</span> {</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params code: <span class="hljs-subst">${params.code}</span>`</span>)</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardType: <span class="hljs-subst">${params.cardType}</span>`</span>)</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardInfo: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(params.cardInfo?.main)}</span>`</span>)</li><li>        })})</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>      <p></p>      <div _ngcontent-uvo-c106="" class="highlight-div"><div _ngcontent-uvo-c106="" class="highlight-div-header"><div _ngcontent-uvo-c106="" class="highlight-div-header-left"><div _ngcontent-uvo-c106="" class="handle-button expand-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uvo-c106="" class="highlight-div-header-right"><div _ngcontent-uvo-c106="" class="handle-button ai-button"></div><div _ngcontent-uvo-c106="" class="handle-button line-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uvo-c106="" class="handle-button theme-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uvo-c106="" class="handle-button copy-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uvo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">'CardRecognition'</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 护照</span></li><li>      <span class="hljs-title class_">CardRecognition</span>({</li><li>        <span class="hljs-attr">supportType</span>: <span class="hljs-title class_">CardType</span>.<span class="hljs-property">CARD_PASSPORT</span>,</li><li>        <span class="hljs-comment">// 护照为单面识别</span></li><li>        <span class="hljs-attr">cardSide</span>: <span class="hljs-title class_">CardSide</span>.<span class="hljs-property">FRONT</span>,</li><li>        <span class="hljs-attr">cardRecognitionConfig</span>: {</li><li>          <span class="hljs-attr">defaultShootingMode</span>: <span class="hljs-title class_">ShootingMode</span>.<span class="hljs-property">MANUAL</span>,</li><li>          <span class="hljs-attr">isPhotoSelectionSupported</span>: <span class="hljs-literal">true</span></li><li>        },</li><li>        <span class="hljs-attr">onResult</span>: (<span class="hljs-function">(<span class="hljs-params">params: CardRecognitionResult</span>) =&gt;</span> {</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params code: <span class="hljs-subst">${params.code}</span>`</span>)</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardType: <span class="hljs-subst">${params.cardType}</span>`</span>)</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardInfo: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(params.cardInfo?.main)}</span>`</span>)</li><li>        })})</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>      <div class="p">       <div _ngcontent-uvo-c106="" class="highlight-div"><div _ngcontent-uvo-c106="" class="highlight-div-header"><div _ngcontent-uvo-c106="" class="highlight-div-header-left"><div _ngcontent-uvo-c106="" class="handle-button expand-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uvo-c106="" class="highlight-div-header-right"><div _ngcontent-uvo-c106="" class="handle-button ai-button"></div><div _ngcontent-uvo-c106="" class="handle-button line-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uvo-c106="" class="handle-button theme-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uvo-c106="" class="handle-button copy-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uvo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">'CardRecognition'</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 驾驶证</span></li><li>      <span class="hljs-title class_">CardRecognition</span>({</li><li>        <span class="hljs-attr">supportType</span>: <span class="hljs-title class_">CardType</span>.<span class="hljs-property">CARD_DRIVER_LICENSE</span>,</li><li>        <span class="hljs-comment">// 驾驶证可双面识别</span></li><li>        <span class="hljs-attr">cardSide</span>: <span class="hljs-title class_">CardSide</span>.<span class="hljs-property">DEFAULT</span>,</li><li>        <span class="hljs-attr">cardRecognitionConfig</span>: {</li><li>          <span class="hljs-attr">defaultShootingMode</span>: <span class="hljs-title class_">ShootingMode</span>.<span class="hljs-property">MANUAL</span>,</li><li>          <span class="hljs-attr">isPhotoSelectionSupported</span>: <span class="hljs-literal">true</span></li><li>        },</li><li>        <span class="hljs-attr">onResult</span>: (<span class="hljs-function">(<span class="hljs-params">params: CardRecognitionResult</span>) =&gt;</span> {</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params code: <span class="hljs-subst">${params.code}</span>`</span>)</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardType: <span class="hljs-subst">${params.cardType}</span>`</span>)</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardInfo front: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(params.cardInfo?.front)}</span>`</span>)</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardInfo back: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(params.cardInfo?.back)}</span>`</span>)</li><li>        })</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>      </div>      <div class="p">       <div _ngcontent-uvo-c106="" class="highlight-div"><div _ngcontent-uvo-c106="" class="highlight-div-header"><div _ngcontent-uvo-c106="" class="highlight-div-header-left"><div _ngcontent-uvo-c106="" class="handle-button expand-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uvo-c106="" class="highlight-div-header-right"><div _ngcontent-uvo-c106="" class="handle-button ai-button"></div><div _ngcontent-uvo-c106="" class="handle-button line-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uvo-c106="" class="handle-button theme-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uvo-c106="" class="handle-button copy-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uvo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">'CardRecognition'</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 行驶证</span></li><li>      <span class="hljs-title class_">CardRecognition</span>({</li><li>        <span class="hljs-attr">supportType</span>: <span class="hljs-title class_">CardType</span>.<span class="hljs-property">CARD_VEHICLE_LICENSE</span>,</li><li>        <span class="hljs-comment">// 行驶证可双面识别</span></li><li>        <span class="hljs-attr">cardSide</span>: <span class="hljs-title class_">CardSide</span>.<span class="hljs-property">DEFAULT</span>,</li><li>        <span class="hljs-attr">cardRecognitionConfig</span>: {</li><li>          <span class="hljs-attr">defaultShootingMode</span>: <span class="hljs-title class_">ShootingMode</span>.<span class="hljs-property">MANUAL</span>,</li><li>          <span class="hljs-attr">isPhotoSelectionSupported</span>: <span class="hljs-literal">true</span></li><li>        },</li><li>        <span class="hljs-attr">onResult</span>: (<span class="hljs-function">(<span class="hljs-params">params: CardRecognitionResult</span>) =&gt;</span> {</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params code: <span class="hljs-subst">${params.code}</span>`</span>)</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardType: <span class="hljs-subst">${params.cardType}</span>`</span>)</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardInfo front: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(params.cardInfo?.front)}</span>`</span>)</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardInfo back: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(params.cardInfo?.back)}</span>`</span>)</li><li>        })</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>      </div>      <p></p></li>    </ol>    <div class="tiledSection">     <h2 id="section12918203941611">开发实例<i class="anchor-icon anchor-icon-link" anchorid="section12918203941611" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section6740036141219" class="firsth2">Index.ets<i class="anchor-icon anchor-icon-link" anchorid="section6740036141219" tips="复制节点链接"></i></h3>          <div _ngcontent-uvo-c106="" class="highlight-div"><div _ngcontent-uvo-c106="" class="highlight-div-header"><div _ngcontent-uvo-c106="" class="highlight-div-header-left"><div _ngcontent-uvo-c106="" class="handle-button expand-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uvo-c106="" class="highlight-div-header-right"><div _ngcontent-uvo-c106="" class="handle-button ai-button"></div><div _ngcontent-uvo-c106="" class="handle-button line-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uvo-c106="" class="handle-button theme-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uvo-c106="" class="handle-button copy-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uvo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 卡证识别开发实例分两页实现，一页为卡证识别入口页，一页为卡证识别实现页</span></li><li><span class="hljs-comment">// 卡证识别入口页，需引入卡证识别实现页，以下文实例为例，实现页文件名为CardDemoPage</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CardDemoPage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./CardDemoPage'</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">MainPage</span> {</li><li>  <span class="hljs-meta">@Provide</span>(<span class="hljs-string">'pathStack'</span>) <span class="hljs-attr">pathStack</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>()</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">PageMap</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>) {</li><li>    <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'cardRecognition'</span>) {</li><li>      <span class="hljs-title class_">CardDemoPage</span>()</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 卡证识别入口按钮</span></li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Navigation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pathStack</span>) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'CardRecognition'</span>, { <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'50%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">pathStack</span>.<span class="hljs-title function_">pushPath</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'cardRecognition'</span> })</li><li>        })</li><li>    }.<span class="hljs-title function_">title</span>(<span class="hljs-string">'卡证识别控件demo'</span>).<span class="hljs-title function_">navDestination</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">PageMap</span>)</li><li>    .<span class="hljs-title function_">mode</span>(<span class="hljs-title class_">NavigationMode</span>.<span class="hljs-property">Stack</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section71441837171219">CardDemoPage.ets<i class="anchor-icon anchor-icon-link" anchorid="section71441837171219" tips="复制节点链接"></i></h3>          <div _ngcontent-uvo-c106="" class="highlight-div"><div _ngcontent-uvo-c106="" class="highlight-div-header"><div _ngcontent-uvo-c106="" class="highlight-div-header-left"><div _ngcontent-uvo-c106="" class="handle-button expand-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uvo-c106="" class="highlight-div-header-right"><div _ngcontent-uvo-c106="" class="handle-button ai-button"></div><div _ngcontent-uvo-c106="" class="handle-button line-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uvo-c106="" class="handle-button theme-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uvo-c106="" class="handle-button copy-button"><div _ngcontent-uvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uvo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 卡证识别实现页，文件名为CardDemoPage，需被引入至入口页</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CardRecognition</span>, <span class="hljs-title class_">CardRecognitionResult</span>, <span class="hljs-title class_">CardType</span>, <span class="hljs-title class_">CardSide</span>, <span class="hljs-title class_">ShootingMode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.VisionKit"</span></li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'CardRecognitionPage'</span></li><li>
</li><li><span class="hljs-comment">// 卡证识别页，用于加载uiExtensionAbility</span></li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">CardDemoPage</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">cardDataSource</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;[] = []</li><li>  <span class="hljs-meta">@Consume</span>(<span class="hljs-string">'pathStack'</span>) <span class="hljs-attr">pathStack</span>: <span class="hljs-title class_">NavPathStack</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">NavDestination</span>() {</li><li>      <span class="hljs-title class_">Stack</span>({ <span class="hljs-attr">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Top</span> }) {</li><li>        <span class="hljs-title class_">Stack</span>() {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cardDataShowBuilder</span>()</li><li>        }</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'80%'</span>)</li><li>
</li><li>        <span class="hljs-title class_">CardRecognition</span>({</li><li>          <span class="hljs-comment">// 此处选择身份证类型作为示例</span></li><li>          <span class="hljs-attr">supportType</span>: <span class="hljs-title class_">CardType</span>.<span class="hljs-property">CARD_ID</span>,</li><li>          <span class="hljs-attr">cardSide</span>: <span class="hljs-title class_">CardSide</span>.<span class="hljs-property">DEFAULT</span>,</li><li>          <span class="hljs-attr">cardRecognitionConfig</span>: {</li><li>            <span class="hljs-attr">defaultShootingMode</span>: <span class="hljs-title class_">ShootingMode</span>.<span class="hljs-property">MANUAL</span>,</li><li>            <span class="hljs-attr">isPhotoSelectionSupported</span>: <span class="hljs-literal">true</span></li><li>          },</li><li>          <span class="hljs-attr">onResult</span>: (<span class="hljs-function">(<span class="hljs-params">params: CardRecognitionResult</span>) =&gt;</span> {</li><li>            hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params code: <span class="hljs-subst">${params.code}</span>`</span>)</li><li>            <span class="hljs-keyword">if</span> (params.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">pathStack</span>.<span class="hljs-title function_">pop</span>()</li><li>            }</li><li>            hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardType: <span class="hljs-subst">${params.cardType}</span>`</span>)</li><li>            <span class="hljs-keyword">if</span> (params.<span class="hljs-property">cardInfo</span>?.<span class="hljs-property">front</span> !== <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">cardDataSource</span>.<span class="hljs-title function_">push</span>(params.<span class="hljs-property">cardInfo</span>?.<span class="hljs-property">front</span>)</li><li>            }</li><li>
</li><li>            <span class="hljs-keyword">if</span> (params.<span class="hljs-property">cardInfo</span>?.<span class="hljs-property">back</span> !== <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">cardDataSource</span>.<span class="hljs-title function_">push</span>(params.<span class="hljs-property">cardInfo</span>?.<span class="hljs-property">back</span>)</li><li>            }</li><li>
</li><li>            <span class="hljs-keyword">if</span> (params.<span class="hljs-property">cardInfo</span>?.<span class="hljs-property">main</span> !== <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">cardDataSource</span>.<span class="hljs-title function_">push</span>(params.<span class="hljs-property">cardInfo</span>?.<span class="hljs-property">main</span>)</li><li>            }</li><li>            hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardInfo front: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(params.cardInfo?.front)}</span>`</span>)</li><li>            hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`params cardInfo back: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(params.cardInfo?.back)}</span>`</span>)</li><li>          })</li><li>        })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">hideTitleBar</span>(<span class="hljs-literal">true</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">cardDataShowBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">List</span>() {</li><li>      <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cardDataSource</span>, <span class="hljs-function">(<span class="hljs-params">cardData: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">ListItem</span>() {</li><li>          <span class="hljs-title class_">Column</span>() {</li><li>            <span class="hljs-title class_">Image</span>(cardData.<span class="hljs-property">cardImageUri</span>)</li><li>              .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>
</li><li>            <span class="hljs-title class_">Text</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(cardData))</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">12</span>)</li><li>          }</li><li>        }</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">listDirection</span>(<span class="hljs-title class_">Axis</span>.<span class="hljs-property">Vertical</span>)</li><li>    .<span class="hljs-title function_">alignListItem</span>(<span class="hljs-title class_">ListItemAlign</span>.<span class="hljs-property">Center</span>)</li><li>    .<span class="hljs-title function_">margin</span>({</li><li>      <span class="hljs-attr">top</span>: <span class="hljs-number">50</span></li><li>    })</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>