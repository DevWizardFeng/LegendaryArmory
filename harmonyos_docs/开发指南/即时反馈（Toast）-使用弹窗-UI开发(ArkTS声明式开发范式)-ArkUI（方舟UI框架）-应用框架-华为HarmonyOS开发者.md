<h1 _ngcontent-jax-c119="" class="doc-title ng-star-inserted" title="即时反馈（Toast）"> 即时反馈（Toast） </h1>

<div _ngcontent-jax-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>即时反馈（Toast）是一种临时性的消息提示框，用于向用户显示简短的操作反馈或状态信息。​它通常在屏幕的底部或顶部短暂弹出，随后在一段时间后自动消失。即时反馈的主要目的是提供简洁、不打扰的信息反馈，避免干扰用户当前的操作流程。</p>    <p>可以通过使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext" target="_blank">UIContext</a>中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext#getpromptaction" target="_blank">getPromptAction</a>方法获取当前UI上下文关联的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction" target="_blank">PromptAction</a>对象，再通过该对象调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction#showtoast" target="_blank">showToast</a>创建并显示文本提示框。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>为了安全考虑，例如Toast恶意遮挡其他页面，Toast只能显示在当前的UI实例中，应用退出后，不会单独显示在桌面上。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="使用建议">使用建议<i class="anchor-icon anchor-icon-link" anchorid="使用建议" tips="复制节点链接"></i></h2>          <ul>      <li>       <p>合理使用弹出场景，避免过度提醒用户。</p>       <p>可以针对以下常用场景使用即时反馈操作，例如，当用户执行某个操作时及时结果反馈，用来提示用户操作是否成功或失败；或是当应用程序的状态发生变化时提供状态更新等。</p></li>      <li>       <p>注意文本的信息密度，即时反馈展示时间有限，应当避免长文本的出现。</p>       <p>Toast控件的文本应该清晰可读，字体大小和颜色应该与应用程序的主题相符。除此之外，即时反馈控件本身不应该包含任何可交互的元素，如按钮或链接。</p></li>      <li>       <p>杜绝强制占位和密集弹出的提示。</p>       <p>即时反馈作为应用内的轻量通知，应当避免内容布局占用界面内的其他元素信息，如遮盖弹出框的展示内容，从而迷惑用户弹出的内容是否属于弹出框。再或者频繁性的弹出信息内容，且每次弹出之间无时间间隔，影响用户的正常使用。也不要在短时间内频繁弹出新的即时反馈替代上一个。即时反馈的单次显示时长不要超过 3 秒钟，避免影响用户正常的行为操作。</p></li>      <li>       <p>遵从系统默认弹出位置。</p>       <p>即时反馈在系统中默认从界面底部弹出，距离底部有一定的安全间距，作为系统性的应用内提示反馈，请遵从系统默认效果，避免与其他弹出类组件内容重叠。特殊场景下可对内容布局进行规避。</p></li>      <li>       <p>弹框字体最大放大倍数限制。</p>       <p>即时反馈中，字体的最大放大倍数为2。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="即时反馈模式对比">即时反馈模式对比<i class="anchor-icon anchor-icon-link" anchorid="即时反馈模式对比" tips="复制节点链接"></i></h2>          <p>即时反馈提供了两种显示模式，分别为DEFAULT（显示在应用内）、TOP_MOST（显示在应用之上）。</p>     <p>在TOP_MOST类型的Toast显示前，会创建一个全屏大小的子窗（手机上子窗大小和主窗大小一致），然后在该子窗上计算Toast的布局位置，最后显示在该子窗上。具体和DEFAULT模式Toast的差异如下：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.4.1.1" valign="top" width="33.33333333333333%">差异点</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.4.1.2" valign="top" width="33.33333333333333%">DEFAULT</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.4.1.3" valign="top" width="33.33333333333333%">TOP_MOST</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">是否创建子窗</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">否</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">层级</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">显示在主窗内，层级和主窗一致，一般比较低</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">显示在子窗中，一般比主窗层级高，比其他弹窗类组件层级高，比软键盘和权限弹窗层级低</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">是否避让软键盘</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">软键盘抬起时，必定上移软键盘的高度</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">软键盘抬起时，只有toast被遮挡时，才会避让，且避让后toast底部距离软键盘高度为80vp</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">UIExtension内布局</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">以UIExtension为主窗中布局，对齐方式与UIExtension对齐</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">以宿主窗口为主窗中布局，对齐方式与宿主窗口对齐</td>        </tr>             </tbody></table></div>     </div>     <div _ngcontent-jax-c106="" class="highlight-div"><div _ngcontent-jax-c106="" class="highlight-div-header"><div _ngcontent-jax-c106="" class="highlight-div-header-left"><div _ngcontent-jax-c106="" class="handle-button expand-button"><div _ngcontent-jax-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jax-c106="" class="highlight-div-header-right"><div _ngcontent-jax-c106="" class="handle-button ai-button"></div><div _ngcontent-jax-c106="" class="handle-button line-button"><div _ngcontent-jax-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jax-c106="" class="handle-button theme-button"><div _ngcontent-jax-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jax-c106="" class="handle-button copy-button"><div _ngcontent-jax-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jax-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { promptAction } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {</li><li>      <span class="hljs-title class_">TextInput</span>()</li><li>      <span class="hljs-title class_">Button</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'DEFAULT类型Toast'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>
</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">try</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({</li><li>            <span class="hljs-attr">message</span>: <span class="hljs-string">'ok，我是DEFAULT toast'</span>,</li><li>            <span class="hljs-attr">duration</span>: <span class="hljs-number">2000</span>,</li><li>            <span class="hljs-attr">showMode</span>: promptAction.<span class="hljs-property">ToastShowMode</span>.<span class="hljs-property">DEFAULT</span>,</li><li>            <span class="hljs-attr">bottom</span>: <span class="hljs-number">80</span></li><li>          });</li><li>        } <span class="hljs-keyword">catch</span> (error) {</li><li>          <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>          <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`showToast args error code is <span class="hljs-subst">${code}</span>, message is <span class="hljs-subst">${message}</span>`</span>);</li><li>        }</li><li>      })</li><li>
</li><li>      <span class="hljs-title class_">Button</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"TOPMOST类型Toast"</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>
</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">try</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({</li><li>            <span class="hljs-attr">message</span>: <span class="hljs-string">"ok，我是TOP_MOST toast"</span>,</li><li>            <span class="hljs-attr">duration</span>: <span class="hljs-number">2000</span>,</li><li>            <span class="hljs-attr">showMode</span>: promptAction.<span class="hljs-property">ToastShowMode</span>.<span class="hljs-property">TOP_MOST</span>,</li><li>            <span class="hljs-attr">bottom</span>: <span class="hljs-number">85</span></li><li>          });</li><li>        } <span class="hljs-keyword">catch</span> (error) {</li><li>          <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>          <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`showToast args error code is <span class="hljs-subst">${code}</span>, message is <span class="hljs-subst">${message}</span>`</span>);</li><li>        }</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="创建即时反馈">创建即时反馈<i class="anchor-icon anchor-icon-link" anchorid="创建即时反馈" tips="复制节点链接"></i></h2>          <p>适用于短时间内提示框自动消失的场景。</p>     <div _ngcontent-jax-c106="" class="highlight-div"><div _ngcontent-jax-c106="" class="highlight-div-header"><div _ngcontent-jax-c106="" class="highlight-div-header-left"><div _ngcontent-jax-c106="" class="handle-button expand-button"><div _ngcontent-jax-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jax-c106="" class="highlight-div-header-right"><div _ngcontent-jax-c106="" class="handle-button ai-button"></div><div _ngcontent-jax-c106="" class="handle-button line-button"><div _ngcontent-jax-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jax-c106="" class="handle-button theme-button"><div _ngcontent-jax-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jax-c106="" class="handle-button copy-button"><div _ngcontent-jax-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jax-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PromptAction</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct toastExample {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">promptAction</span>: <span class="hljs-title class_">PromptAction</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getPromptAction</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Show toast'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">promptAction</span>.<span class="hljs-title function_">showToast</span>({</li><li>              <span class="hljs-attr">message</span>: <span class="hljs-string">'Hello World'</span>,</li><li>              <span class="hljs-attr">duration</span>: <span class="hljs-number">2000</span></li><li>            })</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>            <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`showToast args error code is <span class="hljs-subst">${code}</span>, message is <span class="hljs-subst">${message}</span>`</span>);</li><li>          };</li><li>        })</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="664" originwidth="440" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114851.26773903273330025203142809216876:50001231000000:2800:B33FC9A5BE9FAC38EC52F016FC605576AB2283C18B6B9BCDF7E5FDCAE4EEB90C.gif" width="440" height="664"></span></p>    </div>    <div class="tiledSection">     <h2 id="显示和关闭即时反馈">显示和关闭即时反馈<i class="anchor-icon anchor-icon-link" anchorid="显示和关闭即时反馈" tips="复制节点链接"></i></h2>          <p>适用于提示框停留时间较长，用户操作可以提前关闭提示框的场景。</p>     <div _ngcontent-jax-c106="" class="highlight-div"><div _ngcontent-jax-c106="" class="highlight-div-header"><div _ngcontent-jax-c106="" class="highlight-div-header-left"><div _ngcontent-jax-c106="" class="handle-button expand-button"><div _ngcontent-jax-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jax-c106="" class="highlight-div-header-right"><div _ngcontent-jax-c106="" class="handle-button ai-button"></div><div _ngcontent-jax-c106="" class="handle-button line-button"><div _ngcontent-jax-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jax-c106="" class="handle-button theme-button"><div _ngcontent-jax-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jax-c106="" class="handle-button copy-button"><div _ngcontent-jax-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jax-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LengthMetrics</span>, <span class="hljs-title class_">PromptAction</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct toastExample {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">toastId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">promptAction</span>: <span class="hljs-title class_">PromptAction</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getPromptAction</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Open Toast'</span>)</li><li>        .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">promptAction</span>.<span class="hljs-title function_">openToast</span>({</li><li>              <span class="hljs-attr">message</span>: <span class="hljs-string">'Toast Message'</span>,</li><li>              <span class="hljs-attr">duration</span>: <span class="hljs-number">10000</span>,</li><li>            }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">toastId: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">toastId</span> = toastId;</li><li>            });</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>            <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`OpenToast error code is <span class="hljs-subst">${code}</span>, message is <span class="hljs-subst">${message}</span>`</span>);</li><li>          };</li><li>        })</li><li>      <span class="hljs-title class_">Blank</span>().<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>);</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Close Toast'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">promptAction</span>.<span class="hljs-title function_">closeToast</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">toastId</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>            <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`CloseToast error code is <span class="hljs-subst">${code}</span>, message is <span class="hljs-subst">${message}</span>`</span>);</li><li>          };</li><li>        })</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="576" originwidth="270" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114851.69093216152709777594977810750057:50001231000000:2800:7F0AFF199B67B68E00870F3AD65AC1734D3A6B5C5D89E944A8E246EF5C2EF727.gif" class="notEnlarge" width="270" height="576"></span></p>    </div>   </div>   <div></div></div>