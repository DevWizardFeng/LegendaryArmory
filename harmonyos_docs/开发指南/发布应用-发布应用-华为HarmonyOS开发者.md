<h1 _ngcontent-dva-c119="" class="doc-title ng-star-inserted" title="发布应用"> 发布应用 </h1>

<div _ngcontent-dva-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div id="body0000001053223745">    <p id="ZH-CN_TOPIC_0000002478334564__p3659373344">HarmonyOS通过数字证书与Profile文件等签名信息来保证应用/元服务的完整性，应用/元服务上架到AppGallery Connect必须通过签名校验。因此，您需要使用发布证书和Profile文件对应用/元服务进行签名后才能发布。</p>    <div class="tiledSection">     <h2 id="section6406135115814">发布流程<i class="anchor-icon anchor-icon-link" anchorid="section6406135115814" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002478334564__p14313163934018">开发者完成HarmonyOS应用/元服务开发后，需要将应用/元服务打包成App Pack（.app文件），用于上架到AppGallery Connect。发布应用/元服务的流程如下图所示：</p>     <p id="ZH-CN_TOPIC_0000002478334564__p1313163918408"><span><img originheight="429" originwidth="1055" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104943.90786945997217272625032740201660:50001231000000:2800:53041A5C685AB1E3D9418539630D332052238F84396458FA06BE77BFE3183BE8.png" width="920" height="374.1042654028436"></span></p>    </div>    <p id="ZH-CN_TOPIC_0000002478334564__p87795494401">关于以上流程的详细介绍，请继续查阅本章节内容。</p>    <div class="tiledSection">     <h2 id="section793484619307">准备签名文件<i class="anchor-icon anchor-icon-link" anchorid="section793484619307" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002478334564__p169021343185711">HarmonyOS应用/元服务通过数字证书（.cer文件）和Profile文件（.p7b文件）来保证应用/元服务的完整性。在申请数字证书和Profile文件前，首先需要通过DevEco Studio来生成密钥（存储在格式为.p12的密钥库文件中）和证书请求文件（.csr文件）。</p>     <div class="p" id="ZH-CN_TOPIC_0000002478334564__a8f533937b7654c13bec25ea0fbfadef8">      <strong>基本概念</strong>      <ul id="ZH-CN_TOPIC_0000002478334564__u2e866e312e534455966ed91a6445a0af">       <li id="l8ad4dce5e97c4c2ea652059aa2d46354"><strong>密钥</strong>：包含非对称加密中使用的公钥和私钥，存储在密钥库文件中，格式为.p12，公钥和私钥对用于数字签名和验证。</li>       <li id="l9e4676b07dbc4fdeab009902661177c4"><strong>证书请求文件</strong>：格式为.csr，全称为Certificate Signing Request，包含密钥对中的公钥和公共名称、组织名称、组织单位等信息，用于向AppGallery Connect申请数字证书。</li>       <li id="l35375c226c7e44368df2f455a44ff165"><strong>数字证书</strong>：格式为.cer，由华为AppGallery Connect颁发。</li>       <li id="lc29e1bd6f9884d60b3f9b81a9eecca61"><strong>Profile文件</strong>：格式为.p7b，包含HarmonyOS应用/元服务的包名、数字证书信息、描述应用/元服务允许申请的证书权限列表，以及允许应用/元服务调试的设备列表（如果应用/元服务类型为Release类型，则设备列表为空）等内容，每个应用/元服务包中均必须包含一个Profile文件。</li>      </ul>     </div>    </div>    <div class="tiledSection">     <h3 id="section1079214271414" class="firsth2">生成密钥和证书请求文件<i class="anchor-icon anchor-icon-link" anchorid="section1079214271414" tips="复制节点链接"></i></h3>          <ol id="ZH-CN_TOPIC_0000002478334564__oe87ac8c0057a4581982d46ccdb188ed0">      <li id="l71106db9434e4f08b1556a1b0563939e"><span>在主菜单栏单击<strong>Build &gt; Generate Key</strong> <strong>and CSR</strong>。</span>       <p></p>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p id="ZH-CN_TOPIC_0000002478334564__a40545d3d638c45b88339f9f15a9f8b29">如果本地已有对应的密钥，无需新生成密钥，可以在<strong>Generate Key</strong>界面中单击下方的Skip跳过密钥生成过程，直接使用已有密钥生成证书请求文件。</p>        </div></div></div>       <p></p></li>      <li id="li1463962225219"><span>在<strong>Key Store File</strong>中，可以单击<strong>Choose Existing</strong>选择已有的密钥库文件（存储有密钥的.p12文件）；如果没有密钥库文件，单击<strong>New</strong>进行创建。下面以新创建密钥库文件为例进行说明。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002478334564__p2638112265216"><span><img height="131.352263" originheight="155" originwidth="565" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104943.12502840959233122245359243566911:50001231000000:2800:999B4B6491E6E0E3428D8553A4C247954672D74DB421EB4BB9D1FB289DE83BC4.png" title="点击放大" width="478.8"></span></p>       <p></p></li>      <li id="l77d9295a43f443b9a3c933b8914bdd17"><span>在<strong>Create Key Store</strong>窗口中，填写密钥库信息后，单击<strong>OK</strong>。</span>       <p></p>       <ul id="ZH-CN_TOPIC_0000002478334564__u9709651544bd4d7aa839be5d5a876cc0">        <li id="lc8550019f2fb49cb87930fd8129711b6"><strong>Key Store File</strong>：设置密钥库文件存储路径，并填写p12文件名。</li>        <li id="lf22f34a87c35490bae148482eaff97d9"><strong>Password</strong>：设置密钥库密码，必须由大写字母、小写字母、数字和特殊符号中的两种以上字符的组合，长度至少为8位。请记住该密码，后续签名配置需要使用。</li>        <li id="lbc0c422b780144e18b7598d74751594b"><strong>Confirm Password</strong>：再次输入密钥库密码。</li>       </ul>       <p id="ZH-CN_TOPIC_0000002478334564__a16453c2ee03f4c03919497b638c87808"><span><img height="186.491004" originheight="178" originwidth="457" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104943.74254462830946448968277034416032:50001231000000:2800:95B3404DE785DFF97AADF702262D56A3259B5F6FD02AB1339FE428CE48CB0EBD.png" title="点击放大" width="478.8"></span></p>       <p></p></li>      <li id="l14fd717d0a104c988da2bd4ec7501bb9"><span>在<strong>Generate Key</strong> <strong>and CSR</strong>界面中，继续填写密钥信息后，单击<strong>Next</strong>。</span>       <p></p>       <ul id="ZH-CN_TOPIC_0000002478334564__udac01c1ed2614b95ab14ea19d6f0e22f">        <li id="l58d3b339d0344502adeb2deea28e577e"><strong>Alias</strong>：密钥的别名信息，用于标识密钥名称。请记住该别名，后续签名配置需要使用。</li>        <li id="l4cd66cfa934b4cceba50ca657bf2b56f"><strong>Password</strong>：密钥对应的密码，与密钥库密码保持一致，无需手动输入。</li>       </ul>       <p id="ZH-CN_TOPIC_0000002478334564__a15fa783fdf2d4af693ef9cbd69c828fc"><span><img originheight="382" originwidth="533" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104943.90216995599372799410816872106838:50001231000000:2800:9D4208CA713737673F93FDD7827F88EC7447D908DE1F684BBEFAD1406B6592BD.png" width="533" height="382"></span></p>       <p></p></li>      <li id="l360beffb091d401c8f3dbf9bc083147e"><span>在<strong>Generate Key</strong> <strong>and CSR</strong>界面，设置CSR文件存储路径和CSR文件名。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002478334564__a6b77c8b0ae7e42c4b55a189b0c6b0b44"><span><img height="275.31" originheight="299" originwidth="520" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104943.70295602742148339377118896339997:50001231000000:2800:8A8ED443144E633754BE0738706ADB4A326ADD83184BD5372AD42EBC0981AD0A.png" title="点击放大" width="478.8"></span></p>       <p></p></li>      <li id="l3b6f4fbfd7a549819b4cd907a5bc8ee6"><span>单击<strong>OK</strong>按钮，创建CSR文件成功，可以在存储路径下获取生成的密钥库文件（.p12）和证书请求文件（.csr）。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002478334564__a75ac4b7d586a4142b6028a40594ca3e8"><span><img originheight="176" originwidth="480" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104943.72325194841201039385255578792829:50001231000000:2800:4072A2B94E5A205D8F31492F2EFE332CFE24096CEDCAD7227385155E25B61885.png" width="480" height="176"></span></p>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="section178461193713">申请发布证书和Profile文件<i class="anchor-icon anchor-icon-link" anchorid="section178461193713" tips="复制节点链接"></i></h3>          <div class="p" id="ZH-CN_TOPIC_0000002478334564__p451315363318">      通过生成的证书请求文件，向AppGallery Connect申请发布证书和Profile文件，操作如下。      <ul id="ZH-CN_TOPIC_0000002478334564__ul2034586145910">       <li id="li203453685913">创建HarmonyOS应用/元服务：在AppGallery Connect项目中，创建一个HarmonyOS应用/元服务，用于发布证书和Profile文件申请，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-create-app-0000002247955506" target="_blank">创建HarmonyOS应用</a>和<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-create-atomic-service-0000002247795706" target="_blank">创建元服务</a>。        <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">          <p id="ZH-CN_TOPIC_0000002478334564__p0484559185918">如果申请元服务的签名证书，在“创建应用”操作时，“是否元服务”选项请选择“<strong>是</strong>”。</p>         </div></div></div></li>       <li id="li69627212010">申请发布证书和Profile文件：在AppGallery Connect中申请、下载发布证书和Profile文件，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-release-cert-0000002283336729" target="_blank">申请发布证书</a>和<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-release-profile-0000002248341090" target="_blank">申请发布Profile</a>。</li>      </ul>     </div>     <p id="ZH-CN_TOPIC_0000002478334564__p337472193815">用于发布的证书和Profile文件申请完成后，请在DevEco Studio中进行签名，请参考<a href="/consumer/cn/doc/harmonyos-guides/ide-publish-app#section280162182818">配置签名信息</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p id="ZH-CN_TOPIC_0000002478334564__p6864194421715">使用发布证书和发布Profile文件进行手动签名，只能用来打包应用上架，不能用来运行调试工程。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="section280162182818">配置签名信息<i class="anchor-icon anchor-icon-link" anchorid="section280162182818" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002478334564__p1189264213316">使用制作的私钥（.p12）文件、在AppGallery Connect中申请的证书（.cer）文件和Profile（.p7b）文件，在DevEco Studio配置工程的签名信息，构建携带发布签名信息的APP。</p>     <div class="p" id="ZH-CN_TOPIC_0000002478334564__p4870842162818">      在<strong>File &gt; </strong><strong>Project Structure &gt; </strong><strong>Project &gt; Signing Configs</strong><strong> &gt; default</strong>界面中，取消勾选“Automatically generate signature”和“Associate with registered application”，然后配置工程的签名信息。      <ul id="ZH-CN_TOPIC_0000002478334564__ul1792615256125">       <li id="li1492662531218"><strong>Store File</strong>：选择密钥库文件，文件后缀为.p12。</li>       <li id="li13926925201215"><strong>Store Password</strong>：输入密钥库密码。</li>       <li id="li8926202591211"><strong>Key Alias</strong>：输入密钥的别名信息。</li>       <li id="li15926132581218"><strong>Key Password</strong>：输入密钥的密码。</li>       <li id="li5926225191217"><strong>Sign Alg</strong>：签名算法，固定为SHA256withECDSA。</li>       <li id="li15927202551214"><strong>Profile File</strong>：选择申请的发布Profile文件，文件后缀为.p7b。</li>       <li id="li19927132531214"><strong>Certpath File</strong>：选择申请的发布数字证书文件，文件后缀为.cer。</li>      </ul>     </div>     <p id="ZH-CN_TOPIC_0000002478334564__p153771115142311"><span><img height="343.14000000000004" originheight="626" originwidth="953" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104944.93314423412245929780438494170316:50001231000000:2800:D321A1C9E61167684BB25134F2BCBF301E6DC2DF7BDF3402EB8A5621CE9DCFF3.png" title="点击放大" width="523.6875"></span></p>     <p id="ZH-CN_TOPIC_0000002478334564__p157241118103619">设置完签名信息后，单击<strong>OK</strong>进行保存，然后使用DevEco Studio生成APP，请参考<a href="/consumer/cn/doc/harmonyos-guides/ide-publish-app#section1992513343374">编译构建.app文件</a>。</p>    </div>    <div class="tiledSection">     <h2 id="section424912816516">（条件必选）更新公钥指纹<i class="anchor-icon anchor-icon-link" anchorid="section424912816516" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002478334564__p194151933191013">当应用需要使用以下开放能力的一种或多种时，发布应用前，需在<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>中将调试应用的指纹更新为发布证书指纹。具体操作请参见<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-cert-fingerprint-0000002278002933" target="_blank">配置公钥指纹</a>。</p>     <ul id="ZH-CN_TOPIC_0000002478334564__ul627618441656">      <li id="li3276244252">Account Kit（华为账号服务）</li>      <li id="li1027612447511">Game Service Kit（游戏服务）</li>      <li id="li9276144413517">Health Service Kit（运动健康服务）</li>      <li id="li6276244157">IAP Kit（应用内支付服务）</li>      <li id="li1276184414518">Map Kit（地图服务）</li>      <li id="li1827613447512">Payment Kit（华为支付服务）</li>      <li id="li82762441353">Wallet Kit（钱包服务）</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="section1992513343374">编译构建.app文件<i class="anchor-icon anchor-icon-link" anchorid="section1992513343374" tips="复制节点链接"></i></h2>          <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p id="ZH-CN_TOPIC_0000002478334564__p66733372332">应用上架时，要求应用包类型为Release类型。</p>      </div></div></div>     <p id="ZH-CN_TOPIC_0000002478334564__p142814154610">打包APP时，DevEco Studio会将工程目录下的所有HAP/HSP模块打包到APP中，因此，如果工程目录中存在不需要打包到APP的HAP/HSP模块，请手动删除后再进行编译构建生成APP。</p>     <ol id="ZH-CN_TOPIC_0000002478334564__ol97017348209">      <li id="li10980839125513"><span>单击<strong>Build &gt; Build Hap(s)/APP(s) &gt; Build APP(s)</strong>，等待编译构建完成已签名的应用包。</span>       <p></p>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p id="ZH-CN_TOPIC_0000002478334564__p2751193193314">当未指定<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-compilation-options-customizing-guide#section192461528194916">构建模式</a>时，构建APP包，默认Release模式；构建HAP/HSP/HAR包，默认Debug模式。</p>         <p id="ZH-CN_TOPIC_0000002478334564__p27774423920">即<strong>Build APP(s)</strong>时，默认构建的APP包为Release类型，符合上架要求，开发者无需进行另外设置。</p>        </div></div></div>       <p></p></li>      <li id="li1561949185816"><span>编译构建完成后，可以在工程目录<strong>build &gt; outputs &gt; default</strong>下，获取带签名的应用包。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002478334564__p165868915263"><span><img originheight="199" originwidth="425" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104944.28598823921864639421385613591441:50001231000000:2800:23DD34FCC9635E9B7EBBA8C64E60ED9D11610335C15E0296863AC00EFBDA0228.png" width="425" height="199"></span></p>       <p id="ZH-CN_TOPIC_0000002478334564__p17515185143815"></p>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section97874500234">上传软件包<i class="anchor-icon anchor-icon-link" anchorid="section97874500234" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002478334564__p113636576216">DevEco Studio 5.0.5.200版本开始，支持在DevEco Studio内上传应用软件包。上传软件包前，请先<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-create-app-0000002247955506" target="_blank">创建应用</a>。</p>    </div>    <div class="tiledSection">     <h3 id="section13441737163516" class="firsth2">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="section13441737163516" tips="复制节点链接"></i></h3>          <ul id="ZH-CN_TOPIC_0000002478334564__ul734995493514">      <li id="li435065418354">该功能仅支持中国境内（香港特别行政区、澳门特别行政区、中国台湾除外）。</li>      <li id="li127720364381">该功能将会把您的应用包传至App Gallery Connect用于测试或上架。为了您的信息安全，请勿上传带有个人敏感信息的数据（如密码、源代码、私钥、调试安装包、业务日志等信息）。</li>      <li id="li152771936193815">仅Build Mode为Release的应用支持上传软件包，且确保软件包已配置Release签名。</li>      <li id="li4110142293712">同时支持通过<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-release-app-upload-pkg-0000002277983368" target="_blank">App Gallery Connect上传软件包</a>。</li>     </ul>    </div>    <div class="tiledSection">     <h3 id="section41896474368">操作步骤<i class="anchor-icon anchor-icon-link" anchorid="section41896474368" tips="复制节点链接"></i></h3>          <ol id="ZH-CN_TOPIC_0000002478334564__ol11131837149">      <li id="li20113203191419"><span>在DevEco Studio菜单栏，点击<strong>Build &gt; Upload Product</strong>，点击<strong>Sign in</strong>登录华为开发者账号。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002478334564__p1020982219143"><span><img height="345.135" originheight="641" originwidth="972" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104944.57664520228968891515981448192163:50001231000000:2800:1CDDDAB89F2E8D9456AFFC1E3A79684BFCEB918EC46A43EC066BE617EDEE62AC.png" title="点击放大" width="523.6875"></span></p>       <p></p></li>      <li id="li6611147143"><span>登录成功后，返回DevEco Studio进入软件包上传界面。确认当前工程的product信息，选择需要上传的软件包类型，点击OK开始上传。</span>       <p></p>       <ul id="ZH-CN_TOPIC_0000002478334564__ul152631557453">        <li id="li2733151463">若当前上传的软件包仅做测试发布，请选择<strong>Generate app package and upload it to AppGallery Connect for test</strong>。</li>        <li id="li9263757058">若软件包需要在全网正式发布，请选择<strong>Generate app package and upload it to AppGallery Connect for test and publish</strong>。</li>       </ul>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <ul id="ZH-CN_TOPIC_0000002478334564__ul16815314228">          <li id="li9529055776">如需上传符号表信息，请勾选<strong>Upload your app's symbols</strong>选项。</li>          <li id="li0682031142211">上传的product可以通过点击DevEco Studio编辑区域右上方<span><img originheight="14" originwidth="15" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104944.01827584745091101623190703262724:50001231000000:2800:B4154A185D60B97917AA540019D413E3ABA20FE4221D974E733A3D03D8245437.png" class="IconPic notEnlarge" width="15" height="14"></span>图标进行查看及切换。</li>          <li id="li13366442182215">可通过app.json5中bundleName/versionName字段修改当前product对应的包名/版本号信息。必须使用当前开发者账号下已在AppGallery注册且真实存在的包名。</li>         </ul>        </div></div></div>       <p id="ZH-CN_TOPIC_0000002478334564__p979574122717"><span><img originheight="608" originwidth="954" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104944.59048595349578712070149961301093:50001231000000:2800:0D30DC1902C2C00EFC6E19FF03F4B507D2377AD28B6D01BD86D329168E674B50.png" width="920" height="586.3312368972746"></span></p>       <p></p></li>      <li id="li1938593432719"><span>上传完成后，出现云测试的结果，点击<strong>View Full result in AppGallery Connect</strong>可进入AGC查看软件包上传记录和检测结果，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-release-app-upload-pkg-0000002277983368" target="_blank">上传软件包</a>。点击<strong>Close</strong>关闭上传页面。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002478334564__p1524615117385"><span><img originheight="604" originwidth="950" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104944.29486636313163911597380766064874:50001231000000:2800:1DB938A49D6DF64324BF4D0F7CC84B6700C7C961829832202AC6DDBC053EEA8E.png" width="920" height="584.9263157894737"></span></p>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section030712412244">发布.app文件到应用市场<i class="anchor-icon anchor-icon-link" anchorid="section030712412244" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002478334564__p1530794112419">将HarmonyOS应用/元服务打包成.app文件后上架到应用市场，发布详细操作指导请参考<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-release-app-0000002271695230" target="_blank">发布HarmonyOS应用</a>或<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-release-atomic-0000002327731065" target="_blank">发布元服务</a>。</p>    </div>   </div></div>