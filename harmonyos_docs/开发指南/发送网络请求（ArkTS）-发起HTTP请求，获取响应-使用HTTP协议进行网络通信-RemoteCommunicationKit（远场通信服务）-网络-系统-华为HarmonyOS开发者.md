<h1 _ngcontent-ajl-c119="" class="doc-title ng-star-inserted" title="发送网络请求（ArkTS）"> 发送网络请求（ArkTS） </h1>

<div _ngcontent-ajl-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section15385135185019">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="section15385135185019" tips="复制节点链接"></i></h2>          <p>发送网络请求能力支持Phone、2in1、Tablet、Wearable设备。并且从5.1.1(19)开始，新增支持TV设备。</p>    </div>    <div class="tiledSection">     <h2 id="section71222326515">如何使用FETCH发起网络请求<i class="anchor-icon anchor-icon-link" anchorid="section71222326515" tips="复制节点链接"></i></h2>          <p>发送一个HTTP请求，也可以设置请求头和请求体等参数，并返回来自服务器的HTTP响应。使用Promise异步回调。常用于获取资源，支持流处理和通过拦截器来处理请求和响应。</p>    </div>    <div class="tiledSection">     <h3 id="section1169017614215" class="firsth2">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section1169017614215" tips="复制节点链接"></i></h3>          <p>具体API说明详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section20139131372817" target="_blank">接口文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.1" valign="top" width="50.22%">          <p>接口名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.2" valign="top" width="49.78%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50.22%">          <p>fetch(request: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section10768169134510" target="_blank">Request</a>): Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section156381815599" target="_blank">Response</a>&gt;</p></td>         <td class="cellrowborder" valign="top" width="49.78%">          <p>发送一个HTTP请求，并返回来自服务器的HTTP响应。使用Promise异步回调。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section1078135402116">使用示例<i class="anchor-icon anchor-icon-link" anchorid="section1078135402116" tips="复制节点链接"></i></h3>          <ol>      <li><span>导入模块。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { rcp } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.RemoteCommunicationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li></ol></pre></div></div>       <p></p></li>      <li><span>创建Request对象。"https://www.example.com"请根据实际情况替换为想要请求的URL地址。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> kHttpServerAddress = <span class="hljs-string">"https://www.example.com/fetch"</span>;</li><li><span class="hljs-keyword">const</span> request = <span class="hljs-keyword">new</span> rcp.<span class="hljs-title class_">Request</span>(kHttpServerAddress, <span class="hljs-string">'GET'</span>);</li></ol></pre></div></div>       <p></p></li>      <li><span>创建会话。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> session = rcp.<span class="hljs-title function_">createSession</span>();</li></ol></pre></div></div>       <p></p></li>      <li><span>发起请求，并处理返回结果。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li>session.<span class="hljs-title function_">fetch</span>(request).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">rep: rcp.Response</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Response succeeded: <span class="hljs-subst">${rep}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 错误处理，通过catch块，捕获error，并对error进行处理，本示例中会将错误信息展现到打印台上。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Response err: Code is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>});</li></ol></pre></div></div>       <p></p></li>     </ol>     <p></p>    </div>    <div class="tiledSection">     <h2 id="section7295910101214">如何发起GET网络请求<i class="anchor-icon anchor-icon-link" anchorid="section7295910101214" tips="复制节点链接"></i></h2>          <p>HTTP GET请求是常用的通信方式之一。为了有效地实现这一目标，RemoteCommunicationKit采用了Promise和异步回调的组合策略，不仅可以高效地从服务器获取数据，还可以提高代码的可读性和可维护性。</p>    </div>    <div class="tiledSection">     <h3 id="section14118115191811" class="firsth2">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section14118115191811" tips="复制节点链接"></i></h3>          <p>具体API说明详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section176881642192516" target="_blank">接口文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.3.1.1" valign="top" width="50.22%">          <p>接口名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.3.1.2" valign="top" width="49.78%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50.22%">          <p>get(url: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section320653742718" target="_blank">URLOrString</a>, destination?: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section9250173916506" target="_blank">ResponseBodyDestination</a>): Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section156381815599" target="_blank">Response</a>&gt;</p></td>         <td class="cellrowborder" valign="top" width="49.78%">          <p>发送一个带有默认HTTP参数的HTTP GET请求，参数为开发者需要请求的地址及响应的目标，并返回来自服务器的HTTP响应。使用Promise异步回调。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section98065432112">使用示例<i class="anchor-icon anchor-icon-link" anchorid="section98065432112" tips="复制节点链接"></i></h3>          <ol>      <li><span>导入模块。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { rcp } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.RemoteCommunicationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li></ol></pre></div></div>       <p></p></li>      <li><span>创建会话，会话发起get请求。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 1、定义请求URL，此处只给出示例，还请根据实际情况将其替换为需要请求的URL</span></li><li><span class="hljs-keyword">const</span> getURL = <span class="hljs-string">"http://www.example.com/get"</span>;</li><li>
</li><li><span class="hljs-comment">// 2、创建session</span></li><li><span class="hljs-keyword">const</span> session = rcp.<span class="hljs-title function_">createSession</span>();</li><li>
</li><li><span class="hljs-comment">// 3、使用session.get发起请求，以getURL为入参，使用Promise进行异步回调。</span></li><li>session.<span class="hljs-title function_">get</span>(getURL).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Response succeeded: <span class="hljs-subst">${response}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 4、错误处理，通过catch块，捕获error，并对error进行处理，本示例中会将错误信息展现到打印台上。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Response err: Code is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>});</li></ol></pre></div></div>       <p></p></li>     </ol>     <p></p>    </div>    <div class="tiledSection">     <h2 id="section1241682120419">如何发起POST网络请求<i class="anchor-icon anchor-icon-link" anchorid="section1241682120419" tips="复制节点链接"></i></h2>          <p>发送一个带有默认HTTP参数的HTTP POST请求，并返回来自服务器的HTTP响应。使用Promise异步回调。常用于向服务器提交数据。与GET请求不同，POST请求将参数包含在请求主体中，适用于创建新资源、提交表单数据或执行某些操作。</p>    </div>    <div class="tiledSection">     <h3 id="section17276102115510" class="firsth2">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section17276102115510" tips="复制节点链接"></i></h3>          <p>具体API说明详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section12392443193017" target="_blank">接口文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.3.1.3.1.1" valign="top" width="50.22%">          <p>接口名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.3.1.3.1.2" valign="top" width="49.78%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50.22%">          <p>post(url: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section320653742718" target="_blank">URLOrString</a>, content?: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section18971142565016" target="_blank">RequestContent</a>, destination?: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section9250173916506" target="_blank">ResponseBodyDestination</a>): Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section156381815599" target="_blank">Response</a>&gt;</p></td>         <td class="cellrowborder" valign="top" width="49.78%">          <p>发送一个带有默认HTTP参数的HTTP POST请求，并返回来自服务器的HTTP响应。使用Promise异步回调。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section14831954172119">使用示例<i class="anchor-icon anchor-icon-link" anchorid="section14831954172119" tips="复制节点链接"></i></h3>          <ol>      <li><span>导入模块。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { rcp } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.RemoteCommunicationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li></ol></pre></div></div>       <p></p></li>      <li><span>创建会话，使用会话发起post请求。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 定义URL此处给出示例，请根据实际情况选择正确地址</span></li><li><span class="hljs-keyword">const</span> postURL = <span class="hljs-string">"https://www.example.com"</span>;</li><li><span class="hljs-comment">// 定义content，请根据实际情况选择</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">postContent</span>: rcp.<span class="hljs-property">RequestContent</span> = {</li><li>  <span class="hljs-attr">fields</span>: {</li><li>    <span class="hljs-string">'key1'</span>: <span class="hljs-string">'value1'</span>,</li><li>    <span class="hljs-string">'key2'</span>: <span class="hljs-string">'value2'</span>,</li><li>    <span class="hljs-string">'key3'</span>: <span class="hljs-string">'value3'</span></li><li>  }</li><li>}</li><li><span class="hljs-comment">// 创建session</span></li><li><span class="hljs-keyword">const</span> session = rcp.<span class="hljs-title function_">createSession</span>();</li><li><span class="hljs-comment">// 使用post发起请求，使用Promise进行异步回调；其中content以及destination为可选参数，可根据实际情况选择</span></li><li>session.<span class="hljs-title function_">post</span>(postURL, postContent)</li><li>  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Response succeeded: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response.headers)}</span>`</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Response succeeded: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response.statusCode)}</span>`</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Response succeeded: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(postContent)}</span>`</span>);</li><li>  })</li><li>  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Response err: Code is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>  })</li></ol></pre></div></div>       <p></p></li>     </ol>     <p></p>    </div>    <div class="tiledSection">     <h2 id="section1276455731715">如何发起PUT网络请求<i class="anchor-icon anchor-icon-link" anchorid="section1276455731715" tips="复制节点链接"></i></h2>          <p>在远场通信服务框架中，HTTP PUT请求用于更新服务器上的特定资源。作为幂等操作，它确保每次请求仅影响目标资源状态。通过Promise异步编程模型，可以有效地管理和控制请求执行流程，结构化处理异步操作和反馈。</p>    </div>    <div class="tiledSection">     <h3 id="section182672521180" class="firsth2">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section182672521180" tips="复制节点链接"></i></h3>          <p>具体API说明详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section20797124133110" target="_blank">接口文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.3.1.3.1.1" valign="top" width="50.22%">          <p>接口名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.3.1.3.1.2" valign="top" width="49.78%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50.22%">          <p>put(url: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section320653742718" target="_blank">URLOrString</a>, content?: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section18971142565016" target="_blank">RequestContent</a>, destination?: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section9250173916506" target="_blank">ResponseBodyDestination</a>): Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section156381815599" target="_blank">Response</a>&gt;</p></td>         <td class="cellrowborder" valign="top" width="49.78%">          <p>发送一个带有默认HTTP参数的HTTP PUT请求，并返回来自服务器的HTTP响应。使用Promise异步回调。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section384145416219">使用示例<i class="anchor-icon anchor-icon-link" anchorid="section384145416219" tips="复制节点链接"></i></h3>          <ol>      <li><span>导入模块。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { rcp } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.RemoteCommunicationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li></ol></pre></div></div>       <p></p></li>      <li><span>创建会话，会话发起put请求。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建会话</span></li><li><span class="hljs-keyword">const</span> session = rcp.<span class="hljs-title function_">createSession</span>();</li><li>
</li><li><span class="hljs-comment">// 定义content，请根据实际情况选择</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">postContent</span>: rcp.<span class="hljs-property">RequestContent</span> = {</li><li>  <span class="hljs-attr">fields</span>: {</li><li>    <span class="hljs-string">'key1'</span>: <span class="hljs-string">'value1'</span>,</li><li>    <span class="hljs-string">'key2'</span>: <span class="hljs-string">'value2'</span>,</li><li>    <span class="hljs-string">'key3'</span>: <span class="hljs-string">'value3'</span></li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 会话发起PUT请求，"http://www.example.com"请根据实际情况替换为想要请求的URL地址。</span></li><li>session.<span class="hljs-title function_">put</span>(<span class="hljs-string">"http://www.example.com/put"</span>, postContent).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 对响应的处理，此处为示例，只做打印处理</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Response succeeded: <span class="hljs-subst">${response}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求错误处理</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Response err: Code is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>});</li></ol></pre></div></div>       <p></p></li>     </ol>     <p></p>    </div>    <div class="tiledSection">     <h2 id="section161201359122110">如何发起HEAD网络请求<i class="anchor-icon anchor-icon-link" anchorid="section161201359122110" tips="复制节点链接"></i></h2>          <p>HTTP HEAD请求可高效访问服务器资源头信息。它与GET请求类似，但主要的区别在于，HEAD请求只返回响应头，而不返回实体内容，这使得其在获取资源的元信息，如文件大小、修改日期等，以及检查资源是否已更改等方面更加有效。</p>    </div>    <div class="tiledSection">     <h3 id="section1675710011143" class="firsth2">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section1675710011143" tips="复制节点链接"></i></h3>          <p>具体API说明详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section102891334203115" target="_blank">接口文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.3.1.3.1.1" valign="top" width="50.22%">          <p>接口名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.3.1.3.1.2" valign="top" width="49.78%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50.22%">          <p>head(url: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section320653742718" target="_blank">URLOrString</a>): Promise<span style="color: rgb(128,128,128);">&lt;</span><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section156381815599" target="_blank">Response</a><span style="color: rgb(128,128,128);">&gt;</span></p></td>         <td class="cellrowborder" valign="top" width="49.78%">          <p>发送一个带有默认HTTP参数的HTTP HEAD请求，并返回来自服务器的HTTP响应。使用Promise异步回调。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section486135415214">使用示例<i class="anchor-icon anchor-icon-link" anchorid="section486135415214" tips="复制节点链接"></i></h3>          <ol>      <li><span>导入模块。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { rcp } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.RemoteCommunicationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li></ol></pre></div></div>       <p></p></li>      <li><span>创建会话，会话发起head请求。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 1、创建会话</span></li><li><span class="hljs-keyword">const</span> session = rcp.<span class="hljs-title function_">createSession</span>();</li><li>
</li><li><span class="hljs-comment">// 2、会话发起HEAD请求，"http://www.example.com"请根据实际情况替换为想要请求的URL地址。</span></li><li>session.<span class="hljs-title function_">head</span>(<span class="hljs-string">"http://www.example.com/head"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 3、对响应的处理，此处为示例，只做打印处理</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Response succeeded: <span class="hljs-subst">${response}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 4、请求错误处理</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Response err: Code is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>});</li></ol></pre></div></div>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section3161646238">如何发起DELETE网络请求<i class="anchor-icon anchor-icon-link" anchorid="section3161646238" tips="复制节点链接"></i></h2>          <p>在远场通信服务的框架中，Remote Communication Kit采用了一种结合发起 HTTP DELETE 请求与 Promise 异步处理的方法。具体操作如下：通过向预定义的 URL 发送一个包含默认 HTTP 参数的 HTTP DELETE 请求，即可实现对目标 URL 上相关资源的有效删除。这种机制不仅简化了请求的发送过程，还增强了异步处理的效率，确保了资源管理的灵活性和响应速度。</p>    </div>    <div class="tiledSection">     <h3 id="section38117151003" class="firsth2">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section38117151003" tips="复制节点链接"></i></h3>          <p>具体API说明详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section01731783324" target="_blank">接口文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.3.1.3.1.1" valign="top" width="50.22%">          <p>接口名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.3.1.3.1.2" valign="top" width="49.78%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50.22%">          <p>delete(url: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section320653742718" target="_blank">URLOrString</a>): Promise<span style="color: rgb(128,128,128);">&lt;</span><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section156381815599" target="_blank">Response</a><span style="color: rgb(128,128,128);">&gt;</span></p></td>         <td class="cellrowborder" valign="top" width="49.78%">          <p>发送一个带有默认HTTP参数的HTTP DELETE请求，并返回来自服务器的HTTP响应。使用Promise异步回调。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section1087454202115">使用示例<i class="anchor-icon anchor-icon-link" anchorid="section1087454202115" tips="复制节点链接"></i></h3>          <ol>      <li><span>导入模块。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { rcp } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.RemoteCommunicationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li></ol></pre></div></div>       <p></p></li>      <li><span>创建会话，会话发起delete请求。"http://www.example.com"请根据实际情况替换为想要请求的URL地址。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> session = rcp.<span class="hljs-title function_">createSession</span>();</li><li>session.<span class="hljs-title function_">delete</span>(<span class="hljs-string">"http://www.example.com/delete"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Response succeeded: <span class="hljs-subst">${response}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Response err: Code is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>});</li></ol></pre></div></div>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section18691925101620">如何使用Form发送HTTP简单的表格数据<i class="anchor-icon anchor-icon-link" anchorid="section18691925101620" tips="复制节点链接"></i></h2>          <p>在使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section18971142565016" target="_blank">RequestContent</a>指定HTTP请求中要发送的数据时，可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section1188301010515" target="_blank">Form</a>来发送简单的HTTP表单数据。</p>     <p>从6.0.1(21)开始，Form表单支持使用keys来指定表单中key的发送顺序。</p>    </div>    <div class="tiledSection">     <h3 id="section950313375261" class="firsth2">使用示例<i class="anchor-icon anchor-icon-link" anchorid="section950313375261" tips="复制节点链接"></i></h3>          <ol>      <li><span>导入模块。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { rcp } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.RemoteCommunicationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li></ol></pre></div></div>       <p></p></li>      <li><span>创建RequestContent。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建Form表单数据。</span></li><li><span class="hljs-keyword">const</span> simpleForm = <span class="hljs-keyword">new</span> rcp.<span class="hljs-title class_">Form</span>({</li><li>  <span class="hljs-string">"key1"</span>: <span class="hljs-string">"value1"</span>,</li><li>  <span class="hljs-string">"key2"</span>: <span class="hljs-string">"value2"</span>,</li><li>});</li><li><span class="hljs-comment">// 指定表单中key的发送顺序。指定后，将按照keys列表中的顺序发送（不在列表中的key将不被发送）；若不指定，则默认按各个key的hash顺序发送。</span></li><li>simpleForm.<span class="hljs-property">keys</span> = [<span class="hljs-string">"key2"</span>, <span class="hljs-string">"key1"</span>];</li><li><span class="hljs-comment">// 创建request请求。请将URL地址替换为实际访问的地址。</span></li><li><span class="hljs-keyword">let</span> req = <span class="hljs-keyword">new</span> rcp.<span class="hljs-title class_">Request</span>(<span class="hljs-string">"http://example.com"</span>);</li><li>req.<span class="hljs-property">content</span> = simpleForm;</li></ol></pre></div></div>       <p></p></li>      <li><span>创建会话，并发起fetch请求。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 创建会话。</span></li><li>  <span class="hljs-keyword">const</span> session = rcp.<span class="hljs-title function_">createSession</span>();</li><li>  <span class="hljs-comment">// 会话发起请求。</span></li><li>  session.<span class="hljs-title function_">fetch</span>(req).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">resp: rcp.Response</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Response succeeded: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(resp)}</span>`</span>);</li><li>    session.<span class="hljs-title function_">close</span>();</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-comment">// 请求错误处理。</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Response err: Code is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>    session.<span class="hljs-title function_">close</span>();</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-comment">// 创建会话错误处理。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createSession err: Code is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section1241254194010">如何使用MultipartForm发送HTTP多部分表格数据<i class="anchor-icon anchor-icon-link" anchorid="section1241254194010" tips="复制节点链接"></i></h2>          <p>在使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section18971142565016" target="_blank">RequestContent</a>指定HTTP请求中要发送的数据时，可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp#section1420174317517" target="_blank">MultipartForm</a>来发送HTTP多部分表格数据。</p>     <p>从6.0.1(21)开始，MultipartForm表单支持使用keys来指定表单中key的发送顺序。</p>    </div>    <div class="tiledSection">     <h3 id="section1495424019" class="firsth2">使用示例<i class="anchor-icon anchor-icon-link" anchorid="section1495424019" tips="复制节点链接"></i></h3>          <ol>      <li><span>导入模块。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { rcp } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.RemoteCommunicationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li></ol></pre></div></div>       <p></p></li>      <li><span>创建RequestContent。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建MultipartForm多部分表单数据。</span></li><li><span class="hljs-keyword">const</span> multiForm = <span class="hljs-keyword">new</span> rcp.<span class="hljs-title class_">MultipartForm</span>({</li><li>  <span class="hljs-string">"key1"</span>: <span class="hljs-string">"value1"</span>,</li><li>  <span class="hljs-string">"key2"</span>: <span class="hljs-string">"value2"</span>,</li><li>  <span class="hljs-string">"key3"</span>: <span class="hljs-string">"value3"</span>,</li><li>});</li><li><span class="hljs-comment">// 定义多部分表单中的键的顺序。指定后，将按keys列表中的顺序发送（不在列表中的key不会被发送）；如果不指定，则默认按照各个key的hash顺序发送。</span></li><li>multiForm.<span class="hljs-property">keys</span> = [<span class="hljs-string">"key3"</span>, <span class="hljs-string">"key1"</span>, <span class="hljs-string">"key2"</span>];</li><li><span class="hljs-comment">// 创建request请求。请将URL地址替换为实际访问的地址。</span></li><li><span class="hljs-keyword">let</span> req = <span class="hljs-keyword">new</span> rcp.<span class="hljs-title class_">Request</span>(<span class="hljs-string">"http://example.com"</span>);</li><li>req.<span class="hljs-property">content</span> = multiForm;</li></ol></pre></div></div>       <p></p></li>      <li><span>创建会话，并发起fetch请求。</span>       <p></p>       <div _ngcontent-ajl-c106="" class="highlight-div"><div _ngcontent-ajl-c106="" class="highlight-div-header"><div _ngcontent-ajl-c106="" class="highlight-div-header-left"><div _ngcontent-ajl-c106="" class="handle-button expand-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajl-c106="" class="highlight-div-header-right"><div _ngcontent-ajl-c106="" class="handle-button ai-button"></div><div _ngcontent-ajl-c106="" class="handle-button line-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajl-c106="" class="handle-button theme-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajl-c106="" class="handle-button copy-button"><div _ngcontent-ajl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 创建会话。</span></li><li>  <span class="hljs-keyword">const</span> session = rcp.<span class="hljs-title function_">createSession</span>();</li><li>  <span class="hljs-comment">// 会话发起请求。</span></li><li>  session.<span class="hljs-title function_">fetch</span>(req).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">resp: rcp.Response</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Response succeeded: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(resp)}</span>`</span>);</li><li>    session.<span class="hljs-title function_">close</span>();</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-comment">// 请求错误处理。</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Response err: Code is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>    session.<span class="hljs-title function_">close</span>();</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-comment">// 创建会话错误处理。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createSession err: Code is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>       <p></p></li>     </ol>    </div>   </div>   <div></div></div>