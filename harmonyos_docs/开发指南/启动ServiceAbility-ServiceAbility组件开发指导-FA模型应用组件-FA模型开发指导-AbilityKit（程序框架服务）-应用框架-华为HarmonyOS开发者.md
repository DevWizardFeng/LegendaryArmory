<h1 _ngcontent-sey-c119="" class="doc-title ng-star-inserted" title="启动ServiceAbility"> 启动ServiceAbility </h1>

<div _ngcontent-sey-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>ServiceAbility的启动与其他Ability并无区别，应用开发者可以在PageAbility中通过featureAbility的startAbility接口拉起ServiceAbility，在ServiceAbility中通过particleAbility的startAbility接口拉起ServiceAbility。ServiceAbility的启动规则详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/component-startup-rules">组件启动规则</a>章节。</p>    <p>如下示例展示了在PageAbility中通过startAbility启动bundleName为"com.example.myapplication"，abilityName为"ServiceAbility"的ServiceAbility的方法。启动<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ability-terminology#fa模型">FA模型</a>的ServiceAbility时，需要在abilityName前拼接bundleName字符串。</p>    <div _ngcontent-sey-c106="" class="highlight-div"><div _ngcontent-sey-c106="" class="highlight-div-header"><div _ngcontent-sey-c106="" class="highlight-div-header-left"><div _ngcontent-sey-c106="" class="handle-button expand-button"><div _ngcontent-sey-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sey-c106="" class="highlight-div-header-right"><div _ngcontent-sey-c106="" class="handle-button ai-button"></div><div _ngcontent-sey-c106="" class="handle-button line-button"><div _ngcontent-sey-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sey-c106="" class="handle-button theme-button"><div _ngcontent-sey-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sey-c106="" class="handle-button copy-button"><div _ngcontent-sey-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sey-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">Want</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.Want'</span>;</li><li><span class="hljs-keyword">import</span> promptAction <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.promptAction'</span>;</li><li><span class="hljs-keyword">import</span> hilog <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.hilog'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'PageServiceAbility'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">domain</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0xFF00</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PageServiceAbility</span> {</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">startServiceAbility</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(domain, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'Begin to start ability'</span>);</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span> = {</li><li>        <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.samples.famodelabilitydevelop'</span>,</li><li>        <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'com.samples.famodelabilitydevelop.ServiceAbility'</span></li><li>      };</li><li>      <span class="hljs-keyword">await</span> featureAbility.<span class="hljs-title function_">startAbility</span>({ want });</li><li>      promptAction.<span class="hljs-title function_">showToast</span>({</li><li>        <span class="hljs-attr">message</span>: <span class="hljs-string">'start_service_success_toast'</span></li><li>      });</li><li>      hilog.<span class="hljs-title function_">info</span>(domain, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`Start ability succeed`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      hilog.<span class="hljs-title function_">error</span>(domain, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'Start ability failed with '</span> + error);</li><li>    }</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre></div></div>    <p>执行上述代码后，Ability将通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#startability" target="_blank">startAbility()</a>方法来启动ServiceAbility。</p>    <ul>     <li>      <p>如果ServiceAbility尚未运行，则系统会先调用onStart()来初始化ServiceAbility，再回调Service的onCommand()方法来启动ServiceAbility。</p></li>     <li>      <p>如果ServiceAbility正在运行，则系统会直接回调ServiceAbility的onCommand()方法来启动ServiceAbility。</p></li>    </ul>   </div>   <div></div></div>