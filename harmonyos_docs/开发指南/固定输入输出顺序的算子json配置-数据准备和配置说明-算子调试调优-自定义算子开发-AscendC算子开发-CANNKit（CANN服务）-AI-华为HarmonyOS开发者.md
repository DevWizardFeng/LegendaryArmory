<h1 _ngcontent-srg-c119="" class="doc-title ng-star-inserted" title="固定输入/输出顺序的算子json配置"> 固定输入/输出顺序的算子json配置 </h1>

<div _ngcontent-srg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section1166mcpsimp">json配置说明<i class="anchor-icon anchor-icon-link" anchorid="section1166mcpsimp" tips="复制节点链接"></i></h2><p>固定输入/输出顺序的算子json配置文件中“inputs”和“outputs”参数按照“<strong>输入/输出规则排布</strong>”，所以要求Kernel入口函数的参数也是按照该规则排布。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li><strong>输入/输出规则排布</strong>（所有输出参数排布在输入参数之后）：例如Kernel入口函数的参数排布为<div _ngcontent-srg-c106="" class="highlight-div"><div _ngcontent-srg-c106="" class="highlight-div-header"><div _ngcontent-srg-c106="" class="highlight-div-header-left"><div _ngcontent-srg-c106="" class="handle-button expand-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-srg-c106="" class="highlight-div-header-right"><div _ngcontent-srg-c106="" class="handle-button ai-button"></div><div _ngcontent-srg-c106="" class="handle-button line-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-srg-c106="" class="handle-button theme-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-srg-c106="" class="handle-button copy-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-srg-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">__global__ __aicore__ <span class="hljs-type">void</span> <span class="hljs-title">add_custom</span><span class="hljs-params">(GM_ADDR input1, GM_ADDR input2,</span></span><strong><span class="hljs-function"><span class="hljs-params"> GM_ADDR output</span></span></strong><span class="hljs-function"><span class="hljs-params">)</span></span></li></ol></pre></div></div> </li></ul> <ul><li><strong>标准自定义算子工程场景</strong>的开发人员一般按此方式配置算子json文件。</li></ul> </div></div></div> <p>以AddCustom算子为例，对应的json配置示例如下，参数说明参见表1。</p> <div _ngcontent-srg-c106="" class="highlight-div"><div _ngcontent-srg-c106="" class="highlight-div-header"><div _ngcontent-srg-c106="" class="highlight-div-header-left"><div _ngcontent-srg-c106="" class="handle-button expand-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-srg-c106="" class="highlight-div-header-right"><div _ngcontent-srg-c106="" class="handle-button ai-button"></div><div _ngcontent-srg-c106="" class="handle-button line-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-srg-c106="" class="handle-button theme-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-srg-c106="" class="handle-button copy-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-srg-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>{ </li><li>    "op_type": "AddCustom", </li><li>    "data_script": "./add_golden.py", </li><li>    "gen_data": true, </li><li>    "<strong>inputs</strong>": [ </li><li>        { </li><li>            <strong>"name": "x",</strong> </li><li>            "dtype": "int32", </li><li>            "format": "ND", </li><li>            "ignore": false, </li><li>            "shape": [32], </li><li>            "param_type": "required", </li><li>           <strong> "data_file": "x.bin"</strong> </li><li>        }, </li><li>        { </li><li>            <strong>"name": "y",</strong> </li><li>            "dtype": "int32", </li><li>            "format": "ND", </li><li>            "ignore": false, </li><li>            "shape": [32], </li><li>            "param_type": "required", </li><li>            <strong>"data_file": "y.bin"</strong> </li><li>        } </li><li>    ], </li><li>    <strong>"outputs</strong>": [ </li><li>        { </li><li>            <strong>"name": "z"</strong>, </li><li>            "dtype": "int32", </li><li>            "format": "ND", </li><li>            "ignore": false, </li><li>            "shape": [32], </li><li>            "param_type": "required", </li><li>            <strong>"data_file": "golden_z.bin"</strong> </li><li>        } </li><li>    ], </li><li>    "<strong>attrs</strong>": [ </li><li>        { </li><li>            "name": "mask", </li><li>            "dtype": "list_int", </li><li>            "value": [0,0] </li><li>        }, </li><li>        { </li><li>            "name": "repeatTimes", </li><li>            "dtype": "int", </li><li>            "value": 1 </li><li>        }, </li><li>        // ...</li><li>    ] </li><li>}</li></ol></pre></div></div>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表1 </b>固定输入/输出顺序的算子json全量参数说明</caption><thead><tr><th align="left" class="cellrowborder" colspan="2" id="mcps1.3.1.6.2.7.1.1" valign="top"><p>配置项</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.6.2.7.1.2" valign="top"><p>数据类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.6.2.7.1.3" valign="top"><p>参数说明</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.6.2.7.1.4" valign="top"><p>取值说明</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.6.2.7.1.5" valign="top"><p>是否必选</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" colspan="2" valign="top"><p>op_type</p> </td> <td class="cellrowborder" valign="top"><p>string</p> </td> <td class="cellrowborder" valign="top"><p>算子名。</p> </td> <td class="cellrowborder" valign="top"><p>与待调测算子严格匹配。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" colspan="2" valign="top"><p>data_script</p> </td> <td class="cellrowborder" valign="top"><p>string</p> </td> <td class="cellrowborder" valign="top"><p>数据生成脚本（python），用于生成输入和标杆数据。</p> </td> <td class="cellrowborder" valign="top"><p>根据实际情况设置，如"/home/flash_attention_golden.py"。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>若无数据生成脚本，填写空字符或null。</p> </div></div></div> </td> <td class="cellrowborder" valign="top"><p>否</p> </td> </tr> <tr><td class="cellrowborder" colspan="2" valign="top"><p>gen_data</p> </td> <td class="cellrowborder" valign="top"><p>bool</p> </td> <td class="cellrowborder" valign="top"><p>是否根据data_script生成输入和标杆数据。</p> </td> <td class="cellrowborder" valign="top"><ul><li>true：采用脚本生成数据。</li><li>false：不采用脚本生成数据，默认false。</li></ul> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" rowspan="8" valign="top" width="8%"><p>inputs /</p> <p>outputs</p> </td> <td class="cellrowborder" valign="top" width="10%"><p>name</p> </td> <td class="cellrowborder" valign="top" width="11%"><p>string</p> </td> <td class="cellrowborder" valign="top" width="24%"><p>核函数输入/输出的参数名。</p> </td> <td class="cellrowborder" valign="top" width="39%"><p>根据实际情况设置（若通过算子二进制模板文件生成，不建议修改）。</p> </td> <td class="cellrowborder" valign="top" width="8%"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>dtype</p> </td> <td class="cellrowborder" valign="top"><p>string</p> </td> <td class="cellrowborder" valign="top"><p>输入/输出的数据类型。</p> </td> <td class="cellrowborder" valign="top"><p>目前支持bool、int、int8、int16、int32、int64、uint8、uint16、uint32、uint64、float16、float32、float64、bfloat16。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>算子json配置时dtype仅允许输入一种数据类型，不支持多种数据类型。</p> </div></div></div> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>format</p> </td> <td class="cellrowborder" valign="top"><p>string</p> </td> <td class="cellrowborder" valign="top"><p>输入/输出的存储格式。</p> </td> <td class="cellrowborder" valign="top"><p>支持的数据格式有ND、NZ。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>shape</p> </td> <td class="cellrowborder" valign="top"><p>list</p> </td> <td class="cellrowborder" valign="top"><p>输入/输出的shape。</p> </td> <td class="cellrowborder" valign="top"><p>根据算子实际shape填写，例如[24, 20, 144, 8]。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当输入为Scalar时，shape填null。</p> </div></div></div> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>ignore</p> </td> <td class="cellrowborder" valign="top"><p>bool</p> </td> <td class="cellrowborder" valign="top"><p>是否忽略该输入/输出。</p> </td> <td class="cellrowborder" valign="top"><ul><li>true：表示输入/输出可忽略，不分配Global Memory内存。</li><li>false：表示输入/输出不可忽略，默认false。</li></ul> </td> <td class="cellrowborder" valign="top"><p>否</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>param_type</p> </td> <td class="cellrowborder" valign="top"><p>string</p> </td> <td class="cellrowborder" valign="top"><p>是否必选该输入/输出。</p> </td> <td class="cellrowborder" valign="top"><ul><li>required：必选。</li><li>optional：可选。<div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当param_type为optional时</p> <ul><li>shape为null或shape为空列表或datafile为null或datafile为空字符串，视为没有该输入。</li><li>若配置了data_value，data_value为空，视为没有该输入</li><li>仅cpu与仿真调试支持optional输入</li></ul> </div></div></div> </li></ul> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>data_file</p> </td> <td class="cellrowborder" valign="top"><p>string</p> </td> <td class="cellrowborder" valign="top"><ul><li>inputs场景下，指输入数据bin文件。</li><li>outputs场景下，指标杆数据bin文件。</li></ul> </td> <td class="cellrowborder" valign="top"><p>根据实际情况设置数据bin文件路径，必须为绝对路径，例如"/home/data.bin"。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>当data_file设为空字符或null，表示不对运行输出作精度比对。</li><li>当输入为Scalar时，data_file字段删除，只需配置data_value。</li></ul> </div></div></div> </td> <td class="cellrowborder" valign="top"><p>否</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>data_value</p> </td> <td class="cellrowborder" valign="top"><p>由dtype确定</p> </td> <td class="cellrowborder" valign="top"><p>输入的Scalar值。</p> </td> <td class="cellrowborder" valign="top"><p>根据实际情况填写。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>只有input节点才可以配置该参数。</li><li>data_value与data_file互斥。若配置data_value则data_file必须删除，且shape必须为null，表示本节点是Scalar输入。</li></ul> </div></div></div> </td> <td class="cellrowborder" valign="top"><p>否</p> </td> </tr> <tr><td class="cellrowborder" rowspan="3" valign="top" width="8%"><p>attrs</p> </td> <td class="cellrowborder" valign="top" width="10%"><p>name</p> </td> <td class="cellrowborder" valign="top" width="11%"><p>string</p> </td> <td class="cellrowborder" valign="top" width="24%"><p>算子的属性名，是区分每个算子的唯一标识，不可重复。</p> </td> <td class="cellrowborder" rowspan="3" valign="top" width="39%"><p>部分场景允许没有attrs，请根据实际情况填写。</p> </td> <td class="cellrowborder" valign="top" width="8%"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>dtype</p> </td> <td class="cellrowborder" valign="top"><p>string</p> </td> <td class="cellrowborder" valign="top"><p>数据类型。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>value</p> </td> <td class="cellrowborder" valign="top"><p>可变</p> </td> <td class="cellrowborder" valign="top"><p>属性值。</p> </td> <td class="cellrowborder" valign="top"><p>是</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1388mcpsimp">特殊格式输入<i class="anchor-icon anchor-icon-link" anchorid="section1388mcpsimp" tips="复制节点链接"></i></h2><ul><li><strong>场景1：支持Scalar格式的输入。</strong><p>当输入为Scalar格式，json中“inputs”配置项中删除data_file，shape配为null，data_value配为指定的标量值。</p> <div _ngcontent-srg-c106="" class="highlight-div"><div _ngcontent-srg-c106="" class="highlight-div-header"><div _ngcontent-srg-c106="" class="highlight-div-header-left"><div _ngcontent-srg-c106="" class="handle-button expand-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-srg-c106="" class="highlight-div-header-right"><div _ngcontent-srg-c106="" class="handle-button ai-button"></div><div _ngcontent-srg-c106="" class="handle-button line-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-srg-c106="" class="handle-button theme-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-srg-c106="" class="handle-button copy-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-srg-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span> </li><li>   <span class="hljs-attr">"op_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xxxx"</span><span class="hljs-punctuation">,</span> </li><li>   <span class="hljs-attr">"data_script"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> </li><li>   <span class="hljs-attr">"gen_data"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span> </li><li>   <span class="hljs-attr">"</span><strong><span class="hljs-attr">inputs</span></strong><span class="hljs-attr">"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> </li><li>       <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tileNumIn"</span><span class="hljs-punctuation">,</span> </li><li>       <span class="hljs-attr">"dtype"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uint32"</span><span class="hljs-punctuation">,</span> </li><li>       <span class="hljs-attr">"param_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"required"</span><span class="hljs-punctuation">,</span> </li><li>        <span class="hljs-comment">// ...</span></li><li>      <strong> <span class="hljs-attr">"shape"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span></strong></li><li> <strong>      <span class="hljs-attr">"data_value"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8</span></strong></li><li>     <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span> </li><li>     <span class="hljs-comment">// ... </span></li><li> <span class="hljs-punctuation">}</span></li></ol></pre></div></div> </li><li><strong>场景2：支持TensorList格式的输入。</strong><p>当输入为TensorList格式，该参数需要用[ ]表示，List中的每一项表示一个Tensor，示例如下。</p> <div _ngcontent-srg-c106="" class="highlight-div"><div _ngcontent-srg-c106="" class="highlight-div-header"><div _ngcontent-srg-c106="" class="highlight-div-header-left"><div _ngcontent-srg-c106="" class="handle-button expand-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-srg-c106="" class="highlight-div-header-right"><div _ngcontent-srg-c106="" class="handle-button ai-button"></div><div _ngcontent-srg-c106="" class="handle-button line-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-srg-c106="" class="handle-button theme-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-srg-c106="" class="handle-button copy-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-srg-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span> </li><li>   <span class="hljs-attr">"op_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xxxx"</span><span class="hljs-punctuation">,</span> </li><li>   <span class="hljs-attr">"data_script"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> </li><li>   <span class="hljs-attr">"gen_data"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span> </li><li>   <span class="hljs-attr">"inputs"</span><span class="hljs-punctuation">:</span>   </li><li>       <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span></li><li>           <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"key0"</span><span class="hljs-punctuation">,</span></li><li>           <span class="hljs-attr">"dtype"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"float16"</span><span class="hljs-punctuation">,</span></li><li>           <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ND"</span><span class="hljs-punctuation">,</span></li><li>           <span class="hljs-attr">"ignore"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span></li><li>           <span class="hljs-attr">"shape"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">5</span><span class="hljs-punctuation">,</span><span class="hljs-number">8192</span><span class="hljs-punctuation">,</span><span class="hljs-number">128</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>           <span class="hljs-attr">"param_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"required"</span><span class="hljs-punctuation">,</span></li><li>           <span class="hljs-attr">"data_file"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/home/data/input/k_0.bin"</span></li><li>       <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">{</span></li><li>           <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"key1"</span><span class="hljs-punctuation">,</span></li><li>           <span class="hljs-attr">"dtype"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"float16"</span><span class="hljs-punctuation">,</span></li><li>           <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ND"</span><span class="hljs-punctuation">,</span></li><li>           <span class="hljs-attr">"ignore"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span></li><li>           <span class="hljs-attr">"shape"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">5</span><span class="hljs-punctuation">,</span><span class="hljs-number">8192</span><span class="hljs-punctuation">,</span><span class="hljs-number">128</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>           <span class="hljs-attr">"param_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"required"</span><span class="hljs-punctuation">,</span></li><li>           <span class="hljs-attr">"data_file"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/home/data/input/k_1.bin"</span></li><li>       <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span></li><li>   <span class="hljs-comment">// ... </span></li><li> <span class="hljs-punctuation">}</span></li></ol></pre></div></div> </li><li><strong>场景3：支持原地算子格式的输入。</strong><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>暂不支持该方式设置输入。</p> </div></div></div> <p>当算子为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-commissioning-tools#section13493310121218">原地算子(in-place op)</a>时，输入和输出地址一样，配置算子json时“outputs”和“inputs”除了“data_file”不同，其他配置项均保持一致。配置示例如下。</p> <ul><li>"inputs"中data_file：输入数据为x.bin。</li><li>"outputs"中data_file：输出数据为标杆数据golden_x.bin。</li></ul> <div _ngcontent-srg-c106="" class="highlight-div"><div _ngcontent-srg-c106="" class="highlight-div-header"><div _ngcontent-srg-c106="" class="highlight-div-header-left"><div _ngcontent-srg-c106="" class="handle-button expand-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-srg-c106="" class="highlight-div-header-right"><div _ngcontent-srg-c106="" class="handle-button ai-button"></div><div _ngcontent-srg-c106="" class="handle-button line-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-srg-c106="" class="handle-button theme-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-srg-c106="" class="handle-button copy-button"><div _ngcontent-srg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-srg-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span> </li><li>     <span class="hljs-attr">"op_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"AddCustom"</span><span class="hljs-punctuation">,</span> </li><li>     <span class="hljs-attr">"data_script"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./add_golden.py"</span><span class="hljs-punctuation">,</span> </li><li>     <span class="hljs-attr">"gen_data"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> </li><li>     <span class="hljs-attr">"inputs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> </li><li>         <span class="hljs-punctuation">{</span> </li><li>             <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"x"</span><span class="hljs-punctuation">,</span></li><li>             <span class="hljs-attr">"dtype"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"int32"</span><span class="hljs-punctuation">,</span></li><li>             <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ND"</span><span class="hljs-punctuation">,</span></li><li>             <span class="hljs-attr">"ignore"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span></li><li>             <span class="hljs-attr">"shape"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">32</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>             <span class="hljs-attr">"param_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"required"</span><span class="hljs-punctuation">,</span></li><li>             <span class="hljs-attr">"data_file"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"x.bin"</span></li><li>         <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> </li><li>         <span class="hljs-punctuation">{</span> </li><li>             <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"y"</span><span class="hljs-punctuation">,</span> </li><li>             <span class="hljs-attr">"dtype"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"int32"</span><span class="hljs-punctuation">,</span> </li><li>             <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ND"</span><span class="hljs-punctuation">,</span> </li><li>             <span class="hljs-attr">"ignore"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span> </li><li>             <span class="hljs-attr">"shape"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">32</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> </li><li>             <span class="hljs-attr">"param_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"required"</span><span class="hljs-punctuation">,</span> </li><li>             <span class="hljs-attr">"data_file"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"y.bin"</span> </li><li>         <span class="hljs-punctuation">}</span> </li><li>     <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> </li><li>     <span class="hljs-attr">"outputs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> </li><li>         <span class="hljs-punctuation">{</span> </li><li>             <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"x"</span><span class="hljs-punctuation">,</span> </li><li>             <span class="hljs-attr">"dtype"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"int32"</span><span class="hljs-punctuation">,</span> </li><li>             <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ND"</span><span class="hljs-punctuation">,</span> </li><li>             <span class="hljs-attr">"ignore"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span> </li><li>             <span class="hljs-attr">"shape"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">32</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>             <span class="hljs-attr">"param_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"required"</span><span class="hljs-punctuation">,</span></li><li>             <span class="hljs-attr">"data_file"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"golden_x.bin"</span></li><li>         <span class="hljs-punctuation">}</span> </li><li>     <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> </li><li>     <span class="hljs-attr">"attrs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> </li><li>         <span class="hljs-punctuation">{</span> </li><li>             <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mask"</span><span class="hljs-punctuation">,</span> </li><li>             <span class="hljs-attr">"dtype"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"list_int"</span><span class="hljs-punctuation">,</span> </li><li>             <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-number">0</span><span class="hljs-punctuation">]</span> </li><li>         <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> </li><li>         <span class="hljs-punctuation">{</span> </li><li>             <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"repeatTimes"</span><span class="hljs-punctuation">,</span> </li><li>             <span class="hljs-attr">"dtype"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"int"</span><span class="hljs-punctuation">,</span> </li><li>             <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span> </li><li>         <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> </li><li>         <span class="hljs-comment">// ... </span></li><li>     <span class="hljs-punctuation">]</span> </li><li> <span class="hljs-punctuation">}</span></li></ol></pre></div></div> </li></ul> </div> </div> <div></div></div>