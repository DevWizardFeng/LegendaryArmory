<h1 _ngcontent-gub-c119="" class="doc-title ng-star-inserted" title="图形绘制与显示开发概述"> 图形绘制与显示开发概述 </h1>

<div _ngcontent-gub-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="场景介绍">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="场景介绍" tips="复制节点链接"></i></h2>          <p>应用在开发中，经常需要针对不同的元素内容进行绘制，开发者通常可以选择直接使用ArkUI组件来绘制想要的元素或效果，但有些自定义图形或效果无法满足，此时可以选择使用Drawing来实现灵活的自定义绘制效果。另外，ArkUI组件具备直接上屏显示的能力，而Drawing更加关注绘制，需要依靠其他模块来完成绘制结果的上屏显示。</p>    </div>    <div class="tiledSection">     <h2 id="绘制能力范围及实现流程">绘制能力范围及实现流程<i class="anchor-icon anchor-icon-link" anchorid="绘制能力范围及实现流程" tips="复制节点链接"></i></h2>          <p><strong>图1</strong> 图形绘制主要能力</p>     <p><span><img originheight="1354" originwidth="689" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114351.23929830051302628563554791606317:50001231000000:2800:6F8B2DC07E5DB0A2700E37040B31E4BEF5511CD0F3D8D04BB322E0DD92D7CB99.jpg" width="689" height="1354"></span></p>     <p>ArkGraphics 2D基于2D图像渲染引擎为开发者提供了一系列灵活多样的图形绘制接口。主要分为画布操作、绘制效果、图元绘制几方面，各部分支持能力关键列举如上图所示，后续可能支持更多相关能力，此处不再一一呈现，具体可关注对应API参考文档。</p>     <p>画布操作、绘制效果、图元绘制也是实现图形绘制的关键步骤和流程，具体可见下图。</p>     <p><strong>图2</strong> 图形绘制的实现流程</p>     <p><span><img originheight="850" originwidth="794" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114351.79012846208783896874400174091309:50001231000000:2800:9E615D70FDD8FE0E205926CE129A2FFDDB9023C1AEAE9CD4680075422550FEBA.jpg" width="794" height="850"></span></p>     <p>2D图形绘制过程和实际作画的过程是相似的，上图即以绘制经过旋转的红色填充矩形为例，提供了图形绘制的流程。主要实现流程和步骤如下：</p>     <ol>      <li>       <p><strong>创建画布（必选）</strong>：画布作为图形绘制的承载，是最基本最关键的。在进行图形绘制时，需要先创建画布，确保图形可承载，才能进行后续的相关设置和操作。</p></li>      <li>       <p><strong>进行画布操作（可选）</strong>：创建画布之后，可以基于画布进一步进行相关操作，比如裁剪、旋转、缩放等等。此步骤为可选步骤，开发者可以根据具体的场景需求选择进行对应的画布操作。</p></li>      <li>       <p><strong>设置绘制效果（可选）</strong>：绘制效果主要通过画刷（Brush）和画笔（Pen）实现。画笔针对的是图形轮廓，画刷针对的是图形内部区域。通过画刷和画笔，可以实现丰富多样的填充效果和描边效果，开发者可根据具体UI效果和需要选择设置相关效果。如果不设置绘制效果，会使用默认的绘制效果。</p></li>      <li>       <p><strong>绘制图元（必选）</strong>：图形绘制最后一步即为图元的绘制，不论多么复杂的图形，都是基础图元的不同组合，当前ArkGraphics 2D支持多种图元的绘制。创建Canvas画布并完成相关操作和设置后，开发者再选择对应的图元进行绘制即可完成图形绘制的全部流程。</p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="如何显示绘制结果">如何显示绘制结果<i class="anchor-icon anchor-icon-link" anchorid="如何显示绘制结果" tips="复制节点链接"></i></h2>          <p>以上内容主要呈现了ArkGraphics 2D基于2D图像渲染引擎的主要绘制能力和实现流程，基于画布完成绘制后，还需要将绘制结果上屏显示才能完整实现屏幕上可见的图形UI内容。</p>     <p>Drawing的显示方式主要包括以下两种：</p>     <ol>      <li>       <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-rendernode" target="_blank">RenderNode</a>上屏显示（ArkTS）：通过RenderNode获取Canvas，进行绘制，由RenderNode将绘制结果上屏显示，具体可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/canvas-get-result-draw-arkts#获取可直接显示的canvas画布">画布的获取与绘制结果的显示（ArkTS）</a>。</p></li>      <li>       <p>通过XComponent上屏显示（C/C++）：创建Canvas，进行绘制，将绘制结果拷贝到buffer，由XComponent将绘制结果上屏显示，具体实现可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/canvas-get-result-draw-c#获取可直接显示的canvas画布">画布的获取与绘制结果的显示（C/C++）</a>。</p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="与canvas画布组件的关系">与Canvas画布组件的关系<i class="anchor-icon anchor-icon-link" anchorid="与canvas画布组件的关系" tips="复制节点链接"></i></h2>          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-components-canvas-canvas" target="_blank">Canvas组件</a>也具有自绘制的能力，目前有<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-canvasrenderingcontext2d" target="_blank">CanvasRenderingContext2D</a>/<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-offscreencanvasrenderingcontext2d" target="_blank">OffscreenCanvasRenderingContext2D</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-drawingrenderingcontext" target="_blank">DrawingRenderingContext</a>两套API，应用使用两套绘制API绘制的内容都可以在绑定的Canvas组件上显示。</p>     <p>其中CanvasRenderingContext2D按照W3C标准封装了ArkGraphics 2D中Native Drawing的相关接口，可以方便快速复用Web应用的绘制逻辑，因此非常适用于Web应用和游戏、快速原型设计、数据可视化、在线绘图板、教学工具或创意应用等场景。</p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-components-canvas-canvas" target="_blank">Canvas组件</a>的底层也使用了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-drawing" target="_blank">Native Drawing</a>接口来实现绘制功能，在绘制能力上两者没有本质的区别。但因为多层封装的实现过程，使得Canvas组件在硬件接近性方面不如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-drawing-canvas-h" target="_blank">Native Drawing Canvas</a>，因此对于性能要求比较高、绘制比较复杂、硬件依赖性比较强的场景，如专业图形处理软件、桌面或移动应用等，使用Canvas组件绘制可能会存在一定的卡顿、掉帧等性能问题，此时可以使用Native Drawing接口的自绘制能力，确保应用的绘制性能。</p>    </div>    <div class="tiledSection">     <h2 id="约束限制">约束限制<i class="anchor-icon anchor-icon-link" anchorid="约束限制" tips="复制节点链接"></i></h2>          <p>针对图形绘制过程中，使用的单位为像素（px）。</p>    </div>    <div class="tiledSection">     <h2 id="示例代码">示例代码<i class="anchor-icon anchor-icon-link" anchorid="示例代码" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitcode.com/HarmonyOS_Samples/DocsSample_Graphics/blob/master/ArkGraphics2D/Drawing/ArkTSGraphicsDraw" target="_blank">图形绘制（ArkTS）</a></li>      <li><a href="https://gitee.com/harmonyos_samples/DocsSample_Graphics/tree/master/NdkDrawingSamples" target="_blank">图形绘制（C/C++）</a></li>     </ul>    </div>   </div>   <div></div></div>