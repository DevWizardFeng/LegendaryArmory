<h1 _ngcontent-gpm-c119="" class="doc-title ng-star-inserted" title="图片动态元数据生成"> 图片动态元数据生成 </h1>

<div _ngcontent-gpm-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>调用者可以调用本模块提供的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-imageprocessing" target="_blank">C API接口</a>，实现HDR图片动态元数据生成。</p> <p>该能力常用于图片编辑中，如下图所示：</p> <p><span><img height="116.41942857142858" originheight="194" originwidth="1533" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114451.49250800032910710516977965030336:50001231000000:2800:BCF99380B4C62D0F17B60030EF238096B8B08AA6E27229C088C72790AC59521D.png" title="点击放大" width="920"></span></p> <div class="tiledSection"><h2 id="section1757021191011">规格说明<i class="anchor-icon anchor-icon-link" anchorid="section1757021191011" tips="复制节点链接"></i></h2><p><strong>支持的数据输入格式</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.3.1.4.1.1" valign="top" width="35.06%"><p>输入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-color-space-manager-h#colorspacename" target="_blank">ColorSpaceName</a></p> <p></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.4.1.2" valign="top" width="32.47%"><p>输入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-pixelmap-native-h#oh_pixelmap_hdrmetadatatype" target="_blank">HdrMetadataType</a></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.4.1.3" valign="top" width="32.47%"><p>输入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-pixelmap-native-h#pixel_format" target="_blank">PIXEL_FORMAT</a></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="35.06%"><p>BT2020_PQ_LIMIT / BT2020_PQ</p> </td> <td class="cellrowborder" rowspan="2" valign="top" width="32.47%"><p>HDR_METADATA_TYPE_ALTERNATE</p> </td> <td class="cellrowborder" rowspan="6" valign="top" width="32.47%"><p>PIXEL_FORMAT_YCBCR_P010 / PIXEL_FORMAT_YCRCB_P010 / PIXEL_FORMAT_RGBA_1010102</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>BT2020_HLG_LIMIT / BT2020_HLG</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>BT2020_PQ_LIMIT / BT2020_PQ</p> </td> <td class="cellrowborder" rowspan="2" valign="top"><p>HDR_METADATA_TYPE_BASE</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>BT2020_HLG_LIMIT / BT2020_HLG</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>BT2020_PQ_LIMIT / BT2020_PQ</p> </td> <td class="cellrowborder" rowspan="2" valign="top"><p>HDR_METADATA_TYPE_NONE</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>BT2020_HLG_LIMIT / BT2020_HLG</p> </td> </tr>  </tbody></table></div> </div> <p><strong>分辨率规格：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.5.1.3.1.1" valign="top" width="44.47%"><p>最小分辨率（单位：像素）</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.3.1.2" valign="top" width="55.53%"><p>最大分辨率（单位：像素）</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="44.47%"><p>32*32</p> </td> <td class="cellrowborder" valign="top" width="55.53%"><p>8880*8880</p> </td> </tr>  </tbody></table></div> </div> <p><strong>内存规格：</strong></p> <p>处理的PixelMap对象需为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-allocator-type-c#内存类型介绍" target="_blank">DMA内存</a>。</p> </div> <div class="tiledSection"><h2 id="section10165233102918">开发指导<i class="anchor-icon anchor-icon-link" anchorid="section10165233102918" tips="复制节点链接"></i></h2></div> <p>具体实现可参考<a href="https://gitee.com/harmonyos_samples/DocsSample_MultiMedia/tree/master/UsingImageProcessingToProcessImages" target="_blank">示例工程</a>。</p> <div class="tiledSection"><h3 id="section9378144613208" class="firsth2">在 CMake 脚本中链接动态库<i class="anchor-icon anchor-icon-link" anchorid="section9378144613208" tips="复制节点链接"></i></h3><div _ngcontent-gpm-c106="" class="highlight-div"><div _ngcontent-gpm-c106="" class="highlight-div-header"><div _ngcontent-gpm-c106="" class="highlight-div-header-left"><div _ngcontent-gpm-c106="" class="handle-button expand-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gpm-c106="" class="highlight-div-header-right"><div _ngcontent-gpm-c106="" class="handle-button ai-button"></div><div _ngcontent-gpm-c106="" class="handle-button line-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gpm-c106="" class="handle-button theme-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gpm-c106="" class="handle-button copy-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gpm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-built_in">target_link_libraries</span>(sample PUBLIC libimage_processing.so)</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section139308812308">ArkTS侧调用的开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section139308812308" tips="复制节点链接"></i></h3><ol><li>通过解码器获取10 bit的PixelMap。<div _ngcontent-gpm-c106="" class="highlight-div"><div _ngcontent-gpm-c106="" class="highlight-div-header"><div _ngcontent-gpm-c106="" class="highlight-div-header-left"><div _ngcontent-gpm-c106="" class="handle-button expand-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gpm-c106="" class="highlight-div-header-right"><div _ngcontent-gpm-c106="" class="handle-button ai-button"></div><div _ngcontent-gpm-c106="" class="handle-button line-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gpm-c106="" class="handle-button theme-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gpm-c106="" class="handle-button copy-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gpm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> photoSelectOptions = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoSelectOptions</span>();</li><li>photoSelectOptions.<span class="hljs-property">MIMEType</span> = photoAccessHelper.<span class="hljs-property">PhotoViewMIMETypes</span>.<span class="hljs-property">IMAGE_TYPE</span>;</li><li>photoSelectOptions.<span class="hljs-property">maxSelectNumber</span> = <span class="hljs-number">1</span>;</li><li><span class="hljs-keyword">const</span> photoViewPicker = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoViewPicker</span>();</li><li>photoViewPicker.<span class="hljs-title function_">select</span>(photoSelectOptions)</li><li>  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">photoSelectResult: photoAccessHelper.PhotoSelectResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> fd = fileIo.<span class="hljs-title function_">openSync</span>(photoSelectResult.<span class="hljs-property">photoUris</span>[<span class="hljs-number">0</span>], fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>);</li><li>    <span class="hljs-keyword">const</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(fd.<span class="hljs-property">fd</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">option</span>: image.<span class="hljs-property">DecodingOptions</span> = {};</li><li>    option.<span class="hljs-property">index</span> = <span class="hljs-number">0</span>;</li><li>    option.<span class="hljs-property">desiredDynamicRange</span> = image.<span class="hljs-property">DecodingDynamicRange</span>.<span class="hljs-property">AUTO</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMapSrc</span> = imageSource.<span class="hljs-title function_">createPixelMapSync</span>(option);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getColorSpace</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hasPhoto</span> = <span class="hljs-literal">true</span>;</li><li>  })</li></ol></pre></div></div> </li><li>配置色彩框架和元数据信息。<div _ngcontent-gpm-c106="" class="highlight-div"><div _ngcontent-gpm-c106="" class="highlight-div-header"><div _ngcontent-gpm-c106="" class="highlight-div-header-left"><div _ngcontent-gpm-c106="" class="handle-button expand-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gpm-c106="" class="highlight-div-header-right"><div _ngcontent-gpm-c106="" class="handle-button ai-button"></div><div _ngcontent-gpm-c106="" class="handle-button line-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gpm-c106="" class="handle-button theme-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gpm-c106="" class="handle-button copy-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gpm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> colorSpaceBT2020_HLG : colorSpaceManager.<span class="hljs-property">ColorSpaceManager</span> = colorSpaceManager.<span class="hljs-title function_">create</span>(colorSpaceManager.<span class="hljs-property">ColorSpace</span>.<span class="hljs-property">BT2020_HLG</span>);</li><li>hdrpixelMap.<span class="hljs-title function_">setColorSpace</span>(colorSpaceBT2020_HLG);</li><li>hdrpixelMap.<span class="hljs-title function_">setMetadata</span>(image.<span class="hljs-property">HdrMetadataKey</span>.<span class="hljs-property">HDR_METADATA_TYPE</span>, image.<span class="hljs-property">HdrMetadataType</span>.<span class="hljs-property">ALTERNATE</span>);</li></ol></pre></div></div> </li></ol> </div> <div class="tiledSection"><h3 id="section1751742114492">Native侧调用的开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section1751742114492" tips="复制节点链接"></i></h3><ol><li>添加头文件。<div _ngcontent-gpm-c106="" class="highlight-div"><div _ngcontent-gpm-c106="" class="highlight-div-header"><div _ngcontent-gpm-c106="" class="highlight-div-header-left"><div _ngcontent-gpm-c106="" class="handle-button expand-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gpm-c106="" class="highlight-div-header-right"><div _ngcontent-gpm-c106="" class="handle-button ai-button"></div><div _ngcontent-gpm-c106="" class="handle-button line-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gpm-c106="" class="handle-button theme-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gpm-c106="" class="handle-button copy-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gpm-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;multimedia/image_framework/image_mdk_common.h&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;multimedia/image_framework/image_pixel_map_mdk.h&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;multimedia/image_framework/image/pixelmap_native.h&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;multimedia/video_processing_engine/image_processing.h&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;multimedia/video_processing_engine/image_processing_types.h&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;native_color_space_manager/native_color_space_manager.h&gt;</span></span></li></ol></pre></div></div> </li><li>（可选）初始化环境。<p>一般在进程内第一次使用时调用，可提前完成部分耗时操作。</p> <div _ngcontent-gpm-c106="" class="highlight-div"><div _ngcontent-gpm-c106="" class="highlight-div-header"><div _ngcontent-gpm-c106="" class="highlight-div-header-left"><div _ngcontent-gpm-c106="" class="handle-button expand-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gpm-c106="" class="highlight-div-header-right"><div _ngcontent-gpm-c106="" class="handle-button ai-button"></div><div _ngcontent-gpm-c106="" class="handle-button line-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gpm-c106="" class="handle-button theme-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gpm-c106="" class="handle-button copy-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gpm-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li>ImageProcessing_ErrorCode ret =  <span class="hljs-built_in">OH_ImageProcessing_InitializeEnvironment</span>();</li></ol></pre></div></div> </li><li>（可选）查询能力支持。建议在使用对应能力前调用。<div _ngcontent-gpm-c106="" class="highlight-div"><div _ngcontent-gpm-c106="" class="highlight-div-header"><div _ngcontent-gpm-c106="" class="highlight-div-header-left"><div _ngcontent-gpm-c106="" class="handle-button expand-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gpm-c106="" class="highlight-div-header-right"><div _ngcontent-gpm-c106="" class="handle-button ai-button"></div><div _ngcontent-gpm-c106="" class="handle-button line-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gpm-c106="" class="handle-button theme-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gpm-c106="" class="handle-button copy-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gpm-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">//输入格式</span></li><li>ImageProcessing_ColorSpaceInfo SRC_INFO;</li><li>SRC_INFO.colorSpace = BT2020_HLG;</li><li>SRC_INFO.metadataType = HDR_METADATA_TYPE_ALTERNATE;</li><li>SRC_INFO.pixelFormat = PIXEL_FORMAT_RGBA_1010102;</li><li><span class="hljs-comment">//能力查询</span></li><li><span class="hljs-type">bool</span> flag = <span class="hljs-built_in">OH_ImageProcessing_IsMetadataGenerationSupported</span>(&amp;SRC_INFO);</li></ol></pre></div></div> </li><li>将ArkTS中的PixelMap转换为C++的PixelMap。<div _ngcontent-gpm-c106="" class="highlight-div"><div _ngcontent-gpm-c106="" class="highlight-div-header"><div _ngcontent-gpm-c106="" class="highlight-div-header-left"><div _ngcontent-gpm-c106="" class="handle-button expand-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gpm-c106="" class="highlight-div-header-right"><div _ngcontent-gpm-c106="" class="handle-button ai-button"></div><div _ngcontent-gpm-c106="" class="handle-button line-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gpm-c106="" class="handle-button theme-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gpm-c106="" class="handle-button copy-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gpm-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li>OH_PixelmapNative* hdr = <span class="hljs-literal">nullptr</span>;</li><li><span class="hljs-built_in">OH_PixelmapNative_ConvertPixelmapNativeFromNapi</span>(env, argValue[<span class="hljs-number">0</span>], &amp;hdr);</li></ol></pre></div></div> </li><li>创建图片元数据生成模块。</li><li>应用可以通过图片处理引擎模块类型来创建图片元数据生成模块。示例中的变量说明如下：<p>instance：图片处理模块实例。</p> <p>IMAGE_PROCESSING_TYPE_METADATA_GENERATION：图片元数据生成类型。</p> <div class="p">预期返回值：IMAGE_PROCESSING_SUCCESS<div _ngcontent-gpm-c106="" class="highlight-div"><div _ngcontent-gpm-c106="" class="highlight-div-header"><div _ngcontent-gpm-c106="" class="highlight-div-header-left"><div _ngcontent-gpm-c106="" class="handle-button expand-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gpm-c106="" class="highlight-div-header-right"><div _ngcontent-gpm-c106="" class="handle-button ai-button"></div><div _ngcontent-gpm-c106="" class="handle-button line-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gpm-c106="" class="handle-button theme-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gpm-c106="" class="handle-button copy-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gpm-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li>OH_ImageProcessing* instance = <span class="hljs-literal">nullptr</span>;</li><li>ret = <span class="hljs-built_in">OH_ImageProcessing_Create</span>(&amp;instance, IMAGE_PROCESSING_TYPE_METADATA_GENERATION);</li></ol></pre></div></div> </div> </li><li>执行算法。<div _ngcontent-gpm-c106="" class="highlight-div"><div _ngcontent-gpm-c106="" class="highlight-div-header"><div _ngcontent-gpm-c106="" class="highlight-div-header-left"><div _ngcontent-gpm-c106="" class="handle-button expand-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gpm-c106="" class="highlight-div-header-right"><div _ngcontent-gpm-c106="" class="handle-button ai-button"></div><div _ngcontent-gpm-c106="" class="handle-button line-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gpm-c106="" class="handle-button theme-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gpm-c106="" class="handle-button copy-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gpm-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li>ret = <span class="hljs-built_in">OH_ImageProcessing_GenerateMetadata</span>(instance, hdr);</li></ol></pre></div></div> </li><li>释放实例资源。<div _ngcontent-gpm-c106="" class="highlight-div"><div _ngcontent-gpm-c106="" class="highlight-div-header"><div _ngcontent-gpm-c106="" class="highlight-div-header-left"><div _ngcontent-gpm-c106="" class="handle-button expand-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gpm-c106="" class="highlight-div-header-right"><div _ngcontent-gpm-c106="" class="handle-button ai-button"></div><div _ngcontent-gpm-c106="" class="handle-button line-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gpm-c106="" class="handle-button theme-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gpm-c106="" class="handle-button copy-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gpm-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li>ret = <span class="hljs-built_in">OH_ImageProcessing_Destroy</span>(instance);</li><li>instance = <span class="hljs-literal">nullptr</span>;</li></ol></pre></div></div> </li><li>释放初始化环境资源。<div _ngcontent-gpm-c106="" class="highlight-div"><div _ngcontent-gpm-c106="" class="highlight-div-header"><div _ngcontent-gpm-c106="" class="highlight-div-header-left"><div _ngcontent-gpm-c106="" class="handle-button expand-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gpm-c106="" class="highlight-div-header-right"><div _ngcontent-gpm-c106="" class="handle-button ai-button"></div><div _ngcontent-gpm-c106="" class="handle-button line-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gpm-c106="" class="handle-button theme-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gpm-c106="" class="handle-button copy-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gpm-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li>ret = <span class="hljs-built_in">OH_ImageProcessing_DeinitializeEnvironment</span>();</li></ol></pre></div></div> </li></ol> </div> <div class="tiledSection"><h2 id="section146717273617">完整示例代码<i class="anchor-icon anchor-icon-link" anchorid="section146717273617" tips="复制节点链接"></i></h2><div class="p">ArkTS示例代码：<div class="screenLinkPre"><div _ngcontent-gpm-c106="" class="highlight-div"><div _ngcontent-gpm-c106="" class="highlight-div-header"><div _ngcontent-gpm-c106="" class="highlight-div-header-left"><div _ngcontent-gpm-c106="" class="handle-button expand-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gpm-c106="" class="highlight-div-header-right"><div _ngcontent-gpm-c106="" class="handle-button ai-button"></div><div _ngcontent-gpm-c106="" class="handle-button line-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gpm-c106="" class="handle-button theme-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gpm-c106="" class="handle-button copy-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gpm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" data-highlighted="yes"><ol class="linenums"><li>MetadataGen.ets<span class=""><br></span></li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DocsSample_MultiMedia/blob/master/UsingImageProcessingToProcessImages/entry/src/main/ets/view/MetadataGenerationComponent.ets" target="_blank">MetadataGen.ets</a></div></div></div></div> </div> <p>C++相关示例代码：</p> <div class="screenLinkPre"><div _ngcontent-gpm-c106="" class="highlight-div"><div _ngcontent-gpm-c106="" class="highlight-div-header"><div _ngcontent-gpm-c106="" class="highlight-div-header-left"><div _ngcontent-gpm-c106="" class="handle-button expand-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gpm-c106="" class="highlight-div-header-right"><div _ngcontent-gpm-c106="" class="handle-button ai-button"></div><div _ngcontent-gpm-c106="" class="handle-button line-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gpm-c106="" class="handle-button theme-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gpm-c106="" class="handle-button copy-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gpm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-built_in">CMakeLists</span>.txt示例代码地址<span class=""><br></span></li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DocsSample_MultiMedia/blob/master/UsingImageProcessingToProcessImages/entry/src/main/cpp/CMakeLists.txt" target="_blank">CMakeLists.txt</a></div></div></div></div> <div class="screenLinkPre"><div _ngcontent-gpm-c106="" class="highlight-div"><div _ngcontent-gpm-c106="" class="highlight-div-header"><div _ngcontent-gpm-c106="" class="highlight-div-header-left"><div _ngcontent-gpm-c106="" class="handle-button expand-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gpm-c106="" class="highlight-div-header-right"><div _ngcontent-gpm-c106="" class="handle-button ai-button"></div><div _ngcontent-gpm-c106="" class="handle-button line-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gpm-c106="" class="handle-button theme-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gpm-c106="" class="handle-button copy-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gpm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" data-highlighted="yes"><ol class="linenums"><li>ImageProcessing.cpp示例代码地址<span class=""><br></span></li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DocsSample_MultiMedia/blob/master/UsingImageProcessingToProcessImages/entry/src/main/cpp/ImageProcessing/ImageProcessing.cpp" target="_blank">C++侧示例代码</a></div></div></div></div> <div class="screenLinkPre"><div _ngcontent-gpm-c106="" class="highlight-div"><div _ngcontent-gpm-c106="" class="highlight-div-header"><div _ngcontent-gpm-c106="" class="highlight-div-header-left"><div _ngcontent-gpm-c106="" class="handle-button expand-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gpm-c106="" class="highlight-div-header-right"><div _ngcontent-gpm-c106="" class="handle-button ai-button"></div><div _ngcontent-gpm-c106="" class="handle-button line-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gpm-c106="" class="handle-button theme-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gpm-c106="" class="handle-button copy-button"><div _ngcontent-gpm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gpm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" data-highlighted="yes"><ol class="linenums"><li>ImageProcessing.h示例代码地址<span class=""><br></span></li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DocsSample_MultiMedia/blob/master/UsingImageProcessingToProcessImages/entry/src/main/cpp/ImageProcessing/ImageProcessing.cpp" target="_blank">C++侧示例代码</a></div></div></div></div> <p></p> </div> </div> <div></div></div>