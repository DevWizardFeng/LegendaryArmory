<h1 _ngcontent-wxv-c119="" class="doc-title ng-star-inserted" title="在端侧访问云数据库"> 在端侧访问云数据库 </h1>

<div _ngcontent-wxv-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001981647673"><div class="tiledSection"><h2 id="section1619592082518">前提条件<i class="anchor-icon anchor-icon-link" anchorid="section1619592082518" tips="复制节点链接"></i></h2><ul id="ZH-CN_TOPIC_0000002214704309__ul155941629174410"><li id="li8594162917444">请确保<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/agc-harmonyos-clouddev-deploydatabase">云数据库已正确开发并部署</a>。</li><li id="li16594829174413">请确保“AppScope/resources/rawfile/schema.json”文件已存在。<div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p id="ZH-CN_TOPIC_0000002214704309__p5807111113187">云数据库部署成功后，DevEco Studio将自动从云侧下载云数据库的schema文件至“AppScope/resources/rawfile/schema.json”路径，该文件是云数据库端侧API必须引入的配置文件。</p> <p id="ZH-CN_TOPIC_0000002214704309__p1480711119181">如果后续又在本地工程修改了对象类型，请重新部署云数据库，DevEco Studio将自动更新schema.json文件；如果后续在AGC云侧修改了对象类型，您需<a href="https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-Guides/agc-clouddb-agcconsole-objecttypes-0000001127675459#section1558018208151" target="_blank">手动从AGC控制台导出schema.json文件</a>，拷贝至本地工程的“AppScope/resources/rawfile”目录下。否则，可能导致schema.json文件中的对象类型和代码中的对象类型不一致，端侧访问云数据库时提示<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code#section1432118584210" target="_blank">1008230002</a>错误。</p> </div></div></div> </li></ul> <ul id="ZH-CN_TOPIC_0000002214704309__ul109381052164612"><li id="li149381552114617">检查您的角色拥有的对象类型操作权限。如果未<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudcommon#section9723191765120" target="_blank">配置AccessToken</a>，需要给World角色添加Upsert和Delete权限。</li></ul> </div> <div class="tiledSection"><h2 id="section33581338194513">生成Client Model<i class="anchor-icon anchor-icon-link" anchorid="section33581338194513" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002214704309__p353745215913">在端侧通过Cloud Foundation Kit访问云数据库，需先引入对应云数据库对象类型的Client Model。</p> <p id="ZH-CN_TOPIC_0000002214704309__p12709174814453">参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/agc-harmonyos-clouddev-modelclass#section1037851593420">生成Client Model</a>生成云数据库对象类型的端侧模型，如下图初始化代码中的Client Model示例“ets/pages/CloudDb/Post.ts”。</p> <p id="ZH-CN_TOPIC_0000002214704309__p280934710457"><span><img originheight="562" originwidth="882" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104748.73880513370034774666642450697744:50001231000000:2800:A2FC78CB61F13244CA20FE51D5BF23F6FCA9C8EA662D687A129E4CFD793CA6C6.png" width="882" height="562"></span></p> </div> <div class="tiledSection"><h2 id="section16195122002514">访问数据库<i class="anchor-icon anchor-icon-link" anchorid="section16195122002514" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002214704309__p208860163515">接下来您便可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cloudfoundation-database-initialize" target="_blank">初始化数据库访问</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cloudfoundation-database-query" target="_blank">查询数据</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cloudfoundation-database-upsert" target="_blank">写入数据</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cloudfoundation-database-delete" target="_blank">删除数据</a>等访问数据库。</p> <p id="ZH-CN_TOPIC_0000002214704309__p1272153273818">“src/main/ets/pages/CloudDb”目录下提供了部分示例代码，更完整的接口信息请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase" target="_blank">Cloud Foundation Kit API参考-云数据库模块</a>。</p> </div> </div> <div></div></div>