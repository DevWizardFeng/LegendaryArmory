<h1 _ngcontent-flp-c119="" class="doc-title ng-star-inserted" title="地址越界事件介绍"> 地址越界事件介绍 </h1>

<div _ngcontent-flp-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="概述">概述<i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2>          <p>地址越界问题是指访问了不合法的地址，导致程序运行出现异常，通常表现为应用崩溃。</p>     <p>开发者可通过HiAppEvent接口订阅地址越界事件，请参考以下文档。目前提供ArkTs和C/C++两种接口，按需选择。</p>     <ul>      <li>       <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-address-sanitizer-events-arkts">订阅踩内存事件（ArkTS）</a></p></li>      <li>       <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-address-sanitizer-events-ndk">订阅踩内存事件（C/C++）</a></p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="检测原理">检测原理<i class="anchor-icon anchor-icon-link" anchorid="检测原理" tips="复制节点链接"></i></h2>          <p>详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/address-sanitizer-guidelines">地址越界类问题检测</a>。</p>    </div>    <div class="tiledSection">     <h2 id="事件字段说明">事件字段说明<i class="anchor-icon anchor-icon-link" anchorid="事件字段说明" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="params字段说明" class="firsth2">params字段说明<i class="anchor-icon anchor-icon-link" anchorid="params字段说明" tips="复制节点链接"></i></h3>          <p>地址越界事件信息中params属性的详细描述如下：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.4.1.1" valign="top" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.4.1.2" valign="top" width="33.33333333333333%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.4.1.3" valign="top" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">time</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">number</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">事件触发时间，单位：ms。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">bundle_version</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">string</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">应用版本。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">bundle_name</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">string</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">应用名称。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">pid</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">number</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">应用的进程id。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">uid</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">number</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">应用的用户id。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">type</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">string</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">地址越界错误类型，取值范围详见type属性。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">external_log</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">string[]</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">故障日志文件路径。<strong>为避免目录空间超限（限制参考log_over_limit），导致新生成的日志文件写入失败，日志文件处理完后请及时删除。</strong></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">log_over_limit</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">boolean</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">生成的故障日志文件与已存在的日志文件总大小是否超过5M上限。true表示超过上限，日志写入失败；false表示未超过上限。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="type字段说明">type字段说明<i class="anchor-icon anchor-icon-link" anchorid="type字段说明" tips="复制节点链接"></i></h3>          <p>地址越界事件信息中type的详细描述如下：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.3.1.1" valign="top" width="50%">取值</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.3.1.2" valign="top" width="50%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">GWP-ASAN</td>         <td class="cellrowborder" valign="top" width="50%">由<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-stability-gwpasan-detection" target="_blank">GWP-ASan</a>触发的错误类型。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">UBSAN</td>         <td class="cellrowborder" valign="top" width="50%">由<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-stability-ubsan-detection" target="_blank">UBSan</a>触发的错误类型。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">TSAN</td>         <td class="cellrowborder" valign="top" width="50%">由<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-stability-tsan-detection" target="_blank">TSan</a>触发的错误类型。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">FDSAN</td>         <td class="cellrowborder" valign="top" width="50%">从API version 20开始，可以支持订阅由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/fdsan">fdsan</a>触发的错误类型。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">stack tag-mismatch</td>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-stability-hwasan-detection" target="_blank">HWASan</a>检测堆栈标记不匹配，可能是因为堆栈返回后使用、堆栈范围外使用或出界。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">alloc-dealloc-mismatch</td>         <td class="cellrowborder" valign="top" width="50%">内存分配和释放方式不匹配。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">allocation-size-too-big</td>         <td class="cellrowborder" valign="top" width="50%">分配过大的堆内存。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">calloc-overflow</td>         <td class="cellrowborder" valign="top" width="50%">calloc分配内存错误。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">container-overflow</td>         <td class="cellrowborder" valign="top" width="50%">容器溢出。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">double-free</td>         <td class="cellrowborder" valign="top" width="50%">重复释放的内存。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">dynamic-stack-buffer-overflow</td>         <td class="cellrowborder" valign="top" width="50%">缓冲区访问超出堆栈分配对象的边界。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">global-buffer-overflow</td>         <td class="cellrowborder" valign="top" width="50%">全局缓冲区溢出。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">heap-buffer-overflow</td>         <td class="cellrowborder" valign="top" width="50%">堆缓冲区溢出。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">heap-use-after-free</td>         <td class="cellrowborder" valign="top" width="50%">使用已释放的堆内存。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">invalid-allocation-alignment</td>         <td class="cellrowborder" valign="top" width="50%">无效的内存分配对齐方式。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">memcpy-param-overlap</td>         <td class="cellrowborder" valign="top" width="50%">memcpy不支持重叠内存。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">new-delete-type-mismatch</td>         <td class="cellrowborder" valign="top" width="50%">内存释放大小与分配大小不一致。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">stack-buffer-overflow</td>         <td class="cellrowborder" valign="top" width="50%">堆栈缓冲区溢出。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">stack-buffer-underflow</td>         <td class="cellrowborder" valign="top" width="50%">堆栈缓冲区下溢。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">stack-use-after-return</td>         <td class="cellrowborder" valign="top" width="50%">在返回后使用堆栈内存。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">stack-use-after-scope</td>         <td class="cellrowborder" valign="top" width="50%">使用超出范围的堆栈内存。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">strcat-param-overlap</td>         <td class="cellrowborder" valign="top" width="50%">在重叠缓冲区中移动内存导致的错误。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">use-after-poison</td>         <td class="cellrowborder" valign="top" width="50%">对内存地址投毒后被使用。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>