<h1 _ngcontent-aoh-c119="" class="doc-title ng-star-inserted" title="基于NDK构建UI概述"> 基于NDK构建UI概述 </h1>

<div _ngcontent-aoh-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>ArkUI开发框架提供了一系列NDK接口，能够在应用中使用C和C++代码构建UI界面，这些接口包括UI组件创建、UI树操作、属性设置和事件监听等。面向通用UI界面开发场景，建议使用ArkTS代码和ArkUI声明式开发框架。然而，如果需要实现以下一个或多个目标，那么ArkUI NDK接口就能派上用场：</p>    <ul>     <li>      <p>需要使用UI组件树控制接口来动态创建和挂载UI组件，方便实现自身UI开发框架的系统桥接。</p></li>     <li>      <p>进一步提升UI界面性能，细粒度控制组件的创建和属性设置，以降低延迟、处理极高UI负载。</p></li>     <li>      <p>重复使用自己或其他开发者的C或C++UI库。</p></li>    </ul>    <p>ArkUI NDK接口能力主要包括：</p>    <ul>     <li>      <p><strong>布局</strong></p>      <p>布局是UI的必要元素，定义了组件在界面中的大小位置。ArkUI NDK接口提供了线性布局、层叠布局、弹性布局、相对布局、滚动容器、轮播容器等。</p></li>     <li>      <p><strong>组件</strong></p>      <p>组件是UI的必要元素，形成了在界面中的样子。包括系统组件和用户自定义布局绘制行为的组件。系统组件包括按钮、单选框、图片、文本等，可以使用ArkUI NDK提供的接口快速创建相应组件并设置属性和事件。针对UI组件的自定义能力包括了布局测算和绘制，用户可以通过这些自定义能力构建差异化UI组件。</p></li>     <li>      <p><strong>弹窗</strong></p>      <p>弹窗是UI界面交互的重要元素。ArkUI NDK接口提供了自定义弹窗相关接口，可以自定义弹窗界面内容并调用相关弹窗接口展示弹窗。</p></li>     <li>      <p><strong>动画</strong></p>      <p>动画是UI的重要元素之一。优秀的动画设计能够极大地提升用户体验，ArkUI NDK提供了显式动画接口用于快速构建组件的属性动画、实现高效精致的动画效果。</p></li>     <li>      <p><strong>交互事件</strong></p>      <p>交互事件是UI和用户交互的必要元素。ArkUI NDK接口提供了多种交互事件，除了触摸事件、鼠标事件、焦点事件等通用事件外，还包括基于通用事件进行进一步识别的手势事件。手势事件有单一手势如点击手势、长按手势、拖动手势、捏合手势、旋转手势、滑动手势，以及通过单一手势事件进行组合的组合手势事件。</p></li>    </ul>    <div class="tiledSection">     <h2 id="整体架构">整体架构<i class="anchor-icon anchor-icon-link" anchorid="整体架构" tips="复制节点链接"></i></h2>          <p><strong>图1</strong> NDK接口和ArkTS声明式关系架构图</p>     <p><span><img originheight="548" originwidth="547" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114721.52783265385437160459027955267565:50001231000000:2800:0A7055BA8E3C87D1027795A8C96CD4D91AB49D68D066E305504EDC0009F0E48D.png" width="547" height="548"></span></p>     <p><strong>图2</strong> 通过NDK接口创建的组件挂载示意图</p>     <p><span><img originheight="643" originwidth="1230" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114721.54409001999287031453090864063418:50001231000000:2800:398D638E5AF53CA0C129E87E61FAF8E4D836409DCF323BB8D88FE5B6616CAEEA.png" width="920" height="480.9430894308943"></span></p>     <ul>      <li>       <p>ArkTS声明式UI前端和NDK接口都是针对ArkUI底层实现的接口暴露，NDK接口相比于ArkTS声明式UI前端，除了剥离状态管理等声明式UI语法外，还精简了组件能力，将ArkUI组件核心功能通过C接口进行封装暴露。</p></li>      <li>       <p>NDK创建的UI组件需要通过ArkTS层的占位组件进行挂载显示，挂载后，NDK创建的组件和ArkTS创建的组件位于同一个UI树上，相关布局渲染和事件处理遵循相同规则。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="开发流程">开发流程<i class="anchor-icon anchor-icon-link" anchorid="开发流程" tips="复制节点链接"></i></h2>          <p>使用NDK接口开发UI界面时，主要涉及如下开发过程。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.3.1.1" valign="top" width="50%">任务</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.3.1.2" valign="top" width="50%">简介</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-development-overview">NDK开发导读</a></td>         <td class="cellrowborder" valign="top" width="50%">介绍NDK的适用场景与必备基础知识。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-access-the-arkts-page">接入ArkTS页面</a></td>         <td class="cellrowborder" valign="top" width="50%">介绍了如何将NDK接口开发的UI界面挂载到ArkTS主页面上进行渲染显示。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-listen-to-component-events">添加交互事件</a></td>         <td class="cellrowborder" valign="top" width="50%">介绍了如何添加组件的交互事件。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-use-animation">使用动画</a></td>         <td class="cellrowborder" valign="top" width="50%">介绍了如何在Native侧添加动画。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-loading-long-list">构建布局</a></td>         <td class="cellrowborder" valign="top" width="50%">介绍了如何在Native侧使用容器组件构建布局。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-build-pop-up-window">构建弹窗</a></td>         <td class="cellrowborder" valign="top" width="50%">介绍了如何使用弹窗接口构建UI界面进行弹窗显示。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-build-custom-components">构建自定义组件</a></td>         <td class="cellrowborder" valign="top" width="50%">介绍了如何使用NDK接口能力构建自定义组件，实现差异化UI组件。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-embed-arkts-components">嵌入ArkTS组件</a></td>         <td class="cellrowborder" valign="top" width="50%">介绍了如何在Native侧构建带有ArkTS组件的界面。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-embed-render-components">构建渲染节点</a></td>         <td class="cellrowborder" valign="top" width="50%">介绍了如何在Native侧构建渲染节点。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-accessibility-xcomponent">通过XComponent接入无障碍</a></td>         <td class="cellrowborder" valign="top" width="50%">介绍了通过XComponent接入UI平台的三方系统如何对接无障碍。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-user-defined-draw">自定义绘制</a></td>         <td class="cellrowborder" valign="top" width="50%">介绍了如何使用自定义绘制能力，实现自定义内容的绘制。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-node-query-operate">查询和操作自定义节点</a></td>         <td class="cellrowborder" valign="top" width="50%">介绍了如何对自定义节点进行查询和操作。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-embedded-component">通过EmbeddedComponent拉起EmbeddedUIExtensionAbility</a></td>         <td class="cellrowborder" valign="top" width="50%">介绍了如何在Native侧通过EmbeddedComponent拉起EmbeddedUIExtensionAbility。主要用于有进程隔离需求的模块化开发场景。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-styled-string">使用文本</a></td>         <td class="cellrowborder" valign="top" width="50%">介绍了Text组件与字体引擎如何配套使用。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-scope-task">在NDK中保证多实例场景功能正常</a></td>         <td class="cellrowborder" valign="top" width="50%">介绍了如何在NDK多线程场景中保证接口调用的功能正常。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="注意事项">注意事项<i class="anchor-icon anchor-icon-link" anchorid="注意事项" tips="复制节点链接"></i></h2>          <p>使用NDK接口开发UI界面时，需要保证相关UI接口调用在应用主线程上调用，避免多线程操作导致应用崩溃问题。</p>    </div>   </div>   <div></div></div>