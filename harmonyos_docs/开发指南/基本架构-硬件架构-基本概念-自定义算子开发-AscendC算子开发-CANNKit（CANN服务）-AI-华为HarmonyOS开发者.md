<h1 _ngcontent-mwn-c119="" class="doc-title ng-star-inserted" title="基本架构"> 基本架构 </h1>

<div _ngcontent-mwn-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>如下展示了总体的硬件基本架构。其中，AI Core通过数据总线与硬件结构中其它基本单元相连接，基于AscendC开发的算子，通过总线传输并最终运行在AI Core上。下文的编程模型基于硬件架构的抽象进行介绍，了解该内容能够更好的理解编程模型；对于需要完成高性能编程的深度开发者，更需要了解硬件架构相关知识，最佳实践中很多内容都以本章为基础进行介绍。</p> <p class="msonormal"><span><img height="248.71" originheight="318" originwidth="681" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114302.37501617419411680386781221676204:50001231000000:2800:428DD2C84CCD909E3E2A902F3A99C7D05C622A1F9887532DD268D381404656BA.png" title="点击放大" width="526.6800000000001"></span></p> <p>AI Core负责执行标量、向量和张量相关的计算密集型算子，包括三种基础<strong>计算单元</strong>：Cube（矩阵）计算单元、Vector（向量）计算单元和Scalar（标量）计算单元，同时还包含<strong>存储单元</strong>（包括硬件存储和用于数据搬运的搬运单元）和<strong>控制单元</strong>。硬件架构根据Cube计算单元和Vector计算单元是否同核部署分为<strong>耦合架构</strong>和<strong>分离架构</strong>两种。</p> <p>Kirin9020/KirinX90系列处理器：耦合架构</p> <div class="tiledSection"><h2 id="section321mcpsimp">耦合架构<i class="anchor-icon anchor-icon-link" anchorid="section321mcpsimp" tips="复制节点链接"></i></h2><p>耦合架构是指Cube计算单元和Vector计算单元同核部署，架构图如下图所示。下图中列出了计算架构中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-storage-unit">存储单元</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-computing-unit">计算单元</a>，箭头表示数据处理流向，MTE1/MTE2/MTE3代表<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-storage-unit#zh-cn_topic_0000002119084361_table417mcpsimp">搬运单元</a>。</p> <p class="msonormal"><span><img height="353.78000000000003" originheight="453" originwidth="672" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114302.85413649972031364837857419424933:50001231000000:2800:D03D6C5D3E84FAEEC9F2C73D78D88F3B8A6F5E9C9187D95043AFC3CED1856560.png" title="点击放大" width="526.6800000000001"></span></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>图中的虚线箭头表明Kirin9020/KirinX90系列处理器支持<span style="color: rgb(29,29,26);">Scalar</span>直接读写GM<span style="color: rgb(29,29,26);">数据。</span></p> </div></div></div> </div> <div class="tiledSection"><h2 id="section329mcpsimp">分离架构<i class="anchor-icon anchor-icon-link" anchorid="section329mcpsimp" tips="复制节点链接"></i></h2><p>如下图所示，分离架构将AI Core拆成矩阵计算(AI Cube,AIC)和向量计算(AI Vector,AIV)两个独立的核，每个核都有自己的Scalar单元，能独立加载自己的代码段，从而实现矩阵计算与向量计算的解耦，在系统软件的统一调度下互相配合达到计算效率优化的效果。AIV与AIC之间通过Global Memory进行数据传递。</p> <p class="msonormal"><span><img height="516.0400000000001" originheight="653" originwidth="668" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114302.35252169509371110262091680960054:50001231000000:2800:A3B5C9FA24F15A96CE4E615F775FC56AEC6079E7E7BD0335CE2B925C676F8B99.png" title="点击放大" width="526.6800000000001"></span></p> <ul><li>AIC架构<ul><li>包含4个并行执行单元（搬运单元和计算单元）：MTE1、MTE2、Cube、Scalar。</li><li>包含7个内存单元：GM（核外）、L1、L0A、L0B，L0C、BiasTable Buffer、FixPipe Buffer。</li></ul> </li><li>AIV架构<ul><li>包含4个并行执行单元：MTE2、MTE3、Vector、Scalar。</li><li>包含2个内存单元：GM（核外）、UB。</li></ul> </li><li>典型计算数据流<ul><li>Vector计算：GM-UB- [Vector]-UB-GM。</li><li>Cube计算：<p>GM-L1-L0A/L0B-Cube-L0C-FixPipe-GM、GM-L1-L0A/L0B-Cube-L0C-FixPipe-L1。</p> </li></ul> </li></ul> </div> </div> <div></div></div>