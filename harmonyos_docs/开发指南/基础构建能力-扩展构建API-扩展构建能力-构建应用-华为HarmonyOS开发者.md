<h1 _ngcontent-ojx-c119="" class="doc-title ng-star-inserted" title="基础构建能力"> 基础构建能力 </h1>

<div _ngcontent-ojx-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;"> <div id="body0000001823257929"><div class="tiledSection" style="contain-intrinsic-size: auto 92px;"><h2 id="section64891890155">Hvigor预置对象<i class="anchor-icon anchor-icon-link" anchorid="section64891890155" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p762912413616">"hvigor"对象是一个预定义的Hvigor对象，表示当前正在执行的Hvigor构建引擎的实例，通过"hvigor"对象可以获得有关构建的一些信息和操作。</p> </div> <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 169px;"><h3 id="section8838152373217" class="firsth2">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section8838152373217" tips="复制节点链接"></i></h3><div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1673563181712" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p19662515175115"></p> <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 543px;"><h3 id="section10705432367">getRootNode<i class="anchor-icon anchor-icon-link" anchorid="section10705432367" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p106225358610">getRootNode(): HvigorNode</p> <p id="ZH-CN_TOPIC_0000002478334326__p1762253520619">返回根项目的节点对象。在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-life-cycle#section746253616316">nodesInitialized和之后的阶段</a>才能使用，否则会报错。</p> <p id="ZH-CN_TOPIC_0000002478334326__p162517612612"></p> <p id="ZH-CN_TOPIC_0000002478334326__p66221635665"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p1062283512613"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table196226358619" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row56226356611"><th align="left" class="cellrowborder" id="mcps1.3.4.7.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p186221435468">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p562218352612">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1462213354618"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p96225355610"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section14832104719474">HvigorNode</a></p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p1362212359614">hvigor根节点对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p19622113515615"><strong>示例：</strong>获取根节点对象。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen16622835766" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">const</span> rootNode = hvigor.<span class="hljs-title function_">getRootNode</span>();</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p46221435164"></p> </div> <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 524px;"><h3 id="section16393827185">getAllNodes<i class="anchor-icon anchor-icon-link" anchorid="section16393827185" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p5393627186">getAllNodes(): HvigorNode[]</p> <p id="ZH-CN_TOPIC_0000002478334326__p123931827287">返回所有节点的数组。在node初始化后才能使用，否则会报错。</p> <p id="ZH-CN_TOPIC_0000002478334326__p03937275816"></p> <p id="ZH-CN_TOPIC_0000002478334326__p129011548865"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p173935271584"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table123931827189" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1539320271819"><th align="left" class="cellrowborder" id="mcps1.3.5.7.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p193934271482">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p3393327583">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row183936278818"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p163939271089"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section14832104719474">HvigorNode</a>[]</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p1839316275816">hvigor所有节点对象的数组</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p113939271788"><strong>示例：</strong>获取所有节点对象的数组。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1039352720818" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">const</span> allNodes = hvigor.<span class="hljs-title function_">getAllNodes</span>();</li></ol></pre></div></div> </div> <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 675px;"><h3 id="section83524914102">getNodeByName<i class="anchor-icon anchor-icon-link" anchorid="section83524914102" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1335212941012">getNodeByName(nodeName: string): HvigorNode | undefined</p> <p id="ZH-CN_TOPIC_0000002478334326__p63521197106">根据节点名称获取节点对象。在node初始化后才能使用，否则会报错。</p> <p id="ZH-CN_TOPIC_0000002478334326__p156821826191614"></p> <p id="ZH-CN_TOPIC_0000002478334326__p1134713613"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p524916254165"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table8249192513165" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row12496255169"><th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p12249142510168">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p92495251161">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p72491625131616">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1224932561610">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row18249102517165"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1624916256162">nodeName</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1024922516165">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p19249925181620">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p165307202313">节点的名称</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p19352129161013"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table5352149171017" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row635213941017"><th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1235219915109">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p135269191016">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1635213981013"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p23521294108"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section14832104719474">HvigorNode</a> | undefined</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p1935220920107">根据名称找到的节点对象，如果不存在则返回undefined</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p935217919104"><strong>示例：</strong>通过节点名称获取节点对象。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen16352139181016" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">const</span> entryNode = hvigor.<span class="hljs-title function_">getNodeByName</span>(<span class="hljs-string">'entry'</span>);</li></ol></pre></div></div> </div> <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 524px;"><h3 id="section33001992354">getHvigorConfig<i class="anchor-icon anchor-icon-link" anchorid="section33001992354" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p230099123520">getHvigorConfig(): HvigorConfig</p> <p id="ZH-CN_TOPIC_0000002478334326__p19300169193511">返回HvigorConfig对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p13001913358"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p1930020912351"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table113004913518" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row53001592354"><th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p133000953519">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p430018910359">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row16300696353"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p530039113512"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section7253174081515">HvigorConfig</a></p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p930016912358">HvigorConfig对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p113008911358"><strong>示例：</strong>获取当前HvigorConfig对象。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen13300209183515" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">const</span> hvigorConfig = hvigor.<span class="hljs-title function_">getHvigorConfig</span>();</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 524px;"><h3 id="section1349018305379">getParameter<i class="anchor-icon anchor-icon-link" anchorid="section1349018305379" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p11490123073713">getParameter(): Parameter</p> <p id="ZH-CN_TOPIC_0000002478334326__p1149020305379">返回Parameter对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p12490143093714"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p149016304375"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table104901730153713" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row184901830203710"><th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p7490173010372">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p549010307378">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row449013309373"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p163951558386"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section18886457152915">Parameter</a></p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p2490143033716">Parameter对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p8490193043711"><strong>示例：</strong>获取当前Parameter对象。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1249016303372" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">const</span> parameter = hvigor.<span class="hljs-title function_">getParameter</span>();</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 688px;"><h3 id="section131538444401">configEvaluated<i class="anchor-icon anchor-icon-link" anchorid="section131538444401" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1915314444019">configEvaluated(fn: (HvigorConfig) =&gt; {}): void</p> <p id="ZH-CN_TOPIC_0000002478334326__p14153644204017">添加一个config文件评估完成的回调函数。</p> <p id="ZH-CN_TOPIC_0000002478334326__p101532442406"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p3153164419401"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table415384415401" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row6153544174016"><th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p14153144104012">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p17154194434011">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p51541446401">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p6154164413404">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1154104424017"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p5154644134012">fn</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p015416446400">(<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section7253174081515">HvigorConfig</a>) =&gt; {}</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p14154544134014">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1154344164018">一个入参为空或者为hvigorConfig的方法</p> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334326__p1190019174812">此API写在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-life-cycle#section810245135914">hvigorconfig.ts文件</a>中才会生效，在构建生命周期的初始化阶段被执行。</p> </div></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p18154164454010"><strong>示例：</strong>注册configEvaluated hook。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen315412446408" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// hvigorconfig.ts文件</span></li><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span></li><li>hvigor.<span class="hljs-title function_">configEvaluated</span>(<span class="hljs-function"><span class="hljs-params">hvigorConfig</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'configEvaluated'</span>);</li><li>})</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 688px;"><h3 id="section1171615186492">beforeNodeEvaluate<i class="anchor-icon anchor-icon-link" anchorid="section1171615186492" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1671611812497">beforeNodeEvaluate(fn: (HvigorNode) =&gt; {}): void</p> <p id="ZH-CN_TOPIC_0000002478334326__p1924642214515">为所有的node添加一个node评估前的回调函数。</p> <p id="ZH-CN_TOPIC_0000002478334326__p127168186494"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p2716121814912"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table2716118134910" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1271681824917"><th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p771691804913">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p8716018194920">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p17716121810497">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p18716518154914">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1671631874918"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p16716118134916">fn</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p171620183495">(<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section14832104719474">HvigorNode</a>) =&gt; {}</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1171617181493">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p371671894919">一个入参为空或者为HvigorNode的方法</p> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334326__p134294814812">此API写在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-life-cycle#section810245135914">hvigorconfig.ts文件</a>中才会生效，在构建生命周期的初始化阶段被执行。</p> </div></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p17716718174914"><strong>示例：</strong>注册beforeNodeEvaluate hook。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen19717918134912" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// hvigorconfig.ts文件</span></li><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li>hvigor.<span class="hljs-title function_">beforeNodeEvaluate</span>(<span class="hljs-function"><span class="hljs-params">hvigorNode</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'beforeNodeEvaluate'</span>);</li><li>})</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 572px;"><h3 id="section6699172825214">afterNodeEvaluate<i class="anchor-icon anchor-icon-link" anchorid="section6699172825214" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p269932820522">afterNodeEvaluate(fn: (HvigorNode) =&gt; {}): void</p> <p id="ZH-CN_TOPIC_0000002478334326__p16699142818522">为所有的node添加一个node评估后的回调函数。</p> <p id="ZH-CN_TOPIC_0000002478334326__p169992885216"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p14699192805216"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table10699928165216" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row15700828145217"><th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1870019280522">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1870018282524">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p87002028145217">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p8700132812522">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1170010281524"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p970012815214">fn</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p970052825215">(<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section14832104719474">HvigorNode</a>) =&gt; {}</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p137001285527">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p16700428175220">一个入参为空或者为HvigorNode的方法</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p4700152812522"><strong>示例：</strong>注册afterNodeEvaluate hook。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen12700528155218" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li>hvigor.<span class="hljs-title function_">afterNodeEvaluate</span>(<span class="hljs-function"><span class="hljs-params">hvigorNode</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'afterNodeEvaluate'</span>);</li><li>})</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 688px;"><h3 id="section98468025419">nodesInitialized<i class="anchor-icon anchor-icon-link" anchorid="section98468025419" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p2846170195415">nodesInitialized(fn: (Hvigor) =&gt; {}): void</p> <p id="ZH-CN_TOPIC_0000002478334326__p584613017540">添加一个node初始化完成的回调函数。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1984600105414"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p15846205543"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table13846901543" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row6846120175411"><th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p14846506545">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p0846190105412">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1984612025416">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1684616085410">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row2847101542"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p148472005547">fn</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p12847190165418">(<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section64891890155">Hvigor</a>) =&gt; {}</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p18847190145419">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p168473013542">一个入参为空或者为Hvigor对象的方法</p> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334326__p114911513164814">此API写在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-life-cycle#section810245135914">hvigorconfig.ts文件</a>中才会生效，在构建生命周期的初始化阶段被执行。</p> </div></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p88471402549"><strong>示例：</strong>注册nodesInitialized hook。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen184714012541" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// hvigorconfig.ts文件</span></li><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li>hvigor.<span class="hljs-title function_">nodesInitialized</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'nodesInitialized'</span>);</li><li>})</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 764px;"><h3 id="section104511551152118">nodesEvaluated<i class="anchor-icon anchor-icon-link" anchorid="section104511551152118" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p11165102361410">nodesEvaluated(fn: (Hvigor) =&gt; {}): void</p> <p id="ZH-CN_TOPIC_0000002478334326__p1832310118233">添加hvigor配置阶段完成之后执行的回调函数，此函数在配置阶段结束之前使用方可有效。在配置阶段中接口使用场景例如节点插件上下文信息延迟获取、任务延迟注册等。添加的回调函数是以队列的形式存储，遵循先进先出原则，先添加的回调会先被执行。</p> <p id="ZH-CN_TOPIC_0000002478334326__p171765013198"><strong>起始版本：</strong>Hvigor 4.0.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p16860124731910"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table113591838192116" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1535923815213"><th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p183591738112115">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p18359173811219">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p19359338122110">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p12360143842119">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row536023862115"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p1136019385217">fn</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p1836014381218">(<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section64891890155">Hvigor</a>) =&gt; {}</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p11360103862110">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p536023842117">一个入参为空或者为Hvigor对象的方法</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p24062721113"><strong>示例：</strong>工程节点获取子节点插件上下文信息。</p> <div class="p" id="ZH-CN_TOPIC_0000002478334326__p1054245512166">在Hvigor中，工程节点插件加载要优先于模块节点插件加载顺序，若想实现在工程节点查找子节点注册task的上下文信息，则需要使用此接口，等待全部节点加载完成之后去执行。<div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1557141881318" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">OhosHapContext</span>, <span class="hljs-title class_">OhosPluginId</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@ohos/hvigor-ohos-plugin"</span>;</li><li>hvigor.<span class="hljs-title function_">nodesEvaluated</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-comment">// 等待全部节点加载完成之后获取子节点信息</span></li><li>  hvigor.<span class="hljs-title function_">getRootNode</span>().<span class="hljs-title function_">subNodes</span>(<span class="hljs-function"><span class="hljs-params">subNode</span> =&gt;</span> {</li><li>    <span class="hljs-keyword">const</span> hapContext = subNode.<span class="hljs-title function_">getContext</span>(<span class="hljs-title class_">OhosPluginId</span>.<span class="hljs-property">OHOS_HAP_PLUGIN</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">OhosHapContext</span>;</li><li>  });</li><li>});</li></ol></pre></div></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 572px;"><h3 id="section2557310417">taskGraphResolved<i class="anchor-icon anchor-icon-link" anchorid="section2557310417" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p5558110311">taskGraphResolved(fn: (Hvigor) =&gt; {}): void</p> <p id="ZH-CN_TOPIC_0000002478334326__p155821012118">添加一个任务图解析完毕的回调函数。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1755818103118"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p125587101915"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table35581810912" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row255819101211"><th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p855891015113">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p1055801014117">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p5558710716">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p855812101114">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row115581310516"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p17558191018117">fn</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p205587101818">(<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section64891890155">Hvigor</a>) =&gt; {}</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1558910913">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1555811017112">一个入参为空或者为Hvigor对象的方法</p> </td> </tr>  </tbody></table></div> </div> <div class="p" id="ZH-CN_TOPIC_0000002478334326__p20558161013114"><strong>示例：</strong>添加一个任务图解析完毕的回调函数。<div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen255817101413" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li>hvigor.<span class="hljs-title function_">taskGraphResolved</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'taskGraphResolved'</span>);</li><li>});</li></ol></pre></div></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 644px;"><h3 id="section1596051018417">buildFinished<i class="anchor-icon anchor-icon-link" anchorid="section1596051018417" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1996091012417">buildFinished(fn: (BuildResult) =&gt; {}): void</p> <p id="ZH-CN_TOPIC_0000002478334326__p996018106415">添加一个构建结束的回调函数。</p> <p id="ZH-CN_TOPIC_0000002478334326__p119608104413"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p6960141010414"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1396081012410" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row39616104410"><th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p14961510542">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p0961191011420">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p15961141016416">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1396111101349">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1196110104419"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p59619102411">fn</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p99615101546">(<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section1476618469121">BuildResult</a>) =&gt; {}</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p17961810343">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p179617101446">一个入参为空或者为BuildResult对象的方法</p> </td> </tr>  </tbody></table></div> </div> <div class="p" id="ZH-CN_TOPIC_0000002478334326__p39611110047"><strong>示例：</strong>获取构建结束的信息，如果是异常结束则打印出信息。<div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen340095516512" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li>hvigor.<span class="hljs-title function_">buildFinished</span>(<span class="hljs-function"><span class="hljs-params">buildResult</span> =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (buildResult.<span class="hljs-title function_">getError</span>()) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buildResult.<span class="hljs-title function_">getError</span>().<span class="hljs-property">stack</span>);</li><li>  }</li><li>})</li></ol></pre></div></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 524px;"><h3 id="section84242071619">getCommandEntryTask<i class="anchor-icon anchor-icon-link" anchorid="section84242071619" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1842418718620">getCommandEntryTask(): string[] | undefined</p> <p id="ZH-CN_TOPIC_0000002478334326__p17424197868">获取构建的入口任务名字符串数组。</p> <p id="ZH-CN_TOPIC_0000002478334326__p17823241710"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p128031218714"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1980411211974" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1680410211715"><th align="left" class="cellrowborder" id="mcps1.3.16.6.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p8804821277">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p38046211677">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1680415212713"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p69711247151019">string[] | undefined</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p1180419217719">构建的入口任务名字符串数组，如果不存在返回undefined</p> </td> </tr>  </tbody></table></div> </div> <div class="p" id="ZH-CN_TOPIC_0000002478334326__p44241970612"><strong>示例：</strong>获取入口任务并打印出来。<div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen154246711611" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hvigor.<span class="hljs-title function_">getCommandEntryTask</span>());</li></ol></pre></div></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 675px;"><h3 id="section94233439916">isCommandEntryTask<i class="anchor-icon anchor-icon-link" anchorid="section94233439916" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p22563813105">isCommandEntryTask(taskName: string): boolean</p> <p id="ZH-CN_TOPIC_0000002478334326__p14423194315920">判断是否是命令入口任务。</p> <p id="ZH-CN_TOPIC_0000002478334326__p24243431696"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p12741731159"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table37411631957" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row47411731515"><th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p137417315515">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p97411531556">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1174143951">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p157424311511">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row6742631459"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p16742634515">taskName</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p774218316515">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p47421430520">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p167425314514">任务名</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1742494318920"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table14424184318910" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row134245431493"><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p144242431995">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p74243432917">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row194241643793"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p84243431911">boolean</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p1842494320913">是否是入口任务</p> </td> </tr>  </tbody></table></div> </div> <div class="p" id="ZH-CN_TOPIC_0000002478334326__p154247431098"><strong>示例：</strong>判断是否是assembleHap任务并打印出来。<div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen19424114316913" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hvigor.<span class="hljs-title function_">isCommandEntryTask</span>(<span class="hljs-string">'assembleHap'</span>));</li></ol></pre></div></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 723px;"><h2 id="section208181154171019">getNode<i class="anchor-icon anchor-icon-link" anchorid="section208181154171019" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p1854884021013">getNode(scriptPath: string): HvigorNode | undefined</p> <p id="ZH-CN_TOPIC_0000002478334326__p17548154041016">传入hvigorfile.ts脚本文件路径获取当前节点对象，如果入参scriptPath未指向本工程内的hvigorfile.ts则返回undefined。</p> <p id="ZH-CN_TOPIC_0000002478334326__p754819408104"><strong>起始版本：</strong>Hvigor 4.0.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p1154884016104"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table754894013101" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row185493408108"><th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p45491740151019">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p135493408109">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1954994071018">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p11549194018108">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row10549240121016"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1054913406109">scriptPath</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p14549154021014">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1754944014105">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p5549134051018">hvigorfile.ts脚本全路径</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p14549740101010"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1154964010107" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row11549740111012"><th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1654912401109">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p105491040121016">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row145491240101013"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p7549194041018"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section14832104719474">HvigorNode</a> | undefined</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p654914081011">hvigor节点对象，如果入参scriptPath未指向本工程内的hvigorfile.ts则返回undefined</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p45501940141014"><strong>示例：</strong>获取当前节点对象。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen9550540161020" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { getNode } <span class="hljs-keyword">from</span> <span class="hljs-string">"@ohos/hvigor"</span>;</li><li><span class="hljs-keyword">const</span> node = <span class="hljs-title function_">getNode</span>(__filename);</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 116px;"><h2 id="section1476618469121">BuildResult<i class="anchor-icon anchor-icon-link" anchorid="section1476618469121" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p650295711121">代表构建结果的对象，如果是异常结束则会包含异常的信息。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 620px;"><h3 id="section1188104310481" class="firsth2">getError<i class="anchor-icon anchor-icon-link" anchorid="section1188104310481" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p378943615489">getError(): Error | null</p> <p id="ZH-CN_TOPIC_0000002478334326__p10789336164814">获取异常信息。没有异常则返回null。</p> <p id="ZH-CN_TOPIC_0000002478334326__p14690182514716"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p207891236134816"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table127892362488" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row15789163611481"><th align="left" class="cellrowborder" id="mcps1.3.20.6.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1378914364481">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p77891836134818">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1178953614818"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p7790163674815">Error | null</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p19790173624818">异常信息。没有异常则为null。</p> </td> </tr>  </tbody></table></div> </div> <div class="p" id="ZH-CN_TOPIC_0000002478334326__p9400151671418"><strong>示例：</strong>获取构建结束的信息，如果是异常结束则打印出信息。<div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen4400316131410" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li>hvigor.<span class="hljs-title function_">buildFinished</span>(<span class="hljs-function"><span class="hljs-params">buildResult</span> =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (buildResult.<span class="hljs-title function_">getError</span>()) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buildResult.<span class="hljs-title function_">getError</span>().<span class="hljs-property">stack</span>);</li><li>  }</li><li>})</li></ol></pre></div></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 339px;"><h3 id="section2933164945020">getReportJson<i class="anchor-icon anchor-icon-link" anchorid="section2933164945020" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p2933154925015">getReportJson(): any</p> <p id="ZH-CN_TOPIC_0000002478334326__p893374910501">获取本次构建的可视化记录report.json结果。</p> <p id="ZH-CN_TOPIC_0000002478334326__p7198164310474"><strong>起始版本：</strong>Hvigor 5.0.10</p> <p id="ZH-CN_TOPIC_0000002478334326__p20933164985019"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table79337496502" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row2093394910508"><th align="left" class="cellrowborder" id="mcps1.3.21.6.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p6933104917506">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p119331149105011">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row993315492503"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p89330496503">any</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p993314945013">本次构建的可视化记录report.json结果。</p> </td> </tr>  </tbody></table></div> </div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p11204629161915">不同类型的构建事件具有不同结构，以下为典型结构示例：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334326__screen14159050287" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// report.json</span></li><li>{</li><li>  <span class=""><span class="hljs-string">"version"</span></span><span class="">: </span><span class=""><span class="hljs-string">"2.0"</span></span><span class="">, </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">固定字段</span></span></li><li>  <span class=""><span class="hljs-string">"ppid"</span></span><span class="">: </span><span class=""><span class="hljs-number">524</span></span><span class="">, </span><span class=""><span class="hljs-comment">// process.ppid</span></span></li><li>  <span class=""><span class="hljs-string">"events"</span></span><span class="">: </span>[ <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">构建事件</span></span></li><li>    ...</li><li>    {</li><li>      <span class=""><span class="hljs-string">"head"</span></span><span class="">: </span>{</li><li>        <span class=""><span class="hljs-string">"id"</span></span><span class="">: </span><span class=""><span class="hljs-string">"61068546-11d9-49d0-baa7-733e167af7d6"</span></span><span class="">, </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">事件</span></span><span class=""><span class="hljs-comment">id</span></span></li><li>        <span class=""><span class="hljs-string">"name"</span></span><span class="">: </span><span class=""><span class="hljs-string">"Finished :entry:default@PreBuild"</span></span><span class="">, </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">事件</span></span><span class=""><span class="hljs-comment">name</span></span></li><li>        <span class=""><span class="hljs-string">"description"</span></span><span class="">: </span><span class=""><span class="hljs-string">"Pre-build in the stage model."</span></span><span class="">,</span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">描述</span></span></li><li>        <span class=""><span class="hljs-string">"type"</span></span><span class="">: </span><span class=""><span class="hljs-string">"log"</span> </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">类型</span></span></li><li>      }<span class="">,</span></li><li>      <span class=""><span class="hljs-string">"body"</span></span><span class="">: </span>{</li><li>        <span class=""><span class="hljs-string">"pid"</span></span><span class="">: </span><span class=""><span class="hljs-number">3960</span></span><span class="">, </span><span class=""><span class="hljs-comment">// process.pid</span></span></li><li>        <span class=""><span class="hljs-string">"tid"</span></span><span class="">: </span><span class=""><span class="hljs-string">"Main Thread"</span></span><span class="">, </span><span class=""><span class="hljs-comment">// thread id</span></span></li><li>        <span class=""><span class="hljs-string">"startTime"</span></span><span class="">: </span><span class=""><span class="hljs-number">1280741873226000</span></span><span class="">, </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开始时间</span></span></li><li>        <span class=""><span class="hljs-string">"endTime"</span></span><span class="">: </span><span class=""><span class="hljs-number">1280741896325200</span></span><span class="">, </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">结束时间</span></span></li><li>        <span class=""><span class="hljs-string">"totalTime"</span></span><span class="">: </span><span class=""><span class="hljs-number">22868300</span> </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">总计时间</span></span></li><li>      }<span class="">,</span></li><li>      <span class=""><span class="hljs-string">"additional"</span></span><span class="">: </span>{</li><li>        <span class=""><span class="hljs-string">"logType"</span></span><span class="">: </span><span class=""><span class="hljs-string">"info"</span></span><span class="">, </span><span class=""><span class="hljs-comment">// log</span></span><span class=""><span class="hljs-comment">类型</span></span></li><li>        <span class=""><span class="hljs-string">"children"</span></span><span class="">: </span>[]<span class="">, </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">子事件</span></span><span class=""><span class="hljs-comment">id</span></span><span class=""><span class="hljs-comment">列表</span></span></li><li>      }</li><li>    }</li><li>  ]<span class="">,</span></li><li>  <span class=""><span class="hljs-string">"workLog"</span></span><span class="">: </span>[]</li><li>}</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p14956115135414"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen4756129379" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class=""><span class="hljs-keyword">import</span> </span>{ appTasks } <span class=""><span class="hljs-keyword">from</span> </span><span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span> </span>{ <span class="">hvigor</span>, <span class=""><span class="hljs-title class_">FileUtil</span> </span>} <span class=""><span class="hljs-keyword">from</span> </span><span class=""><span class="hljs-string">'@ohos/hvigor'</span></span>;</li><li>
</li><li><span class="">hvigor</span>.<span class=""><span class="hljs-title function_">buildFinished</span></span>(<span class="hljs-function"><span class="hljs-params">buildResult</span> =&gt;</span> {</li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">将数据写入指定</span></span><span class=""><span class="hljs-comment">path</span></span><span class=""><span class="hljs-comment">的文件中</span></span></li><li>  <span class=""><span class="hljs-keyword">const</span> </span><span class="">json5FilePath </span>= <span class=""><span class="hljs-title class_">FileUtil</span></span>.<span class=""><span class="hljs-title function_">pathResolve</span></span>(<span class=""><span class="hljs-string">'D:</span></span><span class=""><span class="hljs-string">\\</span></span><span class=""><span class="hljs-string">'</span></span>, <span class=""><span class="hljs-string">'testJson.json5'</span></span>);</li><li>  <span class=""><span class="hljs-title class_">FileUtil</span></span>.<span class=""><span class="hljs-title function_">ensureFileSync</span></span>(<span class="">json5FilePath</span>);</li><li>  <span class=""><span class="hljs-title class_">FileUtil</span></span>.<span class=""><span class="hljs-title function_">writeFileSync</span></span>(<span class="">json5FilePath</span>, <span class=""><span class="hljs-title class_">JSON</span></span>.<span class=""><span class="hljs-title function_">stringify</span></span>(buildResult.<span class=""><span class="hljs-title function_">getReportJson</span></span>(), <span class=""><span class="hljs-literal">null</span></span>, <span class=""><span class="hljs-number">2</span></span>));</li><li>})</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> <div class="tiledSection" style="contain-intrinsic-size: auto 116px;"><h2 id="section7253174081515">HvigorConfig<i class="anchor-icon anchor-icon-link" anchorid="section7253174081515" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p7946164315159">HvigorConfig对象是在node对象被创建之前用来保存每个节点的描述信息的对象。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 524px;"><h3 id="section1651815560203" class="firsth2">getRootNodeDescriptor<i class="anchor-icon anchor-icon-link" anchorid="section1651815560203" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p951813562204">getRootNodeDescriptor(): HvigorNodeDescriptor</p> <p id="ZH-CN_TOPIC_0000002478334326__p2028123192112">获取RootNode的描述对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p114341117184817"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p570233952115"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table3702339182113" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row187021039152116"><th align="left" class="cellrowborder" id="mcps1.3.27.6.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p19702339202114">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p137025396213">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row270293911216"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p9955244152119"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section1914012226435">HvigorNodeDescriptor</a></p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p143310546218">根节点的节点描述对象</p> </td> </tr>  </tbody></table></div> </div> <div class="p" id="ZH-CN_TOPIC_0000002478334326__p5519125612203"><strong>示例：</strong>获取构建的所有节点描述对象。<div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1751955611202" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">const</span> rootNodeDescriptor = hvigor.<span class="hljs-title function_">getHvigorConfig</span>().<span class="hljs-title function_">getRootNodeDescriptor</span>();</li></ol></pre></div></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 524px;"><h3 id="section1550612249242">getAllNodeDescriptor<i class="anchor-icon anchor-icon-link" anchorid="section1550612249242" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p16506124192412">getAllNodeDescriptor(): HvigorNodeDescriptor[]</p> <p id="ZH-CN_TOPIC_0000002478334326__p731815619240">获取所有的node描述对象的数组。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1586163874810"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p1250672416246"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1350712242242" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row16507524152419"><th align="left" class="cellrowborder" id="mcps1.3.28.6.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p0507124172416">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p5507324102419">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1250722432411"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1050712419243"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section1914012226435">HvigorNodeDescriptor</a>[]</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p950752410248">所有节点的节点描述对象</p> </td> </tr>  </tbody></table></div> </div> <div class="p" id="ZH-CN_TOPIC_0000002478334326__p1250742412246"><strong>示例：</strong>获取构建结束的信息，如果是异常结束则打印出信息。<div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1850782472412" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">const</span> allNodeDescriptors = hvigor.<span class="hljs-title function_">getHvigorConfig</span>().<span class="hljs-title function_">getAllNodeDescriptor</span>();</li></ol></pre></div></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 675px;"><h3 id="section19119133922514">getNodeDescriptorByName<i class="anchor-icon anchor-icon-link" anchorid="section19119133922514" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p611933922516">getNodeDescriptorByName(name: string): HvigorNodeDescriptor</p> <p id="ZH-CN_TOPIC_0000002478334326__p1311993914255">根据节点名称获取node描述对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p127901849164820"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p14872113519313"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table188725359311" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row387212351318"><th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p2872103543110">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p1887311358317">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1187313358315">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p15873123513113">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row78731335103117"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p1287315354317">name</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p138731835153115">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p28731935133116">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p112200173211">根据此name查找NodeDescriptor</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p11197393254"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table19119163916253" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1119193915254"><th align="left" class="cellrowborder" id="mcps1.3.29.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p8119103915252">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p171196393255">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row17119123992517"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1811918392257"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section1914012226435">HvigorNodeDescriptor</a></p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p012043914257">根据名称获取的节点描述对象</p> </td> </tr>  </tbody></table></div> </div> <div class="p" id="ZH-CN_TOPIC_0000002478334326__p1512017395256"><strong>示例：</strong>获取构建结束的信息，如果是异常结束则打印出信息。<div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen15120163992517" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">const</span> entryNodeDescriptors = hvigor.<span class="hljs-title function_">getHvigorConfig</span>().<span class="hljs-title function_">getNodeDescriptorByName</span>(<span class="hljs-string">'entry'</span>);</li></ol></pre></div></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1426px;"><h3 id="section558816280274">includeNode<i class="anchor-icon anchor-icon-link" anchorid="section558816280274" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p65886289278">includeNode(name: string, srcPath: string, extraOptions?: Record&lt;string, any&gt;): void</p> <p id="ZH-CN_TOPIC_0000002478334326__p3588112832719">添加一个node。</p> <p id="ZH-CN_TOPIC_0000002478334326__p383542164917"><strong>起始版本：</strong>Hvigor 5.4.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p64691446173213"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table04707462326" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row204705469327"><th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p54701846193215">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p6470746153220">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p19470114619327">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p547011469326">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row2470154643218"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p2047018461327">name</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p8872141023313">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p15470124612321">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p377081453316">要添加的node的name</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row1887919547327"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p1387995483219">srcPath</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p1687912543322">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p7879155419329">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p38791541324">要添加的node的srcPath</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row2937165013324"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p0937750153219">extraOptions</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p11937135043214">Record&lt;string, any&gt;</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p16937850183216">否</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1593755014323">可以通过此参数传入额外的配置信息，会被解析成为此node的targets</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p9588628172710"></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334326__p13802354154719">此API写在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-life-cycle#section810245135914">hvigorconfig.ts文件</a>中才会生效，在构建生命周期的初始化阶段被执行。</p> </div></div></div> <div class="p" id="ZH-CN_TOPIC_0000002478334326__p1858912812714"><strong>示例1：</strong>添加一个名为exampleNodeName且无额外信息的node。<div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1858982820275" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// hvigorconfig.ts文件</span></li><li><span class=""><span class="hljs-keyword">import</span> </span><span class="">{ hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</span></li><li>
</li><li><span class=""><span class="hljs-keyword">const</span> hvigorConfig = hvigor.<span class="hljs-title function_">getHvigorConfig</span>();</span></li><li><span class="">hvigorConfig.<span class="hljs-title function_">includeNode</span>(<span class="hljs-string">'exampleNodeName'</span>, <span class="hljs-string">'./exampleNodeName'</span>);</span></li></ol></pre></div></div> </div> <div class="p" id="ZH-CN_TOPIC_0000002478334326__p852113683819"><strong>示例2：</strong>添加一个名为exampleNodeName且附带targets信息的node。<div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen71133516412" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// hvigorconfig.ts文件</span></li><li><span class=""><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</span></li><li>
</li><li><span class=""><span class="hljs-keyword">const</span> hvigorConfig = hvigor.<span class="hljs-title function_">getHvigorConfig</span>();</span></li><li><span class="">hvigorConfig.<span class="hljs-title function_">includeNode</span>(<span class="hljs-string">'exampleNodeName'</span>, <span class="hljs-string">'./exampleNodeName'</span>, {</span></li><li><span class="">  <span class="hljs-string">"targets"</span>: [</span></li><li><span class="">    {</span></li><li><span class="">      <span class="hljs-string">"name"</span>: <span class="hljs-string">"default"</span>,</span></li><li><span class="">      <span class="hljs-string">"applyToProducts"</span>: [</span></li><li><span class="">        <span class="hljs-string">"default"</span></span></li><li><span class="">      ]</span></li><li><span class="">    },</span></li><li><span class="">    {</span></li><li><span class="">      <span class="hljs-string">"name"</span>: <span class="hljs-string">"targetTest1"</span>,</span></li><li><span class="">      <span class="hljs-string">"applyToProducts"</span>: [</span></li><li><span class="">        <span class="hljs-string">"default"</span></span></li><li><span class="">      ]</span></li><li><span class="">    }</span></li><li><span class="">  ]</span></li><li><span class="">})</span><span class="">;</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 736px;"><h3 id="section14183309272">excludeNodeByName<i class="anchor-icon anchor-icon-link" anchorid="section14183309272" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p19419203092710">excludeNodeByName(name: string): void</p> <p id="ZH-CN_TOPIC_0000002478334326__p64199300277">通过name排除一个Node。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1692313471413">从DevEco Studio 6.0.0 Beta3版本开始，支持排除工程中不存在的模块，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-experimental-properties#section11663628141317">通过Hvigor执行ohpm install</a>。</p> <p id="ZH-CN_TOPIC_0000002478334326__p685553316498"><strong>起始版本：</strong>Hvigor 5.4.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p01251644114315"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table111256444439" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row16126844114314"><th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p1912619445430">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p121266449431">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1112634494318">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p10126344184316">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row7126114434316"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334326__p1712664410434">name</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334326__p71261144194316">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p0126744104315">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p012664474318">要排除的node的name</p> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334326__p14319621145115">此API写在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-life-cycle#section810245135914">hvigorconfig.ts文件</a>中才会生效，在构建生命周期的初始化阶段被执行。</p> </div></div></div> <div class="p" id="ZH-CN_TOPIC_0000002478334326__p7419130192716"><strong>示例：</strong>排除名为exampleNodeName的Node。<div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen5719181834513" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// hvigorconfig.ts文件</span></li><li><span class=""><span class="hljs-keyword">import</span> </span><span class="">{ hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</span></li><li>
</li><li><span class=""><span class="hljs-keyword">const</span> hvigorConfig = hvigor.<span class="hljs-title function_">getHvigorConfig</span>();</span></li><li><span class="">hvigorConfig.<span class="hljs-title function_">excludeNodeByName</span>(<span class="hljs-string">'exampleNodeName'</span>);</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 116px;"><h2 id="section1914012226435">HvigorNodeDescriptor<i class="anchor-icon anchor-icon-link" anchorid="section1914012226435" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p899583744310">此对象为hvigor的节点描述对象，hvigor在构建时会通过此对象来构造出hvigorNode对象。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 249px;"><h3 id="section78981035153419" class="firsth2">属性<i class="anchor-icon anchor-icon-link" anchorid="section78981035153419" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table id="table2323104243516" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row932334217358"><th align="left" class="cellrowborder" id="mcps1.3.33.2.1.6.1.1" valign="top" width="15.770000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p13234425353">成员</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.2.1.6.1.2" valign="top" width="19.18%"><p id="ZH-CN_TOPIC_0000002478334326__p13323342153510">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.2.1.6.1.3" valign="top" width="14.540000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p714918294527">只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.2.1.6.1.4" valign="top" width="29.42%"><p id="ZH-CN_TOPIC_0000002478334326__p2324114293517">说明</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.2.1.6.1.5" valign="top" width="21.09%"><p id="ZH-CN_TOPIC_0000002478334326__p17324194213356">开始支持的版本</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row183249421353"><td class="cellrowborder" valign="top" width="15.770000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p19324144203518">name</p> </td> <td class="cellrowborder" valign="top" width="19.18%"><p id="ZH-CN_TOPIC_0000002478334326__p143243425352">string</p> </td> <td class="cellrowborder" valign="top" width="14.540000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p14149029155212">否</p> </td> <td class="cellrowborder" valign="top" width="29.42%"><p id="ZH-CN_TOPIC_0000002478334326__p133241142193517">节点的名称</p> </td> <td class="cellrowborder" valign="top" width="21.09%"><p id="ZH-CN_TOPIC_0000002478334326__p16324142153516">Hvigor 4.3.0</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row12324442133512"><td class="cellrowborder" valign="top" width="15.770000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p19324124223518">srcPath</p> </td> <td class="cellrowborder" valign="top" width="19.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1432415425351">string</p> </td> <td class="cellrowborder" valign="top" width="14.540000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p12149192955217">否</p> </td> <td class="cellrowborder" valign="top" width="29.42%"><p id="ZH-CN_TOPIC_0000002478334326__p16324164283516">节点的src路径</p> </td> <td class="cellrowborder" valign="top" width="21.09%"><p id="ZH-CN_TOPIC_0000002478334326__p73241842163519">Hvigor 4.3.0</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row193241642133510"><td class="cellrowborder" valign="top" width="15.770000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p15324104214356">extraOptions</p> </td> <td class="cellrowborder" valign="top" width="19.18%"><p id="ZH-CN_TOPIC_0000002478334326__p18324242123519">Map&lt;string, any&gt;</p> </td> <td class="cellrowborder" valign="top" width="14.540000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p21491329105212">否</p> </td> <td class="cellrowborder" valign="top" width="29.42%"><p id="ZH-CN_TOPIC_0000002478334326__p73248424359">自定义属性，用来保存传递数据</p> </td> <td class="cellrowborder" valign="top" width="21.09%"><p id="ZH-CN_TOPIC_0000002478334326__p732434223514">Hvigor 4.3.0</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 620px;"><h3 id="section9204104863519">getChildNode<i class="anchor-icon anchor-icon-link" anchorid="section9204104863519" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p988915184413">getChildNode(): HvigorNodeDescriptor[] | undefined</p> <p id="ZH-CN_TOPIC_0000002478334326__p783512365414">获取所有的子节点描述对象，不存在子节点则返回undefined。</p> <p id="ZH-CN_TOPIC_0000002478334326__p137231346184317"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p444111434213"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1352445427" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row6352044104214"><th align="left" class="cellrowborder" id="mcps1.3.34.6.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1335104410423">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p16351744144214">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row53513440423"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p735184419424"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section1914012226435">HvigorNodeDescriptor</a>[] | undefined</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p163574419422">所有的子节点描述对象，不存在子节点则返回undefined</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1942118586428"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen9740155974118" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// </span><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-life-cycle#li194356217319"><span class="hljs-comment">hvigorconfig.ts</span></a></li><li><span class="hljs-keyword">import</span> { hvigorConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">const</span> rootNodeDescriptors = hvigorConfig.<span class="hljs-title function_">getRootNodeDescriptor</span>();</li><li>rootNodeDescriptors.<span class="hljs-title function_">getChildNode</span>()?.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`child: <span class="hljs-subst">${child.name}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 572px;"><h3 id="section17142058153511">getRootNode<i class="anchor-icon anchor-icon-link" anchorid="section17142058153511" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p16591637366">getRootNode(): HvigorNodeDescriptor</p> <p id="ZH-CN_TOPIC_0000002478334326__p29388284438">获取根节点的节点描述对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p14397173810433"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p894693844415"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table12946163854417" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row179467384444"><th align="left" class="cellrowborder" id="mcps1.3.35.6.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p594611388442">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p394693844414">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1194683812448"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p494623815449"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section1914012226435">HvigorNodeDescriptor</a></p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p16946143816449">根节点的节点描述对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p83911416448"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen7641533183614" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// </span><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-life-cycle#li194356217319"><span class="hljs-comment">hvigorconfig.ts</span></a></li><li><span class="hljs-keyword">import</span> { hvigorConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">const</span> entryNodeDescriptor = hvigorConfig.<span class="hljs-title function_">getNodeDescriptorByName</span>(<span class="hljs-string">'entry'</span>);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`rootNode name: <span class="hljs-subst">${entryNodeDescriptor.getRootNode().name}</span>`</span>);</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 140px;"><h2 id="section1553414254713">Product<i class="anchor-icon anchor-icon-link" anchorid="section1553414254713" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p261163673716">HarmonyOS应用工程级配置中的Product信息接口。在调用Product的接口前，可以先通过OhosAppContext的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-build-expanding-context#section962214395515">getCurrentProduct</a>方法来获取本对象。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 169px;"><h3 id="section1971141114618" class="firsth2">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section1971141114618" tips="复制节点链接"></i></h3><div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen5103183219218" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Product</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 908px;"><h3 id="section1088912318482">getProductName<i class="anchor-icon anchor-icon-link" anchorid="section1088912318482" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p19681195820344">getProductName: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334326__p5803103616298">获取product名称。</p> <p id="ZH-CN_TOPIC_0000002478334326__p84185220532"></p> <p id="ZH-CN_TOPIC_0000002478334326__p0123631534"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table42221347163115" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row132226475315"><th align="left" class="cellrowborder" id="mcps1.3.38.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p52221047133118">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p5222114743111">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row20222204716316"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p1822216475311">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p2222347153118">product名称</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1518101210534">在工程级hvigorfile.ts中编写示例代码：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1145142618273" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">Product</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">实现自定义插件</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(</span><span class="hljs-keyword">async</span> <span class="">() </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>                <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">context</span></span><span class="">: </span><span class=""><span class="hljs-title class_">OhosAppContext</span> </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>                <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">currentProduct</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Product</span> </span><span class="">= </span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getCurrentProduct</span></span><span class="">()</span><span class="">;</span></li><li>                <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">currentProduct</span><span class="">.</span><span class=""><span class="hljs-title function_">getProductName</span></span><span class="">())</span><span class="">;</span></li><li>            <span class="">}</span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 908px;"><h3 id="section520205013493">getBundleType<i class="anchor-icon anchor-icon-link" anchorid="section520205013493" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p12665184312340">getBundleType: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334326__p680333619292">获取product使用的bundleType信息。</p> <p id="ZH-CN_TOPIC_0000002478334326__p34872285313"></p> <p id="ZH-CN_TOPIC_0000002478334326__p187559204538"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table734816920324" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row15348397322"><th align="left" class="cellrowborder" id="mcps1.3.39.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p33481291322">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p034812916323">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row183481295329"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p193489915321">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p123481598327">bundleType值</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p8570105205215">在工程级hvigorfile.ts中编写示例代码：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen2965131910281" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">Product</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">实现自定义插件</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(</span><span class="hljs-keyword">async</span> <span class="">() </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>                <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">context</span></span><span class="">: </span><span class=""><span class="hljs-title class_">OhosAppContext</span> </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>                <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">currentProduct</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Product</span> </span><span class="">= </span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getCurrentProduct</span></span><span class="">()</span><span class="">;</span></li><li>                <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">currentProduct</span><span class="">.</span><span class=""><span class="hljs-title function_">getBundleType</span></span><span class="">())</span><span class="">;</span></li><li>            <span class="">}</span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 908px;"><h3 id="section2272101219509">getBundleName<i class="anchor-icon anchor-icon-link" anchorid="section2272101219509" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p17550195173416">getBundleName: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334326__p12803173602912">获取product使用的bundleName信息。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1286723413535"></p> <p id="ZH-CN_TOPIC_0000002478334326__p1471103319535"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table799383314338" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1199313333313"><th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p799313310332">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p14993113393319">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row099312336332"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p159933335336">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p099310338336">bundleName值</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p54924065312">在工程级hvigorfile.ts中编写示例代码：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen538515622816" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">Product</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">实现自定义插件</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(</span><span class="hljs-keyword">async</span> <span class="">() </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>                <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">context</span></span><span class="">: </span><span class=""><span class="hljs-title class_">OhosAppContext</span> </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>                <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">currentProduct</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Product</span> </span><span class="">= </span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getCurrentProduct</span></span><span class="">()</span><span class="">;</span></li><li>                <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">currentProduct</span><span class="">.</span><span class=""><span class="hljs-title function_">getBundleName</span></span><span class="">())</span><span class="">;</span></li><li>            <span class="">}</span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 116px;"><h2 id="section12392182963714">Target<i class="anchor-icon anchor-icon-link" anchorid="section12392182963714" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p184251932173810">HarmonyOS应用模块级配置中的Target信息接口。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 169px;"><h3 id="section19794116183412" class="firsth2">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section19794116183412" tips="复制节点链接"></i></h3><div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen4765121813356" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Target</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 956px;"><h3 id="section39972213503">getCurrentProduct<i class="anchor-icon anchor-icon-link" anchorid="section39972213503" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p840295113916">getCurrentProduct: () =&gt; Product</p> <p id="ZH-CN_TOPIC_0000002478334326__p3130194015378">获取当前Target配置的Product。</p> <p id="ZH-CN_TOPIC_0000002478334326__p827464265416"></p> <p id="ZH-CN_TOPIC_0000002478334326__p12546104014546"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table93611468409" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row8361346124013"><th align="left" class="cellrowborder" id="mcps1.3.43.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p13369469401">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p2367469407">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row13634694012"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p1723965716403"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section1553414254713">Product</a></p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p17364463408">当前构建target应用的Product对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p7918538185417"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen87122102213" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">Target</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class="hljs-keyword">const</span> <span class="">hapContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">if</span> <span class="">(</span><span class="">!</span><span class="">hapContext</span><span class="">) </span><span class="">{</span></li><li>            <span class="hljs-keyword">return</span></li><li>        <span class="">}</span></li><li>        <span class="">hapContext</span><span class="">.</span><span class=""><span class="hljs-title function_">targets</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">target</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">Target</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>            <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">这里可以写入对每个</span></span><span class=""><span class="hljs-comment"> target </span></span><span class=""><span class="hljs-comment">的处理逻辑</span></span></li><li>            <span class="hljs-keyword">const</span> <span class="">currentProduct </span><span class="">= </span><span class="">target</span><span class="">.</span><span class=""><span class="hljs-title function_">getCurrentProduct</span></span><span class="">()</span><span class="">;</span></li><li>            <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Product Name: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">currentProduct</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">getProductName</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">()</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 956px;"><h3 id="section65531025195017">getBuildTargetOutputPath<i class="anchor-icon anchor-icon-link" anchorid="section65531025195017" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p3402185114396">getBuildTargetOutputPath: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334326__p12130104017373">获取当前target构建产物输出路径。</p> <p id="ZH-CN_TOPIC_0000002478334326__p281855311546"></p> <p id="ZH-CN_TOPIC_0000002478334326__p14625154135415"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1117441019433" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row6174810124314"><th align="left" class="cellrowborder" id="mcps1.3.44.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p171743105435">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.44.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p717401015430">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row9174121004313"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p717414108435">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p7174191094320">当前target构建产物输出路径</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p8363174818540"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1149202202313" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">Target</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class="hljs-keyword">const</span> <span class="">hapContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">if</span> <span class="">(</span><span class="">!</span><span class="">hapContext</span><span class="">) </span><span class="">{</span></li><li>            <span class="hljs-keyword">return</span></li><li>        <span class="">}</span></li><li>        <span class="">hapContext</span><span class="">.</span><span class=""><span class="hljs-title function_">targets</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">target</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">Target</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>            <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">这里可以写入对每个</span></span><span class=""><span class="hljs-comment"> target </span></span><span class=""><span class="hljs-comment">的处理逻辑</span></span></li><li>            <span class="hljs-keyword">const</span> <span class="">buildTargetOutputPath </span><span class="">= </span><span class="">target</span><span class="">.</span><span class=""><span class="hljs-title function_">getBuildTargetOutputPath</span></span><span class="">()</span><span class="">;</span></li><li>            <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Build Target Output Path: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">buildTargetOutputPath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 980px;"><h3 id="section17051225319">getTargetName<i class="anchor-icon anchor-icon-link" anchorid="section17051225319" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1894219311404">getTargetName: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334326__p10130440113714">获取target名称。</p> <p id="ZH-CN_TOPIC_0000002478334326__p91871117195511"></p> <p id="ZH-CN_TOPIC_0000002478334326__p716410152557"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table20932183917441" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row393218390445"><th align="left" class="cellrowborder" id="mcps1.3.45.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p2932639164415">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.45.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p159330397448">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row7933193919449"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p39331639164415">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p14933039124414">target名称</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p141056755510"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen627955842311" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">Target</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class="hljs-keyword">const</span> <span class="">hapContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">if</span> <span class="">(</span><span class="">!</span><span class="">hapContext</span><span class="">) </span><span class="">{</span></li><li>            <span class="hljs-keyword">return</span></li><li>        <span class="">}</span></li><li>        <span class="">hapContext</span><span class="">.</span><span class=""><span class="hljs-title function_">targets</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">target</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">Target</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>            <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">这里可以写入对每个</span></span><span class=""><span class="hljs-comment"> target </span></span><span class=""><span class="hljs-comment">的处理逻辑</span></span></li><li>            <span class="hljs-keyword">const</span> <span class="">targetName </span><span class="">= </span><span class="">target</span><span class="">.</span><span class=""><span class="hljs-title function_">getTargetName</span></span><span class="">()</span><span class="">;</span></li><li>            <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Target Name: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">targetName</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 116px;"><h2 id="section18886457152915">Parameter<i class="anchor-icon anchor-icon-link" anchorid="section18886457152915" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p18343203913116">“Parameter”是hvigor中的命令配置参数对象，可以通过<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section1349018305379">hvigor.getParameter()</a>方法获取。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1223px;"><h3 id="section1267617143620" class="firsth2">getProperty<i class="anchor-icon anchor-icon-link" anchorid="section1267617143620" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1967616753614">getProperty(key: string): any | undefined</p> <p id="ZH-CN_TOPIC_0000002478334326__p13676674369">获取properties配置指定key值的value值，若不存在配置时返回undefined。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1824582215517"><strong>起始版本：</strong>Hvigor 4.1.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p26765712368">示例：获取properties配置中指定key值的value值。</p> <ul id="ZH-CN_TOPIC_0000002478334326__ul1167667173615"><li id="li167687133611">命令行参数：--config properties.{key}={value}， 缩写-c properties.{key}={value}（相同key值时，命令行参数对应的value值优先）。</li><li id="li1467637193617">hvigor-config.json5配置文件：在"properties"属性中定义的配置项。<div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334326__screen20677107183610" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"properties"</span>: {</li><li>  <span class="hljs-string">"key"</span>: <span class="hljs-string">"value"</span></li><li>}</li></ol></pre></div></div> </li></ul> <p id="ZH-CN_TOPIC_0000002478334326__p867777163612"></p> <p id="ZH-CN_TOPIC_0000002478334326__p96776711366"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table12677576367" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1567718710361"><th align="left" class="cellrowborder" id="mcps1.3.47.9.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p126771373363">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.47.9.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p96771718362">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.47.9.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p967747113614">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.47.9.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p9677117113610">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row176775719366"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1167711763611">key</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p2067715718366">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p06771876366">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p46771778367">properties配置中的key</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p56772716364"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table5677167163612" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row19677197103610"><th align="left" class="cellrowborder" id="mcps1.3.47.11.1.3.1.1" valign="top" width="24.47%"><p id="ZH-CN_TOPIC_0000002478334326__p17677187113610">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.47.11.1.3.1.2" valign="top" width="75.53%"><p id="ZH-CN_TOPIC_0000002478334326__p196771173362">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row3677574363"><td class="cellrowborder" valign="top" width="24.47%"><p id="ZH-CN_TOPIC_0000002478334326__p11677167123615">any | undefined</p> </td> <td class="cellrowborder" valign="top" width="75.53%"><p id="ZH-CN_TOPIC_0000002478334326__p16773793618">properties配置中指定key对应的value值（string，number, boolean类型），若不存在配置时返回undefined</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p14677575361"><strong>示例：</strong></p> <p id="ZH-CN_TOPIC_0000002478334326__p16779715369">在hvigorfile.ts中添加代码。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1667711718361" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">const</span> key = hvigor.<span class="hljs-title function_">getParameter</span>().<span class="hljs-title function_">getProperty</span>(<span class="hljs-string">'key'</span>);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key);</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p1667787103614">执行命令hvigorw --sync -c properties.key=hello，控制台打印：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002478334326__screen156772075369" data-highlighted="yes"><ol class="linenums"><li>hello</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 752px;"><h3 id="section96777723618">getProperties<i class="anchor-icon anchor-icon-link" anchorid="section96777723618" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p196778723616">getProperties(): Properties</p> <p id="ZH-CN_TOPIC_0000002478334326__p2677137163610">获取properties所有配置的对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1767716718361"><strong>起始版本：</strong>Hvigor 4.1.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p567715719362"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1767767173617" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row967719718365"><th align="left" class="cellrowborder" id="mcps1.3.48.6.1.3.1.1" valign="top" width="33.879999999999995%"><p id="ZH-CN_TOPIC_0000002478334326__p196778712364">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.48.6.1.3.1.2" valign="top" width="66.12%"><p id="ZH-CN_TOPIC_0000002478334326__p2678207173614">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1867820712361"><td class="cellrowborder" valign="top" width="33.879999999999995%"><p id="ZH-CN_TOPIC_0000002478334326__p0678167143611">Properties</p> </td> <td class="cellrowborder" valign="top" width="66.12%"><p id="ZH-CN_TOPIC_0000002478334326__p17678107203612">Properties配置对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p167819717364"><strong>示例：</strong></p> <p id="ZH-CN_TOPIC_0000002478334326__p96783773619">在hvigorfile.ts中添加代码。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen467819743618" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">const</span> properties = hvigor.<span class="hljs-title function_">getParameter</span>().<span class="hljs-title function_">getProperties</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(properties[<span class="hljs-string">'key'</span>]);</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p1267887193619">执行命令hvigorw --sync -c properties.key=hello，控制台打印：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002478334326__screen18678477362" data-highlighted="yes"><ol class="linenums"><li>hello</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1105px;"><h3 id="section1933911490157">setProperty<i class="anchor-icon anchor-icon-link" anchorid="section1933911490157" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p163391549191510">setProperty(key: string, value: any): void</p> <p id="ZH-CN_TOPIC_0000002478334326__p10339104917154">设置properties对象指定key值的value值。</p> <p id="ZH-CN_TOPIC_0000002478334326__p16205181012139"><strong>起始版本：</strong>Hvigor 5.10.3</p> <p id="ZH-CN_TOPIC_0000002478334326__p9339184913151"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table17339144919150" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1734017494157"><th align="left" class="cellrowborder" id="mcps1.3.49.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p163401249141517">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.49.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p20340154911517">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.49.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p8340124914155">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.49.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1334016497157">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row9340184915155"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p173408494152">key</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p203411249181517">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p134113498156">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p6341949161513">hvigor-config.json5配置文件中properties字段的key值</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row153411949191519"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p23416491158">value</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p163411496151">any</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p14341184913151">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p93411449171515">hvigor-config.json5配置文件中properties字段的key值对应的value值</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1342174931519"></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334326__p15342184941519">在模块级hvigorfile.ts中调用该API不生效，请在工程级hvigorfile.ts中调用。</p> </div></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p10342194910153"><strong>示例：</strong></p> <p id="ZH-CN_TOPIC_0000002478334326__p1534234911513">在工程级hvigorfile.ts中添加代码。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen0342649121512" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> {hvigor, <span class="hljs-title class_">HvigorPlugin</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">import</span> {appTasks} <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">plugin</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">HvigorPlugin</span>{</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'before: '</span>, hvigor.<span class="hljs-title function_">getParameter</span>().<span class="hljs-title function_">getProperty</span>(<span class="hljs-string">'hvigor.analyzeHtml'</span>)); <span class="hljs-comment">// undefined</span></li><li>    hvigor.<span class="hljs-title function_">getParameter</span>().<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'hvigor.analyzeHtml'</span>, <span class="hljs-literal">true</span>);</li><li>    <span class="hljs-keyword">return</span> {</li><li>        <span class="hljs-attr">pluginId</span>:<span class="hljs-string">'example'</span>,</li><li>        <span class="hljs-attr">apply</span>: <span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'after: '</span>, hvigor.<span class="hljs-title function_">getParameter</span>().<span class="hljs-title function_">getProperty</span>(<span class="hljs-string">'hvigor.analyzeHtml'</span>)); <span class="hljs-comment">// true</span></li><li>        }</li><li>    };</li><li>}</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>    <span class="hljs-attr">system</span>: appTasks,  <span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></li><li>    <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">plugin</span>()]         <span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></li><li>};</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 855px;"><h3 id="section20678117183613">getExtParam<i class="anchor-icon anchor-icon-link" anchorid="section20678117183613" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p166782717360">getExtParam(key: string): string | undefined</p> <p id="ZH-CN_TOPIC_0000002478334326__p7678127103610">获取指定key值的-p扩展参数value值，若不存在配置时返回undefined。</p> <p id="ZH-CN_TOPIC_0000002478334326__p13678472367"><strong>起始版本：</strong>Hvigor 4.1.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p8678679361"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table967813713361" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row176782715366"><th align="left" class="cellrowborder" id="mcps1.3.50.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p36780712364">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1767818714369">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p2678177173616">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1867811783615">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row16783715361"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p10678117113615">key</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p06782723611">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p76786753611">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p767816763615">命令行参数-p配置中的key</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p3678172369"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table66781473366" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1767816720368"><th align="left" class="cellrowborder" id="mcps1.3.50.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p6678177173613">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p26786716363">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row106781875364"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p36781276362">string | undefined</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p1167813714360">指定key值对应的-p参数对应的value，配置不存在时undefined</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p166782763613"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen176781074361" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">const</span> extParam = hvigor.<span class="hljs-title function_">getParameter</span>().<span class="hljs-title function_">getExtParam</span>(<span class="hljs-string">'key'</span>);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(extParam);</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p186786783612">执行命令hvigorw --sync -p key=hello，控制台打印：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002478334326__screen1667813723616" data-highlighted="yes"><ol class="linenums"><li>hello</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 704px;"><h3 id="section76782073362">getExtParams<i class="anchor-icon anchor-icon-link" anchorid="section76782073362" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p667810723619">getExtParams(): Record&lt;string, string&gt;</p> <p id="ZH-CN_TOPIC_0000002478334326__p166782710366">获取全部的-p扩展参数对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p15678071366"><strong>起始版本：</strong>Hvigor 4.1.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p1667817763611"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table14678137123614" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row11678117163613"><th align="left" class="cellrowborder" id="mcps1.3.51.6.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p867918718366">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p6679970365">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row467914703610"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p867947123617">Record&lt;string, string&gt;</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p106792718364">命令行中所有配置的-p参数集合对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p867916743610"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen86793717364" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">const</span> extParams = hvigor.<span class="hljs-title function_">getParameter</span>().<span class="hljs-title function_">getExtParams</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(extParams[<span class="hljs-string">'key'</span>]);</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p116799743613">执行命令hvigorw --sync -p key=hello，控制台打印：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002478334326__screen19679117143617" data-highlighted="yes"><ol class="linenums"><li>hello</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 752px;"><h3 id="section1967917712367">getStartParams<i class="anchor-icon anchor-icon-link" anchorid="section1967917712367" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1267919753611">getStartParams(): StartParam</p> <p id="ZH-CN_TOPIC_0000002478334326__p1867912753619">获取hvigor启动参数：例如daemon开关，并行功能开关，增量功能开关，日志级别等。</p> <p id="ZH-CN_TOPIC_0000002478334326__p16791974364"><strong>起始版本：</strong>Hvigor 4.1.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p167917714360"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table56798793613" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row367911716368"><th align="left" class="cellrowborder" id="mcps1.3.52.6.1.4.1.1" valign="top" width="22.58%"><p id="ZH-CN_TOPIC_0000002478334326__p367916773610">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.4.1.2" valign="top" width="22.31%"><p id="ZH-CN_TOPIC_0000002478334326__p1567917123610">属性</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.4.1.3" valign="top" width="55.11000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p767912716363">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row166790753615"><td class="cellrowborder" valign="top" width="22.58%"><p id="ZH-CN_TOPIC_0000002478334326__p767912753615">StartParams</p> </td> <td class="cellrowborder" valign="top" width="22.31%"><p id="ZH-CN_TOPIC_0000002478334326__p8679973361">daemon: boolean</p> </td> <td class="cellrowborder" valign="top" width="55.11000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p146799719365">守护进程启用状态，true开启（默认开启）、false关闭</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row4679177193618"><td class="cellrowborder" valign="top" width="22.58%"><p id="ZH-CN_TOPIC_0000002478334326__p156791773368">StartParams</p> </td> <td class="cellrowborder" valign="top" width="22.31%"><p id="ZH-CN_TOPIC_0000002478334326__p1367914719366">parallel: boolean</p> </td> <td class="cellrowborder" valign="top" width="55.11000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p267915719368">并行编译能力启用状态，true开启（默认开启）、false关闭</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row1167911711366"><td class="cellrowborder" valign="top" width="22.58%"><p id="ZH-CN_TOPIC_0000002478334326__p116791276364">StartParams</p> </td> <td class="cellrowborder" valign="top" width="22.31%"><p id="ZH-CN_TOPIC_0000002478334326__p1667912783611">incremental: boolean</p> </td> <td class="cellrowborder" valign="top" width="55.11000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p2679147153611">增量编译能力启用状态，true开启（默认开启）、false关闭</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row1667967143615"><td class="cellrowborder" valign="top" width="22.58%"><p id="ZH-CN_TOPIC_0000002478334326__p186791076361">StartParams</p> </td> <td class="cellrowborder" valign="top" width="22.31%"><p id="ZH-CN_TOPIC_0000002478334326__p16679107113615">logLevel: string</p> </td> <td class="cellrowborder" valign="top" width="55.11000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p166797718365">当前日志级别，info、debug、warn、error等</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row1267915723615"><td class="cellrowborder" valign="top" width="22.58%"><p id="ZH-CN_TOPIC_0000002478334326__p267918733611">StartParams</p> </td> <td class="cellrowborder" valign="top" width="22.31%"><p id="ZH-CN_TOPIC_0000002478334326__p4679147103610">typeCheck: boolean</p> </td> <td class="cellrowborder" valign="top" width="55.11000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p8679277367">hvigorfile.ts的类型检查，true开启、false关闭（默认关闭）</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p26791793612"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen6679177103611" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">const</span> <span class="">startParams </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getParameter</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">getStartParams</span></span><span class="">()</span><span class="">;</span></li><li><span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">startParams </span><span class="">[</span><span class=""><span class="hljs-string">'daemon'</span></span><span class="">])</span><span class="">;</span></li><li><span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">startParams </span><span class="">[</span><span class=""><span class="hljs-string">'logLevel'</span></span><span class="">])</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 548px;"><h3 id="section96802733618">getWorkspaceDir<i class="anchor-icon anchor-icon-link" anchorid="section96802733618" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p5680107163613">getWorkspaceDir(): string</p> <p id="ZH-CN_TOPIC_0000002478334326__p668016793610">获取Hvigor工作空间路径。工作空间是指当前工程对应的Hvigor插件安装在磁盘的位置。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1680147103610"><strong>起始版本：</strong>Hvigor 4.1.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p18636212193916"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table55159294396" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row2051522983912"><th align="left" class="cellrowborder" id="mcps1.3.53.6.1.3.1.1" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334326__p751519297394">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.3.1.2" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334326__p551532917398">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row7515142913918"><td class="cellrowborder" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334326__p16515132913399">string</p> </td> <td class="cellrowborder" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334326__p17515112933919">Hvigor工作空间路径</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p268012753612"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen968087113620" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">const</span> <span class="">workspaceDir </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getParameter</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">getWorkspaceDir</span></span><span class="">()</span><span class="">;</span></li><li><span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">workspaceDir</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 140px;"><h2 id="section14832104719474">HvigorNode<i class="anchor-icon anchor-icon-link" anchorid="section14832104719474" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p5987175992510">"HvigorNode"是hvigor中的节点模型接口，Hvigor工程中都有一个根模块对应的节点对象和每个子模块对应的节点对象，节点对象均为HvigorNode接口的实现。节点对象包含了该模块的配置，属性和任务等。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 169px;"><h3 id="section2332028525" class="firsth2">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section2332028525" tips="复制节点链接"></i></h3><div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen112981313175216" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HvigorNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 512px;"><h3 id="section17571175618316">获取实例<i class="anchor-icon anchor-icon-link" anchorid="section17571175618316" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p201711159172611">获取hvigorNode实例有多种方法，包括hvigor对象的<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section10705432367">getRootNode</a>和<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section16393827185">getAllNodes</a>方法、<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section208181154171019">getNode</a>方法、HvigorPlugin的<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section2027815313120">apply</a>方法都可以获取到hvigorNode实例。</p> <p id="ZH-CN_TOPIC_0000002478334326__p183284792911">以HvigorPlugin的apply方法为例，示例如下：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen950616190307" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">HvigorNode</span>, <span class="hljs-title class_">HvigorPlugin</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">实现自定义插件</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="hljs-comment">// 通过currentNode可以使用hvigorNode的方法</span></li><li>        <span class="">}</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p20854216183211"></p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 644px;"><h3 id="section6972141673518">registerTask<i class="anchor-icon anchor-icon-link" anchorid="section6972141673518" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p131101148173411">registerTask: (task: HvigorTask) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334326__p11302924011">在当前节点注册任务，在Hvigor生命周期中的配置阶段中执行。注册任务需完成HvigorTask的实现作为入参对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p077913219200"><strong>起始版本：</strong>Hvigor 4.0.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p208404042016"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table37622403377" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1576284063717"><th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p67628407371">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1976217405371">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p07628404379">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1762154003712">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row177621340133717"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p16762640183718">task</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1676219409376"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section2386634104512">HvigorTask</a></p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p9762124014370">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p2762140163719">HvigorTask的实现</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p145421010193"><strong>示例：</strong>自定义任务注册。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen9481202813210" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// node的获取方式请参照hvigor API中的方法</span></li><li>node.<span class="hljs-title function_">registerTask</span>({</li><li>    <span class="hljs-attr">name</span>: <span class="hljs-string">'customTask'</span>,</li><li>    <span class="hljs-title function_">run</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'this is Task'</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p15284125595013"></p> <div class="tiledSection" style="contain-intrinsic-size: auto 675px;"><h3 id="section18862183711116">getTaskByName<i class="anchor-icon anchor-icon-link" anchorid="section18862183711116" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p11621634616">getTaskByName: (taskName: string) =&gt; Task | undefined</p> <p id="ZH-CN_TOPIC_0000002478334326__p56219604615">获取当前节点中已注册的Task对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p2326104817180"><strong>起始版本：</strong>Hvigor 4.0.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p1916913263216"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table139471616471" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row159461644715"><th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1194181684713">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p694316194716">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p29471694718">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p109561615479">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1195416124717"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p129531616475">taskName</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p3957163475">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p119541613479">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p895131614710">任务名称</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1383612012113"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table14266114355611" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row326654311569"><th align="left" class="cellrowborder" id="mcps1.3.59.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1526613431566">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.59.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p22661043135614">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row12266104311566"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p4266134317563"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section2055582515349">Task</a> | undefined</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p8496121314576">Task对象或undefined。当前节点未找到指定taskName的已注册任务时，返回值为undefined。</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1250735285716"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002478334326__screen100511132216" data-highlighted="yes"><ol class="linenums"><li>node.getTaskByName(<span class="hljs-string">'assembleApp'</span>)</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 500px;"><h3 id="section15791124417">getNodeName<i class="anchor-icon anchor-icon-link" anchorid="section15791124417" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p659542211110">getNodeName: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334326__p159519224115">获取当前节点名称。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1154435551811"><strong>起始版本：</strong>Hvigor 4.0.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p167091041132116"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table24631361744" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row124635361346"><th align="left" class="cellrowborder" id="mcps1.3.60.6.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1146314367414">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.60.6.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p146313616419">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1246443618410"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p14464536545">string</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p646410361546">节点名称</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p11257122111316"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" id="ZH-CN_TOPIC_0000002478334326__screen37061524310" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">const</span> nodeName = node.<span class="hljs-built_in">getNodeName</span>();</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 500px;"><h3 id="section232512295259">getNodePath<i class="anchor-icon anchor-icon-link" anchorid="section232512295259" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p18611979257">getNodePath: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334326__p156167192519">获取当前节点路径。</p> <p id="ZH-CN_TOPIC_0000002478334326__p19637115912110"><strong>起始版本：</strong>Hvigor 4.0.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p8737589218"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1522613149283" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1322671413286"><th align="left" class="cellrowborder" id="mcps1.3.61.6.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p722614147282">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.61.6.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p2226101410285">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row13226101412287"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p522615143282">string</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p5226161414287">节点路径</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p201191127134"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" id="ZH-CN_TOPIC_0000002478334326__screen145797549352" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">const</span> nodePath = node.<span class="hljs-built_in">getNodePath</span>();</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 500px;"><h3 id="section1686183152614">getParentNode<i class="anchor-icon anchor-icon-link" anchorid="section1686183152614" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p16718357122519">getParentNode: () =&gt; HvigorNode | undefined</p> <p id="ZH-CN_TOPIC_0000002478334326__p8718125710257">获取父级节点对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1835181015223"><strong>起始版本：</strong>Hvigor 4.0.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p193717992212"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table104537113281" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row15453611152820"><th align="left" class="cellrowborder" id="mcps1.3.62.6.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p11453711122820">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p1245321132811">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row18453611192813"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p150852154017"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section14832104719474">HvigorNode</a> | undefined</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p1045351114281">节点对象或undefined</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1785516251713"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" id="ZH-CN_TOPIC_0000002478334326__screen1453832414362" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">const</span> parentNode = node.<span class="hljs-built_in">getParentNode</span>();</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1052px;"><h3 id="section121681802615">subNodes<i class="anchor-icon anchor-icon-link" anchorid="section121681802615" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p271810575253">subNodes: (callbackfn: (node: HvigorNode) =&gt; void) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334326__p87186576254">遍历当前节点下的子节点执行回调函数。可通过此接口在工程节点操作节点对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p4526145611342">补充：工程节点比模块节点优先加载，若需操作子节点，需使用hvigor.nodesEvaluated接口等待全部节点加载完成，才能操作子节点对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p9955171972212"><strong>起始版本：</strong>Hvigor 4.0.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p16970101722214"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table3690441172815" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1569094112817"><th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1269034112815">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p169094172817">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p8690204102813">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p146901141162817">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row169015411283"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p126911419282">callbackfn</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p96915419289">(node: <a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section14832104719474">HvigorNode</a>) =&gt; void</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p13691134116282">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p06912041152811">入参类型为HvigorNode，返回类型为void的函数</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1438610325314"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1213920401403" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 工程级hvigorfile.ts</span></li><li><span class="hljs-keyword">import</span> { hvigor, <span class="hljs-title class_">HvigorNode</span>, <span class="hljs-title class_">HvigorPlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">customPlugin</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">HvigorPlugin</span> {</li><li>    <span class="hljs-keyword">return</span> {</li><li>        <span class="hljs-keyword">async</span> <span class="hljs-title function_">apply</span>(<span class="hljs-attr">currentNode</span>: <span class="hljs-title class_">HvigorNode</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt; {</li><li>            currentNode.<span class="hljs-title function_">subNodes</span>(<span class="hljs-function">(<span class="hljs-params">node: HvigorNode</span>) =&gt;</span> {</li><li>              <span class="hljs-comment">// 这里进行子节点相关处理</span></li><li>              <span class="hljs-comment">// 比如获取子节点的名字</span></li><li>              <span class="hljs-keyword">const</span> subNodeName = node.<span class="hljs-title function_">getNodeName</span>();</li><li>            })</li><li>        }</li><li>    };</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>    <span class="hljs-attr">system</span>: appTasks,  <span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></li><li>    <span class="hljs-attr">plugins</span>:[<span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()</span>]         <span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1035px;"><h3 id="section85611740102613">getSubNodeByName<i class="anchor-icon anchor-icon-link" anchorid="section85611740102613" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1871855742512">getSubNodeByName: (nodeName: string) =&gt; HvigorNode | undefined</p> <p id="ZH-CN_TOPIC_0000002478334326__p67181157102513">根据节点名称获取节点对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p2015610323225"><strong>起始版本：</strong>Hvigor 4.0.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p114941930142210"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1424412384288" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row182440386288"><th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p132449385281">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p202441738152816">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p424443832810">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p12244138142813">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row9244738182819"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p172441438122819">nodeName</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p182441738182814">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1324463813283">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1824493832812">节点名称</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p5520740152210"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table185323720283" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row3532177192813"><th align="left" class="cellrowborder" id="mcps1.3.64.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p653218712816">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.64.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p1153210718283">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row4532672286"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p553212782820"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section14832104719474">HvigorNode</a> | undefined</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p1560820271328">节点对象或undefined</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1453911445310"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen9315182313206" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 工程级hvigorfile.ts</span></li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">appTasks</span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class=""><span class="hljs-title class_">HvigorNode</span></span>, <span class=""><span class="hljs-title class_">HvigorPlugin</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span>;</li><li><span class=""><span class="hljs-comment">// 在项目根目录下的hvigorfile.ts中，currentNode是指app，子节点中包含entry</span></span></li><li><span class=""><span class="hljs-comment">// 通过getSubNodeByName可以获取entry的对象</span></span></li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">function</span></span> <span class=""><span class="hljs-title function_">customPlugin</span></span>(<span class="hljs-params"></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">HvigorPlugin</span></span> {</li><li>    <span class=""><span class="hljs-keyword">return</span></span> {</li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">:</span> <span class=""><span class="hljs-string">'customPlugin'</span></span>,</li><li>        <span class=""><span class="hljs-keyword">async</span></span> <span class=""><span class="hljs-title function_">apply</span></span>(<span class=""><span class="hljs-attr">currentNode</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">HvigorNode</span></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">Promise</span></span>&lt;<span class=""><span class="hljs-keyword">void</span></span>&gt; {</li><li>            <span class=""><span class="hljs-keyword">const</span></span> <span class="">subNode</span> <span class="">=</span> <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">getSubNodeByName</span></span>(<span class=""><span class="hljs-string">'entry'</span></span>);</li><li>        }</li><li>    };</li><li>}</li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">default</span></span> {</li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">:</span> <span class="">appTasks</span>,  <span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">: </span>[<span class=""><span class="hljs-title function_">customPlugin</span></span>()]         <span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1227px;"><h3 id="section385181762713">getContext<i class="anchor-icon anchor-icon-link" anchorid="section385181762713" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1971885715259">getContext: (pluginId: string) =&gt; any</p> <p id="ZH-CN_TOPIC_0000002478334326__p1871810579250">根据pluginId获取当前节点上指定插件的上下文接口信息。</p> <p id="ZH-CN_TOPIC_0000002478334326__p7469105452216"><strong>起始版本：</strong>Hvigor 4.0.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p4809165216226"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table36891133142815" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1689173319287"><th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p186891333182819">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p66906334287">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p56901033202820">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1069014335282">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row769093392815"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1369063318285">pluginId</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p3690143319285">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p206903333281">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p136901233172815">插件ID</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p417817415236"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table13166158102710" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1316718581279"><th align="left" class="cellrowborder" id="mcps1.3.65.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p916765822714">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.65.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p11674586279">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row171671658152712"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p111673583278">any</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p516745815275">支持自定义返回值类型</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p524684911311"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen195617492116" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 工程级hvigorfile.ts</span></li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">appTasks</span>, <span class=""><span class="hljs-title class_">OhosAppContext</span></span>, <span class=""><span class="hljs-title class_">OhosPluginId</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">hvigor</span>, <span class="">getNode</span>, <span class=""><span class="hljs-title class_">HvigorNode</span></span>, <span class=""><span class="hljs-title class_">HvigorPlugin</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span>;</li><li><span class=""><span class="hljs-comment">// 需要导入OhosPluginId，OhosAppContext来获得上下文信息</span></span></li><li><span class=""><span class="hljs-comment">// 在生命周期hook中获取</span></span></li><li><span class="">hvigor</span>.<span class=""><span class="hljs-title function_">nodesEvaluated</span></span>(<span class="hljs-function">() </span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> {</li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class=""><span class="hljs-attr">node</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">HvigorNode</span></span> <span class="">=</span> <span class=""><span class="hljs-title function_">getNode</span></span>(<span class="">__filename</span>);</li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class="">appContext</span> <span class="">=</span> <span class="">node</span>.<span class=""><span class="hljs-title function_">getContext</span></span>(<span class=""><span class="hljs-title class_">OhosPluginId</span></span>.<span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span>) <span class=""><span class="hljs-keyword">as</span></span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span>;</li><li>    <span class=""><span class="hljs-comment">// 这里就可以使用appContext获取以下上下文信息比如项目名</span></span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span>.<span class=""><span class="hljs-title function_">log</span></span>(<span class=""><span class="hljs-string">'projectName:'</span></span>, <span class="">appContext</span>.<span class=""><span class="hljs-title function_">getProjectName</span></span>());</li><li>});</li><li><span class=""><span class="hljs-comment">// 或者在apply中直接获取</span></span></li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">function</span></span> <span class=""><span class="hljs-title function_">customPlugin</span></span>(<span class="hljs-params"></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">HvigorPlugin</span></span> {</li><li>    <span class=""><span class="hljs-keyword">return</span></span> {</li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">:</span> <span class=""><span class="hljs-string">'customPlugin'</span></span>,</li><li>        <span class=""><span class="hljs-keyword">async</span></span> <span class=""><span class="hljs-title function_">apply</span></span>(<span class=""><span class="hljs-attr">currentNode</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">HvigorNode</span></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">Promise</span></span>&lt;<span class=""><span class="hljs-keyword">void</span></span>&gt; {</li><li>            <span class=""><span class="hljs-keyword">const</span></span> <span class="">appContext</span> <span class="">=</span> <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">getContext</span></span>(<span class=""><span class="hljs-title class_">OhosPluginId</span></span>.<span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span>) <span class=""><span class="hljs-keyword">as</span></span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span>;</li><li>            <span class=""><span class="hljs-variable language_">console</span></span>.<span class=""><span class="hljs-title function_">log</span></span>(<span class=""><span class="hljs-string">'projectName:'</span></span>, <span class="">appContext</span>.<span class=""><span class="hljs-title function_">getProjectName</span></span>());</li><li>        }</li><li>    };</li><li>}</li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">default</span></span> {</li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">:</span> <span class="">appTasks</span>,  <span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">: </span>[<span class=""><span class="hljs-title function_">customPlugin</span></span>()]         <span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 908px;"><h3 id="section123321434182713">getAllPluginIds<i class="anchor-icon anchor-icon-link" anchorid="section123321434182713" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p187181257122518">getAllPluginIds: () =&gt; string[]</p> <p id="ZH-CN_TOPIC_0000002478334326__p107181757152513">获取当前节点已加载的pluginId集合。</p> <p id="ZH-CN_TOPIC_0000002478334326__p363712602318"><strong>起始版本：</strong>Hvigor 4.0.2</p> <p id="ZH-CN_TOPIC_0000002478334326__p1464262772315"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table923565412718" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1235154192719"><th align="left" class="cellrowborder" id="mcps1.3.66.6.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p3235554192715">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.66.6.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p42351154142719">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row823585416274"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p112351154112713">string[]</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p8235145412272">当前已加载的插件ID集合</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p166121352035"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1215612374438" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 工程级hvigorfile.ts</span></li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class=""><span class="hljs-title class_">HvigorNode</span></span>, <span class=""><span class="hljs-title class_">HvigorPlugin</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span></li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">appTasks</span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span>;</li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">function</span></span> <span class=""><span class="hljs-title function_">customPlugin</span></span>(<span class="hljs-params"></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">HvigorPlugin</span></span> {</li><li>    <span class=""><span class="hljs-keyword">return</span></span> {</li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">:</span> <span class=""><span class="hljs-string">'customPlugin'</span></span>,</li><li>        <span class=""><span class="hljs-keyword">async</span></span> <span class=""><span class="hljs-title function_">apply</span></span>(<span class=""><span class="hljs-attr">currentNode</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">HvigorNode</span></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">Promise</span></span>&lt;<span class=""><span class="hljs-keyword">void</span></span>&gt; {</li><li>            <span class=""><span class="hljs-keyword">const</span></span> <span class="">allPluginIds</span> <span class="">=</span> <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">getAllPluginIds</span></span>();</li><li>            <span class="">allPluginIds</span>.<span class=""><span class="hljs-title function_">forEach</span></span>(<span class="hljs-function">(</span><span class=""><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function">) </span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> {</li><li>                <span class=""><span class="hljs-variable language_">console</span></span>.<span class=""><span class="hljs-title function_">log</span></span>(<span class="">id</span>);</li><li>            })</li><li>        }</li><li>    };</li><li>}</li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">default</span></span> {</li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">:</span> <span class="">appTasks</span>,  <span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span> [<span class=""><span class="hljs-title function_">customPlugin</span></span>()]         <span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 92px;"><h3 id="section314582385411">nodeDir<i class="anchor-icon anchor-icon-link" anchorid="section314582385411" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1130169389">nodeDir: NormalizedFile</p> </div> <p id="ZH-CN_TOPIC_0000002478334326__p814592325410">当前节点的根目录的NormalizedFile对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p20211204512319"><strong>起始版本：</strong>Hvigor 4.3.0</p> <div class="tiledSection" style="contain-intrinsic-size: auto 836px;"><h3 id="section175892337567">getNodeDir<i class="anchor-icon anchor-icon-link" anchorid="section175892337567" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p115892338564">getNodeDir: () =&gt; NormalizedFile</p> <p id="ZH-CN_TOPIC_0000002478334326__p858920332561">获取当前节点的根目录的NormalizedFile对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1589103311567"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p75897337565"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1258933395619" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row858943315560"><th align="left" class="cellrowborder" id="mcps1.3.70.6.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p2058973320566">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.70.6.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p5589433175613">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row17589143319565"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p115891233205619"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section281448112713">NormalizedFile</a></p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p185892335560">当前节点的根目录的NormalizedFile对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p127216819410"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen142211416155218" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 工程级hvigorfile.ts</span></li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class=""><span class="hljs-title class_">HvigorNode</span></span>,<span class=""> <span class="hljs-title class_">HvigorPlugin</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">appTasks</span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span></li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">function</span></span> <span class=""><span class="hljs-title function_">customPlugin</span></span>(<span class="hljs-params"></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">HvigorPlugin</span></span> {</li><li>    <span class=""><span class="hljs-keyword">return</span></span> {</li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">:</span> <span class=""><span class="hljs-string">'customPlugin'</span></span>,</li><li>        <span class=""><span class="hljs-keyword">async</span></span> <span class=""><span class="hljs-title function_">apply</span></span>(<span class=""><span class="hljs-attr">currentNode</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">HvigorNode</span></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">Promise</span></span>&lt;<span class=""><span class="hljs-keyword">void</span></span>&gt; {</li><li>           <span class=""><span class="hljs-keyword">const</span></span> <span class="">dir</span> <span class="">=</span> <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">getNodeDir</span></span>();</li><li>        }</li><li>    };</li><li>}</li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">default</span></span> {</li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">:</span> <span class="">appTasks</span>,  <span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span> [<span class=""><span class="hljs-title function_">customPlugin</span></span>()]         <span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 881px;"><h3 id="section15290222493">addExtraOption<i class="anchor-icon anchor-icon-link" anchorid="section15290222493" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p829411221393">addExtraOption: (key: string, value: any) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334326__p729442217915">为当前的node添加一个自定义属性。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1729412224920"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p16294222392"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table929519225916" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row829582211917"><th align="left" class="cellrowborder" id="mcps1.3.71.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1029572217910">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.71.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p2029515229912">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.71.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p729614223920">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.71.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1829616221995">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1529617221192"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p82961226912">key</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p22972022591">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p4297192215910">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p144881114141112">要添加的自定义属性的key</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row789416344116"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p089410347112">value</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1189463418119">any</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p158941334191118">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p389423412117">要添加的自定义属性的value</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p162371839146"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen136861614161815" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// 工程级hvigorfile.ts</span></span></li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class=""><span class="hljs-title class_">HvigorNode</span></span>, <span class=""><span class="hljs-title class_">HvigorPlugin</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">appTasks</span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span></li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">function</span></span> <span class=""><span class="hljs-title function_">customPlugin</span></span>(<span class="hljs-params"></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">HvigorPlugin</span></span> {</li><li>    <span class=""><span class="hljs-keyword">return</span></span> {</li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">:</span> <span class=""><span class="hljs-string">'customPlugin'</span></span>,</li><li>        <span class=""><span class="hljs-keyword">async</span></span> <span class=""><span class="hljs-title function_">apply</span></span>(<span class=""><span class="hljs-attr">currentNode</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">HvigorNode</span></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">Promise</span></span>&lt;<span class=""><span class="hljs-keyword">void</span></span>&gt; {</li><li>           <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">addExtraOption</span></span>(<span class=""><span class="hljs-string">'key'</span></span>, <span class=""><span class="hljs-string">'value'</span></span>);</li><li>        }</li><li>    };</li><li>}</li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">default</span></span> {</li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">:</span> <span class="">appTasks</span>,  <span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span> [<span class=""><span class="hljs-title function_">customPlugin</span></span>()]         <span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1011px;"><h3 id="section57551245918">getExtraOption<i class="anchor-icon anchor-icon-link" anchorid="section57551245918" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p107551124295">getExtraOption: (key: string) =&gt; any</p> <p id="ZH-CN_TOPIC_0000002478334326__p27550244916">获取通过addExtraOption()函数设置在当前node上的自定义属性。</p> <p id="ZH-CN_TOPIC_0000002478334326__p37551624992"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p3755172415917"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table187553241292" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row7755132418915"><th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1075513241690">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p167552241993">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p875514241794">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1075512249913">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row15755162418918"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p11755724799">key</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p137555241099">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p875519241393">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p11755224198">自定义属性的key</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p14755524899"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table77551242914" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row675612245912"><th align="left" class="cellrowborder" id="mcps1.3.72.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1575615241697">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.72.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p5756142411916">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row97561424795"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p575632417913">any</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p0756724197">自定义属性的value</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p55097443411"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen12341710103611" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 工程级hvigorfile.ts</span></li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class=""><span class="hljs-title class_">HvigorNode</span></span>, <span class=""><span class="hljs-title class_">HvigorPlugin</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">appTasks</span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span></li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">function</span></span> <span class=""><span class="hljs-title function_">customPlugin</span></span>(<span class="hljs-params"></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">HvigorPlugin</span></span> {</li><li>    <span class=""><span class="hljs-keyword">return</span></span> {</li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">:</span> <span class=""><span class="hljs-string">'customPlugin'</span></span>,</li><li>        <span class=""><span class="hljs-keyword">async</span></span> <span class=""><span class="hljs-title function_">apply</span></span>(<span class=""><span class="hljs-attr">currentNode</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">HvigorNode</span></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">Promise</span></span>&lt;<span class=""><span class="hljs-keyword">void</span></span>&gt; {</li><li>           <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">addExtraOption</span></span>(<span class=""><span class="hljs-string">'key'</span></span>, <span class=""><span class="hljs-string">'value'</span></span>);</li><li>           <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">getExtraOption</span></span>(<span class=""><span class="hljs-string">'key'</span></span>);</li><li>        }</li><li>    };</li><li>}</li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">default</span></span> {</li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">:</span> <span class="">appTasks</span>,  <span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span> [<span class=""><span class="hljs-title function_">customPlugin</span></span>()]         <span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 716px;"><h3 id="section3117627590">beforeNodeEvaluate<i class="anchor-icon anchor-icon-link" anchorid="section3117627590" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p41176279911">beforeNodeEvaluate(fn: (HvigorNode) =&gt; {}): void</p> <p id="ZH-CN_TOPIC_0000002478334326__p161174272916">为当前的node添加一个node评估前的回调函数。</p> <p id="ZH-CN_TOPIC_0000002478334326__p12117132717913"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p111710271999"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table171173276914" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row5117112713912"><th align="left" class="cellrowborder" id="mcps1.3.73.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p11171427992">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.73.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p101179271193">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.73.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p151171271990">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.73.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p811762716912">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row11171627893"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p311782714919">fn</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1611719275916">(<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section14832104719474">HvigorNode</a>) =&gt; {}</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1411712271194">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p81173271896">一个入参为空或者为HvigorNode的方法</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p998414421215"><strong>示例：</strong>为名称为entry的node注册一个beforeNodeEvaluate hook并打印出node的信息。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1912784263220" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li>hvigor.<span class="hljs-title function_">nodesInitialized</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  hvigor.<span class="hljs-title function_">getRootNode</span>().<span class="hljs-title function_">subNodes</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (node.<span class="hljs-title function_">getNodeName</span>() === <span class="hljs-string">'entry'</span>) {</li><li>      node.<span class="hljs-title function_">beforeNodeEvaluate</span>(<span class="hljs-function"><span class="hljs-params">hvigorNode</span> =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hvigorNode.<span class="hljs-title function_">getNodeName</span>());</li><li>      })</li><li>    }</li><li>  })</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 716px;"><h3 id="section32812284916">afterNodeEvaluate<i class="anchor-icon anchor-icon-link" anchorid="section32812284916" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p142802810917">afterNodeEvaluate(fn: (HvigorNode) =&gt; {}): void</p> <p id="ZH-CN_TOPIC_0000002478334326__p11289289916">为当前的node添加一个node评估后的回调函数。</p> <p id="ZH-CN_TOPIC_0000002478334326__p128182817920"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p72812810915"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table18289281796" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row132817289915"><th align="left" class="cellrowborder" id="mcps1.3.74.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p9288286915">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.74.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p102813285919">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.74.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p9285281298">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.74.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p5296285915">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row7291028696"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p142992817914">fn</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p62911286913">(<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section14832104719474">HvigorNode</a>) =&gt; {}</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p18291628597">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p229182817918">一个入参为空或者为HvigorNode的方法</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p17792105032011"><strong>示例：</strong>为名称为entry的node注册一个afterNodeEvaluate hook并打印出node的信息。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen16535528163217" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li>hvigor.<span class="hljs-title function_">nodesInitialized</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  hvigor.<span class="hljs-title function_">getRootNode</span>().<span class="hljs-title function_">subNodes</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (node.<span class="hljs-title function_">getNodeName</span>() === <span class="hljs-string">'entry'</span>) {</li><li>      node.<span class="hljs-title function_">afterNodeEvaluate</span>(<span class="hljs-function"><span class="hljs-params">hvigorNode</span> =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hvigorNode.<span class="hljs-title function_">getNodeName</span>());</li><li>      })</li><li>    }</li><li>  })</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 116px;"><h2 id="section182865194515">HvigorPlugin<i class="anchor-icon anchor-icon-link" anchorid="section182865194515" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p1134045012557">该接口定义了Hvigor开发插件的基本范式。开发Hvigor插件需实现此接口。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 169px;"><h3 id="section16379183492115" class="firsth2">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section16379183492115" tips="复制节点链接"></i></h3><div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen381755417201" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HvigorPlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 805px;"><h3 id="section8609537133115">pluginId<i class="anchor-icon anchor-icon-link" anchorid="section8609537133115" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p134784279316">pluginId: string</p> <p id="ZH-CN_TOPIC_0000002478334326__p1247842743118">插件唯一标识属性。</p> <p id="ZH-CN_TOPIC_0000002478334326__p8559165713275"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen124391236135411" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">实现自定义插件</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class=""><span class="hljs-title function_">context</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>            <span class="hljs-keyword">return</span> <span class="">{</span></li><li>                <span class=""><span class="hljs-attr">data</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin xxx'</span></span></li><li>            <span class="">}</span><span class="">;</span></li><li>        <span class="">}</span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li><span class="">        }</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class=""> [</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 956px;"><h3 id="section126771449143118">context<i class="anchor-icon anchor-icon-link" anchorid="section126771449143118" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p174781027193116">context?: (() =&gt; any) | any</p> <p id="ZH-CN_TOPIC_0000002478334326__p174789275312">插件上下文实现接口，可选实现；实现此函数后，其他插件可通过node.getContext('插件ID'）获取插件中定义的上下文接口。</p> <p id="ZH-CN_TOPIC_0000002478334326__p316694072414"></p> <p id="ZH-CN_TOPIC_0000002478334326__p634013782417"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table19189183511443" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row118915355444"><th align="left" class="cellrowborder" id="mcps1.3.78.6.1.3.1.1" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p1189123554411">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.78.6.1.3.1.2" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p218913519443">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1189103534412"><td class="cellrowborder" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p418914358441">(() =&gt; any) | any</p> </td> <td class="cellrowborder" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p12189163515443">自定义返回类型的Function或自定义任一返回类型</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p161581033192719"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen222443145413" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">实现自定义插件</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class=""><span class="hljs-title function_">context</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>            <span class="hljs-keyword">return</span> <span class="">{</span></li><li>                <span class=""><span class="hljs-attr">data</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin xxx'</span></span></li><li>            <span class="">}</span><span class="">;</span></li><li>        <span class="">}</span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li><span class="">        }</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1179px;"><h3 id="section2027815313120">apply<i class="anchor-icon anchor-icon-link" anchorid="section2027815313120" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p12478172716319">apply: (node: HvigorNode) =&gt; void | Promise&lt;void&gt;</p> <p id="ZH-CN_TOPIC_0000002478334326__p1247813274317">插件主体函数，用于定义插件实现逻辑（例如任务注册等）; 在Hvigor的生命周期配置阶段调用。</p> <p id="ZH-CN_TOPIC_0000002478334326__p92895392512"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1879340184911" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row15879640124910"><th align="left" class="cellrowborder" id="mcps1.3.79.5.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p128795401491">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.79.5.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p5879154018494">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.79.5.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1887944014919">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.79.5.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p12879124084920">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row8879124054918"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1487914011498">node</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p12879144013491"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section14832104719474">HvigorNode</a></p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p18879144014915">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p5879940144917">hvigor节点对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p2058765915247"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table184592214810" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row9451722154810"><th align="left" class="cellrowborder" id="mcps1.3.79.7.1.3.1.1" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p345202284817">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.79.7.1.3.1.2" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p345322164817">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row14455227485"><td class="cellrowborder" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p196620417123">void | Promise&lt;void&gt;</p> </td> <td class="cellrowborder" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p3743810181519">无返回值，或返回Promise&lt;void&gt;类型</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1298513482815"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1583713216128" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">实现自定义插件</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class=""><span class="hljs-title function_">context</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>            <span class="hljs-keyword">return</span> <span class="">{</span></li><li>                <span class=""><span class="hljs-attr">data</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin xxx'</span></span></li><li>            <span class="">}</span><span class="">;</span></li><li>        <span class="">}</span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(</span><span class="hljs-keyword">async</span> <span class="">() </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>                <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册模块级任务</span></span></li><li>            <span class="">}</span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 116px;"><h2 id="section2386634104512">HvigorTask<i class="anchor-icon anchor-icon-link" anchorid="section2386634104512" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p12830471615">Hvigor任务实现的接口类型，定义了任务的实现范式，在创建任务时需实现此接口。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 169px;"><h3 id="section6734174235" class="firsth2">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section6734174235" tips="复制节点链接"></i></h3><div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen3945591086" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HvigorTask</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 733px;"><h3 id="section1971201894">name<i class="anchor-icon anchor-icon-link" anchorid="section1971201894" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p93391447488">name: string</p> <p id="ZH-CN_TOPIC_0000002478334326__p2339247987">定义任务名称。</p> <p id="ZH-CN_TOPIC_0000002478334326__p10150612202814"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen324227103310" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">getNode</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorTask</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取当前</span></span><span class=""><span class="hljs-comment">hvigorNode</span></span><span class=""><span class="hljs-comment">节点对象</span></span></li><li><span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">node</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册</span></span><span class=""><span class="hljs-comment">Task</span></span></li><li><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">registerTask</span></span><span class="">(</span><span class="">{</span></li><li>    <span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-string">'customTask'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">run</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">'this is Task'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1028px;"><h3 id="section1796113228918">context<i class="anchor-icon anchor-icon-link" anchorid="section1796113228918" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p6339147787">context?: (() =&gt; any) | any</p> <p id="ZH-CN_TOPIC_0000002478334326__p1733917471088">任务中的局部内数据共享的对象定义。实现此函数中定义的对象将在任务注册时被注入到this.context属性上，在input、output、run函数中可使用直接this.context调用context函数中定义的对象和属性。</p> <p id="ZH-CN_TOPIC_0000002478334326__p13434115882517"></p> <p id="ZH-CN_TOPIC_0000002478334326__p1646711092617"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table199607376472" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1696013373475"><th align="left" class="cellrowborder" id="mcps1.3.83.6.1.3.1.1" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p119601637164718">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.83.6.1.3.1.2" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p69602372471">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row396063754711"><td class="cellrowborder" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p199605377470">(() =&gt; any) | any</p> </td> <td class="cellrowborder" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1990395575718">自定义返回类型的Function或自定义任一返回类型</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p208451547122810"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1068920437446" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">getNode</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorTask</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取当前</span></span><span class=""><span class="hljs-comment">hvigorNode</span></span><span class=""><span class="hljs-comment">节点对象</span></span></li><li><span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">node</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册</span></span><span class=""><span class="hljs-comment">Task</span></span></li><li><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">registerTask</span></span><span class="">(</span><span class="">{</span></li><li>    <span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-string">'customTask'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">context</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>        <span class="hljs-keyword">return</span> <span class="">{</span></li><li>            <span class=""><span class="hljs-attr">data</span></span><span class="">: </span><span class=""><span class="hljs-string">'customRegisterTask xxx'</span></span></li><li>        <span class="">}</span><span class="">;</span></li><li>    <span class="">}</span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">run</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">context</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1616px;"><h3 id="section2697112881011">input<i class="anchor-icon anchor-icon-link" anchorid="section2697112881011" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p833924717816">input?: (input: TaskInput) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334326__p103397471086">实现任务增量输入条件定义。</p> <p id="ZH-CN_TOPIC_0000002478334326__p11061726112615"></p> <p id="ZH-CN_TOPIC_0000002478334326__p151671427172611"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table121815012500" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1518120195019"><th align="left" class="cellrowborder" id="mcps1.3.84.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p11818025012">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.84.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p7183017503">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.84.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p16184005014">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.84.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p718707504">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row718501508"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p918209502">input</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p11181205504"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section425723621113">TaskInput</a></p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p101820135019">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p14633244165715">控制任务增量的输入条件实现对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p157301121293"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen85763934317" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">getNode</span><span class="">, </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorTask</span></span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorTaskContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">TaskInput</span></span><span class="">, </span><span class=""><span class="hljs-title class_">TaskOutput</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@ohos/hvigor"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">fse </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"fs-extra"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">path </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"path"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">const</span> <span class="">currentNode </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">context </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">outputFilePath </span><span class="">= </span><span class="">path</span><span class="">.</span><span class=""><span class="hljs-title function_">resolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getBuildRootPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'test.txt'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册一个生成文件的任务并为此任务设置增量</span></span></li><li>    <span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">registerTask</span></span><span class="">(</span><span class="">{</span></li><li>        <span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-string">"testTask"</span></span><span class="">,</span></li><li>        <span class=""><span class="hljs-title function_">run</span></span><span class="">(</span><span class=""><span class="hljs-attr">taskContext</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorTaskContext</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-keyword">void</span> </span><span class="">| </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="">fse</span><span class="">.</span><span class=""><span class="hljs-title function_">writeFileSync</span></span><span class="">(</span><span class="">outputFilePath</span><span class="">, </span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectName</span></span><span class="">())</span><span class="">;</span></li><li>            <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span><span class="">;</span></li><li>        <span class="">}</span><span class="">,</span></li><li>        <span class=""><span class="hljs-title function_">input</span></span><span class="">(</span><span class=""><span class="hljs-attr">input</span></span><span class="">: </span><span class=""><span class="hljs-title class_">TaskInput</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-keyword">void</span> </span><span class="">{</span></li><li>            <span class="">input</span><span class="">.</span><span class=""><span class="hljs-title function_">property</span></span><span class="">(</span><span class=""><span class="hljs-string">'projectName'</span></span><span class="">, </span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectName</span></span><span class="">())</span><span class="">;</span></li><li>        <span class="">}</span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">output</span></span><span class="">(</span><span class=""><span class="hljs-attr">output</span></span><span class="">: </span><span class=""><span class="hljs-title class_">TaskOutput</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="hljs-keyword">try</span> <span class="">{</span></li><li>                <span class="hljs-keyword">const</span> <span class="">parentDir </span><span class="">= </span><span class="">path</span><span class="">.</span><span class=""><span class="hljs-title function_">dirname</span></span><span class="">(</span><span class="">outputFilePath</span><span class="">)</span><span class="">;</span></li><li>                <span class="hljs-keyword">await</span> <span class="">fse</span><span class="">.</span><span class=""><span class="hljs-title function_">ensureDir</span></span><span class="">(</span><span class="">parentDir</span><span class="">)</span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">确保父目录存在</span></span></li><li>                <span class="hljs-keyword">await</span> <span class="">fse</span><span class="">.</span><span class=""><span class="hljs-title function_">ensureFile</span></span><span class="">(</span><span class="">outputFilePath</span><span class="">)</span><span class="">;</span></li><li>                <span class="">output</span><span class="">.</span><span class=""><span class="hljs-title function_">file</span></span><span class="">(</span><span class="">outputFilePath</span><span class="">)</span><span class="">;</span></li><li>            <span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">error</span><span class="">) </span><span class="">{</span></li><li>                <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">'File creation failed:'</span></span><span class="">, </span><span class="">error</span><span class="">)</span><span class="">;</span></li><li>                <span class="hljs-keyword">throw</span> <span class="">error</span><span class="">;</span></li><li>            <span class="">}</span></li><li><span class="">        }</span><span class="">,</span></li><li>        <span class=""><span class="hljs-attr">postDependencies</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'assembleApp'</span></span><span class="">]</span></li><li>    <span class="">}</span><span class="">)</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p1014612861614">需要在hvigor-config.json5中添加dependencies：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334326__screen81166516169" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// hvigor-config.json5</span></li><li><span class="hljs-string">"dependencies"</span>: {</li><li>    <span class="hljs-string">"fs-extra"</span>: <span class="hljs-string">"11.2.0"</span></li><li>},</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1616px;"><h3 id="section131451256911">output<i class="anchor-icon anchor-icon-link" anchorid="section131451256911" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p63395471682">output?: (output: TaskOutput) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334326__p133916475810">实现任务增量输出条件定义。</p> <p id="ZH-CN_TOPIC_0000002478334326__p183631548202610"></p> <p id="ZH-CN_TOPIC_0000002478334326__p174324452265"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table946226509" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row11474211508"><th align="left" class="cellrowborder" id="mcps1.3.85.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p84752105013">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.85.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1847125506">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.85.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p14716245010">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.85.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p44714211501">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row194720275016"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p84714210502">output</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p84742145015"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section135442202125">TaskOutput</a></p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p10472028508">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p4834203018106">控制任务增量的输出条件实现对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p689653113362"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen18228217194316" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">getNode</span><span class="">, </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorTask</span></span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorTaskContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">TaskInput</span></span><span class="">, </span><span class=""><span class="hljs-title class_">TaskOutput</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@ohos/hvigor"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">fse </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"fs-extra"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">path </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"path"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">const</span> <span class="">currentNode </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">context </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">outputFilePath </span><span class="">= </span><span class="">path</span><span class="">.</span><span class=""><span class="hljs-title function_">resolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getBuildRootPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'test.txt'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册一个生成文件的任务并为此任务设置增量</span></span></li><li>    <span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">registerTask</span></span><span class="">(</span><span class="">{</span></li><li>        <span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-string">"testTask"</span></span><span class="">,</span></li><li>        <span class=""><span class="hljs-title function_">run</span></span><span class="">(</span><span class=""><span class="hljs-attr">taskContext</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorTaskContext</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-keyword">void</span> </span><span class="">| </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="">fse</span><span class="">.</span><span class=""><span class="hljs-title function_">writeFileSync</span></span><span class="">(</span><span class="">outputFilePath</span><span class="">, </span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectName</span></span><span class="">())</span><span class="">;</span></li><li>            <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span><span class="">;</span></li><li>        <span class="">}</span><span class="">,</span></li><li>        <span class=""><span class="hljs-title function_">input</span></span><span class="">(</span><span class=""><span class="hljs-attr">input</span></span><span class="">: </span><span class=""><span class="hljs-title class_">TaskInput</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-keyword">void</span> </span><span class="">{</span></li><li>            <span class="">input</span><span class="">.</span><span class=""><span class="hljs-title function_">property</span></span><span class="">(</span><span class=""><span class="hljs-string">'projectName'</span></span><span class="">, </span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectName</span></span><span class="">())</span><span class="">;</span></li><li>        <span class="">}</span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">output</span></span><span class="">(</span><span class=""><span class="hljs-attr">output</span></span><span class="">: </span><span class=""><span class="hljs-title class_">TaskOutput</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="hljs-keyword">try</span> <span class="">{</span></li><li>                <span class="hljs-keyword">const</span> <span class="">parentDir </span><span class="">= </span><span class="">path</span><span class="">.</span><span class=""><span class="hljs-title function_">dirname</span></span><span class="">(</span><span class="">outputFilePath</span><span class="">)</span><span class="">;</span></li><li>                <span class="hljs-keyword">await</span> <span class="">fse</span><span class="">.</span><span class=""><span class="hljs-title function_">ensureDir</span></span><span class="">(</span><span class="">parentDir</span><span class="">)</span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">确保父目录存在</span></span></li><li>                <span class="hljs-keyword">await</span> <span class="">fse</span><span class="">.</span><span class=""><span class="hljs-title function_">ensureFile</span></span><span class="">(</span><span class="">outputFilePath</span><span class="">)</span><span class="">;</span></li><li>                <span class="">output</span><span class="">.</span><span class=""><span class="hljs-title function_">file</span></span><span class="">(</span><span class="">outputFilePath</span><span class="">)</span><span class="">;</span></li><li>            <span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">error</span><span class="">) </span><span class="">{</span></li><li>                <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">'File creation failed:'</span></span><span class="">, </span><span class="">error</span><span class="">)</span><span class="">;</span></li><li>                <span class="hljs-keyword">throw</span> <span class="">error</span><span class="">;</span></li><li>            <span class="">}</span></li><li><span class="">        }</span><span class="">,</span></li><li>        <span class=""><span class="hljs-attr">postDependencies</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'assembleApp'</span></span><span class="">]</span></li><li>    <span class="">}</span><span class="">)</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p89013731718">需要在hvigor-config.json5里添加dependencies：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334326__screen10901275175" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// hvigor-config.json</span></li><li><span class="hljs-string">"dependencies"</span>: {</li><li>    <span class="hljs-string">"fs-extra"</span>: <span class="hljs-string">"11.2.0"</span></li><li>},</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1035px;"><h3 id="section811953211910">run<i class="anchor-icon anchor-icon-link" anchorid="section811953211910" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1340124715813">run: (taskContext: HvigorTaskContext) =&gt; void | Promise&lt;void&gt;</p> <p id="ZH-CN_TOPIC_0000002478334326__p53408479819">任务执行逻辑主体函数。您可以在此函数实现中定义您所需的任务处理逻辑。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1411755918266"></p> <p id="ZH-CN_TOPIC_0000002478334326__p1166407271"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table19627111614509" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row196271116195010"><th align="left" class="cellrowborder" id="mcps1.3.86.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p186271416195020">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.86.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p16627161685014">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.86.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p6627171614508">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.86.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p7627151617507">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row362781665017"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p162741645018">taskContext</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p76288165504">HvigorTaskContext</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p993313547547">否</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1548316145519">接口中默认注入的公共信息类型</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p058167142719"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table54801327164717" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row148082715479"><th align="left" class="cellrowborder" id="mcps1.3.86.8.1.3.1.1" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p9480152710475">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.86.8.1.3.1.2" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p164801627134710">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row18480152713474"><td class="cellrowborder" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p153122384515">void | Promise&lt;void&gt;</p> </td> <td class="cellrowborder" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p821710131425">无返回值，或返回Promise&lt;void&gt;类型</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p6635161583818"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen380914552479" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">getNode</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorTask</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取当前</span></span><span class=""><span class="hljs-comment">hvigorNode</span></span><span class=""><span class="hljs-comment">节点对象</span></span></li><li><span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">node</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册</span></span><span class=""><span class="hljs-comment">Task</span></span></li><li><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">registerTask</span></span><span class="">(</span><span class="">{</span></li><li>    <span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-string">'customTask'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">run</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">'this is Task'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1107px;"><h3 id="section2530202711919">beforeRun<i class="anchor-icon anchor-icon-link" anchorid="section2530202711919" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p13401647082">beforeRun?: (taskContext: HvigorTaskContext) =&gt; void | Promise&lt;void&gt;</p> <p id="ZH-CN_TOPIC_0000002478334326__p19239184417523">run函数的前置处理函数。在任务执行阶段，任务中的run函数执行前此函数被调用执行。</p> <p id="ZH-CN_TOPIC_0000002478334326__p11152129122719"></p> <p id="ZH-CN_TOPIC_0000002478334326__p848514273273"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table399417165019" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row399412775014"><th align="left" class="cellrowborder" id="mcps1.3.87.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p16994177145010">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.87.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p999477155017">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.87.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p799437115017">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.87.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1899447155010">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row14995279504"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1995477508">taskContext</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p18995117205011">HvigorTaskContext</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1956974511177">否</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1650618436535">接口中默认注入的公共信息</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p152913302711"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table137601431104711" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row776019318478"><th align="left" class="cellrowborder" id="mcps1.3.87.8.1.3.1.1" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p1876043114716">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.87.8.1.3.1.2" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p5760163117472">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row10760631174719"><td class="cellrowborder" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p639551614162">void | Promise&lt;void&gt;</p> </td> <td class="cellrowborder" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p43951716121611">无返回值，或返回Promise&lt;void&gt;类型</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p18444916194319"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen938619198528" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">getNode</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorTask</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取当前</span></span><span class=""><span class="hljs-comment">hvigorNode</span></span><span class=""><span class="hljs-comment">节点对象</span></span></li><li><span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">node</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册</span></span><span class=""><span class="hljs-comment">Task</span></span></li><li><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">registerTask</span></span><span class="">(</span><span class="">{</span></li><li>    <span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-string">'customTask'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">run</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">'customTask'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">beforeRun</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">'beforeRun'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1107px;"><h3 id="section783512299910">afterRun<i class="anchor-icon anchor-icon-link" anchorid="section783512299910" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p63329665119">afterRun?: (taskContext: HvigorTaskContext) =&gt; void | Promise&lt;void&gt;</p> <p id="ZH-CN_TOPIC_0000002478334326__p1884914535319">run函数的后置处理函数。在任务执行阶段，任务中的run函数执行后此函数被调用执行。</p> <p id="ZH-CN_TOPIC_0000002478334326__p3255549172715"></p> <p id="ZH-CN_TOPIC_0000002478334326__p1751114476279"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table11515191213506" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row155159121502"><th align="left" class="cellrowborder" id="mcps1.3.88.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1051511219503">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.88.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p18515181210509">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.88.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p7515201217501">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.88.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p185154124502">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row10515111215018"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p25165120502">taskContext</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1851610125501">HvigorTaskContext</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p0516912195012">否</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p42103297543">接口中默认注入的公共信息类型</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p428155282715"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table17544172864716" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1454416287478"><th align="left" class="cellrowborder" id="mcps1.3.88.8.1.3.1.1" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p9544182813471">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.88.8.1.3.1.2" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p7544628154712">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row16544102817478"><td class="cellrowborder" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p181761340164717">void | Promise&lt;void&gt;</p> </td> <td class="cellrowborder" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p10136113234711">无返回值，或返回Promise&lt;void&gt;类型</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p7298721135016"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen95199397524" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">getNode</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorTask</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取当前</span></span><span class=""><span class="hljs-comment">hvigorNode</span></span><span class=""><span class="hljs-comment">节点对象</span></span></li><li><span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">node</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册</span></span><span class=""><span class="hljs-comment">Task</span></span></li><li><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">registerTask</span></span><span class="">(</span><span class="">{</span></li><li>    <span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-string">'customTask'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">run</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">'customTask'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">afterRun</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">'afterRun'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1264px;"><h3 id="section16299334294">dependencies<i class="anchor-icon anchor-icon-link" anchorid="section16299334294" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p153407471814">dependencies?: (() =&gt; string[]) | string[]</p> <p id="ZH-CN_TOPIC_0000002478334326__p7340134711819">配置前置任务依赖。前置任务依赖是指当前任务依赖另一个任务，执行顺序是前置任务 -&gt; 当前任务 -&gt; 后置任务。</p> <p id="ZH-CN_TOPIC_0000002478334326__p197421456358">从DevEco Studio 6.0.0 Beta2版本开始，支持依赖其他模块的任务，在任务前加上“模块名:”即可，例如har:assembleHar。</p> <p id="ZH-CN_TOPIC_0000002478334326__p2184134152812"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table19187325114716" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1518702554716"><th align="left" class="cellrowborder" id="mcps1.3.89.6.1.3.1.1" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p218782574714">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.89.6.1.3.1.2" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1618862511476">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row2018862510472"><td class="cellrowborder" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p3188152544716">(() =&gt; string[]) | string[]</p> </td> <td class="cellrowborder" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p134911734318">返回类型为string[]的函数或string[]类型</p> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334326__p1445472196">依赖其他模块的任务时，建议将任务注册操作放在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-life-cycle#section746253616316">hook-nodesEvaluated</a>中，否则注册时其他模块的任务可能还未被初始化，导致当前任务无法注册。</p> </div></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p333155613503"><strong>示例一：</strong>依赖本模块的任务。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen8701723171211" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">getNode</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorTask</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取当前</span></span><span class=""><span class="hljs-comment">hvigorNode</span></span><span class=""><span class="hljs-comment">节点对象</span></span></li><li><span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">node</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册</span></span><span class=""><span class="hljs-comment">Task</span></span></li><li><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">registerTask</span></span><span class="">(</span><span class="">{</span></li><li>    <span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-string">'customTask'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">run</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">'customTask'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">dependencies</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'customTask1'</span></span><span class="">]</span><span class="">,</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册</span></span><span class=""><span class="hljs-comment">Task</span></span></li><li><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">registerTask</span></span><span class="">(</span><span class="">{</span></li><li>    <span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-string">'customTask1'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">run</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">'customTask1'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">,</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p101041143124919"><strong>示例二：</strong>依赖其他模块的任务。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen184921338173312" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 工程级hvigorfile.ts文件</span></li><li><span class="hljs-keyword">import</span> { appTasks } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li><li><span class="hljs-keyword">import</span> { hvigor, <span class="hljs-title class_">HvigorNode</span>, <span class="hljs-title class_">HvigorPlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li>
</li><li><span class="hljs-comment">// 获取当前entry节点对象</span></li><li><span class="hljs-keyword">const</span> entryNode = hvigor.<span class="hljs-title function_">getNodeByName</span>(<span class="hljs-string">'entry'</span>);</li><li>
</li><li><span class="hljs-comment">// 逻辑放在hook-nodesEvaluated中</span></li><li>hvigor.<span class="hljs-title function_">nodesEvaluated</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>  <span class="hljs-comment">// 注册任务</span></li><li>  entryNode.<span class="hljs-title function_">registerTask</span>({</li><li>    <span class="hljs-comment">// 任务名称</span></li><li>    <span class="hljs-attr">name</span>: <span class="hljs-string">`default@CustomTask`</span>,</li><li>    <span class="hljs-title function_">run</span>(<span class="hljs-params"></span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'customTask1'</span>)</li><li>    },</li><li>    <span class="hljs-comment">// 配置前置任务依赖</span></li><li>    <span class="hljs-attr">dependencies</span>: [<span class="hljs-string">'har:assembleHar'</span>], <span class="hljs-comment">// 跨模块依赖har的assembleHar任务，确保har模块存在</span></li><li>    <span class="hljs-comment">// 配置任务的后置任务依赖</span></li><li>    <span class="hljs-attr">postDependencies</span>: [<span class="hljs-string">'entry:default@PreBuild'</span>]  <span class="hljs-comment">// 支持两种写法 entry:default@PreBuild  default@PreBuild</span></li><li>  });</li><li>});</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>  <span class="hljs-attr">system</span>: appTasks, <span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></li><li>  <span class="hljs-attr">plugins</span>: []       <span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></li><li>}</li></ol></pre></div></div> <div class="tiledSection" style="contain-intrinsic-size: auto 1288px;"><h3 id="section25972367914">postDependencies<i class="anchor-icon anchor-icon-link" anchorid="section25972367914" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1734016478816">postDependencies?: (() =&gt; string[]) | string[]</p> <p id="ZH-CN_TOPIC_0000002478334326__p11845164511388">配置任务的后置任务依赖。后置任务依赖是指另一个任务依赖当前任务，执行顺序是前置任务 -&gt; 当前任务 -&gt; 后置任务。</p> <p id="ZH-CN_TOPIC_0000002478334326__p19325752162214">从DevEco Studio 6.0.0 Beta2版本开始，支持依赖其他模块的任务，在任务前加上“模块名:”即可，例如har:default@PreBuild。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1737892517287"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table15460723194716" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row146010236479"><th align="left" class="cellrowborder" id="mcps1.3.92.6.1.3.1.1" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p146016236472">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.92.6.1.3.1.2" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1446020234470">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row154601823164712"><td class="cellrowborder" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p1568102172218">(() =&gt; string[]) | string[]</p> </td> <td class="cellrowborder" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p113631922152211">返回类型为string[]的函数或string[]类型</p> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334326__p12351123117237">依赖其他模块的任务时，建议将任务注册操作放在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-life-cycle#section746253616316">hook-nodesEvaluated</a>中，否则注册时其他模块的任务可能还未被初始化，导致当前任务无法注册。</p> </div></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p1345611235115"><strong>示例一：</strong>依赖本模块的任务。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen84481346111218" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">getNode</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorTask</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取当前</span></span><span class=""><span class="hljs-comment">hvigorNode</span></span><span class=""><span class="hljs-comment">节点对象</span></span></li><li><span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">node</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册</span></span><span class=""><span class="hljs-comment">Task</span></span></li><li><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">registerTask</span></span><span class="">(</span><span class="">{</span></li><li>    <span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-string">'customTask1'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">run</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">'customTask1'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">,</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册</span></span><span class=""><span class="hljs-comment">Task</span></span></li><li><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">registerTask</span></span><span class="">(</span><span class="">{</span></li><li>    <span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-string">'customTask'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">run</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">'customTask'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">postDependencies</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'customTask1'</span></span><span class="">]</span><span class="">,</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p106521041172612"><strong>示例二：</strong>依赖其他模块的任务。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen204816277" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 工程级hvigorfile.ts文件</span></li><li><span class="hljs-keyword">import</span> { appTasks } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li><li><span class="hljs-keyword">import</span> { hvigor, <span class="hljs-title class_">HvigorNode</span>, <span class="hljs-title class_">HvigorPlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li>
</li><li><span class="hljs-comment">// 获取当前entry节点对象</span></li><li><span class="hljs-keyword">const</span> entryNode = hvigor.<span class="hljs-title function_">getNodeByName</span>(<span class="hljs-string">'entry'</span>);</li><li>
</li><li><span class="hljs-comment">// 逻辑放在hook-nodesEvaluated中</span></li><li>hvigor.<span class="hljs-title function_">nodesEvaluated</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>  <span class="hljs-comment">// 注册任务</span></li><li>  entryNode.<span class="hljs-title function_">registerTask</span>({</li><li>    <span class="hljs-comment">// 任务名称</span></li><li>    <span class="hljs-attr">name</span>: <span class="hljs-string">`default@CustomTask`</span>,</li><li>    <span class="hljs-title function_">run</span>(<span class="hljs-params"></span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'customTask1'</span>)</li><li>    },</li><li>    <span class="hljs-comment">// 配置前置任务依赖</span></li><li>    <span class="hljs-attr">dependencies</span>: [<span class="hljs-string">'entry:default@PreBuild'</span>], <span class="hljs-comment">// 支持两种写法 entry:default@PreBuild  default@PreBuild</span></li><li>    <span class="hljs-comment">// 配置任务的后置任务依赖</span></li><li>    <span class="hljs-attr">postDependencies</span>: [<span class="hljs-string">'har:default@PreBuild'</span>]  <span class="hljs-comment">// 跨模块依赖har的PreBuild任务，确保har模块存在</span></li><li>  });</li><li>});</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>  <span class="hljs-attr">system</span>: appTasks, <span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></li><li>  <span class="hljs-attr">plugins</span>: []       <span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></li><li>}</li></ol></pre></div></div> <div class="tiledSection" style="contain-intrinsic-size: auto 116px;"><h2 id="section425723621113">TaskInput<i class="anchor-icon anchor-icon-link" anchorid="section425723621113" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p127341720153517">任务增量执行判断的输入对象实现类型，提供添加任务输入条件的基本函数。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 169px;"><h3 id="section982931172315" class="firsth2">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section982931172315" tips="复制节点链接"></i></h3><div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen173402073513" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">TaskInput</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1836px;"><h3 id="section1605167204118">property<i class="anchor-icon anchor-icon-link" anchorid="section1605167204118" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p147262453913">property(key: string, value: TaskInputValue): TaskInput</p> <p id="ZH-CN_TOPIC_0000002478334326__p19727241398">添加键值对作为Task增量输入条件。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1266272632919"></p> <p id="ZH-CN_TOPIC_0000002478334326__p1318110244292"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1873120342501" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row973119341502"><th align="left" class="cellrowborder" id="mcps1.3.97.6.1.5.1.1" valign="top" width="17.549999999999997%"><p id="ZH-CN_TOPIC_0000002478334326__p19731113411507">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.97.6.1.5.1.2" valign="top" width="21.43%"><p id="ZH-CN_TOPIC_0000002478334326__p17312343505">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.97.6.1.5.1.3" valign="top" width="19.36%"><p id="ZH-CN_TOPIC_0000002478334326__p17731163419502">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.97.6.1.5.1.4" valign="top" width="41.660000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p117311334105019">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row07314343507"><td class="cellrowborder" valign="top" width="17.549999999999997%"><p id="ZH-CN_TOPIC_0000002478334326__p1073163417501">key</p> </td> <td class="cellrowborder" valign="top" width="21.43%"><p id="ZH-CN_TOPIC_0000002478334326__p18731163418500">string</p> </td> <td class="cellrowborder" valign="top" width="19.36%"><p id="ZH-CN_TOPIC_0000002478334326__p157312034145016">是</p> </td> <td class="cellrowborder" valign="top" width="41.660000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p127311234195016">条件名称</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row5788141510262"><td class="cellrowborder" valign="top" width="17.549999999999997%"><p id="ZH-CN_TOPIC_0000002478334326__p11789171532613">value</p> </td> <td class="cellrowborder" valign="top" width="21.43%"><p id="ZH-CN_TOPIC_0000002478334326__p18789131522612">TaskInputValue</p> </td> <td class="cellrowborder" valign="top" width="19.36%"><p id="ZH-CN_TOPIC_0000002478334326__p678910156262">是</p> </td> <td class="cellrowborder" valign="top" width="41.660000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p127014465316">支持基本数组类型number、string、boolean及对应的数组类型的参数</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1586181612258"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table358631615256" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row13587916172511"><th align="left" class="cellrowborder" id="mcps1.3.97.8.1.3.1.1" valign="top" width="42.1%"><p id="ZH-CN_TOPIC_0000002478334326__p145871916142517">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.97.8.1.3.1.2" valign="top" width="57.9%"><p id="ZH-CN_TOPIC_0000002478334326__p558715163253">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row145872166255"><td class="cellrowborder" valign="top" width="42.1%"><p id="ZH-CN_TOPIC_0000002478334326__p85871716132519"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section425723621113">TaskInput</a></p> </td> <td class="cellrowborder" valign="top" width="57.9%"><p id="ZH-CN_TOPIC_0000002478334326__p15587111682514">当前控制任务增量的输入条件对象，用于链式调用</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p58618195412"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen19811805411" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">getNode</span><span class="">, </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorTask</span></span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorTaskContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">TaskInput</span></span><span class="">, </span><span class=""><span class="hljs-title class_">TaskOutput</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@ohos/hvigor"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">fse </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"fs-extra"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">path </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"path"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">const</span> <span class="">currentNode </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">context </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">outputFilePath </span><span class="">= </span><span class="">path</span><span class="">.</span><span class=""><span class="hljs-title function_">resolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getBuildRootPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'test.txt'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册一个生成文件的任务并为此任务设置增量</span></span></li><li>    <span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">registerTask</span></span><span class="">(</span><span class="">{</span></li><li>        <span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-string">"testTask"</span></span><span class="">,</span></li><li>        <span class=""><span class="hljs-title function_">run</span></span><span class="">(</span><span class=""><span class="hljs-attr">taskContext</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorTaskContext</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-keyword">void</span> </span><span class="">| </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="">fse</span><span class="">.</span><span class=""><span class="hljs-title function_">writeFileSync</span></span><span class="">(</span><span class="">outputFilePath</span><span class="">, </span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectName</span></span><span class="">())</span><span class="">;</span></li><li>            <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span><span class="">;</span></li><li>        <span class="">}</span><span class="">,</span></li><li>        <span class=""><span class="hljs-title function_">input</span></span><span class="">(</span><span class=""><span class="hljs-attr">input</span></span><span class="">: </span><span class=""><span class="hljs-title class_">TaskInput</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-keyword">void</span> </span><span class="">{</span></li><li>            <span class="">input</span><span class="">.</span><span class=""><span class="hljs-title function_">property</span></span><span class="">(</span><span class=""><span class="hljs-string">'projectName'</span></span><span class="">, </span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectName</span></span><span class="">())</span><span class="">;</span></li><li>        <span class="">}</span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">output</span></span><span class="">(</span><span class=""><span class="hljs-attr">output</span></span><span class="">: </span><span class=""><span class="hljs-title class_">TaskOutput</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="hljs-keyword">try</span> <span class="">{</span></li><li>                <span class="hljs-keyword">const</span> <span class="">parentDir </span><span class="">= </span><span class="">path</span><span class="">.</span><span class=""><span class="hljs-title function_">dirname</span></span><span class="">(</span><span class="">outputFilePath</span><span class="">)</span><span class="">;</span></li><li>                <span class="hljs-keyword">await</span> <span class="">fse</span><span class="">.</span><span class=""><span class="hljs-title function_">ensureDir</span></span><span class="">(</span><span class="">parentDir</span><span class="">)</span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">确保父目录存在</span></span></li><li>                <span class="hljs-keyword">await</span> <span class="">fse</span><span class="">.</span><span class=""><span class="hljs-title function_">ensureFile</span></span><span class="">(</span><span class="">outputFilePath</span><span class="">)</span><span class="">;</span></li><li>                <span class="">output</span><span class="">.</span><span class=""><span class="hljs-title function_">file</span></span><span class="">(</span><span class="">outputFilePath</span><span class="">)</span><span class="">;</span></li><li>            <span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">error</span><span class="">) </span><span class="">{</span></li><li>                <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">'File creation failed:'</span></span><span class="">, </span><span class="">error</span><span class="">)</span><span class="">;</span></li><li>                <span class="hljs-keyword">throw</span> <span class="">error</span><span class="">;</span></li><li>            <span class="">}</span></li><li><span class="">        }</span><span class="">,</span></li><li>        <span class=""><span class="hljs-attr">postDependencies</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'assembleApp'</span></span><span class="">]</span></li><li>    <span class="">}</span><span class="">)</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p6181718195411">需要在hvigor-config.json5中添加dependencies：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334326__screen161861812545" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// hvigor-config.json5</span></li><li><span class="hljs-string">"dependencies"</span>: {</li><li>    <span class="hljs-string">"fs-extra"</span>: <span class="hljs-string">"11.2.0"</span></li><li>},</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1467px;"><h3 id="section1259517165417">file<i class="anchor-icon anchor-icon-link" anchorid="section1259517165417" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p272142463916">file(path: string): TaskInput</p> <p id="ZH-CN_TOPIC_0000002478334326__p147232433918">添加单个目录或文件路径作为任务增量输入条件。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1968154315299"></p> <p id="ZH-CN_TOPIC_0000002478334326__p15114174414291"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table11846153719502" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row28461137155011"><th align="left" class="cellrowborder" id="mcps1.3.98.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p19847153735016">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.98.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p78471737175013">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.98.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p3847113710505">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.98.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p38471837105015">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row15847163725019"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p208471237155015">path</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p884753705014">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p138471437135010">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p18341162516311">目录或文件路径</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p0601151783116"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table206011817123115" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1360217174313"><th align="left" class="cellrowborder" id="mcps1.3.98.8.1.3.1.1" valign="top" width="42.1%"><p id="ZH-CN_TOPIC_0000002478334326__p176021917123119">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.98.8.1.3.1.2" valign="top" width="57.9%"><p id="ZH-CN_TOPIC_0000002478334326__p17602141719318">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row3602017113120"><td class="cellrowborder" valign="top" width="42.1%"><p id="ZH-CN_TOPIC_0000002478334326__p15602417143112"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section425723621113">TaskInput</a></p> </td> <td class="cellrowborder" valign="top" width="57.9%"><p id="ZH-CN_TOPIC_0000002478334326__p1260217173312">当前控制任务增量的输入条件对象，用于链式调用</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p858512191183"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen123021586163" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// 工程级hvigorfile.ts文件</span></span></li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">appTasks</span>, <span class=""><span class="hljs-title class_">OhosAppContext</span></span>, <span class=""><span class="hljs-title class_">OhosPluginId</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">getNode</span>, <span class="">hvigor</span>, <span class=""><span class="hljs-title class_">HvigorTask</span></span>, <span class=""><span class="hljs-title class_">HvigorTaskContext</span></span>, <span class=""><span class="hljs-title class_">TaskInput</span></span>, <span class=""><span class="hljs-title class_">TaskOutput</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">"@ohos/hvigor"</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> <span class="">fse</span> <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">"fs-extra"</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> <span class="">path</span> <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">"path"</span></span>;</li><li><span class=""><span class="hljs-keyword">const</span></span> <span class="">currentNode</span> <span class="">=</span> <span class=""><span class="hljs-title function_">getNode</span></span>(<span class="">__filename</span>);</li><li><span class="">hvigor</span>.<span class=""><span class="hljs-title function_">nodesEvaluated</span></span>(<span class="hljs-function">() </span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> {</li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class="">context</span> <span class="">=</span> <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">getContext</span></span>(<span class=""><span class="hljs-title class_">OhosPluginId</span></span>.<span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span>) <span class=""><span class="hljs-keyword">as</span></span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span>;</li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class="">outputFilePath</span> <span class="">=</span> <span class="">path</span>.<span class=""><span class="hljs-title function_">resolve</span></span>(<span class="">context</span>.<span class=""><span class="hljs-title function_">getBuildRootPath</span></span>(), <span class=""><span class="hljs-string">'testOutput.txt'</span></span>);</li><li>    <span class=""><span class="hljs-comment">// 添加单个文件路径作为任务增量输入条件</span></span></li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class="">inputFilePath</span> <span class="">=</span> <span class="">path</span>.<span class=""><span class="hljs-title function_">resolve</span></span>(<span class="">context</span>.<span class=""><span class="hljs-title function_">getProjectPath</span></span>(), <span class=""><span class="hljs-string">'testInput.txt'</span></span>); </li><li>    <span class=""><span class="hljs-comment">// 注册一个生成文件的任务并为此任务设置增量</span></span></li><li>    <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">registerTask</span></span>({</li><li>        <span class=""><span class="hljs-attr">name</span></span><span class="">:</span> <span class=""><span class="hljs-string">"testTask"</span></span>,</li><li>        <span class=""><span class="hljs-title function_">run</span></span>(<span class=""><span class="hljs-attr">taskContext</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">HvigorTaskContext</span></span>)<span class="">:</span> <span class=""><span class="hljs-keyword">void</span></span> <span class="">|</span> <span class=""><span class="hljs-title class_">Promise</span></span>&lt;<span class=""><span class="hljs-keyword">void</span></span>&gt; {</li><li>            <span class=""><span class="hljs-keyword">const</span></span> <span class="">parentDir</span> <span class="">=</span> <span class="">path</span>.<span class=""><span class="hljs-title function_">dirname</span></span>(<span class="">outputFilePath</span>);</li><li>            <span class="">fse</span>.<span class=""><span class="hljs-title function_">ensureDirSync</span></span>(<span class="">parentDir</span>); <span class=""><span class="hljs-comment">// 确保父目录存在</span></span></li><li>            <span class="">fse</span>.<span class=""><span class="hljs-title function_">ensureFileSync</span></span>(<span class="">outputFilePath</span>);</li><li>            <span class="">fse</span>.<span class=""><span class="hljs-title function_">writeFileSync</span></span>(<span class="">outputFilePath</span>, <span class="">context</span>.<span class=""><span class="hljs-title function_">getProjectName</span></span>());</li><li>            <span class=""><span class="hljs-keyword">return</span></span> <span class=""><span class="hljs-literal">undefined</span></span>;</li><li>        },</li><li>        <span class=""><span class="hljs-title function_">input</span></span>(<span class=""><span class="hljs-attr">input</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">TaskInput</span></span>)<span class="">:</span> <span class=""><span class="hljs-keyword">void</span></span> {</li><li>            <span class="">input</span>.<span class=""><span class="hljs-title function_">property</span></span>(<span class=""><span class="hljs-string">'projectName'</span></span>, <span class="">context</span>.<span class=""><span class="hljs-title function_">getProjectName</span></span>());</li><li>            <span class=""><span class="hljs-keyword">if</span></span> (<span class="">fse</span>.<span class=""><span class="hljs-title function_">existsSync</span></span>(<span class="">inputFilePath</span>)) {</li><li>                <span class="">input</span>.<span class=""><span class="hljs-title function_">file</span></span>(<span class="">inputFilePath</span>);</li><li>            }</li><li>        },</li><li>        <span class=""><span class="hljs-keyword">async</span></span> <span class=""><span class="hljs-title function_">output</span></span>(<span class=""><span class="hljs-attr">output</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">TaskOutput</span></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">Promise</span></span>&lt;<span class=""><span class="hljs-keyword">void</span></span>&gt; {</li><li>            <span class="">output</span>.<span class=""><span class="hljs-title function_">file</span></span>(<span class="">outputFilePath</span>);</li><li>        },</li><li>        <span class=""><span class="hljs-attr">postDependencies</span></span><span class="">:</span> [<span class=""><span class="hljs-string">'assembleApp'</span></span>]</li><li>    })</li><li>})</li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">default</span></span> {</li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">:</span> <span class="">appTasks</span>,  <span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span>[]         <span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li>}</li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p186400616205">需要在hvigor-config.json5中添加dependencies：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334326__screen136401061200" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// hvigor-config.json5</span></li><li><span class="hljs-string">"dependencies"</span>: {</li><li>    <span class="hljs-string">"fs-extra"</span>: <span class="hljs-string">"11.2.0"</span></li><li>},</li></ol></pre></div></div> <div class="tiledSection" style="contain-intrinsic-size: auto 1467px;"><h3 id="section297311916419">files<i class="anchor-icon anchor-icon-link" anchorid="section297311916419" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p13727244397">files(paths: string[]): TaskInput</p> <p id="ZH-CN_TOPIC_0000002478334326__p1721724193916">添加多个目录或文件路径作为任务增量输入条件。</p> <p id="ZH-CN_TOPIC_0000002478334326__p103267539297"></p> <p id="ZH-CN_TOPIC_0000002478334326__p10972349142918"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table644642145015" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row44416425509"><th align="left" class="cellrowborder" id="mcps1.3.101.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p18448420506">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.101.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p944194215501">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.101.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p7441242125011">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.101.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p15441142135013">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row144164205015"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p444242185017">paths</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p154584235020">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p144594211504">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p64515423504">目录或文件路径列表</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1563632803014"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table195671824143014" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row85681124143014"><th align="left" class="cellrowborder" id="mcps1.3.101.8.1.3.1.1" valign="top" width="42.1%"><p id="ZH-CN_TOPIC_0000002478334326__p1056832411302">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.101.8.1.3.1.2" valign="top" width="57.9%"><p id="ZH-CN_TOPIC_0000002478334326__p156819244303">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1056862415305"><td class="cellrowborder" valign="top" width="42.1%"><p id="ZH-CN_TOPIC_0000002478334326__p11568152473011"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section425723621113">TaskInput</a></p> </td> <td class="cellrowborder" valign="top" width="57.9%"><p id="ZH-CN_TOPIC_0000002478334326__p156816244301">当前控制任务增量的输入条件对象，用于链式调用</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p12488135818187"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen3613152510199" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// 工程级hvigorfile.ts文件</span></span></li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">appTasks</span>, <span class=""><span class="hljs-title class_">OhosAppContext</span></span>, <span class=""><span class="hljs-title class_">OhosPluginId</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">getNode</span>, <span class="">hvigor</span>, <span class=""><span class="hljs-title class_">HvigorTask</span></span>, <span class=""><span class="hljs-title class_">HvigorTaskContext</span></span>, <span class=""><span class="hljs-title class_">TaskInput</span></span>, <span class=""><span class="hljs-title class_">TaskOutput</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">"@ohos/hvigor"</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> <span class="">fse</span> <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">"fs-extra"</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> <span class="">path</span> <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">"path"</span></span>;</li><li><span class=""><span class="hljs-keyword">const</span></span> <span class="">currentNode</span> <span class="">=</span> <span class=""><span class="hljs-title function_">getNode</span></span>(<span class="">__filename</span>);</li><li><span class="">hvigor</span>.<span class=""><span class="hljs-title function_">nodesEvaluated</span></span>(<span class="hljs-function">() </span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> {</li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class="">context</span> <span class="">=</span> <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">getContext</span></span>(<span class=""><span class="hljs-title class_">OhosPluginId</span></span>.<span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span>) <span class=""><span class="hljs-keyword">as</span></span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span>;</li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class="">outputFilePath</span> <span class="">=</span> <span class="">path</span>.<span class=""><span class="hljs-title function_">resolve</span></span>(<span class="">context</span>.<span class=""><span class="hljs-title function_">getBuildRootPath</span></span>(), <span class=""><span class="hljs-string">'test.txt'</span></span>);</li><li>    <span class=""><span class="hljs-comment">// 添加单个文件路径作为任务增量输入条件。</span></span></li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class="">inputFilePath</span> <span class="">=</span> <span class="">path</span>.<span class=""><span class="hljs-title function_">resolve</span></span>(<span class="">context</span>.<span class=""><span class="hljs-title function_">getProjectPath</span></span>(), <span class=""><span class="hljs-string">'test.txt'</span></span>); </li><li>    <span class=""><span class="hljs-comment">// 注册一个生成文件的任务并为此任务设置增量</span></span></li><li>    <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">registerTask</span></span>({</li><li>        <span class=""><span class="hljs-attr">name</span></span><span class="">:</span> <span class=""><span class="hljs-string">"testTask"</span></span>,</li><li>        <span class=""><span class="hljs-title function_">run</span></span>(<span class=""><span class="hljs-attr">taskContext</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">HvigorTaskContext</span></span>)<span class="">:</span> <span class=""><span class="hljs-keyword">void</span></span> <span class="">|</span> <span class=""><span class="hljs-title class_">Promise</span></span>&lt;<span class=""><span class="hljs-keyword">void</span></span>&gt; {</li><li>            <span class=""><span class="hljs-keyword">const</span></span> <span class="">parentDir</span> <span class="">=</span> <span class="">path</span>.<span class=""><span class="hljs-title function_">dirname</span></span>(<span class="">outputFilePath</span>);</li><li>            <span class="">fse</span>.<span class=""><span class="hljs-title function_">ensureDirSync</span></span>(<span class="">parentDir</span>); <span class=""><span class="hljs-comment">// 确保父目录存在</span></span></li><li>            <span class="">fse</span>.<span class=""><span class="hljs-title function_">ensureFileSync</span></span>(<span class="">outputFilePath</span>);</li><li>            <span class="">fse</span>.<span class=""><span class="hljs-title function_">writeFileSync</span></span>(<span class="">outputFilePath</span>, <span class="">context</span>.<span class=""><span class="hljs-title function_">getProjectName</span></span>());</li><li>            <span class=""><span class="hljs-keyword">return</span></span> <span class=""><span class="hljs-literal">undefined</span></span>;</li><li>        },</li><li>        <span class=""><span class="hljs-title function_">input</span></span>(<span class=""><span class="hljs-attr">input</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">TaskInput</span></span>)<span class="">:</span> <span class=""><span class="hljs-keyword">void</span></span> {</li><li>            <span class="">input</span>.<span class=""><span class="hljs-title function_">property</span></span>(<span class=""><span class="hljs-string">'projectName'</span></span>, <span class="">context</span>.<span class=""><span class="hljs-title function_">getProjectName</span></span>());</li><li>            <span class=""><span class="hljs-keyword">if</span></span> (<span class="">fse</span>.<span class=""><span class="hljs-title function_">existsSync</span></span>(<span class="">inputFilePath</span>)) {</li><li>                <span class="">input</span>.<span class=""><span class="hljs-title function_">files</span></span>([<span class="">inputFilePath</span>, ]);</li><li>            }</li><li>        },</li><li>        <span class=""><span class="hljs-keyword">async</span></span> <span class=""><span class="hljs-title function_">output</span></span>(<span class=""><span class="hljs-attr">output</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">TaskOutput</span></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">Promise</span></span>&lt;<span class=""><span class="hljs-keyword">void</span></span>&gt; {</li><li>            <span class="">output</span>.<span class=""><span class="hljs-title function_">files</span></span>([<span class="">outputFilePath</span>,]);</li><li>        },</li><li>        <span class=""><span class="hljs-attr">postDependencies</span></span><span class="">:</span> [<span class=""><span class="hljs-string">'assembleApp'</span></span>]</li><li>    })</li><li>})</li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">default</span></span> {</li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">:</span> <span class="">appTasks</span>,  <span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span>[]         <span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li>}</li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p133414119207">需要在hvigor-config.json5中添加dependencies：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334326__screen5334161132018" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// hvigor-config.json5</span></li><li><span class="hljs-string">"dependencies"</span>: {</li><li>    <span class="hljs-string">"fs-extra"</span>: <span class="hljs-string">"11.2.0"</span></li><li>},</li></ol></pre></div></div> <div class="tiledSection" style="contain-intrinsic-size: auto 116px;"><h2 id="section135442202125">TaskOutput<i class="anchor-icon anchor-icon-link" anchorid="section135442202125" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p1583953913110">任务增量执行判断的输出对象实现类型，提供添加任务输出条件的基本函数。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 169px;"><h3 id="section202626512410" class="firsth2">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section202626512410" tips="复制节点链接"></i></h3><div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1334781052415" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">TaskOutput</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1695px;"><h3 id="section0406426124120">file<i class="anchor-icon anchor-icon-link" anchorid="section0406426124120" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1443033218399">file(path: string): TaskOutput</p> <p id="ZH-CN_TOPIC_0000002478334326__p74301332183911">添加单个目录或文件路径作为任务的增量输出条件。</p> <p id="ZH-CN_TOPIC_0000002478334326__p7263163604218"></p> <p id="ZH-CN_TOPIC_0000002478334326__p15741734194210"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table999711457504" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row5998845145012"><th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p169985459507">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1199844512504">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p29982457506">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p9998144512501">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row999884513509"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p12711152265619">path</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p14998204514506">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p2998134510505">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1199834565016">目录或文件路径</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p104461954174213"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table14914144018576" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1791494018572"><th align="left" class="cellrowborder" id="mcps1.3.106.8.1.3.1.1" valign="top" width="42%"><p id="ZH-CN_TOPIC_0000002478334326__p189152040105712">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.106.8.1.3.1.2" valign="top" width="57.99999999999999%"><p id="ZH-CN_TOPIC_0000002478334326__p179151940175719">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row6915184025711"><td class="cellrowborder" valign="top" width="42%"><p id="ZH-CN_TOPIC_0000002478334326__p291512406573"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section135442202125">TaskOutput</a></p> </td> <td class="cellrowborder" valign="top" width="57.99999999999999%"><p id="ZH-CN_TOPIC_0000002478334326__p185741937162117">当前控制任务增量的输出条件对象，用于支持链式调用</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p5503204812549"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1260875291913" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// 工程级hvigorfile.ts文件</span></span></li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">appTasks</span>, <span class=""><span class="hljs-title class_">OhosAppContext</span></span>, <span class=""><span class="hljs-title class_">OhosPluginId</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">getNode</span>, <span class="">hvigor</span>, <span class=""><span class="hljs-title class_">HvigorTask</span></span>, <span class=""><span class="hljs-title class_">HvigorTaskContext</span></span>, <span class=""><span class="hljs-title class_">TaskInput</span></span>, <span class=""><span class="hljs-title class_">TaskOutput</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">"@ohos/hvigor"</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> <span class="">fse</span> <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">"fs-extra"</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> <span class="">path</span> <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">"path"</span></span>;</li><li><span class=""><span class="hljs-keyword">const</span></span> <span class="">currentNode</span> <span class="">=</span> <span class=""><span class="hljs-title function_">getNode</span></span>(<span class="">__filename</span>);</li><li><span class="">hvigor</span>.<span class=""><span class="hljs-title function_">nodesEvaluated</span></span>(<span class="hljs-function">() </span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> {</li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class="">context</span> <span class="">=</span> <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">getContext</span></span>(<span class=""><span class="hljs-title class_">OhosPluginId</span></span>.<span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span>) <span class=""><span class="hljs-keyword">as</span></span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span>;</li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class="">outputFilePath</span> <span class="">=</span> <span class="">path</span>.<span class=""><span class="hljs-title function_">resolve</span></span>(<span class="">context</span>.<span class=""><span class="hljs-title function_">getBuildRootPath</span></span>(), <span class=""><span class="hljs-string">'testOutput.txt'</span></span>);</li><li>    <span class=""><span class="hljs-comment">// 添加单个文件路径作为任务增量输入条件</span></span></li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class="">inputFilePath</span> <span class="">=</span> <span class="">path</span>.<span class=""><span class="hljs-title function_">resolve</span></span>(<span class="">context</span>.<span class=""><span class="hljs-title function_">getProjectPath</span></span>(), <span class=""><span class="hljs-string">'testInput.txt'</span></span>); </li><li>    <span class=""><span class="hljs-comment">// 注册一个生成文件的任务并为此任务设置增量</span></span></li><li>    <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">registerTask</span></span>({</li><li>        <span class=""><span class="hljs-attr">name</span></span><span class="">:</span> <span class=""><span class="hljs-string">"testTask"</span></span>,</li><li>        <span class=""><span class="hljs-title function_">run</span></span>(<span class=""><span class="hljs-attr">taskContext</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">HvigorTaskContext</span></span>)<span class="">:</span> <span class=""><span class="hljs-keyword">void</span></span> <span class="">|</span> <span class=""><span class="hljs-title class_">Promise</span></span>&lt;<span class=""><span class="hljs-keyword">void</span></span>&gt; {</li><li>            <span class=""><span class="hljs-keyword">const</span></span> <span class="">parentDir</span> <span class="">=</span> <span class="">path</span>.<span class=""><span class="hljs-title function_">dirname</span></span>(<span class="">outputFilePath</span>);</li><li>            <span class="">fse</span>.<span class=""><span class="hljs-title function_">ensureDirSync</span></span>(<span class="">parentDir</span>); <span class=""><span class="hljs-comment">// 确保父目录存在</span></span></li><li>            <span class="">fse</span>.<span class=""><span class="hljs-title function_">ensureFileSync</span></span>(<span class="">outputFilePath</span>);</li><li>            <span class="">fse</span>.<span class=""><span class="hljs-title function_">writeFileSync</span></span>(<span class="">outputFilePath</span>, <span class="">context</span>.<span class=""><span class="hljs-title function_">getProjectName</span></span>());</li><li>            <span class=""><span class="hljs-keyword">return</span></span> <span class=""><span class="hljs-literal">undefined</span></span>;</li><li>        },</li><li>        <span class=""><span class="hljs-title function_">input</span></span>(<span class=""><span class="hljs-attr">input</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">TaskInput</span></span>)<span class="">:</span> <span class=""><span class="hljs-keyword">void</span></span> {</li><li>            <span class="">input</span>.<span class=""><span class="hljs-title function_">property</span></span>(<span class=""><span class="hljs-string">'projectName'</span></span>, <span class="">context</span>.<span class=""><span class="hljs-title function_">getProjectName</span></span>());</li><li>            <span class=""><span class="hljs-keyword">if</span></span> (<span class="">fse</span>.<span class=""><span class="hljs-title function_">existsSync</span></span>(<span class="">inputFilePath</span>)) {</li><li>                <span class="">input</span>.<span class=""><span class="hljs-title function_">file</span></span>(<span class="">inputFilePath</span>);</li><li>            }</li><li>        },</li><li>        <span class=""><span class="hljs-keyword">async</span></span> <span class=""><span class="hljs-title function_">output</span></span>(<span class=""><span class="hljs-attr">output</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">TaskOutput</span></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">Promise</span></span>&lt;<span class=""><span class="hljs-keyword">void</span></span>&gt; {</li><li>            <span class="">output</span>.<span class=""><span class="hljs-title function_">file</span></span>(<span class="">outputFilePath</span>);</li><li>        },</li><li>        <span class=""><span class="hljs-attr">postDependencies</span></span><span class="">:</span> [<span class=""><span class="hljs-string">'assembleApp'</span></span>]</li><li>    })</li><li>})</li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">default</span></span> {</li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">:</span> <span class="">appTasks</span>,  <span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span>[]         <span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li>}</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334326__p45124486547">需要在hvigor-config.json5中添加dependencies：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334326__screen11512174812549" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// hvigor-config.json5</span></li><li><span class="hljs-string">"dependencies"</span>: {</li><li>    <span class="hljs-string">"fs-extra"</span>: <span class="hljs-string">"11.2.0"</span></li><li>},</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1467px;"><h3 id="section126236293416">files<i class="anchor-icon anchor-icon-link" anchorid="section126236293416" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p16430932103920">files(paths: string[]): TaskOutput</p> <p id="ZH-CN_TOPIC_0000002478334326__p5560132718256">添加多个目录或文件路径作为任务的增量输出条件。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1780161912439"></p> <p id="ZH-CN_TOPIC_0000002478334326__p21319182434"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table15706174875016" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row870654885017"><th align="left" class="cellrowborder" id="mcps1.3.107.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p19706144885016">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.107.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p17706154811501">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.107.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p14706148195011">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.107.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p7706448155012">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1570612480501"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p2070610489508">paths</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p14706164817505">string[]</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p270674855019">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1714154065512">目录或文件路径列表</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p612773894315"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table6335194375611" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row18335184315565"><th align="left" class="cellrowborder" id="mcps1.3.107.8.1.3.1.1" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p733510432566">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.107.8.1.3.1.2" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1133554313562">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row123354430560"><td class="cellrowborder" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p4335104313561"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section135442202125">TaskOutput</a></p> </td> <td class="cellrowborder" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p03351743195611">控制任务增量的输出条件对象，用于支持链式调用</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1954318611217"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen12169931111918" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// 工程级hvigorfile.ts文件</span></span></li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">appTasks</span>, <span class=""><span class="hljs-title class_">OhosAppContext</span></span>, <span class=""><span class="hljs-title class_">OhosPluginId</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">getNode</span>, <span class="">hvigor</span>, <span class=""><span class="hljs-title class_">HvigorTask</span></span>, <span class=""><span class="hljs-title class_">HvigorTaskContext</span></span>, <span class=""><span class="hljs-title class_">TaskInput</span></span>, <span class=""><span class="hljs-title class_">TaskOutput</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">"@ohos/hvigor"</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> <span class="">fse</span> <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">"fs-extra"</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> <span class="">path</span> <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">"path"</span></span>;</li><li><span class=""><span class="hljs-keyword">const</span></span> <span class="">currentNode</span> <span class="">=</span> <span class=""><span class="hljs-title function_">getNode</span></span>(<span class="">__filename</span>);</li><li><span class="">hvigor</span>.<span class=""><span class="hljs-title function_">nodesEvaluated</span></span>(<span class="hljs-function">() </span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> {</li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class="">context</span> <span class="">=</span> <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">getContext</span></span>(<span class=""><span class="hljs-title class_">OhosPluginId</span></span>.<span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span>) <span class=""><span class="hljs-keyword">as</span></span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span>;</li><li><span class="">    <span class="hljs-keyword">const</span></span> <span class="">outputFilePath</span> <span class="">=</span> <span class="">path</span>.<span class=""><span class="hljs-title function_">resolve</span></span>(<span class="">context</span>.<span class=""><span class="hljs-title function_">getBuildRootPath</span></span>(), <span class=""><span class="hljs-string">'testOutput.txt'</span></span>);</li><li>    <span class=""><span class="hljs-comment">// 添加单个文件路径作为任务增量输入条件。</span></span></li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class="">inputFilePath</span> <span class="">=</span> <span class="">path</span>.<span class=""><span class="hljs-title function_">resolve</span></span>(<span class="">context</span>.<span class=""><span class="hljs-title function_">getProjectPath</span></span>(), <span class=""><span class="hljs-string">'testInput.txt'</span></span>); </li><li>    <span class=""><span class="hljs-comment">// 注册一个生成文件的任务并为此任务设置增量</span></span></li><li>    <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">registerTask</span></span>({</li><li>        <span class=""><span class="hljs-attr">name</span></span><span class="">:</span> <span class=""><span class="hljs-string">"testTask"</span></span>,</li><li>        <span class=""><span class="hljs-title function_">run</span></span>(<span class=""><span class="hljs-attr">taskContext</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">HvigorTaskContext</span></span>)<span class="">:</span> <span class=""><span class="hljs-keyword">void</span></span> <span class="">|</span> <span class=""><span class="hljs-title class_">Promise</span></span>&lt;<span class=""><span class="hljs-keyword">void</span></span>&gt; {</li><li>            <span class=""><span class="hljs-keyword">const</span></span> <span class="">parentDir</span> <span class="">=</span> <span class="">path</span>.<span class=""><span class="hljs-title function_">dirname</span></span>(<span class="">outputFilePath</span>);</li><li>            <span class="">fse</span>.<span class=""><span class="hljs-title function_">ensureDirSync</span></span>(<span class="">parentDir</span>); <span class=""><span class="hljs-comment">// 确保父目录存在</span></span></li><li>            <span class="">fse</span>.<span class=""><span class="hljs-title function_">ensureFileSync</span></span>(<span class="">outputFilePath</span>);</li><li>            <span class="">fse</span>.<span class=""><span class="hljs-title function_">writeFileSync</span></span>(<span class="">outputFilePath</span>, <span class="">context</span>.<span class=""><span class="hljs-title function_">getProjectName</span></span>());</li><li>            <span class=""><span class="hljs-keyword">return</span></span> <span class=""><span class="hljs-literal">undefined</span></span>;</li><li>        },</li><li>        <span class=""><span class="hljs-title function_">input</span></span>(<span class=""><span class="hljs-attr">input</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">TaskInput</span></span>)<span class="">:</span> <span class=""><span class="hljs-keyword">void</span></span> {</li><li>            <span class="">input</span>.<span class=""><span class="hljs-title function_">property</span></span>(<span class=""><span class="hljs-string">'projectName'</span></span>, <span class="">context</span>.<span class=""><span class="hljs-title function_">getProjectName</span></span>());</li><li>            <span class=""><span class="hljs-keyword">if</span></span> (<span class="">fse</span>.<span class=""><span class="hljs-title function_">existsSync</span></span>(<span class="">inputFilePath</span>)) {</li><li>                <span class="">input</span>.<span class=""><span class="hljs-title function_">files</span></span>([<span class="">inputFilePath</span>, ]);</li><li>            }</li><li>        },</li><li>        <span class=""><span class="hljs-keyword">async</span></span> <span class=""><span class="hljs-title function_">output</span></span>(<span class=""><span class="hljs-attr">output</span></span><span class="">:</span> <span class=""><span class="hljs-title class_">TaskOutput</span></span>)<span class="">:</span> <span class=""><span class="hljs-title class_">Promise</span></span>&lt;<span class=""><span class="hljs-keyword">void</span></span>&gt; {</li><li>            <span class="">output</span>.<span class=""><span class="hljs-title function_">files</span></span>([<span class="">outputFilePath</span>,]);</li><li>        },</li><li>        <span class=""><span class="hljs-attr">postDependencies</span></span><span class="">:</span> [<span class=""><span class="hljs-string">'assembleApp'</span></span>]</li><li>    })</li><li>})</li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">default</span></span> {</li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">:</span> <span class="">appTasks</span>,  <span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span>[]         <span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li>}</li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p2473123922014">需要在hvigor-config.json5中添加dependencies：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334326__screen1947363917208" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// hvigor-config.json5</span></li><li><span class="hljs-string">"dependencies"</span>: {</li><li>    <span class="hljs-string">"fs-extra"</span>: <span class="hljs-string">"11.2.0"</span></li><li>},</li></ol></pre></div></div> <div class="tiledSection" style="contain-intrinsic-size: auto 116px;"><h2 id="section2055582515349">Task<i class="anchor-icon anchor-icon-link" anchorid="section2055582515349" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p136991332224">HvigorTask的外置对象。您可以使用此对象访问任务的属性、 操作任务提供的接口函数。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 169px;"><h3 id="section719416286246" class="firsth2">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section719416286246" tips="复制节点链接"></i></h3><div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1497683392419" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Task</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 92px;"><h3 id="section11715103574120">getName<i class="anchor-icon anchor-icon-link" anchorid="section11715103574120" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p11661350194416">getName: () =&gt; string</p> </div> <p id="ZH-CN_TOPIC_0000002478334326__p34297162409">获取任务名称。</p> <p id="ZH-CN_TOPIC_0000002478334326__p3175171312444"></p> <p id="ZH-CN_TOPIC_0000002478334326__p1235014148448"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table122311214164716" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row7232151419477"><th align="left" class="cellrowborder" id="mcps1.3.116.1.3.1.1" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p223281444718">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.116.1.3.1.2" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p12321414104716">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row192329146475"><td class="cellrowborder" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p132321314114711">string</p> </td> <td class="cellrowborder" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p11342995414">任务名称</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p16333134611610"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen14525622914" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span> <span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">Task</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">assembleAppTask</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Task</span> </span><span class="">| </span><span class=""><span class="hljs-literal">undefined</span> </span><span class="">= </span><span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getTaskByName</span></span><span class="">(</span><span class=""><span class="hljs-string">'assembleApp'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">assembleAppTask</span><span class="">) </span><span class="">{</span></li><li>        <span class="hljs-keyword">const</span> <span class="">taskName </span><span class="">= </span><span class="">assembleAppTask</span><span class="">.</span><span class=""><span class="hljs-title function_">getName</span></span><span class="">()</span><span class="">;</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`taskName: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">taskName</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> <div class="tiledSection" style="contain-intrinsic-size: auto 92px;"><h3 id="section9354184114414">getDependencies<i class="anchor-icon anchor-icon-link" anchorid="section9354184114414" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1157175513441">getDependencies: () =&gt; string[]</p> </div> <p id="ZH-CN_TOPIC_0000002478334326__p20429101614406">获取当前任务依赖的前置任务名称列表。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1830183214410"></p> <p id="ZH-CN_TOPIC_0000002478334326__p16710103044419"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table153161124472" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row193161012164711"><th align="left" class="cellrowborder" id="mcps1.3.123.1.3.1.1" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p12316151212470">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.123.1.3.1.2" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p8316912174710">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row143171112104720"><td class="cellrowborder" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p1931751204710">string[]</p> </td> <td class="cellrowborder" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p73171512134716">当前任务依赖的前置任务名称列表</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p172413813715"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen16443408213" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">Task</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">assembleAppTask</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Task</span> </span><span class="">| </span><span class=""><span class="hljs-literal">undefined</span> </span><span class="">= </span><span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getTaskByName</span></span><span class="">(</span><span class=""><span class="hljs-string">'assembleApp'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">assembleAppTask</span><span class="">) </span><span class="">{</span></li><li>        <span class="hljs-keyword">const</span> <span class="">taskDependencies </span><span class="">= </span><span class="">assembleAppTask</span><span class="">.</span><span class=""><span class="hljs-title function_">getDependencies</span></span><span class="">()</span><span class="">;</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Task Dependencies: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">taskDependencies</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> <div class="tiledSection" style="contain-intrinsic-size: auto 956px;"><h3 id="section14344464114">setEnable<i class="anchor-icon anchor-icon-link" anchorid="section14344464114" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p742981612409">setEnable: (enable: boolean) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334326__p124292016184017">设置任务的启用状态，当任务被禁用时，任务仍然在任务依赖图中存在，仅跳过了任务的执行，不会破坏原来设定的任务依赖关系。任务被注册时任务状态默认是启用的。</p> <p id="ZH-CN_TOPIC_0000002478334326__p212014447443"></p> <p id="ZH-CN_TOPIC_0000002478334326__p075644244418"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1062165595019" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row46215517500"><th align="left" class="cellrowborder" id="mcps1.3.126.6.1.5.1.1" valign="top" width="22.28%"><p id="ZH-CN_TOPIC_0000002478334326__p462255185012">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.126.6.1.5.1.2" valign="top" width="22.5%"><p id="ZH-CN_TOPIC_0000002478334326__p16215565018">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.126.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p10626553509">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.126.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p4621255105014">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row18629559500"><td class="cellrowborder" valign="top" width="22.28%"><p id="ZH-CN_TOPIC_0000002478334326__p36205512508">enable</p> </td> <td class="cellrowborder" valign="top" width="22.5%"><p id="ZH-CN_TOPIC_0000002478334326__p1629551509">boolean</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p96215516503">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1562135555017">true：启用任务， false: 禁用任务</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p187021614271"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen11841443294" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">Task</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取</span></span><span class=""><span class="hljs-comment">hap</span></span><span class=""><span class="hljs-comment">模块上下文信息</span></span></li><li>        <span class="hljs-keyword">const</span> <span class="">hapContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">const</span> <span class="">moduleName </span><span class="">= </span><span class="">hapContext</span><span class="">?.</span><span class=""><span class="hljs-title function_">getModuleName</span></span><span class="">()</span><span class="">;</span></li><li>        <span class="">hapContext</span><span class="">?.</span><span class=""><span class="hljs-title function_">targets</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">target</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">Target</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>            <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">禁用任务</span></span></li><li>            <span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getTaskByName</span></span><span class="">(</span><span class=""><span class="hljs-string">`</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">target</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">getTargetName</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">()</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">@SignHap`</span></span><span class="">)</span><span class="">?.</span><span class=""><span class="hljs-title function_">setEnable</span></span><span class="">(</span><span class="hljs-literal">false</span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 884px;"><h3 id="section1272314810417">beforeRun<i class="anchor-icon anchor-icon-link" anchorid="section1272314810417" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p191485420452">beforeRun: (fn: Function) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334326__p113431728172417">添加任务执行之前的钩子函数。钩子函数以栈结构存储，遵循先进后出原则，后添加的函数先被执行。</p> <p id="ZH-CN_TOPIC_0000002478334326__p5193156488"></p> <p id="ZH-CN_TOPIC_0000002478334326__p1410803194819"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table2657557135018" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row146571057165010"><th align="left" class="cellrowborder" id="mcps1.3.127.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p38151650195116">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.127.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p188158507519">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.127.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p14815125011516">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.127.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p4815105015117">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row176578570504"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p16816950125113">fn</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p15816350155111">Function</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p8816185045112">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p981665015120">回调函数</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1846511181877"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen61023119166" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">Task</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">assembleAppTask</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Task</span> </span><span class="">| </span><span class=""><span class="hljs-literal">undefined</span> </span><span class="">= </span><span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getTaskByName</span></span><span class="">(</span><span class=""><span class="hljs-string">'assembleApp'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">assembleAppTask</span><span class="">) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">任务执行之前的钩子函数</span></span></li><li>        <span class="">assembleAppTask</span><span class="">.</span><span class=""><span class="hljs-title function_">beforeRun</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>            <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">'Before Task: assembleApp'</span></span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 92px;"><h3 id="section15852516411">afterRun<i class="anchor-icon anchor-icon-link" anchorid="section15852516411" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1313718164451">afterRun: (fn: Function) =&gt; void</p> </div> <p id="ZH-CN_TOPIC_0000002478334326__p0429121664014">添加任务执行完成之后的钩子函数。钩子函数以堆结构存储，遵循先进先出原则，先添加的函数先被执行。</p> <p id="ZH-CN_TOPIC_0000002478334326__p199564159486"></p> <p id="ZH-CN_TOPIC_0000002478334326__p6138714124810"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table388419591503" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row188841559205019"><th align="left" class="cellrowborder" id="mcps1.3.132.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p688455995015">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.132.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p88841759125015">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.132.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1088435955014">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.132.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p11884559115018">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row5884125915018"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1888414598501">fn</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p688485919508">Function</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p198849591503">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1110913346513">回调函数</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p145246221675"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen14729101581717" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">, </span><span class=""><span class="hljs-title class_">Task</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">assembleAppTask</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Task</span> </span><span class="">| </span><span class=""><span class="hljs-literal">undefined</span> </span><span class="">= </span><span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getTaskByName</span></span><span class="">(</span><span class=""><span class="hljs-string">'assembleApp'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">assembleAppTask</span><span class="">) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">任务执行之后的钩子函数</span></span></li><li>        <span class="">assembleAppTask</span><span class="">.</span><span class=""><span class="hljs-title function_">afterRun</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>            <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">'After Task: assembleApp'</span></span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> <div class="tiledSection" style="contain-intrinsic-size: auto 116px;"><h2 id="section1463642114714">SdkDetails<i class="anchor-icon anchor-icon-link" anchorid="section1463642114714" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p12637142194711">应用工程使用的SDK相关的信息。在调用SdkDetails的接口前，可以先通过OhosAppContext的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-build-expanding-context#section085712212299">getSdkDetails</a>方法来获取本对象。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 169px;"><h3 id="section263713219476" class="firsth2">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section263713219476" tips="复制节点链接"></i></h3><div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen17637202154714" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">SdkDetails</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1172px;"><h3 id="section106371325478">getSdkDir<i class="anchor-icon anchor-icon-link" anchorid="section106371325478" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1263711234719">getSdkDir: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334326__p196371927475">获取SDK所在目录。</p> <p id="ZH-CN_TOPIC_0000002478334326__p9990741526"><strong>起始版本：</strong>Hvigor 6.0.4</p> <p id="ZH-CN_TOPIC_0000002478334326__p13637629478"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table176373215475" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row196371722471"><th align="left" class="cellrowborder" id="mcps1.3.137.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p1963713284718">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.137.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p17637192184714">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1063717215470"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p56389219474">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p1163817254714">SDK所在目录</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p194471118553">在工程级hvigorfile.ts中编写示例代码：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen939051913557" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">SdkDetails</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>  <span class="hljs-keyword">return</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">context</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>      <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">data</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin xxx'</span></span></li><li>      <span class="">}</span><span class="">;</span></li><li>    <span class="">}</span><span class="">,</span></li><li>    <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>      <span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">afterNodeEvaluate</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">node</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">if</span> <span class="">(</span><span class="">appContext</span><span class="">) </span><span class="">{</span></li><li>          <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">sdk</span></span><span class="">:</span><span class=""><span class="hljs-title class_">SdkDetails</span> </span><span class="">= </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getSdkDetails</span></span><span class="">()</span><span class="">;</span></li><li>          <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">sdk</span><span class="">?.</span><span class=""><span class="hljs-title function_">getSdkDir</span></span><span class="">())</span></li><li>        <span class="">}</span></li><li><span class="">      }</span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">  }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>  <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>  <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1172px;"><h3 id="section619251313237">isOhos<i class="anchor-icon anchor-icon-link" anchorid="section619251313237" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p33073166152">isOhos: () =&gt; boolean</p> <p id="ZH-CN_TOPIC_0000002478334326__p18307161610156">判断是否为OpenHarmony SDK。</p> <p id="ZH-CN_TOPIC_0000002478334326__p22285158528"><strong>起始版本：</strong>Hvigor 6.0.4</p> <p id="ZH-CN_TOPIC_0000002478334326__p1230701612152"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1930791661510" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1230731613154"><th align="left" class="cellrowborder" id="mcps1.3.138.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p2308161618157">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.138.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p1430871611513">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1030821671516"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p143081616181518">boolean</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p16308121681517">是否为OpenHarmony SDK</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1734175235512">在工程级hvigorfile.ts中编写示例代码：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen13413524551" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">SdkDetails</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>  <span class="hljs-keyword">return</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">context</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>      <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">data</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin xxx'</span></span></li><li>      <span class="">}</span><span class="">;</span></li><li>    <span class="">}</span><span class="">,</span></li><li>    <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>      <span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">afterNodeEvaluate</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">node</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">if</span> <span class="">(</span><span class="">appContext</span><span class="">) </span><span class="">{</span></li><li>          <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">sdk</span></span><span class="">:</span><span class=""><span class="hljs-title class_">SdkDetails</span> </span><span class="">= </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getSdkDetails</span></span><span class="">()</span><span class="">;</span></li><li>          <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">sdk</span><span class="">?.</span><span class=""><span class="hljs-title function_">isOhos</span></span><span class="">())</span></li><li>        <span class="">}</span></li><li><span class="">      }</span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">  }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>  <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>  <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1172px;"><h3 id="section3968134724317">getSdkVersion<i class="anchor-icon anchor-icon-link" anchorid="section3968134724317" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p3795101171817">getSdkVersion: () =&gt; number</p> <p id="ZH-CN_TOPIC_0000002478334326__p1795131111184">获取SDK的版本号。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1593772419528"><strong>起始版本：</strong>Hvigor 6.0.4</p> <p id="ZH-CN_TOPIC_0000002478334326__p197967111189"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table2796161141817" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row6796141117181"><th align="left" class="cellrowborder" id="mcps1.3.139.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p7796161141819">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.139.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p2796141131814">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row37971811101815"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p379713117187">number</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p1579713112186">SDK版本号</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p8901212565">在工程级hvigorfile.ts中编写示例代码：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen119015135610" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">SdkDetails</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>  <span class="hljs-keyword">return</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">context</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>      <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">data</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin xxx'</span></span></li><li>      <span class="">}</span><span class="">;</span></li><li>    <span class="">}</span><span class="">,</span></li><li>    <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>      <span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">afterNodeEvaluate</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">node</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">if</span> <span class="">(</span><span class="">appContext</span><span class="">) </span><span class="">{</span></li><li>          <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">sdk</span></span><span class="">:</span><span class=""><span class="hljs-title class_">SdkDetails</span> </span><span class="">= </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getSdkDetails</span></span><span class="">()</span><span class="">;</span></li><li>          <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">sdk</span><span class="">?.</span><span class=""><span class="hljs-title function_">getSdkVersion</span></span><span class="">())</span></li><li>        <span class="">}</span></li><li><span class="">      }</span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">  }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>  <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>  <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1172px;"><h3 id="section1993911616440">getEtsComponentVersion<i class="anchor-icon anchor-icon-link" anchorid="section1993911616440" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1728139183213">getEtsComponentVersion: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334326__p17728119143217">获取SDK中ets组件（DevEco Studio安装目录/sdk/default/openharmony/ets目录下的组件）的版本号。</p> <p id="ZH-CN_TOPIC_0000002478334326__p0613941175213"><strong>起始版本：</strong>Hvigor 6.0.4</p> <p id="ZH-CN_TOPIC_0000002478334326__p1272810933213"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table272815993219" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1728149123217"><th align="left" class="cellrowborder" id="mcps1.3.140.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p1072913943215">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.140.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p1572912923215">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row17292933219"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p772919163218">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p14729129193219">获取SDK中ets组件的版本号</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1925714145566">在工程级hvigorfile.ts中编写示例代码：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen72587148569" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">SdkDetails</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>  <span class="hljs-keyword">return</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">context</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>      <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">data</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin xxx'</span></span></li><li>      <span class="">}</span><span class="">;</span></li><li>    <span class="">}</span><span class="">,</span></li><li>    <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>      <span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">afterNodeEvaluate</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">node</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">if</span> <span class="">(</span><span class="">appContext</span><span class="">) </span><span class="">{</span></li><li>          <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">sdk</span></span><span class="">:</span><span class=""><span class="hljs-title class_">SdkDetails</span> </span><span class="">= </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getSdkDetails</span></span><span class="">()</span><span class="">;</span></li><li>          <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">sdk</span><span class="">?.</span><span class=""><span class="hljs-title function_">getEtsComponentVersion</span></span><span class="">())</span></li><li>        <span class="">}</span></li><li><span class="">      }</span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">  }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>  <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>  <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1172px;"><h3 id="section209437387446">getEtsComponentReleaseType<i class="anchor-icon anchor-icon-link" anchorid="section209437387446" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p14651141663213">getEtsComponentReleaseType: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334326__p1365191623212">获取SDK中ets组件（DevEco Studio安装目录/sdk/default/openharmony/ets目录下的组件）的发布类型值。</p> <p id="ZH-CN_TOPIC_0000002478334326__p18745463529"><strong>起始版本：</strong>Hvigor 6.0.4</p> <p id="ZH-CN_TOPIC_0000002478334326__p7651131616325"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table265219168326" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row10652191633216"><th align="left" class="cellrowborder" id="mcps1.3.141.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p13652416113215">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.141.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p5652161693219">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row5652111613215"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334326__p1565311167323">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334326__p126538166322">获取SDK中ets组件发布类型值</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1896172114516">在工程级hvigorfile.ts中编写示例代码：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen17220147123811" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{</span><span class=""> <span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">,</span><span class=""> <span class="hljs-title class_">SdkDetails</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>  <span class="hljs-keyword">return</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">context</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>      <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">data</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin xxx'</span></span></li><li>      <span class="">}</span><span class="">;</span></li><li>    <span class="">}</span><span class="">,</span></li><li>    <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>      <span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">afterNodeEvaluate</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">node</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">if</span> <span class="">(</span><span class="">appContext</span><span class="">) </span><span class="">{</span></li><li>          <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">sdk</span></span><span class="">:</span><span class=""><span class="hljs-title class_">SdkDetails</span> </span><span class="">= </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getSdkDetails</span></span><span class="">()</span><span class="">;</span></li><li>          <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">sdk</span><span class="">?.</span><span class=""><span class="hljs-title function_">getEtsComponentReleaseType</span></span><span class="">())</span></li><li>        <span class="">}</span></li><li><span class="">      }</span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">  }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>  <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>  <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 116px;"><h2 id="section281448112713">NormalizedFile<i class="anchor-icon anchor-icon-link" anchorid="section281448112713" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p481848202711">hvigor API中的文件类。您可以通过此对象来进行一些基本的文件操作。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 685px;"><h3 id="section172451306159" class="firsth2">filePath<i class="anchor-icon anchor-icon-link" anchorid="section172451306159" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p724583081517">filePath: string</p> <p id="ZH-CN_TOPIC_0000002478334326__p1724573001519">当前对象的路径信息。</p> <p id="ZH-CN_TOPIC_0000002478334326__p4997105717514"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p88891454164019"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen728610574354" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span> <span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">moduleNormalizedFile </span><span class="">= </span><span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-property">nodeDir</span></span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Module Normalized File Path: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">moduleNormalizedFile</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">filePath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 812px;"><h3 id="section733472314257">getPath<i class="anchor-icon anchor-icon-link" anchorid="section733472314257" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p19334223102517">getPath: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334326__p19334162318255">获取当前路径信息。</p> <p id="ZH-CN_TOPIC_0000002478334326__p633415234250"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p5335192372516"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table4335192312511" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row133351233258"><th align="left" class="cellrowborder" id="mcps1.3.144.6.1.3.1.1" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p93351623102515">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.144.6.1.3.1.2" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p5335723152512">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row10335152372520"><td class="cellrowborder" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p14335192382511">string</p> </td> <td class="cellrowborder" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p11335112312253">当前对象的路径信息</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1791417564422"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen14435114518362" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span> <span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">moduleNormalizedFile </span><span class="">= </span><span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-property">nodeDir</span></span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Module Normalized File Path: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">moduleNormalizedFile</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">getPath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">()</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 987px;"><h3 id="section16629195041811">file<i class="anchor-icon anchor-icon-link" anchorid="section16629195041811" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p13629155011180">file: (_path: string) =&gt; NormalizedFile</p> <p id="ZH-CN_TOPIC_0000002478334326__p5921013112112">在原有的目录路径链式拼接路径，获取它的NormalizedFile对象。</p> <p id="ZH-CN_TOPIC_0000002478334326__p3661163152116"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p16467423162019"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table18467172342017" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row046742319207"><th align="left" class="cellrowborder" id="mcps1.3.145.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1467623132018">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.145.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p14467182312203">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.145.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p19467122314207">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.145.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p6468923192014">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row64687237201"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p7468152320204">_path</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p94682232204">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p18468523182015">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p346819232208">需要拼接路径字符串</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p13630750141811"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table66301250131816" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row146301250111810"><th align="left" class="cellrowborder" id="mcps1.3.145.8.1.3.1.1" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p863055010183">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.145.8.1.3.1.2" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p11630145051814">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row163011506183"><td class="cellrowborder" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p063019506181"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section281448112713">NormalizedFile</a></p> </td> <td class="cellrowborder" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p18263164962613">在原有的NormalizedFile对象的路径链式拼接所得到NormalizedFile对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p56336144311"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen815517566382" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span> <span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">moduleNormalizedFile </span><span class="">= </span><span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-property">nodeDir</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">buildProfileNormalizedFile </span><span class="">= </span><span class="">moduleNormalizedFile</span><span class="">.</span><span class=""><span class="hljs-title function_">file</span></span><span class="">(</span><span class=""><span class="hljs-string">'build-profile.json5'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`buildProfile File Path: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">buildProfileNormalizedFile</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">getPath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">()</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1220px;"><h3 id="section1972715529184">asFileList<i class="anchor-icon anchor-icon-link" anchorid="section1972715529184" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p77270524186">asFileList: () =&gt; NormalizedFile[]</p> <p id="ZH-CN_TOPIC_0000002478334326__p17435181192810">获取到NormalizedFile对象下深层递归的目录与文件NormalizedFile[]，包含它本身。</p> <p id="ZH-CN_TOPIC_0000002478334326__p59021217205"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p5728352151819"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table17281052121817" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row5728252181815"><th align="left" class="cellrowborder" id="mcps1.3.146.6.1.3.1.1" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p17281252161819">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.146.6.1.3.1.2" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p5728125216185">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row372818529187"><td class="cellrowborder" valign="top" width="40.27%"><p id="ZH-CN_TOPIC_0000002478334326__p13728135251818"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section281448112713">NormalizedFile</a>[]</p> </td> <td class="cellrowborder" valign="top" width="59.730000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1849012472816">NormalizedFile对象下深层递归的目录与文件NormalizedFile[]，包含它本身</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1559410420519">当前只能通过node节点的 node.nodeDir 或者 node.node.getNodeDir() 获取该node节点的根路径的NormalizedFile对象，再通过NormalizedFile.file(_path: string)方法拼接后续路径来获取到新的NormalizedFile对象，工程级hvigorfile.ts示例：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen85313410120" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-keyword">import</span> </span>{ <span class="">appTasks </span>} <span class=""><span class="hljs-keyword">from</span> </span><span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span>;</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">导入接口</span></span></li><li><span class=""><span class="hljs-keyword">import</span> </span>{ <span class="hljs-title class_">HvigorPlugin</span>, <span class="hljs-title class_">HvigorNode</span>} <span class=""><span class="hljs-keyword">from</span> </span><span class=""><span class="hljs-string">'@ohos/hvigor'</span></span>;</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">实现自定义插件</span></span></li><li><span class=""><span class="hljs-keyword">function</span> </span><span class=""><span class="hljs-title function_">customPlugin</span></span>(<span class="hljs-params"></span>): <span class="hljs-title class_">HvigorPlugin</span> {</li><li>    <span class=""><span class="hljs-keyword">return</span> </span>{</li><li>        <span class=""><span class="hljs-attr">pluginId</span></span>: <span class=""><span class="hljs-string">'customPlugin'</span></span>,</li><li>        <span class=""><span class="hljs-title function_">apply</span></span>(<span class="hljs-params">node: HvigorNode</span>) {</li><li>            <span class=""><span class="hljs-title function_">appTask</span></span>(node);</li><li>        }</li><li>    }</li><li>}</li><li><span class=""><span class="hljs-keyword">function</span> </span><span class=""><span class="hljs-title function_">appTask</span></span>(<span class="hljs-params">currentNode: HvigorNode</span>) {</li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级的</span></span><span class=""><span class="hljs-comment">node</span></span></li><li>    currentNode.<span class=""><span class="hljs-title function_">subNodes</span></span>(<span class="hljs-function">(<span class="hljs-params">node: HvigorNode</span>) =&gt;</span> {</li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">模块级的</span></span><span class=""><span class="hljs-comment">node </span></span></li><li><span class="">        <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">通过</span></span><span class=""><span class="hljs-comment">node.nodeDir </span></span><span class=""><span class="hljs-comment">或者</span></span><span class=""><span class="hljs-comment"> node.node.getNodeDir() </span></span><span class=""><span class="hljs-comment">获取该</span></span><span class=""><span class="hljs-comment">node</span></span><span class=""><span class="hljs-comment">节点的根路径的</span></span><span class=""><span class="hljs-comment">NormalizedFile</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li>        <span class=""><span class="hljs-keyword">const</span> </span><span class="">moduleNormalizedFile </span>= node.<span class=""><span class="hljs-property">nodeDir</span></span>;</li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">通过</span></span><span class=""><span class="hljs-comment">NormalizedFile.file() </span></span><span class=""><span class="hljs-comment">拼接后续路径，生成新的</span></span><span class=""><span class="hljs-comment"> NormalizedFile </span></span><span class=""><span class="hljs-comment">对象</span></span></li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">生成模块下面</span></span><span class=""><span class="hljs-comment"> build-Profile.json5 </span></span><span class=""><span class="hljs-comment">的</span></span><span class=""><span class="hljs-comment"> NormalizedFile </span></span><span class=""><span class="hljs-comment">对象</span></span></li><li>        <span class=""><span class="hljs-keyword">const</span> </span><span class="">buildProfileNormalizedFile </span>= <span class="">moduleNormalizedFile</span>.<span class=""><span class="hljs-title function_">file</span></span>(<span class=""><span class="hljs-string">'build-profile.json5'</span></span>);</li><li>    })</li><li>}</li><li><span class=""><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> </span>{</li><li>    <span class=""><span class="hljs-attr">system</span></span>: <span class="">appTasks</span>,  <span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span>:[</li><li>        <span class=""><span class="hljs-title function_">customPlugin</span></span>()  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">应用自定义</span></span><span class=""><span class="hljs-comment">Plugin</span></span></li><li>    ]         <span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 116px;"><h2 id="section1958710764514">FileUtil<i class="anchor-icon anchor-icon-link" anchorid="section1958710764514" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p1158712744514">文件操作工具类，支持一些基本的文件操作。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 169px;"><h3 id="section1958144513231" class="firsth2">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section1958144513231" tips="复制节点链接"></i></h3><div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen12612115210235" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">FileUtil</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1059px;"><h3 id="section1373813583465">exist<i class="anchor-icon anchor-icon-link" anchorid="section1373813583465" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p7287041478">exist: (filePath: string) =&gt; boolean</p> <p id="ZH-CN_TOPIC_0000002478334326__p128718419478">判断文件路径是否存在。</p> <p id="ZH-CN_TOPIC_0000002478334326__p17287542472"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p42879418477"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table182873494718" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row152877412474"><th align="left" class="cellrowborder" id="mcps1.3.149.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p2287124144711">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.149.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1628711416477">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.149.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p9287048477">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.149.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p828894134711">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row16288446472"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p13288840479">filePath</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p72887494718">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p12881544478">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1963617555316">文件路径字符串</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p32886412479"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table12288144184717" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row528818414717"><th align="left" class="cellrowborder" id="mcps1.3.149.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p82889494713">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.149.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p122880416473">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row162887417475"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p165821417342">boolean</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p941420611713">true: 文件路径存在，false: 文件路径不存在</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p10123755162212"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1157731883519" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">appTasks</span>, <span class=""><span class="hljs-title class_">OhosPluginId</span></span>, <span class=""><span class="hljs-title class_">OhosAppContext</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">hvigor</span>, <span class=""><span class="hljs-title class_">HvigorNode</span></span>, <span class=""><span class="hljs-title class_">FileUtil</span></span>, <span class="">getNode</span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> <span class="">path</span> <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">"path"</span></span>;</li><li><span class=""><span class="hljs-keyword">const</span></span> <span class="">currentNode</span> <span class="">=</span> <span class=""><span class="hljs-title function_">getNode</span></span>(<span class="">__filename</span>);</li><li><span class="">hvigor</span>.<span class=""><span class="hljs-title function_">nodesEvaluated</span></span>(<span class="hljs-function">() </span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> {</li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class="">context</span> <span class="">=</span> <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">getContext</span></span>(<span class=""><span class="hljs-title class_">OhosPluginId</span></span>.<span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span>) <span class=""><span class="hljs-keyword">as</span></span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span>;</li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class="">testFilePath</span> <span class="">=</span> <span class="">path</span>.<span class=""><span class="hljs-title function_">resolve</span></span>(<span class="">context</span>.<span class=""><span class="hljs-title function_">getProjectPath</span></span>(), <span class=""><span class="hljs-string">'test.txt'</span></span>);</li><li>    <span class=""><span class="hljs-keyword">if</span></span> (<span class=""><span class="hljs-title class_">FileUtil</span></span>.<span class=""><span class="hljs-title function_">exist</span></span>(<span class="">testFilePath</span>)) {</li><li>        <span class=""><span class="hljs-variable language_">console</span></span>.<span class=""><span class="hljs-title function_">log</span></span>(<span class=""><span class="hljs-string">`File exists: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">testFilePath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span>);</li><li>    } <span class=""><span class="hljs-keyword">else</span></span> {</li><li>        <span class=""><span class="hljs-variable language_">console</span></span>.<span class=""><span class="hljs-title function_">log</span></span>(<span class=""><span class="hljs-string">`File doesn't exist: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">testFilePath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span>);</li><li>    }</li><li>})</li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">default</span></span> {</li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">:</span> <span class="">appTasks</span>,  <span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span>[]         <span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1179px;"><h3 id="section1874264173712">isDictionary<i class="anchor-icon anchor-icon-link" anchorid="section1874264173712" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p186899306210">isDictionary: (file: string | NormalizedFile) =&gt; boolean</p> <p id="ZH-CN_TOPIC_0000002478334326__p994373717811">判断文件路径或NormalizedFile对象是否是目录。</p> <p id="ZH-CN_TOPIC_0000002478334326__p4689430423"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p126898301225"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table13689430025" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1169015301721"><th align="left" class="cellrowborder" id="mcps1.3.150.6.1.5.1.1" valign="top" width="23.59%"><p id="ZH-CN_TOPIC_0000002478334326__p7690123015210">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.150.6.1.5.1.2" valign="top" width="21.19%"><p id="ZH-CN_TOPIC_0000002478334326__p26901300217">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.150.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1869010305215">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.150.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p669012305210">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1169019306210"><td class="cellrowborder" valign="top" width="23.59%"><p id="ZH-CN_TOPIC_0000002478334326__p1621510558818">file</p> </td> <td class="cellrowborder" valign="top" width="21.19%"><p id="ZH-CN_TOPIC_0000002478334326__p9210613916">string | <a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section281448112713">NormalizedFile</a></p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p166904301829">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p69371598912">文件路径字符串或者是NormalizedFile对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p16904302216"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1369013300219" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row76909301120"><th align="left" class="cellrowborder" id="mcps1.3.150.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p169083018218">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.150.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p3690330928">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row169017301123"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p969117309217">boolean</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p1950815417916">true: 是目录，false: 不是目录</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p107674124321"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1165235214458" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">, </span><span class="">getNode </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">path </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"path"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">const</span> <span class="">currentNode </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">context </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">testFilePath </span><span class="">= </span><span class="">path</span><span class="">.</span><span class=""><span class="hljs-title function_">resolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'test.txt'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">ensureFileSync</span></span><span class="">(</span><span class="">testFilePath</span><span class="">)</span><span class="">;</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">isDictionary</span></span><span class="">(</span><span class="">testFilePath</span><span class="">)) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`It is a directory: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">testFilePath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">} </span><span class="hljs-keyword">else</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`It is not a directory: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">testFilePath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1179px;"><h3 id="section6143521103817">isFile<i class="anchor-icon anchor-icon-link" anchorid="section6143521103817" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1793919121131">isFile: (file: string | NormalizedFile) =&gt; boolean</p> <p id="ZH-CN_TOPIC_0000002478334326__p79561620161114">判断文件路径或NormalizedFile对象是否是文件。</p> <p id="ZH-CN_TOPIC_0000002478334326__p993912121835"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p09391512838"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table49391412735" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row16939112632"><th align="left" class="cellrowborder" id="mcps1.3.151.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p199391012531">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.151.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1393911219315">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.151.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1393911218312">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.151.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p993917121134">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1394012127319"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1291219418110">file</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1394013121136">string | <a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section281448112713">NormalizedFile</a></p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p129409121737">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p694011124314">文件路径字符串或者是NormalizedFile对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1994013121436"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table179404123310" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row14940191220315"><th align="left" class="cellrowborder" id="mcps1.3.151.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p3940212138">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.151.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p1294019125311">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row394016121839"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p2808175761114">boolean</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p12237132181220">true: 是文件，false: 不是文件</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1133691863214"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen467184918493" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">, </span><span class="">getNode </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">path </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"path"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">const</span> <span class="">currentNode </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">context </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">testFilePath </span><span class="">= </span><span class="">path</span><span class="">.</span><span class=""><span class="hljs-title function_">resolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'test.txt'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">ensureFileSync</span></span><span class="">(</span><span class="">testFilePath</span><span class="">)</span><span class="">;</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">isFile</span></span><span class="">(</span><span class="">testFilePath</span><span class="">)) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`It is a file: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">testFilePath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">} </span><span class="hljs-keyword">else</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`It is not a file: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">testFilePath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 788px;"><h3 id="section18615163810381">ensureDirSync<i class="anchor-icon anchor-icon-link" anchorid="section18615163810381" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p9759221101316">ensureDirSync: (dirPath: string) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334326__p174958267148">确保目录存在，不存在就创建。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1070041716313"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p127006171333"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table670010171239" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row37001171036"><th align="left" class="cellrowborder" id="mcps1.3.152.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p15700517334">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.152.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p870115174315">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.152.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p170116179318">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.152.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p157011517639">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row15701191717317"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p5331202418137">dirPath</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p207011817434">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p4701181710310">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p448118558139">目标目录地址</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p43561123123219"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen18440753125112" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">appTasks</span>, <span class=""><span class="hljs-title class_">OhosPluginId</span></span>, <span class=""><span class="hljs-title class_">OhosAppContext</span></span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> { <span class="">hvigor</span>, <span class=""><span class="hljs-title class_">FileUtil</span></span>, <span class="">getNode</span> } <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span>;</li><li><span class=""><span class="hljs-keyword">import</span></span> <span class="">path</span> <span class=""><span class="hljs-keyword">from</span></span> <span class=""><span class="hljs-string">"path"</span></span>;</li><li><span class=""><span class="hljs-keyword">const</span></span> <span class="">currentNode</span> <span class="">=</span> <span class=""><span class="hljs-title function_">getNode</span></span>(<span class="">__filename</span>);</li><li><span class="">hvigor</span>.<span class=""><span class="hljs-title function_">nodesEvaluated</span></span>(<span class="hljs-function">() </span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> {</li><li>    <span class=""><span class="hljs-keyword">const</span></span> <span class="">context</span> <span class="">=</span> <span class="">currentNode</span>.<span class=""><span class="hljs-title function_">getContext</span></span>(<span class=""><span class="hljs-title class_">OhosPluginId</span></span>.<span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span>) <span class=""><span class="hljs-keyword">as</span></span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span>;   </li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span>.<span class=""><span class="hljs-title function_">ensureDirSync</span></span>(<span class="">path</span>.<span class=""><span class="hljs-title function_">dirname</span></span>(<span class="">context</span>.<span class=""><span class="hljs-title function_">getBuildRootPath</span></span>()));</li><li>})</li><li><span class=""><span class="hljs-keyword">export</span></span> <span class=""><span class="hljs-keyword">default</span></span> {</li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">:</span> <span class="">appTasks</span>,  <span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span>[]         <span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 884px;"><h3 id="section11989145213388">ensureFileSync<i class="anchor-icon anchor-icon-link" anchorid="section11989145213388" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p7766337171413">ensureFileSync: (filePath: string) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334326__p197661337151419">确保文件存在，不存在就创建。</p> <p id="ZH-CN_TOPIC_0000002478334326__p676663716141"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p1876643711420"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table4766143711143" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row17767193712149"><th align="left" class="cellrowborder" id="mcps1.3.153.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p12767163719145">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.153.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p13767153761416">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.153.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p127675370141">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.153.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p10767113718148">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row2767137181412"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1476713701413">filePath</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1976713711415">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p876717374149">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1676715379145">目标文件地址</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1028518275326"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen119325117464" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">, </span><span class="">getNode </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">path </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"path"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">const</span> <span class="">currentNode </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">context </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">testFilePath </span><span class="">= </span><span class="">path</span><span class="">.</span><span class=""><span class="hljs-title function_">resolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'test.txt'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">ensureFileSync</span></span><span class="">(</span><span class="">testFilePath</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1107px;"><h3 id="section1387174393">readJson5<i class="anchor-icon anchor-icon-link" anchorid="section1387174393" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p1271619476165">readJson5: (file: string | NormalizedFile) =&gt; JSON</p> <p id="ZH-CN_TOPIC_0000002478334326__p2079121101613">同步读取Json5文件。</p> <p id="ZH-CN_TOPIC_0000002478334326__p07971181619"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p57914112165"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table17798111163" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row479015160"><th align="left" class="cellrowborder" id="mcps1.3.154.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p179913161">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.154.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p128031111611">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.154.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1805113165">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.154.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1580151141613">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row38081171617"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p79669136173">file</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p12806115169">string | <a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section281448112713">NormalizedFile</a></p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p198012117168">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p2801710165">json5文件路径或者NormalizedFile对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p128015181615"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table138071141619" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row48041201618"><th align="left" class="cellrowborder" id="mcps1.3.154.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1080812162">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.154.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p13802111611">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row14801119167"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p18061151620">JSON</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p175520971815">读取出的JSON格式数据</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p0394103119321"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen17173161115017" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">, </span><span class="">getNode </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">path </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"path"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">const</span> <span class="">currentNode </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">context </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">json5FilePath </span><span class="">= </span><span class="">path</span><span class="">.</span><span class=""><span class="hljs-title function_">resolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'testJson.json5'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">ensureFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">writeFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">, </span><span class=""><span class="hljs-title class_">JSON</span></span><span class="">.</span><span class=""><span class="hljs-title function_">stringify</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getAppJsonOpt</span></span><span class="">()))</span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">jsonContent </span><span class="">= </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">readJson5</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Read JSON5 content: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">JSON</span></span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">stringify</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">(</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">jsonContent</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">, </span></span></span><span class="hljs-string"><span class="hljs-subst"><span class="hljs-literal">null</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">, </span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">)</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1155px;"><h3 id="section15934620133913">readFileSync<i class="anchor-icon anchor-icon-link" anchorid="section15934620133913" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p11680645112413">readFileSync: (file: string | NormalizedFile) =&gt; Buffer</p> <p id="ZH-CN_TOPIC_0000002478334326__p33268216162">同步读取文件。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1232615211614"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p183261725161"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table0326182121614" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1832710291617"><th align="left" class="cellrowborder" id="mcps1.3.155.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p132752131618">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.155.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p13275219167">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.155.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p143271922161">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.155.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p032702101610">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row19327102171611"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p53276211167">file</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1532712251610">string | <a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section281448112713">NormalizedFile</a></p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p332722181617">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p732720219166">文件路径字符串或者是NormalizedFile对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1032711220160"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table133289221619" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row63282218162"><th align="left" class="cellrowborder" id="mcps1.3.155.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p19328122151618">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.155.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p63281321166">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row232812181619"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p11328142151610">Buffer</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p17406155416249">读取的Buffer数据</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p2140143816327"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen376245612188" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">, </span><span class="">getNode </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">path </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"path"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">const</span> <span class="">currentNode </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">context </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">json5FilePath </span><span class="">= </span><span class="">path</span><span class="">.</span><span class=""><span class="hljs-title function_">resolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'testJson.json5'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">ensureFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">writeFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">, </span><span class=""><span class="hljs-title class_">JSON</span></span><span class="">.</span><span class=""><span class="hljs-title function_">stringify</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getAppJsonOpt</span></span><span class="">()))</span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">content </span><span class="">= </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">readFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Content of </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">json5FilePath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">content</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1155px;"><h3 id="section6750173218396">readFile<i class="anchor-icon anchor-icon-link" anchorid="section6750173218396" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p84431614154113">readFile: (file: string | NormalizedFile) =&gt; Promise&lt;Buffer&gt;</p> <p id="ZH-CN_TOPIC_0000002478334326__p18975162094119">异步读取文件。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1633433161616"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p13346311614"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table153343331617" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row633418371613"><th align="left" class="cellrowborder" id="mcps1.3.156.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p133341438161">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.156.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p933483111610">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.156.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p173351436164">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.156.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p733514312165">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row63351231166"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p123353311161">file</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p6335183191617">string | <a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section281448112713">NormalizedFile</a></p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1533563131619">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p4335203201612">文件路径字符串或者是NormalizedFile对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p433514311161"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table433533181614" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row11335193111610"><th align="left" class="cellrowborder" id="mcps1.3.156.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p5335103141619">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.156.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p163351530160">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1833543161617"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p19911164564118">Promise</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p17384174910410">Promise&lt;Buffer&gt;</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p7267343163216"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen896752612428" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">, </span><span class="">getNode </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">path </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"path"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">const</span> <span class="">currentNode </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(</span><span class="hljs-keyword">async</span> <span class="">() </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">context </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">json5FilePath </span><span class="">= </span><span class="">path</span><span class="">.</span><span class=""><span class="hljs-title function_">resolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'testJson.json5'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">ensureFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">writeFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">, </span><span class=""><span class="hljs-title class_">JSON</span></span><span class="">.</span><span class=""><span class="hljs-title function_">stringify</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getAppJsonOpt</span></span><span class="">()))</span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">content </span><span class="">= </span><span class="hljs-keyword">await</span> <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">readFile</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">content</span><span class="">.</span><span class=""><span class="hljs-title function_">toString</span></span><span class="">())</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1025px;"><h3 id="section9324134412398">writeFileSync<i class="anchor-icon anchor-icon-link" anchorid="section9324134412398" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p7794192614618">writeFileSync: (file: string | NormalizedFile, content: any) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334326__p818120416168">同步写入文件。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1918112421614"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p18181945165"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table18181204101610" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row11812471614"><th align="left" class="cellrowborder" id="mcps1.3.157.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p618113411618">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.157.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p41821541163">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.157.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p718210418162">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.157.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1618218461612">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row31824401615"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p0182174181617">file</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1818254131620">string | <a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section281448112713">NormalizedFile</a></p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p31822491612">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p718219413166">文件路径字符串或者是NormalizedFile对象</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row137522920401"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1775310924011">content</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p2075310917406">any</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p37536910407">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p47536920405">需要写入文件的内容</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p9518957163212"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen9965153142011" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">, </span><span class="">getNode </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">path </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"path"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">const</span> <span class="">currentNode </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">context </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">json5FilePath </span><span class="">= </span><span class="">path</span><span class="">.</span><span class=""><span class="hljs-title function_">resolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'testJson.json5'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">ensureFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">writeFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">, </span><span class=""><span class="hljs-title class_">JSON</span></span><span class="">.</span><span class=""><span class="hljs-title function_">stringify</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getAppJsonOpt</span></span><span class="">()))</span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">jsonContent </span><span class="">= </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">readJson5</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Read JSON5 content: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">JSON</span></span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">stringify</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">(</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">jsonContent</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">, </span></span></span><span class="hljs-string"><span class="hljs-subst"><span class="hljs-literal">null</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">, </span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">)</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1128px;"><h3 id="section3910155613395">writeFile<i class="anchor-icon anchor-icon-link" anchorid="section3910155613395" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p127013944710">writeFile: (file: string | NormalizedFile, content: any) =&gt; Promise&lt;void&gt;</p> <p id="ZH-CN_TOPIC_0000002478334326__p497794181617">异步写入文件。</p> <p id="ZH-CN_TOPIC_0000002478334326__p1597718412164"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p99771451610"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table9977947164" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1397734191618"><th align="left" class="cellrowborder" id="mcps1.3.158.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p89771647167">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.158.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1697714421618">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.158.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p797717414166">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.158.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1197711481612">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row29788411161"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1897884111613">file</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p189788412161">string | <a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section281448112713">NormalizedFile</a></p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p49785441617">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p189780471610">文件路径字符串或者是NormalizedFile对象</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row6226939124020"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1422693916408">content</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p142264394405">any</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p4226339154018">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p192269396407">需要写入文件的内容</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p16978144121619"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table39781041165" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1697811481614"><th align="left" class="cellrowborder" id="mcps1.3.158.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p39785413162">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.158.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p19789451611">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1997810415161"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p382634214718">Promise</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p18889204911479">Promise&lt;void&gt;</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1197616418335"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen12667178132619" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">, </span><span class="">getNode </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">path </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"path"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">const</span> <span class="">currentNode </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">context </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">json5FilePath </span><span class="">= </span><span class="">path</span><span class="">.</span><span class=""><span class="hljs-title function_">resolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'testJson.json5'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">ensureFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">writeFile</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">, </span><span class=""><span class="hljs-title class_">JSON</span></span><span class="">.</span><span class=""><span class="hljs-title function_">stringify</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getAppJsonOpt</span></span><span class="">()))</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1025px;"><h3 id="section1186751011402">copyFileSync<i class="anchor-icon anchor-icon-link" anchorid="section1186751011402" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p119191251104815">copyFileSync: (file: string | NormalizedFile, dest: string) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334326__p1570915131618">同步复制文件。</p> <p id="ZH-CN_TOPIC_0000002478334326__p12709165161618"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p370915519168"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table157091458168" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row117095511611"><th align="left" class="cellrowborder" id="mcps1.3.159.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1171011519169">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.159.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1071035181611">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.159.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p12710453164">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.159.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1271016520167">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row47109541614"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p15710115101616">file</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p37109561619">string | <a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section281448112713">NormalizedFile</a></p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p87107519165">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p27101513162">文件路径字符串或者是NormalizedFile对象</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row71548511186"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p17154951686">dest</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1115410512810">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p14154651589">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p10154651486">目标文件路径</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p3310129113319"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen106521722191714" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">, </span><span class="">getNode </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">path </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"path"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">const</span> <span class="">currentNode </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">context </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">json5FilePath </span><span class="">= </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">pathResolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'testJson.json5'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">ensureFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">writeFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">, </span><span class=""><span class="hljs-title class_">JSON</span></span><span class="">.</span><span class=""><span class="hljs-title function_">stringify</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getAppJsonOpt</span></span><span class="">()))</span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">copyFilePath </span><span class="">= </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">pathResolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'testJson_copy.json5'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">copyFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">, </span><span class="">copyFilePath</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1176px;"><h3 id="section12372521154015">copyFile<i class="anchor-icon anchor-icon-link" anchorid="section12372521154015" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p194671185512">copyFile: (file: string | NormalizedFile, dest: string) =&gt; Promise&lt;void&gt;</p> <p id="ZH-CN_TOPIC_0000002478334326__p175831831104819">异步复制文件。</p> <p id="ZH-CN_TOPIC_0000002478334326__p958303116487"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p145831331154812"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table6583183115486" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row135839315486"><th align="left" class="cellrowborder" id="mcps1.3.160.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p1258353114485">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.160.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p185831431144810">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.160.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1958303115489">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.160.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p205833314480">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row758412312485"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p0584931164811">file</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p65844313487">string | <a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section281448112713">NormalizedFile</a></p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p17584163116483">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p13584131124817">文件路径字符串或者是NormalizedFile对象</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row2066272012913"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p13714141916914">dest</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p1071413191197">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p27141919998">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p127143197915">目标文件路径</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p18176154384917"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table17176043194911" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row12176643184919"><th align="left" class="cellrowborder" id="mcps1.3.160.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p4176843164915">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.160.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p0176443134919">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1917664314499"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p1617664311492">Promise</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p41766432492">Promise&lt;void&gt;</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p46278142339"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen14908112510175" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">, </span><span class="">getNode </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">path </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"path"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">const</span> <span class="">currentNode </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">context </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">json5FilePath </span><span class="">= </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">pathResolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'testJson.json5'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">ensureFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">writeFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">, </span><span class=""><span class="hljs-title class_">JSON</span></span><span class="">.</span><span class=""><span class="hljs-title function_">stringify</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getAppJsonOpt</span></span><span class="">()))</span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">copyFilePath </span><span class="">= </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">pathResolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'testJson_copy.json5'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">copyFile</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">, </span><span class="">copyFilePath</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1059px;"><h3 id="section1184313384016">pathResolve<i class="anchor-icon anchor-icon-link" anchorid="section1184313384016" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334326__p169381115528">pathResolve: (...paths: string[]) =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334326__p370453217489">拼接路径。</p> <p id="ZH-CN_TOPIC_0000002478334326__p2704153218487"><strong>起始版本：</strong>Hvigor 4.3.0</p> <p id="ZH-CN_TOPIC_0000002478334326__p7704432124819"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table19704163254817" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row3704332154811"><th align="left" class="cellrowborder" id="mcps1.3.161.6.1.5.1.1" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p37041532124817">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.161.6.1.5.1.2" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p19704132194814">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.161.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p270473254816">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.161.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p5704123215489">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row27051132174814"><td class="cellrowborder" valign="top" width="23.62%"><p id="ZH-CN_TOPIC_0000002478334326__p670553214487">...paths</p> </td> <td class="cellrowborder" valign="top" width="21.16%"><p id="ZH-CN_TOPIC_0000002478334326__p2705183217488">string[]</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334326__p1270563211482">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334326__p1770573215486">文件路径信息数组</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p97056327486"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1570518321482" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row57051321488"><th align="left" class="cellrowborder" id="mcps1.3.161.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p270515322488">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.161.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p570593224818">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row137055327481"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p970523218483">string</p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p2705113212483">拼接后得到的路径信息</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p2093042017335"><strong>示例：</strong></p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen8870184642316" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">, </span><span class="">getNode </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">path </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"path"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">const</span> <span class="">currentNode </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">context </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">json5FilePath </span><span class="">= </span><span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">pathResolve</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectPath</span></span><span class="">()</span><span class="">, </span><span class=""><span class="hljs-string">'testJson.json5'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">ensureFileSync</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-title class_">FileUtil</span></span><span class="">.</span><span class=""><span class="hljs-title function_">writeFile</span></span><span class="">(</span><span class="">json5FilePath</span><span class="">, </span><span class=""><span class="hljs-title class_">JSON</span></span><span class="">.</span><span class=""><span class="hljs-title function_">stringify</span></span><span class="">(</span><span class="">context</span><span class="">.</span><span class=""><span class="hljs-title function_">getAppJsonOpt</span></span><span class="">()))</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1506px;"><h2 id="section94763341419">submitWorker<i class="anchor-icon anchor-icon-link" anchorid="section94763341419" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p1432192584413">submitWorker(node: HvigorNode, taskName: string, workPath: string, workerOption: WorkerOption): TCB</p> <p id="ZH-CN_TOPIC_0000002478334326__p24196465515">向线程池提交一个worker并执行，worker必须归属于某个任务，表示这个任务并没有结束，但此时主线程可以执行其他任务，依赖该任务的其他任务仍然会排队等待。</p> <p id="ZH-CN_TOPIC_0000002478334326__p12639858155111"><strong>起始版本：</strong>Hvigor 6.0.4</p> <p id="ZH-CN_TOPIC_0000002478334326__p15170014185218"><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table818191491517" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row101851412152"><th align="left" class="cellrowborder" id="mcps1.3.162.6.1.5.1.1" valign="top" width="17.95%"><p id="ZH-CN_TOPIC_0000002478334326__p81961418151">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.162.6.1.5.1.2" valign="top" width="19.189999999999998%"><p id="ZH-CN_TOPIC_0000002478334326__p1519191413157">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.162.6.1.5.1.3" valign="top" width="12.690000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p16197144158">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.162.6.1.5.1.4" valign="top" width="50.17%"><p id="ZH-CN_TOPIC_0000002478334326__p81911461513">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row15190147153"><td class="cellrowborder" valign="top" width="17.95%"><p id="ZH-CN_TOPIC_0000002478334326__p176011233155">node</p> </td> <td class="cellrowborder" valign="top" width="19.189999999999998%"><p id="ZH-CN_TOPIC_0000002478334326__p36001423181510"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section14832104719474">HvigorNode</a></p> </td> <td class="cellrowborder" valign="top" width="12.690000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p146001923141513">是</p> </td> <td class="cellrowborder" valign="top" width="50.17%"><p id="ZH-CN_TOPIC_0000002478334326__p28910482812">worker归属的任务对应的节点。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row920111451512"><td class="cellrowborder" valign="top" width="17.95%"><p id="ZH-CN_TOPIC_0000002478334326__p11598172381518">taskName</p> </td> <td class="cellrowborder" valign="top" width="19.189999999999998%"><p id="ZH-CN_TOPIC_0000002478334326__p25986234158">string</p> </td> <td class="cellrowborder" valign="top" width="12.690000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p5597023151514">是</p> </td> <td class="cellrowborder" valign="top" width="50.17%"><p id="ZH-CN_TOPIC_0000002478334326__p35976237154">向线程池提交worker的任务名称。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row12301934141520"><td class="cellrowborder" valign="top" width="17.95%"><p id="ZH-CN_TOPIC_0000002478334326__p7301834181513">workPath</p> </td> <td class="cellrowborder" valign="top" width="19.189999999999998%"><p id="ZH-CN_TOPIC_0000002478334326__p83010342158">string</p> </td> <td class="cellrowborder" valign="top" width="12.690000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p33023413154">是</p> </td> <td class="cellrowborder" valign="top" width="50.17%"><p id="ZH-CN_TOPIC_0000002478334326__p1530634131516">要执行的worker的文件路径，可以拼接函数名称，例如D:/xx/a.js/run是指运行a.js的run方法。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row153073431512"><td class="cellrowborder" valign="top" width="17.95%"><p id="ZH-CN_TOPIC_0000002478334326__p12311234171511">workerOption</p> </td> <td class="cellrowborder" valign="top" width="19.189999999999998%"><p id="ZH-CN_TOPIC_0000002478334326__p10316345151"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section2701859185318">WorkerOption</a></p> </td> <td class="cellrowborder" valign="top" width="12.690000000000001%"><p id="ZH-CN_TOPIC_0000002478334326__p1631534121513">是</p> </td> <td class="cellrowborder" valign="top" width="50.17%"><p id="ZH-CN_TOPIC_0000002478334326__p12316342155">worker配置。</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1089204705212"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table325922841817" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row1259192831812"><th align="left" class="cellrowborder" id="mcps1.3.162.8.1.3.1.1" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p18259728161819">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.162.8.1.3.1.2" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p4260122821812">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row1526022871819"><td class="cellrowborder" valign="top" width="40.410000000000004%"><p id="ZH-CN_TOPIC_0000002478334326__p6427173214181"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section282818554815">TCB</a></p> </td> <td class="cellrowborder" valign="top" width="59.589999999999996%"><p id="ZH-CN_TOPIC_0000002478334326__p642653251819">提交的worker的状态。</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p894236135318"><strong>示例：</strong>在hap模块的自定义任务中，向线程池提交一个worker。</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen8589649145316" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hapTasks } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HvigorNode</span>, <span class="hljs-title class_">HvigorPlugin</span>, submitWorker } <span class="hljs-keyword">from</span> <span class="hljs-string">"@ohos/hvigor"</span>;</li><li><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">"path"</span>;</li><li>
</li><li><span class="hljs-comment">// 实现自定义插件</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">customPlugin</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">HvigorPlugin</span> {</li><li>  <span class="hljs-keyword">return</span> {</li><li>    <span class="hljs-attr">pluginId</span>: <span class="hljs-string">'customPlugin'</span>,</li><li>    <span class="hljs-title function_">apply</span>(<span class="hljs-params">node: HvigorNode</span>) {</li><li>      <span class="hljs-comment">// 插件主体</span></li><li>      node.<span class="hljs-title function_">registerTask</span>({</li><li>        <span class="hljs-attr">name</span>: <span class="hljs-string">'customTask'</span>,</li><li>        <span class="hljs-title function_">run</span>(<span class="hljs-params"></span>) {</li><li>          <span class="hljs-title function_">submitWorker</span>(node, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>, path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'wait-job.js'</span>, <span class="hljs-string">'wait'</span>), {<span class="hljs-attr">callback</span>: <span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'submit Worker callback'</span>);</li><li>          }});</li><li>        },</li><li>        <span class="hljs-attr">dependencies</span>: [<span class="hljs-string">'default@PreBuild'</span>],</li><li>        <span class="hljs-attr">postDependencies</span>: [<span class="hljs-string">'assembleHap'</span>],</li><li>      });</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>  <span class="hljs-attr">system</span>: hapTasks <span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span>,</li><li>  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">customPlugin</span>()] <span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span>,  </li><li>};</li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002478334326__p1630474461918">wait-job.js内容如下，和hvigorfile.ts在同一个目录下：</p> <div _ngcontent-ojx-c106="" class="highlight-div"><div _ngcontent-ojx-c106="" class="highlight-div-header"><div _ngcontent-ojx-c106="" class="highlight-div-header-left"><div _ngcontent-ojx-c106="" class="handle-button expand-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ojx-c106="" class="highlight-div-header-right"><div _ngcontent-ojx-c106="" class="handle-button ai-button"></div><div _ngcontent-ojx-c106="" class="handle-button line-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ojx-c106="" class="handle-button theme-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ojx-c106="" class="handle-button copy-button"><div _ngcontent-ojx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ojx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334326__screen1214505911911" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-params">ms</span>) {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, ms));</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">wait</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'开始等待10秒...'</span>);</li><li>    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-number">10000</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'结束，退出程序。'</span>);</li><li>}</li><li>
</li><li><span class="hljs-built_in">exports</span>.<span class="hljs-property">wait</span> = wait;</li></ol></pre></div></div> <div class="tiledSection" style="contain-intrinsic-size: auto 516px;"><h2 id="section2701859185318">WorkerOption<i class="anchor-icon anchor-icon-link" anchorid="section2701859185318" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p9270182345413">设置向线程池提交worker的配置，具体提交方式请参考<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section94763341419">submitWorker</a>。</p> <p id="ZH-CN_TOPIC_0000002478334326__p9793355185615"><strong>起始版本：</strong>Hvigor 6.0.4</p>  <div class="tablenoborder"><div class="tbBox"><table id="table2016597238" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row116557436"><th align="left" class="cellrowborder" id="mcps1.3.165.4.1.4.1.1" valign="top" width="23.662366236623665%"><p id="ZH-CN_TOPIC_0000002478334326__p14165571234">成员</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.165.4.1.4.1.2" valign="top" width="31.06310631063106%"><p id="ZH-CN_TOPIC_0000002478334326__p416587336">声明</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.165.4.1.4.1.3" valign="top" width="45.274527452745275%"><p id="ZH-CN_TOPIC_0000002478334326__p20165107432">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row111651371735"><td class="cellrowborder" valign="top" width="23.662366236623665%"><p id="ZH-CN_TOPIC_0000002478334326__p71651171134">workInput</p> </td> <td class="cellrowborder" valign="top" width="31.06310631063106%"><p id="ZH-CN_TOPIC_0000002478334326__p15165871432">workInput?: unknown;</p> </td> <td class="cellrowborder" valign="top" width="45.274527452745275%"><p id="ZH-CN_TOPIC_0000002478334326__p181651971339">设置要执行的线程的输入值。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row131651671034"><td class="cellrowborder" valign="top" width="23.662366236623665%"><p id="ZH-CN_TOPIC_0000002478334326__p81658710316">priority</p> </td> <td class="cellrowborder" valign="top" width="31.06310631063106%"><p id="ZH-CN_TOPIC_0000002478334326__p116513718314">priority?: <a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section162915519616">Priority</a>;</p> </td> <td class="cellrowborder" valign="top" width="45.274527452745275%"><p id="ZH-CN_TOPIC_0000002478334326__p21668710319">设置线程执行的优先级。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row141661871638"><td class="cellrowborder" valign="top" width="23.662366236623665%"><p id="ZH-CN_TOPIC_0000002478334326__p916620717312">targetWorkers</p> </td> <td class="cellrowborder" valign="top" width="31.06310631063106%"><p id="ZH-CN_TOPIC_0000002478334326__p13166676314">targetWorkers?: number[];</p> </td> <td class="cellrowborder" valign="top" width="45.274527452745275%"><p id="ZH-CN_TOPIC_0000002478334326__p626515154014">指定要在几号线程中执行。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row151662716316"><td class="cellrowborder" valign="top" width="23.662366236623665%"><p id="ZH-CN_TOPIC_0000002478334326__p2016614710312">callback</p> </td> <td class="cellrowborder" valign="top" width="31.06310631063106%"><p id="ZH-CN_TOPIC_0000002478334326__p141669715320">callback?: Function;</p> </td> <td class="cellrowborder" valign="top" width="45.274527452745275%"><p id="ZH-CN_TOPIC_0000002478334326__p31662079317">执行完毕的回调函数。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row16166207537"><td class="cellrowborder" valign="top" width="23.662366236623665%"><p id="ZH-CN_TOPIC_0000002478334326__p71661877318">callbackInput</p> </td> <td class="cellrowborder" valign="top" width="31.06310631063106%"><p id="ZH-CN_TOPIC_0000002478334326__p1416618714319">callbackInput?: unknown[];</p> </td> <td class="cellrowborder" valign="top" width="45.274527452745275%"><p id="ZH-CN_TOPIC_0000002478334326__p6166278314">回调函数的入参。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row131661971737"><td class="cellrowborder" valign="top" width="23.662366236623665%"><p id="ZH-CN_TOPIC_0000002478334326__p31662718320">useReturnVal</p> </td> <td class="cellrowborder" valign="top" width="31.06310631063106%"><p id="ZH-CN_TOPIC_0000002478334326__p2166671335">useReturnVal?: boolean;</p> </td> <td class="cellrowborder" valign="top" width="45.274527452745275%"><p id="ZH-CN_TOPIC_0000002478334326__p1616616711320">回调函数入参是否使用线程执行结束的返回值，优先级高于callbackInput。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 447px;"><h2 id="section162915519616">Priority<i class="anchor-icon anchor-icon-link" anchorid="section162915519616" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p17871118273">线程执行的优先级枚举。</p> <p id="ZH-CN_TOPIC_0000002478334326__p163971126777"><strong>起始版本：</strong>Hvigor 6.0.4</p>  <div class="tablenoborder"><div class="tbBox"><table id="table19203164722210" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row112047477229"><th align="left" class="cellrowborder" id="mcps1.3.166.4.1.3.1.1" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334326__p420464711220">成员</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.166.4.1.3.1.2" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334326__p7204114792213">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row920434792211"><td class="cellrowborder" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334326__p1320411474222">FIRST</p> </td> <td class="cellrowborder" rowspan="5" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334326__p61682333268">从上到下，优先级依次降低。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row420444742214"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334326__p202041147202210">HEAVY</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row52041147162213"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334326__p02041547122217">MEDIUM</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row1620484710229"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334326__p7204104742216">LIGHT</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row192043473225"><td class="cellrowborder" valign="top"><p id="ZH-CN_TOPIC_0000002478334326__p520474716221">LAST</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 831px;"><h2 id="section282818554815">TCB<i class="anchor-icon anchor-icon-link" anchorid="section282818554815" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334326__p73091634913">向线程池提交worker后返回的状态，具体提交方式请参考<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section94763341419">submitWorker</a>。</p> <p id="ZH-CN_TOPIC_0000002478334326__p171320185915"><strong>起始版本：</strong>Hvigor 6.0.4</p>  <div class="tablenoborder"><div class="tbBox"><table id="table11912122411108" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334326__row199122024201018"><th align="left" class="cellrowborder" id="mcps1.3.167.4.1.4.1.1" valign="top" width="23.042304230423042%"><p id="ZH-CN_TOPIC_0000002478334326__p6912122491010">成员</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.167.4.1.4.1.2" valign="top" width="35.963596359635964%"><p id="ZH-CN_TOPIC_0000002478334326__p3912142441012">声明</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.167.4.1.4.1.3" valign="top" width="40.99409940994099%"><p id="ZH-CN_TOPIC_0000002478334326__p391214246104">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334326__row491219246107"><td class="cellrowborder" valign="top" width="23.042304230423042%"><p id="ZH-CN_TOPIC_0000002478334326__p15912624121016">getId</p> </td> <td class="cellrowborder" valign="top" width="35.963596359635964%"><p id="ZH-CN_TOPIC_0000002478334326__p1091214241101">getId(): string;</p> </td> <td class="cellrowborder" valign="top" width="40.99409940994099%"><p id="ZH-CN_TOPIC_0000002478334326__p691292418106">获取TCB自身的id。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row2091372471018"><td class="cellrowborder" valign="top" width="23.042304230423042%"><p id="ZH-CN_TOPIC_0000002478334326__p119131524101011">getWorkerId</p> </td> <td class="cellrowborder" valign="top" width="35.963596359635964%"><p id="ZH-CN_TOPIC_0000002478334326__p1991392471014">getWorkerId(): number | undefined;</p> </td> <td class="cellrowborder" valign="top" width="40.99409940994099%"><p id="ZH-CN_TOPIC_0000002478334326__p109136241107">获取worker的id。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row1191319245107"><td class="cellrowborder" valign="top" width="23.042304230423042%"><p id="ZH-CN_TOPIC_0000002478334326__p1891352411019">getSubmitTime</p> </td> <td class="cellrowborder" valign="top" width="35.963596359635964%"><p id="ZH-CN_TOPIC_0000002478334326__p19913324161011">getSubmitTime(): number;</p> </td> <td class="cellrowborder" valign="top" width="40.99409940994099%"><p id="ZH-CN_TOPIC_0000002478334326__p1791352420104">获取提交时间。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row39131224151013"><td class="cellrowborder" valign="top" width="23.042304230423042%"><p id="ZH-CN_TOPIC_0000002478334326__p18913122419109">getStartTime</p> </td> <td class="cellrowborder" valign="top" width="35.963596359635964%"><p id="ZH-CN_TOPIC_0000002478334326__p1691332413108">getStartTime(): number | undefined;</p> </td> <td class="cellrowborder" valign="top" width="40.99409940994099%"><p id="ZH-CN_TOPIC_0000002478334326__p19913524111016">获取执行开始时间。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row17913162441020"><td class="cellrowborder" valign="top" width="23.042304230423042%"><p id="ZH-CN_TOPIC_0000002478334326__p0913192421016">getEndTime</p> </td> <td class="cellrowborder" valign="top" width="35.963596359635964%"><p id="ZH-CN_TOPIC_0000002478334326__p129131124111018">getEndTime(): number | undefined;</p> </td> <td class="cellrowborder" valign="top" width="40.99409940994099%"><p id="ZH-CN_TOPIC_0000002478334326__p29131243109">获取执行结束时间。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row189131524151018"><td class="cellrowborder" valign="top" width="23.042304230423042%"><p id="ZH-CN_TOPIC_0000002478334326__p7913202416104">getState</p> </td> <td class="cellrowborder" valign="top" width="35.963596359635964%"><p id="ZH-CN_TOPIC_0000002478334326__p19913102431017">getState(): TaskState;</p> </td> <td class="cellrowborder" valign="top" width="40.99409940994099%"><p id="ZH-CN_TOPIC_0000002478334326__p991362411107">获取worker状态。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row15913102411104"><td class="cellrowborder" valign="top" width="23.042304230423042%"><p id="ZH-CN_TOPIC_0000002478334326__p4913162431015">getPriority</p> </td> <td class="cellrowborder" valign="top" width="35.963596359635964%"><p id="ZH-CN_TOPIC_0000002478334326__p18913132417101">getPriority(): <a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section162915519616">Priority</a>;</p> </td> <td class="cellrowborder" valign="top" width="40.99409940994099%"><p id="ZH-CN_TOPIC_0000002478334326__p591310249105">获取优先级。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row410243818105"><td class="cellrowborder" valign="top" width="23.042304230423042%"><p id="ZH-CN_TOPIC_0000002478334326__p210314380101">getCallback</p> </td> <td class="cellrowborder" valign="top" width="35.963596359635964%"><p id="ZH-CN_TOPIC_0000002478334326__p610353831019">getCallback(): Function;</p> </td> <td class="cellrowborder" valign="top" width="40.99409940994099%"><p id="ZH-CN_TOPIC_0000002478334326__p5103173891013">获取回调函数。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row4103143871013"><td class="cellrowborder" valign="top" width="23.042304230423042%"><p id="ZH-CN_TOPIC_0000002478334326__p10103193814108">getCallbackInput</p> </td> <td class="cellrowborder" valign="top" width="35.963596359635964%"><p id="ZH-CN_TOPIC_0000002478334326__p19103838171011">getCallbackInput(): unknown[];</p> </td> <td class="cellrowborder" valign="top" width="40.99409940994099%"><p id="ZH-CN_TOPIC_0000002478334326__p121031038121012">获取回调函数的输入。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row1310310386103"><td class="cellrowborder" valign="top" width="23.042304230423042%"><p id="ZH-CN_TOPIC_0000002478334326__p10103138161014">getTaskPath</p> </td> <td class="cellrowborder" valign="top" width="35.963596359635964%"><p id="ZH-CN_TOPIC_0000002478334326__p7103113814107">getTaskPath(): string;</p> </td> <td class="cellrowborder" valign="top" width="40.99409940994099%"><p id="ZH-CN_TOPIC_0000002478334326__p181034389102">获取任务路径。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row121031638101015"><td class="cellrowborder" valign="top" width="23.042304230423042%"><p id="ZH-CN_TOPIC_0000002478334326__p3103638171014">getTaskName</p> </td> <td class="cellrowborder" valign="top" width="35.963596359635964%"><p id="ZH-CN_TOPIC_0000002478334326__p1110353813105">getTaskName(): string;</p> </td> <td class="cellrowborder" valign="top" width="40.99409940994099%"><p id="ZH-CN_TOPIC_0000002478334326__p3103113813105">获取任务名。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row181036388107"><td class="cellrowborder" valign="top" width="23.042304230423042%"><p id="ZH-CN_TOPIC_0000002478334326__p151031738101018">getTaskCompletePath</p> </td> <td class="cellrowborder" valign="top" width="35.963596359635964%"><p id="ZH-CN_TOPIC_0000002478334326__p1910317387104">getTaskCompletePath(): string;</p> </td> <td class="cellrowborder" valign="top" width="40.99409940994099%"><p id="ZH-CN_TOPIC_0000002478334326__p141032038131016">获取任务完整路径，包含任务路径和任务名。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334326__row310363851012"><td class="cellrowborder" valign="top" width="23.042304230423042%"><p id="ZH-CN_TOPIC_0000002478334326__p161041138181014">useReturnVal</p> </td> <td class="cellrowborder" valign="top" width="35.963596359635964%"><p id="ZH-CN_TOPIC_0000002478334326__p181045389105">useReturnVal(): boolean;</p> </td> <td class="cellrowborder" valign="top" width="40.99409940994099%"><p id="ZH-CN_TOPIC_0000002478334326__p19104438161011">回调函数是否使用线程执行结束的返回值作为输入。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>