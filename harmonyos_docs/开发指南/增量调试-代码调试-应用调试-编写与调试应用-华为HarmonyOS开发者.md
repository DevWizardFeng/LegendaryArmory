<h1 _ngcontent-iml-c119="" class="doc-title ng-star-inserted" title="增量调试"> 增量调试 </h1>

<div _ngcontent-iml-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div id="body0000001731879290">    <p id="ZH-CN_TOPIC_0000002510174471__p1371185810261">对于大型应用来说，每次修改代码后需要重新构建、推包、安装，整个流程耗时较长。针对该场景，在DevEco Studio和命令行场景中分别提供增量运行调试功能，支持开发者在真机上调试应用时，修改代码后，会识别出代码差异，构建增量包，增量运行调试时只推送增量包，减少大型应用调试推包时间。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p id="ZH-CN_TOPIC_0000002510174471__p144031851747">C++代码增量调试支持API Version 11及以上版本Stage模型的工程；ArkTS代码增量调试仅支持API Version 12及以上版本Stage模型工程的资源文件修改。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="section13991747113617">使用DevEco Studio增量调试<i class="anchor-icon anchor-icon-link" anchorid="section13991747113617" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section118397221413" class="firsth2">调试C++代码<i class="anchor-icon anchor-icon-link" anchorid="section118397221413" tips="复制节点链接"></i></h3>          <ol id="ZH-CN_TOPIC_0000002510174471__ol55775571268">      <li id="li175771057365"><span>在工具栏中，选择调试的设备，并单击<strong>Run</strong><span><img originheight="18" originwidth="20" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104842.01679381584513827788157562735600:50001231000000:2800:72D4B60BCB85A812B7E24070F66C214FA0FC826F55C12A094C99F1CE5534CF73.png" class="IconPic notEnlarge" width="20" height="18"></span>或<strong>Debug</strong> <span><img originheight="18" originwidth="16" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104842.08748393295222162806364474490993:50001231000000:2800:3B1BF14433FE90B48ED0C306AEAC4B97AE50244DF4742F88016C5A711C0FAB4C.png" class="IconPic notEnlarge" width="16" height="18"></span>启动工程。</span></li>      <li id="li057813571565"><span>在修改完代码后，点击<strong>Apply Changes</strong><span><img originheight="18" originwidth="19" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104842.75121689841831219371897935851567:50001231000000:2800:3DBDF42EAD261FBBEB671B59366C2C1F4D841CEDA9C1042DAB18E4BC6A2BBFF4.png" class="IconPic notEnlarge" width="19" height="18"></span>推送增量包安装至设备。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002510174471__p1357815710613">点击Apply Changes按钮后，DevEco Studio启动构建的增量构建任务，构建出增量包hqf。增量包构建完成后，将推送安装至设备。</p>       <p id="ZH-CN_TOPIC_0000002510174471__p357815571369"><span><img originheight="139" originwidth="250" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104842.89129270745440171526626455051811:50001231000000:2800:F5612A0D7D4F7ACAED04C3685E1B973FFF90E6470E15867EBCB3AF69DA86FE86.png" class="notEnlarge" width="250" height="139"></span></p>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p id="ZH-CN_TOPIC_0000002510174471__p457814571767">当前增量运行Apply Changes功能，不支持新建和删除代码文件，不支持在代码中修改装饰器相关，不支持在代码文件中使用import新增引用文件。</p>        </div></div></div>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="section31463514413">调试rawfile/resfile资源<i class="anchor-icon anchor-icon-link" anchorid="section31463514413" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002510174471__p36707691614">从DevEco Studio 5.1.0 Release版本开始支持增量调试rawfile资源。</p>     <ol id="ZH-CN_TOPIC_0000002510174471__ol1490125920417">      <li id="li1790111592413"><span>在工具栏中，选择调试的设备，并单击<strong>Run</strong><span><img originheight="18" originwidth="20" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104843.42895488703297580052213807685894:50001231000000:2800:F4F9D1B0655659ED6C3F987EA3D07B97A933A7A60EAAF918E3EFE6E01284014E.png" class="IconPic notEnlarge" width="20" height="18"></span>或<strong>Debug</strong> <span><img originheight="18" originwidth="16" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104843.32786679282063120674972618620462:50001231000000:2800:C03FD0CF1C740CABCFD3F7023ACDA56444C8BD39A6169C2BC38D434488D9C5AB.png" class="IconPic notEnlarge" width="16" height="18"></span>启动工程。</span></li>      <li id="li568020449518"><span>在工程的资源resources文件目录下的resfile或rawfile目录下，新增或者修改资源文件。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002510174471__p125152918713"><span><img originheight="185" originwidth="243" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104843.08932954570648457471247028828084:50001231000000:2800:AF4A961DA19453BBB24BD70D04C9EADF0BB431B3D27749B7BB3BC3B6E05A2ECF.png" class="notEnlarge" width="243" height="185"></span></p>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p id="ZH-CN_TOPIC_0000002510174471__p441462317343">当前对rawfile/resfile资源的增量调试，仅支持代码中直接调用的资源文件。</p>        </div></div></div>       <p></p></li>      <li id="li78889461379"><span>点击<strong>Apply Changes</strong><span><img originheight="18" originwidth="19" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104843.88356367083862859808813659196446:50001231000000:2800:51CF75B196877845E5E4E0F8DC15404B0B05CB0FE977AA898356B61B45FA47CF.png" class="IconPic notEnlarge" width="19" height="18"></span>推送增量包安装至设备。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002510174471__p1124017512718">点击Apply Changes按钮后，DevEco Studio启动构建的增量构建任务，构建出增量包hqf。增量包构建完成后，将推送安装至设备。</p>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section16101226133711">使用命令行增量调试<i class="anchor-icon anchor-icon-link" anchorid="section16101226133711" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section20227880203" class="firsth2">通过hvigorw构建hqf包<i class="anchor-icon anchor-icon-link" anchorid="section20227880203" tips="复制节点链接"></i></h3>          <ol id="ZH-CN_TOPIC_0000002510174471__ol8226168122012">      <li id="li6884981109"><span>检查待运行模块和依赖模块下是否存在build/config/buildConfig.json文件，如果不存在，先通过DevEco Studio全量运行工程，生成该文件。</span>       <p></p>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p id="ZH-CN_TOPIC_0000002510174471__p56231012142811">如果已执行步骤1，则步骤2和3无需再执行。</p>        </div></div></div>       <p></p></li>      <li id="li1222511842010"><span>根据运行所需的模块，及模块的product、target，编写命令行执行HAP/HSP编译任务，如entry模块依赖HSP模块library：</span>       <p></p>       <div _ngcontent-iml-c106="" class="highlight-div"><div _ngcontent-iml-c106="" class="highlight-div-header"><div _ngcontent-iml-c106="" class="highlight-div-header-left"><div _ngcontent-iml-c106="" class="handle-button expand-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iml-c106="" class="highlight-div-header-right"><div _ngcontent-iml-c106="" class="handle-button ai-button"></div><div _ngcontent-iml-c106="" class="handle-button line-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iml-c106="" class="handle-button theme-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iml-c106="" class="handle-button copy-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iml-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" id="ZH-CN_TOPIC_0000002510174471__screen822516882014" data-highlighted="yes"><ol class="linenums"><li>hvigorw --mode <span class="hljs-keyword">module</span> -p <span class="hljs-keyword">module</span>=entry@<span class="hljs-keyword">default</span>,library@<span class="hljs-keyword">default</span> -p product=<span class="hljs-keyword">default</span> assembleHap assembleHsp --info --no-daemon</li></ol></pre></div></div>       <p id="ZH-CN_TOPIC_0000002510174471__p92331401942">关于命令行的使用指导请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-commandline">hvigorw</a>。</p>       <p></p></li>      <li id="li222618112015"><span>执行hdc命令安装HAP、HSP，关于hdc工具的使用指导请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hdc" target="_blank">hdc</a>。</span>       <p></p>       <div _ngcontent-iml-c106="" class="highlight-div"><div _ngcontent-iml-c106="" class="highlight-div-header"><div _ngcontent-iml-c106="" class="highlight-div-header-left"><div _ngcontent-iml-c106="" class="handle-button expand-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iml-c106="" class="highlight-div-header-right"><div _ngcontent-iml-c106="" class="handle-button ai-button"></div><div _ngcontent-iml-c106="" class="handle-button line-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iml-c106="" class="handle-button theme-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iml-c106="" class="handle-button copy-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iml-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-shell" id="ZH-CN_TOPIC_0000002510174471__screen112267832012" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc shell <span class="hljs-built_in">mkdir</span> data/local/tmp/99c24fdc44694c05be12491d0a48e139</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc file send library-default-signed.hsp <span class="hljs-string">"data/local/tmp/99c24fdc44694c05be12491d0a48e139"</span></span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc file send entry-default-signed.hap <span class="hljs-string">"data/local/tmp/99c24fdc44694c05be12491d0a48e139"</span></span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc shell bm install -p <span class="hljs-string">"data/local/tmp/99c24fdc44694c05be12491d0a48e139"</span></span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc shell <span class="hljs-built_in">rm</span> -rf data/local/tmp/99c24fdc44694c05be12491d0a48e139</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc shell aa start -a {abilityName} -b {bundleName}</span></li></ol></pre></div></div>       <ul id="ZH-CN_TOPIC_0000002510174471__ul72581735172417">        <li id="li15822031133319">abilityName：应用的ability名称。</li>        <li id="li725817354248">bundleName：应用包名。</li>       </ul>       <p></p></li>      <li id="li15792133210619"><span>如果修改了HAP/HSP模块的rawfile或resfile目录下的资源文件，则需要在对应模块的build/default/intermediates/patch/default目录下新建changedFileList.json并写入修改的文件；如果修改了HAR模块的资源文件，则需要在依赖该HAR的模块下写入修改的文件，示例如下。</span>       <p></p>       <div _ngcontent-iml-c106="" class="highlight-div"><div _ngcontent-iml-c106="" class="highlight-div-header"><div _ngcontent-iml-c106="" class="highlight-div-header-left"><div _ngcontent-iml-c106="" class="handle-button expand-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iml-c106="" class="highlight-div-header-right"><div _ngcontent-iml-c106="" class="handle-button ai-button"></div><div _ngcontent-iml-c106="" class="handle-button line-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iml-c106="" class="handle-button theme-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iml-c106="" class="handle-button copy-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iml-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-swift" id="ZH-CN_TOPIC_0000002510174471__screen8421739141612" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class=""><span class="hljs-string">"resources"</span></span>: {</li><li>    <span class=""><span class="hljs-string">"resFile"</span></span>: [</li><li>      {</li><li>        <span class=""><span class="hljs-string">"filePath"</span></span>: <span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">D:<span class="hljs-subst">\\</span>MyApplication<span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">entry</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">src</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">main</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">resources</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">resfile</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">test.txt"</span></span>,</li><li>        <span class=""><span class="hljs-string">"resourcePath"</span></span>: <span class=""><span class="hljs-string">"D:<span class="hljs-subst">\\</span>MyApplication</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">entry</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">src</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">main</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">resources"</span></span></li><li>      }</li><li>    ],</li><li>    <span class=""><span class="hljs-string">"rawFile"</span></span>: [</li><li>      {</li><li>        <span class=""><span class="hljs-string">"filePath"</span></span>: <span class=""><span class="hljs-string">"D:<span class="hljs-subst">\\</span>MyApplication</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">entry</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">src</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">main</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">resources</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">rawfile</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">test.txt"</span></span>,</li><li>        <span class=""><span class="hljs-string">"resourcePath"</span></span>: <span class=""><span class="hljs-string">"D:<span class="hljs-subst">\\</span>MyApplication</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">entry</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">src</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">main</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">resources"</span></span></li><li>      }</li><li>    ]</li><li>  }</li><li>}</li></ol></pre></div></div>       <p></p></li>      <li id="li12269817208"><span>修改C++代码后，执行hqf打包命令，执行完成后可在entry和library模块的输出目录build/default/outputs/default中，找到对应的产物entry-default-signed.hqf和library-default-signed.hqf。</span>       <p></p>       <div _ngcontent-iml-c106="" class="highlight-div"><div _ngcontent-iml-c106="" class="highlight-div-header"><div _ngcontent-iml-c106="" class="highlight-div-header-left"><div _ngcontent-iml-c106="" class="handle-button expand-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iml-c106="" class="highlight-div-header-right"><div _ngcontent-iml-c106="" class="handle-button ai-button"></div><div _ngcontent-iml-c106="" class="handle-button line-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iml-c106="" class="handle-button theme-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iml-c106="" class="handle-button copy-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iml-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" id="ZH-CN_TOPIC_0000002510174471__screen122261783207" data-highlighted="yes"><ol class="linenums"><li>hvigorw --mode <span class="hljs-keyword">module</span> -p <span class="hljs-keyword">module</span>=entry@<span class="hljs-keyword">default</span>,library@<span class="hljs-keyword">default</span> -p product=<span class="hljs-keyword">default</span> assembleDevHqf --info --no-daemon</li></ol></pre></div></div>       <p></p></li>      <li id="li142264814204"><span>执行hdc命令安装hqf。</span>       <p></p>       <div _ngcontent-iml-c106="" class="highlight-div"><div _ngcontent-iml-c106="" class="highlight-div-header"><div _ngcontent-iml-c106="" class="highlight-div-header-left"><div _ngcontent-iml-c106="" class="handle-button expand-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iml-c106="" class="highlight-div-header-right"><div _ngcontent-iml-c106="" class="handle-button ai-button"></div><div _ngcontent-iml-c106="" class="handle-button line-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iml-c106="" class="handle-button theme-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iml-c106="" class="handle-button copy-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iml-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-shell" id="ZH-CN_TOPIC_0000002510174471__screen10226208172017" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc shell <span class="hljs-built_in">mkdir</span> data/local/tmp/3b7d97cdf4de41c4aecc465ff5069708</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc file send library-default-signed.hqf <span class="hljs-string">"data/local/tmp/3b7d97cdf4de41c4aecc465ff5069708"</span></span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc file send entry-default-signed.hqf <span class="hljs-string">"data/local/tmp/3b7d97cdf4de41c4aecc465ff5069708"</span></span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc shell bm quickfix -a -f <span class="hljs-string">"data/local/tmp/3b7d97cdf4de41c4aecc465ff5069708"</span> -d -o</span></li></ol></pre></div></div>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="section28031446182019">通过SDK工具构建hqf包<i class="anchor-icon anchor-icon-link" anchorid="section28031446182019" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002510174471__p15141202243019"><span><img height="273.060704" originheight="600" originwidth="1840" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104843.71198689813022825674710816503476:50001231000000:2800:3FE3593AA21ACB0C0007A33A4306445A7D36FCED60E0175D59BC3F6571F8A70D.png" title="点击放大" width="813.96"></span></p>     <ol id="ZH-CN_TOPIC_0000002510174471__ol1380384662019">      <li id="li1080294612207"><span>全量编译应用并安装到设备。</span>       <p></p>       <div _ngcontent-iml-c106="" class="highlight-div"><div _ngcontent-iml-c106="" class="highlight-div-header"><div _ngcontent-iml-c106="" class="highlight-div-header-left"><div _ngcontent-iml-c106="" class="handle-button expand-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iml-c106="" class="highlight-div-header-right"><div _ngcontent-iml-c106="" class="handle-button ai-button"></div><div _ngcontent-iml-c106="" class="handle-button line-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iml-c106="" class="handle-button theme-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iml-c106="" class="handle-button copy-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iml-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" id="ZH-CN_TOPIC_0000002510174471__screen7802164622010" data-highlighted="yes"><ol class="linenums"><li>hdc bm install {hap_path} <span class="hljs-comment">// 安装包在电脑上，使用该命令，hap_path是安装包路径</span></li><li>hdc shell bm install -p {hap_path}  <span class="hljs-comment">// 安装包在设备上，使用该命令</span></li></ol></pre></div></div>       <p></p></li>      <li id="li13802194642015"><span>开发者通过独立的构建流程，识别出希望构建增量hqf包的so，根据ABI编译环境（可查看build-profile.json5的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-cpp#section0721057575">abiFilters</a>字段），汇总到某一目录下，例如汇总在change_test目录下，编译环境是arm64-v8a，示例如下。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002510174471__p128498331576"><span><img originheight="225" originwidth="350" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104843.43516505172156018694146006829379:50001231000000:2800:86923FE9C5A329BC0D9CC21FA45DDA07D4C5837BC0C83922C912C7CFD89BB17D.png" width="350" height="225"></span></p>       <p></p></li>      <li id="li1094643216183"><span>（可选）进行资源文件修改。如果修改了HAP/HSP模块的rawfile或resfile目录下的资源文件，则需要在对应模块的build/default/intermediates/patch/default目录下新建changedFileList.json并写入修改的文件；如果修改了HAR模块的资源文件，则需要在依赖该HAR的模块下写入修改的文件，示例如下。</span>       <p></p>       <div _ngcontent-iml-c106="" class="highlight-div"><div _ngcontent-iml-c106="" class="highlight-div-header"><div _ngcontent-iml-c106="" class="highlight-div-header-left"><div _ngcontent-iml-c106="" class="handle-button expand-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iml-c106="" class="highlight-div-header-right"><div _ngcontent-iml-c106="" class="handle-button ai-button"></div><div _ngcontent-iml-c106="" class="handle-button line-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iml-c106="" class="handle-button theme-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iml-c106="" class="handle-button copy-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iml-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-swift" id="ZH-CN_TOPIC_0000002510174471__screen1794793281816" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class=""><span class="hljs-string">"resources"</span></span>: {</li><li>    <span class=""><span class="hljs-string">"resFile"</span></span>: [</li><li>      {</li><li>        <span class=""><span class="hljs-string">"filePath"</span></span>: <span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">D:<span class="hljs-subst">\\</span>MyApplication<span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">entry</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">src</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">main</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">resources</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">resfile</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">test.txt"</span></span>,</li><li>        <span class=""><span class="hljs-string">"resourcePath"</span></span>: <span class=""><span class="hljs-string">"D:<span class="hljs-subst">\\</span>MyApplication</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">entry</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">src</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">main</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">resources"</span></span></li><li>      }</li><li>    ],</li><li>    <span class=""><span class="hljs-string">"rawFile"</span></span>: [</li><li>      {</li><li>        <span class=""><span class="hljs-string">"filePath"</span></span>: <span class=""><span class="hljs-string">"D:<span class="hljs-subst">\\</span>MyApplication</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">entry</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">src</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">main</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">resources</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">rawfile</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">test.txt"</span></span>,</li><li>        <span class=""><span class="hljs-string">"resourcePath"</span></span>: <span class=""><span class="hljs-string">"D:<span class="hljs-subst">\\</span>MyApplication</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">entry</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">src</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">main</span></span><span class=""><span class="hljs-string"><span class="hljs-subst">\\</span></span></span><span class=""><span class="hljs-string">resources"</span></span></li><li>      }</li><li>    ]</li><li>  }</li><li>}</li></ol></pre></div></div>       <p></p></li>      <li id="li146271115151813"><span>提前准备与已安装应用一致的签名文件。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002510174471__p2062710150183">可以从工程的build-profile.json5文件中获取到对应的签名文件。</p>       <p></p></li>      <li id="li13802124619204"><span>准备patch.json文件，示例如下。</span>       <p></p>       <div _ngcontent-iml-c106="" class="highlight-div"><div _ngcontent-iml-c106="" class="highlight-div-header"><div _ngcontent-iml-c106="" class="highlight-div-header-left"><div _ngcontent-iml-c106="" class="handle-button expand-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iml-c106="" class="highlight-div-header-right"><div _ngcontent-iml-c106="" class="handle-button ai-button"></div><div _ngcontent-iml-c106="" class="handle-button line-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iml-c106="" class="handle-button theme-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iml-c106="" class="handle-button copy-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iml-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510174471__screen128028468203" data-highlighted="yes"><ol class="linenums"><li>{</li><li>    <span class="hljs-string">"app"</span> : {</li><li>        <span class="hljs-string">"bundleName"</span> : <span class="hljs-string">"com.ohos.quickfix"</span>,</li><li>        <span class="hljs-string">"versionCode"</span> : <span class="hljs-number">1000000</span>, <span class="hljs-comment">// 应用版本号</span></li><li>        <span class="hljs-string">"versionName"</span> : <span class="hljs-string">"1.0.0"</span>,</li><li>        <span class="hljs-string">"patchVersionCode"</span> : <span class="hljs-number">1000000</span>, <span class="hljs-comment">// 补丁版本号，在每次进行增量调试前，将版本号+1，确保此次增量调试补丁包版本号大于上次增量调试补丁包版本号</span></li><li>        <span class="hljs-string">"patchVersionName"</span> : <span class="hljs-string">"1000000"</span>  <span class="hljs-comment">// 与补丁版本号保持一致</span></li><li>    },</li><li>    <span class="hljs-string">"module"</span> : {</li><li>        <span class="hljs-string">"name"</span> : <span class="hljs-string">"entry"</span>,</li><li>        <span class="hljs-string">"type"</span> : <span class="hljs-string">"patch"</span>,</li><li>        <span class="hljs-string">"deviceTypes"</span> : [</li><li>            <span class="hljs-string">"phone"</span>,</li><li>            <span class="hljs-string">"tablet"</span></li><li>        ],</li><li>        <span class="hljs-string">"originalModuleHash"</span> : <span class="hljs-string">""</span> <span class="hljs-comment">// 待修复HAP包的sha256值，置空即可</span></li><li>    }</li><li>}</li></ol></pre></div></div>       <p></p></li>      <li id="li680224612207"><span>在hqf<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/packing-tool#hqf打包指令" target="_blank">打包工具</a>目录下（默认在DevEco Studio安装目录\sdk\default\openharmony\toolchains\lib下），执行命令打包，示例如下。</span>       <p></p>       <div _ngcontent-iml-c106="" class="highlight-div"><div _ngcontent-iml-c106="" class="highlight-div-header"><div _ngcontent-iml-c106="" class="highlight-div-header-left"><div _ngcontent-iml-c106="" class="handle-button expand-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iml-c106="" class="highlight-div-header-right"><div _ngcontent-iml-c106="" class="handle-button ai-button"></div><div _ngcontent-iml-c106="" class="handle-button line-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iml-c106="" class="handle-button theme-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iml-c106="" class="handle-button copy-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iml-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510174471__screen13802546112019" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">java</span> -<span class="hljs-variable">jar</span> <span class="hljs-variable">app_packing_tool</span>.<span class="hljs-variable">jar</span> --<span class="hljs-variable">mode</span> <span class="hljs-variable">hqf</span> --<span class="hljs-variable">json</span>-<span class="hljs-variable">path</span> <span class="hljs-variable">D</span>:\<span class=""><span class="hljs-title class_">MyApplication</span></span><span class="">\</span><span class=""><span class="hljs-title class_">entry</span></span>\<span class="hljs-title class_">patch</span>.<span class="hljs-title class_">json</span> --<span class="hljs-title class_">lib</span>-<span class="hljs-title class_">path</span> <span class="hljs-title class_">D</span>:\<span class=""><span class="hljs-title class_">MyApplication</span></span><span class="">\</span><span class=""><span class="hljs-title class_">entry</span></span>\<span class="hljs-title class_">change_test</span> --<span class="hljs-title class_">resources</span>-<span class="hljs-title class_">path</span> <span class="hljs-title class_">D</span>:\<span class=""><span class="hljs-title class_">MyApplication</span></span><span class="">\</span><span class=""><span class="hljs-title class_">entry</span></span><span class="">\</span><span class=""><span class="hljs-title class_">src</span></span><span class="">\</span><span class=""><span class="hljs-keyword">main</span></span>\<span class="hljs-title class_">resources</span> --<span class="hljs-title class_">out</span>-<span class="hljs-title class_">path</span> <span class="hljs-title class_">entry</span>-<span class="hljs-title class_">default</span>-<span class="hljs-title class_">unsigned</span>.<span class="hljs-title class_">hqf</span> --<span class="hljs-title class_">force</span> <span class="hljs-keyword">true</span></li></ol></pre></div></div>       <p id="ZH-CN_TOPIC_0000002510174471__p1249412468354">关于该命令中需要修改的参数说明如下，其余参数不需要修改：</p>       <ul id="ZH-CN_TOPIC_0000002510174471__ul13602191943615">        <li id="li1960231993616"><strong>json-path</strong>：指定增量包信息patch.json路径，必选，参考<a href="/consumer/cn/doc/harmonyos-guides/ide-incremental-debugging#li13802124619204">步骤5</a>。</li>       </ul>       <ul id="ZH-CN_TOPIC_0000002510174471__ul204421114143615">        <li id="li13166191743615"><strong>lib-path</strong>：指定希望构建打包的so路径，参考<a href="/consumer/cn/doc/harmonyos-guides/ide-incremental-debugging#li13802194642015">步骤2</a>，注意路径不能带上ABI编译环境。</li>        <li id="li9442214133618"><strong>resources-path</strong>：指定希望构建打包的resources资源目录，包含rawfile和resfile目录。</li>       </ul>       <ul id="ZH-CN_TOPIC_0000002510174471__ul76571011143616">        <li id="li265717118363"><strong>out-path</strong>：指定输出hqf包路径。</li>       </ul>       <p></p></li>      <li id="li10802124622012"><span>在签名工具目录下（默认在DevEco Studio安装目录\sdk\default\openharmony\toolchains\lib下），进行签名，示例如下。</span>       <p></p>       <div _ngcontent-iml-c106="" class="highlight-div"><div _ngcontent-iml-c106="" class="highlight-div-header"><div _ngcontent-iml-c106="" class="highlight-div-header-left"><div _ngcontent-iml-c106="" class="handle-button expand-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iml-c106="" class="highlight-div-header-right"><div _ngcontent-iml-c106="" class="handle-button ai-button"></div><div _ngcontent-iml-c106="" class="handle-button line-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iml-c106="" class="handle-button theme-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iml-c106="" class="handle-button copy-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iml-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002510174471__screen680284642013" data-highlighted="yes"><ol class="linenums"><li>java -jar hap-sign-tool.jar sign-app -keyAlias <span class="hljs-string">"OpenHarmony Application Release"</span> -signAlg <span class="hljs-string">"SHA256withECDSA"</span> -mode <span class="hljs-string">"localSign"</span> -appCertFile <span class="hljs-string">"OpenHarmonyApplication.cer"</span> -profileFile <span class="hljs-string">"ohos_provision_release.p7b"</span> -inFile <span class="hljs-string">"entry-default-unsigned.hqf"</span> -keystoreFile <span class="hljs-string">"OpenHarmony.p12"</span> -outFile <span class="hljs-string">"entry-default-signed.hqf"</span> -keyPwd <span class="hljs-string">"123456Abc"</span> -keystorePwd <span class="hljs-string">"123456Abc"</span></li></ol></pre></div></div>       <p id="ZH-CN_TOPIC_0000002510174471__p566810439214">关于该命令中需要修改的参数说明如下，其余参数不需要修改：</p>       <ul id="ZH-CN_TOPIC_0000002510174471__ul118827241718">        <li id="zh-cn_topic_0000001672412437_li17667336297"><strong>keyAlias</strong>：密钥别名。</li>        <li id="zh-cn_topic_0000001672412437_li4185115118295"><strong>appCertFile</strong>：申请的调试证书文件，格式为.cer。</li>        <li id="zh-cn_topic_0000001672412437_li182756255312"><strong>profileFile</strong>：申请的调试Profile文件，格式为.p7b。</li>        <li id="zh-cn_topic_0000001672412437_li2254556122915"><strong>inFile</strong>：通过打包工具生成的未携带签名信息的hqf。</li>        <li id="zh-cn_topic_0000001672412437_li78731119307"><strong>keystoreFile</strong>：密钥库文件，格式为.p12。</li>        <li id="zh-cn_topic_0000001672412437_li0415181283011"><strong>outFile</strong>：经过签名后生成的携带签名信息的hqf。</li>        <li id="zh-cn_topic_0000001672412437_li168739401315"><strong>keyPwd</strong>：密钥密码。</li>        <li id="zh-cn_topic_0000001672412437_li15612946143119"><strong>keystorePwd</strong>：密钥库密码。</li>       </ul>       <p></p></li>      <li id="li880334612206"><span>安装增量hqf包。</span>       <p></p>       <div _ngcontent-iml-c106="" class="highlight-div"><div _ngcontent-iml-c106="" class="highlight-div-header"><div _ngcontent-iml-c106="" class="highlight-div-header-left"><div _ngcontent-iml-c106="" class="handle-button expand-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iml-c106="" class="highlight-div-header-right"><div _ngcontent-iml-c106="" class="handle-button ai-button"></div><div _ngcontent-iml-c106="" class="handle-button line-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iml-c106="" class="handle-button theme-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iml-c106="" class="handle-button copy-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iml-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-shell" id="ZH-CN_TOPIC_0000002510174471__screen114351012515" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc shell <span class="hljs-built_in">mkdir</span> data/local/tmp/3b7d97cdf4de41c4aecc465ff5069708</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc file send entry-default-signed.hqf <span class="hljs-string">"data/local/tmp/3b7d97cdf4de41c4aecc465ff5069708"</span></span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc shell bm quickfix -a -f <span class="hljs-string">"data/local/tmp/3b7d97cdf4de41c4aecc465ff5069708"</span> -d -o</span></li></ol></pre></div></div>       <p></p></li>     </ol>     <p id="ZH-CN_TOPIC_0000002510174471__p8803174618201"></p>    </div>    <div class="tiledSection">     <h2 id="section17305144619471">常见问题<i class="anchor-icon anchor-icon-link" anchorid="section17305144619471" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section1483651154712" class="firsth2">在其他的开发工具中修改打包so库文件，无法使用DevEco Studio的增量调试功能<i class="anchor-icon anchor-icon-link" anchorid="section1483651154712" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002510174471__p621681912381"><strong>问题现象</strong></p>     <p id="ZH-CN_TOPIC_0000002510174471__p106917615508">如果开发者在其他的开发工具中修改打包so库文件，在使用DevEco Studio 4.1 Canary2版本的增量调试功能时，出现无法使用增量调试功能的现象。</p>     <p id="ZH-CN_TOPIC_0000002510174471__p127301625184714"><strong>解决措施</strong></p>     <p id="ZH-CN_TOPIC_0000002510174471__p3130714164813">导致这个问题的原因是在DevEco Studio 4.1 Canary2版本上，对于超过16KB的Native文件，在命中其中的断点后，LLDB调试器会默认持有文件句柄，导致调试过程中无法修改保存该文件。</p>     <p id="ZH-CN_TOPIC_0000002510174471__p18765184265513">开发者可通过以下两种方式处理：</p>     <ul id="ZH-CN_TOPIC_0000002510174471__ul14863205111595">      <li id="li198631151195915">方式一：使用以下LLDB命令关闭LLDB调试器源码缓存机制。执行如下命令后，LLDB调试器将不再持有文件句柄。       <div _ngcontent-iml-c106="" class="highlight-div"><div _ngcontent-iml-c106="" class="highlight-div-header"><div _ngcontent-iml-c106="" class="highlight-div-header-left"><div _ngcontent-iml-c106="" class="handle-button expand-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-iml-c106="" class="highlight-div-header-right"><div _ngcontent-iml-c106="" class="handle-button ai-button"></div><div _ngcontent-iml-c106="" class="handle-button line-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-iml-c106="" class="handle-button theme-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-iml-c106="" class="handle-button copy-button"><div _ngcontent-iml-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-iml-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002510174471__screen13701435155918" data-highlighted="yes"><ol class="linenums"><li>settings <span class="hljs-built_in">set</span> use-source-cache <span class="hljs-literal">false</span> </li></ol></pre></div></div></li>      <li id="li8863165165917">方式二：建议开发者升级至DevEco Studio <span id="ZH-CN_TOPIC_0000002510174471__text17881442113">5.1.0 Beta1</span>版本。</li>     </ul>    </div>   </div>   <div></div></div>