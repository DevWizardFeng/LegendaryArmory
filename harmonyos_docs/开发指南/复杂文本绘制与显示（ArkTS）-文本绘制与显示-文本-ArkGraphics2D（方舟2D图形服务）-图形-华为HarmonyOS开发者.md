<h1 _ngcontent-mhe-c119="" class="doc-title ng-star-inserted" title="复杂文本绘制与显示（ArkTS）"> 复杂文本绘制与显示（ArkTS） </h1>

<div _ngcontent-mhe-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>在进行文本绘制时，可以通过选择合适的字体、大小和颜色完成简单文本的绘制与显示；此外，还支持通过设置其他丰富的样式、语言、段落等进行复杂文本的绘制。</p>    <p>复杂文本绘制主要包含以下几个场景：</p>    <ul>     <li>      <p>多语言文本绘制与显示</p></li>     <li>      <p>多行文本绘制与显示</p></li>     <li>      <p>多样式文本绘制与显示</p></li>    </ul>    <div class="tiledSection">     <h2 id="多语言文本绘制与显示">多语言文本绘制与显示<i class="anchor-icon anchor-icon-link" anchorid="多语言文本绘制与显示" tips="复制节点链接"></i></h2>          <p>多语言支持是全球化应用的基础。多语言文本绘制需要支持不同语言的字符集及其独特的显示需求，例如右到左语言（如阿拉伯语）或竖排文本（如中文）。开发者需要理解不同语言的渲染特性，确保文本的正确显示。</p>     <p>在多语言文本使用的场景下，主要通过指定<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-graphics-text#textstyle" target="_blank">TextStyle</a>文本样式中的<strong>locale</strong>字段来实现，可直接通过locale字段的值优先匹配对应字体，跳过遍历列表匹配字体的过程，从而降低匹配时间和内存使用。</p>    </div>    <div class="tiledSection">     <h3 id="开发步骤" class="firsth2">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h3>          <ol>      <li>       <p>通过context获取到Canvas画布对象。</p>       <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> canvas = context.<span class="hljs-property">canvas</span>;</li></ol></pre></div></div></li>      <li>       <p>初始化文本样式。</p>       <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>  <span class="hljs-attr">color</span>: {</li><li>    <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>    <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>    <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>  },</li><li>  <span class="hljs-attr">fontSize</span>: <span class="hljs-number">50</span>,</li><li>  <span class="hljs-comment">// 设置语言偏好为简体中文</span></li><li>  <span class="hljs-attr">locale</span>: <span class="hljs-string">"zh-Hans"</span></li><li>};</li></ol></pre></div></div></li>      <li>       <p>初始化段落样式。</p>       <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>  <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>};</li></ol></pre></div></div></li>      <li>       <p>初始化段落对象，并添加文本。</p>       <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> fontCollection = text.<span class="hljs-property">FontCollection</span>.<span class="hljs-title function_">getGlobalInstance</span>();</li><li><span class="hljs-keyword">let</span> paragraphBuilder = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, fontCollection);</li><li><span class="hljs-comment">// 更新文本样式</span></li><li>paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li><span class="hljs-comment">// 添加文本</span></li><li>paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"你好，世界"</span>);</li></ol></pre></div></div></li>      <li>       <p>排版段落并进行文本绘制。</p>       <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 生成段落</span></li><li><span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li><li><span class="hljs-comment">// 布局</span></li><li>paragraph.<span class="hljs-title function_">layoutSync</span>(<span class="hljs-number">1250</span>);</li><li><span class="hljs-comment">// 绘制文本</span></li><li>paragraph.<span class="hljs-title function_">paint</span>(canvas, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>);</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="完整示例">完整示例<i class="anchor-icon anchor-icon-link" anchorid="完整示例" tips="复制节点链接"></i></h3>          <p>此示例中，要绘制的文本为简体中文，将语言偏好设置为简体中文，在匹配文字字体时，会优先匹配简体，从而提高绘制的效率。</p>     <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">RenderNode</span>, <span class="hljs-title class_">DrawContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { text } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span></li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode类，并绘制文本。</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">RenderNode</span> {</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">context: DrawContext</span>) {</li><li>    <span class="hljs-comment">// 绘制代码逻辑写在这里</span></li><li>    <span class="hljs-keyword">let</span> canvas = context.<span class="hljs-property">canvas</span>;</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>      <span class="hljs-attr">color</span>: {</li><li>        <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>      },</li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">50</span>,</li><li>      <span class="hljs-comment">// 设置语言偏好为简体中文</span></li><li>      <span class="hljs-attr">locale</span>: <span class="hljs-string">"zh-Hans"</span></li><li>    };</li><li>    </li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>      <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>    };</li><li>    <span class="hljs-keyword">let</span> fontCollection = text.<span class="hljs-property">FontCollection</span>.<span class="hljs-title function_">getGlobalInstance</span>();</li><li>    <span class="hljs-keyword">let</span> paragraphBuilder = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, fontCollection);</li><li>    <span class="hljs-comment">// 更新文本样式</span></li><li>    paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li>    <span class="hljs-comment">// 添加文本</span></li><li>    paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"你好，世界"</span>);</li><li>    <span class="hljs-comment">// 生成段落</span></li><li>    <span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li><li>    <span class="hljs-comment">// 布局</span></li><li>    paragraph.<span class="hljs-title function_">layoutSync</span>(<span class="hljs-number">1250</span>);</li><li>    <span class="hljs-comment">// 绘制文本</span></li><li>    paragraph.<span class="hljs-title function_">paint</span>(canvas, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode对象</span></li><li><span class="hljs-keyword">const</span> textNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRenderNode</span>()</li><li><span class="hljs-comment">// 定义newNode的像素格式</span></li><li>textNode.<span class="hljs-property">frame</span> = {</li><li>  <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">400</span>,</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">600</span></li><li>}</li><li>textNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0.2</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0.8</span> }</li><li>textNode.<span class="hljs-property">scale</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> }</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameNode</span>(uiContext)</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-property">frame</span> = {</li><li>        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">10</span>,</li><li>        <span class="hljs-attr">height</span>: <span class="hljs-number">500</span></li><li>      }</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">addNode</span>(<span class="hljs-attr">node</span>: <span class="hljs-title class_">RenderNode</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">appendChild</span>(node)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">clearNodes</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">clearChildren</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myNodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>()</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">performTask</span>(<span class="hljs-params"></span>) {</li><li>  myNodeController.<span class="hljs-title function_">clearNodes</span>()</li><li>  myNodeController.<span class="hljs-title function_">addNode</span>(textNode)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Font08</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">src</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">'app.media.startIcon'</span>)</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(myNodeController)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">src</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'0%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'0%'</span>)</li><li>          .<span class="hljs-title function_">onComplete</span>(</li><li>            <span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-title function_">performTask</span>();</li><li>            })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="效果展示">效果展示<i class="anchor-icon anchor-icon-link" anchorid="效果展示" tips="复制节点链接"></i></h3>          <p><span><img originheight="1156" originwidth="720" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114402.27888186828103412214646114662107:50001231000000:2800:CC782D6CAF4D27B387BB7112AAA91EAEBB2BB65D4E27AF4338C2FDC1EF81BED9.png" width="720" height="1156"></span></p>    </div>    <div class="tiledSection">     <h2 id="多行文本绘制与显示">多行文本绘制与显示<i class="anchor-icon anchor-icon-link" anchorid="多行文本绘制与显示" tips="复制节点链接"></i></h2>          <p>多行文本相对于单行文本比较复杂，一般针对多行文本，需要进行文本排版、断词策略设置、文本对齐方式、最大行数限制等，主要通过设置段落样式实现。</p>    </div>    <div class="tiledSection">     <h3 id="实现说明" class="firsth2">实现说明<i class="anchor-icon anchor-icon-link" anchorid="实现说明" tips="复制节点链接"></i></h3>          <p><strong>段落样式</strong>（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-graphics-text#paragraphstyle" target="_blank">ParagraphStyle</a>）是对多行文本中每段内容的样式设置，包括断词策略、文本对齐方式、最大行数限制等。开发者可以通过对不同段落进行样式化，以提高文本的可读性和美观性。</p>    </div>    <div class="tiledSection">     <h3 id="开发步骤-1">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤-1" tips="复制节点链接"></i></h3>          <ol>      <li>       <p>通过context获取到Canvas画布对象。</p>       <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 绘制代码逻辑写在这里</span></li><li><span class="hljs-keyword">let</span> canvas = context.<span class="hljs-property">canvas</span>;</li></ol></pre></div></div></li>      <li>       <p>初始化文本样式。</p>       <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>  <span class="hljs-attr">color</span>: {</li><li>    <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>    <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>    <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>  },</li><li>  <span class="hljs-attr">fontSize</span>: <span class="hljs-number">50</span>,</li><li>  <span class="hljs-comment">// 当wordBreak为text.WordBreak.BREAK_HYPHEN时，需要设置语言偏好，段落会在不同语言偏好下呈现不同的文本断词效果</span></li><li>  <span class="hljs-attr">locale</span>: <span class="hljs-string">"en-gb"</span></li><li>};</li></ol></pre></div></div></li>      <li>       <p>初始化段落样式。</p>       <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>  <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>  <span class="hljs-comment">// 文本对齐方式</span></li><li>  <span class="hljs-attr">align</span>: text.<span class="hljs-property">TextAlign</span>.<span class="hljs-property">LEFT</span>,</li><li>  <span class="hljs-comment">// 最大行数</span></li><li>  <span class="hljs-attr">maxLines</span>: <span class="hljs-number">3</span>,</li><li>  <span class="hljs-comment">// 断词策略</span></li><li>  <span class="hljs-attr">wordBreak</span>: text.<span class="hljs-property">WordBreak</span>.<span class="hljs-property">BREAK_WORD</span></li><li>};</li></ol></pre></div></div></li>      <li>       <p>初始化段落对象，并添加占位符和文本。</p>       <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> fontCollection = text.<span class="hljs-property">FontCollection</span>.<span class="hljs-title function_">getGlobalInstance</span>();</li><li><span class="hljs-keyword">let</span> paragraphBuilder = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, fontCollection);</li><li><span class="hljs-comment">// 更新文本样式</span></li><li>paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li><span class="hljs-comment">// 添加文本</span></li><li>paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"Hello World Hello World Hello World Hello World Hello World Hello World "</span> +</li><li>  <span class="hljs-string">"Hello World Hello World Hello World Hello World Hello World Hello World Hello World Hello World "</span> +</li><li>  <span class="hljs-string">"Hello World Hello World Hello World Hello World Hello World "</span>);</li></ol></pre></div></div></li>      <li>       <p>排版段落并进行文本绘制。</p>       <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 生成段落</span></li><li><span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li><li><span class="hljs-comment">// 布局</span></li><li>paragraph.<span class="hljs-title function_">layoutSync</span>(<span class="hljs-number">1250</span>);</li><li><span class="hljs-comment">// 绘制文本</span></li><li>paragraph.<span class="hljs-title function_">paint</span>(canvas, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>);</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="完整示例-1">完整示例<i class="anchor-icon anchor-icon-link" anchorid="完整示例-1" tips="复制节点链接"></i></h3>          <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">RenderNode</span>, <span class="hljs-title class_">DrawContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { text } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span></li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode类，并绘制文本。</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">RenderNode</span> {</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">context: DrawContext</span>) {</li><li>    <span class="hljs-comment">// 绘制代码逻辑写在这里</span></li><li>    <span class="hljs-keyword">let</span> canvas = context.<span class="hljs-property">canvas</span>;</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>      <span class="hljs-attr">color</span>: {</li><li>        <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>      },</li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">50</span>,</li><li>      <span class="hljs-comment">// 当wordBreak为text.WordBreak.BREAK_HYPHEN时，需要为段落设置语言偏好，段落会在不同语言偏好下呈现不同的文本断词效果</span></li><li>      <span class="hljs-attr">locale</span>: <span class="hljs-string">"en-gb"</span></li><li>    };</li><li>    </li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>      <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>      <span class="hljs-comment">// 文本对齐方式</span></li><li>      <span class="hljs-attr">align</span>: text.<span class="hljs-property">TextAlign</span>.<span class="hljs-property">LEFT</span>,</li><li>      <span class="hljs-comment">// 最大行数</span></li><li>      <span class="hljs-attr">maxLines</span>: <span class="hljs-number">3</span>,</li><li>      <span class="hljs-comment">// 断词策略</span></li><li>      <span class="hljs-attr">wordBreak</span>: text.<span class="hljs-property">WordBreak</span>.<span class="hljs-property">BREAK_WORD</span></li><li>    };</li><li>    <span class="hljs-keyword">let</span> fontCollection = text.<span class="hljs-property">FontCollection</span>.<span class="hljs-title function_">getGlobalInstance</span>();</li><li>    <span class="hljs-keyword">let</span> paragraphBuilder = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, fontCollection);</li><li>    <span class="hljs-comment">// 更新文本样式</span></li><li>    paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li>    <span class="hljs-comment">// 添加文本</span></li><li>    paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"Hello World Hello World Hello World Hello World Hello World Hello World "</span> +</li><li>      <span class="hljs-string">"Hello World Hello World Hello World Hello World Hello World Hello World Hello World Hello World "</span> +</li><li>      <span class="hljs-string">"Hello World Hello World Hello World Hello World Hello World "</span>);</li><li>    <span class="hljs-comment">// 当wordBreak为text.WordBreak.BREAK_HYPHEN时，替换文本内容为：</span></li><li>    <span class="hljs-comment">// paragraphBuilder.addText("Modern embedded systems require robust communication protocols and efficient memory " +</span></li><li>    <span class="hljs-comment">//   "management strategies. Developers often face challenges in optimizing performance while maintaining " +</span></li><li>    <span class="hljs-comment">//   "modularity and portability. By leveraging a layered architecture and structured logging, applications can " +</span></li><li>    <span class="hljs-comment">//   "detect anomalies and respond quickly to faults. This approach enhances reliability, especially in " +</span></li><li>    <span class="hljs-comment">//   "time-critical environments such as IoT devices and real-time operating systems.");</span></li><li>
</li><li>    <span class="hljs-comment">// 生成段落</span></li><li>    <span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li><li>    <span class="hljs-comment">// 布局</span></li><li>    paragraph.<span class="hljs-title function_">layoutSync</span>(<span class="hljs-number">1250</span>);</li><li>    <span class="hljs-comment">// 绘制文本</span></li><li>    paragraph.<span class="hljs-title function_">paint</span>(canvas, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode对象</span></li><li><span class="hljs-keyword">const</span> textNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRenderNode</span>()</li><li><span class="hljs-comment">// 定义newNode的像素格式</span></li><li>textNode.<span class="hljs-property">frame</span> = {</li><li>  <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">400</span>,</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">600</span></li><li>}</li><li>textNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0.2</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0.8</span> }</li><li>textNode.<span class="hljs-property">scale</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> }</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameNode</span>(uiContext)</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-property">frame</span> = {</li><li>        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">10</span>,</li><li>        <span class="hljs-attr">height</span>: <span class="hljs-number">500</span></li><li>      }</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">addNode</span>(<span class="hljs-attr">node</span>: <span class="hljs-title class_">RenderNode</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">appendChild</span>(node)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">clearNodes</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">clearChildren</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myNodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>()</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">performTask</span>(<span class="hljs-params"></span>) {</li><li>  myNodeController.<span class="hljs-title function_">clearNodes</span>()</li><li>  myNodeController.<span class="hljs-title function_">addNode</span>(textNode)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Font08</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">src</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">'app.media.startIcon'</span>)</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(myNodeController)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">src</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'0%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'0%'</span>)</li><li>          .<span class="hljs-title function_">onComplete</span>(</li><li>            <span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-title function_">performTask</span>();</li><li>            })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="效果展示-1">效果展示<i class="anchor-icon anchor-icon-link" anchorid="效果展示-1" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.2.1.3.1.1" valign="top" width="50%">段落样式设置（断词策略、文本对齐方式、最大行数限制）</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.2.1.3.1.2" valign="top" width="50%">效果示意</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">文本对齐方式为text.TextAlign.LEFT，最大行数为3，断词策略为text.WordBreak.BREAK_WORD。</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="140" originwidth="549" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114402.35290958365108796197518320651894:50001231000000:2800:1559D4DAA34A936474267787F5E69838D1C5E29023B460785C3D423AF04C1509.png" width="436" height="111.18397085610201"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">文本对齐方式为text.TextAlign.RIGHT，最大行数为3，断词策略为text.WordBreak.BREAK_WORD。</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="129" originwidth="546" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114402.32038958129466197264780904219015:50001231000000:2800:F33769B3D6A037B9E9A6109EFA9AB6B85E94582D6982F2756AEB98385EF3366C.png" width="436" height="103.01098901098902"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">文本对齐方式为text.TextAlign.JUSTIFY，最大行数为10，断词策略为text.WordBreak.BREAK_WORD。</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="142" originwidth="545" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114402.96095391747935595846149206743459:50001231000000:2800:96B9FE6D87E0182206480AE7F91E4A2C42D62C85C69416605FE96CDB7560A65C.png" width="436" height="113.60000000000001"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">文本对齐方式为text.TextAlign.LEFT，最大行数为3，断词策略为text.WordBreak.BREAK_ALL。</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="142" originwidth="550" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114403.91646283765972499036778842762927:50001231000000:2800:7595D1D6DF023955D25962FBD2BF9866D407D1AD66C54DB2594098322FC06075.png" width="436" height="112.56727272727272"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">文本对齐方式为text.TextAlign.LEFT，最大行数为10，断词策略为text.WordBreak.BREAK_ALL。</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="189" originwidth="548" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114403.13014978389518491327681763643049:50001231000000:2800:95370DE2DE25A7031ED5209B5AC2F97D7E0FF388CCA6F0E6BEB05DDCE536880C.png" width="436" height="150.37226277372264"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">          <p>文本对齐方式为text.TextAlign.LEFT，最大行数为10，断词策略为text.WordBreak.BREAK_HYPHEN，</p>          <p>不设置语言偏好。段落无连字符“-”断词效果。</p></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="162" originwidth="334" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114403.56694457064851017550150381843665:50001231000000:2800:D4AB133D4091FA81648E0FA7F31BCAE6AC76C4CE3C9B544969F4DA4C7C4305F2.jpg" width="334" height="162"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">          <p>文本对齐方式为text.TextAlign.LEFT，最大行数为10，断词策略为text.WordBreak.BREAK_HYPHEN，</p>          <p>语言偏好为en-gb（英式英语）。段落产生连字符“-”断词效果，并根据语言偏好呈现英式语言环境断词效果。</p></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="164" originwidth="334" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114403.23823354504765913222530402465973:50001231000000:2800:DB09ECD7907B9E1D38086984A1D40BF0FB80BC6DFB0816490A8EB8FAABCA08E0.jpg" width="334" height="164"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">          <p>文本对齐方式为text.TextAlign.LEFT，最大行数为10，断词策略为text.WordBreak.BREAK_HYPHEN，</p>          <p>语言偏好为en-us（美式英语）。段落产生连字符“-”断词效果，并根据语言偏好呈现美式语言环境断词效果。</p></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="164" originwidth="334" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114403.22197767576319460108139439447284:50001231000000:2800:26E0552C10D2004658E518DA6EAD6D5FEF9C492E4F629594EACAAF0EBAE102A6.jpg" width="334" height="164"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="多样式文本绘制与显示">多样式文本绘制与显示<i class="anchor-icon anchor-icon-link" anchorid="多样式文本绘制与显示" tips="复制节点链接"></i></h2>          <p>除基本文字、排版属性之外，针对应用中不同文本的设计，开发者可能需要设置使用不同的绘制样式或能力，以凸显对应文本的独特表现或风格，此时可以结合使用多种绘制样式进行文本的渲染。</p>     <p>当前支持的多样式绘制及各绘制样式侧重效果如下：</p>     <ul>      <li>       <p><strong>装饰线样式绘制：</strong> 主要通过不同的线条样式对文本进行装饰，可以使文本更加突出，富有表现力。</p></li>      <li>       <p><strong>字体特性绘制：</strong> 主要通过字体的变化，包括粗细、斜体等特性来改变文本的外观，增强文本的可读性和美观性。</p></li>      <li>       <p><strong>可变字体绘制：</strong> 对应提供文本在不同的显示环境和设备上灵活调整的能力，可满足更为精细的视觉效果。</p></li>      <li>       <p><strong>文本阴影绘制：</strong> 主要通过在文本周围添加阴影效果，以提升文本的层次感和立体感，从而使文本更具吸引力。</p></li>      <li>       <p><strong>占位符绘制：</strong> 可以在不确定文本内容时保持文本布局的稳定性，使得文本显示更为流畅和自然。</p></li>      <li>       <p><strong>自动间距绘制：</strong> 可以在一些字符混排切换的地方自动添加额外间距，提升阅读体验。</p></li>      <li>       <p><strong>垂直对齐：</strong> 调整文本在垂直方向排版位置，提升排版质量。</p></li>      <li>       <p><strong>上下标：</strong> 可以将任意字符处理成上标或下标，更精准表达文本含义。</p></li>      <li>       <p><strong>高对比度文字绘制：</strong> 主要通过将深色文字变黑、浅色文字变白，增强文本的对比效果。</p></li>      <li>       <p><strong>行高调整：</strong> 调整行高可改变文本行的垂直间距，使行间距更松散或更紧凑，显著改善文本垂直截断问题，提高可读性。</p></li>      <li>       <p><strong>行间距调整：</strong> 通过调整行间距的方式可以实现行高调整一样的效果，优化阅读体验。</p></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="装饰线" class="firsth2">装饰线<i class="anchor-icon anchor-icon-link" anchorid="装饰线" tips="复制节点链接"></i></h3>          <p>装饰线（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-graphics-text#decoration" target="_blank">Decoration</a>）是指在文本上方、下方或中间添加的装饰性线条，当前支持上划线、下划线、删除线。</p>     <p>可以通过添加文本装饰线，提升文本的视觉效果和可读性。</p>     <p>使用装饰线需要初始化装饰线样式对象，并添加到文本样式中，从而在文本绘制时生效。</p>     <p>具体使用效果可参见下文<a href="/consumer/cn/doc/harmonyos-guides/complex-text-arkts#示例一装饰线字体特征">示例一</a>。</p>    </div>    <div class="tiledSection">     <h3 id="字体特征">字体特征<i class="anchor-icon anchor-icon-link" anchorid="字体特征" tips="复制节点链接"></i></h3>          <p><strong>字体特征</strong>（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-graphics-text#fontfeature" target="_blank">FontFeature</a>）绘制专注于在文本渲染过程中对字体特性（如粗体、斜体、字体变种等）的处理，允许字体在不同的排版场景下表现出不同的效果，可用于增强文本的表现力，使其更符合设计和阅读需求。</p>     <p>常见的<strong>FontFeature</strong>包含有liga、frac、case等，需要对应的ttf文件支持才能正常使能。</p>     <p>具体使用效果可参见下文<a href="/consumer/cn/doc/harmonyos-guides/complex-text-arkts#示例一装饰线字体特征">示例一</a>。</p>    </div>    <div class="tiledSection">     <h3 id="可变字体">可变字体<i class="anchor-icon anchor-icon-link" anchorid="可变字体" tips="复制节点链接"></i></h3>          <p><strong>可变字体</strong>（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-graphics-text#fontvariation" target="_blank">FontVariation</a>）是一种在一个字体文件中包含多个字形变体的字体格式，允许在一个字体文件内灵活地调整字体的各种属性（如字重、字宽、斜体等）。</p>     <p>与传统字体文件（每种变体需要一个独立的文件）不同，可变字体在一个字体文件中包含多个变体轴，可通过使用可变字体实现文本渲染绘制时的平滑过渡。</p>     <p>具体使用效果可参见下文<a href="/consumer/cn/doc/harmonyos-guides/complex-text-arkts#示例二可变字体文本阴影占位符">示例二</a>。</p>    </div>    <div class="tiledSection">     <h3 id="文本阴影">文本阴影<i class="anchor-icon anchor-icon-link" anchorid="文本阴影" tips="复制节点链接"></i></h3>          <p><strong>文本阴影</strong>（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-graphics-text#textshadow" target="_blank">TextShadow</a>）为文本提供了深度感，使得文本在背景上更具立体感。通常用于提升文本的视觉吸引力或增强可读性，尤其是在色彩对比度较低的场景下。</p>     <p>其中，TextShadow有三个属性，分别为阴影颜色color、阴影基于当前文本的偏移位置point、阴影半径blurRadius。</p>     <p>使用阴影效果需要在文本样式中设置对应的阴影效果数组，从而在文本绘制时生效。</p>     <p>具体使用效果可参见下文<a href="/consumer/cn/doc/harmonyos-guides/complex-text-arkts#示例二可变字体文本阴影占位符">示例二</a>。</p>    </div>    <div class="tiledSection">     <h3 id="占位符">占位符<i class="anchor-icon anchor-icon-link" anchorid="占位符" tips="复制节点链接"></i></h3>          <p>占位符绘制用于处理文本中占位符符号的渲染。</p>     <p>占位符也是用来实现图文混排的关键，是指在实际图像或内容注册之前，用来预先提供或替代某个位置的视觉元素。</p>     <p>具体使用效果可参见下文<a href="/consumer/cn/doc/harmonyos-guides/complex-text-arkts#示例二可变字体文本阴影占位符">示例二</a>。</p>    </div>    <div class="tiledSection">     <h3 id="自动间距">自动间距<i class="anchor-icon anchor-icon-link" anchorid="自动间距" tips="复制节点链接"></i></h3>          <p>使能自动间距，则会在文本排版时自动调整CJK（中文字符、日文字符、韩文字符）与西文（拉丁字母、西里尔字母、希腊字母）、CJK与数字、CJK与版权符号、版权符号与数字、版权符号与西文之间的间距。例如，在中英文混排场景中，使能自动间距即可在中英文切换的地方自动添加额外间距，提升阅读体验。</p>     <p>关键示例如下：</p>     <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>  <span class="hljs-attr">autoSpace</span>: <span class="hljs-literal">true</span></li><li>};</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="垂直对齐">垂直对齐<i class="anchor-icon anchor-icon-link" anchorid="垂直对齐" tips="复制节点链接"></i></h3>          <p>垂直对齐用于调整文本在一行中垂直方向的排版位置。开启行高缩放或行内存在不同字号文本混排时使能垂直对齐，可以让文本实现顶部对齐、居中对齐、底部对齐或基线对齐（默认）。关键代码如下：</p>     <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>  <span class="hljs-attr">verticalAlign</span>: text.<span class="hljs-property">TextVerticalAlign</span>.<span class="hljs-property">CENTER</span></li><li>};</li></ol></pre></div></div>     <p>具体使用效果可参见下文<a href="/consumer/cn/doc/harmonyos-guides/complex-text-arkts#示例三垂直对齐">示例三</a>。</p>    </div>    <div class="tiledSection">     <h3 id="上下标">上下标<i class="anchor-icon anchor-icon-link" anchorid="上下标" tips="复制节点链接"></i></h3>          <p>使能上下标，能将文本作为上标或下标参与排版。一般用于数学公式、化学式等场景。关键代码如下：</p>     <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">superScriptStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>    <span class="hljs-attr">badgeType</span>: text.<span class="hljs-property">TextBadgeType</span>.<span class="hljs-property">TEXT_SUPERSCRIPT</span></li><li>};</li></ol></pre></div></div>     <p>具体使用效果可参见下文<a href="/consumer/cn/doc/harmonyos-guides/complex-text-arkts#示例四上下标文本">示例四</a>。</p>    </div>    <div class="tiledSection">     <h3 id="高对比度">高对比度<i class="anchor-icon anchor-icon-link" anchorid="高对比度" tips="复制节点链接"></i></h3>          <p>高对比度可将深色文字变黑、浅色文字变白。开发者可选择开启或关闭应用的高对比度文字渲染，或遵循系统设置中的高对比度文字配置。</p>     <p>高对比度模式有3种，具体参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-graphics-text#texthighcontrast20" target="_blank">TextHighContrast</a>。</p>     <p>具体使用效果可参见下文<a href="/consumer/cn/doc/harmonyos-guides/complex-text-arkts#示例五高对比度">示例五</a>。</p>    </div>    <div class="tiledSection">     <h3 id="行高调整">行高调整<i class="anchor-icon anchor-icon-link" anchorid="行高调整" tips="复制节点链接"></i></h3>          <p>当前行高调整方式包括两种：设置行高上限/下限和使用行高缩放系数。</p>     <p><strong>行高调整（方式一）</strong></p>     <p>从API version 21开始，支持通过设置行高上限和下限调整行高，关键代码如下：</p>     <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>    <span class="hljs-comment">// 设置行高上限</span></li><li>    <span class="hljs-attr">lineHeightMaximum</span>: <span class="hljs-number">65</span>,</li><li>    <span class="hljs-comment">// 设置行高下限</span></li><li>    <span class="hljs-attr">lineHeightMinimum</span>: <span class="hljs-number">65</span></li><li>};</li></ol></pre></div></div>     <p>使用效果参考下文<a href="/consumer/cn/doc/harmonyos-guides/complex-text-arkts#示例六行高调整方式一">示例六</a>。</p>     <p><strong>行高调整（方式二）</strong></p>     <p>通过设置行高缩放系数调整行高，关键代码如下：</p>     <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>    <span class="hljs-comment">// 开启行高缩放开关</span></li><li>    <span class="hljs-attr">heightOnly</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-comment">// 设置行高缩放系数</span></li><li>    <span class="hljs-attr">heightScale</span>: <span class="hljs-number">1.5</span>,</li><li>    <span class="hljs-comment">// 设置行高缩放风格</span></li><li>    <span class="hljs-attr">lineHeightStyle</span>: text.<span class="hljs-property">LineHeightStyle</span>.<span class="hljs-property">FONT_HEIGHT</span></li><li>};</li></ol></pre></div></div>     <p>使用效果参考下文<a href="/consumer/cn/doc/harmonyos-guides/complex-text-arkts#示例七行高调整方式二">示例七</a>。</p>    </div>    <div class="tiledSection">     <h3 id="行间距调整">行间距调整<i class="anchor-icon anchor-icon-link" anchorid="行间距调整" tips="复制节点链接"></i></h3>          <p>从API version 21开始，支持设置行间距改善文本行之间的距离，提高阅读体验，关键代码如下：</p>     <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>  <span class="hljs-comment">// 设置行间距</span></li><li>  <span class="hljs-attr">lineSpacing</span>: <span class="hljs-number">100</span>,</li><li>  <span class="hljs-comment">// 关闭段落上升部和下降部</span></li><li>  <span class="hljs-attr">textHeightBehavior</span>: text.<span class="hljs-property">TextHeightBehavior</span>.<span class="hljs-property">DISABLE_ALL</span>,</li><li>};</li></ol></pre></div></div>     <p>具体使用效果可参见下文<a href="/consumer/cn/doc/harmonyos-guides/complex-text-arkts#示例八行间距调整">示例八</a>。</p>    </div>    <div class="tiledSection">     <h3 id="示例一装饰线字体特征">示例一（装饰线、字体特征）<i class="anchor-icon anchor-icon-link" anchorid="示例一装饰线字体特征" tips="复制节点链接"></i></h3>          <p>这里以文本样式中的装饰线和字体特征为例，呈现多样式文本的绘制与显示。</p>     <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">RenderNode</span>, <span class="hljs-title class_">DrawContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { text } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span></li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode类，并绘制文本。</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">RenderNode</span> {</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">context: DrawContext</span>) {</li><li>    <span class="hljs-keyword">let</span> canvas = context.<span class="hljs-property">canvas</span>;</li><li>
</li><li>    <span class="hljs-comment">// 初始化装饰线对象</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">decorations</span>: text.<span class="hljs-property">Decoration</span> =</li><li>      {</li><li>        <span class="hljs-comment">// 装饰线类型，支持上划线、下划线、删除线</span></li><li>        <span class="hljs-attr">textDecoration</span>: text.<span class="hljs-property">TextDecorationType</span>.<span class="hljs-property">UNDERLINE</span>,</li><li>        <span class="hljs-comment">// 装饰线颜色</span></li><li>        <span class="hljs-attr">color</span>: {</li><li>          <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>          <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>          <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>          <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>        },</li><li>        <span class="hljs-comment">// 装饰线样式，支持波浪，虚线，直线等</span></li><li>        <span class="hljs-attr">decorationStyle</span>:text.<span class="hljs-property">TextDecorationStyle</span>.<span class="hljs-property">SOLID</span>,</li><li>        <span class="hljs-comment">// 装饰线的高度</span></li><li>        <span class="hljs-attr">decorationThicknessScale</span>: <span class="hljs-number">1</span></li><li>      };</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>      <span class="hljs-attr">color</span>: {</li><li>        <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>      },</li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">300</span>,</li><li>      <span class="hljs-comment">// 设置装饰线</span></li><li>      <span class="hljs-attr">decoration</span>: decorations,</li><li>      <span class="hljs-comment">// 开启字体特征</span></li><li>      <span class="hljs-attr">fontFeatures</span>: [{<span class="hljs-attr">name</span>: <span class="hljs-string">'frac'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>}]</li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>      <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> fontCollection = text.<span class="hljs-property">FontCollection</span>.<span class="hljs-title function_">getGlobalInstance</span>();</li><li>    <span class="hljs-keyword">let</span> paragraphBuilder = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, fontCollection);</li><li>
</li><li>    <span class="hljs-comment">// 更新文本样式</span></li><li>    paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li>    <span class="hljs-comment">// 添加文本</span></li><li>    paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"1/2 1/3 1/4 "</span>);</li><li>
</li><li>    <span class="hljs-comment">// 生成段落</span></li><li>    <span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li><li>    <span class="hljs-comment">// 布局</span></li><li>    paragraph.<span class="hljs-title function_">layoutSync</span>(<span class="hljs-number">1250</span>);</li><li>    <span class="hljs-comment">// 绘制文本</span></li><li>    paragraph.<span class="hljs-title function_">paint</span>(canvas, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode对象</span></li><li><span class="hljs-keyword">const</span> textNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRenderNode</span>()</li><li><span class="hljs-comment">// 定义newNode的像素格式</span></li><li>textNode.<span class="hljs-property">frame</span> = {</li><li>  <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">400</span>,</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">600</span></li><li>}</li><li>textNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0.2</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0.8</span> }</li><li>textNode.<span class="hljs-property">scale</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> }</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameNode</span>(uiContext)</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-property">frame</span> = {</li><li>        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">10</span>,</li><li>        <span class="hljs-attr">height</span>: <span class="hljs-number">500</span></li><li>      }</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">addNode</span>(<span class="hljs-attr">node</span>: <span class="hljs-title class_">RenderNode</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">appendChild</span>(node)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">clearNodes</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">clearChildren</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myNodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>()</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">performTask</span>(<span class="hljs-params"></span>) {</li><li>  myNodeController.<span class="hljs-title function_">clearNodes</span>()</li><li>  myNodeController.<span class="hljs-title function_">addNode</span>(textNode)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Font08</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">src</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">'app.media.startIcon'</span>)</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(myNodeController)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">src</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'0%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'0%'</span>)</li><li>          .<span class="hljs-title function_">onComplete</span>(</li><li>            <span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-title function_">performTask</span>();</li><li>            })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>具体示意效果如下所示：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.3.1.1" valign="top" width="50%">样式设置（装饰线样式、字体特征）</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.3.1.2" valign="top" width="50%">示意效果</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">不开启装饰线和字体特征</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="126" originwidth="242" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114403.61545772652203322505496305475033:50001231000000:2800:2E147377A65D474A78DB960246A04AE9E1233D1F07EB96B0003447BCBC3E4DF5.png" class="notEnlarge" width="242" height="126"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">开启装饰线和字体特征</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="96" originwidth="260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114403.44352289024343563368775934241585:50001231000000:2800:5ECB0116AC123715DD70909CCD95B1B60A6E5A5BE3CA499BC85AF083C84ACFBF.png" class="notEnlarge" width="260" height="96"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="示例二可变字体文本阴影占位符">示例二（可变字体、文本阴影、占位符）<i class="anchor-icon anchor-icon-link" anchorid="示例二可变字体文本阴影占位符" tips="复制节点链接"></i></h3>          <p>这里以可变字体、文本阴影、占位符三个特性为例，呈现多样式文本的绘制与显示。</p>     <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">RenderNode</span>, <span class="hljs-title class_">DrawContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { drawing } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span></li><li><span class="hljs-keyword">import</span> { text } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span></li><li><span class="hljs-keyword">import</span> { common2D } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span></li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode类，并绘制文本。</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">RenderNode</span> {</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">context: DrawContext</span>) {</li><li>    <span class="hljs-keyword">let</span> canvas = context.<span class="hljs-property">canvas</span>;</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>      <span class="hljs-attr">color</span>: {</li><li>        <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>      },</li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">150</span>,</li><li>      <span class="hljs-comment">// 可变字体</span></li><li>      <span class="hljs-attr">fontVariations</span>: [{<span class="hljs-attr">axis</span>: <span class="hljs-string">'wght'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">555</span>}],</li><li>      <span class="hljs-comment">// 文本阴影</span></li><li>      <span class="hljs-attr">textShadows</span>: [{<span class="hljs-attr">color</span>: { <span class="hljs-attr">alpha</span>: <span class="hljs-number">0xFF</span>, <span class="hljs-attr">red</span>: <span class="hljs-number">0xFF</span>, <span class="hljs-attr">green</span>: <span class="hljs-number">0x00</span>, <span class="hljs-attr">blue</span>: <span class="hljs-number">0x00</span> }, <span class="hljs-attr">point</span>: {<span class="hljs-attr">x</span>:<span class="hljs-number">10</span>,<span class="hljs-attr">y</span>:<span class="hljs-number">10</span>}, <span class="hljs-attr">blurRadius</span>: <span class="hljs-number">10</span>}],</li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>      <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> fontCollection = text.<span class="hljs-property">FontCollection</span>.<span class="hljs-title function_">getGlobalInstance</span>();</li><li>    <span class="hljs-keyword">let</span> paragraphBuilder = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, fontCollection);</li><li>
</li><li>    <span class="hljs-comment">// 初始化占位符对象</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myPlaceholderSpan</span>: text.<span class="hljs-property">PlaceholderSpan</span> = {</li><li>      <span class="hljs-comment">// 宽度</span></li><li>      <span class="hljs-attr">width</span>: <span class="hljs-number">300</span>,</li><li>      <span class="hljs-comment">// 高度</span></li><li>      <span class="hljs-attr">height</span>: <span class="hljs-number">300</span>,</li><li>      <span class="hljs-comment">// 基线对齐策略</span></li><li>      <span class="hljs-attr">align</span>: text.<span class="hljs-property">PlaceholderAlignment</span>.<span class="hljs-property">BOTTOM_OF_ROW_BOX</span>,</li><li>      <span class="hljs-comment">// 使用的文本基线类型</span></li><li>      <span class="hljs-attr">baseline</span>: text.<span class="hljs-property">TextBaseline</span>.<span class="hljs-property">ALPHABETIC</span>,</li><li>      <span class="hljs-comment">// 相比基线的偏移量。只有对齐策略是OFFSET_AT_BASELINE时生效</span></li><li>      <span class="hljs-attr">baselineOffset</span>: <span class="hljs-number">100</span></li><li>    };</li><li>    <span class="hljs-comment">// 添加占位符</span></li><li>    paragraphBuilder.<span class="hljs-title function_">addPlaceholder</span>(myPlaceholderSpan)</li><li>
</li><li>    <span class="hljs-comment">// 更新文本样式</span></li><li>    paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li>    <span class="hljs-comment">// 添加文本</span></li><li>    paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"Hello Test"</span>);</li><li>
</li><li>    <span class="hljs-comment">// 生成段落</span></li><li>    <span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li><li>    <span class="hljs-comment">// 布局</span></li><li>    paragraph.<span class="hljs-title function_">layoutSync</span>(<span class="hljs-number">1250</span>);</li><li>    <span class="hljs-comment">// 绘制文本</span></li><li>    paragraph.<span class="hljs-title function_">paint</span>(canvas, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>
</li><li>    <span class="hljs-comment">//获取全部占位符的数组</span></li><li>    <span class="hljs-keyword">let</span> placeholderRects = paragraph.<span class="hljs-title function_">getRectsForPlaceholders</span>();</li><li>    <span class="hljs-comment">// 获取第一个占位符的左边界</span></li><li>    <span class="hljs-keyword">let</span> left = placeholderRects[<span class="hljs-number">0</span>].<span class="hljs-property">rect</span>.<span class="hljs-property">left</span></li><li>    <span class="hljs-comment">// 获取第一个占位符的上边界</span></li><li>    <span class="hljs-keyword">let</span> top = placeholderRects[<span class="hljs-number">0</span>].<span class="hljs-property">rect</span>.<span class="hljs-property">top</span></li><li>    <span class="hljs-comment">// 获取第一个占位符的右边界</span></li><li>    <span class="hljs-keyword">let</span> right = placeholderRects[<span class="hljs-number">0</span>].<span class="hljs-property">rect</span>.<span class="hljs-property">right</span></li><li>    <span class="hljs-comment">// 获取第一个占位符的下边界</span></li><li>    <span class="hljs-keyword">let</span> bottom = placeholderRects[<span class="hljs-number">0</span>].<span class="hljs-property">rect</span>.<span class="hljs-property">bottom</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">pen</span>: drawing.<span class="hljs-property">Pen</span> =  <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Pen</span>()</li><li>    <span class="hljs-keyword">let</span> pen_color : common2D.<span class="hljs-property">Color</span> = { <span class="hljs-attr">alpha</span>: <span class="hljs-number">0xFF</span>, <span class="hljs-attr">red</span>: <span class="hljs-number">0xFF</span>, <span class="hljs-attr">green</span>: <span class="hljs-number">0x00</span>, <span class="hljs-attr">blue</span>: <span class="hljs-number">0x00</span> }</li><li>    pen.<span class="hljs-title function_">setColor</span>(pen_color)</li><li>    canvas.<span class="hljs-title function_">attachPen</span>(pen)</li><li>    <span class="hljs-comment">// 使用draw方法绘制占位符矩形框</span></li><li>    canvas.<span class="hljs-title function_">drawRect</span>(left,top,right,bottom)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode对象</span></li><li><span class="hljs-keyword">const</span> textNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRenderNode</span>()</li><li><span class="hljs-comment">// 定义newNode的像素格式</span></li><li>textNode.<span class="hljs-property">frame</span> = {</li><li>  <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">400</span>,</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">600</span></li><li>}</li><li>textNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0.2</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0.8</span> }</li><li>textNode.<span class="hljs-property">scale</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> }</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameNode</span>(uiContext)</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-property">frame</span> = {</li><li>        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">10</span>,</li><li>        <span class="hljs-attr">height</span>: <span class="hljs-number">500</span></li><li>      }</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">addNode</span>(<span class="hljs-attr">node</span>: <span class="hljs-title class_">RenderNode</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">appendChild</span>(node)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">clearNodes</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">clearChildren</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myNodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>()</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">performTask</span>(<span class="hljs-params"></span>) {</li><li>  myNodeController.<span class="hljs-title function_">clearNodes</span>()</li><li>  myNodeController.<span class="hljs-title function_">addNode</span>(textNode)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Font08</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">src</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">'app.media.startIcon'</span>)</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(myNodeController)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">src</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'0%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'0%'</span>)</li><li>          .<span class="hljs-title function_">onComplete</span>(</li><li>            <span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-title function_">performTask</span>();</li><li>            })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>具体示意效果如下所示：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.3.1.1" valign="top" width="50%">样式设置（可变字体、文本阴影、占位符）</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.3.1.2" valign="top" width="50%">示意效果</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">不开启可变字体和文本阴影，不使用占位符</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="105" originwidth="419" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114403.71839280690288905859982350314017:50001231000000:2800:3DF3FCB1BCB194BCA81BE5D7F279C92574988759494EC3A2F4E3BB1177F858C6.png" width="419" height="105"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">开启可变字体和文本阴影，使用占位符</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="158" originwidth="428" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114403.74413049246256216988941525299223:50001231000000:2800:4D8D898BFE1FA04A6B770CB5E2B853B5D2E9192043CB26BD9B8638898FF93AA5.png" width="428" height="158"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="示例三垂直对齐">示例三（垂直对齐）<i class="anchor-icon anchor-icon-link" anchorid="示例三垂直对齐" tips="复制节点链接"></i></h3>          <p>这里以垂直对齐-居中对齐特性为例，呈现文本垂直方向排版的特性。</p>     <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">RenderNode</span>, <span class="hljs-title class_">DrawContext</span>, <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { text } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span></li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode类，并绘制文本。</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">RenderNode</span> {</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">context: DrawContext</span>) {</li><li>    <span class="hljs-keyword">let</span> canvas = context.<span class="hljs-property">canvas</span>;</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>      <span class="hljs-attr">color</span>: {</li><li>        <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>      },</li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">30</span>,</li><li>      <span class="hljs-comment">// 开启行高缩放</span></li><li>      <span class="hljs-attr">heightOnly</span>: <span class="hljs-literal">true</span>,</li><li>      <span class="hljs-comment">// 行高缩放系数为字号的2倍</span></li><li>      <span class="hljs-attr">heightScale</span>: <span class="hljs-number">2</span></li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>      <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>      <span class="hljs-comment">// 设置垂直对齐-居中对齐模式</span></li><li>      <span class="hljs-attr">verticalAlign</span>: text.<span class="hljs-property">TextVerticalAlign</span>.<span class="hljs-property">CENTER</span>,</li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> fontCollection = text.<span class="hljs-property">FontCollection</span>.<span class="hljs-title function_">getGlobalInstance</span>();</li><li>    <span class="hljs-keyword">let</span> paragraphBuilder = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, fontCollection);</li><li>
</li><li>    <span class="hljs-comment">// 设置待排版文本要应用的样式</span></li><li>    paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li>    <span class="hljs-comment">// 添加文本</span></li><li>    paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"VerticalAlignment-center"</span>);</li><li>
</li><li>    <span class="hljs-comment">// 生成段落</span></li><li>    <span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li><li>    <span class="hljs-comment">// 布局</span></li><li>    paragraph.<span class="hljs-title function_">layoutSync</span>(<span class="hljs-number">1000</span>);</li><li>    <span class="hljs-comment">// 绘制文本</span></li><li>    paragraph.<span class="hljs-title function_">paint</span>(canvas, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode对象</span></li><li><span class="hljs-keyword">const</span> textNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRenderNode</span>()</li><li><span class="hljs-comment">// 定义newNode的像素格式</span></li><li>textNode.<span class="hljs-property">frame</span> = {</li><li>  <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">400</span>,</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">600</span></li><li>}</li><li>textNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0.2</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0.8</span> }</li><li>textNode.<span class="hljs-property">scale</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> }</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameNode</span>(uiContext)</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-property">frame</span> = {</li><li>        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">10</span>,</li><li>        <span class="hljs-attr">height</span>: <span class="hljs-number">500</span></li><li>      }</li><li>      renderNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">50</span> }</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">addNode</span>(<span class="hljs-attr">node</span>: <span class="hljs-title class_">RenderNode</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">appendChild</span>(node)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">clearNodes</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">clearChildren</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myNodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>()</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">performTask</span>(<span class="hljs-params"></span>) {</li><li>  myNodeController.<span class="hljs-title function_">clearNodes</span>()</li><li>  myNodeController.<span class="hljs-title function_">addNode</span>(textNode)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Font08</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">src</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">'app.media.startIcon'</span>)</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(myNodeController)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"Test for vertical alignment"</span>)</li><li>          .<span class="hljs-title function_">onAppear</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-title function_">performTask</span>();</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>具体示意效果如下所示：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.3.1.1" valign="top" width="50%">样式设置（垂直对齐）</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.3.1.2" valign="top" width="50%">示意效果（黑框仅为展示文本绘制区域，实际不绘制）</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">基线对齐（默认）</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="66" originwidth="410" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114403.55688138837178486258787764925943:50001231000000:2800:EE69EAA86255ED51F59AF187961C7C7E6BB5B8530E0818B86CAB5EE41F4DB8D2.jpg" width="410" height="66"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">顶部对齐</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="56" originwidth="402" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114403.07235993845264783752677190261768:50001231000000:2800:DF2FF3665CF3F30E2BAB42C414C489845B42C485D843A0D8BE1C71464C4844C7.jpg" width="402" height="56"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">居中对齐</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="69" originwidth="405" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114404.20811591758625932239347133274700:50001231000000:2800:2F4F891FA958B6F913C06B2F32435AE75D9F69A25989A354D7298DBF9A214E56.jpg" width="405" height="69"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">底部对齐</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="60" originwidth="406" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114404.86289385683953295154105139924242:50001231000000:2800:478A28866B2638845852D06CD75AC787F0DB9648760A9B930FDA1E97811617EB.jpg" width="406" height="60"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="示例四上下标文本">示例四（上下标文本）<i class="anchor-icon anchor-icon-link" anchorid="示例四上下标文本" tips="复制节点链接"></i></h3>          <p>这里以下标样式为例，呈现上下标文本排版特性。</p>     <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">RenderNode</span>, <span class="hljs-title class_">DrawContext</span>, <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { text } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span></li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode类，并绘制文本。</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">RenderNode</span> {</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">context: DrawContext</span>) {</li><li>    <span class="hljs-keyword">let</span> canvas = context.<span class="hljs-property">canvas</span>;</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>      <span class="hljs-attr">color</span>: {</li><li>        <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>      },</li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">30</span>,</li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">subScriptStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>      <span class="hljs-attr">color</span>: {</li><li>        <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>      },</li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">30</span>,</li><li>      <span class="hljs-comment">// 设置下标样式</span></li><li>      <span class="hljs-attr">badgeType</span>: text.<span class="hljs-property">TextBadgeType</span>.<span class="hljs-property">TEXT_SUBSCRIPT</span></li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>      <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> fontCollection = text.<span class="hljs-property">FontCollection</span>.<span class="hljs-title function_">getGlobalInstance</span>();</li><li>    <span class="hljs-keyword">let</span> paragraphBuilder = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, fontCollection);</li><li>
</li><li>    <span class="hljs-comment">// 设置待排版文本要应用的样式</span></li><li>    paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li>    <span class="hljs-comment">// 添加文本</span></li><li>    paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"The chemical formula for water: H"</span>);</li><li>    paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(subScriptStyle);</li><li>    paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"2"</span>);</li><li>    paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li>    paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"o"</span>);</li><li>
</li><li>    <span class="hljs-comment">// 生成段落</span></li><li>    <span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li><li>    <span class="hljs-comment">// 布局</span></li><li>    paragraph.<span class="hljs-title function_">layoutSync</span>(<span class="hljs-number">1000</span>);</li><li>    <span class="hljs-comment">// 绘制文本</span></li><li>    paragraph.<span class="hljs-title function_">paint</span>(canvas, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode对象</span></li><li><span class="hljs-keyword">const</span> textNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRenderNode</span>()</li><li><span class="hljs-comment">// 定义newNode的像素格式</span></li><li>textNode.<span class="hljs-property">frame</span> = {</li><li>  <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">400</span>,</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">600</span></li><li>}</li><li>textNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0.2</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0.8</span> }</li><li>textNode.<span class="hljs-property">scale</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> }</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameNode</span>(uiContext)</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-property">frame</span> = {</li><li>        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">10</span>,</li><li>        <span class="hljs-attr">height</span>: <span class="hljs-number">500</span></li><li>      }</li><li>      renderNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">50</span> }</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">addNode</span>(<span class="hljs-attr">node</span>: <span class="hljs-title class_">RenderNode</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">appendChild</span>(node)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">clearNodes</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">clearChildren</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myNodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>()</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">performTask</span>(<span class="hljs-params"></span>) {</li><li>  myNodeController.<span class="hljs-title function_">clearNodes</span>()</li><li>  myNodeController.<span class="hljs-title function_">addNode</span>(textNode)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Font08</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">src</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">'app.media.startIcon'</span>)</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(myNodeController)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"Test for superscript and subscript"</span>)</li><li>          .<span class="hljs-title function_">onAppear</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-title function_">performTask</span>();</li><li>          })</li><li>      }</li><li>    }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>具体示意效果如下所示：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.5.1.3.1.1" valign="top" width="50%">样式设置（上下标）</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.5.1.3.1.2" valign="top" width="50%">示意效果</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">上标文本</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="43" originwidth="386" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114404.13270845025660829076291652786467:50001231000000:2800:9C68FE774E8947BF1BFD810F13FB14749EC00ECBB46E23C098E385E6AEB68F21.jpg" width="386" height="43"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">下标文本</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="46" originwidth="349" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114404.97057123967067662016414334925708:50001231000000:2800:21793C53C119E9BAC8E95C3736687805D0ED73581DA66BA3679E381FC321007B.jpg" width="349" height="46"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="示例五高对比度">示例五（高对比度）<i class="anchor-icon anchor-icon-link" anchorid="示例五高对比度" tips="复制节点链接"></i></h3>          <p>这里以高对比度为例，呈现高对比度文字的绘制与显示。</p>     <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">RenderNode</span>, <span class="hljs-title class_">DrawContext</span>, <span class="hljs-title class_">UIContext</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { text } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span></li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode类，并绘制文本。</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">RenderNode</span> {</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">context: DrawContext</span>) {</li><li>    <span class="hljs-keyword">let</span> canvas = context.<span class="hljs-property">canvas</span>;</li><li>
</li><li>    <span class="hljs-comment">// 开启APP的文字渲染高对比度配置</span></li><li>    text.<span class="hljs-title function_">setTextHighContrast</span>(text.<span class="hljs-property">TextHighContrast</span>.<span class="hljs-property">TEXT_APP_ENABLE_HIGH_CONTRAST</span>);</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>      <span class="hljs-attr">color</span>: {</li><li>        <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">red</span>: <span class="hljs-number">111</span>,</li><li>        <span class="hljs-attr">green</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">blue</span>: <span class="hljs-number">255</span></li><li>      },</li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">100</span>,</li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>      <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> fontCollection = text.<span class="hljs-property">FontCollection</span>.<span class="hljs-title function_">getGlobalInstance</span>();</li><li>    <span class="hljs-keyword">let</span> paragraphBuilder = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, fontCollection);</li><li>
</li><li>    <span class="hljs-comment">// 更新文本样式</span></li><li>    paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li>    <span class="hljs-comment">// 添加文本</span></li><li>    paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"Hello World"</span>);</li><li>
</li><li>    <span class="hljs-comment">// 生成段落</span></li><li>    <span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li><li>    <span class="hljs-comment">// 布局</span></li><li>    paragraph.<span class="hljs-title function_">layoutSync</span>(<span class="hljs-number">1250</span>);</li><li>    <span class="hljs-comment">// 绘制文本</span></li><li>    paragraph.<span class="hljs-title function_">paint</span>(canvas, <span class="hljs-number">10</span>, <span class="hljs-number">800</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode对象</span></li><li><span class="hljs-keyword">const</span> textNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRenderNode</span>()</li><li><span class="hljs-comment">// 定义newNode的像素格式</span></li><li>textNode.<span class="hljs-property">frame</span> = {</li><li>  <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">400</span>,</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">600</span></li><li>}</li><li>textNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0.2</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0.8</span> }</li><li>textNode.<span class="hljs-property">scale</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> }</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameNode</span>(uiContext)</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-property">frame</span> = {</li><li>        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">10</span>,</li><li>        <span class="hljs-attr">height</span>: <span class="hljs-number">500</span></li><li>      }</li><li>      renderNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0.2</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0.8</span> }</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">addNode</span>(<span class="hljs-attr">node</span>: <span class="hljs-title class_">RenderNode</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">appendChild</span>(node)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">clearNodes</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">clearChildren</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myNodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>()</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">performTask</span>(<span class="hljs-params"></span>) {</li><li>  myNodeController.<span class="hljs-title function_">clearNodes</span>()</li><li>  myNodeController.<span class="hljs-title function_">addNode</span>(textNode)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Font08</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(myNodeController)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"Test high contrast"</span>)</li><li>          .<span class="hljs-title function_">onAppear</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-title function_">performTask</span>();</li><li>            })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>具体示意效果如下所示：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.5.1.3.1.1" valign="top" width="50%">高对比度设置</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.5.1.3.1.2" valign="top" width="50%">示意效果</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">不开启高对比度</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="92" originwidth="533" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114404.37435438318518072721999254752281:50001231000000:2800:79F3FD97563CDB84A4982752E6AB7F05B760F07C4D4A88CC1B613CD4D701B855.png" width="436" height="75.25703564727955"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">开启高对比度</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="110" originwidth="536" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114404.55858946004792978913728230336974:50001231000000:2800:06245B1907227BFDFBD9A1242A7407ECCF5C7BB643207908579A74DA639A0135.png" width="436" height="89.47761194029852"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="示例六行高调整方式一">示例六（行高调整方式一）<i class="anchor-icon anchor-icon-link" anchorid="示例六行高调整方式一" tips="复制节点链接"></i></h3>          <p>这里以行高上限与行高下限设置相同值为例，呈现固定行高时的绘制表现。</p>     <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">RenderNode</span>, <span class="hljs-title class_">DrawContext</span>, <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { drawing, text, common2D } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span></li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span></li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode类，并绘制文本。</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">RenderNode</span> {</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">context: DrawContext</span>) {</li><li>    <span class="hljs-keyword">let</span> canvas = context.<span class="hljs-property">canvas</span>;</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>      <span class="hljs-attr">color</span>: {</li><li>        <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>      },</li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">50</span>,</li><li>      <span class="hljs-comment">// 设置行高上限</span></li><li>      <span class="hljs-attr">lineHeightMaximum</span>: <span class="hljs-number">65</span>,</li><li>      <span class="hljs-comment">// 设置行高下限</span></li><li>      <span class="hljs-attr">lineHeightMinimum</span>: <span class="hljs-number">65</span>,</li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>      <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> fontCollection = text.<span class="hljs-property">FontCollection</span>.<span class="hljs-title function_">getGlobalInstance</span>();</li><li>    <span class="hljs-keyword">let</span> paragraphBuilder = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, fontCollection);</li><li>
</li><li>    <span class="hljs-comment">// 设置待排版文本要应用的样式</span></li><li>    paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li>    <span class="hljs-comment">// 添加文本</span></li><li>    paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"Hello World!"</span>);</li><li>
</li><li>    <span class="hljs-comment">// 生成段落</span></li><li>    <span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li><li>    <span class="hljs-comment">// 布局</span></li><li>    paragraph.<span class="hljs-title function_">layoutSync</span>(<span class="hljs-number">1000</span>);</li><li>    <span class="hljs-comment">// 绘制文本</span></li><li>    paragraph.<span class="hljs-title function_">paint</span>(canvas, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode对象</span></li><li><span class="hljs-keyword">const</span> textNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRenderNode</span>()</li><li><span class="hljs-comment">// 定义newNode的像素格式</span></li><li>textNode.<span class="hljs-property">frame</span> = {</li><li>  <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">400</span>,</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">600</span></li><li>}</li><li>textNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0.2</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0.8</span> }</li><li>textNode.<span class="hljs-property">scale</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> }</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameNode</span>(uiContext)</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-property">frame</span> = {</li><li>        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">10</span>,</li><li>        <span class="hljs-attr">height</span>: <span class="hljs-number">500</span></li><li>      }</li><li>      renderNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">50</span> }</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">addNode</span>(<span class="hljs-attr">node</span>: <span class="hljs-title class_">RenderNode</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">appendChild</span>(node)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">clearNodes</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">clearChildren</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myNodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>()</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">performTask</span>(<span class="hljs-params"></span>) {</li><li>  myNodeController.<span class="hljs-title function_">clearNodes</span>()</li><li>  myNodeController.<span class="hljs-title function_">addNode</span>(textNode)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Font08</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">src</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">'app.media.startIcon'</span>)</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(myNodeController)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"Test for line height limit"</span>)</li><li>          .<span class="hljs-title function_">onAppear</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-title function_">performTask</span>();</li><li>          })</li><li>      }</li><li>    }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>具体效果如下所示：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.5.1.4.1.1" valign="top" width="33.33333333333333%">行高上限值</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.5.1.4.1.2" valign="top" width="33.33333333333333%">行高下限值</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.5.1.4.1.3" valign="top" width="33.33333333333333%">示意效果（黑框仅为展示文本绘制区域，实际不绘制）</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">65</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">65</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%"><span><img originheight="38" originwidth="225" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114404.59880022090380244384077659444453:50001231000000:2800:4C1D59943E4ADCFFC66747D2A8F401AF51AFC5B7ED87D9E89CFCF1423E8140C4.png" class="notEnlarge" width="225" height="38"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">200</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">200</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%"><span><img originheight="110" originwidth="223" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114404.87045760517406685064496381915493:50001231000000:2800:66E273E4B596E31D9BB7044FECC2CAD84E96B03B7215C02659FD032D4AF1EE9E.png" class="notEnlarge" width="223" height="110"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="示例七行高调整方式二">示例七（行高调整方式二）<i class="anchor-icon anchor-icon-link" anchorid="示例七行高调整方式二" tips="复制节点链接"></i></h3>          <p>这里以行高缩放且行高缩放样式FontHeight为例，呈现行高调整后文字的绘制与显示。</p>     <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">RenderNode</span>, <span class="hljs-title class_">DrawContext</span>, <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { drawing, text, common2D } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span></li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span></li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode类，并绘制文本。</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">RenderNode</span> {</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">context: DrawContext</span>) {</li><li>    <span class="hljs-keyword">let</span> canvas = context.<span class="hljs-property">canvas</span>;</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>      <span class="hljs-attr">color</span>: {</li><li>        <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>      },</li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">50</span>,</li><li>      <span class="hljs-comment">// 开启行高缩放开关</span></li><li>      <span class="hljs-attr">heightOnly</span>: <span class="hljs-literal">true</span>,</li><li>      <span class="hljs-comment">// 设置行高缩放系数</span></li><li>      <span class="hljs-attr">heightScale</span>: <span class="hljs-number">1.5</span>,</li><li>      <span class="hljs-comment">// 设置行高缩放风格</span></li><li>      <span class="hljs-attr">lineHeightStyle</span>: text.<span class="hljs-property">LineHeightStyle</span>.<span class="hljs-property">FONT_HEIGHT</span>,</li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>      <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> fontCollection = text.<span class="hljs-property">FontCollection</span>.<span class="hljs-title function_">getGlobalInstance</span>();</li><li>    <span class="hljs-keyword">let</span> paragraphBuilder = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, fontCollection);</li><li>
</li><li>    <span class="hljs-comment">// 设置待排版文本要应用的样式</span></li><li>    paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li>    <span class="hljs-comment">// 添加文本</span></li><li>    paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"Hello World!"</span>);</li><li>
</li><li>    <span class="hljs-comment">// 生成段落</span></li><li>    <span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li><li>    <span class="hljs-comment">// 布局</span></li><li>    paragraph.<span class="hljs-title function_">layoutSync</span>(<span class="hljs-number">1000</span>);</li><li>    <span class="hljs-comment">// 绘制文本</span></li><li>    paragraph.<span class="hljs-title function_">paint</span>(canvas, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode对象</span></li><li><span class="hljs-keyword">const</span> textNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRenderNode</span>()</li><li><span class="hljs-comment">// 定义newNode的像素格式</span></li><li>textNode.<span class="hljs-property">frame</span> = {</li><li>  <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">400</span>,</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">600</span></li><li>}</li><li>textNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0.2</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0.8</span> }</li><li>textNode.<span class="hljs-property">scale</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> }</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameNode</span>(uiContext)</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-property">frame</span> = {</li><li>        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">10</span>,</li><li>        <span class="hljs-attr">height</span>: <span class="hljs-number">500</span></li><li>      }</li><li>      renderNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">50</span> }</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">addNode</span>(<span class="hljs-attr">node</span>: <span class="hljs-title class_">RenderNode</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">appendChild</span>(node)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">clearNodes</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">clearChildren</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myNodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>()</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">performTask</span>(<span class="hljs-params"></span>) {</li><li>  myNodeController.<span class="hljs-title function_">clearNodes</span>()</li><li>  myNodeController.<span class="hljs-title function_">addNode</span>(textNode)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Font08</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">src</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">'app.media.startIcon'</span>)</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(myNodeController)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"Test for line height limit"</span>)</li><li>          .<span class="hljs-title function_">onAppear</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-title function_">performTask</span>();</li><li>          })</li><li>      }</li><li>    }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>具体效果如下所示：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.5.1.3.1.1" valign="top" width="50%">行高缩放样式</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.5.1.3.1.2" valign="top" width="50%">示意效果（黑框仅为展示文本绘制区域，实际不绘制）</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">FontSize</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="57" originwidth="229" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114404.25416288860853489848514658070739:50001231000000:2800:5D3F24CF0857ADDF67626094DFB80128EDA340C586BFD9495234A725CDA69F5D.png" class="notEnlarge" width="229" height="57"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">FontHeight</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="62" originwidth="229" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114404.08006592772712808535359413562459:50001231000000:2800:582B6D479D44486AC11FAE54D6F412B25546AD40178E26882E5887D06F62C045.png" class="notEnlarge" width="229" height="62"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="示例八行间距调整">示例八（行间距调整）<i class="anchor-icon anchor-icon-link" anchorid="示例八行间距调整" tips="复制节点链接"></i></h3>          <p>这里以关闭段落上升部下降部并设置行间距为例，呈现行间距增加后的文本绘制与显示。</p>     <div _ngcontent-mhe-c106="" class="highlight-div"><div _ngcontent-mhe-c106="" class="highlight-div-header"><div _ngcontent-mhe-c106="" class="highlight-div-header-left"><div _ngcontent-mhe-c106="" class="handle-button expand-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mhe-c106="" class="highlight-div-header-right"><div _ngcontent-mhe-c106="" class="handle-button ai-button"></div><div _ngcontent-mhe-c106="" class="handle-button line-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mhe-c106="" class="handle-button theme-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mhe-c106="" class="handle-button copy-button"><div _ngcontent-mhe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mhe-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">RenderNode</span>, <span class="hljs-title class_">DrawContext</span>, <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { drawing, text, common2D } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span></li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span></li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode类，并绘制文本。</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">RenderNode</span> {</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">context: DrawContext</span>) {</li><li>    <span class="hljs-keyword">let</span> canvas = context.<span class="hljs-property">canvas</span>;</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>      <span class="hljs-attr">color</span>: {</li><li>        <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>      },</li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">50</span>,</li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>      <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>      <span class="hljs-comment">// 设置行间距</span></li><li>      <span class="hljs-attr">lineSpacing</span>: <span class="hljs-number">100</span>,</li><li>      <span class="hljs-comment">// 关闭段落上升部和下降部</span></li><li>      <span class="hljs-attr">textHeightBehavior</span>: text.<span class="hljs-property">TextHeightBehavior</span>.<span class="hljs-property">DISABLE_ALL</span>,</li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">let</span> fontCollection = text.<span class="hljs-property">FontCollection</span>.<span class="hljs-title function_">getGlobalInstance</span>();</li><li>    <span class="hljs-keyword">let</span> paragraphBuilder = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, fontCollection);</li><li>
</li><li>    <span class="hljs-comment">// 设置待排版文本要应用的样式</span></li><li>    paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li>    <span class="hljs-comment">// 添加文本</span></li><li>    paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"Hello World!"</span>);</li><li>
</li><li>    <span class="hljs-comment">// 生成段落</span></li><li>    <span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li><li>    <span class="hljs-comment">// 布局</span></li><li>    paragraph.<span class="hljs-title function_">layoutSync</span>(<span class="hljs-number">200</span>);</li><li>    <span class="hljs-comment">// 绘制文本</span></li><li>    paragraph.<span class="hljs-title function_">paint</span>(canvas, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode对象</span></li><li><span class="hljs-keyword">const</span> textNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRenderNode</span>()</li><li><span class="hljs-comment">// 定义newNode的像素格式</span></li><li>textNode.<span class="hljs-property">frame</span> = {</li><li>  <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">400</span>,</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">600</span></li><li>}</li><li>textNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0.2</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0.8</span> }</li><li>textNode.<span class="hljs-property">scale</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> }</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameNode</span>(uiContext)</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-property">frame</span> = {</li><li>        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">10</span>,</li><li>        <span class="hljs-attr">height</span>: <span class="hljs-number">500</span></li><li>      }</li><li>      renderNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">50</span> }</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">addNode</span>(<span class="hljs-attr">node</span>: <span class="hljs-title class_">RenderNode</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">appendChild</span>(node)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">clearNodes</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">clearChildren</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myNodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>()</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">performTask</span>(<span class="hljs-params"></span>) {</li><li>  myNodeController.<span class="hljs-title function_">clearNodes</span>()</li><li>  myNodeController.<span class="hljs-title function_">addNode</span>(textNode)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Font08</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">src</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">'app.media.startIcon'</span>)</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(myNodeController)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"Test for lineSpacing and height behavior"</span>)</li><li>          .<span class="hljs-title function_">onAppear</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-title function_">performTask</span>();</li><li>          })</li><li>      }</li><li>    }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>具体效果如下所示：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.5.1.3.1.1" valign="top" width="50%">上升部下降部开关</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.5.1.3.1.2" valign="top" width="50%">示意效果（黑框仅为展示文本绘制区域，实际不绘制）</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">DISABLE_ALL</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="146" originwidth="115" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114404.66327807401842819181083190964836:50001231000000:2800:111C8085D696A6587A4AEA1190D1B539346F4A04EC5EC58BCAD018B05D7B1AF8.png" class="notEnlarge" width="115" height="146"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">ALL</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="223" originwidth="114" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114404.75416855230140670114891456363012:50001231000000:2800:33D38C6DA383ED10DE0159960C67E7B8C7629D708C1A6B1326DC74D4AA45ECB0.png" class="notEnlarge" width="114" height="223"></span></td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>