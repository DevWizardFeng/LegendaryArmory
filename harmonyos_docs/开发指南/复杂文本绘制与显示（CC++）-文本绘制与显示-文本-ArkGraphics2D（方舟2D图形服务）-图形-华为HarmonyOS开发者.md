<h1 _ngcontent-qta-c119="" class="doc-title ng-star-inserted" title="复杂文本绘制与显示（C/C++）"> 复杂文本绘制与显示（C/C++） </h1>

<div _ngcontent-qta-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>在进行文本绘制时，可以通过选择合适的字体、大小和颜色完成简单文本的绘制与显示；此外，还支持通过设置其他丰富的样式、语言、段落等进行复杂文本的绘制。</p>    <p>复杂文本绘制主要包含以下几个场景：</p>    <ul>     <li>      <p>多语言文本绘制与显示</p></li>     <li>      <p>多行文本绘制与显示</p></li>     <li>      <p>多样式文本绘制与显示</p></li>     <li>      <p>样式的拷贝、绘制与显示</p></li>    </ul>    <div class="tiledSection">     <h2 id="多语言文本绘制与显示">多语言文本绘制与显示<i class="anchor-icon anchor-icon-link" anchorid="多语言文本绘制与显示" tips="复制节点链接"></i></h2>          <p>多语言支持是全球化应用的基础。多语言文本绘制需要支持不同语言的字符集及其独特的显示需求，例如右到左语言（如阿拉伯语）或竖排文本（如中文）。开发者需要理解不同语言的渲染特性，确保文本的正确显示。</p>     <p>在多语言文本使用的场景下，主要通过指定TextStyle文本样式中的<strong>locale</strong>字段来实现，可直接通过locale字段的值优先匹配对应字体，跳过遍历列表匹配字体的过程，从而降低匹配时间和内存使用。</p>    </div>    <div class="tiledSection">     <h3 id="接口说明" class="firsth2">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_SetTypographyTextLocale(OH_Drawing_TypographyStyle* style, const char* locale)</td>         <td class="cellrowborder" valign="top" width="50%">设置指定排版样式的语言环境。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h3>          <p>画布Canvas对象具体可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/canvas-get-result-draw-c">画布的获取与绘制结果的显示</a>。</p>     <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建一个 TypographyStyle，创建 TypographyCreate 时需要使用</span></li><li>OH_Drawing_TypographyStyle *typoStyle = <span class="hljs-built_in">OH_Drawing_CreateTypographyStyle</span>();</li><li><span class="hljs-comment">// 设置文本对齐方式为居中</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextAlign</span>(typoStyle, TEXT_ALIGN_CENTER);</li><li><span class="hljs-comment">// 设置 locale 为中文</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextLocale</span>(typoStyle, <span class="hljs-string">"zh-Hans"</span>);</li><li>
</li><li><span class="hljs-comment">// 设置文字颜色、大小、字重，不设置 TextStyle 会使用 TypographyStyle 中的默认 TextStyle</span></li><li>OH_Drawing_TextStyle *txtStyle = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleColor</span>(txtStyle, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyle, <span class="hljs-number">100</span>);</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontWeight</span>(txtStyle, FONT_WEIGHT_400);</li><li>
</li><li><span class="hljs-comment">// 创建 FontCollection，FontCollection 用于管理字体匹配逻辑</span></li><li>OH_Drawing_FontCollection *fc = <span class="hljs-built_in">OH_Drawing_CreateSharedFontCollection</span>();</li><li><span class="hljs-comment">// 使用 FontCollection 和 之前创建的 TypographyStyle 创建 TypographyCreate。TypographyCreate 用于创建 Typography</span></li><li>OH_Drawing_TypographyCreate *handler = <span class="hljs-built_in">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li>
</li><li><span class="hljs-comment">// 将之前创建的 TextStyle 加入 handler 中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyle);</li><li><span class="hljs-comment">// 设置文本内容，并将文本添加到 handler 中</span></li><li><span class="hljs-type">const</span> <span class="hljs-type">char</span> *text = <span class="hljs-string">"你好，中文\n"</span>;</li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li>
</li><li><span class="hljs-comment">// 通过 handler 创建一个 Typography</span></li><li>OH_Drawing_Typography *typography = <span class="hljs-built_in">OH_Drawing_CreateTypography</span>(handler);</li><li><span class="hljs-comment">// 设置排版宽度</span></li><li><span class="hljs-type">double</span> layoutWidth = <span class="hljs-number">1310</span>;</li><li><span class="hljs-built_in">OH_Drawing_TypographyLayout</span>(typography, layoutWidth);</li><li><span class="hljs-comment">// 设置文本在画布上绘制的起始位置</span></li><li><span class="hljs-type">double</span> position[<span class="hljs-number">2</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">1140</span>};</li><li><span class="hljs-comment">// 将文本绘制到画布上</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyPaint</span>(typography, canvas, position[<span class="hljs-number">0</span>], position[<span class="hljs-number">1</span>]);</li><li>
</li><li><span class="hljs-comment">// 释放内存</span></li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyStyle</span>(typoStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyFontCollection</span>(fc);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyHandler</span>(handler);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypography</span>(typography);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="效果展示">效果展示<i class="anchor-icon anchor-icon-link" anchorid="效果展示" tips="复制节点链接"></i></h3>          <p><span><img originheight="182" originwidth="273" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.53132914873706179046138526086028:50001231000000:2800:EC7C82C3475E3EE88B1254579820A338487F93DE334C7C02A8D6E262FBD43E38.png" class="notEnlarge" width="273" height="182"></span></p>    </div>    <div class="tiledSection">     <h2 id="多行文本绘制与显示">多行文本绘制与显示<i class="anchor-icon anchor-icon-link" anchorid="多行文本绘制与显示" tips="复制节点链接"></i></h2>          <p>多行文本相对于单行文本比较复杂，一般针对多行文本，需要进行文本排版、断词策略设置、文本对齐方式、最大行数限制等，主要通过设置段落样式实现。</p>    </div>    <div class="tiledSection">     <h3 id="接口说明-1" class="firsth2">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明-1" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.2.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_SetTypographyTextAlign(OH_Drawing_TypographyStyle* style, int align)</td>         <td class="cellrowborder" valign="top" width="50%">设置文本对齐方式。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_SetTypographyTextWordBreakType(OH_Drawing_TypographyStyle* style, int wordBreakType)</td>         <td class="cellrowborder" valign="top" width="50%">设置单词的断词方式。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_SetTypographyTextMaxLines(OH_Drawing_TypographyStyle* style, int lineNumber)</td>         <td class="cellrowborder" valign="top" width="50%">设置文本最大行数。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="开发步骤-1">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤-1" tips="复制节点链接"></i></h3>          <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 设置排版宽度</span></li><li><span class="hljs-type">double</span> layoutWidth = <span class="hljs-number">800</span>;</li><li><span class="hljs-comment">// 创建 FontCollection，FontCollection 用于管理字体匹配逻辑</span></li><li>OH_Drawing_FontCollection *fc = <span class="hljs-built_in">OH_Drawing_CreateSharedFontCollection</span>();</li><li>
</li><li><span class="hljs-comment">// 设置文字颜色、大小、字重，不设置 TextStyle 会使用 TypographyStyle 中的默认 TextStyle</span></li><li>OH_Drawing_TextStyle *txtStyle = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleColor</span>(txtStyle, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyle, <span class="hljs-number">50</span>);</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontWeight</span>(txtStyle, FONT_WEIGHT_400);</li><li><span class="hljs-comment">// 当断词策略为WORD_BREAK_TYPE_BREAK_HYPHEN时，需要为段落设置语言偏好，段落会在不同语言偏好下呈现不同的文本断词效果</span></li><li><span class="hljs-comment">// OH_Drawing_SetTextStyleLocale(txtStyle, "en-gb");</span></li><li>
</li><li><span class="hljs-comment">// 设置文本内容</span></li><li><span class="hljs-type">const</span> <span class="hljs-type">char</span> *text =</li><li>    <span class="hljs-string">"Nunc quis augue viverra, venenatis arcu eu, gravida odio. Integer posuere nisi quis ex pretium, a dapibus "</span></li><li>    <span class="hljs-string">"nisl gravida. Mauris lacinia accumsan enim, non tempus ligula. Mauris iaculis dui eu nisi tristique, in porta "</span></li><li>    <span class="hljs-string">"urna varius. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Mauris "</span></li><li>    <span class="hljs-string">"congue nibh mi, vel ultrices ex volutpat et. Aliquam consectetur odio in libero tristique, a mattis ex "</span></li><li>    <span class="hljs-string">"mollis. Praesent et nisl iaculis, facilisis metus nec, faucibus lacus. Duis nec dolor at nibh eleifend "</span></li><li>    <span class="hljs-string">"tempus. Nunc et enim interdum, commodo eros ac, pretium sapien. Pellentesque laoreet orci a nunc pharetra "</span></li><li>    <span class="hljs-string">"pharetra."</span>;</li><li>
</li><li>
</li><li><span class="hljs-comment">// 创建一个断词策略为 BREAK_ALL 的 TypographyStyle</span></li><li>OH_Drawing_TypographyStyle *typoStyle = <span class="hljs-built_in">OH_Drawing_CreateTypographyStyle</span>();</li><li><span class="hljs-comment">// 设置文本对齐方式为居中</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextAlign</span>(typoStyle, TEXT_ALIGN_CENTER);</li><li><span class="hljs-comment">// 设置断词策略为 WORD_BREAK_TYPE_BREAK_ALL</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextWordBreakType</span>(typoStyle, WORD_BREAK_TYPE_BREAK_ALL);</li><li><span class="hljs-comment">// 设置最大行数为 10，行数大于 10 的部分不显示</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextMaxLines</span>(typoStyle, <span class="hljs-number">10</span>);</li><li>
</li><li><span class="hljs-comment">// 使用之前创建的 FontCollection 和 TypographyStyle 创建 TypographyCreate。TypographyCreate 用于创建 Typography</span></li><li>OH_Drawing_TypographyCreate *handler = <span class="hljs-built_in">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li><span class="hljs-comment">// 将之前创建的 TextStyle 加入 handler</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyle);</li><li><span class="hljs-comment">// 将文本添加到 handler 中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li>
</li><li>OH_Drawing_Typography *typography = <span class="hljs-built_in">OH_Drawing_CreateTypography</span>(handler);</li><li><span class="hljs-built_in">OH_Drawing_TypographyLayout</span>(typography, layoutWidth);</li><li><span class="hljs-comment">// 设置文本在画布上绘制的起始位置</span></li><li><span class="hljs-type">double</span> positionBreakAll[<span class="hljs-number">2</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">0</span>};</li><li><span class="hljs-comment">// 将文本绘制到画布上</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyPaint</span>(typography, canvas, positionBreakAll[<span class="hljs-number">0</span>], positionBreakAll[<span class="hljs-number">1</span>]);</li><li>
</li><li><span class="hljs-comment">// 创建一个断词策略为 BREAK_WORD 的 TypographyStyle</span></li><li><span class="hljs-comment">// OH_Drawing_TypographyStyle *typoStyle = OH_Drawing_CreateTypographyStyle();</span></li><li><span class="hljs-comment">// OH_Drawing_SetTypographyTextAlign(typoStyle, TEXT_ALIGN_CENTER);</span></li><li><span class="hljs-comment">// OH_Drawing_SetTypographyTextWordBreakType(typoStyle, WORD_BREAK_TYPE_BREAK_WORD);</span></li><li><span class="hljs-comment">// OH_Drawing_TypographyCreate *handler = OH_Drawing_CreateTypographyHandler(typoStyle, fc);</span></li><li><span class="hljs-comment">// OH_Drawing_TypographyHandlerPushTextStyle(handler, txtStyle);</span></li><li><span class="hljs-comment">// OH_Drawing_TypographyHandlerAddText(handler, text);</span></li><li><span class="hljs-comment">// OH_Drawing_Typography *typography = OH_Drawing_CreateTypography(handler);</span></li><li><span class="hljs-comment">// OH_Drawing_TypographyLayout(typography, layoutWidth);</span></li><li><span class="hljs-comment">// double positionBreakWord[2] = {0, 100};</span></li><li><span class="hljs-comment">// OH_Drawing_TypographyPaint(typography, canvas, positionBreakWord[0], positionBreakWord[1]);</span></li><li>
</li><li><span class="hljs-comment">// 创建一个断词策略为 BREAK_HYPHEN 的 TypographyStyle</span></li><li><span class="hljs-comment">// OH_Drawing_TypographyStyle *typoStyle = OH_Drawing_CreateTypographyStyle();</span></li><li><span class="hljs-comment">// OH_Drawing_SetTypographyTextStyle(typoStyle, txtStyle);</span></li><li><span class="hljs-comment">// OH_Drawing_SetTypographyTextAlign(typoStyle, TEXT_ALIGN_LEFT);</span></li><li><span class="hljs-comment">// OH_Drawing_SetTypographyTextWordBreakType(typoStyle, WORD_BREAK_TYPE_BREAK_HYPHEN);</span></li><li><span class="hljs-comment">// OH_Drawing_TypographyCreate *handler = OH_Drawing_CreateTypographyHandler(typoStyle, fc);</span></li><li><span class="hljs-comment">// OH_Drawing_TypographyHandlerPushTextStyle(handler, txtStyle);</span></li><li><span class="hljs-comment">// OH_Drawing_TypographyHandlerAddText(handler, text);</span></li><li><span class="hljs-comment">// OH_Drawing_Typography *typography = OH_Drawing_CreateTypography(handler);</span></li><li><span class="hljs-comment">// OH_Drawing_TypographyLayout(typography, layoutWidth);</span></li><li><span class="hljs-comment">// double positionBreakWord[2] = {0, 100};</span></li><li><span class="hljs-comment">// OH_Drawing_TypographyPaint(typography, canvas, positionBreakWord[0], positionBreakWord[1]);</span></li><li>
</li><li><span class="hljs-comment">// 释放内存</span></li><li><span class="hljs-built_in">OH_Drawing_DestroyFontCollection</span>(fc);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyStyle</span>(typoStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyHandler</span>(handler);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypography</span>(typography);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="效果展示-1">效果展示<i class="anchor-icon anchor-icon-link" anchorid="效果展示-1" tips="复制节点链接"></i></h3>          <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.2.1.3.1.1" valign="top" width="50%">BREAK_ALL</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.2.1.3.1.2" valign="top" width="50%">BREAK_WORD</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="164" originwidth="334" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.29004194922080884947902901569333:50001231000000:2800:8B1514CA637EC39922DD732545BD503B41C8AB3EAEE86D294A078F6537BBB8D1.jpg" width="334" height="164"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="322" originwidth="334" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.27857634494629636813482727180004:50001231000000:2800:3798E4577F5D3BDA206FC5291454E566DCC89185A1FEB2D89063713EF0001508.jpg" width="334" height="322"></span></td>        </tr>             </tbody></table></div>     </div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.3.1.4.1.1" valign="top" width="33.33333333333333%">BREAK_HYPHEN（locale：未设置）</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.3.1.4.1.2" valign="top" width="33.33333333333333%">BREAK_HYPHEN（locale：en-gb）</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.3.1.4.1.3" valign="top" width="33.33333333333333%">BREAK_HYPHEN（locale：en-us）</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%"><span><img originheight="342" originwidth="334" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.74319647814074229450734851587827:50001231000000:2800:9C77FBD908261E010AE22A7E9BE5984F77FBCA5DD49F539A0E43935BDCAAD28B.jpg" width="282.66666666666663" height="289.437125748503"></span></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%"><span><img originheight="325" originwidth="333" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.90774809273346498269673096998954:50001231000000:2800:49EC8922C7F04AA4F362FD18C2D51EC4E5BEDEAAA5FA190A5074480D0D133CC9.jpg" width="282.66666666666663" height="275.8758758758758"></span></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%"><span><img originheight="323" originwidth="333" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.92969958011183556799960279968745:50001231000000:2800:E23A6C9A608D15C9DAEF64F93DF82AD1991DF83168E689565622042BA0CB524D.jpg" width="282.66666666666663" height="274.17817817817814"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="多样式文本绘制与显示">多样式文本绘制与显示<i class="anchor-icon anchor-icon-link" anchorid="多样式文本绘制与显示" tips="复制节点链接"></i></h2>          <p>除基本文字、排版属性之外，针对应用中不同文本的设计，开发者可能需要设置使用不同的绘制样式或能力，以凸显对应文本的独特表现或风格，此时可以结合使用多种绘制样式进行文本的渲染。</p>     <p>当前支持的多样式绘制及各绘制样式侧重效果如下：</p>     <ul>      <li>       <p><strong>装饰线样式绘制：</strong> 主要通过不同的线条样式对文本进行装饰，可以使文本更加突出，富有表现力。</p></li>      <li>       <p><strong>字体特性绘制：</strong> 主要通过字体的变化，包括粗细、斜体等特性来改变文本的外观，增强文本的可读性和美观性。</p></li>      <li>       <p><strong>可变字体绘制：</strong> 对应提供文本在不同的显示环境和设备上灵活调整的能力，可满足更为精细的视觉效果。</p></li>      <li>       <p><strong>文本阴影绘制：</strong> 主要通过在文本周围添加阴影效果，以提升文本的层次感和立体感，从而使文本更具吸引力。</p></li>      <li>       <p><strong>占位符绘制：</strong> 可以在不确定文本内容时保持文本布局的稳定性，使得文本显示更为流畅和自然。</p></li>      <li>       <p><strong>自动间距绘制：</strong> 可以在一些字符混排切换的地方自动添加额外间距，提升阅读体验。</p></li>      <li>       <p><strong>渐变色绘制：</strong> 可以为文字提供颜色渐变效果，增强文字表现力。</p></li>      <li>       <p><strong>垂直对齐：</strong> 调整文本在垂直方向排版位置，提升排版质量。</p></li>      <li>       <p><strong>上下标：</strong> 可以将任意字符处理成上标或下标，更精准表达文本含义。</p></li>      <li>       <p><strong>高对比度文字绘制：</strong> 主要通过将深色文字变黑、浅色文字变白，增强文本的对比效果。</p></li>      <li>       <p><strong>行高调整：</strong> 调整行高可改变文本行的垂直间距，使行间距更松散或更紧凑，显著改善文本垂直截断问题，提高可读性。</p></li>      <li>       <p><strong>行间距调整：</strong> 通过调整行间距的方式可以实现行高调整一样的效果，优化阅读体验。</p></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="装饰线" class="firsth2">装饰线<i class="anchor-icon anchor-icon-link" anchorid="装饰线" tips="复制节点链接"></i></h3>          <p><strong>装饰线</strong>是指在文本上方、下方或中间添加的装饰性线条，当前支持上划线、下划线、删除线。</p>     <p>可以通过添加文本装饰线，提升文本的视觉效果和可读性。</p>     <p>使用装饰线需要初始化装饰线样式对象，并添加到文本样式中，从而在文本绘制时生效。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_SetTextStyleDecoration(OH_Drawing_TextStyle* style, int decoration)</td>         <td class="cellrowborder" valign="top" width="50%">设置指定文本样式中的装饰线类型，只能设置一个装饰线类型，添加多个需要使用OH_Drawing_AddTextStyleDecoration。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_SetTextStyleDecorationStyle(OH_Drawing_TextStyle* style, int decorationStyle)</td>         <td class="cellrowborder" valign="top" width="50%">设置指定文本样式中的装饰线样式。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_SetTextStyleDecorationColor(OH_Drawing_TextStyle* style, uint32_t color)</td>         <td class="cellrowborder" valign="top" width="50%">设置指定文本样式中的装饰线颜色。</td>        </tr>             </tbody></table></div>     </div>     <p>示例及示意效果如下所示：</p>     <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建一个TypographyStyle创建Typography时需要使用</span></li><li>OH_Drawing_TypographyStyle *typoStyle = <span class="hljs-built_in">OH_Drawing_CreateTypographyStyle</span>();</li><li><span class="hljs-comment">// 设置文本对齐方式为居中</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextAlign</span>(typoStyle, TEXT_ALIGN_CENTER);</li><li><span class="hljs-comment">// 设置文本内容</span></li><li><span class="hljs-type">const</span> <span class="hljs-type">char</span> *text = <span class="hljs-string">"Hello World Drawing\n"</span>;</li><li>
</li><li><span class="hljs-comment">// 设置文字颜色、大小、字重，不设置 TextStyle 会使用 TypographyStyle 中的默认 TextStyle</span></li><li>OH_Drawing_TextStyle *txtStyleWithDeco = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleColor</span>(txtStyleWithDeco, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyleWithDeco, <span class="hljs-number">100</span>);</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontWeight</span>(txtStyleWithDeco, FONT_WEIGHT_400);</li><li><span class="hljs-comment">// 设置装饰线为 LINE_THROUGH</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleDecoration</span>(txtStyleWithDeco, TEXT_DECORATION_LINE_THROUGH);</li><li><span class="hljs-comment">// 设置装饰线样式为 WAVY</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleDecorationStyle</span>(txtStyleWithDeco, TEXT_DECORATION_STYLE_WAVY);</li><li><span class="hljs-comment">// 设置装饰线颜色</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleDecorationColor</span>(txtStyleWithDeco, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x6F</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>));</li><li>
</li><li><span class="hljs-comment">// 创建一个不带装饰线的 TextStyle 用于对比</span></li><li>OH_Drawing_TextStyle *txtStyleNoDeco = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-comment">// 设置文字颜色、大小、字重，不设置 TextStyle 会使用 TypographyStyle 中的默认 TextStyle</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleColor</span>(txtStyleNoDeco, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyleNoDeco, <span class="hljs-number">100</span>);</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontWeight</span>(txtStyleNoDeco, FONT_WEIGHT_400);</li><li>
</li><li><span class="hljs-comment">// 创建 FontCollection，FontCollection 用于管理字体匹配逻辑</span></li><li>OH_Drawing_FontCollection *fc = <span class="hljs-built_in">OH_Drawing_CreateSharedFontCollection</span>();</li><li><span class="hljs-comment">// 使用 FontCollection 和 之前创建的 TypographyStyle 创建 TypographyCreate。TypographyCreate 用于创建 Typography</span></li><li>OH_Drawing_TypographyCreate *handler = <span class="hljs-built_in">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li>
</li><li><span class="hljs-comment">// 加入带有装饰线的文本样式</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyleWithDeco);</li><li><span class="hljs-comment">// 将文本添加到 handler 中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li>
</li><li><span class="hljs-comment">// 后续加入的不带装饰线的文本样式</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyleNoDeco);</li><li><span class="hljs-comment">// 将文本添加到 handler 中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li>
</li><li>OH_Drawing_Typography *typography = <span class="hljs-built_in">OH_Drawing_CreateTypography</span>(handler);</li><li><span class="hljs-comment">// 设置排版宽度</span></li><li><span class="hljs-type">double</span> layoutWidth = <span class="hljs-number">1310</span>;</li><li><span class="hljs-built_in">OH_Drawing_TypographyLayout</span>(typography, layoutWidth);</li><li><span class="hljs-comment">// 设置文本在画布上绘制的起始位置</span></li><li><span class="hljs-type">double</span> position[<span class="hljs-number">2</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">1140</span>};</li><li><span class="hljs-comment">// 将文本绘制到画布上</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyPaint</span>(typography, canvas, position[<span class="hljs-number">0</span>], position[<span class="hljs-number">1</span>]);</li><li>
</li><li><span class="hljs-comment">// 释放内存</span></li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyStyle</span>(typoStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyleWithDeco);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyleNoDeco);</li><li><span class="hljs-built_in">OH_Drawing_DestroyFontCollection</span>(fc);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyHandler</span>(handler);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypography</span>(typography);</li></ol></pre></div></div>     <p><span><img originheight="183" originwidth="291" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.03032044560277954544627737487943:50001231000000:2800:94058B17AE506C8D31BD16297C4C4769010A8B2435ACBFFEC23E0C7AE6F68411.png" class="notEnlarge" width="291" height="183"></span></p>    </div>    <div class="tiledSection">     <h3 id="字体特征">字体特征<i class="anchor-icon anchor-icon-link" anchorid="字体特征" tips="复制节点链接"></i></h3>          <p><strong>字体特征</strong>绘制专注于在文本渲染过程中对字体特性（如粗体、斜体、字体变种等）的处理，允许字体在不同的排版场景下表现出不同的效果，可用于增强文本的表现力，使其更符合设计和阅读需求。</p>     <p>常见的<strong>FontFeature</strong>包含有liga、frac、case等，需要对应的ttf文件支持才能正常使能。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_TextStyleAddFontFeature(OH_Drawing_TextStyle* style, const char* tag, int value)</td>         <td class="cellrowborder" valign="top" width="50%">设置文本样式中指定字体特征是否启用。</td>        </tr>             </tbody></table></div>     </div>     <p>示例及示意效果如下所示：</p>     <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建一个 TypographyStyle，创建 TypographyCreate 时需要使用</span></li><li>OH_Drawing_TypographyStyle *typoStyle = <span class="hljs-built_in">OH_Drawing_CreateTypographyStyle</span>();</li><li><span class="hljs-comment">// 设置文本对齐方式为居中</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextAlign</span>(typoStyle, TEXT_ALIGN_CENTER);</li><li><span class="hljs-comment">// 设置文本内容</span></li><li><span class="hljs-type">const</span> <span class="hljs-type">char</span> *text = <span class="hljs-string">"1/2 1/3 1/4\n"</span>;</li><li>
</li><li><span class="hljs-comment">// 设置文字颜色、大小、字重，不设置TextStyle无法绘制出文本</span></li><li>OH_Drawing_TextStyle *txtStyleWithFeature = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleColor</span>(txtStyleWithFeature, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyleWithFeature, <span class="hljs-number">100</span>);</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontWeight</span>(txtStyleWithFeature, FONT_WEIGHT_900);</li><li><span class="hljs-comment">// 设置启用frac font feature，此功能将斜线分隔的数字替换为普通（对角线）分数。</span></li><li><span class="hljs-built_in">OH_Drawing_TextStyleAddFontFeature</span>(txtStyleWithFeature, <span class="hljs-string">"frac"</span>, <span class="hljs-number">1</span>);</li><li>
</li><li><span class="hljs-comment">// 创建一个不带字体特征的 TextStyle 用于对比</span></li><li>OH_Drawing_TextStyle *txtStyleNoFeature = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-comment">// 设置文字颜色、大小、字重。不设置 TextStyle 无法绘制出文本</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleColor</span>(txtStyleNoFeature, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyleNoFeature, <span class="hljs-number">100</span>);</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontWeight</span>(txtStyleNoFeature, FONT_WEIGHT_900);</li><li>
</li><li><span class="hljs-comment">// 创建 FontCollection，FontCollection 用于管理字体匹配逻辑</span></li><li>OH_Drawing_FontCollection *fc = <span class="hljs-built_in">OH_Drawing_CreateSharedFontCollection</span>();</li><li><span class="hljs-comment">// 使用 FontCollection 和 之前创建的 TypographyStyle 创建 TypographyCreate。TypographyCreate 用于创建 Typography</span></li><li>OH_Drawing_TypographyCreate *handler = <span class="hljs-built_in">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li>
</li><li><span class="hljs-comment">// 加入带有字体特征的文本样式</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyleWithFeature);</li><li><span class="hljs-comment">// 将文本添加到 handler 中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li><span class="hljs-comment">// 弹出之前创建的 TextStyle</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPopTextStyle</span>(handler);</li><li>
</li><li><span class="hljs-comment">// 后续加入的不带字体特征的文本样式</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyleNoFeature);</li><li><span class="hljs-comment">// 将文本添加到 handler 中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li><span class="hljs-comment">// 弹出之前创建的 TextStyle</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPopTextStyle</span>(handler);</li><li>
</li><li>OH_Drawing_Typography *typography = <span class="hljs-built_in">OH_Drawing_CreateTypography</span>(handler);</li><li><span class="hljs-comment">// 设置排版宽度</span></li><li><span class="hljs-type">double</span> layoutWidth = <span class="hljs-number">1310</span>;</li><li><span class="hljs-built_in">OH_Drawing_TypographyLayout</span>(typography, layoutWidth);</li><li><span class="hljs-comment">// 设置文本在画布上绘制的起始位置</span></li><li><span class="hljs-type">double</span> position[<span class="hljs-number">2</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">1140</span>};</li><li><span class="hljs-comment">// 将文本绘制到画布上</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyPaint</span>(typography, canvas, position[<span class="hljs-number">0</span>], position[<span class="hljs-number">1</span>]);</li><li>
</li><li><span class="hljs-comment">// 释放内存</span></li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyStyle</span>(typoStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyleWithFeature);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyleNoFeature);</li><li><span class="hljs-built_in">OH_Drawing_DestroyFontCollection</span>(fc);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyHandler</span>(handler);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypography</span>(typography);</li></ol></pre></div></div>     <p><span><img originheight="241" originwidth="470" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.41665181079099055124642483992021:50001231000000:2800:B74EC692D56AB673988E12FB2693A59EE2BF2BE0A6CBE02541E2056CCAC63B47.png" width="470" height="241"></span></p>    </div>    <div class="tiledSection">     <h3 id="可变字体">可变字体<i class="anchor-icon anchor-icon-link" anchorid="可变字体" tips="复制节点链接"></i></h3>          <p><strong>可变字体</strong>是一种在一个字体文件中包含多个字形变体的字体格式，允许在一个字体文件内灵活地调整字体的各种属性（如字重、字宽、斜体等）。</p>     <p>与传统字体文件（每种变体需要一个独立的文件）不同，可变字体在一个字体文件中包含多个变体轴，可通过使用可变字体实现文本渲染绘制时的平滑过渡。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.4.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.4.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_TextStyleAddFontVariation(OH_Drawing_TextStyle* style, const char* axis, const float value)</td>         <td class="cellrowborder" valign="top" width="50%">添加可变字体属性。对应的字体文件（.ttf文件）需要支持可变调节，此接口才能生效。当对应的字体不支持可变调节时，此接口调用不生效。</td>        </tr>             </tbody></table></div>     </div>     <p>示例及示意效果如下所示：</p>     <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建一个 TypographyStyle 创建 Typography 时需要使用</span></li><li>OH_Drawing_TypographyStyle *typoStyle = <span class="hljs-built_in">OH_Drawing_CreateTypographyStyle</span>();</li><li><span class="hljs-comment">// 设置文本对齐方式为居中</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextAlign</span>(typoStyle, TEXT_ALIGN_CENTER);</li><li><span class="hljs-comment">// 设置文字内容</span></li><li><span class="hljs-type">const</span> <span class="hljs-type">char</span> *text = <span class="hljs-string">"Hello World Drawing\n"</span>;</li><li>
</li><li>OH_Drawing_TextStyle *txtStyleWithVar = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-comment">// 设置可变字体的字重，在字体文件支持的情况下，还可以设置"slnt", "wdth"</span></li><li><span class="hljs-built_in">OH_Drawing_TextStyleAddFontVariation</span>(txtStyleWithVar, <span class="hljs-string">"wght"</span>, <span class="hljs-number">800</span>);</li><li><span class="hljs-comment">// 设置文字颜色、大小、字重，不设置 TextStyle 会使用 TypographyStyle 中的默认 TextStyle</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleColor</span>(txtStyleWithVar, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyleWithVar, <span class="hljs-number">100</span>);</li><li><span class="hljs-comment">// 此处设置字重不生效，将被可变字体的字重覆盖</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontWeight</span>(txtStyleWithVar, FONT_WEIGHT_400);</li><li>
</li><li><span class="hljs-comment">// 创建一个不带可变字体的 TextStyle 用于对比</span></li><li>OH_Drawing_TextStyle *txtStyleNoVar = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-comment">// 设置文字颜色、大小、字重，不设置 TextStyle 会使用 TypographyStyle 中的默认 TextStyle</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleColor</span>(txtStyleNoVar, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyleNoVar, <span class="hljs-number">100</span>);</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontWeight</span>(txtStyleNoVar, FONT_WEIGHT_400);</li><li>
</li><li><span class="hljs-comment">// 创建 FontCollection，FontCollection 用于管理字体匹配逻辑</span></li><li>OH_Drawing_FontCollection *fc = <span class="hljs-built_in">OH_Drawing_CreateSharedFontCollection</span>();</li><li><span class="hljs-comment">// 使用 FontCollection 和 之前创建的 TypographyStyle 创建 TypographyCreate。TypographyCreate 用于创建 Typography</span></li><li>OH_Drawing_TypographyCreate *handler = <span class="hljs-built_in">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li>
</li><li><span class="hljs-comment">// 加入带有可变字体的文本样式</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyleWithVar);</li><li><span class="hljs-comment">// 将文本添加到 handler 中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li><span class="hljs-comment">// 弹出之前创建的 TextStyle</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPopTextStyle</span>(handler);</li><li>
</li><li><span class="hljs-comment">// 后续加入的不带可变字体的文本样式</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyleNoVar);</li><li><span class="hljs-comment">// 将文本添加到 handler 中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li><span class="hljs-comment">// 弹出之前创建的 TextStyle</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPopTextStyle</span>(handler);</li><li>
</li><li>OH_Drawing_Typography *typography = <span class="hljs-built_in">OH_Drawing_CreateTypography</span>(handler);</li><li><span class="hljs-comment">// 设置排版宽度</span></li><li><span class="hljs-type">double</span> layoutWidth = <span class="hljs-number">1310</span>;</li><li><span class="hljs-built_in">OH_Drawing_TypographyLayout</span>(typography, layoutWidth);</li><li><span class="hljs-comment">// 设置文本在画布上绘制的起始位置</span></li><li><span class="hljs-type">double</span> position[<span class="hljs-number">2</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">1140</span>};</li><li><span class="hljs-comment">// 将文本绘制到画布上</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyPaint</span>(typography, canvas, position[<span class="hljs-number">0</span>], position[<span class="hljs-number">1</span>]);</li><li>
</li><li><span class="hljs-comment">// 释放内存</span></li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyStyle</span>(typoStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyleWithVar);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyleNoVar);</li><li><span class="hljs-built_in">OH_Drawing_DestroyFontCollection</span>(fc);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyHandler</span>(handler);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypography</span>(typography);</li></ol></pre></div></div>     <p><span><img originheight="259" originwidth="498" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.46570502977130225315233397407839:50001231000000:2800:56D650CABB7689393D5F4E58127D2DBD0FB9DAF4062E13BABE50BDE839EE1DBE.png" width="498" height="259"></span></p>    </div>    <div class="tiledSection">     <h3 id="文本阴影">文本阴影<i class="anchor-icon anchor-icon-link" anchorid="文本阴影" tips="复制节点链接"></i></h3>          <p><strong>文本阴影</strong>为文本提供了深度感，使得文本在背景上更具立体感。通常用于提升文本的视觉吸引力或增强可读性，尤其是在色彩对比度较低的场景下。</p>     <p>其中，TextShadow有三个属性，分别为阴影颜色color、阴影基于当前文本的偏移位置point、阴影半径blurRadius。</p>     <p>使用阴影效果需要在文本样式中设置对应的阴影效果数组，从而在文本绘制时生效。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">OH_Drawing_Point* OH_Drawing_PointCreate(float x, float y)</td>         <td class="cellrowborder" valign="top" width="50%">用于创建一个坐标点对象。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">OH_Drawing_TextShadow* OH_Drawing_CreateTextShadow(void)</td>         <td class="cellrowborder" valign="top" width="50%">创建指向字体阴影对象的指针。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_SetTextShadow(OH_Drawing_TextShadow* shadow, uint32_t color, OH_Drawing_Point* offset, double blurRadius)</td>         <td class="cellrowborder" valign="top" width="50%">设置字体阴影对象的参数。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_TextStyleAddShadow(OH_Drawing_TextStyle* style, const OH_Drawing_TextShadow* shadow)</td>         <td class="cellrowborder" valign="top" width="50%">字体阴影容器中添加字体阴影元素。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_DestroyTextShadow(OH_Drawing_TextShadow* shadow)</td>         <td class="cellrowborder" valign="top" width="50%">释放被字体阴影对象占据的内存。</td>        </tr>             </tbody></table></div>     </div>     <p>示例及示意效果如下所示：</p>     <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建一个 TypographyStyle 创建 Typography 时需要使用</span></li><li>OH_Drawing_TypographyStyle *typoStyle = <span class="hljs-built_in">OH_Drawing_CreateTypographyStyle</span>();</li><li><span class="hljs-comment">// 设置文本对齐方式为居中</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextAlign</span>(typoStyle, TEXT_ALIGN_CENTER);</li><li><span class="hljs-comment">// 设置文本内容</span></li><li><span class="hljs-type">const</span> <span class="hljs-type">char</span> *text = <span class="hljs-string">"Hello World Drawing\n"</span>;</li><li>
</li><li><span class="hljs-comment">// 设置文字颜色、大小、字重，不设置 TextStyle 会使用 TypographyStyle 中的默认 TextStyle</span></li><li>OH_Drawing_TextStyle *txtStyleWithShadow = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleColor</span>(txtStyleWithShadow, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyleWithShadow, <span class="hljs-number">100</span>);</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontWeight</span>(txtStyleWithShadow, FONT_WEIGHT_400);</li><li><span class="hljs-comment">// 设置阴影偏移量</span></li><li>OH_Drawing_Point *offset = <span class="hljs-built_in">OH_Drawing_PointCreate</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);</li><li>OH_Drawing_TextShadow *shadow = <span class="hljs-built_in">OH_Drawing_CreateTextShadow</span>();</li><li><span class="hljs-comment">// 为 TextShadow 设置样式</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextShadow</span>(shadow, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>), offset, <span class="hljs-number">10</span>);</li><li><span class="hljs-comment">// 将 TextShadow 加入 TextStyle</span></li><li><span class="hljs-built_in">OH_Drawing_TextStyleAddShadow</span>(txtStyleWithShadow, shadow);</li><li>
</li><li><span class="hljs-comment">// 创建一个不带阴影的 TextStyle 用于对比</span></li><li>OH_Drawing_TextStyle *txtStyleNoShadow = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-comment">// 设置文字颜色、大小、字重，不设置 TextStyle 会使用 TypographyStyle 中的默认 TextStyle</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleColor</span>(txtStyleNoShadow, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyleNoShadow, <span class="hljs-number">100</span>);</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontWeight</span>(txtStyleNoShadow, FONT_WEIGHT_400);</li><li>
</li><li><span class="hljs-comment">// 创建 FontCollection，FontCollection 用于管理字体匹配逻辑</span></li><li>OH_Drawing_FontCollection *fc = <span class="hljs-built_in">OH_Drawing_CreateSharedFontCollection</span>();</li><li><span class="hljs-comment">// 使用 FontCollection 和 之前创建的 TypographyStyle 创建 TypographyCreate。TypographyCreate 用于创建 Typography</span></li><li>OH_Drawing_TypographyCreate *handler = <span class="hljs-built_in">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li>
</li><li><span class="hljs-comment">// 加入带有阴影的文本样式</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyleWithShadow);</li><li><span class="hljs-comment">// 将文本添加到 handler 中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li>
</li><li><span class="hljs-comment">// 后续加入的不带阴影的文本样式</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyleNoShadow);</li><li><span class="hljs-comment">// 将文本添加到 handler 中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li>
</li><li>OH_Drawing_Typography *typography = <span class="hljs-built_in">OH_Drawing_CreateTypography</span>(handler);</li><li><span class="hljs-comment">// 设置排版宽度</span></li><li><span class="hljs-type">double</span> layoutWidth = <span class="hljs-number">1310</span>;</li><li><span class="hljs-built_in">OH_Drawing_TypographyLayout</span>(typography, layoutWidth);</li><li><span class="hljs-comment">// 设置文本在画布上绘制的起始位置</span></li><li><span class="hljs-type">double</span> position[<span class="hljs-number">2</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">1140</span>};</li><li><span class="hljs-comment">// 将文本绘制到画布上</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyPaint</span>(typography, canvas, position[<span class="hljs-number">0</span>], position[<span class="hljs-number">1</span>]);</li><li>
</li><li><span class="hljs-comment">// 释放内存</span></li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyStyle</span>(typoStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyleWithShadow);</li><li><span class="hljs-built_in">OH_Drawing_DestroyPoint</span>(offset);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextShadow</span>(shadow);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyleNoShadow);</li><li><span class="hljs-built_in">OH_Drawing_DestroyFontCollection</span>(fc);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyHandler</span>(handler);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypography</span>(typography);</li></ol></pre></div></div>     <p><span><img originheight="293" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.17827143721641547082082038767069:50001231000000:2800:4F946551E5EB6027E2100FD032594DD3643ADF61E3B3DEB45ACAFB3F053E2E65.png" width="496" height="293"></span></p>    </div>    <div class="tiledSection">     <h3 id="占位符">占位符<i class="anchor-icon anchor-icon-link" anchorid="占位符" tips="复制节点链接"></i></h3>          <p>占位符绘制用于处理文本中占位符符号的渲染。</p>     <p>占位符也是用来实现图文混排的关键，是指在实际图像或内容注册之前，用来预先提供或替代某个位置的视觉元素。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_TypographyHandlerAddPlaceholder(OH_Drawing_TypographyCreate* handler, OH_Drawing_PlaceholderSpan* span)</td>         <td class="cellrowborder" valign="top" width="50%">设置占位符。</td>        </tr>             </tbody></table></div>     </div>     <p>示例及示意效果如下所示：</p>     <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 设置排版宽度</span></li><li><span class="hljs-type">double</span> layoutWidth = <span class="hljs-number">1310</span>;</li><li><span class="hljs-comment">// 创建 FontCollection，FontCollection 用于管理字体匹配逻辑</span></li><li>OH_Drawing_FontCollection *fc = <span class="hljs-built_in">OH_Drawing_CreateSharedFontCollection</span>();</li><li>
</li><li><span class="hljs-comment">// 设置文字颜色、大小、字重，不设置 TextStyle 会使用 TypographyStyle 中的默认 TextStyle</span></li><li>OH_Drawing_TextStyle *txtStyle = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleColor</span>(txtStyle, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyle, <span class="hljs-number">100</span>);</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontWeight</span>(txtStyle, FONT_WEIGHT_400);</li><li>
</li><li><span class="hljs-comment">// 设置文本内容</span></li><li><span class="hljs-type">const</span> <span class="hljs-type">char</span> *text = <span class="hljs-string">"Hello World Drawing\n"</span>;</li><li>
</li><li><span class="hljs-comment">// 创建一个 TypographyStyle 创建 Typography 时需要使用</span></li><li>OH_Drawing_TypographyStyle *typoStyle = <span class="hljs-built_in">OH_Drawing_CreateTypographyStyle</span>();</li><li><span class="hljs-comment">// 设置文本对齐方式为居中</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextAlign</span>(typoStyle, TEXT_ALIGN_CENTER);</li><li>
</li><li><span class="hljs-comment">// 使用 FontCollection 和 之前创建的 TypographyStyle 创建 TypographyCreate。TypographyCreate 用于创建 Typography</span></li><li>OH_Drawing_TypographyCreate *handlerWithPlaceholder = <span class="hljs-built_in">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li><span class="hljs-comment">// 创建一个 placeholder，并且初始化其成员变量</span></li><li>OH_Drawing_PlaceholderSpan placeholder;</li><li>placeholder.width = <span class="hljs-number">200.0</span>;</li><li>placeholder.height = <span class="hljs-number">200.0</span>;</li><li>placeholder.alignment = ALIGNMENT_ABOVE_BASELINE; <span class="hljs-comment">// 基线对齐策略</span></li><li>placeholder.baseline = TEXT_BASELINE_ALPHABETIC;                  <span class="hljs-comment">// 使用的文本基线类型</span></li><li>placeholder.baselineOffset = <span class="hljs-number">0.0</span>; <span class="hljs-comment">// 相比基线的偏移量。只有对齐策略是 OFFSET_AT_BASELINE 时生效</span></li><li>
</li><li><span class="hljs-comment">// 将 placeholder 放在开头</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddPlaceholder</span>(handlerWithPlaceholder, &amp;placeholder);</li><li>
</li><li><span class="hljs-comment">// 将之前创建的 TextStyle 加入 handler</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handlerWithPlaceholder, txtStyle);</li><li><span class="hljs-comment">// 将文本添加到 handler 中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handlerWithPlaceholder, text);</li><li>
</li><li>OH_Drawing_Typography *typographyWithPlaceholder = <span class="hljs-built_in">OH_Drawing_CreateTypography</span>(handlerWithPlaceholder);</li><li><span class="hljs-built_in">OH_Drawing_TypographyLayout</span>(typographyWithPlaceholder, layoutWidth);</li><li><span class="hljs-comment">// 设置文本在画布上绘制的起始位置</span></li><li><span class="hljs-type">double</span> positionBreakAll[<span class="hljs-number">2</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">0</span>};</li><li><span class="hljs-comment">// 将文本绘制到画布上</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyPaint</span>(typographyWithPlaceholder, canvas, positionBreakAll[<span class="hljs-number">0</span>], positionBreakAll[<span class="hljs-number">1</span>]);</li><li>
</li><li><span class="hljs-comment">// 创建 OH_Drawing_TypographyCreate</span></li><li>OH_Drawing_TypographyCreate *handlerNoPlaceholder = <span class="hljs-built_in">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li><span class="hljs-comment">// 将之前创建的 TextStyle 加入 handler</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handlerNoPlaceholder, txtStyle);</li><li><span class="hljs-comment">// 将文本添加到 handler 中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handlerNoPlaceholder, text);</li><li>
</li><li>OH_Drawing_Typography *typographyNoPlaceholder = <span class="hljs-built_in">OH_Drawing_CreateTypography</span>(handlerNoPlaceholder);</li><li><span class="hljs-built_in">OH_Drawing_TypographyLayout</span>(typographyNoPlaceholder, layoutWidth);</li><li><span class="hljs-comment">// 设置文本在画布上绘制的起始位置</span></li><li><span class="hljs-type">double</span> positionBreakWord[<span class="hljs-number">2</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">1140</span>};</li><li><span class="hljs-comment">// 将文本绘制到画布上</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyPaint</span>(typographyNoPlaceholder, canvas, positionBreakWord[<span class="hljs-number">0</span>], positionBreakWord[<span class="hljs-number">1</span>]);</li><li>
</li><li><span class="hljs-comment">// 释放内存</span></li><li><span class="hljs-built_in">OH_Drawing_DestroyFontCollection</span>(fc);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyStyle</span>(typoStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyHandler</span>(handlerWithPlaceholder);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyHandler</span>(handlerNoPlaceholder);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypography</span>(typographyWithPlaceholder);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypography</span>(typographyNoPlaceholder);</li></ol></pre></div></div>     <p><span><img originheight="462" originwidth="456" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.97642774150177937275070309440758:50001231000000:2800:414A1E7330A3629966D8D2FD0C71F83CB86AEB17C0D086EB030CF12BE79DED11.png" width="456" height="462"></span></p>    </div>    <div class="tiledSection">     <h3 id="自动间距">自动间距<i class="anchor-icon anchor-icon-link" anchorid="自动间距" tips="复制节点链接"></i></h3>          <p>使能自动间距，则会在文本排版时自动调整CJK（中文字符、日文字符、韩文字符）与西文（拉丁字母、西里尔字母、希腊字母）、CJK与数字、CJK与版权符号、版权符号与数字、版权符号与西文之间的间距。例如，在中英文混排场景中，使能自动间距即可在中英文切换的地方自动添加额外间距，提升阅读体验。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.3.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.3.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_SetTypographyTextAutoSpace(OH_Drawing_TypographyStyle *style, bool enableAutoSpace)</td>         <td class="cellrowborder" valign="top" width="50%">设置文本排版时是否使能自动间距。默认不使能自动间距，一旦使能则会自动调整CJK（中文字符、日文字符、韩文字符）与西文（拉丁字母、西里尔字母、希腊字母）、CJK与数字、CJK与版权符号、版权符号与数字、版权符号与西文之间的间距。</td>        </tr>             </tbody></table></div>     </div>     <p>示例及示意效果如下所示：</p>     <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建一个TypographyStyle创建Typography时需要使用</span></li><li>OH_Drawing_TypographyStyle *typoStyle = <span class="hljs-built_in">OH_Drawing_CreateTypographyStyle</span>();</li><li><span class="hljs-comment">// 设置使能自动间距，默认为false</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextAutoSpace</span>(typoStyle, <span class="hljs-literal">true</span>);</li><li><span class="hljs-comment">// 设置文字内容</span></li><li><span class="hljs-type">const</span> <span class="hljs-type">char</span> *text = <span class="hljs-string">"test测试©test©测试。"</span>;</li><li>
</li><li>OH_Drawing_TextStyle *txtStyle = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-comment">// 设置文字颜色、大小、字重，不设置TextStyle会使用TypographyStyle中的默认TextStyle</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleColor</span>(txtStyle, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyle, <span class="hljs-number">100</span>);</li><li>
</li><li><span class="hljs-comment">// 创建FontCollection，FontCollection用于管理字体匹配逻辑</span></li><li>OH_Drawing_FontCollection *fc = <span class="hljs-built_in">OH_Drawing_CreateSharedFontCollection</span>();</li><li><span class="hljs-comment">// 使用FontCollection和之前创建的TypographyStyle创建TypographyCreate。TypographyCreate用于创建Typography</span></li><li>OH_Drawing_TypographyCreate *handler = <span class="hljs-built_in">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li>
</li><li><span class="hljs-comment">// 将文本样式添加到handler中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyle);</li><li><span class="hljs-comment">// 将文本添加到handler中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li><span class="hljs-comment">// 创建段落</span></li><li>OH_Drawing_Typography *typography = <span class="hljs-built_in">OH_Drawing_CreateTypography</span>(handler);</li><li><span class="hljs-comment">// 设置排版宽度</span></li><li><span class="hljs-type">double</span> layoutWidth = <span class="hljs-number">1310</span>;</li><li><span class="hljs-comment">// 将段落按照排版宽度进行排版</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyLayout</span>(typography, layoutWidth);</li><li><span class="hljs-comment">// 设置文本在画布上绘制的起始位置</span></li><li><span class="hljs-type">double</span> position[<span class="hljs-number">2</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">1140</span>};</li><li><span class="hljs-comment">// 将文本绘制到画布上</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyPaint</span>(typography, canvas, position[<span class="hljs-number">0</span>], position[<span class="hljs-number">1</span>]);</li><li>
</li><li><span class="hljs-comment">// 释放内存</span></li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyStyle</span>(typoStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyFontCollection</span>(fc);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyHandler</span>(handler);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypography</span>(typography);</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.3.1.1" valign="top" width="50%">段落样式设置（自动间距）</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.3.1.2" valign="top" width="50%">示意效果</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">不使能自动间距</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="87" originwidth="531" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.90364077374507967863410477763401:50001231000000:2800:87CABC04D69877E429ECD5D8C85437B3BF9F3243FA05B94BC33122E8F751929B.png" width="436" height="71.43502824858757"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">使能自动间距</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="95" originwidth="531" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.54322950460548469822690690903531:50001231000000:2800:232E3257DD0AAF72E7F7BA067D049C0542A4DA3383394D33BFD6E7EB8432DBE2.png" width="436" height="78.00376647834275"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="渐变色">渐变色<i class="anchor-icon anchor-icon-link" anchorid="渐变色" tips="复制节点链接"></i></h3>          <p><strong>渐变色</strong>是一种在文字设计中广泛应用的视觉效果，通过在文字的不同部分应用不同的颜色，从而创造出从一种颜色平滑过渡到另一种颜色的效果。可以通过着色器实现文字渐变的效果，着色器的更多介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/complex-drawing-effect-c#着色器效果">着色器效果</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.3.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.3.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_SetTextStyleForegroundBrush(OH_Drawing_TextStyle* style, OH_Drawing_Brush* foregroundBrush)</td>         <td class="cellrowborder" valign="top" width="50%">添加前景画刷，渐变着色器属性依附于前景画刷中。</td>        </tr>             </tbody></table></div>     </div>     <p>示例及效果如下所示：</p>     <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li>OH_Drawing_TypographyStyle *typoStyle = <span class="hljs-built_in">OH_Drawing_CreateTypographyStyle</span>();</li><li>OH_Drawing_TextStyle *txtStyle = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-comment">// 设置文字大小</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyle, <span class="hljs-number">100</span>);</li><li><span class="hljs-comment">// 创建着色器对象，并设置颜色、变化起始点与结束点</span></li><li>OH_Drawing_Point *startPt = <span class="hljs-built_in">OH_Drawing_PointCreate</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>OH_Drawing_Point *endPt = <span class="hljs-built_in">OH_Drawing_PointCreate</span>(<span class="hljs-number">900</span>, <span class="hljs-number">900</span>);</li><li><span class="hljs-type">uint32_t</span> colors[] = {<span class="hljs-number">0xFFFFFF00</span>, <span class="hljs-number">0xFFFF0000</span>, <span class="hljs-number">0xFF0000FF</span>};</li><li><span class="hljs-type">float</span> pos[] = {<span class="hljs-number">0.0f</span>, <span class="hljs-number">0.5f</span>, <span class="hljs-number">1.0f</span>};</li><li>OH_Drawing_ShaderEffect *colorShaderEffect =</li><li>    <span class="hljs-built_in">OH_Drawing_ShaderEffectCreateLinearGradient</span>(startPt, endPt, colors, pos, <span class="hljs-number">3</span>, OH_Drawing_TileMode::CLAMP);</li><li><span class="hljs-comment">// 创建画刷对象,并将着色器添加到画刷</span></li><li>OH_Drawing_Brush* brush = <span class="hljs-built_in">OH_Drawing_BrushCreate</span>();</li><li><span class="hljs-built_in">OH_Drawing_BrushSetShaderEffect</span>(brush, colorShaderEffect);</li><li><span class="hljs-comment">// 将画刷添加到文本样式中</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleForegroundBrush</span>(txtStyle, brush);</li><li><span class="hljs-comment">// 创建排版对象，并绘制</span></li><li>OH_Drawing_FontCollection *fc = <span class="hljs-built_in">OH_Drawing_CreateSharedFontCollection</span>();</li><li>OH_Drawing_TypographyCreate *handler = <span class="hljs-built_in">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyle);</li><li><span class="hljs-type">const</span> <span class="hljs-type">char</span> *text = <span class="hljs-string">"Hello World"</span>;</li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li>OH_Drawing_Typography *typography = <span class="hljs-built_in">OH_Drawing_CreateTypography</span>(handler);</li><li><span class="hljs-built_in">OH_Drawing_TypographyLayout</span>(typography, <span class="hljs-number">1000</span>);</li><li><span class="hljs-built_in">OH_Drawing_TypographyPaint</span>(typography, canvas, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>
</li><li><span class="hljs-comment">// 释放对象</span></li><li><span class="hljs-built_in">OH_Drawing_DestroyFontCollection</span>(fc);</li><li><span class="hljs-built_in">OH_Drawing_ShaderEffectDestroy</span>(colorShaderEffect);</li><li><span class="hljs-built_in">OH_Drawing_BrushDestroy</span>(brush);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyStyle</span>(typoStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyHandler</span>(handler);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypography</span>(typography);</li></ol></pre></div></div>     <p><span><img originheight="65" originwidth="362" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.43003362504477733717576104376534:50001231000000:2800:1DD4DD36B17E538195BFD47E2EAE624ACB167534B96107B30728F401B63EF054.png" width="362" height="65"></span></p>    </div>    <div class="tiledSection">     <h3 id="垂直对齐">垂直对齐<i class="anchor-icon anchor-icon-link" anchorid="垂直对齐" tips="复制节点链接"></i></h3>          <p><strong>垂直对齐</strong>用于调整文本在一行中垂直方向的排版位置。开启行高缩放或行内存在不同字号文本混排时使能垂直对齐，可以让文本实现顶部对齐、居中对齐、底部对齐或基线对齐（默认）。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.3.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.3.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_SetTypographyVerticalAlignment(OH_Drawing_TypographyStyle* style, OH_Drawing_TextVerticalAlignment align)</td>         <td class="cellrowborder" valign="top" width="50%">设置文本垂直方向排版方式。</td>        </tr>             </tbody></table></div>     </div>     <p>示例及效果如下所示：</p>     <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-rust" data-highlighted="yes"><ol class="linenums"><li>OH_Drawing_TypographyStyle *typoStyle = <span class="hljs-title function_ invoke__">OH_Drawing_CreateTypographyStyle</span>();</li><li>OH_Drawing_TextStyle *txtStyle = <span class="hljs-title function_ invoke__">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-comment">// 设置垂直对齐方式</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_SetTypographyVerticalAlignment</span>(typoStyle, OH_Drawing_TextVerticalAlignment::TEXT_VERTICAL_ALIGNMENT_CENTER);</li><li><span class="hljs-comment">// 设置文字大小</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_SetTextStyleFontSize</span>(txtStyle, <span class="hljs-number">30</span>);</li><li><span class="hljs-comment">// 设置文字颜色</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_SetTextStyleColor</span>(txtStyle, <span class="hljs-title function_ invoke__">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-comment">// 创建排版对象，并绘制</span></li><li>OH_Drawing_FontCollection *fc = <span class="hljs-title function_ invoke__">OH_Drawing_CreateSharedFontCollection</span>();</li><li>OH_Drawing_TypographyCreate *handler = <span class="hljs-title function_ invoke__">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyle);</li><li><span class="hljs-keyword">const</span> <span class="hljs-type">char</span> *text = <span class="hljs-string">"VerticalAlignment-center"</span>;</li><li><span class="hljs-title function_ invoke__">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li>OH_Drawing_Typography *typography = <span class="hljs-title function_ invoke__">OH_Drawing_CreateTypography</span>(handler);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_TypographyLayout</span>(typography, <span class="hljs-number">1000</span>);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_TypographyPaint</span>(typography, canvas, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>
</li><li><span class="hljs-comment">// 释放对象</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyFontCollection</span>(fc);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyTextStyle</span>(txtStyle);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyTypographyStyle</span>(typoStyle);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyTypographyHandler</span>(handler);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyTypography</span>(typography);</li></ol></pre></div></div>     <p>效果如下（黑框仅为展示文本绘制区域，实际不绘制）:</p>     <p><span><img originheight="69" originwidth="405" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.67682074658176390157697736877987:50001231000000:2800:A60350227B785076776114B38A61107039E2928D90EBC5A4EEF03BCFBD6BDCDB.jpg" width="405" height="69"></span></p>    </div>    <div class="tiledSection">     <h3 id="上下标">上下标<i class="anchor-icon anchor-icon-link" anchorid="上下标" tips="复制节点链接"></i></h3>          <p><strong>上下标</strong>能将文本作为上标或下标参与排版。一般用于数学公式、化学式等场景。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.3.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.3.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_SetTextStyleBadgeType(OH_Drawing_TextStyle* style, OH_Drawing_TextBadgeType textBadgeType)</td>         <td class="cellrowborder" valign="top" width="50%">使能上下标样式。</td>        </tr>             </tbody></table></div>     </div>     <p>示例及效果如下所示：</p>     <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-rust" data-highlighted="yes"><ol class="linenums"><li>OH_Drawing_TypographyStyle *typoStyle = <span class="hljs-title function_ invoke__">OH_Drawing_CreateTypographyStyle</span>();</li><li>OH_Drawing_TextStyle *txtStyle = <span class="hljs-title function_ invoke__">OH_Drawing_CreateTextStyle</span>();</li><li>OH_Drawing_TextStyle *badgeTxtStyle = <span class="hljs-title function_ invoke__">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-comment">// 设置文字大小</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_SetTextStyleFontSize</span>(txtStyle, <span class="hljs-number">30</span>);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_SetTextStyleFontSize</span>(badgeTxtStyle, <span class="hljs-number">30</span>);</li><li><span class="hljs-comment">// 设置文字颜色</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_SetTextStyleColor</span>(txtStyle, <span class="hljs-title function_ invoke__">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-title function_ invoke__">OH_Drawing_SetTextStyleColor</span>(badgeTxtStyle, <span class="hljs-title function_ invoke__">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-comment">// 使能文本上标</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_SetTextStyleBadgeType</span>(badgeTxtStyle, OH_Drawing_TextBadgeType::TEXT_SUPERSCRIPT);</li><li><span class="hljs-comment">// 创建排版对象，并绘制</span></li><li>OH_Drawing_FontCollection *fc = <span class="hljs-title function_ invoke__">OH_Drawing_CreateSharedFontCollection</span>();</li><li>OH_Drawing_TypographyCreate *handler = <span class="hljs-title function_ invoke__">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyle);</li><li><span class="hljs-keyword">const</span> <span class="hljs-type">char</span> *text = <span class="hljs-string">"Mass-energy equivalence: E=mc"</span>;</li><li><span class="hljs-title function_ invoke__">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, badgeTxtStyle);</li><li><span class="hljs-keyword">const</span> <span class="hljs-type">char</span> *badgeText = <span class="hljs-string">"2"</span>;</li><li><span class="hljs-title function_ invoke__">OH_Drawing_TypographyHandlerAddText</span>(handler, badgeText);</li><li>OH_Drawing_Typography *typography = <span class="hljs-title function_ invoke__">OH_Drawing_CreateTypography</span>(handler);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_TypographyLayout</span>(typography, <span class="hljs-number">1000</span>);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_TypographyPaint</span>(typography, canvas, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>
</li><li><span class="hljs-comment">// 释放对象</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyFontCollection</span>(fc);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyTextStyle</span>(txtStyle);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyTextStyle</span>(badgeTxtStyle);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyTypographyStyle</span>(typoStyle);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyTypographyHandler</span>(handler);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyTypography</span>(typography);</li></ol></pre></div></div>     <p><span><img originheight="46" originwidth="349" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.80359965658752780691154151941211:50001231000000:2800:315B9CF4F6F6A436734911666097F9E6564FD7AE51C4006ADCD000DF67B0130A.jpg" width="349" height="46"></span></p>    </div>    <div class="tiledSection">     <h3 id="高对比度">高对比度<i class="anchor-icon anchor-icon-link" anchorid="高对比度" tips="复制节点链接"></i></h3>          <p>高对比度可将深色文字变黑、浅色文字变白。开发者可选择开启或关闭应用的高对比度文字渲染，或遵循系统设置中的高对比度文字配置。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.3.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.3.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">void OH_Drawing_SetTextHighContrast(OH_Drawing_TextHighContrast action)</td>         <td class="cellrowborder" valign="top" width="50%">设置文字渲染高对比度模式。模式具体可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-drawing-text-global-h#oh_drawing_texthighcontrast" target="_blank">OH_Drawing_TextHighContrast</a>。</td>        </tr>             </tbody></table></div>     </div>     <p>示例及示意效果如下所示：</p>     <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 开启APP的文字渲染高对比模式，该模式的优先级要高于系统设置中的高对比度文字配置</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextHighContrast</span>(TEXT_APP_ENABLE_HIGH_CONTRAST);</li><li><span class="hljs-comment">// 创建一个 TypographyStyle，创建 Typography 时需要使用</span></li><li>OH_Drawing_TypographyStyle *typoStyle = <span class="hljs-built_in">OH_Drawing_CreateTypographyStyle</span>();</li><li>
</li><li><span class="hljs-comment">// 设置文字颜色、大小，不设置 TextStyle 会使用 TypographyStyle 中的默认 TextStyle</span></li><li>OH_Drawing_TextStyle *txtStyle = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleColor</span>(txtStyle, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x6F</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>));</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyle, <span class="hljs-number">100</span>);</li><li>
</li><li><span class="hljs-comment">// 创建 FontCollection，FontCollection 用于管理字体匹配逻辑</span></li><li>OH_Drawing_FontCollection *fc = <span class="hljs-built_in">OH_Drawing_CreateSharedFontCollection</span>();</li><li><span class="hljs-comment">// 使用 FontCollection 和 之前创建的 TypographyStyle 创建 TypographyCreate</span></li><li>OH_Drawing_TypographyCreate *handler = <span class="hljs-built_in">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li>
</li><li><span class="hljs-comment">// 将之前创建的 TextStyle 加入 handler 中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyle);</li><li><span class="hljs-comment">// 设置文本内容，并将文本添加到 handler 中</span></li><li><span class="hljs-type">const</span> <span class="hljs-type">char</span> *text = <span class="hljs-string">"Hello World Drawing\n"</span>;</li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li>
</li><li>OH_Drawing_Typography *typography = <span class="hljs-built_in">OH_Drawing_CreateTypography</span>(handler);</li><li><span class="hljs-built_in">OH_Drawing_TypographyLayout</span>(typography, <span class="hljs-number">1250</span>);</li><li><span class="hljs-comment">// 将文本绘制到画布上</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyPaint</span>(typography, canvas, <span class="hljs-number">10</span>, <span class="hljs-number">800</span>);</li><li>
</li><li><span class="hljs-comment">// 释放内存</span></li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyStyle</span>(typoStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyFontCollection</span>(fc);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyHandler</span>(handler);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypography</span>(typography);</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.3.1.1" valign="top" width="50%">高对比度设置</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.3.1.2" valign="top" width="50%">示意效果</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">不开启高对比度</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="111" originwidth="935" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114408.60374085932138869510167958182060:50001231000000:2800:FC5E33B9FB50D0FE7D22CA2B726A1A50CD3BA75319748E8AFA7F6781F27D6821.png" width="436" height="51.76042780748663"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">开启高对比度</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="115" originwidth="947" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114409.79004254971037488952413181376802:50001231000000:2800:8A17D0556D8C208CF871D597E97A5303F05AAFB753C833EF06778469F1243E10.png" width="436" height="52.946145723336855"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="行高调整">行高调整<i class="anchor-icon anchor-icon-link" anchorid="行高调整" tips="复制节点链接"></i></h3>          <p>调整行高可以改变文本行的垂直间距，行间距将变的更松散或更紧凑，可以显著改善文本垂直方向截断问题，使文本更易读。</p>     <p>当前行高调整方式包括两种：设置行高上限/下限和使用行高缩放系数。</p>     <p><strong>行高调整（方式一）</strong></p>     <p>从API version 21开始，支持为文本行设置行高上限与下限。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-drawing-text-typography-h#oh_drawing_settextstyleattributedouble" target="_blank">OH_Drawing_ErrorCode OH_Drawing_SetTextStyleAttributeDouble(OH_Drawing_TextStyle* style, OH_Drawing_TextStyleAttributeId id, double value)</a></td>         <td class="cellrowborder" valign="top" width="50%">传入id为OH_Drawing_TextStyleAttributeId::TEXT_STYLE_ATTR_D_LINE_HEIGHT_MAXIMUM，设置行高上限。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-drawing-text-typography-h#oh_drawing_settextstyleattributedouble" target="_blank">OH_Drawing_ErrorCode OH_Drawing_SetTextStyleAttributeDouble(OH_Drawing_TextStyle* style, OH_Drawing_TextStyleAttributeId id, double value)</a></td>         <td class="cellrowborder" valign="top" width="50%">传入id为OH_Drawing_TextStyleAttributeId::TEXT_STYLE_ATTR_D_LINE_HEIGHT_MINIMUM，设置行高下限。</td>        </tr>             </tbody></table></div>     </div>     <p>示例及效果如下所示：</p>     <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">OH_Drawing_TypographyStyle</span> *<span class="hljs-variable">typoStyle</span> = <span class="hljs-title function_">OH_Drawing_CreateTypographyStyle</span>();</li><li><span class="hljs-variable">OH_Drawing_TextStyle</span> *<span class="hljs-variable">txtStyle</span> = <span class="hljs-title function_">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-comment">// 设置文字大小</span></li><li><span class="hljs-title function_">OH_Drawing_SetTextStyleFontSize</span>(<span class="hljs-variable">txtStyle</span>, <span class="hljs-number">50</span>);</li><li><span class="hljs-comment">// 设置文字颜色</span></li><li><span class="hljs-title function_">OH_Drawing_SetTextStyleColor</span>(<span class="hljs-variable">txtStyle</span>, <span class="hljs-title function_">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-comment">// 设置行高上限</span></li><li><span class="hljs-title function_">OH_Drawing_SetTextStyleAttributeDouble</span>(<span class="hljs-variable">txtStyle</span>, <span class="hljs-variable">OH_Drawing_TextStyleAttributeId</span>::<span class="hljs-title class_">TEXT_STYLE_ATTR_D_LINE_HEIGHT_MAXIMUM</span>, <span class="hljs-number">65</span>);</li><li><span class="hljs-comment">// 设置行高下限</span></li><li><span class="hljs-title function_">OH_Drawing_SetTextStyleAttributeDouble</span>(<span class="hljs-variable">txtStyle</span>, <span class="hljs-variable">OH_Drawing_TextStyleAttributeId</span>::<span class="hljs-title class_">TEXT_STYLE_ATTR_D_LINE_HEIGHT_MINIMUM</span>, <span class="hljs-number">65</span>);</li><li><span class="hljs-comment">// 创建排版对象，并绘制</span></li><li><span class="hljs-variable">OH_Drawing_FontCollection</span> *<span class="hljs-variable">fc</span> = <span class="hljs-title function_">OH_Drawing_CreateSharedFontCollection</span>();</li><li><span class="hljs-variable">OH_Drawing_TypographyCreate</span> *<span class="hljs-variable">handler</span> = <span class="hljs-title function_">OH_Drawing_CreateTypographyHandler</span>(<span class="hljs-variable">typoStyle</span>, <span class="hljs-variable">fc</span>);</li><li><span class="hljs-title function_">OH_Drawing_TypographyHandlerPushTextStyle</span>(<span class="hljs-variable">handler</span>, <span class="hljs-variable">txtStyle</span>);</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">char</span> *<span class="hljs-variable">text</span> = <span class="hljs-string">"Hello World!"</span>;</li><li><span class="hljs-title function_">OH_Drawing_TypographyHandlerAddText</span>(<span class="hljs-variable">handler</span>, <span class="hljs-variable">badgeText</span>);</li><li><span class="hljs-variable">OH_Drawing_Typography</span> *<span class="hljs-variable">typography</span> = <span class="hljs-title function_">OH_Drawing_CreateTypography</span>(<span class="hljs-variable">handler</span>);</li><li><span class="hljs-title function_">OH_Drawing_TypographyLayout</span>(<span class="hljs-variable">typography</span>, <span class="hljs-number">1000</span>);</li><li><span class="hljs-title function_">OH_Drawing_TypographyPaint</span>(<span class="hljs-variable">typography</span>, <span class="hljs-variable">canvas</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>
</li><li><span class="hljs-comment">// 释放对象</span></li><li><span class="hljs-title function_">OH_Drawing_DestroyFontCollection</span>(<span class="hljs-variable">fc</span>);</li><li><span class="hljs-title function_">OH_Drawing_DestroyTextStyle</span>(<span class="hljs-variable">txtStyle</span>);</li><li><span class="hljs-title function_">OH_Drawing_DestroyTextStyle</span>(<span class="hljs-variable">badgeTxtStyle</span>);</li><li><span class="hljs-title function_">OH_Drawing_DestroyTypographyStyle</span>(<span class="hljs-variable">typoStyle</span>);</li><li><span class="hljs-title function_">OH_Drawing_DestroyTypographyHandler</span>(<span class="hljs-variable">handler</span>);</li><li><span class="hljs-title function_">OH_Drawing_DestroyTypography</span>(<span class="hljs-variable">typography</span>);</li></ol></pre></div></div>     <p>具体效果如下所示：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.4.1.1" valign="top" width="33.33333333333333%">行高上限值</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.4.1.2" valign="top" width="33.33333333333333%">行高下限值</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.4.1.3" valign="top" width="33.33333333333333%">示意效果（黑框仅为展示文本绘制区域，实际不绘制）</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">65</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">65</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%"><span><img originheight="38" originwidth="225" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114409.49705889208001451516280798385400:50001231000000:2800:7E241D4EF5B5A42F50DC8C9B52BF72B433720C0AA789817277A04AEA496AC940.png" class="notEnlarge" width="225" height="38"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">200</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">200</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%"><span><img originheight="110" originwidth="223" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114409.78253967163846122391340199091991:50001231000000:2800:3ADAB96A8D418DE5AAC361438F3C061812B1CF665588D479489BC426CD6EBDF3.png" class="notEnlarge" width="223" height="110"></span></td>        </tr>             </tbody></table></div>     </div>     <p><strong>行高调整（方式二）</strong></p>     <p>设置行高缩放系数。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.13.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.13.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-drawing-text-typography-h#oh_drawing_settextstylefontheight" target="_blank">void OH_Drawing_SetTextStyleFontHeight(OH_Drawing_TextStyle* style, double fontHeight)</a></td>         <td class="cellrowborder" valign="top" width="50%">使能行高缩放。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-drawing-text-typography-h#oh_drawing_settextstyleattributeint" target="_blank">OH_Drawing_ErrorCode OH_Drawing_SetTextStyleAttributeInt(OH_Drawing_TextStyle* style, OH_Drawing_TextStyleAttributeId id)</a></td>         <td class="cellrowborder" valign="top" width="50%">传入id为OH_Drawing_TextStyleAttributeId::TEXT_STYLE_ATTR_I_LINE_HEIGHT_STYLE，使能行高缩放样式。</td>        </tr>             </tbody></table></div>     </div>     <p>示例及效果如下所示：</p>     <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-rust" data-highlighted="yes"><ol class="linenums"><li>OH_Drawing_TypographyStyle *typoStyle = <span class="hljs-title function_ invoke__">OH_Drawing_CreateTypographyStyle</span>();</li><li>OH_Drawing_TextStyle *txtStyle = <span class="hljs-title function_ invoke__">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-comment">// 设置文字大小</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_SetTextStyleFontSize</span>(txtStyle, <span class="hljs-number">50</span>);</li><li><span class="hljs-comment">// 设置文字颜色</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_SetTextStyleColor</span>(txtStyle, <span class="hljs-title function_ invoke__">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-comment">// 设置行高缩放系数</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_SetTextStyleFontHeight</span>(txtStyle, <span class="hljs-number">1.5</span>);</li><li><span class="hljs-comment">// 设置行高缩放样式（1代表行高缩放以字形高度作为缩放基数）</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_SetTextStyleAttributeInt</span>(txtStyle, OH_Drawing_TextStyleAttributeId::TEXT_STYLE_ATTR_I_LINE_HEIGHT_STYLE, <span class="hljs-number">1</span>);</li><li><span class="hljs-comment">// 创建排版对象，并绘制</span></li><li>OH_Drawing_FontCollection *fc = <span class="hljs-title function_ invoke__">OH_Drawing_CreateSharedFontCollection</span>();</li><li>OH_Drawing_TypographyCreate *handler = <span class="hljs-title function_ invoke__">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyle);</li><li><span class="hljs-keyword">const</span> <span class="hljs-type">char</span> *text = <span class="hljs-string">"Hello World!"</span>;</li><li><span class="hljs-title function_ invoke__">OH_Drawing_TypographyHandlerAddText</span>(handler, badgeText);</li><li>OH_Drawing_Typography *typography = <span class="hljs-title function_ invoke__">OH_Drawing_CreateTypography</span>(handler);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_TypographyLayout</span>(typography, <span class="hljs-number">1000</span>);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_TypographyPaint</span>(typography, canvas, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>
</li><li><span class="hljs-comment">// 释放对象</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyFontCollection</span>(fc);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyTextStyle</span>(txtStyle);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyTextStyle</span>(badgeTxtStyle);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyTypographyStyle</span>(typoStyle);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyTypographyHandler</span>(handler);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_DestroyTypography</span>(typography);</li></ol></pre></div></div>     <p>具体效果如下所示：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.17.1.3.1.1" valign="top" width="50%">行高缩放样式</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.17.1.3.1.2" valign="top" width="50%">示意效果（黑框仅为展示文本绘制区域，实际不绘制）</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">TEXT_LINE_HEIGHT_BY_FONT_SIZE</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="57" originwidth="229" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114409.83654713859843488805346339381852:50001231000000:2800:35E0D3C977D27F345F78F080B4B4A4EC20D7BC1D41CD96FB25FC2A752650088B.png" class="notEnlarge" width="229" height="57"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">TEXT_LINE_HEIGHT_BY_FONT_HEIGHT</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="62" originwidth="229" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114409.55131564111806487707388542783681:50001231000000:2800:4F00F4C44074F25355B853C84E6C39238DE5D839CD6F0E0A232679A7F7F49BA0.png" class="notEnlarge" width="229" height="62"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="行间距调整">行间距调整<i class="anchor-icon anchor-icon-link" anchorid="行间距调整" tips="复制节点链接"></i></h3>          <p>从API version 21开始，支持设置行间距可以改善文本行之间的距离，提高阅读体验。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.3.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.3.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-drawing-text-typography-h#oh_drawing_settypographystyleattributedouble" target="_blank">OH_Drawing_ErrorCode OH_Drawing_SetTypographyStyleAttributeDouble(OH_Drawing_TypographyStyle* style, OH_Drawing_TypographyStyleAttributeId id, double value)</a></td>         <td class="cellrowborder" valign="top" width="50%">传入id为OH_Drawing_TypographyStyleAttributeId::TYPOGRAPHY_STYLE_ATTR_D_LINE_SPACING，设置行间距。</td>        </tr>             </tbody></table></div>     </div>     <p>示例及效果如下所示：</p>     <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">OH_Drawing_TypographyStyle</span> *<span class="hljs-variable">typoStyle</span> = <span class="hljs-title function_">OH_Drawing_CreateTypographyStyle</span>();</li><li><span class="hljs-comment">// 设置行间距</span></li><li><span class="hljs-title function_">OH_Drawing_SetTypographyStyleAttributeDouble</span>(<span class="hljs-variable">typoStyle</span>, <span class="hljs-variable">OH_Drawing_TypographyStyleAttributeId</span>::<span class="hljs-title class_">TYPOGRAPHY_STYLE_ATTR_D_LINE_SPACING</span>, <span class="hljs-number">100</span>);</li><li><span class="hljs-comment">// 设置禁用段落上升部下降部</span></li><li><span class="hljs-title function_">OH_Drawing_TypographyTextSetHeightBehavior</span>(<span class="hljs-variable">typoStyle</span>, <span class="hljs-variable">OH_Drawing_TextHeightBehavior</span>::<span class="hljs-title class_">TEXT_HEIGHT_DISABLE_ALL</span>);</li><li><span class="hljs-variable">OH_Drawing_TextStyle</span> *<span class="hljs-variable">txtStyle</span> = <span class="hljs-title function_">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-comment">// 设置文字大小</span></li><li><span class="hljs-title function_">OH_Drawing_SetTextStyleFontSize</span>(<span class="hljs-variable">txtStyle</span>, <span class="hljs-number">50</span>);</li><li><span class="hljs-comment">// 设置文字颜色</span></li><li><span class="hljs-title function_">OH_Drawing_SetTextStyleColor</span>(<span class="hljs-variable">txtStyle</span>, <span class="hljs-title function_">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-comment">// 创建排版对象，并绘制</span></li><li><span class="hljs-variable">OH_Drawing_FontCollection</span> *<span class="hljs-variable">fc</span> = <span class="hljs-title function_">OH_Drawing_CreateSharedFontCollection</span>();</li><li><span class="hljs-variable">OH_Drawing_TypographyCreate</span> *<span class="hljs-variable">handler</span> = <span class="hljs-title function_">OH_Drawing_CreateTypographyHandler</span>(<span class="hljs-variable">typoStyle</span>, <span class="hljs-variable">fc</span>);</li><li><span class="hljs-title function_">OH_Drawing_TypographyHandlerPushTextStyle</span>(<span class="hljs-variable">handler</span>, <span class="hljs-variable">txtStyle</span>);</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">char</span> *<span class="hljs-variable">text</span> = <span class="hljs-string">"Hello World!"</span>;</li><li><span class="hljs-title function_">OH_Drawing_TypographyHandlerAddText</span>(<span class="hljs-variable">handler</span>, <span class="hljs-variable">badgeText</span>);</li><li><span class="hljs-variable">OH_Drawing_Typography</span> *<span class="hljs-variable">typography</span> = <span class="hljs-title function_">OH_Drawing_CreateTypography</span>(<span class="hljs-variable">handler</span>);</li><li><span class="hljs-title function_">OH_Drawing_TypographyLayout</span>(<span class="hljs-variable">typography</span>, <span class="hljs-number">200</span>);</li><li><span class="hljs-title function_">OH_Drawing_TypographyPaint</span>(<span class="hljs-variable">typography</span>, <span class="hljs-variable">canvas</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>
</li><li><span class="hljs-comment">// 释放对象</span></li><li><span class="hljs-title function_">OH_Drawing_DestroyFontCollection</span>(<span class="hljs-variable">fc</span>);</li><li><span class="hljs-title function_">OH_Drawing_DestroyTextStyle</span>(<span class="hljs-variable">txtStyle</span>);</li><li><span class="hljs-title function_">OH_Drawing_DestroyTextStyle</span>(<span class="hljs-variable">badgeTxtStyle</span>);</li><li><span class="hljs-title function_">OH_Drawing_DestroyTypographyStyle</span>(<span class="hljs-variable">typoStyle</span>);</li><li><span class="hljs-title function_">OH_Drawing_DestroyTypographyHandler</span>(<span class="hljs-variable">handler</span>);</li><li><span class="hljs-title function_">OH_Drawing_DestroyTypography</span>(<span class="hljs-variable">typography</span>);</li></ol></pre></div></div>     <p>具体效果如下所示：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.1" valign="top" width="50%">上升部下降部开关</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.2" valign="top" width="50%">示意效果（黑框仅为展示文本绘制区域，实际不绘制）</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">TEXT_HEIGHT_DISABLE_ALL</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="146" originwidth="115" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114409.58126092958381501363545823486687:50001231000000:2800:C738AA32E679C9F3A91DB3F5FEAA05224FD9B3A33D79BB39FD33AEF73F41EE5E.png" class="notEnlarge" width="115" height="146"></span></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">TEXT_HEIGHT_ALL</td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="223" originwidth="114" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114409.95924402773901523920765618752585:50001231000000:2800:E1A382B2A96252B4D6B91AA289A56DBCE805ECD9F658AB3E0D4875CABA029CFC.png" class="notEnlarge" width="114" height="223"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="样式的拷贝绘制与显示">样式的拷贝、绘制与显示<i class="anchor-icon anchor-icon-link" anchorid="样式的拷贝绘制与显示" tips="复制节点链接"></i></h2>          <p>支持拷贝文本样式、段落样式、阴影样式，以便快速复制相关样式作用到不同文字上。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.3.1.3.1.1" valign="top" width="50%">接口定义</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.3.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">OH_Drawing_TypographyStyle* OH_Drawing_CopyTypographyStyle(OH_Drawing_TypographyStyle* style)</td>         <td class="cellrowborder" valign="top" width="50%">创建一个段落样式的对象副本，用于拷贝一个已有的段落样式对象。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">OH_Drawing_TextStyle* OH_Drawing_CopyTextStyle(OH_Drawing_TextStyle* style)</td>         <td class="cellrowborder" valign="top" width="50%">创建一个文本样式的对象副本，用于拷贝一个已有的文本样式对象。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">OH_Drawing_TextShadow* OH_Drawing_CopyTextShadow(OH_Drawing_TextShadow* shadow)</td>         <td class="cellrowborder" valign="top" width="50%">创建一个文本阴影的对象副本，用于拷贝一个已有的文本阴影对象。</td>        </tr>             </tbody></table></div>     </div>     <p>示例及示意效果如下所示：</p>     <div _ngcontent-qta-c106="" class="highlight-div"><div _ngcontent-qta-c106="" class="highlight-div-header"><div _ngcontent-qta-c106="" class="highlight-div-header-left"><div _ngcontent-qta-c106="" class="handle-button expand-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qta-c106="" class="highlight-div-header-right"><div _ngcontent-qta-c106="" class="handle-button ai-button"></div><div _ngcontent-qta-c106="" class="handle-button line-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qta-c106="" class="handle-button theme-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qta-c106="" class="handle-button copy-button"><div _ngcontent-qta-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qta-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建一个TypographyStyle，其中创建Typography时需要使用</span></li><li>OH_Drawing_TypographyStyle *typoStyle = <span class="hljs-built_in">OH_Drawing_CreateTypographyStyle</span>();</li><li><span class="hljs-comment">// 配置段落样式包括：使能自动间距、最大行数、省略号样式、省略号文本、对齐方式</span></li><li><span class="hljs-comment">// 使能自动间距</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextAutoSpace</span>(typoStyle, <span class="hljs-literal">true</span>);</li><li><span class="hljs-comment">// 设置段落最大行数为3行</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextMaxLines</span>(typoStyle, <span class="hljs-number">3</span>);</li><li><span class="hljs-comment">// 设置省略号模式为尾部省略号</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextEllipsisModal</span>(typoStyle, ELLIPSIS_MODAL_TAIL);</li><li><span class="hljs-comment">// 设置省略号文本</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextEllipsis</span>(typoStyle, <span class="hljs-string">"..."</span>);</li><li><span class="hljs-comment">// 设置对齐方式为居中对齐</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextAlign</span>(typoStyle, TEXT_ALIGN_CENTER);</li><li>
</li><li>OH_Drawing_TextStyle *txtStyle = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-comment">// 设置文字颜色、大小、字重，不设置TextStyle会使用TypographyStyle中的默认TextStyle</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleColor</span>(txtStyle, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyle, <span class="hljs-number">100</span>);</li><li><span class="hljs-comment">// 设置文本的装饰线</span></li><li><span class="hljs-comment">// 添加下划线</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleDecoration</span>(txtStyle, TEXT_DECORATION_UNDERLINE);</li><li><span class="hljs-comment">// 设置装饰线样式为波浪线样式</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleDecorationStyle</span>(txtStyle, TEXT_DECORATION_STYLE_WAVY);</li><li><span class="hljs-comment">// 设置下划线粗细</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleDecorationThicknessScale</span>(txtStyle, <span class="hljs-number">1</span>);</li><li><span class="hljs-comment">// 设置下划线颜色为蓝色</span></li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleDecorationColor</span>(txtStyle, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0xFF</span>));</li><li>
</li><li><span class="hljs-comment">// 设置阴影的颜色、偏移量、模糊半径</span></li><li><span class="hljs-comment">// 创建阴影对象</span></li><li>OH_Drawing_TextShadow *shadow = <span class="hljs-built_in">OH_Drawing_CreateTextShadow</span>();</li><li><span class="hljs-comment">// 设置阴影偏移量</span></li><li>OH_Drawing_Point *offset = <span class="hljs-built_in">OH_Drawing_PointCreate</span>(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>);</li><li><span class="hljs-comment">// 定义阴影模糊半径</span></li><li><span class="hljs-type">double</span> blurRadius = <span class="hljs-number">4</span>;</li><li><span class="hljs-built_in">OH_Drawing_SetTextShadow</span>(shadow, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0xFF</span>), offset, blurRadius);</li><li>
</li><li><span class="hljs-comment">// 拷贝阴影对象</span></li><li>OH_Drawing_TextShadow *shadowCopy = <span class="hljs-built_in">OH_Drawing_CopyTextShadow</span>(shadow);</li><li><span class="hljs-comment">// 将拷贝出的阴影添加到文本样式中</span></li><li><span class="hljs-built_in">OH_Drawing_TextStyleAddShadow</span>(txtStyle, shadowCopy);</li><li>
</li><li><span class="hljs-comment">// 创建FontCollection，FontCollection用于管理字体匹配逻辑</span></li><li>OH_Drawing_FontCollection *fc = <span class="hljs-built_in">OH_Drawing_CreateSharedFontCollection</span>();</li><li>
</li><li><span class="hljs-comment">// 使用FontCollection和之前创建的TypographyStyle创建TypographyCreate。TypographyCreate用于创建Typography</span></li><li>OH_Drawing_TypographyCreate *handler = <span class="hljs-built_in">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li><span class="hljs-comment">// 将段落一文本样式添加到handler中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyle);</li><li><span class="hljs-comment">// 将段落一文本添加到handler中</span></li><li><span class="hljs-type">const</span> <span class="hljs-type">char</span> *text = <span class="hljs-string">"The text style, paragraph style, and text shadow of the copied text will be exactly the same as those of the original text."</span>;</li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li><span class="hljs-comment">// 创建段落一，并将段落一按照排版宽度进行排版</span></li><li>OH_Drawing_Typography *typography = <span class="hljs-built_in">OH_Drawing_CreateTypography</span>(handler);</li><li><span class="hljs-type">double</span> layoutWidth = <span class="hljs-number">1200</span>;</li><li><span class="hljs-built_in">OH_Drawing_TypographyLayout</span>(typography, layoutWidth);</li><li><span class="hljs-comment">// 将段落一文本绘制到画布上</span></li><li><span class="hljs-type">double</span> position[<span class="hljs-number">2</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">500.0</span>};</li><li><span class="hljs-built_in">OH_Drawing_TypographyPaint</span>(typography, canvas, position[<span class="hljs-number">0</span>], position[<span class="hljs-number">1</span>]);</li><li>
</li><li><span class="hljs-comment">// 生成第二段文本，其中，文本样式和段落样式均由第一段文本拷贝而来</span></li><li><span class="hljs-comment">// 复制文本样式</span></li><li>OH_Drawing_TextStyle *textStyleCopy = <span class="hljs-built_in">OH_Drawing_CopyTextStyle</span>(txtStyle);</li><li><span class="hljs-comment">// 复制段落样式</span></li><li>OH_Drawing_TypographyStyle *typographyStyleCopy = <span class="hljs-built_in">OH_Drawing_CopyTypographyStyle</span>(typoStyle);</li><li>
</li><li><span class="hljs-comment">// 使用复制的样式创建段落二，后续可以观察段落一和段落二是否绘制效果一致</span></li><li>OH_Drawing_TypographyCreate *handlerCopy = <span class="hljs-built_in">OH_Drawing_CreateTypographyHandler</span>(typographyStyleCopy, fc);</li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handlerCopy, textStyleCopy);</li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handlerCopy, text);</li><li>OH_Drawing_Typography *typographyCopy = <span class="hljs-built_in">OH_Drawing_CreateTypography</span>(handlerCopy);</li><li><span class="hljs-built_in">OH_Drawing_TypographyLayout</span>(typographyCopy, layoutWidth);</li><li><span class="hljs-comment">// 将段落二文本绘制到画布上</span></li><li><span class="hljs-type">double</span> positionCopy[<span class="hljs-number">2</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">1200.0</span>};</li><li><span class="hljs-built_in">OH_Drawing_TypographyPaint</span>(typographyCopy, canvas, positionCopy[<span class="hljs-number">0</span>], positionCopy[<span class="hljs-number">1</span>]);</li><li>
</li><li><span class="hljs-comment">// 释放内存</span></li><li><span class="hljs-built_in">OH_Drawing_DestroyFontCollection</span>(fc);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyStyle</span>(typoStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyHandler</span>(handler);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypography</span>(typography);</li><li><span class="hljs-comment">// 拷贝的段落样式也需要释放内存</span></li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyStyle</span>(typographyStyleCopy);</li><li><span class="hljs-comment">// 拷贝的文本样式也需要释放内存</span></li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(textStyleCopy);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyHandler</span>(handlerCopy);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypography</span>(typographyCopy);</li></ol></pre></div></div>     <p><span><img originheight="389" originwidth="403" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114409.32145874228084465929799370606373:50001231000000:2800:086AE7C939AB07193B04A0A14D09C263709E3ECB3D7DC7D341209FEED057D72E.png" width="403" height="389"></span></p>    </div>   </div>   <div></div></div>