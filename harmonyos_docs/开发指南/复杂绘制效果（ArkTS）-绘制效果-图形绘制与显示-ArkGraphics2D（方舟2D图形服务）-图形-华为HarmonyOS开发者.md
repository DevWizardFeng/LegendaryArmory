<h1 _ngcontent-rrr-c119="" class="doc-title ng-star-inserted" title="复杂绘制效果（ArkTS）"> 复杂绘制效果（ArkTS） </h1>

<div _ngcontent-rrr-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>除了基础填充颜色、描边颜色和一些样式设置的绘制效果外，还支持通过画刷和画笔实现更多复杂的绘制效果。比如：</p>    <ul>     <li>      <p>混合模式。</p></li>     <li>      <p>路径效果，如虚线效果。</p></li>     <li>      <p>着色器效果，如线性渐变、径向渐变等。</p></li>     <li>      <p>滤波效果，如模糊效果等。</p></li>    </ul>    <div class="tiledSection">     <h2 id="混合模式">混合模式<i class="anchor-icon anchor-icon-link" anchorid="混合模式" tips="复制节点链接"></i></h2>          <p>混合模式可以用于画笔或画刷，它定义了如何将源像素（要绘制的内容）与目标像素（已存在于画布上的内容）进行组合。</p>     <p>可以使用setBlendMode()接口将混合模式应用于画刷或画笔中，该接口需要接受一个参数BlendMode，即混合模式的类型，具体可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-e#blendmode" target="_blank">BlendMode</a>。</p>     <p>关键示例和效果示意图如下所示：</p>     <div _ngcontent-rrr-c106="" class="highlight-div"><div _ngcontent-rrr-c106="" class="highlight-div-header"><div _ngcontent-rrr-c106="" class="highlight-div-header-left"><div _ngcontent-rrr-c106="" class="handle-button expand-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rrr-c106="" class="highlight-div-header-right"><div _ngcontent-rrr-c106="" class="handle-button ai-button"></div><div _ngcontent-rrr-c106="" class="handle-button line-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rrr-c106="" class="handle-button theme-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rrr-c106="" class="handle-button copy-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rrr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">RenderNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { common2D, drawing } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">DrawingRenderNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">RenderNode</span> {</li><li>  <span class="hljs-title function_">draw</span>(<span class="hljs-params">context : DrawContext</span>) {</li><li>    <span class="hljs-keyword">const</span> canvas = context.<span class="hljs-property">canvas</span>;</li><li>    canvas.<span class="hljs-title function_">saveLayer</span>(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);</li><li>    <span class="hljs-keyword">const</span> brushCircle = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">colorCircle</span>: common2D.<span class="hljs-property">Color</span> = {<span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>, <span class="hljs-attr">red</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">blue</span>: <span class="hljs-number">255</span>};</li><li>    brushCircle.<span class="hljs-title function_">setColor</span>(colorCircle);</li><li>    canvas.<span class="hljs-title function_">attachBrush</span>(brushCircle);</li><li>    canvas.<span class="hljs-title function_">drawCircle</span>(<span class="hljs-number">500</span>, <span class="hljs-number">500</span>, <span class="hljs-number">200</span>);</li><li>    <span class="hljs-keyword">const</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li>    <span class="hljs-comment">//  设置混合模式</span></li><li>    brush.<span class="hljs-title function_">setBlendMode</span>(drawing.<span class="hljs-property">BlendMode</span>.<span class="hljs-property">SRC_IN</span>);</li><li>    canvas.<span class="hljs-title function_">saveLayer</span>(<span class="hljs-literal">null</span>, brush);</li><li>
</li><li>    <span class="hljs-keyword">const</span> brushRect = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">colorRect</span>: common2D.<span class="hljs-property">Color</span> = {<span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>, <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>, <span class="hljs-attr">green</span>: <span class="hljs-number">255</span>, <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span>};</li><li>    brushRect.<span class="hljs-title function_">setColor</span>(colorRect);</li><li>    canvas.<span class="hljs-title function_">attachBrush</span>(brushRect);</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">rect</span>: common2D.<span class="hljs-property">Rect</span> = {<span class="hljs-attr">left</span>:<span class="hljs-number">100</span>, <span class="hljs-attr">top</span>:<span class="hljs-number">100</span>, <span class="hljs-attr">right</span>:<span class="hljs-number">500</span>, <span class="hljs-attr">bottom</span>:<span class="hljs-number">500</span>};</li><li>    canvas.<span class="hljs-title function_">drawRect</span>(rect);</li><li>    canvas.<span class="hljs-title function_">restore</span>();</li><li>    canvas.<span class="hljs-title function_">restore</span>();</li><li>    canvas.<span class="hljs-title function_">detachBrush</span>();</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="379" originwidth="376" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114405.08818510210954973493586551948977:50001231000000:2800:92C74308FA60FB85062EFF12491751D48334D43616CF88F4FE40A1014CABE385.png" width="376" height="379"></span></p>    </div>    <div class="tiledSection">     <h2 id="路径效果">路径效果<i class="anchor-icon anchor-icon-link" anchorid="路径效果" tips="复制节点链接"></i></h2>          <p>路径效果如虚线效果，只用于画笔。</p>     <p>可使用createDashPathEffect()接口设置路径效果。接口接受2个参数，分别为：</p>     <ul>      <li>       <p>浮点数数组intervals：表示虚线或者点线的间隔。</p></li>      <li>       <p>浮点数phase：表示在intervals数组中的偏移量，即从数组的哪个位置开始应用虚线或点线效果。</p></li>     </ul>     <p>此处以绘制矩形虚线路径效果为例，关键示例和效果示意图如下所示：</p>     <div _ngcontent-rrr-c106="" class="highlight-div"><div _ngcontent-rrr-c106="" class="highlight-div-header"><div _ngcontent-rrr-c106="" class="highlight-div-header-left"><div _ngcontent-rrr-c106="" class="handle-button expand-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rrr-c106="" class="highlight-div-header-right"><div _ngcontent-rrr-c106="" class="handle-button ai-button"></div><div _ngcontent-rrr-c106="" class="handle-button line-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rrr-c106="" class="handle-button theme-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rrr-c106="" class="handle-button copy-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rrr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建画笔</span></li><li><span class="hljs-keyword">let</span> pen = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Pen</span>();</li><li><span class="hljs-comment">// 设置线宽</span></li><li>pen.<span class="hljs-title function_">setStrokeWidth</span>(<span class="hljs-number">10.0</span>);</li><li><span class="hljs-comment">// 设置颜色</span></li><li>pen.<span class="hljs-title function_">setColor</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>);</li><li><span class="hljs-comment">// 表示10px的实线，5px的间隔，2px的实线，5px的间隔，以此循环</span></li><li><span class="hljs-keyword">let</span> intervals = [<span class="hljs-number">10</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>];</li><li><span class="hljs-comment">// 设置虚线路径效果</span></li><li><span class="hljs-keyword">let</span> effect = drawing.<span class="hljs-property">PathEffect</span>.<span class="hljs-title function_">createDashPathEffect</span>(intervals, <span class="hljs-number">0</span>);</li><li>pen.<span class="hljs-title function_">setPathEffect</span>(effect);</li><li><span class="hljs-comment">// 设置画笔描边效果</span></li><li>canvas.<span class="hljs-title function_">attachPen</span>(pen);</li><li><span class="hljs-comment">// 创建矩形</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">rect</span>: common2D.<span class="hljs-property">Rect</span> = { <span class="hljs-attr">left</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">700</span> };</li><li><span class="hljs-comment">// 绘制矩形</span></li><li>canvas.<span class="hljs-title function_">drawRect</span>(rect);</li><li><span class="hljs-comment">// 去除描边效果</span></li><li>canvas.<span class="hljs-title function_">detachPen</span>();</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.3.1.1" valign="top" width="50%">原始图</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.3.1.2" valign="top" width="50%">设置虚线效果后的效果图</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="1148" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114405.22182701889361691344976635946914:50001231000000:2800:9BC4ABAE33C043D4728A40F6EC07B0AC2183E66727B871509B82B1225BE2282E.jpg" width="436" height="400.10231814548365"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="1193" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114405.40207727772229570047689391759941:50001231000000:2800:4F57D7359B68873192E5562B18AE824F9AA425D7D3FF5ECC520BD3C7FAD57FDD.jpg" width="436" height="415.7857713828937"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="着色器效果">着色器效果<i class="anchor-icon anchor-icon-link" anchorid="着色器效果" tips="复制节点链接"></i></h2>          <p>着色器效果基于画刷或画笔实现，可使用setShaderEffect()接口设置画刷或画笔的着色器效果。当前支持不同的着色器效果，如线性渐变着色器效果、径向渐变着色器效果、扇形渐变着色器效果。</p>     <p>着色器相关接口和具体参数的说明请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-shadereffect" target="_blank">ShaderEffect</a>。</p>    </div>    <div class="tiledSection">     <h3 id="线性渐变着色器效果" class="firsth2">线性渐变着色器效果<i class="anchor-icon anchor-icon-link" anchorid="线性渐变着色器效果" tips="复制节点链接"></i></h3>          <p>可使用createLinearGradient()接口创建想要设置的线性渐变着色器效果。接口接受6个参数，分别是开始点、结束点、颜色数组、平铺模式、相对位置数组以及矩阵对象。</p>     <ul>      <li>       <p>开始点和结束点用来确定渐变方向。</p></li>      <li>       <p>颜色数组用于存储渐变使用到的颜色。</p></li>      <li>       <p>相对位置数组则用于确定每种颜色在渐变中的相对位置，如果相对位置为空，颜色将会被均匀地分布在开始点和结束点之间。</p></li>      <li>       <p>矩阵对象，用于对着色器做矩阵变换，默认为null，表示单位矩阵。</p></li>      <li>       <p>平铺模式用于确定如何在渐变区域之外继续渐变效果，平铺模式分为以下4类：</p>       <ul>        <li>CLAMP：当图像超出其原始边界时，复制边缘颜色。</li>        <li>REPEAT：在水平和垂直方向上重复图像。</li>        <li>MIRROR：在水平和垂直方向上重复图像，并在相邻的图像之间交替使用镜像图像。</li>        <li>DECAL：只在原始域内绘制，在其他地方返回透明黑色。</li>       </ul></li>     </ul>     <p>此处以绘制矩形并使用画刷设置线性渐变着色器效果为例，关键示例和效果示意图如下所示：</p>     <div _ngcontent-rrr-c106="" class="highlight-div"><div _ngcontent-rrr-c106="" class="highlight-div-header"><div _ngcontent-rrr-c106="" class="highlight-div-header-left"><div _ngcontent-rrr-c106="" class="handle-button expand-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rrr-c106="" class="highlight-div-header-right"><div _ngcontent-rrr-c106="" class="handle-button ai-button"></div><div _ngcontent-rrr-c106="" class="handle-button line-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rrr-c106="" class="handle-button theme-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rrr-c106="" class="handle-button copy-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rrr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">startPt</span>: common2D.<span class="hljs-property">Point</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span> };</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">endPt</span>: common2D.<span class="hljs-property">Point</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">900</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">900</span> };</li><li><span class="hljs-keyword">let</span> colors = [<span class="hljs-number">0xFFFFFF00</span>, <span class="hljs-number">0xFFFF0000</span>, <span class="hljs-number">0xFF0000FF</span>];</li><li><span class="hljs-comment">// 创建线性渐变着色器</span></li><li><span class="hljs-keyword">let</span> shaderEffect = drawing.<span class="hljs-property">ShaderEffect</span>.<span class="hljs-title function_">createLinearGradient</span>(startPt, endPt, colors, drawing.<span class="hljs-property">TileMode</span>.<span class="hljs-property">CLAMP</span>);</li><li><span class="hljs-comment">// 创建画刷</span></li><li><span class="hljs-keyword">let</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li><span class="hljs-comment">// 设置线性着色器</span></li><li>brush.<span class="hljs-title function_">setShaderEffect</span>(shaderEffect);</li><li><span class="hljs-comment">// 设置画刷填充效果</span></li><li>canvas.<span class="hljs-title function_">attachBrush</span>(brush);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">rect</span>: common2D.<span class="hljs-property">Rect</span> = { <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">900</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">900</span> };</li><li><span class="hljs-comment">// 绘制矩形</span></li><li>canvas.<span class="hljs-title function_">drawRect</span>(rect);</li><li><span class="hljs-comment">// 去除填充效果</span></li><li>canvas.<span class="hljs-title function_">detachBrush</span>();</li></ol></pre></div></div>     <p><span><img originheight="451" originwidth="490" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114405.40633093134487525109653688482326:50001231000000:2800:AD5BB6FFAC208401FBE461C5EDD2819AA34DD064FF8552CD81A201954D52A203.png" width="490" height="451"></span></p>    </div>    <div class="tiledSection">     <h3 id="径向渐变着色器效果">径向渐变着色器效果<i class="anchor-icon anchor-icon-link" anchorid="径向渐变着色器效果" tips="复制节点链接"></i></h3>          <p>可使用createRadialGradient()接口创建想要设置的径向渐变着色器效果。接口接受6个参数，分别是圆心坐标（centerPt）、半径（radius）、颜色数组（colors）、平铺模式（TileMode）、相对位置数组（pos）以及矩阵对象（matrix）。</p>     <p>其实现方式与线性渐变着色器类似，不同的是，径向渐变是由圆心开始向外径向渐变的。</p>     <p>此处以绘制矩形并使用画刷设置径向渐变着色器效果为例，关键示例和效果示意图如下所示：</p>     <div _ngcontent-rrr-c106="" class="highlight-div"><div _ngcontent-rrr-c106="" class="highlight-div-header"><div _ngcontent-rrr-c106="" class="highlight-div-header-left"><div _ngcontent-rrr-c106="" class="handle-button expand-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rrr-c106="" class="highlight-div-header-right"><div _ngcontent-rrr-c106="" class="handle-button ai-button"></div><div _ngcontent-rrr-c106="" class="handle-button line-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rrr-c106="" class="handle-button theme-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rrr-c106="" class="handle-button copy-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rrr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">centerPt</span>: common2D.<span class="hljs-property">Point</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">500</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">500</span> };</li><li><span class="hljs-keyword">let</span> colors = [<span class="hljs-number">0xFFFF0000</span>, <span class="hljs-number">0xFF00FF00</span>, <span class="hljs-number">0xFF0000FF</span>];</li><li><span class="hljs-comment">// 创建径向渐变着色器</span></li><li><span class="hljs-keyword">let</span> shaderEffect = drawing.<span class="hljs-property">ShaderEffect</span>.<span class="hljs-title function_">createRadialGradient</span>(centerPt, <span class="hljs-number">600</span>, colors, drawing.<span class="hljs-property">TileMode</span>.<span class="hljs-property">CLAMP</span>);</li><li><span class="hljs-comment">// 创建画刷</span></li><li><span class="hljs-keyword">let</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li><span class="hljs-comment">// 设置径向渐变着色器</span></li><li>brush.<span class="hljs-title function_">setShaderEffect</span>(shaderEffect);</li><li><span class="hljs-comment">// 设置画刷填充效果</span></li><li>canvas.<span class="hljs-title function_">attachBrush</span>(brush);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">rect</span>: common2D.<span class="hljs-property">Rect</span> = { <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">900</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">900</span> };</li><li><span class="hljs-comment">// 绘制矩形</span></li><li>canvas.<span class="hljs-title function_">drawRect</span>(rect);</li><li><span class="hljs-comment">// 去除填充效果</span></li><li>canvas.<span class="hljs-title function_">detachBrush</span>();</li></ol></pre></div></div>     <p><span><img originheight="1219" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114405.01238469545913455440937724192579:50001231000000:2800:45FCF822FFE3CBFFC31C2F54271FEFCFAEEAB1F212E4B3CCE97B1B42821B5A96.jpg" width="920" height="896.466826538769"></span></p>    </div>    <div class="tiledSection">     <h3 id="扇形渐变着色器效果">扇形渐变着色器效果<i class="anchor-icon anchor-icon-link" anchorid="扇形渐变着色器效果" tips="复制节点链接"></i></h3>          <p>可使用createSweepGradient()接口创建想要设置的扇形渐变着色器效果。接口接受7个参数，分别是圆心坐标（centerPt）、颜色数组（colors）、平铺模式（TileMode）、扇形渐变的起始角度（startAngle）、扇形渐变的结束角度（endAngle）、相对位置数组（pos）以及矩阵对象（matrix）。</p>     <p>其实现方式也与线性渐变着色器类似，不同的是，扇形渐变是在围绕中心点旋转的过程中渐变。</p>     <p>此处以绘制矩形并使用画刷设置扇形渐变着色器效果为例，关键示例和效果示意图如下所示：</p>     <div _ngcontent-rrr-c106="" class="highlight-div"><div _ngcontent-rrr-c106="" class="highlight-div-header"><div _ngcontent-rrr-c106="" class="highlight-div-header-left"><div _ngcontent-rrr-c106="" class="handle-button expand-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rrr-c106="" class="highlight-div-header-right"><div _ngcontent-rrr-c106="" class="handle-button ai-button"></div><div _ngcontent-rrr-c106="" class="handle-button line-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rrr-c106="" class="handle-button theme-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rrr-c106="" class="handle-button copy-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rrr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">centerPt</span>: common2D.<span class="hljs-property">Point</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">500</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">500</span> };</li><li><span class="hljs-keyword">let</span> colors = [<span class="hljs-number">0xFF00FFFF</span>, <span class="hljs-number">0xFFFF00FF</span>, <span class="hljs-number">0xFFFFFF00</span>];</li><li><span class="hljs-comment">// 创建扇形渐变着色器</span></li><li><span class="hljs-keyword">let</span> shaderEffect = drawing.<span class="hljs-property">ShaderEffect</span>.<span class="hljs-title function_">createSweepGradient</span>(centerPt, colors, drawing.<span class="hljs-property">TileMode</span>.<span class="hljs-property">CLAMP</span>, <span class="hljs-number">0</span>, <span class="hljs-number">360</span>);</li><li><span class="hljs-comment">// 创建画刷</span></li><li><span class="hljs-keyword">let</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li><span class="hljs-comment">// 设置扇形渐变着色器</span></li><li>brush.<span class="hljs-title function_">setShaderEffect</span>(shaderEffect);</li><li><span class="hljs-comment">// 设置画刷填充效果</span></li><li>canvas.<span class="hljs-title function_">attachBrush</span>(brush);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">rect</span>: common2D.<span class="hljs-property">Rect</span> = { <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">900</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">900</span> };</li><li><span class="hljs-comment">// 绘制矩形</span></li><li>canvas.<span class="hljs-title function_">drawRect</span>(rect);</li><li><span class="hljs-comment">// 去除填充效果</span></li><li>canvas.<span class="hljs-title function_">detachBrush</span>();</li></ol></pre></div></div>     <p><span><img originheight="1204" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114405.85073171087258771626979508467643:50001231000000:2800:7DA266242F2DC991CE3D768D809E6111FCFFE257E5C818EFF9AAE8784D033E62.jpg" width="920" height="885.435651478817"></span></p>    </div>    <div class="tiledSection">     <h2 id="滤波器效果">滤波器效果<i class="anchor-icon anchor-icon-link" anchorid="滤波器效果" tips="复制节点链接"></i></h2>          <p>滤波器效果可基于画刷或画笔实现。当前支持不同的滤波器效果，比如图像滤波器、颜色滤波器、蒙版滤波器。</p>     <p>滤波器相关接口和具体参数的说明请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-imagefilter" target="_blank">ImageFilter</a>。</p>    </div>    <div class="tiledSection">     <h3 id="颜色滤波器效果" class="firsth2">颜色滤波器效果<i class="anchor-icon anchor-icon-link" anchorid="颜色滤波器效果" tips="复制节点链接"></i></h3>          <p>颜色滤波器可基于画笔或画刷实现，颜色滤波器的相关接口和具体参数的说明请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-colorfilter" target="_blank">ColorFilter</a>。</p>     <p>目前可实现多种颜色滤波器，包括如下：</p>     <ul>      <li>       <p>具有混合模式的颜色滤波器。</p></li>      <li>       <p>具有5x4颜色矩阵的颜色滤波器。</p></li>      <li>       <p>将SRGB的伽玛曲线应用到RGB颜色通道的颜色滤波器。</p></li>      <li>       <p>将RGB颜色通道应用于SRGB的伽玛曲线的颜色滤波器。</p></li>      <li>       <p>将其输入的亮度值乘以透明度通道， 并将红色、绿色和蓝色通道设置为零的颜色滤波器。</p></li>      <li>       <p>由两个颜色滤波器组合而成的颜色滤波器。</p></li>     </ul>     <p>此处以具有5x4颜色矩阵的颜色滤波器为例。</p>     <p>可使用createMatrixColorFilter()接口创建具有5x4颜色矩阵的颜色滤波器。接口接受1个参数，表示为颜色矩阵，它是一个长度为20的浮点数数组。数组格式如下：</p>     <p>[ a0, a1, a2, a3, a4 ]</p>     <p>[ b0, b1, b2, b3, b4 ]</p>     <p>[ c0, c1, c2, c3, c4 ]</p>     <p>[ d0, d1, d2, d3, d4 ]</p>     <p>对于每个原始的像素颜色色值（R, G, B, A），变换后的色值（R', G', B', A'）计算公式为：</p>     <p>R' = a0*R + a1*G + a2*B + a3*A + a4</p>     <p>G' = b0*R + b1*G + b2*B + b3*A + b4</p>     <p>B' = c0*R + c1*G + c2*B + c3*A + c4</p>     <p>A' = d0*R + d1*G + d2*B + d3*A + d4</p>     <p>此处以绘制矩形并使用画刷设置具有5x4颜色矩阵的颜色滤波器效果为例，关键示例和效果示意图如下所示：</p>     <div _ngcontent-rrr-c106="" class="highlight-div"><div _ngcontent-rrr-c106="" class="highlight-div-header"><div _ngcontent-rrr-c106="" class="highlight-div-header-left"><div _ngcontent-rrr-c106="" class="handle-button expand-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rrr-c106="" class="highlight-div-header-right"><div _ngcontent-rrr-c106="" class="handle-button ai-button"></div><div _ngcontent-rrr-c106="" class="handle-button line-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rrr-c106="" class="handle-button theme-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rrr-c106="" class="handle-button copy-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rrr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建画刷</span></li><li><span class="hljs-keyword">let</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li><span class="hljs-comment">// 设置颜色</span></li><li>brush.<span class="hljs-title function_">setColor</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>);</li><li><span class="hljs-comment">// 设置颜色矩阵</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">matrix</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = [</li><li>  <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,</li><li>  <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,</li><li>  <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0</span>,</li><li>  <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0</span></li><li>];</li><li><span class="hljs-comment">// 创建5x4颜色矩阵的颜色滤波器</span></li><li><span class="hljs-keyword">let</span> filter = drawing.<span class="hljs-property">ColorFilter</span>.<span class="hljs-title function_">createMatrixColorFilter</span>(matrix);</li><li><span class="hljs-comment">// 设置颜色滤波器</span></li><li>brush.<span class="hljs-title function_">setColorFilter</span>(filter);</li><li><span class="hljs-comment">// 设置画刷填充效果</span></li><li>canvas.<span class="hljs-title function_">attachBrush</span>(brush);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">rect</span>: common2D.<span class="hljs-property">Rect</span> = { <span class="hljs-attr">left</span>: <span class="hljs-number">300</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">300</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">900</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">900</span> };</li><li><span class="hljs-comment">// 绘制矩形</span></li><li>canvas.<span class="hljs-title function_">drawRect</span>(rect);</li><li><span class="hljs-comment">// 去除填充效果</span></li><li>canvas.<span class="hljs-title function_">detachBrush</span>();</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.18.1.3.1.1" valign="top" width="50%">原始图</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.18.1.3.1.2" valign="top" width="50%">设置5x4颜色矩阵的颜色滤波器后的效果图</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="1320" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114405.18002492383500023294975400757562:50001231000000:2800:360E18322912ABEE4D824F3E70ABD1031C7F6B40DCFED7A2138A3447BDB9B6B7.jpg" width="436" height="460.04796163069545"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="1230" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114405.50590547202487664063108733223493:50001231000000:2800:B642DFF844DC4F83E6C98E7F33C9A2D7BB84F329FC675C99010574A19507ADD7.jpg" width="436" height="428.6810551558753"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="图像滤波器效果">图像滤波器效果<i class="anchor-icon anchor-icon-link" anchorid="图像滤波器效果" tips="复制节点链接"></i></h3>          <p>图像滤波器可基于画笔或画刷来实现，图像滤波器的相关接口和具体参数的说明请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-imagefilter" target="_blank">ImageFilter</a>。</p>     <p>目前只支持两种图像滤波器：</p>     <ul>      <li>       <p>基于颜色滤波器的图像滤波器。</p>       <p>可通过createFromColorFilter()接口实现，接口接受2个参数，颜色滤波器colorFilter和图像滤波器imageFilter，即把颜色滤波器的效果叠加到图像滤波器imageFilter上，imageFilter可为空，imageFilter为空则只添加颜色滤波器效果。</p></li>      <li>       <p>具有模糊效果的图像滤波器。</p>       <p>可通过createBlurImageFilter()接口实现，接口接受4个参数，sigmaX，sigmaY，cTileMode和imageFilter。sigmaX和sigmaY是模糊的标准差，cTileMode是平铺模式，imageFilter是输入的图像滤波器。</p>       <p>最终效果即为在输入的图像滤波器imageFilter的基础上进行模糊化处理，即滤波器效果可叠加，imageFilter可为空，imageFilter为空则只添加模糊效果。</p></li>     </ul>     <p>此处以绘制矩形并使用画笔添加模糊效果的图像滤波器效果为例，关键示例和效果示意图如下所示：</p>     <div _ngcontent-rrr-c106="" class="highlight-div"><div _ngcontent-rrr-c106="" class="highlight-div-header"><div _ngcontent-rrr-c106="" class="highlight-div-header-left"><div _ngcontent-rrr-c106="" class="handle-button expand-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rrr-c106="" class="highlight-div-header-right"><div _ngcontent-rrr-c106="" class="handle-button ai-button"></div><div _ngcontent-rrr-c106="" class="handle-button line-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rrr-c106="" class="handle-button theme-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rrr-c106="" class="handle-button copy-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rrr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 设置画笔</span></li><li><span class="hljs-keyword">let</span> pen = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Pen</span>();</li><li><span class="hljs-comment">// 设置线宽</span></li><li>pen.<span class="hljs-title function_">setStrokeWidth</span>(<span class="hljs-number">10.0</span>);</li><li><span class="hljs-comment">// 设置颜色</span></li><li>pen.<span class="hljs-title function_">setColor</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>);</li><li><span class="hljs-comment">// 创建模糊效果图像滤波器</span></li><li><span class="hljs-keyword">let</span> filter = drawing.<span class="hljs-property">ImageFilter</span>.<span class="hljs-title function_">createBlurImageFilter</span>(<span class="hljs-number">20</span>, <span class="hljs-number">20</span>, drawing.<span class="hljs-property">TileMode</span>.<span class="hljs-property">CLAMP</span>);</li><li><span class="hljs-comment">// 设置图像滤波器</span></li><li>pen.<span class="hljs-title function_">setImageFilter</span>(filter);</li><li><span class="hljs-comment">// 设置画笔描边效果</span></li><li>canvas.<span class="hljs-title function_">attachPen</span>(pen);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">rect</span>: common2D.<span class="hljs-property">Rect</span> = { <span class="hljs-attr">left</span>: <span class="hljs-number">300</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">300</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">900</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">900</span> };</li><li><span class="hljs-comment">// 绘制矩形</span></li><li>canvas.<span class="hljs-title function_">drawRect</span>(rect);</li><li><span class="hljs-comment">// 去除描边效果</span></li><li>canvas.<span class="hljs-title function_">detachPen</span>();</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" valign="top" width="50%">原始图</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" valign="top" width="50%">设置模糊效果后的效果图</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="1223" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114405.69270741047633624470903469451851:50001231000000:2800:B0A89F9F3867D74F87973B70EF2301D48D662B19AB32CF1F8C0CB543365965FD.jpg" width="436" height="426.2414068745004"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="1214" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114405.54011170379021213320595863507271:50001231000000:2800:6CF123B85CA38B0A2373ADD75F8179019B02116091B3AAB7F32CEA20A1F71E34.jpg" width="436" height="423.1047162270184"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="蒙版滤波器效果">蒙版滤波器效果<i class="anchor-icon anchor-icon-link" anchorid="蒙版滤波器效果" tips="复制节点链接"></i></h3>          <p>蒙版滤波器的模糊效果仅对透明度和形状边缘进行模糊处理，相对于图像滤波器的模糊效果来说计算成本更低。</p>     <p>蒙版滤波器可基于画笔或画刷实现，蒙版滤波器的相关接口和具体参数的说明请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-maskfilter" target="_blank">MaskFilter</a>。</p>     <p>可使用createBlurMaskFilter()接口创建想要设置具有模糊效果的蒙版滤波器。接口接受2个参数，分别为：</p>     <ul>      <li>       <p>blurType：用于指定要应用的模糊类型，详细分类请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-e#blurtype12" target="_blank">BlurType</a>。</p></li>      <li>       <p>sigma：用于指定要应用的高斯模糊的标准差，标准差必须大于0。</p></li>     </ul>     <p>此处以绘制矩形并使用画笔设置蒙版滤波器效果为例，关键示例和效果示意图如下所示：</p>     <div _ngcontent-rrr-c106="" class="highlight-div"><div _ngcontent-rrr-c106="" class="highlight-div-header"><div _ngcontent-rrr-c106="" class="highlight-div-header-left"><div _ngcontent-rrr-c106="" class="handle-button expand-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rrr-c106="" class="highlight-div-header-right"><div _ngcontent-rrr-c106="" class="handle-button ai-button"></div><div _ngcontent-rrr-c106="" class="handle-button line-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rrr-c106="" class="handle-button theme-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rrr-c106="" class="handle-button copy-button"><div _ngcontent-rrr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rrr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建画笔</span></li><li><span class="hljs-keyword">let</span> pen = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Pen</span>();</li><li><span class="hljs-comment">// 设置线宽</span></li><li>pen.<span class="hljs-title function_">setStrokeWidth</span>(<span class="hljs-number">10.0</span>);</li><li><span class="hljs-comment">// 设置颜色</span></li><li>pen.<span class="hljs-title function_">setColor</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>);</li><li><span class="hljs-comment">// 创建模糊效果的蒙版滤波器</span></li><li><span class="hljs-keyword">let</span> filter = drawing.<span class="hljs-property">MaskFilter</span>.<span class="hljs-title function_">createBlurMaskFilter</span>(drawing.<span class="hljs-property">BlurType</span>.<span class="hljs-property">NORMAL</span>, <span class="hljs-number">20</span>);</li><li><span class="hljs-comment">// 设置模糊效果</span></li><li>pen.<span class="hljs-title function_">setMaskFilter</span>(filter);</li><li><span class="hljs-comment">// 设置画笔描边效果</span></li><li>canvas.<span class="hljs-title function_">attachPen</span>(pen);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">rect</span>: common2D.<span class="hljs-property">Rect</span> = { <span class="hljs-attr">left</span>: <span class="hljs-number">300</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">300</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">900</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">900</span> };</li><li><span class="hljs-comment">// 绘制矩形</span></li><li>canvas.<span class="hljs-title function_">drawRect</span>(rect);</li><li><span class="hljs-comment">// 去除描边效果</span></li><li>canvas.<span class="hljs-title function_">detachPen</span>();</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.1" valign="top" width="50%">原始图</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.2" valign="top" width="50%">设置模糊效果后的效果图</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="1223" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114405.19534193727251599012918253828441:50001231000000:2800:9F20FA62F3E0131DB3EEBCBF660241F1662E5F43A785FAE84BE558DEFEDAC85E.jpg" width="436" height="426.2414068745004"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="1214" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114405.98562935643672223892099413898978:50001231000000:2800:3572D6DBD9B5206A7BD0699BB55DB0AB1ABC1A7ED8029787F4136F208DD0EC4D.jpg" width="436" height="423.1047162270184"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="示例代码">示例代码<i class="anchor-icon anchor-icon-link" anchorid="示例代码" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitcode.com/HarmonyOS_Samples/DocsSample_Graphics/blob/master/ArkGraphics2D/Drawing/ArkTSGraphicsDraw" target="_blank">图形绘制（ArkTS）</a></li>     </ul>    </div>   </div>   <div></div></div>