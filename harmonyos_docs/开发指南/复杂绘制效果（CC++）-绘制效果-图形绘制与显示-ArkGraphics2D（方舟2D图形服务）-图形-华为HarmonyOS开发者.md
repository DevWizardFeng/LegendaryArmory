<h1 _ngcontent-rgc-c119="" class="doc-title ng-star-inserted" title="复杂绘制效果（C/C++）"> 复杂绘制效果（C/C++） </h1>

<div _ngcontent-rgc-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>除了基础填充颜色、描边颜色和一些样式设置的绘制效果外，还支持通过画刷和画笔实现更多复杂的绘制效果。比如：</p>    <ul>     <li>      <p>混合模式。</p></li>     <li>      <p>路径效果，如虚线效果。</p></li>     <li>      <p>着色器效果，如线性渐变、径向渐变等。</p></li>     <li>      <p>滤波效果，如模糊效果等。</p></li>    </ul>    <div class="tiledSection">     <h2 id="混合模式">混合模式<i class="anchor-icon anchor-icon-link" anchorid="混合模式" tips="复制节点链接"></i></h2>          <p>混合模式可以用于画笔或画刷，它定义了如何将源像素（要绘制的内容）与目标像素（已存在于画布上的内容）进行组合。</p>     <p>可以使用OH_Drawing_BrushSetBlendMode()接口将混合模式应用于画刷中，使用OH_Drawing_PenSetBlendMode()接口将混合模式应用于画笔中。这两个接口都需要接受一个参数OH_Drawing_BlendMode，即混合模式的类型，具体可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-drawing-types-h#oh_drawing_blendmode" target="_blank">OH_Drawing_BlendMode</a>。</p>     <p>此处以使用画刷设置叠加混合模式为例（为了防止混合模式的效果被背景色干扰，示例中的canvas并未设置背景色，使用的是默认的黑色背景），关键示例和效果示意图如下所示：</p>     <div _ngcontent-rgc-c106="" class="highlight-div"><div _ngcontent-rgc-c106="" class="highlight-div-header"><div _ngcontent-rgc-c106="" class="highlight-div-header-left"><div _ngcontent-rgc-c106="" class="handle-button expand-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rgc-c106="" class="highlight-div-header-right"><div _ngcontent-rgc-c106="" class="handle-button ai-button"></div><div _ngcontent-rgc-c106="" class="handle-button line-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rgc-c106="" class="handle-button theme-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rgc-c106="" class="handle-button copy-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rgc-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建画刷对象</span></li><li><span class="hljs-variable">OH_Drawing_Brush</span>* <span class="hljs-variable">brush</span> = <span class="hljs-title function_">OH_Drawing_BrushCreate</span>();</li><li><span class="hljs-comment">// 设置目标像素颜色</span></li><li><span class="hljs-title function_">OH_Drawing_BrushSetColor</span>(<span class="hljs-variable">brush</span>, <span class="hljs-title function_">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-comment">// 将目标像素的画刷效果设置到Canvas中</span></li><li><span class="hljs-title function_">OH_Drawing_CanvasAttachBrush</span>(<span class="hljs-variable">canvas</span>, <span class="hljs-variable">brush</span>);</li><li><span class="hljs-comment">// 创建矩形对象</span></li><li><span class="hljs-variable">OH_Drawing_Rect</span> *<span class="hljs-variable">rect</span> = <span class="hljs-title function_">OH_Drawing_RectCreate</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">600</span>, <span class="hljs-number">600</span>);</li><li><span class="hljs-comment">// 绘制矩形（目标像素）</span></li><li><span class="hljs-title function_">OH_Drawing_CanvasDrawRect</span>(<span class="hljs-variable">canvas</span>, <span class="hljs-variable">rect</span>);</li><li><span class="hljs-comment">// 设置源像素颜色</span></li><li><span class="hljs-title function_">OH_Drawing_BrushSetColor</span>(<span class="hljs-variable">brush</span>, <span class="hljs-title function_">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0xFF</span>));</li><li><span class="hljs-comment">// 设置混合模式为叠加模式</span></li><li><span class="hljs-title function_">OH_Drawing_BrushSetBlendMode</span>(<span class="hljs-variable">brush</span>, <span class="hljs-variable">OH_Drawing_BlendMode</span>::<span class="hljs-title class_">BLEND_MODE_PLUS</span>);</li><li><span class="hljs-comment">// 将源像素的画刷效果设置到Canvas中</span></li><li><span class="hljs-title function_">OH_Drawing_CanvasAttachBrush</span>(<span class="hljs-variable">canvas</span>, <span class="hljs-variable">brush</span>);</li><li><span class="hljs-comment">// 创建圆心的点对象</span></li><li><span class="hljs-variable">OH_Drawing_Point</span> *<span class="hljs-variable">point</span> = <span class="hljs-title function_">OH_Drawing_PointCreate</span>(<span class="hljs-number">600</span>, <span class="hljs-number">600</span>);</li><li><span class="hljs-comment">// 绘制圆（源像素）</span></li><li><span class="hljs-title function_">OH_Drawing_CanvasDrawCircle</span>(<span class="hljs-variable">canvas</span>, <span class="hljs-variable">point</span>, <span class="hljs-number">300</span>);</li><li><span class="hljs-comment">// 去除掉画布中的画刷</span></li><li><span class="hljs-title function_">OH_Drawing_CanvasDetachBrush</span>(<span class="hljs-variable">canvas</span>);</li><li><span class="hljs-comment">// 销毁各类对象</span></li><li><span class="hljs-title function_">OH_Drawing_RectDestroy</span>(<span class="hljs-variable">rect</span>);</li><li><span class="hljs-title function_">OH_Drawing_BrushDestroy</span>(<span class="hljs-variable">brush</span>);</li><li><span class="hljs-title function_">OH_Drawing_PointDestroy</span>(<span class="hljs-variable">point</span>);</li></ol></pre></div></div>     <p><span><img originheight="376" originwidth="422" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114409.85888723051329461987525206319322:50001231000000:2800:C19CFCCD0DA02C5ECE985AAD2F7357867C7646DEC600081D1C9F4611E083EB0F.png" width="422" height="376"></span></p>    </div>    <div class="tiledSection">     <h2 id="路径效果">路径效果<i class="anchor-icon anchor-icon-link" anchorid="路径效果" tips="复制节点链接"></i></h2>          <p>路径效果如虚线效果，只用于画笔。</p>     <p>可使用OH_Drawing_CreateDashPathEffect()接口设置路径效果。接口接受3个参数，分别为：</p>     <ul>      <li>       <p>浮点数数组intervals：表示虚线或者点线的间隔。</p></li>      <li>       <p>整数count：表示intervals数组中的元素数量。</p></li>      <li>       <p>浮点数phase：表示在intervals数组中的偏移量，即从数组的哪个位置开始应用虚线或点线效果。</p></li>     </ul>     <p>此处以绘制矩形虚线路径效果为例，关键示例和效果示意图如下所示：</p>     <div _ngcontent-rgc-c106="" class="highlight-div"><div _ngcontent-rgc-c106="" class="highlight-div-header"><div _ngcontent-rgc-c106="" class="highlight-div-header-left"><div _ngcontent-rgc-c106="" class="handle-button expand-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rgc-c106="" class="highlight-div-header-right"><div _ngcontent-rgc-c106="" class="handle-button ai-button"></div><div _ngcontent-rgc-c106="" class="handle-button line-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rgc-c106="" class="handle-button theme-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rgc-c106="" class="handle-button copy-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rgc-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建画笔</span></li><li>OH_Drawing_Pen *pen = <span class="hljs-built_in">OH_Drawing_PenCreate</span>();</li><li><span class="hljs-comment">// 设置画笔描边颜色</span></li><li><span class="hljs-built_in">OH_Drawing_PenSetColor</span>(pen, <span class="hljs-number">0xffff0000</span>);</li><li><span class="hljs-comment">// 设置画笔线宽</span></li><li><span class="hljs-built_in">OH_Drawing_PenSetWidth</span>(pen, <span class="hljs-number">10</span>);</li><li><span class="hljs-comment">// 表示10px的实线，5px的间隔，2px的实线，5px的间隔，以此循环</span></li><li><span class="hljs-type">float</span> intervals[] = {<span class="hljs-number">10</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>};</li><li><span class="hljs-comment">// 设置虚线路径效果</span></li><li>OH_Drawing_PathEffect *pathEffect = <span class="hljs-built_in">OH_Drawing_CreateDashPathEffect</span>(intervals, <span class="hljs-number">4</span>, <span class="hljs-number">0.0</span>);</li><li><span class="hljs-built_in">OH_Drawing_PenSetPathEffect</span>(pen, pathEffect);</li><li><span class="hljs-comment">// 在画布上设置画笔，请确保已获取得到画布对象</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasAttachPen</span>(canvas, pen);</li><li><span class="hljs-comment">// 创建矩形</span></li><li>OH_Drawing_Rect *rect = <span class="hljs-built_in">OH_Drawing_RectCreate</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">900</span>, <span class="hljs-number">900</span>);</li><li><span class="hljs-comment">// 绘制矩形</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasDrawRect</span>(canvas, rect);</li><li><span class="hljs-comment">// 去除掉画布中的画笔</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasDetachPen</span>(canvas);</li><li><span class="hljs-comment">// 销毁各类对象</span></li><li><span class="hljs-built_in">OH_Drawing_PenDestroy</span>(pen);</li><li><span class="hljs-built_in">OH_Drawing_RectDestroy</span>(rect);</li><li><span class="hljs-built_in">OH_Drawing_PathEffectDestroy</span>(pathEffect);</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.3.1.1" valign="top" width="50%">不设置虚线路径效果的示意图</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.3.1.2" valign="top" width="50%">设置虚线效果的示意图</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="371" originwidth="378" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114409.94405573583120989283402196508100:50001231000000:2800:B27D7BC344CF5319626C0090B38A9E2EC106B42574260148336E657E50434338.png" width="378" height="371"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="369" originwidth="384" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114409.05698586433242849027705009148012:50001231000000:2800:E7B8BE014A1D4508B7051DF2E8A5F3361BBC84C79BD3C0EC955D5CAE93C5881B.png" width="384" height="369"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="着色器效果">着色器效果<i class="anchor-icon anchor-icon-link" anchorid="着色器效果" tips="复制节点链接"></i></h2>          <p>着色器效果基于画刷或画笔实现，可使用OH_Drawing_BrushSetShaderEffect()接口设置画刷的着色器效果，或者使用 OH_Drawing_PenSetShaderEffect()接口设置画笔的着色器效果。当前支持不同的着色器效果，如线性渐变着色器效果、径向渐变着色器效果、扇形渐变着色器效果。</p>     <p>着色器相关接口和具体参数的说明请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-drawing-shader-effect-h" target="_blank">drawing_shader_effect</a>。</p>    </div>    <div class="tiledSection">     <h3 id="线性渐变着色器效果" class="firsth2">线性渐变着色器效果<i class="anchor-icon anchor-icon-link" anchorid="线性渐变着色器效果" tips="复制节点链接"></i></h3>          <p>可使用OH_Drawing_ShaderEffectCreateLinearGradient()接口创建想要设置的线性渐变着色器效果。接口接受6个参数，分别为开始点、结束点、颜色数组、相对位置数组、颜色数组的大小以及平铺模式。</p>     <ul>      <li>       <p>开始点和结束点用来确定渐变方向。</p></li>      <li>       <p>颜色数组用于存储渐变使用到的颜色。</p></li>      <li>       <p>相对位置数组则用于确定每种颜色在渐变中的相对位置，如果相对位置为空，颜色将会被均匀地分布在开始点和结束点之间。</p></li>      <li>       <p>平铺模式用于确定如何在渐变区域之外继续渐变效果，平铺模式分为以下4类：</p>       <ul>        <li>CLAMP：当图像超出其原始边界时，复制边缘颜色。</li>        <li>REPEAT：在水平和垂直方向上重复图像。</li>        <li>MIRROR：在水平和垂直方向上重复图像，并在相邻的图像之间交替使用镜像图像。</li>        <li>DECAL：只在原始域内绘制，在其他地方返回透明黑色。</li>       </ul></li>     </ul>     <p>此处以绘制矩形并使用画刷设置线性渐变着色器效果为例，关键示例和效果示意图如下所示：</p>     <div _ngcontent-rgc-c106="" class="highlight-div"><div _ngcontent-rgc-c106="" class="highlight-div-header"><div _ngcontent-rgc-c106="" class="highlight-div-header-left"><div _ngcontent-rgc-c106="" class="handle-button expand-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rgc-c106="" class="highlight-div-header-right"><div _ngcontent-rgc-c106="" class="handle-button ai-button"></div><div _ngcontent-rgc-c106="" class="handle-button line-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rgc-c106="" class="handle-button theme-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rgc-c106="" class="handle-button copy-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rgc-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 开始点</span></li><li>OH_Drawing_Point *startPt = <span class="hljs-built_in">OH_Drawing_PointCreate</span>(<span class="hljs-number">20</span>, <span class="hljs-number">20</span>);</li><li><span class="hljs-comment">// 结束点</span></li><li>OH_Drawing_Point *endPt = <span class="hljs-built_in">OH_Drawing_PointCreate</span>(<span class="hljs-number">900</span>, <span class="hljs-number">900</span>);</li><li><span class="hljs-comment">// 颜色数组</span></li><li><span class="hljs-type">uint32_t</span> colors[] = {<span class="hljs-number">0xFFFFFF00</span>, <span class="hljs-number">0xFFFF0000</span>, <span class="hljs-number">0xFF0000FF</span>};</li><li><span class="hljs-comment">// 相对位置数组</span></li><li><span class="hljs-type">float</span> pos[] = {<span class="hljs-number">0.0f</span>, <span class="hljs-number">0.5f</span>, <span class="hljs-number">1.0f</span>};</li><li><span class="hljs-comment">// 创建线性渐变着色器效果</span></li><li>OH_Drawing_ShaderEffect *colorShaderEffect =</li><li>    <span class="hljs-built_in">OH_Drawing_ShaderEffectCreateLinearGradient</span>(startPt, endPt, colors, pos, <span class="hljs-number">3</span>, OH_Drawing_TileMode::CLAMP);</li><li><span class="hljs-comment">// 创建画刷对象</span></li><li>OH_Drawing_Brush* brush = <span class="hljs-built_in">OH_Drawing_BrushCreate</span>();</li><li><span class="hljs-comment">// 基于画刷设置着色器效果</span></li><li><span class="hljs-built_in">OH_Drawing_BrushSetShaderEffect</span>(brush, colorShaderEffect);</li><li><span class="hljs-comment">// 在画布上设置画刷，请确保已获取得到画布对象</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasAttachBrush</span>(canvas, brush);</li><li>OH_Drawing_Rect *rect = <span class="hljs-built_in">OH_Drawing_RectCreate</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">900</span>, <span class="hljs-number">900</span>);</li><li> <span class="hljs-comment">// 绘制矩形</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasDrawRect</span>(canvas, rect);</li><li><span class="hljs-comment">// 去除掉画布中的画刷</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasDetachBrush</span>(canvas);</li><li><span class="hljs-comment">// 销毁各类对象</span></li><li><span class="hljs-built_in">OH_Drawing_BrushDestroy</span>(brush);</li><li><span class="hljs-built_in">OH_Drawing_RectDestroy</span>(rect);</li><li><span class="hljs-built_in">OH_Drawing_ShaderEffectDestroy</span>(colorShaderEffect);</li><li><span class="hljs-built_in">OH_Drawing_PointDestroy</span>(startPt);</li><li><span class="hljs-built_in">OH_Drawing_PointDestroy</span>(endPt);</li></ol></pre></div></div>     <p>此例绘制的具有线性渐变着色器效果的矩形如下所示：</p>     <p><span><img originheight="412" originwidth="466" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114409.23745469767650852745392271494132:50001231000000:2800:25CE45C2EB14F311589B0449E469AF5089610A20575690C36743C88A521E22BC.png" width="466" height="412"></span></p>    </div>    <div class="tiledSection">     <h3 id="径向渐变着色器效果">径向渐变着色器效果<i class="anchor-icon anchor-icon-link" anchorid="径向渐变着色器效果" tips="复制节点链接"></i></h3>          <p>可使用OH_Drawing_ShaderEffectCreateRadialGradient()接口创建想要设置的径向渐变着色器效果。接口接受6个参数，分别为圆心坐标（centerPt）、半径（radius）、颜色数组（colors）、相对位置数组（pos）、颜色和位置的数量（size）以及平铺模式（OH_Drawing_TileMode）。</p>     <p>其实现方式与线性渐变着色器类似，不同的是，径向渐变是由圆心开始向外径向渐变的。</p>     <p>此处以绘制矩形并使用画刷设置径向渐变着色器效果为例，关键示例和效果示意图如下所示：</p>     <div _ngcontent-rgc-c106="" class="highlight-div"><div _ngcontent-rgc-c106="" class="highlight-div-header"><div _ngcontent-rgc-c106="" class="highlight-div-header-left"><div _ngcontent-rgc-c106="" class="handle-button expand-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rgc-c106="" class="highlight-div-header-right"><div _ngcontent-rgc-c106="" class="handle-button ai-button"></div><div _ngcontent-rgc-c106="" class="handle-button line-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rgc-c106="" class="handle-button theme-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rgc-c106="" class="handle-button copy-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rgc-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 圆心坐标</span></li><li>OH_Drawing_Point *centerPt = <span class="hljs-built_in">OH_Drawing_PointCreate</span>(<span class="hljs-number">500</span>, <span class="hljs-number">500</span>);</li><li><span class="hljs-comment">// 半径</span></li><li><span class="hljs-type">float</span> radius = <span class="hljs-number">600</span>;</li><li><span class="hljs-comment">// 颜色数组</span></li><li><span class="hljs-type">uint32_t</span> gColors[] = {<span class="hljs-number">0xFFFF0000</span>, <span class="hljs-number">0xFF00FF00</span>, <span class="hljs-number">0xFF0000FF</span>};</li><li><span class="hljs-comment">// 相对位置数组</span></li><li><span class="hljs-type">float</span> gPos[] = {<span class="hljs-number">0.0f</span>, <span class="hljs-number">0.25f</span>, <span class="hljs-number">0.75f</span>};</li><li><span class="hljs-comment">// 创建径向渐变着色器效果</span></li><li>OH_Drawing_ShaderEffect *colorShaderEffect =</li><li>    <span class="hljs-built_in">OH_Drawing_ShaderEffectCreateRadialGradient</span>(centerPt, radius, gColors, gPos, <span class="hljs-number">3</span>, OH_Drawing_TileMode::REPEAT);</li><li><span class="hljs-comment">// 创建画刷对象</span></li><li>OH_Drawing_Brush* brush = <span class="hljs-built_in">OH_Drawing_BrushCreate</span>();</li><li><span class="hljs-comment">// 基于画刷设置着色器效果</span></li><li><span class="hljs-built_in">OH_Drawing_BrushSetShaderEffect</span>(brush, colorShaderEffect);</li><li><span class="hljs-comment">// 在画布上设置画刷，请确保已获取得到画布对象</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasAttachBrush</span>(canvas, brush);</li><li>OH_Drawing_Rect *rect = <span class="hljs-built_in">OH_Drawing_RectCreate</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">900</span>, <span class="hljs-number">900</span>);</li><li> <span class="hljs-comment">// 绘制矩形</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasDrawRect</span>(canvas, rect);</li><li><span class="hljs-comment">// 去除掉画布中的画刷</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasDetachBrush</span>(canvas);</li><li><span class="hljs-comment">// 销毁各类对象</span></li><li><span class="hljs-built_in">OH_Drawing_BrushDestroy</span>(brush);</li><li><span class="hljs-built_in">OH_Drawing_RectDestroy</span>(rect);</li><li><span class="hljs-built_in">OH_Drawing_ShaderEffectDestroy</span>(colorShaderEffect);</li><li><span class="hljs-built_in">OH_Drawing_PointDestroy</span>(centerPt);</li></ol></pre></div></div>     <p>此例绘制的具有径向渐变着色器效果的矩形如下所示：</p>     <p><span><img originheight="425" originwidth="487" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114409.78302859483426952737032591308573:50001231000000:2800:CFC56B36A24466CEAB167089BA96D6E3D2A82B834CB0EC098DD174BD57D45ABB.png" width="487" height="425"></span></p>    </div>    <div class="tiledSection">     <h3 id="扇形渐变着色器效果">扇形渐变着色器效果<i class="anchor-icon anchor-icon-link" anchorid="扇形渐变着色器效果" tips="复制节点链接"></i></h3>          <p>可使用OH_Drawing_ShaderEffectCreateSweepGradient()接口创建想要设置的扇形渐变着色器效果。接口接受5个参数，分别是中心点、颜色数组、相对位置数组、颜色和相对位置的数量以及平铺模式。</p>     <p>其实现方式也与线性渐变着色器类似，不同的是，扇形渐变是在围绕中心点旋转的过程中渐变。</p>     <p>此处以绘制矩形并使用画刷设置扇形渐变着色器效果为例，关键示例和效果示意图如下所示：</p>     <div _ngcontent-rgc-c106="" class="highlight-div"><div _ngcontent-rgc-c106="" class="highlight-div-header"><div _ngcontent-rgc-c106="" class="highlight-div-header-left"><div _ngcontent-rgc-c106="" class="handle-button expand-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rgc-c106="" class="highlight-div-header-right"><div _ngcontent-rgc-c106="" class="handle-button ai-button"></div><div _ngcontent-rgc-c106="" class="handle-button line-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rgc-c106="" class="handle-button theme-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rgc-c106="" class="handle-button copy-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rgc-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 中心点</span></li><li>OH_Drawing_Point *centerPt = <span class="hljs-built_in">OH_Drawing_PointCreate</span>(<span class="hljs-number">500</span>, <span class="hljs-number">500</span>);</li><li><span class="hljs-comment">// 颜色数组</span></li><li><span class="hljs-type">uint32_t</span> colors[<span class="hljs-number">3</span>] = {<span class="hljs-number">0xFF00FFFF</span>, <span class="hljs-number">0xFFFF00FF</span>, <span class="hljs-number">0xFFFFFF00</span>};</li><li><span class="hljs-comment">// 相对位置数组</span></li><li><span class="hljs-type">float</span> pos[<span class="hljs-number">3</span>] = {<span class="hljs-number">0.0f</span>, <span class="hljs-number">0.5f</span>, <span class="hljs-number">1.0f</span>};</li><li><span class="hljs-comment">// 创建扇形渐变着色器效果</span></li><li>OH_Drawing_ShaderEffect* colorShaderEffect =</li><li>    <span class="hljs-built_in">OH_Drawing_ShaderEffectCreateSweepGradient</span>(centerPt, colors, pos, <span class="hljs-number">3</span>, OH_Drawing_TileMode::CLAMP);</li><li><span class="hljs-comment">// 创建画刷对象</span></li><li>OH_Drawing_Brush* brush = <span class="hljs-built_in">OH_Drawing_BrushCreate</span>();</li><li><span class="hljs-comment">// 基于画刷设置着色器效果</span></li><li><span class="hljs-built_in">OH_Drawing_BrushSetShaderEffect</span>(brush, colorShaderEffect);</li><li><span class="hljs-comment">// 在画布上设置画刷，请确保已获取得到画布对象</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasAttachBrush</span>(canvas, brush);</li><li>OH_Drawing_Rect *rect = <span class="hljs-built_in">OH_Drawing_RectCreate</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">900</span>, <span class="hljs-number">900</span>);</li><li> <span class="hljs-comment">// 绘制矩形</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasDrawRect</span>(canvas, rect);</li><li><span class="hljs-comment">// 去除掉画布中的画刷</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasDetachBrush</span>(canvas);</li><li><span class="hljs-comment">// 销毁各类对象</span></li><li><span class="hljs-built_in">OH_Drawing_BrushDestroy</span>(brush);</li><li><span class="hljs-built_in">OH_Drawing_RectDestroy</span>(rect);</li><li><span class="hljs-built_in">OH_Drawing_ShaderEffectDestroy</span>(colorShaderEffect);</li><li><span class="hljs-built_in">OH_Drawing_PointDestroy</span>(centerPt);</li></ol></pre></div></div>     <p>此例绘制的具有扇形渐变着色器效果的矩形如下所示：</p>     <p><span><img originheight="441" originwidth="466" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114409.78575123152949568885382788628444:50001231000000:2800:77F312B32E6734D89BEDBC77F696E00E58EE88EEF8C61322A39438FEDFDCA8E9.png" width="466" height="441"></span></p>    </div>    <div class="tiledSection">     <h2 id="滤波器效果">滤波器效果<i class="anchor-icon anchor-icon-link" anchorid="滤波器效果" tips="复制节点链接"></i></h2>          <p>滤波器效果可基于画刷或画笔实现。可使用OH_Drawing_PenSetFilter()接口设置画笔的滤波器效果，或者使用OH_Drawing_BrushSetFilter()接口设置画刷的滤波器效果。当前支持不同的滤波器效果，比如图像滤波器、颜色滤波器、蒙版滤波器。</p>     <p>滤波器相关接口和具体参数的说明请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-drawing-filter-h" target="_blank">drawing_filter.h</a>。</p>    </div>    <div class="tiledSection">     <h3 id="颜色滤波器效果" class="firsth2">颜色滤波器效果<i class="anchor-icon anchor-icon-link" anchorid="颜色滤波器效果" tips="复制节点链接"></i></h3>          <p>颜色滤波器可基于画笔或画刷实现，颜色滤波器的相关接口和具体参数的说明请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-drawing-color-filter-h" target="_blank">drawing_color_filter.h</a>。</p>     <p>目前可实现多种颜色滤波器，包括如下：</p>     <ul>      <li>       <p>具有混合模式的颜色滤波器。</p></li>      <li>       <p>具有5x4颜色矩阵的颜色滤波器。</p></li>      <li>       <p>将SRGB的伽玛曲线应用到RGB颜色通道的颜色滤波器。</p></li>      <li>       <p>将RGB颜色通道应用于SRGB的伽玛曲线的颜色滤波器。</p></li>      <li>       <p>将其输入的亮度值乘以透明度通道， 并将红色、绿色和蓝色通道设置为零的颜色滤波器。</p></li>      <li>       <p>由两个颜色滤波器组合而成的颜色滤波器。</p></li>     </ul>     <p>此处以具有5x4颜色矩阵的颜色滤波器为例。</p>     <p>可使用OH_Drawing_ColorFilterCreateMatrix()接口创建具有5x4颜色矩阵的颜色滤波器。接口接受1个参数，表示为颜色矩阵，它是一个长度为20的浮点数数组。数组格式如下：</p>     <p>[ a0, a1, a2, a3, a4 ]</p>     <p>[ b0, b1, b2, b3, b4 ]</p>     <p>[ c0, c1, c2, c3, c4 ]</p>     <p>[ d0, d1, d2, d3, d4 ]</p>     <p>对于每个原始的像素颜色色值（R, G, B, A），变换后的色值（R', G', B', A'）计算公式为：</p>     <p>R' = a0*R + a1*G + a2*B + a3*A + a4</p>     <p>G' = b0*R + b1*G + b2*B + b3*A + b4</p>     <p>B' = c0*R + c1*G + c2*B + c3*A + c4</p>     <p>A' = d0*R + d1*G + d2*B + d3*A + d4</p>     <p>此处以绘制矩形并使用画刷设置具有5x4颜色矩阵的颜色滤波器效果为例，关键示例和效果示意图如下所示：</p>     <div _ngcontent-rgc-c106="" class="highlight-div"><div _ngcontent-rgc-c106="" class="highlight-div-header"><div _ngcontent-rgc-c106="" class="highlight-div-header-left"><div _ngcontent-rgc-c106="" class="handle-button expand-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rgc-c106="" class="highlight-div-header-right"><div _ngcontent-rgc-c106="" class="handle-button ai-button"></div><div _ngcontent-rgc-c106="" class="handle-button line-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rgc-c106="" class="handle-button theme-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rgc-c106="" class="handle-button copy-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rgc-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建画刷</span></li><li>OH_Drawing_Brush *brush = <span class="hljs-built_in">OH_Drawing_BrushCreate</span>();</li><li><span class="hljs-comment">// 设置画刷抗锯齿</span></li><li><span class="hljs-built_in">OH_Drawing_BrushSetAntiAlias</span>(brush, <span class="hljs-literal">true</span>);</li><li><span class="hljs-comment">// 设置画刷填充颜色</span></li><li><span class="hljs-built_in">OH_Drawing_BrushSetColor</span>(brush, <span class="hljs-number">0xffff0000</span>);</li><li><span class="hljs-comment">// 设置颜色矩阵</span></li><li><span class="hljs-type">const</span> <span class="hljs-type">float</span> matrix[<span class="hljs-number">20</span>] = {</li><li>    <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,</li><li>    <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,</li><li>    <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5f</span>, <span class="hljs-number">0.5f</span>, <span class="hljs-number">0</span>,</li><li>    <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5f</span>, <span class="hljs-number">0.5f</span>, <span class="hljs-number">0</span></li><li>};</li><li>
</li><li><span class="hljs-comment">// 创建滤波器颜色</span></li><li>OH_Drawing_ColorFilter* colorFilter = <span class="hljs-built_in">OH_Drawing_ColorFilterCreateMatrix</span>(matrix);</li><li><span class="hljs-comment">// 创建一个滤波器对象</span></li><li>OH_Drawing_Filter *filter = <span class="hljs-built_in">OH_Drawing_FilterCreate</span>();</li><li><span class="hljs-comment">// 为滤波器对象设置颜色滤波器</span></li><li><span class="hljs-built_in">OH_Drawing_FilterSetColorFilter</span>(filter, colorFilter);</li><li><span class="hljs-comment">// 设置画刷的滤波器效果</span></li><li><span class="hljs-built_in">OH_Drawing_BrushSetFilter</span>(brush, filter);</li><li><span class="hljs-comment">// 在画布上设置画刷，请确保已获取得到画布对象</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasAttachBrush</span>(canvas, brush);</li><li><span class="hljs-comment">// 创建矩形</span></li><li>OH_Drawing_Rect *rect = <span class="hljs-built_in">OH_Drawing_RectCreate</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">900</span>, <span class="hljs-number">900</span>);</li><li><span class="hljs-comment">// 绘制矩形</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasDrawRect</span>(canvas, rect);</li><li><span class="hljs-comment">// 去除掉画布中的画刷</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasDetachBrush</span>(canvas);</li><li><span class="hljs-comment">// 销毁各类对象</span></li><li><span class="hljs-built_in">OH_Drawing_BrushDestroy</span>(brush);</li><li><span class="hljs-built_in">OH_Drawing_ColorFilterDestroy</span>(colorFilter);</li><li><span class="hljs-built_in">OH_Drawing_RectDestroy</span>(rect);</li><li><span class="hljs-built_in">OH_Drawing_FilterDestroy</span>(filter);</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.18.1.3.1.1" valign="top" width="50%">不设置颜色滤波器效果的示意图</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.18.1.3.1.2" valign="top" width="50%">设置5x4颜色矩阵的颜色滤波器效果的示意图</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="336" originwidth="326" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114410.58424874730944612225923508688580:50001231000000:2800:425DC1E27F816E87904B3887064172468CCF542AB25D3F916ABD66B33DAAABD1.png" width="326" height="336"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="342" originwidth="310" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114410.66513080915887841355202212202079:50001231000000:2800:9D5EE19EE49EB74266597DD4C9436D453C7453EAD9451E8DB5C30AD3DAC1747D.png" width="310" height="342"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="图像滤波器效果">图像滤波器效果<i class="anchor-icon anchor-icon-link" anchorid="图像滤波器效果" tips="复制节点链接"></i></h3>          <p>图像滤波器可基于画笔或画刷来实现，图像滤波器的相关接口和具体参数的说明请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-drawing-image-filter-h" target="_blank">drawing_image_filter.h</a>。</p>     <p>目前只支持两种图像滤波器：</p>     <ul>      <li>       <p>基于颜色滤波器的图像滤波器。</p>       <p>可通过OH_Drawing_ImageFilterCreateFromColorFilter()接口实现，接口接受2个参数，颜色滤波器colorFilter和图像滤波器input，即把颜色滤波器的效果叠加到图像滤波器input上，input可为空，input为空则只添加颜色滤波器效果。</p></li>      <li>       <p>具有模糊效果的图像滤波器。</p>       <p>可通过OH_Drawing_ImageFilterCreateBlur()接口实现，接口接受4个参数，分别为X轴上的模糊标准差、Y轴上的模糊标准差、平铺模式和图像滤波器（input）。</p>       <p>最终效果即为在输入的图像滤波器（input）的基础上进行模糊化处理，即滤波器效果可叠加，input可为空，input为空则只添加模糊效果。</p></li>     </ul>     <p>此处以绘制矩形并使用画笔添加模糊效果的图像滤波器效果为例，关键示例和效果示意图如下所示：</p>     <div _ngcontent-rgc-c106="" class="highlight-div"><div _ngcontent-rgc-c106="" class="highlight-div-header"><div _ngcontent-rgc-c106="" class="highlight-div-header-left"><div _ngcontent-rgc-c106="" class="handle-button expand-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rgc-c106="" class="highlight-div-header-right"><div _ngcontent-rgc-c106="" class="handle-button ai-button"></div><div _ngcontent-rgc-c106="" class="handle-button line-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rgc-c106="" class="handle-button theme-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rgc-c106="" class="handle-button copy-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rgc-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建画笔</span></li><li>OH_Drawing_Pen *pen = <span class="hljs-built_in">OH_Drawing_PenCreate</span>();</li><li><span class="hljs-comment">// 设置画笔抗锯齿</span></li><li><span class="hljs-built_in">OH_Drawing_PenSetAntiAlias</span>(pen, <span class="hljs-literal">true</span>);</li><li><span class="hljs-comment">// 设置画笔描边颜色</span></li><li><span class="hljs-built_in">OH_Drawing_PenSetColor</span>(pen, <span class="hljs-number">0xffff0000</span>);</li><li><span class="hljs-comment">// 设置画笔线宽</span></li><li><span class="hljs-built_in">OH_Drawing_PenSetWidth</span>(pen, <span class="hljs-number">20</span>);</li><li><span class="hljs-comment">// 创建图像滤波器实现模糊效果</span></li><li>OH_Drawing_ImageFilter *imageFilter =</li><li>    <span class="hljs-built_in">OH_Drawing_ImageFilterCreateBlur</span>(<span class="hljs-number">20.0f</span>, <span class="hljs-number">20.0f</span>, OH_Drawing_TileMode::CLAMP, <span class="hljs-literal">nullptr</span>);</li><li><span class="hljs-comment">// 创建一个滤波器对象</span></li><li>OH_Drawing_Filter *filter = <span class="hljs-built_in">OH_Drawing_FilterCreate</span>();</li><li><span class="hljs-comment">// 为滤波器对象设置图像滤波器</span></li><li><span class="hljs-built_in">OH_Drawing_FilterSetImageFilter</span>(filter, imageFilter);</li><li><span class="hljs-comment">// 设置画笔的滤波器效果</span></li><li><span class="hljs-built_in">OH_Drawing_PenSetFilter</span>(pen, filter);</li><li><span class="hljs-comment">// 在画布上设置画笔，请确保已获取得到画布对象</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasAttachPen</span>(canvas, pen);</li><li><span class="hljs-comment">// 创建矩形</span></li><li>OH_Drawing_Rect *rect = <span class="hljs-built_in">OH_Drawing_RectCreate</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">900</span>, <span class="hljs-number">900</span>);</li><li><span class="hljs-comment">// 绘制矩形</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasDrawRect</span>(canvas, rect);</li><li><span class="hljs-comment">// 去除掉画布中的画笔</span></li><li><span class="hljs-built_in">OH_Drawing_CanvasDetachPen</span>(canvas);</li><li><span class="hljs-comment">// 销毁各类对象</span></li><li><span class="hljs-built_in">OH_Drawing_PenDestroy</span>(pen);</li><li><span class="hljs-built_in">OH_Drawing_ImageFilterDestroy</span>(imageFilter);</li><li><span class="hljs-built_in">OH_Drawing_RectDestroy</span>(rect);</li><li><span class="hljs-built_in">OH_Drawing_FilterDestroy</span>(filter);</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" valign="top" width="50%">不设置图像滤波器效果的示意图</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" valign="top" width="50%">设置图像滤波器效果的示意图</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="370" originwidth="367" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114410.62225068181121435195298772712662:50001231000000:2800:FBCACDA7A6E678F9C702F3A417FF50F54FDFB6B97A56996668479984BE539E5B.png" width="367" height="370"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="358" originwidth="367" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114410.70986020228192331378556202006766:50001231000000:2800:FC51460226DC670A065C28C24A07AD507561D3A1C8B791C21FC8956100293081.png" width="367" height="358"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="蒙版滤波器效果">蒙版滤波器效果<i class="anchor-icon anchor-icon-link" anchorid="蒙版滤波器效果" tips="复制节点链接"></i></h3>          <p>蒙版滤波器的模糊效果仅对透明度和形状边缘进行模糊处理，相对于图像滤波器的模糊效果来说计算成本更低。</p>     <p>蒙版滤波器可基于画笔或画刷实现，蒙版滤波器的相关接口和具体参数的说明请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-drawing-mask-filter-h" target="_blank">drawing_mask_filter.h</a>。</p>     <p>可使用OH_Drawing_MaskFilterCreateBlur()接口创建想要设置具有模糊效果的蒙版滤波器。接口接受3个参数，分别为：</p>     <ul>      <li>       <p>blurType：用于指定要应用的模糊类型，详细分类请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-drawing-mask-filter-h#oh_drawing_blurtype" target="_blank">OH_Drawing_BlurType</a>。</p></li>      <li>       <p>sigma：用于指定要应用的高斯模糊的标准差，标准差必须大于0。</p></li>      <li>       <p>respectCTM：指定模糊的标准差是否会被CTM（coordinate transformation matrix，坐标变换矩阵）修改，默认为true，表示会被对应修改。</p></li>     </ul>     <p>此处以绘制矩形并使用画笔设置蒙版滤波器效果为例，关键示例和效果示意图如下所示：</p>     <div _ngcontent-rgc-c106="" class="highlight-div"><div _ngcontent-rgc-c106="" class="highlight-div-header"><div _ngcontent-rgc-c106="" class="highlight-div-header-left"><div _ngcontent-rgc-c106="" class="handle-button expand-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rgc-c106="" class="highlight-div-header-right"><div _ngcontent-rgc-c106="" class="handle-button ai-button"></div><div _ngcontent-rgc-c106="" class="handle-button line-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rgc-c106="" class="handle-button theme-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rgc-c106="" class="handle-button copy-button"><div _ngcontent-rgc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rgc-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-php" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建画笔</span></li><li>OH_Drawing_Pen *pen = <span class="hljs-title function_ invoke__">OH_Drawing_PenCreate</span>();</li><li><span class="hljs-comment">// 设置画笔抗锯齿</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_PenSetAntiAlias</span>(pen, <span class="hljs-literal">true</span>);</li><li><span class="hljs-comment">// 设置画笔描边颜色</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_PenSetColor</span>(pen, <span class="hljs-number">0xffff0000</span>);</li><li><span class="hljs-comment">// 设置画笔线宽</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_PenSetWidth</span>(pen, <span class="hljs-number">20</span>);</li><li><span class="hljs-comment">// 创建蒙版滤波器</span></li><li>OH_Drawing_MaskFilter *maskFilter = <span class="hljs-title function_ invoke__">OH_Drawing_MaskFilterCreateBlur</span>(<span class="hljs-title class_">OH_Drawing_BlurType</span>::<span class="hljs-variable constant_">NORMAL</span>, <span class="hljs-number">20</span>, <span class="hljs-literal">true</span>);</li><li><span class="hljs-comment">// 创建一个滤波器对象</span></li><li>OH_Drawing_Filter *filter = <span class="hljs-title function_ invoke__">OH_Drawing_FilterCreate</span>();</li><li><span class="hljs-comment">// 为滤波器对象设置蒙版滤波器</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_FilterSetMaskFilter</span>(filter, maskFilter);</li><li><span class="hljs-comment">// 设置画笔的滤波器效果</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_PenSetFilter</span>(pen, filter);</li><li><span class="hljs-comment">// 在画布上设置画笔，请确保已获取得到画布对象</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_CanvasAttachPen</span>(canvas, pen);</li><li><span class="hljs-comment">// 创建矩形</span></li><li>OH_Drawing_Rect *rect = <span class="hljs-title function_ invoke__">OH_Drawing_RectCreate</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">900</span>, <span class="hljs-number">900</span>);</li><li><span class="hljs-comment">// 绘制矩形</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_CanvasDrawRect</span>(canvas, rect);</li><li><span class="hljs-comment">// 去除掉画布中的画笔</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_CanvasDetachPen</span>(canvas);</li><li><span class="hljs-comment">// 销毁各类对象</span></li><li><span class="hljs-title function_ invoke__">OH_Drawing_PenDestroy</span>(pen);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_MaskFilterDestroy</span>(maskFilter);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_RectDestroy</span>(rect);</li><li><span class="hljs-title function_ invoke__">OH_Drawing_FilterDestroy</span>(filter);</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.1" valign="top" width="50%">不设置蒙版滤波器效果的示意图</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.2" valign="top" width="50%">设置蒙版滤波器效果的示意图</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="336" originwidth="358" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114410.08642354757149766101184241313703:50001231000000:2800:867947A7F708D60DF580BBF9593187E24A1A577AB2E58C20A9B1A47A6E547491.png" width="358" height="336"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="342" originwidth="360" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114410.25048692389096844647328806601551:50001231000000:2800:1F2B66FFB4F6B9A58ED8AE214C5C6281D4CEAD8C356F62842489958CE93214AC.png" width="360" height="342"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="示例代码">示例代码<i class="anchor-icon anchor-icon-link" anchorid="示例代码" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitcode.com/HarmonyOS_Samples/DocsSample_Graphics/tree/master/ArkGraphics2D/Drawing/NDKAPIDrawing" target="_blank">图形绘制（C/C++）</a></li>     </ul>    </div>   </div>   <div></div></div>