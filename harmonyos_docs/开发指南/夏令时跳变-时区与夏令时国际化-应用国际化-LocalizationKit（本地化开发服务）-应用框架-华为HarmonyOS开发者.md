<h1 _ngcontent-pmp-c119="" class="doc-title ng-star-inserted" title="夏令时跳变"> 夏令时跳变 </h1>

<div _ngcontent-pmp-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="功能介绍">功能介绍<i class="anchor-icon anchor-icon-link" anchorid="功能介绍" tips="复制节点链接"></i></h2><p>夏令时是一种为节约能源而规定的地方时间制度，即在天亮早的夏季人为将时间调快一段时间，使人们早起早睡，减少照明时间，从而节约照明用电。</p> </div>  <div class="tiledSection"><h2 id="实现原理">实现原理<i class="anchor-icon anchor-icon-link" anchorid="实现原理" tips="复制节点链接"></i></h2><p>系统会配置夏令时跳变规则，当系统时间到达跳变点时，会自动实现跳变。如果应用通过标准的TS接口（例如 Date()）获取和显示时间，则到夏令时跳变时间点时，应用会同步显示夏令时时间。</p> <p><strong>夏令时跳变规则如下：</strong></p> <ol><li><p>计算一天的小时数。</p> <p>一整天的小时数在夏令时跳变的当天会发生变化，并非24小时。例如，在大多数国家，夏令时开始的当天，一整天时间为23小时；夏令时结束的当天，一整天时间为25小时。</p>  <p>计算夏令时跳变前后挂钟时间之间相差的小时数，示例代码如下：</p>  <div _ngcontent-pmp-c106="" class="highlight-div"><div _ngcontent-pmp-c106="" class="highlight-div-header"><div _ngcontent-pmp-c106="" class="highlight-div-header-left"><div _ngcontent-pmp-c106="" class="handle-button expand-button"><div _ngcontent-pmp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pmp-c106="" class="highlight-div-header-right"><div _ngcontent-pmp-c106="" class="handle-button ai-button"></div><div _ngcontent-pmp-c106="" class="handle-button line-button"><div _ngcontent-pmp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pmp-c106="" class="handle-button theme-button"><div _ngcontent-pmp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pmp-c106="" class="handle-button copy-button"><div _ngcontent-pmp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pmp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { i18n } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">calendar</span>: i18n.<span class="hljs-property">Calendar</span> = i18n.<span class="hljs-title function_">getCalendar</span>(<span class="hljs-string">'zh-Hans'</span>);</li><li>calendar.<span class="hljs-title function_">setTimeZone</span>(<span class="hljs-string">'Europe/London'</span>);</li><li>calendar.<span class="hljs-title function_">set</span>(<span class="hljs-number">2021</span>, <span class="hljs-number">2</span>, <span class="hljs-number">27</span>, <span class="hljs-number">16</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">// 夏令时开始前的时间</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">startTime</span>: <span class="hljs-built_in">number</span> = calendar.<span class="hljs-title function_">getTimeInMillis</span>();</li><li>calendar.<span class="hljs-title function_">set</span>(<span class="hljs-number">2021</span>, <span class="hljs-number">2</span>, <span class="hljs-number">28</span>, <span class="hljs-number">16</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">// 处于夏令时期间的时间</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">finishTime</span>: <span class="hljs-built_in">number</span> = calendar.<span class="hljs-title function_">getTimeInMillis</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">hours</span>: <span class="hljs-built_in">number</span> = (finishTime - startTime) / (<span class="hljs-number">3600</span> * <span class="hljs-number">1000</span>); <span class="hljs-comment">// hours = 23</span></li></ol></pre></div></div>  </li><li><p>存储和显示数据。</p> <p>按当地夏令时计时规则，存储和显示数据，需要处理夏令时跳变带来的时间空缺和重复。</p>  <p>夏令时跳入将导致一段时间空缺，例如1:59:59跳转到3:00:00；夏令时跳出将导致一段时间重复，例如3:59:59回退到3:00:00。</p>  <p>在夏令时内，本地时间显示建议添加夏令时标识。</p>  <p><span><img originheight="460" originwidth="1207" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114823.77107037644304939887536417860418:50001231000000:2800:CA0E1AAA86EB60369D32FFDB1BC647B64481DB0FE63FB4F3AA78734B7D6CB3B5.png" width="920" height="350.62137531068765"></span></p>  </li><li><p>存储和传输时间数据。</p> <p>建议使用0时区标准时间（UTC或者GMT）存储和传输时间数据，避免夏令时跳变导致的信息丢失或异常。</p>  </li></ol> </div> </div> <div></div></div>