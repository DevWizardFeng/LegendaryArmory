<h1 _ngcontent-yxf-c119="" class="doc-title ng-star-inserted" title="媒体资源使用指导"> 媒体资源使用指导 </h1>

<div _ngcontent-yxf-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>应用可以通过photoAccessHelper的接口，对媒体资源（图片、视频）进行相关操作。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>在进行功能开发前，请查阅<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-preparation">开发准备</a>，了解如何获取相册管理模块实例和如何申请相册管理模块功能开发相关权限。</li>       <li>文档中使用到photoAccessHelper的地方，默认为使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-preparation">开发准备</a>中获取的对象，如果未添加此段代码，报photoAccessHelper未定义的错误，请自行添加。</li>      </ul>     </div></div></div>    <p>为了保证应用的运行效率，大部分photoAccessHelper的接口调用都是异步的。示例采用Promise函数，更多方式可以查阅<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper" target="_blank">API参考</a>。</p>    <div class="tiledSection">     <h2 id="获取指定媒体资源">获取指定媒体资源<i class="anchor-icon anchor-icon-link" anchorid="获取指定媒体资源" tips="复制节点链接"></i></h2>          <p>根据特定条件查询媒体资源，如类型、日期、相册等。</p>     <p>应用通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoaccesshelper#getassets-1" target="_blank">PhotoAccessHelper.getAssets</a>获取媒体资源，并传入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#fetchoptions" target="_blank">FetchOptions</a>对象指定检索条件。如无特别说明，文档中涉及的待获取的资源均视为已经预置且在数据库中存在相应数据。如出现获取资源为空的情况，请确认文件是否已预置，数据库中是否存在该文件的数据。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#photokeys" target="_blank">PhotoAccessHelper.PhotoKeys.URI</a>做查询条件时，仅支持使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-datasharepredicates#equalto10" target="_blank">DataSharePredicates.equalTo</a>的方式。</p>      </div></div></div>     <p>如果只想获取某个位置的对象（如第一个、最后一个、指定索引等），可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-fetchresult" target="_blank">FetchResult</a>中的接口获取。</p>     <p><strong>前提条件</strong></p>     <ul>      <li>获取相册管理模块photoAccessHelper实例。</li>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-preparation#申请相册管理模块功能相关权限">申请相册管理模块读权限</a>'ohos.permission.READ_IMAGEVIDEO'。</li>      <li>导入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-datasharepredicates" target="_blank">dataSharePredicates</a>模块。</li>     </ul>    </div>    <div class="tiledSection">     <h3 id="指定媒体文件名获取图片或视频资源" class="firsth2">指定媒体文件名获取图片或视频资源<i class="anchor-icon anchor-icon-link" anchorid="指定媒体文件名获取图片或视频资源" tips="复制节点链接"></i></h3>          <p>下面以查询文件名为'test.jpg'的图片资源为例。</p>     <div _ngcontent-yxf-c106="" class="highlight-div"><div _ngcontent-yxf-c106="" class="highlight-div-header"><div _ngcontent-yxf-c106="" class="highlight-div-header-left"><div _ngcontent-yxf-c106="" class="handle-button expand-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yxf-c106="" class="highlight-div-header-right"><div _ngcontent-yxf-c106="" class="handle-button ai-button"></div><div _ngcontent-yxf-c106="" class="handle-button line-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yxf-c106="" class="handle-button theme-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yxf-c106="" class="handle-button copy-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yxf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">predicates</span>: dataSharePredicates.<span class="hljs-property">DataSharePredicates</span> = <span class="hljs-keyword">new</span> dataSharePredicates.<span class="hljs-title class_">DataSharePredicates</span>();</li><li>  predicates.<span class="hljs-title function_">equalTo</span>(photoAccessHelper.<span class="hljs-property">PhotoKeys</span>.<span class="hljs-property">DISPLAY_NAME</span>, <span class="hljs-string">'test.jpg'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchOptions</span>: photoAccessHelper.<span class="hljs-property">FetchOptions</span> = {</li><li>    <span class="hljs-attr">fetchColumns</span>: [],</li><li>    <span class="hljs-attr">predicates</span>: predicates</li><li>  };</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchResult</span>: photoAccessHelper.<span class="hljs-property">FetchResult</span>&lt;photoAccessHelper.<span class="hljs-property">PhotoAsset</span>&gt; = <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">getAssets</span>(fetchOptions);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">photoAsset</span>: photoAccessHelper.<span class="hljs-property">PhotoAsset</span> = <span class="hljs-keyword">await</span> fetchResult.<span class="hljs-title function_">getFirstObject</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAssets photoAsset.displayName : '</span> + photoAsset.<span class="hljs-property">displayName</span>);</li><li>    fetchResult.<span class="hljs-title function_">close</span>();</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getAssets failed with err: '</span> + err);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="获取图片和视频缩略图">获取图片和视频缩略图<i class="anchor-icon anchor-icon-link" anchorid="获取图片和视频缩略图" tips="复制节点链接"></i></h2>          <p>在相册展示图片和视频、编辑预览时，应用需要获取图片和视频的缩略图。</p>     <p>通过接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoasset#getthumbnail-2" target="_blank">PhotoAsset.getThumbnail</a>，传入缩略图尺寸，可以获取图片和视频缩略图。缩略图常用于UI界面展示。</p>     <p><strong>前提条件</strong></p>     <ul>      <li>获取相册管理模块photoAccessHelper实例。</li>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-preparation#申请相册管理模块功能相关权限">申请相册管理模块读权限</a>'ohos.permission.READ_IMAGEVIDEO'。</li>      <li>导入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-datasharepredicates" target="_blank">dataSharePredicates</a>模块。</li>     </ul>     <p>参考以下示例，获取图片的文件描述符fd后，需要解码为统一的PixelMap，以便在应用中进行图片显示或图片处理，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-decoding">图片解码</a>。</p>     <p>下面以获取一张图片的缩略图为例，缩略图尺寸为720*720。</p>     <p><strong>开发步骤</strong></p>     <ol>      <li>建立检索条件，用于获取图片资源。</li>      <li>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoaccesshelper#getassets-1" target="_blank">PhotoAccessHelper.getAssets</a>接口获取图片资源。</li>      <li>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-fetchresult#getfirstobject-1" target="_blank">FetchResult.getFirstObject</a>接口获取第一张图片。</li>      <li>调用PhotoAsset.getThumbnail获取图片的缩略图的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">PixelMap</a>。</li>     </ol>     <div _ngcontent-yxf-c106="" class="highlight-div"><div _ngcontent-yxf-c106="" class="highlight-div-header"><div _ngcontent-yxf-c106="" class="highlight-div-header-left"><div _ngcontent-yxf-c106="" class="handle-button expand-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yxf-c106="" class="highlight-div-header-right"><div _ngcontent-yxf-c106="" class="handle-button ai-button"></div><div _ngcontent-yxf-c106="" class="handle-button line-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yxf-c106="" class="handle-button theme-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yxf-c106="" class="handle-button copy-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yxf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">predicates</span>: dataSharePredicates.<span class="hljs-property">DataSharePredicates</span> = <span class="hljs-keyword">new</span> dataSharePredicates.<span class="hljs-title class_">DataSharePredicates</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchOptions</span>: photoAccessHelper.<span class="hljs-property">FetchOptions</span> = {</li><li>    <span class="hljs-attr">fetchColumns</span>: [],</li><li>    <span class="hljs-attr">predicates</span>: predicates</li><li>  };</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchResult</span>: photoAccessHelper.<span class="hljs-property">FetchResult</span>&lt;photoAccessHelper.<span class="hljs-property">PhotoAsset</span>&gt; = <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">getAssets</span>(fetchOptions);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">photoAsset</span>: photoAccessHelper.<span class="hljs-property">PhotoAsset</span> = <span class="hljs-keyword">await</span> fetchResult.<span class="hljs-title function_">getFirstObject</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAssets photoAsset.displayName : '</span> + photoAsset.<span class="hljs-property">displayName</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">size</span>: image.<span class="hljs-property">Size</span> = { <span class="hljs-attr">width</span>: <span class="hljs-number">720</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">720</span> };</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">pixelMap</span>: image.<span class="hljs-property">PixelMap</span> =  <span class="hljs-keyword">await</span> photoAsset.<span class="hljs-title function_">getThumbnail</span>(size);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">imageInfo</span>: image.<span class="hljs-property">ImageInfo</span> = <span class="hljs-keyword">await</span> pixelMap.<span class="hljs-title function_">getImageInfo</span>()</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getThumbnail successful, pixelMap ImageInfo size: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(imageInfo.<span class="hljs-property">size</span>));</li><li>    fetchResult.<span class="hljs-title function_">close</span>();</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getThumbnail failed with err: '</span> + err);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="重命名媒体资源">重命名媒体资源<i class="anchor-icon anchor-icon-link" anchorid="重命名媒体资源" tips="复制节点链接"></i></h2>          <p>重命名修改的是文件的PhotoAsset.displayName属性，即文件的显示文件名，包含文件后缀。</p>     <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/kts-apis-photoaccesshelper-mediaassetchangerequest#settitle11" target="_blank">MediaAssetChangeRequest.setTitle</a>重命名后，再通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoaccesshelper#applychanges11" target="_blank">PhotoAccessHelper.applyChanges</a>更新到数据库中完成修改。</p>     <p>在重命名文件之前，需要先获取文件对象，可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-fetchresult" target="_blank">FetchResult</a>中的接口获取对应位置的文件。</p>     <p><strong>前提条件</strong></p>     <ul>      <li>获取相册管理模块photoAccessHelper实例。</li>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-preparation#申请相册管理模块功能相关权限">申请相册管理模块权限</a>'ohos.permission.WRITE_IMAGEVIDEO'和'ohos.permission.READ_IMAGEVIDEO'。</li>     </ul>     <p>下面以重命名标题为'oldTestPhoto'的图片为例。</p>     <p><strong>开发步骤</strong></p>     <ol>      <li>建立检索条件，获取标题为'oldTestPhoto'的图片资源。</li>      <li>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoaccesshelper#getassets-1" target="_blank">PhotoAccessHelper.getAssets</a>接口获取目标图片资源。</li>      <li>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-fetchresult#getfirstobject-1" target="_blank">FetchResult.getFirstObject</a>接口获取要重命名的图片对象。</li>      <li>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/kts-apis-photoaccesshelper-mediaassetchangerequest#settitle11" target="_blank">MediaAssetChangeRequest.setTitle</a>接口将图片重命名。</li>      <li>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoaccesshelper#applychanges11" target="_blank">PhotoAccessHelper.applyChanges</a>接口将修改的图片属性更新到数据库中完成修改。</li>     </ol>     <div _ngcontent-yxf-c106="" class="highlight-div"><div _ngcontent-yxf-c106="" class="highlight-div-header"><div _ngcontent-yxf-c106="" class="highlight-div-header-left"><div _ngcontent-yxf-c106="" class="handle-button expand-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yxf-c106="" class="highlight-div-header-right"><div _ngcontent-yxf-c106="" class="handle-button ai-button"></div><div _ngcontent-yxf-c106="" class="handle-button line-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yxf-c106="" class="handle-button theme-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yxf-c106="" class="handle-button copy-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yxf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">predicates</span>: dataSharePredicates.<span class="hljs-property">DataSharePredicates</span> = <span class="hljs-keyword">new</span> dataSharePredicates.<span class="hljs-title class_">DataSharePredicates</span>();</li><li>  predicates.<span class="hljs-title function_">equalTo</span>(photoAccessHelper.<span class="hljs-property">PhotoKeys</span>.<span class="hljs-property">TITLE</span>, <span class="hljs-string">'oldTestPhoto'</span>)</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchOptions</span>: photoAccessHelper.<span class="hljs-property">FetchOptions</span> = {</li><li>    <span class="hljs-attr">fetchColumns</span>: [<span class="hljs-string">'title'</span>],</li><li>    <span class="hljs-attr">predicates</span>: predicates</li><li>  };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">newTitle</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'newTestPhoto'</span>;</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchResult</span>: photoAccessHelper.<span class="hljs-property">FetchResult</span>&lt;photoAccessHelper.<span class="hljs-property">PhotoAsset</span>&gt; = <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">getAssets</span>(fetchOptions);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">photoAsset</span>: photoAccessHelper.<span class="hljs-property">PhotoAsset</span> = <span class="hljs-keyword">await</span> fetchResult.<span class="hljs-title function_">getFirstObject</span>();</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">assetChangeRequest</span>: photoAccessHelper.<span class="hljs-property">MediaAssetChangeRequest</span> = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">MediaAssetChangeRequest</span>(photoAsset);</li><li>    assetChangeRequest.<span class="hljs-title function_">setTitle</span>(newTitle);</li><li>    <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">applyChanges</span>(assetChangeRequest);</li><li>    fetchResult.<span class="hljs-title function_">close</span>();</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`rename failed with error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="将文件放入回收站">将文件放入回收站<i class="anchor-icon anchor-icon-link" anchorid="将文件放入回收站" tips="复制节点链接"></i></h2>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/kts-apis-photoaccesshelper-mediaassetchangerequest#deleteassets11" target="_blank">MediaAssetChangeRequest.deleteAssets</a>可以将文件放入回收站。</p>     <p>放入回收站的文件将保存30天，到期后自动彻底删除。在此期间，用户可以通过系统应用“文件管理”或“图库”恢复文件。</p>     <p><strong>前提条件</strong></p>     <ul>      <li>获取相册管理模块photoAccessHelper实例。</li>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-preparation#申请相册管理模块功能相关权限">申请相册管理模块权限</a>'ohos.permission.WRITE_IMAGEVIDEO'和'ohos.permission.READ_IMAGEVIDEO'。</li>     </ul>     <p>下面以将文件检索结果中第一个文件放入回收站为例。</p>     <p><strong>开发步骤</strong></p>     <ol>      <li>建立检索条件，用于获取图片资源。</li>      <li>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoaccesshelper#getassets-1" target="_blank">PhotoAccessHelper.getAssets</a>接口获取目标图片资源。</li>      <li>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-fetchresult#getfirstobject-1" target="_blank">FetchResult.getFirstObject</a>接口获取第一张图片，即要放入回收站的图片对象。</li>      <li>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/kts-apis-photoaccesshelper-mediaassetchangerequest#deleteassets11" target="_blank">MediaAssetChangeRequest.deleteAssets</a>接口将文件放入回收站。</li>     </ol>     <div _ngcontent-yxf-c106="" class="highlight-div"><div _ngcontent-yxf-c106="" class="highlight-div-header"><div _ngcontent-yxf-c106="" class="highlight-div-header-left"><div _ngcontent-yxf-c106="" class="handle-button expand-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yxf-c106="" class="highlight-div-header-right"><div _ngcontent-yxf-c106="" class="handle-button ai-button"></div><div _ngcontent-yxf-c106="" class="handle-button line-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yxf-c106="" class="handle-button theme-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yxf-c106="" class="handle-button copy-button"><div _ngcontent-yxf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yxf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper, context: Context</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">predicates</span>: dataSharePredicates.<span class="hljs-property">DataSharePredicates</span> = <span class="hljs-keyword">new</span> dataSharePredicates.<span class="hljs-title class_">DataSharePredicates</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchOptions</span>: photoAccessHelper.<span class="hljs-property">FetchOptions</span> = {</li><li>    <span class="hljs-attr">fetchColumns</span>: [],</li><li>    <span class="hljs-attr">predicates</span>: predicates</li><li>  };</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchResult</span>: photoAccessHelper.<span class="hljs-property">FetchResult</span>&lt;photoAccessHelper.<span class="hljs-property">PhotoAsset</span>&gt; = <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">getAssets</span>(fetchOptions);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">photoAsset</span>: photoAccessHelper.<span class="hljs-property">PhotoAsset</span> = <span class="hljs-keyword">await</span> fetchResult.<span class="hljs-title function_">getFirstObject</span>();</li><li>    <span class="hljs-keyword">await</span> photoAccessHelper.<span class="hljs-property">MediaAssetChangeRequest</span>.<span class="hljs-title function_">deleteAssets</span>(context, [photoAsset]);</li><li>    fetchResult.<span class="hljs-title function_">close</span>();</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`deleteAssets failed with error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>