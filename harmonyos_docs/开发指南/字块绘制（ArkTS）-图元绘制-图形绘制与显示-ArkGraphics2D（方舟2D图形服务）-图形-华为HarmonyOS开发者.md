<h1 _ngcontent-qaq-c119="" class="doc-title ng-star-inserted" title="字块绘制（ArkTS）"> 字块绘制（ArkTS） </h1>

<div _ngcontent-qaq-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="场景介绍">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="场景介绍" tips="复制节点链接"></i></h2>          <p>字块（TextBlob）是指文本的集合。无论是单个的文字还是大块的文本，都可以通过字块来绘制。</p>     <p>除了基本的字块绘制之外，还可以给文字添加各种绘制效果。常见的字块绘制场景包括<a href="/consumer/cn/doc/harmonyos-guides/textblock-drawing-arkts#文字描边">文字描边</a>、<a href="/consumer/cn/doc/harmonyos-guides/textblock-drawing-arkts#文字渐变">文字渐变</a>等，更多效果请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/drawing-effect-overview">绘制效果</a>。</p>     <p>本节不涉及文本测量和布局排版相关内容，如需在开发中处理此类文本绘制需求，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/text-overview">文本开发概述</a>，该文档系统讲解了排版策略与相关使用指导。</p>    </div>    <div class="tiledSection">     <h2 id="基本字块绘制">基本字块绘制<i class="anchor-icon anchor-icon-link" anchorid="基本字块绘制" tips="复制节点链接"></i></h2>          <p>Canvas通过drawTextBlob()来绘制字块。函数接受三个参数：TextBlob字块对象，以及文字基线左端点的x坐标和y坐标。</p>     <p>画布Canvas对象具体可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/canvas-get-result-draw-arkts">画布的获取与绘制结果的显示（ArkTS）</a>。</p>     <p>字块对象可以通过多种方式创建得到，详细的字块创建方式和接口使用请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-textblob" target="_blank">TextBlob</a>。</p>     <p>此处以使用makeFromString()接口创建字块为例，接口接受3个参数，分别为：</p>     <ul>      <li>       <p>需要显示的字符串text。</p></li>      <li>       <p>font字型对象。其中font用于设置和获取字体的各种属性，如字体大小、文本样式、字体对齐方式、字体渲染方式、字体描边方式等，详细的API介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-font" target="_blank">Font</a>。</p></li>      <li>       <p>文本编码方式。当前支持的文本编码方式如下：</p>       <ul>        <li>TEXT_ENCODING_UTF8：使用1个字节表示UTF-8或ASCII；</li>        <li>TEXT_ENCODING_UTF16：使用2个字节表示大部分unicode；</li>        <li>TEXT_ENCODING_UTF32：使用4个字节表示全部unicode；</li>        <li>TEXT_ENCODING_GLYPH_ID：使用2个字节表示glyph index。</li>       </ul></li>     </ul>     <p>基本效果的示例代码和效果图如下：</p>     <div _ngcontent-qaq-c106="" class="highlight-div"><div _ngcontent-qaq-c106="" class="highlight-div-header"><div _ngcontent-qaq-c106="" class="highlight-div-header-left"><div _ngcontent-qaq-c106="" class="handle-button expand-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qaq-c106="" class="highlight-div-header-right"><div _ngcontent-qaq-c106="" class="handle-button ai-button"></div><div _ngcontent-qaq-c106="" class="handle-button line-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qaq-c106="" class="handle-button theme-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qaq-c106="" class="handle-button copy-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qaq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// TextBlockDrawing.ets</span></li><li><span class="hljs-comment">// 创建字型对象</span></li><li><span class="hljs-keyword">const</span> font = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Font</span>();</li><li><span class="hljs-comment">// 设置字体大小</span></li><li>font.<span class="hljs-title function_">setSize</span>(<span class="hljs-number">100</span>);</li><li><span class="hljs-comment">// 创建字块对象</span></li><li><span class="hljs-keyword">const</span> textBlob = drawing.<span class="hljs-property">TextBlob</span>.<span class="hljs-title function_">makeFromString</span>(<span class="hljs-string">'Hello world'</span>, font, drawing.<span class="hljs-property">TextEncoding</span>.<span class="hljs-property">TEXT_ENCODING_UTF8</span>);</li><li><span class="hljs-comment">// 绘制字块</span></li><li>canvas.<span class="hljs-title function_">drawTextBlob</span>(textBlob, <span class="hljs-number">200</span>, <span class="hljs-number">300</span>);</li></ol></pre></div></div>     <p><span><img originheight="454" originwidth="910" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114407.33998481316198609009435873420797:50001231000000:2800:B407956E4F9C8A3A7626436CE994007F8BC4A8DAD8175F9E1D2998575058B4EE.jpg" width="910" height="454"></span></p>    </div>    <div class="tiledSection">     <h2 id="文字描边">文字描边<i class="anchor-icon anchor-icon-link" anchorid="文字描边" tips="复制节点链接"></i></h2>          <p>基于基本的字块绘制，还可以通过画笔实现文字描边效果，描边效果的更多介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/basic-drawing-effect-arkts#描边效果">描边效果</a>。</p>     <p>以下以英文文字描边和中文文字描边给出示例和指导。</p>    </div>    <div class="tiledSection">     <h3 id="英文文字描边" class="firsth2">英文文字描边<i class="anchor-icon anchor-icon-link" anchorid="英文文字描边" tips="复制节点链接"></i></h3>          <p>英文文字描边的简要示例和示意图如下：</p>     <div _ngcontent-qaq-c106="" class="highlight-div"><div _ngcontent-qaq-c106="" class="highlight-div-header"><div _ngcontent-qaq-c106="" class="highlight-div-header-left"><div _ngcontent-qaq-c106="" class="handle-button expand-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qaq-c106="" class="highlight-div-header-right"><div _ngcontent-qaq-c106="" class="handle-button ai-button"></div><div _ngcontent-qaq-c106="" class="handle-button line-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qaq-c106="" class="handle-button theme-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qaq-c106="" class="handle-button copy-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qaq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// TextBlockDrawing.ets</span></li><li><span class="hljs-comment">// 创建画笔</span></li><li><span class="hljs-keyword">let</span> pen = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Pen</span>();</li><li><span class="hljs-comment">// 设置抗锯齿</span></li><li>pen.<span class="hljs-title function_">setAntiAlias</span>(<span class="hljs-literal">true</span>);</li><li><span class="hljs-comment">// 设置描边线宽</span></li><li>pen.<span class="hljs-title function_">setStrokeWidth</span>(<span class="hljs-number">3.0</span>);</li><li><span class="hljs-comment">// 设置描边颜色</span></li><li>pen.<span class="hljs-title function_">setColor</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>);</li><li><span class="hljs-comment">// 创建字型对象</span></li><li><span class="hljs-keyword">const</span> font = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Font</span>();</li><li><span class="hljs-comment">// 设置字体大小</span></li><li>font.<span class="hljs-title function_">setSize</span>(<span class="hljs-number">100</span>);</li><li><span class="hljs-comment">// 添加画笔描边效果</span></li><li>canvas.<span class="hljs-title function_">attachPen</span>(pen);</li><li><span class="hljs-comment">// 创建字块对象</span></li><li><span class="hljs-keyword">const</span> textBlob = drawing.<span class="hljs-property">TextBlob</span>.<span class="hljs-title function_">makeFromString</span>(<span class="hljs-string">'Hello world'</span>, font, drawing.<span class="hljs-property">TextEncoding</span>.<span class="hljs-property">TEXT_ENCODING_UTF8</span>);</li><li><span class="hljs-comment">// 绘制字块</span></li><li>canvas.<span class="hljs-title function_">drawTextBlob</span>(textBlob, <span class="hljs-number">200</span>, <span class="hljs-number">300</span>);</li><li><span class="hljs-comment">// 去除描边效果</span></li><li>canvas.<span class="hljs-title function_">detachPen</span>();</li></ol></pre></div></div>     <p><span><img originheight="404" originwidth="934" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114407.06144188913667337262815667717280:50001231000000:2800:B2DDEF688CDB3B26CFC375660C6157CF7EF8062675B0DD54913028DE3D7A60F0.jpg" width="920" height="397.9443254817987"></span></p>    </div>    <div class="tiledSection">     <h3 id="中文文字描边">中文文字描边<i class="anchor-icon anchor-icon-link" anchorid="中文文字描边" tips="复制节点链接"></i></h3>          <p>首先需要通过画笔描边，然后需要调用画刷填充内部颜色，去除字体中间的杂质和重叠部分，实现中文文字描边效果。</p>     <p>中文文字描边的简要示例和示意图如下：</p>     <div _ngcontent-qaq-c106="" class="highlight-div"><div _ngcontent-qaq-c106="" class="highlight-div-header"><div _ngcontent-qaq-c106="" class="highlight-div-header-left"><div _ngcontent-qaq-c106="" class="handle-button expand-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qaq-c106="" class="highlight-div-header-right"><div _ngcontent-qaq-c106="" class="handle-button ai-button"></div><div _ngcontent-qaq-c106="" class="handle-button line-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qaq-c106="" class="handle-button theme-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qaq-c106="" class="handle-button copy-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qaq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// TextBlockDrawing.ets</span></li><li><span class="hljs-comment">// 创建画刷</span></li><li><span class="hljs-keyword">let</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li><span class="hljs-comment">// 创建画笔</span></li><li><span class="hljs-keyword">let</span> pen = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Pen</span>();</li><li><span class="hljs-comment">// 设置抗锯齿</span></li><li>brush.<span class="hljs-title function_">setAntiAlias</span>(<span class="hljs-literal">true</span>);</li><li><span class="hljs-comment">// 设置描边颜色</span></li><li>brush.<span class="hljs-title function_">setColor</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>);</li><li>
</li><li>pen.<span class="hljs-title function_">setAntiAlias</span>(<span class="hljs-literal">true</span>);</li><li><span class="hljs-comment">// 设置描边线宽</span></li><li>pen.<span class="hljs-title function_">setStrokeWidth</span>(<span class="hljs-number">3.0</span>);</li><li><span class="hljs-comment">// 设置描边颜色</span></li><li>pen.<span class="hljs-title function_">setColor</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>);</li><li>
</li><li><span class="hljs-comment">// 创建字型对象</span></li><li><span class="hljs-keyword">const</span> font = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Font</span>();</li><li><span class="hljs-comment">// 设置字体大小</span></li><li>font.<span class="hljs-title function_">setSize</span>(<span class="hljs-number">100</span>);</li><li><span class="hljs-comment">// 添加画笔描边效果</span></li><li>canvas.<span class="hljs-title function_">attachPen</span>(pen);</li><li><span class="hljs-comment">// 创建字块对象</span></li><li><span class="hljs-keyword">const</span> textBlob = drawing.<span class="hljs-property">TextBlob</span>.<span class="hljs-title function_">makeFromString</span>(<span class="hljs-string">'你好'</span>, font, drawing.<span class="hljs-property">TextEncoding</span>.<span class="hljs-property">TEXT_ENCODING_UTF8</span>);</li><li><span class="hljs-comment">// 绘制字块</span></li><li>canvas.<span class="hljs-title function_">drawTextBlob</span>(textBlob, <span class="hljs-number">200</span>, <span class="hljs-number">300</span>);</li><li><span class="hljs-comment">// 去除描边效果</span></li><li>canvas.<span class="hljs-title function_">detachPen</span>();</li><li>
</li><li>canvas.<span class="hljs-title function_">attachBrush</span>(brush);</li><li>canvas.<span class="hljs-title function_">drawTextBlob</span>(textBlob, <span class="hljs-number">200</span>, <span class="hljs-number">300</span>);</li><li>canvas.<span class="hljs-title function_">detachBrush</span>();</li></ol></pre></div></div>     <p><span><img originheight="54" originwidth="131" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114407.63560657364123991274976103662541:50001231000000:2800:7A493629D463C5F633A57F0597FF79E3DE8690D54B63390A508A9106A8B51422.png" class="notEnlarge" width="131" height="54"></span></p>    </div>    <div class="tiledSection">     <h2 id="文字渐变">文字渐变<i class="anchor-icon anchor-icon-link" anchorid="文字渐变" tips="复制节点链接"></i></h2>          <p>基于基本字块绘制，还可以通过着色器实现文字渐变的效果，着色器的更多介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/complex-drawing-effect-arkts#着色器效果">着色器效果</a>。</p>     <p>以下为文字添加了线性渐变着色器效果的简要示例和示意图：</p>     <div _ngcontent-qaq-c106="" class="highlight-div"><div _ngcontent-qaq-c106="" class="highlight-div-header"><div _ngcontent-qaq-c106="" class="highlight-div-header-left"><div _ngcontent-qaq-c106="" class="handle-button expand-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qaq-c106="" class="highlight-div-header-right"><div _ngcontent-qaq-c106="" class="handle-button ai-button"></div><div _ngcontent-qaq-c106="" class="handle-button line-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qaq-c106="" class="handle-button theme-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qaq-c106="" class="handle-button copy-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qaq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// TextBlockDrawing.ets</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">startPt</span>: common2D.<span class="hljs-property">Point</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span> };</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">endPt</span>: common2D.<span class="hljs-property">Point</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">900</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">900</span> };</li><li><span class="hljs-keyword">let</span> colors = [<span class="hljs-number">0xFFFFFF00</span>, <span class="hljs-number">0xFFFF0000</span>, <span class="hljs-number">0xFF0000FF</span>];</li><li><span class="hljs-comment">// 创建线性渐变着色器</span></li><li><span class="hljs-keyword">let</span> shaderEffect = drawing.<span class="hljs-property">ShaderEffect</span>.<span class="hljs-title function_">createLinearGradient</span>(startPt, endPt, colors, drawing.<span class="hljs-property">TileMode</span>.<span class="hljs-property">CLAMP</span>);</li><li><span class="hljs-comment">// 创建画刷</span></li><li><span class="hljs-keyword">let</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li><span class="hljs-comment">// 设置着色器</span></li><li>brush.<span class="hljs-title function_">setShaderEffect</span>(shaderEffect);</li><li><span class="hljs-comment">// 添加画刷填充效果</span></li><li>canvas.<span class="hljs-title function_">attachBrush</span>(brush);</li><li><span class="hljs-comment">// 创建字型</span></li><li><span class="hljs-keyword">const</span> font = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Font</span>();</li><li><span class="hljs-comment">// 设置字体大小</span></li><li>font.<span class="hljs-title function_">setSize</span>(<span class="hljs-number">200</span>);</li><li><span class="hljs-comment">// 创建字块</span></li><li><span class="hljs-keyword">const</span> textBlob = drawing.<span class="hljs-property">TextBlob</span>.<span class="hljs-title function_">makeFromString</span>(<span class="hljs-string">'Hello world'</span>, font, drawing.<span class="hljs-property">TextEncoding</span>.<span class="hljs-property">TEXT_ENCODING_UTF8</span>);</li><li><span class="hljs-comment">// 绘制字块</span></li><li>canvas.<span class="hljs-title function_">drawTextBlob</span>(textBlob, <span class="hljs-number">100</span>, <span class="hljs-number">300</span>);</li><li><span class="hljs-comment">// 去除填充效果</span></li><li>canvas.<span class="hljs-title function_">detachBrush</span>();</li></ol></pre></div></div>     <p><span><img originheight="436" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114407.78204816034395500552659682529990:50001231000000:2800:AC960F47BD3BF2A49894D438C6853E35357EA7790FBABB805FCF32C196CAC66F.jpg" width="920" height="320.6394884092726"></span></p>    </div>    <div class="tiledSection">     <h2 id="主题字体">主题字体<i class="anchor-icon anchor-icon-link" anchorid="主题字体" tips="复制节点链接"></i></h2>          <p>主题字体，特指系统<strong>主题应用</strong>中能使用的字体，属于一种特殊的自定义字体。如需涉及文本测量和布局排版相关内容，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/theme-font-arkts">使用主题字体（ArkTS）</a>。</p>     <p>设置跟随主题字体的示例代码和效果图如下：</p>     <div _ngcontent-qaq-c106="" class="highlight-div"><div _ngcontent-qaq-c106="" class="highlight-div-header"><div _ngcontent-qaq-c106="" class="highlight-div-header-left"><div _ngcontent-qaq-c106="" class="handle-button expand-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qaq-c106="" class="highlight-div-header-right"><div _ngcontent-qaq-c106="" class="handle-button ai-button"></div><div _ngcontent-qaq-c106="" class="handle-button line-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qaq-c106="" class="handle-button theme-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qaq-c106="" class="handle-button copy-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qaq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// TextBlockDrawing.ets</span></li><li><span class="hljs-comment">// 创建线性渐变着色器</span></li><li><span class="hljs-keyword">const</span> font = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Font</span>();</li><li><span class="hljs-comment">// 设置文字大小</span></li><li>font.<span class="hljs-title function_">setSize</span>(<span class="hljs-number">100</span>);</li><li><span class="hljs-comment">// 设置跟随主题字体</span></li><li>font.<span class="hljs-title function_">setThemeFontFollowed</span>(<span class="hljs-literal">true</span>);</li><li><span class="hljs-comment">// 创建字块对象</span></li><li><span class="hljs-keyword">const</span> textBlob = drawing.<span class="hljs-property">TextBlob</span>.<span class="hljs-title function_">makeFromString</span>(<span class="hljs-string">'Hello World'</span>, font, drawing.<span class="hljs-property">TextEncoding</span>.<span class="hljs-property">TEXT_ENCODING_UTF8</span>);</li><li><span class="hljs-comment">// 绘制字块</span></li><li>canvas.<span class="hljs-title function_">drawTextBlob</span>(textBlob, <span class="hljs-number">200</span>, <span class="hljs-number">300</span>);</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.3.1.1" valign="top" width="50%">未跟随主题字体的效果图</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.3.1.2" valign="top" width="50%">跟随主题字体的效果图（不同主题字体显示效果不同，此处仅示意）</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="210" originwidth="711" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114407.13667329093635691891527813554576:50001231000000:2800:C399CCD1C3B5BC81BAC32C42A468BF74B66B2A635B67DA8EF8E38B9BAA78917E.jpg" width="436" height="128.77637130801688"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="142" originwidth="517" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114407.11455517385384672375435146471899:50001231000000:2800:EA7B9B6795BFCAF99C9B61F17D80F09DB3AB0AE7B8F0246D9266286749EFF212.jpg" width="436" height="119.75241779497098"></span></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>需要在应用入口文件（默认工程中为EntryAbility.ets）中复写onConfigurationUpdate函数，以响应切换主题字体的操作，确保切换后页面能够及时刷新并生效。具体实现可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/theme-font-arkts">使用主题字体（ArkTS）</a>。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="单字绘制">单字绘制<i class="anchor-icon anchor-icon-link" anchorid="单字绘制" tips="复制节点链接"></i></h2>          <p>单字绘制是图形渲染中针对文本渲染的一种精细化控制技术。相比字块绘制，其核心优势在于能够利用字体退化机制，在当前字体无法显示某字符时，自动退化到使用系统字体绘制字符，提升对特殊字符的兼容性，避免字符缺失。同时，单字绘制支持逐字符配置字体特征（如连字、替代字形），满足复杂排版需求，增强用户体验。详细API说明请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-canvas#drawsinglecharacter12" target="_blank">drawing.Canvas</a>。</p>     <p>基础场景：绘制无字体特征的字符</p>     <p>对于无需字体特征的常规文本渲染场景，可以使用drawSingleCharacter绘制单个字符，使用measureSingleCharacter测量单个字符的宽度，示例代码和效果图如下：</p>     <div _ngcontent-qaq-c106="" class="highlight-div"><div _ngcontent-qaq-c106="" class="highlight-div-header"><div _ngcontent-qaq-c106="" class="highlight-div-header-left"><div _ngcontent-qaq-c106="" class="handle-button expand-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qaq-c106="" class="highlight-div-header-right"><div _ngcontent-qaq-c106="" class="handle-button ai-button"></div><div _ngcontent-qaq-c106="" class="handle-button line-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qaq-c106="" class="handle-button theme-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qaq-c106="" class="handle-button copy-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qaq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// TextBlockDrawing.ets</span></li><li><span class="hljs-comment">// 创建字型对象</span></li><li><span class="hljs-keyword">const</span> font = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Font</span>();</li><li><span class="hljs-comment">// 设置文字大小</span></li><li>font.<span class="hljs-title function_">setSize</span>(<span class="hljs-number">100</span>);</li><li><span class="hljs-keyword">let</span> startX = <span class="hljs-number">100</span>;</li><li><span class="hljs-keyword">let</span> startY = <span class="hljs-number">100</span>;</li><li><span class="hljs-keyword">let</span> text = [<span class="hljs-string">'H'</span>, <span class="hljs-string">'e'</span>, <span class="hljs-string">'l'</span>, <span class="hljs-string">'l'</span>, <span class="hljs-string">'o'</span>];</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> s <span class="hljs-keyword">of</span> text) {</li><li>  <span class="hljs-comment">// 单字绘制</span></li><li>  canvas.<span class="hljs-title function_">drawSingleCharacter</span>(s, font, startX, startY);</li><li>  <span class="hljs-comment">// 测量单个字符的宽度</span></li><li>  <span class="hljs-keyword">let</span> textWidth = font.<span class="hljs-title function_">measureSingleCharacter</span>(s);</li><li>  startX += textWidth;</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="159" originwidth="344" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114407.03738220429546588479560467514814:50001231000000:2800:750DF483E1466FCD69CBD08A1E8DDF8E2DFA59BDFDA4FDD628C8B4E9383B494C.jpg" width="344" height="159"></span></p>     <p>进阶场景：绘制带字体特征的字符</p>     <p>对于需要字体特征的文本渲染场景，可以使用drawSingleCharacterWithFeatures绘制单个字符，使用measureSingleCharacterWithFeatures测量单个字符的宽度，示例代码和效果图如下：</p>     <div _ngcontent-qaq-c106="" class="highlight-div"><div _ngcontent-qaq-c106="" class="highlight-div-header"><div _ngcontent-qaq-c106="" class="highlight-div-header-left"><div _ngcontent-qaq-c106="" class="handle-button expand-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qaq-c106="" class="highlight-div-header-right"><div _ngcontent-qaq-c106="" class="handle-button ai-button"></div><div _ngcontent-qaq-c106="" class="handle-button line-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qaq-c106="" class="handle-button theme-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qaq-c106="" class="handle-button copy-button"><div _ngcontent-qaq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qaq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// TextBlockDrawing.ets</span></li><li><span class="hljs-comment">// 创建字型对象</span></li><li><span class="hljs-keyword">const</span> font = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Font</span>();</li><li><span class="hljs-comment">// 设置文字大小</span></li><li>font.<span class="hljs-title function_">setSize</span>(<span class="hljs-number">100</span>);</li><li><span class="hljs-keyword">let</span> startX = <span class="hljs-number">100</span>;</li><li><span class="hljs-keyword">let</span> startY = <span class="hljs-number">100</span>;</li><li><span class="hljs-keyword">let</span> text = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'+'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'2'</span>];</li><li><span class="hljs-comment">// 创建字体特征对象数组</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">fontFeatures</span>: drawing.<span class="hljs-property">FontFeature</span>[] = [{<span class="hljs-attr">name</span>: <span class="hljs-string">'frac'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>}];</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> s <span class="hljs-keyword">of</span> text) {</li><li>  <span class="hljs-comment">// 单字绘制</span></li><li>  canvas.<span class="hljs-title function_">drawSingleCharacterWithFeatures</span>(s, font, startX, startY, fontFeatures);</li><li>  <span class="hljs-comment">// 测量单个字符的宽度</span></li><li>  <span class="hljs-keyword">let</span> textWidth = font.<span class="hljs-title function_">measureSingleCharacterWithFeatures</span>(s, fontFeatures);</li><li>  startX += textWidth;</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="46" originwidth="143" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114407.06691016975024024259765856177592:50001231000000:2800:78E0544754D4CE13EDF223A9CDC8817DA68401DF4B9EF120CC4D9A3BF0F3820C.png" class="notEnlarge" width="143" height="46"></span></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>如果 drawSingleCharacterWithFeatures 与 measureSingleCharacter 混合使用，或者 drawSingleCharacter 与 measureSingleCharacterWithFeatures 混合使用，字体绘制可能会重叠。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="示例代码">示例代码<i class="anchor-icon anchor-icon-link" anchorid="示例代码" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitcode.com/HarmonyOS_Samples/DocsSample_Graphics/blob/master/ArkGraphics2D/Drawing/ArkTSGraphicsDraw" target="_blank">图形绘制（ArkTS）</a></li>     </ul>    </div>   </div>   <div></div></div>