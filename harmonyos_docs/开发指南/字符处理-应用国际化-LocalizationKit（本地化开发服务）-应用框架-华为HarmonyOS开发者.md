<h1 _ngcontent-ccj-c119="" class="doc-title ng-star-inserted" title="字符处理"> 字符处理 </h1>

<div _ngcontent-ccj-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="使用场景">使用场景<i class="anchor-icon anchor-icon-link" anchorid="使用场景" tips="复制节点链接"></i></h2>          <p>不同语言中字符规则差异较大，通常很难从对应文本中提取需要的信息。通过字符处理，可以在不同语言规则下，以相似的逻辑处理文本。</p>    </div>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="字符属性" class="firsth2">字符属性<i class="anchor-icon anchor-icon-link" anchorid="字符属性" tips="复制节点链接"></i></h3>          <p>字符属性用于判断字符类别，如判断字符是否为数字、字母、空格，是否为从右到左语言的字符，是否为表意文字(主要是中文日文韩文)等。</p>     <p>使用Unicode类的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-i18n#isdigit9" target="_blank">isDigit</a>等接口可以实现该功能，示例代码如下：</p>     <div _ngcontent-ccj-c106="" class="highlight-div"><div _ngcontent-ccj-c106="" class="highlight-div-header"><div _ngcontent-ccj-c106="" class="highlight-div-header-left"><div _ngcontent-ccj-c106="" class="handle-button expand-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccj-c106="" class="highlight-div-header-right"><div _ngcontent-ccj-c106="" class="handle-button ai-button"></div><div _ngcontent-ccj-c106="" class="handle-button line-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccj-c106="" class="handle-button theme-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccj-c106="" class="handle-button copy-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 导入模块</span></li><li><span class="hljs-keyword">import</span> { i18n } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 判断字符是否是数字</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">isDigit</span>: <span class="hljs-built_in">boolean</span> = i18n.<span class="hljs-property">Unicode</span>.<span class="hljs-title function_">isDigit</span>(<span class="hljs-string">'1'</span>); <span class="hljs-comment">// isDigit = true</span></li><li>
</li><li><span class="hljs-comment">// 判断字符是否是从右到左语言的字符</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">isRTL</span>: <span class="hljs-built_in">boolean</span> = i18n.<span class="hljs-property">Unicode</span>.<span class="hljs-title function_">isRTL</span>(<span class="hljs-string">'a'</span>); <span class="hljs-comment">// isRTL = false</span></li><li>
</li><li><span class="hljs-comment">// 判断字符是否是表意文字</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">isIdeograph</span>: <span class="hljs-built_in">boolean</span> = i18n.<span class="hljs-property">Unicode</span>.<span class="hljs-title function_">isIdeograph</span>(<span class="hljs-string">'华'</span>); <span class="hljs-comment">// isIdeograph = true</span></li><li>
</li><li><span class="hljs-comment">// 获取字符的一般类别值</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">unicodeType</span>: <span class="hljs-built_in">string</span> = i18n.<span class="hljs-property">Unicode</span>.<span class="hljs-title function_">getType</span>(<span class="hljs-string">'a'</span>); <span class="hljs-comment">// unicodeType = 'U_LOWERCASE_LETTER'</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="音译">音译<i class="anchor-icon anchor-icon-link" anchorid="音译" tips="复制节点链接"></i></h3>          <p>音译是指将采用某个文字系统或字母表表示的文本转换为发音相同的采用另一个文字系统或字母表表示的文本的过程，并不等同于翻译。使用Transliterator类的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-i18n#transform9" target="_blank">transform</a>接口可以实现音译功能，示例代码如下：</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>本模块支持中文汉字转拼音，但当中文文本中包含多音字时，可能出现部分多音字无法按照正确的发音转换为拼音的问题。</p>      </div></div></div>     <div _ngcontent-ccj-c106="" class="highlight-div"><div _ngcontent-ccj-c106="" class="highlight-div-header"><div _ngcontent-ccj-c106="" class="highlight-div-header-left"><div _ngcontent-ccj-c106="" class="handle-button expand-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccj-c106="" class="highlight-div-header-right"><div _ngcontent-ccj-c106="" class="handle-button ai-button"></div><div _ngcontent-ccj-c106="" class="handle-button line-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccj-c106="" class="handle-button theme-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccj-c106="" class="handle-button copy-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 导入模块</span></li><li><span class="hljs-keyword">import</span> { i18n } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 音译成Latn格式</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">transliterator</span>: i18n.<span class="hljs-property">Transliterator</span> = i18n.<span class="hljs-property">Transliterator</span>.<span class="hljs-title function_">getInstance</span>(<span class="hljs-string">'Any-Latn'</span>);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'中国'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">translatedText</span>: <span class="hljs-built_in">string</span> = transliterator.<span class="hljs-title function_">transform</span>(text); <span class="hljs-comment">// translatedText = 'zhōng guó'</span></li><li>
</li><li><span class="hljs-comment">// 汉语音译去声调</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">toneLessTransliterator</span>: i18n.<span class="hljs-property">Transliterator</span> = i18n.<span class="hljs-property">Transliterator</span>.<span class="hljs-title function_">getInstance</span>(<span class="hljs-string">'Any-Latn;Latin-Ascii'</span>);</li><li>translatedText = toneLessTransliterator.<span class="hljs-title function_">transform</span>(<span class="hljs-string">'中国'</span>); <span class="hljs-comment">// translatedText = 'zhong guo'</span></li><li>
</li><li><span class="hljs-comment">// 汉语姓氏读音</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">nameTransliterator</span>: i18n.<span class="hljs-property">Transliterator</span> = i18n.<span class="hljs-property">Transliterator</span>.<span class="hljs-title function_">getInstance</span>(<span class="hljs-string">'Han-Latin/Names'</span>);</li><li>translatedText = nameTransliterator.<span class="hljs-title function_">transform</span>(<span class="hljs-string">'单老师'</span>); <span class="hljs-comment">// translatedText = 'shàn lǎo shī'</span></li><li>translatedText = nameTransliterator.<span class="hljs-title function_">transform</span>(<span class="hljs-string">'长孙无忌'</span>); <span class="hljs-comment">// translatedText = 'zhǎng sūn wú jì'</span></li><li>
</li><li><span class="hljs-comment">// 获取音译支持的转换ID列表</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">ids</span>: <span class="hljs-built_in">string</span>[] = i18n.<span class="hljs-property">Transliterator</span>.<span class="hljs-title function_">getAvailableIDs</span>(); <span class="hljs-comment">// ids = ['ASCII-Latin', 'Accents-Any', ...]</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="文本标准化">文本标准化<i class="anchor-icon anchor-icon-link" anchorid="文本标准化" tips="复制节点链接"></i></h3>          <p>文本标准化是指按指定的范式标准化文本。文本标准化的范式包括NFC、NFD、NFKC和NFKD，范式的详细介绍请参考<a href="https://www.unicode.org/reports/tr15/#Norm_Forms" target="_blank">国际标准</a>。使用Normalizer类的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-i18n#normalize10" target="_blank">normalize</a>接口可以实现文本标准化，示例代码如下：</p>     <div _ngcontent-ccj-c106="" class="highlight-div"><div _ngcontent-ccj-c106="" class="highlight-div-header"><div _ngcontent-ccj-c106="" class="highlight-div-header-left"><div _ngcontent-ccj-c106="" class="handle-button expand-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccj-c106="" class="highlight-div-header-right"><div _ngcontent-ccj-c106="" class="handle-button ai-button"></div><div _ngcontent-ccj-c106="" class="handle-button line-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccj-c106="" class="handle-button theme-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccj-c106="" class="handle-button copy-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 导入模块</span></li><li><span class="hljs-keyword">import</span> { i18n } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 按照NFC范式对文本进行标准化处理</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">normalizer</span>: i18n.<span class="hljs-property">Normalizer</span> = i18n.<span class="hljs-property">Normalizer</span>.<span class="hljs-title function_">getInstance</span>(i18n.<span class="hljs-property">NormalizerMode</span>.<span class="hljs-property">NFC</span>);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">normalizedText</span>: <span class="hljs-built_in">string</span> = normalizer.<span class="hljs-title function_">normalize</span>(<span class="hljs-string">'\u1E9B\u0323'</span>); <span class="hljs-comment">// normalizedText = 'ẛ̣'</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="获取文本的可换行点">获取文本的可换行点<i class="anchor-icon anchor-icon-link" anchorid="获取文本的可换行点" tips="复制节点链接"></i></h3>          <p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-i18n#breakiterator8" target="_blank">BreakIterator</a>类的接口可以根据设定的区域获取文本的可换行点，示例代码如下：</p>     <div _ngcontent-ccj-c106="" class="highlight-div"><div _ngcontent-ccj-c106="" class="highlight-div-header"><div _ngcontent-ccj-c106="" class="highlight-div-header-left"><div _ngcontent-ccj-c106="" class="handle-button expand-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccj-c106="" class="highlight-div-header-right"><div _ngcontent-ccj-c106="" class="handle-button ai-button"></div><div _ngcontent-ccj-c106="" class="handle-button line-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccj-c106="" class="handle-button theme-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccj-c106="" class="handle-button copy-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 导入模块</span></li><li><span class="hljs-keyword">import</span> { i18n } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建获取文本可换行点的对象，该对象将按照指定区域的规则计算文本中的可换行点的位置</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">iterator</span>: i18n.<span class="hljs-property">BreakIterator</span>  = i18n.<span class="hljs-title function_">getLineInstance</span>(<span class="hljs-string">'en-GB'</span>);</li><li>
</li><li><span class="hljs-comment">// 设置处理文本</span></li><li>iterator.<span class="hljs-title function_">setLineBreakText</span>(<span class="hljs-string">'Apple is my favorite fruit.'</span>);</li><li>
</li><li><span class="hljs-comment">// 将换行迭代器移动到文本起始位置</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">firstPos</span>: <span class="hljs-built_in">number</span> = iterator.<span class="hljs-title function_">first</span>(); <span class="hljs-comment">// firstPos = 0</span></li><li>
</li><li><span class="hljs-comment">// 将换行迭代器向后移动2个可换行点，nextPos为移动后在文本中的位置，如果超出文本的长度范围，返回-1</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">nextPos</span>: <span class="hljs-built_in">number</span> = iterator.<span class="hljs-title function_">next</span>(<span class="hljs-number">2</span>); <span class="hljs-comment">// nextPos = 9</span></li><li>
</li><li><span class="hljs-comment">// 获取换行迭代器在当前所处理文本中的位置</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">currentPos</span>: <span class="hljs-built_in">number</span> = iterator.<span class="hljs-title function_">current</span>(); <span class="hljs-comment">// currentPos = 9</span></li><li>
</li><li><span class="hljs-comment">// 判断某个位置是否是可换行点</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">isBoundary</span>: <span class="hljs-built_in">boolean</span> = iterator.<span class="hljs-title function_">isBoundary</span>(<span class="hljs-number">9</span>); <span class="hljs-comment">// isBoundary = true</span></li><li>
</li><li><span class="hljs-comment">// 获取BreakIterator对象处理的文本</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">breakText</span>: <span class="hljs-built_in">string</span> = iterator.<span class="hljs-title function_">getLineBreakText</span>(); <span class="hljs-comment">// breakText = 'Apple is my favorite fruit.'</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="文件路径镜像处理">文件路径镜像处理<i class="anchor-icon anchor-icon-link" anchorid="文件路径镜像处理" tips="复制节点链接"></i></h3>          <p>文件路径镜像处理是指传入镜像语言时，对文件路径字符串进行本地化处理，实现镜像语言下文件路径的镜像显示效果。使用I18NUtil类的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-i18n#getunicodewrappedfilepath20" target="_blank">getUnicodeWrappedFilePath</a>接口可以实现文件路径镜像处理，示例代码如下：</p>     <div _ngcontent-ccj-c106="" class="highlight-div"><div _ngcontent-ccj-c106="" class="highlight-div-header"><div _ngcontent-ccj-c106="" class="highlight-div-header-left"><div _ngcontent-ccj-c106="" class="handle-button expand-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccj-c106="" class="highlight-div-header-right"><div _ngcontent-ccj-c106="" class="handle-button ai-button"></div><div _ngcontent-ccj-c106="" class="handle-button line-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccj-c106="" class="handle-button theme-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccj-c106="" class="handle-button copy-button"><div _ngcontent-ccj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 导入模块</span></li><li><span class="hljs-keyword">import</span> { i18n } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 传入镜像语言，对路径进行镜像处理</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'data/out/tmp'</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">delimiter</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/'</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">locale</span>: <span class="hljs-title class_">Intl</span>.<span class="hljs-property">Locale</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intl</span>.<span class="hljs-title class_">Locale</span>(<span class="hljs-string">'ar'</span>);</li><li>  <span class="hljs-comment">// mirrorPath = 'tmp/out/data/'</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">mirrorPath</span>: <span class="hljs-built_in">string</span> = i18n.<span class="hljs-property">I18NUtil</span>.<span class="hljs-title function_">getUnicodeWrappedFilePath</span>(path, delimiter, locale);</li><li>
</li><li>  <span class="hljs-comment">// 传入非镜像语言，不处理路径</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">localeZh</span>: <span class="hljs-title class_">Intl</span>.<span class="hljs-property">Locale</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intl</span>.<span class="hljs-title class_">Locale</span>(<span class="hljs-string">'zh'</span>);</li><li>  <span class="hljs-comment">// unMirrorPath = '/data/out/tmp'</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">unMirrorPath</span>: <span class="hljs-built_in">string</span> = i18n.<span class="hljs-property">I18NUtil</span>.<span class="hljs-title function_">getUnicodeWrappedFilePath</span>(path, delimiter, localeZh);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`call I18NUtil.getUnicodeWrappedFilePath failed, error code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="示例代码">示例代码<i class="anchor-icon anchor-icon-link" anchorid="示例代码" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitee.com/harmonyos_samples/international" target="_blank">国际化-字符处理</a></li>     </ul>    </div>   </div>   <div></div></div>