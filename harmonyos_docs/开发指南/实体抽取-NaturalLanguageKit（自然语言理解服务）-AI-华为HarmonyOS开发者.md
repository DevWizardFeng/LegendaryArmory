<h1 _ngcontent-ujm-c119="" class="doc-title ng-star-inserted" title="实体抽取"> 实体抽取 </h1>

<div _ngcontent-ujm-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section4656132919151">适用场景<i class="anchor-icon anchor-icon-link" anchorid="section4656132919151" tips="复制节点链接"></i></h2>          <p>实体抽取是自然语言处理服务的一项关键能力。以综合上下文信息，从文本中准确识别出多种类型的实体：</p>     <ol>      <li>日期时间（DATETIME）：提取文本中的具体日期,如“2024年6月18日”等。</li>      <li>电子邮件（EMAIL）：识别文本中的电子邮件地址,如“example@abc.com”。</li>      <li>快递单号（EXPRESS_NO）：抽取文本中的快递单号信息。</li>      <li>航班号（FLIGHT_NO）：定位文本中的航班号,如“CA1234”等。</li>      <li>地址（LOCATION）：从文本中提取详细的地址描述。</li>      <li>人名（NAME）：找出文本中出现的人名信息。</li>      <li>手机号（PHONE_NO）：识别文本中的手机号码。</li>      <li>网址（URL）：抽取文本中的网址链接。</li>      <li>验证码（VERIFICATION_CODE）：定位文本中的验证码数字。</li>      <li>身份证号（ID_NO）：识别文本中的身份证号码信息。       <p>通过准确抽取以上多种类型的实体信息，该项能力可以广泛应用于新闻阅读、信息检索、客户服务、社交聊天、金融运营等多种场景。例如，在新闻阅读场景中，可以对新闻正文进行实体抽取，并对人名、地名、时间、网址等关键实体信息进行高亮标识，帮助读者快速获取文章要点；在客服场景，通过抽取用户留言中的手机号、快递单号、验证码等信息，客服人员能够更高效地定位问题并给出解决方案。实体抽取为各行业的智能化应用提供了坚实的基础支持。</p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section2020122517405">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="section2020122517405" tips="复制节点链接"></i></h2>          <p>该能力当前不支持模拟器。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.3.1.3.1.1" valign="top" width="50%">          <p>AI能力</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.2.3.1.3.1.2" valign="top" width="50%">          <p>约束</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">          <p>实体抽取</p></td>         <td class="cellrowborder" valign="top" width="50%">          <ul>           <li>支持的语言：简体中文、英文、繁体中文。</li>           <li>支持的实体：时间、地点、邮箱、快递单号、航班号、人名、电话号码、网址链接、验证码、证件号。</li>           <li>文本长度：不超过1000字符。</li>          </ul></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section765353571518">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section765353571518" tips="复制节点链接"></i></h2>          <ol>      <li><span>在使用实体抽取功能时，将实现实体抽取的类添加至工程。</span>       <p></p>       <div _ngcontent-ujm-c106="" class="highlight-div"><div _ngcontent-ujm-c106="" class="highlight-div-header"><div _ngcontent-ujm-c106="" class="highlight-div-header-left"><div _ngcontent-ujm-c106="" class="handle-button expand-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ujm-c106="" class="highlight-div-header-right"><div _ngcontent-ujm-c106="" class="handle-button ai-button"></div><div _ngcontent-ujm-c106="" class="handle-button line-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ujm-c106="" class="handle-button theme-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ujm-c106="" class="handle-button copy-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ujm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textProcessing, <span class="hljs-title class_">EntityType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NaturalLanguageKit'</span>;</li></ol></pre></div></div>       <p></p></li>      <li><span>配置输入文本框。</span>       <p></p>       <div _ngcontent-ujm-c106="" class="highlight-div"><div _ngcontent-ujm-c106="" class="highlight-div-header"><div _ngcontent-ujm-c106="" class="highlight-div-header-left"><div _ngcontent-ujm-c106="" class="handle-button expand-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ujm-c106="" class="highlight-div-header-right"><div _ngcontent-ujm-c106="" class="handle-button ai-button"></div><div _ngcontent-ujm-c106="" class="handle-button line-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ujm-c106="" class="handle-button theme-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ujm-c106="" class="handle-button copy-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ujm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">private</span> <span class="hljs-attr">inputText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'张三的电话号码是12345'</span>;</li><li><span class="hljs-meta">@State</span> <span class="hljs-attr">outputText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li><span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'请输入文本'</span>, <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputText</span> })</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>  .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>  .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputText</span> = value;</li><li>  })</li></ol></pre></div></div>       <p></p></li>      <li><span>配置按钮，调用实体抽取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/natural-language-text-processing-api#section6469197174917" target="_blank">textProcessing.getEntity</a>接口。</span>       <p></p>       <div _ngcontent-ujm-c106="" class="highlight-div"><div _ngcontent-ujm-c106="" class="highlight-div-header"><div _ngcontent-ujm-c106="" class="highlight-div-header-left"><div _ngcontent-ujm-c106="" class="handle-button expand-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ujm-c106="" class="highlight-div-header-right"><div _ngcontent-ujm-c106="" class="handle-button ai-button"></div><div _ngcontent-ujm-c106="" class="handle-button line-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ujm-c106="" class="handle-button theme-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ujm-c106="" class="handle-button copy-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ujm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Button</span>(<span class="hljs-string">'获取实体结果'</span>)</li><li>  .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>  .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'45%'</span>)</li><li>  .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>  .<span class="hljs-title function_">onClick</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> textProcessing.<span class="hljs-title function_">getEntity</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">inputText</span>, {<span class="hljs-attr">entityTypes</span>: [<span class="hljs-title class_">EntityType</span>.<span class="hljs-property">NAME</span>, <span class="hljs-title class_">EntityType</span>.<span class="hljs-property">PHONE_NO</span>]});</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputText</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">formatEntityResult</span>(result);</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getEntity errorCode: <span class="hljs-subst">${err.code}</span>, errorMessage: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputText</span> = <span class="hljs-string">'Error occurred while getting entities.'</span>;</li><li>    }</li><li>  })</li></ol></pre></div></div>       <p></p></li>      <li><span>在界面上展示实体抽取结果。</span>       <p></p>       <div _ngcontent-ujm-c106="" class="highlight-div"><div _ngcontent-ujm-c106="" class="highlight-div-header"><div _ngcontent-ujm-c106="" class="highlight-div-header-left"><div _ngcontent-ujm-c106="" class="handle-button expand-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ujm-c106="" class="highlight-div-header-right"><div _ngcontent-ujm-c106="" class="handle-button ai-button"></div><div _ngcontent-ujm-c106="" class="handle-button line-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ujm-c106="" class="handle-button theme-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ujm-c106="" class="handle-button copy-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ujm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">private</span> <span class="hljs-title function_">formatEntityResult</span>(<span class="hljs-attr">entities</span>: textProcessing.<span class="hljs-property">Entity</span>[]): <span class="hljs-built_in">string</span> {</li><li>  <span class="hljs-keyword">if</span> (!entities || !entities.<span class="hljs-property">length</span>) {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-string">'No entities found.'</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">let</span> output = <span class="hljs-string">'Entities:\n'</span>;</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; entities.<span class="hljs-property">length</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> entity = entities[i];</li><li>    output += <span class="hljs-string">`Entity[<span class="hljs-subst">${i}</span>]:\n`</span>;</li><li>    output += <span class="hljs-string">`  oriText: <span class="hljs-subst">${entity.text}</span>\n`</span>;</li><li>    output += <span class="hljs-string">`  charOffset: <span class="hljs-subst">${entity.charOffset}</span>\n`</span>;</li><li>    output += <span class="hljs-string">`  entityType: <span class="hljs-subst">${entity.<span class="hljs-keyword">type</span>}</span>\n`</span>;</li><li>    output += <span class="hljs-string">`  jsonObject: <span class="hljs-subst">${entity.jsonObject}</span>\n\n`</span>;</li><li>  }</li><li>  <span class="hljs-keyword">return</span> output;</li><li>}</li></ol></pre></div></div>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section2858124411520">开发实例<i class="anchor-icon anchor-icon-link" anchorid="section2858124411520" tips="复制节点链接"></i></h2>          <div _ngcontent-ujm-c106="" class="highlight-div"><div _ngcontent-ujm-c106="" class="highlight-div-header"><div _ngcontent-ujm-c106="" class="highlight-div-header-left"><div _ngcontent-ujm-c106="" class="handle-button expand-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ujm-c106="" class="highlight-div-header-right"><div _ngcontent-ujm-c106="" class="handle-button ai-button"></div><div _ngcontent-ujm-c106="" class="handle-button line-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ujm-c106="" class="handle-button theme-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ujm-c106="" class="handle-button copy-button"><div _ngcontent-ujm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ujm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { textProcessing, <span class="hljs-title class_">EntityType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NaturalLanguageKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">inputText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'张三的电话号码是12345'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">outputText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'请输入文本'</span>, <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputText</span> })</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputText</span> = value;</li><li>        })</li><li>
</li><li>      <span class="hljs-title class_">Scroll</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">outputText</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'40%'</span>)</li><li>
</li><li>      <span class="hljs-comment">// 调用实体抽取接口</span></li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'获取实体结果'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'45%'</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>            <span class="hljs-keyword">try</span> {</li><li>              <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> textProcessing.<span class="hljs-title function_">getEntity</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">inputText</span>, {<span class="hljs-attr">entityTypes</span>: [<span class="hljs-title class_">EntityType</span>.<span class="hljs-property">NAME</span>, <span class="hljs-title class_">EntityType</span>.<span class="hljs-property">PHONE_NO</span>]});</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputText</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">formatEntityResult</span>(result);</li><li>            } <span class="hljs-keyword">catch</span> (err) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getEntity errorCode: <span class="hljs-subst">${err.code}</span>, errorMessage: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputText</span> = <span class="hljs-string">'Error occurred while getting entities.'</span>;</li><li>            }</li><li>          })</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 实体结果转义</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">formatEntityResult</span>(<span class="hljs-attr">entities</span>: textProcessing.<span class="hljs-property">Entity</span>[]): <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-keyword">if</span> (!entities || !entities.<span class="hljs-property">length</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-string">'No entities found.'</span>;</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> output = <span class="hljs-string">'Entities:\n'</span>;</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; entities.<span class="hljs-property">length</span>; i++) {</li><li>      <span class="hljs-keyword">let</span> entity = entities[i];</li><li>      output += <span class="hljs-string">`Entity[<span class="hljs-subst">${i}</span>]:\n`</span>;</li><li>      output += <span class="hljs-string">`  oriText: <span class="hljs-subst">${entity.text}</span>\n`</span>;</li><li>      output += <span class="hljs-string">`  charOffset: <span class="hljs-subst">${entity.charOffset}</span>\n`</span>;</li><li>      output += <span class="hljs-string">`  entityType: <span class="hljs-subst">${entity.<span class="hljs-keyword">type</span>}</span>\n`</span>;</li><li>      output += <span class="hljs-string">`  jsonObject: <span class="hljs-subst">${entity.jsonObject}</span>\n\n`</span>;</li><li>    }</li><li>    <span class="hljs-keyword">return</span> output;</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>