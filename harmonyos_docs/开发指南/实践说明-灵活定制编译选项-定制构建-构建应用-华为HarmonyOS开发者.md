<h1 _ngcontent-fto-c119="" class="doc-title ng-star-inserted" title="实践说明"> 实践说明 </h1>

<div _ngcontent-fto-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001778674601"><p id="ZH-CN_TOPIC_0000002510174299__p7509135315134">应用正式对外发布版本前，需要对应用进行代码调试。调试和正式发布版本，两者编译行为可能不同。此时，可以利用buildMode能力，来定制两个版本的编译差异性。</p> <p id="ZH-CN_TOPIC_0000002510174299__p1673730141617">假设其中构建产物均为default，但编译行为不同：release模式下使能混淆，debug模式下使能debug调试。</p> <p id="ZH-CN_TOPIC_0000002510174299__p993225141919">示例工程中包含一个模块entry，将entry模块交付到构建产物default中，模块定制两种不同的编译模式debug、release，将两种构建模式均绑定到构建产物default中。工程示例图如下（模块）：</p> <p id="ZH-CN_TOPIC_0000002510174299__p5453231163819"><span><img originheight="282" originwidth="1143" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104918.76404816228533352163478346456609:50001231000000:2800:22F80512F918D36E00C6DA0AAB064AFAF1672F2236F62AAA28410D7EA5687C32.png" width="920" height="226.9816272965879"></span></p> <div class="tiledSection"><h2 id="section1448071082016">工程级build-profile.json5示例<i class="anchor-icon anchor-icon-link" anchorid="section1448071082016" tips="复制节点链接"></i></h2><div _ngcontent-fto-c106="" class="highlight-div"><div _ngcontent-fto-c106="" class="highlight-div-header"><div _ngcontent-fto-c106="" class="highlight-div-header-left"><div _ngcontent-fto-c106="" class="handle-button expand-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fto-c106="" class="highlight-div-header-right"><div _ngcontent-fto-c106="" class="handle-button ai-button"></div><div _ngcontent-fto-c106="" class="handle-button line-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fto-c106="" class="handle-button theme-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fto-c106="" class="handle-button copy-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fto-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510174299__screen113661053144214" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"app"</span>: {</li><li>    <span class="hljs-string">"signingConfigs"</span>: [],</li><li>    <span class="hljs-string">"products"</span>: [</li><li>      {</li><li>        <span class="hljs-string">"name"</span>: <span class="hljs-string">"default"</span>,</li><li>        <span class="hljs-string">"signingConfig"</span>: <span class="hljs-string">"default"</span>,</li><li>        <span class="hljs-string">"compatibleSdkVersion"</span>: <span class="hljs-string">"6.0.1(21)"</span>,</li><li>        <span class="hljs-string">"runtimeOS"</span>: <span class="hljs-string">"HarmonyOS"</span>,</li><li><span class="">        <span class="hljs-string">"buildOption"</span></span>: {</li><li>          <span class=""><span class="hljs-string">"strictMode"</span></span>: {</li><li>            <span class=""><span class="hljs-string">"caseSensitiveCheck"</span></span>: <span class=""><span class="hljs-keyword">true</span></span>,</li><li><span class="">            <span class="hljs-string">"useNormalizedOHMUrl"</span></span>: <span class=""><span class="hljs-keyword">true</span></span></li><li>          }</li><li>        }</li><li>      }</li><li>    ],</li><li>    <span class="hljs-string">"buildModeSet"</span>: [</li><li>      {</li><li>        <span class="hljs-string">"name"</span>: <span class="hljs-string">"debug"</span></li><li>      },</li><li>      {</li><li>        <span class="hljs-string">"name"</span>: <span class="hljs-string">"release"</span></li><li>      }</li><li>    ]</li><li>  },</li><li>  <span class="hljs-string">"modules"</span>: [</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"entry"</span>,</li><li>      <span class="hljs-string">"srcPath"</span>: <span class="hljs-string">"./entry"</span>,</li><li>      <span class="hljs-string">"targets"</span>: [</li><li>        {</li><li>          <span class="hljs-string">"name"</span>: <span class="hljs-string">"default"</span>,</li><li>          <span class="hljs-string">"applyToProducts"</span>: [</li><li>            <span class="hljs-string">"default"</span></li><li>          ]</li><li>        }</li><li>      ]</li><li>    }</li><li>  ]</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section4322212200">模块级build-profile.json5示例<i class="anchor-icon anchor-icon-link" anchorid="section4322212200" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section15550114191912" class="firsth2">entry模块<i class="anchor-icon anchor-icon-link" anchorid="section15550114191912" tips="复制节点链接"></i></h3><div _ngcontent-fto-c106="" class="highlight-div"><div _ngcontent-fto-c106="" class="highlight-div-header"><div _ngcontent-fto-c106="" class="highlight-div-header-left"><div _ngcontent-fto-c106="" class="handle-button expand-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fto-c106="" class="highlight-div-header-right"><div _ngcontent-fto-c106="" class="handle-button ai-button"></div><div _ngcontent-fto-c106="" class="handle-button line-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fto-c106="" class="handle-button theme-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fto-c106="" class="handle-button copy-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fto-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510174299__screen16713104416391" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"apiType"</span>: <span class="hljs-string">"stageMode"</span>,</li><li>  <span class="hljs-string">"buildOption"</span>: {</li><li>  },</li><li>  <span class="hljs-string">"buildOptionSet"</span>: [</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"release"</span>,</li><li>      <span class="hljs-string">"arkOptions"</span>: {</li><li>        <span class="hljs-string">"obfuscation"</span>: {</li><li>          <span class="hljs-string">"ruleOptions"</span>: {</li><li>            <span class="hljs-string">"enable"</span>: <span class="hljs-keyword">true</span>,</li><li>            <span class="hljs-string">"files"</span>: [</li><li>              <span class="hljs-string">"./obfuscation-rules.txt"</span></li><li>            ]</li><li>          }</li><li>        }</li><li>      }</li><li>    },</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"debug"</span>,</li><li>      <span class="hljs-string">"debuggable"</span>: <span class="hljs-keyword">true</span>,</li><li>      <span class="hljs-string">"arkOptions"</span>: {</li><li>        <span class="hljs-string">"obfuscation"</span>: {</li><li>          <span class="hljs-string">"ruleOptions"</span>: {</li><li>            <span class="hljs-string">"enable"</span>: <span class="hljs-keyword">false</span></li><li>          }</li><li>        }</li><li>      }</li><li>    }</li><li>  ],</li><li>  <span class="hljs-string">"buildModeBinder"</span>: [</li><li>    {</li><li>      <span class="hljs-string">"buildModeName"</span>: <span class="hljs-string">"release"</span>,</li><li>      <span class="hljs-string">"mappings"</span>: [</li><li>        {</li><li>          <span class="hljs-string">"buildOptionName"</span>: <span class="hljs-string">"release"</span>,</li><li>          <span class="hljs-string">"targetName"</span>: <span class="hljs-string">"default"</span></li><li>        }</li><li>      ]</li><li>    },</li><li>    {</li><li>      <span class="hljs-string">"buildModeName"</span>: <span class="hljs-string">"debug"</span>,</li><li>      <span class="hljs-string">"mappings"</span>: [</li><li>        {</li><li>          <span class="hljs-string">"buildOptionName"</span>: <span class="hljs-string">"debug"</span>,</li><li>          <span class="hljs-string">"targetName"</span>: <span class="hljs-string">"default"</span></li><li>        }</li><li>      ]</li><li>    }</li><li>  ],</li><li>  <span class="hljs-string">"targets"</span>: [</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"default"</span>,</li><li>    },</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohosTest"</span>,</li><li>    }</li><li>  ]</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section390311716277">指定构建模式<i class="anchor-icon anchor-icon-link" anchorid="section390311716277" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section13274939184016" class="firsth2">命令行<i class="anchor-icon anchor-icon-link" anchorid="section13274939184016" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510174299__p3143162513011">示例1：构建APP时，构建产物为default，指定构建模式为debug，可执行如下命令：</p> <div _ngcontent-fto-c106="" class="highlight-div"><div _ngcontent-fto-c106="" class="highlight-div-header"><div _ngcontent-fto-c106="" class="highlight-div-header-left"><div _ngcontent-fto-c106="" class="handle-button expand-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fto-c106="" class="highlight-div-header-right"><div _ngcontent-fto-c106="" class="handle-button ai-button"></div><div _ngcontent-fto-c106="" class="handle-button line-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fto-c106="" class="handle-button theme-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fto-c106="" class="handle-button copy-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fto-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" id="ZH-CN_TOPIC_0000002510174299__screen17715458144117" data-highlighted="yes"><ol class="linenums"><li>hvigorw --mode project -p product=<span class="hljs-keyword">default</span> -p buildMode=debug assembleApp</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510174299__p17391487187">编译产物示例如下：</p> <p id="ZH-CN_TOPIC_0000002510174299__p174006399179"><span><img originheight="347" originwidth="312" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104919.55271940318467848467765179780328:50001231000000:2800:4F33597E934FC15F9169AF2A6867E2BE1567298C216B584365296C6B0CC81A9B.png" width="312" height="347"></span></p> <p id="ZH-CN_TOPIC_0000002510174299__p683035818211">示例2：构建APP时，构建产物为default，指定构建模式为release，可执行如下命令：</p> <div _ngcontent-fto-c106="" class="highlight-div"><div _ngcontent-fto-c106="" class="highlight-div-header"><div _ngcontent-fto-c106="" class="highlight-div-header-left"><div _ngcontent-fto-c106="" class="handle-button expand-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fto-c106="" class="highlight-div-header-right"><div _ngcontent-fto-c106="" class="handle-button ai-button"></div><div _ngcontent-fto-c106="" class="handle-button line-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fto-c106="" class="handle-button theme-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fto-c106="" class="handle-button copy-button"><div _ngcontent-fto-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fto-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" id="ZH-CN_TOPIC_0000002510174299__screen178301758829" data-highlighted="yes"><ol class="linenums"><li>hvigorw --mode project -p product=<span class="hljs-keyword">default</span> -p buildMode=release assembleApp</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510174299__p7438114615184">编译产物示例如下：</p> <p id="ZH-CN_TOPIC_0000002510174299__p1455922952812"><span><img originheight="322" originwidth="279" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104919.02486797194424947347251972487047:50001231000000:2800:6493FEDB39EAE6607BFB72A34FEAA50FC242A6F710BD2CFA0B49CF4AA0FF6E3A.png" class="notEnlarge" width="279" height="322"></span></p> </div> <div class="tiledSection"><h3 id="section11285154974315">DevEco Studio界面<i class="anchor-icon anchor-icon-link" anchorid="section11285154974315" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510174299__p14377203912441">在DevEco Studio界面进行可视化配置，Build Mode下拉选择对应配置选项debug后，点击Build -&gt; Build Hap(s)/APP(s) -&gt; Build APP(s) ，构建编译模式为debug，构建产物为default的APP包。</p> <p id="ZH-CN_TOPIC_0000002510174299__p15638102919461"><span><img originheight="313" originwidth="466" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104919.58908036896177103208307077130217:50001231000000:2800:0F21E966F3D469AC46F3CACAA4E2A44D5924069C9B0B94ACA0713481E589F527.png" width="466" height="313"></span></p> </div> </div> <div></div></div>