<h1 _ngcontent-vbm-c119="" class="doc-title ng-star-inserted" title="富文本编辑（RichEditor）"> 富文本编辑（RichEditor） </h1>

<div _ngcontent-vbm-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>RichEditor是支持图文混排和文本交互式编辑的组件，通常用于响应用户对图文混合内容的输入操作，例如可以输入图文的评论区。具体用法参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor" target="_blank">RichEditor</a>。</p>    <p>对于仅需图文展示而不需要编辑的场景，推荐使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text" target="_blank">Text</a>组件。</p>    <p>对于需要大量展示Html格式内容的场景，推荐使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richtext" target="_blank">RichText</a>组件。</p>    <div class="tiledSection">     <h2 id="组件构成">组件构成<i class="anchor-icon anchor-icon-link" anchorid="组件构成" tips="复制节点链接"></i></h2>          <p>下图展示了组件元素的构成。</p>     <p><span><img originheight="401" originwidth="1695" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.49584159890209781040640165657222:50001231000000:2800:48CA3D91AB84632C4526DFB0B3B4187F971092AE4C1EF788EF3F0374F5F92EA4.jpg" width="920" height="217.6519174041298"></span></p>     <p>组件的元素构成包括：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.3.1.1" valign="top" width="50%">元素</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.3.1.2" valign="top" width="50%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">内容区</td>         <td class="cellrowborder" valign="top" width="50%">内容可显示的区域。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">光标</td>         <td class="cellrowborder" valign="top" width="50%">用于指明当前输入位置。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">手柄</td>         <td class="cellrowborder" valign="top" width="50%">分为左手柄和右手柄，可分别进行拖动，用于调整文本选择区域范围。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">菜单</td>         <td class="cellrowborder" valign="top" width="50%">选中内容后弹出，其中包含复制、粘贴等内容操作按钮。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="创建richeditor组件">创建RichEditor组件<i class="anchor-icon anchor-icon-link" anchorid="创建richeditor组件" tips="复制节点链接"></i></h2>          <p>开发者可以<a href="/consumer/cn/doc/harmonyos-guides/arkts-common-components-richeditor#创建基于属性字符串进行内容管理的richeditor组件">创建基于属性字符串进行内容管理的RichEditor组件</a>或<a href="/consumer/cn/doc/harmonyos-guides/arkts-common-components-richeditor#创建基于span进行内容管理的richeditor组件">创建基于Span进行内容管理的RichEditor组件</a>。</p>    </div>    <div class="tiledSection">     <h3 id="创建基于属性字符串进行内容管理的richeditor组件" class="firsth2">创建基于属性字符串进行内容管理的RichEditor组件<i class="anchor-icon anchor-icon-link" anchorid="创建基于属性字符串进行内容管理的richeditor组件" tips="复制节点链接"></i></h3>          <p>使用RichEditor(options: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#richeditorstyledstringoptions12" target="_blank">RichEditorStyledStringOptions</a>)接口可以创建基于属性字符串（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-styled-string">StyledString/MutableStyledString</a>）进行内容管理的RichEditor组件。这种构建方式开发者可以通过在应用侧持有属性字符串对象来管理数据，通过修改属性字符串对象的内容、样式，再传递给组件，即可实现对富文本组件内容的更新。</p>     <p>相比于使用controller提供的接口进行内容样式更新，使用起来更加灵活便捷。同时属性字符串对象可以设置到各类支持属性字符串的文本组件中，可以快速实现内容的迁移。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">fontStyle</span>: <span class="hljs-title class_">TextStyle</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({</li><li>  <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span></li><li>});</li><li><span class="hljs-comment">// 定义字体样式对象</span></li><li>
</li><li><span class="hljs-attr">mutableStyledString</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">"创建使用属性字符串构建的RichEditor组件。"</span>,</li><li>  [{</li><li>    <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>    <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>    <span class="hljs-attr">styledValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">fontStyle</span></li><li>  }]);</li><li><span class="hljs-comment">// 创建属性字符串</span></li><li>
</li><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorStyledStringController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorStyledStringController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorStyledStringOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setStyledString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutableStyledString</span>);</li><li>  })</li></ol></pre></div></div>     <p><span><img originheight="131" originwidth="431" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.12264766633897121423807995989606:50001231000000:2800:5B66A8B3F321EDCA614DB989CCE07C629787CE49F74395619A054159F82B3034.gif" width="431" height="131"></span></p>    </div>    <div class="tiledSection">     <h3 id="创建基于span进行内容管理的richeditor组件">创建基于Span进行内容管理的RichEditor组件<i class="anchor-icon anchor-icon-link" anchorid="创建基于span进行内容管理的richeditor组件" tips="复制节点链接"></i></h3>          <p>使用RichEditor(value: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#richeditoroptions" target="_blank">RichEditorOptions</a>)接口可以创建基于Span进行内容管理的RichEditor组件，通常用于复杂内容场景，开发者通过RichEditorController提供的接口实现内容、样式的管理。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct create_rich_editor {</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>          .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'创建不使用属性字符串构建的RichEditor组件。'</span>, {</li><li>              <span class="hljs-attr">style</span>: {</li><li>                <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>                <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span></li><li>              }</li><li>            })</li><li>          })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="103" originwidth="431" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.22542778354048693947286646359735:50001231000000:2800:CF676CBBF5D1FA9652CB6994CA0826F76F0BFD8F8EF6D2790DCDA4A825EF52C9.gif" width="431" height="103"></span></p>    </div>    <div class="tiledSection">     <h2 id="添加内容">添加内容<i class="anchor-icon anchor-icon-link" anchorid="添加内容" tips="复制节点链接"></i></h2>          <p>富文本组件可以通过不同的接口添加多种形式的内容。</p>    </div>    <div class="tiledSection">     <h3 id="添加文本内容" class="firsth2">添加文本内容<i class="anchor-icon anchor-icon-link" anchorid="添加文本内容" tips="复制节点链接"></i></h3>          <p>除了直接在组件内输入内容，也可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#addtextspan" target="_blank">addTextSpan</a>添加文本内容。</p>     <p>此接口可以实现文本样式多样化，例如创建混合样式文本。</p>     <p>如果组件是获焦状态并且光标在闪烁，那么通过addTextSpan添加文本内容后，光标位置会更新，在新添加文本内容的右侧闪烁。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct add_text_span {</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>        .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'点击按钮在此处添加text。'</span>, {</li><li>            <span class="hljs-attr">style</span>: {</li><li>              <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>              <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span></li><li>            }</li><li>          })</li><li>        })</li><li>        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span> })</li><li>        .<span class="hljs-title function_">constraintSize</span>({</li><li>          <span class="hljs-attr">maxHeight</span>: <span class="hljs-number">100</span></li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'addTextSpan'</span>, {</li><li>        <span class="hljs-attr">buttonStyle</span>: <span class="hljs-title class_">ButtonStyleMode</span>.<span class="hljs-property">NORMAL</span></li><li>      })</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">13</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'新添加一段文字。'</span>)</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="290" originwidth="462" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.86600210715745245527468712875919:50001231000000:2800:67953074DC30723B90DED0B1D756DC3FCC7A60C219ECF5F68ECAD4706CE972D6.gif" width="462" height="290"></span></p>    </div>    <div class="tiledSection">     <h3 id="添加图片内容">添加图片内容<i class="anchor-icon anchor-icon-link" anchorid="添加图片内容" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#addimagespan" target="_blank">addImageSpan</a>添加图片内容。</p>     <p>此接口可用于内容丰富与可视化展示，例如在新闻中加入图片，在文档中加入数据可视化图形等。</p>     <p>如果组件是获焦状态并且光标在闪烁，那么通过addImageSpan添加图片内容后，光标位置会更新，在新添加图片内容的右侧闪烁。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'点击按钮在此处添加image。'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li><span class="hljs-title class_">Button</span>(<span class="hljs-string">'addImageSpan'</span>, {</li><li>  <span class="hljs-attr">buttonStyle</span>: <span class="hljs-title class_">ButtonStyleMode</span>.<span class="hljs-property">NORMAL</span></li><li>})</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">30</span>)</li><li>  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">13</span>)</li><li>  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addImageSpan</span>($r(<span class="hljs-string">"app.media.startIcon"</span>), {</li><li>      <span class="hljs-attr">imageStyle</span>: {</li><li>        <span class="hljs-attr">size</span>: [<span class="hljs-string">"57px"</span>, <span class="hljs-string">"57px"</span>]</li><li>      }</li><li>    })</li><li>  })</li></ol></pre></div></div>     <p><span><img originheight="265" originwidth="398" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.88456069065140404558124009275679:50001231000000:2800:AAFC77BC717B9C6FE6B7BCEC46E2D2B703E4CAC9F82676D050B664A28C38A0B6.gif" width="398" height="265"></span></p>    </div>    <div class="tiledSection">     <h3 id="添加builder装饰器修饰的内容">添加@Builder装饰器修饰的内容<i class="anchor-icon anchor-icon-link" anchorid="添加builder装饰器修饰的内容" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#addbuilderspan11" target="_blank">addBuilderSpan</a>添加@Builder装饰器修饰的内容。</p>     <p>此接口可用于自定义复杂组件的嵌入，例如在组件内加入自定义图表。</p>     <p>该接口内可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#richeditorbuilderspanoptions11" target="_blank">RichEditorBuilderSpanOptions</a>设置在组件中添加builder的位置，省略或者为异常值时，则添加builder到所有内容的最后位置。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">private</span> <span class="hljs-attr">my_builder</span>: <span class="hljs-title class_">CustomBuilder</span> = <span class="hljs-literal">undefined</span></li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-title class_">TextBuilder</span>() {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.startIcon'</span>)).<span class="hljs-title function_">width</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">margin</span>(<span class="hljs-number">16</span>)</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"文本文档.txt"</span>).<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"123.45KB"</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#8a8a8a'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">12</span>)</li><li>    }.<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Start</span>)</li><li>  }.<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#f4f4f4'</span>)</li><li>  .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-string">"20"</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">220</span>)</li><li>}</li><li>
</li><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-title class_">Button</span>(<span class="hljs-string">'addBuilderSpan'</span>, {</li><li>  <span class="hljs-attr">buttonStyle</span>: <span class="hljs-title class_">ButtonStyleMode</span>.<span class="hljs-property">NORMAL</span></li><li>})</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">30</span>)</li><li>  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">13</span>)</li><li>  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">my_builder</span> = <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">TextBuilder</span>()</li><li>    }</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addBuilderSpan</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">my_builder</span>)</li><li>  })</li></ol></pre></div></div>     <p><span><img originheight="309" originwidth="431" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.12885170629471505652524977020198:50001231000000:2800:627EEAFD622929BF82868D3BEFE9A09EE1FA98D843637F29B4383E136CAF38E9.gif" width="431" height="309"></span></p>    </div>    <div class="tiledSection">     <h3 id="添加symbolspan内容">添加SymbolSpan内容<i class="anchor-icon anchor-icon-link" anchorid="添加symbolspan内容" tips="复制节点链接"></i></h3>          <p>可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#addsymbolspan11" target="_blank">addSymbolSpan</a>添加Symbol内容。此接口可用于特殊符号的添加，例如在编辑学术论文时，此接口可用于添加各种数学符号。</p>     <p>添加Symbol内容时，如果组件是获焦状态并且光标在闪烁，那么添加Symbol后，光标将移动到新插入Symbol的右侧。</p>     <p>Symbol内容暂不支持手势、复制、拖拽处理。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'点击按钮在此处添加symbol。'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li><span class="hljs-title class_">Button</span>(<span class="hljs-string">'addSymbolSpan'</span>, {</li><li>  <span class="hljs-attr">buttonStyle</span>: <span class="hljs-title class_">ButtonStyleMode</span>.<span class="hljs-property">NORMAL</span></li><li>})</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">30</span>)</li><li>  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">13</span>)</li><li>  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addSymbolSpan</span>($r(<span class="hljs-string">"sys.symbol.basketball_fill"</span>), {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">30</span></li><li>      }</li><li>    })</li><li>  })</li></ol></pre></div></div>     <p><span><img originheight="215" originwidth="469" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.63395042962288643914281430143207:50001231000000:2800:9CD634EA8F36336E19980BE7A5DD57156BDE951EBE06724BAA7F38806A57649E.gif" width="469" height="215"></span></p>    </div>    <div class="tiledSection">     <h2 id="管理内容">管理内容<i class="anchor-icon anchor-icon-link" anchorid="管理内容" tips="复制节点链接"></i></h2>          <p>富文本组件可以通过接口对内容进行管理，例如<a href="/consumer/cn/doc/harmonyos-guides/arkts-common-components-richeditor#获取组件内图文信息">获取组件内的图文信息</a>、<a href="/consumer/cn/doc/harmonyos-guides/arkts-common-components-richeditor#设置无输入时的提示文本">设置无输入时的提示文本</a>或<a href="/consumer/cn/doc/harmonyos-guides/arkts-common-components-richeditor#设置最大长度">设置组件内容的最大字符数</a>。</p>    </div>    <div class="tiledSection">     <h3 id="获取组件内图文信息" class="firsth2">获取组件内图文信息<i class="anchor-icon anchor-icon-link" anchorid="获取组件内图文信息" tips="复制节点链接"></i></h3>          <p>可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#getspans" target="_blank">getSpans</a>获取组件内所有图文内容的信息，包括图文的内容、id、样式、位置等信息。获取内容位置信息后，可对指定范围内容进行样式的更新。</p>     <p>此接口适用于已有的内容样式获取与检查，例如在模板应用场景下，可利用此接口获取文本样式。此外，它还适用于内容解析与处理，例如在文本分析应用中，此接口能够获取特定范围内的文本信息。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> }</li><li><span class="hljs-attr">infoShowController</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">infoShowOptions</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span> }</li><li><span class="hljs-comment">// 创建两个富文本组件</span></li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'点击按钮获取此处span信息。'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li><span class="hljs-title class_">Text</span>(<span class="hljs-string">'查看getSpans返回值：'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowOptions</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li><span class="hljs-title class_">Button</span>(<span class="hljs-string">'getSpans'</span>, {</li><li>  <span class="hljs-attr">buttonStyle</span>: <span class="hljs-title class_">ButtonStyleMode</span>.<span class="hljs-property">NORMAL</span></li><li>})</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">30</span>)</li><li>  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">13</span>)</li><li>  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getSpans</span>()), {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">10</span></li><li>      }</li><li>    })</li><li>  })</li></ol></pre></div></div>     <p><span><img originheight="315" originwidth="566" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.89840095698452885882341515985149:50001231000000:2800:2ACF0CA9B77A242FF03E6D0624E8FECD82D2E6959744DCDDF19E54896D4C4662.gif" width="566" height="315"></span></p>    </div>    <div class="tiledSection">     <h3 id="设置无输入时的提示文本">设置无输入时的提示文本<i class="anchor-icon anchor-icon-link" anchorid="设置无输入时的提示文本" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#placeholder12" target="_blank">placeholder</a>设置无输入时的提示文本。</p>     <p>例如，在用户登录界面采用提示文本，有助于用户区分用户名与密码的输入框。又如，在文本编辑框中，使用提示文本明确输入要求，如“限输入100字以内”，以此指导用户正确操作。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">placeholder</span>(<span class="hljs-string">"此处为提示文本..."</span>, {</li><li>    <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>,</li><li>    <span class="hljs-attr">font</span>: {</li><li>      <span class="hljs-attr">size</span>: <span class="hljs-number">15</span>,</li><li>      <span class="hljs-attr">weight</span>: <span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Normal</span>,</li><li>      <span class="hljs-attr">family</span>: <span class="hljs-string">"HarmonyOS Sans"</span>,</li><li>      <span class="hljs-attr">style</span>: <span class="hljs-title class_">FontStyle</span>.<span class="hljs-property">Normal</span></li><li>    }</li><li>  })</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li></ol></pre></div></div>     <p><span><img originheight="201" originwidth="430" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.14167460258945232564114771536208:50001231000000:2800:66A6454EB0968749046543EB500217E1800A9A03C74428B413A9E2411A223DCE.gif" width="430" height="201"></span></p>    </div>    <div class="tiledSection">     <h3 id="设置最大长度">设置最大长度<i class="anchor-icon anchor-icon-link" anchorid="设置最大长度" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#maxlength18" target="_blank">maxLength</a>可以设置富文本的最大可输入字符数。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">placeholder</span>(<span class="hljs-string">'组件设置了最大字符数：7'</span>)</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {})</li><li>  .<span class="hljs-title function_">maxLength</span>(<span class="hljs-number">7</span>)</li></ol></pre></div></div>     <p><span><img originheight="467" originwidth="362" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.67546251360765367477418868559334:50001231000000:2800:8FB2705112C9A10436CDEA6466E729E52629837B4E945F169422F763284965C1.gif" width="362" height="467"></span></p>    </div>    <div class="tiledSection">     <h2 id="事件回调">事件回调<i class="anchor-icon anchor-icon-link" anchorid="事件回调" tips="复制节点链接"></i></h2>          <p>开发者可以通过注册事件回调，感知组件事件的触发。</p>    </div>    <div class="tiledSection">     <h3 id="添加图文变化前和图文变化后可触发的回调" class="firsth2">添加图文变化前和图文变化后可触发的回调<i class="anchor-icon anchor-icon-link" anchorid="添加图文变化前和图文变化后可触发的回调" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#onwillchange12" target="_blank">onWillChange</a>添加图文变化前可触发的回调。此回调适用于用户实时数据校验与提醒，例如在用户输入文本时，可在回调内实现对输入内容的检测，若检测到敏感词汇，应立即弹出提示框。此外，它还适用于实时字数统计与限制，对于有字数限制的输入场景，可在回调中实时统计用户输入的字数，并在接近字数上限时提供相应的提示。</p>     <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#ondidchange12" target="_blank">onDidChange</a>添加图文变化后可触发的回调。此回调适用于内容保存与同步，例如在用户完成内容编辑后，可使用该回调自动将最新内容保存至本地或同步至服务器。此外，它还适用于内容状态更新与渲染，例如在待办事项列表应用中，用户编辑富文本格式的待办事项描述后，可使用该回调更新待办事项在列表中的显示样式。</p>     <p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#richeditorstyledstringoptions12" target="_blank">RichEditorStyledStringOptions</a>构建的RichEditor组件不支持上述两种回调。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-attr">infoShowController</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">infoShowOptions</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span> };</li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'组件内图文变化前，触发回调。\n图文变化后，触发回调。'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">onWillChange</span>(<span class="hljs-function">(<span class="hljs-params">value: RichEditorChangeValue</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'组件内图文变化前，触发回调：\n'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value), {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">10</span></li><li>      }</li><li>    })</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  })</li><li>  .<span class="hljs-title function_">onDidChange</span>(<span class="hljs-function">(<span class="hljs-params">rangeBefore: TextRange, rangeAfter: TextRange</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'\n图文变化后，触发回调：\nrangeBefore:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(rangeBefore) +</li><li>      <span class="hljs-string">'\nrangeAfter: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(rangeAfter), {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">10</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li><span class="hljs-title class_">Text</span>(<span class="hljs-string">'查看回调内容：'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowOptions</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">70</span>)</li></ol></pre></div></div>     <p><span><img originheight="164" originwidth="359" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.15260957069306525959611699624797:50001231000000:2800:62B199EF7F3BB955E431A641C3C60A3513A873F5EBD8A7E7399AC9F59C007E1C.gif" width="359" height="164"></span></p>    </div>    <div class="tiledSection">     <h3 id="添加输入法输入内容前和完成输入后可触发的回调">添加输入法输入内容前和完成输入后可触发的回调<i class="anchor-icon anchor-icon-link" anchorid="添加输入法输入内容前和完成输入后可触发的回调" tips="复制节点链接"></i></h3>          <p>添加输入法输入内容前和完成输入后可触发的回调。</p>     <p>在添加输入法输入内容前，可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#abouttoimeinput" target="_blank">aboutToIMEInput</a>触发回调。在输入法完成输入后，可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#ondidimeinput12" target="_blank">onDidIMEInput</a>触发回调。</p>     <p>这两种回调机制适用于文本上屏过程的业务逻辑处理。例如：在用户输入的文本上屏前，利用回调提供联想词汇，在用户完成输入后，执行自动化纠错或格式转换。两种回调的时序依次为：aboutToIMEInput、onDidIMEInput。</p>     <p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#richeditorstyledstringoptions12" target="_blank">RichEditorStyledStringOptions</a>构建的组件不支持上述两种回调功能。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-attr">infoShowController</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">infoShowOptions</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span> };</li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'输入法输入内容前，触发回调。\n输入法完成输入后，触发回调。'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">aboutToIMEInput</span>(<span class="hljs-function">(<span class="hljs-params">value: RichEditorInsertValue</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'输入法输入内容前，触发aboutToIMEInput回调：\n'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value), {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">10</span></li><li>      }</li><li>    })</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  })</li><li>  .<span class="hljs-title function_">onDidIMEInput</span>(<span class="hljs-function">(<span class="hljs-params">value: TextRange</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'输入法完成输入后，触发onDidIMEInput回调：\n'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value), {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">10</span></li><li>      }</li><li>    })</li><li>        })</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li><span class="hljs-title class_">Text</span>(<span class="hljs-string">'查看回调内容：'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowOptions</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">70</span>)</li></ol></pre></div></div>     <p><span><img originheight="302" originwidth="448" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.83393039447087735940945001810425:50001231000000:2800:26D559AA139D5C39DED653C96692A7D3EB2E6969A3CE0CA3633FFF55CC7AAA6E.gif" width="448" height="302"></span></p>    </div>    <div class="tiledSection">     <h3 id="添加完成粘贴前可触发的回调">添加完成粘贴前可触发的回调<i class="anchor-icon anchor-icon-link" anchorid="添加完成粘贴前可触发的回调" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#onpaste11" target="_blank">onPaste</a>回调，来添加粘贴前要处理的流程。</p>     <p>此回调适用于内容格式的处理。例如，当用户复制包含HTML标签的文本时，可在回调中编写代码，将其转换为富文本组件所支持的格式，同时剔除不必要的标签或仅保留纯文本内容。</p>     <p>由于组件默认的粘贴行为仅限于纯文本，无法处理图片粘贴，开发者可利用此方法实现图文并茂的粘贴功能，从而替代组件原有的粘贴行为。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>, pasteboard } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct on_cut_copy_paste {</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> }</li><li>  <span class="hljs-attr">infoShowController</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li>  <span class="hljs-attr">infoShowOptions</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span> }</li><li>
</li><li>  <span class="hljs-title function_">popDataFromPasteboard</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> selection = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getSelection</span>();</li><li>    <span class="hljs-keyword">let</span> start = selection.<span class="hljs-property">selection</span>[<span class="hljs-number">0</span>];</li><li>    <span class="hljs-keyword">let</span> end = selection.<span class="hljs-property">selection</span>[<span class="hljs-number">1</span>];</li><li>    <span class="hljs-keyword">if</span> (start == end) {</li><li>      start = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getCaretOffset</span>();</li><li>      end = start;</li><li>    }</li><li>    <span class="hljs-keyword">let</span> moveOffset = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-keyword">let</span> sysBoard = pasteboard.<span class="hljs-title function_">getSystemPasteboard</span>();</li><li>    sysBoard.<span class="hljs-title function_">getData</span>(<span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-keyword">if</span> (start != end) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">deleteSpans</span>({ <span class="hljs-attr">start</span>: start, <span class="hljs-attr">end</span>: end })</li><li>      }</li><li>      <span class="hljs-keyword">let</span> count = data.<span class="hljs-title function_">getRecordCount</span>();</li><li>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; count; i++) {</li><li>        <span class="hljs-keyword">const</span> element = data.<span class="hljs-title function_">getRecord</span>(i);</li><li>        <span class="hljs-keyword">if</span> (element &amp;&amp; element.<span class="hljs-property">plainText</span> &amp;&amp; element.<span class="hljs-property">mimeType</span> === pasteboard.<span class="hljs-property">MIMETYPE_TEXT_PLAIN</span>) {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(element.<span class="hljs-property">plainText</span>,</li><li>            {</li><li>              <span class="hljs-attr">style</span>: { <span class="hljs-attr">fontSize</span>: <span class="hljs-number">26</span>, <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span> },</li><li>              <span class="hljs-attr">offset</span>: start + moveOffset</li><li>            }</li><li>          )</li><li>          moveOffset += element.<span class="hljs-property">plainText</span>.<span class="hljs-property">length</span>;</li><li>        }</li><li>      }</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setCaretOffset</span>(start + moveOffset)</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">3</span> }) {</li><li>        <span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>          .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'对此处文本进行复制粘贴操作可触发对应回调。'</span>,</li><li>              { <span class="hljs-attr">style</span>: { <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span> } })</li><li>          })</li><li>          .<span class="hljs-title function_">onPaste</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'触发onPaste回调\n'</span>, { <span class="hljs-attr">style</span>: { <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-number">10</span> } })</li><li>            <span class="hljs-keyword">if</span> (event != <span class="hljs-literal">undefined</span> &amp;&amp; event.<span class="hljs-property">preventDefault</span>) {</li><li>              event.<span class="hljs-title function_">preventDefault</span>();</li><li>            }</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'RichEditor onPaste'</span>)</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">popDataFromPasteboard</span>()</li><li>          })</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">70</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'查看回调内容：'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">70</span>)</li><li>        <span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowOptions</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">70</span>)</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Start</span>)</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="添加完成剪切前可触发的回调">添加完成剪切前可触发的回调<i class="anchor-icon anchor-icon-link" anchorid="添加完成剪切前可触发的回调" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#oncut12" target="_blank">onCut</a>回调，来添加剪切前要处理的流程。</p>     <p>此回调功能适用于数据处理与存储。例如，当用户从富文本组件中剪切内容时，可在回调中临时存储被剪切的内容，确保后续的粘贴操作能够准确无误地还原内容。</p>     <p>由于组件默认的剪切行为仅限于纯文本，无法处理图片剪切，开发者可利用此方法实现图文并茂的剪切功能，从而替代组件原有的剪切行为。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-attr">infoShowController</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">infoShowOptions</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span> };</li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'对此处文本进行复制粘贴操作可触发对应回调。'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">onCut</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'触发onCut回调\n'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">10</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">70</span>)</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowOptions</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">70</span>)</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="添加完成复制前可触发的回调">添加完成复制前可触发的回调<i class="anchor-icon anchor-icon-link" anchorid="添加完成复制前可触发的回调" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#oncopy12" target="_blank">onCopy</a>回调，来添加复制前要处理的流程。</p>     <p>此回调适用于内容的备份与共享，例如在用户复制内容时，可在回调中执行以下操作：将复制的内容及其格式信息保存至本地备份文件夹，或自动生成一段包含复制内容及产品购买链接的分享文案，以方便用户进行粘贴和分享。</p>     <p>组件默认的复制行为仅限于纯文本，无法处理图片。开发者可利用此方法实现图文并茂的复制功能，替代组件的默认行为。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-attr">infoShowController</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">infoShowOptions</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span> };</li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'对此处文本进行复制粘贴操作可触发对应回调。'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">onCopy</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'触发onCopy回调\n'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">10</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">70</span>)</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowOptions</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">70</span>)</li></ol></pre></div></div>     <p><span><img originheight="288" originwidth="500" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.83701886282562004958252742766756:50001231000000:2800:A5A874553F486C27D8CEEC52E511785B9FD7143E68DF44D2A999B566C0BAB4CF.gif" width="500" height="288"></span></p>     <p>更多事件使用请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#事件" target="_blank">RichEditor事件</a>。</p>    </div>    <div class="tiledSection">     <h2 id="组件交互">组件交互<i class="anchor-icon anchor-icon-link" anchorid="组件交互" tips="复制节点链接"></i></h2>          <p>可以通过接口配置交互元素属性，感知交互元素变化。</p>    </div>    <div class="tiledSection">     <h3 id="设置输入框光标和手柄的颜色" class="firsth2">设置输入框光标和手柄的颜色<i class="anchor-icon anchor-icon-link" anchorid="设置输入框光标和手柄的颜色" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#caretcolor12" target="_blank">caretColor</a>设置输入框光标和手柄的颜色。</p>     <p>设置不同颜色的光标和手柄可以提高视觉辨识度，特别是在包含多个输入区域的复杂界面中，独特的光标颜色能帮助快速定位当前操作的输入区域。这一特性也可以提升用户体验，使光标颜色与应用页面整体的风格相协调。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'组件设置了光标手柄颜色。'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">caretColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">300</span>)</li></ol></pre></div></div>     <p><span><img originheight="228" originwidth="463" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.56476455367907581686178073148415:50001231000000:2800:3A0944F250FA757E6E2F8D79F4D7AEE74BDFAA9AF237CB32FC2DC38A581124B8.gif" width="463" height="228"></span></p>    </div>    <div class="tiledSection">     <h3 id="添加组件内容选择区域或编辑状态下光标位置改变时可触发的回调">添加组件内容选择区域或编辑状态下光标位置改变时可触发的回调<i class="anchor-icon anchor-icon-link" anchorid="添加组件内容选择区域或编辑状态下光标位置改变时可触发的回调" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#onselectionchange12" target="_blank">onSelectionChange</a>来添加组件内容选择区域或编辑状态下光标位置改变时可触发的回调。</p>     <p>该回调可用于实时监听组件内容选中区域变化，例如实现实时更新工具栏状态（显示字体、段落格式等）、统计选中内容长度或生成选中内容摘要。实时响应选中状态，动态联动交互元素，提升富文本编辑的操作反馈体验和功能的灵活性。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-attr">infoShowController</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">infoShowOptions</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span> };</li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'改变内容选择区域或编辑状态下的光标位置，触发onSelectionChange回调。'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">onSelectionChange</span>(<span class="hljs-function">(<span class="hljs-params">value: RichEditorRange</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowController</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"触发了onSelectionChange回调，起始范围信息为：("</span> + value.<span class="hljs-property">start</span> + <span class="hljs-string">","</span> +</li><li>    value.<span class="hljs-property">end</span> + <span class="hljs-string">")"</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">10</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li><span class="hljs-title class_">Text</span>(<span class="hljs-string">'查看回调内容：'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">infoShowOptions</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">70</span>)</li></ol></pre></div></div>     <p><span><img originheight="365" originwidth="452" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.57947450301930297292557583762930:50001231000000:2800:B96A180F38640A01565827528C772C5489C1B2CD9941AED2B3712BDEF4BAB978.gif" width="452" height="365"></span></p>    </div>    <div class="tiledSection">     <h3 id="设置内容选中区范围">设置内容选中区范围<i class="anchor-icon anchor-icon-link" anchorid="设置内容选中区范围" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#setselection11" target="_blank">setSelection</a>设置组件内的内容选中时部分背板高亮。</p>     <p>此接口可用于实现文本聚焦效果，例如当用户点击某个文本段落的标题或摘要时，可通过该接口自动选中并高亮出对应正文内容。</p>     <p>当组件内未获焦出现光标时，调用该接口不产生选中效果。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'点击按钮在此处选中0-2位置的文本。'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li><span class="hljs-title class_">Button</span>(<span class="hljs-string">'setSelection(0,2)'</span>, {</li><li>  <span class="hljs-attr">buttonStyle</span>: <span class="hljs-title class_">ButtonStyleMode</span>.<span class="hljs-property">NORMAL</span></li><li>})</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">30</span>)</li><li>  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">13</span>)</li><li>  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setSelection</span>(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>)</li><li>  })</li></ol></pre></div></div>     <p><span><img originheight="170" originwidth="431" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.50060902374162183658309584629297:50001231000000:2800:1B02E8AEFDF92183D21A6840E3EB16E3CCCCB1353E76C3A204482E0A7DFB9C2D.gif" width="431" height="170"></span></p>    </div>    <div class="tiledSection">     <h2 id="菜单配置">菜单配置<i class="anchor-icon anchor-icon-link" anchorid="菜单配置" tips="复制节点链接"></i></h2>          <p>通过接口可以对文本选择菜单进行配置。</p>    </div>    <div class="tiledSection">     <h3 id="管理选中菜单项" class="firsth2">管理选中菜单项<i class="anchor-icon anchor-icon-link" anchorid="管理选中菜单项" tips="复制节点链接"></i></h3>          <p>当富文本选择区域变化后显示菜单之前触发<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-text-common#属性-1" target="_blank">onPrepareMenu</a>回调，可在该回调中进行菜单数据设置。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">RichEditorExample</span> {</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">endIndex</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-number">0</span>;</li><li>  onCreateMenu = <span class="hljs-function">(<span class="hljs-params">menuItems: <span class="hljs-built_in">Array</span>&lt;TextMenuItem&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">const</span> idsToFilter = [</li><li>      <span class="hljs-title class_">TextMenuItemId</span>.<span class="hljs-property">TRANSLATE</span>,</li><li>      <span class="hljs-title class_">TextMenuItemId</span>.<span class="hljs-property">SHARE</span>,</li><li>      <span class="hljs-title class_">TextMenuItemId</span>.<span class="hljs-property">SEARCH</span>,</li><li>      <span class="hljs-title class_">TextMenuItemId</span>.<span class="hljs-property">AI_WRITER</span></li><li>    ]</li><li>    <span class="hljs-keyword">const</span> items = menuItems.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> !idsToFilter.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> id.<span class="hljs-title function_">equals</span>(item.<span class="hljs-property">id</span>)))</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">item1</span>: <span class="hljs-title class_">TextMenuItem</span> = {</li><li>      <span class="hljs-attr">content</span>: <span class="hljs-string">'create1'</span>,</li><li>      <span class="hljs-attr">icon</span>: $r(<span class="hljs-string">'app.media.startIcon'</span>),</li><li>      <span class="hljs-attr">id</span>: <span class="hljs-title class_">TextMenuItemId</span>.<span class="hljs-title function_">of</span>(<span class="hljs-string">'create1'</span>),</li><li>    };</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">item2</span>: <span class="hljs-title class_">TextMenuItem</span> = {</li><li>      <span class="hljs-attr">content</span>: <span class="hljs-string">'create2'</span>,</li><li>      <span class="hljs-attr">id</span>: <span class="hljs-title class_">TextMenuItemId</span>.<span class="hljs-title function_">of</span>(<span class="hljs-string">'create2'</span>),</li><li>      <span class="hljs-attr">icon</span>: $r(<span class="hljs-string">'app.media.startIcon'</span>),</li><li>    };</li><li>    items.<span class="hljs-title function_">push</span>(item1);</li><li>    items.<span class="hljs-title function_">unshift</span>(item2);</li><li>    <span class="hljs-keyword">return</span> items;</li><li>  }</li><li>  onMenuItemClick = <span class="hljs-function">(<span class="hljs-params">menuItem: TextMenuItem, textRange: TextRange</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (menuItem.<span class="hljs-property">id</span>.<span class="hljs-title function_">equals</span>(<span class="hljs-title class_">TextMenuItemId</span>.<span class="hljs-title function_">of</span>(<span class="hljs-string">"create2"</span>))) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"拦截 id: create2 start:"</span> + textRange.<span class="hljs-property">start</span> + <span class="hljs-string">"; end:"</span> + textRange.<span class="hljs-property">end</span>);</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (menuItem.<span class="hljs-property">id</span>.<span class="hljs-title function_">equals</span>(<span class="hljs-title class_">TextMenuItemId</span>.<span class="hljs-title function_">of</span>(<span class="hljs-string">"prepare1"</span>))) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"拦截 id: prepare1 start:"</span> + textRange.<span class="hljs-property">start</span> + <span class="hljs-string">"; end:"</span> + textRange.<span class="hljs-property">end</span>);</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (menuItem.<span class="hljs-property">id</span>.<span class="hljs-title function_">equals</span>(<span class="hljs-title class_">TextMenuItemId</span>.<span class="hljs-property">COPY</span>)) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"拦截 COPY start:"</span> + textRange.<span class="hljs-property">start</span> + <span class="hljs-string">"; end:"</span> + textRange.<span class="hljs-property">end</span>);</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (menuItem.<span class="hljs-property">id</span>.<span class="hljs-title function_">equals</span>(<span class="hljs-title class_">TextMenuItemId</span>.<span class="hljs-property">SELECT_ALL</span>)) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"不拦截 SELECT_ALL start:"</span> + textRange.<span class="hljs-property">start</span> + <span class="hljs-string">"; end:"</span> + textRange.<span class="hljs-property">end</span>);</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>  }</li><li>  onPrepareMenu = <span class="hljs-function">(<span class="hljs-params">menuItems: <span class="hljs-built_in">Array</span>&lt;TextMenuItem&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">item1</span>: <span class="hljs-title class_">TextMenuItem</span> = {</li><li>      <span class="hljs-attr">content</span>: <span class="hljs-string">'prepare1_'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span>,</li><li>      <span class="hljs-attr">icon</span>: $r(<span class="hljs-string">'app.media.startIcon'</span>),</li><li>      <span class="hljs-attr">id</span>: <span class="hljs-title class_">TextMenuItemId</span>.<span class="hljs-title function_">of</span>(<span class="hljs-string">'prepare1'</span>),</li><li>    };</li><li>    menuItems.<span class="hljs-title function_">unshift</span>(item1);</li><li>    <span class="hljs-keyword">return</span> menuItems;</li><li>  }</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">editMenuOptions</span>: <span class="hljs-title class_">EditMenuOptions</span> = {</li><li>    <span class="hljs-attr">onCreateMenu</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">onCreateMenu</span>,</li><li>    <span class="hljs-attr">onMenuItemClick</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">onMenuItemClick</span>,</li><li>    <span class="hljs-attr">onPrepareMenu</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">onPrepareMenu</span></li><li>  };</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>        .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">"RichEditor editMenuOptions"</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">editMenuOptions</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">editMenuOptions</span>)</li><li>        .<span class="hljs-title function_">onSelectionChange</span>(<span class="hljs-function">(<span class="hljs-params">range: RichEditorRange</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onSelectionChange, ("</span> + range.<span class="hljs-property">start</span> + <span class="hljs-string">","</span> + range.<span class="hljs-property">end</span> + <span class="hljs-string">")"</span>);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span> = range.<span class="hljs-property">end</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">100</span> })</li><li>        .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>        .<span class="hljs-title function_">borderColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">"90%"</span>)</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-string">"5%"</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="225" originwidth="301" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.13546876543458359293247500091159:50001231000000:2800:66D144A8EB7FEE5580B8872D65F0229966BE7A89E6FE85F8F3377D09F4EC3E87.gif" width="301" height="225"></span></p>    </div>    <div class="tiledSection">     <h3 id="屏蔽系统服务类菜单项">屏蔽系统服务类菜单项<i class="anchor-icon anchor-icon-link" anchorid="屏蔽系统服务类菜单项" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-textmenucontroller#disablesystemservicemenuitems20" target="_blank">disableSystemServiceMenuItems</a>屏蔽富文本选择菜单内所有系统服务菜单项。</p>     <p>此接口保护内容安全，适用于限制文本操作的场景，例如展示保密内容或禁止复制的版权文本。屏蔽系统服务菜单项，防止用户通过系统服务菜单复制、分享文本，降低内容泄露风险。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">TextMenuController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// 禁用所有系统服务菜单</span></li><li>    <span class="hljs-title class_">TextMenuController</span>.<span class="hljs-title function_">disableSystemServiceMenuItems</span>(<span class="hljs-literal">true</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// 页面消失恢复系统服务菜单</span></li><li>    <span class="hljs-title class_">TextMenuController</span>.<span class="hljs-title function_">disableSystemServiceMenuItems</span>(<span class="hljs-literal">false</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>).<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">"这是一个RichEditor"</span>,</li><li>            {</li><li>              <span class="hljs-attr">style</span>:</li><li>              {</li><li>                <span class="hljs-attr">fontSize</span>: <span class="hljs-number">30</span></li><li>              }</li><li>            })</li><li>        })</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">editMenuOptions</span>({</li><li>            <span class="hljs-attr">onCreateMenu</span>: <span class="hljs-function">(<span class="hljs-params">menuItems: <span class="hljs-built_in">Array</span>&lt;TextMenuItem&gt;</span>) =&gt;</span> {</li><li>              <span class="hljs-comment">// menuItems不包含被屏蔽的系统菜单项</span></li><li>              <span class="hljs-keyword">return</span> menuItems;</li><li>            },</li><li>            <span class="hljs-attr">onMenuItemClick</span>: <span class="hljs-function">(<span class="hljs-params">menuItem: TextMenuItem, textRange: TextRange</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>            }</li><li>          })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="159" originwidth="281" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.53876073960944878457914275281843:50001231000000:2800:20788F1AF8936AF21A3A933948724A7A58F4BE6F928C36F0135116AD03F87BBC.gif" class="notEnlarge" width="281" height="159"></span></p>     <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-textmenucontroller#disablemenuitems20" target="_blank">disableMenuItems</a>可以屏蔽富文本选择菜单内指定的系统服务菜单项。</p>     <p>此接口可精确屏蔽指定的系统服务菜单项，保留应用所需的系统菜单功能，使菜单更贴合实际交互设计。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">TextMenuController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// 禁用搜索和翻译菜单</span></li><li>    <span class="hljs-title class_">TextMenuController</span>.<span class="hljs-title function_">disableMenuItems</span>([<span class="hljs-title class_">TextMenuItemId</span>.<span class="hljs-property">SEARCH</span>, <span class="hljs-title class_">TextMenuItemId</span>.<span class="hljs-property">TRANSLATE</span>])</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// 恢复系统服务菜单</span></li><li>    <span class="hljs-title class_">TextMenuController</span>.<span class="hljs-title function_">disableMenuItems</span>([])</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>).<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">"这是一个RichEditor"</span>,</li><li>            {</li><li>              <span class="hljs-attr">style</span>:</li><li>              {</li><li>                <span class="hljs-attr">fontSize</span>: <span class="hljs-number">30</span></li><li>              }</li><li>            })</li><li>        })</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">editMenuOptions</span>({</li><li>            <span class="hljs-attr">onCreateMenu</span>: <span class="hljs-function">(<span class="hljs-params">menuItems: <span class="hljs-built_in">Array</span>&lt;TextMenuItem&gt;</span>) =&gt;</span> {</li><li>              <span class="hljs-comment">// menuItems不包含搜索和翻译</span></li><li>              <span class="hljs-keyword">return</span> menuItems;</li><li>            },</li><li>            <span class="hljs-attr">onMenuItemClick</span>: <span class="hljs-function">(<span class="hljs-params">menuItem: TextMenuItem, textRange: TextRange</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span></li><li>            }</li><li>          })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="235" originwidth="324" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114839.01130826567489198283063421282371:50001231000000:2800:D1870E6414C4E81F281971A96A44F705E8554D7B78E14F08613B635EB34EFAE6.gif" width="324" height="235"></span></p>    </div>    <div class="tiledSection">     <h3 id="设置自定义选择菜单">设置自定义选择菜单<i class="anchor-icon anchor-icon-link" anchorid="设置自定义选择菜单" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#bindselectionmenu" target="_blank">bindSelectionMenu</a>设置自定义选择菜单。</p>     <p>组件原本具有默认的文本选择菜单，包含复制、剪切和全选的功能。用户可使用该属性设定自定义菜单，例如翻译英文、加粗字体等丰富的菜单功能。</p>     <p>当自定义菜单超长时，建议内部嵌套Scroll组件使用，避免键盘被遮挡。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'组件设置了自定义菜单，长按可触发。'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">18</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">bindSelectionMenu</span>(<span class="hljs-title class_">RichEditorSpanType</span>.<span class="hljs-property">TEXT</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">SystemMenu</span>, <span class="hljs-title class_">ResponseType</span>.<span class="hljs-property">LongPress</span>, {</li><li>    <span class="hljs-attr">onDisappear</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderShow</span> = <span class="hljs-literal">false</span></li><li>    }</li><li>  })</li><li><span class="hljs-comment">// 绑定自定义菜单</span></li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">300</span>)</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-title class_">SystemMenu</span>() {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Menu</span>() {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>) {</li><li>        <span class="hljs-title class_">MenuItemGroup</span>() {</li><li>          <span class="hljs-title class_">MenuItem</span>({</li><li>            <span class="hljs-attr">startIcon</span>: $r(<span class="hljs-string">"sys.media.ohos_ic_public_cut"</span>),</li><li>            <span class="hljs-attr">content</span>: <span class="hljs-string">"剪切"</span>,</li><li>            <span class="hljs-attr">labelInfo</span>: <span class="hljs-string">"Ctrl+X"</span></li><li>          })</li><li>          <span class="hljs-title class_">MenuItem</span>({</li><li>            <span class="hljs-attr">startIcon</span>: $r(<span class="hljs-string">"sys.media.ohos_ic_public_copy"</span>),</li><li>            <span class="hljs-attr">content</span>: <span class="hljs-string">"复制"</span>,</li><li>            <span class="hljs-attr">labelInfo</span>: <span class="hljs-string">"Ctrl+C"</span></li><li>          })</li><li>          <span class="hljs-title class_">MenuItem</span>({</li><li>            <span class="hljs-attr">startIcon</span>: $r(<span class="hljs-string">"sys.media.ohos_ic_public_paste"</span>),</li><li>            <span class="hljs-attr">content</span>: <span class="hljs-string">"粘贴"</span>,</li><li>            <span class="hljs-attr">labelInfo</span>: <span class="hljs-string">"Ctrl+V"</span></li><li>          })</li><li>        }</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">radius</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">theme</span>.<span class="hljs-property">containerBorderRadius</span>)</li><li>    .<span class="hljs-title function_">clip</span>(<span class="hljs-literal">true</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">theme</span>.<span class="hljs-property">defaultMenuWidth</span>)</li><li>  }</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">theme</span>.<span class="hljs-property">defaultMenuWidth</span>)</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="339" originwidth="436" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114840.50736351154103917233826517260502:50001231000000:2800:20FF74F3E4BA0ED65831365129856A89E636C27CE894A3A7FA31ABBDECB663D2.gif" width="436" height="339"></span></p>    </div>    <div class="tiledSection">     <h2 id="布局配置">布局配置<i class="anchor-icon anchor-icon-link" anchorid="布局配置" tips="复制节点链接"></i></h2>          <p>组件支持通过接口配置布局规则，开发者可以根据业务场景定制合适的布局规则。</p>    </div>    <div class="tiledSection">     <h3 id="设置最大行数" class="firsth2">设置最大行数<i class="anchor-icon anchor-icon-link" anchorid="设置最大行数" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#maxlines18" target="_blank">maxLines</a>可以设置富文本组件内可显示文本的最大行数。</p>     <p>此接口控制组件内文本的显示范围，防止文本过长影响页面布局，确保不同设备和场景下的文本显示效果一致，提升界面兼容性和美观度。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'组件设置了最大行数\n超出内容将会以滚动显示\n超出1行\n超出2行\n超出3行\n超出4行'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">maxLines</span>(<span class="hljs-number">2</span>)</li></ol></pre></div></div>     <p><span><img originheight="118" originwidth="407" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114840.26857435565722076094700773228865:50001231000000:2800:44C34AB6F4B24AF3DC9A64C8933917F061622C73F191EA0AF35B3E76CE485A0B.gif" width="407" height="118"></span></p>    </div>    <div class="tiledSection">     <h2 id="样式设置">样式设置<i class="anchor-icon anchor-icon-link" anchorid="样式设置" tips="复制节点链接"></i></h2>          <p>组件支持对内容设置复杂的样式。</p>    </div>    <div class="tiledSection">     <h3 id="设置用户预设的文本样式" class="firsth2">设置用户预设的文本样式<i class="anchor-icon anchor-icon-link" anchorid="设置用户预设的文本样式" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#settypingstyle11" target="_blank">setTypingStyle</a>可以设置用户预设的文本样式。</p>     <p>此接口可用于个性化的写作体验，例如可以使用此接口让输入的不同层级标题自动应用相应格式（如一级、二级标题）。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'点击按钮，改变预设文本样式。'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span></li><li>      }</li><li>    })</li><li>  })</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li><span class="hljs-title class_">Button</span>(<span class="hljs-string">'setTypingStyle'</span>, {</li><li>  <span class="hljs-attr">buttonStyle</span>: <span class="hljs-title class_">ButtonStyleMode</span>.<span class="hljs-property">NORMAL</span></li><li>})</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">30</span>)</li><li>  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">13</span>)</li><li>  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setTypingStyle</span>({</li><li>      <span class="hljs-attr">fontWeight</span>: <span class="hljs-string">'medium'</span>,</li><li>      <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>,</li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">15</span>,</li><li>      <span class="hljs-attr">fontStyle</span>: <span class="hljs-title class_">FontStyle</span>.<span class="hljs-property">Italic</span>,</li><li>      <span class="hljs-attr">decoration</span>: {</li><li>        <span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">Underline</span>,</li><li>        <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span></li><li>      }</li><li>    })</li><li>  })</li></ol></pre></div></div>     <p><span><img originheight="254" originwidth="483" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114840.19361302767240719699913889819458:50001231000000:2800:1FE1E29F5C281E71E1D0BCB7F303858A5FA30692C148308A9FF7B0A4D8606CC8.gif" width="483" height="254"></span></p>    </div>    <div class="tiledSection">     <h3 id="设置装饰线">设置装饰线<i class="anchor-icon anchor-icon-link" anchorid="设置装饰线" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-span#decoration" target="_blank">decoration</a>设置富文本组件中文本装饰线的样式、颜色和粗细。</p>     <p>设置文本装饰线可突出关键信息、区分文本状态、增强视觉层次。例如，为重要标题或关键词添加装饰线，帮助用户快速获取信息。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">private</span> <span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-title class_">RichEditor</span>({ <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>  .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">'一段预置的文本'</span>, {</li><li>      <span class="hljs-attr">style</span>: {</li><li>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">25</span>,</li><li>        <span class="hljs-attr">decoration</span>: {</li><li>          <span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span>,</li><li>          <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>,</li><li>          <span class="hljs-comment">// 设置装饰线粗细比例为6</span></li><li>          <span class="hljs-attr">thicknessScale</span>: <span class="hljs-number">6</span></li><li>        }</li><li>      }</li><li>    })</li><li>  })</li></ol></pre></div></div>     <p><span><img originheight="73" originwidth="240" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114840.03349969995325821539915473243580:50001231000000:2800:60CB295B6D66D54B61AA24D21A60675AB05DF59FD8E9F0D0CB13158A4B523257.jpg" class="notEnlarge" width="240" height="73"></span></p>     <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-styled-string#decorationoptions20" target="_blank">DecorationOptions</a>中的enableMultiType设置多装饰线，比如同时设置下划线和中划线。</p>     <p>此接口适用于复杂业务场景，满足文本装饰的多样化需求。在文档协作过程中，多人编辑时，可以通过使用不同的装饰线组合来区分文本状态，从而提高协作效率。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">RichEditor</span>({ <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">styledStringController</span> })</li><li><span class="hljs-title class_">Button</span>(<span class="hljs-string">'多装饰线文本'</span>)</li><li>  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">mutString</span>: <span class="hljs-title class_">MutableStyledString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableStyledString</span>(<span class="hljs-string">'设置富文本多装饰线'</span>, [</li><li>      {</li><li>        <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">length</span>: <span class="hljs-number">9</span>,</li><li>        <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">FONT</span>,</li><li>        <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextStyle</span>({ <span class="hljs-attr">fontSize</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">25</span>) })</li><li>      },</li><li>      {</li><li>        <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,</li><li>        <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">DECORATION</span>,</li><li>        <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">DecorationStyle</span>(</li><li>          {</li><li>            <span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">Underline</span>,</li><li>          },</li><li>          {</li><li>            <span class="hljs-comment">// 开启多装饰线</span></li><li>            <span class="hljs-attr">enableMultiType</span>: <span class="hljs-literal">true</span></li><li>          }</li><li>        )</li><li>      },</li><li>      {</li><li>        <span class="hljs-attr">start</span>: <span class="hljs-number">2</span>,</li><li>        <span class="hljs-attr">length</span>: <span class="hljs-number">4</span>,</li><li>        <span class="hljs-attr">styledKey</span>: <span class="hljs-title class_">StyledStringKey</span>.<span class="hljs-property">DECORATION</span>,</li><li>        <span class="hljs-attr">styledValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">DecorationStyle</span>(</li><li>         {</li><li>            <span class="hljs-attr">type</span>: <span class="hljs-title class_">TextDecorationType</span>.<span class="hljs-property">LineThrough</span>,</li><li>          },</li><li>          {</li><li>            <span class="hljs-comment">// 开启多装饰线</span></li><li>            <span class="hljs-attr">enableMultiType</span>: <span class="hljs-literal">true</span></li><li>          }</li><li>        )</li><li>      },</li><li>    ])</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">styledStringController</span>.<span class="hljs-title function_">setStyledString</span>(mutString);</li><li>  })</li></ol></pre></div></div>     <p><span><img originheight="71" originwidth="290" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114840.02063838987389966178684016234995:50001231000000:2800:A32F39EA188BBA638E10CFD3FC8FE8B438FDEE7260F1D8BB17AEE94DEA282F36.jpg" class="notEnlarge" width="290" height="71"></span></p>    </div>    <div class="tiledSection">     <h3 id="设置垂直居中">设置垂直居中<i class="anchor-icon anchor-icon-link" anchorid="设置垂直居中" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text#textverticalalign20" target="_blank">textVerticalAlign</a>设置文本段落在垂直方向的对齐方式。</p>     <p>此接口优化多元素排版，使组件内容与图片、图标等在垂直方向对齐时，整体布局更协调。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">controller</span>: <span class="hljs-title class_">RichEditorController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichEditorController</span>();</li><li><span class="hljs-attr">options</span>: <span class="hljs-title class_">RichEditorOptions</span> = { <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> };</li><li>
</li><li><span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>  <span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>    .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addImageSpan</span>($r(<span class="hljs-string">'app.media.startIcon'</span>), {</li><li>        <span class="hljs-attr">imageStyle</span>: {</li><li>          <span class="hljs-attr">size</span>: [<span class="hljs-number">100</span>, <span class="hljs-number">100</span>]</li><li>        }</li><li>      })</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">"这是一段富文本，展示了文本垂直居中的效果。"</span>, {</li><li>        <span class="hljs-attr">style</span>: {</li><li>          <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>,</li><li>          <span class="hljs-attr">fontSize</span>: <span class="hljs-string">"32"</span></li><li>        },</li><li>        <span class="hljs-attr">paragraphStyle</span>: {</li><li>          <span class="hljs-attr">textAlign</span>: <span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Start</span>,</li><li>          <span class="hljs-attr">textVerticalAlign</span>: <span class="hljs-title class_">TextVerticalAlign</span>.<span class="hljs-property">CENTER</span>,</li><li>          <span class="hljs-attr">leadingMargin</span>: <span class="hljs-number">16</span></li><li>        }</li><li>      })</li><li>    })</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="157" originwidth="398" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114840.33967171460252849319940205237164:50001231000000:2800:392306FC749D293E4864289610106B83C36E8D4D006B91E931649EFF3E7DFC65.jpg" width="398" height="157"></span></p>    </div>    <div class="tiledSection">     <h3 id="设置中西文自动间距">设置中西文自动间距<i class="anchor-icon anchor-icon-link" anchorid="设置中西文自动间距" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor#enableautospacing20" target="_blank">enableAutoSpacing</a>设置是否开启中文与西文的自动间距。</p>     <p>此接口优化文本排版，提升组件内文本的可读性。设置自动间距后，中文与西文间产生适当空隙，便于区分不同语种，减少视觉干扰。</p>     <div _ngcontent-vbm-c106="" class="highlight-div"><div _ngcontent-vbm-c106="" class="highlight-div-header"><div _ngcontent-vbm-c106="" class="highlight-div-header-left"><div _ngcontent-vbm-c106="" class="handle-button expand-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vbm-c106="" class="highlight-div-header-right"><div _ngcontent-vbm-c106="" class="handle-button ai-button"></div><div _ngcontent-vbm-c106="" class="handle-button line-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vbm-c106="" class="handle-button theme-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vbm-c106="" class="handle-button copy-button"><div _ngcontent-vbm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vbm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Column</span>() {</li><li>  <span class="hljs-title class_">RichEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)</li><li>    .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">addTextSpan</span>(<span class="hljs-string">"中西文Auto Spacing自动间距"</span>,</li><li>        {</li><li>          <span class="hljs-attr">style</span>:</li><li>          {</li><li>            <span class="hljs-attr">fontColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>,</li><li>            <span class="hljs-attr">fontSize</span>: <span class="hljs-number">20</span></li><li>          }</li><li>        })</li><li>    })</li><li>    .<span class="hljs-title function_">enableAutoSpacing</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">enableAutoSpace</span>)</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="172" originwidth="331" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114840.61636667869724931776031287525545:50001231000000:2800:BB6C019D269B2405CE419CF792C8FB93AB8C3F6F5D84C3B89989C85AE8E428A5.gif" width="331" height="172"></span></p>    </div>    <div class="tiledSection">     <h2 id="示例代码">示例代码<i class="anchor-icon anchor-icon-link" anchorid="示例代码" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitcode.com/harmonyos_samples/content-publisher" target="_blank">内容发布器</a></li>     </ul>    </div>   </div>   <div></div></div>