<h1 _ngcontent-byr-c119="" class="doc-title ng-star-inserted" title="应用侧调用前端页面函数"> 应用侧调用前端页面函数 </h1>

<div _ngcontent-byr-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>应用侧可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#runjavascript" target="_blank">runJavaScript()</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#runjavascriptext10" target="_blank">runJavaScriptExt()</a>方法调用前端页面的JavaScript相关函数。</p>    <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#runjavascript" target="_blank">runJavaScript()</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#runjavascriptext10" target="_blank">runJavaScriptExt()</a>在参数类型上有以下差异：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#runjavascriptext10" target="_blank">runJavaScriptExt()</a>支持string和ArrayBuffer类型参数，而<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#runjavascript" target="_blank">runJavaScript()</a>仅支持string类型参数。</p>    <p>在下面的示例中，点击应用侧的“runJavaScript”按钮时，触发前端页面的htmlTest()方法。</p>    <ul>     <li>      <p>前端页面代码。</p>      <div _ngcontent-byr-c106="" class="highlight-div"><div _ngcontent-byr-c106="" class="highlight-div-header"><div _ngcontent-byr-c106="" class="highlight-div-header-left"><div _ngcontent-byr-c106="" class="handle-button expand-button"><div _ngcontent-byr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-byr-c106="" class="highlight-div-header-right"><div _ngcontent-byr-c106="" class="handle-button ai-button"></div><div _ngcontent-byr-c106="" class="handle-button line-button"><div _ngcontent-byr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-byr-c106="" class="handle-button theme-button"><div _ngcontent-byr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-byr-c106="" class="handle-button copy-button"><div _ngcontent-byr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-byr-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" hw-language="html" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"callArkTS()"</span>&gt;</span>Click Me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"text"</span>&gt;</span>这是一个测试信息，默认字体为黑色，调用runJavaScript方法后字体为黄色、调用runJavaScriptParam方法后字体为绿色、调用runJavaScriptCodePassed方法后字体为红色<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-comment">// 有参函数。</span></span></li><li><span class="language-javascript">    <span class="hljs-keyword">var</span> param = <span class="hljs-string">"param: JavaScript Hello World!"</span>;</span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">htmlTestParam</span>(<span class="hljs-params">param</span>) {</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'text'</span>).<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">'green'</span>;</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(param);</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript">    <span class="hljs-comment">// 无参函数。</span></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">htmlTest</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'text'</span>).<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">'yellow'</span>;</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript">    <span class="hljs-comment">// 点击“Click Me！”按钮，触发前端页面callArkTS()函数执行JavaScript传递的代码。</span></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">callArkTS</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        <span class="hljs-title function_">changeColor</span>();</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div></li>     <li>      <p>应用侧代码。</p>      <div _ngcontent-byr-c106="" class="highlight-div"><div _ngcontent-byr-c106="" class="highlight-div-header"><div _ngcontent-byr-c106="" class="highlight-div-header-left"><div _ngcontent-byr-c106="" class="handle-button expand-button"><div _ngcontent-byr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-byr-c106="" class="highlight-div-header-right"><div _ngcontent-byr-c106="" class="handle-button ai-button"></div><div _ngcontent-byr-c106="" class="handle-button line-button"><div _ngcontent-byr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-byr-c106="" class="handle-button theme-button"><div _ngcontent-byr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-byr-c106="" class="handle-button copy-button"><div _ngcontent-byr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-byr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">webviewController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 配置Web开启调试模式</span></li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setWebDebuggingAccess</span>(<span class="hljs-literal">true</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'runJavaScriptParam'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 调用前端页面有参函数。</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">runJavaScript</span>(<span class="hljs-string">'htmlTestParam(param)'</span>);</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'runJavaScript'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 调用前端页面无参函数。</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">runJavaScript</span>(<span class="hljs-string">'htmlTest()'</span>);</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'runJavaScriptCodePassed'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 传递runJavaScript侧代码方法。</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">runJavaScript</span>(<span class="hljs-string">`function changeColor(){document.getElementById('text').style.color = 'red'}`</span>);</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>    </ul>   </div>   <div></div></div>