<h1 _ngcontent-rdg-c119="" class="doc-title ng-star-inserted" title="应用安装与更新一致性校验"> 应用安装与更新一致性校验 </h1>

<div _ngcontent-rdg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>随着应用发展越来越复杂，应用也被拆成多个模块进行开发维护，不同的团队负责单个或者多个模块，应用在安装更新过程中会针对不同的字段进行一致性校验和验证，保证应用的安全合法性。本文介绍多模块安装或更新时，签名证书、配置文件的一致性校验规则。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-configuration-file">app.json5配置文件</a>中versionCode字段一致，表示安装或更新包同版本，否则为不同版本。</p>      <p>使用打包工具进行打包时，会进行合法性校验。详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/packing-tool">打包工具</a>。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="签名证书一致性校验">签名证书一致性校验<i class="anchor-icon anchor-icon-link" anchorid="签名证书一致性校验" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.5.1.1" valign="top" width="25%">字段名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.5.1.2" valign="top" width="25%">说明</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.5.1.3" valign="top" width="25%">安装一致性校验规则</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.5.1.4" valign="top" width="25%">更新一致性校验规则</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="25%">appId</td>         <td class="cellrowborder" valign="top" width="25%">应用的appId，表示应用的唯一标识，详情信息可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/common_problem_of_application#什么是appid">什么是appId</a>。</td>         <td class="cellrowborder" valign="top" width="25%">是</td>         <td class="cellrowborder" valign="top" width="25%">appId和appIdentifier任一相同即可。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">appIdentifier</td>         <td class="cellrowborder" valign="top" width="25%">应用的唯一标识。详情信息可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/common_problem_of_application#什么是appidentifier">什么是appIdentifier</a>。</td>         <td class="cellrowborder" valign="top" width="25%">是</td>         <td class="cellrowborder" valign="top" width="25%">appId和appIdentifier任一相同即可。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">appDistributionType</td>         <td class="cellrowborder" valign="top" width="25%">应用<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-release-profile-0000002248341090" target="_blank">Profile文件</a>中的类型，标识应用的发布上架类型，如类型为<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-enterprise-mdm-profile-0000002248341094" target="_blank">企业MDM应用发布</a>。</td>         <td class="cellrowborder" valign="top" width="25%">是</td>         <td class="cellrowborder" valign="top" width="25%">更新不同版本时无校验，同版本有校验。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">appProvisionType</td>         <td class="cellrowborder" valign="top" width="25%">应用签名证书类型。<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-profile-overview-0000002283260125" target="_blank">Profile签名文件</a>的类型，分为debug和release。debug为本地调试使用，release为上架应用市场使用。</td>         <td class="cellrowborder" valign="top" width="25%">是</td>         <td class="cellrowborder" valign="top" width="25%">更新不同版本时无校验，同版本有校验。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">apl</td>         <td class="cellrowborder" valign="top" width="25%">表示应用程序的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-permission-mgmt-overview#权限机制中的基本概念">APL等级</a>，系统定义的apl包括：normal、system_basic和system_core。</td>         <td class="cellrowborder" valign="top" width="25%">是</td>         <td class="cellrowborder" valign="top" width="25%">更新不同版本时无校验，同版本有校验。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="配置文件一致性校验">配置文件一致性校验<i class="anchor-icon anchor-icon-link" anchorid="配置文件一致性校验" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.5.1.1" valign="top" width="25%">字段名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.5.1.2" valign="top" width="25%">说明</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.5.1.3" valign="top" width="25%">安装一致性校验规则</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.5.1.4" valign="top" width="25%">更新一致性校验规则</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="25%">bundleName</td>         <td class="cellrowborder" valign="top" width="25%">标识应用名称。该字段来源于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-configuration-file">app.json5配置文件</a>中的bundleName字段。</td>         <td class="cellrowborder" valign="top" width="25%">是</td>         <td class="cellrowborder" valign="top" width="25%">是</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">versionCode</td>         <td class="cellrowborder" valign="top" width="25%">标识应用版本号。该字段来源于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-configuration-file">app.json5配置文件</a>中的versionCode字段。</td>         <td class="cellrowborder" valign="top" width="25%">是</td>         <td class="cellrowborder" valign="top" width="25%">是</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">apiReleaseType</td>         <td class="cellrowborder" valign="top" width="25%">标识应用运行需要的API目标版本的类型。设备中未安装该应用，该应用包含多个模块包，模块一个一个安装时，不检验一致性。该字段来源于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-configuration-file">app.json5配置文件</a>中的apiReleaseType字段。</td>         <td class="cellrowborder" valign="top" width="25%">否</td>         <td class="cellrowborder" valign="top" width="25%">是</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">targetBundleName</td>         <td class="cellrowborder" valign="top" width="25%">标识当前包所指定的目标应用，配置该字段的应用为具有overlay特征的应用。该字段来源<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-configuration-file">app.json5配置文件</a>中targetBundleName字段。</td>         <td class="cellrowborder" valign="top" width="25%">是</td>         <td class="cellrowborder" valign="top" width="25%">是</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">targetPriority</td>         <td class="cellrowborder" valign="top" width="25%">标识当前应用的优先级。该字段来源于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-configuration-file">app.json5配置文件</a>中的targetPriority字段。</td>         <td class="cellrowborder" valign="top" width="25%">是</td>         <td class="cellrowborder" valign="top" width="25%">是</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">bundleType</td>         <td class="cellrowborder" valign="top" width="25%">标识应用的类型。该字段来源于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-configuration-file">app.json5配置文件</a>中的bundleType字段。</td>         <td class="cellrowborder" valign="top" width="25%">是</td>         <td class="cellrowborder" valign="top" width="25%">是</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">installationFree</td>         <td class="cellrowborder" valign="top" width="25%">标识是否支持免安装。该字段来源于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file">module.json5配置文件</a>中的installationFree字段。</td>         <td class="cellrowborder" valign="top" width="25%">是</td>         <td class="cellrowborder" valign="top" width="25%">是</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">debug</td>         <td class="cellrowborder" valign="top" width="25%">标识应用是否可调试。该字段来源于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-configuration-file">app.json5配置文件</a>中的debug字段。</td>         <td class="cellrowborder" valign="top" width="25%">是</td>         <td class="cellrowborder" valign="top" width="25%">否</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">moduleType</td>         <td class="cellrowborder" valign="top" width="25%">标识模块的类型。该字段来源于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file">module.json5配置文件</a>中的type字段。</td>         <td class="cellrowborder" valign="top" width="25%">是，同版本entry类型的moduleName不能修改</td>         <td class="cellrowborder" valign="top" width="25%">是</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>