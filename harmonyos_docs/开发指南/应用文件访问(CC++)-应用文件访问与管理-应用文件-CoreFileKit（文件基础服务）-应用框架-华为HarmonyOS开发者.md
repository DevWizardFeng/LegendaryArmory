<h1 _ngcontent-hwg-c119="" class="doc-title ng-star-inserted" title="应用文件访问(C/C++)"> 应用文件访问(C/C++) </h1>

<div _ngcontent-hwg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="场景介绍">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="场景介绍" tips="复制节点链接"></i></h2>          <p>FileIO模块提供了部分文件基础操作能力，其他能力请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/musl" target="_blank">libc标准库</a>/<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cpp" target="_blank">标准C++库</a>。</p>    </div>    <div class="tiledSection">     <h2 id="约束限制">约束限制<i class="anchor-icon anchor-icon-link" anchorid="约束限制" tips="复制节点链接"></i></h2>          <p>进行文件操作之前，必须保证传入正确有效的URI或path。</p>    </div>    <div class="tiledSection">     <h2 id="接口说明">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h2>          <p>接口的详细说明，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-oh-fileio-h" target="_blank">FileIO</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.1" valign="top" width="50%">接口名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">FileManagement_ErrCode OH_FileIO_GetFileLocation(char *uri, int uriLength, FileIO_FileLocation *location)</td>         <td class="cellrowborder" valign="top" width="50%">获取文件存储位置。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">enum FileIO_FileLocation FileIO_FileLocation</td>         <td class="cellrowborder" valign="top" width="50%">文件存储位置枚举值。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">enum FileManagement_ErrCode FileManagement_ErrCode</td>         <td class="cellrowborder" valign="top" width="50%">文件管理模块错误码。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <p><strong>在CMake脚本中链接动态库</strong></p>     <p>CMakeLists.txt中添加以下lib。</p>     <div _ngcontent-hwg-c106="" class="highlight-div"><div _ngcontent-hwg-c106="" class="highlight-div-header"><div _ngcontent-hwg-c106="" class="highlight-div-header-left"><div _ngcontent-hwg-c106="" class="handle-button expand-button"><div _ngcontent-hwg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hwg-c106="" class="highlight-div-header-right"><div _ngcontent-hwg-c106="" class="handle-button ai-button"></div><div _ngcontent-hwg-c106="" class="handle-button line-button"><div _ngcontent-hwg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hwg-c106="" class="handle-button theme-button"><div _ngcontent-hwg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hwg-c106="" class="handle-button copy-button"><div _ngcontent-hwg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hwg-c106="" class="highlight-scroll-div"><pre class="txt prettyprint linenums hljs language-plaintext" hw-language="txt" data-highlighted="yes"><ol class="linenums"><li>target_link_libraries(sample PUBLIC libohfileio.so)</li></ol></pre></div></div>     <p><strong>添加头文件</strong></p>     <div _ngcontent-hwg-c106="" class="highlight-div"><div _ngcontent-hwg-c106="" class="highlight-div-header"><div _ngcontent-hwg-c106="" class="highlight-div-header-left"><div _ngcontent-hwg-c106="" class="handle-button expand-button"><div _ngcontent-hwg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hwg-c106="" class="highlight-div-header-right"><div _ngcontent-hwg-c106="" class="handle-button ai-button"></div><div _ngcontent-hwg-c106="" class="handle-button line-button"><div _ngcontent-hwg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hwg-c106="" class="handle-button theme-button"><div _ngcontent-hwg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hwg-c106="" class="handle-button copy-button"><div _ngcontent-hwg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hwg-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;filemanagement/fileio/oh_fileio.h&gt;</span></span></li></ol></pre></div></div>     <p>调用OH_FileIO_GetFileLocation接口获取文件存储位置。示例代码如下所示：</p>     <div _ngcontent-hwg-c106="" class="highlight-div"><div _ngcontent-hwg-c106="" class="highlight-div-header"><div _ngcontent-hwg-c106="" class="highlight-div-header-left"><div _ngcontent-hwg-c106="" class="handle-button expand-button"><div _ngcontent-hwg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hwg-c106="" class="highlight-div-header-right"><div _ngcontent-hwg-c106="" class="handle-button ai-button"></div><div _ngcontent-hwg-c106="" class="handle-button line-button"><div _ngcontent-hwg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hwg-c106="" class="handle-button theme-button"><div _ngcontent-hwg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hwg-c106="" class="handle-button copy-button"><div _ngcontent-hwg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hwg-c106="" class="highlight-scroll-div"><pre class="c prettyprint linenums hljs language-c" hw-language="c" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">void</span> <span class="hljs-title function_">GetFileLocationExample</span><span class="hljs-params">()</span> {</li><li>    <span class="hljs-type">char</span> *uri = <span class="hljs-string">"file://com.example.demo/data/storage/el2/base/files/test.txt"</span>;</li><li>    FileIO_FileLocation location;</li><li>    FileManagement_ErrCode ret = OH_FileIO_GetFileLocation(uri, <span class="hljs-built_in">strlen</span>(uri), &amp;location);</li><li>    <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-keyword">if</span> (location == FileIO_FileLocation::LOCAL) {</li><li>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"This file is on local."</span>);</li><li>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (location == FileIO_FileLocation::CLOUD) {</li><li>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"This file is on cloud."</span>);</li><li>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (location == FileIO_FileLocation::LOCAL_AND_CLOUD) {</li><li>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"This file is both on local and cloud."</span>);</li><li>        }</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"GetFileLocation failed, error code is %d"</span>, ret);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>