<h1 _ngcontent-ayd-c119="" class="doc-title ng-star-inserted" title="开发Hvigor任务"> 开发Hvigor任务 </h1>

<div _ngcontent-ayd-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001778834281"><div class="tiledSection"><h2 id="section834051913917">了解任务<i class="anchor-icon anchor-icon-link" anchorid="section834051913917" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334422__p440711241297">任务是Hvigor构建过程中的基本执行单元，通常包含一段可执行代码；一个任务可以依赖其他多个任务。Hvigor任务调度执行时通过解析依赖关系确定任务执行时序。</p> <p id="ZH-CN_TOPIC_0000002478334422__p21524531109"></p> <p id="ZH-CN_TOPIC_0000002478334422__p124752310183">UP-TO-DATE</p> <p id="ZH-CN_TOPIC_0000002478334422__p761635920108">任务标识，表示任务未实际执行。Hvigor任务增量跳过机制，在二次执行任务时检测任务输入输出条件未发生变化，则任务跳过执行提高构建效率。</p> <p id="ZH-CN_TOPIC_0000002478334422__p84301109113">示例：</p> <div _ngcontent-ayd-c106="" class="highlight-div"><div _ngcontent-ayd-c106="" class="highlight-div-header"><div _ngcontent-ayd-c106="" class="highlight-div-header-left"><div _ngcontent-ayd-c106="" class="handle-button expand-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ayd-c106="" class="highlight-div-header-right"><div _ngcontent-ayd-c106="" class="handle-button ai-button"></div><div _ngcontent-ayd-c106="" class="handle-button line-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ayd-c106="" class="handle-button theme-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ayd-c106="" class="handle-button copy-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ayd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-vbnet" id="ZH-CN_TOPIC_0000002478334422__screen37241020141815" data-highlighted="yes"><ol class="linenums"><li>&gt; hvigor UP-<span class="hljs-keyword">TO</span>-<span class="hljs-type">DATE</span> ::PackageApp...</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334422__p91927516170"></p> <p id="ZH-CN_TOPIC_0000002478334422__p1238157121819">Finished</p> <p id="ZH-CN_TOPIC_0000002478334422__p18869122818182">任务执行完成标识，表示任务已执行完成。</p> <p id="ZH-CN_TOPIC_0000002478334422__p182941458192014">示例：</p> <div _ngcontent-ayd-c106="" class="highlight-div"><div _ngcontent-ayd-c106="" class="highlight-div-header"><div _ngcontent-ayd-c106="" class="highlight-div-header-left"><div _ngcontent-ayd-c106="" class="handle-button expand-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ayd-c106="" class="highlight-div-header-right"><div _ngcontent-ayd-c106="" class="handle-button ai-button"></div><div _ngcontent-ayd-c106="" class="handle-button line-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ayd-c106="" class="handle-button theme-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ayd-c106="" class="handle-button copy-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ayd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334422__screen4376142391718" data-highlighted="yes"><ol class="linenums"><li>&gt; <span class="hljs-variable">hvigor</span> <span class="hljs-variable">Finished</span> ::<span class="hljs-title class_">PackageApp</span>... <span class="hljs-title class_">after</span> <span class="hljs-number">310</span> <span class="hljs-title class_">ms</span></li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334422__p98227504111"></p> </div> <div class="tiledSection"><h2 id="section974052817919">注册任务<i class="anchor-icon anchor-icon-link" anchorid="section974052817919" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334422__p3318143014416">使用HvigorNode节点对象注册任务。</p> <ol id="ZH-CN_TOPIC_0000002478334422__ol463741616524"><li id="li1763717163521"><span>编辑工程下hvigorfile.ts文件。</span><p></p><div _ngcontent-ayd-c106="" class="highlight-div"><div _ngcontent-ayd-c106="" class="highlight-div-header"><div _ngcontent-ayd-c106="" class="highlight-div-header-left"><div _ngcontent-ayd-c106="" class="handle-button expand-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ayd-c106="" class="highlight-div-header-right"><div _ngcontent-ayd-c106="" class="handle-button ai-button"></div><div _ngcontent-ayd-c106="" class="handle-button line-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ayd-c106="" class="handle-button theme-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ayd-c106="" class="handle-button copy-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ayd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334422__screen17021957145318" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 导入模块</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">getNode, <span class="hljs-title class_">HvigorNode</span>, <span class="hljs-title class_">HvigorTask</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li></ol></pre></div></div> <p></p></li><li id="li1688196135320"><span>编写任务代码。</span><p></p><div _ngcontent-ayd-c106="" class="highlight-div"><div _ngcontent-ayd-c106="" class="highlight-div-header"><div _ngcontent-ayd-c106="" class="highlight-div-header-left"><div _ngcontent-ayd-c106="" class="handle-button expand-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ayd-c106="" class="highlight-div-header-right"><div _ngcontent-ayd-c106="" class="handle-button ai-button"></div><div _ngcontent-ayd-c106="" class="handle-button line-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ayd-c106="" class="handle-button theme-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ayd-c106="" class="handle-button copy-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ayd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334422__screen33432316428" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取当前</span></span><span class=""><span class="hljs-comment">hvigorNode</span></span><span class=""><span class="hljs-comment">节点对象</span></span></li><li><span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">node</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册</span></span><span class=""><span class="hljs-comment">Task</span></span></li><li><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">registerTask</span></span><span class="">(</span><span class="">{</span></li><li>  <span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-string">'customTask'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-title function_">run</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">'this is Task'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> <p></p></li><li id="li1982215725520"><span>执行任务。</span><p></p><p id="ZH-CN_TOPIC_0000002478334422__p241174912019">使用hvigor命令行工具执行任务：</p> <div _ngcontent-ayd-c106="" class="highlight-div"><div _ngcontent-ayd-c106="" class="highlight-div-header"><div _ngcontent-ayd-c106="" class="highlight-div-header-left"><div _ngcontent-ayd-c106="" class="handle-button expand-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ayd-c106="" class="highlight-div-header-right"><div _ngcontent-ayd-c106="" class="handle-button ai-button"></div><div _ngcontent-ayd-c106="" class="handle-button line-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ayd-c106="" class="handle-button theme-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ayd-c106="" class="handle-button copy-button"><div _ngcontent-ayd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ayd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002478334422__screen20217133815112" data-highlighted="yes"><ol class="linenums"><li>hvigorw customTask</li></ol></pre></div></div> <p></p></li><li id="li879510271116"><span>查看任务执行结果。</span><p></p><p id="ZH-CN_TOPIC_0000002478334422__p13521831135315"><span><img height="80.7975" originheight="85" originwidth="548" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104907.91388833012481906920831362031260:50001231000000:2800:12889D014A77C41492F83838A3A9FF15EE042ACDD757DA0C38057A0923325245.png" title="点击放大" width="523.6875"></span></p> <p></p></li></ol> </div> </div> <div></div></div>