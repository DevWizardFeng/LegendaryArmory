<h1 _ngcontent-rmu-c119="" class="doc-title ng-star-inserted" title="开发云对象"> 开发云对象 </h1>

<div _ngcontent-rmu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001877120720"><p id="ZH-CN_TOPIC_0000002179338348__p4306123173111">云对象创建完成后，您便可以直接在云对象中编写需要实现的方法。例如，通过云对象实现add与subtract两个方法。</p> <ol id="ZH-CN_TOPIC_0000002179338348__ol139674817316"><li id="li1396712815314">打开云对象入口文件（此处以“myCloudObject.ts”为例），添加add与subtract方法。<div _ngcontent-rmu-c106="" class="highlight-div"><div _ngcontent-rmu-c106="" class="highlight-div-header"><div _ngcontent-rmu-c106="" class="highlight-div-header-left"><div _ngcontent-rmu-c106="" class="handle-button expand-button"><div _ngcontent-rmu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rmu-c106="" class="highlight-div-header-right"><div _ngcontent-rmu-c106="" class="handle-button ai-button"></div><div _ngcontent-rmu-c106="" class="handle-button line-button"><div _ngcontent-rmu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rmu-c106="" class="handle-button theme-button"><div _ngcontent-rmu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rmu-c106="" class="handle-button copy-button"><div _ngcontent-rmu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rmu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002179338348__screen731912362352" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCloudObject</span> {</li><li>    <span class="hljs-title function_">add</span>(<span class="hljs-variable">num1</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">num2</span>: <span class="hljs-title class_">number</span>) {</li><li>        <span class="hljs-keyword">return</span> { <span class="hljs-variable">result</span>: <span class="hljs-title class_">num1</span> + <span class="hljs-title class_">num2</span> };</li><li>    }</li><li>    <span class="hljs-title function_">subtract</span>(<span class="hljs-variable">num1</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">num2</span>: <span class="hljs-title class_">number</span>) {</li><li>        <span class="hljs-keyword">return</span> { <span class="hljs-variable">result</span>: <span class="hljs-title class_">num1</span> - <span class="hljs-title class_">num2</span> };</li><li>    }</li><li>}</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002179338348__p57110212321"><span><img originheight="325" originwidth="765" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104747.39618259144857310221593537314738:50001231000000:2800:8CF291B0190A5F14598A7D7F4863C9C86103F94BAE0CE9A2C09216EDC2D7AD63.png" width="765" height="325"></span></p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><ul id="ZH-CN_TOPIC_0000002179338348__ul1562712279337"><li id="li498316792419">云对象是无状态性。云对象部署至云侧后，每一次调用都可能是不同的后台节点，因此在云对象上定义类成员变量是无意义的。从一个Method中对一个类成员属性赋值，然后期望从另一个Method去获取类成员属性，这样的做法是错误的。</li><li id="li8157521102611">云对象无需编写构造函数。云侧在收到对云对象的某一个函数的请求时，会调用云对象的默认的无参构造函数。</li><li id="li975810411243">云对象方法的输入是从JSON反序列化而来，只能是string、number或者Object，不支持Date、Uint8Array等类型。如果在编写云对象代码的过程中需要传递Date或Uint8Array，建议通过定义成number或者数组，在Method内通过显式地调用Date或Uint8Array的构造函数来达到目的。</li><li id="li12627122713315">云对象的方法的输出当前不支持单个number返回。</li><li id="li16627127153315">云对象的方法的输入、输出可以使用自定义对象，不能使用第三方依赖定义的对象或类型。注意，并不是云对象不能有第三方依赖，而是云对象的输入和输出不能有第三方依赖，否则在"Generator Invoke Interface"阶段，将会因为找不到依赖而失败，根本原因是，端侧代码运行在HarmonyOS支持方舟运行时，而云侧运行在Node.js中，二者的依赖管理不同。</li></ul> </div></div></div> </li></ol><ol id="ZH-CN_TOPIC_0000002179338348__ol164645303511" start="2"><li id="li182961151141519">（可选）如云对象存在依赖关系，可在“package.json”文件的“dependencies”下添加需要的依赖，然后点击右上角“Sync Now”。<div class="p" id="ZH-CN_TOPIC_0000002179338348__p6524115112159"><a name="ZH-CN_TOPIC_0000002179338348__li182961151141519"></a><a name="li182961151141519"></a>下文以添加“@hw-agconnect/cloud-server”依赖为例进行说明，请添加实际业务所需的依赖。<div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002179338348__p184222493427">右击“package.json”文件，选择“Run 'npm install'”菜单，也可以实现依赖包安装。</p> </div></div></div> </div> <p id="ZH-CN_TOPIC_0000002179338348__p10956132593212"><span><img originheight="423" originwidth="1114" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104747.84419378150347912657204957455412:50001231000000:2800:469BD91890E509B44EB8BA3380AD61001C42325214147F604B8E55A10A1B8039.png" width="920" height="349.33572710951523"></span></p> <p id="ZH-CN_TOPIC_0000002179338348__p457019445447">所有安装的依赖包都会存储在当前云对象的“node_modules”目录下。</p> <p id="ZH-CN_TOPIC_0000002179338348__p16364521086"><span><img originheight="425" originwidth="656" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104747.17769158962754276434714054895677:50001231000000:2800:57891C0CC6E7E1851BB124DDFC1BA8B34FD85C5F69DC9B6BF54F55479ACFE52D.png" width="656" height="425"></span></p> </li></ol> </div> <div></div></div>