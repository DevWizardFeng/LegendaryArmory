<h1 _ngcontent-bmt-c119="" class="doc-title ng-star-inserted" title="开发准备"> 开发准备 </h1>

<div _ngcontent-bmt-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section1014792713126">申请权限<i class="anchor-icon anchor-icon-link" anchorid="section1014792713126" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section17141114720" class="firsth2">场景概述<i class="anchor-icon anchor-icon-link" anchorid="section17141114720" tips="复制节点链接"></i></h3><p>应用在使用Network Boost Kit能力前需要检查是否已经获取对应权限。如未获得授权，需要声明对应权限。</p> <p>Network Boost Kit所需权限有：</p> <p>ohos.permission.GET_NETWORK_INFO：用户获取设备网络信息。</p> <p>ohos.permission.INTERNET：允许使用因特网访问网络。</p> <p>ohos.permission.LINKTURBO: 允许应用使用多网并发等网络加速能力，连接迁移能力部分接口需要该权限，如果不使用该能力，不需要申请该权限。</p> </div> <p>必须手动配置上述权限后才能使用，详细配置参见<a href="/consumer/cn/doc/harmonyos-guides/networkboost-preparations#section1648815561221">申请权限步骤</a>。</p> <p>其中ohos.permission.LINKTURBO权限为受限ACL权限，需要特别配置和申请，具体操作步骤参考<a href="/consumer/cn/doc/harmonyos-guides/networkboost-preparations#section94731428358">配置签名</a>和<a href="/consumer/cn/doc/harmonyos-guides/networkboost-preparations#section13192154213515">受限ACL权限申请</a>。</p> <div class="tiledSection"><h3 id="section1648815561221">申请权限步骤<i class="anchor-icon anchor-icon-link" anchorid="section1648815561221" tips="复制节点链接"></i></h3></div> <p>需要在entry/src/main路径下的module.json5中配置所需申请的权限。示例代码如下所示：</p> <div _ngcontent-bmt-c106="" class="highlight-div"><div _ngcontent-bmt-c106="" class="highlight-div-header"><div _ngcontent-bmt-c106="" class="highlight-div-header-left"><div _ngcontent-bmt-c106="" class="handle-button expand-button"><div _ngcontent-bmt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmt-c106="" class="highlight-div-header-right"><div _ngcontent-bmt-c106="" class="handle-button ai-button"></div><div _ngcontent-bmt-c106="" class="handle-button line-button"><div _ngcontent-bmt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmt-c106="" class="handle-button theme-button"><div _ngcontent-bmt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmt-c106="" class="handle-button copy-button"><div _ngcontent-bmt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"module"</span>: {</li><li>    <span class="hljs-string">"requestPermissions"</span>: [</li><li>      {</li><li>        <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohos.permission.GET_NETWORK_INFO"</span></li><li>      },</li><li>      {</li><li>        <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohos.permission.INTERNET"</span></li><li>      },</li><li>      {</li><li>        <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohos.permission.LINKTURBO"</span></li><li>      }</li><li>    ]</li><li>  }</li><li>}</li></ol></pre></div></div> <div class="tiledSection"><h3 id="section16821202143413">C API开发准备<i class="anchor-icon anchor-icon-link" anchorid="section16821202143413" tips="复制节点链接"></i></h3></div> <p>除上述权限配置外，C API使用时还需要在CMakeLists.txt中设置动态库路径及头文件路径，并进行链接。</p> <p>如编译target为entry，则添加如下命令：</p> <div _ngcontent-bmt-c106="" class="highlight-div"><div _ngcontent-bmt-c106="" class="highlight-div-header"><div _ngcontent-bmt-c106="" class="highlight-div-header-left"><div _ngcontent-bmt-c106="" class="handle-button expand-button"><div _ngcontent-bmt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmt-c106="" class="highlight-div-header-right"><div _ngcontent-bmt-c106="" class="handle-button ai-button"></div><div _ngcontent-bmt-c106="" class="handle-button line-button"><div _ngcontent-bmt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmt-c106="" class="handle-button theme-button"><div _ngcontent-bmt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmt-c106="" class="handle-button copy-button"><div _ngcontent-bmt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-built_in">target_include_directories</span>(entry PUBLIC ${HMOS_SDK_NATIVE}/sysroot/usr/include)</li><li><span class="hljs-built_in">target_link_directories</span>(entry PUBLIC ${HMOS_SDK_NATIVE}/sysroot/usr/lib/aarch64-linux-ohos)</li><li><span class="hljs-built_in">target_link_libraries</span>(entry PUBLIC libnetwork_boost.so) #链接libnetwork_boost<span class="hljs-selector-class">.so</span>及其他依赖的so</li></ol></pre></div></div> <p></p> <div class="tiledSection"><h2 id="section94731428358">配置签名<i class="anchor-icon anchor-icon-link" anchorid="section94731428358" tips="复制节点链接"></i></h2></div> <ul><li>调试阶段需要在AGC中<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-add-debugcert-0000001914263178" target="_blank">申请调试证书</a>、<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-add-device-0000001946142249" target="_blank">注册调试设备</a>、<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-add-debugprofile-0000001914423102" target="_blank">申请调试Profile</a>后，再<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-signing#section297715173233" target="_blank">手动签名</a>，或者通过DevEco Studio自动签名完成申请，在自动签名的过程中，将由DevEco Studio完成向AGC申请受限权限的步骤，开发者可直接使用，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-signing#section151231211105010" target="_blank">自动签名-操作步骤</a>。</li><li>发布阶段<strong>必须在AGC中重新</strong><a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-add-releasecert-0000001946273961" target="_blank">申请发布证书</a>、<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-add-releaseprofile-0000001914714796" target="_blank">发布Profile文件</a>，并完成<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-publish-app#section280162182818" target="_blank">配置签名信息</a>。</li></ul> <div class="tiledSection"><h2 id="section13192154213515">受限ACL权限申请<i class="anchor-icon anchor-icon-link" anchorid="section13192154213515" tips="复制节点链接"></i></h2></div> <p>1. <a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-add-debugprofile-0000001914423102" target="_blank">申请调试Profile</a>和<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-add-releaseprofile-0000001914714796" target="_blank">发布Profile文件</a>中第4步“申请权限”是必须的，选中“受限ACL权限”后再点击“选择”。</p> <p><span><img originheight="118" originwidth="521" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115010.52376470625958585243351490612384:50001231000000:2800:116675497F066D1362D0D5F3C08CBF32417CFD8D674A6317E5A3CF4BDDD5B9E8.png" width="521" height="118"></span></p> <p></p> <p>2. 在权限搜索框中输入"ohos.permission.LINKTURBO"找到LINKTURBO的权限并勾选，再提交申请。</p> <p><span><img originheight="444" originwidth="885" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115010.29620874623342561989721595908805:50001231000000:2800:CE07ECC79B8A0FECE93EB09FE43139F721AA61249C070E73C3C3B84BB86C9A59.png" width="885" height="444"></span></p> <p></p> <p>3. 根据实际业务需求填写申请原因并提交，提交后将在1个工作日回复，可以<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html#/interactive" target="_blank">互动中心</a>查看申请情况。</p> <p><span><img originheight="442" originwidth="759" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115010.69628026801744407674331119992855:50001231000000:2800:4AFB57680550E41C3EE978312006FA7D3387486B4FBD947C7DD0E5BA6C4EFD66.png" width="759" height="442"></span></p> <p></p> <p>4. 权限申请通过后在“已获取权限”中可以看到已申请的权限，勾选后点击确定。</p> <p><span><img originheight="483" originwidth="967" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115010.12038425284863026079792353683090:50001231000000:2800:86C60592BC6269746657803F3540A57962F7E93E6BB11F3B305DB402FE549806.png" width="920" height="459.5243019648397"></span></p> <p>5. 选择权限后点击“添加”生成新的Profile文件，下载后按<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-signing#section297715173233" target="_blank">手动签名</a>替换profile文件。</p> <p>6. 在工程中entry模块的module.json5文件中，在"requestPermissions"节点添加"ohos.permission.LINKTURBO"权限，如下所示：</p> <div _ngcontent-bmt-c106="" class="highlight-div"><div _ngcontent-bmt-c106="" class="highlight-div-header"><div _ngcontent-bmt-c106="" class="highlight-div-header-left"><div _ngcontent-bmt-c106="" class="handle-button expand-button"><div _ngcontent-bmt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmt-c106="" class="highlight-div-header-right"><div _ngcontent-bmt-c106="" class="handle-button ai-button"></div><div _ngcontent-bmt-c106="" class="handle-button line-button"><div _ngcontent-bmt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmt-c106="" class="handle-button theme-button"><div _ngcontent-bmt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmt-c106="" class="handle-button copy-button"><div _ngcontent-bmt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"requestPermissions"</span>: [{</li><li>  <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohos.permission.LINKTURBO"</span></li><li>}]</li></ol></pre></div></div> </div> <div></div></div>