<h1 _ngcontent-quu-c119="" class="doc-title ng-star-inserted" title="开发动态共享包"> 开发动态共享包 </h1>

<div _ngcontent-quu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div id="body0000001521396322">    <p id="ZH-CN_TOPIC_0000002510174357__p93952481255">DevEco Studio支持开发动态共享包<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/in-app-hsp" target="_blank">HSP（Harmony Shared Package）</a>。在应用/元服务开发过程中部分功能按需动态下载，或开发元服务场景时需要分包加载，可使用HSP实现相应功能。当有多个安装包需要资源共享时，也可利用HSP减少公共资源和代码重复打包。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul id="ZH-CN_TOPIC_0000002510174357__ul5812154210511">       <li id="li1781254217518">应用内HSP：在编译过程中与应用包名（bundleName）强耦合，只能给某个特定的应用使用。</li>       <li id="li98124426512">集成态HSP：构建、发布过程中，不与特定的应用包名耦合；使用时，工具链支持自动将集成态HSP的包名替换成宿主应用包名。</li>      </ul>     </div></div></div>    <div class="tiledSection">     <h2 id="section13821106473">使用约束<i class="anchor-icon anchor-icon-link" anchorid="section13821106473" tips="复制节点链接"></i></h2>          <ul id="ZH-CN_TOPIC_0000002510174357__ul16241515104714">      <li id="li13254716124816">HSP及其使用方都必须是API 10及以上版本Stage模型。</li>      <li id="li10254131620481">HSP及其使用方都必须使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-esmodule-compile">模块化编译</a>模式。</li>      <li id="li8106338141">从DevEco Studio 6.0.1 Beta1开始，创建HSP模块时支持选择C++版本。</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="section79378499185">开发动态共享包<i class="anchor-icon anchor-icon-link" anchorid="section79378499185" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section7717162312546" class="firsth2">创建HSP模块<i class="anchor-icon anchor-icon-link" anchorid="section7717162312546" tips="复制节点链接"></i></h3>          <ol id="ZH-CN_TOPIC_0000002510174357__ol1567951245512">      <li id="li61271661989"><span>通过如下两种方法，在工程中添加新的Module。</span>       <p></p>       <ul id="ZH-CN_TOPIC_0000002510174357__ul1930720181348">        <li id="li530781813420">方法1：鼠标移到工程目录顶部，单击鼠标右键，选择<strong>New &gt; Module</strong>，开始创建新的Module。</li>        <li id="li1397119131856">方法2：选中工程目录中任意文件，然后在菜单栏选择<strong>File &gt; New &gt; Module</strong>，开始创建新的Module。</li>       </ul>       <p></p></li>      <li id="li9973945145514"><span>模板类型选择<strong>Shared Library</strong>，点击<strong>Next</strong>。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002510174357__p18659112174211"><span><img originheight="611" originwidth="957" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104718.09883487583854119629266815486773:50001231000000:2800:118B355F1D18BA4C27C05D9E3F865675AB2F8DEFAB98F9822A0F457C2CC0BF36.png" width="920" height="587.3772204806687"></span></p>       <p></p></li>      <li id="zh-cn_topic_0000001316924477_li11663444152910"><span>在<strong>Configure New Module</strong>界面中，设置新添加的模块信息，设置完成后，单击<strong>Finish</strong>完成创建。从DevEco Studio 6.0.1 Beta1开始，支持选择C++版本。</span>       <p></p>       <ul id="ZH-CN_TOPIC_0000002510174357__zh-cn_topic_0000001316924477_ul3925172323018">        <li id="zh-cn_topic_0000001316924477_li33293315309"><strong>Module name</strong>：新增模块的名称，如设置为sharedlibrary。</li>        <li id="zh-cn_topic_0000001316924477_li33211331300"><strong>Device type</strong>：支持的设备类型。</li>        <li id="zh-cn_topic_0000001316924477_li1628553153217"><strong>Enable native</strong>：是否创建一个用于调用C++代码的模块。</li>        <li id="li10944173012179"><strong>C++ Standard：</strong>C++标准库，取值包括：Toolchain Default、C++11、C++14。仅打开Enable native时需要配置。</li>       </ul>       <p id="ZH-CN_TOPIC_0000002510174357__p112003238331"><span><img originheight="604" originwidth="941" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104718.96336766587178967694748520321301:50001231000000:2800:87B3D6105603586E12B52C898F55EC15C2483FE223995800069E2682C0DEFA38.png" width="920" height="590.5207226354942"></span></p>       <p id="ZH-CN_TOPIC_0000002510174357__zh-cn_topic_0000001316924477_p8194520123815">创建完成后，会在工程目录中生成HSP模块及相关文件。</p>       <p id="ZH-CN_TOPIC_0000002510174357__p57074017462"><span><img originheight="339" originwidth="327" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104718.89755589596684656691619090008482:50001231000000:2800:130D6AE801D89C4A9593E41A47EA494EA8E0D129D5B0EB3F9EDD2B920D9562EF.png" width="327" height="339"></span></p>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="section67683213597">编译HSP模块<i class="anchor-icon anchor-icon-link" anchorid="section67683213597" tips="复制节点链接"></i></h3>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p id="ZH-CN_TOPIC_0000002510174357__p1470003535015">如果HSP未开启<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-build-obfuscation">混淆</a>，则后续HSP被集成使用时，将不会再对HSP包进行混淆。</p>      </div></div></div>     <p id="ZH-CN_TOPIC_0000002510174357__zh-cn_topic_0000001316924477_p1876111912554">参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/in-app-hsp" target="_blank">应用内HSP开发指导</a>开发完HSP模块后，选中模块名，然后通过DevEco Studio菜单栏的<strong>Build &gt; Make Module ${libraryName}</strong>进行编译构建，生成HSP。</p>     <p id="ZH-CN_TOPIC_0000002510174357__zh-cn_topic_0000001316924477_p472023313561"><span><img originheight="135" originwidth="208" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104718.57876334171595288665125618483702:50001231000000:2800:9DACD5B30759D2BF92DEF2BC8D71D9E590B2757C84C055F7875FF4D9CB79F387.png" class="notEnlarge" width="208" height="135"></span></p>     <p id="ZH-CN_TOPIC_0000002510174357__zh-cn_topic_0000001316924477_p146268538589">打包HSP时，会同时默认打包出HAR，在模块下build目录下可以看到*.har和*.hsp。</p>     <p id="ZH-CN_TOPIC_0000002510174357__p196752892912"><span><img originheight="260" originwidth="325" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104718.69685243140171056867785320729867:50001231000000:2800:732B9E9864EDCAA432B003773558962FA94ACDE7EF6ED2DA66FC692A9C9D4D18.png" width="325" height="260"></span></p>     <p id="ZH-CN_TOPIC_0000002510174357__p34985337204">如需在应用内共享HSP，请将HSP共享包上传至私仓（请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-quickstart#zh-cn_topic_0000001792256157_从ohpm-repo获取三方库" target="_blank">将三方库发布到 ohpm-repo</a>），请先按以下操作编译生成*.tgz包。</p>     <ol id="ZH-CN_TOPIC_0000002510174357__ol13831823152918">      <li id="li3831234294"><span>点击工具栏<span><img originheight="16" originwidth="19" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104718.30412312993915132519300203924211:50001231000000:2800:70201274BAC3BEB7B1BB43174D6892C055CBEEE330415A659FE9969DB2602429.png" class="IconPic notEnlarge" width="19" height="16"></span>图标将编译模式切换成release模式。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002510174357__p1717318474462"><span><img originheight="347" originwidth="469" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104718.90004650235411401914648366415600:50001231000000:2800:B4F6C757443E7BDD52CC6E993632F5C9A6323E30D8558EE6343EA197FB32FC02.png" width="469" height="347"></span></p>       <p></p></li>      <li id="zh-cn_topic_0000001464746438_li199223193267"><span>选中HSP模块的根目录，点击<strong>Build &gt; Make Module ${libraryName}</strong>启动构建。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002510174357__zh-cn_topic_0000001464746438_p0657192292619"><span><img originheight="135" originwidth="208" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104718.28264947454622058787929673286968:50001231000000:2800:832C40D34A938C91A74149192AC4B649329F62DE56563AFFED6EDF55E3C7D14C.png" class="notEnlarge" width="208" height="135"></span></p>       <p id="ZH-CN_TOPIC_0000002510174357__zh-cn_topic_0000001464746438_p138827409283">构建完成后，build目录下生成HSP包产物，其中.tgz用来上传至私仓。</p>       <p id="ZH-CN_TOPIC_0000002510174357__p1250183711297"><span><img originheight="277" originwidth="344" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104718.68757986591927838668500034557133:50001231000000:2800:104FEB80579CBC1E2FEE9DA275BC0955D2FAB23F3A1B34B29A456ECE12348389.png" width="344" height="277"></span></p>       <p></p></li>     </ol>    </div>   </div>   <div></div></div>