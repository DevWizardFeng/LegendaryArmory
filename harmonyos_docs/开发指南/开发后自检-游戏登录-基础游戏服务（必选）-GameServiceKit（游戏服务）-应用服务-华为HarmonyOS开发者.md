<h1 _ngcontent-qud-c119="" class="doc-title ng-star-inserted" title="开发后自检"> 开发后自检 </h1>

<div _ngcontent-qud-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>为减少提交审核后被驳回的概率，请参考如下自检CheckList进行自检。</p> <p>自检通过后，再前往AppGallery Connect提交游戏上架审核，具体操作请参见<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-release-game-0000002364930906" target="_blank">发布HarmonyOS游戏</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="idpfixed layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.1.5.1.1" valign="top" width="11.63%"><p>一级分类</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.1.5.1.2" valign="top" width="14.510000000000002%"><p>二级分类</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.1.5.1.3" valign="top" width="43.69%"><p>检查项</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.1.5.1.4" valign="top" width="30.17%"><p>影响</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" rowspan="2" valign="top" width="11.63%"><p>合规检查</p> </td> <td class="cellrowborder" valign="top" width="14.510000000000002%"><p>隐私、游戏资质等</p> </td> <td class="cellrowborder" valign="top" width="43.69%"><p>游戏内容、游戏安全性、用户隐私等符合华为应用市场审核规定，具体参考<a href="https://developer.huawei.com/consumer/cn/doc/50104" target="_blank">应用审核指南</a>。</p> </td> <td class="cellrowborder" valign="top" width="30.17%"><p>如不符合华为应用市场审核要求，游戏将会被驳回。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>用户实名认证信息</p> </td> <td class="cellrowborder" valign="top"><p>游戏提交上架前在AppGallery Connect完成<a href="https://developer.huawei.com/consumer/cn/doc/games-guides/game-center-identification-applyfor-0000002392353221" target="_blank">版署实名认证申请</a>并通过审核。</p> </td> <td class="cellrowborder" valign="top"><p>上架申请可能会被驳回。</p> </td> </tr> <tr><td class="cellrowborder" rowspan="5" valign="top" width="11.63%"><p>配置检查</p> </td> <td class="cellrowborder" valign="top" width="14.510000000000002%"><p>应用类型</p> </td> <td class="cellrowborder" valign="top" width="43.69%"><p>登录AppGallery Connect，检查应用类型是否为游戏。</p> </td> <td class="cellrowborder" valign="top" width="30.17%"><p>如果不是游戏类型，会导致游戏防沉迷异常，提交审核会被驳回。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>发布包版本</p> </td> <td class="cellrowborder" valign="top"><p>上架游戏要求使用release版本的发布包。在SDK目录下检查oh-uni-package.json文件，非release要求替换，或者出包后解压并查看HAP资源文件夹，检查pack.info文件的releaseType字段。</p> </td> <td class="cellrowborder" valign="top"><p>使用非release版本的发布包申请上架会被驳回。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>签名证书指纹信息</p> </td> <td class="cellrowborder" valign="top"><p>在发布阶段要求添加发布证书对应的指纹。</p> </td> <td class="cellrowborder" valign="top"><p>未添加发布证书对应的指纹会影响上架。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>APP ID映射关系</p> </td> <td class="cellrowborder" valign="top"><p>前往AppGallery Connect<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/gameservice-gameplayer-huawei#section3907114313255">配置APP ID映射关系</a>。</p> </td> <td class="cellrowborder" valign="top"><p>未配置APP ID映射关系会影响游戏上架。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>module.json5文件</p> </td> <td class="cellrowborder" valign="top"><p>在工程的entry模块module.json5文件中，查看metadata中client_id和app_id是否配置准确。</p> </td> <td class="cellrowborder" valign="top"><p>如果配置错误，Game Service Kit的接口将调用失败。</p> </td> </tr> <tr><td class="cellrowborder" rowspan="11" valign="top" width="11.63%"><p>代码检查</p> </td> <td class="cellrowborder" valign="top" width="14.510000000000002%"><p>初始化</p> </td> <td class="cellrowborder" valign="top" width="43.69%"><p>游戏启动后，要求先调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section225333655719" target="_blank">init</a>接口，调用结束后再调用其他接口。</p> </td> <td class="cellrowborder" valign="top" width="30.17%"><p>游戏如未调用init接口，将导致审核被驳回。</p> </td> </tr> <tr><td class="cellrowborder" rowspan="6" valign="top"><p>登录</p> </td> <td class="cellrowborder" valign="top"><p>华为账号登录图标要求遵守<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/account-detailedrules" target="_blank">开发者使用Account Kit的登录能力的管理细则</a>。</p> </td> <td class="cellrowborder" valign="top"><p>如不符合规范，可能会影响游戏上架。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><ul><li>使用华为账号登录HarmonyOS 4及以下游戏与HarmonyOS 5.0及以上游戏时，账号资产要保持互通。</li><li>使用游戏官方账号登录官包与HarmonyOS 5.0及以上游戏时，账号资产要保持互通。</li></ul> </td> <td class="cellrowborder" valign="top"><p>账号资产不互通会影响上架。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>游戏登录必须调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section157848375136" target="_blank">unionLogin</a>接口拉起联合登录面板进行登录。</p> </td> <td class="cellrowborder" valign="top"><p>游戏如未调用unionLogin接口将导致审核被驳回。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>用户设备未登录华为账号时，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section157848375136" target="_blank">unionLogin</a>接口会拉起设备登录华为账号的弹窗。在窗口上点击返回后，该窗口无需反复自动弹出，且玩家可以手动再次拉起该窗口。</p> </td> <td class="cellrowborder" valign="top"><p>若设备登录华为账号的弹窗无法手动拉起，或反复自动弹出，将导致上架审核被驳回。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>已接入官方账号登录的游戏，用户登录游戏默认沿用上次选择的登录账号，建议在游戏内为玩家提供<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/gameservice-gameplayer-official#section26517112362">游戏内切换账号</a>功能，支持玩家重新选择游戏的登录账号。游戏重新拉起联合登录面板时，要求调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section157848375136" target="_blank">unionLogin</a>接口将loginParam中的showLoginDialog参数设置为true。若调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section157848375136" target="_blank">unionLogin</a>接口，整个游戏登录流程无需再调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section17453143012584" target="_blank">getLocalPlayer</a>接口。</p> </td> <td class="cellrowborder" valign="top"><p>建议游戏支持玩家重新选择游戏的登录账号，否则游戏的登录体验不佳。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>游戏登录后，要求调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section15119154416715" target="_blank">verifyLocalPlayer</a>接口进行合规校验，华为侧将校验当前设备的华为账号实名认证和游戏防沉迷管控情况，如校验未通过将返回对应的错误码。</p> </td> <td class="cellrowborder" valign="top"><p>游戏如未调用verifyLocalPlayer接口将导致审核被驳回。</p> </td> </tr> <tr><td class="cellrowborder" rowspan="3" valign="top"><p>支付</p> </td> <td class="cellrowborder" valign="top"><p>若游戏内提供商品购买，则要求接入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/iap-kit-guide" target="_blank">IAP Kit（应用内支付服务）</a>。</p> </td> <td class="cellrowborder" valign="top"><p>游戏如未调用createPurchase接口将导致审核被驳回。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>purchase接口传入的商品ID和商品类型与AppGallery Connect创建的商品ID和商品类型一致。</p> </td> <td class="cellrowborder" valign="top"><p>如果支付时传入的商品ID或商品类型与AppGallery Connect不一致，将无法拉起支付页面。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>支付接口调用返回时、应用启动时均进行了补单处理和错误码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code#section194868144472" target="_blank">1001860001</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code#section5254205612317" target="_blank">1001860051</a>。请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/iap-delivering-products" target="_blank">权益发放</a>。</p> </td> <td class="cellrowborder" valign="top"><p>如未在适当时机进行补单处理，会导致异常场景下（如关闭进程、崩溃）商品未正常发放。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>游戏退出</p> </td> <td class="cellrowborder" valign="top"><p>发布中国境内（不包含中国香港、中国澳门、中国台湾）的游戏要求具备玩家退出功能。</p> </td> <td class="cellrowborder" valign="top"><p>如不具备退出功能，审核将会被驳回。</p> </td> </tr>  </tbody></table></div> </div> </div> <div></div></div>