<h1 _ngcontent-lms-c119="" class="doc-title ng-star-inserted" title="开发实例"> 开发实例 </h1>

<div _ngcontent-lms-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><ol><li><span>在首页创建一级导航。通过titleBar接口设置HdsNavigation标题栏样式及内容设置。通过pushPath路由方法跳转二级页面。</span><p></p><div _ngcontent-lms-c106="" class="highlight-div"><div _ngcontent-lms-c106="" class="highlight-div-header"><div _ngcontent-lms-c106="" class="highlight-div-header-left"><div _ngcontent-lms-c106="" class="handle-button expand-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lms-c106="" class="highlight-div-header-right"><div _ngcontent-lms-c106="" class="handle-button ai-button"></div><div _ngcontent-lms-c106="" class="handle-button line-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lms-c106="" class="handle-button theme-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lms-c106="" class="handle-button copy-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lms-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 模块导入</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HdsNavigation</span>, <span class="hljs-title class_">HdsNavigationAttribute</span>, <span class="hljs-title class_">ScrollEffectType</span>, <span class="hljs-title class_">HdsNavigationTitleMode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UIDesignKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LengthMetrics</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span>  <span class="hljs-attr">TITLE_BAR_HEIGHT_MINI</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">64</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">arr</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>];</li><li>  <span class="hljs-meta">@Provide</span>(<span class="hljs-string">'pageInfos'</span>) <span class="hljs-attr">pageInfos</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>();</li><li>  <span class="hljs-attr">scroller</span>: <span class="hljs-title class_">Scroller</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scroller</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">blankHeight</span>: <span class="hljs-built_in">number</span> = <span class="hljs-variable constant_">TITLE_BAR_HEIGHT_MINI</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isHideBackButton</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">titleMode</span>: <span class="hljs-title class_">HdsNavigationTitleMode</span> = <span class="hljs-title class_">HdsNavigationTitleMode</span>.<span class="hljs-property">MINI</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">subTitle</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Sub'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">HdsNavigation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfos</span>) { <span class="hljs-comment">// 创建HdsNavigation组件</span></li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Stack</span>() {</li><li>          <span class="hljs-title class_">Scroll</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">scroller</span>) { <span class="hljs-comment">// 内容区设置可滚动容器组件，用于实现内容区滚动联动标题栏动态模糊效果</span></li><li>            <span class="hljs-title class_">Column</span>() {</li><li>              <span class="hljs-comment">// HdsNavigation标题栏与内容区默认设置堆叠布局，可以在内容区叠加标题栏高度的Blank，防止内容区被标题栏遮挡</span></li><li>              <span class="hljs-title class_">Blank</span>().<span class="hljs-title function_">height</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">blankHeight</span>)</li><li>              <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.background1'</span>)) <span class="hljs-comment">// background1为自定义资源，开发者需替换本地资源</span></li><li>                .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>              <span class="hljs-title class_">Button</span>(<span class="hljs-string">'pushPath'</span>, { <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>                .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>                .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>                .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-string">'5%'</span>, <span class="hljs-attr">right</span>: <span class="hljs-string">'50vp'</span>, <span class="hljs-attr">left</span>: <span class="hljs-string">'50vp'</span>})</li><li>                .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'HDS_BASE_COMPONENT'</span>, <span class="hljs-string">`onClick firstPage`</span>);</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfos</span>.<span class="hljs-title function_">pushPath</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'pageOne'</span> })</li><li>                })</li><li>              <span class="hljs-title class_">Button</span>(<span class="hljs-string">'hide backButton '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">isHideBackButton</span>)</li><li>                .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">isHideBackButton</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isHideBackButton</span></li><li>                })</li><li>                .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>                .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>                .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-string">'5%'</span>, <span class="hljs-attr">right</span>: <span class="hljs-string">'50vp'</span>, <span class="hljs-attr">left</span>: <span class="hljs-string">'50vp'</span> , <span class="hljs-attr">bottom</span>: <span class="hljs-string">'5%'</span>})</li><li>              <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">12</span>, <span class="hljs-attr">initialIndex</span>: <span class="hljs-number">0</span> }) {</li><li>                <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>                  <span class="hljs-title class_">ListItem</span>() {</li><li>                    <span class="hljs-title class_">Text</span>(<span class="hljs-string">''</span> + item)</li><li>                      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>                      .<span class="hljs-title function_">height</span>(<span class="hljs-number">72</span>)</li><li>                      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>                      .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-number">500</span>)</li><li>                      .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>                  }</li><li>                  .<span class="hljs-title function_">height</span>(<span class="hljs-number">120</span>)</li><li>                  .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>)</li><li>                  .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">24</span>)</li><li>                }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> item.<span class="hljs-title function_">toString</span>())</li><li>              }</li><li>              .<span class="hljs-title function_">edgeEffect</span>(<span class="hljs-title class_">EdgeEffect</span>.<span class="hljs-property">None</span>)</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">nestedScroll</span>({<span class="hljs-attr">scrollForward</span>:<span class="hljs-title class_">NestedScrollMode</span>.<span class="hljs-property">PARENT_FIRST</span>, <span class="hljs-attr">scrollBackward</span>: <span class="hljs-title class_">NestedScrollMode</span>.<span class="hljs-property">PARENT_FIRST</span>})</li><li>            }</li><li>          }.<span class="hljs-title function_">edgeEffect</span>(<span class="hljs-title class_">EdgeEffect</span>.<span class="hljs-property">Spring</span>).<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">Off</span>)</li><li>        }</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">titleBar</span>( { <span class="hljs-comment">// HdsNavigation标题栏设置</span></li><li>      <span class="hljs-attr">style</span>: { <span class="hljs-comment">// HdsNavigation标题栏样式设置</span></li><li>        <span class="hljs-comment">// 标题栏动态模糊样式，包括是否使能滚动动态模糊，动态模糊类型，动态模糊生效的滚动距离等</span></li><li>        <span class="hljs-attr">scrollEffectOpts</span>: {</li><li>          <span class="hljs-attr">enableScrollEffect</span>: <span class="hljs-literal">true</span>,</li><li>          <span class="hljs-attr">scrollEffectType</span>: <span class="hljs-title class_">ScrollEffectType</span>.<span class="hljs-property">COMMON_BLUR</span>,</li><li>          <span class="hljs-attr">blurEffectiveStartOffset</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">0</span>),</li><li>          <span class="hljs-attr">blurEffectiveEndOffset</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">20</span>)</li><li>        },</li><li>      },</li><li>      <span class="hljs-attr">content</span>: { <span class="hljs-comment">// HdsNavigation标题栏内容区设置</span></li><li>        <span class="hljs-attr">title</span>: { <span class="hljs-comment">// HdsNavigation标题栏标题设置</span></li><li>          <span class="hljs-attr">mainTitle</span>: <span class="hljs-string">'Main'</span>,</li><li>          <span class="hljs-attr">subTitle</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">subTitle</span></li><li>        },</li><li>        <span class="hljs-attr">menu</span>: { <span class="hljs-comment">// HdsNavigation标题栏菜单项设置</span></li><li>          <span class="hljs-attr">value</span>: [{ <span class="hljs-comment">// 第一个菜单项内容设置</span></li><li>            <span class="hljs-attr">content</span>: {</li><li>              <span class="hljs-attr">label</span>: <span class="hljs-string">'menu1'</span>,</li><li>              <span class="hljs-attr">icon</span>: $r(<span class="hljs-string">'sys.symbol.ohos_wifi'</span>),</li><li>              <span class="hljs-attr">isEnabled</span>: <span class="hljs-literal">true</span>,</li><li>            },</li><li>            <span class="hljs-attr">badge</span>: {</li><li>              <span class="hljs-attr">count</span>: <span class="hljs-number">1</span>,</li><li>            }</li><li>          }, { <span class="hljs-comment">// 第二个菜单项内容设置</span></li><li>            <span class="hljs-attr">content</span>: {</li><li>              <span class="hljs-attr">label</span>: <span class="hljs-string">'menu2'</span>,</li><li>              <span class="hljs-attr">icon</span>: $r(<span class="hljs-string">'sys.symbol.ohos_lock'</span>),</li><li>              <span class="hljs-attr">isEnabled</span>: <span class="hljs-literal">true</span>,</li><li>              <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"HDS_NAV HELLO 2"</span>);</li><li>              }</li><li>            }</li><li>          }, { <span class="hljs-comment">// 第三个菜单项内容设置</span></li><li>            <span class="hljs-attr">content</span>: {</li><li>              <span class="hljs-attr">label</span>: <span class="hljs-string">'menu3'</span>,</li><li>              <span class="hljs-attr">icon</span>: $r(<span class="hljs-string">'sys.symbol.speaker_plus'</span>),</li><li>            }</li><li>          }, {</li><li>            <span class="hljs-attr">content</span>: { <span class="hljs-comment">// 第三个菜单项内容设置</span></li><li>              <span class="hljs-attr">label</span>: <span class="hljs-string">'menu4'</span>,</li><li>              <span class="hljs-attr">icon</span>: $r(<span class="hljs-string">'sys.symbol.ohos_star'</span>),</li><li>            }</li><li>          }]</li><li>        },</li><li>        <span class="hljs-attr">backIcon</span>: { <span class="hljs-comment">// HdsNavigation返回按钮设置</span></li><li>          <span class="hljs-attr">label</span>: <span class="hljs-string">'backButton'</span>,</li><li>          <span class="hljs-attr">icon</span>: $r(<span class="hljs-string">'sys.symbol.ohos_mic'</span>),</li><li>          <span class="hljs-attr">isEnabled</span>: <span class="hljs-literal">true</span>,</li><li>        }</li><li>      }</li><li>    })</li><li>    .<span class="hljs-title function_">titleMode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">titleMode</span>)</li><li>    .<span class="hljs-title function_">hideBackButton</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">isHideBackButton</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p></p></li><li><span>在PageOne页面创建二级导航组件。通过titleBar接口设置HdsNavDestination标题栏鸿蒙风格化样式及内容设置。展示NavPathStack路由使用示例。</span><p></p><div _ngcontent-lms-c106="" class="highlight-div"><div _ngcontent-lms-c106="" class="highlight-div-header"><div _ngcontent-lms-c106="" class="highlight-div-header-left"><div _ngcontent-lms-c106="" class="handle-button expand-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lms-c106="" class="highlight-div-header-right"><div _ngcontent-lms-c106="" class="handle-button ai-button"></div><div _ngcontent-lms-c106="" class="handle-button line-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lms-c106="" class="handle-button theme-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lms-c106="" class="handle-button copy-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lms-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// PageOne.ets</span></li><li><span class="hljs-comment">// 模块导入</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HdsNavDestination</span>, <span class="hljs-title class_">HdsNavDestinationAttribute</span>, <span class="hljs-title class_">ScrollEffectType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UIDesignKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LengthMetrics</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PageOneBuilder</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">PageOne</span>()</li><li>}</li><li>
</li><li><span class="hljs-keyword">const</span>  <span class="hljs-attr">TITLE_BAR_HEIGHT_MINI</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">56</span>;</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">PageOne</span> {</li><li>  <span class="hljs-meta">@Consume</span>(<span class="hljs-string">"pageInfos"</span>)<span class="hljs-attr">pageInfos</span>: <span class="hljs-title class_">NavPathStack</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">arr</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>];</li><li>  <span class="hljs-attr">scroller</span>: <span class="hljs-title class_">Scroller</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scroller</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">HdsNavDestination</span>() { <span class="hljs-comment">// 创建HdsNavDestination组件</span></li><li>      <span class="hljs-title class_">Scroll</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">scroller</span>) { <span class="hljs-comment">// HdsNavDestination内容区设置可滚动容器组件，用于实现内容区滚动联动标题栏动态模糊样式</span></li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Blank</span>().<span class="hljs-title function_">height</span>(<span class="hljs-variable constant_">TITLE_BAR_HEIGHT_MINI</span>)</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">'pushPath'</span>, { <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>            .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-string">'5%'</span>, <span class="hljs-attr">right</span>: <span class="hljs-string">'50vp'</span>, <span class="hljs-attr">left</span>: <span class="hljs-string">'50vp'</span> , <span class="hljs-attr">bottom</span>: <span class="hljs-string">'5%'</span>})</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'HDS_BASE_COMPONENT'</span>, <span class="hljs-string">`onClick pageOne`</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfos</span>.<span class="hljs-title function_">pushPath</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'pageTwo'</span> }) <span class="hljs-comment">// 将name指定的HdsNavDestination页面信息入栈</span></li><li>            })</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">'popToName'</span>, { <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>            .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfos</span>.<span class="hljs-title function_">popToName</span>(<span class="hljs-string">'pageTwo'</span>) <span class="hljs-comment">// 回退路由栈到第一个名为name的HdsNavDestination页面</span></li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'popToName'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfos</span>),</li><li>                <span class="hljs-string">'返回值'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfos</span>.<span class="hljs-title function_">popToName</span>(<span class="hljs-string">'pageTwo'</span>)))</li><li>            })</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">'popToIndex'</span>, { <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>            .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfos</span>.<span class="hljs-title function_">popToIndex</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">// 回退路由栈到index指定的HdsNavDestination页面</span></li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'popToIndex'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfos</span>))</li><li>            })</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">'moveIndexToTop'</span>, { <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>            .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfos</span>.<span class="hljs-title function_">moveIndexToTop</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">// 将index指定的HdsNavDestination页面移到栈顶</span></li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'moveIndexToTop'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfos</span>))</li><li>            })</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">'clear'</span>, { <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>            .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfos</span>.<span class="hljs-title function_">clear</span>() <span class="hljs-comment">// 清除栈中所有页面</span></li><li>            })</li><li>          <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">12</span>, <span class="hljs-attr">initialIndex</span>: <span class="hljs-number">0</span> }) {</li><li>            <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>              <span class="hljs-title class_">ListItem</span>() {</li><li>                <span class="hljs-title class_">Text</span>(<span class="hljs-string">''</span> + item)</li><li>                  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>                  .<span class="hljs-title function_">height</span>(<span class="hljs-number">72</span>)</li><li>                  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>                  .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-number">500</span>)</li><li>                  .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>              }</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-number">120</span>)</li><li>              .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>)</li><li>              .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">24</span>)</li><li>            }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> item.<span class="hljs-title function_">toString</span>())</li><li>          }</li><li>          .<span class="hljs-title function_">edgeEffect</span>(<span class="hljs-title class_">EdgeEffect</span>.<span class="hljs-property">None</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">nestedScroll</span>({<span class="hljs-attr">scrollForward</span>:<span class="hljs-title class_">NestedScrollMode</span>.<span class="hljs-property">PARENT_FIRST</span>, <span class="hljs-attr">scrollBackward</span>: <span class="hljs-title class_">NestedScrollMode</span>.<span class="hljs-property">PARENT_FIRST</span>})</li><li>        }</li><li>      }.<span class="hljs-title function_">edgeEffect</span>(<span class="hljs-title class_">EdgeEffect</span>.<span class="hljs-property">Spring</span>).<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">Off</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">titleBar</span>({ <span class="hljs-comment">// HdsNavDestination标题栏配置</span></li><li>        <span class="hljs-attr">style</span>: { <span class="hljs-comment">// HdsNavDestination标题栏样式配置</span></li><li>          <span class="hljs-comment">// 标题栏动态模糊样式，包括是否使能滚动动态模糊，动态模糊类型，动态模糊生效的滚动距离等</span></li><li>          <span class="hljs-attr">scrollEffectOpts</span>: {</li><li>            <span class="hljs-attr">enableScrollEffect</span>: <span class="hljs-literal">true</span>,</li><li>            <span class="hljs-attr">scrollEffectType</span>: <span class="hljs-title class_">ScrollEffectType</span>.<span class="hljs-property">COMMON_BLUR</span>,</li><li>            <span class="hljs-attr">blurEffectiveStartOffset</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">0</span>),</li><li>            <span class="hljs-attr">blurEffectiveEndOffset</span>: <span class="hljs-title class_">LengthMetrics</span>.<span class="hljs-title function_">vp</span>(<span class="hljs-number">20</span>)</li><li>          },</li><li>        },</li><li>        <span class="hljs-attr">content</span>: { <span class="hljs-comment">// HdsNavigation标题栏内容区设置</span></li><li>          <span class="hljs-attr">title</span>: { <span class="hljs-comment">// HdsNavigation标题栏标题设置</span></li><li>            <span class="hljs-attr">mainTitle</span>: <span class="hljs-string">"PageOne"</span>,</li><li>          },</li><li>          <span class="hljs-attr">menu</span>: { <span class="hljs-comment">// HdsNavigation标题栏菜单设置</span></li><li>            <span class="hljs-attr">value</span>: [{ <span class="hljs-comment">// 第一个菜单项内容设置</span></li><li>              <span class="hljs-attr">content</span>: {</li><li>                <span class="hljs-attr">label</span>: <span class="hljs-string">'menu1'</span>,</li><li>                <span class="hljs-attr">icon</span>: $r(<span class="hljs-string">'sys.symbol.ohos_star'</span>),</li><li>              }</li><li>            }, { <span class="hljs-comment">// 第二个菜单项内容设置</span></li><li>              <span class="hljs-attr">content</span>: {</li><li>                <span class="hljs-attr">label</span>: <span class="hljs-string">'menu2'</span>,</li><li>                <span class="hljs-attr">icon</span>: $r(<span class="hljs-string">'sys.symbol.ohos_circle'</span>),</li><li>              },</li><li>              <span class="hljs-attr">badge</span>: {</li><li>                  <span class="hljs-attr">value</span>: <span class="hljs-string">'66'</span></li><li>              }</li><li>            }]</li><li>          },</li><li>        }</li><li>      })</li><li>    .<span class="hljs-title function_">hideBackButton</span>(<span class="hljs-literal">false</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p></p></li><li><span>在PageTwo页面创建二级导航组件。</span><p></p><div _ngcontent-lms-c106="" class="highlight-div"><div _ngcontent-lms-c106="" class="highlight-div-header"><div _ngcontent-lms-c106="" class="highlight-div-header-left"><div _ngcontent-lms-c106="" class="handle-button expand-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lms-c106="" class="highlight-div-header-right"><div _ngcontent-lms-c106="" class="handle-button ai-button"></div><div _ngcontent-lms-c106="" class="handle-button line-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lms-c106="" class="handle-button theme-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lms-c106="" class="handle-button copy-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lms-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// PageTwo.ets</span></li><li><span class="hljs-comment">// 模块导入</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HdsNavDestination</span>, <span class="hljs-title class_">HdsNavDestinationAttribute</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UIDesignKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PageTwoBuilder</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">PageTwo</span>()</li><li>}</li><li><span class="hljs-keyword">const</span>  <span class="hljs-attr">TITLE_BAR_HEIGHT_MINI</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">56</span>;</li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">PageTwo</span> {</li><li>  <span class="hljs-meta">@Consume</span>(<span class="hljs-string">"pageInfos"</span>)<span class="hljs-attr">pageInfos</span>: <span class="hljs-title class_">NavPathStack</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">HdsNavDestination</span>() { <span class="hljs-comment">// 创建HdsNavDestination组件</span></li><li>      <span class="hljs-title class_">Column</span>() { <span class="hljs-comment">// HdsNavDestination组件内容区设置</span></li><li>        <span class="hljs-title class_">Blank</span>().<span class="hljs-title function_">height</span>(<span class="hljs-variable constant_">TITLE_BAR_HEIGHT_MINI</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'pushPathByName'</span>, { <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfos</span>.<span class="hljs-title function_">pushPathByName</span>(<span class="hljs-string">'pageOne'</span>, <span class="hljs-literal">null</span>) <span class="hljs-comment">// 将name指定的HdsNavDestination页面信息入栈</span></li><li>          })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">titleBar</span>({ <span class="hljs-comment">// HdsNavDestination组件标题栏设置</span></li><li>      <span class="hljs-attr">content</span>: {</li><li>        <span class="hljs-attr">title</span>: {</li><li>          <span class="hljs-attr">mainTitle</span>: <span class="hljs-string">'PageTwo'</span></li><li>        },</li><li>        <span class="hljs-attr">menu</span>: {</li><li>          <span class="hljs-attr">value</span>: [{</li><li>            <span class="hljs-attr">content</span>: {</li><li>              <span class="hljs-attr">label</span>: <span class="hljs-string">'menu1'</span>,</li><li>              <span class="hljs-attr">icon</span>: $r(<span class="hljs-string">'sys.symbol.trunk'</span>),</li><li>            }</li><li>          }]</li><li>        },</li><li>      },</li><li>    })</li><li>    .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">(<span class="hljs-params">context: NavDestinationContext</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfos</span> = context.<span class="hljs-property">pathStack</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'current page config info is '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(context.<span class="hljs-title function_">getConfigInRouteMap</span>()))</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div> <p></p></li><li><span>工程entry/src/main/module.json5文件中的“module”下新增如下配置，用于页面跳转。</span><p></p><div _ngcontent-lms-c106="" class="highlight-div"><div _ngcontent-lms-c106="" class="highlight-div-header"><div _ngcontent-lms-c106="" class="highlight-div-header-left"><div _ngcontent-lms-c106="" class="handle-button expand-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lms-c106="" class="highlight-div-header-right"><div _ngcontent-lms-c106="" class="handle-button ai-button"></div><div _ngcontent-lms-c106="" class="handle-button line-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lms-c106="" class="handle-button theme-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lms-c106="" class="handle-button copy-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lms-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"routerMap"</span>: <span class="hljs-string">"$profile:route_map"</span></li></ol></pre></div></div> <p></p></li><li><span>工程entry/src/main/resources/base/profile目录下增加route_map.json文件。</span><p></p><div _ngcontent-lms-c106="" class="highlight-div"><div _ngcontent-lms-c106="" class="highlight-div-header"><div _ngcontent-lms-c106="" class="highlight-div-header-left"><div _ngcontent-lms-c106="" class="handle-button expand-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lms-c106="" class="highlight-div-header-right"><div _ngcontent-lms-c106="" class="handle-button ai-button"></div><div _ngcontent-lms-c106="" class="handle-button line-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lms-c106="" class="handle-button theme-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lms-c106="" class="handle-button copy-button"><div _ngcontent-lms-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lms-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"routerMap"</span>: [</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"pageOne"</span>,</li><li>      <span class="hljs-string">"pageSourceFile"</span>: <span class="hljs-string">"src/main/ets/pages/PageOne.ets"</span>,</li><li>      <span class="hljs-string">"buildFunction"</span>: <span class="hljs-string">"PageOneBuilder"</span>,</li><li>      <span class="hljs-string">"data"</span>: {</li><li>        <span class="hljs-string">"description"</span>: <span class="hljs-string">"this is pageOne"</span></li><li>      }</li><li>    },</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"pageTwo"</span>,</li><li>      <span class="hljs-string">"pageSourceFile"</span>: <span class="hljs-string">"src/main/ets/pages/PageTwo.ets"</span>,</li><li>      <span class="hljs-string">"buildFunction"</span>: <span class="hljs-string">"PageTwoBuilder"</span></li><li>    }</li><li>  ]</li><li>}</li></ol></pre></div></div> <p><span><img height="749.6052900000001" originheight="1169" originwidth="598" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114747.20964687788493191854651103984941:50001231000000:2800:E1588365FB0BE8DF48D614A323CBA52A2D633E1B40FA1103CFE30CB049E61267.gif" title="点击放大" width="383.464935"></span></p> <p></p></li></ol> </div> <div></div></div>