<h1 _ngcontent-kil-c119="" class="doc-title ng-star-inserted" title="开发者自验证"> 开发者自验证 </h1>

<div _ngcontent-kil-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section432953415816">简介<i class="anchor-icon anchor-icon-link" anchorid="section432953415816" tips="复制节点链接"></i></h2><p>在开发的过程中，当开发者完成所需<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/adaptation-process">适配流程</a>后，可导入提前准备好的APK应用沙箱数据，自验证HarmonyOS应用数据迁移适配结果。</p> <p>在HarmonyOS应用适配完成并上架到华为应用市场之后，开发者仍需要将终端设备从HarmonyOS升级到HarmonyOS NEXT，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/e2e-verification">端到端验证</a>应用数据迁移结果。</p> </div> <div class="tiledSection"><h2 id="section1697011375598">开发者自验证流程<i class="anchor-icon anchor-icon-link" anchorid="section1697011375598" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section8794314020" class="firsth2">应用沙箱数据准备<i class="anchor-icon anchor-icon-link" anchorid="section8794314020" tips="复制节点链接"></i></h3><div class="p">请自行构造APK应用沙箱数据，并将构造好的APK应用沙箱数据按指定格式打包成“{APK包名}.zip”。 <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.1.3.1.1" valign="top" width="50%"><p><strong>APK应用沙箱目录</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.1.3.1.2" valign="top" width="50%"><p>{APK包名}.zip目录</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%"><p><span style="color: rgb(25,25,25);">/data/user_de/{userId}/{APK包名}/</span></p> </td> <td class="cellrowborder" valign="top" width="50%"><p>{APK包名}/de</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p><span style="color: rgb(25,25,25);">/data/user/{userId}/{APK包名}/</span></p> </td> <td class="cellrowborder" valign="top" width="50%"><p>{APK包名}/ce</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p><span style="color: rgb(25,25,25);">/data/media/{userId}/Android/data/{APK包名}/</span></p> </td> <td class="cellrowborder" valign="top" width="50%"><p>{APK包名}/A/data</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p><span style="color: rgb(25,25,25);">/data/media/{userId}/Android/obb/{APK包名}/</span></p> </td> <td class="cellrowborder" valign="top" width="50%"><p>{APK包名}/A/obb</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <p>打包好的“{APK包名}.zip”解压后，要满足包含一个“APK包名”根目录，根目录下包含对应沙箱目录文件夹，文件结构如下。</p> <div _ngcontent-kil-c106="" class="highlight-div"><div _ngcontent-kil-c106="" class="highlight-div-header"><div _ngcontent-kil-c106="" class="highlight-div-header-left"><div _ngcontent-kil-c106="" class="handle-button expand-button"><div _ngcontent-kil-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kil-c106="" class="highlight-div-header-right"><div _ngcontent-kil-c106="" class="handle-button ai-button"></div><div _ngcontent-kil-c106="" class="handle-button line-button"><div _ngcontent-kil-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kil-c106="" class="handle-button theme-button"><div _ngcontent-kil-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kil-c106="" class="handle-button copy-button"><div _ngcontent-kil-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kil-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li>─com<span class="hljs-selector-class">.demo</span><span class="hljs-selector-class">.demo</span></li><li>    ├─<span class="hljs-selector-tag">A</span></li><li>    │  ├─data</li><li>    │  └─obb</li><li>    ├─ce</li><li>    └─de</li></ol></pre></div></div> <p></p> <ol><li><span>将打包好的“{APK包名}.zip”推送到外部存储设备（U盘或者移动硬盘），连接终端设备和外部存储设备。</span><p></p><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前终端设备支持识别NTFS格式的外部存储设备，请使用NTFS格式的外部存储设备连接终端设备。</p> </div></div></div> <p></p></li><li><span>在终端设备中，打开“文件管理”应用，长按选中外部存储设备中的“{APK包名}.zip”。</span><p></p><p><span><img height="652.8428690000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114952.42003280176494425655338173291514:50001231000000:2800:12CD82CEDEF26D17B5D24E6C6E6F837AE8F72B6F0BB1C16152A2EE6A112A2A3D.png" title="点击放大" width="302.4021"></span>          <span><img height="645.6010190000001" originheight="2832" originwidth="1316" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114953.99523960617550791494800579817189:50001231000000:2800:2939D0F23C1B4799FE4061A4E01F0332991AF2E6FE501BFE2D54C9E524B00171.png" title="点击放大" width="300.011026"></span></p> <p></p></li><li><span>单击“复制”按钮，将数据复制到文件管理器的“下载”目录下，作为后续自验证的测试数据源。</span><p></p><p><span><img height="649.0922690000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114953.66871820996590270844887691750340:50001231000000:2800:90313038B86356D8F75CAEC72335BA6AF93DE3F020D3EAB67EBA65FF3755C2FB.png" title="点击放大" width="315.881384"></span>          <span><img height="647.9839800000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114953.86917472319501629833773818187390:50001231000000:2800:C84441C09B4B4EFC5229FCB9EFB591847C9A8B449B084BA1EB8A01B61F631FFE.png" title="点击放大" width="312.811079"></span></p> <p></p></li></ol> <div class="tiledSection"><h2 id="section1830414713471">HarmonyOS NEXT上模拟验证应用数据迁移<i class="anchor-icon anchor-icon-link" anchorid="section1830414713471" tips="复制节点链接"></i></h2><p>在应用沙箱数据准备好之后，开发者需要先完成所需<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/adaptation-process">适配流程</a>，再模拟验证应用数据迁移。</p> <ol><li><span>安装目标HarmonyOS应用到终端设备。</span><p></p><div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>“迁移调试”工具“205.0.0.110”之前的版本，仅支持调试release签名的应用。</p> <p>从“205.0.0.110”版本开始，“迁移调试”工具仅支持调试debug签名的应用。请开发者升级到最新版本，并使用debug签名的包验证。</p> <p>“迁移调试”工具版本查看方式：<strong>设置 </strong>&gt;<strong> 应用和元服务 </strong>&gt;<strong> MigrateTool </strong>&gt;<strong> 版本</strong></p> </div></div></div> <p></p></li><li><span>打开迁移调试工具。迁移调试工具图标如下图所示：</span><p></p><p><span><img height="58.750356000000004" originheight="758" originwidth="759" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114953.59306492896709038391473798646748:50001231000000:2800:FCCB3640CBBC634DBDF497FA4CE733D1B2D2BC2C1C1D921B0B33C86B8EC74D2A.png" title="点击放大" width="58.852500000000006"></span></p> <p></p></li><li><span>在“迁移工具”应用的首页，开发者通过单击“选择”按钮进入设备文件管理界面。</span><p></p><p><span><img height="598.1947650000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114953.24263761062595140592932303460394:50001231000000:2800:094435DF8B37FEC9C16BE284AB9A8066AFC86BD15A7571136F395E230FFA2A34.png" title="点击放大" width="305.22303000000005"></span></p> <p></p></li><li><span>在设备文件管理界面，单击“浏览”按钮，进入浏览手机内部存储界面。单击“我的手机”，根据之前导入数据的路径，进入手机存储的相应路径，选择需要导入的APK应用数据zip包。</span><p></p><p><span><img height="598.1947650000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114953.44244520538856304967011899300668:50001231000000:2800:EC33901F43D8B4FF528E565960364704598F387CAF538003614D383B2A6660F7.png" title="点击放大" width="305.22303000000005"></span> <span><img height="598.1947650000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114953.14533439494923614466871945237167:50001231000000:2800:6F17AA4156F3C96459FD46EBED098FB9D636384CDC9C9180DB245B8BBA6186F5.png" title="点击放大" width="305.22303000000005"></span></p> <p></p></li><li><span>单击需要导入的APK应用数据zip包后，会返回“迁移调试”工具首页，已选择的需要导入的APK应用数据会显示在第一栏中。</span><p></p><p><span><img height="598.1947650000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114954.00200638844963797521917352472893:50001231000000:2800:1BEB2FA3B6736628AE648EF541B8679FA023B76384B97528672A4E56E96A9372.png" title="点击放大" width="305.22303000000005"></span></p> <p></p></li><li><span>选择好需要导入的APK应用数据后，单击“请输入应用包名”。</span><p></p><p><span><img height="598.1947650000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114954.77567473374451216602872655050883:50001231000000:2800:546958F69FD9FBC658A9CBD4D91DE3C22DF70C64253F45D549F469C162682336.png" title="点击放大" width="305.22303000000005"></span></p> <p></p></li><li><span>输入需要验证的目标HarmonyOS应用包名，目标HarmonyOS应用会显示在“迁移调试”工具首页的第二栏中。</span><p></p><p><span><img height="598.1947650000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114954.77306374480574442950556201830274:50001231000000:2800:9ECE8C06F230C93C7CB5B15C83EDF4C007819002989F1AF7D03F1DF9E58D2696.png" title="点击放大" width="305.22303000000005"></span>          <span><img height="598.1947650000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114954.46439324671848225939906615248722:50001231000000:2800:1BBFBCCE9AD189DB9442B3C42B85D9C053190E635EB7259D150D4179FCBC2FDF.png" title="点击放大" width="305.22303000000005"></span></p> <p></p></li><li><span>选择需要导入的APK数据和目标HarmonyOS应用后，单击“启动迁移”按钮，开始模拟数据迁移，页面切换为数据优化界面，应用数据迁移的进度在数据迁移进度条中显示。</span><p></p><p><span><img height="598.1947650000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114954.13881265582087194630892027812000:50001231000000:2800:853C5B8413466C02B19DA53870AA9436FF3064645F2BA12771A052D58BAB57EF.png" title="点击放大" width="305.22303000000005"></span>          <span><img height="598.1947650000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114954.74334316874446905428029779722992:50001231000000:2800:D679CD6E5F562DED7ACD1BA998CA89CE12F1F313F87A9BE0470A82A1F21D6A6B.png" title="点击放大" width="305.22303000000005"></span></p> <p></p></li><li><span>应用数据迁移完成之后，数据迁移进度条上方显示“已优化完成”，进度更新为100%。数据迁移成功的情况下，界面中无异常提示。单击“完成”按钮，切换回“迁移调试”工具首页，在下方的“迁移日志”版块中显示详细迁移信息。result字段表示数据迁移结果，costTime字段表示数据迁移时长（单位ms）。</span><p></p><div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p><strong>1、此处的数据迁移成功，仅表示“备份恢复框架”接入成功，APK应用的数据成功迁移到“备份恢复框架”需要的指定目录。开发者需要通过从应用的沙箱中获取数据并解析，判断应用适配“备份恢复框架”的结果</strong>。</p> <p><strong>2、单个应用数据迁移执行超过十五分钟，超过设定的单个应用最长数据迁移时间，会导致任务执行失败。开发者需要优化应用BackupExtensionAbility的代码实现，在十五分钟内完成应用数据迁移。</strong></p> </div></div></div> <p><span><img height="598.1947650000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114954.76806873114592731415601264286551:50001231000000:2800:523C8D85E4F920E41B5E3ABFEA6B5DF3BC8B869C1AA6FE540C40B26614AF0A34.png" title="点击放大" width="305.22303000000005"></span>          <span><img height="598.1947650000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114955.71913224485301539071908087346141:50001231000000:2800:52806D9677A9CBFF184B123F0DFE38992A36EAC36F71B32F50D553DE86105384.png" title="点击放大" width="305.22303000000005"></span></p> <p></p></li><li><span>数据迁移失败的情况下，应用图标上方的状态显示“优化失败”。单击“完成”按钮，切换回“迁移工具”应用首页，在下方的“迁移日志”版块中显示详细迁移信息。result字段表示数据迁移结果，costTime字段表示数据迁移时长（单位ms）。</span><p></p><p><span><img height="598.1947650000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114955.81290343072124492294361482767653:50001231000000:2800:22534194F88C31FFE9F1F2DEC9C54C3D7A0C425B83EE4A80D73D85FF84E39914.png" title="点击放大" width="305.22303000000005"></span>          <span><img height="598.1947650000001" originheight="2720" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114955.43251438874222444286361614097567:50001231000000:2800:B67E262E771F1F38AF4E7D47B66E333AFF6F2014173A1FF123CB2F10FE1F9E58.png" title="点击放大" width="305.22303000000005"></span></p> <p></p></li></ol> </div> </div> <div></div></div>