<h1 _ngcontent-sag-c119="" class="doc-title ng-star-inserted" title="开发静态共享包"> 开发静态共享包 </h1>

<div _ngcontent-sag-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div id="body0000001547134226">    <p id="ZH-CN_TOPIC_0000002478174454__p628018415125">HAR（Harmony Archive）是静态共享包，可以包含代码、C++库、资源和配置文件。通过HAR可以实现多个模块或多个工程共享ArkUI组件、资源等相关代码。HAR不同于HAP，不能独立安装运行在设备上，只能作为应用模块的依赖项被引用。</p>    <p id="ZH-CN_TOPIC_0000002478174454__p13904144114122">本文将介绍如何创建HAR模块、如何编译共享包。接下来，将简单介绍HAR模块的工程结构，如下图所示：</p>    <p id="ZH-CN_TOPIC_0000002478174454__p478818810405"><span><img originheight="482" originwidth="309" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104717.94027171271429032133049967473566:50001231000000:2800:C425E9DD7FEB013D0D98619232B2D49564FFF50D7BA50454C9E2CF3481F37B45.png" width="309" height="482"></span></p>    <p id="ZH-CN_TOPIC_0000002478174454__zh-cn_topic_0000001316924477_p414234215212">相关字段的描述如下，其余字段与Entry或Feature模块相关字段相同，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-project-overview">工程介绍</a>。</p>    <ul id="ZH-CN_TOPIC_0000002478174454__ul11520843161310">     <li id="li11520204371316"><strong>libs</strong>：用于存放.so文件。</li>     <li id="li9520443161316"><strong>src &gt; main &gt; cpp &gt; types</strong>：用于存放C++ API描述文件，子目录按照so维度进行划分。</li>     <li id="li95204439135"><strong>src &gt; main &gt; cpp &gt; types</strong><strong> &gt; liblibrary &gt; Index.d.ts</strong>：描述C++接口的方法名、入参、返回参数等信息。</li>     <li id="li852024320135"><strong>src &gt; main &gt; cpp &gt; types</strong><strong> &gt; liblibrary &gt; oh-package.json5</strong>：描述so三方包声明文件入口和so包名信息。</li>     <li id="li1052024319132"><strong>src &gt; main &gt; cpp &gt; </strong><strong>CMakeLists.txt</strong>：CMake配置文件，提供CMake构建脚本。</li>     <li id="li1952094371315"><strong>src &gt; main &gt; cpp &gt; napi_init.cpp</strong>：共享包C++代码源文件。</li>     <li id="li11521543171311"><strong>Index.ets</strong>：共享包导出声明的入口。</li>    </ul>    <p id="ZH-CN_TOPIC_0000002478174454__p1810123814136">从DevEco Studio 6.0.1 Beta1开始，创建HAR模块时支持选择C++版本。</p>    <div class="tiledSection">     <h2 id="section643521083015">创建HAR模块<i class="anchor-icon anchor-icon-link" anchorid="section643521083015" tips="复制节点链接"></i></h2>          <ol id="ZH-CN_TOPIC_0000002478174454__zh-cn_topic_0000001316924477_ol12301222153013">      <li id="zh-cn_topic_0000001316924477_li730132214301"><span>鼠标移到工程目录顶部，单击右键，选择<strong>New &gt; Module</strong>，在工程中添加模块。</span></li>      <li id="zh-cn_topic_0000001316924477_li11511912112912"><span>在<strong>Choose Your Ability Template</strong>界面中，选择<strong>Static Library</strong>，并单击<strong>Next</strong>。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002478174454__p19398527185213"><span><img originheight="618" originwidth="951" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104717.58688853429206103253419752126747:50001231000000:2800:FE0EBD2ED51F34ADCA43363EAC61A2FE47105B0C201241821F9AD0E05A8D1D90.png" width="920" height="597.8548895899054"></span></p>       <p></p></li>      <li id="zh-cn_topic_0000001316924477_li11663444152910"><span>在<strong>Configure New Module</strong>界面中，设置新添加的模块信息，设置完成后，单击<strong>Finish</strong>完成创建。从DevEco Studio 6.0.1 Beta1开始，支持选择C++版本。</span>       <p></p>       <ul id="ZH-CN_TOPIC_0000002478174454__zh-cn_topic_0000001316924477_ul3925172323018">        <li id="zh-cn_topic_0000001316924477_li33293315309"><strong>Module name</strong>：新增模块的名称。</li>        <li id="zh-cn_topic_0000001316924477_li33211331300"><strong>Device type</strong>：支持的设备类型。</li>        <li id="zh-cn_topic_0000001316924477_li1628553153217"><strong>Enable native</strong>：创建用于调用C++代码的模块。</li>        <li id="li107383861616"><strong>C++ Standard：</strong>C++标准库，取值包括：Toolchain Default、C++11、C++14。仅打开Enable native时需要配置。</li>       </ul>       <p id="ZH-CN_TOPIC_0000002478174454__p1323686184817"><span><img originheight="607" originwidth="954" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104717.40792353697837667856508463452968:50001231000000:2800:F3F33977D93AE856C3EA1FCD4D82A3389C40D0D7E59BFE59069F9E7CA4EC6CDA.png" width="920" height="585.3668763102726"></span></p>       <p id="ZH-CN_TOPIC_0000002478174454__zh-cn_topic_0000001316924477_p8194520123815">创建完成后，会在工程目录中生成HAR模块及相关文件。</p>       <p id="ZH-CN_TOPIC_0000002478174454__p1468819542420"><span><img originheight="339" originwidth="335" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104717.64864744560938753423163302036105:50001231000000:2800:4A824607F6C59311C12B18DD1E7682623057D397296262F2C2E853AACCC20718.png" width="335" height="339"></span></p>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section7892044183814">编译HAR模块<i class="anchor-icon anchor-icon-link" anchorid="section7892044183814" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002478174454__zh-cn_topic_0000001316924477_p1876111912554">开发完HAR模块后，选中模块名，然后通过DevEco Studio菜单栏的<strong>Build &gt; Make Module ${libraryName}</strong>进行编译构建，生成HAR。HAR可供工程其他模块引用，或将HAR上传至ohpm仓库，供其他开发者下载使用。若部分源码文件不需要打包至HAR中，可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-build-har#li5533646204511">创建.ohpmignore文件</a>，配置打包时要忽略的文件/文件夹。</p>     <p id="ZH-CN_TOPIC_0000002478174454__p12353734514"><span><img originheight="169" originwidth="518" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104718.88327735782867561570049797019684:50001231000000:2800:2F16C8163D3D3A26C417E727CF5381B7845299281BBB88DB3B6FFAA8DDE44593.png" width="518" height="169"></span></p>     <p id="ZH-CN_TOPIC_0000002478174454__zh-cn_topic_0000001316924477_p146268538589">编译构建的HAR可在模块下的build目录下获取，包格式为*.har。</p>     <p id="ZH-CN_TOPIC_0000002478174454__p6119931183013"><span><img originheight="181" originwidth="484" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104718.81760770246430223685097124412572:50001231000000:2800:D98E2A656382A173BB52A9315DBEF3F67776BEF5342DE48779CBDD97A0F0D1E4.png" width="484" height="181"></span></p>     <p id="ZH-CN_TOPIC_0000002478174454__zh-cn_topic_0000001316924477_p178837239599">在编译构建HAR时，请注意以下事项：</p>     <ul id="ZH-CN_TOPIC_0000002478174454__zh-cn_topic_0000001316924477_ul143711250011">      <li id="zh-cn_topic_0000001316924477_li13370251104">编译构建HAR的过程中，不会将模块中的C++代码直接打包进.har文件中，而是将C++代码编译成动态依赖库.so文件放置在.har文件中的libs目录下。</li>      <li id="zh-cn_topic_0000001316924477_li37951617141">在编译构建HAR的过程中，会生成资源文件ResourceTable.txt，以便编辑器可以对HAR中的资源文件进行联想。因此，如果不使用DevEco Studio对HAR进行构建，则DevEco Studio的编辑器会无法联想HAR中的资源。</li>      <li id="li16868235192220">如果使用的Hvigor为2.5.0-s及以上版本，在编译构建HAR的过程中，会将dependencies内处于本模块路径下的本地依赖也打包进.har文件中；如果在打包后发现缺少部分本地依赖（如cpp/types目录），请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs/faqs-compiling-and-building-23" target="_blank">FAQ</a>。</li>     </ul>    </div>   </div>   <div></div></div>