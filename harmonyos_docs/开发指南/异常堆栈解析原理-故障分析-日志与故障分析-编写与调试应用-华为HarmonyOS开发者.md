<h1 _ngcontent-idd-c119="" class="doc-title ng-star-inserted" title="异常堆栈解析原理"> 异常堆栈解析原理 </h1>

<div _ngcontent-idd-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div id="body0000001891886666">    <div class="tiledSection">     <h2 id="section024913545142">构建产物介绍<i class="anchor-icon anchor-icon-link" anchorid="section024913545142" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section666114451518" class="firsth2">ArkTS调试产物sourceMap<i class="anchor-icon anchor-icon-link" anchorid="section666114451518" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002478334372__p260317348514">release模式编译产物，产物位置：{ProjectPath}/{ModuleName}/build/{product}/cache/default/default@CompileArkTS/esmodule/release/sourceMaps.map</p>     <p id="ZH-CN_TOPIC_0000002478334372__p12608155317496"><span><img originheight="544" originwidth="385" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104836.55724328274200945427979839002957:50001231000000:2800:233EA625724461166D7C967B875AAADAFD45E12B759A6B82E8D52D835E1A6126.png" width="385" height="544"></span></p>    </div>    <div class="tiledSection">     <h3 id="section1623725511263">C++调试产物debug so<i class="anchor-icon anchor-icon-link" anchorid="section1623725511263" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002478334372__p1848414119273">带debug信息的so数据，产物位置：{ProjectPath}/{ModuleName}/build/{product}/intermediates/libs</p>     <p id="ZH-CN_TOPIC_0000002478334372__p15770164910323">配置方式请参考<a href="/consumer/cn/doc/harmonyos-guides/ide-exception-stack-parsing-principle#section5147812132">release编译带debug信息的so</a>。</p>     <p id="ZH-CN_TOPIC_0000002478334372__p1557262251612"><span><img originheight="282" originwidth="304" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104836.59936250711633725004696044268140:50001231000000:2800:D715421E19B3A4868D0A517BCD92CA02FEB23C8F4724BE6994A5A1EC75586577.png" width="304" height="282"></span></p>    </div>    <div class="tiledSection">     <h3 id="section19215122372720">代码混淆产物nameCache<i class="anchor-icon anchor-icon-link" anchorid="section19215122372720" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002478334372__p12215323162718">反混淆映射表，release模式编译产物，产物位置：{ProjectPath}/{ModuleName}/build/{product}/cache/default/default@CompileArkTS/esmodule/release/obfuscation</p>     <p id="ZH-CN_TOPIC_0000002478334372__p187475407164"><span><img originheight="238" originwidth="438" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104836.33565561894574180022333857937187:50001231000000:2800:5FBC3B1A3E0BB4C693320F4A8C6EE34854CDCB82CD04003EFF71C2B6560DC3B9.png" width="438" height="238"></span></p>    </div>    <div class="tiledSection">     <h2 id="section147714466283">C++堆栈解析原理<i class="anchor-icon anchor-icon-link" anchorid="section147714466283" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section17207154293813" class="firsth2">编译选项差异<i class="anchor-icon anchor-icon-link" anchorid="section17207154293813" tips="复制节点链接"></i></h3>          <ul id="ZH-CN_TOPIC_0000002478334372__ul18632324144319">      <li id="li189911532194316">Debug：不优化代码，附加调试信息。</li>      <li id="li1120193434311">Release：最大化优化代码，但不包含调试信息。</li>      <li id="li363218247436">RelWithDebInfo：近似于Release模式，既进行了代码优化，同时保留部分调试信息。</li>     </ul>    </div>    <div class="tiledSection">     <h3 id="section5147812132">release编译带debug信息的so<i class="anchor-icon anchor-icon-link" anchorid="section5147812132" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002478334372__p14905151521318">通常release的so会经过strip，strip后的so中的符号表、调试信息会被剥离。</p>     <p id="ZH-CN_TOPIC_0000002478334372__p1169417491514"><span><img originheight="342" originwidth="907" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104836.58195964086446854719531959555861:50001231000000:2800:258F6E7BF3E139120E2B202100625A86D4ED4548F64E3602DC374086CCD697AB.png" width="907" height="342"></span></p>     <p id="ZH-CN_TOPIC_0000002478334372__p781736421">若需要保留so文件中的符号表、调试信息，需要在build-profile.json5的buildOption/externalNativeOptions中配置参数：<span style="color: rgb(135,16,148);">"arguments"</span>: <span style="color: rgb(6,125,23);">"-DCMAKE_BUILD_TYPE=RelWithDebInfo"</span>。</p>     <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334372__screen517110316379" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class=""><span class="hljs-string">"apiType"</span></span>: <span class=""><span class="hljs-string">"stageMode"</span></span>,</li><li>  <span class=""><span class="hljs-string">"buildOption"</span></span>: {</li><li>    <span class=""><span class="hljs-string">"externalNativeOptions"</span></span>: {</li><li>      <span class=""><span class="hljs-string">"path"</span></span>: <span class=""><span class="hljs-string">"./src/main/cpp/CMakeLists.txt"</span></span>,</li><li>      <span class=""><span class="hljs-string">"arguments"</span></span>: <span class=""><span class="hljs-string">"-DCMAKE_BUILD_TYPE=RelWithDebInfo"</span></span>,</li><li>      <span class=""><span class="hljs-string">"cppFlags"</span></span>: <span class=""><span class="hljs-string">""</span></span>,</li><li>    }</li><li>  },</li><li>  <span class="">...</span></li><li>}</li></ol></pre></div></div>     <ul id="ZH-CN_TOPIC_0000002478334372__ul64902028835">      <li id="li1949016281037">libs：带debug信息的so。</li>      <li id="li44902028836">stripped_native_libs：移除调试信息等冗余数据后的so。</li>     </ul>     <p id="ZH-CN_TOPIC_0000002478334372__p33171215228"><span><img originheight="559" originwidth="350" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104837.28470860048094439216384403380567:50001231000000:2800:9C00C1789EAC20A57A81027A4219F4EAC092E558DDB6B5B0813C1D8723A0F63F.png" width="350" height="559"></span></p>     <p id="ZH-CN_TOPIC_0000002478334372__p18936747183415"></p>     <p id="ZH-CN_TOPIC_0000002478334372__p108522478344"></p>    </div>    <div class="tiledSection">     <h3 id="section1735713501344">C++堆栈解析流程<i class="anchor-icon anchor-icon-link" anchorid="section1735713501344" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002478334372__p1870654835919">llvm-addr2line（<a href="/consumer/cn/doc/harmonyos-guides/ide-exception-stack-parsing-principle#li11164144153">获取llvm-addr2line工具</a>）是将函数地址解析成文件名或行号的工具。</p>     <p id="ZH-CN_TOPIC_0000002478334372__p4706124812595">给出一个可执行文件中的地址或一个可重定位对象中的偏移部分的地址，使用调试信息来找出与之相关的文件名和行号。</p>     <p id="ZH-CN_TOPIC_0000002478334372__p1770644805912">常用参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table id="table173672057105919" class="layoutFixed idpTab">       <thead>        <tr id="ZH-CN_TOPIC_0000002478334372__row12367105705917">         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.3.1.1" valign="top" width="19.37%">          <p id="ZH-CN_TOPIC_0000002478334372__p11367195785912">参数</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.3.1.2" valign="top" width="80.63%">          <p id="ZH-CN_TOPIC_0000002478334372__p4367105765917">用途</p></th>        </tr>       </thead>               <tbody><tr id="ZH-CN_TOPIC_0000002478334372__row33671257195914">         <td class="cellrowborder" valign="top" width="19.37%">          <p id="ZH-CN_TOPIC_0000002478334372__p3367205755911">-a</p></td>         <td class="cellrowborder" valign="top" width="80.63%">          <p id="ZH-CN_TOPIC_0000002478334372__p12367155735914">以十六进制形式显示地址</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334372__row17367157125913">         <td class="cellrowborder" valign="top" width="19.37%">          <p id="ZH-CN_TOPIC_0000002478334372__p103671457105912">-C</p></td>         <td class="cellrowborder" valign="top" width="80.63%">          <p id="ZH-CN_TOPIC_0000002478334372__p33671357175914">将符号名解码为用户级别的名字</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334372__row736715572595">         <td class="cellrowborder" valign="top" width="19.37%">          <p id="ZH-CN_TOPIC_0000002478334372__p1836712576595">-e</p></td>         <td class="cellrowborder" valign="top" width="80.63%">          <p id="ZH-CN_TOPIC_0000002478334372__p113671257135920">设置需要转换地址的可执行文件名</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334372__row1936795745910">         <td class="cellrowborder" valign="top" width="19.37%">          <p id="ZH-CN_TOPIC_0000002478334372__p1136711577591">-f</p></td>         <td class="cellrowborder" valign="top" width="80.63%">          <p id="ZH-CN_TOPIC_0000002478334372__p13367105725918">显示文件名、行号和函数名信息</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334372__row1036715716598">         <td class="cellrowborder" valign="top" width="19.37%">          <p id="ZH-CN_TOPIC_0000002478334372__p14367115712597">-F</p></td>         <td class="cellrowborder" valign="top" width="80.63%">          <p id="ZH-CN_TOPIC_0000002478334372__p0367115716593">显示函数名及文件行号</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334372__row336745745917">         <td class="cellrowborder" valign="top" width="19.37%">          <p id="ZH-CN_TOPIC_0000002478334372__p103670579595">-j</p></td>         <td class="cellrowborder" valign="top" width="80.63%">          <p id="ZH-CN_TOPIC_0000002478334372__p3367115716591">读取指定部分的偏移量，而不是绝对地址</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334372__row03670575594">         <td class="cellrowborder" valign="top" width="19.37%">          <p id="ZH-CN_TOPIC_0000002478334372__p23676577594">-p</p></td>         <td class="cellrowborder" valign="top" width="80.63%">          <p id="ZH-CN_TOPIC_0000002478334372__p15367145735912">每个地址信息单独占一行</p></td>        </tr>             </tbody></table></div>     </div>     <p id="ZH-CN_TOPIC_0000002478334372__p1034614208817">参考示例：</p>     <p id="ZH-CN_TOPIC_0000002478334372__p15555221467">查看文件名、行号和函数名相关信息：</p>     <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002478334372__screen10621144912610" data-highlighted="yes"><ol class="linenums"><li>llvm-addr2line -f -e File.so</li></ol></pre></div></div>     <p id="ZH-CN_TOPIC_0000002478334372__p71673310613">查找指定的地址所对应的代码位置：</p>     <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002478334372__screen18169135711614" data-highlighted="yes"><ol class="linenums"><li>llvm-addr2line 0x00000000004005e7 -e <span class="hljs-built_in">test</span> -f -C -s</li></ol></pre></div></div>     <p id="ZH-CN_TOPIC_0000002478334372__p1786954873413">例如：</p>     <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002478334372__screen1312420243514" data-highlighted="yes"><ol class="linenums"><li>llvm-addr2line -e libapplication.so 00003714 -f -C</li></ol></pre></div></div>     <p id="ZH-CN_TOPIC_0000002478334372__p18110418355"><span><img originheight="60" originwidth="731" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104837.70046818905119644040315874313050:50001231000000:2800:DDFBC01B6925C6DC5F1656AED096B657073ABC95A779E27EE0908D6AB8DE1912.png" width="731" height="60"></span></p>     <p id="ZH-CN_TOPIC_0000002478334372__p1315892101217">ASan堆栈解析：</p>     <p id="ZH-CN_TOPIC_0000002478334372__p415817281212"><span><img originheight="200" originwidth="1027" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104837.26183605786642339353290195798462:50001231000000:2800:A747FBD497E0F877D2DD205921CCDD74AD87760E39FE090BFBB297423B237546.png" width="920" height="179.1626095423564"></span></p>     <p id="ZH-CN_TOPIC_0000002478334372__p747842820133"><span><img originheight="91" originwidth="1088" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104837.63130170568191762575688887940047:50001231000000:2800:5505CCDC4E8F15AD9AB7D73EB5A8D8DDF02FECBF793BF45A3B106230FC155758.png" width="920" height="76.94852941176471"></span></p>    </div>    <div class="tiledSection">     <h3 id="section1396961101517">常见问题<i class="anchor-icon anchor-icon-link" anchorid="section1396961101517" tips="复制节点链接"></i></h3>          <ul id="ZH-CN_TOPIC_0000002478334372__ul19154146159">      <li id="li9161414161514">什么是UUID？       <p id="ZH-CN_TOPIC_0000002478334372__p1765474715157">每一个可执行程序都有一个build UUID来唯一标识。Crash日志包含发生crash的这个应用（app）的build UUID以及crash发生时应用加载的所有库文件的build UUID。</p></li>      <li id="li11164144153">如何获取llvm-addr2line工具？       <p id="ZH-CN_TOPIC_0000002478334372__p16818131611713">在DevEco Studio安装目录/deveco-studio/sdk/default/openharmony/native/llvm/bin下即可找到llvm-addr2line.exe。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="section5924954297">ArkTS堆栈解析原理<i class="anchor-icon anchor-icon-link" anchorid="section5924954297" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section1145914292713" class="firsth2">sourcemap格式<i class="anchor-icon anchor-icon-link" anchorid="section1145914292713" tips="复制节点链接"></i></h3>          <div class="fignone" id="fig94651056296">      <span class="figcap"><b>图1 </b>源码</span>      <br><span><img originheight="757" originwidth="722" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104837.71203533300772175201744255498867:50001231000000:2800:B61256485C203012F94276740C97AABB74252DFB08F0AC8A1F9263643F216FBF.png" width="722" height="757"></span>     </div>     <div class="fignone" id="fig1057494313299">      <span class="figcap"><b>图2 </b>编译后产物</span>      <br><span><img height="473.8125" originheight="665" originwidth="734" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104837.34891835308020768776970165724076:50001231000000:2800:74DDB8A97D938DD7B309B141D2F4C92B1CC204CC7BD6B7398E681054AFC61B5D.png" title="点击放大" width="523.6875"></span>     </div>     <p id="ZH-CN_TOPIC_0000002478334372__p37083548294"><strong>实际代码行映射关系：</strong></p>     <p id="ZH-CN_TOPIC_0000002478334372__p1670820549295">70-&gt;29</p>     <p id="ZH-CN_TOPIC_0000002478334372__p177085548293">71-&gt;30</p>     <p id="ZH-CN_TOPIC_0000002478334372__p1070818546297">72-&gt;31</p>     <p id="ZH-CN_TOPIC_0000002478334372__p197081654192911">73-&gt;32</p>     <p id="ZH-CN_TOPIC_0000002478334372__p12273463013"><strong>sourceMap结构：</strong></p>     <p id="ZH-CN_TOPIC_0000002478334372__p1929415962411"><span><img originheight="501" originwidth="587" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104837.22864144805248695541608796494981:50001231000000:2800:3D856D02F10AF0C5B4246473F1E4264D3F484D673AA39A8FA0C762B2D173C22E.png" width="587" height="501"></span></p>     <p id="ZH-CN_TOPIC_0000002478334372__p192619372306">单个module构建产物sourceMaps.map为merge文件，实际包含该模块的所有文件的映射关系；每个json中key以编译构建产物的唯一路径作为主键，运行程序的abc中保留了对应的key信息，当运行时异常代码归属到该文件时输出信息为该key，sources为实际源码文件信息，用于异常堆栈还原源码；mappings为编码后的行列号映射表，每个文件有独立的映射关系。</p>     <ul id="ZH-CN_TOPIC_0000002478334372__ul1292617377306">      <li id="li196462145715">key：参考<a href="/consumer/cn/doc/harmonyos-guides/ide-exception-stack-parsing-principle#section983741193211">sourceMap解析流程</a>。       <p id="ZH-CN_TOPIC_0000002478334372__p284163118815"></p></li>      <li id="li39261437193017">version：目前source map标准的版本为3。</li>      <li id="li692653733010">file：生成的文件名。</li>      <li id="li2926137193019">sources：源文件地址列表。</li>      <li id="li6926163793014">names：转换前的所有变量名和属性名。</li>      <li id="li1799716571454">mappings：记录位置信息的字符串。</li>      <li id="li149261437193018">sourceRoot：源文件目录地址，可以用于重新定位服务器上的源文件。</li>      <li id="li139261737153013">entry-package-info："entry|1.0.0" 对应模块本身的oh-package.json中的name及version，用于关联反混淆nameCache资源版本。</li>      <li id="li18926143713301">package-info: "har1|1.0.0" 对应非模块本身的oh-package.json中的name及version，即dependencies引用的代码，可用于引用三方库二次解析sourceMap。</li>     </ul>    </div>    <div class="tiledSection">     <h3 id="section983741193211">sourceMap解析流程<i class="anchor-icon anchor-icon-link" anchorid="section983741193211" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002478334372__p15729122911334">下图是sourceMap中每个json的key的结构化处理过程，以“entry|har1|1.0.0|src/main/ets/pages/w.ts”为例，各字段含义如下。</p>     <p id="ZH-CN_TOPIC_0000002478334372__p273114103710">以“|”为分隔符，entry是本模块oh-package.json5中的name，har1|1.0.0是依赖的har1包的oh-package.json5中的name和version（如果没有依赖包，则是本模块oh-package.json5中的name和version），src/main/ets/pages/w.ts是引用的源码文件路径。</p>     <div class="fignone" id="fig43319324915">      <span class="figcap"><b>图3 </b>sourceMap中的key结构化处理</span>      <br><span><img height="264.98375372393247" originheight="350" originwidth="1230" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104837.81574134163682332184710341530890:50001231000000:2800:F808EF5FB1F34604ED0636E9D43AFF3D6F05A6336872AA53C53C7FEB0B653930.png" title="点击放大" width="920"></span>     </div>    </div>    <div class="tiledSection">     <h2 id="section13118143622114">反混淆解析原理<i class="anchor-icon anchor-icon-link" anchorid="section13118143622114" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002478334372__p62416565718">代码混淆配置请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-build-obfuscation">代码混淆</a>。</p>    </div>    <div class="tiledSection">     <h3 id="section4431142631116" class="firsth2">代码混淆产物介绍<i class="anchor-icon anchor-icon-link" anchorid="section4431142631116" tips="复制节点链接"></i></h3>         </div>    <p id="ZH-CN_TOPIC_0000002478334372__p105957379285">混淆映射表：$ProjectPath\$ModuleName\build\$product\cache\default\default@CompileArkTS\esmodule\release\obfuscation\nameCache.json</p>    <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334372__screen11164152572913" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"home/src/main/ets/homeability/HomeAbility.ets"</span>: {</li><li>    <span class="hljs-string">"IdentifierCache"</span>: {</li><li>      <span class="hljs-string">"#AbilityConstant"</span>: <span class="hljs-string">"AbilityConstant"</span>,</li><li>      <span class="hljs-string">"#hilog"</span>: <span class="hljs-string">"hilog"</span>,</li><li>      <span class="hljs-string">"#UIAbility"</span>: <span class="hljs-string">"UIAbility"</span>,</li><li>      <span class="hljs-string">"#Want"</span>: <span class="hljs-string">"Want"</span>,</li><li>      <span class="hljs-string">"#window"</span>: <span class="hljs-string">"window"</span>,</li><li>      <span class="hljs-string">"HomeAbility#onWindowStageCreate#__function"</span>: <span class="hljs-string">"i"</span></li><li>    },</li><li>    <span class="hljs-string">"MemberMethodCache"</span>: {</li><li>      <span class="hljs-string">"onCreate:10:16"</span>: <span class="hljs-string">"onCreate"</span>,</li><li>      <span class="hljs-string">"onDestroy:18:20"</span>: <span class="hljs-string">"onDestroy"</span>,</li><li>      <span class="hljs-string">"onWindowStageCreate:22:33"</span>: <span class="hljs-string">"onWindowStageCreate"</span>,</li><li>      <span class="hljs-string">"onWindowStageDestroy:35:38"</span>: <span class="hljs-string">"onWindowStageDestroy"</span>,</li><li>      <span class="hljs-string">"onForeground:40:43"</span>: <span class="hljs-string">"onForeground"</span>,</li><li>      <span class="hljs-string">"onBackground:45:48"</span>: <span class="hljs-string">"onBackground"</span></li><li>    },</li><li>    <span class="hljs-string">"obfName"</span>: <span class="hljs-string">"home/src/main/ets/homeability/HomeAbility.ets"</span></li><li>  },</li><li>  <span class="hljs-string">"compileSdkVersion"</span>: <span class="hljs-string">"5.0.0.25"</span>,</li><li>  <span class="hljs-string">"entryPackageInfo"</span>: <span class="hljs-string">"home|1.0.0"</span>,</li><li>  <span class="hljs-string">"PropertyCache"</span>: {</li><li>    <span class="hljs-string">"integratedHsp"</span>: <span class="hljs-string">"i"</span>,</li><li>    <span class="hljs-string">"asanClick"</span>: <span class="hljs-string">"j"</span>,</li><li>    <span class="hljs-string">"Index_Params"</span>: <span class="hljs-string">"m"</span>,</li><li>    <span class="hljs-string">"testNapi"</span>: <span class="hljs-string">"o"</span>,</li><li>    <span class="hljs-string">"Index"</span>: <span class="hljs-string">"t"</span>,</li><li>    <span class="hljs-string">"testObfuscation"</span>: <span class="hljs-string">"g2"</span></li><li>  }</li><li>}</li></ol></pre></div></div>    <ul id="ZH-CN_TOPIC_0000002478334372__ul3167188181711">     <li id="li131674851710"><strong>originalfieldname</strong>：该字段为每个文件的原始文件路径及名称，例如以上的"home/src/main/ets/homeability/HomeAbility.ets"。</li>    </ul>    <ul id="ZH-CN_TOPIC_0000002478334372__ul1720816189173">     <li id="li3208818121710"><strong>ObfName</strong>：key为固定字段，value为每个文件混淆后的名称，与<strong>originalfieldname</strong>配对。      <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-json" id="ZH-CN_TOPIC_0000002478334372__screen271816353017" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">"obfName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"home/src/main/ets/pages/a.ts"</span></li></ol></pre></div></div></li>     <li id="li168517545226"><strong>IdentifierCache</strong>：该字段对应的值为该文件下的变量名混淆前后的映射关系。      <p id="ZH-CN_TOPIC_0000002478334372__p724195911223">变量名分为两类：普通变量、类方法变量。</p>      <p id="ZH-CN_TOPIC_0000002478334372__p5550256202212">普通变量映射关系的格式如下：</p>      <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-yaml" id="ZH-CN_TOPIC_0000002478334372__screen7779194113308" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">originalvariablename :</span>  <span class="hljs-string">obfuscatedvariablename</span></li></ol></pre></div></div>      <ul id="ZH-CN_TOPIC_0000002478334372__ul81531536243">       <li id="li142541514249">originalvariablename 表示原始的变量名称。</li>      </ul>      <ul id="ZH-CN_TOPIC_0000002478334372__ul183120413112">       <li id="li158311346311">obfuscatedvariablename 表示混淆后的变量名称。</li>      </ul>      <p id="ZH-CN_TOPIC_0000002478334372__p5532127103019">类方法变量映射关系的格式如下：</p>      <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334372__screen1200229153115" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">/*--------------------------key----------------------------------  :  -----------value----------*/</span></li><li><span class="hljs-variable">originalmethodname</span>: <span class="hljs-title class_">originalmethodstartline</span>: <span class="hljs-title class_">originalmethodendline</span> :  <span class="hljs-title class_">obfuscatedmethodname</span></li></ol></pre></div></div>      <ul id="ZH-CN_TOPIC_0000002478334372__ul8332114172513">       <li id="li87175122520">originalmethodname 表示原始的方法名称。</li>       <li id="li14961165342516">[:originalmethodstartline:originalmethodendline] 表示原始的方法起始行数与结束行数，左右都是闭区间。</li>       <li id="li143296409253">obfuscatedmethodname 表示混淆后的方法名称。</li>      </ul></li>     <li id="li237113619281"><strong>MemberMethodCache</strong>：该字段对应的值为该文件下的成员方法名混淆前后的映射关系。      <p id="ZH-CN_TOPIC_0000002478334372__p233516376282">开启属性混淆时，成员方法映射关系的格式如下：</p>      <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334372__screen451193663211" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">/*--------------------------key---------------------------------  :  -----------value----------*/</span></li><li><span class="hljs-variable">originalmethodname</span>:<span class="hljs-title class_">originalmethodstartline</span>:<span class="hljs-title class_">originalmethodendline</span>  :  <span class="hljs-title class_">obfuscatedmethodname</span></li></ol></pre></div></div>      <p id="ZH-CN_TOPIC_0000002478334372__p7858151220326">未开启属性混淆时，成员方法映射关系的格式如下：</p>      <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334372__screen12539357113214" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">/*--------------------------key-------------------------------------  :  -----------value----------*/</span></li><li><span class="hljs-variable">originalmethodname</span> : <span class="hljs-title class_">originalmethodstartline</span> : <span class="hljs-title class_">originalmethodendline</span>  :  <span class="hljs-title class_">originalmethodname</span></li></ol></pre></div></div>      <ul id="ZH-CN_TOPIC_0000002478334372__ul131313373297">       <li id="li691194115290">originalmethodname 表示原始的成员方法名称。</li>       <li id="li045124411299">[:originalmethodstartline :originalmethodendline] 表示原始的成员方法起始行数与结束行数，左右都是闭区间。</li>       <li id="li8172113672918">obfuscatedmethodname 表示混淆后的成员方法名称。</li>      </ul></li>     <li id="li76781233193316"><strong>PropertyCache</strong>：该字段对应的值为全局所有属性名混淆前后的映射关系，只有在开启属性混淆时才会有值。      <p id="ZH-CN_TOPIC_0000002478334372__p135551235183312">属性名映射关系格式如下：</p>      <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334372__screen13922329193316" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">/*--------key-------  :  -----------value----------*/</span> </li><li><span class="hljs-variable">originalpropertyname</span>  :  <span class="hljs-title class_">obfuscatedmethodname</span></li></ol></pre></div></div>      <ul id="ZH-CN_TOPIC_0000002478334372__ul1519510126341">       <li id="li41302113347">originalpropertyname 表示原始的属性名称。</li>       <li id="li91349158349">obfuscatedmethodname 表示混淆后的属性名称。</li>      </ul></li>    </ul>    <div class="tiledSection">     <h3 id="section620483973415">代码混淆解析<i class="anchor-icon anchor-icon-link" anchorid="section620483973415" tips="复制节点链接"></i></h3>         </div>    <p id="ZH-CN_TOPIC_0000002478334372__p12927757173317">异常堆栈如下：</p>    <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334372__screen2331018113410" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">Pid</span>:<span class="hljs-number">58348</span></li><li><span class="hljs-variable">Uid</span>:<span class="hljs-number">20020156</span></li><li><span class="hljs-variable">Reason</span>:<span class="hljs-title class_">RangeError</span></li><li><span class="hljs-variable">Error</span> <span class="hljs-variable">name</span>:<span class="hljs-title class_">RangeError</span></li><li><span class="hljs-variable">Error</span> <span class="hljs-variable">message</span>:<span class="hljs-title class_">The</span> <span class="hljs-title class_">number</span> <span class="hljs-title class_">cannot</span> <span class="hljs-title class_">be</span> <span class="hljs-title class_">converted</span> <span class="hljs-title class_">to</span> <span class="hljs-title class_">a</span> <span class="hljs-title class_">BigInt</span> <span class="hljs-title class_">because</span> <span class="hljs-title class_">it</span> <span class="hljs-keyword">is</span> <span class="hljs-title class_">not</span> <span class="hljs-title class_">an</span> <span class="hljs-title class_">integer</span></li><li><span class="hljs-variable">Stacktrace</span>:</li><li><span class="hljs-variable">Cannot</span> <span class="hljs-variable">get</span> <span class="hljs-variable">SourceMap</span> <span class="hljs-variable">info</span>, <span class="hljs-variable">dump</span> <span class="hljs-variable">raw</span> <span class="hljs-variable">stack</span>:</li><li>    <span class="hljs-variable">at</span> <span class="hljs-variable">g2</span> (<span class="hljs-variable">home</span>|<span class="hljs-variable">home</span>|<span class="hljs-number">1.0</span><span class="hljs-number">.0</span>|<span class="hljs-variable">src</span>/<span class="hljs-keyword">main</span>/<span class="hljs-variable">ets</span>/<span class="hljs-variable">pages</span>/<span class="hljs-variable">a</span>.<span class="hljs-variable">ts</span>:<span class="hljs-number">6</span>:<span class="hljs-number">6</span>)</li><li>    <span class="hljs-variable">at</span> <span class="hljs-variable">getVersion</span> (<span class="hljs-variable">home</span>|<span class="hljs-variable">home</span>|<span class="hljs-number">1.0</span><span class="hljs-number">.0</span>|<span class="hljs-variable">src</span>/<span class="hljs-keyword">main</span>/<span class="hljs-variable">ets</span>/<span class="hljs-variable">pages</span>/<span class="hljs-variable">a</span>.<span class="hljs-variable">ts</span>:<span class="hljs-number">2</span>:<span class="hljs-number">2</span>)</li><li>    <span class="hljs-variable">at</span> <span class="hljs-variable">anonymous</span> (<span class="hljs-variable">home</span>|<span class="hljs-variable">home</span>|<span class="hljs-number">1.0</span><span class="hljs-number">.0</span>|<span class="hljs-variable">src</span>/<span class="hljs-keyword">main</span>/<span class="hljs-variable">ets</span>/<span class="hljs-variable">pages</span>/<span class="hljs-variable">Index</span>.<span class="hljs-variable">ts</span>:<span class="hljs-number">61</span>:<span class="hljs-number">61</span>)</li></ol></pre></div></div>    <p id="ZH-CN_TOPIC_0000002478334372__p152431102344"></p>    <ol id="ZH-CN_TOPIC_0000002478334372__ol20672343133712">     <li id="li12672124317379">经过sourcemap映射转码堆栈如下：      <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-swift" id="ZH-CN_TOPIC_0000002478334372__screen122591593519" data-highlighted="yes"><ol class="linenums"><li>at g2 (home<span class="hljs-regexp">/src/</span>main<span class="hljs-regexp">/ets/</span>pages<span class="hljs-operator">/</span>tool.ts:<span class="hljs-number">7</span>:<span class="hljs-number">27</span>)</li><li>at getVersion (home<span class="hljs-regexp">/src/</span>main<span class="hljs-regexp">/ets/</span>pages<span class="hljs-operator">/</span>tool.ts:<span class="hljs-number">2</span>:<span class="hljs-number">30</span>)</li><li>at anonymous (home<span class="hljs-regexp">/src/</span>main<span class="hljs-regexp">/ets/</span>pages<span class="hljs-operator">/</span><span class="hljs-type">Index</span>.ets:<span class="hljs-number">23</span>:<span class="hljs-number">40</span>)</li></ol></pre></div></div>      <p id="ZH-CN_TOPIC_0000002478334372__p6284104519345">a.ts通过sourcemap还原为tool.ts。</p>      <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334372__screen1807830173510" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"home|home|1.0.0|src/main/ets/pages/a.ts"</span>: {</li><li>    <span class="hljs-string">"version"</span>: <span class="hljs-number">3</span>,</li><li>    <span class="hljs-string">"file"</span>: <span class="hljs-string">"tool.ts"</span>,</li><li>    <span class="hljs-string">"sources"</span>: [</li><li>      <span class="hljs-string">"home/src/main/ets/pages/tool.ts"</span></li><li>    ],</li><li>    <span class="hljs-string">"names"</span>: [],</li><li>    <span class="hljs-string">"mappings"</span>: <span class="hljs-string">"AAAA,MAAM,CAAC,OAAO,UAAU,UAAU,IAAI,MAAM;IAC1C,IAAI,KAAM,IAAiB,CAAA;IAC3B,UAAW;AACb,CAAC;AAED,eAA2B,MAAM;IAC/B,IAAI,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,CAAA;IACxB,OAAO,GAAG,CAAC;AACb,CAAC"</span>,</li><li>    <span class="hljs-string">"sourceRoot"</span>: <span class="hljs-string">""</span>,</li><li>    <span class="hljs-string">"entry-package-info"</span>: <span class="hljs-string">"home|1.0.0"</span></li><li>  }</li></ol></pre></div></div></li>     <li id="li244318320405">函数级文件名映射。      <p id="ZH-CN_TOPIC_0000002478334372__p415105104015"><a name="ZH-CN_TOPIC_0000002478334372__li244318320405"></a><a name="li244318320405"></a>查看混淆映射表：$ProjectPath\$ModuleName\build\$product\cache\default\default@CompileArkTS\esmodule\release\obfuscation\nameCache.json</p>      <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334372__screen1316320315369" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"home/src/main/ets/pages/tool.ts"</span>: {</li><li>    <span class="hljs-string">"IdentifierCache"</span>: {</li><li>      <span class="hljs-string">"getVersion#res"</span>: <span class="hljs-string">"h2"</span>,</li><li>      <span class="hljs-string">"#testObfuscation:6:9"</span>: <span class="hljs-string">"g2"</span></li><li>    },</li><li>    <span class="hljs-string">"MemberMethodCache"</span>: {},</li><li>    <span class="hljs-string">"obfName"</span>: <span class="hljs-string">"home/src/main/ets/pages/a.ts"</span></li><li>  }</li></ol></pre></div></div>      <p id="ZH-CN_TOPIC_0000002478334372__p544416159366">该字段的IdentifierCache与MemberMethodCache中保存了方法名混淆前后的映射关系，对应格式为："源码方法名:该方法起始行号:该方法结束行号":"混淆后方法名"。</p>      <p id="ZH-CN_TOPIC_0000002478334372__p8790691354">源码方法名中的"源码方法名"代表上下级关系，故匹配后可以通过"#"保留最后名称。</p>      <p id="ZH-CN_TOPIC_0000002478334372__p8971512257"></p>      <p id="ZH-CN_TOPIC_0000002478334372__p8328822656">第一条堆栈混淆后的方法名为"g2"，若存在多个"g2"则需要通过行号范围过滤，故利用上述字段对该方法名进行还原：</p>      <ol id="ZH-CN_TOPIC_0000002478334372__ol550362716513">       <li id="li19221937856">通过key(home/src/main/ets/pages/tool.ts)查找到映射表。</li>       <li id="li1394952417512">在上述字段中找出所有混淆后方法名为"g2"的条目，该条目为：        <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-json" id="ZH-CN_TOPIC_0000002478334372__screen115635583617" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">"#testObfuscation:6:9"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"g2"</span></li></ol></pre></div></div></li>       <li id="li12758462060">找到行号范围包含步骤一中还原后行号的条目，步骤一中得到的行号为7包含在6-9之内，因此可以得到源码对应方法名为"#testObfuscation"，经过字符串处理结果为"testObfuscation"。        <div _ngcontent-idd-c106="" class="highlight-div"><div _ngcontent-idd-c106="" class="highlight-div-header"><div _ngcontent-idd-c106="" class="highlight-div-header-left"><div _ngcontent-idd-c106="" class="handle-button expand-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-idd-c106="" class="highlight-div-header-right"><div _ngcontent-idd-c106="" class="handle-button ai-button"></div><div _ngcontent-idd-c106="" class="handle-button line-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-idd-c106="" class="handle-button theme-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-idd-c106="" class="handle-button copy-button"><div _ngcontent-idd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-idd-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-swift" id="ZH-CN_TOPIC_0000002478334372__screen19920153910372" data-highlighted="yes"><ol class="linenums"><li>at testObfuscation (home<span class="hljs-regexp">/src/</span>main<span class="hljs-regexp">/ets/</span>pages<span class="hljs-operator">/</span>tool.ts:<span class="hljs-number">7</span>:<span class="hljs-number">27</span>)</li><li>at getVersion (home<span class="hljs-regexp">/src/</span>main<span class="hljs-regexp">/ets/</span>pages<span class="hljs-operator">/</span>tool.ts:<span class="hljs-number">2</span>:<span class="hljs-number">30</span>)</li><li>at anonymous (home<span class="hljs-regexp">/src/</span>main<span class="hljs-regexp">/ets/</span>pages<span class="hljs-operator">/</span><span class="hljs-type">Index</span>.ets:<span class="hljs-number">23</span>:<span class="hljs-number">40</span>)</li></ol></pre></div></div></li>      </ol></li>    </ol>    <p id="ZH-CN_TOPIC_0000002478334372__p140104417365"></p>   </div>   <div></div></div>