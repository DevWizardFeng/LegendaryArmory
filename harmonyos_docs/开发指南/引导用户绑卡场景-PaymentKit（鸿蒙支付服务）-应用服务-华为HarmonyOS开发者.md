<h1 _ngcontent-ltv-c119="" class="doc-title ng-star-inserted" title="引导用户绑卡场景"> 引导用户绑卡场景 </h1>

<div _ngcontent-ltv-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section1880231055910">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section1880231055910" tips="复制节点链接"></i></h2>          <p>从5.0.5(17)版本开始，新增支持引导用户绑卡场景。</p>     <p>支持拉起绑卡页面，配合商户营销活动场景更好引导用户绑卡。例如商户针对银行卡开展某营销活动，需要引导用户拉起绑卡页面完成银行卡绑定。</p>     <p>支持商户模型：直连商户、平台类商户、服务商</p>     <p>引导用户绑卡页面展示：</p>     <div class="tablenoborder">      <div class="tbBox"><table style="border-style: none;" class="layoutFixed idpTab">               <tbody><tr>         <td align="center" class="nocellnorowborder" style="border: none;" valign="top" width="33.239999999999995%">          <p><span><img height="425.6" originheight="1026" originwidth="494" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114526.77628326789306325681137338770458:50001231000000:2800:6CBB27DF75B233839C23B5213BCAE8F0C59C7031825A90DA95D05D58AB877312.png" title="点击放大" width="206.2032"></span></p></td>         <td align="center" class="nocellnorowborder" style="border: none;" valign="top" width="34.03%">          <p><span><img height="425.6" originheight="1026" originwidth="494" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114526.34204056160911265655510476766533:50001231000000:2800:407DA4A33737F7FAD39D822AEF3DB3B18498EDBA9C5B118C9848F2F9FF75B3D7.png" title="点击放大" width="206.2032"></span></p></td>         <td align="center" class="cell-norowborder" style="border: none;" valign="top" width="32.73%">          <p><span><img height="425.6" originheight="1026" originwidth="494" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114526.29014089670894434734899603809800:50001231000000:2800:545C633AFFAB26EEDA9EA4C7A804A9F4428BA70091952C34C459B975B67B973D.png" title="点击放大" width="206.2032"></span></p></td>        </tr>        <tr>         <td align="center" class="row-nocellborder" style="border: none;" valign="top" width="33.239999999999995%">          <p>绑卡页面</p></td>         <td align="center" class="row-nocellborder" style="border: none;" valign="top" width="34.03%">          <p>绑卡完成页面</p></td>         <td align="center" class="cellrowborder" style="border: none;" valign="top" width="32.73%">          <p>用户已绑卡页面</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section167197586468">提供绑卡跳转应用信息<i class="anchor-icon anchor-icon-link" anchorid="section167197586468" tips="复制节点链接"></i></h2>          <p>开发者需与华为支付业务侧沟通（合作咨询可<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/payment-service-support">点击此处</a>）后提供以下应用信息：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.3.1.4.1.1" valign="top" width="13.780000000000001%">          <p>应用信息</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.2.3.1.4.1.2" valign="top" width="9.41%">          <p>是否必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.2.3.1.4.1.3" valign="top" width="76.81%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="13.780000000000001%">          <p>AppID</p></td>         <td class="cellrowborder" valign="top" width="9.41%">          <p>是</p></td>         <td class="cellrowborder" valign="top" width="76.81%">          <p>应用的AppID（在<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>网站点击“开发与服务”，在项目列表中找到项目，在“项目设置 &gt; 常规”页面的“应用”区域获取“APP ID”的值）。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1818915573916">业务流程<i class="anchor-icon anchor-icon-link" anchorid="section1818915573916" tips="复制节点链接"></i></h2>          <p>开发者接入引导用户绑卡，具体接入流程如下：</p>     <p><span><img height="434.1377777777778" originheight="470" originwidth="996" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114526.18286310812824298214119050232997:50001231000000:2800:45F66B26D00452A18AB1C62A0EB1F22EE1DCF7C7C998A589D4947FF249FFD57A.png" title="点击放大" width="920"></span></p>     <p>1. 商户客户端调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/payment-paymentservice#section645562616313" target="_blank">requestBindCard</a>接口拉起用户绑卡页面。</p>     <p>2. Payment Kit客户端展示绑卡页面，商户客户端可根据用户不同处理场景完成后续流程。</p>    </div>    <p><strong>场景1：用户取消绑卡</strong></p>    <p>3. 用户返回或取消绑卡。</p>    <p>4. Payment Kit客户端返回商户客户端并将绑卡结果一并返回，商户客户端根据绑卡结果完成后续业务处理。</p>    <p><strong>场景2：用户完成绑卡</strong></p>    <p>3. 用户通过绑卡页面完成绑卡操作，Payment Kit客户端会请求Payment Kit服务端处理绑卡。</p>    <p>4. Payment Kit服务端处理绑卡。</p>    <p>5. Payment Kit服务端将绑卡结果返回给Payment Kit客户端。</p>    <p>6. Payment Kit客户端展示绑卡结果页面。</p>    <p>7. 用户关闭绑卡页后Payment Kit客户端返回商户客户端并将绑卡结果一并返回。</p>    <p>8. 商户客户端根据绑卡结果完成后续业务处理。</p>    <div class="tiledSection">     <h2 id="section5906121818412">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section5906121818412" tips="复制节点链接"></i></h2>          <p>拉起用户绑卡页面接口。具体API说明详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/payment-paymentservice#section645562616313" target="_blank">接口文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.3.1.3.1.1" valign="top" width="50%">          <p>接口名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.3.1.3.1.2" valign="top" width="50%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">          <p>requestBindCard(context: common.UIAbilityContext | common.UIExtensionContext): Promise&lt;BindCardResult&gt;</p></td>         <td class="cellrowborder" valign="top" width="50%">          <p>拉起用户绑卡页面。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section9187179113620">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section9187179113620" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section14434121419277" class="firsth2">拉起绑卡页面（端侧开发）<i class="anchor-icon anchor-icon-link" anchorid="section14434121419277" tips="复制节点链接"></i></h3>          <p>商户客户端调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/payment-paymentservice#section645562616313" target="_blank">requestBindCard</a>接口拉起用户绑卡页面。</p>     <p>当接口通过.then()方法返回结果，则表示接口请求成功，通过.catch()方法返回异常表示请求失败。当此次请求有异常时，可通过<strong>error.code</strong>获取错误码，错误码相关信息请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/payment-error-code" target="_blank">错误码</a>。</p>     <p>示例代码如下：</p>     <div _ngcontent-ltv-c106="" class="highlight-div"><div _ngcontent-ltv-c106="" class="highlight-div-header"><div _ngcontent-ltv-c106="" class="highlight-div-header-left"><div _ngcontent-ltv-c106="" class="handle-button expand-button"><div _ngcontent-ltv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ltv-c106="" class="highlight-div-header-right"><div _ngcontent-ltv-c106="" class="handle-button ai-button"></div><div _ngcontent-ltv-c106="" class="handle-button line-button"><div _ngcontent-ltv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ltv-c106="" class="handle-button theme-button"><div _ngcontent-ltv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ltv-c106="" class="handle-button copy-button"><div _ngcontent-ltv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ltv-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { paymentService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PaymentKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">context</span>: common.<span class="hljs-property">UIAbilityContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>  <span class="hljs-title function_">requestBindCardPromise</span>(<span class="hljs-params"></span>) {</li><li>    paymentService.<span class="hljs-title function_">requestBindCard</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>)</li><li>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">bindCardResult: paymentService.BindCardResult</span>) =&gt;</span> {</li><li>        <span class="hljs-comment">// succeeded in bind card</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'succeeded in binding card'</span>);</li><li>      })</li><li>      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-comment">// failed to bind card</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`failed to binding card, error.code: <span class="hljs-subst">${error.code}</span>, error.message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      });</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'requestBindCardPromise'</span>)</li><li>        .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'50%'</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">requestBindCardPromise</span>();</li><li>        })</li><li>      }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>