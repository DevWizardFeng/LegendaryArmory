<h1 _ngcontent-bsp-c119="" class="doc-title ng-star-inserted" title="弹出框控制器"> 弹出框控制器 </h1>

<div _ngcontent-bsp-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>ArkUI的弹出框控制器在绑定弹出框后，可提供对弹出框的操作能力，当前支持关闭功能。可以将控制器传入弹出框内容区域后进行操作。</p>    <p>从API version 18开始，可设置controller参数以绑定<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction#dialogcontroller18" target="_blank">DialogController</a>控制器，通过控制器能够操作弹出框。</p>    <div class="tiledSection">     <h2 id="使用约束">使用约束<i class="anchor-icon anchor-icon-link" anchorid="使用约束" tips="复制节点链接"></i></h2>          <p>目前<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction#opencustomdialogwithcontroller18" target="_blank">openCustomDialogWithController</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction#presentcustomdialog18" target="_blank">presentCustomDialog</a>支持通过controller参数来绑定弹出框进行操作，目前<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-custom-component-api#getdialogcontroller18" target="_blank">getDialogController</a>支持获取自定义组件所在的弹出框的控制器。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>一个弹出框控制器只能绑定一个弹出框，且操作只对该弹出框生效。</p>       <p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-custom-component-api#getdialogcontroller18" target="_blank">getDialogController</a>获取弹出框控制器时，如果当前自定义组件不在弹出框中显示则获取为undefined。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="创建自定义内容为componentcontent的弹出框控制器">创建自定义内容为ComponentContent的弹出框控制器<i class="anchor-icon anchor-icon-link" anchorid="创建自定义内容为componentcontent的弹出框控制器" tips="复制节点链接"></i></h2>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>详细变量定义请参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-dialog-controller#完整示例">完整示例</a>。</p>      </div></div></div>     <ol>      <li>       <p>初始化一个自定义弹出框内容区的入参类，内部包含弹出框控制器。</p>       <div _ngcontent-bsp-c106="" class="highlight-div"><div _ngcontent-bsp-c106="" class="highlight-div-header"><div _ngcontent-bsp-c106="" class="highlight-div-header-left"><div _ngcontent-bsp-c106="" class="handle-button expand-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bsp-c106="" class="highlight-div-header-right"><div _ngcontent-bsp-c106="" class="handle-button ai-button"></div><div _ngcontent-bsp-c106="" class="handle-button line-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bsp-c106="" class="handle-button theme-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bsp-c106="" class="handle-button copy-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bsp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Params</span> {</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span></li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">dialogController</span>: promptAction.<span class="hljs-property">CommonController</span> = <span class="hljs-keyword">new</span> promptAction.<span class="hljs-title class_">DialogController</span>()</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span>, dialogController: promptAction.CommonController</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = text</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> = dialogController</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>初始化一个自定义的弹出框内容区，内部包含一个按钮，该按钮通过该自定义组件自带的弹出框控制器实现关闭功能。</p>       <div _ngcontent-bsp-c106="" class="highlight-div"><div _ngcontent-bsp-c106="" class="highlight-div-header"><div _ngcontent-bsp-c106="" class="highlight-div-header-left"><div _ngcontent-bsp-c106="" class="handle-button expand-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bsp-c106="" class="highlight-div-header-right"><div _ngcontent-bsp-c106="" class="handle-button ai-button"></div><div _ngcontent-bsp-c106="" class="handle-button line-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bsp-c106="" class="handle-button theme-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bsp-c106="" class="handle-button copy-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bsp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">MyComponent</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我关闭弹窗：通过自定义组件自带的DialogController'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">dialogController</span>: promptAction.<span class="hljs-property">DialogController</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDialogController</span>()</li><li>          <span class="hljs-keyword">if</span> (dialogController !== <span class="hljs-literal">undefined</span>) {</li><li>            dialogController.<span class="hljs-title function_">close</span>()</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>初始化另一自定义弹出框内容区，其中包含一个Text组件和一个按钮，该按钮通过外部传递的弹出框控制器用于关闭弹出框，并且该内容区还包含前一个自定义弹出框内容区。</p>       <div _ngcontent-bsp-c106="" class="highlight-div"><div _ngcontent-bsp-c106="" class="highlight-div-header"><div _ngcontent-bsp-c106="" class="highlight-div-header-left"><div _ngcontent-bsp-c106="" class="handle-button expand-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bsp-c106="" class="highlight-div-header-right"><div _ngcontent-bsp-c106="" class="handle-button ai-button"></div><div _ngcontent-bsp-c106="" class="handle-button line-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bsp-c106="" class="handle-button theme-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bsp-c106="" class="handle-button copy-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bsp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">buildText</span>(<span class="hljs-params">params: Params</span>) {</li><li>  <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>    <span class="hljs-title class_">Text</span>(params.<span class="hljs-property">text</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>    <span class="hljs-keyword">if</span> (params.<span class="hljs-property">dialogController</span> !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我关闭弹窗：通过外部传递的DialogController'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          params.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">close</span>()</li><li>        })</li><li>    }</li><li>    <span class="hljs-title class_">MyComponent</span>()</li><li>  }</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>  .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFF0F0F0'</span>)</li><li>}</li></ol></pre></div></div></li>      <li>       <p>初始化一个弹出框控制器，并通过设置控制器参数来初始化一个弹出框内容实体对象。最后，通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext" target="_blank">UIContext</a>中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext#getpromptaction" target="_blank">getPromptAction</a>方法获取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction" target="_blank">PromptAction</a>对象，再通过该对象调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction#opencustomdialogwithcontroller18" target="_blank">openCustomDialogWithController</a>接口，并且设置初始化的内容实体对象和控制器参数以创建弹出框。</p>       <div _ngcontent-bsp-c106="" class="highlight-div"><div _ngcontent-bsp-c106="" class="highlight-div-header"><div _ngcontent-bsp-c106="" class="highlight-div-header-left"><div _ngcontent-bsp-c106="" class="handle-button expand-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bsp-c106="" class="highlight-div-header-right"><div _ngcontent-bsp-c106="" class="handle-button ai-button"></div><div _ngcontent-bsp-c106="" class="handle-button line-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bsp-c106="" class="handle-button theme-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bsp-c106="" class="handle-button copy-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bsp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dialogController</span>: promptAction.<span class="hljs-property">CommonController</span> = <span class="hljs-keyword">new</span> promptAction.<span class="hljs-title class_">DialogController</span>()</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">contentNode</span>: <span class="hljs-title class_">ComponentContent</span>&lt;<span class="hljs-title class_">Object</span>&gt; =</li><li>  <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentContent</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>(), <span class="hljs-title function_">wrapBuilder</span>(buildText), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>, dialogController))</li><li><span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">openCustomDialogWithController</span>(</li><li>  contentNode, dialogController, <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseDialogOptions</span>).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'openCustomDialogWithController error: '</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">' '</span> + err.<span class="hljs-property">message</span>)</li><li>})</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="创建自定义内容为custombuilder的弹出框控制器">创建自定义内容为CustomBuilder的弹出框控制器<i class="anchor-icon anchor-icon-link" anchorid="创建自定义内容为custombuilder的弹出框控制器" tips="复制节点链接"></i></h2>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>详细变量定义请参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-dialog-controller#完整示例">完整示例</a>。</p>      </div></div></div>     <ol>      <li>       <p>初始化一个自定义弹出框内容区，内部包含一个Text组件和一个按钮，该按钮通过外部传递的弹出框控制器实现关闭功能。</p>       <div _ngcontent-bsp-c106="" class="highlight-div"><div _ngcontent-bsp-c106="" class="highlight-div-header"><div _ngcontent-bsp-c106="" class="highlight-div-header-left"><div _ngcontent-bsp-c106="" class="handle-button expand-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bsp-c106="" class="highlight-div-header-right"><div _ngcontent-bsp-c106="" class="handle-button ai-button"></div><div _ngcontent-bsp-c106="" class="handle-button line-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bsp-c106="" class="handle-button theme-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bsp-c106="" class="handle-button copy-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bsp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span> <span class="hljs-title function_">customDialogComponent</span>(<span class="hljs-params">dialogController: promptAction.DialogController</span>) {</li><li>  <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>    <span class="hljs-keyword">if</span> (dialogController !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击关闭弹窗：通过外部传递的DialogController'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          dialogController.<span class="hljs-title function_">close</span>()</li><li>        })</li><li>    }</li><li>  }</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>  .<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>)</li><li>  .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceBetween</span>)</li><li>  .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFF0F0F0'</span>)</li><li>}</li></ol></pre></div></div></li>      <li>       <p>初始化一个弹出框控制器，并通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext" target="_blank">UIContext</a>中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext#getpromptaction" target="_blank">getPromptAction</a>方法获取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction" target="_blank">PromptAction</a>对象，再通过该对象调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction#presentcustomdialog18" target="_blank">presentCustomDialog</a>接口，设置初始化的内容实体对象和控制器参数以创建弹出框。</p>       <div _ngcontent-bsp-c106="" class="highlight-div"><div _ngcontent-bsp-c106="" class="highlight-div-header"><div _ngcontent-bsp-c106="" class="highlight-div-header-left"><div _ngcontent-bsp-c106="" class="handle-button expand-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bsp-c106="" class="highlight-div-header-right"><div _ngcontent-bsp-c106="" class="handle-button ai-button"></div><div _ngcontent-bsp-c106="" class="handle-button line-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bsp-c106="" class="handle-button theme-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bsp-c106="" class="handle-button copy-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bsp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dialogController</span>: promptAction.<span class="hljs-property">CommonController</span> = <span class="hljs-keyword">new</span> promptAction.<span class="hljs-title class_">DialogController</span>()</li><li><span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">presentCustomDialog</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customDialogComponent</span>(dialogController)</li><li>}, dialogController, <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogOptions</span>).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'presentCustomDialog error: '</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">' '</span> + err.<span class="hljs-property">message</span>)</li><li>})</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="创建自定义内容为custombuilderwithid的弹出框控制器">创建自定义内容为CustomBuilderWithId的弹出框控制器<i class="anchor-icon anchor-icon-link" anchorid="创建自定义内容为custombuilderwithid的弹出框控制器" tips="复制节点链接"></i></h2>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>详细变量定义请参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-dialog-controller#完整示例">完整示例</a>。</p>      </div></div></div>     <ol>      <li>       <p>初始化一个弹出框内容区，内部包含一个Text组件、一个通过外部传递的弹出框ID用于关闭弹出框的按钮和一个通过外部传递的弹出框控制器用于关闭弹出框的按钮。</p>       <div _ngcontent-bsp-c106="" class="highlight-div"><div _ngcontent-bsp-c106="" class="highlight-div-header"><div _ngcontent-bsp-c106="" class="highlight-div-header-left"><div _ngcontent-bsp-c106="" class="handle-button expand-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bsp-c106="" class="highlight-div-header-right"><div _ngcontent-bsp-c106="" class="handle-button ai-button"></div><div _ngcontent-bsp-c106="" class="handle-button line-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bsp-c106="" class="handle-button theme-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bsp-c106="" class="handle-button copy-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bsp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span> <span class="hljs-title function_">customDialogComponentWithId</span>(<span class="hljs-params">dialogId: <span class="hljs-built_in">number</span>, dialogController: promptAction.DialogController</span>) {</li><li>  <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>    <span class="hljs-keyword">if</span> (dialogId !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击关闭弹窗：通过DialogID'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">closeCustomDialog</span>(dialogId)</li><li>        })</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (dialogController !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击关闭弹窗：通过外部传递的DialogController'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          dialogController.<span class="hljs-title function_">close</span>()</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>初始化一个弹出框控制器，并通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext" target="_blank">UIContext</a>中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext#getpromptaction" target="_blank">getPromptAction</a>方法获取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction" target="_blank">PromptAction</a>对象，再通过该对象调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction#presentcustomdialog18" target="_blank">presentCustomDialog</a>接口，设置初始化的内容实体对象和控制器参数以创建弹出框。</p>       <div _ngcontent-bsp-c106="" class="highlight-div"><div _ngcontent-bsp-c106="" class="highlight-div-header"><div _ngcontent-bsp-c106="" class="highlight-div-header-left"><div _ngcontent-bsp-c106="" class="handle-button expand-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bsp-c106="" class="highlight-div-header-right"><div _ngcontent-bsp-c106="" class="handle-button ai-button"></div><div _ngcontent-bsp-c106="" class="handle-button line-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bsp-c106="" class="handle-button theme-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bsp-c106="" class="handle-button copy-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bsp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dialogController</span>: promptAction.<span class="hljs-property">CommonController</span> = <span class="hljs-keyword">new</span> promptAction.<span class="hljs-title class_">DialogController</span>()</li><li><span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">presentCustomDialog</span>(<span class="hljs-function">(<span class="hljs-params">dialogId: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customDialogComponentWithId</span>(dialogId, dialogController)</li><li>}, dialogController, <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogOptions</span>).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'presentCustomDialog error: '</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">' '</span> + err.<span class="hljs-property">message</span>)</li><li>})</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="在customdialogcontroller内容区直接获取弹出框控制器">在CustomDialogController内容区直接获取弹出框控制器<i class="anchor-icon anchor-icon-link" anchorid="在customdialogcontroller内容区直接获取弹出框控制器" tips="复制节点链接"></i></h2>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>详细变量定义请参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-dialog-controller#完整示例">完整示例</a>。</p>      </div></div></div>     <ol>      <li>       <p>初始化一个自定义弹出框内容区，内部包含一个Text组件和一个按钮，该按钮通过弹出框控制器关闭弹出框。</p>       <div _ngcontent-bsp-c106="" class="highlight-div"><div _ngcontent-bsp-c106="" class="highlight-div-header"><div _ngcontent-bsp-c106="" class="highlight-div-header-left"><div _ngcontent-bsp-c106="" class="handle-button expand-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bsp-c106="" class="highlight-div-header-right"><div _ngcontent-bsp-c106="" class="handle-button ai-button"></div><div _ngcontent-bsp-c106="" class="handle-button line-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bsp-c106="" class="handle-button theme-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bsp-c106="" class="handle-button copy-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bsp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@CustomDialog</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogExample</span> {</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'我是内容'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我关闭弹窗：通过自定义组件自带的DialogController'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">PromptActionDialogController</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDialogController</span>()</li><li>          <span class="hljs-keyword">if</span> (dialogController !== <span class="hljs-literal">undefined</span>) {</li><li>            dialogController.<span class="hljs-title function_">close</span>()</li><li>          }</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFF0F0F0'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>初始化一个自定义弹出框构造器，关联自定义弹出框内容区。</p>       <div _ngcontent-bsp-c106="" class="highlight-div"><div _ngcontent-bsp-c106="" class="highlight-div-header"><div _ngcontent-bsp-c106="" class="highlight-div-header-left"><div _ngcontent-bsp-c106="" class="handle-button expand-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bsp-c106="" class="highlight-div-header-right"><div _ngcontent-bsp-c106="" class="handle-button ai-button"></div><div _ngcontent-bsp-c106="" class="handle-button line-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bsp-c106="" class="handle-button theme-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bsp-c106="" class="handle-button copy-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bsp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">customDialogController</span>: <span class="hljs-title class_">CustomDialogController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>  <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomDialogExample</span>(),</li><li>})</li><li>customDialogController.<span class="hljs-title function_">open</span>()</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="使用控制器获取弹出框的状态">使用控制器获取弹出框的状态<i class="anchor-icon anchor-icon-link" anchorid="使用控制器获取弹出框的状态" tips="复制节点链接"></i></h2>          <p>在自定义弹出框场景中，从API version 20 开始，可以通过控制器调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction#getstate20" target="_blank">getState</a>接口获取弹出框状态。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>详细变量定义请参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-dialog-controller#完整示例">完整示例</a>。</p>      </div></div></div>     <p>初始化一个自定义弹出框内容区，内部包含一个Text组件和一个按钮，该按钮通过调用getState获取当前弹出框状态。</p>     <div _ngcontent-bsp-c106="" class="highlight-div"><div _ngcontent-bsp-c106="" class="highlight-div-header"><div _ngcontent-bsp-c106="" class="highlight-div-header-left"><div _ngcontent-bsp-c106="" class="handle-button expand-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bsp-c106="" class="highlight-div-header-right"><div _ngcontent-bsp-c106="" class="handle-button ai-button"></div><div _ngcontent-bsp-c106="" class="handle-button line-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bsp-c106="" class="handle-button theme-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bsp-c106="" class="handle-button copy-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bsp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span> <span class="hljs-title function_">customDialogComponent</span>(<span class="hljs-params">dialogController: promptAction.DialogController</span>) {</li><li>  <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>    <span class="hljs-keyword">if</span> (dialogController !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我查询弹窗状态'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'state:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">getState</span>())</li><li>        })</li><li>    }</li><li>  }</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>  .<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>)</li><li>  .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceBetween</span>)</li><li>  .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFF0F0F0'</span>)</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="完整示例">完整示例<i class="anchor-icon anchor-icon-link" anchorid="完整示例" tips="复制节点链接"></i></h2>          <p>通过外部传递的弹出框控制器和自定义组件自带的弹出框控制器，在自定义弹出框内容区域内实现关闭功能。</p>     <div _ngcontent-bsp-c106="" class="highlight-div"><div _ngcontent-bsp-c106="" class="highlight-div-header"><div _ngcontent-bsp-c106="" class="highlight-div-header-left"><div _ngcontent-bsp-c106="" class="handle-button expand-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bsp-c106="" class="highlight-div-header-right"><div _ngcontent-bsp-c106="" class="handle-button ai-button"></div><div _ngcontent-bsp-c106="" class="handle-button line-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bsp-c106="" class="handle-button theme-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bsp-c106="" class="handle-button copy-button"><div _ngcontent-bsp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bsp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentContent</span>, promptAction } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span></li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Params</span> {</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span></li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">dialogController</span>: promptAction.<span class="hljs-property">CommonController</span> = <span class="hljs-keyword">new</span> promptAction.<span class="hljs-title class_">DialogController</span>()</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span>, dialogController: promptAction.CommonController</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = text</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogController</span> = dialogController</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">MyComponent</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我关闭弹窗：通过自定义组件自带的DialogController'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">dialogController</span>: promptAction.<span class="hljs-property">DialogController</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDialogController</span>()</li><li>          <span class="hljs-keyword">if</span> (dialogController !== <span class="hljs-literal">undefined</span>) {</li><li>            dialogController.<span class="hljs-title function_">close</span>()</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">buildText</span>(<span class="hljs-params">params: Params</span>) {</li><li>  <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>    <span class="hljs-title class_">Text</span>(params.<span class="hljs-property">text</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>    <span class="hljs-keyword">if</span> (params.<span class="hljs-property">dialogController</span> !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我关闭弹窗：通过外部传递的DialogController'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          params.<span class="hljs-property">dialogController</span>.<span class="hljs-title function_">close</span>()</li><li>        })</li><li>    }</li><li>    <span class="hljs-title class_">MyComponent</span>()</li><li>  }</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>  .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFF0F0F0'</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@CustomDialog</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CustomDialogExample</span> {</li><li>  controller?: <span class="hljs-title class_">CustomDialogController</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'我是内容'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点我关闭弹窗：通过自定义组件自带的DialogController'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">dialogController</span>: <span class="hljs-title class_">PromptActionDialogController</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDialogController</span>()</li><li>          <span class="hljs-keyword">if</span> (dialogController !== <span class="hljs-literal">undefined</span>) {</li><li>            dialogController.<span class="hljs-title function_">close</span>()</li><li>          }</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFF0F0F0'</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> message = <span class="hljs-string">'弹窗'</span></li><li>  <span class="hljs-meta">@Builder</span> <span class="hljs-title function_">customDialogComponent</span>(<span class="hljs-params">dialogController: promptAction.DialogController</span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      <span class="hljs-keyword">if</span> (dialogController !== <span class="hljs-literal">undefined</span>) {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击关闭弹窗：通过外部传递的DialogController'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            dialogController.<span class="hljs-title function_">close</span>()</li><li>          })</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>    .<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceBetween</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFF0F0F0'</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span> <span class="hljs-title function_">customDialogComponentWithId</span>(<span class="hljs-params">dialogId: <span class="hljs-built_in">number</span>, dialogController: promptAction.DialogController</span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      <span class="hljs-keyword">if</span> (dialogId !== <span class="hljs-literal">undefined</span>) {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击关闭弹窗：通过DialogID'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">closeCustomDialog</span>(dialogId)</li><li>          })</li><li>      }</li><li>      <span class="hljs-keyword">if</span> (dialogController !== <span class="hljs-literal">undefined</span>) {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'点击关闭弹窗：通过外部传递的DialogController'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            dialogController.<span class="hljs-title function_">close</span>()</li><li>          })</li><li>      }</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">baseDialogOptions</span>: promptAction.<span class="hljs-property">BaseDialogOptions</span> = {</li><li>    <span class="hljs-attr">isModal</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">false</span></li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">dialogOptions</span>: promptAction.<span class="hljs-property">DialogOptions</span> = {</li><li>    <span class="hljs-attr">isModal</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">false</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'openCustomDialogWithController弹窗'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">dialogController</span>: promptAction.<span class="hljs-property">CommonController</span> = <span class="hljs-keyword">new</span> promptAction.<span class="hljs-title class_">DialogController</span>()</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">contentNode</span>: <span class="hljs-title class_">ComponentContent</span>&lt;<span class="hljs-title class_">Object</span>&gt; =</li><li>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentContent</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>(), <span class="hljs-title function_">wrapBuilder</span>(buildText), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>, dialogController))</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">openCustomDialogWithController</span>(</li><li>            contentNode, dialogController, <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseDialogOptions</span>).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'openCustomDialogWithController error: '</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">' '</span> + err.<span class="hljs-property">message</span>)</li><li>          })</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'presentCustomDialog+CustomBuilder弹窗'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">dialogController</span>: promptAction.<span class="hljs-property">CommonController</span> = <span class="hljs-keyword">new</span> promptAction.<span class="hljs-title class_">DialogController</span>()</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">presentCustomDialog</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customDialogComponent</span>(dialogController)</li><li>          }, dialogController, <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogOptions</span>).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'presentCustomDialog error: '</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">' '</span> + err.<span class="hljs-property">message</span>)</li><li>          })</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'presentCustomDialog+CustomBuilderWithId弹窗'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">dialogController</span>: promptAction.<span class="hljs-property">CommonController</span> = <span class="hljs-keyword">new</span> promptAction.<span class="hljs-title class_">DialogController</span>()</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">presentCustomDialog</span>(<span class="hljs-function">(<span class="hljs-params">dialogId: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customDialogComponentWithId</span>(dialogId, dialogController)</li><li>          }, dialogController, <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogOptions</span>).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'presentCustomDialog error: '</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">' '</span> + err.<span class="hljs-property">message</span>)</li><li>          })</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'CustomDialogController弹窗'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">customDialogController</span>: <span class="hljs-title class_">CustomDialogController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDialogController</span>({</li><li>            <span class="hljs-attr">builder</span>: <span class="hljs-title class_">CustomDialogExample</span>(),</li><li>          })</li><li>          customDialogController.<span class="hljs-title function_">open</span>()</li><li>        })</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="666" originwidth="425" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114947.71859454501668013453318506142764:50001231000000:2800:66F332812466242AE44E313B1A9012E873E53ED8A1D1FC7D2A021822DA3E9D52.gif" width="425" height="666"></span></p>    </div>   </div>   <div></div></div>