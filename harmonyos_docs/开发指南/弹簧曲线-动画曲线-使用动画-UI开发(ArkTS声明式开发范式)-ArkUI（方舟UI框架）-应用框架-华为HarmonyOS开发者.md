<h1 _ngcontent-bcc-c119="" class="doc-title ng-star-inserted" title="弹簧曲线"> 弹簧曲线 </h1>

<div _ngcontent-bcc-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>阻尼弹簧曲线（以下简称弹簧曲线）对应的阻尼弹簧系统中，偏离平衡位置的物体一方面受到弹簧形变产生的反向作用力，被迫发生振动。另一方面，阻尼的存在为物体振动提供阻力。除阻尼为0的特殊情况，物体在振动过程中振幅不断减小，且最终趋于0，其轨迹对应的动画曲线自然连续。</p>    <p>采用弹簧曲线的动画在达终点时动画速度为0，不会产生动画“戛然而止”的观感，以避免影响用户体验。</p>    <p>ArkUI提供了四种阻尼弹簧曲线接口。</p>    <ul>     <li>      <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-curve#curvesspringmotion9" target="_blank">curves.springMotion</a>：创建弹性动画，动画时长由曲线参数、属性变化值大小和弹簧初速度自动计算，开发者指定的动画时长不生效。</p>      <p>springMotion不提供速度设置接口，速度通过继承获得，无需开发者指定。对于某个属性，如果当前存在正在运行的springMotion或者responsiveSpringMotion类型动画，新创建的弹簧动画将停止正在运行的动画，并继承其当前时刻的动画属性值和速度作为新建动画的初始状态。此外，接口提供默认参数，便于开发者直接使用。</p>      <div _ngcontent-bcc-c106="" class="highlight-div"><div _ngcontent-bcc-c106="" class="highlight-div-header"><div _ngcontent-bcc-c106="" class="highlight-div-header-left"><div _ngcontent-bcc-c106="" class="handle-button expand-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bcc-c106="" class="highlight-div-header-right"><div _ngcontent-bcc-c106="" class="handle-button ai-button"></div><div _ngcontent-bcc-c106="" class="handle-button line-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bcc-c106="" class="handle-button theme-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bcc-c106="" class="handle-button copy-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bcc-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">springMotion</span>(<span class="hljs-params">response?: <span class="hljs-built_in">number</span>, dampingFraction?: <span class="hljs-built_in">number</span>, overlapDuration?: <span class="hljs-built_in">number</span></span>): <span class="hljs-title class_">ICurve</span>;</li></ol></pre></div></div></li>     <li>      <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-curve#curvesresponsivespringmotion9" target="_blank">curves.responsiveSpringMotion</a>：是springMotion动画的一种特例，仅默认参数不同。一般用于跟手做成动画的场景，离手时可用springMotion创建动画，此时离手阶段动画将自动继承跟手阶段动画速度，完成动画衔接。</p>      <p>当新动画的overlapDuration参数不为0，且当前属性的上一个springMotion动画还未结束时，response和dampingFraction将在overlapDuration指定的时间内，从旧动画的参数值过渡到新动画的参数值。</p>      <div _ngcontent-bcc-c106="" class="highlight-div"><div _ngcontent-bcc-c106="" class="highlight-div-header"><div _ngcontent-bcc-c106="" class="highlight-div-header-left"><div _ngcontent-bcc-c106="" class="handle-button expand-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bcc-c106="" class="highlight-div-header-right"><div _ngcontent-bcc-c106="" class="handle-button ai-button"></div><div _ngcontent-bcc-c106="" class="handle-button line-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bcc-c106="" class="handle-button theme-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bcc-c106="" class="handle-button copy-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bcc-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">responsiveSpringMotion</span>(<span class="hljs-params">response?: <span class="hljs-built_in">number</span>, dampingFraction?: <span class="hljs-built_in">number</span>, overlapDuration?: <span class="hljs-built_in">number</span></span>): <span class="hljs-title class_">ICurve</span>;</li></ol></pre></div></div></li>     <li>      <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-curve#curvesinterpolatingspring10" target="_blank">curves.interpolatingSpring</a>：适合于需要指定初速度的动效场景，动画时长同样由接口参数自动计算，开发者在动画接口中指定的时长不生效。</p>      <p>曲线接口提供速度入参，且由于接口对应一条从0到1的阻尼弹簧曲线，实际动画值根据曲线进行插值计算。所以速度也应该为归一化速度，其值等于动画属性改变的绝对速度除以动画属性改变量。因此不适合于动画起点属性值和终点属性值相同的场景，此时动画属性改变量为0，归一化速度不存在。</p>      <div _ngcontent-bcc-c106="" class="highlight-div"><div _ngcontent-bcc-c106="" class="highlight-div-header"><div _ngcontent-bcc-c106="" class="highlight-div-header-left"><div _ngcontent-bcc-c106="" class="handle-button expand-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bcc-c106="" class="highlight-div-header-right"><div _ngcontent-bcc-c106="" class="handle-button ai-button"></div><div _ngcontent-bcc-c106="" class="handle-button line-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bcc-c106="" class="handle-button theme-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bcc-c106="" class="handle-button copy-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bcc-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">interpolatingSpring</span>(<span class="hljs-params">velocity: <span class="hljs-built_in">number</span>, mass: <span class="hljs-built_in">number</span>, stiffness: <span class="hljs-built_in">number</span>, damping: <span class="hljs-built_in">number</span></span>): <span class="hljs-title class_">ICurve</span>;</li></ol></pre></div></div></li>     <li>      <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-curve#curvesspringcurve9" target="_blank">curves.springCurve</a>：适合于需要直接指定动画时长的场景。springCurve接口与interpolatingSpring接口几乎一致，但是对于采用springCurve的动画，会将曲线的物理时长映射到指定的时长，相当于在时间轴上拉伸或压缩曲线，破坏曲线原本的物理规律，因此不建议开发者使用。</p>      <div _ngcontent-bcc-c106="" class="highlight-div"><div _ngcontent-bcc-c106="" class="highlight-div-header"><div _ngcontent-bcc-c106="" class="highlight-div-header-left"><div _ngcontent-bcc-c106="" class="handle-button expand-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bcc-c106="" class="highlight-div-header-right"><div _ngcontent-bcc-c106="" class="handle-button ai-button"></div><div _ngcontent-bcc-c106="" class="handle-button line-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bcc-c106="" class="handle-button theme-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bcc-c106="" class="handle-button copy-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bcc-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">springCurve</span>(<span class="hljs-params">velocity: <span class="hljs-built_in">number</span>, mass: <span class="hljs-built_in">number</span>, stiffness: <span class="hljs-built_in">number</span>, damping: <span class="hljs-built_in">number</span></span>): <span class="hljs-title class_">ICurve</span>;</li></ol></pre></div></div></li>    </ul>    <p>关于弹簧曲线完整的使用示例和参考效果如下，开发者也可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-animation-smoothing">动画衔接</a>，掌握使用responsiveSpringMotion和springMotion进行手势和动画之间的衔接。</p>    <p>弹簧曲线的示例代码和效果如下。</p>    <div _ngcontent-bcc-c106="" class="highlight-div"><div _ngcontent-bcc-c106="" class="highlight-div-header"><div _ngcontent-bcc-c106="" class="highlight-div-header-left"><div _ngcontent-bcc-c106="" class="handle-button expand-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bcc-c106="" class="highlight-div-header-right"><div _ngcontent-bcc-c106="" class="handle-button ai-button"></div><div _ngcontent-bcc-c106="" class="handle-button line-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bcc-c106="" class="handle-button theme-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bcc-c106="" class="handle-button copy-button"><div _ngcontent-bcc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bcc-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { curves } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Spring</span> {</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">subTitle</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">iCurve</span>: <span class="hljs-title class_">ICurve</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">title: <span class="hljs-built_in">string</span>, subTitle: <span class="hljs-built_in">string</span>, iCurve: ICurve</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = title;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">iCurve</span> = iCurve;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subTitle</span> = subTitle;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 弹簧组件</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Motion</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">dRotate</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">subTitle</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">iCurve</span>: <span class="hljs-title class_">ICurve</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Circle</span>()</li><li>        .<span class="hljs-title function_">translate</span>({ <span class="hljs-attr">y</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">dRotate</span> })</li><li>        .<span class="hljs-title function_">animation</span>({ <span class="hljs-attr">curve</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">iCurve</span>, <span class="hljs-attr">iterations</span>: -<span class="hljs-number">1</span> })</li><li>        .<span class="hljs-title function_">foregroundColor</span>(<span class="hljs-string">'#317AF7'</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">30</span>)</li><li>
</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">30</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">subTitle</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-number">0xcccccc</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">50</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">borderWidth</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">1</span> })</li><li>      .<span class="hljs-title function_">borderColor</span>(<span class="hljs-number">0xf5f5f5</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">80</span>)</li><li>      .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>
</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">110</span>)</li><li>    .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">5</span> })</li><li>    .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">SpringCurve</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">dRotate</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">springs</span>: <span class="hljs-title class_">Spring</span>[] = [</li><li>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Spring</span>(<span class="hljs-string">'springMotion'</span>, <span class="hljs-string">'周期1, 阻尼0.25'</span>, curves.<span class="hljs-title function_">springMotion</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0.25</span>)),</li><li>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Spring</span>(<span class="hljs-string">'responsive'</span> + <span class="hljs-string">'\n'</span> + <span class="hljs-string">'SpringMotion'</span>, <span class="hljs-string">'弹性跟手曲线'</span>, curves.<span class="hljs-title function_">responsiveSpringMotion</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0.25</span>)),</li><li>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Spring</span>(<span class="hljs-string">'interpolating'</span> + <span class="hljs-string">'\n'</span> + <span class="hljs-string">'Spring'</span>, <span class="hljs-string">'初始速度10，质量1， 刚度228， 阻尼30'</span>,</li><li>      curves.<span class="hljs-title function_">interpolatingSpring</span>(<span class="hljs-number">10</span>, <span class="hljs-number">1</span>, <span class="hljs-number">228</span>, <span class="hljs-number">30</span>)),</li><li>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Spring</span>(<span class="hljs-string">'springCurve'</span>, <span class="hljs-string">'初始速度10， 质量1， 刚度228， 阻尼30'</span>, curves.<span class="hljs-title function_">springCurve</span>(<span class="hljs-number">10</span>, <span class="hljs-number">1</span>, <span class="hljs-number">228</span>, <span class="hljs-number">30</span>))</li><li>  ];</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">springs</span>, <span class="hljs-function">(<span class="hljs-params">item: Spring</span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">Motion</span>({</li><li>          <span class="hljs-attr">title</span>: item.<span class="hljs-property">title</span>,</li><li>          <span class="hljs-attr">subTitle</span>: item.<span class="hljs-property">subTitle</span>,</li><li>          <span class="hljs-attr">iCurve</span>: item.<span class="hljs-property">iCurve</span>,</li><li>          <span class="hljs-attr">dRotate</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">dRotate</span></li><li>        })</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>    .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">VerticalAlign</span>.<span class="hljs-property">Bottom</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">437</span>)</li><li>    .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">20</span> })</li><li>    .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">dRotate</span> = -<span class="hljs-number">50</span>;</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    <p><span><img originheight="520" originwidth="520" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114926.22520024480559271284240630902945:50001231000000:2800:1DA04DE888CEC9FD12C01B2A5FDE5261AFE511E3C34AB9752B51BF587677EB0E.gif" width="520" height="520"></span></p>   </div>   <div></div></div>