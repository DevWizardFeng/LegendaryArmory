<h1 _ngcontent-pgw-c119="" class="doc-title ng-star-inserted" title="录屏"> 录屏 </h1>

<div _ngcontent-pgw-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001966020953"><p id="ZH-CN_TOPIC_0000002510174531__p333271413176">在应用开发过程中，可以使用录屏功能录制应用的运行状态，并通过录屏文件向他人展示正在开发的应用的各种功能效果。</p> <div class="tiledSection"><h2 id="section1670335615558">使用约束<i class="anchor-icon anchor-icon-link" anchorid="section1670335615558" tips="复制节点链接"></i></h2><ul id="ZH-CN_TOPIC_0000002510174531__ul1140452775716"><li id="li27176422588">如果设置了锁屏密码，录屏开始前请解锁设备屏幕，锁屏状态下录屏应用无法正常拉起。</li><li id="li1374635105710">如果设置了锁屏密码，录屏时请保持设备的屏幕解锁状态，若录屏过程中锁屏将导致录屏应用退出。</li><li id="li164111210593">模拟器不支持录屏。</li></ul> </div> <div class="tiledSection"><h2 id="section10551192733713">通过DevEco Studio录屏<i class="anchor-icon anchor-icon-link" anchorid="section10551192733713" tips="复制节点链接"></i></h2><ol id="ZH-CN_TOPIC_0000002510174531__ol1436195913377"><li id="li136175916370"><span>连接真机设备，并在其中运行应用。</span></li><li id="li20216819123917"><span>在DevEco Studio底部切换到<strong>Log</strong>页签。</span></li><li id="li1919712134519"><span>点击左侧工具栏中<span><img height="14.900122999999999" originheight="18" originwidth="20" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104827.11838800269116805352058845834438:50001231000000:2800:A0F187B90A6498E214EFAA8266E07FC0B9E1C155B8D616B68A54A5868635AD7E.png" width="15.283296" class="IconPic notEnlarge"></span>，即可开始录屏。</span><p></p><p id="ZH-CN_TOPIC_0000002510174531__p8181743112"><span><img originheight="290" originwidth="586" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104827.46628412537602722891162641143400:50001231000000:2800:426AF3381918836E145C240D2B7F5D8717996523DE50885E9C0D1C623008B9F9.png" width="586" height="290"></span></p> <p></p></li><li id="li1878735534217"><span>录屏时，需要先选择录屏文件的保存路径，开发者可使用默认路径或<a href="/consumer/cn/doc/harmonyos-guides/ide-screen-recording#section89111791511">设置自定义路径</a>。</span><p></p><p id="ZH-CN_TOPIC_0000002510174531__p896612034713"><span><img originheight="430" originwidth="609" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104827.33871191780403773357990331608516:50001231000000:2800:8278F923CCCE49F8885464BE09AC8BDAA9500B29C0553F32A8C93E9F32545C23.png" width="609" height="430"></span></p> <p></p></li><li id="li5300194734610"><span>路径选择完毕后，点击<strong>Start Recording</strong>开始录屏。</span><p></p><p id="ZH-CN_TOPIC_0000002510174531__p1162715579504"><span><img height="181.483155" originheight="323" originwidth="670" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104827.91403338907084556210390384238669:50001231000000:2800:AECCFBC294B01CB9D49B5EBF5658E19C5DCCD6A78F69D447AC24E522E44CB6F9.png" title="点击放大" width="372.894494"></span></p> <p></p></li><li id="li524714469507"><span>录制完操作流程之后，点击<strong>Stop Recording</strong>结束录屏。</span><p></p><p id="ZH-CN_TOPIC_0000002510174531__p1152865375218"><span><img height="191.30055000000002" originheight="323" originwidth="672" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104827.94735917700568220011870945610545:50001231000000:2800:CB25E0B86E82A1D4847086D790F918FC5B6571B23733DFCE4CFC0376FE94CBEE.png" title="点击放大" width="380.0475"></span></p> <p></p></li><li id="li167362010165216"><span>结束录屏后，录屏文件将会保存到之前选择的路径下，可以选择调用系统播放器播放视频文件或打开文件所在的文件夹。</span><p></p><p id="ZH-CN_TOPIC_0000002510174531__p941314517553"><span><img height="178.64028000000002" originheight="256" originwidth="694" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104827.01031044068640267174860980527075:50001231000000:2800:F8854B9E1F57264682B5DFF88979E4968E91A6CD06802466D3BBDEF674056955.png" title="点击放大" width="467.82750000000004"></span></p> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section89111791511">设置录屏自定义路径<i class="anchor-icon anchor-icon-link" anchorid="section89111791511" tips="复制节点链接"></i></h2><ol id="ZH-CN_TOPIC_0000002510174531__ol1181215345"><li id="li1418419341"><span>点击DevEco Studio底部<strong>Log</strong>页签，选择<strong>HiLog &gt; </strong><strong>Settings</strong><strong> &gt; </strong><strong>Record Screen</strong>选项。</span><p></p><p id="ZH-CN_TOPIC_0000002510174531__p9417748193614"><span><img originheight="343" originwidth="813" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104827.71173940341143827882373968273124:50001231000000:2800:430F63AEA44882BD40209A64C30BB988C2ED2BC1826C9B08F610CAAFCEDE14EE.png" width="813" height="343"></span></p> <p></p></li><li id="li1845052203613"><span>在弹出的界面选择自定义路径，当设置好路径并勾选“Use the selected path and auto-generated file name as defaults and don't ask again”选项后，录屏时将自动使用此时设置的路径以及以录屏时的时间戳构造的文件名作为录屏文件的保存地址及文件名。</span><p></p><p id="ZH-CN_TOPIC_0000002510174531__p10782529183711"><span><img originheight="475" originwidth="708" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104827.59264109996461431887584360997833:50001231000000:2800:095BF9DB099228333F1E2CAEE150BECD8549CD3FBFBAA98F7CB1AECED91FC852.png" width="708" height="475"></span></p> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section4843131874211">通过命令行方式录屏<i class="anchor-icon anchor-icon-link" anchorid="section4843131874211" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510174531__p4722185620453">hdc是可以用于调试的命令行工具，通过该工具可以实现录屏功能。更多关于命令行工具hdc的说明请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hdc" target="_blank">hdc工具使用指导</a>。</p> <ol id="ZH-CN_TOPIC_0000002510174531__ol746919149581"><li id="li8910451624"><span>启动录屏。</span><p></p><div _ngcontent-pgw-c106="" class="highlight-div"><div _ngcontent-pgw-c106="" class="highlight-div-header"><div _ngcontent-pgw-c106="" class="highlight-div-header-left"><div _ngcontent-pgw-c106="" class="handle-button expand-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pgw-c106="" class="highlight-div-header-right"><div _ngcontent-pgw-c106="" class="handle-button ai-button"></div><div _ngcontent-pgw-c106="" class="handle-button line-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pgw-c106="" class="handle-button theme-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pgw-c106="" class="handle-button copy-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pgw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" id="ZH-CN_TOPIC_0000002510174531__screen19640531761" data-highlighted="yes"><ol class="linenums"><li>hdc shell aa start -b com.huawei.hmos.screenrecorder -a com.huawei.hmos.screenrecorder.ServiceExtAbility --ps <span class="hljs-string">"CustomizedFileName"</span> <span class="hljs-string">"test.mp4"</span>   <span class="hljs-comment">// 指定录屏文件名称为test.mp4</span></li></ol></pre></div></div> <p></p></li><li id="li1431810149418"><span>停止录屏。</span><p></p><div _ngcontent-pgw-c106="" class="highlight-div"><div _ngcontent-pgw-c106="" class="highlight-div-header"><div _ngcontent-pgw-c106="" class="highlight-div-header-left"><div _ngcontent-pgw-c106="" class="handle-button expand-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pgw-c106="" class="highlight-div-header-right"><div _ngcontent-pgw-c106="" class="handle-button ai-button"></div><div _ngcontent-pgw-c106="" class="handle-button line-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pgw-c106="" class="handle-button theme-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pgw-c106="" class="handle-button copy-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pgw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" id="ZH-CN_TOPIC_0000002510174531__screen1644419114716" data-highlighted="yes"><ol class="linenums"><li>hdc shell aa start -<span class="hljs-selector-tag">b</span> com<span class="hljs-selector-class">.huawei</span><span class="hljs-selector-class">.hmos</span><span class="hljs-selector-class">.screenrecorder</span> -<span class="hljs-selector-tag">a</span> com<span class="hljs-selector-class">.huawei</span><span class="hljs-selector-class">.hmos</span><span class="hljs-selector-class">.screenrecorder</span><span class="hljs-selector-class">.ServiceExtAbility</span></li></ol></pre></div></div> <p></p></li><li id="li172550246"><span>获取录屏文件位置，记录为{RecordFile}。</span><p></p><div _ngcontent-pgw-c106="" class="highlight-div"><div _ngcontent-pgw-c106="" class="highlight-div-header"><div _ngcontent-pgw-c106="" class="highlight-div-header-left"><div _ngcontent-pgw-c106="" class="handle-button expand-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pgw-c106="" class="highlight-div-header-right"><div _ngcontent-pgw-c106="" class="handle-button ai-button"></div><div _ngcontent-pgw-c106="" class="handle-button line-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pgw-c106="" class="handle-button theme-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pgw-c106="" class="handle-button copy-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pgw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-graphql" id="ZH-CN_TOPIC_0000002510174531__screen103231619674" data-highlighted="yes"><ol class="linenums"><li>hdc shell mediatool <span class="hljs-keyword">query</span> test.mp4 -u</li></ol></pre></div></div> <ul id="ZH-CN_TOPIC_0000002510174531__ul15862326115419"><li id="li1786372685413">如果查询的结果中包含uri字段，则返回值第三行对应的录屏文件路径不允许直接下载。<p id="ZH-CN_TOPIC_0000002510174531__p3387551543"><span><img originheight="87" originwidth="674" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104827.63652457285547899934987728030279:50001231000000:2800:3AFA13EDCC3E5EBFD8891891A770DAEDBE9B4F699AFAA142E246EB757B72830B.png" width="674" height="87"></span></p> <p id="ZH-CN_TOPIC_0000002510174531__p1027711933215">需要再执行如下命令，指定该uri，将录屏文件复制到有下载权限的路径中（如/data/local/tmp）。</p> <div _ngcontent-pgw-c106="" class="highlight-div"><div _ngcontent-pgw-c106="" class="highlight-div-header"><div _ngcontent-pgw-c106="" class="highlight-div-header-left"><div _ngcontent-pgw-c106="" class="handle-button expand-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pgw-c106="" class="highlight-div-header-right"><div _ngcontent-pgw-c106="" class="handle-button ai-button"></div><div _ngcontent-pgw-c106="" class="handle-button line-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pgw-c106="" class="handle-button theme-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pgw-c106="" class="handle-button copy-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pgw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-perl" id="ZH-CN_TOPIC_0000002510174531__screen183010020299" data-highlighted="yes"><ol class="linenums"><li>hdc shell mediatool <span class="hljs-keyword">recv</span> <span class="hljs-string">"file://media/Photo/2/VID_1736853237_001/test.mp4"</span> /data/<span class="hljs-keyword">local</span>/tmp</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510174531__p1535176181915">命令返回值第二行即为录屏文件路径{RecordFile}。</p> <p id="ZH-CN_TOPIC_0000002510174531__p885211510209"><span><img originheight="68" originwidth="1039" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104827.32590640888380882754573459809456:50001231000000:2800:5BD3768AC9047E2B852CFD7143688ECB9C8721AE11122DF4AAB2294A6E2BFFA9.png" width="920" height="60.21174205967276"></span></p> </li></ul> <ul id="ZH-CN_TOPIC_0000002510174531__ul3790239301"><li id="li187915238302">如果查询结果不包含uri字段，则返回值第二行即为录屏文件路径{RecordFile}。<p id="ZH-CN_TOPIC_0000002510174531__p178935174213"><span><img originheight="66" originwidth="621" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104827.20512656805471778080106257547626:50001231000000:2800:E8BCCACF5851B5198EF2DC7A97DA54D86847A14CAE1DC68B10A00CD84579B64C.png" width="621" height="66"></span></p> </li></ul> <p></p></li><li id="li1667312162710"><span>指定上一个步骤中获取到的录屏文件路径{RecordFile}，下载录屏文件到本地。</span><p></p><div _ngcontent-pgw-c106="" class="highlight-div"><div _ngcontent-pgw-c106="" class="highlight-div-header"><div _ngcontent-pgw-c106="" class="highlight-div-header-left"><div _ngcontent-pgw-c106="" class="handle-button expand-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pgw-c106="" class="highlight-div-header-right"><div _ngcontent-pgw-c106="" class="handle-button ai-button"></div><div _ngcontent-pgw-c106="" class="handle-button line-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pgw-c106="" class="handle-button theme-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pgw-c106="" class="handle-button copy-button"><div _ngcontent-pgw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pgw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510174531__screen5667131212271" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">hdc</span> <span class="hljs-variable">file</span> <span class="hljs-variable">recv</span> {<span class="hljs-variable">RecordFile</span>} <span class="hljs-variable">d</span>:\<span class="hljs-title class_">test</span>.<span class="hljs-title class_">mp4</span></li></ol></pre></div></div> <p></p></li></ol> </div> </div> <div></div></div>