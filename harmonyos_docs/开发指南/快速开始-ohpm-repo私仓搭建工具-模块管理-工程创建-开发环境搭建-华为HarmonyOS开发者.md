<h1 _ngcontent-fue-c119="" class="doc-title ng-star-inserted" title="快速开始"> 快速开始 </h1>

<div _ngcontent-fue-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001796357485"><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002510173691__p081134915499">ohpm-repo私仓不允许在Linux或macOS系统中使用root用户启动，请使用普通用户安装运行。</p> </div></div></div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001792256157_如何安装">如何安装<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001792256157_如何安装" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001792256157_ohpm-repo" class="firsth2">ohpm-repo<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001792256157_ohpm-repo" tips="复制节点链接"></i></h3><ol id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_ol627111392171146"><li id="zh-cn_topic_0000001792256157_li730839562171146"><p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p304453132171146">ohpm-repo依赖于Node运行，支持Node.js18.x及以上版本，请提前安装Nodejs，并完成环境变量的配置。Node.js安装请参考<a href="https://nodejs.org/download/release/latest/" target="_blank">Node.js官方网站</a>。</p> </li><li id="zh-cn_topic_0000001792256157_li1474537571171146"><p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p573361812171146">下载ohpm-repo私仓工具包。请在<a href="https://developer.huawei.com/consumer/cn/download/ohpm-repo" target="_blank">下载中心</a>获取最新的ohpm-repo，并根据下载中心页面<strong>工具完整性</strong>指导进行完整性校验。</p> </li><li id="zh-cn_topic_0000001792256157_li1540077834171146"><p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p671094527171146">解压ohpm-repo私仓工具包。</p> <p id="ZH-CN_TOPIC_0000002510173691__p114656488480"><span><img originheight="280" originwidth="258" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104719.99810708229639403496553246916038:50001231000000:2800:BC08B2A4BA340D37A3AAD5322C8C490E46150AEE6B95107AAF9A7113C949B12B.png" class="notEnlarge" width="258" height="280"></span></p> </li><li id="zh-cn_topic_0000001792256157_li1750889981171146"><p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p1951961332171146">请将ohpm-repo工具包解压目录中bin目录的路径配置到<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-faq#section24117279211">系统环境变量</a>path中，执行如下查询命令:</p> <div _ngcontent-fue-c106="" class="highlight-div"><div _ngcontent-fue-c106="" class="highlight-div-header"><div _ngcontent-fue-c106="" class="highlight-div-header-left"><div _ngcontent-fue-c106="" class="handle-button expand-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fue-c106="" class="highlight-div-header-right"><div _ngcontent-fue-c106="" class="handle-button ai-button"></div><div _ngcontent-fue-c106="" class="handle-button line-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fue-c106="" class="handle-button theme-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fue-c106="" class="handle-button copy-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fue-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_screen1454857881171146" data-highlighted="yes"><ol class="linenums"><li>ohpm-repo -v</li></ol></pre></div></div> <div class="p" id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p2084915518171146">终端输出版本号（如：2.0.0），则表示安装包解压无问题。如有报错，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-faq">常见问题FAQ</a>解决。<div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p id="ZH-CN_TOPIC_0000002510173691__p20805710123314">针对Linux和Mac系统，建议使用bash或zsh作为命令行界面。如果使用其他类型shell，写入ohpm-repo部署根目录<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-configuration#zh-cn_topic_0000001745376470_deploy_root">deploy_root</a>的环境变量时，默认写入.bashrc文件中。</p> </div></div></div> </div> </li><li id="zh-cn_topic_0000001792256157_li1284637538171146"><p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p97723535171146">在启动ohpm-repo前，需要先按照如下方式完成配置修改：进入ohpm-repo解压目录的conf目录内，打开config.yaml<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-configuration">配置文件</a>。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002510173691__p4486152772015"><strong>ohpm-repo成功启动后修改配置文件方法</strong>：</p> <ul id="ZH-CN_TOPIC_0000002510173691__ul0861185218217"><li id="li148611352182119">首次启动ohpm-repo时执行<strong>install</strong>命令已指定配置文件：找到指定的配置文件进行文件内容修改，然后重新执行install指定修改后的配置文件，再执行start启动ohpm-repo。</li><li id="li71852426122">首次启动ohpm-repo时执行<strong>install</strong>命令未指定配置文件：默认使用ohpm-repo压缩包解压路径下conf目录中的配置文件，修改该文件内容，然后重新执行install和start操作。</li></ul> </div></div></div> </li><li id="zh-cn_topic_0000001792256157_li639235392171146"><p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p521686708171146">检查<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-configuration#zh-cn_topic_0000001745376470_listen">listen</a>配置，默认配置为localhost:8088，表示仅支持监听本机地址；如果希望其他机器通过ip/域名访问，则建议修改listen配置为ohpm-repo部署机器的ip：</p> <div _ngcontent-fue-c106="" class="highlight-div"><div _ngcontent-fue-c106="" class="highlight-div-header"><div _ngcontent-fue-c106="" class="highlight-div-header-left"><div _ngcontent-fue-c106="" class="handle-button expand-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fue-c106="" class="highlight-div-header-right"><div _ngcontent-fue-c106="" class="handle-button ai-button"></div><div _ngcontent-fue-c106="" class="handle-button line-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fue-c106="" class="handle-button theme-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fue-c106="" class="handle-button copy-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fue-c106="" class="highlight-scroll-div"><pre class="yaml prettyprint linenums hljs language-yaml" id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_screen114479211171146" hw-language="yaml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">listen:</span> <span class="hljs-string">&lt;部署ohpm-repo机器的ip&gt;:8088</span></li></ol></pre></div></div> </li><li id="li1284111613534">检查<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-configuration#zh-cn_topic_0000001745376470_deploy_root">deploy_root</a>配置：如果不配置，会存储在默认地址中。该路径不允许配置为ohpm-repo解压根目录。</li><li id="li12795152118329">检查<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-configuration#zh-cn_topic_0000001745376470_db">db</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-configuration#zh-cn_topic_0000001745376470_store">store</a>配置，db是元数据存储的配置项，store是文件存储的配置项。db支持fileDB本地存储和mysql数据库存储，store支持file storage本地存储，sftp storage存储和custom storage自定义插件存储。db和store不能随意搭配，需要符合表1的匹配规范。配置文件默认db使用fileDB本地存储，store使用file storage本地存储。 <div class="tablenoborder"><div class="tbBox"><table id="table7377205612280" class="layoutFixed idpTab"><caption><b>表1 </b>db配置项与store配置项的搭配选择</caption><thead><tr id="ZH-CN_TOPIC_0000002510173691__row237775662812"><th align="left" class="cellrowborder" id="mcps1.3.3.2.8.3.2.3.1.1" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002510173691__p56376742916">db：元数据存储</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.8.3.2.3.1.2" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002510173691__p1780044342917">与db所适配的store类型</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002510173691__row1037855611281"><td class="cellrowborder" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002510173691__p134681916297">fileDB</p> </td> <td class="cellrowborder" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002510173691__p9378175662811">file storage</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173691__row1378756172816"><td class="cellrowborder" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002510173691__p36401711142910">mysql</p> </td> <td class="cellrowborder" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002510173691__p116425468292">file storage，sftp storage， custom storage</p> </td> </tr>  </tbody></table></div> </div> </li><li id="zh-cn_topic_0000001792256157_li1192739177171146"><p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p237223803171146">检查是否配置了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-configuration#zh-cn_topic_0000001745376470_store">store.config.server</a>，用于指定ohpm-repo仓库内容的下载地址、不配置取默认值，详情见：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-configuration#zh-cn_topic_0000001745376470_li922300957171146">server: 仓库内容的下载地址</a>。如果<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-configuration#zh-cn_topic_0000001745376470_listen">listen</a>的host为0.0.0.0，且本机存在多个网络接口，那么该值必须配置，建议手动修改host为本机指定的ip/域名，例如listen为0.0.0.0:8088，故server需配置为http://&lt;指定部署机器的ip/域名&gt;:8088。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_ul11542537409"><li id="zh-cn_topic_0000001792256157_li3155195324019">如果为ohpm-repo服务配置了反向代理服务器，则该地址需要填写为反向代理服务器的地址。</li><li id="li261872641616">如果ohpm-repo以多实例方式启动，必须配置反向代理服务器，多个实例之间需要统一的下载地址。</li><li id="zh-cn_topic_0000001792256157_li31551953104017">config.yaml中各项配置的详细描述请见：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-configuration">配置文件</a>。</li></ul> </div></div></div> </li><li id="zh-cn_topic_0000001792256157_li1670715838171146"><p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p154104117171146">进入ohpm-repo工具包解压目录中的bin目录下，执行安装命令:</p> <div _ngcontent-fue-c106="" class="highlight-div"><div _ngcontent-fue-c106="" class="highlight-div-header"><div _ngcontent-fue-c106="" class="highlight-div-header-left"><div _ngcontent-fue-c106="" class="handle-button expand-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fue-c106="" class="highlight-div-header-right"><div _ngcontent-fue-c106="" class="handle-button ai-button"></div><div _ngcontent-fue-c106="" class="handle-button line-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fue-c106="" class="handle-button theme-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fue-c106="" class="handle-button copy-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fue-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_screen378667084171146" data-highlighted="yes"><ol class="linenums"><li>ohpm-repo install</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p615455262171146">结果实例：</p> <p id="ZH-CN_TOPIC_0000002510173691__p9839131219295"><span><img height="222.88946709243646" originheight="410" originwidth="1709" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104719.50182489547910417239490494345442:50001231000000:2800:6A7564EC006A611921AD77E7189312C1AD86C7AE0E61426537571325632B17E5.png" title="点击放大" width="920"></span></p> <p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p1557348135171146"></p> </li><li id="zh-cn_topic_0000001792256157_li1086769572171146"><div class="p" id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p1169805852171146">安装成功后，<strong>必须</strong>根据给出的提示信息刷新部署目录的环境变量，针对Windows系统和Linux/Mac系统，有不同处理方式：<ul id="ZH-CN_TOPIC_0000002510173691__ul17294105482118"><li id="li16294135482119">Windows系统：关闭当前窗口，重新开启一个窗口。</li><li id="li20294454202116">Linux/Mac系统：在命令行中执行刷新命令：当shell为bash时执行<em>source ~/.bashrc</em>或者.<strong><em> </em></strong><em>~/.bashrc</em>；当shell为zsh时执行<em>source ~/.zshrc</em>或者.<em> ~/.zshrc</em>。</li></ul> </div> </li></ol> </div> <div class="tiledSection"><h2 id="section1336104918576">如何启动<i class="anchor-icon anchor-icon-link" anchorid="section1336104918576" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p193674919572">ohpm-repo安装成功后，进入ohpm-repo工具包解压目录下的bin目录下，执行如下命令，启动ohpm-repo：</p> <div _ngcontent-fue-c106="" class="highlight-div"><div _ngcontent-fue-c106="" class="highlight-div-header"><div _ngcontent-fue-c106="" class="highlight-div-header-left"><div _ngcontent-fue-c106="" class="handle-button expand-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fue-c106="" class="highlight-div-header-right"><div _ngcontent-fue-c106="" class="handle-button ai-button"></div><div _ngcontent-fue-c106="" class="handle-button line-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fue-c106="" class="handle-button theme-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fue-c106="" class="handle-button copy-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fue-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-sql" id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_screen23694925718" data-highlighted="yes"><ol class="linenums"><li>ohpm<span class="hljs-operator">-</span>repo <span class="hljs-keyword">start</span></li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p7600922135815">启动成功，将会出现以下日志信息：</p> <p id="ZH-CN_TOPIC_0000002510173691__p18970111120540"><span><img height="133.29333333333335" originheight="234" originwidth="1700" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104719.40879240406510835432678554456412:50001231000000:2800:AABE14F861435FAFAC75A01F5CC4B70A1F2E42DF3813878C174387E106B5690D.png" title="点击放大" width="920"></span></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p16389526175914">ohpm-repo首次启动时，默认创建一个管理员账号，账号名称：<em><strong>admin</strong></em>，密码：<em><strong>12345Qq!</strong></em>。该账号在首次登录时，需要修改其密码，请修改密码后，重新登录该账号。</p> </div></div></div> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001792256157_从ohpm-repo获取三方库">从ohpm-repo获取三方库<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001792256157_从ohpm-repo获取三方库" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p1534869292171146">可以为所有项目配置该私有仓，例如执行以下命令：</p> <div _ngcontent-fue-c106="" class="highlight-div"><div _ngcontent-fue-c106="" class="highlight-div-header"><div _ngcontent-fue-c106="" class="highlight-div-header-left"><div _ngcontent-fue-c106="" class="handle-button expand-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fue-c106="" class="highlight-div-header-right"><div _ngcontent-fue-c106="" class="handle-button ai-button"></div><div _ngcontent-fue-c106="" class="handle-button line-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fue-c106="" class="handle-button theme-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fue-c106="" class="handle-button copy-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fue-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_screen150325713171146" data-highlighted="yes"><ol class="linenums"><li>ohpm config <span class="hljs-built_in">set</span> registry &lt;配置的ohpm-repo私仓服务地址&gt;/repos/ohpm</li><li>ohpm install</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p1310039985171146">或者在命令行中配置参数--registry使用，例如以下命令：</p> <div _ngcontent-fue-c106="" class="highlight-div"><div _ngcontent-fue-c106="" class="highlight-div-header"><div _ngcontent-fue-c106="" class="highlight-div-header-left"><div _ngcontent-fue-c106="" class="handle-button expand-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fue-c106="" class="highlight-div-header-right"><div _ngcontent-fue-c106="" class="handle-button ai-button"></div><div _ngcontent-fue-c106="" class="handle-button line-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fue-c106="" class="handle-button theme-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fue-c106="" class="handle-button copy-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fue-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_screen1743158666171146" data-highlighted="yes"><ol class="linenums"><li>ohpm install @ohos/lottie --registry &lt;配置的ohpm-repo私仓服务地址&gt;/repos/ohpm</li></ol></pre></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p1914935791171146">&lt;配置的ohpm-repo私仓服务地址&gt;：配置文件中<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-configuration#zh-cn_topic_0000001745376470_store">store.config.server</a>的地址信息，例如：<em><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-configuration#zh-cn_topic_0000001745376470_store">store.config.server</a>:为http://127.0.0.1:8088</em>，故registry为：<em>http://127.0.0.1:8088/repos/ohpm。</em>如果<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-configuration#zh-cn_topic_0000001745376470_store">store.config.server</a>没有配置，取默认值。</p> </div></div></div> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001792256157_将三方库发布到ohpm-repo">将三方库发布到ohpm-repo<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001792256157_将三方库发布到ohpm-repo" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510173691__p1314463211245">三方库包含静态共享包HAR包和动态共享包HSP包，可以通过ohpm命令行工具和使用Web页面两种方式发布。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002510173691__p11699162705119">从ohpm命令行工具1.3.0版本和ohpm-repo私仓1.1.0版本开始，支持动态共享包HSP包以.tgz文件形式发布到ohpm-repo，之前版本仅支持发布以.har文件形式的静态共享包。</p> </div></div></div> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001792256157_使用命令行工具发布" class="firsth2">使用命令行工具发布<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001792256157_使用命令行工具发布" tips="复制节点链接"></i></h3><ol id="ZH-CN_TOPIC_0000002510173691__ol32305354211"><li id="li1923013517213">利用工具ssh-keygen生成公、私钥，可执行以下命令：<div _ngcontent-fue-c106="" class="highlight-div"><div _ngcontent-fue-c106="" class="highlight-div-header"><div _ngcontent-fue-c106="" class="highlight-div-header-left"><div _ngcontent-fue-c106="" class="handle-button expand-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fue-c106="" class="highlight-div-header-right"><div _ngcontent-fue-c106="" class="handle-button ai-button"></div><div _ngcontent-fue-c106="" class="handle-button line-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fue-c106="" class="handle-button theme-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fue-c106="" class="handle-button copy-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fue-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_screen2055664422171146" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">ssh</span>-<span class="hljs-variable">keygen</span> -<span class="hljs-variable">m</span> <span class="hljs-variable">PEM</span> -<span class="hljs-variable">t</span> <span class="hljs-variable">RSA</span> -<span class="hljs-variable">b</span> <span class="hljs-number">4096</span> -<span class="hljs-title class_">f</span> &lt;<span class="hljs-title class_">your_key_path</span>&gt;</li></ol></pre></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_ul131019278014"><li id="zh-cn_topic_0000001792256157_li101017271502">&lt;your_key_path&gt;：配置公钥和私钥的名称和存放路径，仅包含名称时，以当前命令行工作路径为存储目录。</li><li id="zh-cn_topic_0000001792256157_li18100271709">OHPM包管理器只支持加密密钥认证，请在生成公私钥时输入密码。</li></ul> </div></div></div> <p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p413521751171146">示例：</p> <div _ngcontent-fue-c106="" class="highlight-div"><div _ngcontent-fue-c106="" class="highlight-div-header"><div _ngcontent-fue-c106="" class="highlight-div-header-left"><div _ngcontent-fue-c106="" class="handle-button expand-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fue-c106="" class="highlight-div-header-right"><div _ngcontent-fue-c106="" class="handle-button ai-button"></div><div _ngcontent-fue-c106="" class="handle-button line-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fue-c106="" class="handle-button theme-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fue-c106="" class="handle-button copy-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fue-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_screen511662239171146" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">ssh</span>-<span class="hljs-variable">keygen</span> -<span class="hljs-variable">m</span> <span class="hljs-variable">PEM</span> -<span class="hljs-variable">t</span> <span class="hljs-variable">RSA</span> -<span class="hljs-variable">b</span> <span class="hljs-number">4096</span> -<span class="hljs-variable">f</span> <span class="hljs-variable">D</span>:\<span class="hljs-title class_">path</span>\<span class="hljs-title class_">my_key_path</span></li></ol></pre></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p1197036181617">公钥和私钥存储在D盘的path目录下，公钥和私钥名称分别为my_key_path.pub和my_key_path。</p> </div></div></div> </li></ol><ol id="ZH-CN_TOPIC_0000002510173691__ol223093514213" start="2"><li id="li182301835182116">登录ohpm-repo私仓管理地址，单击主页右上角的个人中心 &gt; 认证管理，新增公钥，将公钥文件（&lt;your_key_path&gt;.pub）的内容粘贴到公钥输入框中。<p id="ZH-CN_TOPIC_0000002510173691__p6619829181418"><span><img height="385.096845" originheight="668" originwidth="1259" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104719.28281968391218507854658411487423:50001231000000:2800:48883115FED90A89FA52FF8ED569D76FEE642B5DBC01D11D83F6511E16DC65FC.png" title="点击放大" width="714.6737710000001"></span></p> </li></ol><ol id="ZH-CN_TOPIC_0000002510173691__ol1842314515211" start="3"><li id="li2423125152114">打开命令行工具，执行如下命令设置私钥路径。<div _ngcontent-fue-c106="" class="highlight-div"><div _ngcontent-fue-c106="" class="highlight-div-header"><div _ngcontent-fue-c106="" class="highlight-div-header-left"><div _ngcontent-fue-c106="" class="handle-button expand-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fue-c106="" class="highlight-div-header-right"><div _ngcontent-fue-c106="" class="handle-button ai-button"></div><div _ngcontent-fue-c106="" class="handle-button line-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fue-c106="" class="handle-button theme-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fue-c106="" class="handle-button copy-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fue-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_screen1108487658171146" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">config</span> <span class="hljs-variable">set</span> <span class="hljs-title class_">key_path</span> &lt;<span class="hljs-title class_">your_key_path</span>&gt;</li></ol></pre></div></div> </li></ol><ol id="ZH-CN_TOPIC_0000002510173691__ol886815342215" start="4"><li id="li188688310229">登录ohpm-repo私仓管理地址，单击主页右上角的个人中心，复制发布码。<p id="ZH-CN_TOPIC_0000002510173691__p161092118614"><span><img height="365.63069900000005" originheight="946" originwidth="1896" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104719.26768912976324390653817239466192:50001231000000:2800:E088E51D09F1AA3E690DDA6271475446E6EFAB9FBAAF278C32D7E318FBE50BF5.png" title="点击放大" width="718.2"></span></p> </li></ol><ol id="ZH-CN_TOPIC_0000002510173691__ol125226151227" start="5"><li id="li1552241513222">将发布码配置到.ohpmrc文件中，可执行如下命令：<div _ngcontent-fue-c106="" class="highlight-div"><div _ngcontent-fue-c106="" class="highlight-div-header"><div _ngcontent-fue-c106="" class="highlight-div-header-left"><div _ngcontent-fue-c106="" class="handle-button expand-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fue-c106="" class="highlight-div-header-right"><div _ngcontent-fue-c106="" class="handle-button ai-button"></div><div _ngcontent-fue-c106="" class="handle-button line-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fue-c106="" class="handle-button theme-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fue-c106="" class="handle-button copy-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fue-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_screen365650778171146" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">ohpm</span> <span class="hljs-variable">config</span> <span class="hljs-variable">set</span> <span class="hljs-title class_">publish_id</span> &lt;<span class="hljs-title class_">your_publish_id</span>&gt;</li></ol></pre></div></div> </li></ol><ol id="ZH-CN_TOPIC_0000002510173691__ol113601931162217" start="6"><li id="li25241827291">三方库包含静态共享包HAR包和动态共享包HSP包，发布方式存在不同。<ul id="ZH-CN_TOPIC_0000002510173691__ul2032413346295"><li id="li16896114573012">静态共享包HAR包<p id="ZH-CN_TOPIC_0000002510173691__p1116061743112">执行 ''ohpm publish &lt;HAR包路径&gt;'' 命令发布HAR包，&lt;HAR包路径&gt; 指向的文件后缀需为.har文件的具体路径。例如执行以下命令：</p> <div _ngcontent-fue-c106="" class="highlight-div"><div _ngcontent-fue-c106="" class="highlight-div-header"><div _ngcontent-fue-c106="" class="highlight-div-header-left"><div _ngcontent-fue-c106="" class="handle-button expand-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fue-c106="" class="highlight-div-header-right"><div _ngcontent-fue-c106="" class="handle-button ai-button"></div><div _ngcontent-fue-c106="" class="handle-button line-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fue-c106="" class="handle-button theme-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fue-c106="" class="handle-button copy-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fue-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002510173691__screen31533271294" data-highlighted="yes"><ol class="linenums"><li>ohpm config <span class="hljs-built_in">set</span> publish_registry &lt;ohpm-repo私仓管理地址&gt;/repos/ohpm</li><li>ohpm publish demo.har</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510173691__p42561359113013">或在命令行中配置参数--publish_registry使用，例如以下命令：</p> <div _ngcontent-fue-c106="" class="highlight-div"><div _ngcontent-fue-c106="" class="highlight-div-header"><div _ngcontent-fue-c106="" class="highlight-div-header-left"><div _ngcontent-fue-c106="" class="handle-button expand-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fue-c106="" class="highlight-div-header-right"><div _ngcontent-fue-c106="" class="handle-button ai-button"></div><div _ngcontent-fue-c106="" class="handle-button line-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fue-c106="" class="handle-button theme-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fue-c106="" class="handle-button copy-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fue-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002510173691__screen315392732916" data-highlighted="yes"><ol class="linenums"><li>ohpm publish demo.har --publish_registry &lt;ohpm-repo私仓管理地址&gt;/repos/ohpm</li></ol></pre></div></div> </li></ul> <ul id="ZH-CN_TOPIC_0000002510173691__ul9594144020303"><li id="li19465122116406">动态共享包HSP包<p id="ZH-CN_TOPIC_0000002510173691__p1536192515405">动态共享包HSP包不能直接发布在ohpm-repo内，需要先转化为.tgz包，转换方法见：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hsp#section67683213597">编译HSP模块</a>。TGZ包的发布流程同HAR一致。</p> <p id="ZH-CN_TOPIC_0000002510173691__p1652542974016">执行 ''ohpm publish &lt;TGZ包路径&gt;'' 命令发布TGZ包，&lt; TGZ 包路径&gt; 指向的文件后缀需为.tgz文件的具体路径。例如执行以下命令：</p> <div _ngcontent-fue-c106="" class="highlight-div"><div _ngcontent-fue-c106="" class="highlight-div-header"><div _ngcontent-fue-c106="" class="highlight-div-header-left"><div _ngcontent-fue-c106="" class="handle-button expand-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fue-c106="" class="highlight-div-header-right"><div _ngcontent-fue-c106="" class="handle-button ai-button"></div><div _ngcontent-fue-c106="" class="handle-button line-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fue-c106="" class="handle-button theme-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fue-c106="" class="handle-button copy-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fue-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002510173691__screen2052512292403" data-highlighted="yes"><ol class="linenums"><li>ohpm config <span class="hljs-built_in">set</span> publish_registry &lt;ohpm-repo私仓管理地址&gt;/repos/ohpm</li><li>ohpm publish demo.tgz</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510173691__p352542917401">或在命令行中配置参数--publish_registry使用，例如以下命令：</p> <div _ngcontent-fue-c106="" class="highlight-div"><div _ngcontent-fue-c106="" class="highlight-div-header"><div _ngcontent-fue-c106="" class="highlight-div-header-left"><div _ngcontent-fue-c106="" class="handle-button expand-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fue-c106="" class="highlight-div-header-right"><div _ngcontent-fue-c106="" class="handle-button ai-button"></div><div _ngcontent-fue-c106="" class="handle-button line-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fue-c106="" class="handle-button theme-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fue-c106="" class="handle-button copy-button"><div _ngcontent-fue-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fue-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002510173691__screen9525142919406" data-highlighted="yes"><ol class="linenums"><li>ohpm publish demo.tgz --publish_registry &lt;ohpm-repo私仓管理地址&gt;/repos/ohpm</li></ol></pre></div></div> </li></ul> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002510173691__ul15114712101911"><li id="li16972711194">开发HAR包和HSP包，HSP生成.tgz包和.tgz格式共享包转换为.har格式等更详细内容请参考：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-creating-har-api9">开发及引用共享包</a>。</li><li id="li13982711198">发布时ohpm-repo私仓管理地址填写规则如下：<ul id="ZH-CN_TOPIC_0000002510173691__ul839717305191"><li id="li1911414128197">listen的host不为0.0.0.0时， 管理地址使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-configuration#zh-cn_topic_0000001745376470_listen">listen</a>的完整格式，例如：当listen：localhost:8088，此处ohpm-repo私仓管理地址应填写：http://localhost:8088。</li><li id="li19923124541413">listen的host为0.0.0.0时，host需更改为ohpm-repo私仓部署机器的ip/域名，例如：当listen：0.0.0.0:8088，此处ohpm-repo私仓管理地址应填写：http://&lt;ohpm-repo私仓部署机器的ip/域名&gt;:8088。</li></ul> </li></ul> </div></div></div> </li></ol> </div> <div class="tiledSection"><h3 id="zh-cn_topic_0000001792256157_使用web页面发布">使用Web页面发布<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001792256157_使用web页面发布" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p1979472103171146">在Web页面用管理员账号登录ohpm-repo私仓管理地址，在个人中心 &gt; 仓库管理中，点击管理三方包 &gt; 上传三方包，包的后缀名必须为.har或者.tgz。</p> <p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p91216481534"><span><img height="357.79128000000003" originheight="946" originwidth="1896" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104719.56866109094849435814650893797843:50001231000000:2800:5579F3C30ABA54613706AE66F910EC7651EFF8941D5C66677D95F9FD1F2FB242.png" title="点击放大" width="704.3666700000001"></span></p> <p id="ZH-CN_TOPIC_0000002510173691__zh-cn_topic_0000001792256157_p695099200171146"><span><img height="362.445615" originheight="946" originwidth="1896" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104720.52677984155607069957675906337830:50001231000000:2800:A5692DCD2AEB6FCF04B77B295F595F62F44A321F6A50454E1EF18521953FB335.png" title="点击放大" width="711.2623209999999"></span></p> </div> </div> <div></div></div>