<h1 _ngcontent-udr-c119="" class="doc-title ng-star-inserted" title="性能问题定位：深度录制"> 性能问题定位：深度录制 </h1>

<div _ngcontent-udr-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001771272952"><div class="tiledSection"><h2 id="section208158569">创建深度分析任务并进行录制<i class="anchor-icon anchor-icon-link" anchorid="section208158569" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478174432__zh-cn_topic_0000001710155385_p8060118">开发者可针对不同的性能问题场景选择不同模式的分析任务，对应用/元服务进行深度分析。当前支持以下调优场景：</p> <ul id="ZH-CN_TOPIC_0000002478174432__zh-cn_topic_0000001710155385_ul1439822714222"><li id="li12826222192916">Frame：主要用于深度分析应用/元服务的卡顿丢帧原因。</li><li id="li925863762912">Launch：主要用于分析应用/元服务的启动耗时，分析启动周期各阶段的耗时情况、核心线程的运行情况等，协助开发者识别启动瓶颈。</li><li id="li166365014292">Snapshot：支持多次拍摄ArkTS堆内存快照，分析单个内存快照或多个内存快照之间的差异，定位ArkTS的内存问题。</li><li id="li397220102301">Allocation：主要用于应用/元服务内存资源占用情况的分析，可深度采集内存相关数据，直观呈现不同分类的内存趋势，提供内存实例分配的调用栈记录，深入分析内存问题。</li><li id="li12841627193113">ArkUI：主要用于定位由于组件耗时、页面布局、状态变量更新导致的卡顿问题。</li><li id="li2133173623118">Energy：主要用于应用/元服务的能耗异常分析。</li><li id="li126591248173118">ArkWeb：主要用于定位web应用加载和丢帧问题。</li><li id="li185576556318">Network: 主要用于定位http协议栈网络信息诊断，用于网络请求分段耗时分析。</li><li id="li186617521686">Concurrency：主要用于显示并行并发应用的实际运行情况，用于帮助优化并行并发代码。</li><li id="li3786123075012">GPU：主要识别GPU利用率低以及执行图形和计算工作负载性能瓶颈的根本原因。</li><li id="li65641537153014">Time：主要用于改进函数执行效率的分析，深度录制函数调用栈及每帧耗时等相关运行数据，并完整展现ArkTS到Native的跨语言调用栈，支撑Native API典型问题分析。</li><li id="li109361157103018">CPU：通过深度采集CPU内核相关数据，直观地呈现出当前选择调优应用/元服务进程的CPU使用率、CPU各核心时间片调度信息、CPU各核心频率信息、CPU各核心使用率信息、系统各进程的CPU使用情况、线程状态及Trace信息等。</li></ul> <ol id="ZH-CN_TOPIC_0000002478174432__zh-cn_topic_0000001710155385_ol563719191365"><li id="zh-cn_topic_0000001710155385_li963719192065"><span id="ZH-CN_TOPIC_0000002478174432__zh-cn_topic_0000001710155385_p1244915241619">选择场景模板，创建会话：</span><p></p><p id="ZH-CN_TOPIC_0000002478174432__zh-cn_topic_0000001710155385_p7903163082811">新建任务的入口，DevEco Profiler提供Frame、Launch、Snapshot、Allocation、ArkUI、Energy、ArkWeb、Network、Concurrency、GPU、Time、CPU场景化分析任务类型。</p> <p id="ZH-CN_TOPIC_0000002478174432__zh-cn_topic_0000001710155385_p73421832154012"><span><img originheight="21" originwidth="22" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104941.78169858431665559994011740756355:50001231000000:2800:D512CF32EBDA8688C47EC81C8E6A92492947731C55C409F581DDC3098317C208.png" class="IconPic notEnlarge" width="22" height="21"></span>：在设备列表中选择设备。</p> <p id="ZH-CN_TOPIC_0000002478174432__zh-cn_topic_0000001710155385_p14366163584015"><span><img originheight="20" originwidth="23" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104941.71759984680394870789271957965360:50001231000000:2800:1A48E6AA69AA39256A5A420203761B674217C3117F87CF1D93540E791FA17436.png" class="IconPic notEnlarge" width="23" height="20"></span>：在进程列表中选择要调测的应用（可以是正在运行的应用，也可以是已安装但未启动的应用）。</p> <p id="ZH-CN_TOPIC_0000002478174432__zh-cn_topic_0000001710155385_p07416388409"><span><img originheight="20" originwidth="22" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104941.34160914688496868616274548274944:50001231000000:2800:3D9BED7C48D78FC0AC4495ED64B64DC40B04F0AE0606D79F001D5B23BF951AAD.png" class="IconPic notEnlarge" width="22" height="20"></span>：在DevEco Profiler主界面的新建任务区域，单击要创建的场景调优分析任务类型，并单击“Create Session”。创建后的分析任务，将显示在界面左侧的任务列表中。</p> <p id="ZH-CN_TOPIC_0000002478174432__zh-cn_topic_0000001710155385_p145254016400"><span><img originheight="20" originwidth="22" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104941.32651788433784761496191507032744:50001231000000:2800:923F12917844FB70C3318BE2D86B8291AD80059D84F1CDD0C0B5B0424B2AC209.png" class="IconPic notEnlarge" width="22" height="20"></span>：调优详情，显示具体的调优内容。</p> <p id="ZH-CN_TOPIC_0000002478174432__zh-cn_topic_0000001710155385_p138943107293"></p> <p id="ZH-CN_TOPIC_0000002478174432__p716798122013"><span><img height="312.3635897435897" originheight="487" originwidth="1446" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104941.44781563920815669981389908157916:50001231000000:2800:53C28172B81E59D1DD6DE272F93095A7F47B0A92E2D6C3502174B827D20B03B5.png" title="点击放大" width="920"></span></p> <p></p></li><li id="zh-cn_topic_0000001710155385_li151803251060"><span>配置并确认会话环境：</span><p></p><p id="ZH-CN_TOPIC_0000002478174432__zh-cn_topic_0000001710155385_p01560238423">在右边录制详情区域，工具控制栏上有很多小图标，鼠标放上去会有一些功能提示，可以添加一些录制选项，各泳道区域也有下拉框选项，下拉选择不同的设置可以调整录制功能。</p> <p id="ZH-CN_TOPIC_0000002478174432__zh-cn_topic_0000001710155385_p162471540143914"><span><img originheight="309" originwidth="422" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104941.89970651527291041024324896895974:50001231000000:2800:9B1B86042FDE377B839BA3C4E407417CDDCDD65F3632997A3E84A2274BEABB51.png" width="422" height="309"></span></p> <p></p></li><li id="zh-cn_topic_0000001710155385_li165612914611"><span>启动录制，复现性能劣化场景：</span><p></p><p id="ZH-CN_TOPIC_0000002478174432__zh-cn_topic_0000001710155385_p164951312195415">单击任务窗口左上角的 <span><img originheight="17" originwidth="17" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104941.03848178675972643847212704747041:50001231000000:2800:6BEC547E953650FAA25E0DCEBD6B3A6ACAD2D0927B4AEB0D1EF4383D0F594B75.png" class="IconPic notEnlarge" width="17" height="17"></span>，启动录制，也可以选择左侧的任务列表中的<span><img originheight="17" originwidth="17" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104941.00813756023425528684587892177439:50001231000000:2800:D4C090E0C7B6A76BA85690099DC96DC0807E0554F40B06E1043FF44AB51D8AED.png" class="IconPic notEnlarge" width="17" height="17"></span>，启动录制后，等待任务状态由“initializing”变为“recording”。录制过程中整个DevEco Profiler不能再点击其他的模板进行操作，如果想录制其他模板可以结束本次录制重新选择其他模板开始录制。</p> <p id="ZH-CN_TOPIC_0000002478174432__zh-cn_topic_0000001710155385_p145173614519"></p> <p id="ZH-CN_TOPIC_0000002478174432__p02341152202015"><span><img height="313.23641025641024" originheight="677" originwidth="2000" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104941.27012388149545878954370496748611:50001231000000:2800:1589EF3943E78E778CAC00FED9F4F523FFAEC210A5952C255A13DDEB2216C6FE.png" title="点击放大" width="920"></span></p> <p></p></li><li id="zh-cn_topic_0000001710155385_li133053185919"><span>录制场景结束，停止录制：</span><p></p><p id="ZH-CN_TOPIC_0000002478174432__zh-cn_topic_0000001710155385_p62443311014">在调优设备侧操作APP，执行要验证的操作，复现应用性能问题。单击该任务的停止按钮 <span><img originheight="16" originwidth="16" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104941.05889150115510248932574501734859:50001231000000:2800:1C8F3E6DDA3ED4923F77F5D2E728ED866CABA842237C5A513AA7C182A1AFC99B.png" class="IconPic notEnlarge" width="16" height="16"></span>，进入数据解析阶段，所有泳道任务状态由“analyzing”变为“rendering”，解析结束，右侧调优详情区域显示具体调优内容，解析过程可能包含大量的数据，需要等待一段时间，请耐心等待解析完成。</p> <p></p></li></ol> <p id="ZH-CN_TOPIC_0000002478174432__p5440732173219">当前的ArkTS Callstack/Callstack/Native Allocation/ArkTS Allocation泳道录制如果无值，泳道显示No Data，在泳道名称处可将光标悬浮于三角告警图标处，查看泳道报错的原因。</p> <p id="ZH-CN_TOPIC_0000002478174432__p184212112345"><span><img originheight="84" originwidth="1553" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104941.70525968404257887631201820950781:50001231000000:2800:3478390651EF07F3350051A1508C1BF3956FE66E6427933091FE66BD03FB43EA.png" width="920" height="49.76175144880876"></span></p> </div> </div> <div></div></div>