<h1 _ngcontent-msq-c119="" class="doc-title ng-star-inserted" title="扩展屏投播开发指导"> 扩展屏投播开发指导 </h1>

<div _ngcontent-msq-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>通过本节开发指导，可在系统镜像投屏后，获取投屏设备信息，实现扩展屏模式的投播，实现双屏协作的能力。</p> <div class="tiledSection"><h2 id="section157003514216">运作机制<i class="anchor-icon anchor-icon-link" anchorid="section157003514216" tips="复制节点链接"></i></h2><p><span><img height="352.28613549816936" originheight="659" originwidth="1721" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114449.83407350172853281295113924737262:50001231000000:2800:E99F2DBE1788F5DB59A032D2DF02F28BD1693DBC73F3BFFDA3F3DE460B377648.png" title="点击放大" width="920"></span></p> <ul><li><strong>虚拟扩展屏</strong><p>是在系统投屏启动过程中建立的，依据双端协商的投屏视频流的分辨率创建，支持1080P 及以上分辨率。默认镜像主屏内容，当虚拟扩展屏上有UIAbility绘制时，会投屏该屏内容。</p> </li><li><strong>UIAbility A（本机内容）</strong><p>在本端主屏上显示的内容。假定UIAbility A 与 UIAbility B 属于同一应用，UIAbility A可以控制UIAbility B，实现双屏联动。</p> </li><li><strong>UIAbility B（投屏内容）</strong><p>在虚拟扩展屏上绘制的内容，考虑到远端投屏用户体验，UIAbility B 应铺满全屏。从安全角度考虑，在启动UIAbility B 时，系统会校验主屏前台UIAbility是否归属同一应用，如果校验失败会禁止其在虚拟扩展屏启动。</p> </li></ul> </div> <div class="tiledSection"><h2 id="section1557419538816">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="section1557419538816" tips="复制节点链接"></i></h2><p>需同时满足以下条件方可使用该功能：</p> <ul><li><strong>设备限制</strong><p>本端设备：HarmonyOS NEXT Developer Beta1及以上版本的手机设备。</p> <p>远端设备：支持Cast+或Miracast标准协议的设备，推荐使用华为智慧屏HarmonyOS2.0及以上版本。</p> </li><li><strong>使用限制</strong><p>需要系统发起无线/有线投屏后才可通过接口获取有效的扩展投屏设备。</p> </li></ul> </div> <div class="tiledSection"><h2 id="section1388918616125">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section1388918616125" tips="复制节点链接"></i></h2><div class="p">在开发具体功能前，请先查阅参考文档，获取详细的接口说明。 <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.1.3.1.1" valign="top" width="48.35%"><p>接口</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.1.3.1.2" valign="top" width="51.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="48.35%"><p>getAllCastDisplays(): Promise&lt;Array&lt;CastDisplayInfo&gt;&gt;;</p> </td> <td class="cellrowborder" valign="top" width="51.65%"><p>获取当前系统中所有支持扩展屏投播的显示设备。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="48.35%"><p>on(type: 'castDisplayChange', callback: Callback&lt;CastDisplayInfo&gt;): void;</p> </td> <td class="cellrowborder" valign="top" width="51.65%"><p>设置扩展屏投播显示设备变化的监听事件。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="48.35%"><p>off(type: 'castDisplayChange', callback?: Callback&lt;CastDisplayInfo&gt;): void;</p> </td> <td class="cellrowborder" valign="top" width="51.65%"><p>取消扩展屏投播显示设备变化事件监听，关闭后，不再进行该事件回调。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div class="tiledSection"><h2 id="section12440237112214">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section12440237112214" tips="复制节点链接"></i></h2><ol><li>UIAbility A创建AVSession, 获取可用扩展屏投播设备并注册监听。<div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>获取的屏幕信息CastDisplayInfo中包含屏幕ID，屏幕名称、状态以及分辨率宽度、高度基础属性，其中屏幕id 值同于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-display#display" target="_blank">Display</a>的id，如需要获取更详细的信息可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-display#displaygetalldisplays9" target="_blank">Display获取设备信息说明</a>。</p> </div></div></div> <div _ngcontent-msq-c106="" class="highlight-div"><div _ngcontent-msq-c106="" class="highlight-div-header"><div _ngcontent-msq-c106="" class="highlight-div-header-left"><div _ngcontent-msq-c106="" class="handle-button expand-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-msq-c106="" class="highlight-div-header-right"><div _ngcontent-msq-c106="" class="handle-button ai-button"></div><div _ngcontent-msq-c106="" class="handle-button line-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-msq-c106="" class="handle-button theme-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-msq-c106="" class="handle-button copy-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-msq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span>  { avSession }  <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AVSessionKit'</span>; <span class="hljs-comment">// 导入AVSession模块</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbilityA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span>{</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">session</span>: avSession.<span class="hljs-property">AVSession</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">extCastDisplayInfo</span>: avSession.<span class="hljs-property">CastDisplayInfo</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-comment">// 注册监听可投屏设备变化事件</span></li><li>  <span class="hljs-keyword">private</span> onCastDisplayChangedCallback = <span class="hljs-function">(<span class="hljs-params">castDisplayInfo: avSession.CastDisplayInfo</span>) =&gt;</span> {</li><li>    <span class="hljs-comment">// 新增扩展屏,进入扩展屏显示</span></li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">extCastDisplayInfo</span> === <span class="hljs-literal">undefined</span> &amp;&amp; castDisplayInfo.<span class="hljs-property">state</span> === avSession.<span class="hljs-property">CastDisplayState</span>.<span class="hljs-property">STATE_ON</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in opening the cast display'</span>);</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">extCastDisplayInfo</span> = castDisplayInfo;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startExternalDisplay</span>();</li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">extCastDisplayInfo</span>?.<span class="hljs-property">id</span> == castDisplayInfo.<span class="hljs-property">id</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">extCastDisplayInfo</span> = castDisplayInfo;</li><li>      <span class="hljs-comment">// 扩展屏不可用，退出扩展屏显示</span></li><li>      <span class="hljs-keyword">if</span> (castDisplayInfo.<span class="hljs-property">state</span> === avSession.<span class="hljs-property">CastDisplayState</span>.<span class="hljs-property">STATE_OFF</span>){</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in closing the cast display'</span>);</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">stopExternalDisplay</span>();</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">extCastDisplayInfo</span> = <span class="hljs-literal">undefined</span>;</li><li>      }</li><li>    }</li><li>  };</li><li>
</li><li>  <span class="hljs-comment">// 创建AVSession, 获取可用扩展屏投播设备并注册监听</span></li><li>  <span class="hljs-title function_">initAVSession</span>(<span class="hljs-params">context: Context</span>) {</li><li>    avSession.<span class="hljs-title function_">createAVSession</span>(context, <span class="hljs-string">'CastDisplay'</span>, <span class="hljs-string">'video'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">session: avSession.AVSession</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">session</span> = session;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">session</span>?.<span class="hljs-title function_">on</span>(<span class="hljs-string">'castDisplayChange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onCastDisplayChangedCallback</span>);</li><li>
</li><li>      <span class="hljs-comment">// 获取当前系统可用的扩展屏显示设备</span></li><li>      session.<span class="hljs-title function_">getAllCastDisplays</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">infoArr: avSession.CastDisplayInfo[]</span>) =&gt;</span> {</li><li>        <span class="hljs-comment">// 有多个扩展屏时可以提供用户选择，也可使用其中任一个作为扩展屏使用。</span></li><li>        <span class="hljs-keyword">if</span> (infoArr.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">extCastDisplayInfo</span> = infoArr[<span class="hljs-number">0</span>];</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startExternalDisplay</span>();</li><li>        }</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError&lt;<span class="hljs-built_in">void</span>&gt;</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get all CastDisplay. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">onCreate</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">onCreate</span>(want, launchParam);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initAVSession</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onDestroy</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">stopExternalDisplay</span>();</li><li>    <span class="hljs-comment">// 去注册监听</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">session</span>?.<span class="hljs-title function_">off</span>(<span class="hljs-string">'castDisplayChange'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> </li><li>在UIAbilityA中构建扩展屏启动和退出能力。<div _ngcontent-msq-c106="" class="highlight-div"><div _ngcontent-msq-c106="" class="highlight-div-header"><div _ngcontent-msq-c106="" class="highlight-div-header-left"><div _ngcontent-msq-c106="" class="handle-button expand-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-msq-c106="" class="highlight-div-header-right"><div _ngcontent-msq-c106="" class="handle-button ai-button"></div><div _ngcontent-msq-c106="" class="handle-button line-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-msq-c106="" class="handle-button theme-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-msq-c106="" class="handle-button copy-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-msq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 扩展屏启动UIAbilityB</span></li><li>  <span class="hljs-title function_">startExternalDisplay</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">extCastDisplayInfo</span> !== <span class="hljs-literal">undefined</span> &amp;&amp;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">extCastDisplayInfo</span>.<span class="hljs-property">id</span> !== <span class="hljs-number">0</span> &amp;&amp;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">extCastDisplayInfo</span>.<span class="hljs-property">state</span> === avSession.<span class="hljs-property">CastDisplayState</span>.<span class="hljs-property">STATE_ON</span>) {</li><li>      <span class="hljs-keyword">let</span> id = <span class="hljs-variable language_">this</span>.<span class="hljs-property">extCastDisplayInfo</span>?.<span class="hljs-property">id</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in starting ability and the id of display is <span class="hljs-subst">${id}</span>`</span>);</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">startAbility</span>({</li><li>        <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>, <span class="hljs-comment">// 应用自有包名</span></li><li>        <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'AbilityB'</span></li><li>      }, {</li><li>        <span class="hljs-attr">displayId</span>: id <span class="hljs-comment">// 扩展屏ID</span></li><li>      });</li><li>      <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">'CastDisplayState'</span>, <span class="hljs-number">1</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 停止使用扩展屏</span></li><li>  <span class="hljs-title function_">stopExternalDisplay</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">'CastDisplayState'</span>, <span class="hljs-number">0</span>);</li><li>    <span class="hljs-comment">// 更新本页面显示。</span></li><li>  }</li></ol></pre></div></div> </li><li>UIAbilityB扩展屏显示内容绘制，需响应退出处理。<div _ngcontent-msq-c106="" class="highlight-div"><div _ngcontent-msq-c106="" class="highlight-div-header"><div _ngcontent-msq-c106="" class="highlight-div-header-left"><div _ngcontent-msq-c106="" class="handle-button expand-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-msq-c106="" class="highlight-div-header-right"><div _ngcontent-msq-c106="" class="handle-button ai-button"></div><div _ngcontent-msq-c106="" class="handle-button line-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-msq-c106="" class="handle-button theme-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-msq-c106="" class="handle-button copy-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-msq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbilityB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-attr">windowStage</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowStage</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// Main window is created, set main page for this ability</span></li><li>    windowStage.<span class="hljs-title function_">getMainWindowSync</span>().<span class="hljs-title function_">setWindowLayoutFullScreen</span>(<span class="hljs-literal">true</span>); <span class="hljs-comment">// 设置为全屏</span></li><li>    windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/CastPage'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load the content. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in loading the content. '</span>);</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div> <div _ngcontent-msq-c106="" class="highlight-div"><div _ngcontent-msq-c106="" class="highlight-div-header"><div _ngcontent-msq-c106="" class="highlight-div-header-left"><div _ngcontent-msq-c106="" class="handle-button expand-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-msq-c106="" class="highlight-div-header-right"><div _ngcontent-msq-c106="" class="handle-button ai-button"></div><div _ngcontent-msq-c106="" class="handle-button line-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-msq-c106="" class="handle-button theme-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-msq-c106="" class="handle-button copy-button"><div _ngcontent-msq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-msq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CastPage</span> {</li><li>  <span class="hljs-comment">// 监测到CastDisplayState变化后，当设备断开时，销毁本页内容。</span></li><li>  <span class="hljs-meta">@StorageLink</span>(<span class="hljs-string">'CastDisplayState'</span>) <span class="hljs-meta">@Watch</span>(<span class="hljs-string">'onDestroyExtend'</span>) <span class="hljs-keyword">private</span> <span class="hljs-attr">displayState</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">onDestroyExtend</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">displayState</span> === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;</li><li>    <span class="hljs-keyword">let</span> context = (<span class="hljs-title function_">getContext</span>(<span class="hljs-variable language_">this</span>) <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>)</li><li>    context.<span class="hljs-title function_">terminateSelf</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'CastPage finished'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to destroying CastPage. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  }</li><li>  <span class="hljs-comment">//...</span></li><li>}</li></ol></pre></div></div> </li></ol> </div> </div> <div></div></div>