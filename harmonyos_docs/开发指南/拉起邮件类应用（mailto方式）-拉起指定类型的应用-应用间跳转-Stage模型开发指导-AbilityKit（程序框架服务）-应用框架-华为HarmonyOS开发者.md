<h1 _ngcontent-oow-c119="" class="doc-title ng-star-inserted" title="拉起邮件类应用（mailto方式）"> 拉起邮件类应用（mailto方式） </h1>

<div _ngcontent-oow-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="使用场景">使用场景<i class="anchor-icon anchor-icon-link" anchorid="使用场景" tips="复制节点链接"></i></h2>          <p>通过mailto电子邮件协议，可以创建指向电子邮件地址的超链接，方便用户通过网页或应用中的超链接直接跳转电子邮件应用。同时，支持在mailto:的相关字段中定义邮件的收件人、主题、正文内容等，节省用户编辑邮件的时间。</p>     <p>常见的应用场景举例如下：</p>     <ul>      <li>从网页拉起：       <ul>        <li>用户在购物网站浏览产品页面时，看到“联系我们”按钮，点击后会拉起默认邮件客户端。收件人自动填写为客服邮箱，邮件主题设定为产品咨询。</li>        <li>在招聘岗位页面，点击“申请职位”按钮，会拉起邮件客户端。收件人地址为招聘邮箱，邮件主题为“应聘某职位”，正文可以预先填入申请模板。</li>       </ul></li>      <li>从应用拉起：       <ul>        <li>移动应用中，用户点击“反馈”按钮时，应用调用系统功能，拉起默认邮件客户端，预先填写反馈邮箱、问题描述等信息。</li>        <li>移动应用中，当用户点击“通过邮件分享”按钮时，应用会通过 mailto 调用邮件客户端，预填邮件主题和正文。         <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">           <ul>            <li>如果使用mailto方式拉起邮件应用，需要拉起方先按mailto格式封装字符串，再使用mailto方式拉起。邮件应用会解析收到的mailto协议字符串，并填充发件人、收件人、邮件内容等信息。</li>            <li>如果拉起方已知发件人、收件人、邮件内容等信息，推荐<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/start-email-apps">使用startAbilityByType方式拉起邮件应用</a>。</li>           </ul>          </div></div></div></li>       </ul></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="mailto协议格式">mailto协议格式<i class="anchor-icon anchor-icon-link" anchorid="mailto协议格式" tips="复制节点链接"></i></h2>          <p>mailto协议标准格式如下：</p>     <div _ngcontent-oow-c106="" class="highlight-div"><div _ngcontent-oow-c106="" class="highlight-div-header"><div _ngcontent-oow-c106="" class="highlight-div-header-left"><div _ngcontent-oow-c106="" class="handle-button expand-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oow-c106="" class="highlight-div-header-right"><div _ngcontent-oow-c106="" class="handle-button ai-button"></div><div _ngcontent-oow-c106="" class="handle-button line-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oow-c106="" class="handle-button theme-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oow-c106="" class="handle-button copy-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oow-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">mailto</span>:<span class="hljs-title class_">someone</span>@<span class="hljs-title class_">example</span>.<span class="hljs-title class_">com</span>?<span class="hljs-title class_">key1</span>=<span class="hljs-variable">value1</span>&amp;<span class="hljs-variable">key2</span>=<span class="hljs-variable">value2</span></li></ol></pre></div></div>     <ul>      <li>       <p>mailto:：mailto scheme，必填。</p></li>      <li>       <p>someone@example.com：收件人地址，选填。如果存在多个地址，用英文逗号分隔。</p></li>      <li>       <p>?：邮件头声明开始符号。如果带邮件头参数，则必填。</p></li>      <li>       <p>key-value：邮件头参数，详细参数见下表。</p>       <div class="tablenoborder">        <div class="tbBox"><table class="layoutFixed idpTab">         <thead>          <tr>           <th align="left" class="cellrowborder" id="mcps1.3.2.4.4.2.1.5.1.1" valign="top" width="25%">邮件头</th>           <th align="left" class="cellrowborder" id="mcps1.3.2.4.4.2.1.5.1.2" valign="top" width="25%">含义</th>           <th align="left" class="cellrowborder" id="mcps1.3.2.4.4.2.1.5.1.3" valign="top" width="25%">数据类型</th>           <th align="left" class="cellrowborder" id="mcps1.3.2.4.4.2.1.5.1.4" valign="top" width="25%">是否必填</th>          </tr>         </thead>                   <tbody><tr>           <td class="cellrowborder" valign="top" width="25%">subject</td>           <td class="cellrowborder" valign="top" width="25%">邮件主题</td>           <td class="cellrowborder" valign="top" width="25%">string</td>           <td class="cellrowborder" valign="top" width="25%">否</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="25%">body</td>           <td class="cellrowborder" valign="top" width="25%">邮件正文</td>           <td class="cellrowborder" valign="top" width="25%">string</td>           <td class="cellrowborder" valign="top" width="25%">否</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="25%">cc</td>           <td class="cellrowborder" valign="top" width="25%">抄送人，多个用逗号分隔</td>           <td class="cellrowborder" valign="top" width="25%">string</td>           <td class="cellrowborder" valign="top" width="25%">否</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="25%">bcc</td>           <td class="cellrowborder" valign="top" width="25%">密送人，多个用逗号分隔</td>           <td class="cellrowborder" valign="top" width="25%">string</td>           <td class="cellrowborder" valign="top" width="25%">否</td>          </tr>                 </tbody></table></div>       </div></li>     </ul>     <p>特殊符号处理：</p>     <p>如果邮件头参数值中存在特殊字符，如@、?、=、&amp;等符号，可能导致配置不生效。建议将特殊字符替换为ASCII码，并在ASCII码前加百分号%。</p>     <p>常用符号替换为ASCII码的对照表如下：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.8.1.9.1.1" valign="top" width="12.5%">特殊符号</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.8.1.9.1.2" valign="top" width="12.5%">:</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.8.1.9.1.3" valign="top" width="12.5%">@</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.8.1.9.1.4" valign="top" width="12.5%">?</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.8.1.9.1.5" valign="top" width="12.5%">=</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.8.1.9.1.6" valign="top" width="12.5%">&amp;</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.8.1.9.1.7" valign="top" width="12.5%">#</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.8.1.9.1.8" valign="top" width="12.5%">$</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="12.5%">替换编码</td>         <td class="cellrowborder" valign="top" width="12.5%">%3A</td>         <td class="cellrowborder" valign="top" width="12.5%">%40</td>         <td class="cellrowborder" valign="top" width="12.5%">%3F</td>         <td class="cellrowborder" valign="top" width="12.5%">%3D</td>         <td class="cellrowborder" valign="top" width="12.5%">%26</td>         <td class="cellrowborder" valign="top" width="12.5%">%23</td>         <td class="cellrowborder" valign="top" width="12.5%">%24</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="拉起方开发步骤">拉起方开发步骤<i class="anchor-icon anchor-icon-link" anchorid="拉起方开发步骤" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="从网页拉起" class="firsth2">从网页拉起<i class="anchor-icon anchor-icon-link" anchorid="从网页拉起" tips="复制节点链接"></i></h3>          <p>网页中的超链接需要满足mailto协议。示例如下：</p>     <div _ngcontent-oow-c106="" class="highlight-div"><div _ngcontent-oow-c106="" class="highlight-div-header"><div _ngcontent-oow-c106="" class="highlight-div-header-left"><div _ngcontent-oow-c106="" class="handle-button expand-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oow-c106="" class="highlight-div-header-right"><div _ngcontent-oow-c106="" class="handle-button ai-button"></div><div _ngcontent-oow-c106="" class="handle-button line-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oow-c106="" class="handle-button theme-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oow-c106="" class="handle-button copy-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oow-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-php-template" data-highlighted="yes"><ol class="linenums"><li><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"mailto:support@example.com?subject=Product Inquiry&amp;body=I am interested in..."</span>&gt;</span>联系我们<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span></li></ol></pre></div></div>     <p>实际开发时，需要将邮箱地址替换为真实的邮箱，邮件内容可以根据需要进行配置。</p>     <p>实现效果如下：</p>     <p><span><img originheight="674" originwidth="1194" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114930.86926496378503985210089678055542:50001231000000:2800:A1DF729A0E51D7DF96525C83280FF1D15C0A1985D51B34DD77EFA120566427A4.gif" width="920" height="519.3299832495812"></span></p>    </div>    <div class="tiledSection">     <h3 id="从应用拉起">从应用拉起<i class="anchor-icon anchor-icon-link" anchorid="从应用拉起" tips="复制节点链接"></i></h3>          <p>保证mailto字符串传入uri参数即可，在应用中page页面可通过 getHostContext() 获取context，在ability中可通过this.context获取context。</p>     <div _ngcontent-oow-c106="" class="highlight-div"><div _ngcontent-oow-c106="" class="highlight-div-header"><div _ngcontent-oow-c106="" class="highlight-div-header-left"><div _ngcontent-oow-c106="" class="handle-button expand-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oow-c106="" class="highlight-div-header-right"><div _ngcontent-oow-c106="" class="handle-button ai-button"></div><div _ngcontent-oow-c106="" class="handle-button line-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oow-c106="" class="handle-button theme-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oow-c106="" class="handle-button copy-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oow-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'反馈'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> ctx = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>          ctx.<span class="hljs-title function_">startAbility</span>({</li><li>            <span class="hljs-attr">action</span>: <span class="hljs-string">'ohos.want.action.sendToData'</span>,</li><li>            <span class="hljs-attr">uri</span>: <span class="hljs-string">'mailto:feedback@example.com?subject=App Feedback&amp;body=Please describe your feedback here...'</span></li><li>          })</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>实现效果如下：</p>     <p><span><img originheight="675" originwidth="1194" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114930.58219884010659958582693699621963:50001231000000:2800:8F812CD03A7AFB5D85B8ECE176701F785437988960589E4096BE6226024C7A10.gif" width="920" height="520.1005025125628"></span></p>    </div>    <div class="tiledSection">     <h2 id="目标方开发步骤">目标方开发步骤<i class="anchor-icon anchor-icon-link" anchorid="目标方开发步骤" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>为了能够支持被其他应用通过mailto协议拉起，目标应用需要在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file">module.json5配置文件</a>中声明mailto。</p>       <div _ngcontent-oow-c106="" class="highlight-div"><div _ngcontent-oow-c106="" class="highlight-div-header"><div _ngcontent-oow-c106="" class="highlight-div-header-left"><div _ngcontent-oow-c106="" class="handle-button expand-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oow-c106="" class="highlight-div-header-right"><div _ngcontent-oow-c106="" class="handle-button ai-button"></div><div _ngcontent-oow-c106="" class="handle-button line-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oow-c106="" class="handle-button theme-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oow-c106="" class="handle-button copy-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oow-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-attr">"abilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-attr">"skills"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>          <span class="hljs-punctuation">{</span></li><li>          <span class="hljs-attr">"actions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>              'ohos.want.action.sendToData'</li><li>            <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"uris"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>              <span class="hljs-punctuation">{</span></li><li>                <span class="hljs-attr">"scheme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mailto"</span><span class="hljs-punctuation">,</span></li><li>                <span class="hljs-comment">// linkFeature 用于适配垂类面板拉起</span></li><li>                <span class="hljs-attr">"linkFeature"</span><span class="hljs-punctuation">:</span> 'ComposeMail'</li><li>              <span class="hljs-punctuation">}</span></li><li>            <span class="hljs-punctuation">]</span></li><li>          <span class="hljs-punctuation">}</span></li><li>        <span class="hljs-punctuation">]</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div></li>      <li>       <p>目标应用在代码中取出uri参数进行解析。</p>       <div _ngcontent-oow-c106="" class="highlight-div"><div _ngcontent-oow-c106="" class="highlight-div-header"><div _ngcontent-oow-c106="" class="highlight-div-header-left"><div _ngcontent-oow-c106="" class="handle-button expand-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oow-c106="" class="highlight-div-header-right"><div _ngcontent-oow-c106="" class="handle-button ai-button"></div><div _ngcontent-oow-c106="" class="handle-button line-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oow-c106="" class="handle-button theme-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oow-c106="" class="handle-button copy-button"><div _ngcontent-oow-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oow-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// 应用冷启动生命周期回调，其他业务处理...</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseMailto</span>(want);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onNewWant</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// 应用热启动生命周期回调，其他业务处理...</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseMailto</span>(want);</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">parseMailto</span>(<span class="hljs-params">want: Want</span>) {</li><li>    <span class="hljs-keyword">const</span> uri = want?.<span class="hljs-property">uri</span>;</li><li>    <span class="hljs-keyword">if</span> (!uri || uri.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">0</span>) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-comment">// 开始解析 mailto...</span></li><li>  }</li><li>}</li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>