<h1 _ngcontent-uim-c119="" class="doc-title ng-star-inserted" title="指定二进制数据转换非对称密钥对(ArkTS)"> 指定二进制数据转换非对称密钥对(ArkTS) </h1>

<div _ngcontent-uim-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>以RSA、ECC、SM2为例，根据指定的非对称密钥二进制数据，生成非对称密钥对（KeyPair），即将外部或存储的二进制数据转换为算法库的密钥对象，该对象可用于后续的加解密等操作。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>针对非对称密钥的convertKey操作：</p>      <ul>       <li>        <p>公钥需满足：ASN.1语法、X.509规范、DER编码格式。</p></li>       <li>        <p>私钥需满足：ASN.1语法、PKCS#8规范、DER编码格式。</p></li>      </ul>     </div></div></div>    <div class="tiledSection">     <h2 id="指定二进制数据转换rsa密钥对">指定二进制数据转换RSA密钥对<i class="anchor-icon anchor-icon-link" anchorid="指定二进制数据转换rsa密钥对" tips="复制节点链接"></i></h2>          <p>对应的算法规格请查看<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/crypto-asym-key-generation-conversion-spec#rsa">非对称密钥生成和转换规格：RSA</a>。</p>     <ol>      <li>       <p>获取RSA公钥或私钥二进制数据，封装成DataBlob对象。</p>       <p>公钥和私钥可单独传入，此处示例传入公钥。</p></li>      <li>       <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cryptoframework#cryptoframeworkcreateasykeygenerator" target="_blank">cryptoFramework.createAsyKeyGenerator</a>，指定字符串参数'RSA1024'，创建RSA密钥类型为RSA1024、素数个数为2的非对称密钥生成器（AsyKeyGenerator）。</p>       <p>生成RSA非对称密钥时，默认素数为2，此处省略了参数PRIMES_2。</p></li>      <li>       <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cryptoframework#convertkey-3" target="_blank">AsyKeyGenerator.convertKey</a>，传入二进制密钥数据，生成非对称密钥对象（KeyPair）。即将外部或存储的二进制数据转换为算法库的密钥对象，该对象可用于后续的加解密等操作。</p></li>     </ol>     <ul>      <li>       <p>以使用callback方式生成RSA密钥对为例：</p>       <div _ngcontent-uim-c106="" class="highlight-div"><div _ngcontent-uim-c106="" class="highlight-div-header"><div _ngcontent-uim-c106="" class="highlight-div-header-left"><div _ngcontent-uim-c106="" class="handle-button expand-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uim-c106="" class="highlight-div-header-right"><div _ngcontent-uim-c106="" class="handle-button ai-button"></div><div _ngcontent-uim-c106="" class="handle-button line-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uim-c106="" class="handle-button theme-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uim-c106="" class="handle-button copy-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uim-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">convertAsyKey</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> rsaGenerator = cryptoFramework.<span class="hljs-title function_">createAsyKeyGenerator</span>(<span class="hljs-string">'RSA1024'</span>);</li><li>  <span class="hljs-keyword">let</span> pkVal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">48</span>, <span class="hljs-number">129</span>, <span class="hljs-number">159</span>, <span class="hljs-number">48</span>, <span class="hljs-number">13</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>, <span class="hljs-number">42</span>, <span class="hljs-number">134</span>, <span class="hljs-number">72</span>, <span class="hljs-number">134</span>, <span class="hljs-number">247</span>, <span class="hljs-number">13</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">129</span>, <span class="hljs-number">141</span>, <span class="hljs-number">0</span>, <span class="hljs-number">48</span>, <span class="hljs-number">129</span>, <span class="hljs-number">137</span>, <span class="hljs-number">2</span>, <span class="hljs-number">129</span>, <span class="hljs-number">129</span>, <span class="hljs-number">0</span>, <span class="hljs-number">174</span>, <span class="hljs-number">203</span>, <span class="hljs-number">113</span>, <span class="hljs-number">83</span>, <span class="hljs-number">113</span>, <span class="hljs-number">3</span>, <span class="hljs-number">143</span>, <span class="hljs-number">213</span>, <span class="hljs-number">194</span>, <span class="hljs-number">79</span>, <span class="hljs-number">91</span>, <span class="hljs-number">9</span>, <span class="hljs-number">51</span>, <span class="hljs-number">142</span>, <span class="hljs-number">87</span>, <span class="hljs-number">45</span>, <span class="hljs-number">97</span>, <span class="hljs-number">65</span>, <span class="hljs-number">136</span>, <span class="hljs-number">24</span>, <span class="hljs-number">166</span>, <span class="hljs-number">35</span>, <span class="hljs-number">5</span>, <span class="hljs-number">179</span>, <span class="hljs-number">42</span>, <span class="hljs-number">47</span>, <span class="hljs-number">212</span>, <span class="hljs-number">79</span>, <span class="hljs-number">111</span>, <span class="hljs-number">74</span>, <span class="hljs-number">134</span>, <span class="hljs-number">120</span>, <span class="hljs-number">73</span>, <span class="hljs-number">67</span>, <span class="hljs-number">21</span>, <span class="hljs-number">19</span>, <span class="hljs-number">235</span>, <span class="hljs-number">80</span>, <span class="hljs-number">46</span>, <span class="hljs-number">152</span>, <span class="hljs-number">209</span>, <span class="hljs-number">133</span>, <span class="hljs-number">232</span>, <span class="hljs-number">87</span>, <span class="hljs-number">192</span>, <span class="hljs-number">140</span>, <span class="hljs-number">18</span>, <span class="hljs-number">206</span>, <span class="hljs-number">27</span>, <span class="hljs-number">106</span>, <span class="hljs-number">106</span>, <span class="hljs-number">169</span>, <span class="hljs-number">106</span>, <span class="hljs-number">46</span>, <span class="hljs-number">135</span>, <span class="hljs-number">111</span>, <span class="hljs-number">118</span>, <span class="hljs-number">32</span>, <span class="hljs-number">129</span>, <span class="hljs-number">27</span>, <span class="hljs-number">89</span>, <span class="hljs-number">255</span>, <span class="hljs-number">183</span>, <span class="hljs-number">116</span>, <span class="hljs-number">247</span>, <span class="hljs-number">38</span>, <span class="hljs-number">12</span>, <span class="hljs-number">7</span>, <span class="hljs-number">238</span>, <span class="hljs-number">77</span>, <span class="hljs-number">151</span>, <span class="hljs-number">167</span>, <span class="hljs-number">6</span>, <span class="hljs-number">102</span>, <span class="hljs-number">153</span>, <span class="hljs-number">126</span>, <span class="hljs-number">66</span>, <span class="hljs-number">28</span>, <span class="hljs-number">253</span>, <span class="hljs-number">253</span>, <span class="hljs-number">216</span>, <span class="hljs-number">64</span>, <span class="hljs-number">20</span>, <span class="hljs-number">138</span>, <span class="hljs-number">117</span>, <span class="hljs-number">72</span>, <span class="hljs-number">15</span>, <span class="hljs-number">216</span>, <span class="hljs-number">178</span>, <span class="hljs-number">37</span>, <span class="hljs-number">208</span>, <span class="hljs-number">179</span>, <span class="hljs-number">63</span>, <span class="hljs-number">204</span>, <span class="hljs-number">39</span>, <span class="hljs-number">94</span>, <span class="hljs-number">244</span>, <span class="hljs-number">170</span>, <span class="hljs-number">48</span>, <span class="hljs-number">190</span>, <span class="hljs-number">21</span>, <span class="hljs-number">11</span>, <span class="hljs-number">73</span>, <span class="hljs-number">169</span>, <span class="hljs-number">156</span>, <span class="hljs-number">104</span>, <span class="hljs-number">193</span>, <span class="hljs-number">3</span>, <span class="hljs-number">17</span>, <span class="hljs-number">100</span>, <span class="hljs-number">28</span>, <span class="hljs-number">60</span>, <span class="hljs-number">50</span>, <span class="hljs-number">92</span>, <span class="hljs-number">235</span>, <span class="hljs-number">218</span>, <span class="hljs-number">57</span>, <span class="hljs-number">73</span>, <span class="hljs-number">119</span>, <span class="hljs-number">19</span>, <span class="hljs-number">101</span>, <span class="hljs-number">164</span>, <span class="hljs-number">192</span>, <span class="hljs-number">161</span>, <span class="hljs-number">197</span>, <span class="hljs-number">106</span>, <span class="hljs-number">105</span>, <span class="hljs-number">73</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>]);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pkBlob</span>: cryptoFramework.<span class="hljs-property">DataBlob</span> = { <span class="hljs-attr">data</span>: pkVal };</li><li>  rsaGenerator.<span class="hljs-title function_">convertKey</span>(pkBlob, <span class="hljs-literal">null</span>, <span class="hljs-function">(<span class="hljs-params">err, keyPair</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`convertKey failed, <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'convertKey success'</span>);</li><li>  });</li><li>}</li></ol></pre></div></div></li>      <li>       <p>同步返回结果（调用方法<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cryptoframework#convertkeysync12" target="_blank">convertKeySync</a>）：</p>       <div _ngcontent-uim-c106="" class="highlight-div"><div _ngcontent-uim-c106="" class="highlight-div-header"><div _ngcontent-uim-c106="" class="highlight-div-header-left"><div _ngcontent-uim-c106="" class="handle-button expand-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uim-c106="" class="highlight-div-header-right"><div _ngcontent-uim-c106="" class="handle-button ai-button"></div><div _ngcontent-uim-c106="" class="handle-button line-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uim-c106="" class="handle-button theme-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uim-c106="" class="handle-button copy-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uim-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">convertAsyKeySync</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> rsaGenerator = cryptoFramework.<span class="hljs-title function_">createAsyKeyGenerator</span>(<span class="hljs-string">'RSA1024'</span>);</li><li>  <span class="hljs-keyword">let</span> pkVal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">48</span>, <span class="hljs-number">129</span>, <span class="hljs-number">159</span>, <span class="hljs-number">48</span>, <span class="hljs-number">13</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>, <span class="hljs-number">42</span>, <span class="hljs-number">134</span>, <span class="hljs-number">72</span>, <span class="hljs-number">134</span>, <span class="hljs-number">247</span>, <span class="hljs-number">13</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">129</span>, <span class="hljs-number">141</span>, <span class="hljs-number">0</span>, <span class="hljs-number">48</span>, <span class="hljs-number">129</span>, <span class="hljs-number">137</span>, <span class="hljs-number">2</span>, <span class="hljs-number">129</span>, <span class="hljs-number">129</span>, <span class="hljs-number">0</span>, <span class="hljs-number">174</span>, <span class="hljs-number">203</span>, <span class="hljs-number">113</span>, <span class="hljs-number">83</span>, <span class="hljs-number">113</span>, <span class="hljs-number">3</span>, <span class="hljs-number">143</span>, <span class="hljs-number">213</span>, <span class="hljs-number">194</span>, <span class="hljs-number">79</span>, <span class="hljs-number">91</span>, <span class="hljs-number">9</span>, <span class="hljs-number">51</span>, <span class="hljs-number">142</span>, <span class="hljs-number">87</span>, <span class="hljs-number">45</span>, <span class="hljs-number">97</span>, <span class="hljs-number">65</span>, <span class="hljs-number">136</span>, <span class="hljs-number">24</span>, <span class="hljs-number">166</span>, <span class="hljs-number">35</span>, <span class="hljs-number">5</span>, <span class="hljs-number">179</span>, <span class="hljs-number">42</span>, <span class="hljs-number">47</span>, <span class="hljs-number">212</span>, <span class="hljs-number">79</span>, <span class="hljs-number">111</span>, <span class="hljs-number">74</span>, <span class="hljs-number">134</span>, <span class="hljs-number">120</span>, <span class="hljs-number">73</span>, <span class="hljs-number">67</span>, <span class="hljs-number">21</span>, <span class="hljs-number">19</span>, <span class="hljs-number">235</span>, <span class="hljs-number">80</span>, <span class="hljs-number">46</span>, <span class="hljs-number">152</span>, <span class="hljs-number">209</span>, <span class="hljs-number">133</span>, <span class="hljs-number">232</span>, <span class="hljs-number">87</span>, <span class="hljs-number">192</span>, <span class="hljs-number">140</span>, <span class="hljs-number">18</span>, <span class="hljs-number">206</span>, <span class="hljs-number">27</span>, <span class="hljs-number">106</span>, <span class="hljs-number">106</span>, <span class="hljs-number">169</span>, <span class="hljs-number">106</span>, <span class="hljs-number">46</span>, <span class="hljs-number">135</span>, <span class="hljs-number">111</span>, <span class="hljs-number">118</span>, <span class="hljs-number">32</span>, <span class="hljs-number">129</span>, <span class="hljs-number">27</span>, <span class="hljs-number">89</span>, <span class="hljs-number">255</span>, <span class="hljs-number">183</span>, <span class="hljs-number">116</span>, <span class="hljs-number">247</span>, <span class="hljs-number">38</span>, <span class="hljs-number">12</span>, <span class="hljs-number">7</span>, <span class="hljs-number">238</span>, <span class="hljs-number">77</span>, <span class="hljs-number">151</span>, <span class="hljs-number">167</span>, <span class="hljs-number">6</span>, <span class="hljs-number">102</span>, <span class="hljs-number">153</span>, <span class="hljs-number">126</span>, <span class="hljs-number">66</span>, <span class="hljs-number">28</span>, <span class="hljs-number">253</span>, <span class="hljs-number">253</span>, <span class="hljs-number">216</span>, <span class="hljs-number">64</span>, <span class="hljs-number">20</span>, <span class="hljs-number">138</span>, <span class="hljs-number">117</span>, <span class="hljs-number">72</span>, <span class="hljs-number">15</span>, <span class="hljs-number">216</span>, <span class="hljs-number">178</span>, <span class="hljs-number">37</span>, <span class="hljs-number">208</span>, <span class="hljs-number">179</span>, <span class="hljs-number">63</span>, <span class="hljs-number">204</span>, <span class="hljs-number">39</span>, <span class="hljs-number">94</span>, <span class="hljs-number">244</span>, <span class="hljs-number">170</span>, <span class="hljs-number">48</span>, <span class="hljs-number">190</span>, <span class="hljs-number">21</span>, <span class="hljs-number">11</span>, <span class="hljs-number">73</span>, <span class="hljs-number">169</span>, <span class="hljs-number">156</span>, <span class="hljs-number">104</span>, <span class="hljs-number">193</span>, <span class="hljs-number">3</span>, <span class="hljs-number">17</span>, <span class="hljs-number">100</span>, <span class="hljs-number">28</span>, <span class="hljs-number">60</span>, <span class="hljs-number">50</span>, <span class="hljs-number">92</span>, <span class="hljs-number">235</span>, <span class="hljs-number">218</span>, <span class="hljs-number">57</span>, <span class="hljs-number">73</span>, <span class="hljs-number">119</span>, <span class="hljs-number">19</span>, <span class="hljs-number">101</span>, <span class="hljs-number">164</span>, <span class="hljs-number">192</span>, <span class="hljs-number">161</span>, <span class="hljs-number">197</span>, <span class="hljs-number">106</span>, <span class="hljs-number">105</span>, <span class="hljs-number">73</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>]);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pkBlob</span>: cryptoFramework.<span class="hljs-property">DataBlob</span> = { <span class="hljs-attr">data</span>: pkVal };</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> keyPair = rsaGenerator.<span class="hljs-title function_">convertKeySync</span>(pkBlob, <span class="hljs-literal">null</span>);</li><li>    <span class="hljs-keyword">if</span> (keyPair !== <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'convertKeySync success'</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`get key pair failed, <span class="hljs-subst">${e.code}</span>, <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="指定二进制数据转换ecc密钥对">指定二进制数据转换ECC密钥对<i class="anchor-icon anchor-icon-link" anchorid="指定二进制数据转换ecc密钥对" tips="复制节点链接"></i></h2>          <p>查看<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/crypto-asym-key-generation-conversion-spec#ecc">非对称密钥生成和转换规格：ECC</a>。</p>     <ol>      <li>       <p>获取ECC公钥或私钥二进制数据，封装成DataBlob对象。</p>       <p>公钥和私钥可以只传入其中一个，此处示例以传入公钥和私钥为例。</p></li>      <li>       <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cryptoframework#cryptoframeworkcreateasykeygenerator" target="_blank">cryptoFramework.createAsyKeyGenerator</a>，指定字符串参数'ECC256'，创建密钥算法为ECC、密钥长度为256位的非对称密钥生成器（AsyKeyGenerator）。</p></li>      <li>       <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cryptoframework#convertkey-3" target="_blank">AsyKeyGenerator.convertKey</a>，传入公钥二进制和私钥二进制，生成非对称密钥对象（KeyPair）。</p></li>     </ol>     <ul>      <li>       <p>使用callback方式生成ECC密钥对：</p>       <div _ngcontent-uim-c106="" class="highlight-div"><div _ngcontent-uim-c106="" class="highlight-div-header"><div _ngcontent-uim-c106="" class="highlight-div-header-left"><div _ngcontent-uim-c106="" class="handle-button expand-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uim-c106="" class="highlight-div-header-right"><div _ngcontent-uim-c106="" class="handle-button ai-button"></div><div _ngcontent-uim-c106="" class="handle-button line-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uim-c106="" class="handle-button theme-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uim-c106="" class="handle-button copy-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uim-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">convertEccAsyKey</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> pubKeyArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">48</span>, <span class="hljs-number">89</span>, <span class="hljs-number">48</span>, <span class="hljs-number">19</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">42</span>, <span class="hljs-number">134</span>, <span class="hljs-number">72</span>, <span class="hljs-number">206</span>, <span class="hljs-number">61</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">42</span>, <span class="hljs-number">134</span>, <span class="hljs-number">72</span>, <span class="hljs-number">206</span>, <span class="hljs-number">61</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">3</span>, <span class="hljs-number">66</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">83</span>, <span class="hljs-number">96</span>, <span class="hljs-number">142</span>, <span class="hljs-number">9</span>, <span class="hljs-number">86</span>, <span class="hljs-number">214</span>, <span class="hljs-number">126</span>, <span class="hljs-number">106</span>, <span class="hljs-number">247</span>, <span class="hljs-number">233</span>, <span class="hljs-number">92</span>, <span class="hljs-number">125</span>, <span class="hljs-number">4</span>, <span class="hljs-number">128</span>, <span class="hljs-number">138</span>, <span class="hljs-number">105</span>, <span class="hljs-number">246</span>, <span class="hljs-number">162</span>, <span class="hljs-number">215</span>, <span class="hljs-number">71</span>, <span class="hljs-number">81</span>, <span class="hljs-number">58</span>, <span class="hljs-number">202</span>, <span class="hljs-number">121</span>, <span class="hljs-number">26</span>, <span class="hljs-number">105</span>, <span class="hljs-number">211</span>, <span class="hljs-number">55</span>, <span class="hljs-number">130</span>, <span class="hljs-number">45</span>, <span class="hljs-number">236</span>, <span class="hljs-number">143</span>, <span class="hljs-number">55</span>, <span class="hljs-number">16</span>, <span class="hljs-number">248</span>, <span class="hljs-number">75</span>, <span class="hljs-number">167</span>, <span class="hljs-number">160</span>, <span class="hljs-number">167</span>, <span class="hljs-number">106</span>, <span class="hljs-number">2</span>, <span class="hljs-number">152</span>, <span class="hljs-number">243</span>, <span class="hljs-number">44</span>, <span class="hljs-number">68</span>, <span class="hljs-number">66</span>, <span class="hljs-number">0</span>, <span class="hljs-number">167</span>, <span class="hljs-number">99</span>, <span class="hljs-number">92</span>, <span class="hljs-number">235</span>, <span class="hljs-number">215</span>, <span class="hljs-number">159</span>, <span class="hljs-number">239</span>, <span class="hljs-number">28</span>, <span class="hljs-number">106</span>, <span class="hljs-number">124</span>, <span class="hljs-number">171</span>, <span class="hljs-number">34</span>, <span class="hljs-number">145</span>, <span class="hljs-number">124</span>, <span class="hljs-number">174</span>, <span class="hljs-number">57</span>, <span class="hljs-number">92</span>]);</li><li>  <span class="hljs-keyword">let</span> priKeyArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">48</span>, <span class="hljs-number">49</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">32</span>, <span class="hljs-number">115</span>, <span class="hljs-number">56</span>, <span class="hljs-number">137</span>, <span class="hljs-number">35</span>, <span class="hljs-number">207</span>, <span class="hljs-number">0</span>, <span class="hljs-number">60</span>, <span class="hljs-number">191</span>, <span class="hljs-number">90</span>, <span class="hljs-number">61</span>, <span class="hljs-number">136</span>, <span class="hljs-number">105</span>, <span class="hljs-number">210</span>, <span class="hljs-number">16</span>, <span class="hljs-number">27</span>, <span class="hljs-number">4</span>, <span class="hljs-number">171</span>, <span class="hljs-number">57</span>, <span class="hljs-number">10</span>, <span class="hljs-number">61</span>, <span class="hljs-number">123</span>, <span class="hljs-number">40</span>, <span class="hljs-number">189</span>, <span class="hljs-number">28</span>, <span class="hljs-number">34</span>, <span class="hljs-number">207</span>, <span class="hljs-number">236</span>, <span class="hljs-number">22</span>, <span class="hljs-number">45</span>, <span class="hljs-number">223</span>, <span class="hljs-number">10</span>, <span class="hljs-number">189</span>, <span class="hljs-number">160</span>, <span class="hljs-number">10</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">42</span>, <span class="hljs-number">134</span>, <span class="hljs-number">72</span>, <span class="hljs-number">206</span>, <span class="hljs-number">61</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>]);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pubKeyBlob</span>: cryptoFramework.<span class="hljs-property">DataBlob</span> = { <span class="hljs-attr">data</span>: pubKeyArray };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">priKeyBlob</span>: cryptoFramework.<span class="hljs-property">DataBlob</span> = { <span class="hljs-attr">data</span>: priKeyArray };</li><li>  <span class="hljs-keyword">let</span> generator = cryptoFramework.<span class="hljs-title function_">createAsyKeyGenerator</span>(<span class="hljs-string">'ECC256'</span>);</li><li>  generator.<span class="hljs-title function_">convertKey</span>(pubKeyBlob, priKeyBlob, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`convertKey failed, <span class="hljs-subst">${error.code}</span>, <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'convertKey success'</span>);</li><li>  });</li><li>}</li></ol></pre></div></div></li>      <li>       <p>同步返回结果（调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cryptoframework#convertkeysync12" target="_blank">convertKeySync</a>）：</p>       <div _ngcontent-uim-c106="" class="highlight-div"><div _ngcontent-uim-c106="" class="highlight-div-header"><div _ngcontent-uim-c106="" class="highlight-div-header-left"><div _ngcontent-uim-c106="" class="handle-button expand-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uim-c106="" class="highlight-div-header-right"><div _ngcontent-uim-c106="" class="handle-button ai-button"></div><div _ngcontent-uim-c106="" class="handle-button line-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uim-c106="" class="handle-button theme-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uim-c106="" class="handle-button copy-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uim-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">convertECCAsyKeySync</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> pubKeyArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">48</span>, <span class="hljs-number">89</span>, <span class="hljs-number">48</span>, <span class="hljs-number">19</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">42</span>, <span class="hljs-number">134</span>, <span class="hljs-number">72</span>, <span class="hljs-number">206</span>, <span class="hljs-number">61</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">42</span>, <span class="hljs-number">134</span>, <span class="hljs-number">72</span>, <span class="hljs-number">206</span>, <span class="hljs-number">61</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">3</span>, <span class="hljs-number">66</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">83</span>, <span class="hljs-number">96</span>, <span class="hljs-number">142</span>, <span class="hljs-number">9</span>, <span class="hljs-number">86</span>, <span class="hljs-number">214</span>, <span class="hljs-number">126</span>, <span class="hljs-number">106</span>, <span class="hljs-number">247</span>, <span class="hljs-number">233</span>, <span class="hljs-number">92</span>, <span class="hljs-number">125</span>, <span class="hljs-number">4</span>, <span class="hljs-number">128</span>, <span class="hljs-number">138</span>, <span class="hljs-number">105</span>, <span class="hljs-number">246</span>, <span class="hljs-number">162</span>, <span class="hljs-number">215</span>, <span class="hljs-number">71</span>, <span class="hljs-number">81</span>, <span class="hljs-number">58</span>, <span class="hljs-number">202</span>, <span class="hljs-number">121</span>, <span class="hljs-number">26</span>, <span class="hljs-number">105</span>, <span class="hljs-number">211</span>, <span class="hljs-number">55</span>, <span class="hljs-number">130</span>, <span class="hljs-number">45</span>, <span class="hljs-number">236</span>, <span class="hljs-number">143</span>, <span class="hljs-number">55</span>, <span class="hljs-number">16</span>, <span class="hljs-number">248</span>, <span class="hljs-number">75</span>, <span class="hljs-number">167</span>, <span class="hljs-number">160</span>, <span class="hljs-number">167</span>, <span class="hljs-number">106</span>, <span class="hljs-number">2</span>, <span class="hljs-number">152</span>, <span class="hljs-number">243</span>, <span class="hljs-number">44</span>, <span class="hljs-number">68</span>, <span class="hljs-number">66</span>, <span class="hljs-number">0</span>, <span class="hljs-number">167</span>, <span class="hljs-number">99</span>, <span class="hljs-number">92</span>, <span class="hljs-number">235</span>, <span class="hljs-number">215</span>, <span class="hljs-number">159</span>, <span class="hljs-number">239</span>, <span class="hljs-number">28</span>, <span class="hljs-number">106</span>, <span class="hljs-number">124</span>, <span class="hljs-number">171</span>, <span class="hljs-number">34</span>, <span class="hljs-number">145</span>, <span class="hljs-number">124</span>, <span class="hljs-number">174</span>, <span class="hljs-number">57</span>, <span class="hljs-number">92</span>]);</li><li>  <span class="hljs-keyword">let</span> priKeyArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">48</span>, <span class="hljs-number">49</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">32</span>, <span class="hljs-number">115</span>, <span class="hljs-number">56</span>, <span class="hljs-number">137</span>, <span class="hljs-number">35</span>, <span class="hljs-number">207</span>, <span class="hljs-number">0</span>, <span class="hljs-number">60</span>, <span class="hljs-number">191</span>, <span class="hljs-number">90</span>, <span class="hljs-number">61</span>, <span class="hljs-number">136</span>, <span class="hljs-number">105</span>, <span class="hljs-number">210</span>, <span class="hljs-number">16</span>, <span class="hljs-number">27</span>, <span class="hljs-number">4</span>, <span class="hljs-number">171</span>, <span class="hljs-number">57</span>, <span class="hljs-number">10</span>, <span class="hljs-number">61</span>, <span class="hljs-number">123</span>, <span class="hljs-number">40</span>, <span class="hljs-number">189</span>, <span class="hljs-number">28</span>, <span class="hljs-number">34</span>, <span class="hljs-number">207</span>, <span class="hljs-number">236</span>, <span class="hljs-number">22</span>, <span class="hljs-number">45</span>, <span class="hljs-number">223</span>, <span class="hljs-number">10</span>, <span class="hljs-number">189</span>, <span class="hljs-number">160</span>, <span class="hljs-number">10</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">42</span>, <span class="hljs-number">134</span>, <span class="hljs-number">72</span>, <span class="hljs-number">206</span>, <span class="hljs-number">61</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>]);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pubKeyBlob</span>: cryptoFramework.<span class="hljs-property">DataBlob</span> = { <span class="hljs-attr">data</span>: pubKeyArray };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">priKeyBlob</span>: cryptoFramework.<span class="hljs-property">DataBlob</span> = { <span class="hljs-attr">data</span>: priKeyArray };</li><li>  <span class="hljs-keyword">let</span> generator = cryptoFramework.<span class="hljs-title function_">createAsyKeyGenerator</span>(<span class="hljs-string">'ECC256'</span>);</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> keyPair = generator.<span class="hljs-title function_">convertKeySync</span>(pubKeyBlob, priKeyBlob);</li><li>    <span class="hljs-keyword">if</span> (keyPair !== <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'convertKeySync success'</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`get key pair failed, <span class="hljs-subst">${e.code}</span>, <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="指定pkcs8二进制数据转换ecc私钥">指定PKCS8二进制数据转换ECC私钥<i class="anchor-icon anchor-icon-link" anchorid="指定pkcs8二进制数据转换ecc私钥" tips="复制节点链接"></i></h2>          <p>查看<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/crypto-asym-key-generation-conversion-spec#ecc">非对称密钥生成和转换规格：ECC</a>。</p>     <p>获取ECC公钥或私钥二进制数据，封装成DataBlob对象再转为ECC密钥格式。示例如下：</p>     <ol>      <li>       <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cryptoframework#cryptoframeworkcreateasykeygenerator" target="_blank">cryptoFramework.createAsyKeyGenerator</a>，指定字符串参数'ECC256'，创建密钥算法为ECC、密钥长度为256位的非对称密钥生成器（AsyKeyGenerator）。</p></li>      <li>       <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cryptoframework#getencoded" target="_blank">PubKey.getEncoded</a>获取公钥数据字节流，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cryptoframework#getencodedder12-1" target="_blank">PriKey.getEncodeDer</a> 并设置参数为'PKCS8'，获取私钥数据的字节流。由此分别获取密钥对象的二进制数据。</p></li>      <li>       <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cryptoframework#convertkey-3" target="_blank">AsyKeyGenerator.convertKey</a>，将生成的二进制密钥数据转为非对称密钥对象（KeyPair）。</p></li>     </ol>     <div _ngcontent-uim-c106="" class="highlight-div"><div _ngcontent-uim-c106="" class="highlight-div-header"><div _ngcontent-uim-c106="" class="highlight-div-header-left"><div _ngcontent-uim-c106="" class="handle-button expand-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uim-c106="" class="highlight-div-header-right"><div _ngcontent-uim-c106="" class="handle-button ai-button"></div><div _ngcontent-uim-c106="" class="handle-button line-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uim-c106="" class="handle-button theme-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uim-c106="" class="handle-button copy-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uim-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 创建一个AsyKeyGenerator实例。</span></li><li>  <span class="hljs-keyword">let</span> eccGenerator = cryptoFramework.<span class="hljs-title function_">createAsyKeyGenerator</span>(<span class="hljs-string">'ECC256'</span>);</li><li>  <span class="hljs-comment">// 使用密钥生成器随机生成非对称密钥对。</span></li><li>  <span class="hljs-keyword">let</span> keyGenPromise = eccGenerator.<span class="hljs-title function_">generateKeyPair</span>();</li><li>  keyGenPromise.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">keyPair</span> =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> pubKey = keyPair.<span class="hljs-property">pubKey</span>;</li><li>    <span class="hljs-keyword">let</span> priKey = keyPair.<span class="hljs-property">priKey</span>;</li><li>    <span class="hljs-comment">// 获取非对称密钥对ECC的二进制数据。</span></li><li>    <span class="hljs-keyword">let</span> pubBlob = pubKey.<span class="hljs-title function_">getEncoded</span>();</li><li>    <span class="hljs-keyword">let</span> skBlob = priKey.<span class="hljs-title function_">getEncodedDer</span>(<span class="hljs-string">'PKCS8'</span>);</li><li>    <span class="hljs-keyword">let</span> generator = cryptoFramework.<span class="hljs-title function_">createAsyKeyGenerator</span>(<span class="hljs-string">'ECC256'</span>);</li><li>    generator.<span class="hljs-title function_">convertKey</span>(pubBlob, skBlob, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`convertKey failed, <span class="hljs-subst">${error.code}</span>, <span class="hljs-subst">${error.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'convertKey success'</span>);</li><li>    });</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="指定二进制数据转换sm2密钥对">指定二进制数据转换SM2密钥对<i class="anchor-icon anchor-icon-link" anchorid="指定二进制数据转换sm2密钥对" tips="复制节点链接"></i></h2>          <p>查看<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/crypto-asym-key-generation-conversion-spec#sm2">非对称密钥生成和转换规格：SM2</a>。</p>     <ol>      <li>       <p>获取SM2公钥或私钥的二进制数据，封装成DataBlob对象。</p>       <p>公钥和私钥可以只传入其中一个，示例以传入公钥和私钥为例。</p></li>      <li>       <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cryptoframework#cryptoframeworkcreateasykeygenerator" target="_blank">cryptoFramework.createAsyKeyGenerator</a>，指定字符串参数'SM2_256'，创建密钥算法为SM2、密钥长度为256位的非对称密钥生成器（AsyKeyGenerator）。</p></li>      <li>       <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cryptoframework#convertkey-3" target="_blank">AsyKeyGenerator.convertKey</a>，传入公钥和私钥的二进制数据，生成非对称密钥对象（KeyPair）。</p></li>     </ol>     <ul>      <li>       <p>以使用callback方式生成SM2密钥对为例：</p>       <div _ngcontent-uim-c106="" class="highlight-div"><div _ngcontent-uim-c106="" class="highlight-div-header"><div _ngcontent-uim-c106="" class="highlight-div-header-left"><div _ngcontent-uim-c106="" class="handle-button expand-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uim-c106="" class="highlight-div-header-right"><div _ngcontent-uim-c106="" class="handle-button ai-button"></div><div _ngcontent-uim-c106="" class="handle-button line-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uim-c106="" class="handle-button theme-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uim-c106="" class="handle-button copy-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uim-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">convertSM2AsyKey</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> pubKeyArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">48</span>, <span class="hljs-number">89</span>, <span class="hljs-number">48</span>, <span class="hljs-number">19</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">42</span>, <span class="hljs-number">134</span>, <span class="hljs-number">72</span>, <span class="hljs-number">206</span>, <span class="hljs-number">61</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">42</span>, <span class="hljs-number">129</span>, <span class="hljs-number">28</span>, <span class="hljs-number">207</span>, <span class="hljs-number">85</span>, <span class="hljs-number">1</span>, <span class="hljs-number">130</span>, <span class="hljs-number">45</span>, <span class="hljs-number">3</span>, <span class="hljs-number">66</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">90</span>, <span class="hljs-number">3</span>, <span class="hljs-number">58</span>, <span class="hljs-number">157</span>, <span class="hljs-number">190</span>, <span class="hljs-number">248</span>, <span class="hljs-number">76</span>, <span class="hljs-number">7</span>, <span class="hljs-number">132</span>, <span class="hljs-number">200</span>, <span class="hljs-number">151</span>, <span class="hljs-number">208</span>, <span class="hljs-number">112</span>, <span class="hljs-number">230</span>, <span class="hljs-number">96</span>, <span class="hljs-number">140</span>, <span class="hljs-number">90</span>, <span class="hljs-number">238</span>, <span class="hljs-number">211</span>, <span class="hljs-number">155</span>, <span class="hljs-number">128</span>, <span class="hljs-number">109</span>, <span class="hljs-number">248</span>, <span class="hljs-number">40</span>, <span class="hljs-number">83</span>, <span class="hljs-number">214</span>, <span class="hljs-number">78</span>, <span class="hljs-number">42</span>, <span class="hljs-number">104</span>, <span class="hljs-number">106</span>, <span class="hljs-number">55</span>, <span class="hljs-number">148</span>, <span class="hljs-number">249</span>, <span class="hljs-number">35</span>, <span class="hljs-number">61</span>, <span class="hljs-number">32</span>, <span class="hljs-number">221</span>, <span class="hljs-number">135</span>, <span class="hljs-number">143</span>, <span class="hljs-number">100</span>, <span class="hljs-number">45</span>, <span class="hljs-number">97</span>, <span class="hljs-number">194</span>, <span class="hljs-number">176</span>, <span class="hljs-number">52</span>, <span class="hljs-number">73</span>, <span class="hljs-number">136</span>, <span class="hljs-number">174</span>, <span class="hljs-number">40</span>, <span class="hljs-number">70</span>, <span class="hljs-number">70</span>, <span class="hljs-number">34</span>, <span class="hljs-number">103</span>, <span class="hljs-number">103</span>, <span class="hljs-number">161</span>, <span class="hljs-number">99</span>, <span class="hljs-number">27</span>, <span class="hljs-number">187</span>, <span class="hljs-number">13</span>, <span class="hljs-number">187</span>, <span class="hljs-number">109</span>, <span class="hljs-number">244</span>, <span class="hljs-number">13</span>, <span class="hljs-number">7</span>]);</li><li>  <span class="hljs-keyword">let</span> priKeyArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">48</span>, <span class="hljs-number">49</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">32</span>, <span class="hljs-number">54</span>, <span class="hljs-number">41</span>, <span class="hljs-number">239</span>, <span class="hljs-number">240</span>, <span class="hljs-number">63</span>, <span class="hljs-number">188</span>, <span class="hljs-number">134</span>, <span class="hljs-number">113</span>, <span class="hljs-number">31</span>, <span class="hljs-number">102</span>, <span class="hljs-number">149</span>, <span class="hljs-number">203</span>, <span class="hljs-number">245</span>, <span class="hljs-number">89</span>, <span class="hljs-number">15</span>, <span class="hljs-number">15</span>, <span class="hljs-number">47</span>, <span class="hljs-number">202</span>, <span class="hljs-number">170</span>, <span class="hljs-number">60</span>, <span class="hljs-number">38</span>, <span class="hljs-number">154</span>, <span class="hljs-number">28</span>, <span class="hljs-number">169</span>, <span class="hljs-number">189</span>, <span class="hljs-number">100</span>, <span class="hljs-number">251</span>, <span class="hljs-number">76</span>, <span class="hljs-number">112</span>, <span class="hljs-number">223</span>, <span class="hljs-number">156</span>, <span class="hljs-number">159</span>, <span class="hljs-number">160</span>, <span class="hljs-number">10</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">42</span>, <span class="hljs-number">129</span>, <span class="hljs-number">28</span>, <span class="hljs-number">207</span>, <span class="hljs-number">85</span>, <span class="hljs-number">1</span>, <span class="hljs-number">130</span>, <span class="hljs-number">45</span>]);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pubKeyBlob</span>: cryptoFramework.<span class="hljs-property">DataBlob</span> = { <span class="hljs-attr">data</span>: pubKeyArray };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">priKeyBlob</span>: cryptoFramework.<span class="hljs-property">DataBlob</span> = { <span class="hljs-attr">data</span>: priKeyArray };</li><li>  <span class="hljs-keyword">let</span> generator = cryptoFramework.<span class="hljs-title function_">createAsyKeyGenerator</span>(<span class="hljs-string">'SM2_256'</span>);</li><li>  generator.<span class="hljs-title function_">convertKey</span>(pubKeyBlob, priKeyBlob, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`convertKey failed, <span class="hljs-subst">${error.code}</span>, <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'convertKey success'</span>);</li><li>  });</li><li>}</li></ol></pre></div></div></li>      <li>       <p>同步返回结果（调用方法<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cryptoframework#convertkeysync12" target="_blank">convertKeySync</a>）：</p>       <div _ngcontent-uim-c106="" class="highlight-div"><div _ngcontent-uim-c106="" class="highlight-div-header"><div _ngcontent-uim-c106="" class="highlight-div-header-left"><div _ngcontent-uim-c106="" class="handle-button expand-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uim-c106="" class="highlight-div-header-right"><div _ngcontent-uim-c106="" class="handle-button ai-button"></div><div _ngcontent-uim-c106="" class="handle-button line-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uim-c106="" class="handle-button theme-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uim-c106="" class="handle-button copy-button"><div _ngcontent-uim-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uim-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">convertSM2AsyKeySync</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> pubKeyArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">48</span>, <span class="hljs-number">89</span>, <span class="hljs-number">48</span>, <span class="hljs-number">19</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">42</span>, <span class="hljs-number">134</span>, <span class="hljs-number">72</span>, <span class="hljs-number">206</span>, <span class="hljs-number">61</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">42</span>, <span class="hljs-number">129</span>, <span class="hljs-number">28</span>, <span class="hljs-number">207</span>, <span class="hljs-number">85</span>, <span class="hljs-number">1</span>, <span class="hljs-number">130</span>, <span class="hljs-number">45</span>, <span class="hljs-number">3</span>, <span class="hljs-number">66</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">90</span>, <span class="hljs-number">3</span>, <span class="hljs-number">58</span>, <span class="hljs-number">157</span>, <span class="hljs-number">190</span>, <span class="hljs-number">248</span>, <span class="hljs-number">76</span>, <span class="hljs-number">7</span>, <span class="hljs-number">132</span>, <span class="hljs-number">200</span>, <span class="hljs-number">151</span>, <span class="hljs-number">208</span>, <span class="hljs-number">112</span>, <span class="hljs-number">230</span>, <span class="hljs-number">96</span>, <span class="hljs-number">140</span>, <span class="hljs-number">90</span>, <span class="hljs-number">238</span>, <span class="hljs-number">211</span>, <span class="hljs-number">155</span>, <span class="hljs-number">128</span>, <span class="hljs-number">109</span>, <span class="hljs-number">248</span>, <span class="hljs-number">40</span>, <span class="hljs-number">83</span>, <span class="hljs-number">214</span>, <span class="hljs-number">78</span>, <span class="hljs-number">42</span>, <span class="hljs-number">104</span>, <span class="hljs-number">106</span>, <span class="hljs-number">55</span>, <span class="hljs-number">148</span>, <span class="hljs-number">249</span>, <span class="hljs-number">35</span>, <span class="hljs-number">61</span>, <span class="hljs-number">32</span>, <span class="hljs-number">221</span>, <span class="hljs-number">135</span>, <span class="hljs-number">143</span>, <span class="hljs-number">100</span>, <span class="hljs-number">45</span>, <span class="hljs-number">97</span>, <span class="hljs-number">194</span>, <span class="hljs-number">176</span>, <span class="hljs-number">52</span>, <span class="hljs-number">73</span>, <span class="hljs-number">136</span>, <span class="hljs-number">174</span>, <span class="hljs-number">40</span>, <span class="hljs-number">70</span>, <span class="hljs-number">70</span>, <span class="hljs-number">34</span>, <span class="hljs-number">103</span>, <span class="hljs-number">103</span>, <span class="hljs-number">161</span>, <span class="hljs-number">99</span>, <span class="hljs-number">27</span>, <span class="hljs-number">187</span>, <span class="hljs-number">13</span>, <span class="hljs-number">187</span>, <span class="hljs-number">109</span>, <span class="hljs-number">244</span>, <span class="hljs-number">13</span>, <span class="hljs-number">7</span>]);</li><li>  <span class="hljs-keyword">let</span> priKeyArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">48</span>, <span class="hljs-number">49</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">32</span>, <span class="hljs-number">54</span>, <span class="hljs-number">41</span>, <span class="hljs-number">239</span>, <span class="hljs-number">240</span>, <span class="hljs-number">63</span>, <span class="hljs-number">188</span>, <span class="hljs-number">134</span>, <span class="hljs-number">113</span>, <span class="hljs-number">31</span>, <span class="hljs-number">102</span>, <span class="hljs-number">149</span>, <span class="hljs-number">203</span>, <span class="hljs-number">245</span>, <span class="hljs-number">89</span>, <span class="hljs-number">15</span>, <span class="hljs-number">15</span>, <span class="hljs-number">47</span>, <span class="hljs-number">202</span>, <span class="hljs-number">170</span>, <span class="hljs-number">60</span>, <span class="hljs-number">38</span>, <span class="hljs-number">154</span>, <span class="hljs-number">28</span>, <span class="hljs-number">169</span>, <span class="hljs-number">189</span>, <span class="hljs-number">100</span>, <span class="hljs-number">251</span>, <span class="hljs-number">76</span>, <span class="hljs-number">112</span>, <span class="hljs-number">223</span>, <span class="hljs-number">156</span>, <span class="hljs-number">159</span>, <span class="hljs-number">160</span>, <span class="hljs-number">10</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">42</span>, <span class="hljs-number">129</span>, <span class="hljs-number">28</span>, <span class="hljs-number">207</span>, <span class="hljs-number">85</span>, <span class="hljs-number">1</span>, <span class="hljs-number">130</span>, <span class="hljs-number">45</span>]);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pubKeyBlob</span>: cryptoFramework.<span class="hljs-property">DataBlob</span> = { <span class="hljs-attr">data</span>: pubKeyArray };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">priKeyBlob</span>: cryptoFramework.<span class="hljs-property">DataBlob</span> = { <span class="hljs-attr">data</span>: priKeyArray };</li><li>  <span class="hljs-keyword">let</span> generator = cryptoFramework.<span class="hljs-title function_">createAsyKeyGenerator</span>(<span class="hljs-string">'SM2_256'</span>);</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> keyPair = generator.<span class="hljs-title function_">convertKeySync</span>(pubKeyBlob, priKeyBlob);</li><li>    <span class="hljs-keyword">if</span> (keyPair !== <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'convertKeySync success'</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`get key pair failed, <span class="hljs-subst">${e.code}</span>, <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div></li>     </ul>    </div>   </div>   <div></div></div>