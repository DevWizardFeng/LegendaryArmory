<h1 _ngcontent-xpt-c119="" class="doc-title ng-star-inserted" title="接入报点预测"> 接入报点预测 </h1>

<div _ngcontent-xpt-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>接入报点预测功能，可以优化应用中手写效果的绘制跟手性，提升应用中手写笔书写场景的跟手体验。</p>    <div class="tiledSection">     <h2 id="section9273531714">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section9273531714" tips="复制节点链接"></i></h2>          <p>在应用的自定义界面中，获取到界面的触摸事件，通过调用报点预测的接口，可以得到预测的下一个报点的位置信息。</p>     <p><span><img height="292.86999000000003" originheight="468" originwidth="934" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115040.05993439474119925955885794830199:50001231000000:2800:00580E84223C9325F4707710EEDDA334C678A462992C5951448E356B75AB49BC.png" title="点击放大" width="584.5350000000001"></span></p>    </div>    <div class="tiledSection">     <h2 id="section1432962214172">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section1432962214172" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" valign="top" width="20.45%">          <p>类名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" valign="top" width="55.60000000000001%">          <p>接口名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" valign="top" width="23.95%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="20.45%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pen-pointpredictor" target="_blank">PointPredictor</a></p></td>         <td class="cellrowborder" valign="top" width="55.60000000000001%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pen-pointpredictor#section158711315171" target="_blank">getPredictionPoint</a>(event: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-touch#touchevent对象说明" target="_blank">TouchEvent</a>): <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#touchpoint11" target="_blank">TouchPoint</a></p></td>         <td class="cellrowborder" valign="top" width="23.95%">          <p>获取预测点</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section5738151518181">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section5738151518181" tips="复制节点链接"></i></h2>          <p>1.导入相关模块。</p>     <div _ngcontent-xpt-c106="" class="highlight-div"><div _ngcontent-xpt-c106="" class="highlight-div-header"><div _ngcontent-xpt-c106="" class="highlight-div-header-left"><div _ngcontent-xpt-c106="" class="handle-button expand-button"><div _ngcontent-xpt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xpt-c106="" class="highlight-div-header-right"><div _ngcontent-xpt-c106="" class="handle-button ai-button"></div><div _ngcontent-xpt-c106="" class="handle-button line-button"><div _ngcontent-xpt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xpt-c106="" class="handle-button theme-button"><div _ngcontent-xpt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xpt-c106="" class="handle-button copy-button"><div _ngcontent-xpt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xpt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PointPredictor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.Penkit'</span>;</li></ol></pre></div></div>     <p>2.获取当前界面的触摸事件信息，调用接口计算预测点信息。</p>     <div _ngcontent-xpt-c106="" class="highlight-div"><div _ngcontent-xpt-c106="" class="highlight-div-header"><div _ngcontent-xpt-c106="" class="highlight-div-header-left"><div _ngcontent-xpt-c106="" class="handle-button expand-button"><div _ngcontent-xpt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xpt-c106="" class="highlight-div-header-right"><div _ngcontent-xpt-c106="" class="handle-button ai-button"></div><div _ngcontent-xpt-c106="" class="handle-button line-button"><div _ngcontent-xpt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xpt-c106="" class="handle-button theme-button"><div _ngcontent-xpt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xpt-c106="" class="handle-button copy-button"><div _ngcontent-xpt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xpt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-meta">@Entry</span></span></li><li><span class=""><span class="hljs-meta">@Component</span></span></li><li>struct <span class=""><span class="hljs-title class_">PointPredictorDemo</span> </span><span class="">{</span></li><li>  <span class=""><span class="hljs-meta">@State</span> </span><span class=""><span class="hljs-attr">actualXCoordinate</span></span><span class="">: </span><span class=""><span class="hljs-built_in">number</span> </span><span class="">= </span><span class=""><span class="hljs-number">0</span></span></li><li>  <span class=""><span class="hljs-meta">@State</span> </span><span class=""><span class="hljs-attr">actualYCoordinate</span></span><span class="">: </span><span class=""><span class="hljs-built_in">number</span> </span><span class="">= </span><span class=""><span class="hljs-number">0</span></span></li><li>  <span class=""><span class="hljs-meta">@State</span> </span><span class=""><span class="hljs-attr">predictorXCoordinate</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Dimension</span> </span><span class="">= </span><span class=""><span class="hljs-number">0</span></span></li><li>  <span class=""><span class="hljs-meta">@State</span> </span><span class=""><span class="hljs-attr">predictorYCoordinate</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Dimension</span> </span><span class="">= </span><span class=""><span class="hljs-number">0</span></span></li><li>  <span class=""><span class="hljs-attr">pointPredictor</span></span><span class="">: </span><span class=""><span class="hljs-title class_">PointPredictor</span> </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">PointPredictor</span></span><span class="">()</span><span class="">;</span></li><li>
</li><li>  <span class=""><span class="hljs-title function_">aboutToAppear</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'getPredictionPoint aboutToAppear'</span></span><span class="">)</span></li><li>  <span class="">}</span></li><li>
</li><li>  <span class=""><span class="hljs-title function_">aboutToDisappear</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'getPredictionPoint aboutToDisappear'</span></span><span class="">)</span></li><li>  <span class="">}</span></li><li>
</li><li>  <span class=""><span class="hljs-title function_">build</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>    <span class=""><span class="hljs-title class_">Stack</span></span><span class="">(</span><span class="">{ </span><span class=""><span class="hljs-attr">alignContent</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Alignment</span></span><span class="">.</span><span class=""><span class="hljs-property">TopEnd</span> </span><span class="">}</span><span class="">) </span><span class="">{</span></li><li>      <span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-title class_">Canvas</span></span><span class="">() </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">画布</span></span></li><li>    <span class="">}</span><span class="">.</span><span class=""><span class="hljs-title function_">height</span></span><span class="">(</span><span class=""><span class="hljs-string">'100%'</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">width</span></span><span class="">(</span><span class=""><span class="hljs-string">'100%'</span></span><span class="">)</span></li><li>  <span class="">}</span></li><li>
</li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">画布</span></span></li><li>  <span class=""><span class="hljs-meta">@Builder</span></span></li><li>  <span class=""><span class="hljs-title class_">Canvas</span></span><span class="">() </span><span class="">{</span></li><li>    <span class=""><span class="hljs-title class_">Column</span></span><span class="">() </span><span class="">{</span></li><li>      <span class=""><span class="hljs-title class_">Text</span></span><span class="">(</span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">实际点坐标：</span></span><span class=""><span class="hljs-string"> X: "</span> </span><span class="">+ </span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">actualXCoordinate</span> </span><span class="">+ </span><span class=""><span class="hljs-string">" Y: "</span> </span><span class="">+ </span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">actualYCoordinate</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">textAlign</span></span><span class="">(</span><span class=""><span class="hljs-title class_">TextAlign</span></span><span class="">.</span><span class=""><span class="hljs-property">Start</span></span><span class="">)</span></li><li>      <span class=""><span class="hljs-title class_">Text</span></span><span class="">(</span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">预测点坐标：</span></span><span class=""><span class="hljs-string"> X: "</span> </span><span class="">+ </span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">predictorXCoordinate</span> </span><span class="">+ </span><span class=""><span class="hljs-string">" Y: "</span> </span><span class="">+ </span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">predictorYCoordinate</span></span><span class="">)</span></li><li>        <span class="">.</span><span class=""><span class="hljs-title function_">textAlign</span></span><span class="">(</span><span class=""><span class="hljs-title class_">TextAlign</span></span><span class="">.</span><span class=""><span class="hljs-property">Start</span></span><span class="">)</span></li><li>    <span class="">}</span><span class="">.</span><span class=""><span class="hljs-title function_">position</span></span><span class="">(</span><span class="">{ </span><span class=""><span class="hljs-attr">x</span></span><span class="">: </span><span class=""><span class="hljs-number">0</span></span><span class="">, </span><span class=""><span class="hljs-attr">y</span></span><span class="">: </span><span class=""><span class="hljs-number">0</span> </span><span class="">}</span><span class="">)</span></li><li>    <span class="">.</span><span class=""><span class="hljs-title function_">alignItems</span></span><span class="">(</span><span class=""><span class="hljs-title class_">HorizontalAlign</span></span><span class="">.</span><span class=""><span class="hljs-property">Start</span></span><span class="">)</span></li><li>
</li><li>    <span class=""><span class="hljs-title class_">Stack</span></span><span class="">()</span></li><li>      <span class="">.</span><span class=""><span class="hljs-title function_">width</span></span><span class="">(</span><span class=""><span class="hljs-string">'100%'</span></span><span class="">)</span></li><li>      <span class="">.</span><span class=""><span class="hljs-title function_">height</span></span><span class="">(</span><span class=""><span class="hljs-string">'100%'</span></span><span class="">)</span></li><li>      <span class="">.</span><span class=""><span class="hljs-title function_">onTouch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">TouchEvent</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class="hljs-keyword">switch</span> <span class="">(</span><span class="">event</span><span class="">.</span><span class=""><span class="hljs-property">type</span></span><span class="">) </span><span class="">{</span></li><li>          <span class="hljs-keyword">case</span> <span class=""><span class="hljs-title class_">TouchType</span></span><span class="">.</span><span class=""><span class="hljs-property">Down</span></span><span class="">: </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">按下时，新建一条画图路径</span></span></li><li>            <span class="hljs-keyword">break</span><span class="">;</span></li><li>          <span class="hljs-keyword">case</span> <span class=""><span class="hljs-title class_">TouchType</span></span><span class="">.</span><span class=""><span class="hljs-property">Move</span></span><span class="">: </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">使用预测算法进行预测</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">获得预测点</span></span></li><li>            <span class="hljs-keyword">let</span> <span class="">point </span><span class="">= </span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">pointPredictor</span></span><span class="">?.</span><span class=""><span class="hljs-title function_">getPredictionPoint</span></span><span class="">(</span><span class="">event</span><span class="">)</span></li><li>            <span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">actualXCoordinate</span> </span><span class="">= </span><span class="">event</span><span class="">.</span><span class=""><span class="hljs-property">touches</span></span><span class="">[</span><span class=""><span class="hljs-number">0</span></span><span class="">]</span><span class="">?.</span><span class=""><span class="hljs-property">x</span></span></li><li>            <span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">actualYCoordinate</span> </span><span class="">= </span><span class="">event</span><span class="">.</span><span class=""><span class="hljs-property">touches</span></span><span class="">[</span><span class=""><span class="hljs-number">0</span></span><span class="">]</span><span class="">?.</span><span class=""><span class="hljs-property">y</span></span></li><li>            <span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">predictorXCoordinate</span> </span><span class="">= </span><span class="">point</span><span class="">?.</span><span class=""><span class="hljs-property">x</span></span></li><li>            <span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">predictorYCoordinate</span> </span><span class="">= </span><span class="">point</span><span class="">?.</span><span class=""><span class="hljs-property">y</span></span></li><li><span class="">            <span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">"pointPredictor </span></span><span class=""><span class="hljs-string">实际点坐标</span></span><span class=""><span class="hljs-string"> x:"</span> </span><span class="">+ </span><span class="">event</span><span class="">.</span><span class=""><span class="hljs-property">touches</span></span><span class="">[</span><span class=""><span class="hljs-number">0</span></span><span class="">]</span><span class="">?.</span><span class=""><span class="hljs-property">x</span> </span><span class="">+ </span><span class=""><span class="hljs-string">" y:"</span> </span><span class="">+ </span><span class="">event</span><span class="">.</span><span class=""><span class="hljs-property">touches</span></span><span class="">[</span><span class=""><span class="hljs-number">0</span></span><span class="">]</span><span class="">?.</span><span class=""><span class="hljs-property">y</span></span><span class="">)</span></li><li>            <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">"pointPredictor </span></span><span class=""><span class="hljs-string">预测点坐标</span></span><span class=""><span class="hljs-string"> x:"</span> </span><span class="">+ </span><span class="">point</span><span class="">?.</span><span class=""><span class="hljs-property">x</span> </span><span class="">+ </span><span class=""><span class="hljs-string">"  y:"</span> </span><span class="">+ </span><span class="">point</span><span class="">?.</span><span class=""><span class="hljs-property">y</span></span><span class="">)</span></li><li>            <span class="hljs-keyword">break</span><span class="">;</span></li><li>          <span class="hljs-keyword">case</span> <span class=""><span class="hljs-title class_">TouchType</span></span><span class="">.</span><span class=""><span class="hljs-property">Up</span></span><span class="">:</span></li><li>            <span class="hljs-keyword">break</span><span class="">;</span></li><li>        <span class="">}</span></li><li><span class="">      }</span><span class="">)</span></li><li>  <span class="">}</span></li><li><span class="">}</span></li></ol></pre></div></div>    </div>   </div>   <div></div></div>