<h1 _ngcontent-vpy-c119="" class="doc-title ng-star-inserted" title="接口概述"> 接口概述 </h1>

<div _ngcontent-vpy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>AscendC算子采用标准C++语法和一组类库API进行编程，开发者可以根据自己的需求选择合适的API。AscendC编程类库API示意图如下所示，AscendC API的操作数都是Tensor类型：GlobalTensor和LocalTensor；类库API分为基础API和高阶API。</p> <ul><li><strong>基础API：</strong>实现对硬件能力的抽象，开放芯片的能力，保证完备性和兼容性。标注为ISASI（Instruction Set Architecture Special Interface，硬件体系结构相关的接口）类别的API，不能保证跨硬件版本兼容。</li><li><strong>高阶API：</strong>实现一些常用的计算算法，用于提高编程开发效率，通常会调用多种基础API实现。高阶API包括数学库、Matmul、Softmax等API。高阶API可以保证兼容性。</li></ul> <div class="fignone"><span class="figcap"><b>图1 </b>AscendC编程类库API示意图</span><br><span><img height="335.16" originheight="336" originwidth="531" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114303.87737407368416579196374407643858:50001231000000:2800:B2D67B85804AFFAC19E814837FAB72C3A6AF0796163A19CFE654E77ECF58059B.png" title="点击放大" width="526.6800000000001"></span></div> <p>对于基础API，主要分为以下几类：</p> <ul><li><strong>计算API</strong>，包括标量计算API、向量计算API、矩阵计算API，分别实现调用Scalar计算单元、Vector计算单元、Cube计算单元执行计算的功能。</li><li><strong>数据搬运API</strong>，计算API基于Local Memory数据进行计算，所以数据需要先从Global Memory搬运至Local Memory，再使用计算API完成计算，最后从Local Memory搬出至Global Memory。执行搬运过程的接口称之为数据搬运API，比如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-datacopy">DataCopy</a>接口。</li><li><strong>内存管理API</strong>，用于分配管理内存，比如AllocTensor、FreeTensor接口。</li><li><strong>同步控制API</strong>，完成任务间的通信和同步，比如EnQue、DeQue接口。不同的API指令间有可能存在依赖关系，从<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-hardware-architecture-abstraction">硬件架构抽象</a>可知，不同的指令异步并行执行，为了保证不同指令队列间的指令按照正确的逻辑关系执行，需要向不同的组件发送同步指令。同步控制API内部即完成这个发送同步指令的过程，开发者无需关注内部实现逻辑，使用简单的API接口即可完成。</li><li><strong>ISASI(Instruction Set Architecture Special API)，</strong>硬件体系结构相关的API，该类接口不能保证跨硬件版本兼容。</li></ul> <p>对于基础API中的<strong>计算API，</strong>根据对数据操作方法的不同，分为以下<strong>几种计算方式：</strong></p> <ul><li><strong>整个tensor参与计算</strong>：通过运算符重载的方式实现，支持“+, -, *, /, |, &amp;, &lt;, &gt;, &lt;=, &gt;=, ==, !=”，实现计算的简化表达。例如：<p>dst=src1+src2</p> </li><li><strong>tensor前n个数据计算</strong>：针对源操作数的连续n个数据进行计算并连续写入目的操作数，解决一维tensor的连续计算问题。例如：<p>Add(dst, src1, src2, n);</p> </li></ul> <p>下图以矢量加法为例，展示了几种计算方式的特点。</p> <div class="fignone"><span class="figcap"><b>图2 </b>计算API几种计算方式的特点</span><br><span><img height="469.49" originheight="694" originwidth="778" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114303.32590158742940109111877005989951:50001231000000:2800:16200C1CFC4E0961DF2091C5FE61FD28C894D995AF588ACC28AB55DEBB603382.png" title="点击放大" width="526.6800000000001"></span></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>AscendC API所在头文件目录为：</p> <ul><li>基础API：${DDK_INSTALL_PATH}/tools/tools_ascendc/include/tikcpp/tikcfw/kernel_operator.h。</li></ul> <ul><li>高阶API：${DDK_INSTALL_PATH}/tools/tools_ascendc/include/tikcpp/tikcfw/lib，其中${DDK_INSTALL_PATH}表示DDK软件安装目录。（目录头文件中包含的接口如果未在资料中声明，属于间接调用接口，开发者无需关注）</li></ul> </div></div></div> </div> <div></div></div>