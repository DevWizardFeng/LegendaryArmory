<h1 _ngcontent-cen-c119="" class="doc-title ng-star-inserted" title="控件状态变化场景"> 控件状态变化场景 </h1>

<div _ngcontent-cen-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section16315114512016">开发实例<i class="anchor-icon anchor-icon-link" anchorid="section16315114512016" tips="复制节点链接"></i></h2><p>例如下图，播放暂停按钮对应着两种状态，在状态切换时需要实时变化对应的标注信息。</p> <p><span><img originheight="112" originwidth="648" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114855.20009489882867771830193421626869:50001231000000:2800:6367A0E4DDDEEFBF6D8A62CD77D65D98BC08C880FAB53A28F2A59C41ED021DE1.png" width="648" height="112"></span></p> <div _ngcontent-cen-c106="" class="highlight-div"><div _ngcontent-cen-c106="" class="highlight-div-header"><div _ngcontent-cen-c106="" class="highlight-div-header-left"><div _ngcontent-cen-c106="" class="handle-button expand-button"><div _ngcontent-cen-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cen-c106="" class="highlight-div-header-right"><div _ngcontent-cen-c106="" class="handle-button ai-button"></div><div _ngcontent-cen-c106="" class="handle-button line-button"><div _ngcontent-cen-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cen-c106="" class="handle-button theme-button"><div _ngcontent-cen-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cen-c106="" class="handle-button copy-button"><div _ngcontent-cen-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cen-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">PromptAction</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.ArkUI"</span></span></li><li>
</li><li><span class="hljs-keyword">const</span> <span class=""><span class="hljs-variable constant_">RESOURCE_STR_PLAY</span> </span><span class="">= </span><span class="">$r</span><span class="">(</span><span class=""><span class="hljs-string">'app.media.play'</span></span><span class="">) </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处为图片资源，请替换为本地图片</span></span></li><li><span class="hljs-keyword">const</span> <span class=""><span class="hljs-variable constant_">RESOURCE_STR_PAUSE</span> </span><span class="">= </span><span class="">$r</span><span class="">(</span><span class=""><span class="hljs-string">'app.media.pause'</span></span><span class="">) </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处为图片资源，请替换为本地图片</span></span></li><li>
</li><li><span class=""><span class="hljs-meta">@Entry</span></span></li><li><span class=""><span class="hljs-meta">@Component</span></span></li><li><span class="hljs-keyword">export</span> struct <span class=""><span class="hljs-title class_">Rule</span>_2_1_11 </span><span class="">{</span></li><li>  <span class=""><span class="hljs-attr">title</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'Rule 2.1.8'</span></span></li><li>  <span class=""><span class="hljs-meta">@State</span> </span><span class=""><span class="hljs-attr">isPlaying</span></span><span class="">: </span><span class=""><span class="hljs-built_in">boolean</span> </span><span class="">= </span><span class="hljs-literal">true</span></li><li>  <span class=""><span class="hljs-attr">uiContext</span></span><span class="">: </span><span class=""><span class="hljs-title class_">UIContext</span> </span><span class="">= </span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-title function_">getUIContext</span></span><span class="">()</span><span class="">;</span></li><li>  <span class=""><span class="hljs-attr">promptAction</span></span><span class="">: </span><span class=""><span class="hljs-title class_">PromptAction</span> </span><span class="">= </span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">uiContext</span></span><span class="">.</span><span class=""><span class="hljs-title function_">getPromptAction</span></span><span class="">()</span><span class="">;</span></li><li>  <span class=""><span class="hljs-title function_">play</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>    <span class=""><span class="hljs-comment">// play audio file</span></span></li><li>  <span class="">}</span></li><li>
</li><li>  <span class=""><span class="hljs-title function_">pause</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>    <span class=""><span class="hljs-comment">// pause playing of audio file</span></span></li><li>  <span class="">}</span></li><li>
</li><li>  <span class=""><span class="hljs-title function_">build</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>    <span class=""><span class="hljs-title class_">NavDestination</span></span><span class="">() </span><span class="">{</span></li><li>      <span class=""><span class="hljs-title class_">Column</span></span><span class="">() </span><span class="">{</span></li><li>        <span class=""><span class="hljs-title class_">Flex</span></span><span class="">(</span><span class="">{</span></li><li>          <span class=""><span class="hljs-attr">direction</span></span><span class="">: </span><span class=""><span class="hljs-title class_">FlexDirection</span></span><span class="">.</span><span class=""><span class="hljs-property">Column</span></span><span class="">,</span></li><li>          <span class=""><span class="hljs-attr">alignItems</span></span><span class="">: </span><span class=""><span class="hljs-title class_">ItemAlign</span></span><span class="">.</span><span class=""><span class="hljs-property">Center</span></span><span class="">,</span></li><li>          <span class=""><span class="hljs-attr">justifyContent</span></span><span class="">: </span><span class=""><span class="hljs-title class_">FlexAlign</span></span><span class="">.</span><span class=""><span class="hljs-property">Center</span></span><span class="">,</span></li><li>        <span class="">}</span><span class="">) </span><span class="">{</span></li><li>          <span class=""><span class="hljs-title class_">Row</span></span><span class="">() </span><span class="">{</span></li><li>
</li><li>            <span class=""><span class="hljs-title class_">Image</span></span><span class="">(</span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">isPlaying</span> </span><span class="">? </span><span class=""><span class="hljs-variable constant_">RESOURCE_STR_PAUSE</span> </span><span class="">: </span><span class=""><span class="hljs-variable constant_">RESOURCE_STR_PLAY</span></span><span class="">)</span></li><li>              <span class="">.</span><span class=""><span class="hljs-title function_">width</span></span><span class="">(</span><span class=""><span class="hljs-number">50</span></span><span class="">)</span></li><li>              <span class="">.</span><span class=""><span class="hljs-title function_">height</span></span><span class="">(</span><span class=""><span class="hljs-number">50</span></span><span class="">)</span></li><li>              <span class="">.</span><span class=""><span class="hljs-title function_">onClick</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>                <span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">promptAction</span></span><span class="">.</span><span class=""><span class="hljs-title function_">showToast</span></span><span class="">(</span><span class="">{</span></li><li>                  <span class="">message </span><span class="">:</span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">isPlaying</span> </span><span class="">? </span><span class=""><span class="hljs-string">"Play"</span> </span><span class="">: </span><span class=""><span class="hljs-string">"Pause"</span></span></li><li>                <span class="">}</span><span class="">)</span></li><li>                <span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">isPlaying</span> </span><span class="">= !</span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">isPlaying</span></span></li><li>                <span class="hljs-keyword">if</span> <span class="">(</span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">isPlaying</span></span><span class="">) </span><span class="">{</span></li><li>                  <span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-title function_">play</span></span><span class="">()</span></li><li>                <span class="">} </span><span class="hljs-keyword">else</span> <span class="">{</span></li><li>                  <span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-title function_">pause</span></span><span class="">()</span></li><li>                <span class="">}</span></li><li><span class="">              }</span><span class="">)</span></li><li>              <span class="">.</span><span class=""><span class="hljs-title function_">accessibilityText</span></span><span class="">(</span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">isPlaying</span> </span><span class="">? </span><span class=""><span class="hljs-string">'Pause'</span> </span><span class="">: </span><span class=""><span class="hljs-string">'Play'</span></span><span class="">) </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">设置可访问性框架的注释信息</span></span></li><li>          <span class="">}</span></li><li><span class="">        }</span></li><li>        <span class="">.</span><span class=""><span class="hljs-title function_">width</span></span><span class="">(</span><span class=""><span class="hljs-string">'100%'</span></span><span class="">)</span></li><li>        <span class="">.</span><span class=""><span class="hljs-title function_">height</span></span><span class="">(</span><span class=""><span class="hljs-string">'100%'</span></span><span class="">)</span></li><li>        <span class="">.</span><span class=""><span class="hljs-title function_">backgroundColor</span></span><span class="">(</span><span class=""><span class="hljs-title class_">Color</span></span><span class="">.</span><span class=""><span class="hljs-property">White</span></span><span class="">)</span></li><li>      <span class="">}</span></li><li><span class="">    }</span><span class="">.</span><span class=""><span class="hljs-title function_">title</span></span><span class="">(</span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">title</span></span><span class="">)</span></li><li>  <span class="">}</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div></div></div>