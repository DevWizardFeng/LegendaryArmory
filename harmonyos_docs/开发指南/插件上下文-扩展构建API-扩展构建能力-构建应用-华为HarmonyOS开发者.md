<h1 _ngcontent-ylx-c119="" class="doc-title ng-star-inserted" title="插件上下文"> 插件上下文 </h1>

<div _ngcontent-ylx-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;"> <div id="body0000001777620174"><div class="tiledSection" style="contain-intrinsic-size: auto 68px;"><h2 id="section12608437165318">OhosPluginId<i class="anchor-icon anchor-icon-link" anchorid="section12608437165318" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334508__p31951214102018">本组件是hvigor-ohos-plugin插件id常量类。</p> </div> <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 188px;"><h3 id="section7531132911469" class="firsth2">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section7531132911469" tips="复制节点链接"></i></h3><div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen1054718465224" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">OhosPluginId</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334508__p716410152557"></p> </div>  <div class="tablenoborder"><div class="tbBox"><table id="table117141511089" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row871417118818"><th align="left" class="cellrowborder" id="mcps1.3.3.1.4.1.1" valign="top" width="20.7%"><p id="ZH-CN_TOPIC_0000002478334508__p18714131986">常量名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.1.4.1.2" valign="top" width="17.25%"><p id="ZH-CN_TOPIC_0000002478334508__p136288138261">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.1.4.1.3" valign="top" width="62.050000000000004%"><p id="ZH-CN_TOPIC_0000002478334508__p12821049204612">描述</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row197141817820"><td class="cellrowborder" valign="top" width="20.7%"><p id="ZH-CN_TOPIC_0000002478334508__p7714118815">OHOS_APP_PLUGIN</p> </td> <td class="cellrowborder" valign="top" width="17.25%"><p id="ZH-CN_TOPIC_0000002478334508__p14311153319324">string</p> </td> <td class="cellrowborder" valign="top" width="62.050000000000004%"><p id="ZH-CN_TOPIC_0000002478334508__p1282124920462">AppPlugin插件ID</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334508__row182662033115"><td class="cellrowborder" valign="top" width="20.7%"><p id="ZH-CN_TOPIC_0000002478334508__p2026614043113">OHOS_HAP_PLUGIN</p> </td> <td class="cellrowborder" valign="top" width="17.25%"><p id="ZH-CN_TOPIC_0000002478334508__p126615073115">string</p> </td> <td class="cellrowborder" valign="top" width="62.050000000000004%"><p id="ZH-CN_TOPIC_0000002478334508__p10974114219358">HapPlugin插件ID</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334508__row167141611884"><td class="cellrowborder" valign="top" width="20.7%"><p id="ZH-CN_TOPIC_0000002478334508__p67145113815">OHOS_HSP_PLUGIN</p> </td> <td class="cellrowborder" valign="top" width="17.25%"><p id="ZH-CN_TOPIC_0000002478334508__p136281613152617">string</p> </td> <td class="cellrowborder" valign="top" width="62.050000000000004%"><p id="ZH-CN_TOPIC_0000002478334508__p69058507355">HspPlugin插件ID</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334508__row10714911813"><td class="cellrowborder" valign="top" width="20.7%"><p id="ZH-CN_TOPIC_0000002478334508__p13714411281">OHOS_HAR_PLUGIN</p> </td> <td class="cellrowborder" valign="top" width="17.25%"><p id="ZH-CN_TOPIC_0000002478334508__p02641850123210">string</p> </td> <td class="cellrowborder" valign="top" width="62.050000000000004%"><p id="ZH-CN_TOPIC_0000002478334508__p175841055153518">HarPlugin插件ID</p> </td> </tr>  </tbody></table></div> </div> <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 116px;"><h2 id="section108491445165419">OhosAppContext<i class="anchor-icon anchor-icon-link" anchorid="section108491445165419" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334508__p8684115214210">本组件是appTasks插件对外提供的上下文扩展接口，包括工程信息、product信息等。</p> </div> <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 169px;"><h3 id="section1548835116312" class="firsth2">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section1548835116312" tips="复制节点链接"></i></h3><div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen67411256873" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">OhosAppContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 764px;"><h3 id="section133824492544">getProjectName<i class="anchor-icon anchor-icon-link" anchorid="section133824492544" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p13764171716142">getProjectName: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334508__p6845328161311">获取工程名称。</p> <p id="ZH-CN_TOPIC_0000002478334508__p8946142455616"></p> <p id="ZH-CN_TOPIC_0000002478334508__p6925142205617"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1257734991415" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row6577164911141"><th align="left" class="cellrowborder" id="mcps1.3.6.6.1.3.1.1" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334508__p1957704912149">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.3.1.2" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334508__p9577204916145">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row1557734911146"><td class="cellrowborder" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334508__p95771049191411">string</p> </td> <td class="cellrowborder" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334508__p5577124991418">工程名称</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p128717713213"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen939515304369" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">projectName </span><span class="">= </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectName</span></span><span class="">()</span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Project Name: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">projectName</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 764px;"><h3 id="section1692122312553">getProjectPath<i class="anchor-icon anchor-icon-link" anchorid="section1692122312553" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p1791125310332">getProjectPath: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334508__p118471330163219">获取工程路径。</p> <p id="ZH-CN_TOPIC_0000002478334508__p126502038155610"></p> <p id="ZH-CN_TOPIC_0000002478334508__p3465939195618"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table135273710319" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row43521237143110"><th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.1" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334508__p1935253753119">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.2" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334508__p535243719315">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row5352173711319"><td class="cellrowborder" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334508__p13352173723110">string</p> </td> <td class="cellrowborder" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334508__p6888733183220">工程路径</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p291192012718"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen1698134313710" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">projectPath </span><span class="">= </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectPath</span></span><span class="">()</span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Project Path: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">projectPath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 764px;"><h3 id="section493183555516">getBuildRootPath<i class="anchor-icon anchor-icon-link" anchorid="section493183555516" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p1988714373212">getBuildRootPath: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334508__p788714435329">获取构建目录根路径。</p> <p id="ZH-CN_TOPIC_0000002478334508__p15871165295614"></p> <p id="ZH-CN_TOPIC_0000002478334508__p146241453115619"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table9887194314321" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row8887343193213"><th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.1" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334508__p1388764311327">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.2" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334508__p1588754313216">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row11887543153219"><td class="cellrowborder" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334508__p11887343143214">string</p> </td> <td class="cellrowborder" valign="top" width="50%"><p id="ZH-CN_TOPIC_0000002478334508__p19791413172514">构建根路径</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p14526241571"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen743594054615" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">buildRootPath </span><span class="">= </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getBuildRootPath</span></span><span class="">()</span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Build Root Path: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">buildRootPath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 764px;"><h3 id="section27137383553">getBuildProductOutputPath<i class="anchor-icon anchor-icon-link" anchorid="section27137383553" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p20905514121618">getBuildProductOutputPath: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334508__p11247123111618">获取当前product构建的打包输出路径。</p> <p id="ZH-CN_TOPIC_0000002478334508__p8469174541612"></p> <p id="ZH-CN_TOPIC_0000002478334508__p16597181135717"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1361052921710" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row961118291173"><th align="left" class="cellrowborder" id="mcps1.3.9.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p186111929151711">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p1461142919175">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row1461119294175"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p061115298179">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p36831550182511">当前product构建的打包输出路径</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p21528272078"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen3863134816514" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">buildProductOutputPath </span><span class="">=  </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getBuildProductOutputPath</span></span><span class="">()</span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Build Product Output Path: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">buildProductOutputPath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 740px;"><h3 id="section962214395515">getCurrentProduct<i class="anchor-icon anchor-icon-link" anchorid="section962214395515" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p090581412161">getCurrentProduct: () =&gt; Product</p> <p id="ZH-CN_TOPIC_0000002478334508__p20617335111616">获取当前构建指定的product对象。</p> <p id="ZH-CN_TOPIC_0000002478334508__p122731095577"></p> <p id="ZH-CN_TOPIC_0000002478334508__p99812910579"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table109971222132610" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row19971522162610"><th align="left" class="cellrowborder" id="mcps1.3.10.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p19997022142616">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p999715226269">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row10997162242610"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p10997102232613"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section1553414254713">Product</a></p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p1999732214261">当前构建指定的product对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p163115311177"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen208461613111010" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">currentProduct </span><span class="">= </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getCurrentProduct</span></span><span class="">()</span><span class="">;</span></li><li> <span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 764px;"><h3 id="section19464194918557">getBuildMode<i class="anchor-icon anchor-icon-link" anchorid="section19464194918557" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p14905171419167">getBuildMode: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334508__p1865064017150">获取当前构建指定的BuildMode。</p> <p id="ZH-CN_TOPIC_0000002478334508__p887321510579"></p> <p id="ZH-CN_TOPIC_0000002478334508__p2669191675718"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table847552619273" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row547515263274"><th align="left" class="cellrowborder" id="mcps1.3.11.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p114751426182719">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p18475142682719">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row94751026172713"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p047562622719">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p1947582682713">当前构建指定的BuildMode</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p145461344713"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen15991253141117" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">buildMode </span><span class="">= </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getBuildMode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Build Mode: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">buildMode</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 764px;"><h3 id="section624615369337">getAppJsonOpt<i class="anchor-icon anchor-icon-link" anchorid="section624615369337" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p72462036203316">getAppJsonOpt: () =&gt; any</p> <p id="ZH-CN_TOPIC_0000002478334508__p1624633617331">获取当前构建的app.json5文件中内容的obj对象。</p> <p id="ZH-CN_TOPIC_0000002478334508__p152461236123313"></p> <p id="ZH-CN_TOPIC_0000002478334508__p132461036203312"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table13247536153315" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row924763620337"><th align="left" class="cellrowborder" id="mcps1.3.12.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p824711363338">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p1247236133316">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row82470363339"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p132471136163320">any</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p324720364339">当前构建的app.json5文件中内容的obj对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p12222739273"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen9383142111168" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">appJsonOpt </span><span class="">=  </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getAppJsonOpt</span></span><span class="">()</span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`bundleName: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">appJsonOpt</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">app</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">bundleName</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1031px;"><h3 id="section14633161122119">setAppJsonOpt<i class="anchor-icon anchor-icon-link" anchorid="section14633161122119" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p663361102112">setAppJsonOpt: (appJsonOpt: any) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334508__p14633201172112">修改当前构建的app.json5文件中内容的obj对象。</p> <p id="ZH-CN_TOPIC_0000002478334508__p133711011233"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table33719002310" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row12370042318"><th align="left" class="cellrowborder" id="mcps1.3.13.5.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p193740152317">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p15378018231">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p1837503236">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p17378052317">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row14371804234"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p73730162316">appJsonOpt</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p4816323202313">any</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p12376013231">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p69546343237">设置当前构建的app.json5文件解析出来的obj对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p188856116"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen16827172277" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">AppJson</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class="">getNode, <span class="hljs-title class_">HvigorNode</span>  </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">node</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">= </span><span class=""><span class="hljs-title function_">getNode</span></span><span class="">(</span><span class="">__filename</span><span class="">)</span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">'projectName:'</span></span><span class="">, </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getProjectName</span></span><span class="">())</span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">appJson5</span></span><span class="">: </span><span class=""><span class="hljs-title class_">AppJson</span></span><span class="">.</span><span class=""><span class="hljs-property">AppOptObj</span> </span><span class="">= </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getAppJsonOpt</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getBuildMode</span></span><span class="">() </span><span class="">=== </span><span class=""><span class="hljs-string">'debug'</span></span><span class="">) </span><span class="">{</span></li><li>        <span class="">appJson5</span><span class="">.</span><span class=""><span class="hljs-property">app</span></span><span class="">.</span><span class=""><span class="hljs-property">versionName</span> </span><span class="">= </span><span class=""><span class="hljs-string">'1.0.0-debug'</span></span><span class="">;</span></li><li>    <span class="">} </span><span class="hljs-keyword">else</span> <span class="">{</span></li><li>        <span class="">appJson5</span><span class="">.</span><span class=""><span class="hljs-property">app</span></span><span class="">.</span><span class=""><span class="hljs-property">versionName</span> </span><span class="">= </span><span class=""><span class="hljs-string">'1.0.0-release'</span></span><span class="">;</span></li><li>    <span class="">}</span></li><li>    <span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">setAppJsonOpt</span></span><span class="">(</span><span class="">appJson5</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>    <span class="hljs-attr">system</span>: appTasks,  <span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></li><li>    <span class="hljs-attr">plugins</span>:[]         <span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></li><li>}</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334508__p161971018375"></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334508__p147071542112619">setAppJsonOpt会进行schema校验，如果传入的对象不符合校验规则则会抛出异常。</p> </div></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 740px;"><h3 id="section1259315130216">getBuildProfileOpt<i class="anchor-icon anchor-icon-link" anchorid="section1259315130216" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p859313130219">getBuildProfileOpt: () =&gt; any</p> <p id="ZH-CN_TOPIC_0000002478334508__p141511943182511">获取当前构建的根目录下build-profile.json5文件中内容的obj对象。</p> <p id="ZH-CN_TOPIC_0000002478334508__p155931113152119"></p> <p id="ZH-CN_TOPIC_0000002478334508__p1659341342116"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table16593141317218" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row12593613122119"><th align="left" class="cellrowborder" id="mcps1.3.14.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p15931213172117">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p1659331312214">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row1059331312110"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p17593213192115">any</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p85931813172113">当前构建的根目录下build-profile.json5文件中内容的obj对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p1153616584577"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen176918531198" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">buildProfileOpt </span><span class="">= </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getBuildProfileOpt</span></span><span class="">()</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 315px;"><h3 id="section16692151412211">setBuildProfileOpt<i class="anchor-icon anchor-icon-link" anchorid="section16692151412211" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p4693101482117">setBuildProfileOpt: (buildProfileOpt: any) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334508__p76933148211">设置当前构建的build-profile.json5文件中内容的obj对象。</p> <p id="ZH-CN_TOPIC_0000002478334508__p1228760122616"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table3287170142610" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row1328720011266"><th align="left" class="cellrowborder" id="mcps1.3.15.5.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p02875082619">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p1628713062615">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p22878002616">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p14287704263">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row142871014261"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p1628711062613">buildProfileOpt</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p1928720018262">any</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p16287180192613">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p1428712052610">设置当前构建的根目录下build-profile.json5文件中内容的obj对象</p> </td> </tr>  </tbody></table></div> </div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002478334508__ul57011359713"><li id="li5701105917112">setBuildProfileOpt会进行schema校验，如果传入的对象不符合校验规则则会抛出异常。</li><li id="li147017594118">不支持通过setBuildProfileOpt方法设置maxFlowDepth字段。</li></ul> </div></div></div> <p id="ZH-CN_TOPIC_0000002478334508__p15176425175814"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen478671920353" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>    <span class="hljs-keyword">const</span> <span class="">buildProfileOpt </span><span class="">= </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getBuildProfileOpt</span></span><span class="">()</span><span class="">;</span></li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">添加一个工程外的模块</span></span></li><li>    <span class="hljs-keyword">const</span> <span class="">newModule </span><span class="">= </span><span class="">{</span></li><li>        <span class=""><span class="hljs-string">"name"</span></span><span class="">: </span><span class=""><span class="hljs-string">"har"</span></span><span class="">,</span></li><li>        <span class=""><span class="hljs-string">"srcPath"</span></span><span class="">: </span><span class=""><span class="hljs-string">"./../MyApplication40/har"</span></span><span class="">,</span><span class="hljs-comment">// 确保该源码模块存在</span></li><li>    <span class="">}</span></li><li>    <span class="">buildProfileOpt</span><span class="">.</span><span class=""><span class="hljs-property">modules</span></span><span class="">.</span><span class=""><span class="hljs-title function_">push</span></span><span class="">(</span><span class="">newModule</span><span class="">)</span><span class="">;</span></li><li>    <span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">setBuildProfileOpt</span></span><span class="">(</span><span class="">buildProfileOpt</span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">buildProfileOpt</span><span class="">.</span><span class=""><span class="hljs-property">modules</span></span><span class="">.</span><span class=""><span class="hljs-title function_">map</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">module</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class="hljs-keyword">return</span> <span class=""><span class="hljs-variable language_">module</span></span><span class="">.</span><span class=""><span class="hljs-property">name</span></span><span class="">;</span></li><li>    <span class="">}</span><span class="">))</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> <div class="tiledSection" style="contain-intrinsic-size: auto 339px;"><h3 id="section19083223370">getOhpmDependencyInfo<i class="anchor-icon anchor-icon-link" anchorid="section19083223370" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p449314411372">getOhpmDependencyInfo: () =&gt; Record&lt;string, OhpmDependencyInfo&gt; | object</p> <p id="ZH-CN_TOPIC_0000002478334508__p13908132211375">获取工程下oh-package.json5中配置的依赖信息。</p> <p id="ZH-CN_TOPIC_0000002478334508__p82805506148"><strong>起始版本：</strong>Hvigor 5.0.0</p> <p id="ZH-CN_TOPIC_0000002478334508__p1469211315445"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table569216311442" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row5692123154410"><th align="left" class="cellrowborder" id="mcps1.3.19.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p469223114413">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p1469213314446">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row1369293111446"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p12591745184420">Record&lt;string, OhpmDependencyInfo&gt; | object</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p16884281802">oh-package.json5中配置的依赖信息</p> </td> </tr>  </tbody></table></div> </div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p490912228374"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen1261214145413" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">自定义插件代码</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="hljs-keyword">const</span> <span class="">rootNodeContext </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">)</span><span class="">;</span></li><li>            <span class="hljs-keyword">if</span> <span class="">(</span><span class="">!</span><span class="">rootNodeContext</span><span class="">) </span><span class="">{</span></li><li>                <span class="hljs-keyword">return</span><span class="">;</span></li><li>            <span class="">}</span></li><li>            <span class="hljs-keyword">const</span> <span class="">ohpmInfo </span><span class="">= </span><span class="">rootNodeContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getOhpmDependencyInfo</span></span><span class="">()</span><span class="">;</span></li><li>            <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">ohpmInfo</span><span class="">)</span></li><li>        <span class="">}</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> <div class="tiledSection" style="contain-intrinsic-size: auto 1990px;"><h3 id="section5378844143410">getOhpmRemoteHspDependencyInfo<i class="anchor-icon anchor-icon-link" anchorid="section5378844143410" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p10378244133413">getOhpmRemoteHspDependencyInfo: (isSigned: boolean) =&gt; Record&lt;string, OhpmDependencyInfo&gt; | object</p> <p id="ZH-CN_TOPIC_0000002478334508__p1637818441345">获取工程下oh-package.json5中配置的hsp包依赖信息。</p> <p id="ZH-CN_TOPIC_0000002478334508__p1181510518152"><strong>起始版本：</strong>Hvigor 5.6.2</p> <p id="ZH-CN_TOPIC_0000002478334508__p61201443386"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1512054413814" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row81201444193820"><th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p1112074453815">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p61207448389">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p21201444123818">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p10120344123816">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row151202044103811"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p35791752154110">signed</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p21207445389">boolean</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p812084418388">否</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p20121144413811">是否获取签名的hsp包路径，默认为false</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p13378444173412"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table16378344123418" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row53781448345"><th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p837934418343">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p1937917445346">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row2334205054011"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p52741553134019">Record&lt;string, OhpmDependencyInfo&gt; | object</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p7274125319408">工程下oh-package.json5中配置的hsp包依赖信息</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p18379174411341"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen579182674017" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> { hvigor, <span class="hljs-title class_">HvigorNode</span>, <span class="hljs-title class_">HvigorPlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">import</span> { appTasks, <span class="hljs-title class_">OhosHapContext</span>, <span class="hljs-title class_">OhosAppContext</span>, <span class="hljs-title class_">OhosPluginId</span>, <span class="hljs-title class_">Target</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li><li><span class="hljs-comment">// 实现自定义插件</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">customPlugin</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">HvigorPlugin</span> {</li><li>    <span class="hljs-keyword">return</span> {</li><li>        <span class="hljs-attr">pluginId</span>: <span class="hljs-string">'customPlugin'</span>,</li><li>        <span class="hljs-title function_">context</span>(<span class="hljs-params"></span>) {</li><li>            <span class="hljs-keyword">return</span> {</li><li>                <span class="hljs-attr">data</span>: <span class="hljs-string">'customPlugin xxx'</span></li><li>            };</li><li>        },</li><li>        <span class="hljs-keyword">async</span> <span class="hljs-title function_">apply</span>(<span class="hljs-attr">currentNode</span>: <span class="hljs-title class_">HvigorNode</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt; {</li><li>            hvigor.<span class="hljs-title function_">nodesEvaluated</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>                <span class="hljs-comment">// 注册模块级任务</span></li><li>                <span class="hljs-title function_">hapTask</span>(currentNode);</li><li>            });</li><li>        }</li><li>    };</li><li>}</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">hapTask</span>(<span class="hljs-params">currentNode: HvigorNode</span>) {</li><li>    <span class="hljs-comment">// 等待全部节点加载完成之后获取子节点信息</span></li><li>    currentNode.<span class="hljs-title function_">subNodes</span>(<span class="hljs-function">(<span class="hljs-params">node: HvigorNode</span>) =&gt;</span> {</li><li>        <span class="hljs-comment">// 获取hap模块上下文信息</span></li><li>        <span class="hljs-keyword">const</span> hapContext = node.<span class="hljs-title function_">getContext</span>(<span class="hljs-title class_">OhosPluginId</span>.<span class="hljs-property">OHOS_HAP_PLUGIN</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">OhosHapContext</span>;</li><li>        <span class="hljs-keyword">const</span> moduleName = hapContext?.<span class="hljs-title function_">getModuleName</span>();</li><li>        hapContext?.<span class="hljs-title function_">targets</span>(<span class="hljs-function">(<span class="hljs-params">target: Target</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">const</span> targetName = target.<span class="hljs-title function_">getTargetName</span>();</li><li>            node.<span class="hljs-title function_">registerTask</span>({</li><li>                <span class="hljs-comment">// 任务名称</span></li><li>                <span class="hljs-attr">name</span>: <span class="hljs-string">`<span class="hljs-subst">${targetName}</span>@getRemoteHspInfo`</span>,</li><li>                <span class="hljs-comment">// 任务执行逻辑主体函数</span></li><li>                <span class="hljs-title function_">run</span>(<span class="hljs-params"></span>) {</li><li>                    <span class="hljs-keyword">const</span> rootNodeContext = currentNode.<span class="hljs-title function_">getContext</span>(<span class="hljs-title class_">OhosPluginId</span>.<span class="hljs-property">OHOS_APP_PLUGIN</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">OhosAppContext</span>;</li><li>                    <span class="hljs-keyword">if</span> (!rootNodeContext) {</li><li>                        <span class="hljs-keyword">return</span>;</li><li>                    }</li><li>                    <span class="hljs-comment">// 获取未签名的远程hsp相关信息</span></li><li>                    <span class="hljs-keyword">const</span> remoteHspInfo = rootNodeContext.<span class="hljs-title function_">getOhpmRemoteHspDependencyInfo</span>();</li><li>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(remoteHspInfo)</li><li>                    <span class="hljs-comment">// 获取已签名的远程hsp相关信息</span></li><li>                    <span class="hljs-keyword">const</span> signedRemoteHspInfo = rootNodeContext.<span class="hljs-title function_">getOhpmRemoteHspDependencyInfo</span>(<span class="hljs-literal">true</span>);</li><li>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(signedRemoteHspInfo)</li><li>                },</li><li>                <span class="hljs-comment">// 配置前置任务依赖</span></li><li>                <span class="hljs-attr">dependencies</span>: [<span class="hljs-string">`<span class="hljs-subst">${targetName}</span>@PackageHap`</span>],</li><li>                <span class="hljs-comment">// 配置任务的后置任务依赖</span></li><li>                <span class="hljs-attr">postDependencies</span>: [<span class="hljs-string">'assembleHap'</span>]</li><li>            });</li><li>        });</li><li>    });</li><li>}</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>    <span class="hljs-attr">system</span>: appTasks,  <span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></li><li>    <span class="hljs-attr">plugins</span>:[<span class="hljs-title function_">customPlugin</span>()]         <span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></li><li>};</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334508__p1420316511235"></p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 339px;"><h3 id="section1085223315215">getDependenciesOpt<i class="anchor-icon anchor-icon-link" anchorid="section1085223315215" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p128532331323">getDependenciesOpt: () =&gt; any</p> <p id="ZH-CN_TOPIC_0000002478334508__p1885343310219">获取工程下oh-package.json5中配置的dependencies依赖。</p> <p id="ZH-CN_TOPIC_0000002478334508__p1910453517167"><strong>起始版本：</strong>Hvigor 5.0.10</p> <p id="ZH-CN_TOPIC_0000002478334508__p68536331320"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table0853733521" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row68536331229"><th align="left" class="cellrowborder" id="mcps1.3.23.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p585313320212">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p168536333215">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row17853203312212"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p18533331523">any</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p188539337215">工程级别下oh-package.json5中的dependencies信息</p> </td> </tr>  </tbody></table></div> </div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p1985373317216"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen685317333213" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">自定义插件代码</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="hljs-keyword">const</span> <span class="">rootNodeContext </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">)</span><span class="">;</span></li><li>            <span class="hljs-keyword">if</span> <span class="">(</span><span class="">!</span><span class="">rootNodeContext</span><span class="">) </span><span class="">{</span></li><li>                <span class="hljs-keyword">return</span><span class="">;</span></li><li>            <span class="">}</span></li><li>            <span class="hljs-keyword">const</span> <span class=""><span class="hljs-title class_">DependenciesInfo</span> </span><span class="">= </span><span class="">rootNodeContext.</span><span class=""><span class="hljs-title function_">getDependenciesOpt</span></span><span class="">()</span><span class="">;</span></li><li>            <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="hljs-title class_">DependenciesInfo</span><span class="">)</span></li><li>        <span class="">}</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> <div class="tiledSection" style="contain-intrinsic-size: auto 1076px;"><h3 id="section18789410129">setDependenciesOpt<i class="anchor-icon anchor-icon-link" anchorid="section18789410129" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p20878194114123">setDependenciesOpt: (dependencies: any) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334508__p8878134116128">设置工程下oh-package.json5中的dependencies依赖。需要确保oh-package.json5中dependencies字段存在。</p> <p id="ZH-CN_TOPIC_0000002478334508__p152081051161618"><strong>起始版本：</strong>Hvigor 5.0.10</p> <p id="ZH-CN_TOPIC_0000002478334508__p1587819419121"><strong>参数值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1784645415139" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row18471954181313"><th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p158471554121314">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p12847854191313">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p1847195471320">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p1884745416138">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row684716546131"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p6847454181317">dependencies</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p8847354181315">any</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p6847185471311">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p138475542136">设置当前工程下oh-package.json5中dependencies依赖</p> </td> </tr>  </tbody></table></div> </div> <div class="p" id="ZH-CN_TOPIC_0000002478334508__p387834118127"><strong>示例：</strong><div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen1387844171211" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">自定义插件代码</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="hljs-keyword">const</span> <span class="">rootNodeContext </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">)</span><span class="">;</span></li><li>            <span class="hljs-keyword">if</span> <span class="">(</span><span class="">!</span><span class="">rootNodeContext</span><span class="">) </span><span class="">{</span></li><li>                <span class="hljs-keyword">return</span><span class="">;</span></li><li>            <span class="">}</span></li><li>            <span class="hljs-keyword">const</span> <span class="">dependenciesInfo </span><span class="">= </span><span class="">rootNodeContext.</span><span class=""><span class="hljs-title function_">getDependenciesOpt</span></span><span class="">()</span></li><li>            dependenciesInfo[<span class="hljs-string">"har"</span>] = <span class="hljs-string">"./har"</span>;  <span class="hljs-comment">// 确保依赖存在</span></li><li>            <span class="">rootNodeContext.</span><span class=""><span class="hljs-title function_">setDependenciesOpt</span></span><span class="">(dependenciesInfo)</span>;   </li><li><span class="">      }</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1028px;"><h3 id="section192992531393">getDevDependenciesOpt<i class="anchor-icon anchor-icon-link" anchorid="section192992531393" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p429913537915">getDevDependenciesOpt: () =&gt; any</p> <p id="ZH-CN_TOPIC_0000002478334508__p13299135313916">获取工程下oh-package.json5中配置的devDependencies依赖。</p> <p id="ZH-CN_TOPIC_0000002478334508__p152601420131718"><strong>起始版本：</strong>Hvigor 5.0.10</p> <p id="ZH-CN_TOPIC_0000002478334508__p15299165312916"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table22995532911" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row8300753493"><th align="left" class="cellrowborder" id="mcps1.3.27.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p33001353392">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p1630015320913">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row133001453098"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p830045313913">any</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p193007531910">获取工程级别下oh-package.json5中devDependencies信息</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p1930095318919"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen16300353994" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">自定义插件代码</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="hljs-keyword">const</span> <span class="">rootNodeContext </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">)</span><span class="">;</span></li><li>            <span class="hljs-keyword">if</span> <span class="">(</span><span class="">!</span><span class="">rootNodeContext</span><span class="">) </span><span class="">{</span></li><li>                <span class="hljs-keyword">return</span><span class="">;</span></li><li>            <span class="">}</span></li><li>            <span class="hljs-keyword">const</span> dev<span class="">DependenciesInfo </span><span class="">= </span><span class="">rootNodeContext.</span><span class=""><span class="hljs-title function_">getDevDependenciesOpt</span></span><span class="">()</span><span class="">;</span></li><li>            <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span>devDependenciesInfo<span class="">)</span></li><li>        <span class="">}</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1076px;"><h3 id="section8534132541914">setDevDependenciesOpt<i class="anchor-icon anchor-icon-link" anchorid="section8534132541914" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p6534162519191">setDevDependenciesOpt: (devDependencies: any) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334508__p853419259198">设置工程下oh-package.json5中的devDependencies依赖。需要确保oh-package.json5中devDependencies字段存在。</p> <p id="ZH-CN_TOPIC_0000002478334508__p929323021719"><strong>起始版本：</strong>Hvigor 5.0.10</p> <p id="ZH-CN_TOPIC_0000002478334508__p15534325141912"><strong>参数值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table15534192519197" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row153462518191"><th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p35341025201914">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p1753402514193">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p1753417254196">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p19534182512195">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row7534192591918"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p19534192561914">devDependencies</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p65348257191">any</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p153442513199">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p175341825171913">设置当前工程下oh-package.json5中devdependencies依赖</p> </td> </tr>  </tbody></table></div> </div> <div class="p" id="ZH-CN_TOPIC_0000002478334508__p9534225151915"><strong>示例：</strong><div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen105341125111919" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">自定义插件代码</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="hljs-keyword">const</span> <span class="">rootNodeContext </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">)</span><span class="">;</span></li><li>            <span class="hljs-keyword">if</span> <span class="">(</span><span class="">!</span><span class="">rootNodeContext</span><span class="">) </span><span class="">{</span></li><li>                <span class="hljs-keyword">return</span><span class="">;</span></li><li>            <span class="">}</span></li><li>            <span class="hljs-keyword">const</span> <span class="">devDependenciesInfo </span><span class="">= </span><span class="">rootNodeContext.</span><span class=""><span class="hljs-title function_">getDevDependenciesOpt</span></span><span class="">()</span></li><li>            devDependenciesInfo[<span class="hljs-string">"har"</span>] = <span class="hljs-string">"./har"</span>;  <span class="hljs-comment">// 确保依赖存在</span></li><li>            <span class="">rootNodeContext.</span><span class=""><span class="hljs-title function_">setDevDependenciesOpt</span></span><span class="">(devDependenciesInfo)</span>;   </li><li><span class="">      }</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1052px;"><h3 id="section3891011201117">getDynamicDependenciesOpt<i class="anchor-icon anchor-icon-link" anchorid="section3891011201117" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p6891011161111">getDynamicDependenciesOpt: () =&gt; any</p> <p id="ZH-CN_TOPIC_0000002478334508__p158921161120">获取工程下oh-package.json5中配置的dynamicDependencies依赖。</p> <p id="ZH-CN_TOPIC_0000002478334508__p121976427177"><strong>起始版本：</strong>Hvigor 5.0.10</p> <p id="ZH-CN_TOPIC_0000002478334508__p1789311121110"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table6899111115" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row689311151111"><th align="left" class="cellrowborder" id="mcps1.3.29.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p128931114118">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p1189191111110">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row789171181120"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p178981117115">any</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p68991181113">获取工程级别下oh-package.json5中DynamicDependencies信息</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p168931131116"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen1289111121120" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">自定义插件代码</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="hljs-keyword">const</span> <span class="">rootNodeContext </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">)</span><span class="">;</span></li><li>            <span class="hljs-keyword">if</span> <span class="">(</span><span class="">!</span><span class="">rootNodeContext</span><span class="">) </span><span class="">{</span></li><li>                <span class="hljs-keyword">return</span><span class="">;</span></li><li>            <span class="">}</span></li><li>            <span class="hljs-keyword">const</span> dynamic<span class="">DependenciesInfo </span><span class="">= </span><span class="">rootNodeContext.</span><span class=""><span class="hljs-title function_">getDynamicDependenciesOpt</span></span><span class="">()</span><span class="">;</span></li><li>            <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span>dynamicDependenciesInfo<span class="">)</span></li><li>        <span class="">}</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 363px;"><h3 id="section2756613192210">setDynamicDependenciesOpt<i class="anchor-icon anchor-icon-link" anchorid="section2756613192210" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p9756913142215">setDynamicDependenciesOpt: (dynamicDependencies: any) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334508__p127561313122220">设置工程下oh-package.json5中的dynamicDependencies依赖。需要确保oh-package.json5中dynamicDependencies字段存在。</p> <p id="ZH-CN_TOPIC_0000002478334508__p581955151713"><strong>起始版本：</strong>Hvigor 5.0.10</p> <p id="ZH-CN_TOPIC_0000002478334508__p87561513112215"><strong>参数值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1756201314222" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row775641352216"><th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p137560134224">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p9756813122210">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p6756131310225">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p15756171352213">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row1575671314222"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p2756713152210">dynamicDependencies</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p1756141382210">any</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p4756171316226">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p77561113192216">设置当前工程下oh-package.json5中dynamicDependencies依赖</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p" id="ZH-CN_TOPIC_0000002478334508__p167561913132218"><strong>示例：</strong><div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen1175613133228" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">自定义插件代码</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="hljs-keyword">const</span> <span class="">rootNodeContext </span><span class="">= </span><span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">)</span><span class="">;</span></li><li>            <span class="hljs-keyword">if</span> <span class="">(</span><span class="">!</span><span class="">rootNodeContext</span><span class="">) </span><span class="">{</span></li><li>                <span class="hljs-keyword">return</span><span class="">;</span></li><li>            <span class="">}</span></li><li>            <span class="hljs-keyword">const</span> <span class="">dynamicDependenciesInfo </span><span class="">= </span><span class="">rootNodeContext.</span><span class=""><span class="hljs-title function_">getDynamicDependenciesOpt</span></span><span class="">()</span></li><li>            <span class="">dynamic</span>DependenciesInfo[<span class="hljs-string">"har"</span>] = <span class="hljs-string">"./har"</span>;  <span class="hljs-comment">// 确保依赖存在</span></li><li>            <span class="">rootNodeContext.</span><span class=""><span class="hljs-title function_">setDynamicDependenciesOpt</span></span><span class="">(dynamicDependenciesInfo)</span>;   </li><li><span class="">      }</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 836px;"><h3 id="section132674109325">getOverrides<i class="anchor-icon anchor-icon-link" anchorid="section132674109325" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p11409112823515">getOverrides: () =&gt; any</p> <p id="ZH-CN_TOPIC_0000002478334508__p106371413193619">获取工程下oh-package.json5中配置的overrides字段。</p> <p id="ZH-CN_TOPIC_0000002478334508__p15123134151811"><strong>起始版本：</strong>Hvigor 5.10.3</p> <p id="ZH-CN_TOPIC_0000002478334508__p1730419122376"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table13152112019381" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row1815219202386"><th align="left" class="cellrowborder" id="mcps1.3.32.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p161521220183816">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p2152102073819">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row121521320143815"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p5699525104010">any</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p20152112015382">获取工程下oh-package.json5中配置的overrides字段</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p815292020386"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen155682465476" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> { appTasks } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li><li><span class="hljs-keyword">import</span> {<span class="hljs-title class_">OhosAppContext</span>, <span class="hljs-title class_">OhosHapContext</span>, <span class="hljs-title class_">OhosPluginId</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li>hvigor.<span class="hljs-title function_">afterNodeEvaluate</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> {</li><li>  <span class="hljs-keyword">const</span> appContext = node.<span class="hljs-title function_">getContext</span>(<span class="hljs-title class_">OhosPluginId</span>.<span class="hljs-property">OHOS_APP_PLUGIN</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">OhosAppContext</span>;</li><li>  <span class="hljs-keyword">if</span> (appContext) {</li><li>    <span class="hljs-keyword">let</span> dependency = appContext.<span class="hljs-title function_">getOverrides</span>() ?? {};</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dependency)</li><li>  }</li><li>});</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>    <span class="hljs-attr">system</span>: appTasks,  <span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></li><li>    <span class="hljs-attr">plugins</span>:[]         <span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1052px;"><h3 id="section469812496459">setOverrides<i class="anchor-icon anchor-icon-link" anchorid="section469812496459" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p175271126184711">setOverrides: (overrides: any) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334508__p19527182694717">设置工程下oh-package.json5中的overrides字段。</p> <p id="ZH-CN_TOPIC_0000002478334508__p18804153471820"><strong>起始版本：</strong>Hvigor 5.10.3</p> <p id="ZH-CN_TOPIC_0000002478334508__p55271326144720"><strong>参数值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1216174810499" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row3161548154917"><th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p121611448194918">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p1216119487492">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p1916194812498">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p101611148134911">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row016214488493"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p191621248114919">overrides</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p01621648184918">any</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p916219489491">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p7162144815490">设置工程下oh-package.json5中的overrides字段</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p79651353593"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen152842644719" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> { appTasks } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li><li><span class="hljs-keyword">import</span> {<span class="hljs-title class_">OhosAppContext</span>, <span class="hljs-title class_">OhosHapContext</span>, <span class="hljs-title class_">OhosPluginId</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li>hvigor.<span class="hljs-title function_">afterNodeEvaluate</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> {</li><li>  <span class="hljs-keyword">const</span> appContext = node.<span class="hljs-title function_">getContext</span>(<span class="hljs-title class_">OhosPluginId</span>.<span class="hljs-property">OHOS_APP_PLUGIN</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">OhosAppContext</span>;</li><li>  <span class="hljs-keyword">if</span> (appContext) {</li><li>    <span class="hljs-keyword">let</span> dependency = appContext.<span class="hljs-title function_">getOverrides</span>() ?? {};</li><li>    dependency[<span class="hljs-string">'library'</span>] = <span class="hljs-string">'file:./library.har'</span>; <span class="hljs-comment">//在工程级oh-package.json5中动态添加工程内HAR包依赖</span></li><li>    appContext.<span class="hljs-title function_">setOverrides</span>(dependency);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">const</span> hapContext = node.<span class="hljs-title function_">getContext</span>(<span class="hljs-title class_">OhosPluginId</span>.<span class="hljs-property">OHOS_HAP_PLUGIN</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">OhosHapContext</span>;</li><li>  <span class="hljs-keyword">if</span> (hapContext) {</li><li>    <span class="hljs-keyword">const</span> dependency = hapContext.<span class="hljs-title function_">getDependenciesOpt</span>();</li><li>    dependency[<span class="hljs-string">'library'</span>] = <span class="hljs-string">'file:./../library'</span>;    <span class="hljs-comment">//在entry上动态添加工程内模块依赖</span></li><li>    hapContext.<span class="hljs-title function_">setDependenciesOpt</span>(dependency);</li><li>  }</li><li>});</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>    <span class="hljs-attr">system</span>: appTasks,  <span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></li><li>    <span class="hljs-attr">plugins</span>:[]         <span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1268px;"><h3 id="section085712212299">getSdkDetails<i class="anchor-icon anchor-icon-link" anchorid="section085712212299" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p885732292914">getSdkDetails: () =&gt; SdkDetails</p> <p id="ZH-CN_TOPIC_0000002478334508__p20857112202917">获取SDK相关的信息。</p> <p id="ZH-CN_TOPIC_0000002478334508__p1285712226293"><strong>起始版本：</strong>Hvigor 6.0.4</p> <p id="ZH-CN_TOPIC_0000002478334508__p10857112222914"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table12857142219295" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row8858182252914"><th align="left" class="cellrowborder" id="mcps1.3.34.6.1.3.1.1" valign="top" width="38.550000000000004%"><p id="ZH-CN_TOPIC_0000002478334508__p15858182213293">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.3.1.2" valign="top" width="61.45%"><p id="ZH-CN_TOPIC_0000002478334508__p2858122202916">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row1285812219291"><td class="cellrowborder" valign="top" width="38.550000000000004%"><p id="ZH-CN_TOPIC_0000002478334508__p585832272919"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section1463642114714">SdkDetails</a></p> </td> <td class="cellrowborder" valign="top" width="61.45%"><p id="ZH-CN_TOPIC_0000002478334508__p138581722172919">SDK相关的信息</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p2085882217299"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen2154151193612" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{</span><span class=""> <span class="hljs-title class_">OhosAppContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class=""> } </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>  <span class="hljs-keyword">return</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-title function_">context</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>      <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">data</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin xxx'</span></span></li><li>      <span class="">}</span><span class="">;</span></li><li>    <span class="">}</span><span class="">,</span></li><li>    <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>      <span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">afterNodeEvaluate</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">node</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class="hljs-keyword">const</span> <span class="">appContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_APP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosAppContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">if</span> <span class="">(</span><span class="">appContext</span><span class="">) </span><span class="">{</span></li><li>          <span class="hljs-keyword">let</span> <span class="">sdk </span><span class="">= </span><span class="">appContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getSdkDetails</span></span><span class="">()</span><span class="">;</span></li><li>          <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">sdk</span><span class="">?.</span><span class=""><span class="hljs-title function_">getSdkDir</span></span><span class="">())</span></li><li>          <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">sdk</span><span class="">?.</span><span class=""><span class="hljs-title function_">isOhos</span></span><span class="">())</span></li><li>          <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">sdk</span><span class="">?.</span><span class=""><span class="hljs-title function_">getSdkVersion</span></span><span class="">())</span></li><li>          <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">sdk</span><span class="">?.</span><span class=""><span class="hljs-title function_">getEtsComponentVersion</span></span><span class="">())</span></li><li>          <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">sdk</span><span class="">?.</span><span class=""><span class="hljs-title function_">getEtsComponentReleaseType</span></span><span class="">())</span></li><li>        <span class="">}</span></li><li><span class="">      }</span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">  }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>  <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>  <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 140px;"><h2 id="section34581171674">OhosHapContext<i class="anchor-icon anchor-icon-link" anchorid="section34581171674" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334508__p2619175213482">hap模块Plugin提供的上下文接口，在hap模块的hvigor节点中可通过getContext方法传入OhosPluginId.OHOS_HAP_PLUGIN_ID获取该接口，接口中主要包含了hap模块中module、target信息。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 169px;"><h3 id="section19918316479" class="firsth2">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section19918316479" tips="复制节点链接"></i></h3><div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen31595273415" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">OhosHapContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 860px;"><h3 id="section19531111785614">getModuleName<i class="anchor-icon anchor-icon-link" anchorid="section19531111785614" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p1195216478581">getModuleName: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334508__p52494594453">获取模块名称。</p> <p id="ZH-CN_TOPIC_0000002478334508__p38111526145718"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table135056611597" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row2505364593"><th align="left" class="cellrowborder" id="mcps1.3.37.5.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p85064613591">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.37.5.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p155061762593">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row1150615617598"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p85061863598">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p12506166195917">模块名称</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p196271343155911"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen83517405495" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获得所有子节点</span></span></li><li>        <span class="hljs-keyword">const</span> <span class="">hapContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">const</span> <span class="">moduleName </span><span class="">= </span><span class="">hapContext</span><span class="">?.</span><span class=""><span class="hljs-title function_">getModuleName</span></span><span class="">()</span><span class="">;</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Module Name: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">moduleName</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 860px;"><h3 id="section181214545560">getModulePath<i class="anchor-icon anchor-icon-link" anchorid="section181214545560" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p18715173512580">getModulePath: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334508__p1886963165910">获取模块路径。</p> <p id="ZH-CN_TOPIC_0000002478334508__p9165239135718"></p> <p id="ZH-CN_TOPIC_0000002478334508__p1283413913571"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table31797210017" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row918032803"><th align="left" class="cellrowborder" id="mcps1.3.38.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p18180521201">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p1918011216017">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row121801922017"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p81808215016">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p1218092307">模块路径</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p1859418472594"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen136174337501" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获得所有子节点</span></span></li><li>        <span class="hljs-keyword">const</span> <span class="">hapContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">const</span> <span class="">modulePath </span><span class="">= </span><span class="">hapContext</span><span class="">?.</span><span class=""><span class="hljs-title function_">getModulePath</span></span><span class="">()</span><span class="">;</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Module Path: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">modulePath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 860px;"><h3 id="section9154135955618">getModuleType<i class="anchor-icon anchor-icon-link" anchorid="section9154135955618" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p1734218351208">getModuleType: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334508__p22497596458">获取模块类型，取值来自模块配置文件module.json5的type字段。</p> <p id="ZH-CN_TOPIC_0000002478334508__p46827095818"></p> <p id="ZH-CN_TOPIC_0000002478334508__p1527514118586"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table159563221204" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row1195602210012"><th align="left" class="cellrowborder" id="mcps1.3.39.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p12956162215013">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p11956022308">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row15956322903"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p2095618222017">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p1295617220010">模块类型</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p363425115914"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen630365720523" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获得所有子节点</span></span></li><li>        <span class="hljs-keyword">const</span> <span class="">hapContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">const</span> <span class="">moduleType </span><span class="">= </span><span class="">hapContext</span><span class="">?.</span><span class=""><span class="hljs-title function_">getModuleType</span></span><span class="">()</span><span class="">;</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Module Type: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">moduleType</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 860px;"><h3 id="section14293112105713">getBuildProductRootPath<i class="anchor-icon anchor-icon-link" anchorid="section14293112105713" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p43978151110">getBuildProductRootPath: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334508__p612114814">获取模块基于product构建根路径。</p> <p id="ZH-CN_TOPIC_0000002478334508__p1336981295818"></p> <p id="ZH-CN_TOPIC_0000002478334508__p1829115132584"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1186721721" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row1586714116216"><th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p58671811427">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p2867114217">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row786720118212"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p148671111326">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p7867181023">模块基于product构建根路径</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p113952565594"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen104411959135516" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获得所有子节点</span></span></li><li>        <span class="hljs-keyword">const</span> <span class="">hapContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">const</span> <span class="">buildProductRootPath </span><span class="">= </span><span class="">hapContext</span><span class="">?.</span><span class=""><span class="hljs-title function_">getBuildProductRootPath</span></span><span class="">()</span><span class="">;</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Build Product Root Path: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">buildProductRootPath</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 956px;"><h3 id="section165143585718">targets<i class="anchor-icon anchor-icon-link" anchorid="section165143585718" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p87151235115819">targets: (callbackfn: (target: Target) =&gt; void) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334508__p196625281431">当前需构建的target对象回调方法。</p> <p id="ZH-CN_TOPIC_0000002478334508__p16774202418586"></p> <p id="ZH-CN_TOPIC_0000002478334508__p8241123175810"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table113591838192116" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row1535923815213"><th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p183591738112115">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p18359173811219">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p19359338122110">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p12360143842119">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row536023862115"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p1136019385217">callback</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p1836014381218">(target: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-api#section12392182963714">Target</a>) =&gt; void</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p11360103862110">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p536023842117">入参类型为Target，返回类型为void的函数</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p166679596597"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen12645157105815" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获得所有子节点</span></span></li><li>        <span class="hljs-keyword">const</span> <span class="">hapContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>        <span class="">hapContext</span><span class="">?.</span><span class=""><span class="hljs-title function_">targets</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">target</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">Target</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>            <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">这里可以写入对每个</span></span><span class=""><span class="hljs-comment"> target </span></span><span class=""><span class="hljs-comment">的处理逻辑</span></span></li><li>            <span class="hljs-keyword">const</span> <span class="">targetName </span><span class="">= </span><span class="">target</span><span class="">.</span><span class=""><span class="hljs-title function_">getTargetName</span></span><span class="">()</span><span class="">;</span></li><li>            <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Target Name: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">targetName</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 908px;"><h3 id="section122861615474">getBuildMode<i class="anchor-icon anchor-icon-link" anchorid="section122861615474" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p7286136184717">getBuildMode: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334508__p4286116204712">获取当前构建指定的BuildMode。</p> <p id="ZH-CN_TOPIC_0000002478334508__p87781750162014"><strong>起始版本：</strong>Hvigor 5.18.4</p> <p id="ZH-CN_TOPIC_0000002478334508__p1228696134718"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table128656164713" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row1528610664719"><th align="left" class="cellrowborder" id="mcps1.3.42.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p328616114713">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p102861616478">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row8286860471"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p15287061474">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p19287767470">当前构建指定的BuildMode</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p17963182509"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen204841921003" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获得所有子节点</span></span></li><li>        <span class="hljs-keyword">const</span> <span class="">hapContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">const</span> <span class="">buildMode </span><span class="">= </span><span class="">hapContext</span><span class="">?.</span><span class=""><span class="hljs-title function_">getBuildMode</span></span><span class="">()</span><span class="">;</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Build Mode: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">buildMode</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 860px;"><h3 id="section18481048485">getModuleJsonOpt<i class="anchor-icon anchor-icon-link" anchorid="section18481048485" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p1748116481585">getModuleJsonOpt: () =&gt; any</p> <p id="ZH-CN_TOPIC_0000002478334508__p748111484817">获取当前模块的module.json5文件中内容的obj对象。</p> <p id="ZH-CN_TOPIC_0000002478334508__p1248116484814"></p> <p id="ZH-CN_TOPIC_0000002478334508__p6481194814818"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table84810481983" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row104811481582"><th align="left" class="cellrowborder" id="mcps1.3.43.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p2481048885">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p1248110481183">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row154811148585"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p548174819814">any</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p154810481812">当前模块的module.json5文件中内容的obj对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p135131661409"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen64651423317" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获得所有子节点</span></span></li><li>        <span class="hljs-keyword">const</span> <span class="">hapContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">const</span> <span class="">moduleJsonOpt </span><span class="">= </span><span class="">hapContext</span><span class="">?.</span><span class=""><span class="hljs-title function_">getModuleJsonOpt</span></span><span class="">()</span><span class="">;</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Module Json Opt: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">JSON</span></span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">stringify</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">(</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">moduleJsonOpt</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">)</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 455px;"><h3 id="section648112481686">setModuleJsonOpt<i class="anchor-icon anchor-icon-link" anchorid="section648112481686" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p2481144810816">setModuleJsonOpt: (moduleJsonOpt: any) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334508__p134814481186">修改当前构建的module.json5文件中的obj对象。</p> <p id="ZH-CN_TOPIC_0000002478334508__p7481048487"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table10481948181" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row1648117486816"><th align="left" class="cellrowborder" id="mcps1.3.44.5.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p6481148586">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.44.5.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p184811485814">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.44.5.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p14811348981">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.44.5.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p74815481687">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row1448104820817"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p124812481689">moduleJsonOpt</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p1148115481783">any</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p1048119482819">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p114821648182">设置当前模块的module.json5文件解析出来的obj对象</p> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334508__p1461291932511">setModuleJsonOpt会进行schema校验，如果传入的对象不符合校验规则会抛出异常。</p> </div></div></div> <p id="ZH-CN_TOPIC_0000002478334508__p47072151404"><strong>示例：</strong></p> </div> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen5729174910512" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获得所有子节点</span></span></li><li>        <span class="hljs-keyword">const</span> <span class="">hapContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">const</span> <span class="">moduleJsonOpt </span><span class="">= </span><span class="">hapContext</span><span class="">?.</span><span class=""><span class="hljs-title function_">getModuleJsonOpt</span></span><span class="">()</span><span class="">;</span></li><li><span class="">        moduleJsonOpt</span><span class="">?.</span><span class=""><span class="hljs-property">module</span></span><span class="">.</span><span class=""><span class="hljs-property">deviceTypes</span> </span><span class="">= </span><span class="">[</span><span class=""><span class="hljs-string">"phone"</span></span><span class="">, </span><span class=""><span class="hljs-string">"tablet"</span></span><span class="">]</span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">修改</span></span><span class=""><span class="hljs-comment"> module.json </span></span><span class=""><span class="hljs-comment">中的</span></span><span class=""><span class="hljs-comment"> deviceTypes </span></span><span class=""><span class="hljs-comment">字段</span></span></li><li>        <span class="">hapContext</span><span class="">?.</span><span class=""><span class="hljs-title function_">setModuleJsonOpt</span></span><span class="">(</span><span class="">moduleJsonOpt</span><span class="">)</span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">更新</span></span><span class=""><span class="hljs-comment"> module.json</span></span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Module Json Opt: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">JSON</span></span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">stringify</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">(</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">moduleJsonOpt</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">)</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> <div class="tiledSection" style="contain-intrinsic-size: auto 860px;"><h3 id="section548213481585">getBuildProfileOpt<i class="anchor-icon anchor-icon-link" anchorid="section548213481585" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p1548214481384">getBuildProfileOpt: () =&gt; any</p> <p id="ZH-CN_TOPIC_0000002478334508__p348217487816">获取当前模块的build-profile.json5文件中内容的obj对象。</p> <p id="ZH-CN_TOPIC_0000002478334508__p14821148282"></p> <p id="ZH-CN_TOPIC_0000002478334508__p54820481889"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1248274812812" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row64821848782"><th align="left" class="cellrowborder" id="mcps1.3.46.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p848214481888">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.46.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p84822481882">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row8482144812810"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p44821482810">any</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p5482124811819">当前模块的build-profile.json5文件中内容的obj对象</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p930153114018"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen131181540468" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获得所有子节点</span></span></li><li>        <span class="hljs-keyword">const</span> <span class="">hapContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">const</span> <span class="">buildProfileOpt </span><span class="">= </span><span class="">hapContext</span><span class="">?.</span><span class=""><span class="hljs-title function_">getBuildProfileOpt</span></span><span class="">()</span><span class="">;</span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Build Profile Opt: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">JSON</span></span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">stringify</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">(</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">buildProfileOpt</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">)</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 315px;"><h3 id="section54829483815">setBuildProfileOpt<i class="anchor-icon anchor-icon-link" anchorid="section54829483815" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p648219484817">setBuildProfileOpt: (buildProfileOpt: any) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334508__p1448218481686">设置当前模块的build-profile.json5文件中内容的obj对象。</p> <p id="ZH-CN_TOPIC_0000002478334508__p648214481889"><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table10482848789" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row154821248685"><th align="left" class="cellrowborder" id="mcps1.3.47.5.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p148219486810">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.47.5.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p184821648480">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.47.5.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p164828481883">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.47.5.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p248244812813">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row19482184810811"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p14482748786">buildProfileOpt</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p194822480811">any</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p548216481188">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p1348218481288">设置当前模块的build-profile.json5文件中内容的obj对象</p> </td> </tr>  </tbody></table></div> </div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334508__p1570812390232">setBuildProfileOpt会进行schema校验，如果传入的对象不符合校验规则会抛出异常。</p> </div></div></div> <p id="ZH-CN_TOPIC_0000002478334508__p18650193710013"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen18770815173315" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks</span><span class="">, </span><span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">, </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor</span><span class="">, </span><span class=""><span class="hljs-title class_">HvigorNode</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li>
</li><li><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class="">rootNode </span><span class="">= </span><span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">getRootNode</span></span><span class="">()</span><span class="">;</span></li><li>    <span class="">rootNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获得所有子节点</span></span></li><li>        <span class="hljs-keyword">const</span> <span class="">hapContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>        <span class="hljs-keyword">const</span> <span class="">buildProfileOpt </span><span class="">= </span><span class="">hapContext</span><span class="">?.</span><span class=""><span class="hljs-title function_">getBuildProfileOpt</span></span><span class="">()</span><span class="">;</span></li><li>        <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">可以对</span></span><span class=""><span class="hljs-comment">buildProfileOpt</span></span><span class=""><span class="hljs-comment">进行修改</span></span></li><li>        <span class="">buildProfileOpt</span><span class="">?.</span><span class=""><span class="hljs-property">targets</span></span><span class="">?.</span><span class=""><span class="hljs-title function_">push</span></span><span class="">(</span><span class="">{</span></li><li>            <span class=""><span class="hljs-string">"name"</span></span><span class="">: </span><span class=""><span class="hljs-string">"default1"</span></span><span class="">,</span></li><li>        <span class="">}</span><span class="">)</span></li><li>        <span class="">hapContext</span><span class="">?.</span><span class=""><span class="hljs-title function_">setBuildProfileOpt</span></span><span class="">(</span><span class="">buildProfileOpt</span><span class="">)</span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">更新</span></span><span class=""><span class="hljs-comment"> build profile</span></span></li><li>        <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class=""><span class="hljs-string">`Build Profile Opt: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">JSON</span></span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">stringify</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">(</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">buildProfileOpt</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">)</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> <div class="tiledSection" style="contain-intrinsic-size: auto 1244px;"><h3 id="section1271317354814">getVersion<i class="anchor-icon anchor-icon-link" anchorid="section1271317354814" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p181242519369">getVersion: () =&gt; string</p> <p id="ZH-CN_TOPIC_0000002478334508__p1579610378560">获取模块oh-package.json5中配置的版本号。</p> <p id="ZH-CN_TOPIC_0000002478334508__p1222495715017"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table1087417123012" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row128753128018"><th align="left" class="cellrowborder" id="mcps1.3.51.5.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p1387514128015">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.51.5.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p887519127012">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row1187511121012"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p1587513121301">string</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p58755121207">模块oh-package.json5中配置的版本号</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p93127530011"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen950419214116" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">实现自定义插件</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class=""><span class="hljs-title function_">context</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>            <span class="hljs-keyword">return</span> <span class="">{</span></li><li>                <span class=""><span class="hljs-attr">data</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin xxx'</span></span></li><li>            <span class="">}</span><span class="">;</span></li><li>        <span class="">}</span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(</span><span class="hljs-keyword">async</span> <span class="">() </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>                <span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>                    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取</span></span><span class=""><span class="hljs-comment">hap</span></span><span class=""><span class="hljs-comment">模块上下文信息</span></span></li><li>                    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">如果是</span></span><span class=""><span class="hljs-comment">HAR</span></span><span class=""><span class="hljs-comment">或</span></span><span class=""><span class="hljs-comment">HSP</span></span><span class=""><span class="hljs-comment">，使用</span></span><span class=""><span class="hljs-comment">OHOS_HAR_PLUGIN/OHOS_HSP_PLUGIN</span></span></li><li>                    <span class="hljs-keyword">const</span> <span class="">hapNodeContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>                    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">!</span><span class="">hapNodeContext</span><span class="">) </span><span class="">{</span></li><li>                        <span class="hljs-keyword">return</span><span class="">;</span></li><li>                    <span class="">}</span></li><li>                    <span class="hljs-keyword">const</span> <span class="">moduleVersion </span><span class="">= </span><span class="">hapNodeContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getVersion</span></span><span class="">()</span><span class="">;</span></li><li>                    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">moduleVersion</span><span class="">)</span><span class="">;</span></li><li>                <span class="">}</span><span class="">)</span><span class="">;</span></li><li>            <span class="">}</span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 1268px;"><h3 id="section209531486482">setVersion<i class="anchor-icon anchor-icon-link" anchorid="section209531486482" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p1883114208574">setVersion: (version: string) =&gt; void</p> <p id="ZH-CN_TOPIC_0000002478334508__p7549254145710">修改模块oh-package.json5中的版本号。</p> <p id="ZH-CN_TOPIC_0000002478334508__p7874354204318"><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table381482656" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row1081519213517"><th align="left" class="cellrowborder" id="mcps1.3.52.5.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p5815921757">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.52.5.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p1281517215513">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.52.5.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p1981532954">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.52.5.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p208151821057">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row158151121456"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p12815228519">version</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p17815925518">string</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p68151422513">是</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p6815621350">修改模块oh-package.json5中的版本号</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p145951541154215"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen12377114917424" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">实现自定义插件</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class=""><span class="hljs-title function_">context</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>            <span class="hljs-keyword">return</span> <span class="">{</span></li><li>                <span class=""><span class="hljs-attr">data</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin xxx'</span></span></li><li>            <span class="">}</span><span class="">;</span></li><li>        <span class="">}</span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(</span><span class="hljs-keyword">async</span> <span class="">() </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>                <span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>                    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取</span></span><span class=""><span class="hljs-comment">hap</span></span><span class=""><span class="hljs-comment">模块上下文信息</span></span></li><li>                    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">如果是</span></span><span class=""><span class="hljs-comment">HAR</span></span><span class=""><span class="hljs-comment">或</span></span><span class=""><span class="hljs-comment">HSP</span></span><span class=""><span class="hljs-comment">，使用</span></span><span class=""><span class="hljs-comment">OHOS_HAR_PLUGIN/OHOS_HSP_PLUGIN</span></span></li><li>                    <span class="hljs-keyword">const</span> <span class="">hapNodeContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>                    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">!</span><span class="">hapNodeContext</span><span class="">) </span><span class="">{</span></li><li>                        <span class="hljs-keyword">return</span><span class="">;</span></li><li>                    <span class="">}</span></li><li>                    <span class="">hapNodeContext</span><span class="">.</span><span class=""><span class="hljs-title function_">setVersion</span></span><span class="">(</span><span class=""><span class="hljs-string">'2.0.0'</span></span><span class="">)</span><span class="">;</span></li><li>                    <span class="hljs-keyword">const</span> <span class="">moduleVersion </span><span class="">= </span><span class="">hapNodeContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getVersion</span></span><span class="">()</span><span class="">;</span></li><li>                    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">moduleVersion</span><span class="">)</span><span class="">;</span></li><li>                <span class="">}</span><span class="">)</span><span class="">;</span></li><li>            <span class="">}</span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 339px;"><h3 id="section1617091618556">getOhpmDependencyInfo<i class="anchor-icon anchor-icon-link" anchorid="section1617091618556" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p161701516145511">getOhpmDependencyInfo: () =&gt; Record&lt;string, OhpmDependencyInfo&gt; | object</p> <p id="ZH-CN_TOPIC_0000002478334508__p01700162554">获取模块下oh-package.json5中配置的依赖信息。</p> <p id="ZH-CN_TOPIC_0000002478334508__p16781510162314"><strong>起始版本：</strong>Hvigor 5.0.0</p> <p id="ZH-CN_TOPIC_0000002478334508__p13170151635515"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table121701116135513" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row10170916155520"><th align="left" class="cellrowborder" id="mcps1.3.53.6.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p7170181613550">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p417051620558">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row0170201675515"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p31701216195519">Record&lt;string, OhpmDependencyInfo&gt; | object</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p13170191612551">oh-package.json5中配置的依赖信息</p> </td> </tr>  </tbody></table></div> </div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p117031610555"><strong>示例：</strong></p> <div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen1562595975712" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">appTasks </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hvigor </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">OhosPluginId</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">实现自定义插件</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">(<span class="hljs-params"></span>)</span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorPlugin</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">return</span> <span class="">{</span></li><li>        <span class=""><span class="hljs-attr">pluginId</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin'</span></span><span class="">,</span></li><li>        <span class=""><span class="hljs-title function_">context</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>            <span class="hljs-keyword">return</span> <span class="">{</span></li><li>                <span class=""><span class="hljs-attr">data</span></span><span class="">: </span><span class=""><span class="hljs-string">'customPlugin xxx'</span></span></li><li>            <span class="">}</span><span class="">;</span></li><li>        <span class="">}</span><span class="">,</span></li><li>        <span class="hljs-keyword">async</span> <span class=""><span class="hljs-title function_">apply</span></span><span class="">(</span><span class=""><span class="hljs-attr">currentNode</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HvigorNode</span></span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-keyword">void</span></span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class="">hvigor</span><span class="">.</span><span class=""><span class="hljs-title function_">nodesEvaluated</span></span><span class="">(</span><span class="hljs-keyword">async</span> <span class="">() </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>                <span class="">currentNode</span><span class="">.</span><span class=""><span class="hljs-title function_">subNodes</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">HvigorNode</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>                    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取</span></span><span class=""><span class="hljs-comment">hap</span></span><span class=""><span class="hljs-comment">模块上下文信息</span></span></li><li>                    <span class="hljs-keyword">const</span> <span class="">hapNodeContext </span><span class="">= </span><span class="">node</span><span class="">.</span><span class=""><span class="hljs-title function_">getContext</span></span><span class="">(</span><span class=""><span class="hljs-title class_">OhosPluginId</span></span><span class="">.</span><span class=""><span class="hljs-property">OHOS_HAP_PLUGIN</span></span><span class="">) </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">OhosHapContext</span></span><span class="">;</span></li><li>                    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">!</span><span class="">hapNodeContext</span><span class="">) </span><span class="">{</span></li><li>                        <span class="hljs-keyword">return</span><span class="">;</span></li><li>                    <span class="">}</span></li><li>                    <span class="hljs-keyword">const</span> <span class="">ohpmInfo </span><span class="">= </span><span class="">hapNodeContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getOhpmDependencyInfo</span></span><span class="">()</span><span class="">;</span></li><li>                    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">log</span></span><span class="">(</span><span class="">ohpmInfo</span><span class="">)</span></li><li>
</li><li>                <span class="">}</span><span class="">)</span><span class="">;</span></li><li>            <span class="">}</span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span></li><li><span class="">    }</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-attr">system</span></span><span class="">: </span><span class="">appTasks</span><span class="">,  </span><span class=""><span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></span></li><li>    <span class=""><span class="hljs-attr">plugins</span></span><span class="">:</span><span class="">[</span><span class=""><span class="hljs-title function_">customPlugin</span></span><span class="">()]         </span><span class=""><span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></span></li><li><span class="">}</span></li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334508__p13172121655520"></p> <div class="tiledSection" style="contain-intrinsic-size: auto 1774px;"><h3 id="section17358128143114">getOhpmRemoteHspDependencyInfo<i class="anchor-icon anchor-icon-link" anchorid="section17358128143114" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p5358192813113">getOhpmRemoteHspDependencyInfo: (isSigned: boolean) =&gt; Record&lt;string, OhpmDependencyInfo&gt; | object</p> <p id="ZH-CN_TOPIC_0000002478334508__p135822813117">获取模块下oh-package.json5中配置的hsp包依赖信息。</p> <p id="ZH-CN_TOPIC_0000002478334508__p1194282718236"><strong>起始版本：</strong>Hvigor 5.6.2</p> <p id="ZH-CN_TOPIC_0000002478334508__p12358122812311"><strong>参数值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table235862816317" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row6358228183119"><th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.1" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p15358628173116">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.2" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p635822863119">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.3" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p19358528123119">必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.4" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p1035852815312">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row6358202833110"><td class="cellrowborder" valign="top" width="22.8%"><p id="ZH-CN_TOPIC_0000002478334508__p13358132811315">isSigned</p> </td> <td class="cellrowborder" valign="top" width="21.98%"><p id="ZH-CN_TOPIC_0000002478334508__p1359102813110">boolean</p> </td> <td class="cellrowborder" valign="top" width="20.18%"><p id="ZH-CN_TOPIC_0000002478334508__p43598286313">否</p> </td> <td class="cellrowborder" valign="top" width="35.04%"><p id="ZH-CN_TOPIC_0000002478334508__p1635942883110">是否获取签名的hsp包路径，默认为false</p> </td> </tr>  </tbody></table></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p53591128153119"><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table id="table15359102833117" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334508__row4359328113114"><th align="left" class="cellrowborder" id="mcps1.3.57.8.1.3.1.1" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p17359528103117">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.57.8.1.3.1.2" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p1435910283318">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334508__row1835922816316"><td class="cellrowborder" valign="top" width="49.93%"><p id="ZH-CN_TOPIC_0000002478334508__p535992813313">Record&lt;string, OhpmDependencyInfo&gt; | object</p> </td> <td class="cellrowborder" valign="top" width="50.07%"><p id="ZH-CN_TOPIC_0000002478334508__p4359172863117">模块下oh-package.json5中配置的hsp包依赖信息</p> </td> </tr>  </tbody></table></div> </div> <div class="p" id="ZH-CN_TOPIC_0000002478334508__p11359228123117"><strong>示例：</strong><div _ngcontent-ylx-c106="" class="highlight-div"><div _ngcontent-ylx-c106="" class="highlight-div-header"><div _ngcontent-ylx-c106="" class="highlight-div-header-left"><div _ngcontent-ylx-c106="" class="handle-button expand-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ylx-c106="" class="highlight-div-header-right"><div _ngcontent-ylx-c106="" class="handle-button ai-button"></div><div _ngcontent-ylx-c106="" class="handle-button line-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ylx-c106="" class="handle-button theme-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ylx-c106="" class="handle-button copy-button"><div _ngcontent-ylx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ylx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334508__screen1235916283312" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">工程级</span></span><span class=""><span class="hljs-comment">hvigorfile.ts</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li><span class="hljs-keyword">import</span> { appTasks } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li><li><span class="hljs-keyword">import</span> { hvigor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">OhosPluginId</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/hvigor-ohos-plugin'</span>;</li><li><span class="hljs-comment">// 实现自定义插件</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">customPlugin</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">HvigorPlugin</span> {</li><li>    <span class="hljs-keyword">return</span> {</li><li>        <span class="hljs-attr">pluginId</span>: <span class="hljs-string">'customPlugin'</span>,</li><li>        <span class="hljs-title function_">context</span>(<span class="hljs-params"></span>) {</li><li>            <span class="hljs-keyword">return</span> {</li><li>                <span class="hljs-attr">data</span>: <span class="hljs-string">'customPlugin xxx'</span></li><li>            };</li><li>        },</li><li>        <span class="hljs-keyword">async</span> <span class="hljs-title function_">apply</span>(<span class="hljs-attr">currentNode</span>: <span class="hljs-title class_">HvigorNode</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt; {</li><li>            hvigor.<span class="hljs-title function_">nodesEvaluated</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>                currentNode.<span class="hljs-title function_">subNodes</span>(<span class="hljs-function">(<span class="hljs-params">node: HvigorNode</span>) =&gt;</span> {</li><li>                    <span class="hljs-comment">// 获取hap模块上下文信息</span></li><li>                    <span class="hljs-keyword">const</span> hapNodeContext = node.<span class="hljs-title function_">getContext</span>(<span class="hljs-title class_">OhosPluginId</span>.<span class="hljs-property">OHOS_HAP_PLUGIN</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">OhosHapContext</span>;</li><li>                    hapNodeContext?.<span class="hljs-title function_">targets</span>(<span class="hljs-function">(<span class="hljs-params">target: Target</span>) =&gt;</span> {</li><li>                        <span class="hljs-keyword">const</span> targetName = target.<span class="hljs-title function_">getTargetName</span>();</li><li>                        node.<span class="hljs-title function_">registerTask</span>({</li><li>                            <span class="hljs-comment">// 任务名称</span></li><li>                            <span class="hljs-attr">name</span>: <span class="hljs-string">`<span class="hljs-subst">${targetName}</span>@getRemoteHspInfo`</span>,</li><li>                            <span class="hljs-comment">// 任务执行逻辑主体函数</span></li><li>                            <span class="hljs-title function_">run</span>(<span class="hljs-params"></span>) {</li><li>                                <span class="hljs-comment">// 获取未签名的远程hsp相关信息</span></li><li>                                <span class="hljs-keyword">const</span> remoteHspInfo = hapNodeContext.<span class="hljs-title function_">getOhpmRemoteHspDependencyInfo</span>();</li><li>                                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(remoteHspInfo);</li><li>                                <span class="hljs-comment">// 获取已签名的远程hsp相关信息</span></li><li>                                <span class="hljs-keyword">const</span> signedRemoteHspInfo = hapNodeContext.<span class="hljs-title function_">getOhpmRemoteHspDependencyInfo</span>(<span class="hljs-literal">true</span>);</li><li>                                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(signedRemoteHspInfo);</li><li>                            },</li><li>                            <span class="hljs-comment">// 配置前置任务依赖</span></li><li>                            <span class="hljs-attr">dependencies</span>: [<span class="hljs-string">`<span class="hljs-subst">${targetName}</span>@PackageHap`</span>],</li><li>                            <span class="hljs-comment">// 配置任务的后置任务依赖</span></li><li>                            <span class="hljs-attr">postDependencies</span>: [<span class="hljs-string">'assembleHap'</span>]</li><li>                        });</li><li>                    });</li><li>                });</li><li>            });</li><li>        }</li><li>    };</li><li>}</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>    <span class="hljs-attr">system</span>: appTasks,  <span class="hljs-comment">/* Built-in plugin of Hvigor. It cannot be modified. */</span></li><li>    <span class="hljs-attr">plugins</span>:[<span class="hljs-title function_">customPlugin</span>()]         <span class="hljs-comment">/* Custom plugin to extend the functionality of Hvigor. */</span></li><li>}</li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002478334508__p181881855506"></p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 92px;"><h3 id="section16952133611395">getDependenciesOpt<i class="anchor-icon anchor-icon-link" anchorid="section16952133611395" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p109526365393">与OhosAppContext中的<a href="/consumer/cn/doc/harmonyos-guides/ide-build-expanding-context#section1085223315215">getDependenciesOpt</a>方法一致，请参考上文中getDependenciesOpt接口描述。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 92px;"><h3 id="section354432017237">setDependenciesOpt<i class="anchor-icon anchor-icon-link" anchorid="section354432017237" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p1544920192318">与OhosAppContext中的<a href="/consumer/cn/doc/harmonyos-guides/ide-build-expanding-context#section18789410129">setDependenciesOpt</a>方法一致，请参考上文中getDependenciesOpt接口描述。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 92px;"><h3 id="section1672391732314">getDevDependenciesOpt<i class="anchor-icon anchor-icon-link" anchorid="section1672391732314" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p18723101782311">与OhosAppContext中的<a href="/consumer/cn/doc/harmonyos-guides/ide-build-expanding-context#section192992531393">getDevDependenciesOpt</a>方法一致，请参考上文中getDependenciesOpt接口描述。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 92px;"><h3 id="section13434142117231">setDevDependenciesOpt<i class="anchor-icon anchor-icon-link" anchorid="section13434142117231" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p15434122182315">与OhosAppContext中的<a href="/consumer/cn/doc/harmonyos-guides/ide-build-expanding-context#section8534132541914">setDevDependenciesOpt</a>方法一致，请参考上文中getDependenciesOpt接口描述。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 92px;"><h3 id="section1345241902314">getDynamicDependenciesOpt<i class="anchor-icon anchor-icon-link" anchorid="section1345241902314" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p12452619162312">与OhosAppContext中的<a href="/consumer/cn/doc/harmonyos-guides/ide-build-expanding-context#section3891011201117">getDynamicDependenciesOpt</a>方法一致，请参考上文中getDependenciesOpt接口描述。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 92px;"><h3 id="section171911122162314">setDynamicDependenciesOpt<i class="anchor-icon anchor-icon-link" anchorid="section171911122162314" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334508__p51911822112319">与OhosAppContext中的<a href="/consumer/cn/doc/harmonyos-guides/ide-build-expanding-context#section2756613192210">setDynamicDependenciesOpt</a>方法一致，请参考上文中getDependenciesOpt接口描述。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 116px;"><h2 id="section1184719101477">OhosHspContext<i class="anchor-icon anchor-icon-link" anchorid="section1184719101477" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334508__p18737165162516">Hsp模块上下文接口信息与OhosHapContext一致，请参考上文中OhosHapContext接口描述。</p> </div> <div class="tiledSection" style="contain-intrinsic-size: auto 116px;"><h2 id="section11570115465510">OhosHarContext<i class="anchor-icon anchor-icon-link" anchorid="section11570115465510" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334508__p172955482515">Har模块上下文接口信息与OhosHapContext一致，请参考上文中OhosHapContext接口描述。</p> </div> </div> <div></div></div>