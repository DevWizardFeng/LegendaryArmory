<h1 _ngcontent-uyg-c119="" class="doc-title ng-star-inserted" title="摄像头被遮挡一段时间后再放开，输出的位姿有跳变"> 摄像头被遮挡一段时间后再放开，输出的位姿有跳变 </h1>

<div _ngcontent-uyg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section1334813319581">现象描述<i class="anchor-icon anchor-icon-link" anchorid="section1334813319581" tips="复制节点链接"></i></h2>          <p>使用运动跟踪能力时，摄像头被遮挡一段时间后再放开遮挡，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-capi-arengine#ga1ee66c006ffe8255cc04f2a24c277709" target="_blank">HMS_AREngine_ARPose_GetPoseRaw</a>函数获取的平移分量或旋转分量存在较大跳变。</p>    </div>    <div class="tiledSection">     <h2 id="section620031714518">可能原因<i class="anchor-icon anchor-icon-link" anchorid="section620031714518" tips="复制节点链接"></i></h2>          <p>AR Engine通过摄像头采集数据感知当前设备在现实世界中的位姿，摄像头被遮挡后，AR Engine无法准确感知设备在现实世界的位姿变化，放开遮挡后，如果继续调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-capi-arengine#ga1d1cacf372a8011a439f0e4e76994259" target="_blank">HMS_AREngine_ARSession_Update</a>，AR Engine会尝试基于遮挡前识别到的数据进行恢复，如果当前摄像头采集数据和遮挡前类似，就可能会导致错误匹配到旧的结果，从而产生数据跳变。</p>    </div>    <div class="tiledSection">     <h2 id="section0373152623612">处理步骤<i class="anchor-icon anchor-icon-link" anchorid="section0373152623612" tips="复制节点链接"></i></h2>          <p>如果开发者通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-capi-arengine#ga2dc931eee56ae5ea899f8acc08eb3f36" target="_blank">HMS_AREngine_ARCamera_GetTrackingState</a>函数获取的状态为ARENGINE_TRACKING_STATE_PAUSED，可以通过函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-capi-arengine#gab5411813f2e4ac6de4ebbccfc1bbbd35" target="_blank">HMS_AREngine_ARCamera_GetTrackingStateReason</a>进一步获取暂停原因，如暂停原因是ARENGINE_TRACKING_STATE_REASON_INSUFFICIENT_FEATURES或ARENGINE_TRACKING_STATE_REASON_EXCESSIVE_MOTION，建议在您的应用中提示用户，并在恢复后（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-capi-arengine#ga2dc931eee56ae5ea899f8acc08eb3f36" target="_blank">HMS_AREngine_ARCamera_GetTrackingState</a>获取的状态为：ARENGINE_TRACKING_STATE_TRACKING时）重新做session初始化，见：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arengine-c-arsession#section416624191615">创建AR会话</a>。</p>    </div>   </div>   <div></div></div>