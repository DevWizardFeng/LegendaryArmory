<h1 _ngcontent-rbu-c119="" class="doc-title ng-star-inserted" title="撤回通知消息"> 撤回通知消息 </h1>

<div _ngcontent-rbu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>当推送的通知消息内容有误或者存在违规情况时，可能会引起用户投诉或监管部门处罚等不良后果。Push Kit为您提供消息撤回功能，降低此类推送可能造成的影响。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>消息撤回仅支持使用token和notifyId撤回。</li>       <li>若要使用消息撤回功能，请确保您在推送消息时设置了notifyId字段。</li>       <li>消息撤回仅支持以下类型：还未下发到端侧的消息，已在终端展示但用户还未点击的消息。</li>       <li>消息撤回不会影响应用的通知角标。</li>      </ul>     </div></div></div>    <div class="tiledSection">     <h2 id="section842412232016">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="section842412232016" tips="复制节点链接"></i></h2>          <p>撤回通知消息能力支持Phone、Tablet、PC/2in1设备。并且从5.1.0(18)版本开始新增支持Wearable设备；从5.1.1(19)版本开始，新增支持TV设备。</p>    </div>    <div class="tiledSection">     <h2 id="section1310252910014">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section1310252910014" tips="复制节点链接"></i></h2>          <ol>      <li><span>参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-send-alert#section17790171616598">开发步骤</a>章节进行消息推送，确保应用可正常收到通知消息。</span></li>      <li><span>应用服务端调用REST API撤回通知消息，消息详情可参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-msg-revoke" target="_blank">消息撤回</a>，请求示例如下：</span>       <p></p>       <div _ngcontent-rbu-c106="" class="highlight-div"><div _ngcontent-rbu-c106="" class="highlight-div-header"><div _ngcontent-rbu-c106="" class="highlight-div-header-left"><div _ngcontent-rbu-c106="" class="handle-button expand-button"><div _ngcontent-rbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rbu-c106="" class="highlight-div-header-right"><div _ngcontent-rbu-c106="" class="handle-button ai-button"></div><div _ngcontent-rbu-c106="" class="handle-button line-button"><div _ngcontent-rbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rbu-c106="" class="handle-button theme-button"><div _ngcontent-rbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rbu-c106="" class="handle-button copy-button"><div _ngcontent-rbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rbu-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Request URL </span></li><li>POST <span class="hljs-string">"https://push-api.cloud.huawei.com/v1/</span><strong><span class="hljs-string">[clientId]</span></strong><span class="hljs-string">/messages:revoke"</span></li><li> </li><li><span class="hljs-comment">// Request Header </span></li><li>Content-Type<span class="hljs-punctuation">:</span>application/json</li><li>Authorization<span class="hljs-punctuation">:</span>Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****<span class="hljs-number">4</span>Gp---****</li><li><strong>push-type<span class="hljs-punctuation">:</span> <span class="hljs-number">0</span></strong> </li><li> </li><li><span class="hljs-comment">// Request Body </span></li><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"notifyId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1234567</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"token"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>    <span class="hljs-string">"pushToken1"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-string">"pushToken2"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-string">"pushToken3"</span></li><li>  <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>       <ul>        <li>[clientId]：请替换为您应用的Client ID，可参见<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-view-app-info-0000002282674569" target="_blank">指导</a>获取。</li>        <li>Authorization：JWT格式字符串，可参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-msg-revoke#section7551144075816" target="_blank">Authorization</a>获取。</li>        <li>push-type：0表示通知消息场景。</li>        <li>notifyId：消息ID，消息的唯一标识，详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-msg-revoke#section166472121113" target="_blank">notifyId</a>。</li>        <li>token：Push Token，可参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-get-token">获取Push Token</a>获取。</li>       </ul>       <p></p></li>     </ol>    </div>   </div>   <div></div></div>