<h1 _ngcontent-son-c119="" class="doc-title ng-star-inserted" title="支持适老化"> 支持适老化 </h1>

<div _ngcontent-son-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>系统字体被放大后，应用应确保整体布局不出现错乱，组件不出现重叠。可以根据业务需要限制跟随的字体最大档位、改变布局来更好的适配更大字体等。本文旨在指导应用如何跟随系统字体大小和跟随到的最大倍数。</p>    <div class="tiledSection">     <h2 id="应用适配规则">应用适配规则<i class="anchor-icon anchor-icon-link" anchorid="应用适配规则" tips="复制节点链接"></i></h2>          <ul>      <li>       <p>在系统使用1.75倍及以上的大字体时，页面布局不得错乱，组件不得叠加，文字不得截断。</p></li>      <li>       <p>图标及图片不会随着字体的变大而变化。</p></li>      <li>       <p>页面中不重要的内容字体，可采用不跟随系统字体变化或限制字体最大尺寸的方法进行布局。</p></li>      <li>       <p>若应用跟随系统字体增大后导致页面内容位置挤压或截断等问题，可采取将X轴扩展至Y轴的措施，例如将左右布局调整为上下布局。</p></li>      <li>       <p><a href="/consumer/cn/doc/harmonyos-guides/arkui-support-for-aging-adaptation#适配适老化的系统组件及触发方式">系统组件</a>已针对适老化大字体进行了单独适配，尽可能在开发过程中使用系统组件。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="应用适配适老化大字体">应用适配适老化大字体<i class="anchor-icon anchor-icon-link" anchorid="应用适配适老化大字体" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>开启路径</p>       <p>在“设置-辅助功能-关怀模式-放大显示”中开启。</p>       <p>各档位对应参数：</p>       <div class="tablenoborder">        <div class="tbBox"><table class="layoutFixed idpTab">         <thead>          <tr>           <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.4.1.1" valign="top" width="33.33333333333333%">档位</th>           <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.4.1.2" valign="top" width="33.33333333333333%">字体大小</th>           <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.4.1.3" valign="top" width="33.33333333333333%">字体粗细</th>          </tr>         </thead>                   <tbody><tr>           <td class="cellrowborder" valign="top" width="33.33333333333333%">标准</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">1倍</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">1倍</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="33.33333333333333%">大1档</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">1.15倍</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">1倍</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="33.33333333333333%">大2档</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">1.3倍</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">1.1倍</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="33.33333333333333%">大3档</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">1.45倍</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">1.1倍</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="33.33333333333333%">大4档</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">1.75倍</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">1.25倍</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="33.33333333333333%">大5档</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">2.0倍</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">1.25倍</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="33.33333333333333%">大6档</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">3.2倍</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">1.25倍</td>          </tr>                 </tbody></table></div>       </div></li>      <li>       <p>适配方法</p>       <p>当前默认应用不跟随系统字体的变化。如需跟随系统字体变化，并设置最大跟随变化的倍数，请按以下步骤操作：</p>       <ul>        <li>         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-configuration-file" target="_blank">app.json5配置文件</a>适配。</p>         <p>通过配置"configuration": "$profile:configuration"，指向base/profile/configuration.json文件；</p>         <div _ngcontent-son-c106="" class="highlight-div"><div _ngcontent-son-c106="" class="highlight-div-header"><div _ngcontent-son-c106="" class="highlight-div-header-left"><div _ngcontent-son-c106="" class="handle-button expand-button"><div _ngcontent-son-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-son-c106="" class="highlight-div-header-right"><div _ngcontent-son-c106="" class="handle-button ai-button"></div><div _ngcontent-son-c106="" class="handle-button line-button"><div _ngcontent-son-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-son-c106="" class="handle-button theme-button"><div _ngcontent-son-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-son-c106="" class="handle-button copy-button"><div _ngcontent-son-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-son-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"app"</span>: {</li><li>    <span class="hljs-string">"bundleName"</span>: <span class="hljs-string">"com.example.myapplication"</span>,</li><li>    <span class="hljs-string">"vendor"</span>: <span class="hljs-string">"example"</span>,</li><li>    <span class="hljs-string">"versionCode"</span>: <span class="hljs-number">1000000</span>,</li><li>    <span class="hljs-string">"versionName"</span>: <span class="hljs-string">"1.0.0"</span>,</li><li>    <span class="hljs-string">"icon"</span>: <span class="hljs-string">"$media:app_icon"</span>,</li><li>    <span class="hljs-string">"label"</span>: <span class="hljs-string">"$string:app_name"</span>,</li><li>    <span class="hljs-string">"configuration"</span>: <span class="hljs-string">"$profile:configuration"</span></li><li>  }</li><li>}</li></ol></pre></div></div></li>        <li>         <p>在base文件目录下新增profile文件夹，并在此目录下新增 configuration.json 文件。</p>         <p>配置"fontSizeScale": "followSystem"表示该应用的字体大小将根据系统设置进行缩放，"fontSizeMaxScale": "1.3"表示应用字体大小随系统变化的最大缩放比例为1.3倍。</p>         <div _ngcontent-son-c106="" class="highlight-div"><div _ngcontent-son-c106="" class="highlight-div-header"><div _ngcontent-son-c106="" class="highlight-div-header-left"><div _ngcontent-son-c106="" class="handle-button expand-button"><div _ngcontent-son-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-son-c106="" class="highlight-div-header-right"><div _ngcontent-son-c106="" class="handle-button ai-button"></div><div _ngcontent-son-c106="" class="handle-button line-button"><div _ngcontent-son-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-son-c106="" class="handle-button theme-button"><div _ngcontent-son-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-son-c106="" class="handle-button copy-button"><div _ngcontent-son-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-son-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"configuration"</span>: {</li><li>    <span class="hljs-string">"fontSizeScale"</span>: <span class="hljs-string">"followSystem"</span>,</li><li>    <span class="hljs-string">"fontSizeMaxScale"</span>: <span class="hljs-string">"1.3"</span></li><li>  }</li><li>}</li></ol></pre></div></div></li>        <li>         <p>若应用需适应系统字体大小的变化，最大应调整至1.75倍，但部分组件可调整至2倍。</p>         <p>首先需要按照上述步骤配置"fontSizeMaxScale"为1.75。</p>         <div _ngcontent-son-c106="" class="highlight-div"><div _ngcontent-son-c106="" class="highlight-div-header"><div _ngcontent-son-c106="" class="highlight-div-header-left"><div _ngcontent-son-c106="" class="handle-button expand-button"><div _ngcontent-son-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-son-c106="" class="highlight-div-header-right"><div _ngcontent-son-c106="" class="handle-button ai-button"></div><div _ngcontent-son-c106="" class="handle-button line-button"><div _ngcontent-son-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-son-c106="" class="handle-button theme-button"><div _ngcontent-son-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-son-c106="" class="handle-button copy-button"><div _ngcontent-son-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-son-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"configuration"</span>: {</li><li>    <span class="hljs-string">"fontSizeScale"</span>: <span class="hljs-string">"followSystem"</span>,</li><li>    <span class="hljs-string">"fontSizeMaxScale"</span>: <span class="hljs-string">"1.75"</span></li><li>  }</li><li>}</li></ol></pre></div></div>         <p>然后，为Text添加maxFontScale属性，传递参数为2，表示该Text组件跟随系统字体大小变化的最大倍数为2倍。</p>         <div _ngcontent-son-c106="" class="highlight-div"><div _ngcontent-son-c106="" class="highlight-div-header"><div _ngcontent-son-c106="" class="highlight-div-header-left"><div _ngcontent-son-c106="" class="handle-button expand-button"><div _ngcontent-son-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-son-c106="" class="highlight-div-header-right"><div _ngcontent-son-c106="" class="handle-button ai-button"></div><div _ngcontent-son-c106="" class="handle-button line-button"><div _ngcontent-son-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-son-c106="" class="handle-button theme-button"><div _ngcontent-son-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-son-c106="" class="handle-button copy-button"><div _ngcontent-son-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-son-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>Text(<span class="hljs-string">'hello world!'</span>)</li><li>  .fontSize(<span class="hljs-variable">$r</span>(<span class="hljs-string">'sys.float.Body_M'</span>))</li><li>  .maxFontScale(2)</li><li>  .fontColor(<span class="hljs-variable">$r</span>(<span class="hljs-string">'sys.color.font_secondary'</span>))</li></ol></pre></div></div>         <p>当Text组件配置了maxFontScale属性时，将采用组件设置的最大放大倍数，而非系统默认的最大放大倍数。</p></li>        <li>         <p>若应用不需要跟随系统字体大小变化，无需配置。</p></li>       </ul></li>      <li>       <p>获取字体大小和粗细。</p>       <ul>        <li>         <p>生命周期回调方法<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-environmentcallback#onconfigurationupdated" target="_blank">onConfigurationUpdated</a>的config参数可接收字体大小（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-configuration#configuration" target="_blank">fontSizeScale</a>）与字体粗细（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-configuration#configuration" target="_blank">fontWeightScale</a>）。</p>         <p>注册系统环境变化的监听后，在系统环境变化时可触发回调。</p></li>        <li>应用冷启动查询系统字体大小档位。         <div _ngcontent-son-c106="" class="highlight-div"><div _ngcontent-son-c106="" class="highlight-div-header"><div _ngcontent-son-c106="" class="highlight-div-header-left"><div _ngcontent-son-c106="" class="handle-button expand-button"><div _ngcontent-son-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-son-c106="" class="highlight-div-header-right"><div _ngcontent-son-c106="" class="handle-button ai-button"></div><div _ngcontent-son-c106="" class="handle-button line-button"><div _ngcontent-son-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-son-c106="" class="handle-button theme-button"><div _ngcontent-son-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-son-c106="" class="handle-button copy-button"><div _ngcontent-son-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-son-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">fontSizeScale</span>: <span class="hljs-built_in">number</span> = context.<span class="hljs-property">config</span>?.<span class="hljs-property">fontSizeScale</span> ?? <span class="hljs-number">1</span>;</li></ol></pre></div></div></li>       </ul></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="适配适老化的系统组件及触发方式">适配适老化的系统组件及触发方式<i class="anchor-icon anchor-icon-link" anchorid="适配适老化的系统组件及触发方式" tips="复制节点链接"></i></h2>          <p>适老化提供了一种通过鼠标或手指长按的方法来放大所选区域或组件，即如果系统字体大小大于1倍，当用户使用鼠标或手指长按装配了适老化方法的组件，需要从所选区域的组件中提取数据，并放入另一个弹窗组件中展示。该方法的目的在于使组件和组件内部数据（子组件）放大，同时将整体组件在屏幕中央显示，让用户能够更好的观察该组件。</p>     <ul>      <li>       <p>适老化规则</p>       <p>由于在系统字体大于1倍时，组件并没有默认放大，需要通过配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-configuration-file#configuration标签" target="_blank">configuration标签</a>，实现组件放大的适老化功能。</p></li>      <li>       <p>如何开启适老化</p>       <p>进入手机设置，点击辅助功能，开启关怀模式。</p></li>      <li>       <p>适老化操作</p>       <p>在已经支持适老化能力的组件上长按组件，能够触发弹窗，当用户释放时，适老化操作结束。当设置系统字体大于1倍时，组件自动放大，当系统字体恢复至1倍时组件恢复正常状态。</p></li>      <li>       <p>适老化对象</p>       <p>触发适老化操作并提供数据的组件。</p></li>      <li>       <p>适老化弹窗目标</p>       <p>可接收并处理适老化数据的组件。</p></li>      <li>       <p>弹窗限制</p>       <p>当用户将系统字体设置为2倍以上时，弹窗内容包括icon和文字的放大倍数固定为2倍。</p></li>      <li>       <p>联合其他能力</p>       <p>适老化能力可以适配其他能力（如：滑动拖拽）。底部页签（tabBar）组件在触发适老化时，如果用户滑动手指或鼠标可以触发底部页签其他子组件的适老化功能。</p></li>     </ul>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.4.1.3.1.1" valign="top" width="50%">触发方式</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.4.1.3.1.2" valign="top" width="50%">组件名称</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">长按系统组件触发</td>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-sidebarcontainer" target="_blank">SideBarContainer</a>， <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabcontent#tabbar9" target="_blank">底部页签（tabBar）</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation" target="_blank">Navigation</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation#navdestination10" target="_blank">NavDestination</a>， <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs" target="_blank">Tabs</a></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">设置系统字体默认放大</td>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-methods-calendarpicker-dialog" target="_blank">PickerDialog</a>， <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-button" target="_blank">Button</a>， <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-menu" target="_blank">Menu</a>， <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-stepper" target="_blank">Stepper</a>， <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-sheet-transition#bindsheet" target="_blank">BindSheet</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textinput" target="_blank">TextInput</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textarea" target="_blank">TextArea</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-search" target="_blank">Search</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-selectionmenu" target="_blank">SelectionMenu</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-chip" target="_blank">Chip</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-dialog" target="_blank">Dialog</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-slider" target="_blank">Slider</a>， <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-progress" target="_blank">Progress</a>， <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-badge" target="_blank">Badge</a></td>        </tr>             </tbody></table></div>     </div>     <p>SideBarContainer组件通过长按控制按钮触发适老化弹窗。在系统字体为1倍的情况下，长按控制按钮不能弹窗。在系统字体大于1倍的情况下，长按控制按钮可以弹窗。</p>     <div _ngcontent-son-c106="" class="highlight-div"><div _ngcontent-son-c106="" class="highlight-div-header"><div _ngcontent-son-c106="" class="highlight-div-header-left"><div _ngcontent-son-c106="" class="handle-button expand-button"><div _ngcontent-son-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-son-c106="" class="highlight-div-header-right"><div _ngcontent-son-c106="" class="handle-button ai-button"></div><div _ngcontent-son-c106="" class="handle-button line-button"><div _ngcontent-son-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-son-c106="" class="handle-button theme-button"><div _ngcontent-son-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-son-c106="" class="handle-button copy-button"><div _ngcontent-son-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-son-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">SideBarContainerExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">currentFontSizeScale</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span></li><li>  <span class="hljs-attr">normalIcon</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">"app.media.icon"</span>)</li><li>  <span class="hljs-attr">selectedIcon</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">"app.media.icon"</span>)</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">arr</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">current</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Index01'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">SideBarContainer</span>(<span class="hljs-title class_">SideBarContainerType</span>.<span class="hljs-property">Embed</span>) {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>            <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> === item ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedIcon</span> : <span class="hljs-variable language_">this</span>.<span class="hljs-property">normalIcon</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">64</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">64</span>)</li><li>            <span class="hljs-title class_">Text</span>(<span class="hljs-string">"0"</span> + item)</li><li>              .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">25</span>)</li><li>              .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> === item ? <span class="hljs-string">'#0A59F7'</span> : <span class="hljs-string">'#999'</span>)</li><li>              .<span class="hljs-title function_">fontFamily</span>(<span class="hljs-string">'source-sans-pro,cursive,sans-serif'</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> = item;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">"Index0"</span> + item;</li><li>          })</li><li>        }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceEvenly</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'sys.color.mask_fifth'</span>))</li><li>    }</li><li>    .<span class="hljs-title function_">controlButton</span>({</li><li>      <span class="hljs-attr">icons</span>: {</li><li>        <span class="hljs-attr">hidden</span>: $r(<span class="hljs-string">'sys.media.ohos_ic_public_drawer_open_filled'</span>),</li><li>        <span class="hljs-attr">shown</span>: $r(<span class="hljs-string">'sys.media.ohos_ic_public_drawer_close'</span>)</li><li>      }</li><li>    })</li><li>    .<span class="hljs-title function_">sideBarWidth</span>(<span class="hljs-number">150</span>)</li><li>    .<span class="hljs-title function_">minSideBarWidth</span>(<span class="hljs-number">50</span>)</li><li>    .<span class="hljs-title function_">maxSideBarWidth</span>(<span class="hljs-number">300</span>)</li><li>    .<span class="hljs-title function_">minContentWidth</span>(<span class="hljs-number">0</span>)</li><li>    .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'status:'</span> + value)</li><li>    })</li><li>    .<span class="hljs-title function_">divider</span>({ <span class="hljs-attr">strokeWidth</span>: <span class="hljs-string">'1vp'</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>, <span class="hljs-attr">startMargin</span>: <span class="hljs-string">'4vp'</span>, <span class="hljs-attr">endMargin</span>: <span class="hljs-string">'4vp'</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>切换系统字体前后长按已经支持适老化能力的组件，有如下效果：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.3.1.1" valign="top" width="50%">系统字体为一倍（适老化能力开启前）</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.3.1.2" valign="top" width="50%">系统字体为1.75倍（适老化能力开启后）</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="424" originwidth="328" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114815.64768882298871921723097514241355:50001231000000:2800:4B8AA44946312C70172B0FF797803E3514E29175106AB65D80DE511F615CA9C7.png" width="328" height="424"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="419" originwidth="333" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114816.12623841120996618578412279349280:50001231000000:2800:94C85C8ACA7C49F7E6AC84487D90E2DB68BC64700680162CF5E7218C20487CDC.png" width="333" height="419"></span></td>        </tr>             </tbody></table></div>     </div>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-methods-textpicker-dialog" target="_blank">TextPickerDialog</a>组件通过设置系统字体大小触发适老化弹窗。在系统字体为1倍的情况下，适老化不触发；在系统字体大于1倍的情况下，适老化触发。</p>     <div _ngcontent-son-c106="" class="highlight-div"><div _ngcontent-son-c106="" class="highlight-div-header"><div _ngcontent-son-c106="" class="highlight-div-header-left"><div _ngcontent-son-c106="" class="handle-button expand-button"><div _ngcontent-son-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-son-c106="" class="highlight-div-header-right"><div _ngcontent-son-c106="" class="handle-button ai-button"></div><div _ngcontent-son-c106="" class="handle-button line-button"><div _ngcontent-son-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-son-c106="" class="handle-button theme-button"><div _ngcontent-son-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-son-c106="" class="handle-button copy-button"><div _ngcontent-son-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-son-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">TextPickerExample</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">select</span>: <span class="hljs-built_in">number</span> | <span class="hljs-built_in">number</span>[] = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">cascade</span>: <span class="hljs-title class_">TextCascadePickerRangeContent</span>[] = [</li><li>    {</li><li>      <span class="hljs-attr">text</span>: <span class="hljs-string">'辽宁省'</span>,</li><li>      <span class="hljs-attr">children</span>: [{ <span class="hljs-attr">text</span>: <span class="hljs-string">'沈阳市'</span>, <span class="hljs-attr">children</span>: [{ <span class="hljs-attr">text</span>: <span class="hljs-string">'沈河区'</span> }, { <span class="hljs-attr">text</span>: <span class="hljs-string">'和平区'</span> }, { <span class="hljs-attr">text</span>: <span class="hljs-string">'浑南区'</span> }] },</li><li>        { <span class="hljs-attr">text</span>: <span class="hljs-string">'大连市'</span>, <span class="hljs-attr">children</span>: [{ <span class="hljs-attr">text</span>: <span class="hljs-string">'中山区'</span> }, { <span class="hljs-attr">text</span>: <span class="hljs-string">'金州区'</span> }, { <span class="hljs-attr">text</span>: <span class="hljs-string">'长海县'</span> }] }]</li><li>    },</li><li>    {</li><li>      <span class="hljs-attr">text</span>: <span class="hljs-string">'吉林省'</span>,</li><li>      <span class="hljs-attr">children</span>: [{ <span class="hljs-attr">text</span>: <span class="hljs-string">'长春市'</span>, <span class="hljs-attr">children</span>: [{ <span class="hljs-attr">text</span>: <span class="hljs-string">'南关区'</span> }, { <span class="hljs-attr">text</span>: <span class="hljs-string">'宽城区'</span> }, { <span class="hljs-attr">text</span>: <span class="hljs-string">'朝阳区'</span> }] },</li><li>        { <span class="hljs-attr">text</span>: <span class="hljs-string">'四平市'</span>, <span class="hljs-attr">children</span>: [{ <span class="hljs-attr">text</span>: <span class="hljs-string">'铁西区'</span> }, { <span class="hljs-attr">text</span>: <span class="hljs-string">'铁东区'</span> }, { <span class="hljs-attr">text</span>: <span class="hljs-string">'梨树县'</span> }] }]</li><li>    },</li><li>    {</li><li>      <span class="hljs-attr">text</span>: <span class="hljs-string">'黑龙江省'</span>,</li><li>      <span class="hljs-attr">children</span>: [{ <span class="hljs-attr">text</span>: <span class="hljs-string">'哈尔滨市'</span>, <span class="hljs-attr">children</span>: [{ <span class="hljs-attr">text</span>: <span class="hljs-string">'道里区'</span> }, { <span class="hljs-attr">text</span>: <span class="hljs-string">'道外区'</span> }, { <span class="hljs-attr">text</span>: <span class="hljs-string">'南岗区'</span> }] },</li><li>        { <span class="hljs-attr">text</span>: <span class="hljs-string">'牡丹江市'</span>, <span class="hljs-attr">children</span>: [{ <span class="hljs-attr">text</span>: <span class="hljs-string">'东安区'</span> }, { <span class="hljs-attr">text</span>: <span class="hljs-string">'西安区'</span> }, { <span class="hljs-attr">text</span>: <span class="hljs-string">'爱民区'</span> }] }]</li><li>    }</li><li>  ]</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">v</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">showTriggered</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">triggered</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">maxLines</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">3</span>;</li><li>
</li><li>  <span class="hljs-title function_">linesNum</span>(<span class="hljs-attr">max</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">items</span>: <span class="hljs-built_in">string</span>[] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">triggered</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">''</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item != <span class="hljs-string">''</span>);</li><li>    <span class="hljs-keyword">if</span> (items.<span class="hljs-property">length</span> &gt; max) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">showTriggered</span> = items.<span class="hljs-title function_">slice</span>(-<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxLines</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">showTriggered</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">triggered</span>;</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"TextPickerDialog.show:"</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">v</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-title class_">TextPickerDialog</span>.<span class="hljs-title function_">show</span>({</li><li>            <span class="hljs-attr">range</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">cascade</span>,</li><li>            <span class="hljs-attr">selected</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">select</span>,</li><li>            <span class="hljs-attr">onAccept</span>: <span class="hljs-function">(<span class="hljs-params">value: TextPickerResult</span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">select</span> = value.<span class="hljs-property">index</span></li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">select</span> + <span class="hljs-string">''</span>)</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">v</span> = value.<span class="hljs-property">value</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span></li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"TextPickerDialog:onAccept()"</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value))</li><li>              <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">triggered</span> != <span class="hljs-string">''</span>) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">triggered</span> += <span class="hljs-string">`onAccept(<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(value)}</span>)`</span>;</li><li>              } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">triggered</span> = <span class="hljs-string">`onAccept(<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(value)}</span>)`</span>;</li><li>              }</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">linesNum</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxLines</span>);</li><li>            },</li><li>            <span class="hljs-attr">onCancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"TextPickerDialog:onCancel()"</span>)</li><li>              <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">triggered</span> != <span class="hljs-string">''</span>) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">triggered</span> += <span class="hljs-string">`onCancel()`</span>;</li><li>              } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">triggered</span> = <span class="hljs-string">`onCancel()`</span>;</li><li>              }</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">linesNum</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxLines</span>);</li><li>            },</li><li>            <span class="hljs-attr">onChange</span>: <span class="hljs-function">(<span class="hljs-params">value: TextPickerResult</span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"TextPickerDialog:onChange()"</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value))</li><li>              <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">triggered</span> != <span class="hljs-string">''</span>) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">triggered</span> += <span class="hljs-string">`onChange(<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(value)}</span>)`</span>;</li><li>              } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">triggered</span> = <span class="hljs-string">`onChange(<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(value)}</span>)`</span>;</li><li>              }</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">linesNum</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxLines</span>);</li><li>            },</li><li>          })</li><li>        })</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">60</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.1" valign="top" width="50%">系统字体为一倍（适老化能力开启前）</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.2" valign="top" width="50%">系统字体为1.75倍（适老化能力开启后）</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="309" originwidth="251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114816.43345615462444758294523595453897:50001231000000:2800:A2EB2704CD73281F09938C4378B687C10CFF3BA4789160EF1C698DFFE9F70F43.png" class="notEnlarge" width="251" height="309"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="297" originwidth="238" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114816.07500320572502964900414407230247:50001231000000:2800:4356FC763297147ED43D638DADE3D0B4DBA18DA3CFCF17005A39A5217640AC75.png" class="notEnlarge" width="238" height="297"></span></td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>