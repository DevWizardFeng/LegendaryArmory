<h1 _ngcontent-vhm-c119="" class="doc-title ng-star-inserted" title="支持鼠标输入事件"> 支持鼠标输入事件 </h1>

<div _ngcontent-vhm-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p><span><img originheight="246" originwidth="376" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114913.21578429199381262350383719331031:50001231000000:2800:3D1465689FA31E118805329258DDFAC72E1F40C56CEF10A39619A437E526E474.png" width="376" height="246"></span></p>    <p>鼠标设备是2in1类型设备必不可少的输入设备，其特点是可以通过按键达成点击或滑动操作，也可以通过滚轮触发滑动，另外还有一些按键，这些分别通过MouseEvent及AxisEvent上报给应用。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>所有单指可响应的触摸事件/手势事件，均可通过鼠标左键来操作和响应。</p>      <ul>       <li>例如当我们需要开发单击Button跳转页面的功能、且需要支持手指点击和鼠标左键点击，那么只绑定一个点击事件（onClick）就可以实现该效果；</li>       <li>若需要针对手指和鼠标左键的点击实现不一样的效果，可以在onClick回调中，使用回调参数中的source字段判断当前触发事件的来源是手指还是鼠标。</li>      </ul>     </div></div></div>    <div class="tiledSection">     <h2 id="处理鼠标移动">处理鼠标移动<i class="anchor-icon anchor-icon-link" anchorid="处理鼠标移动" tips="复制节点链接"></i></h2>          <p>鼠标事件通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-mouse-key#onmouse" target="_blank">onMouse</a>接口注册一个回调来接收，当鼠标事件发生时，会按照鼠标光标所在位置下的组件进行派发，派发过程同样遵循事件冒泡机制。</p>    </div>    <div class="tiledSection">     <h3 id="onmouse" class="firsth2">onMouse<i class="anchor-icon anchor-icon-link" anchorid="onmouse" tips="复制节点链接"></i></h3>          <div _ngcontent-vhm-c106="" class="highlight-div"><div _ngcontent-vhm-c106="" class="highlight-div-header"><div _ngcontent-vhm-c106="" class="highlight-div-header-left"><div _ngcontent-vhm-c106="" class="handle-button expand-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vhm-c106="" class="highlight-div-header-right"><div _ngcontent-vhm-c106="" class="handle-button ai-button"></div><div _ngcontent-vhm-c106="" class="handle-button line-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vhm-c106="" class="handle-button theme-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vhm-c106="" class="handle-button copy-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vhm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">onMouse</span>(<span class="hljs-attr">event</span>: <span class="hljs-function">(<span class="hljs-params">event?: MouseEvent</span>) =&gt;</span> <span class="hljs-built_in">void</span>)</li></ol></pre></div></div>     <p>鼠标事件回调。每当鼠标指针在绑定该API的组件内产生行为（MouseAction）时，触发事件回调，参数为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-mouse-key#mouseevent对象说明" target="_blank">MouseEvent</a>对象，表示触发此次的鼠标事件。该事件支持自定义冒泡设置，默认父子冒泡。常用于开发者自定义的鼠标行为逻辑处理。</p>     <p>开发者可以通过回调中的MouseEvent对象获取触发事件的坐标（displayX/displayY/windowX/windowY/x/y）、按键（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#mousebutton8" target="_blank">MouseButton</a>）、行为（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#mouseaction8" target="_blank">MouseAction</a>）、时间戳（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-customize-judge#baseevent8" target="_blank">timestamp</a>）、交互组件的区域（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-click#eventtarget8" target="_blank">EventTarget</a>）、事件来源（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-settings#sourcetype枚举说明8" target="_blank">SourceType</a>）等。MouseEvent的回调函数stopPropagation用于设置当前事件是否阻止冒泡。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>按键（MouseButton）的值：Left/Right/Middle/Back/Forward 均对应鼠标上的实体按键，当这些按键被按下或松开时触发这些按键的事件。None表示无按键，会出现在鼠标没有按键按下或松开的状态下，移动鼠标所触发的事件中。</p>      </div></div></div>     <div _ngcontent-vhm-c106="" class="highlight-div"><div _ngcontent-vhm-c106="" class="highlight-div-header"><div _ngcontent-vhm-c106="" class="highlight-div-header-left"><div _ngcontent-vhm-c106="" class="handle-button expand-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vhm-c106="" class="highlight-div-header-right"><div _ngcontent-vhm-c106="" class="handle-button ai-button"></div><div _ngcontent-vhm-c106="" class="handle-button line-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vhm-c106="" class="handle-button theme-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vhm-c106="" class="handle-button copy-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vhm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">MouseExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">buttonText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">columnText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'OnMouse Sample Button'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-title class_">Color</span>: <span class="hljs-title class_">Color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span>, { <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">Color</span>)</li><li>        .<span class="hljs-title function_">onMouse</span>(<span class="hljs-function">(<span class="hljs-params">event?: MouseEvent</span>) =&gt;</span> { <span class="hljs-comment">// 设置Button的onMouse回调</span></li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">buttonText</span> = <span class="hljs-string">'Button onMouse:\n'</span> + <span class="hljs-string">''</span> +</li><li>              <span class="hljs-string">'button = '</span> + event.<span class="hljs-property">button</span> + <span class="hljs-string">'\n'</span> +</li><li>              <span class="hljs-string">'action = '</span> + event.<span class="hljs-property">action</span> + <span class="hljs-string">'\n'</span> +</li><li>              <span class="hljs-string">'x,y = '</span> + <span class="hljs-string">'\n'</span> + <span class="hljs-string">'('</span> + event.<span class="hljs-property">x</span> + <span class="hljs-string">','</span> + event.<span class="hljs-property">y</span> + <span class="hljs-string">')'</span> + <span class="hljs-string">'\n'</span> +</li><li>              <span class="hljs-string">'windowXY='</span> + <span class="hljs-string">'\n'</span> + <span class="hljs-string">'('</span> + event.<span class="hljs-property">windowX</span> + <span class="hljs-string">','</span> + event.<span class="hljs-property">windowY</span> + <span class="hljs-string">')'</span>;</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Divider</span>()</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">buttonText</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>)</li><li>        <span class="hljs-title class_">Divider</span>()</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">columnText</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Start</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>    .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">2</span>)</li><li>    .<span class="hljs-title function_">borderColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>)</li><li>    .<span class="hljs-title function_">onMouse</span>(<span class="hljs-function">(<span class="hljs-params">event?: MouseEvent</span>) =&gt;</span> { <span class="hljs-comment">// Set the onMouse callback for the column.</span></li><li>      <span class="hljs-keyword">if</span> (event) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">columnText</span> = <span class="hljs-string">'Column onMouse:\n'</span> + <span class="hljs-string">''</span> +</li><li>          <span class="hljs-string">'button = '</span> + event.<span class="hljs-property">button</span> + <span class="hljs-string">'\n'</span> +</li><li>          <span class="hljs-string">'action = '</span> + event.<span class="hljs-property">action</span> + <span class="hljs-string">'\n'</span> +</li><li>          <span class="hljs-string">'x,y = '</span> + <span class="hljs-string">'\n'</span> + <span class="hljs-string">'('</span> + event.<span class="hljs-property">x</span> + <span class="hljs-string">','</span> + event.<span class="hljs-property">y</span> + <span class="hljs-string">')'</span> + <span class="hljs-string">'\n'</span> +</li><li>          <span class="hljs-string">'windowXY='</span> + <span class="hljs-string">'\n'</span> + <span class="hljs-string">'('</span> + event.<span class="hljs-property">windowX</span> + <span class="hljs-string">','</span> + event.<span class="hljs-property">windowY</span> + <span class="hljs-string">')'</span>;</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>上面的示例中给Button绑定onMouse接口。在回调中，打印出鼠标事件的button/action等回调参数值。同时，在外层的Column容器上，也做相同的设置。整个过程可以分为以下两个动作：</p>     <ol>      <li>       <p>移动鼠标：在鼠标从Button外部移入Button内部前，仅触发了Column的onMouse回调；当鼠标移入到Button内部后，由于onMouse事件默认是冒泡的，所以此时会同时响应Column的onMouse回调和Button的onMouse回调。此过程中，由于鼠标仅有移动动作而没有点击动作，因此打印信息中的button均为0（MouseButton.None的枚举值）、action均为3（MouseAction.Move的枚举值）。</p></li>      <li>       <p>点击鼠标：鼠标进入Button后进行了2次点击，分别是左键点击和右键点击。</p>       <p>左键点击时：button = 1（MouseButton.Left的枚举值），按下时：action = 1（MouseAction.Press的枚举值），抬起时：action = 2（MouseAction.Release的枚举值）。</p>       <p>右键点击时：button = 2（MouseButton.Right的枚举值），按下时：action = 1（MouseAction.Press的枚举值），抬起时：action = 2（MouseAction.Release的枚举值）。</p></li>     </ol>     <p><span><img originheight="501" originwidth="389" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114913.78735392112805812094844987202486:50001231000000:2800:CA5C6AF478F6648B5DC14B520F7278B6C256781B06993EDD1A8A59C3AE88170A.gif" width="389" height="501"></span></p>     <p>如果需要阻止鼠标事件冒泡，可以通过调用stopPropagation方法进行设置。</p>     <div _ngcontent-vhm-c106="" class="highlight-div"><div _ngcontent-vhm-c106="" class="highlight-div-header"><div _ngcontent-vhm-c106="" class="highlight-div-header-left"><div _ngcontent-vhm-c106="" class="handle-button expand-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vhm-c106="" class="highlight-div-header-right"><div _ngcontent-vhm-c106="" class="handle-button ai-button"></div><div _ngcontent-vhm-c106="" class="handle-button line-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vhm-c106="" class="handle-button theme-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vhm-c106="" class="handle-button copy-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vhm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">MouseExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">buttonText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">columnText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'OnMouse Sample Button'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-title class_">Color</span>: <span class="hljs-title class_">Color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span>, { <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">Color</span>)</li><li>        .<span class="hljs-title function_">onMouse</span>(<span class="hljs-function">(<span class="hljs-params">event?: MouseEvent</span>) =&gt;</span> { <span class="hljs-comment">// 设置Button的onMouse回调</span></li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            event.<span class="hljs-title function_">stopPropagation</span>(); <span class="hljs-comment">// 在Button的onMouse事件中设置阻止冒泡</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">buttonText</span> = <span class="hljs-string">'Button onMouse:\n'</span> + <span class="hljs-string">''</span> +</li><li>              <span class="hljs-string">'button = '</span> + event.<span class="hljs-property">button</span> + <span class="hljs-string">'\n'</span> +</li><li>              <span class="hljs-string">'action = '</span> + event.<span class="hljs-property">action</span> + <span class="hljs-string">'\n'</span> +</li><li>              <span class="hljs-string">'x,y = '</span> + <span class="hljs-string">'\n'</span> + <span class="hljs-string">'('</span> + event.<span class="hljs-property">x</span> + <span class="hljs-string">','</span> + event.<span class="hljs-property">y</span> + <span class="hljs-string">')'</span> + <span class="hljs-string">'\n'</span> +</li><li>              <span class="hljs-string">'windowXY='</span> + <span class="hljs-string">'\n'</span> + <span class="hljs-string">'('</span> + event.<span class="hljs-property">windowX</span> + <span class="hljs-string">','</span> + event.<span class="hljs-property">windowY</span> + <span class="hljs-string">')'</span>;</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Divider</span>()</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">buttonText</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>)</li><li>        <span class="hljs-title class_">Divider</span>()</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">columnText</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Start</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>    .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">2</span>)</li><li>    .<span class="hljs-title function_">borderColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>)</li><li>    .<span class="hljs-title function_">onMouse</span>(<span class="hljs-function">(<span class="hljs-params">event?: MouseEvent</span>) =&gt;</span> { <span class="hljs-comment">// 设置Column的onMouse回调</span></li><li>      <span class="hljs-keyword">if</span> (event) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">columnText</span> = <span class="hljs-string">'Column onMouse:\n'</span> + <span class="hljs-string">''</span> +</li><li>          <span class="hljs-string">'button = '</span> + event.<span class="hljs-property">button</span> + <span class="hljs-string">'\n'</span> +</li><li>          <span class="hljs-string">'action = '</span> + event.<span class="hljs-property">action</span> + <span class="hljs-string">'\n'</span> +</li><li>          <span class="hljs-string">'x,y = '</span> + <span class="hljs-string">'\n'</span> + <span class="hljs-string">'('</span> + event.<span class="hljs-property">x</span> + <span class="hljs-string">','</span> + event.<span class="hljs-property">y</span> + <span class="hljs-string">')'</span> + <span class="hljs-string">'\n'</span> +</li><li>          <span class="hljs-string">'windowXY='</span> + <span class="hljs-string">'\n'</span> + <span class="hljs-string">'('</span> + event.<span class="hljs-property">windowX</span> + <span class="hljs-string">','</span> + event.<span class="hljs-property">windowY</span> + <span class="hljs-string">')'</span>;</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="518" originwidth="390" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114913.07958790892949637428337759271638:50001231000000:2800:319EA33BC88BCF022489FA01F843ABC01B7F39C5732118E1A0B3E4740F4AF753.gif" width="390" height="518"></span></p>     <p>在子组件（Button）的onMouse中，通过回调参数event调用stopPropagation回调方法（如上）即可阻止Button子组件的鼠标事件冒泡到父组件Column上。</p>    </div>    <div class="tiledSection">     <h3 id="onhover">onHover<i class="anchor-icon anchor-icon-link" anchorid="onhover" tips="复制节点链接"></i></h3>          <p>如果需要感知鼠标移入或移出控件范围，建议直接使用高级事件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-hover#onhover" target="_blank">onHover</a>，建议避免直接处理鼠标move事件，以保持代码简洁。</p>     <div _ngcontent-vhm-c106="" class="highlight-div"><div _ngcontent-vhm-c106="" class="highlight-div-header"><div _ngcontent-vhm-c106="" class="highlight-div-header-left"><div _ngcontent-vhm-c106="" class="handle-button expand-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vhm-c106="" class="highlight-div-header-right"><div _ngcontent-vhm-c106="" class="handle-button ai-button"></div><div _ngcontent-vhm-c106="" class="handle-button line-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vhm-c106="" class="handle-button theme-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vhm-c106="" class="handle-button copy-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vhm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">onHover</span>(<span class="hljs-attr">event</span>: <span class="hljs-function">(<span class="hljs-params">isHover: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>)</li></ol></pre></div></div>     <p>悬浮事件回调。参数isHover类型为boolean，表示鼠标进入组件或离开组件。该事件支持自定义冒泡设置，默认父子冒泡。</p>     <p>若组件绑定了该接口，当鼠标指针从组件外部进入到该组件的瞬间会触发事件回调，参数isHover等于true；鼠标指针离开组件的瞬间也会触发该事件回调，参数isHover等于false。</p>     <div _ngcontent-vhm-c106="" class="highlight-div"><div _ngcontent-vhm-c106="" class="highlight-div-header"><div _ngcontent-vhm-c106="" class="highlight-div-header-left"><div _ngcontent-vhm-c106="" class="handle-button expand-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vhm-c106="" class="highlight-div-header-right"><div _ngcontent-vhm-c106="" class="handle-button ai-button"></div><div _ngcontent-vhm-c106="" class="handle-button line-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vhm-c106="" class="handle-button theme-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vhm-c106="" class="handle-button copy-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vhm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">MouseExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">hoverText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Not Hover'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-title class_">Color</span>: <span class="hljs-title class_">Color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">hoverText</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">Color</span>)</li><li>        .<span class="hljs-title function_">onHover</span>(<span class="hljs-function">(<span class="hljs-params">isHover?: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> { <span class="hljs-comment">// 使用onHover接口监听鼠标是否悬浮在Button组件上</span></li><li>          <span class="hljs-keyword">if</span> (isHover) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">hoverText</span> = <span class="hljs-string">'Hovered!'</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">Color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>;</li><li>          }</li><li>          <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">hoverText</span> = <span class="hljs-string">'Not Hover'</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">Color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>;</li><li>          }</li><li>        })</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>该示例创建了一个Button组件，初始背景色为灰色，内容为“Not Hover”。示例中的Button组件绑定了onHover回调，在该回调中将this.isHovered变量置为回调参数：isHover。</p>     <p>当鼠标从Button外移动到Button内的瞬间，回调响应，isHover值等于true，isHovered的值变为true，将组件的背景色改成Color.Green，内容变为“Hovered!”。</p>     <p>当鼠标从Button内移动到Button外的瞬间，回调响应，isHover值等于false，又将组件变成了初始的样式。</p>     <p><span><img originheight="215" originwidth="266" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114913.14820326018559398492574634178762:50001231000000:2800:DCA84E99371B6E18FF4567657E8FFBE3D0090AA2925D165649C3942F55631CA1.gif" class="notEnlarge" width="266" height="215"></span></p>    </div>    <div class="tiledSection">     <h2 id="处理鼠标按键">处理鼠标按键<i class="anchor-icon anchor-icon-link" anchorid="处理鼠标按键" tips="复制节点链接"></i></h2>          <p>当用户按下鼠标上的按键时，会产生鼠标按下事件，可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-mouse-key#mouseevent对象说明" target="_blank">MouseEvent</a>访问事件的一些重要信息，如发生时间，鼠标按键(MouseButton: 左键/右键等)，也可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-customize-judge#getmodifierkeystate12" target="_blank"><strong>getModifierKeyState</strong></a>接口获取到用户在使用鼠标时，物理键盘上的<strong>ctrl/alt/shift</strong>这几个修饰键的按下状态，可以通过组合判断它们的状态来实现一些便捷操作。</p>     <p>以下是一个通过处理鼠标按键实现快速多选的示例：</p>     <div _ngcontent-vhm-c106="" class="highlight-div"><div _ngcontent-vhm-c106="" class="highlight-div-header"><div _ngcontent-vhm-c106="" class="highlight-div-header-left"><div _ngcontent-vhm-c106="" class="handle-button expand-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vhm-c106="" class="highlight-div-header-right"><div _ngcontent-vhm-c106="" class="handle-button ai-button"></div><div _ngcontent-vhm-c106="" class="handle-button line-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vhm-c106="" class="handle-button theme-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vhm-c106="" class="handle-button copy-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vhm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">ListDataSource</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IDataSource</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">list</span>: <span class="hljs-built_in">number</span>[] = [];</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">listeners</span>: <span class="hljs-title class_">DataChangeListener</span>[] = [];</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">list: <span class="hljs-built_in">number</span>[]</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span> = list;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">totalCount</span>(): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-property">length</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">getData</span>(<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>[index];</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">registerDataChangeListener</span>(<span class="hljs-attr">listener</span>: <span class="hljs-title class_">DataChangeListener</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">indexOf</span>(listener) &lt; <span class="hljs-number">0</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">push</span>(listener);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">unregisterDataChangeListener</span>(<span class="hljs-attr">listener</span>: <span class="hljs-title class_">DataChangeListener</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">const</span> pos = <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">indexOf</span>(listener);</li><li>    <span class="hljs-keyword">if</span> (pos &gt;= <span class="hljs-number">0</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">splice</span>(pos, <span class="hljs-number">1</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 通知控制器数据删除</span></li><li>  <span class="hljs-title function_">notifyDataDelete</span>(<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> {</li><li>      listener.<span class="hljs-title function_">onDataDelete</span>(index);</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 在指定索引位置删除一个元素</span></li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">deleteItem</span>(<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyDataDelete</span>(index);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ListExample</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">arr</span>: <span class="hljs-title class_">ListDataSource</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListDataSource</span>([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">allSelectedItems</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = [];</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isSelected</span>: <span class="hljs-built_in">boolean</span>[] = [];</li><li>
</li><li>  <span class="hljs-meta">@Styles</span></li><li>  <span class="hljs-title function_">selectedStyle</span>(): <span class="hljs-built_in">void</span> {</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">isItemSelected</span>(<span class="hljs-attr">item</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">boolean</span> {</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">allSelectedItems</span>.<span class="hljs-property">length</span>; i++) {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">allSelectedItems</span>[i] === item) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isSelected</span>[item] = <span class="hljs-literal">true</span>;</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>      }</li><li>    }</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isSelected</span>[item] = <span class="hljs-literal">false</span>;</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">initialIndex</span>: <span class="hljs-number">0</span> }) {</li><li>        <span class="hljs-title class_">LazyForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">Text</span>(<span class="hljs-string">''</span> + index)</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>              .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>              .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">isSelected</span>[index] ? <span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span> : <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>              .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>          .<span class="hljs-title function_">selectable</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">selected</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">isSelected</span>[index])</li><li>          .<span class="hljs-title function_">stateStyles</span>({</li><li>            <span class="hljs-attr">selected</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedStyle</span></li><li>          })</li><li>          .<span class="hljs-title function_">onMouse</span>(<span class="hljs-function">(<span class="hljs-params">event: MouseEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-comment">// 判断是否按下鼠标左键</span></li><li>            <span class="hljs-keyword">if</span> (event.<span class="hljs-property">button</span> == <span class="hljs-title class_">MouseButton</span>.<span class="hljs-property">Left</span> &amp;&amp; event.<span class="hljs-property">action</span> == <span class="hljs-title class_">MouseAction</span>.<span class="hljs-property">Press</span>) {</li><li>              <span class="hljs-comment">// 判断之前是否已经是选中状态</span></li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">isSelected</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isItemSelected</span>(index)</li><li>              <span class="hljs-comment">// 判断修饰键状态</span></li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">isCtrlPressing</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>              <span class="hljs-keyword">if</span> (event.<span class="hljs-property">getModifierKeyState</span>) {</li><li>                isCtrlPressing = event.<span class="hljs-title function_">getModifierKeyState</span>([<span class="hljs-string">'Ctrl'</span>]);</li><li>              }</li><li>              <span class="hljs-comment">// 如果没有按着ctrl键点鼠标，则强制清理掉其他选中的条目并只让当前条目选中</span></li><li>              <span class="hljs-keyword">if</span> (!isCtrlPressing) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">allSelectedItems</span> = [];</li><li>                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">isSelected</span>.<span class="hljs-property">length</span>; i++) {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">isSelected</span>[i] = <span class="hljs-literal">false</span>;</li><li>                }</li><li>              }</li><li>              <span class="hljs-keyword">if</span> (isSelected) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">allSelectedItems</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item !== index);</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">isSelected</span>[index] = <span class="hljs-literal">false</span>;</li><li>              } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">allSelectedItems</span>.<span class="hljs-title function_">push</span>(index);</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">isSelected</span>[index] = <span class="hljs-literal">true</span>;</li><li>              }</li><li>            }</li><li>          })</li><li>        }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>      }</li><li>      .<span class="hljs-title function_">listDirection</span>(<span class="hljs-title class_">Axis</span>.<span class="hljs-property">Vertical</span>)</li><li>      .<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">Off</span>)</li><li>      .<span class="hljs-title function_">friction</span>(<span class="hljs-number">0.6</span>)</li><li>      .<span class="hljs-title function_">edgeEffect</span>(<span class="hljs-title class_">EdgeEffect</span>.<span class="hljs-property">Spring</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xDCDCDC</span>)</li><li>    .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="546" originwidth="266" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114913.51404166117955883107105012944814:50001231000000:2800:111C3A88EC6D34D0CC223399D46EDC02B27EA0858D632E2CB15376EBA48C630D.gif" class="notEnlarge" width="266" height="546"></span></p>    </div>    <div class="tiledSection">     <h2 id="处理滚轮">处理滚轮<i class="anchor-icon anchor-icon-link" anchorid="处理滚轮" tips="复制节点链接"></i></h2>          <p>鼠标的滚轮是一种可以产生纵向滚动量的输入设备，当用户滚动鼠标滚轮时，系统会产生纵向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-axis" target="_blank">轴事件</a>上报，应用可在组件上通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-axis#onaxisevent" target="_blank">onAxisEvent</a>接口接收轴事件，轴事件中上报的坐标，为鼠标光标所在的位置，而滚轮上报的角度变化可从<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-customize-judge#baseevent8" target="_blank">BaseEvent</a>的axisVertical获得。</p>     <p>鼠标滚轮轴事件的上报，每次都以<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#axisaction17" target="_blank">AxisAction</a>.BEGIN类型开始，当停止滚动时以<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#axisaction17" target="_blank">AxisAction</a>.End结束，慢速滚动时，会产生多段的BEGIN、END上报。当你处理axisVertical时，应确保理解它的数值含义与单位，其有以下特点：</p>     <ul>      <li>上报的数值单位为角度，为单次变化量，非总量。</li>      <li>上报数值大小受系统设置中对滚轮放大倍数设置的影响。</li>      <li>系统设置中的放大倍数通过AxisEvent中的scrollStep告知。</li>      <li>向前滚动，上报数值为负，向后滚动，上报数值为正。</li>     </ul>     <p>如果使用滚动类组件，对于滚轮的响应，系统内部已实现，不需要额外处理。</p>     <p>如果使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture" target="_blank">PanGesture</a>，对于滚轮的响应，此时向前滚动，offsetY的上报数值为正，向后滚动，offsetY的上报数值为负。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ol>        <li>滚轮产生的纵向轴值，一般情况下只能触发纵向滚动手势，无法触发横向滚动。</li>        <li>系统会在发现鼠标指针下只有能够响应横向滚动的组件时，也可以触发横向滚动。</li>        <li>但只要指针下有一个可以响应纵向滚动，则会优先处理纵向，不再处理横向。</li>       </ol>      </div></div></div>     <p>以下是纵向和横向的List响应滚轮的示例：</p>     <div _ngcontent-vhm-c106="" class="highlight-div"><div _ngcontent-vhm-c106="" class="highlight-div-header"><div _ngcontent-vhm-c106="" class="highlight-div-header-left"><div _ngcontent-vhm-c106="" class="handle-button expand-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vhm-c106="" class="highlight-div-header-right"><div _ngcontent-vhm-c106="" class="handle-button ai-button"></div><div _ngcontent-vhm-c106="" class="handle-button line-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vhm-c106="" class="handle-button theme-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vhm-c106="" class="handle-button copy-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vhm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ListDataSource.ets</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ListDataSource</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IDataSource</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">list</span>: <span class="hljs-built_in">number</span>[] = [];</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">listeners</span>: <span class="hljs-title class_">DataChangeListener</span>[] = [];</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">list: <span class="hljs-built_in">number</span>[]</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span> = list;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">totalCount</span>(): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-property">length</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">getData</span>(<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>[index];</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">registerDataChangeListener</span>(<span class="hljs-attr">listener</span>: <span class="hljs-title class_">DataChangeListener</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">indexOf</span>(listener) &lt; <span class="hljs-number">0</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">push</span>(listener);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">unregisterDataChangeListener</span>(<span class="hljs-attr">listener</span>: <span class="hljs-title class_">DataChangeListener</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">const</span> pos = <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">indexOf</span>(listener);</li><li>    <span class="hljs-keyword">if</span> (pos &gt;= <span class="hljs-number">0</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">splice</span>(pos, <span class="hljs-number">1</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 通知控制器数据删除</span></li><li>  <span class="hljs-title function_">notifyDataDelete</span>(<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> {</li><li>      listener.<span class="hljs-title function_">onDataDelete</span>(index);</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 通知控制器添加数据</span></li><li>  <span class="hljs-title function_">notifyDataAdd</span>(<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> {</li><li>      listener.<span class="hljs-title function_">onDataAdd</span>(index);</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 在指定索引位置删除一个元素</span></li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">deleteItem</span>(<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyDataDelete</span>(index);</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 在指定索引位置插入一个元素</span></li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">insertItem</span>(<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">data</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">0</span>, data);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyDataAdd</span>(index);</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-vhm-c106="" class="highlight-div"><div _ngcontent-vhm-c106="" class="highlight-div-header"><div _ngcontent-vhm-c106="" class="highlight-div-header-left"><div _ngcontent-vhm-c106="" class="handle-button expand-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vhm-c106="" class="highlight-div-header-right"><div _ngcontent-vhm-c106="" class="handle-button ai-button"></div><div _ngcontent-vhm-c106="" class="handle-button line-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vhm-c106="" class="handle-button theme-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vhm-c106="" class="handle-button copy-button"><div _ngcontent-vhm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vhm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ListDataSource</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./ListDataSource'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ListExample</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">arr</span>: <span class="hljs-title class_">ListDataSource</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListDataSource</span>([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]);</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">dir1</span>: <span class="hljs-title class_">Axis</span> = <span class="hljs-title class_">Axis</span>.<span class="hljs-property">Vertical</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Click to Change ListDirection'</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dir1</span> == <span class="hljs-title class_">Axis</span>.<span class="hljs-property">Vertical</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dir1</span> = <span class="hljs-title class_">Axis</span>.<span class="hljs-property">Horizontal</span></li><li>          } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dir1</span> = <span class="hljs-title class_">Axis</span>.<span class="hljs-property">Vertical</span></li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">initialIndex</span>: <span class="hljs-number">0</span> }) {</li><li>        <span class="hljs-title class_">LazyForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">Text</span>(<span class="hljs-string">''</span> + item)</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>              .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>              .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>              .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>              .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xFFFFFF</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>          <span class="hljs-comment">// 为ListItem绑定滑动手势，当在ListItem上滚动鼠标滚轮时，会优先触发ListItem的滑动手势</span></li><li>          .<span class="hljs-title function_">gesture</span>(<span class="hljs-title class_">PanGesture</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">PanDirection</span>.<span class="hljs-property">Vertical</span> })</li><li>            .<span class="hljs-title function_">onActionStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Vertical PanGesture start is called'</span>);</li><li>            })</li><li>            .<span class="hljs-title function_">onActionUpdate</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Vertical PanGesture update is called'</span>);</li><li>            }))</li><li>        }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> item.<span class="hljs-title function_">toString</span>())</li><li>      }</li><li>      .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>      .<span class="hljs-title function_">listDirection</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dir1</span>) <span class="hljs-comment">// 排列方向</span></li><li>      .<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">Off</span>)</li><li>      .<span class="hljs-title function_">friction</span>(<span class="hljs-number">0.6</span>)</li><li>      .<span class="hljs-title function_">divider</span>({</li><li>        <span class="hljs-attr">strokeWidth</span>: <span class="hljs-number">2</span>,</li><li>        <span class="hljs-attr">color</span>: <span class="hljs-number">0xFFFFFF</span>,</li><li>        <span class="hljs-attr">startMargin</span>: <span class="hljs-number">20</span>,</li><li>        <span class="hljs-attr">endMargin</span>: <span class="hljs-number">20</span></li><li>      }) <span class="hljs-comment">// 每行之间的分界线</span></li><li>      .<span class="hljs-title function_">edgeEffect</span>(<span class="hljs-title class_">EdgeEffect</span>.<span class="hljs-property">Spring</span>) <span class="hljs-comment">// 边缘效果设置为Spring</span></li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xDCDCDC</span>)</li><li>    .<span class="hljs-title function_">padding</span>(<span class="hljs-number">20</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="824" originwidth="431" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114913.17907237456207579537614096967039:50001231000000:2800:D6D20DC1FFF2AF953A94304B97E76E853548574A7F7045FDC60662C2902F1577.gif" width="431" height="824"></span></p>    </div>   </div>   <div></div></div>