<h1 _ngcontent-wae-c119="" class="doc-title ng-star-inserted" title="文本开发常见问题"> 文本开发常见问题 </h1>

<div _ngcontent-wae-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="如何对找不到字形的字符进行显示优化">如何对找不到字形的字符进行显示优化<i class="anchor-icon anchor-icon-link" anchorid="如何对找不到字形的字符进行显示优化" tips="复制节点链接"></i></h2><p>目前对于找不到字形的字符默认显示为空白，可能让用户感到困惑。</p> <p>系统提供开关，开启后，未找到字形的字符会显示为豆腐块。</p> <ul><li><p>在ArkTS环境中，可以使用setTextUndefinedGlyphDisplay接口开启开关，找不到字形的字符会强制显示为豆腐块。</p>  <div _ngcontent-wae-c106="" class="highlight-div"><div _ngcontent-wae-c106="" class="highlight-div-header"><div _ngcontent-wae-c106="" class="highlight-div-header-left"><div _ngcontent-wae-c106="" class="handle-button expand-button"><div _ngcontent-wae-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wae-c106="" class="highlight-div-header-right"><div _ngcontent-wae-c106="" class="handle-button ai-button"></div><div _ngcontent-wae-c106="" class="handle-button line-button"><div _ngcontent-wae-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wae-c106="" class="handle-button theme-button"><div _ngcontent-wae-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wae-c106="" class="handle-button copy-button"><div _ngcontent-wae-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wae-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { text } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.ArkGraphics2D"</span>;</li><li>
</li><li>text.<span class="hljs-title function_">setTextUndefinedGlyphDisplay</span>(text.<span class="hljs-property">TextUndefinedGlyphDisplay</span>.<span class="hljs-property">USE_TOFU</span>);</li></ol></pre></div></div>  </li><li><p>在C/C++环境中，可以使用OH_Drawing_SetTextUndefinedGlyphDisplay接口开启开关，找不到字形的字符会强制显示为豆腐块。</p>  <div _ngcontent-wae-c106="" class="highlight-div"><div _ngcontent-wae-c106="" class="highlight-div-header"><div _ngcontent-wae-c106="" class="highlight-div-header-left"><div _ngcontent-wae-c106="" class="handle-button expand-button"><div _ngcontent-wae-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wae-c106="" class="highlight-div-header-right"><div _ngcontent-wae-c106="" class="handle-button ai-button"></div><div _ngcontent-wae-c106="" class="handle-button line-button"><div _ngcontent-wae-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wae-c106="" class="handle-button theme-button"><div _ngcontent-wae-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wae-c106="" class="handle-button copy-button"><div _ngcontent-wae-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wae-c106="" class="highlight-scroll-div"><pre class="c prettyprint linenums hljs language-c" hw-language="c" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"drawing/drawing_text_global.h"</span></span></li><li>
</li><li>OH_Drawing_SetTextUndefinedGlyphDisplay(TEXT_NO_GLYPH_USE_TOFU);</li></ol></pre></div></div>  </li></ul> <p>上述两个接口控制同一个开关，使用其一即可。</p> <p>以"\uffffHello World\uffff"文本为例，其中\uffff 表示一个找不到字形的字符。</p> <p>对比效果如下：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.1.8.1.3.1.1" valign="top" width="50%">是否开启显示优化</th> <th align="left" class="cellrowborder" id="mcps1.3.1.8.1.3.1.2" valign="top" width="50%">示意效果</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%">未开启</td> <td class="cellrowborder" valign="top" width="50%"><span><img originheight="77" originwidth="344" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114356.52271797175897117553379023590391:50001231000000:2800:43594A54676A5F986FD58080B651F8A627B7A33EC575AC5C519F1238AF60BE6A.png" width="344" height="77"></span></td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">开启</td> <td class="cellrowborder" valign="top" width="50%"><span><img originheight="116" originwidth="364" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114356.00100846766696610978325208343813:50001231000000:2800:13AC7004FD290334628FE8C94C393A7D03E2891079C1BFAB3BFC59BC9CB24C86.png" width="364" height="116"></span></td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>