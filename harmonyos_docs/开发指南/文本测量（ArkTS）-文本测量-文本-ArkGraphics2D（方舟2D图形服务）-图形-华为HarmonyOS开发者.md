<h1 _ngcontent-aun-c119="" class="doc-title ng-star-inserted" title="文本测量（ArkTS）"> 文本测量（ArkTS） </h1>

<div _ngcontent-aun-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="场景介绍">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="场景介绍" tips="复制节点链接"></i></h2>          <p>文本测量指的是在图形绘制中，对文本的尺寸和布局进行评估，计算文本在给定字体和样式下占用的空间（例如宽度、高度和其他相关信息）的过程。文本测量用于文本排版、布局、渲染以及调整文本显示的位置和大小等场景，便于更精准地控制与调整界面的布局和呈现，以达到设计预期。</p>     <p>当前主要支持以下方面的文本测量能力：</p>     <ul>      <li>       <p><strong>文本宽度</strong>：测量给定文本在特定字体、大小和样式下的水平长度。</p></li>      <li>       <p><strong>文本高度</strong>：测量给定文本的垂直高度，通常涉及文本的上升线、下降线等。</p></li>      <li>       <p><strong>行间距</strong>：测量多行文本之间的垂直距离，通常与文本的行距相关。</p></li>      <li>       <p><strong>字符间距</strong>：测量单个字符之间的水平距离，通常与字形和字体设计有关。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="接口说明">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h2>          <p>文本测量中常用接口如下表所示，详细接口说明参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-graphics-text#paragraph" target="_blank">@ohos.graphics.text (文本模块)</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.3.1.3.1.1" valign="top" width="50%">接口名</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.3.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">getLongestLine(): number</td>         <td class="cellrowborder" valign="top" width="50%">获取当前段落最长行的宽度，建议实际使用时将返回值向上取整。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">getLongestLineWithIndent(): number</td>         <td class="cellrowborder" valign="top" width="50%">获取当前段落最长行的宽度（该宽度包含当前行缩进的宽度），建议实际使用时将返回值向上取整。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">getTextLines(): Array&lt;TextLine&gt;</td>         <td class="cellrowborder" valign="top" width="50%">获取当前段落文本行对象数组。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">getLineMetrics(): Array&lt;LineMetrics&gt;</td>         <td class="cellrowborder" valign="top" width="50%">获取段落所有行的度量信息。包含行的高度、宽度、起始坐标等信息。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">getLineMetrics(lineNumber: number): LineMetrics | undefined</td>         <td class="cellrowborder" valign="top" width="50%">获取段落指定行的度量信息。包含行的高度、宽度、起始坐标等信息。超出当前段落排版后最大行数后返回undefined。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>导入依赖的相关模块。</p>       <div _ngcontent-aun-c106="" class="highlight-div"><div _ngcontent-aun-c106="" class="highlight-div-header"><div _ngcontent-aun-c106="" class="highlight-div-header-left"><div _ngcontent-aun-c106="" class="handle-button expand-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aun-c106="" class="highlight-div-header-right"><div _ngcontent-aun-c106="" class="handle-button ai-button"></div><div _ngcontent-aun-c106="" class="handle-button line-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aun-c106="" class="handle-button theme-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aun-c106="" class="handle-button copy-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aun-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { text } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span>;</li></ol></pre></div></div></li>      <li>       <p>创建段落样式，并使用构造段落生成器ParagraphBuilder生成段落实例。</p>       <div _ngcontent-aun-c106="" class="highlight-div"><div _ngcontent-aun-c106="" class="highlight-div-header"><div _ngcontent-aun-c106="" class="highlight-div-header-left"><div _ngcontent-aun-c106="" class="handle-button expand-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aun-c106="" class="highlight-div-header-right"><div _ngcontent-aun-c106="" class="handle-button ai-button"></div><div _ngcontent-aun-c106="" class="handle-button line-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aun-c106="" class="handle-button theme-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aun-c106="" class="handle-button copy-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aun-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 设置文本样式</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>    <span class="hljs-attr">color</span>: { <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>, <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>, <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span> },</li><li>    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">100</span></li><li>};</li><li><span class="hljs-comment">// 创建一个段落样式对象，以设置排版风格</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>    <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>    <span class="hljs-attr">wordBreak</span>:text.<span class="hljs-property">WordBreak</span>.<span class="hljs-property">NORMAL</span></li><li>}</li><li><span class="hljs-comment">// 创建一个段落生成器</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">paragraphBuilder</span>: text.<span class="hljs-property">ParagraphBuilder</span> = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">FontCollection</span>());</li></ol></pre></div></div></li>      <li>       <p>设置文本样式，添加文本内容，并生成段落文本用于后续文本的绘制显示。</p>       <div _ngcontent-aun-c106="" class="highlight-div"><div _ngcontent-aun-c106="" class="highlight-div-header"><div _ngcontent-aun-c106="" class="highlight-div-header-left"><div _ngcontent-aun-c106="" class="handle-button expand-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aun-c106="" class="highlight-div-header-right"><div _ngcontent-aun-c106="" class="handle-button ai-button"></div><div _ngcontent-aun-c106="" class="handle-button line-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aun-c106="" class="handle-button theme-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aun-c106="" class="handle-button copy-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aun-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 在段落生成器中设置文本样式</span></li><li>paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li><span class="hljs-comment">// 在段落生成器中设置文本内容</span></li><li>paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"文本测量测试"</span>);</li><li><span class="hljs-comment">// 通过段落生成器生成段落</span></li><li><span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li></ol></pre></div></div></li>      <li>       <p>调用测量相关接口，获取指定的测量信息。</p>       <div _ngcontent-aun-c106="" class="highlight-div"><div _ngcontent-aun-c106="" class="highlight-div-header"><div _ngcontent-aun-c106="" class="highlight-div-header-left"><div _ngcontent-aun-c106="" class="handle-button expand-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aun-c106="" class="highlight-div-header-right"><div _ngcontent-aun-c106="" class="handle-button ai-button"></div><div _ngcontent-aun-c106="" class="handle-button line-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aun-c106="" class="handle-button theme-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aun-c106="" class="handle-button copy-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aun-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// case1: 获取排版后最长行行宽</span></li><li><span class="hljs-keyword">let</span> longestLineWidth = paragraph.<span class="hljs-title function_">getLongestLine</span>();</li><li><span class="hljs-comment">// case2: 获取排版后最长行行宽(包含缩进)</span></li><li><span class="hljs-keyword">let</span> longestLineWithIndentWidth = paragraph.<span class="hljs-title function_">getLongestLineWithIndent</span>()</li><li><span class="hljs-comment">// case3: 获取排版后所有行对象</span></li><li><span class="hljs-keyword">let</span> textLines = paragraph.<span class="hljs-title function_">getTextLines</span>();</li><li><span class="hljs-comment">// case4: 获取排版后指定行对应的度量信息</span></li><li><span class="hljs-keyword">let</span> lineCnt = paragraph.<span class="hljs-title function_">getLineCount</span>();</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; lineCnt; index++) {</li><li>    <span class="hljs-keyword">let</span> lineMetrics = paragraph.<span class="hljs-title function_">getLineMetrics</span>(index);</li><li>}</li><li><span class="hljs-comment">// case5: 获取排版后所有行度量信息数组</span></li><li><span class="hljs-keyword">let</span> allLineMetrics = paragraph.<span class="hljs-title function_">getLineMetrics</span>();</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="完整示例">完整示例<i class="anchor-icon anchor-icon-link" anchorid="完整示例" tips="复制节点链接"></i></h2>          <p>完整的文本测量示例如下。</p>     <div _ngcontent-aun-c106="" class="highlight-div"><div _ngcontent-aun-c106="" class="highlight-div-header"><div _ngcontent-aun-c106="" class="highlight-div-header-left"><div _ngcontent-aun-c106="" class="handle-button expand-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aun-c106="" class="highlight-div-header-right"><div _ngcontent-aun-c106="" class="handle-button ai-button"></div><div _ngcontent-aun-c106="" class="handle-button line-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aun-c106="" class="handle-button theme-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aun-c106="" class="handle-button copy-button"><div _ngcontent-aun-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aun-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">RenderNode</span>, <span class="hljs-title class_">DrawContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { text } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建一个自定义的渲染节点类，用于绘制文本</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">RenderNode</span> {</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">context: DrawContext</span>) {</li><li>    <span class="hljs-comment">// 获取画布canvas对象</span></li><li>    <span class="hljs-keyword">const</span> canvas = context.<span class="hljs-property">canvas</span>;</li><li>    <span class="hljs-comment">// 配置文本样式（红色，字号100px）</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>      <span class="hljs-attr">color</span>: {</li><li>        <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>      },</li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">100</span></li><li>    };</li><li>    <span class="hljs-comment">// 创建一个段落样式对象，以设置排版风格</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>      <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>      <span class="hljs-attr">wordBreak</span>: text.<span class="hljs-property">WordBreak</span>.<span class="hljs-property">NORMAL</span></li><li>    };</li><li>    <span class="hljs-comment">// 创建一个段落生成器</span></li><li>    <span class="hljs-keyword">let</span> paragraphBuilder = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">FontCollection</span>());</li><li>    <span class="hljs-comment">// 在段落生成器中设置文本样式</span></li><li>    paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li>    <span class="hljs-comment">// 在段落生成器中设置文本内容</span></li><li>    paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"文本测量测试"</span>);</li><li>    <span class="hljs-comment">// 通过段落生成器生成段落</span></li><li>    <span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li><li>    <span class="hljs-comment">// 布局</span></li><li>    paragraph.<span class="hljs-title function_">layoutSync</span>(<span class="hljs-number">1000</span>);</li><li>    <span class="hljs-comment">// case1: 获取排版后最长行行宽</span></li><li>    <span class="hljs-keyword">let</span> longestLineWidth = paragraph.<span class="hljs-title function_">getLongestLine</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"longestLineWidth = "</span> + longestLineWidth);</li><li>
</li><li>    <span class="hljs-comment">// case2: 获取排版后最长行行宽(包含缩进)</span></li><li>    <span class="hljs-keyword">let</span> longestLineWithIndentWidth = paragraph.<span class="hljs-title function_">getLongestLineWithIndent</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"longestLineWithIndentWidth = "</span> + longestLineWithIndentWidth);</li><li>
</li><li>    <span class="hljs-comment">// case3: 获取排版后所有行对象</span></li><li>    <span class="hljs-keyword">let</span> textLines = paragraph.<span class="hljs-title function_">getTextLines</span>();</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; textLines.<span class="hljs-property">length</span>; index++) {</li><li>      <span class="hljs-keyword">const</span> textline = textLines[index];</li><li>      <span class="hljs-keyword">let</span> curLineRange = textline.<span class="hljs-title function_">getTextRange</span>();</li><li>      <span class="hljs-keyword">let</span> curLineGlyCnt = textline.<span class="hljs-title function_">getGlyphCount</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"MetricsMSG: 第"</span> + (index + <span class="hljs-number">1</span>) + <span class="hljs-string">"行 TextRange start: "</span> + curLineRange.<span class="hljs-property">start</span> + <span class="hljs-string">" TextRange end: "</span> + curLineRange.<span class="hljs-property">end</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"MetricsMSG: 第"</span> + (index + <span class="hljs-number">1</span>) + <span class="hljs-string">"行字形数量为: "</span> + curLineGlyCnt);</li><li>    }</li><li>
</li><li>    <span class="hljs-comment">// case4: 获取排版后指定行对应的度量信息</span></li><li>    <span class="hljs-keyword">let</span> lineCnt = paragraph.<span class="hljs-title function_">getLineCount</span>();</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; lineCnt; index++) {</li><li>      <span class="hljs-keyword">let</span> lineMetrics = paragraph.<span class="hljs-title function_">getLineMetrics</span>(index);</li><li>      <span class="hljs-keyword">if</span> (lineMetrics) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"MetricsMSG: 第"</span> + (index + <span class="hljs-number">1</span>) + <span class="hljs-string">"行 lineMetrics width: "</span> + lineMetrics.<span class="hljs-property">width</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"MetricsMSG: 第"</span> + (index + <span class="hljs-number">1</span>) + <span class="hljs-string">"行 lineMetrics start index: "</span> + lineMetrics.<span class="hljs-property">startIndex</span> + <span class="hljs-string">", end index: "</span> +</li><li>        lineMetrics.<span class="hljs-property">endIndex</span>);</li><li>      }</li><li>    }</li><li>
</li><li>    <span class="hljs-comment">// case5: 获取排版后所有行度量信息数组</span></li><li>    <span class="hljs-keyword">let</span> allLineMetrics = paragraph.<span class="hljs-title function_">getLineMetrics</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"MetricsMSG: 第1行 lineMetrics width: "</span> + allLineMetrics[<span class="hljs-number">0</span>].<span class="hljs-property">width</span>);</li><li>    paragraph.<span class="hljs-title function_">paint</span>(canvas, <span class="hljs-number">0</span>, <span class="hljs-number">800</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 创建文本渲染节点实例</span></li><li><span class="hljs-keyword">const</span> textNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRenderNode</span>();</li><li><span class="hljs-comment">// 定义newNode的大小和位置</span></li><li>textNode.<span class="hljs-property">frame</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">400</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">600</span> };</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameNode</span>(uiContext);</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>;</li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>();</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-property">frame</span> = {</li><li>        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">300</span>,</li><li>        <span class="hljs-attr">height</span>: <span class="hljs-number">50</span></li><li>      };</li><li>      renderNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> };</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">addNode</span>(<span class="hljs-attr">node</span>: <span class="hljs-title class_">RenderNode</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>();</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">appendChild</span>(node);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">clearNodes</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>();</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">clearChildren</span>();</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">RenderTest</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">myNodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">position</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">25</span> })</li><li>      }</li><li>
</li><li>        <span class="hljs-title class_">Row</span>() {</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">"Draw Text"</span>)</li><li>            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-string">'16fp'</span>)</li><li>            .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-number">500</span>)</li><li>            .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">24</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">12</span> })</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController</span>.<span class="hljs-title function_">clearNodes</span>();</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController</span>.<span class="hljs-title function_">addNode</span>(textNode);</li><li>            })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'50%'</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>        }</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>) <span class="hljs-comment">// 设置当前Row容器内子元素在主轴上居中对齐</span></li><li>        .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">VerticalAlign</span>.<span class="hljs-property">Bottom</span>) <span class="hljs-comment">// 设置当前Row容器内子元素在交叉轴（垂直方向）上的对齐方式为底部对齐</span></li><li>        .<span class="hljs-title function_">layoutWeight</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">// 设置当前Row在父容器Column中的布局权重为1</span></li><li>      }</li><li>    }</li><li>  }</li></ol></pre></div></div>    </div>   </div>   <div></div></div>