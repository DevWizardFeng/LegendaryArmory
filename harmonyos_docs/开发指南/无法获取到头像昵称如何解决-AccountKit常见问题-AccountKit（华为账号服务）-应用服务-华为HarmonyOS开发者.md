<h1 _ngcontent-rhw-c119="" class="doc-title ng-star-inserted" title="无法获取到头像昵称如何解决"> 无法获取到头像昵称如何解决 </h1>

<div _ngcontent-rhw-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <ol>     <li>确认获取authorizationCode时，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-authentication#section12940173017165" target="_blank">AuthorizationWithHuaweiIDRequest</a>接口是否传入正确的scope：'profile'。      <div _ngcontent-rhw-c106="" class="highlight-div"><div _ngcontent-rhw-c106="" class="highlight-div-header"><div _ngcontent-rhw-c106="" class="highlight-div-header-left"><div _ngcontent-rhw-c106="" class="handle-button expand-button"><div _ngcontent-rhw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rhw-c106="" class="highlight-div-header-right"><div _ngcontent-rhw-c106="" class="handle-button ai-button"></div><div _ngcontent-rhw-c106="" class="handle-button line-button"><div _ngcontent-rhw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rhw-c106="" class="handle-button theme-button"><div _ngcontent-rhw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rhw-c106="" class="handle-button copy-button"><div _ngcontent-rhw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rhw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { authentication } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AccountKit'</span>;</li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">创建授权请求，并设置参数</span></span></li><li><span class=""><span class="hljs-keyword">const</span> authRequest = <span class="hljs-keyword">new</span> authentication.<span class="hljs-title class_">HuaweiIDProvider</span>().<span class="hljs-title function_">createAuthorizationWithHuaweiIDRequest</span>();</span></li><li><span class=""><span class="hljs-comment">// 获取头像昵称需要传如下scope</span></span></li><li><strong style="color: rgb(63,63,63);">authRequest.<span class="hljs-property">scopes</span> = [<span class="hljs-string">'profile'</span>]</strong><strong><span class="">;</span></strong></li><li><span class=""><span class="hljs-comment">// 若开发者需要进行服务端开发，则需传如下permission获取</span></span><span class="hljs-comment">authorizationCode</span></li><li>authRequest.<span class="hljs-property">permissions</span> = [<span class="hljs-string">'serviceauthcode'</span>];</li></ol></pre></div></div></li>     <li>确保<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-authentication#section12940173017165" target="_blank">AuthorizationWithHuaweiIDRequest</a>接口传入正确scope后获取到的authorizationCode/IdToken是否在有效期内。</li>     <li>确认调用的是华为账号服务器<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-get-user-info-get-nickname-and-avatar" target="_blank">获取头像昵称</a>接口。</li>    </ol>   </div>   <div></div></div>