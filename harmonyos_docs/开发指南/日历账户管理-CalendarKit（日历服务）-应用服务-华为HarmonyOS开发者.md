<h1 _ngcontent-gls-c119="" class="doc-title ng-star-inserted" title="日历账户管理"> 日历账户管理 </h1>

<div _ngcontent-gls-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>日历账户‌用于存储和管理个人或团队的日程，通过日历账户，用户可以方便地查看、编辑和共享日程信息。</p>    <p>日历管理器<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-calendarmanager#calendarmanager" target="_blank">CalendarManager</a>用于管理日历账户<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-calendarmanager#calendar" target="_blank">Calendar</a>。日历账户主要包含账户信息<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-calendarmanager#calendaraccount" target="_blank">CalendarAccount</a>和配置信息<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-calendarmanager#calendarconfig" target="_blank">CalendarConfig</a>。</p>    <p>开发者可以创建属于应用特有的日历账户，还可以对日历账户进行新增、删除、更新和查询。此外，每个日程<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-calendarmanager#event" target="_blank">Event</a>归属于某一个特定的日历账户，可以通过日历账户对该账户下面的日程进行管理，具体相关指导可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/calendarmanager-event-developer">日程管理</a>。</p>    <div class="tiledSection">     <h2 id="接口说明">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h2>          <p>以下是日历账户管理的相关接口，更多详细接口及使用请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-calendarmanager" target="_blank">@ohos.calendarManager</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.3.1.1" valign="top" width="50%">接口名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">getCalendarManager(context: Context): CalendarManager</td>         <td class="cellrowborder" valign="top" width="50%">根据上下文获取日历管理器对象CalendarManager，用于管理日历。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">createCalendar(calendarAccount: CalendarAccount): Promise&lt;Calendar&gt;</td>         <td class="cellrowborder" valign="top" width="50%">根据日历账户信息，创建一个Calendar对象，使用Promise异步回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">getCalendar(calendarAccount?: CalendarAccount): Promise&lt;Calendar&gt;</td>         <td class="cellrowborder" valign="top" width="50%">          <p>获取默认Calendar对象或者指定Calendar对象，使用Promise异步回调。</p>          <p>默认Calendar是日历存储首次运行时创建的，若创建Event时不关注其Calendar归属，则无须通过createCalendar()创建Calendar，直接使用默认Calendar。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">getAllCalendars(): Promise&lt;Calendar[]&gt;</td>         <td class="cellrowborder" valign="top" width="50%">获取当前应用所有创建的Calendar对象以及默认Calendar对象，使用Promise异步回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">deleteCalendar(calendar: Calendar): Promise&lt;void&gt;</td>         <td class="cellrowborder" valign="top" width="50%">删除指定Calendar对象，使用Promise异步回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">getConfig(): CalendarConfig</td>         <td class="cellrowborder" valign="top" width="50%">获取日历配置信息。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">setConfig(config: CalendarConfig): Promise&lt;void&gt;</td>         <td class="cellrowborder" valign="top" width="50%">设置日历配置信息，使用Promise异步回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">getAccount(): CalendarAccount</td>         <td class="cellrowborder" valign="top" width="50%">获取日历账户信息。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>导入相关依赖。</p>       <div _ngcontent-gls-c106="" class="highlight-div"><div _ngcontent-gls-c106="" class="highlight-div-header"><div _ngcontent-gls-c106="" class="highlight-div-header-left"><div _ngcontent-gls-c106="" class="handle-button expand-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gls-c106="" class="highlight-div-header-right"><div _ngcontent-gls-c106="" class="handle-button ai-button"></div><div _ngcontent-gls-c106="" class="handle-button line-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gls-c106="" class="handle-button theme-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gls-c106="" class="handle-button copy-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gls-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { abilityAccessCtrl, <span class="hljs-title class_">AbilityConstant</span>, common, <span class="hljs-title class_">PermissionRequestResult</span>, <span class="hljs-title class_">Permissions</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { calendarManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CalendarKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li></ol></pre></div></div></li>      <li>       <p>申请权限。使用Calendar Kit时，需要在module.json5中声明申请读写日历日程所需的权限：ohos.permission.READ_CALENDAR和ohos.permission.WRITE_CALENDAR。具体指导可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions">声明权限</a>。</p></li>      <li>       <p>根据上下文获取日程管理器对象calendarMgr，用于对日历账户进行相关管理操作。推荐在EntryAbility.ets文件中进行操作。</p>       <div _ngcontent-gls-c106="" class="highlight-div"><div _ngcontent-gls-c106="" class="highlight-div-header"><div _ngcontent-gls-c106="" class="highlight-div-header-left"><div _ngcontent-gls-c106="" class="handle-button expand-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gls-c106="" class="highlight-div-header-right"><div _ngcontent-gls-c106="" class="handle-button ai-button"></div><div _ngcontent-gls-c106="" class="handle-button line-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gls-c106="" class="handle-button theme-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gls-c106="" class="handle-button copy-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gls-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> <span class="hljs-attr">calendarMgr</span>: calendarManager.<span class="hljs-property">CalendarManager</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> <span class="hljs-attr">mContext</span>: common.<span class="hljs-property">UIAbilityContext</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Ability onCreate"</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onDestroy</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Ability onDestroy"</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-attr">windowStage</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowStage</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// Main window is created, set main page for this ability</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Ability onWindowStageCreate"</span>);</li><li>    windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load the content. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in loading the content. Data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    });</li><li>    mContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>;</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">permissions</span>: <span class="hljs-title class_">Permissions</span>[] = [<span class="hljs-string">'ohos.permission.READ_CALENDAR'</span>, <span class="hljs-string">'ohos.permission.WRITE_CALENDAR'</span>];</li><li>    <span class="hljs-keyword">let</span> atManager = abilityAccessCtrl.<span class="hljs-title function_">createAtManager</span>();</li><li>    atManager.<span class="hljs-title function_">requestPermissionsFromUser</span>(mContext, permissions).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: PermissionRequestResult</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`get Permission success, result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>      calendarMgr = calendarManager.<span class="hljs-title function_">getCalendarManager</span>(mContext);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`get Permission error, error. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onWindowStageDestroy</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// Main window is destroyed, release UI related resources</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Ability onWindowStageDestroy"</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onForeground</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// Ability has brought to foreground</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Ability onForeground"</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onBackground</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// Ability has back to background</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Ability onBackground"</span>);</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>根据日历账户信息，创建一个日历账户Calendar对象。</p>       <p>创建日历账户之前，开发者需要先根据账户信息进行查询，如果账户不存在则抛出异常信息，捕获到异常再进行日历账户的创建，否则可能会出现账户重复创建的问题。</p>       <div _ngcontent-gls-c106="" class="highlight-div"><div _ngcontent-gls-c106="" class="highlight-div-header"><div _ngcontent-gls-c106="" class="highlight-div-header-left"><div _ngcontent-gls-c106="" class="handle-button expand-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gls-c106="" class="highlight-div-header-right"><div _ngcontent-gls-c106="" class="handle-button ai-button"></div><div _ngcontent-gls-c106="" class="handle-button line-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gls-c106="" class="handle-button theme-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gls-c106="" class="handle-button copy-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gls-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { calendarMgr } <span class="hljs-keyword">from</span> <span class="hljs-string">'../entryability/EntryAbility'</span>;</li><li><span class="hljs-keyword">import</span> { calendarManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CalendarKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">calendar</span>: calendarManager.<span class="hljs-property">Calendar</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-comment">// 指定日历账户信息</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">calendarAccount</span>: calendarManager.<span class="hljs-property">CalendarAccount</span> = {</li><li>  <span class="hljs-comment">// 日历账户名称</span></li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">'MyCalendar'</span>,</li><li>  <span class="hljs-comment">// 日历账户类型</span></li><li>  <span class="hljs-attr">type</span>: calendarManager.<span class="hljs-property">CalendarType</span>.<span class="hljs-property">LOCAL</span>,</li><li>  <span class="hljs-comment">// 日历账户显示名称，该字段如果不填，创建的日历账户在界面显示为空字符串。</span></li><li>  <span class="hljs-attr">displayName</span>: <span class="hljs-string">'MyCalendar'</span></li><li>};</li><li><span class="hljs-comment">// 创建日历账户</span></li><li>calendarMgr?.<span class="hljs-title function_">createCalendar</span>(calendarAccount).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: calendarManager.Calendar</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating calendar data-&gt;<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>  calendar = data;</li><li>  <span class="hljs-comment">// 请确保日历账户创建成功后，再进行后续相关操作</span></li><li>  <span class="hljs-comment">// ...</span></li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create calendar. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div></li>      <li>       <p>日历账户创建之后，日历账户颜色默认为黑色，不指定日历账户颜色可能导致部分版本/设备深色模式下显示效果不佳。开发者需要调用setConfig()接口设置日历配置信息，包括是否打开日历账户下的日程提醒能力、设置日历账户颜色。</p>       <div _ngcontent-gls-c106="" class="highlight-div"><div _ngcontent-gls-c106="" class="highlight-div-header"><div _ngcontent-gls-c106="" class="highlight-div-header-left"><div _ngcontent-gls-c106="" class="handle-button expand-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gls-c106="" class="highlight-div-header-right"><div _ngcontent-gls-c106="" class="handle-button ai-button"></div><div _ngcontent-gls-c106="" class="handle-button line-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gls-c106="" class="handle-button theme-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gls-c106="" class="handle-button copy-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gls-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">calendarAccounts</span>: calendarManager.<span class="hljs-property">CalendarAccount</span> = {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">'MyCalendar'</span>,</li><li>  <span class="hljs-attr">type</span>: calendarManager.<span class="hljs-property">CalendarType</span>.<span class="hljs-property">LOCAL</span>,</li><li>  <span class="hljs-attr">displayName</span>: <span class="hljs-string">'MyCalendar'</span></li><li>};</li><li><span class="hljs-comment">// 日历配置信息</span></li><li>calendarMgr?.<span class="hljs-title function_">getCalendar</span>(calendarAccounts, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">//获取日历账户</span></li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get calendar, Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: calendarManager.<span class="hljs-property">CalendarConfig</span> = {</li><li>      <span class="hljs-comment">// 打开日程提醒</span></li><li>      <span class="hljs-attr">enableReminder</span>: <span class="hljs-literal">true</span>,</li><li>      <span class="hljs-comment">// 设置日历账户颜色</span></li><li>      <span class="hljs-attr">color</span>: <span class="hljs-string">'#aabbcc'</span></li><li>    };</li><li>    <span class="hljs-comment">// 设置日历配置信息</span></li><li>    data.<span class="hljs-title function_">setConfig</span>(config).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting config, data-&gt;<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(config)}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set config. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>});</li></ol></pre></div></div></li>      <li>       <p>可以查询指定日历账户。</p>       <div _ngcontent-gls-c106="" class="highlight-div"><div _ngcontent-gls-c106="" class="highlight-div-header"><div _ngcontent-gls-c106="" class="highlight-div-header-left"><div _ngcontent-gls-c106="" class="handle-button expand-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gls-c106="" class="highlight-div-header-right"><div _ngcontent-gls-c106="" class="handle-button ai-button"></div><div _ngcontent-gls-c106="" class="handle-button line-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gls-c106="" class="handle-button theme-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gls-c106="" class="handle-button copy-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gls-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li>calendarMgr?.<span class="hljs-title function_">getCalendar</span>(calendarAccount).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: calendarManager.Calendar</span>) =&gt;</span> {</li><li> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting calendar, data -&gt; <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get calendar. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div></li>      <li>       <p>也可以查询默认日历账户，默认日历账户是日历存储首次运行时创建的，若创建日程时不关注归属哪个账户，则无须单独创建日历账户，可以直接使用默认日历账户。</p>       <div _ngcontent-gls-c106="" class="highlight-div"><div _ngcontent-gls-c106="" class="highlight-div-header"><div _ngcontent-gls-c106="" class="highlight-div-header-left"><div _ngcontent-gls-c106="" class="handle-button expand-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gls-c106="" class="highlight-div-header-right"><div _ngcontent-gls-c106="" class="handle-button ai-button"></div><div _ngcontent-gls-c106="" class="handle-button line-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gls-c106="" class="handle-button theme-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gls-c106="" class="handle-button copy-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gls-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li>calendarMgr?.<span class="hljs-title function_">getCalendar</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: calendarManager.Calendar</span>) =&gt;</span> {</li><li> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting calendar, data -&gt; <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get calendar. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div></li>      <li>       <p>获取当前应用所有创建的日历账户及默认日历账户Calendar对象。</p>       <p>由于涉及数据隐私安全，进行了权限管控的应用无法获取其他应用创建的账户信息。</p>       <div _ngcontent-gls-c106="" class="highlight-div"><div _ngcontent-gls-c106="" class="highlight-div-header"><div _ngcontent-gls-c106="" class="highlight-div-header-left"><div _ngcontent-gls-c106="" class="handle-button expand-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gls-c106="" class="highlight-div-header-right"><div _ngcontent-gls-c106="" class="handle-button ai-button"></div><div _ngcontent-gls-c106="" class="handle-button line-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gls-c106="" class="handle-button theme-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gls-c106="" class="handle-button copy-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gls-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li>calendarMgr?.<span class="hljs-title function_">getAllCalendars</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: calendarManager.Calendar[]</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting all calendars, data -&gt; <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>  data.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">calendar</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">const</span> account = calendar.<span class="hljs-title function_">getAccount</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`account -&gt; <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(account)}</span>`</span>);</li><li>  })</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get all calendars. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div></li>      <li>       <p>删除指定的日历账户，删除账户后，该账户下的所有日程会全部删除。</p>       <div _ngcontent-gls-c106="" class="highlight-div"><div _ngcontent-gls-c106="" class="highlight-div-header"><div _ngcontent-gls-c106="" class="highlight-div-header-left"><div _ngcontent-gls-c106="" class="handle-button expand-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gls-c106="" class="highlight-div-header-right"><div _ngcontent-gls-c106="" class="handle-button ai-button"></div><div _ngcontent-gls-c106="" class="handle-button line-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gls-c106="" class="handle-button theme-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gls-c106="" class="handle-button copy-button"><div _ngcontent-gls-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gls-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li>calendarMgr?.<span class="hljs-title function_">deleteCalendar</span>(calendar).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in deleting calendar"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete calendar. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>