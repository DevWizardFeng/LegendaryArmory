<h1 _ngcontent-opv-c119="" class="doc-title ng-star-inserted" title="日志"> 日志 </h1>

<div _ngcontent-opv-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001749596672"><p id="ZH-CN_TOPIC_0000002510173697__zh-cn_topic_0000001745217286_p1943954888171146">与任何web应用程序相同，ohpm-repo有一个内置的日志记录器，其定义了四种日志类型。</p> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217286_访问日志---accesslog">访问日志 - access.log<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217286_访问日志---accesslog" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510173697__zh-cn_topic_0000001745217286_p1408574096171146">访问日志中主要包含操作时间、服务器ip、操作源、操作结果以及请求接口或者请求静态资源，其文件保存个数最多为180个。</p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217286_操作日志---operatelog">操作日志 - operate.log<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217286_操作日志---operatelog" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510173697__zh-cn_topic_0000001745217286_p749428013171146">操作日志中主要包含操作时间、日志级别、操作人id(userId)、终端 ip(ip)、操作资源（resource）、操作方法名（event）以及操作结果（result），其文件保存个数最多为180个。</p> <p id="ZH-CN_TOPIC_0000002510173697__p5581519105420"><span><img height="83.104252" originheight="99" originwidth="1466" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104721.50152615743294529825889441146083:50001231000000:2800:FB78D739BF7B3753EDAB1D7516E32ACFE6C6C2EE6442A0B3EBABA70F27AC2A71.png" title="点击放大" width="860.4086540000001"></span></p> <p id="ZH-CN_TOPIC_0000002510173697__p1882875655816"></p> <p id="ZH-CN_TOPIC_0000002510173697__p103722617493"></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002510173697__p11525104115014"><strong>操作方法名(event)</strong>： 当在ohpm-repo管理界面执行一系列操作时，会在operate.log文件生成一条条操作数据，操作方法名即表示当前操作涉及到的方法名字，例如login即表示登录操作，analyzePackage即表示上传包时对包的解析操作。</p> </div></div></div>  <div class="tablenoborder"><div class="tbBox"><table id="table12671649195012" class="layoutFixed idpTab"><caption><b>表1 </b>常用操作方法说明</caption><thead><tr id="ZH-CN_TOPIC_0000002510173697__row10267154917503"><th align="left" class="cellrowborder" id="mcps1.3.3.7.2.4.1.1" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p9268149175015">序号</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.7.2.4.1.2" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p1826813491502">Event描述</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.7.2.4.1.3" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p1826834916502">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002510173697__row14268164925013"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p445762135112">1</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p5268134955013">generateAccessToken / deleteAccessToken</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p17268124917502">生成 / 删除AccessToken</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row132681491508"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p12268124915508">2</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p15807192075514">login / logout</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p980742012558">登入 / 登出</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row6807172075512"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p128071620115513">3</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p69581425105717">publish / unPublish/batchUnPublish</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p49581825195713">上架资源包/ 下架资源包/批量下架资源包</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row595752510573"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p15958122517574">4</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p109821136165810">addGroup / deleteGroup</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p1098110360589">添加/删除组织</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row1930245675710"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p14302135617578">5</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p1930225613579">updateGroup</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p18303656145714">更新组织</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row183117375110"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p43119371114">6</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p331119377110">addMember/deleteMember</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p93113374117">添加 / 删除组织成员</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row1045772814918"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p1745722824919">7</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p164578283494">addAdminMember/deleteAdminMember</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p7457102844917">添加/删除组织管理员</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row482318401936"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p14824184018310">8</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p782410401315">addPublicKey / delPublicKeyById</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p1882410401232">添加 / 删除发布公钥</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row145721514840"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p55723141245">9</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p16611035703">addRepo/updateRepo/deleteRepo</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p2572314743">新增仓库/更新仓库/删除仓库</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row140514414516"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p184051141155">10</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p12405841757">analyzePackage</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p13406841952">解析上传的包文件</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row3931224855"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p99317242512">11</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p39311242059">uploadPackage</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p189314245514">上传包文件</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row5446153811513"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p194471838653">12</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p11447163812519">getPackageSizeLimit</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p744718381511">获取包的大小限制</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row1760315501059"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p156032509519">13</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p1603250857">addUplink / deleteUplink</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p206043509519">添加 / 删除uplink</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row17565303612"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p165610301866">14</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p35693018617">updateUplink</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p45673013613">更新uplink</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row47981249665"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p197985491764">15</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p137983496616">updateUplinkProxy</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p579813491069">更新Uplink代理</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row557826872"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p18578166673">16</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p49823173716">addUser / delUserByUserId</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p457826776">添加/删除用户</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row1844813173810"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p94481317483">17</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p1244891718816">changePassWord</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p18448517984">改变用户账户密码</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row1691611404813"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p191620401087">18</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p49178401189">resetPassWord</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p69179409820">重置用户账户密码</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row765219534820"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p6652175312813">19</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p56526532812">changeRole</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p2156374912">修改用户角色(管理员和非管理员)</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row20451481194"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p1145119817911">20</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p1645110816915">register</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p13451118192">注册账户</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row82494277917"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p172498271494">21</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p1724918271997">resetKey</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p1624916272093">重置系统密钥</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row477714289315"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p1777202818316">22</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p677732811314">addPackagePermissionOwner/deletePackagePermissionOwner/transferPackagePermissionOwner</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p177774284314">新增/删除/转移包所有者</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row661315331131"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p9614233335">23</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p4614143318318">addPackagePermissionMaintainer/deletePackagePermissionMaintainer</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p12614133315313">新增/删除包维护者</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row10213152815512"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p10213102813513">24</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p1721311286516">addPackagePermissionVisitor/deletePackagePermissionVisitor</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p821312281459">新增/删除包白名单用户</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002510173697__row1769015591755"><td class="cellrowborder" valign="top" width="8.390839083908391%"><p id="ZH-CN_TOPIC_0000002510173697__p10690155920518">25</p> </td> <td class="cellrowborder" valign="top" width="47.6947694769477%"><p id="ZH-CN_TOPIC_0000002510173697__p1469020599510">editPackageReadPolicy</p> </td> <td class="cellrowborder" valign="top" width="43.91439143914391%"><p id="ZH-CN_TOPIC_0000002510173697__p7690559953">编辑包可见性</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217286_运行日志---runlog">运行日志 - run.log<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217286_运行日志---runlog" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510173697__zh-cn_topic_0000001745217286_p1422306048171146">运行日志中主要包含操作时间、日志级别以及日志信息，其文件保存个数最多为30个。运行日志定义了日志级别：all，trace，debug，info，warn，error，fatal，mark和off。</p> <p id="ZH-CN_TOPIC_0000002510173697__p1213614178545"><span><img height="105.08157100000001" originheight="101" originwidth="890" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104721.21267225291842911185227806112305:50001231000000:2800:8BCBD5AE991C8106D0AD922BFB838E1FABE4FD9D98F37C17A616E5E9AF0A6993.png" title="点击放大" width="742.14"></span></p> </div> <div class="tiledSection"><h2 id="section165144485914">运行错误日志 - repoError.log<i class="anchor-icon anchor-icon-link" anchorid="section165144485914" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510173697__p777119447596">当ohpm-repo在运行过程中，所有run.log中生成的error日志都会打印到repoError.log中，是error日志的集合，日志打印级别与run.log日志保持一致。</p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217286_下载错误日志">下载错误日志<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217286_下载错误日志" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510173697__zh-cn_topic_0000001745217286_p58129071171146">当从仓库中下载某个包失败时，仓库会生成一条错误日志记录在数据库中的downloadfailure 表中，当为ohpm-repo配置了sftp存储服务时，从任意一个sftp服务中下载失败时，都会生成一条错误日志并保存。每条日志都有handled标识，handled为0时表示已处理，handled为1时表示未处理。</p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217286_日志存储路径">日志存储路径<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217286_日志存储路径" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510173697__zh-cn_topic_0000001745217286_p1615805208171146">日志存储的默认路径为./logs，相对路径基准为ohpm-repo部署根目录<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-ohpm-repo-configuration#zh-cn_topic_0000001745376470_关于-deploy_root">deploy_root</a>。</p> </div> <div class="tiledSection"><h2 id="zh-cn_topic_0000001745217286_日志打印级别">日志打印级别<i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001745217286_日志打印级别" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510173697__zh-cn_topic_0000001745217286_p646948351171146">在配置文件中可以设置访问、操作、运行日志的打印级别，日志将会只打印不低于设置级别的日志，日志级别由低到高为：all，trace，debug，info，warn，error，fatal，mark和off。</p> <div _ngcontent-opv-c106="" class="highlight-div"><div _ngcontent-opv-c106="" class="highlight-div-header"><div _ngcontent-opv-c106="" class="highlight-div-header-left"><div _ngcontent-opv-c106="" class="handle-button expand-button"><div _ngcontent-opv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-opv-c106="" class="highlight-div-header-right"><div _ngcontent-opv-c106="" class="handle-button ai-button"></div><div _ngcontent-opv-c106="" class="handle-button line-button"><div _ngcontent-opv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-opv-c106="" class="handle-button theme-button"><div _ngcontent-opv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-opv-c106="" class="handle-button copy-button"><div _ngcontent-opv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-opv-c106="" class="highlight-scroll-div"><pre class="yaml prettyprint linenums hljs language-yaml" id="ZH-CN_TOPIC_0000002510173697__zh-cn_topic_0000001745217286_screen1258491446171146" hw-language="yaml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">loglevel_run:</span> <span class="hljs-string">info</span></li><li><span class="hljs-attr">loglevel_operate:</span> <span class="hljs-string">info</span></li><li><span class="hljs-attr">loglevel_access:</span> <span class="hljs-string">info</span></li></ol></pre></div></div> </div> </div> <div></div></div>