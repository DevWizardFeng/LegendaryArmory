<h1 _ngcontent-usg-c119="" class="doc-title ng-star-inserted" title="日程管理"> 日程管理 </h1>

<div _ngcontent-usg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>日程指特定的事件或者活动安排，日程管理即对这些事件、活动进行规划和控制，能更有效地利用相关资源、提高生产力和效率，使人们更好地管理时间和任务。</p>    <p>Calendar Kit中的日程<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-calendarmanager#event" target="_blank">Event</a>归属于某个对应的日历账户<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-calendarmanager#calendar" target="_blank">Calendar</a>，一个日历账户下可以有多个日程，一个日程只属于一个Calendar。</p>    <p>获取到日历账户对象之后，即可对该账户下的日程进行管理，包括日程的创建、删除、修改、查询等操作。在创建、修改日程时，支持对日程的标题、开始时间、结束时间、日程类型、日程地点、日程提醒时间、日程重复规则等相关信息进行设置，以便进行更丰富更有效的日程管理。</p>    <div class="tiledSection">     <h2 id="接口说明">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h2>          <p>以下是日程管理的相关接口，更多详细接口及使用请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-calendarmanager" target="_blank">@ohos.calendarManager</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.3.1.1" valign="top" width="50%">接口名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">getCalendarManager(context: Context): CalendarManager</td>         <td class="cellrowborder" valign="top" width="50%">根据上下文获取CalendarManager对象，用于管理日历。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">createCalendar(calendarAccount: CalendarAccount): Promise&lt;Calendar&gt;</td>         <td class="cellrowborder" valign="top" width="50%">根据日历账户信息，创建一个Calendar对象，使用Promise异步回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">addEvent(event: Event): Promise&lt;number&gt;</td>         <td class="cellrowborder" valign="top" width="50%">创建日程，入参Event不填日程id，使用Promise异步回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">editEvent(event: Event): Promise&lt;number&gt;</td>         <td class="cellrowborder" valign="top" width="50%">通过跳转到日程创建界面创建单个日程，入参Event不填日程id，使用Promise异步回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">deleteEvent(id: number): Promise&lt;void&gt;</td>         <td class="cellrowborder" valign="top" width="50%">删除指定日程id的日程，使用Promise异步回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">updateEvent(event: Event): Promise&lt;void&gt;</td>         <td class="cellrowborder" valign="top" width="50%">更新日程，使用Promise异步回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">getEvents(eventFilter?: EventFilter, eventKey?: (keyof Event)[]): Promise&lt;Event[]&gt;</td>         <td class="cellrowborder" valign="top" width="50%">获取Calendar下符合查询条件的Event，使用Promise异步回调。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>导入相关依赖。</p>       <div _ngcontent-usg-c106="" class="highlight-div"><div _ngcontent-usg-c106="" class="highlight-div-header"><div _ngcontent-usg-c106="" class="highlight-div-header-left"><div _ngcontent-usg-c106="" class="handle-button expand-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usg-c106="" class="highlight-div-header-right"><div _ngcontent-usg-c106="" class="handle-button ai-button"></div><div _ngcontent-usg-c106="" class="handle-button line-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usg-c106="" class="handle-button theme-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usg-c106="" class="handle-button copy-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// entry/src/main/ets/entryability/EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { abilityAccessCtrl, <span class="hljs-title class_">AbilityConstant</span>, common, <span class="hljs-title class_">PermissionRequestResult</span>, <span class="hljs-title class_">Permissions</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { calendarManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CalendarKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li></ol></pre></div></div></li>      <li>       <p>申请权限。使用Calendar Kit时，需要在module.json5中声明申请读写日历日程所需的权限：ohos.permission.READ_CALENDAR和ohos.permission.WRITE_CALENDAR。具体指导可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions">声明权限</a>。</p></li>      <li>       <p>根据上下文获取日程管理器对象calendarMgr，用于对日历账户进行相关管理操作。推荐在EntryAbility.ets文件中进行操作。</p>       <div _ngcontent-usg-c106="" class="highlight-div"><div _ngcontent-usg-c106="" class="highlight-div-header"><div _ngcontent-usg-c106="" class="highlight-div-header-left"><div _ngcontent-usg-c106="" class="handle-button expand-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usg-c106="" class="highlight-div-header-right"><div _ngcontent-usg-c106="" class="handle-button ai-button"></div><div _ngcontent-usg-c106="" class="handle-button line-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usg-c106="" class="handle-button theme-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usg-c106="" class="handle-button copy-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// entry/src/main/ets/entryability/EntryAbility.ets</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> <span class="hljs-attr">calendarMgr</span>: calendarManager.<span class="hljs-property">CalendarManager</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> <span class="hljs-attr">mContext</span>: common.<span class="hljs-property">UIAbilityContext</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Ability onCreate"</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onDestroy</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Ability onDestroy"</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-attr">windowStage</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowStage</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// Main window is created, set main page for this ability</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Ability onWindowStageCreate"</span>);</li><li>    windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load the content. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in loading the content. Data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    });</li><li>    mContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>;</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">permissions</span>: <span class="hljs-title class_">Permissions</span>[] = [<span class="hljs-string">'ohos.permission.READ_CALENDAR'</span>, <span class="hljs-string">'ohos.permission.WRITE_CALENDAR'</span>];</li><li>    <span class="hljs-keyword">let</span> atManager = abilityAccessCtrl.<span class="hljs-title function_">createAtManager</span>();</li><li>    atManager.<span class="hljs-title function_">requestPermissionsFromUser</span>(mContext, permissions).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: PermissionRequestResult</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`get Permission success, result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>      calendarMgr = calendarManager.<span class="hljs-title function_">getCalendarManager</span>(mContext);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`get Permission error, error. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onWindowStageDestroy</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// Main window is destroyed, release UI related resources</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Ability onWindowStageDestroy"</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onForeground</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// Ability has brought to foreground</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Ability onForeground"</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onBackground</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// Ability has back to background</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Ability onBackground"</span>);</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>根据日历账户信息创建Calendar对象，用于进行日程管理。设置日历配置信息，可以根据需要打开日程提醒、设置日历账户颜色。</p>       <div _ngcontent-usg-c106="" class="highlight-div"><div _ngcontent-usg-c106="" class="highlight-div-header"><div _ngcontent-usg-c106="" class="highlight-div-header-left"><div _ngcontent-usg-c106="" class="handle-button expand-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usg-c106="" class="highlight-div-header-right"><div _ngcontent-usg-c106="" class="handle-button ai-button"></div><div _ngcontent-usg-c106="" class="handle-button line-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usg-c106="" class="handle-button theme-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usg-c106="" class="handle-button copy-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { calendarMgr } <span class="hljs-keyword">from</span> <span class="hljs-string">'../entryability/EntryAbility'</span>;</li><li><span class="hljs-keyword">import</span> { calendarManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CalendarKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">calendar</span>: calendarManager.<span class="hljs-property">Calendar</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-comment">// 指定日历账户信息</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">calendarAccount</span>: calendarManager.<span class="hljs-property">CalendarAccount</span> = {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">'MyCalendar'</span>,</li><li>  <span class="hljs-attr">type</span>: calendarManager.<span class="hljs-property">CalendarType</span>.<span class="hljs-property">LOCAL</span>,</li><li>  <span class="hljs-comment">// 日历账户显示名称，该字段如果不填，创建的日历账户在界面显示为空字符串。</span></li><li>  <span class="hljs-attr">displayName</span>: <span class="hljs-string">'MyCalendar'</span></li><li>};</li><li><span class="hljs-comment">// 日历配置信息</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: calendarManager.<span class="hljs-property">CalendarConfig</span> = {</li><li>  <span class="hljs-comment">// 打开日程提醒</span></li><li>  <span class="hljs-attr">enableReminder</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-comment">// 设置日历账户颜色</span></li><li>  <span class="hljs-attr">color</span>: <span class="hljs-string">'#aabbcc'</span></li><li>};</li><li><span class="hljs-comment">// 创建日历账户</span></li><li>calendarMgr?.<span class="hljs-title function_">createCalendar</span>(calendarAccount).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: calendarManager.Calendar</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating calendar data-&gt;<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>  calendar = data;</li><li>  <span class="hljs-comment">// 请确保日历账户创建成功后，再进行相关日程的管理</span></li><li>
</li><li>  <span class="hljs-comment">// 设置日历配置信息，打开日程提醒、设置日历账户颜色</span></li><li>  calendar.<span class="hljs-title function_">setConfig</span>(config).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting config, data-&gt;<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(config)}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set config. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-comment">// ...</span></li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create calendar. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div></li>      <li>       <p>在当前日历账户下添加日历日程，注意入参中不需要填写日程id。</p>       <p>创建日程时，支持设置日程的标题、开始时间、结束时间、日程类型、日程地点、日程提醒时间、日程重复规则等相关信息。</p>       <p>日程创建成功后会返回一个日程id，作为日程的唯一标识，后续可按照日程id进行指定日程的更新或删除。</p>       <p>目前支持以下两种方式来创建日程。</p>       <p>方式一：可以在日历账户下通过addEvent()或addEvents()接口创建日程。其中可使用addEvent()接口创建单个日程，也可以使用addEvents()接口批量创建日程，此处以创建单个日程为例。</p>       <p>方式二：在获取到日历管理器对象后，可通过editEvent()接口创建单个日程。调用此接口创建日程时，会跳转到日程创建页面，在日程创建页面进行相关操作完成日程的创建, editEvent()不支持自定义周期性日程创建。</p>       <div _ngcontent-usg-c106="" class="highlight-div"><div _ngcontent-usg-c106="" class="highlight-div-header"><div _ngcontent-usg-c106="" class="highlight-div-header-left"><div _ngcontent-usg-c106="" class="handle-button expand-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usg-c106="" class="highlight-div-header-right"><div _ngcontent-usg-c106="" class="handle-button ai-button"></div><div _ngcontent-usg-c106="" class="handle-button line-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usg-c106="" class="handle-button theme-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usg-c106="" class="handle-button copy-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-keyword">let</span> eventId : <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">event</span>: calendarManager.<span class="hljs-property">Event</span> = {</li><li>  <span class="hljs-comment">// 日程标题</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'title'</span>,</li><li>  <span class="hljs-comment">// 日程类型，不推荐三方开发者使用calendarManager.EventType.IMPORTANT，重要日程类型不支持一键服务跳转功能及无法自定义提醒时间</span></li><li>  <span class="hljs-attr">type</span>: calendarManager.<span class="hljs-property">EventType</span>.<span class="hljs-property">NORMAL</span>,</li><li>  <span class="hljs-comment">// 日程开始时间</span></li><li>  <span class="hljs-attr">startTime</span>: date.<span class="hljs-title function_">getTime</span>(),</li><li>  <span class="hljs-comment">// 日程结束时间</span></li><li>  <span class="hljs-attr">endTime</span>: date.<span class="hljs-title function_">getTime</span>() + <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>,</li><li>  <span class="hljs-comment">// 距开始时间提前10分钟提醒</span></li><li>  <span class="hljs-attr">reminderTime</span>: [<span class="hljs-number">10</span>],</li><li>  <span class="hljs-comment">// 日程重复规则，可选属性。如果日程为周期性日程需要填写该属性。</span></li><li>  <span class="hljs-attr">recurrenceRule</span>: {</li><li>    <span class="hljs-comment">// 日程重复规则类型，支持按天、按周、按月、按年重复</span></li><li>    <span class="hljs-attr">recurrenceFrequency</span>: calendarManager.<span class="hljs-property">RecurrenceFrequency</span>.<span class="hljs-property">DAILY</span>,</li><li>    <span class="hljs-comment">// 日程重复次数，该字段和expire属性只需要填写一个，如果两个都填写按照count属性计算。</span></li><li>    <span class="hljs-attr">count</span>: <span class="hljs-number">100</span>,</li><li>    <span class="hljs-comment">// 重复日程间隔时间，与recurrenceFrequency相关，此示例表示日程每隔2天进行重复。</span></li><li>    <span class="hljs-attr">interval</span>: <span class="hljs-number">2</span>,</li><li>    <span class="hljs-comment">// 日程过期时间，该字段和count属性只需要填写一个，如果两个都填写按照count属性计算。</span></li><li>    <span class="hljs-attr">expire</span>: date.<span class="hljs-title function_">getTime</span>() + <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span> * <span class="hljs-number">3</span>,</li><li>    <span class="hljs-comment">// 日程排除日期，将该日期从重复日程中排除掉</span></li><li>    <span class="hljs-attr">excludedDates</span>: [date.<span class="hljs-title function_">getTime</span>() + <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span> * <span class="hljs-number">2</span>]</li><li>  },</li><li>  <span class="hljs-comment">// 日程服务，可选字段，需要一键服务功能的日程，填写该属性。</span></li><li>  <span class="hljs-attr">service</span>: {</li><li>    <span class="hljs-comment">// 服务类型，比如一键查看、一键入会、一键追剧等。</span></li><li>    <span class="hljs-attr">type</span>: calendarManager.<span class="hljs-property">ServiceType</span>.<span class="hljs-property">TRIP</span>,</li><li>    <span class="hljs-comment">// 服务的uri。可以跳转到三方应用相应界面，格式为DeepLink。使用DeepLink方式需要在华为HAG云侧进行注册，注册提供的信息为应用包名、应用的服务类型。</span></li><li>    <span class="hljs-comment">// DeepLink包括scheme、host、path以及参数（不包含参数值）</span></li><li>    <span class="hljs-attr">uri</span>: <span class="hljs-string">'xxx://xxx.xxx.com/xxx'</span>,</li><li>    <span class="hljs-comment">// 服务辅助描述信息，可选字段</span></li><li>    <span class="hljs-attr">description</span>: <span class="hljs-string">'一键服务'</span></li><li>  }</li><li>
</li><li>};</li><li><span class="hljs-comment">// 方式一</span></li><li>calendar.<span class="hljs-title function_">addEvent</span>(event).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in adding event, id -&gt; <span class="hljs-subst">${data}</span>`</span>);</li><li>  eventId = data;</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to addEvent. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li><li><span class="hljs-comment">// 方式二</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">eventInfo</span>: calendarManager.<span class="hljs-property">Event</span> = {</li><li>  <span class="hljs-comment">// 日程标题</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'title'</span>,</li><li>  <span class="hljs-comment">// 日程类型</span></li><li>  <span class="hljs-attr">type</span>: calendarManager.<span class="hljs-property">EventType</span>.<span class="hljs-property">NORMAL</span>,</li><li>  <span class="hljs-comment">// 日程开始时间</span></li><li>  <span class="hljs-attr">startTime</span>: date.<span class="hljs-title function_">getTime</span>(),</li><li>  <span class="hljs-comment">// 日程结束时间</span></li><li>  <span class="hljs-attr">endTime</span>: date.<span class="hljs-title function_">getTime</span>() + <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span></li><li>};</li><li>calendarMgr?.<span class="hljs-title function_">editEvent</span>(eventInfo).<span class="hljs-title function_">then</span>((<span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`create Event id = <span class="hljs-subst">${id}</span>`</span>);</li><li>  eventId = id;</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create Event. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div></li>      <li>       <p>按照日程id进行指定日程的更新，更新日程相关信息。</p>       <div _ngcontent-usg-c106="" class="highlight-div"><div _ngcontent-usg-c106="" class="highlight-div-header"><div _ngcontent-usg-c106="" class="highlight-div-header-left"><div _ngcontent-usg-c106="" class="handle-button expand-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usg-c106="" class="highlight-div-header-right"><div _ngcontent-usg-c106="" class="handle-button ai-button"></div><div _ngcontent-usg-c106="" class="handle-button line-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usg-c106="" class="handle-button theme-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usg-c106="" class="handle-button copy-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">updateEvent</span>: calendarManager.<span class="hljs-property">Event</span> = {</li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'updateTitle'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'updateEventTest'</span>,</li><li>  <span class="hljs-attr">type</span>: calendarManager.<span class="hljs-property">EventType</span>.<span class="hljs-property">NORMAL</span>,</li><li>  <span class="hljs-attr">id</span>: eventId,</li><li>  <span class="hljs-attr">startTime</span>: date.<span class="hljs-title function_">getTime</span>(),</li><li>  <span class="hljs-attr">endTime</span>: date.<span class="hljs-title function_">getTime</span>() + <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span></li><li>};</li><li>calendar.<span class="hljs-title function_">updateEvent</span>(updateEvent).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in updating event`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to update event. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div></li>      <li>       <p>查询当前日历账户下的所有日程。由于涉及数据隐私安全，进行了权限管控的应用无法获取其他创建的日程信息。根据不同的查询条件和查询字段，返回不同的查询结果。</p>       <p>当没有查询条件和查询字段时，可查询指定日历账户下的所有日程。</p>       <div _ngcontent-usg-c106="" class="highlight-div"><div _ngcontent-usg-c106="" class="highlight-div-header"><div _ngcontent-usg-c106="" class="highlight-div-header-left"><div _ngcontent-usg-c106="" class="handle-button expand-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usg-c106="" class="highlight-div-header-right"><div _ngcontent-usg-c106="" class="handle-button ai-button"></div><div _ngcontent-usg-c106="" class="handle-button line-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usg-c106="" class="handle-button theme-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usg-c106="" class="handle-button copy-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li>calendar.<span class="hljs-title function_">getEvents</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: calendarManager.Event[]</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting events, data -&gt; <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get events. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>       <p>还支持根据日程id、日程开始和结束时间、日程标题等查询条件来查询日程。</p>       <div _ngcontent-usg-c106="" class="highlight-div"><div _ngcontent-usg-c106="" class="highlight-div-header"><div _ngcontent-usg-c106="" class="highlight-div-header-left"><div _ngcontent-usg-c106="" class="handle-button expand-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usg-c106="" class="highlight-div-header-right"><div _ngcontent-usg-c106="" class="handle-button ai-button"></div><div _ngcontent-usg-c106="" class="handle-button line-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usg-c106="" class="handle-button theme-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usg-c106="" class="handle-button copy-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 根据日程id查询</span></li><li><span class="hljs-keyword">const</span> filterId = calendarManager.<span class="hljs-property">EventFilter</span>.<span class="hljs-title function_">filterById</span>([eventId]);</li><li>calendar.<span class="hljs-title function_">getEvents</span>(filterId).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: calendarManager.Event[]</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting events, data -&gt; <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get events. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li><li>
</li><li><span class="hljs-comment">// 根据日程标题查询</span></li><li><span class="hljs-keyword">const</span> filterTitle = calendarManager.<span class="hljs-property">EventFilter</span>.<span class="hljs-title function_">filterByTitle</span>(<span class="hljs-string">'update'</span>);</li><li>calendar.<span class="hljs-title function_">getEvents</span>(filterTitle).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: calendarManager.Event[]</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting events, data -&gt; <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get events. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li><li>
</li><li><span class="hljs-comment">// 根据日程开始和结束时间查询</span></li><li><span class="hljs-keyword">const</span> filterTime = calendarManager.<span class="hljs-property">EventFilter</span>.<span class="hljs-title function_">filterByTime</span>(<span class="hljs-number">1686931200000</span>, <span class="hljs-number">1687017600000</span>);</li><li>calendar.<span class="hljs-title function_">getEvents</span>(filterTime).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: calendarManager.Event[]</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting events filter by time, data -&gt; <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to filter by time. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div></li>      <li>       <p>按照日程id进行指定日程的删除。可以通过deleteEvent()接口进行单个日程的删除，也可以通过deleteEvents()接口批量删除指定日程，此处以删除单个指定日程为例。</p>       <div _ngcontent-usg-c106="" class="highlight-div"><div _ngcontent-usg-c106="" class="highlight-div-header"><div _ngcontent-usg-c106="" class="highlight-div-header-left"><div _ngcontent-usg-c106="" class="handle-button expand-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-usg-c106="" class="highlight-div-header-right"><div _ngcontent-usg-c106="" class="handle-button ai-button"></div><div _ngcontent-usg-c106="" class="handle-button line-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-usg-c106="" class="handle-button theme-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-usg-c106="" class="handle-button copy-button"><div _ngcontent-usg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-usg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li>calendar.<span class="hljs-title function_">deleteEvent</span>(eventId).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in deleting event"</span>);</li><li> }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete event. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>