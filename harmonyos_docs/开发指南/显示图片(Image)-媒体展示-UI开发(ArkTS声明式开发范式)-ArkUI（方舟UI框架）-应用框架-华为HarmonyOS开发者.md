<h1 _ngcontent-aye-c119="" class="doc-title ng-star-inserted" title="显示图片 (Image)"> 显示图片 (Image) </h1>

<div _ngcontent-aye-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>开发者经常需要在应用中显示一些图片，例如：按钮中的icon、网络图片、本地图片等。在应用中显示图片需要使用Image组件实现，Image支持多种图片格式，包括png、jpg、jpeg、bmp、svg、webp、gif和heif，不支持apng和svga格式，具体用法请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image" target="_blank">Image</a>组件。</p>    <p>Image通过调用接口来创建，接口调用形式如下：</p>    <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Image</span>(<span class="hljs-attr">src</span>: <span class="hljs-title class_">PixelMap</span> | <span class="hljs-title class_">ResourceStr</span> | <span class="hljs-title class_">DrawableDescriptor</span>)</li></ol></pre></div></div>    <p>该接口通过图片数据源获取图片，支持本地图片和网络图片的渲染展示。其中，src是图片的数据源，加载方式请参考<a href="/consumer/cn/doc/harmonyos-guides/arkts-graphics-display#加载图片资源">加载图片资源</a>。</p>    <p>如果图片加载过程中出现白色块，请参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-image-white-lump-solution" target="_blank">Image白块问题解决方案</a>。如果图片加载时间过长，请参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-texture-compression-improve-performance" target="_blank">预置图片资源加载优化</a>。</p>    <div class="tiledSection">     <h2 id="加载图片资源">加载图片资源<i class="anchor-icon anchor-icon-link" anchorid="加载图片资源" tips="复制节点链接"></i></h2>          <p>Image支持加载存档图、多媒体像素图和可绘制描述符三种类型。</p>    </div>    <div class="tiledSection">     <h3 id="存档图类型数据源" class="firsth2">存档图类型数据源<i class="anchor-icon anchor-icon-link" anchorid="存档图类型数据源" tips="复制节点链接"></i></h3>          <p>存档图类型的数据源可以分为本地资源、网络资源、Resource资源、媒体库资源和base64。</p>     <ul>      <li>       <p>本地资源</p>       <p>创建文件夹，将本地图片放入ets文件夹下的任意位置。</p>       <p>Image组件引入本地图片路径，即可显示图片（根目录为ets文件夹）。不支持跨包、跨模块调用该Image组件。</p>       <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Image</span>(<span class="hljs-string">'images/view.jpg'</span>)</li><li>.<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li></ol></pre></div></div>       <p>加载本地图片过程中，如果对图片进行修改或者替换，可能会引起应用崩溃。因此需要覆盖图片文件时，应该先删除该文件再重新创建一个同名文件。</p></li>      <li>       <p>网络资源</p>       <p>引入网络图片需申请权限ohos.permission.INTERNET，具体申请方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions">声明权限</a>。此时，Image组件的src参数为网络图片的链接。</p>       <p>当前Image组件仅支持加载简单网络图片。</p>       <p>Image组件首次加载网络图片时，需要请求网络资源，非首次加载时，默认从缓存中直接读取图片，更多图片缓存设置请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-system-app#setimagecachecount7" target="_blank">setImageCacheCount</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-system-app#setimagerawdatacachesize7" target="_blank">setImageRawDataCacheSize</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-system-app#setimagefilecachesize7" target="_blank">setImageFileCacheSize</a>。但是，这三个图片缓存接口并不灵活，且后续不演进，对于复杂情况，更推荐使用<a href="https://gitcode.com/openharmony-tpc/ImageKnife" target="_blank">ImageKnife</a>。</p>       <p>网络图片必须支持RFC 9113标准，否则会导致加载失败。如果下载的网络图片大于10MB或一次下载的网络图片数量较多，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/http-request">HTTP</a>工具提前下载，提高图片加载性能，方便应用侧管理数据。</p>       <p>在显示网络图片时，Image组件在机制上会依赖<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-request-cachedownload" target="_blank">缓存下载模块</a>，开发者可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image#示例3下载与显示网络gif图片" target="_blank">示例3下载与显示网络gif图片</a>了解具体用法。</p>       <p>缓存下载模块提供独立的预下载接口，允许应用开发者在创建Image组件前预下载所需图片。组件创建后，Image组件可直接从缓存下载模块中获取已下载的图片数据，从而加快图片的显示速度，优化加载体验，并有效避免网络图片加载延迟。网络缓存的位置位于应用根目录下的cache目录中。</p>       <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Image</span>(<span class="hljs-string">'https://www.example.com/example.JPG'</span>) <span class="hljs-comment">// 实际使用时请替换为真实地址</span></li></ol></pre></div></div></li>      <li>       <p>Resource资源</p>       <p>使用资源格式可以跨包/跨模块引入图片，resources文件夹下的图片都可以通过$r资源接口读取到并转换到Resource格式。</p>       <p><strong>图1</strong> resources</p>       <p><span><img originheight="277" originwidth="340" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114752.64030719862329168682631765831637:50001231000000:2800:ACC8A27BDAEDD7F1D97ADC3FFF5E718E452151D63CF4C21F43E19479AB32395A.jpg" width="340" height="277"></span></p>       <p>调用方式：</p>       <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>Image(<span class="hljs-variable">$r</span>(<span class="hljs-string">'app.media.icon'</span>))</li></ol></pre></div></div>       <p>还可以将图片放在rawfile文件夹下。</p>       <p><strong>图2</strong> rawfile</p>       <p><span><img originheight="394" originwidth="334" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114752.38256704852371965991481546623877:50001231000000:2800:0B2A86A2A9ADDE71A12559D39DFA34B6D1EEF08DC0437D70F7A2DE70259463A3.jpg" width="334" height="394"></span></p>       <p>调用方式：</p>       <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>Image(<span class="hljs-variable">$rawfile</span>(<span class="hljs-string">'example1.png'</span>))</li></ol></pre></div></div></li>      <li>       <p>媒体库file://data/storage</p>       <p>支持file://路径前缀的字符串，用于访问通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-picker" target="_blank">选择器</a>提供的图片路径。</p>       <ol>        <li>         <p>调用接口获取图库的照片url。</p>         <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">imgDatas</span>: <span class="hljs-built_in">string</span>[] = [];</li><li>  <span class="hljs-comment">// 获取照片url集</span></li><li>  <span class="hljs-title function_">getAllImg</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">photoSelectOptions</span>:photoAccessHelper.<span class="hljs-property">PhotoSelectOptions</span> = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoSelectOptions</span>();</li><li>      photoSelectOptions.<span class="hljs-property">MIMEType</span> = photoAccessHelper.<span class="hljs-property">PhotoViewMIMETypes</span>.<span class="hljs-property">IMAGE_TYPE</span>;</li><li>      photoSelectOptions.<span class="hljs-property">maxSelectNumber</span> = <span class="hljs-number">5</span>;</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">photoPicker</span>:photoAccessHelper.<span class="hljs-property">PhotoViewPicker</span> = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoViewPicker</span>();</li><li>      photoPicker.<span class="hljs-title function_">select</span>(photoSelectOptions).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">PhotoSelectResult:photoAccessHelper.PhotoSelectResult</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">imgDatas</span> = <span class="hljs-title class_">PhotoSelectResult</span>.<span class="hljs-property">photoUris</span>;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'PhotoViewPicker.select successfully, PhotoSelectResult uri: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title class_">PhotoSelectResult</span>));</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err:<span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">let</span> message = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>        <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`PhotoViewPicker.select failed with. Code: <span class="hljs-subst">${code}</span>, message: <span class="hljs-subst">${message}</span>`</span>);</li><li>      });</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-keyword">let</span> message = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>      <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`PhotoViewPicker failed with. Code: <span class="hljs-subst">${code}</span>, message: <span class="hljs-subst">${message}</span>`</span>);    }</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// aboutToAppear中调用上述函数，获取图库的所有图片url，存在imgDatas中</span></li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAllImg</span>();</li><li>  }</li><li>  <span class="hljs-comment">// 使用imgDatas的url加载图片。</span></li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Grid</span>() {</li><li>        <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imgDatas</span>, <span class="hljs-function">(<span class="hljs-params">item:<span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>          <span class="hljs-title class_">GridItem</span>() {</li><li>            <span class="hljs-title class_">Image</span>(item)</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          }</li><li>        }, (<span class="hljs-attr">item</span>:<span class="hljs-built_in">string</span>):<span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(item))</li><li>      }</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div></li>        <li>         <p>从媒体库获取的url格式通常如下。</p>         <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Image</span>(<span class="hljs-string">'file://media/Photos/5'</span>)</li><li>.<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li></ol></pre></div></div></li>       </ol></li>      <li>       <p>base64</p>       <p>路径格式为data:image/[png|jpeg|bmp|webp|heif];base64,[base64 data]，其中[base64 data]为Base64字符串数据。</p>       <p>Base64格式字符串可用于存储图片的像素数据，在网页上使用较为广泛。</p></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="多媒体像素图">多媒体像素图<i class="anchor-icon anchor-icon-link" anchorid="多媒体像素图" tips="复制节点链接"></i></h3>          <p>PixelMap是图片解码后的像素图，具体用法请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-overview">图片开发指导</a>。以下示例将加载的网络图片返回的数据解码成PixelMap格式，再显示在Image组件上。</p>     <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { http } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NetworkKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">HttpExample</span> {</li><li>  <span class="hljs-attr">outData</span>: http.<span class="hljs-property">HttpResponse</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-attr">code</span>: http.<span class="hljs-property">ResponseCode</span> | <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">image</span>: <span class="hljs-title class_">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">//创建PixelMap状态变量。</span></li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    http.<span class="hljs-title function_">createHttp</span>().<span class="hljs-title function_">request</span>(<span class="hljs-string">'https://www.example.com/xxx.png'</span>, <span class="hljs-comment">//请填写一个具体的网络图片地址。</span></li><li>      <span class="hljs-function">(<span class="hljs-params">error: BusinessError, data: http.HttpResponse</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`hello http request failed with. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">outData</span> = data;</li><li>        <span class="hljs-comment">//将网络地址成功返回的数据，编码转码成pixelMap的图片格式。</span></li><li>        <span class="hljs-keyword">if</span> (http.<span class="hljs-property">ResponseCode</span>.<span class="hljs-property">OK</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">outData</span>.<span class="hljs-property">responseCode</span>) {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">imageData</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">outData</span>.<span class="hljs-property">result</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ArrayBuffer</span>;</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">imageSource</span>: image.<span class="hljs-property">ImageSource</span> = image.<span class="hljs-title function_">createImageSource</span>(imageData);</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: image.<span class="hljs-property">DecodingOptions</span> = {</li><li>            <span class="hljs-string">'desiredPixelFormat'</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>,</li><li>          };</li><li>          imageSource.<span class="hljs-title function_">createPixelMap</span>(options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">pixelMap: PixelMap</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">image</span> = pixelMap;</li><li>          });</li><li>        }</li><li>      })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">//显示图片</span></li><li>      <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">image</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="可绘制描述符">可绘制描述符<i class="anchor-icon anchor-icon-link" anchorid="可绘制描述符" tips="复制节点链接"></i></h3>          <p>DrawableDescriptor是ArkUI提供的一种高级图片抽象机制，它通过将图片资源封装为可编程对象，实现了传统Image组件难以实现的动态组合与运行时控制功能。开发者可利用它实现图片的分层叠加（如徽章图标）、动态属性调整（如颜色滤镜）、复杂动画序列等高级效果，适用于需要灵活控制图片展现或实现复杂视觉交互的场景。详细使用方法，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor" target="_blank">DrawableDescriptor</a>。</p>     <p>通过DrawableDescriptor显示图片及动画的示例如下所示：</p>     <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> {</li><li>  <span class="hljs-title class_">DrawableDescriptor</span>,</li><li>  <span class="hljs-title class_">PixelMapDrawableDescriptor</span>,</li><li>  <span class="hljs-title class_">LayeredDrawableDescriptor</span>,</li><li>  <span class="hljs-title class_">AnimatedDrawableDescriptor</span>,</li><li>  <span class="hljs-title class_">AnimationOptions</span></li><li>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-comment">// 声明DrawableDescriptor对象</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">pixmapDesc</span>: <span class="hljs-title class_">DrawableDescriptor</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">pixelMapDesc</span>: <span class="hljs-title class_">PixelMapDrawableDescriptor</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">layeredDesc</span>: <span class="hljs-title class_">LayeredDrawableDescriptor</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">animatedDesc</span>: <span class="hljs-title class_">AnimatedDrawableDescriptor</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-comment">// 动画配置</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">animationOptions</span>: <span class="hljs-title class_">AnimationOptions</span> = {</li><li>    <span class="hljs-attr">duration</span>: <span class="hljs-number">3000</span>,</li><li>    <span class="hljs-attr">iterations</span>: -<span class="hljs-number">1</span></li><li>  };</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">const</span> resManager = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">resourceManager</span>;</li><li>    <span class="hljs-keyword">if</span> (!resManager) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-comment">// 创建普通DrawableDescriptor</span></li><li>    <span class="hljs-keyword">let</span> pixmapDescResult = resManager.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.landscape'</span>).<span class="hljs-property">id</span>);</li><li>    <span class="hljs-keyword">if</span> (pixmapDescResult) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixmapDesc</span> = pixmapDescResult <span class="hljs-keyword">as</span> <span class="hljs-title class_">DrawableDescriptor</span>;</li><li>    }</li><li>    <span class="hljs-comment">// 创建PixelMapDrawableDescriptor</span></li><li>    <span class="hljs-keyword">const</span> pixelMap = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.landscape'</span>));</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMapDesc</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PixelMapDrawableDescriptor</span>(pixelMap);</li><li>    <span class="hljs-comment">// 创建分层图标</span></li><li>    <span class="hljs-keyword">const</span> foreground = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.foreground'</span>));</li><li>    <span class="hljs-keyword">const</span> background = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.landscape'</span>));</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">layeredDesc</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LayeredDrawableDescriptor</span>(foreground, background);</li><li>    <span class="hljs-comment">// 创建动画图片（需加载多张图片）</span></li><li>    <span class="hljs-keyword">const</span> frame1 = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.sky'</span>));</li><li>    <span class="hljs-keyword">const</span> frame2 = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.landscape'</span>));</li><li>    <span class="hljs-keyword">const</span> frame3 = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.clouds'</span>));</li><li>    <span class="hljs-keyword">if</span> (frame1 &amp;&amp; frame2 &amp;&amp; frame3) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">animatedDesc</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimatedDrawableDescriptor</span>([frame1, frame2, frame3], <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationOptions</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 辅助方法：从资源获取PixelMap</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getPixmapFromMedia</span>(<span class="hljs-attr">resource</span>: <span class="hljs-title class_">Resource</span>): <span class="hljs-title class_">Promise</span>&lt;image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span>&gt; {</li><li>    <span class="hljs-keyword">const</span> unit8Array = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getMediaContent</span>(resource.<span class="hljs-property">id</span>);</li><li>    <span class="hljs-keyword">if</span> (!unit8Array) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;</li><li>    }</li><li>    <span class="hljs-keyword">const</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(unit8Array.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, unit8Array.<span class="hljs-property">buffer</span>.<span class="hljs-property">byteLength</span>));</li><li>    <span class="hljs-keyword">const</span> pixelMap = <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">createPixelMap</span>({</li><li>      <span class="hljs-attr">desiredPixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span></li><li>    });</li><li>    <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">release</span>();</li><li>    <span class="hljs-keyword">return</span> pixelMap;</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 辅助方法：获取DrawableDescriptor</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getDrawableDescriptor</span>(<span class="hljs-attr">resource</span>: <span class="hljs-title class_">Resource</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">DrawableDescriptor</span> | <span class="hljs-literal">undefined</span>&gt; {</li><li>    <span class="hljs-keyword">const</span> resManager = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">resourceManager</span>;</li><li>    <span class="hljs-keyword">if</span> (!resManager) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;</li><li>    }</li><li>    <span class="hljs-keyword">return</span> (resManager.<span class="hljs-title function_">getDrawableDescriptor</span>(resource.<span class="hljs-property">id</span>)) <span class="hljs-keyword">as</span> <span class="hljs-title class_">DrawableDescriptor</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">RelativeContainer</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>
</li><li>        <span class="hljs-comment">// 显示普通图片</span></li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pixmapDesc</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span> })</li><li>        <span class="hljs-comment">// 显示PixelMap图片</span></li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMapDesc</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span> })</li><li>        <span class="hljs-comment">// 显示分层图标</span></li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">layeredDesc</span>) {</li><li>          <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">layeredDesc</span>)</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>            .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span> })</li><li>        }</li><li>        <span class="hljs-comment">// 显示动画图片</span></li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">animatedDesc</span>) {</li><li>          <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animatedDesc</span>)</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>            .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">20</span> })</li><li>        }</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-number">50</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="481" originwidth="250" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114752.91581842050950307350026606079653:50001231000000:2800:D2D92AA937BAF79B85619230EC055FA3B875273322526B1E4A0FC7B90B6ABE28.gif" class="notEnlarge" width="250" height="481"></span></p>    </div>    <div class="tiledSection">     <h2 id="显示矢量图">显示矢量图<i class="anchor-icon anchor-icon-link" anchorid="显示矢量图" tips="复制节点链接"></i></h2>          <p>Image组件可显示矢量图（SVG格式的图片），SVG标签文档请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-svg" target="_blank">SVG标签说明</a>。</p>     <p>如果SVG图片没有原始大小，需要给Image组件设置宽高，否则不显示。SVG图片不支持通过image标签引用SVG格式和gif格式的本地其他图片。</p>     <p>SVG格式的图片可以使用fillColor属性改变图片的绘制颜色。</p>     <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.cloud'</span>))</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">50</span>)</li><li>  .<span class="hljs-title function_">fillColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>)</li></ol></pre></div></div>     <p><strong>图3</strong> 原始图片</p>     <p><span><img originheight="104" originwidth="89" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114752.18946914981366500163799008022092:50001231000000:2800:EF06AFA580CE337E24109F1133A5FEE06A2176FA4C7740A6018F0B261291C0E1.png" class="notEnlarge" width="89" height="104"></span></p>     <p><strong>图4</strong> 设置绘制颜色后的SVG图片</p>     <p><span><img originheight="80" originwidth="83" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114752.83336283924868564692099779333648:50001231000000:2800:0CDE38BA5E41389A64095238D3043187162C14DB8BA6D6C19630E6204CD621A6.png" class="notEnlarge" width="83" height="80"></span></p>    </div>    <div class="tiledSection">     <h3 id="矢量图引用位图" class="firsth2">矢量图引用位图<i class="anchor-icon anchor-icon-link" anchorid="矢量图引用位图" tips="复制节点链接"></i></h3>          <p>如果Image加载的SVG图源中包含对本地位图的引用，则SVG图源的路径应当设置为以ets为根目录的工程路径，同时，本地位图的路径应设置为与SVG图源同级的相对路径。</p>     <p>Image加载的SVG图源路径设置方法如下所示：</p>     <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Image</span>(<span class="hljs-string">"images/icon.svg"</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">50</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li></ol></pre></div></div>     <p>SVG图源通过&lt;image&gt;标签的xlink:href属性指定本地位图路径，本地位图路径设置为跟SVG图源同级的相对路径：</p>     <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-php-template" data-highlighted="yes"><ol class="linenums"><li><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"200"</span>&gt;</span></span></li><li><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">xlink:href</span>=<span class="hljs-string">"sky.png"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span></span></li><li><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span></span></li></ol></pre></div></div>     <p>文件工程路径示例如图：</p>     <p><span><img originheight="178" originwidth="297" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114752.38375483672670565505132307875531:50001231000000:2800:491B6CEC1E59BEE9A59EFB100B4C9F1BA3527082567E82BACB84C7BBDEB1F138.png" class="notEnlarge" width="297" height="178"></span></p>    </div>    <div class="tiledSection">     <h2 id="添加属性">添加属性<i class="anchor-icon anchor-icon-link" anchorid="添加属性" tips="复制节点链接"></i></h2>          <p>给Image组件设置属性可以使图片显示更灵活，达到一些自定义的效果。以下是几个常用属性的使用示例，完整属性信息详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image" target="_blank">Image</a>。</p>    </div>    <div class="tiledSection">     <h3 id="设置图片缩放类型" class="firsth2">设置图片缩放类型<i class="anchor-icon anchor-icon-link" anchorid="设置图片缩放类型" tips="复制节点链接"></i></h3>          <p>通过设置objectFit属性，可以使图片在高度和宽度确定的框内进行缩放。</p>     <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">MyComponent</span> {</li><li>  <span class="hljs-attr">scroller</span>: <span class="hljs-title class_">Scroller</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scroller</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Scroll</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">scroller</span>) {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Row</span>() {</li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img_2'</span>))</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">150</span>)</li><li>            .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>              <span class="hljs-comment">// 保持宽高比进行缩小或者放大，使得图片完全显示在显示边界内。</span></li><li>            .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>            .<span class="hljs-title function_">margin</span>(<span class="hljs-number">15</span>)</li><li>            .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">'Contain'</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> } })</li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.ic_img_2'</span>))</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">150</span>)</li><li>            .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>              <span class="hljs-comment">// 保持宽高比进行缩小或者放大，使得图片两边都大于或等于显示边界。</span></li><li>            .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Cover</span>)</li><li>            .<span class="hljs-title function_">margin</span>(<span class="hljs-number">15</span>)</li><li>            .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">'Cover'</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> } })</li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img_2'</span>))</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">150</span>)</li><li>            .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>              <span class="hljs-comment">// 自适应显示。</span></li><li>            .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Auto</span>)</li><li>            .<span class="hljs-title function_">margin</span>(<span class="hljs-number">15</span>)</li><li>            .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">'Auto'</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> } })</li><li>        }</li><li>
</li><li>        <span class="hljs-title class_">Row</span>() {</li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img_2'</span>))</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">150</span>)</li><li>            .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>              <span class="hljs-comment">// 不保持宽高比进行放大缩小，使得图片充满显示边界。</span></li><li>            .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Fill</span>)</li><li>            .<span class="hljs-title function_">margin</span>(<span class="hljs-number">15</span>)</li><li>            .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">'Fill'</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> } })</li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img_2'</span>))</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">150</span>)</li><li>            .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>              <span class="hljs-comment">// 保持宽高比显示，图片缩小或者保持不变。</span></li><li>            .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">ScaleDown</span>)</li><li>            .<span class="hljs-title function_">margin</span>(<span class="hljs-number">15</span>)</li><li>            .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">'ScaleDown'</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> } })</li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.img_2'</span>))</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">150</span>)</li><li>            .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>              <span class="hljs-comment">// 保持原有尺寸显示。</span></li><li>            .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">None</span>)</li><li>            .<span class="hljs-title function_">margin</span>(<span class="hljs-number">15</span>)</li><li>            .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">'None'</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> } })</li><li>        }</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="399" originwidth="758" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114752.97929516840034993913390112453069:50001231000000:2800:1BB34C884F21BADDA44F1C6D66E9438DC08676895C0629B009FEEF68B44DCBE9.png" width="758" height="399"></span></p>    </div>    <div class="tiledSection">     <h3 id="图片插值">图片插值<i class="anchor-icon anchor-icon-link" anchorid="图片插值" tips="复制节点链接"></i></h3>          <p>当原图分辨率较低并放大显示时，图片会变得模糊并出现锯齿。这时可以使用interpolation属性对图片进行插值，以提高显示清晰度。</p>     <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.grass'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'40%'</span>)</li><li>          .<span class="hljs-title function_">interpolation</span>(<span class="hljs-title class_">ImageInterpolation</span>.<span class="hljs-property">None</span>)</li><li>          .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>          .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">"Interpolation.None"</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> } })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.grass'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'40%'</span>)</li><li>          .<span class="hljs-title function_">interpolation</span>(<span class="hljs-title class_">ImageInterpolation</span>.<span class="hljs-property">Low</span>)</li><li>          .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>          .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">"Interpolation.Low"</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> } })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>
</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.grass'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'40%'</span>)</li><li>          .<span class="hljs-title function_">interpolation</span>(<span class="hljs-title class_">ImageInterpolation</span>.<span class="hljs-property">Medium</span>)</li><li>          .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>          .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">"Interpolation.Medium"</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> } })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.grass'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'40%'</span>)</li><li>          .<span class="hljs-title function_">interpolation</span>(<span class="hljs-title class_">ImageInterpolation</span>.<span class="hljs-property">High</span>)</li><li>          .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>          .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">"Interpolation.High"</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> } })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="358" originwidth="351" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114752.39369657053864037458370605016724:50001231000000:2800:333389710EC94C49D1FBBA0B104BFCFCCE3AC90F448B688D8745D6AFB8E2DA1A.png" width="351" height="358"></span></p>    </div>    <div class="tiledSection">     <h3 id="设置图片重复样式">设置图片重复样式<i class="anchor-icon anchor-icon-link" anchorid="设置图片重复样式" tips="复制节点链接"></i></h3>          <p>通过objectRepeat属性设置图片的重复样式方式，重复样式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#imagerepeat" target="_blank">ImageRepeat</a>枚举说明。</p>     <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">MyComponent</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {</li><li>      <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.ic_public_favor_filled_1'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">110</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">115</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">objectRepeat</span>(<span class="hljs-title class_">ImageRepeat</span>.<span class="hljs-property">XY</span>)</li><li>          .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">ScaleDown</span>)</li><li>          <span class="hljs-comment">// 在水平轴和竖直轴上同时重复绘制图片</span></li><li>          .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">'ImageRepeat.XY'</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> } })</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.ic_public_favor_filled_1'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">110</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">115</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">objectRepeat</span>(<span class="hljs-title class_">ImageRepeat</span>.<span class="hljs-property">Y</span>)</li><li>          .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">ScaleDown</span>)</li><li>          <span class="hljs-comment">// 只在竖直轴上重复绘制图片</span></li><li>          .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">'ImageRepeat.Y'</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> } })</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.ic_public_favor_filled_1'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">110</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">115</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">objectRepeat</span>(<span class="hljs-title class_">ImageRepeat</span>.<span class="hljs-property">X</span>)</li><li>          .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">ScaleDown</span>)</li><li>          <span class="hljs-comment">// 只在水平轴上重复绘制图片</span></li><li>          .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">'ImageRepeat.X'</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> } })</li><li>      }</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-number">150</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">8</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="205" originwidth="493" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114752.52567376483534967149501101487904:50001231000000:2800:3E7CD36BF490F9BB5761320E6131580FF3735D164E2FDC99BB04ACBD5106599F.png" width="493" height="205"></span></p>    </div>    <div class="tiledSection">     <h3 id="设置图片渲染模式">设置图片渲染模式<i class="anchor-icon anchor-icon-link" anchorid="设置图片渲染模式" tips="复制节点链接"></i></h3>          <p>通过renderMode属性设置图片的渲染模式为原色或黑白。</p>     <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">MyComponent</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {</li><li>      <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">50</span> }) {</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.example'</span>))</li><li>          <span class="hljs-comment">// 设置图片的渲染模式为原色</span></li><li>          .<span class="hljs-title function_">renderMode</span>(<span class="hljs-title class_">ImageRenderMode</span>.<span class="hljs-property">Original</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>            <span class="hljs-comment">// overlay是通用属性，用于在组件上显示说明文字</span></li><li>          .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">'Original'</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> } })</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.example'</span>))</li><li>          <span class="hljs-comment">// 设置图片的渲染模式为黑白</span></li><li>          .<span class="hljs-title function_">renderMode</span>(<span class="hljs-title class_">ImageRenderMode</span>.<span class="hljs-property">Template</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">'Template'</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> } })</li><li>      }</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-number">150</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">20</span>,<span class="hljs-attr">right</span>: <span class="hljs-number">10</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="154" originwidth="311" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114752.84526502350531161248676759968018:50001231000000:2800:D4AC796DD7FFCF4D55316F2A54DD8FB781A4E874F80DDE5A7CE3A864B5F6072D.png" width="311" height="154"></span></p>    </div>    <div class="tiledSection">     <h3 id="设置图片解码尺寸">设置图片解码尺寸<i class="anchor-icon anchor-icon-link" anchorid="设置图片解码尺寸" tips="复制节点链接"></i></h3>          <p>通过sourceSize属性设置图片解码尺寸，降低图片的分辨率。</p>     <p>原图尺寸为1280×960，该示例将图片解码为40×40和90×90两个尺寸。</p>     <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">50</span> }) {</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.example'</span>))</li><li>          .<span class="hljs-title function_">sourceSize</span>({</li><li>            <span class="hljs-attr">width</span>: <span class="hljs-number">40</span>,</li><li>            <span class="hljs-attr">height</span>: <span class="hljs-number">40</span></li><li>          })</li><li>          .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">ScaleDown</span>)</li><li>          .<span class="hljs-title function_">aspectRatio</span>(<span class="hljs-number">1</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'25%'</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">'width:40 height:40'</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">40</span> } })</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.example'</span>))</li><li>          .<span class="hljs-title function_">sourceSize</span>({</li><li>            <span class="hljs-attr">width</span>: <span class="hljs-number">90</span>,</li><li>            <span class="hljs-attr">height</span>: <span class="hljs-number">90</span></li><li>          })</li><li>          .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">ScaleDown</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'25%'</span>)</li><li>          .<span class="hljs-title function_">aspectRatio</span>(<span class="hljs-number">1</span>)</li><li>          .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">'width:90 height:90'</span>, { <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">40</span> } })</li><li>      }.<span class="hljs-title function_">height</span>(<span class="hljs-number">150</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">20</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="204" originwidth="277" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114752.51471801351434231139402960098033:50001231000000:2800:101C24A8D1C848A7F716CB8F4C1FA4F56B1B116F6EA9A86A0148A7A9F553C4DD.png" class="notEnlarge" width="277" height="204"></span></p>    </div>    <div class="tiledSection">     <h3 id="为图片添加滤镜效果">为图片添加滤镜效果<i class="anchor-icon anchor-icon-link" anchorid="为图片添加滤镜效果" tips="复制节点链接"></i></h3>          <p>通过colorFilter调整图片的像素颜色，为图片添加滤镜。</p>     <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.example'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'40%'</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.example'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'40%'</span>)</li><li>          .<span class="hljs-title function_">colorFilter</span>(</li><li>            [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,</li><li>             <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,</li><li>             <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,</li><li>             <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>])</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="166" originwidth="444" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114752.65907570428452302818528529590060:50001231000000:2800:680110ED002797056329C5B84C57823E2B5D4C23B8563FC81B17386D4ADD9925.png" width="444" height="166"></span></p>    </div>    <div class="tiledSection">     <h3 id="同步加载图片">同步加载图片<i class="anchor-icon anchor-icon-link" anchorid="同步加载图片" tips="复制节点链接"></i></h3>          <p>一般情况下，图片加载流程会异步进行，以避免阻塞主线程，影响UI交互。但是特定情况下，图片刷新时会出现闪烁，这时可以使用syncLoad属性，使图片同步加载，从而避免出现闪烁。不建议图片加载较长时间时使用，会导致页面无法响应。</p>     <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.icon'</span>))</li><li>  .<span class="hljs-title function_">syncLoad</span>(<span class="hljs-literal">true</span>)</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="事件调用">事件调用<i class="anchor-icon anchor-icon-link" anchorid="事件调用" tips="复制节点链接"></i></h2>          <p>通过在Image组件上绑定onComplete事件，图片加载成功后可以获取图片的必要信息。如果图片加载失败，也可以通过绑定onError回调来获得结果。</p>     <div _ngcontent-aye-c106="" class="highlight-div"><div _ngcontent-aye-c106="" class="highlight-div-header"><div _ngcontent-aye-c106="" class="highlight-div-header-left"><div _ngcontent-aye-c106="" class="handle-button expand-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aye-c106="" class="highlight-div-header-right"><div _ngcontent-aye-c106="" class="handle-button ai-button"></div><div _ngcontent-aye-c106="" class="handle-button line-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aye-c106="" class="handle-button theme-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aye-c106="" class="handle-button copy-button"><div _ngcontent-aye-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aye-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">MyComponent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">widthValue</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">heightValue</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">componentWidth</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">componentHeight</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.ic_img_2'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">150</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">15</span>)</li><li>          .<span class="hljs-title function_">onComplete</span>(<span class="hljs-function"><span class="hljs-params">msg</span> =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span>(msg){</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">widthValue</span> = msg.<span class="hljs-property">width</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">heightValue</span> = msg.<span class="hljs-property">height</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">componentWidth</span> = msg.<span class="hljs-property">componentWidth</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">componentHeight</span> = msg.<span class="hljs-property">componentHeight</span>;</li><li>            }</li><li>          })</li><li>            <span class="hljs-comment">// 图片获取失败，打印结果</span></li><li>          .<span class="hljs-title function_">onError</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'load image fail'</span>)</li><li>          })</li><li>          .<span class="hljs-title function_">overlay</span>(<span class="hljs-string">'\nwidth: '</span> + <span class="hljs-title class_">String</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">widthValue</span>) + <span class="hljs-string">', height: '</span> + <span class="hljs-title class_">String</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">heightValue</span>) + <span class="hljs-string">'\ncomponentWidth: '</span> + <span class="hljs-title class_">String</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">componentWidth</span>) + <span class="hljs-string">'\ncomponentHeight: '</span> + <span class="hljs-title class_">String</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">componentHeight</span>), {</li><li>            <span class="hljs-attr">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span>,</li><li>            <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">60</span> }</li><li>          })</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="256" originwidth="253" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114752.96382410840283057091630448357386:50001231000000:2800:492E476E8C72CCFEAD0E24C2F4EADA95E85BD40D23984FDB4FDA91215F07DFAE.png" class="notEnlarge" width="253" height="256"></span></p>    </div>   </div>   <div></div></div>