<h1 _ngcontent-krn-c119="" class="doc-title ng-star-inserted" title="来电场景"> 来电场景 </h1>

<div _ngcontent-krn-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section1039211196515">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section1039211196515" tips="复制节点链接"></i></h2>          <p>应用接收到来自网络的音/视频通话，称为来电场景。</p>     <p>来电场景的效果图展示如下：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p><strong>语音来电</strong></p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p><strong>视频来电</strong></p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p><strong>视频来电（不支持语音接听</strong>）</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p><span><img height="494.30607100000003" originheight="1043" originwidth="499" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114510.07002379409093671671984552200957:50001231000000:2800:339B4AA96DB915F85FEB8B0CD8283FBA9A52F995CF55958A77D9D63D1D84AC54.jpg" title="点击放大" width="240.3975"></span></p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p><span><img height="493.75252500000005" originheight="1042" originwidth="503" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114510.96440043624226533522337011322339:50001231000000:2800:9FE49F8432D4FD8CF31CA45698614DABF13F7A469CE6B8831BC81DB9EA184AC7.jpg" title="点击放大" width="242.3925"></span></p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p><span><img height="497.019404" originheight="1042" originwidth="504" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114510.16017327785690642390275309759017:50001231000000:2800:98A90486C1D96D9DFF40666F36D55A36C516F3B84ED83824E7D11BD9DF671032.jpg" title="点击放大" width="240.3975"></span></p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p><strong>通话中</strong></p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p><strong>锁屏语音来电</strong></p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p><strong>锁屏视频来电</strong></p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p><span><img height="497.986846" originheight="1044" originwidth="504" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114510.17259380448737294162483176294026:50001231000000:2800:89792E500104DE939ECDB6293590163E80BB80B99C3A089C1608B0C5015297C2.jpg" title="点击放大" width="240.3975"></span></p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p><span><img height="501.091066" originheight="1044" originwidth="505" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114510.45167774803958044082393879126625:50001231000000:2800:F063044B73328374D979360423214483C288499AF4BBC0F6CE45D1E7D79F7B84.jpg" title="点击放大" width="242.3925"></span></p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p><span><img height="501.10609500000004" originheight="1044" originwidth="505" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114510.72387182412943682290240226407473:50001231000000:2800:00EC9E587110B19B538F612B16BC2BF589A1144798B6D26DB38AC6B27B16E4B2.jpg" title="点击放大" width="242.3925"></span></p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section142115413812">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="section142115413812" tips="复制节点链接"></i></h2>          <p>来电场景支持Phone、Tablet设备，并从6.0(20)版本开始支持Wearable设备。</p>    </div>    <div class="tiledSection">     <h2 id="section4993253124210">业务流程<i class="anchor-icon anchor-icon-link" anchorid="section4993253124210" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section56218281922" class="firsth2">来电场景：接听流程图<i class="anchor-icon anchor-icon-link" anchorid="section56218281922" tips="复制节点链接"></i></h3>          <p><span><img height="586.5300000000001" originheight="1050" originwidth="936" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114511.97980551938131842461659360148245:50001231000000:2800:58BF856BBDA0713512AD95E23FCF6C10BF52A59AD3DFE85585E32EE8190165EC.jpg" title="点击放大" width="523.6875"></span></p>    </div>    <div class="tiledSection">     <h3 id="section1272645717211">来电场景：拒接流程图<i class="anchor-icon anchor-icon-link" anchorid="section1272645717211" tips="复制节点链接"></i></h3>          <p><span><img height="450.87" originheight="955" originwidth="1107" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114511.24450558653471660808939690702660:50001231000000:2800:A5A6919D0D290D754202257A2E01287ED932834351FD8EB1F345B4384337E36B.jpg" title="点击放大" width="523.6875"></span></p>    </div>    <div class="tiledSection">     <h2 id="section139815425217">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section139815425217" tips="复制节点链接"></i></h2>          <p>来电场景的接口，由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/call-voipcall" target="_blank">voipCall</a>提供。更多接口信息详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/call-voipcall" target="_blank">接口文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.3.1.1" valign="top" width="50%">          <p>接口名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.3.1.2" valign="top" width="50%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">          <p>on(type: 'voipCallUiEvent', callback: Callback&lt;VoipCallUiEventInfo&gt;): void</p></td>         <td class="cellrowborder" valign="top" width="50%">          <p>订阅voipCallUiEvent事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">          <p>off(type: 'voipCallUiEvent', callback?: Callback&lt;VoipCallUiEventInfo&gt;): void</p></td>         <td class="cellrowborder" valign="top" width="50%">          <p>取消订阅voipCallUiEvent事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">          <p>reportIncomingCall(voipCallAttribute: VoipCallAttribute): Promise&lt;ErrorReason&gt;</p></td>         <td class="cellrowborder" valign="top" width="50%">          <p>上报来电。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">          <p>reportCallAudioEventChange(callId: string, callAudioEvent: CallAudioEvent): Promise&lt;void&gt;</p></td>         <td class="cellrowborder" valign="top" width="50%">          <p>上报音频事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">          <p>reportCallStateChange(callId: string, callState: VoipCallState): Promise&lt;void&gt;</p></td>         <td class="cellrowborder" valign="top" width="50%">          <p>上报通话状态改变。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">          <p>reportCallStateChange(callId: string, callState: VoipCallState, callType: VoipCallType): Promise&lt;void&gt;</p></td>         <td class="cellrowborder" valign="top" width="50%">          <p>上报通话状态改变，并指定通话类型。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="typescript" id="section18854185045813">     <a name="section18854185045813"></a><a name="section18854185045813"></a>     <h4>开发步骤</h4>     <ol>      <li><span>导入相关依赖。</span>       <p></p>       <div _ngcontent-krn-c106="" class="highlight-div"><div _ngcontent-krn-c106="" class="highlight-div-header"><div _ngcontent-krn-c106="" class="highlight-div-header-left"><div _ngcontent-krn-c106="" class="handle-button expand-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krn-c106="" class="highlight-div-header-right"><div _ngcontent-krn-c106="" class="handle-button ai-button"></div><div _ngcontent-krn-c106="" class="handle-button line-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krn-c106="" class="handle-button theme-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krn-c106="" class="handle-button copy-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">voipCall </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.CallServiceKit'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">image </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.ImageKit'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.PerformanceAnalysisKit'</span></span><span class="">;</span></li></ol></pre></div></div>       <p></p></li>      <li><span>为了感知到用户在横幅通知上做的接听、挂断、静音与解除静音等操作，应用需要注册voipCallUiEvent事件。建议在上报来电之前注册。</span>       <p></p>       <p>示例代码如下：</p>       <div _ngcontent-krn-c106="" class="highlight-div"><div _ngcontent-krn-c106="" class="highlight-div-header"><div _ngcontent-krn-c106="" class="highlight-div-header-left"><div _ngcontent-krn-c106="" class="handle-button expand-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krn-c106="" class="highlight-div-header-right"><div _ngcontent-krn-c106="" class="handle-button ai-button"></div><div _ngcontent-krn-c106="" class="handle-button line-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krn-c106="" class="handle-button theme-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krn-c106="" class="handle-button copy-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册</span></span><span class=""><span class="hljs-comment">voipCallUiEvent</span></span><span class=""><span class="hljs-comment">事件</span></span></li><li><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-title function_">on</span></span><span class="">(</span><span class=""><span class="hljs-string">'voipCallUiEvent'</span></span><span class="">, </span><span class=""><span class="hljs-function"><span class="hljs-params">callback</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'CallDemo'</span></span><span class="">, </span><span class=""><span class="hljs-string">'Succeeded in registering voipCallUiEvent'</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div>       <p></p></li>      <li><span>应用内部建立通话连接之后，需要向Call Service Kit上报来电，并携带通话信息，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/call-voipcall#section4221135015444" target="_blank">VoipCallAttribute</a>。</span>       <p></p>       <p>如果当时应用在后台，系统会展示来电横幅。</p>       <p>示例代码如下：</p>       <div _ngcontent-krn-c106="" class="highlight-div"><div _ngcontent-krn-c106="" class="highlight-div-header"><div _ngcontent-krn-c106="" class="highlight-div-header-left"><div _ngcontent-krn-c106="" class="handle-button expand-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krn-c106="" class="highlight-div-header-right"><div _ngcontent-krn-c106="" class="handle-button ai-button"></div><div _ngcontent-krn-c106="" class="handle-button line-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krn-c106="" class="handle-button theme-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krn-c106="" class="handle-button copy-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// 构造上报来电的参数</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">voipCallAttribute</span></span><span class="">: </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallAttribute</span> </span><span class="">= </span><span class="">{</span></li><li>  <span class=""><span class="hljs-attr">callId</span></span><span class="">: </span><span class=""><span class="hljs-string">'1234567890'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">voipCallType</span></span><span class="">: </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallType</span></span><span class="">.</span><span class=""><span class="hljs-property">VOIP_CALL_VOICE</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">userName</span></span><span class="">: </span><span class=""><span class="hljs-string">'Callman'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">userProfile</span></span><span class="">: </span><span class="">image</span><span class="">.</span><span class=""><span class="hljs-title function_">createPixelMapSync</span></span><span class="">(</span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">ArrayBuffer</span></span><span class="">(</span><span class=""><span class="hljs-number">100</span></span><span class="">)</span><span class="">, </span><span class="">{ </span><span class=""><span class="hljs-attr">size</span></span><span class="">: </span><span class="">{ </span><span class=""><span class="hljs-attr">width</span></span><span class="">: </span><span class=""><span class="hljs-number">90</span></span><span class="">, </span><span class=""><span class="hljs-attr">height</span></span><span class="">: </span><span class=""><span class="hljs-number">90</span> </span><span class="">} }</span><span class="">)</span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">abilityName</span></span><span class="">: </span><span class=""><span class="hljs-string">'VoipCallAbility'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">voipCallState</span></span><span class="">: </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallState</span></span><span class="">.</span><span class=""><span class="hljs-property">VOIP_CALL_STATE_RINGING</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">showBannerForIncomingCall</span></span><span class="">: </span><span class="hljs-literal">true</span></li><li><span class="">}</span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// 上报来电</span></span></li><li><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-title function_">reportIncomingCall</span></span><span class="">(</span><span class="">voipCallAttribute</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">errorReason</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-keyword">if</span> <span class="">(</span><span class="">errorReason </span><span class="">== </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">ErrorReason</span></span><span class="">.</span><span class=""><span class="hljs-property">ERROR_NONE</span></span><span class="">) </span><span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'CallDemo'</span></span><span class="">, </span><span class=""><span class="hljs-string">'Succeeded in reporting the incoming call'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">} </span><span class="hljs-keyword">else</span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'CallDemo'</span></span><span class="">, </span><span class=""><span class="hljs-string">'Failed to report the incoming call: %{public}d'</span></span><span class="">, </span><span class="">errorReason</span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div>       <p>对于视频通话，可以通过参数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/call-voipcall#section4221135015444" target="_blank">isVoiceAnswerSupported</a>指定是否允许语音接听，示例代码如下：</p>       <div _ngcontent-krn-c106="" class="highlight-div"><div _ngcontent-krn-c106="" class="highlight-div-header"><div _ngcontent-krn-c106="" class="highlight-div-header-left"><div _ngcontent-krn-c106="" class="handle-button expand-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krn-c106="" class="highlight-div-header-right"><div _ngcontent-krn-c106="" class="handle-button ai-button"></div><div _ngcontent-krn-c106="" class="handle-button line-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krn-c106="" class="handle-button theme-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krn-c106="" class="handle-button copy-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// 构造上报来电的参数</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">voipCallAttribute</span></span><span class="">: </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallAttribute</span> </span><span class="">= </span><span class="">{</span></li><li>  <span class=""><span class="hljs-attr">callId</span></span><span class="">: </span><span class=""><span class="hljs-string">'1234567890'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">voipCallType</span></span><span class="">: </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallType</span></span><span class="">.</span><span class=""><span class="hljs-property">VOIP_CALL_VIDEO</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">userName</span></span><span class="">: </span><span class=""><span class="hljs-string">'Jack'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">userProfile</span></span><span class="">: </span><span class="">image</span><span class="">.</span><span class=""><span class="hljs-title function_">createPixelMapSync</span></span><span class="">(</span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">ArrayBuffer</span></span><span class="">(</span><span class=""><span class="hljs-number">100</span></span><span class="">)</span><span class="">, </span><span class="">{ </span><span class=""><span class="hljs-attr">size</span></span><span class="">: </span><span class="">{ </span><span class=""><span class="hljs-attr">width</span></span><span class="">: </span><span class=""><span class="hljs-number">90</span></span><span class="">, </span><span class=""><span class="hljs-attr">height</span></span><span class="">: </span><span class=""><span class="hljs-number">90</span> </span><span class="">} }</span><span class="">)</span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">abilityName</span></span><span class="">: </span><span class=""><span class="hljs-string">'VoipCallAbility'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">voipCallState</span></span><span class="">: </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallState</span></span><span class="">.</span><span class=""><span class="hljs-property">VOIP_CALL_STATE_RINGING</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">showBannerForIncomingCall</span></span><span class="">: </span><span class="hljs-literal">true</span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">isVoiceAnswerSupported</span></span><span class="">: </span><span class="hljs-literal">false</span>  <span class="hljs-comment">// 视频通话不支持语音接听</span></li><li><span class="">}</span><span class="">;</span></li></ol></pre></div></div>       <p></p></li>      <li><span>接收到来电之后，用户可以选择接听或拒接。</span>       <p></p>       <div class="p">        接听有两种开发方式：上报两次状态、只上报一次状态。        <ul>         <li>上报两次状态（推荐）。          <p>以语音通话为例，应用在接收到<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/call-voipcall#section26961727970" target="_blank">VOIP_CALL_EVENT_VOICE_ANSWER</a>事件回调之后，立即向Call Service Kit上报<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/call-voipcall#section24523814719" target="_blank">VOIP_CALL_STATE_ANSWERED</a>状态，并同时执行应用内接听。</p>          <p>在完成应用内接听之后，再向Call Service Kit上报<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/call-voipcall#section24523814719" target="_blank">VOIP_CALL_STATE_ACTIVE</a>状态，系统会更新通话横幅。</p>          <p>示例代码如下：</p>          <div _ngcontent-krn-c106="" class="highlight-div"><div _ngcontent-krn-c106="" class="highlight-div-header"><div _ngcontent-krn-c106="" class="highlight-div-header-left"><div _ngcontent-krn-c106="" class="handle-button expand-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krn-c106="" class="highlight-div-header-right"><div _ngcontent-krn-c106="" class="handle-button ai-button"></div><div _ngcontent-krn-c106="" class="handle-button line-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krn-c106="" class="handle-button theme-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krn-c106="" class="handle-button copy-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-title function_">on</span></span><span class="">(</span><span class=""><span class="hljs-string">'voipCallUiEvent'</span></span><span class="">, </span><span class=""><span class="hljs-function"><span class="hljs-params">callback</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-keyword">if</span> <span class="">(</span><span class="">callback</span><span class="">?.</span><span class=""><span class="hljs-property">voipCallUiEvent</span> </span><span class="">== </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallUiEvent</span></span><span class="">.</span><span class=""><span class="hljs-property">VOIP_CALL_EVENT_VOICE_ANSWER</span></span><span class="">) </span><span class="">{</span></li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">立即向</span></span><span class=""><span class="hljs-comment">Call Service Kit</span></span><span class=""><span class="hljs-comment">上报</span></span><span class=""><span class="hljs-comment">answered</span></span><span class=""><span class="hljs-comment">状态</span></span></li><li>    <span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-title function_">reportCallStateChange</span></span><span class="">(</span><span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">callId</span></span><span class="">, </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallState</span></span><span class="">.</span><span class=""><span class="hljs-property">VOIP_CALL_STATE_ANSWERED</span></span><span class="">)</span><span class="">;</span></li><li>
</li><li>    <span class=""><span class="hljs-comment">//...</span></span><span class=""><span class="hljs-comment">在应用内完成接听</span></span></li><li>
</li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">应用内接听后，向</span></span><span class=""><span class="hljs-comment">Call Service Kit</span></span><span class=""><span class="hljs-comment">上报</span></span><span class=""><span class="hljs-comment">active</span></span><span class=""><span class="hljs-comment">状态</span></span></li><li>    <span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-title function_">reportCallStateChange</span></span><span class="">(</span><span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">callId</span></span><span class="">, </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallState</span></span><span class="">.</span><span class=""><span class="hljs-property">VOIP_CALL_STATE_ACTIVE</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div>          <p>接听过程的效果图展示如下：</p>          <div class="tablenoborder">           <div class="tbBox"><table class="layoutFixed idpTab">                         <tbody><tr>              <td class="cellrowborder" valign="top" width="50%">               <p><strong>正在接通</strong></p></td>              <td class="cellrowborder" valign="top" width="50%">               <p><strong>接通后</strong></p></td>             </tr>             <tr>              <td class="cellrowborder" valign="top" width="50%">               <p><span><img height="498.36203900000004" originheight="1049" originwidth="506" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114511.55247244231881682464207068674700:50001231000000:2800:ADC6D1982FCD8C7B521B7D5F2F4C0B4E14538D970DFB25E924E8AD21B1B2C798.jpg" title="点击放大" width="240.3975"></span></p></td>              <td class="cellrowborder" valign="top" width="50%">               <p><span><img height="497.986846" originheight="1044" originwidth="504" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114511.70263730693757815867020813677780:50001231000000:2800:114376A6FD143364E891082F0688818E4C8E0D9F57845C406424A13A53BA24CB.jpg" title="点击放大" width="240.3975"></span></p></td>             </tr>                       </tbody></table></div>          </div>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p>通话接听时，上报两次状态的好处是：</p>            <p>因为网络等原因，从用户点击接听，到通话真正被接通的时间间隔可能比较长（比如，1s左右）。这段时间，如果横幅通知的样式不变，一直停留在来电状态，用户可能认为点击接听无响应，体验不好。</p>            <p>上报两次状态，可以在接听的过程中，在界面上给用户以反馈。</p>           </div></div></div></li>         <li>只上报一次状态。</li>        </ul>       </div>       <p>以语音通话为例，应用在接收到<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/call-voipcall#section26961727970" target="_blank">VOIP_CALL_EVENT_VOICE_ANSWER</a>事件回调之后，执行应用内接听。</p>       <p>一直到完成应用内接听后，再向Call Service Kit上报<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/call-voipcall#section24523814719" target="_blank">VOIP_CALL_STATE_ACTIVE</a>状态。</p>       <p>示例代码如下：</p>       <div _ngcontent-krn-c106="" class="highlight-div"><div _ngcontent-krn-c106="" class="highlight-div-header"><div _ngcontent-krn-c106="" class="highlight-div-header-left"><div _ngcontent-krn-c106="" class="handle-button expand-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krn-c106="" class="highlight-div-header-right"><div _ngcontent-krn-c106="" class="handle-button ai-button"></div><div _ngcontent-krn-c106="" class="handle-button line-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krn-c106="" class="handle-button theme-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krn-c106="" class="handle-button copy-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-title function_">on</span></span><span class="">(</span><span class=""><span class="hljs-string">'voipCallUiEvent'</span></span><span class="">, </span><span class=""><span class="hljs-function"><span class="hljs-params">callback</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-keyword">if</span> <span class="">(</span><span class="">callback</span><span class="">?.</span><span class=""><span class="hljs-property">voipCallUiEvent</span> </span><span class="">== </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallUiEvent</span></span><span class="">.</span><span class=""><span class="hljs-property">VOIP_CALL_EVENT_VOICE_ANSWER</span></span><span class="">) </span><span class="">{</span></li><li>    <span class=""><span class="hljs-comment">//...</span></span><span class=""><span class="hljs-comment">在应用内完成接听</span></span></li><li>
</li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">应用内接听后，向</span></span><span class=""><span class="hljs-comment">Call Service Kit</span></span><span class=""><span class="hljs-comment">上报通话状态</span></span></li><li>    <span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-title function_">reportCallStateChange</span></span><span class="">(</span><span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">callId</span></span><span class="">, </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallState</span></span><span class="">.</span><span class=""><span class="hljs-property">VOIP_CALL_STATE_ACTIVE</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div>       <p>如果用户在横幅通知上点击拒接，则应用在接收到<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/call-voipcall#section26961727970" target="_blank">VOIP_CALL_EVENT_REJECT</a>事件回调之后，在应用内完成拒接，然后向Call Service Kit 上报<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/call-voipcall#section24523814719" target="_blank">VOIP_CALL_STATE_DISCONNECTED</a>状态，系统会取消横幅通知。</p>       <p>拒接之后，应用可跳过5、6步，直接看第7步。</p>       <div class="p">        拒接的示例代码如下：        <div _ngcontent-krn-c106="" class="highlight-div"><div _ngcontent-krn-c106="" class="highlight-div-header"><div _ngcontent-krn-c106="" class="highlight-div-header-left"><div _ngcontent-krn-c106="" class="handle-button expand-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krn-c106="" class="highlight-div-header-right"><div _ngcontent-krn-c106="" class="handle-button ai-button"></div><div _ngcontent-krn-c106="" class="handle-button line-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krn-c106="" class="handle-button theme-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krn-c106="" class="handle-button copy-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-title function_">on</span></span><span class="">(</span><span class=""><span class="hljs-string">'voipCallUiEvent'</span></span><span class="">, </span><span class=""><span class="hljs-function"><span class="hljs-params">callback</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-keyword">if</span> <span class="">(</span><span class="">callback</span><span class="">?.</span><span class=""><span class="hljs-property">voipCallUiEvent</span> </span><span class="">== </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallUiEvent</span></span><span class="">.</span><span class=""><span class="hljs-property">VOIP_CALL_EVENT_REJECT</span></span><span class="">) </span><span class="">{</span></li><li>    <span class="hljs-comment">// ...应用内完成拒接</span></li><li>
</li><li>    <span class=""><span class="hljs-comment">// 向Call Service Kit上报通话状态</span></span></li><li>    <span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-title function_">reportCallStateChange</span></span><span class="">(</span><span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">callId</span></span><span class="">, </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallState</span></span><span class="">.</span><span class=""><span class="hljs-property">VOIP_CALL_STATE_DISCONNECTED</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div>       </div>       <p></p></li>      <li id="li161271020155311"><a name="ZH-CN_TOPIC_0000002444782172__li161271020155311"></a><a name="li161271020155311"></a><span>在通话过程中，用户可以根据需要，可以静音或解除静音。</span>       <p></p>       <p>以静音为例，用户在横幅上点击静音，Call Service Kit会给应用回调<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/call-voipcall#section26961727970" target="_blank">VOIP_CALL_EVENT_MUTED</a>事件。</p>       <p>应用在完成静音后，应向Call Service Kit上报<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/call-voipcall#section312217120409" target="_blank">AUDIO_EVENT_MUTED</a>音频状态。</p>       <p>示例代码如下：</p>       <div _ngcontent-krn-c106="" class="highlight-div"><div _ngcontent-krn-c106="" class="highlight-div-header"><div _ngcontent-krn-c106="" class="highlight-div-header-left"><div _ngcontent-krn-c106="" class="handle-button expand-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krn-c106="" class="highlight-div-header-right"><div _ngcontent-krn-c106="" class="handle-button ai-button"></div><div _ngcontent-krn-c106="" class="handle-button line-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krn-c106="" class="handle-button theme-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krn-c106="" class="handle-button copy-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-title function_">on</span></span><span class="">(</span><span class=""><span class="hljs-string">'voipCallUiEvent'</span></span><span class="">, </span><span class=""><span class="hljs-function"><span class="hljs-params">callback</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-keyword">if</span> <span class="">(</span><span class="">callback</span><span class="">?.</span><span class=""><span class="hljs-property">voipCallUiEvent</span> </span><span class="">== </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallUiEvent</span></span><span class="">.</span><span class=""><span class="hljs-property">VOIP_CALL_EVENT_MUTED</span></span><span class="">) </span><span class="">{</span></li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">向</span></span><span class=""><span class="hljs-comment">Call Service Kit</span></span><span class=""><span class="hljs-comment">上报静音</span></span></li><li>    <span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-title function_">reportCallAudioEventChange</span></span><span class="">(</span><span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">callId</span></span><span class="">, </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">CallAudioEvent</span></span><span class="">.</span><span class=""><span class="hljs-property">AUDIO_EVENT_MUTED</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">} </span><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="">(</span><span class="">callback</span><span class="">?.</span><span class=""><span class="hljs-property">voipCallUiEvent</span> </span><span class="">== </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallUiEvent</span></span><span class="">.</span><span class=""><span class="hljs-property">VOIP_CALL_EVENT_UNMUTED</span></span><span class="">) </span><span class="">{</span></li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">向</span></span><span class=""><span class="hljs-comment">Call Service Kit</span></span><span class=""><span class="hljs-comment">上报解除静音</span></span></li><li>    <span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-title function_">reportCallAudioEventChange</span></span><span class="">(</span><span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">callId</span></span><span class="">, </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">CallAudioEvent</span></span><span class="">.</span><span class=""><span class="hljs-property">AUDIO_EVENT_UNMUTED</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div>       <p>静音、解除静音的横幅通知效果图展示如下：</p>       <div class="tablenoborder">        <div class="tbBox"><table class="layoutFixed idpTab">                   <tbody><tr>           <td class="cellrowborder" valign="top" width="50%">            <p><strong>静音</strong></p></td>           <td class="cellrowborder" valign="top" width="50%">            <p><strong>解除静音</strong></p></td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">            <p><span><img height="496.6293150000001" originheight="1033" originwidth="500" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114511.45095028438303190400812061223584:50001231000000:2800:C2C03CA28EEDBBABE81C63F1933AF0D3F7F98C9A9D1821DEA4BD3B844CC106B8.jpg" title="点击放大" width="240.3975"></span></p></td>           <td class="cellrowborder" valign="top" width="50%">            <p><span><img height="497.986846" originheight="1044" originwidth="504" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114511.98303370293736482715660378885652:50001231000000:2800:0DE5788D27B54F8C2301880DFCD8255ABC92123407AFDD2D592BDD4C5AD1D99F.jpg" title="点击放大" width="240.3975"></span></p></td>          </tr>                 </tbody></table></div>       </div>       <p></p></li>      <li id="li12946111323712"><a name="ZH-CN_TOPIC_0000002444782172__li12946111323712"></a><a name="li12946111323712"></a><span>用户在横幅点击挂断，Call Service Kit会给应用回调<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/call-voipcall#section26961727970" target="_blank">VOIP_CALL_EVENT_HANGUP</a>事件。</span>       <p></p>       <p>应用收到该事件后，应在应用内完成挂断，然后，向Call Service Kit上报<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/call-voipcall#section24523814719" target="_blank">VOIP_CALL_STATE_DISCONNECTED</a>状态，系统会取消横幅通知。</p>       <p>示例代码如下：</p>       <div _ngcontent-krn-c106="" class="highlight-div"><div _ngcontent-krn-c106="" class="highlight-div-header"><div _ngcontent-krn-c106="" class="highlight-div-header-left"><div _ngcontent-krn-c106="" class="handle-button expand-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krn-c106="" class="highlight-div-header-right"><div _ngcontent-krn-c106="" class="handle-button ai-button"></div><div _ngcontent-krn-c106="" class="handle-button line-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krn-c106="" class="handle-button theme-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krn-c106="" class="handle-button copy-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-title function_">on</span></span><span class="">(</span><span class=""><span class="hljs-string">'voipCallUiEvent'</span></span><span class="">, </span><span class=""><span class="hljs-function"><span class="hljs-params">callback</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-keyword">if</span> <span class="">(</span><span class="">callback</span><span class="">?.</span><span class=""><span class="hljs-property">voipCallUiEvent</span> </span><span class="">== </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallUiEvent</span></span><span class="">.</span><span class=""><span class="hljs-property">VOIP_CALL_EVENT_HANGUP</span></span><span class="">) </span><span class="">{</span></li><li>    <span class="hljs-comment">// ...应用内完成挂断</span></li><li>
</li><li>    <span class=""><span class="hljs-comment">// 向Call Service Kit上报通话状态</span></span></li><li>    <span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-title function_">reportCallStateChange</span></span><span class="">(</span><span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">callId</span></span><span class="">, </span><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-property">VoipCallState</span></span><span class="">.</span><span class=""><span class="hljs-property">VOIP_CALL_STATE_DISCONNECTED</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div>       <p></p></li>      <li><span>通话结束后，应用不再需要感知到用户在通话横幅上的操作，可以解除voipCallUiEvent事件。</span>       <p></p>       <p>示例代码如下：</p>       <div _ngcontent-krn-c106="" class="highlight-div"><div _ngcontent-krn-c106="" class="highlight-div-header"><div _ngcontent-krn-c106="" class="highlight-div-header-left"><div _ngcontent-krn-c106="" class="handle-button expand-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krn-c106="" class="highlight-div-header-right"><div _ngcontent-krn-c106="" class="handle-button ai-button"></div><div _ngcontent-krn-c106="" class="handle-button line-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krn-c106="" class="handle-button theme-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krn-c106="" class="handle-button copy-button"><div _ngcontent-krn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 解除</span><span class=""><span class="hljs-comment">voipCallUiEvent</span></span><span class="hljs-comment">事件</span></li><li><span class="">voipCall</span><span class="">.</span><span class=""><span class="hljs-title function_">off</span></span><span class="">(</span><span class=""><span class="hljs-string">'voipCallUiEvent'</span></span><span class="">, </span><span class=""><span class="hljs-function"><span class="hljs-params">callback</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'CallDemo'</span></span><span class="">, </span><span class=""><span class="hljs-string">`Succeeded in unRegistering voipCallUiEvent, callId: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">callback</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">callId</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div>       <p></p></li>     </ol>    </div>   </div>   <div></div></div>