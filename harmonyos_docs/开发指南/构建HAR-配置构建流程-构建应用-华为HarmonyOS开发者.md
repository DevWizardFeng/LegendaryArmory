<h1 _ngcontent-sau-c119="" class="doc-title ng-star-inserted" title="构建HAR"> 构建HAR </h1>

<div _ngcontent-sau-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div id="body0000001772704332">    <p id="ZH-CN_TOPIC_0000002510294359__p18969135018447">构建模式：DevEco Studio默认提供debug和release两种构建模式，同时支持开发者自定义构建模式。</p>    <p id="ZH-CN_TOPIC_0000002510294359__p18260203418198">产物格式：构建出的HAR包产物分为包含源码的HAR、包含js中间码的HAR以及包含字节码的HAR三种产物格式。</p>    <p id="ZH-CN_TOPIC_0000002510294359__p142009534424">从DevEco Studio NEXT Beta1（5.0.3.800）版本开始，默认构建字节码HAR，用于提升发布产物的安全性。</p>    <div class="tiledSection">     <h2 id="section96749161819">使用约束<i class="anchor-icon anchor-icon-link" anchorid="section96749161819" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002510294359__p1817917212220">HAR自身的构建不建议引用本地模块，可能导致其他模块依赖该HAR包时安装失败，如果安装失败，需要在工程级oh-package.json5中配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-oh-package-json5#zh-cn_topic_0000001792256137_overrides">overrides</a>。</p>    </div>    <div class="tiledSection">     <h2 id="section3761328124112">创建模块<i class="anchor-icon anchor-icon-link" anchorid="section3761328124112" tips="复制节点链接"></i></h2>          <ol id="ZH-CN_TOPIC_0000002510294359__zh-cn_topic_0000001464746438_ol2094684634513">      <li id="li16713125813263"><span>新建工程时选择API 10及以上的Stage模型，工程创建完成后，新建“Static Library”模块。模块创建方法可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-add-new-module">在工程中添加Module</a>。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002510294359__p20397183933415"><span><img originheight="614" originwidth="971" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104914.35577223344214640000860635893763:50001231000000:2800:ED8327D000B79438968503848400EAD3EDEFC265287C54226F67AD9A8ED94CF6.png" width="920" height="581.7507723995881"></span></p>       <p></p></li>      <li id="zh-cn_topic_0000001464746438_li116331744142219"><span>编写代码。</span>       <p></p>       <div _ngcontent-sau-c106="" class="highlight-div"><div _ngcontent-sau-c106="" class="highlight-div-header"><div _ngcontent-sau-c106="" class="highlight-div-header-left"><div _ngcontent-sau-c106="" class="handle-button expand-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sau-c106="" class="highlight-div-header-right"><div _ngcontent-sau-c106="" class="handle-button ai-button"></div><div _ngcontent-sau-c106="" class="handle-button line-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sau-c106="" class="handle-button theme-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sau-c106="" class="handle-button copy-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sau-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" id="ZH-CN_TOPIC_0000002510294359__zh-cn_topic_0000001464746438_screen8269172562211" data-highlighted="yes"><ol class="linenums"><li>  library  <span class="hljs-comment">// HAR根目录</span></li><li>  ├─libs  <span class="hljs-comment">// 存放用户自定义引用的Native库，一般为.so文件</span></li><li>  └─src</li><li>  │   └─main</li><li>  │     ├─cpp</li><li>  │     │  ├─types  <span class="hljs-comment">// 定义Native API对外暴露的接口  </span></li><li>  │     │  │  └─liblibrary  </li><li>  │     │  │      ├─index.d.ts</li><li>  │     │  │      └─oh-<span class="hljs-keyword">package</span>.json5 </li><li>  │     │  ├─CMakeLists.txt  <span class="hljs-comment">// CMake配置文件  </span></li><li>  │     │  └─napi_init.cpp  <span class="hljs-comment">// C++源码文件</span></li><li>  │     └─ets  <span class="hljs-comment">// ArkTS源码目录</span></li><li>  │     │  └─components</li><li>  │     │     └─MainPage.ets</li><li>  │     ├─resources  <span class="hljs-comment">// 资源目录，用于存放资源文件，如图片、多媒体、字符串等  </span></li><li>  │     └─<span class="hljs-keyword">module</span>.json5  <span class="hljs-comment">// 模块配置文件，包含当前HAR的配置信息  </span></li><li>  ├─build-profile.json5  <span class="hljs-comment">// Hvigor编译构建所需的配置文件，包含编译选项</span></li><li>  ├─hvigorfile.ts  <span class="hljs-comment">// Hvigor构建脚本文件，包含构建当前模块的插件、自定义任务等</span></li><li>  ├─Index.ets  <span class="hljs-comment">// HAR的入口文件，一般作为出口定义HAR对外提供的函数、组件等   </span></li><li><strong>  └─oh-<span class="hljs-keyword">package</span>.json5</strong>  <span class="hljs-comment">// HAR的描述文件，定义HAR的基本信息、依赖项等</span></li></ol></pre></div></div>       <p></p></li>      <li id="zh-cn_topic_0000001464746438_li1628843216145"><span>在oh-package.json5中“main”字段定义导出文件入口。若不设置“main”字段，默认以当前目录下Index.ets为入口文件，依据.ets&gt;.ts&gt;.js的顺序依次检索。以将ets/components/MainPage.ets文件设置为入口文件为例：</span>       <p></p>       <div _ngcontent-sau-c106="" class="highlight-div"><div _ngcontent-sau-c106="" class="highlight-div-header"><div _ngcontent-sau-c106="" class="highlight-div-header-left"><div _ngcontent-sau-c106="" class="handle-button expand-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sau-c106="" class="highlight-div-header-right"><div _ngcontent-sau-c106="" class="handle-button ai-button"></div><div _ngcontent-sau-c106="" class="handle-button line-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sau-c106="" class="handle-button theme-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sau-c106="" class="handle-button copy-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sau-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" id="ZH-CN_TOPIC_0000002510294359__zh-cn_topic_0000001464746438_screen191161146378" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  ...</li><li>  <span class="">"<span class="hljs-selector-tag">main</span>"</span>: <span class=""><span class="hljs-string">"./src/main/ets/components/MainPage.ets"</span></span>,</li><li>  ...</li><li>}</li></ol></pre></div></div>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section16598338112415">字节码HAR<i class="anchor-icon anchor-icon-link" anchorid="section16598338112415" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002510294359__p575211531509">默认产物是包含字节码的HAR包，其中包含abc字节码、资源文件、配置文件、readme、changelog声明文件、license证书文件，提升发布到ohpm中心仓产物的安全性。</p>     <p id="ZH-CN_TOPIC_0000002510294359__p1782041313119">字节码HAR包中包含的是编译后的abc字节码，当字节码HAR被其他应用模块(HAP/HSP)依赖时，执行应用模块的编译构建，不需要再对依赖的HAR进行语法检查和编译等操作，相比源码HAR，可以有效提升应用模块的编译构建效率，提高安全性，降低代码泄漏的风险。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p id="ZH-CN_TOPIC_0000002510294359__p2905954848">由于构建字节码HAR需要生成二进制的格式，所以单独构建字节码HAR会比构建非字节码HAR耗时更多。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="section833617505918" class="firsth2">收益<i class="anchor-icon anchor-icon-link" anchorid="section833617505918" tips="复制节点链接"></i></h3>          <ul id="ZH-CN_TOPIC_0000002510294359__ul147521053706">      <li id="li175220532015">字节码HAR可以降低代码泄漏的风险，增加反编译获取代码逻辑的难度。</li>     </ul>     <ul id="ZH-CN_TOPIC_0000002510294359__ul1752185317016">      <li id="li775211537015">采用ArkTS/TS语言开发的字节码HAR，被HAP/HSP集成时，可以减少语法检查、转换的耗时，提高构建性能。</li>      <li id="li177523531907">字节码HAR可以减少编译时node的进程占用，有效降低内存占用。</li>      <li id="li275285314017">通过其他代码生成工具生成的js语言HAR包，编译构建成字节码HAR后，被HAP/HSP集成时，可以减少编译阶段处理的文件和代码数量，降低内存，提高构建性能。</li>     </ul>    </div>    <div class="tiledSection">     <h3 id="section13212123425920">使用场景<i class="anchor-icon anchor-icon-link" anchorid="section13212123425920" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002510294359__p157520531300">从功能上来说所有的源码HAR包都可以按照任意顺序切换成字节码HAR。但是由于字节码HAR编译和集成的特点，按照推荐场景或顺序来逐步切换字节码HAR可能会获得比较好的性能、内存收益。以下场景中推荐切换使用字节码HAR：</p>     <ul id="ZH-CN_TOPIC_0000002510294359__ul1175295316010">      <li id="li1175225319012">适用于SDK厂商对外提供SDK，以及高安全的场景，字节码HAR可以降低源码泄漏的风险。</li>      <li id="li1175216536011">采用muti-repo的开发模式，在被主工程合并集成时，所有依赖的HAR均可以发布成字节码HAR，从而提高主HAP的构建效率。</li>      <li id="li37521753401">采用mono-repo的开发模式，工程中含有单个代码文件较大，或通过代码生成工具生成的代码量较大的ArkTS/TS/JS 的二方、三方SDK(HAR包)时，可考虑将这些HAR包构建成字节码HAR。</li>      <li id="li07521553501">对内存要求较高的场景，可以通过切换字节码HAR，降低内存的占用。</li>      <li id="li37521253800">通过ArkTS/TS/JS编写的HAR，且在依赖链条中处于较为底层的叶子节点，含有较少的源码依赖时，切换为字节码HAR会有较好的收益。</li>     </ul>    </div>    <div class="tiledSection">     <h3 id="section38518561610">约束条件<i class="anchor-icon anchor-icon-link" anchorid="section38518561610" tips="复制节点链接"></i></h3>          <ul id="ZH-CN_TOPIC_0000002510294359__ul137527531406">      <li id="li137523539019">字节码HAR使用的依赖需要配置在本模块的oh-package.json5的dependencies或dynamicDependencies中，如果不配置，后续字节码HAR被集成时可能会出现运行时异常。如果出现异常，部分场景可通过在hvigor-config.json5中配置ohos.byteCodeHar.integratedOptimization后重新编译，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-dependencies#section957371853712">编译行为差异说明</a>。</li>      <li id="li5752185317012">字节码HAR的oh-package.json5中配置的依赖名和依赖包的包名（即包内oh-package.json5中的name）需要保持一致。</li>      <li id="li14753653701">依赖字节码HAR包时，该工程的build-profile.json5中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-build-profile-app#section13181758123312">useNormalizedOHMUrl</a>必须设置为true。</li>      <li id="li07531153902">HAP/HSP/HAR依赖字节码HAR包时，HAP/HSP/HAR的oh-package.json5中配置的依赖名和字节码HAR包的oh-package.json5中的name需要保持一致。</li>      <li id="li07531853807">HAP/HSP/HAR代码中import使用字节码HAR包时，`import xxx from 'yyy'`的依赖名yyy要和本模块oh-package.json5中配置的依赖名保持一致（包括大小写）。</li>      <li id="li87531753709">依赖字节码HAR包时，字节码HAR的compatibleSdkVersion不能大于工程的compatibleSdkVersion。</li>     </ul>    </div>    <div class="tiledSection">     <h3 id="section18181101414597">操作步骤<i class="anchor-icon anchor-icon-link" anchorid="section18181101414597" tips="复制节点链接"></i></h3>          <ol id="ZH-CN_TOPIC_0000002510294359__ol05763301033">      <li id="li35764303319"><span>将工程级build-profile.json5的useNormalizedOHMUrl设置为true。</span>       <p></p>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p id="ZH-CN_TOPIC_0000002510294359__p757613304316">从DevEco Studio NEXT Beta1（5.0.3.800）版本开始，工程级build-profile.json5中useNormalizedOHMUrl字段默认为true，byteCodeHar缺省默认值为true，无需执行步骤1和2。</p>        </div></div></div>       <div _ngcontent-sau-c106="" class="highlight-div"><div _ngcontent-sau-c106="" class="highlight-div-header"><div _ngcontent-sau-c106="" class="highlight-div-header-left"><div _ngcontent-sau-c106="" class="handle-button expand-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sau-c106="" class="highlight-div-header-right"><div _ngcontent-sau-c106="" class="handle-button ai-button"></div><div _ngcontent-sau-c106="" class="handle-button line-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sau-c106="" class="handle-button theme-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sau-c106="" class="handle-button copy-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sau-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294359__screen057643018317" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class=""><span class="hljs-string">"app"</span></span>: {</li><li>    <span class="hljs-string">"products"</span>: [</li><li>      {</li><li>         <span class="hljs-string">"buildOption"</span>: {</li><li>           <span class="hljs-string">"strictMode"</span>: {</li><li>             <span class="hljs-string">"useNormalizedOHMUrl"</span>: <span class="hljs-keyword">true</span></li><li>           }</li><li>         }</li><li>      }</li><li>    ]</li><li>  }</li><li>}</li></ol></pre></div></div>       <p></p></li>      <li id="li1757616300320"><span>在HAR模块的build-profile.json5中，将byteCodeHar设置为true。</span>       <p></p>       <div _ngcontent-sau-c106="" class="highlight-div"><div _ngcontent-sau-c106="" class="highlight-div-header"><div _ngcontent-sau-c106="" class="highlight-div-header-left"><div _ngcontent-sau-c106="" class="handle-button expand-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sau-c106="" class="highlight-div-header-right"><div _ngcontent-sau-c106="" class="handle-button ai-button"></div><div _ngcontent-sau-c106="" class="handle-button line-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sau-c106="" class="handle-button theme-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sau-c106="" class="handle-button copy-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sau-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294359__screen15577193012311" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class=""><span class="hljs-string">"buildOption"</span></span>: {</li><li>    <span class="hljs-string">"arkOptions"</span>: {</li><li>      <span class="hljs-string">"byteCodeHar"</span>: <span class="hljs-keyword">true</span></li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>       <p></p></li>      <li id="li159693914522"><span>点击DevEco Studio右上角图标<span><img originheight="21" originwidth="27" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104914.89329186526491687092970930548513:50001231000000:2800:A7731F9CBD386B82D48BB58609DC70C129D68409E9941ACF151B3FE01F309832.png" class="IconPic notEnlarge" width="27" height="21"></span>，选择<strong>Build Mode，</strong>默认为<strong>&lt;Default&gt;</strong>模式：在编译App时使用release模式，编译HAP/HSP/HAR时使用debug模式。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002510294359__p19693995215"><span><img originheight="314" originwidth="467" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104914.52607509268916355446503841249228:50001231000000:2800:F1DD81BEB674C96B3F2C82627401C0093F3AA1DEE2D9BF5CD12BC3CA691D9861.png" width="467" height="314"></span></p>       <p></p></li>      <li id="li1996918965211"><span>（可选）在编译模式为release时，为保护代码资产，建议开启混淆，在模块级build-profile.json5文件的release的buildOptionSet配置中，将obfuscation/ruleOptions下的enable字段设置为true。混淆相关能力和具体规则请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-build-obfuscation">代码混淆</a>。</span>       <p></p>       <div _ngcontent-sau-c106="" class="highlight-div"><div _ngcontent-sau-c106="" class="highlight-div-header"><div _ngcontent-sau-c106="" class="highlight-div-header-left"><div _ngcontent-sau-c106="" class="handle-button expand-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sau-c106="" class="highlight-div-header-right"><div _ngcontent-sau-c106="" class="handle-button ai-button"></div><div _ngcontent-sau-c106="" class="handle-button line-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sau-c106="" class="handle-button theme-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sau-c106="" class="handle-button copy-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sau-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294359__screen1996919205210" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class=""><span class="hljs-string">"apiType"</span></span>: <span class=""><span class="hljs-string">"stageMode"</span></span>,</li><li>  <span class=""><span class="hljs-string">"buildOption"</span></span>: {</li><li>  },</li><li>  <span class=""><span class="hljs-string">"buildOptionSet"</span></span>: [</li><li>    {</li><li>      <span class=""><span class="hljs-string">"name"</span></span>: <span class=""><span class="hljs-string">"release"</span></span>,</li><li>      <span class=""><span class="hljs-string">"arkOptions"</span></span>: {</li><li>        <span class="hljs-comment">// 混淆相关参数</span></li><li>        <span class=""><span class="hljs-string">"obfuscation"</span></span>: {</li><li>          <span class=""><span class="hljs-string">"ruleOptions"</span></span>: {</li><li>            <span class="hljs-comment">// true表示进行混淆，false表示不进行混淆。5.0.3.600及以上版本默认为false</span></li><li>            <span class=""><span class="hljs-string">"enable"</span></span>: <span class=""><span class="hljs-keyword">true</span></span>,</li><li>            <span class="hljs-comment">// 混淆规则文件</span></li><li>            <span class=""><span class="hljs-string">"files"</span></span>: [</li><li>              <span class=""><span class="hljs-string">"./obfuscation-rules.txt"</span></span></li><li>            ]</li><li>          },</li><li>          <span class="hljs-comment">// consumerFiles中指定的混淆配置文件会在构建依赖这个library的工程或library时被应用</span></li><li>          <span class=""><span class="hljs-string">"consumerFiles"</span></span>: [</li><li>            <span class=""><span class="hljs-string">"./consumer-rules.txt"</span></span></li><li>          ]</li><li>        }</li><li>      },</li><li>    },</li><li>  ],</li><li>  <span class=""><span class="hljs-string">"targets"</span></span>: [</li><li>    {</li><li>      <span class=""><span class="hljs-string">"name"</span></span>: <span class=""><span class="hljs-string">"default"</span></span></li><li>    }</li><li>  ]</li><li>}</li></ol></pre></div></div>       <p></p></li>      <li id="li149732037115918"><span>（可选）如果开发者希望自定义打包到HAR产物中的文件，可在HAR模块的build-profile.json5文件中，配置include或exclude字段，支持glob语法。</span>       <p></p>       <div _ngcontent-sau-c106="" class="highlight-div"><div _ngcontent-sau-c106="" class="highlight-div-header"><div _ngcontent-sau-c106="" class="highlight-div-header-left"><div _ngcontent-sau-c106="" class="handle-button expand-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sau-c106="" class="highlight-div-header-right"><div _ngcontent-sau-c106="" class="handle-button ai-button"></div><div _ngcontent-sau-c106="" class="handle-button line-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sau-c106="" class="handle-button theme-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sau-c106="" class="handle-button copy-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sau-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294359__screen7827645016" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-string">"buildOption"</span></span>: {</li><li>  <span class=""><span class="hljs-string">"packingOptions"</span></span>: {</li><li>    <span class=""><span class="hljs-string">"asset"</span></span>: {</li><li>      <span class=""><span class="hljs-string">"include"</span></span>: [<span class=""><span class="hljs-string">"./src/router.json5"</span></span>,<span class=""><span class="hljs-string">"router.json5"</span></span>],    <span class="hljs-comment">// 配置打包到HAR产物中的文件</span></li><li>      <span class=""><span class="hljs-string">"exclude"</span></span>: [<span class=""><span class="hljs-string">"./config/*"</span></span>]     <span class="hljs-comment">// 配置不打包到HAR产物中的文件</span></li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <ul id="ZH-CN_TOPIC_0000002510294359__ul17252395215">          <li id="li1772518391629">配置include字段时，以下目录不生效，即不会被打包到产物中：node_modules、oh_modules、.preview、build、.cxx、.test。</li>          <li id="li122198531420">配置exclude字段时，以下文件不生效，默认会打包：oh-package.json5。</li>         </ul>        </div></div></div>       <p></p></li>      <li id="li1357773018320"><span>选中HAR模块的根目录，点击<strong>Build &gt; Make Module '&lt;module-name&gt;'</strong>启动构建。</span>       <p></p>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p id="ZH-CN_TOPIC_0000002510294359__p974484618351">若修改了HAR模块级oh-package.json5文件的version字段，请先执行<strong>Build &gt; Clean Project</strong>操作，再重新进行Build全量构建。</p>        </div></div></div>       <p id="ZH-CN_TOPIC_0000002510294359__p357714301039"><span><img originheight="194" originwidth="201" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104914.20620050556252514316016412296593:50001231000000:2800:C00588078EE3A76EF16CAE04B8EA09A6627A14F4523CBD4BFC6A2F2FF5868F25.png" class="notEnlarge" width="201" height="194"></span></p>       <p id="ZH-CN_TOPIC_0000002510294359__p1057793012318">构建完成后，build目录下生成HAR包产物。</p>       <p id="ZH-CN_TOPIC_0000002510294359__p557711303313"><span><img originheight="218" originwidth="257" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104914.37536912359143540424438611729502:50001231000000:2800:D72F9DD3098200E83987E440C98131F475630CA4E35C244C342BBB183696C8BD.png" class="notEnlarge" width="257" height="218"></span></p>       <p id="ZH-CN_TOPIC_0000002510294359__p8577163013319">HAR包产物解压后，结构如下：</p>       <p id="ZH-CN_TOPIC_0000002510294359__p1578173020317"><span><img originheight="396" originwidth="262" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104914.99818858934212093152919581300902:50001231000000:2800:58E15D50F03593A83CBF45C0E4244B64D86EE40A74C36B9C24E7C4FC991912B0.png" class="notEnlarge" width="262" height="396"></span></p>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section1031922925716">源码HAR<i class="anchor-icon anchor-icon-link" anchorid="section1031922925716" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section197792874110" class="firsth2">以debug模式构建<i class="anchor-icon anchor-icon-link" anchorid="section197792874110" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002510294359__p122562014487">产物是包含源码的HAR包，其中包含源码、资源文件以及配置文件等，方便开发者进行本地调测，不包含build、node_modules、oh_modules、.cxx、.preview、.hvigor、.gitignore、.ohpmignore、.gitignore/.ohpmignore中配置的文件、cpp工程的CMakeLists.txt。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul id="ZH-CN_TOPIC_0000002510294359__ul1979924045714">        <li id="li1387172264310">源码HAR包中包含源代码，请谨慎分发，避免造成源代码泄露。</li>        <li id="li7440162532818">如果是native工程，以debug模式构建的native产物中不包含调试信息和符号表，如需调试，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-source-code-debugging">三方源码调试</a>。</li>        <li id="li1680064019572">从5.0.3.403版本开始，不再建议使用相对路径跨模块引用代码文件，若历史工程存在此场景的跨模块引用，会出现warning告警，请尝试将该文件移至本模块内，再重新进行编译。</li>        <li id="li640345315596">从5.0.3.403版本开始，以debug/release模式构建HAR的流程使用相同的语法校验规则，若历史工程出现ArkTS语法报错，请按照报错信息修改代码，以符合ArkTS语言规范。</li>       </ul>      </div></div></div>     <ol id="ZH-CN_TOPIC_0000002510294359__ol3545145244913">      <li id="li1628715293229"><span>在HAR模块的build-profile.json5中，将byteCodeHar设置为false。</span>       <p></p>       <div _ngcontent-sau-c106="" class="highlight-div"><div _ngcontent-sau-c106="" class="highlight-div-header"><div _ngcontent-sau-c106="" class="highlight-div-header-left"><div _ngcontent-sau-c106="" class="handle-button expand-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sau-c106="" class="highlight-div-header-right"><div _ngcontent-sau-c106="" class="handle-button ai-button"></div><div _ngcontent-sau-c106="" class="handle-button line-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sau-c106="" class="handle-button theme-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sau-c106="" class="handle-button copy-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sau-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294359__screen15977113432414" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class=""><span class="hljs-string">"buildOption"</span></span>: {</li><li>    <span class="hljs-string">"arkOptions"</span>: {</li><li>      <span class="hljs-string">"byteCodeHar"</span>: <span class="hljs-keyword">false</span></li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p id="ZH-CN_TOPIC_0000002510294359__p16321525816">使用DevEco Studio NEXT Beta1（5.0.3.800）之前的版本，模块级build-profile.json5的byteCodeHar字段的缺省默认值为false，无需执行本步骤。</p>        </div></div></div>       <p></p></li>      <li id="li3761333154515"><span>点击DevEco Studio右上角图标<span><img originheight="21" originwidth="27" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104914.88578216962054735974308931595421:50001231000000:2800:294A842284BACB747AC379AAF5047AA6A6D88B33D0B9291BFF18B5C0FBEABDE6.png" class="IconPic notEnlarge" width="27" height="21"></span>，<strong>Build Mode</strong>选择<strong>debug。</strong>默认为<strong>&lt;Default&gt;</strong>模式：在编译App时使用release模式，编译HAP/HSP/HAR时使用debug模式。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002510294359__p16631522165813"><span><img originheight="308" originwidth="464" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104914.42129238926862861160587765427818:50001231000000:2800:7101D9DB175C38ED47F27DFA0E24F395D5029E7DD97902E74B2C11B4221B4D78.png" width="464" height="308"></span></p>       <p></p></li>      <li id="li5533646204511"><span>（可选）若部分工程源文件无需构建到HAR包中，可在模块目录下新建.ohpmignore文件，或者在模块目录下的.gitignore文件中，配置打包时要忽略的文件，.ohpmignore文件中支持正则表达式写法，.gitignore文件中支持glob语法。DevEco Studio构建时将过滤掉.ohpmignore或.gitignore文件中所包含的文件/文件夹。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002510294359__p14474193515468"><span><img originheight="167" originwidth="231" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104914.95964720746106962207077655488120:50001231000000:2800:7FE098030F5B94EF7A8EFFBBA937412C8BB4EB3CBECC8C581DB8DF2ECD1572E4.png" class="notEnlarge" width="231" height="167"></span></p>       <p></p></li>      <li id="li1320914114104"><span>（可选）如果开发者希望自定义打包到HAR产物中的文件，可在HAR模块的build-profile.json5文件中，配置include或exclude字段，支持glob语法。配置include或exclude字段后，.gitignore和.ohpmignore文件将不再生效。</span>       <p></p>       <div _ngcontent-sau-c106="" class="highlight-div"><div _ngcontent-sau-c106="" class="highlight-div-header"><div _ngcontent-sau-c106="" class="highlight-div-header-left"><div _ngcontent-sau-c106="" class="handle-button expand-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sau-c106="" class="highlight-div-header-right"><div _ngcontent-sau-c106="" class="handle-button ai-button"></div><div _ngcontent-sau-c106="" class="handle-button line-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sau-c106="" class="handle-button theme-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sau-c106="" class="handle-button copy-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sau-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294359__screen7209813104" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-string">"buildOption"</span></span>: {</li><li>  <span class=""><span class="hljs-string">"packingOptions"</span></span>: {</li><li>    <span class=""><span class="hljs-string">"asset"</span></span>: {</li><li>      <span class=""><span class="hljs-string">"include"</span></span>: [<span class=""><span class="hljs-string">"./src/router.json5"</span></span>,<span class=""><span class="hljs-string">"router.json5"</span></span>],    <span class="hljs-comment">// 配置打包到HAR产物中的文件</span></li><li>      <span class=""><span class="hljs-string">"exclude"</span></span>: [<span class=""><span class="hljs-string">"./config/*"</span></span>]     <span class="hljs-comment">// 配置不打包到HAR产物中的文件</span></li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <ul id="ZH-CN_TOPIC_0000002510294359__ul8209710108">          <li id="li1720917113101">配置include字段时，以下目录不生效，即不会被打包到产物中：node_modules、oh_modules、.preview、build、.cxx、.test。</li>          <li id="li112092161011">配置exclude字段时，以下文件不生效，默认会打包：oh-package.json5。</li>         </ul>        </div></div></div>       <p></p></li>      <li id="li1664715388462"><span>选中HAR模块的根目录，点击<strong>Build &gt; Make Module '&lt;module-name&gt;'</strong>启动构建。</span>       <p></p>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p id="ZH-CN_TOPIC_0000002510294359__p1942101193817">若修改了HAR模块级oh-package.json5文件的version字段，请先执行<strong>Build &gt; Clean Project</strong>操作，再重新进行Build全量构建。</p>        </div></div></div>       <p id="ZH-CN_TOPIC_0000002510294359__p5612121153920"><span><img originheight="194" originwidth="212" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104915.18925308358179007202210175012506:50001231000000:2800:60819C2FA0571B4B429176BC5E26E902A93A7C779ACDFB6BBDBA3DAAD06FF48D.png" class="notEnlarge" width="212" height="194"></span></p>       <p id="ZH-CN_TOPIC_0000002510294359__zh-cn_topic_0000001464746438_p138827409283">构建完成后，build目录下生成HAR包产物。</p>       <p id="ZH-CN_TOPIC_0000002510294359__zh-cn_topic_0000001464746438_p125844414488"><span><img originheight="156" originwidth="212" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104915.96284807019943137013276917362681:50001231000000:2800:38191AB8FD1923041CA2A4C9D3217F8E5AC83D134C447FC3C94E8481DF9001E3.png" class="notEnlarge" width="212" height="156"></span></p>       <p id="ZH-CN_TOPIC_0000002510294359__p151763379195">HAR包产物解压后，结构如下：</p>       <p id="ZH-CN_TOPIC_0000002510294359__p158154372199"><span><img originheight="349" originwidth="217" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104915.39312872384031603196347884781384:50001231000000:2800:D1462925D8F5762AF84D50CAB91A30F1617C643D8395568324DFF51ED6923D0F.png" class="notEnlarge" width="217" height="349"></span></p>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="section19788284410">以release模式构建<i class="anchor-icon anchor-icon-link" anchorid="section19788284410" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002510294359__p519544992418">从DevEco Studio NEXT Developer Beta3（5.0.3.600）版本开始，默认不开启混淆，构建产物和debug模式相同，请参考<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-build-har#section197792874110">以debug模式构建</a>。</p>     <p id="ZH-CN_TOPIC_0000002510294359__p158334416111">为保护代码资产，建议开启混淆，开启后，构建产物是包含js中间码的HAR包，其中包含源码混淆后生成的js中间码文件、资源文件、配置文件、readme、changelog声明文件、license证书文件，用于发布到ohpm中心仓。</p>     <ol id="ZH-CN_TOPIC_0000002510294359__ol17498196165016">      <li id="li17356136193920"><span>在HAR模块的build-profile.json5中，将byteCodeHar设置为false。</span>       <p></p>       <div _ngcontent-sau-c106="" class="highlight-div"><div _ngcontent-sau-c106="" class="highlight-div-header"><div _ngcontent-sau-c106="" class="highlight-div-header-left"><div _ngcontent-sau-c106="" class="handle-button expand-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sau-c106="" class="highlight-div-header-right"><div _ngcontent-sau-c106="" class="handle-button ai-button"></div><div _ngcontent-sau-c106="" class="handle-button line-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sau-c106="" class="handle-button theme-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sau-c106="" class="handle-button copy-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sau-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294359__screen1735615612399" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class=""><span class="hljs-string">"buildOption"</span></span>: {</li><li>    <span class="hljs-string">"arkOptions"</span>: {</li><li>      <span class="hljs-string">"byteCodeHar"</span>: <span class="hljs-keyword">false</span></li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p id="ZH-CN_TOPIC_0000002510294359__p1235713653916">使用DevEco Studio NEXT Beta1（5.0.3.800）之前的版本，模块级build-profile.json5的byteCodeHar字段的缺省默认值为false，无需执行本步骤。</p>        </div></div></div>       <p></p></li>      <li id="li83021266218"><span>点击DevEco Studio右上角图标<span><img originheight="21" originwidth="27" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104915.60382881286958627550938481063403:50001231000000:2800:F378D11C64CD1C8467926467274AECC068057F589DE5021FB30F25CC26FFC2E2.png" class="IconPic notEnlarge" width="27" height="21"></span>，<strong>Build Mode</strong>中选择<strong>release。</strong>默认为<strong>&lt;Default&gt;</strong>模式：在编译App时使用release模式，编译HAP/HSP/HAR时使用debug模式。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002510294359__p7615141201"><span><img originheight="314" originwidth="467" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104915.06777982581961891829953139366997:50001231000000:2800:1AD31106B436EF9851811C15D861BC1371CF1E6B0E01DA0C9852F9FB38D603E7.png" width="467" height="314"></span></p>       <p></p></li>      <li id="li94981167507"><span>在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-compilation-options-customizing-guide#section192461528194916">编译模式</a>为release时，为保护代码资产，建议开启混淆，在模块级build-profile.json5文件的release的buildOptionSet配置中，将obfuscation/ruleOptions下的enable字段设置为true。混淆相关能力和具体规则请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-build-obfuscation">代码混淆</a>。</span>       <p></p>       <div _ngcontent-sau-c106="" class="highlight-div"><div _ngcontent-sau-c106="" class="highlight-div-header"><div _ngcontent-sau-c106="" class="highlight-div-header-left"><div _ngcontent-sau-c106="" class="handle-button expand-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sau-c106="" class="highlight-div-header-right"><div _ngcontent-sau-c106="" class="handle-button ai-button"></div><div _ngcontent-sau-c106="" class="handle-button line-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sau-c106="" class="handle-button theme-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sau-c106="" class="handle-button copy-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sau-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294359__screen54983619506" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class=""><span class="hljs-string">"apiType"</span></span>: <span class=""><span class="hljs-string">"stageMode"</span></span>,</li><li>  <span class=""><span class="hljs-string">"buildOption"</span></span>: {</li><li>  },</li><li>  <span class=""><span class="hljs-string">"buildOptionSet"</span></span>: [</li><li>    {</li><li>      <span class=""><span class="hljs-string">"name"</span></span>: <span class=""><span class="hljs-string">"release"</span></span>,</li><li>      <span class=""><span class="hljs-string">"arkOptions"</span></span>: {</li><li>        <span class="hljs-comment">// 混淆相关参数</span></li><li>        <span class=""><span class="hljs-string">"obfuscation"</span></span>: {</li><li>          <span class=""><span class="hljs-string">"ruleOptions"</span></span>: {</li><li>            <span class="hljs-comment">// true表示进行混淆，false表示不进行混淆。5.0.3.600及以上版本默认为false</span></li><li>            <span class=""><span class="hljs-string">"enable"</span></span>: <span class=""><span class="hljs-keyword">true</span></span>,</li><li>            <span class="hljs-comment">// 混淆规则文件</span></li><li>            <span class=""><span class="hljs-string">"files"</span></span>: [</li><li>              <span class=""><span class="hljs-string">"./obfuscation-rules.txt"</span></span></li><li>            ]</li><li>          },</li><li>          <span class="hljs-comment">// consumerFiles中指定的混淆配置文件会在构建依赖这个library的工程或library时被应用</span></li><li>          <span class=""><span class="hljs-string">"consumerFiles"</span></span>: [</li><li>            <span class=""><span class="hljs-string">"./consumer-rules.txt"</span></span></li><li>          ]</li><li>        }</li><li>      },</li><li>    },</li><li>  ],</li><li>  <span class=""><span class="hljs-string">"targets"</span></span>: [</li><li>    {</li><li>      <span class=""><span class="hljs-string">"name"</span></span>: <span class=""><span class="hljs-string">"default"</span></span></li><li>    }</li><li>  ]</li><li>}</li></ol></pre></div></div>       <p></p></li>      <li id="li7106710101412"><span>（可选）如果开发者希望自定义打包到HAR产物中的文件，可在HAR模块的build-profile.json5文件中，配置include或exclude字段，支持glob语法。</span>       <p></p>       <div _ngcontent-sau-c106="" class="highlight-div"><div _ngcontent-sau-c106="" class="highlight-div-header"><div _ngcontent-sau-c106="" class="highlight-div-header-left"><div _ngcontent-sau-c106="" class="handle-button expand-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sau-c106="" class="highlight-div-header-right"><div _ngcontent-sau-c106="" class="handle-button ai-button"></div><div _ngcontent-sau-c106="" class="handle-button line-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sau-c106="" class="handle-button theme-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sau-c106="" class="handle-button copy-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sau-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294359__screen9106191001412" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-string">"buildOption"</span></span>: {</li><li>  <span class=""><span class="hljs-string">"packingOptions"</span></span>: {</li><li>    <span class=""><span class="hljs-string">"asset"</span></span>: {</li><li>      <span class=""><span class="hljs-string">"include"</span></span>: [<span class=""><span class="hljs-string">"./src/router.json5"</span></span>,<span class=""><span class="hljs-string">"router.json5"</span></span>],    <span class="hljs-comment">// 配置打包到HAR产物中的文件</span></li><li>      <span class=""><span class="hljs-string">"exclude"</span></span>: [<span class=""><span class="hljs-string">"./config/*"</span></span>]     <span class="hljs-comment">// 配置不打包到HAR产物中的文件</span></li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <ul id="ZH-CN_TOPIC_0000002510294359__ul6106310151411">          <li id="li110631061411">配置include字段时，以下目录不生效，即不会被打包到产物中：node_modules、oh_modules、.preview、build、.cxx、.test。</li>          <li id="li2010661015144">配置exclude字段时，以下文件不生效，默认会打包：oh-package.json5。</li>         </ul>        </div></div></div>       <p></p></li>      <li id="li1950016125017"><span>选中HAR模块的根目录，点击<strong>Build &gt; Make Module '&lt;module-name&gt;'</strong>启动构建。</span>       <p></p>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p id="ZH-CN_TOPIC_0000002510294359__p38813160383">若修改了HAR模块级oh-package.json5文件的version字段，请先执行<strong>Build &gt; Clean Project</strong>操作，再重新进行Build全量构建。</p>        </div></div></div>       <p id="ZH-CN_TOPIC_0000002510294359__p987313177212"><span><img originheight="194" originwidth="201" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104915.71709587991943383378299282678698:50001231000000:2800:A57BBF130DEC9359D1462F9541F35C44B085D2676C774311D599D78599EB678D.png" class="notEnlarge" width="201" height="194"></span></p>       <p id="ZH-CN_TOPIC_0000002510294359__p205001163506">构建完成后，build目录下生成HAR包产物。</p>       <p id="ZH-CN_TOPIC_0000002510294359__p1742522592119"><span><img originheight="218" originwidth="257" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104915.51341429800479216283760953278428:50001231000000:2800:CD2063EBF1C4EFB89716DBE878F638A6BAB8FAAA0363D320A2A2D1446D544554.png" class="notEnlarge" width="257" height="218"></span></p>       <p id="ZH-CN_TOPIC_0000002510294359__p1536318303193">HAR包产物解压后，结构如下：</p>       <p id="ZH-CN_TOPIC_0000002510294359__p1729613212191"><span><img originheight="312" originwidth="213" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104915.69809193347994308200345927917034:50001231000000:2800:9831098A928CDE4E44519D16D227D2A8A1D030B41285FA05D10A42C7D4AE9C31.png" class="notEnlarge" width="213" height="312"></span></p>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section116791730173713">对HAR进行签名<i class="anchor-icon anchor-icon-link" anchorid="section116791730173713" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002510294359__p4170944183710">DevEco Studio在构建HAR流程的基础上，支持对HAR进行签名。签名后的HAR包后续可用于接入生态市场，接入流程请参考<a href="https://developer.huawei.com/consumer/cn/doc/start/dev-mall-marketplace-sp-sdkservice-access-explain-0000001866499490" target="_blank">SDK类商品接入说明</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p id="ZH-CN_TOPIC_0000002510294359__p9171144463713">1. 该能力只在Compatible SDK 5.0.0(12)及以上版本的SDK中支持。</p>       <p id="ZH-CN_TOPIC_0000002510294359__p4171174463716">2. 该能力需开启Hvigor的Daemon能力，请确保当前工程开启了Daemon，打开<strong>File &gt; Settings</strong>（macOS为<strong>DevEco Studio &gt; Preferences/Settings） &gt; Build, Execution, Deployment &gt; Build Tools &gt; Hvigor</strong>，勾选字段<strong>Enable the Daemon for tasks</strong>。</p>      </div></div></div>     <ol id="ZH-CN_TOPIC_0000002510294359__ol0521019386">      <li id="li12521719380"><span>在hvigor-config.json5中，开启构建签名HAR开关：</span>       <p></p>       <div _ngcontent-sau-c106="" class="highlight-div"><div _ngcontent-sau-c106="" class="highlight-div-header"><div _ngcontent-sau-c106="" class="highlight-div-header-left"><div _ngcontent-sau-c106="" class="handle-button expand-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sau-c106="" class="highlight-div-header-right"><div _ngcontent-sau-c106="" class="handle-button ai-button"></div><div _ngcontent-sau-c106="" class="handle-button line-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sau-c106="" class="handle-button theme-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sau-c106="" class="handle-button copy-button"><div _ngcontent-sau-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sau-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294359__screen205213120388" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class=""><span class="hljs-string">"properties"</span></span>: {</li><li>    <span class="hljs-string">"ohos.sign.har"</span>: <span class="hljs-keyword">true</span></li><li>  }</li><li>}</li></ol></pre></div></div>       <p></p></li>      <li id="li1852141143811"><span>配置工程签名信息，配置流程请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-publish-app#section793484619307">配置签名信息</a>。</span></li>      <li id="li5527120382"><span>选中HAR模块的根目录，点击<strong>Build &gt; Make Module '&lt;module-name&gt;'</strong>启动构建。</span>       <p></p>       <p id="ZH-CN_TOPIC_0000002510294359__p75215143818"><span><img originheight="177" originwidth="205" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104915.40624799923933411873378345469624:50001231000000:2800:83DDD57637CA798BAF8DF901F0521E4DF630CD60B485D9178A43B722BF1B5E6A.png" class="notEnlarge" width="205" height="177"></span></p>       <p id="ZH-CN_TOPIC_0000002510294359__p12521711385">构建完成后，build目录下生成签名HAR包产物。</p>       <p id="ZH-CN_TOPIC_0000002510294359__p12524112383"><span><img originheight="254" originwidth="273" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104915.73001451503311764934737007165016:50001231000000:2800:7A970C5087559D89896F2C2E3CFF1B543ED7354BD9FA7D89047F02FA94F82AF4.png" class="notEnlarge" width="273" height="254"></span></p>       <p></p></li>     </ol>    </div>   </div>   <div></div></div>