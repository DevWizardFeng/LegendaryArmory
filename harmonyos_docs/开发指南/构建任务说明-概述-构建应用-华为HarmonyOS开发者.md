<h1 _ngcontent-coc-c119="" class="doc-title ng-star-inserted" title="构建任务说明"> 构建任务说明 </h1>

<div _ngcontent-coc-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001797427737"><p id="ZH-CN_TOPIC_0000002478334420__p626312820418">本章节将对构建的任务进行说明，可以更直观地了解到构建的任务流程。</p> <div class="tiledSection"><h2 id="section1283763854015">任务流程图<i class="anchor-icon anchor-icon-link" anchorid="section1283763854015" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section15652102616119" class="firsth2">HAP基础任务流程图<i class="anchor-icon anchor-icon-link" anchorid="section15652102616119" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334420__p8569103191111"><span><img originheight="637" originwidth="906" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104907.59320321920863601555324637079942:50001231000000:2800:160560C8785328E8F4E240BF6EC4344DF8AAD5E4281B57E9CE18AA95F5B784AF.png" width="906" height="637"></span></p> </div> <div class="tiledSection"><h3 id="section64841934131110">HSP基础任务流程图<i class="anchor-icon anchor-icon-link" anchorid="section64841934131110" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334420__p1436133617110"><span><img originheight="692" originwidth="904" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104907.72521561272602013453885965879705:50001231000000:2800:9C13E85CA2D48AB66B495683CBEF7EB549AA050464975D39A93DFC1072271528.png" width="904" height="692"></span></p> </div> <div class="tiledSection"><h3 id="section988883610112">HAR基础任务流程图<i class="anchor-icon anchor-icon-link" anchorid="section988883610112" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334420__p128123594211"><span><img originheight="770" originwidth="831" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104907.01765136945433011904532439445561:50001231000000:2800:B4F3FDA1696DF70B18A5885ED854DB8D305C0B603EF0028A9D61A0CEB474E039.png" width="831" height="770"></span></p> </div> <div class="tiledSection"><h2 id="section1980266164212">使用命令查看任务<i class="anchor-icon anchor-icon-link" anchorid="section1980266164212" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334420__p663115583319">在DevEco Studio中可以通过以下命令获得任务相关的信息。</p> <div _ngcontent-coc-c106="" class="highlight-div"><div _ngcontent-coc-c106="" class="highlight-div-header"><div _ngcontent-coc-c106="" class="highlight-div-header-left"><div _ngcontent-coc-c106="" class="handle-button expand-button"><div _ngcontent-coc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-coc-c106="" class="highlight-div-header-right"><div _ngcontent-coc-c106="" class="handle-button ai-button"></div><div _ngcontent-coc-c106="" class="handle-button line-button"><div _ngcontent-coc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-coc-c106="" class="handle-button theme-button"><div _ngcontent-coc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-coc-c106="" class="handle-button copy-button"><div _ngcontent-coc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-coc-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002478334420__screen642992114400" data-highlighted="yes"><ol class="linenums"><li>hvigorw taskTree</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334420__p080414610578">获取任务树时会根据工程中的模块将模块中注册的任务以下图形式输出：</p> <p id="ZH-CN_TOPIC_0000002478334420__p58021446115017"><span><img originheight="557" originwidth="669" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104907.62491756733070505507641879364960:50001231000000:2800:289EE47202AFEEA1DA7F3D448AF90B77D1B81BA6A5C686C5885B02CEBFD0F09E.png" width="669" height="557"></span></p> <p id="ZH-CN_TOPIC_0000002478334420__p07377553482">执行顺序举例说明：如图所示，assembleHap依赖CollectDebugSymbol，CollectDebugSymbol依赖于PackageHap；则任务执行顺序为PackageHap-&gt;CollectDebugSymbol-&gt;assembleHap。</p> </div> <div class="tiledSection"><h2 id="section196919100414">任务详细说明<i class="anchor-icon anchor-icon-link" anchorid="section196919100414" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334420__p34176127130">根据任务职能的不同主要分为以下几个类型的任务。</p>  <div class="tablenoborder"><div class="tbBox"><table id="table1685424132816" class="layoutFixed idpTab"><thead><tr id="ZH-CN_TOPIC_0000002478334420__row2855104112286"><th align="left" class="cellrowborder" id="mcps1.3.7.3.1.3.1.1" valign="top" width="35.68%"><p id="ZH-CN_TOPIC_0000002478334420__p9855941172817">任务类别</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.3.1.2" valign="top" width="64.32%"><p id="ZH-CN_TOPIC_0000002478334420__p1385574110286">任务说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334420__row8857125716258"><td class="cellrowborder" valign="top" width="35.68%"><p id="ZH-CN_TOPIC_0000002478334420__p209322242613">Hook</p> </td> <td class="cellrowborder" valign="top" width="64.32%"><p id="ZH-CN_TOPIC_0000002478334420__p39321822262">hook任务</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334420__row1585564122814"><td class="cellrowborder" valign="top" width="35.68%"><p id="ZH-CN_TOPIC_0000002478334420__p17679114423116">ArkTS</p> </td> <td class="cellrowborder" valign="top" width="64.32%"><p id="ZH-CN_TOPIC_0000002478334420__p12679184416313">ArkTS编译相关任务</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334420__row585514142817"><td class="cellrowborder" valign="top" width="35.68%"><p id="ZH-CN_TOPIC_0000002478334420__p76791244193114">JS</p> </td> <td class="cellrowborder" valign="top" width="64.32%"><p id="ZH-CN_TOPIC_0000002478334420__p10679164416318">JS编译相关任务</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334420__row1085518414288"><td class="cellrowborder" valign="top" width="35.68%"><p id="ZH-CN_TOPIC_0000002478334420__p2679134483112">Resources</p> </td> <td class="cellrowborder" valign="top" width="64.32%"><p id="ZH-CN_TOPIC_0000002478334420__p167920449310">资源编译、处理、链接、合并相关的任务</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334420__row1885516411288"><td class="cellrowborder" valign="top" width="35.68%"><p id="ZH-CN_TOPIC_0000002478334420__p116796443313">Package</p> </td> <td class="cellrowborder" valign="top" width="64.32%"><p id="ZH-CN_TOPIC_0000002478334420__p1867984413112">打包相关的任务</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334420__row48551541112811"><td class="cellrowborder" valign="top" width="35.68%"><p id="ZH-CN_TOPIC_0000002478334420__p8679114423114">Sign</p> </td> <td class="cellrowborder" valign="top" width="64.32%"><p id="ZH-CN_TOPIC_0000002478334420__p867920441311">签名相关的任务</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334420__row6855641132810"><td class="cellrowborder" valign="top" width="35.68%"><p id="ZH-CN_TOPIC_0000002478334420__p15679144433119">Verification</p> </td> <td class="cellrowborder" valign="top" width="64.32%"><p id="ZH-CN_TOPIC_0000002478334420__p8679944113112">验证项目或者依赖项设置等相关的任务</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334420__row18856841162814"><td class="cellrowborder" valign="top" width="35.68%"><p id="ZH-CN_TOPIC_0000002478334420__p867994416318">Generate</p> </td> <td class="cellrowborder" valign="top" width="64.32%"><p id="ZH-CN_TOPIC_0000002478334420__p1367904417316">生成和转换前置文件等相关的任务</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334420__row11328163313314"><td class="cellrowborder" valign="top" width="35.68%"><p id="ZH-CN_TOPIC_0000002478334420__p16679144420313">Config</p> </td> <td class="cellrowborder" valign="top" width="64.32%"><p id="ZH-CN_TOPIC_0000002478334420__p15680114453118">生成，合并，处理配置文件等相关的任务</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334420__row191647376314"><td class="cellrowborder" valign="top" width="35.68%"><p id="ZH-CN_TOPIC_0000002478334420__p8680144414317">Native</p> </td> <td class="cellrowborder" valign="top" width="64.32%"><p id="ZH-CN_TOPIC_0000002478334420__p36801244173118">Native编译等相关的任务</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334420__row83311402318"><td class="cellrowborder" valign="top" width="35.68%"><p id="ZH-CN_TOPIC_0000002478334420__p8680044123113">Help</p> </td> <td class="cellrowborder" valign="top" width="64.32%"><p id="ZH-CN_TOPIC_0000002478334420__p868017448314">查询hvigor帮助信息的相关任务</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334420__row12586193523111"><td class="cellrowborder" valign="top" width="35.68%"><p id="ZH-CN_TOPIC_0000002478334420__p368013443316">Other</p> </td> <td class="cellrowborder" valign="top" width="64.32%"><p id="ZH-CN_TOPIC_0000002478334420__p106801441317">未分类的任务</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section8210105915154" class="firsth2">Hook<i class="anchor-icon anchor-icon-link" anchorid="section8210105915154" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334420__ul821018599154"><li id="li19210155941516">assembleHap   编译构建hap模块的Hook任务。</li><li id="li10210859191512">assembleHsp   编译构建hsp模块的Hook任务。</li><li id="li72104592154">assembleHar    编译构建har模块的Hook任务。</li><li id="li5211175916159">assembleApp   编译构建app模块的Hook任务。</li><li id="li821145961512">assembleDevHqf    支持增量部署的Hook任务。</li><li id="li10211185911156">HotReloadBuild     HotReloadArkTS前置Hook任务。</li><li id="li10211959191511">PreviewBuild   PreviewArkTS前置Hook任务。</li><li id="li132111659111513">buildHotReloadResource   热加载资源相关前置Hook任务。</li><li id="li8211195901513">PreviewHookCompileResource   预览时资源编译处理是否支持Restool增量方式编译的Hook任务。</li><li id="li1721195961513">GenerateBuildProfile   生成BuildProfile.ets文件的Hook任务。</li><li id="li1721115593157">BuildUnitTestHook   单元测试编译资源相关前置Hook任务。</li><li id="li62118593156">buildPreviewerResource   预览资源相关前置Hook任务。</li><li id="li1821115919153">compileNative   native资源相关前置Hook任务。</li><li id="li1721118597157">UnitTestBuild     UnitTestArkTS前置Hook任务。</li><li id="li221155912150">test  使用命令行执行Local Test的Hook任务。</li><li id="li15211155981513">onDeviceTest  使用命令行执行Instrument Test的Hook任务。</li></ul> </div> <div class="tiledSection"><h3 id="section958317126133">ArkTS<i class="anchor-icon anchor-icon-link" anchorid="section958317126133" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334420__ul597171591613"><li id="li13300114892110">CompileArkTS/BuildArkTS   通过rollup调用loader编译ArkTS源码。</li><li id="li53961945144113">PreviewArkTS   预览模式下，通过rollup调用loader编译ArkTS源码。</li><li id="li1782092144214">HotReloadArkTS   热加载场景下，通过rollup调用loader编译ArkTS源码。</li><li id="li210055316424">OhosTestCompileArkTS/OhosTestBuildArkTS    ohos测试场景下，通过rollup调用loader编译ArkTS源码。</li><li id="li13589111794915">HarCompileArkTS/HarBuildArkTS   构建HAR包场景下，通过rollup调用loader编译ArkTS源码。</li><li id="li4830113016433">UnitTestArkTS   单元测试场景下，通过rollup调用loader编译ArkTS源码。</li></ul> </div> <div class="tiledSection"><h3 id="section1730811177518">JS<i class="anchor-icon anchor-icon-link" anchorid="section1730811177518" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334420__ul544392916515"><li id="li124431529155110">CompileJS/BuildJS   调用loader编译js源码。</li><li id="li1979425011517">OhosTestCompileJS/OhosTestBuildJS   ohos测试场景下，调用loader编译js源码。</li></ul> </div> <div class="tiledSection"><h3 id="section185256319556">Resources<i class="anchor-icon anchor-icon-link" anchorid="section185256319556" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334420__ul131891511583"><li id="li14189451135811">ProcessResource   处理和生成用文件方式编译资源的中间文件。</li><li id="li81816139915">PreviewProcessResource    预览场景下，处理和生成用文件方式编译资源的中间文件。</li><li id="li7682121935913">CompileResource   调用restool 编译资源。</li><li id="li99512785918">PreviewCompileResource   预览场景下，调用restool编译资源。</li><li id="li671313965913">ProcessLibs   收集hap和har依赖中的.so文件。</li></ul> </div> <div class="tiledSection"><h3 id="section1239823795519">Package<i class="anchor-icon anchor-icon-link" anchorid="section1239823795519" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334420__ul5547652145913"><li id="li105471652155910">PackageHap   调用打包工具打hap包。</li><li id="li2886205355915">PackageHar    调用打包工具打har包。</li><li id="li1786725818596">PackageHsp   调用打包工具打hsp包。</li><li id="li6153345011">PackageApp   调用打包工具打app包。</li><li id="li18877153516133">PackageHqf    调用打包工具打增量包。</li><li id="li5489512404">PackageSharedHar   调用打包工具打hsp模块的har包。</li><li id="li1946512308">PackageSharedTgz   调用打包工具将hsp模块生成的未签名hap和har包打包成tgz包。</li><li id="li11401959184410">PackageSignHar   调用打包工具打带签名的har包，当前仅在daemon模式下生效。</li></ul> </div> <div class="tiledSection"><h3 id="section1271134214559">Sign<i class="anchor-icon anchor-icon-link" anchorid="section1271134214559" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334420__ul126392716013"><li id="li263427406">SignHap   调用签名工具给hap包签名。</li><li id="li5203828409">SignHsp   调用签名工具给hsp包签名。</li><li id="li1661920343017">SignApp   调用签名工具给app包签名。</li><li id="li571723092019">SignHqf    调用签名工具给增量包签名。</li><li id="li133115391808">SignModuleRemoteHsp   调用签名工具给模块级ohpm仓上的hsp包签名。</li><li id="li13531846501">SignProjectRemoteHsp    调用签名工具给工程级ohpm仓上的hsp包签名。</li></ul> </div> <div class="tiledSection"><h3 id="section532614575511">Verification<i class="anchor-icon anchor-icon-link" anchorid="section532614575511" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334420__ul772515517013"><li id="li699212853914">PreBuild   模块级预检查任务。</li><li id="li187256511806">PreBuildApp   工程级预检查任务。</li><li id="li49161641113">PreCheckSyscap   syscap相关配置预检查任务。</li></ul> </div> <div class="tiledSection"><h3 id="section15393528554">Generate<i class="anchor-icon anchor-icon-link" anchorid="section15393528554" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334420__ul1244616141118"><li id="li124461414414">GenerateLoaderJson   生成loader.json文件。</li><li id="li5582101519116">GenerateMetadata   生成metadata.json文件。</li><li id="li1738015191910">SyscapTransform   syscap转换任务。</li><li id="li5213224015">MakePackInfo   生成模块级别的pack.info。</li><li id="li8141162916115">MakeProjectPackInfo  生成工程级别的pack.info。</li><li id="li17575154412317">ProcessPackageJson   对package.json文件进行处理。</li><li id="li15311633511">ProcessOHPackageJson   对oh_package.json5文件进行处理。</li><li id="li822024415111">GeneratePackRes   生成pack.res文件。</li><li id="li69241244615">CreateBuildProfile   生成hap/hsp的BuildProfile.ets文件。</li><li id="li542265016110">CreateHarBuildProfile   生成har的BuildProfile.ets文件。</li><li id="li249922902217">PrepareQuickfix   通过校验获取增量文件并输出到quickfix.json文件中。</li></ul> </div> <div class="tiledSection"><h3 id="section11498143205620">Config<i class="anchor-icon anchor-icon-link" anchorid="section11498143205620" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334420__ul181521646555"><li id="li10181112924912">ProcessProfile   处理module.json5文件。</li><li id="li12152846554">PrepareSharedHarResource   生成打包shared library的package.json和module.json。</li><li id="li12423361962">UnitTestProcessProfile   UnitTestBuild场景处理构建中间产物module.json文件。</li><li id="li998921012616">MergeProfile   合并module.json5文件。</li><li id="li129027151960">PreviewUpdateAssets   预览模式下，Stage模型在编译预览代码前更新前置任务生成的module.json和main_pages.json文件。</li></ul> </div> <div class="tiledSection"><h3 id="section122881135617">Native<i class="anchor-icon anchor-icon-link" anchorid="section122881135617" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334420__ul168963215619"><li id="li5896221467">BuildNativeWithNinja   将native代码编译成so文件。</li><li id="li109482221169">BuildNativeWithCmake   用CMake编译CPP源码。</li></ul> </div> <div class="tiledSection"><h3 id="section163711514125617">Help<i class="anchor-icon anchor-icon-link" anchorid="section163711514125617" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334420__ul19275358615"><li id="li1692783511619">tasks   查看hvigor的全部任务及详情。</li><li id="li18481411467">taskTree    查看当前工程涉及的任务树。</li></ul> </div> <div class="tiledSection"><h3 id="section748733013566">Other<i class="anchor-icon anchor-icon-link" anchorid="section748733013566" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334420__ul76901149218"><li id="li969014418216">ReplaceUnitTestIndexFile   单元测试替换入口文件。</li><li id="li929826623">ReplacePreviewerPage   接受预览器提供的参数替换页面文件中的参数。</li><li id="li1795318111428">OhosTestCopyMockConfigJson    测试框架执行mock时将mock-config.json拷贝到测试包中。</li><li id="li9169131914210">clean   清理生成的Build目录。</li><li id="li1039710201329">collectCoverage   基于仪表打点数据生成覆盖率统计报表。</li></ul> </div> <div class="tiledSection"><h3 id="section74761733185613">Sync<i class="anchor-icon anchor-icon-link" anchorid="section74761733185613" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334420__ul32891058363"><li id="li102898586616">init   初始化工程。</li></ul> </div> <div class="tiledSection"><h3 id="section11762837115617">Init<i class="anchor-icon anchor-icon-link" anchorid="section11762837115617" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334420__p55171312480">该任务类型与Sync下的init不同，该过程中无具体任务，主要负责执行调用hvigor前的准备工作。</p> </div> </div> <div></div></div>