<h1 _ngcontent-hkw-c119="" class="doc-title ng-star-inserted" title="某些特殊场景下（如附近存在磁场干扰、手机发烫或扫描到重复纹理等），出现平面漂移或者位姿数据跳变现象"> 某些特殊场景下（如附近存在磁场干扰、手机发烫或扫描到重复纹理等），出现平面漂移或者位姿数据跳变现象 </h1>

<div _ngcontent-hkw-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section1334813319581">现象描述<i class="anchor-icon anchor-icon-link" anchorid="section1334813319581" tips="复制节点链接"></i></h2>          <p>某些特殊场景下，如使用环境附近存在强磁场，手机处于高负载场景下（后台开启很多应用或长时间使用导致手机发烫），或者扫描到重复纹理（见下图）时，可能出现识别到的平面无法锚定到现实世界中，或者通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-capi-arengine#ga00df108c4ba187967a10e9c4d2e27d3a" target="_blank">HMS_AREngine_ARCamera_GetPose</a>接口获取的位姿信息出现大幅度跳变等现象。</p>     <div class="fignone">      <span class="figcap"><b>图1 </b>重复纹理的地板</span>     </div>     <p><span><img height="575.88468" originheight="4000" originwidth="3000" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114355.83785126929489616355846747934099:50001231000000:2800:630E505F342E0C61CD312CAEC3E58F13124BB674DB6F52483184520D5575B11F.jpg" title="点击放大" width="431.9175"></span></p>    </div>    <div class="tiledSection">     <h2 id="section620031714518">可能原因<i class="anchor-icon anchor-icon-link" anchorid="section620031714518" tips="复制节点链接"></i></h2>          <p>AR Engine通过获取到的加速度计传感器和磁力计传感器的信息进行平面计算和相机位姿计算，上述特殊场景下，系统传感器数据可能会存在异常，从而导致平面漂移或者位姿跳变的现象发生。</p>    </div>    <div class="tiledSection">     <h2 id="section0373152623612">处理步骤<i class="anchor-icon anchor-icon-link" anchorid="section0373152623612" tips="复制节点链接"></i></h2>          <p>建议应用对通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-capi-arengine#ga00df108c4ba187967a10e9c4d2e27d3a" target="_blank">HMS_AREngine_ARCamera_GetPose</a>接口获取到的位姿数据，按照实际应用使用场景进行滤波，如步行导航场景，应用可以缓存多帧数据，通过多帧数据可以计算得到运动速度，如果检测到此速度明显高于步行速度，证明此时AR数据已经不可信，可以丢弃此数据或者重启AR算法。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p><strong>计算运动速度</strong>：x,y,z为在t时刻的位姿数据的位移量。</p>       <p><span><img height="65.359525" originheight="94" originwidth="462" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114355.56924871913062650603966188770128:50001231000000:2800:3854BD9A5A6640C7711ABC2814863787C82E45FE206F81B2889054B26D8F98C6.png" title="点击放大" width="321.288765"></span></p>      </div></div></div>    </div>   </div>   <div></div></div>