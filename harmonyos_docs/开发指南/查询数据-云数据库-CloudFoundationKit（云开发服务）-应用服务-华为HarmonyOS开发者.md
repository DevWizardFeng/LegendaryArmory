<h1 _ngcontent-egn-c119="" class="doc-title ng-star-inserted" title="查询数据"> 查询数据 </h1>

<div _ngcontent-egn-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>云数据库通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section390417613213" target="_blank">query()</a>方法查询对象，并提供了丰富的谓词查询，比如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section9706571488" target="_blank">equalTo()</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section16955165444812" target="_blank">notEqualTo()</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section6276103955110" target="_blank">in()</a>等。通过单个或者多个链式过滤条件，开发者可以从存储区查询到满足特定条件的对象，也可以通过排序谓词对查询结果排序，或者通过限定查询返回数量谓词限定查询结果返回的数量。详细的查询条件请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section76501736191415" target="_blank">DatabaseQuery</a>。</p>    <p>应用会直接从云侧存储区服务器查询数据，本地不会缓存数据。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>每次的查询操作仅支持查询一个对象类型下的数据。</li>      </ul>      <ul>       <li>调用查询数据方法，有两种返回方式，返回一个Promise对象或者在参数中传入一个callback对象返回，下面以Promise为例详细说明。</li>      </ul>     </div></div></div>    <div class="tiledSection">     <h2 id="section133632819295">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="section133632819295" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002440934228__zh-cn_topic_0000002440774444_p176909276175">支持Phone、Tablet设备。并且从5.1.0(18)版本开始，新增支持Wearable设备；从5.1.1(19)版本开始，新增支持TV设备。</p>    </div>    <div class="tiledSection">     <h2 id="section160501863017">前提条件<i class="anchor-icon anchor-icon-link" anchorid="section160501863017" tips="复制节点链接"></i></h2>          <p>已<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cloudfoundation-database-initialize">初始化数据库访问</a>。</p>    </div>    <div class="tiledSection">     <h2 id="section84560562138">简单查询<i class="anchor-icon anchor-icon-link" anchorid="section84560562138" tips="复制节点链接"></i></h2>          <p>开发者可以在无查询条件时，获取一个对象类型中所有的对象；也可以指定单个查询条件，来获取满足该条件的对象。</p>     <ul>      <li>查询对象类型BookInfo的所有数据。       <div _ngcontent-egn-c106="" class="highlight-div"><div _ngcontent-egn-c106="" class="highlight-div-header"><div _ngcontent-egn-c106="" class="highlight-div-header-left"><div _ngcontent-egn-c106="" class="handle-button expand-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-egn-c106="" class="highlight-div-header-right"><div _ngcontent-egn-c106="" class="handle-button ai-button"></div><div _ngcontent-egn-c106="" class="handle-button line-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-egn-c106="" class="handle-button theme-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-egn-c106="" class="handle-button copy-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-egn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">queryAll</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultArray = <span class="hljs-keyword">await</span> databaseZone.<span class="hljs-title function_">query</span>(condition);</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in querying data, result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(resultArray)}</span>`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to query data, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p>后续hilog都需要从@kit.PerformanceAnalysisKit中引入，将不在示例代码中呈现。</p>        </div></div></div></li>      <li>通过异步侦听的方式查询“bookName”参数对应的书籍。       <div _ngcontent-egn-c106="" class="highlight-div"><div _ngcontent-egn-c106="" class="highlight-div-header"><div _ngcontent-egn-c106="" class="highlight-div-header-left"><div _ngcontent-egn-c106="" class="handle-button expand-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-egn-c106="" class="highlight-div-header-right"><div _ngcontent-egn-c106="" class="handle-button ai-button"></div><div _ngcontent-egn-c106="" class="handle-button line-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-egn-c106="" class="handle-button theme-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-egn-c106="" class="handle-button copy-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-egn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">queryBook</span>(<span class="hljs-attr">bookName</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">BookInfo</span>&gt; {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    condition.<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">'bookName'</span>, bookName);</li><li>    <span class="hljs-keyword">let</span> resultArray = <span class="hljs-keyword">await</span> databaseZone.<span class="hljs-title function_">query</span>(condition);</li><li>    <span class="hljs-keyword">let</span> bookInfo = resultArray[<span class="hljs-number">0</span>];</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in querying data, result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(resultArray)}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(bookInfo);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to query data, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(err);</li><li>  }</li><li>}</li></ol></pre></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="section513519204198">复合查询<i class="anchor-icon anchor-icon-link" anchorid="section513519204198" tips="复制节点链接"></i></h2>          <p>开发者可以通过多个链式过滤条件，来获取满足条件的对象。多个链式条件之间默认用“与”运算。</p>     <ul>      <li>构造查询条件，并调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section390417613213" target="_blank">query()</a>方法，查询“bookName”包含“数据库”，“price”大于20.0并且小于50.0的书籍。       <div _ngcontent-egn-c106="" class="highlight-div"><div _ngcontent-egn-c106="" class="highlight-div-header"><div _ngcontent-egn-c106="" class="highlight-div-header-left"><div _ngcontent-egn-c106="" class="handle-button expand-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-egn-c106="" class="highlight-div-header-right"><div _ngcontent-egn-c106="" class="handle-button ai-button"></div><div _ngcontent-egn-c106="" class="handle-button line-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-egn-c106="" class="handle-button theme-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-egn-c106="" class="handle-button copy-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-egn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li>condition.<span class="hljs-title function_">contains</span>(<span class="hljs-string">'bookName'</span>, <span class="hljs-string">'数据库'</span>)</li><li>  .<span class="hljs-title function_">greaterThan</span>(<span class="hljs-string">'price'</span>, <span class="hljs-number">20.0</span>)</li><li>  .<span class="hljs-title function_">and</span>()</li><li>  .<span class="hljs-title function_">lessThan</span>(<span class="hljs-string">'price'</span>, <span class="hljs-number">50.0</span>);</li><li><span class="hljs-keyword">let</span> resultArray = <span class="hljs-keyword">await</span> databaseZone.<span class="hljs-title function_">query</span>(condition);</li></ol></pre></div></div></li>      <li>构造查询条件，并调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section390417613213" target="_blank">query()</a>方法，查询“bookName”包含“数据库”，“price”在小于20.0或者大于50.0区间的书籍。       <div _ngcontent-egn-c106="" class="highlight-div"><div _ngcontent-egn-c106="" class="highlight-div-header"><div _ngcontent-egn-c106="" class="highlight-div-header-left"><div _ngcontent-egn-c106="" class="handle-button expand-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-egn-c106="" class="highlight-div-header-right"><div _ngcontent-egn-c106="" class="handle-button ai-button"></div><div _ngcontent-egn-c106="" class="handle-button line-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-egn-c106="" class="handle-button theme-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-egn-c106="" class="handle-button copy-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-egn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li>condition.<span class="hljs-title function_">contains</span>(<span class="hljs-string">'bookName'</span>, <span class="hljs-string">'数据库'</span>)</li><li>  .<span class="hljs-title function_">lessThan</span>(<span class="hljs-string">'price'</span>, <span class="hljs-number">20.0</span>)</li><li>  .<span class="hljs-title function_">or</span>()</li><li>  .<span class="hljs-title function_">greaterThan</span>(<span class="hljs-string">'price'</span>, <span class="hljs-number">50.0</span>);</li><li><span class="hljs-keyword">let</span> resultArray = <span class="hljs-keyword">await</span> databaseZone.<span class="hljs-title function_">query</span>(condition);</li></ol></pre></div></div></li>      <li>构造查询条件，并调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section390417613213" target="_blank">query()</a>方法，查询“bookName”包含“史记”，“author”是“司马迁”，“price”大于60.0的书籍。       <div _ngcontent-egn-c106="" class="highlight-div"><div _ngcontent-egn-c106="" class="highlight-div-header"><div _ngcontent-egn-c106="" class="highlight-div-header-left"><div _ngcontent-egn-c106="" class="handle-button expand-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-egn-c106="" class="highlight-div-header-right"><div _ngcontent-egn-c106="" class="handle-button ai-button"></div><div _ngcontent-egn-c106="" class="handle-button line-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-egn-c106="" class="handle-button theme-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-egn-c106="" class="handle-button copy-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-egn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li>condition.<span class="hljs-title function_">contains</span>(<span class="hljs-string">'bookName'</span>, <span class="hljs-string">'史记'</span>)</li><li>  .<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">'author'</span>, <span class="hljs-string">'司马迁'</span>)</li><li>  .<span class="hljs-title function_">greaterThan</span>(<span class="hljs-string">'price'</span>, <span class="hljs-number">60.0</span>);</li><li><span class="hljs-keyword">let</span> resultArray = <span class="hljs-keyword">await</span> databaseZone.<span class="hljs-title function_">query</span>(condition);</li></ol></pre></div></div></li>      <li>构造查询条件，并调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section390417613213" target="_blank">query()</a>方法，查询“bookName”包含“自传”，并且“author”是“齐白石”，或者“author”是“司马迁”，并且“price”大于60.0的书籍。       <div _ngcontent-egn-c106="" class="highlight-div"><div _ngcontent-egn-c106="" class="highlight-div-header"><div _ngcontent-egn-c106="" class="highlight-div-header-left"><div _ngcontent-egn-c106="" class="handle-button expand-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-egn-c106="" class="highlight-div-header-right"><div _ngcontent-egn-c106="" class="handle-button ai-button"></div><div _ngcontent-egn-c106="" class="handle-button line-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-egn-c106="" class="handle-button theme-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-egn-c106="" class="handle-button copy-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-egn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li>condition.<span class="hljs-title function_">contains</span>(<span class="hljs-string">'bookName'</span>, <span class="hljs-string">'自传'</span>)</li><li>  .<span class="hljs-title function_">beginGroup</span>()</li><li>  .<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">'author'</span>, <span class="hljs-string">'齐白石'</span>)</li><li>  .<span class="hljs-title function_">or</span>()</li><li>  .<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">'author'</span>, <span class="hljs-string">'司马迁'</span>)</li><li>  .<span class="hljs-title function_">endGroup</span>()</li><li>  .<span class="hljs-title function_">greaterThan</span>(<span class="hljs-string">'price'</span>, <span class="hljs-number">60.0</span>);</li><li><span class="hljs-keyword">let</span> resultArray = <span class="hljs-keyword">await</span> databaseZone.<span class="hljs-title function_">query</span>(condition);</li></ol></pre></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="section73561349102520">数据排序<i class="anchor-icon anchor-icon-link" anchorid="section73561349102520" tips="复制节点链接"></i></h2>          <p>开发者可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section0344144315513" target="_blank">orderByAsc()</a>或者<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section1754544435111" target="_blank">orderByDesc()</a>实现对查询结果集中的对象按某个字段进行升序或者降序排列，排序谓词需要在其它查询谓词之后且在限定数据查询数量谓词之前。</p>     <div _ngcontent-egn-c106="" class="highlight-div"><div _ngcontent-egn-c106="" class="highlight-div-header"><div _ngcontent-egn-c106="" class="highlight-div-header-left"><div _ngcontent-egn-c106="" class="handle-button expand-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-egn-c106="" class="highlight-div-header-right"><div _ngcontent-egn-c106="" class="handle-button ai-button"></div><div _ngcontent-egn-c106="" class="handle-button line-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-egn-c106="" class="handle-button theme-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-egn-c106="" class="handle-button copy-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-egn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li>condition.<span class="hljs-title function_">lessThan</span>(<span class="hljs-string">'price'</span>, <span class="hljs-number">50.0</span>)</li><li>  .<span class="hljs-title function_">orderByDesc</span>(<span class="hljs-string">'price'</span>);</li><li><span class="hljs-keyword">let</span> resultArray = <span class="hljs-keyword">await</span> databaseZone.<span class="hljs-title function_">query</span>(condition);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section7739201722514">随机查询<i class="anchor-icon anchor-icon-link" anchorid="section7739201722514" tips="复制节点链接"></i></h2>          <p>从6.0.1(21)版本开始，新增支持随机查询功能。</p>     <p>开发者可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section19149641220" target="_blank">orderByRandom()</a>按随机顺序展示查询结果集中的对象。</p>     <p>该方法适用于推荐随机内容、播放随机音视频等场景。</p>     <div _ngcontent-egn-c106="" class="highlight-div"><div _ngcontent-egn-c106="" class="highlight-div-header"><div _ngcontent-egn-c106="" class="highlight-div-header-left"><div _ngcontent-egn-c106="" class="handle-button expand-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-egn-c106="" class="highlight-div-header-right"><div _ngcontent-egn-c106="" class="handle-button ai-button"></div><div _ngcontent-egn-c106="" class="handle-button line-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-egn-c106="" class="handle-button theme-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-egn-c106="" class="handle-button copy-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-egn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li>condition.<span class="hljs-title function_">orderByRandom</span>()</li><li>  .<span class="hljs-title function_">limit</span>(<span class="hljs-number">10</span>);</li><li><span class="hljs-keyword">let</span> resultArray = <span class="hljs-keyword">await</span> databaseZone.<span class="hljs-title function_">query</span>(condition);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1089782202712">限定数据查询返回数量<i class="anchor-icon anchor-icon-link" anchorid="section1089782202712" tips="复制节点链接"></i></h2>          <p>在查询数据时，开发者可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section9232724175819" target="_blank">limit()</a>限定查询返回数据的起始位置和数量，实现数据的分页。例如与排序查询谓词组合使用，可以实现获取top-N条数据。</p>     <p>对查询结果中的对象限定查询返回数量时，限定数据查询返回数量谓词在所有其他谓词查询之后。</p>     <ul>      <li>构造查询条件，并调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section390417613213" target="_blank">query()</a>方法，查询所有价格小于50.0的书籍，并且只显示最开始10条记录。       <div _ngcontent-egn-c106="" class="highlight-div"><div _ngcontent-egn-c106="" class="highlight-div-header"><div _ngcontent-egn-c106="" class="highlight-div-header-left"><div _ngcontent-egn-c106="" class="handle-button expand-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-egn-c106="" class="highlight-div-header-right"><div _ngcontent-egn-c106="" class="handle-button ai-button"></div><div _ngcontent-egn-c106="" class="handle-button line-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-egn-c106="" class="handle-button theme-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-egn-c106="" class="handle-button copy-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-egn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li>condition.<span class="hljs-title function_">lessThan</span>(<span class="hljs-string">'price'</span>, <span class="hljs-number">50.0</span>)</li><li>  .<span class="hljs-title function_">limit</span>(<span class="hljs-number">10</span>);</li><li><span class="hljs-keyword">let</span> resultArray = <span class="hljs-keyword">await</span> databaseZone.<span class="hljs-title function_">query</span>(condition);</li></ol></pre></div></div></li>      <li>构造查询条件，并调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section390417613213" target="_blank">query()</a>方法，查询所有价格小于50.0的书籍，并将查询结果按照降序排序，只显示价格排序从第6条开始的10条记录。       <div _ngcontent-egn-c106="" class="highlight-div"><div _ngcontent-egn-c106="" class="highlight-div-header"><div _ngcontent-egn-c106="" class="highlight-div-header-left"><div _ngcontent-egn-c106="" class="handle-button expand-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-egn-c106="" class="highlight-div-header-right"><div _ngcontent-egn-c106="" class="handle-button ai-button"></div><div _ngcontent-egn-c106="" class="handle-button line-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-egn-c106="" class="handle-button theme-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-egn-c106="" class="handle-button copy-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-egn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li>condition.<span class="hljs-title function_">lessThan</span>(<span class="hljs-string">'price'</span>, <span class="hljs-number">50.0</span>)</li><li>  .<span class="hljs-title function_">orderByDesc</span>(<span class="hljs-string">'price'</span>)</li><li>  .<span class="hljs-title function_">limit</span>(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>);</li><li><span class="hljs-keyword">let</span> resultArray = <span class="hljs-keyword">await</span> databaseZone.<span class="hljs-title function_">query</span>(condition);</li></ol></pre></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="section1751320231296">对查询结果进行算术计算<i class="anchor-icon anchor-icon-link" anchorid="section1751320231296" tips="复制节点链接"></i></h2>          <p>在查询数据时，可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section1248132432017" target="_blank">calculateQuery()</a>对查询结果对象中的某个字段进行算术计算并返回计算的结果。</p>     <p>构造查询条件，并调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-clouddatabase#section1248132432017" target="_blank">calculateQuery()</a>方法，查询所有价格小于50.0的书籍，并且计算所有书籍价格的平均值。</p>     <div _ngcontent-egn-c106="" class="highlight-div"><div _ngcontent-egn-c106="" class="highlight-div-header"><div _ngcontent-egn-c106="" class="highlight-div-header-left"><div _ngcontent-egn-c106="" class="handle-button expand-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-egn-c106="" class="highlight-div-header-right"><div _ngcontent-egn-c106="" class="handle-button ai-button"></div><div _ngcontent-egn-c106="" class="handle-button line-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-egn-c106="" class="handle-button theme-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-egn-c106="" class="handle-button copy-button"><div _ngcontent-egn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-egn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">calculateQuery</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    condition.<span class="hljs-title function_">lessThan</span>(<span class="hljs-string">'price'</span>, <span class="hljs-number">50.0</span>);</li><li>    <span class="hljs-keyword">let</span> resultNum = <span class="hljs-keyword">await</span> databaseZone.<span class="hljs-title function_">calculateQuery</span>(condition, <span class="hljs-string">'price'</span>, cloudDatabase.<span class="hljs-property">QueryCalculate</span>.<span class="hljs-property">AVERAGE</span>);</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in calculating queried data, result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(resultNum)}</span>`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to calculate queried data, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>