<h1 _ngcontent-jri-c119="" class="doc-title ng-star-inserted" title="标准化数据结构 (ArkTS)"> 标准化数据结构 (ArkTS) </h1>

<div _ngcontent-jri-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="场景介绍">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="场景介绍" tips="复制节点链接"></i></h2>          <p>针对<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-uniformtypedescriptor#uniformdatatype" target="_blank">UTD标准化数据类型</a>中的部分常见类型，为了方便业务使用，我们按照不同的数据类型提供了标准化数据结构，例如系统定义的桌面图标类型（对应的标准化数据类型标识为'openharmony.app-item'），我们明确定义了该数据结构对应的相关描述信息。</p>     <p>某些业务场景下应用可以直接使用我们具体定义的UTD标准化数据结构，例如跨应用拖拽场景。拖出方应用可以按照标准化数据结构将拖拽数据写入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#dragevent7" target="_blank">拖拽事件</a>，拖入方应用从拖拽事件中读取拖拽数据并按照标准化数据结构进行数据的解析。这使得不同应用间的数据交互遵从相同的标准定义，有效减少了跨应用数据交互的开发工作量。</p>    </div>    <div class="tiledSection">     <h2 id="接口说明">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h2>          <p>UDMF针对部分标准化数据类型定义的标准化数据结构如下所示：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.3.1.4.1.1" valign="top" width="33.33333333333333%">数据结构</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.3.1.4.1.2" valign="top" width="33.33333333333333%">数据类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.3.1.4.1.3" valign="top" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-uniformdatastruct#plaintext" target="_blank">PlainText</a></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">'general.plain-text'</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">纯文本。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-uniformdatastruct#hyperlink" target="_blank">Hyperlink</a></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">'general.hyperlink'</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">超链接。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-uniformdatastruct#html" target="_blank">HTML</a></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">'general.html'</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">富文本。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-uniformdatastruct#openharmonyappitem" target="_blank">OpenHarmonyAppItem</a></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">'openharmony.app-item'</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">图标。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-uniformdatastruct#contentform14" target="_blank">ContentForm</a></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">'general.content-form'</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">内容卡片。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <p>以使用标准化数据结构定义数据内容（包含超链接、纯文本两条数据记录）为例，提供基本的开发步骤。</p>     <p>数据提供方可通过UDMF提供的addRecord()接口添加数据记录，使用getRecords()接口获取当前数据对象内的所有数据记录。</p>     <div _ngcontent-jri-c106="" class="highlight-div"><div _ngcontent-jri-c106="" class="highlight-div-header"><div _ngcontent-jri-c106="" class="highlight-div-header-left"><div _ngcontent-jri-c106="" class="handle-button expand-button"><div _ngcontent-jri-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jri-c106="" class="highlight-div-header-right"><div _ngcontent-jri-c106="" class="handle-button ai-button"></div><div _ngcontent-jri-c106="" class="handle-button line-button"><div _ngcontent-jri-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jri-c106="" class="handle-button theme-button"><div _ngcontent-jri-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jri-c106="" class="handle-button copy-button"><div _ngcontent-jri-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jri-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 1. 导入unifiedDataChannel和uniformTypeDescriptor模块。</span></li><li><span class="hljs-keyword">import</span> { uniformDataStruct, uniformTypeDescriptor, unifiedDataChannel } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li>
</li><li><span class="hljs-comment">// 2. 创建超链接数据记录。</span></li><li><span class="hljs-keyword">let</span> hyperlinkDetails : <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {</li><li>  <span class="hljs-string">'attr1'</span>: <span class="hljs-string">'value1'</span>,</li><li>  <span class="hljs-string">'attr2'</span>: <span class="hljs-string">'value2'</span></li><li>}</li><li><span class="hljs-keyword">let</span> hyperlink : uniformDataStruct.<span class="hljs-property">Hyperlink</span> = {</li><li>  <span class="hljs-attr">uniformDataType</span>:<span class="hljs-string">'general.hyperlink'</span>,</li><li>  url : <span class="hljs-string">'www.XXX.com'</span>,</li><li>  description : <span class="hljs-string">'This is the description of this hyperlink'</span>,</li><li>  details : hyperlinkDetails</li><li>}</li><li>
</li><li>hyperlink.<span class="hljs-property">description</span> = <span class="hljs-string">'...'</span>;  <span class="hljs-comment">// 修改hyperlink属性description</span></li><li>
</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`hyperlink url = <span class="hljs-subst">${hyperlink.url}</span>`</span>);  <span class="hljs-comment">// 访问对象属性。</span></li><li>
</li><li><span class="hljs-comment">// 3. 创建纯文本数据类型记录，将其添加到刚才创建的UnifiedData对象。</span></li><li><span class="hljs-keyword">let</span> plainTextDetails : <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {</li><li>  <span class="hljs-string">'attr1'</span>: <span class="hljs-string">'value1'</span>,</li><li>  <span class="hljs-string">'attr2'</span>: <span class="hljs-string">'value2'</span></li><li>}</li><li><span class="hljs-keyword">let</span> plainText : uniformDataStruct.<span class="hljs-property">PlainText</span> = {</li><li>  <span class="hljs-attr">uniformDataType</span>: <span class="hljs-string">'general.plain-text'</span>,</li><li>  textContent : <span class="hljs-string">'This is plainText textContent example'</span>,</li><li>  <span class="hljs-keyword">abstract</span> : <span class="hljs-string">'this is abstract'</span>,</li><li>  details : plainTextDetails</li><li>}</li><li><span class="hljs-comment">// 4. 创建一个统一数据对象实例。</span></li><li><span class="hljs-keyword">let</span> unifiedData = <span class="hljs-keyword">new</span> unifiedDataChannel.<span class="hljs-title class_">UnifiedData</span>();</li><li><span class="hljs-keyword">let</span> hyperlinkRecord = <span class="hljs-keyword">new</span> unifiedDataChannel.<span class="hljs-title class_">UnifiedRecord</span>(uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">HYPERLINK</span>, hyperlink);</li><li><span class="hljs-keyword">let</span> plainTextRecord = <span class="hljs-keyword">new</span> unifiedDataChannel.<span class="hljs-title class_">UnifiedRecord</span>(uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">PLAIN_TEXT</span>, plainText);</li><li>
</li><li><span class="hljs-comment">// 5. 添加plainText数据记录。</span></li><li>unifiedData.<span class="hljs-title function_">addRecord</span>(hyperlinkRecord);</li><li>unifiedData.<span class="hljs-title function_">addRecord</span>(plainTextRecord);</li><li>
</li><li><span class="hljs-comment">// 6. 记录添加完成后，可获取当前UnifiedData对象内的所有数据记录。</span></li><li><span class="hljs-keyword">let</span> records = unifiedData.<span class="hljs-title function_">getRecords</span>();</li><li>
</li><li><span class="hljs-comment">// 7. 遍历每条记录，判断该记录的数据类型，转换为子类对象，得到原数据记录。</span></li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; records.<span class="hljs-property">length</span>; i ++) {</li><li>  <span class="hljs-keyword">let</span> unifiedDataRecord = records[i] <span class="hljs-keyword">as</span> unifiedDataChannel.<span class="hljs-property">UnifiedRecord</span>;</li><li>  <span class="hljs-keyword">let</span> record = unifiedDataRecord.<span class="hljs-title function_">getValue</span>() <span class="hljs-keyword">as</span> <span class="hljs-built_in">object</span>;</li><li>  <span class="hljs-keyword">if</span> (record != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-comment">// 读取该数据记录的类型</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">type</span> : <span class="hljs-built_in">string</span> = record[<span class="hljs-string">"uniformDataType"</span>];</li><li>    <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">type</span>) {</li><li>      <span class="hljs-keyword">case</span> uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">HYPERLINK</span>:</li><li>        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(record).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'show records: '</span> + key + <span class="hljs-string">', value:'</span> + record[key]);</li><li>        });</li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-keyword">case</span> uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">PLAIN_TEXT</span>:</li><li>        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(record).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'show records: '</span> + key + <span class="hljs-string">', value:'</span> + record[key]);</li><li>        });</li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-attr">default</span>:</li><li>        <span class="hljs-keyword">break</span>;</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>