<h1 _ngcontent-mml-c119="" class="doc-title ng-star-inserted" title="概述"> 概述 </h1>

<div _ngcontent-mml-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>Wallet Kit中的交通卡服务提供了开通新卡、在线充值、卡片更新和删卡的开放能力。由于交通卡的实际发行方是交通卡公司，所以开发者的app想要实现上述功能，需要：</p> <ol><li>对接支付机构（如：华为支付、微信、支付宝、银联等），完成开卡、充值的订单支付。</li><li>获得交通卡公司的同意并且用开发者的业务服务器对接交通卡公司的系统完成上述功能对应的业务申请。</li></ol> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>交通卡服务开放能力<strong>仅对受邀应用</strong>开放使用。</p> </div></div></div> <div class="tiledSection"><h2 id="section1313210513617">整体架构<i class="anchor-icon anchor-icon-link" anchorid="section1313210513617" tips="复制节点链接"></i></h2><p><span><img height="503.35108359133125" originheight="627" originwidth="1146" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114539.51735152912015698495726093066509:50001231000000:2800:6CA7E210AA438284774C15236D04E1F4FBB6EA3A42BC5C9B151AAA12AB5A54E6.png" title="点击放大" width="920"></span></p> </div> <ul><li><strong>角色分工：</strong></li></ul> <p><strong>Your App</strong><strong>：</strong>开发者的客户端app，实现开卡、卡信息展示、充值、更新和删卡等UX体验</p> <p><strong>Your Server：</strong>开发者的业务服务器。负责受理来自开发者的客户端的开卡、充值和卡片管理的业务请求，并将相应的任务下发给交通卡公司的SP TSM系统。还需对接支付机构完成开卡、充值场景的订单支付。</p> <p><strong>支付机构：</strong>完成支付订单的支付。</p> <p><strong>SP TSM：</strong>交通卡公司的TSM系统，负责添卡、充值和卡片管理的指令生成。</p> <p><strong>Wallet App：</strong>负责实现Wallet Kit的api。将来自于SP TSM系统的添卡、充值和卡片管理的指令下发到安全芯片。</p> <p><strong>Wallet Server：</strong>对接SP TSM系统，实现添卡、充值和卡片管理的指令的获取。</p> <ul><li><strong>接口说明</strong></li></ul>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.1.4.1.1" valign="top" width="7.870000000000001%"><p>接口</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.1.4.1.2" valign="top" width="15.35%"><p>调用方向</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.1.4.1.3" valign="top" width="76.78%"><p>接口功能说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="7.870000000000001%"><p>IF1</p> </td> <td class="cellrowborder" valign="top" width="15.35%"><p>Your App -&gt;</p> <p>Wallet App</p> </td> <td class="cellrowborder" valign="top" width="76.78%"><p>Wallet Kit api，包括卡片状态和信息查询接口、开卡条件检查接口、开卡接口、充值接口、卡片更新接口和删卡接口。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="7.870000000000001%"><p>IF2</p> </td> <td class="cellrowborder" valign="top" width="15.35%"><p>Your App -&gt; Your Server</p> </td> <td class="cellrowborder" valign="top" width="76.78%"><p>向开发者的业务服务器发起开卡、充值、卡片更新和删卡的业务操作请求。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="7.870000000000001%"><p>IF3</p> </td> <td class="cellrowborder" valign="top" width="15.35%"><p>Your Server-&gt; 支付机构</p> </td> <td class="cellrowborder" valign="top" width="76.78%"><p>完成开卡和充值的订单支付。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="7.870000000000001%"><p>IF4</p> </td> <td class="cellrowborder" valign="top" width="15.35%"><p>Your Server-&gt; SP TSM</p> </td> <td class="cellrowborder" valign="top" width="76.78%"><p>向交通卡公司的SP TSM系统提交开卡、充值、卡片更新和删卡的业务请求。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="7.870000000000001%"><p>IF5</p> </td> <td class="cellrowborder" valign="top" width="15.35%"><p>Wallet Server-&gt; SP TSM</p> </td> <td class="cellrowborder" valign="top" width="76.78%"><p>向交通卡公司的SP TSM系统获取开卡、充值、卡片更新和删卡的业务请求以及实现这些业务功能的指令。</p> </td> </tr>  </tbody></table></div> </div> </div> <div></div></div>