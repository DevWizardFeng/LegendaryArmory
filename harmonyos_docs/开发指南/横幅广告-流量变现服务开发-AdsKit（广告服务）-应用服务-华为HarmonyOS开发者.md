<h1 _ngcontent-fgl-c119="" class="doc-title ng-star-inserted" title="横幅广告"> 横幅广告 </h1>

<div _ngcontent-fgl-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section17817731534">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section17817731534" tips="复制节点链接"></i></h2><p>横幅广告又名Banner广告，是在应用程序顶部、中部或底部占据一个位置的矩形图片，广告内容每隔一段时间会自动刷新。</p> <p><span><img originheight="661" originwidth="320" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114542.09415498179079228800069570694397:50001231000000:2800:24042DC5974621E8FCEDA97CD458D869910D50E6DC24B9B4FA1CC8C3C7725922.png" width="320" height="661"></span></p> </div> <div class="tiledSection"><h2 id="section65401229123616">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section65401229123616" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.2.2.1.3.1.1" valign="top" width="50%"><p>接口名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.2.2.1.3.1.2" valign="top" width="50%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-autoadcomponent" target="_blank">AutoAdComponent</a>({adParam: advertising.AdRequestParams, adOptions: advertising.AdOptions, displayOptions: advertising.AdDisplayOptions, interactionListener: advertising.AdInteractionListener})</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>展示广告，通过AdRequestParams、AdOptions进行广告请求参数设置，通过AdDisplayOptions进行广告展示参数设置，通过AdInteractionListener监听广告状态回调。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section0420810836">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section0420810836" tips="复制节点链接"></i></h2><ol><li><span>导入相关模块。</span><p></p><div _ngcontent-fgl-c106="" class="highlight-div"><div _ngcontent-fgl-c106="" class="highlight-div-header"><div _ngcontent-fgl-c106="" class="highlight-div-header-left"><div _ngcontent-fgl-c106="" class="handle-button expand-button"><div _ngcontent-fgl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fgl-c106="" class="highlight-div-header-right"><div _ngcontent-fgl-c106="" class="handle-button ai-button"></div><div _ngcontent-fgl-c106="" class="handle-button line-button"><div _ngcontent-fgl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fgl-c106="" class="handle-button theme-button"><div _ngcontent-fgl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fgl-c106="" class="handle-button copy-button"><div _ngcontent-fgl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fgl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityAccessCtrl, common, <span class="hljs-title class_">PermissionRequestResult</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { advertising, <span class="hljs-title class_">AutoAdComponent</span>, identifier } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AdsKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li></ol></pre></div></div> <p></p></li><li><span>获取OAID。</span><p></p><p>若需提升广告推送精准度，可以在请求参数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-advertising#adrequestparams" target="_blank">AdRequestParams</a>中添加oaid属性以提升广告推送精准度和广告填充率。</p> <p>如何获取OAID参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/oaid-service" target="_blank">获取OAID信息</a>。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>使用以下示例中提供的测试广告位时，必须先获取OAID信息。</p> </div></div></div> <p></p></li><li><span>请求和展示广告。</span><p></p><p>在您的页面中使用AutoAdComponent组件请求和展示横幅广告。</p> <p>请求广告关键参数如下所示：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.3.2.3.1.5.1.1" valign="top" width="14.21%"><p>请求广告参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.3.2.3.1.5.1.2" valign="top" width="13.900000000000002%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.3.2.3.1.5.1.3" valign="top" width="9.9%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.3.2.3.1.5.1.4" valign="top" width="61.99%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="14.21%"><p>adType</p> </td> <td class="cellrowborder" valign="top" width="13.900000000000002%"><p>number</p> </td> <td class="cellrowborder" valign="top" width="9.9%"><p>是</p> </td> <td class="cellrowborder" valign="top" width="61.99%"><p>请求广告类型，横幅广告类型为8。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="14.21%"><p>adId</p> </td> <td class="cellrowborder" valign="top" width="13.900000000000002%"><p>string</p> </td> <td class="cellrowborder" valign="top" width="9.9%"><p>是</p> </td> <td class="cellrowborder" valign="top" width="61.99%"><p>广告位ID。</p> <ul><li>如果仅调测广告，可使用测试广告位ID：testw6vs28auh3。</li><li>如果要接入正式广告，则需要申请正式的广告位ID。可在应用发布前进入<a href="https://developer.huawei.com/consumer/cn/monetize" target="_blank">流量变现官网</a>，点击“开始变现”，登录<a href="https://developer.huawei.com/consumer/cn/service/ads/publisher/html/index.html?lang=zh" target="_blank">鲸鸿动能媒体服务平台</a>进行申请，具体操作详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/monetize/zhanshiweichuangjian-0000001132700049" target="_blank">展示位创建</a>。</li></ul> </td> </tr> <tr><td class="cellrowborder" valign="top" width="14.21%"><p>adWidth</p> </td> <td class="cellrowborder" valign="top" width="13.900000000000002%"><p>number</p> </td> <td class="cellrowborder" valign="top" width="9.9%"><p>是</p> </td> <td class="cellrowborder" valign="top" width="61.99%"><p>广告位宽，单位vp。宽和高支持360*57和360*144两种尺寸。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="14.21%"><p>adHeight</p> </td> <td class="cellrowborder" valign="top" width="13.900000000000002%"><p>number</p> </td> <td class="cellrowborder" valign="top" width="9.9%"><p>是</p> </td> <td class="cellrowborder" valign="top" width="61.99%"><p>广告位高，单位vp。宽和高支持360*57和360*144两种尺寸。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="14.21%"><p>oaid</p> </td> <td class="cellrowborder" valign="top" width="13.900000000000002%"><p>string</p> </td> <td class="cellrowborder" valign="top" width="9.9%"><p>否</p> </td> <td class="cellrowborder" valign="top" width="61.99%"><p>开放匿名设备标识符，用于精准推送广告。不填无法获取到个性化广告。</p> </td> </tr>  </tbody></table></div> </div> <p>展示广告关键参数如下所示：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.3.2.5.1.5.1.1" valign="top" width="14.21%"><p>展示广告参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.3.2.5.1.5.1.2" valign="top" width="13.900000000000002%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.3.2.5.1.5.1.3" valign="top" width="9.9%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.3.2.5.1.5.1.4" valign="top" width="61.99%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="14.21%"><p>refreshTime</p> </td> <td class="cellrowborder" valign="top" width="13.900000000000002%"><p>number</p> </td> <td class="cellrowborder" valign="top" width="9.9%"><p>否</p> </td> <td class="cellrowborder" valign="top" width="61.99%"><p>横幅广告轮播时间。单位ms，取值范围[30000, 120000]。</p> <p>如果不设置或取值为非数字或小于等于0的数字，则不轮播。设置小于30000的数字取值30000，设置大于120000的数字取值120000。</p> </td> </tr>  </tbody></table></div> </div> <p>展示广告通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-advertising#adinteractionlistener" target="_blank">AdInteractionListener</a>监听广告状态回调，涉及的回调状态如下所示：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.3.2.7.1.4.1.1" valign="top" width="17.1%"><p>回调状态</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.3.2.7.1.4.1.2" valign="top" width="17.130000000000003%"><p>说明</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.3.2.7.1.4.1.3" valign="top" width="65.77%"><p>使用建议</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="17.1%"><p>onAdOpen</p> </td> <td class="cellrowborder" valign="top" width="17.130000000000003%"><p>打开广告。</p> </td> <td class="cellrowborder" valign="top" width="65.77%"><p>-</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="17.1%"><p>onAdClick</p> </td> <td class="cellrowborder" valign="top" width="17.130000000000003%"><p>点击广告。</p> </td> <td class="cellrowborder" valign="top" width="65.77%"><p>-</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="17.1%"><p>onAdClose</p> </td> <td class="cellrowborder" valign="top" width="17.130000000000003%"><p>关闭广告。</p> </td> <td class="cellrowborder" valign="top" width="65.77%"><p>用户关闭广告时触发，需要将广告组件隐藏。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="17.1%"><p>onAdLoad</p> </td> <td class="cellrowborder" valign="top" width="17.130000000000003%"><p>广告加载成功。</p> </td> <td class="cellrowborder" valign="top" width="65.77%"><p>-</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="17.1%"><p>onAdFail</p> </td> <td class="cellrowborder" valign="top" width="17.130000000000003%"><p>广告加载失败。</p> </td> <td class="cellrowborder" valign="top" width="65.77%"><p>广告加载失败时触发，需要将广告组件隐藏。</p> </td> </tr>  </tbody></table></div> </div> <p>示例代码如下所示：</p> <div _ngcontent-fgl-c106="" class="highlight-div"><div _ngcontent-fgl-c106="" class="highlight-div-header"><div _ngcontent-fgl-c106="" class="highlight-div-header-left"><div _ngcontent-fgl-c106="" class="handle-button expand-button"><div _ngcontent-fgl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fgl-c106="" class="highlight-div-header-right"><div _ngcontent-fgl-c106="" class="handle-button ai-button"></div><div _ngcontent-fgl-c106="" class="handle-button line-button"><div _ngcontent-fgl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fgl-c106="" class="handle-button theme-button"><div _ngcontent-fgl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fgl-c106="" class="handle-button copy-button"><div _ngcontent-fgl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fgl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">visibilityState</span>: <span class="hljs-title class_">Visibility</span> = <span class="hljs-title class_">Visibility</span>.<span class="hljs-property">None</span>;</li><li>  <span class="hljs-comment">// 广告请求参数</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">adRequestParams</span>: advertising.<span class="hljs-property">AdRequestParams</span> = {</li><li>    <span class="hljs-comment">// 'testw6vs28auh3'为测试专用的广告位ID，App正式发布时需要改为正式的广告位ID</span></li><li>    <span class="hljs-attr">adId</span>: <span class="hljs-string">'testw6vs28auh3'</span>,</li><li>    <span class="hljs-comment">// 横幅广告类型</span></li><li>    <span class="hljs-attr">adType</span>: <span class="hljs-number">8</span>,</li><li>    <span class="hljs-comment">// 广告位宽</span></li><li>    <span class="hljs-attr">adWidth</span>: <span class="hljs-number">360</span>,</li><li>    <span class="hljs-comment">// 广告位高</span></li><li>    <span class="hljs-attr">adHeight</span>: <span class="hljs-number">57</span></li><li>  };</li><li>  <span class="hljs-comment">// 广告配置参数，开发者可根据项目实际情况设置</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">adOptions</span>: advertising.<span class="hljs-property">AdOptions</span> = {};</li><li>  <span class="hljs-comment">// 广告展示参数，开发者可根据项目实际情况设置</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">adDisplayOptions</span>: advertising.<span class="hljs-property">AdDisplayOptions</span> = {</li><li>    <span class="hljs-comment">// 广告轮播的时间间隔，单位ms，取值范围[30000, 120000]</span></li><li>    <span class="hljs-attr">refreshTime</span>: <span class="hljs-number">30000</span></li><li>  };</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">ratio</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">context</span>: common.<span class="hljs-property">UIAbilityContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>    <span class="hljs-comment">// 开放匿名设备标识符</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">adRequestParams</span>.<span class="hljs-property">oaid</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestOAID</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibilityState</span> = <span class="hljs-title class_">Visibility</span>.<span class="hljs-property">Visible</span>;</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">adRequestParams</span>.<span class="hljs-property">adWidth</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">adRequestParams</span>.<span class="hljs-property">adHeight</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">ratio</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">adRequestParams</span>.<span class="hljs-property">adWidth</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">adRequestParams</span>.<span class="hljs-property">adHeight</span>;</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>({ <span class="hljs-attr">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span> }) {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">AutoAdComponent</span>({</li><li>          <span class="hljs-attr">adParam</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">adRequestParams</span>,</li><li>          <span class="hljs-attr">adOptions</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">adOptions</span>,</li><li>          <span class="hljs-attr">displayOptions</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">adDisplayOptions</span>,</li><li>          <span class="hljs-attr">interactionListener</span>: {</li><li>            <span class="hljs-attr">onStatusChanged</span>: <span class="hljs-function">(<span class="hljs-params">status: <span class="hljs-built_in">string</span>, ad: advertising.Advertisement, data: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">switch</span> (status) {</li><li>                <span class="hljs-keyword">case</span> <span class="hljs-string">'onAdOpen'</span>:</li><li>                  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Status is onAdOpen'</span>);</li><li>                  <span class="hljs-keyword">break</span>;</li><li>                <span class="hljs-keyword">case</span> <span class="hljs-string">'onAdClick'</span>:</li><li>                  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Status is onAdClick'</span>);</li><li>                  <span class="hljs-keyword">break</span>;</li><li>                <span class="hljs-keyword">case</span> <span class="hljs-string">'onAdClose'</span>:</li><li>                  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Status is onAdClose'</span>);</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibilityState</span> = <span class="hljs-title class_">Visibility</span>.<span class="hljs-property">None</span>;</li><li>                  <span class="hljs-keyword">break</span>;</li><li>                <span class="hljs-keyword">case</span> <span class="hljs-string">'onAdLoad'</span>:</li><li>                  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Status is onAdLoad'</span>);</li><li>                  <span class="hljs-keyword">break</span>;</li><li>                <span class="hljs-keyword">case</span> <span class="hljs-string">'onAdFail'</span>:</li><li>                  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Status is onAdFail'</span>);</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibilityState</span> = <span class="hljs-title class_">Visibility</span>.<span class="hljs-property">None</span>;</li><li>                  <span class="hljs-keyword">break</span>;</li><li>              }</li><li>            }</li><li>          }</li><li>        })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">aspectRatio</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">ratio</span>)</li><li>      .<span class="hljs-title function_">visibility</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">visibilityState</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">requestOAID</span>(<span class="hljs-params">context: Context</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>&gt; {</li><li>  <span class="hljs-comment">// 向用户请求授权广告跨应用关联访问权限</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">isPermissionGranted</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">atManager</span>: abilityAccessCtrl.<span class="hljs-property">AtManager</span> = abilityAccessCtrl.<span class="hljs-title function_">createAtManager</span>();</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">PermissionRequestResult</span> =</li><li>      <span class="hljs-keyword">await</span> atManager.<span class="hljs-title function_">requestPermissionsFromUser</span>(context, [<span class="hljs-string">'ohos.permission.APP_TRACKING_CONSENT'</span>]);</li><li>    isPermissionGranted = result.<span class="hljs-property">authResults</span>[<span class="hljs-number">0</span>] === abilityAccessCtrl.<span class="hljs-property">GrantStatus</span>.<span class="hljs-property">PERMISSION_GRANTED</span>;</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to request permission. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (isPermissionGranted) {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Succeeded in requesting permission'</span>);</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">const</span> oaid = <span class="hljs-keyword">await</span> identifier.<span class="hljs-title function_">getOAID</span>();</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Succeeded in getting OAID'</span>);</li><li>      <span class="hljs-keyword">return</span> oaid;</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to get OAID. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to request permission. User rejected'</span>);</li><li>  }</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;</li><li>}</li></ol></pre></div></div> <p></p></li></ol> </div> </div> <div></div></div>