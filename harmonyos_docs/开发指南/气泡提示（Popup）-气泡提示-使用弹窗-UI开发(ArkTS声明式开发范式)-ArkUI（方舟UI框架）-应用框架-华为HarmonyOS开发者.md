<h1 _ngcontent-ymj-c119="" class="doc-title ng-star-inserted" title="气泡提示（Popup）"> 气泡提示（Popup） </h1>

<div _ngcontent-ymj-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>Popup属性可绑定在组件上显示气泡弹窗提示，设置弹窗内容、交互逻辑和显示状态。主要用于屏幕录制、信息弹出提醒等显示状态。</p>    <p>气泡分为两种类型，一种是系统提供的气泡<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-popup#popupoptions类型说明" target="_blank">PopupOptions</a>，一种是开发者可以自定义的气泡<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-popup#custompopupoptions8类型说明" target="_blank">CustomPopupOptions</a>。其中，PopupOptions通过配置primaryButton和secondaryButton来设置带按钮的气泡；CustomPopupOptions通过配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-builder">builder</a>来设置自定义的气泡。其中系统提供的气泡PopupOptions，字体的最大放大倍数为2。</p>    <p>气泡可以通过配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-popup#popupoptions类型说明" target="_blank">mask</a>来实现模态和非模态窗口，mask为true或者颜色值的时候，气泡为模态窗口，mask为false时，气泡为非模态窗口。</p>    <p>多个气泡同时弹出时，子窗内显示的气泡比主窗内显示的气泡层级高，所处窗口相同时，后面弹出的气泡层级比先弹出的气泡层级高。</p>    <div class="tiledSection">     <h2 id="文本提示气泡">文本提示气泡<i class="anchor-icon anchor-icon-link" anchorid="文本提示气泡" tips="复制节点链接"></i></h2>          <p>文本提示气泡常用于展示带有文本的信息提示，适用于无交互的场景。Popup属性需绑定组件，当bindPopup属性的参数show为true时，会弹出气泡提示。</p>     <p>在Button组件上绑定Popup属性，每次点击Button按钮时，handlePopup会切换布尔值。当值为true时，触发bindPopup弹出气泡。</p>     <div _ngcontent-ymj-c106="" class="highlight-div"><div _ngcontent-ymj-c106="" class="highlight-div-header"><div _ngcontent-ymj-c106="" class="highlight-div-header-left"><div _ngcontent-ymj-c106="" class="handle-button expand-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ymj-c106="" class="highlight-div-header-right"><div _ngcontent-ymj-c106="" class="handle-button ai-button"></div><div _ngcontent-ymj-c106="" class="handle-button line-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ymj-c106="" class="handle-button theme-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ymj-c106="" class="handle-button copy-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ymj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PopupExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">handlePopup</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'PopupOptions'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">bindPopup</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span>, {</li><li>          <span class="hljs-attr">message</span>: <span class="hljs-string">'This is a popup with PopupOptions'</span>,</li><li>        })</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="114" originwidth="265" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114912.63430799113295060316292960539341:50001231000000:2800:F8313D7238DE49F4618AA790F661004E235BCA80DFCB29EDA8DFD482E598B9B2.png" class="notEnlarge" width="265" height="114"></span></p>    </div>    <div class="tiledSection">     <h2 id="添加气泡状态变化的事件">添加气泡状态变化的事件<i class="anchor-icon anchor-icon-link" anchorid="添加气泡状态变化的事件" tips="复制节点链接"></i></h2>          <p>通过onStateChange参数为气泡添加状态变化的事件回调，可以判断气泡的当前显示状态。</p>     <div _ngcontent-ymj-c106="" class="highlight-div"><div _ngcontent-ymj-c106="" class="highlight-div-header"><div _ngcontent-ymj-c106="" class="highlight-div-header-left"><div _ngcontent-ymj-c106="" class="handle-button expand-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ymj-c106="" class="highlight-div-header-right"><div _ngcontent-ymj-c106="" class="handle-button ai-button"></div><div _ngcontent-ymj-c106="" class="handle-button line-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ymj-c106="" class="handle-button theme-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ymj-c106="" class="handle-button copy-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ymj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PopupExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">handlePopup</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'PopupOptions'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">bindPopup</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span>, {</li><li>          <span class="hljs-attr">message</span>: <span class="hljs-string">'This is a popup with PopupOptions'</span>,</li><li>          <span class="hljs-attr">onStateChange</span>: <span class="hljs-function">(<span class="hljs-params">e</span>)=&gt;</span> { <span class="hljs-comment">// 返回当前的气泡状态</span></li><li>            <span class="hljs-keyword">if</span> (!e.<span class="hljs-property">isVisible</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span> = <span class="hljs-literal">false</span>;</li><li>            }</li><li>          }</li><li>        })</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="221" originwidth="432" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114912.94841317109764325207133022703988:50001231000000:2800:88FBFF01AB98A1F7C45B5BFA59B3DA6D70BA4988C7D89BAC7811765210FE70DA.gif" width="432" height="221"></span></p>    </div>    <div class="tiledSection">     <h2 id="带按钮的提示气泡">带按钮的提示气泡<i class="anchor-icon anchor-icon-link" anchorid="带按钮的提示气泡" tips="复制节点链接"></i></h2>          <p>通过primaryButton、secondaryButton属性为气泡最多设置两个Button按钮，通过此按钮进行简单的交互，开发者可以通过配置action参数来设置想要触发的操作。</p>     <div _ngcontent-ymj-c106="" class="highlight-div"><div _ngcontent-ymj-c106="" class="highlight-div-header"><div _ngcontent-ymj-c106="" class="highlight-div-header-left"><div _ngcontent-ymj-c106="" class="handle-button expand-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ymj-c106="" class="highlight-div-header-right"><div _ngcontent-ymj-c106="" class="handle-button ai-button"></div><div _ngcontent-ymj-c106="" class="handle-button line-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ymj-c106="" class="handle-button theme-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ymj-c106="" class="handle-button copy-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ymj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PopupExample22</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">handlePopup</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'PopupOptions'</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">200</span> })</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">bindPopup</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span>, {</li><li>          <span class="hljs-attr">message</span>: <span class="hljs-string">'This is a popup with PopupOptions'</span>,</li><li>          <span class="hljs-attr">primaryButton</span>: {</li><li>            <span class="hljs-attr">value</span>: <span class="hljs-string">'Confirm'</span>,</li><li>            <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span>;</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'confirm Button click'</span>);</li><li>            }</li><li>          },</li><li>          <span class="hljs-attr">secondaryButton</span>: {</li><li>            <span class="hljs-attr">value</span>: <span class="hljs-string">'Cancel'</span>,</li><li>            <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span>;</li><li>            }</li><li>          },</li><li>          <span class="hljs-attr">onStateChange</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (!e.<span class="hljs-property">isVisible</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span> = <span class="hljs-literal">false</span>;</li><li>            }</li><li>          }</li><li>        })</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="181" originwidth="299" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114912.55677133670012058286343807229076:50001231000000:2800:BAA786BF3B8271BB8A16C777A69A8A4A75F88F9CB5D773E4725EFC27958F7025.jpeg" class="notEnlarge" width="299" height="181"></span></p>    </div>    <div class="tiledSection">     <h2 id="气泡的动画">气泡的动画<i class="anchor-icon anchor-icon-link" anchorid="气泡的动画" tips="复制节点链接"></i></h2>          <p>通过定义transition，可以控制气泡的进场和出场动画效果。</p>     <div _ngcontent-ymj-c106="" class="highlight-div"><div _ngcontent-ymj-c106="" class="highlight-div-header"><div _ngcontent-ymj-c106="" class="highlight-div-header-left"><div _ngcontent-ymj-c106="" class="handle-button expand-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ymj-c106="" class="highlight-div-header-right"><div _ngcontent-ymj-c106="" class="handle-button ai-button"></div><div _ngcontent-ymj-c106="" class="handle-button line-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ymj-c106="" class="handle-button theme-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ymj-c106="" class="handle-button copy-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ymj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PopupExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">handlePopup</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">customPopup</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-comment">// popup构造器定义弹框内容</span></li><li>  <span class="hljs-meta">@Builder</span> <span class="hljs-title function_">popupBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Custom Popup with transitionEffect'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>)</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Column</span> }) {</li><li>      <span class="hljs-comment">// PopupOptions 类型设置弹框内容</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'PopupOptions'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">bindPopup</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span>, {</li><li>          <span class="hljs-attr">message</span>: <span class="hljs-string">'This is a popup with transitionEffect'</span>,</li><li>          <span class="hljs-attr">placement</span>: <span class="hljs-title class_">Placement</span>.<span class="hljs-property">Top</span>,</li><li>          <span class="hljs-attr">showInSubWindow</span>: <span class="hljs-literal">false</span>,</li><li>          <span class="hljs-attr">onStateChange</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (!e.<span class="hljs-property">isVisible</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span> = <span class="hljs-literal">false</span>;</li><li>            }</li><li>          },</li><li>          <span class="hljs-comment">// 设置弹窗显示动效为透明度动效与平移动效的组合效果，无退出动效</span></li><li>          <span class="hljs-attr">transition</span>:<span class="hljs-title class_">TransitionEffect</span>.<span class="hljs-title function_">asymmetric</span>(</li><li>            <span class="hljs-title class_">TransitionEffect</span>.<span class="hljs-property">OPACITY</span>.<span class="hljs-title function_">animation</span>({ <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">curve</span>: <span class="hljs-title class_">Curve</span>.<span class="hljs-property">Ease</span> }).<span class="hljs-title function_">combine</span>(</li><li>              <span class="hljs-title class_">TransitionEffect</span>.<span class="hljs-title function_">translate</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">50</span> })),</li><li>            <span class="hljs-title class_">TransitionEffect</span>.<span class="hljs-property">IDENTITY</span>)</li><li>        })</li><li>        .<span class="hljs-title function_">position</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">150</span> })</li><li>
</li><li>      <span class="hljs-comment">// CustomPopupOptions 类型设置弹框内容</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'CustomPopupOptions'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">customPopup</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">customPopup</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">bindPopup</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">customPopup</span>, {</li><li>          <span class="hljs-attr">builder</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">popupBuilder</span>,</li><li>          <span class="hljs-attr">placement</span>: <span class="hljs-title class_">Placement</span>.<span class="hljs-property">Top</span>,</li><li>          <span class="hljs-attr">showInSubWindow</span>: <span class="hljs-literal">false</span>,</li><li>          <span class="hljs-attr">onStateChange</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (!e.<span class="hljs-property">isVisible</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">customPopup</span> = <span class="hljs-literal">false</span>;</li><li>            }</li><li>          },</li><li>          <span class="hljs-comment">// 设置弹窗显示动效与退出动效为缩放动效</span></li><li>          <span class="hljs-attr">transition</span>:<span class="hljs-title class_">TransitionEffect</span>.<span class="hljs-title function_">scale</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }).<span class="hljs-title function_">animation</span>({ <span class="hljs-attr">duration</span>: <span class="hljs-number">500</span>, <span class="hljs-attr">curve</span>: <span class="hljs-title class_">Curve</span>.<span class="hljs-property">Ease</span> })</li><li>        })</li><li>        .<span class="hljs-title function_">position</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">80</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">300</span> })</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="385" originwidth="342" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114912.44166723882345981779586215635141:50001231000000:2800:297AB8AE1095C34BA33C3DE913EDBB5F9A189B7F2AEDF6F7BD594B5EED8E229D.gif" width="342" height="385"></span></p>    </div>    <div class="tiledSection">     <h2 id="自定义气泡">自定义气泡<i class="anchor-icon anchor-icon-link" anchorid="自定义气泡" tips="复制节点链接"></i></h2>          <p>开发者可以使用CustomPopupOptions的builder创建自定义气泡，@Builder中可以放自定义的内容。除此之外，还可以通过popupColor等参数控制气泡样式。</p>     <div _ngcontent-ymj-c106="" class="highlight-div"><div _ngcontent-ymj-c106="" class="highlight-div-header"><div _ngcontent-ymj-c106="" class="highlight-div-header-left"><div _ngcontent-ymj-c106="" class="handle-button expand-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ymj-c106="" class="highlight-div-header-right"><div _ngcontent-ymj-c106="" class="handle-button ai-button"></div><div _ngcontent-ymj-c106="" class="handle-button line-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ymj-c106="" class="handle-button theme-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ymj-c106="" class="handle-button copy-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ymj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">customPopup</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-comment">// popup构造器定义弹框内容</span></li><li>  <span class="hljs-meta">@Builder</span> <span class="hljs-title function_">popupBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">2</span> }) {</li><li>      <span class="hljs-comment">// $r('app.media.icon')需要替换为开发者所需的图像资源文件。</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">"app.media.icon"</span>)).<span class="hljs-title function_">width</span>(<span class="hljs-number">24</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">24</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">5</span> })</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'This is Custom Popup'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">15</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'CustomPopupOptions'</span>)</li><li>        .<span class="hljs-title function_">position</span>({<span class="hljs-attr">x</span>:<span class="hljs-number">100</span>,<span class="hljs-attr">y</span>:<span class="hljs-number">200</span>})</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">customPopup</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">customPopup</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">bindPopup</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">customPopup</span>, {</li><li>          <span class="hljs-attr">builder</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">popupBuilder</span>, <span class="hljs-comment">// 气泡的内容</span></li><li>          <span class="hljs-attr">placement</span>:<span class="hljs-title class_">Placement</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-comment">// 气泡的弹出位置</span></li><li>          <span class="hljs-attr">popupColor</span>:<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>, <span class="hljs-comment">// 气泡的背景色</span></li><li>          <span class="hljs-attr">backgroundBlurStyle</span>: <span class="hljs-title class_">BlurStyle</span>.<span class="hljs-property">NONE</span>,</li><li>          <span class="hljs-attr">onStateChange</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (!e.<span class="hljs-property">isVisible</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">customPopup</span> = <span class="hljs-literal">false</span>;</li><li>            }</li><li>          }</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>使用者通过配置placement参数将弹出的气泡放到需要提示的位置。弹窗构造器会触发弹出提示信息，来引导使用者完成操作，也让使用者有更好的UI体验。</p>     <p><span><img originheight="191" originwidth="292" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114912.23939659889601775275660786668292:50001231000000:2800:A470601852DBE23C6E6ABA0BBE03645B56DA9831DEBEFCC40FA0C58CCD29C5B5.jpeg" class="notEnlarge" width="292" height="191"></span></p>    </div>    <div class="tiledSection">     <h2 id="气泡样式">气泡样式<i class="anchor-icon anchor-icon-link" anchorid="气泡样式" tips="复制节点链接"></i></h2>          <p>气泡除了可以通过builder实现自定义气泡，还可以通过接口设置气泡的样式和显示效果。</p>     <p>背景颜色：气泡的背景色默认为透明，但是会有一个默认的模糊效果，手机上为COMPONENT_ULTRA_THICK。</p>     <p>蒙层样式：气泡默认有蒙层，且蒙层的颜色为透明。</p>     <p>显示大小：气泡大小由内部的builder大小或者message的长度决定的。</p>     <p>显示位置：气泡默认显示在宿主组件的下方，可以通过Placement接口来配置其显示位置以及对齐方向。</p>     <p>以下示例通过设置popupColor（背景颜色）、mask（蒙层样式）、width（气泡宽度）、placement（显示位置）实现气泡的样式。</p>     <div _ngcontent-ymj-c106="" class="highlight-div"><div _ngcontent-ymj-c106="" class="highlight-div-header"><div _ngcontent-ymj-c106="" class="highlight-div-header-left"><div _ngcontent-ymj-c106="" class="handle-button expand-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ymj-c106="" class="highlight-div-header-right"><div _ngcontent-ymj-c106="" class="handle-button ai-button"></div><div _ngcontent-ymj-c106="" class="handle-button line-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ymj-c106="" class="handle-button theme-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ymj-c106="" class="handle-button copy-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ymj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PopupExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">handlePopup</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">100</span> }) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'PopupOptions'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">bindPopup</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span>, {</li><li>          <span class="hljs-attr">width</span>: <span class="hljs-number">200</span>,</li><li>          <span class="hljs-attr">message</span>: <span class="hljs-string">'This is a popup.'</span>,</li><li>          <span class="hljs-attr">popupColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>, <span class="hljs-comment">// 设置气泡的背景色</span></li><li>          <span class="hljs-attr">mask</span>: {</li><li>            <span class="hljs-attr">color</span>: <span class="hljs-string">'#33d9d9d9'</span></li><li>          },</li><li>          <span class="hljs-attr">placement</span>: <span class="hljs-title class_">Placement</span>.<span class="hljs-property">Top</span>,</li><li>          <span class="hljs-attr">backgroundBlurStyle</span>: <span class="hljs-title class_">BlurStyle</span>.<span class="hljs-property">NONE</span> <span class="hljs-comment">// 去除背景模糊效果需要关闭气泡的模糊背景</span></li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="231" originwidth="347" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114912.19483110627826454886238948830711:50001231000000:2800:EAD8C2AF585409EE3E1E2703B4E85689EF9807CD0C6C3ABC8EDAB5C1227BAA98.gif" width="347" height="231"></span></p>    </div>    <div class="tiledSection">     <h2 id="气泡避让软键盘">气泡避让软键盘<i class="anchor-icon anchor-icon-link" anchorid="气泡避让软键盘" tips="复制节点链接"></i></h2>          <p>当软键盘弹出时，气泡默认不会对其避让，可能导致气泡被软键盘覆盖，从API version 15开始，可以设置keyboardAvoidMode为KeyboardAvoidMode.DEFAULT，来使气泡避让键盘。这时如果当前没有位置放下气泡时，气泡会从预设位置平移覆盖宿主组件。</p>     <div _ngcontent-ymj-c106="" class="highlight-div"><div _ngcontent-ymj-c106="" class="highlight-div-header"><div _ngcontent-ymj-c106="" class="highlight-div-header-left"><div _ngcontent-ymj-c106="" class="handle-button expand-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ymj-c106="" class="highlight-div-header-right"><div _ngcontent-ymj-c106="" class="handle-button ai-button"></div><div _ngcontent-ymj-c106="" class="handle-button line-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ymj-c106="" class="handle-button theme-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ymj-c106="" class="handle-button copy-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ymj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PopupExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">handlePopup</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span> <span class="hljs-title function_">popupBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">2</span> }) {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Custom Popup'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">2</span>)</li><li>      <span class="hljs-title class_">TextInput</span>()</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">100</span> }) {</li><li>      <span class="hljs-title class_">TextInput</span>()</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'PopupOptions'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">bindPopup</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopup</span>!!, {</li><li>          <span class="hljs-attr">width</span>: <span class="hljs-number">200</span>,</li><li>          <span class="hljs-attr">builder</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">popupBuilder</span>(),</li><li>          <span class="hljs-attr">placement</span>: <span class="hljs-title class_">Placement</span>.<span class="hljs-property">Bottom</span>,</li><li>          <span class="hljs-attr">mask</span>: <span class="hljs-literal">false</span>,</li><li>          <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">false</span>,</li><li>          <span class="hljs-attr">keyboardAvoidMode</span>: <span class="hljs-title class_">KeyboardAvoidMode</span>.<span class="hljs-property">DEFAULT</span></li><li>        })</li><li>        .<span class="hljs-title function_">position</span>({<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">300</span>})</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="651" originwidth="406" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114912.71310178169065601963436111380165:50001231000000:2800:A5C670E8B4D9CDD1A802A536CA701DD2EAD1FF8E9E6079D555B17403CE897A2B.gif" width="406" height="651"></span></p>    </div>    <div class="tiledSection">     <h2 id="设置气泡内的多态效果">设置气泡内的多态效果<i class="anchor-icon anchor-icon-link" anchorid="设置气泡内的多态效果" tips="复制节点链接"></i></h2>          <p>目前使用@Builder自定义气泡内容时，默认不支持多态样式，可以使用@Component新建一个组件实现按下气泡中的内容时背景变色。</p>     <div _ngcontent-ymj-c106="" class="highlight-div"><div _ngcontent-ymj-c106="" class="highlight-div-header"><div _ngcontent-ymj-c106="" class="highlight-div-header-left"><div _ngcontent-ymj-c106="" class="handle-button expand-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ymj-c106="" class="highlight-div-header-right"><div _ngcontent-ymj-c106="" class="handle-button ai-button"></div><div _ngcontent-ymj-c106="" class="handle-button line-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ymj-c106="" class="handle-button theme-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ymj-c106="" class="handle-button copy-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ymj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PopupPage</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">menus</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [<span class="hljs-string">"扫一扫"</span>, <span class="hljs-string">"创建群聊"</span>, <span class="hljs-string">"电子工卡"</span>]</li><li>
</li><li>  <span class="hljs-comment">// popup构造器定义弹框内容</span></li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">popupItemBuilder</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, action: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-title class_">PopupItemChild</span>({ <span class="hljs-attr">childName</span>: name, <span class="hljs-attr">childAction</span>: action })</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// popup构造器定义弹框内容</span></li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">popupBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">ForEach</span>(</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">menus</span>,</li><li>        <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span>, index</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">popupItemBuilder</span>(item, <span class="hljs-title class_">String</span>(index))</li><li>        },</li><li>        <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span>, index</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">return</span> item</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">padding</span>(<span class="hljs-number">8</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">customPopup</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'click me'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">customPopup</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">customPopup</span></li><li>        })</li><li>        .<span class="hljs-title function_">bindPopup</span>(</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">customPopup</span>,</li><li>          {</li><li>            <span class="hljs-attr">builder</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">popupBuilder</span>, <span class="hljs-comment">// 气泡的内容</span></li><li>            <span class="hljs-attr">placement</span>: <span class="hljs-title class_">Placement</span>.<span class="hljs-property">Bottom</span>, <span class="hljs-comment">// 气泡的弹出位置</span></li><li>            <span class="hljs-attr">popupColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>, <span class="hljs-comment">// 气泡的背景色</span></li><li>            <span class="hljs-attr">onStateChange</span>: <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">if</span> (!event.<span class="hljs-property">isVisible</span>) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">customPopup</span> = <span class="hljs-literal">false</span></li><li>              }</li><li>            }</li><li>          })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PopupItemChild</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">childName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">childAction</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">8</span> }) {</li><li>      <span class="hljs-comment">// $r('app.media.startIcon')需要替换为开发者所需的图像资源文件。</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">24</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">24</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">childName</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-number">130</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>    .<span class="hljs-title function_">padding</span>(<span class="hljs-number">8</span>)</li><li>    .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'选中了'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">childName</span> })</li><li>    })</li><li>    .<span class="hljs-title function_">stateStyles</span>({</li><li>      <span class="hljs-attr">normal</span>: {</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>      },</li><li>      <span class="hljs-attr">pressed</span>: {</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#1fbb7d'</span>)</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="741" originwidth="350" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114912.54333680692741020819860119915804:50001231000000:2800:2A67FF73E4C2A9725EDB3826AA7FCC5AD6A868F400C1258433E0B9BEA0030E67.gif" width="350" height="741"></span></p>    </div>    <div class="tiledSection">     <h2 id="气泡支持避让中轴">气泡支持避让中轴<i class="anchor-icon anchor-icon-link" anchorid="气泡支持避让中轴" tips="复制节点链接"></i></h2>          <p>从API version 18起，气泡支持中轴避让功能。从API version 20开始，在2in1设备上默认启用（仅在窗口处于瀑布模式时产生避让）。开发者可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-popup#popupoptions类型说明" target="_blank">PopupOptions</a>中的enableHoverMode属性，控制气泡是否启用中轴避让。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>如果气泡的点击位置在中轴区域，则气泡不会避让。</li>        <li>2in1设备上需同时满足窗口处于瀑布模式才会产生避让。</li>       </ul>      </div></div></div>     <div _ngcontent-ymj-c106="" class="highlight-div"><div _ngcontent-ymj-c106="" class="highlight-div-header"><div _ngcontent-ymj-c106="" class="highlight-div-header-left"><div _ngcontent-ymj-c106="" class="handle-button expand-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ymj-c106="" class="highlight-div-header-right"><div _ngcontent-ymj-c106="" class="handle-button ai-button"></div><div _ngcontent-ymj-c106="" class="handle-button line-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ymj-c106="" class="handle-button theme-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ymj-c106="" class="handle-button copy-button"><div _ngcontent-ymj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ymj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">arrayStr</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [<span class="hljs-string">'上半屏'</span>, <span class="hljs-string">'中轴'</span>, <span class="hljs-string">'下半屏'</span>];</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">enableHoverMode</span>: <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">showInSubwindow</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">placement</span>: <span class="hljs-title class_">Placement</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isShow</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">RelativeContainer</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'区域:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">arrayStr</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span>])</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> &lt; <span class="hljs-number">2</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span>++</li><li>            } <span class="hljs-keyword">else</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> = <span class="hljs-number">0</span></li><li>            }</li><li>          })</li><li>
</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'子窗显示:'</span> + (<span class="hljs-variable language_">this</span>.<span class="hljs-property">showInSubwindow</span> ? <span class="hljs-string">'子窗'</span> : <span class="hljs-string">'非子窗'</span>))</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">showInSubwindow</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">showInSubwindow</span></li><li>          })</li><li>
</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'hoverMode开启:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span> == <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span> = <span class="hljs-literal">true</span></li><li>            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span> == <span class="hljs-literal">true</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span> = <span class="hljs-literal">false</span></li><li>            } <span class="hljs-keyword">else</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span> = <span class="hljs-literal">undefined</span></li><li>            }</li><li>          })</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Popup'</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>          .<span class="hljs-title function_">bindPopup</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">isShow</span>, {</li><li>            <span class="hljs-attr">message</span>: <span class="hljs-string">'popup'</span>,</li><li>            <span class="hljs-attr">enableHoverMode</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span>,</li><li>            <span class="hljs-attr">showInSubWindow</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">showInSubwindow</span>,</li><li>          })</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">isShow</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isShow</span></li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">alignRules</span>({</li><li>        <span class="hljs-attr">center</span>: { <span class="hljs-attr">anchor</span>: <span class="hljs-string">'__container__'</span>, <span class="hljs-attr">align</span>: <span class="hljs-title class_">VerticalAlign</span>.<span class="hljs-property">Center</span> },</li><li>        <span class="hljs-attr">middle</span>: { <span class="hljs-attr">anchor</span>: <span class="hljs-string">'__container__'</span>, <span class="hljs-attr">align</span>: <span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span> }</li><li>      })</li><li>      .<span class="hljs-title function_">margin</span>({</li><li>        <span class="hljs-attr">top</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> == <span class="hljs-number">2</span> ? <span class="hljs-number">330</span> : <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> == <span class="hljs-number">1</span> ? <span class="hljs-number">50</span> : <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">bottom</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> == <span class="hljs-number">0</span> ? <span class="hljs-number">330</span> : <span class="hljs-number">0</span></li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>