<h1 _ngcontent-gbw-c119="" class="doc-title ng-star-inserted" title="注册并管理一键服务日程"> 注册并管理一键服务日程 </h1>

<div _ngcontent-gbw-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section1344116185498">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section1344116185498" tips="复制节点链接"></i></h2><p>Calendar Kit提供日程一键服务功能，比如一键入会、一键追剧、一键购物、一键查看等。注册日程一键服务后，用户可通过点击对应按钮拉起跳转链接，一步直达服务落地页，方便快捷。</p> </div> <div class="tiledSection"><h2 id="section105171945105213">服务器注册（白名单配置）<i class="anchor-icon anchor-icon-link" anchorid="section105171945105213" tips="复制节点链接"></i></h2><p>若需使用“日程一键服务”功能，需要按照以下步骤完成注册。</p> <ol><li><span>进入<a href="https://developer.huawei.com/consumer/cn/console/overview" target="_blank">开发者管理中心</a>，登录<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/store-attribution-config-agc" target="_blank">企业账号</a>（暂不支持个人开发者）。企业主账号无需手动添加权限；若使用团队成员账号，请确保使用企业主账号为其添加“小艺开放平台”的管理员权限，具体添加可见下图。</span><p></p><p>选择团队账号，点击编辑，为对应的账号添加权限。</p> <p><span><img height="443.473471" originheight="980" originwidth="1338" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114513.75540547150014375340772315532952:50001231000000:2800:05A4F64F686D87D3C0EACCE61AD1FD5280FAF4C8A127F984ED2CDE522E77E8B3.png" title="点击放大" width="605.4825000000001"></span></p> <p>确认对应的信息后，点击下一步。</p> <p><span><img height="411.330164" originheight="708" originwidth="1037" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114513.25210777122085913238306137921262:50001231000000:2800:928AD6F4F5F8946310C3D5EB140E362683C765964FDECA546C353D477BF2E806.png" title="点击放大" width="602.49"></span></p> <p>勾选小艺开放平台管理员，选择下一步。</p> <p><span><img height="263.426716" originheight="440" originwidth="1008" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114513.52323574880634537959765816384634:50001231000000:2800:95D08678D6FDF1C73AB9BC0074F53F89A1CB3ECCCA351277DC96D82664A3D503.png" title="点击放大" width="603.4875000000001"></span></p> <p></p></li><li><span>登录成功后，在侧边栏菜单中<strong>生态服务</strong>下选择<strong>智慧服务</strong>，点击进入<strong>小艺开放平台</strong>。</span><p></p><p><span><img height="424.980885" originheight="747" originwidth="1052" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114513.12445259596575907446511097423253:50001231000000:2800:6EE850FCE6C32125287DC1F60FF9BA4B37E8982C02BF5ABE4C29ADC59B3096F1.png" title="点击放大" width="598.5"></span></p> <p></p></li><li><span>进入页面后，选择右侧<strong>资源管理</strong>，点击选择<strong>其他服务</strong>。</span><p></p><p><span><img height="431.053665" originheight="955" originwidth="1337" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114513.82303052861972551931835899557596:50001231000000:2800:D87D5B1B91455ACA4DC47707C98C81C1A05C30FCE533F06516633DFD790E61FC.png" title="点击放大" width="603.4875000000001"></span></p> <p></p></li><li><span>进入页面后，点击右侧<strong>创建服务</strong>按钮。</span><p></p><p><span><img height="306.861856" originheight="681" originwidth="1326" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114513.09716833361713997201264780312301:50001231000000:2800:AA3D702613B36524B88E388D628106653D4F0C37744F24EE5EC77B248E770379.png" title="点击放大" width="597.5025"></span></p> <p></p></li><li><span>选择服务模型。</span><p></p><p>选择<strong>自定义模型</strong>，填写<strong>服务名称</strong>、<strong>服务分类</strong>、<strong>默认语言</strong>，点击<strong>创建</strong>按钮。</p> <p><strong>服务名称</strong>：可由用户自定义，推荐使用“应用名+日历一键服务”的组合命名形式。</p> <p><strong>服务分类</strong>：开发者根据实际业务类型自行选择。</p> <p><strong>默认语言</strong>：由开发者根据业务选择配置。</p> <p><span><img height="381.835951" originheight="742" originwidth="1163" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114513.43819751762726480516492812764892:50001231000000:2800:8DD63DC9B414F3CAC0A1CEE1C6EBC06362D37A3093877551F185DFC86A3A5FA4.png" title="点击放大" width="598.5"></span></p> <p></p></li><li><span>创建完成后，填写服务的<strong>基本信息</strong>，点击<strong>保存</strong>按钮。</span><p></p><p><strong>服务分类</strong>：选择实用工具/日历。</p> <p><strong>服务版本号</strong>和<strong>版本描述</strong>可由开发者自定义，平台审核不关注此信息。</p> <p><strong>服务分级</strong>：由开发者根据业务选择配置。</p> <p><span><img height="361.847115" originheight="734" originwidth="1210" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114514.94582311245326390897161255930850:50001231000000:2800:5267953658D323CCE6EF096EE44856E589CDC64AFF455F4DC0AE5A26C8EB5702.png" title="点击放大" width="596.505"></span></p> <p></p></li><li><span>填写<strong>服务呈现</strong><strong>信息</strong>，点击<strong>保存</strong>按钮。</span><p></p><p>此页面必填字段均由开发者根据业务选择配置。建议在服务预览处上传用户界面示意图。</p> <p><span><img height="430.92" originheight="1215" originwidth="1474" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114514.69713814718042292727391046340709:50001231000000:2800:D7A33EEF13F7987064944CD9E76732F29DDAC9CFAF47801C8CBDB2E7576BC99A.png" title="点击放大" width="523.6875"></span></p> <p></p></li><li><span>进入<strong>配置</strong>，选择<strong>新增用户意图</strong>。</span><p></p><p><span><img height="265.47864000000004" originheight="527" originwidth="1194" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114514.77906047058803714247663615506529:50001231000000:2800:4AB449512990AA34C0C5A930A98D055448EA86D93380E03B7D1AAEFAE922BCA8.png" title="点击放大" width="601.4925000000001"></span></p> <p></p></li><li><span>配置意图。</span><p></p><ol><li>设置<strong>意图标识</strong>、<strong>意图名称</strong>和<strong>意图分类</strong>，勾选一键服务。意图分类选择“查日历”。</li><li>勾选一键服务之后，选择<strong>服务类型</strong>（请与Calendar Kit提供的日程服务类型<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-calendarmanager#servicetype" target="_blank">ServiceType</a>一致），点击<strong>添加关联</strong>按钮，输入<strong>app包名</strong>及<strong>app名称</strong>（请确保app包名及app名称准确匹配，否则一键服务无法生效）。</li></ol> <p><span><img height="425.21829" originheight="854" originwidth="1206" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114514.96759282935533278394351807404808:50001231000000:2800:03076DBB79536253D66E991B0CB9BFF07A7AAE98B8C00F3DDFA1EEE2D66D7EDE.png" title="点击放大" width="600.495"></span></p> <p></p></li><li><span>配置意图的<strong>实现类型</strong>，选择<strong>APK/RPK/FA/H5 link</strong>，选择<strong>新增实现</strong>，点击<strong>配置</strong>按钮。</span><p></p><p><span><img height="488.181421" originheight="969" originwidth="1184" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114514.40786783003141180511483927427499:50001231000000:2800:C51C5CCA06777E88761D1EC1C320325FC4544348DB517AFA05AAD2BBC078057E.png" title="点击放大" width="596.505"></span></p> <p></p></li><li><span>进入新增实现页面，填写<strong>基本信息</strong>和<strong>配置方式</strong>后，选择<strong>保存</strong>。</span><p></p><ol><li>填写基本信息。实现名称由开发者根据业务自定义，推荐使用“应用名+一键服务类型”命名。</li><li>选择配置方式，勾选<strong>HAP LINK</strong>。<p>填写准确的<strong>App名称</strong>（若下拉菜单中无匹配项，可直接输入）和<strong>A</strong><strong>pp包名</strong>。</p> <p>填写<strong>跳转链接</strong>，即用户在系统日历中点击一键服务按钮拉起的落地页；请勿打开<strong>跳转参数</strong>开关。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>跳转链接为链接模板，实际<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-calendarmanager#eventservice" target="_blank">EventService</a>填入的uri需遵循此模板。例如，若填写跳转链接为“<strong>demo</strong><strong>://mobile/player?</strong><strong>params=</strong>”，则对应可匹配的uri为“<strong>demo</strong><strong>://mobile/player</strong><strong>?</strong><strong>params</strong><strong>=</strong>AAAABBBBCCCCDDDD”，其中加粗部分为强校验，未加粗部分可由业务方根据需要自定义。</p> </div></div></div> <p>其他必填字段，由开发者根据业务自行配置。</p> <p><span><img height="398.610975" originheight="850" originwidth="1189" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114514.78964203585303464250707176383831:50001231000000:2800:24EF4FC8281D10AF3593DC8C073A09DE666D4CAAC0AC53062A98593C1AF2E309.png" title="点击放大" width="557.6025000000001"></span></p> <p><span><img height="601.4925000000001" originheight="907" originwidth="1068" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114514.70697053912210251855487715657436:50001231000000:2800:0A57686D500A206B837F3F7A1697C192D2B674C3E8CA670F099D8112C2F6A6A6.png" title="点击放大" width="708.2549250000001"></span></p> </li></ol> <p></p></li><li><span>完成以上所有配置后，切换到<strong>发布</strong>模块，点击<strong>上架</strong>按钮，等待后台审核后，完成意图发布。</span><p></p><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>若已完成上架的服务，支持根据上文步骤再次调整修改，修改完成后，点击<strong>升级</strong>。</p> </div></div></div> <p><span><img height="118.59078" originheight="247" originwidth="1205" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114514.72903665235069146895319023032082:50001231000000:2800:79A56A61FB6C8FCF668435238DCB5CD0C99F3B42C046CC7769B1715DC3FB64E0.png" title="点击放大" width="578.5500000000001"></span></p> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section104061249387">客户端添加一键服务日程<i class="anchor-icon anchor-icon-link" anchorid="section104061249387" tips="复制节点链接"></i></h2><p>一键服务注册成功后，即完成系统日历跳转白名单配置（支持在系统日历界面显示对应功能按钮）；若想实现一键服务体验，还需在客户端进行相关配置。</p> <p>配置步骤如下：</p> <ol><li><span>在module.json5文件中，配置相关字段。</span><p></p><p>需配置"exported"字段为true。</p> <p>并配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#skills标签" target="_blank">"skills"</a>中的"actions"字段，"actions"标识能够接收的Action值集合，取值通常为系统预定义的action值，也允许自定义。actions不能为空，actions为空会造成目标方匹配失败，常见的action取值可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-ability-wantconstant#action" target="_blank">action常数说明</a>。</p> <p>最后配置"uris"字段，"uris"需与注册时的链接模板相匹配。</p> <p>比如，服务器端注册时填写的uri模板链接若为"demo://mobile/player?params="，则“=”前的内容为强校验，“=”后的内容为<strong>业务需要使用的参数列表</strong>，可在使用日历服务写入日程时根据各业务实际情况进行指定。参数列表中不得直接包含字符“=”或“&amp;”，请注意使用decodeURI()/encodeURI()进行转换。</p> <div class="p"><div _ngcontent-gbw-c106="" class="highlight-div"><div _ngcontent-gbw-c106="" class="highlight-div-header"><div _ngcontent-gbw-c106="" class="highlight-div-header-left"><div _ngcontent-gbw-c106="" class="handle-button expand-button"><div _ngcontent-gbw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gbw-c106="" class="highlight-div-header-right"><div _ngcontent-gbw-c106="" class="handle-button ai-button"></div><div _ngcontent-gbw-c106="" class="handle-button line-button"><div _ngcontent-gbw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gbw-c106="" class="handle-button theme-button"><div _ngcontent-gbw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gbw-c106="" class="handle-button copy-button"><div _ngcontent-gbw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gbw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"module"</span>: {</li><li>    <span class="hljs-string">"name"</span>: <span class="hljs-string">"xxx"</span>,</li><li>    <span class="hljs-string">"type"</span>: <span class="hljs-string">"xxx"</span>,</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-string">"abilities"</span>: [</li><li>      {</li><li>        <span class="hljs-string">"name"</span>: <span class="hljs-string">"xxxxxxx"</span>,</li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-string">"exported"</span>: <span class="hljs-keyword">true</span>,</li><li>        <span class="hljs-string">"skills"</span>: [</li><li>          {</li><li>            <span class="hljs-comment">// ...</span></li><li>           <span class="hljs-string">"actions"</span>: [</li><li>             <span class="hljs-string">"ohos.want.action.viewData"</span></li><li>            ],</li><li>            <span class="hljs-string">"uris"</span>: [</li><li>              {</li><li>                <span class="hljs-string">"scheme"</span>:<span class="hljs-string">"demo"</span>,</li><li>                <span class="hljs-string">"host"</span>:<span class="hljs-string">"mobile"</span>,</li><li>                <span class="hljs-string">"pathStartWith"</span>: <span class="hljs-string">"player"</span></li><li>              }</li><li>            ],</li><li>          }</li><li>        ]</li><li>      }</li><li>    ],</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <p></p></li><li><span>在被拉起的落地页EntryAbility中的onCreate、onNewWant接口中的want对象内存在对应的拉起信息，开发者可通过对应参数实现对应跳转逻辑，本文不再赘述。</span></li><li><span>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-calendarmanager#addevent" target="_blank">addEvent</a>接口添加日程数据，后续即可见日历内出现含一键服务按钮的日程，点击即可跳转至对应落地页。</span></li></ol> </div> <div class="tiledSection"><h2 id="section18728165764117">约束限制<i class="anchor-icon anchor-icon-link" anchorid="section18728165764117" tips="复制节点链接"></i></h2><ul><li>普通日程（EventType.NORMAL）可以提供一键服务按钮的露出；重要日程（EventType.IMPORTANT）因数据结构和产品规格限制，即使配置正确也无法提供一键服务。</li><li>该服务仅在用户设备联网下载对应协议后，开发者写入的日程才会显示对应按钮。</li><li>一键服务按钮的展示规则为：日程详情内始终展示，月视图、桌面卡片在日程开始前15分钟展示。</li><li>在服务器端注册的服务协议完成上架，审核通过后，设备恢复出厂设置，或待当天零点后，功能可正式生效。</li><li>请确保服务器端填写的链接模版（<a href="/consumer/cn/doc/harmonyos-guides/calendar-service#section105171945105213">服务器注册（白名单配置）</a>）、设备端三方应用侧写入的Event.Service.uri、module.json5配置的"uris"字段信息（<a href="/consumer/cn/doc/harmonyos-guides/calendar-service#section104061249387">客户端添加一键服务日程</a>）相互匹配。</li></ul> </div> </div> <div></div></div>