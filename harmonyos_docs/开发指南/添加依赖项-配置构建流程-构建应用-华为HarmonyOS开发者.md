<h1 _ngcontent-med-c119="" class="doc-title ng-star-inserted" title="添加依赖项"> 添加依赖项 </h1>

<div _ngcontent-med-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div id="body0000001778834301">    <p id="ZH-CN_TOPIC_0000002510294469__p8060118">应用/元服务支持通过包管理工具ohpm来安装、共享、分发代码，管理项目的依赖关系。本文介绍了在您的项目中如何配置依赖项，以及不同的配置方式在编译期间的处理逻辑和编译结果。</p>    <p id="ZH-CN_TOPIC_0000002510294469__p5620529163412">您可在工程或模块下的oh-package.json5文件中的dependencies（生产依赖）/devDependencies（开发依赖）字段中指定依赖项，以上两种依赖字段均支持引用远程三方包、本地模块和本地HAR/HSP三种方式。oh-package.json5文件中的dynamicDependencies（动态依赖）仅限于动态依赖HSP的使用场景。以下配置以dependencies为例，更多关于依赖的设置方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-oh-package-json5">oh-package.json5</a>。</p>    <div class="tiledSection">     <h2 id="section15420141487">配置依赖项<i class="anchor-icon anchor-icon-link" anchorid="section15420141487" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section0999112011818" class="firsth2">远程三方包<i class="anchor-icon anchor-icon-link" anchorid="section0999112011818" tips="复制节点链接"></i></h3>          <div class="p" id="ZH-CN_TOPIC_0000002510294469__p18119134743613">      在需要引入三方包的模块的oh-package.json5文件中设置三方包依赖，配置示例如下：      <div _ngcontent-med-c106="" class="highlight-div"><div _ngcontent-med-c106="" class="highlight-div-header"><div _ngcontent-med-c106="" class="highlight-div-header-left"><div _ngcontent-med-c106="" class="handle-button expand-button"><div _ngcontent-med-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-med-c106="" class="highlight-div-header-right"><div _ngcontent-med-c106="" class="handle-button ai-button"></div><div _ngcontent-med-c106="" class="handle-button line-button"><div _ngcontent-med-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-med-c106="" class="handle-button theme-button"><div _ngcontent-med-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-med-c106="" class="handle-button copy-button"><div _ngcontent-med-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-med-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294469__screen17119447183617" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"dependencies"</span>: {</li><li>  <span class="hljs-string">"@ohos/lottie"</span>: <span class="hljs-string">"^2.0.0"</span></li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section91117398178">本地模块<i class="anchor-icon anchor-icon-link" anchorid="section91117398178" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002510294469__p1437535553618">在模块的oh-package.json5文件中设置本地模块依赖，有两种方式：</p>     <ul id="ZH-CN_TOPIC_0000002510294469__ul237535543618">      <li id="li13375185514364">配置本地文件夹路径，示例如下：       <div _ngcontent-med-c106="" class="highlight-div"><div _ngcontent-med-c106="" class="highlight-div-header"><div _ngcontent-med-c106="" class="highlight-div-header-left"><div _ngcontent-med-c106="" class="handle-button expand-button"><div _ngcontent-med-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-med-c106="" class="highlight-div-header-right"><div _ngcontent-med-c106="" class="handle-button ai-button"></div><div _ngcontent-med-c106="" class="handle-button line-button"><div _ngcontent-med-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-med-c106="" class="handle-button theme-button"><div _ngcontent-med-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-med-c106="" class="handle-button copy-button"><div _ngcontent-med-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-med-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294469__screen17375185533612" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"dependencies"</span>: {</li><li>  <span class="hljs-string">"folder"</span>: <span class="hljs-string">"file:../folder"</span></li><li>}</li></ol></pre></div></div></li>      <li id="li8375155163619">配置本地模块名，例如依赖本地模块moduleA（从DevEco Studio 6.0.0 Beta1版本开始支持）：       <div _ngcontent-med-c106="" class="highlight-div"><div _ngcontent-med-c106="" class="highlight-div-header"><div _ngcontent-med-c106="" class="highlight-div-header-left"><div _ngcontent-med-c106="" class="handle-button expand-button"><div _ngcontent-med-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-med-c106="" class="highlight-div-header-right"><div _ngcontent-med-c106="" class="handle-button ai-button"></div><div _ngcontent-med-c106="" class="handle-button line-button"><div _ngcontent-med-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-med-c106="" class="handle-button theme-button"><div _ngcontent-med-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-med-c106="" class="handle-button copy-button"><div _ngcontent-med-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-med-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294469__screen10375125553611" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"dependencies"</span>: {</li><li>  <span class="hljs-string">"moduleA"</span>: <span class="hljs-string">"@module:moduleA"</span></li><li>}</li></ol></pre></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="section636814917176">本地HAR/HSP包<i class="anchor-icon anchor-icon-link" anchorid="section636814917176" tips="复制节点链接"></i></h3>          <ul id="ZH-CN_TOPIC_0000002510294469__ul6996171113719">      <li id="li1199611119375">引用HAR：       <div _ngcontent-med-c106="" class="highlight-div"><div _ngcontent-med-c106="" class="highlight-div-header"><div _ngcontent-med-c106="" class="highlight-div-header-left"><div _ngcontent-med-c106="" class="handle-button expand-button"><div _ngcontent-med-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-med-c106="" class="highlight-div-header-right"><div _ngcontent-med-c106="" class="handle-button ai-button"></div><div _ngcontent-med-c106="" class="handle-button line-button"><div _ngcontent-med-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-med-c106="" class="handle-button theme-button"><div _ngcontent-med-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-med-c106="" class="handle-button copy-button"><div _ngcontent-med-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-med-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294469__screen199967115376" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"dependencies"</span>: {</li><li>  <span class="hljs-string">"package"</span>: <span class="hljs-string">"file:../package.har"</span></li><li>}</li></ol></pre></div></div></li>     </ul>     <ul id="ZH-CN_TOPIC_0000002510294469__ul10996411153711">      <li id="li79961211123712">引用HSP（在release模式下，构建HSP会生成tgz包）：       <div _ngcontent-med-c106="" class="highlight-div"><div _ngcontent-med-c106="" class="highlight-div-header"><div _ngcontent-med-c106="" class="highlight-div-header-left"><div _ngcontent-med-c106="" class="handle-button expand-button"><div _ngcontent-med-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-med-c106="" class="highlight-div-header-right"><div _ngcontent-med-c106="" class="handle-button ai-button"></div><div _ngcontent-med-c106="" class="handle-button line-button"><div _ngcontent-med-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-med-c106="" class="handle-button theme-button"><div _ngcontent-med-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-med-c106="" class="handle-button copy-button"><div _ngcontent-med-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-med-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294469__screen20996171173719" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"dependencies"</span>: {</li><li>  <span class="hljs-string">"package"</span>: <span class="hljs-string">"file:../package.tgz"</span></li><li>}</li></ol></pre></div></div></li>     </ul>     <p id="ZH-CN_TOPIC_0000002510294469__p10996511143714">依赖设置完成后，需要执行<strong>ohpm install</strong>命令安装依赖包，依赖包会存储在对应模块的oh_modules目录下。</p>    </div>    <div class="tiledSection">     <h2 id="section957371853712">编译行为差异说明<i class="anchor-icon anchor-icon-link" anchorid="section957371853712" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002510294469__p2776125119372">根据当前的依赖配置规格，您可以在以下字段中指定依赖项：</p>     <ul id="ZH-CN_TOPIC_0000002510294469__ul1277655113715">      <li id="li197767510374">工程级oh-package.json5文件中的dependencies、dynamicDependencies、devDependencies</li>      <li id="li147761251153719">模块级oh-package.json5文件中的dependencies、dynamicDependencies、devDependencies</li>     </ul>     <p id="ZH-CN_TOPIC_0000002510294469__p877655123719">虽然以上字段都可以指定依赖项，但使用不同的字段，在编译期间的处理逻辑和编译结果是不同的。举个例子：</p>     <ol id="ZH-CN_TOPIC_0000002510294469__ol1177695123711">      <li id="li127761251143713">新建工程，新建HAR模块。</li>      <li id="li16776195117371">在entry模块级oh-package.json5的dependencies设置HAR本地文件夹，编译entry：       <div _ngcontent-med-c106="" class="highlight-div"><div _ngcontent-med-c106="" class="highlight-div-header"><div _ngcontent-med-c106="" class="highlight-div-header-left"><div _ngcontent-med-c106="" class="handle-button expand-button"><div _ngcontent-med-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-med-c106="" class="highlight-div-header-right"><div _ngcontent-med-c106="" class="handle-button ai-button"></div><div _ngcontent-med-c106="" class="handle-button line-button"><div _ngcontent-med-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-med-c106="" class="handle-button theme-button"><div _ngcontent-med-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-med-c106="" class="handle-button copy-button"><div _ngcontent-med-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-med-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294469__screen11776175163716" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"dependencies"</span>: {</li><li>  <span class="hljs-string">"har"</span>: <span class="hljs-string">"file:../har"</span></li><li>}</li></ol></pre></div></div></li>      <li id="li9776185193714">在entry模块级oh-package.json5的devDependencies设置HAR本地文件夹，编译entry：       <div _ngcontent-med-c106="" class="highlight-div"><div _ngcontent-med-c106="" class="highlight-div-header"><div _ngcontent-med-c106="" class="highlight-div-header-left"><div _ngcontent-med-c106="" class="handle-button expand-button"><div _ngcontent-med-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-med-c106="" class="highlight-div-header-right"><div _ngcontent-med-c106="" class="handle-button ai-button"></div><div _ngcontent-med-c106="" class="handle-button line-button"><div _ngcontent-med-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-med-c106="" class="handle-button theme-button"><div _ngcontent-med-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-med-c106="" class="handle-button copy-button"><div _ngcontent-med-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-med-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294469__screen10776185120375" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"devDependencies"</span>: {</li><li>  <span class="hljs-string">"har"</span>: <span class="hljs-string">"file:../har"</span></li><li>}</li></ol></pre></div></div></li>     </ol>     <p id="ZH-CN_TOPIC_0000002510294469__p9776145183713">对比步骤2和3的构建日志，您会发现，步骤2会打印HAR相关的日志，如下图红框所示，步骤3并没有任何关于HAR的日志打印。</p>     <p id="ZH-CN_TOPIC_0000002510294469__p137763518379"><span><img originheight="335" originwidth="641" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104907.91209977772541151185611634570595:50001231000000:2800:15DF05D13F05CA0D373F557E5F2DCC7246FA7AB64CF5E8187A61563D8B0A10A7.png" width="641" height="335"></span></p>     <p id="ZH-CN_TOPIC_0000002510294469__p9776105193716">以上仅仅是日志的差异，为了确保编译正常，不建议将依赖项配置在工程级oh-package.json5中，下文将通过表格说明编译时具体的处理逻辑和可能造成的异常结果。</p>     <p id="ZH-CN_TOPIC_0000002510294469__p47760511376">为方便后续说明，需要了解以下名词，仅在本文内有效：</p>     <ul id="ZH-CN_TOPIC_0000002510294469__ul87761518375">      <li id="li977655120375">三方包依赖：通过<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-dependencies#section0999112011818">远程三方包</a>和<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-dependencies#section636814917176">本地HAR/HSP包</a>的方式指定依赖项</li>      <li id="li1977655143715">本地依赖：通过<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-dependencies#section91117398178">本地模块</a>的方式指定依赖项</li>      <li id="li1777611516371">开启bundledDependencies的字节码HAR：字节码HAR的build-profile.json5的buildOption/arkOptions下的bundledDependencies字段配置为true</li>      <li id="li1577605119377">依赖项的自身配置：依赖项自身的resources/workers/runtimeOnly/UIAbilities/ExtensionAbilities/C++编译产物/路由表等</li>     </ul>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul id="ZH-CN_TOPIC_0000002510294469__ul1812911121512">        <li id="li1412201110159">下表的devDependencies指工程级和模块级oh-package.json5中的devDependencies。</li>        <li id="li122917593157">下表仅对可能导致编译异常的场景进行说明，其他编译正常的场景不进行说明，例如在模块级oh-package.json5中配置dependencies。</li>       </ul>      </div></div></div>     <div class="tablenoborder">      <div class="tbBox"><table id="table377685193718" class="layoutFixed idpTab">       <caption>        <b>表1 </b>编译行为差异说明       </caption>       <thead>        <tr id="ZH-CN_TOPIC_0000002510294469__row677645112375">         <th align="left" class="cellrowborder" colspan="3" id="mcps1.3.7.12.2.8.1.1" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p177685114375">依赖项</p>          <p id="ZH-CN_TOPIC_0000002510294469__p197761851133717"></p>          <p id="ZH-CN_TOPIC_0000002510294469__p1377655133715"></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.12.2.8.1.2" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p187771517377">编译HAP</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.12.2.8.1.3" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p9777145163715">编译HSP</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.12.2.8.1.4" valign="top">          <p class="break-all" id="ZH-CN_TOPIC_0000002510294469__p577775110378">编译未开启 bundledDependencies 的字节码HAR</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.12.2.8.1.5" valign="top">          <p class="break-all" id="ZH-CN_TOPIC_0000002510294469__p277712515376">编译开启 bundledDependencies 的字节码HAR</p></th>        </tr>       </thead>               <tbody><tr id="ZH-CN_TOPIC_0000002510294469__row67771051123719">         <td class="cellrowborder" rowspan="4" valign="top" width="11.860000000000001%">          <p id="ZH-CN_TOPIC_0000002510294469__p147771651123717">源码HAR</p>          <p id="ZH-CN_TOPIC_0000002510294469__p11777135163717"></p>          <p id="ZH-CN_TOPIC_0000002510294469__p67772051183714"></p>          <p id="ZH-CN_TOPIC_0000002510294469__p9777195114374"></p></td>         <td class="cellrowborder" rowspan="2" valign="top" width="10.98%">          <p id="ZH-CN_TOPIC_0000002510294469__p4777851103711">三方包依赖</p>          <p id="ZH-CN_TOPIC_0000002510294469__p57771851143715"></p></td>         <td class="cellrowborder" valign="top" width="24.28%">          <p id="ZH-CN_TOPIC_0000002510294469__p6777165153718">devDependencies</p></td>         <td class="cellrowborder" valign="top" width="13.310000000000002%">          <p id="ZH-CN_TOPIC_0000002510294469__p27772512374">1</p></td>         <td class="cellrowborder" valign="top" width="12.830000000000002%">          <p id="ZH-CN_TOPIC_0000002510294469__p37771051133716">1</p></td>         <td class="cellrowborder" valign="top" width="13.500000000000004%">          <p id="ZH-CN_TOPIC_0000002510294469__p6777115113373"><strong>2</strong></p></td>         <td class="cellrowborder" valign="top" width="13.240000000000002%">          <p id="ZH-CN_TOPIC_0000002510294469__p3777115153710">1</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002510294469__row1777715173713">         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p877710513370">工程级的dependencies</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p7777175114379">/</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p17777751133711">/</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p1477718517375"><strong>3</strong></p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p187771251103711"><strong>3</strong></p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002510294469__row07775517374">         <td class="cellrowborder" rowspan="2" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p1977716510370">本地依赖</p>          <p id="ZH-CN_TOPIC_0000002510294469__p1777725120379"></p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p107771051103712">devDependencies</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p1677745153711">1</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p577855111376">1</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p6778175112376"><strong>2</strong></p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p1877835115371">1</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002510294469__row17781551143714">         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p1877895111370">工程级的dependencies</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p2778951113715">/</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p7778451113716">1</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p1877855123718"><strong>2</strong></p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p577819511379">1</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002510294469__row77782051153716">         <td class="cellrowborder" rowspan="2" valign="top" width="11.860000000000001%">          <p id="ZH-CN_TOPIC_0000002510294469__p10778951163718">字节码HAR</p>          <p id="ZH-CN_TOPIC_0000002510294469__p127781451143715"></p></td>         <td class="cellrowborder" rowspan="2" valign="top" width="10.98%">          <p id="ZH-CN_TOPIC_0000002510294469__p5778205116377">三方包依赖</p>          <p id="ZH-CN_TOPIC_0000002510294469__p1177865115376"></p></td>         <td class="cellrowborder" valign="top" width="24.28%">          <p id="ZH-CN_TOPIC_0000002510294469__p47781651133716">devDependencies</p></td>         <td class="cellrowborder" valign="top" width="13.310000000000002%">          <p id="ZH-CN_TOPIC_0000002510294469__p177812510374"><strong>2</strong></p></td>         <td class="cellrowborder" valign="top" width="12.830000000000002%">          <p id="ZH-CN_TOPIC_0000002510294469__p177895133718"><strong>2</strong></p></td>         <td class="cellrowborder" valign="top" width="13.500000000000004%">          <p id="ZH-CN_TOPIC_0000002510294469__p8778135123712"><strong>2</strong></p></td>         <td class="cellrowborder" valign="top" width="13.240000000000002%">          <p id="ZH-CN_TOPIC_0000002510294469__p13778451193715"><strong>2</strong></p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002510294469__row1777812511373">         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p1677815510371">工程级的dependencies</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p277817519373">/</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p97781851143717">/</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p5779125118373"><strong>3</strong></p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p1977917513378"><strong>3</strong></p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002510294469__row77792517372">         <td class="cellrowborder" rowspan="4" valign="top" width="11.860000000000001%">          <p id="ZH-CN_TOPIC_0000002510294469__p8779185116377">HSP</p>          <p id="ZH-CN_TOPIC_0000002510294469__p1977945115373"></p>          <p id="ZH-CN_TOPIC_0000002510294469__p15779105183714"></p>          <p id="ZH-CN_TOPIC_0000002510294469__p57791951183717"></p></td>         <td class="cellrowborder" rowspan="2" valign="top" width="10.98%">          <p id="ZH-CN_TOPIC_0000002510294469__p877965153718">三方包依赖</p>          <p id="ZH-CN_TOPIC_0000002510294469__p107799511375"></p></td>         <td class="cellrowborder" valign="top" width="24.28%">          <p id="ZH-CN_TOPIC_0000002510294469__p12779175173716">devDependencies</p></td>         <td class="cellrowborder" valign="top" width="13.310000000000002%">          <p id="ZH-CN_TOPIC_0000002510294469__p13779175133716">1</p></td>         <td class="cellrowborder" valign="top" width="12.830000000000002%">          <p id="ZH-CN_TOPIC_0000002510294469__p1677920511379">1</p></td>         <td class="cellrowborder" valign="top" width="13.500000000000004%">          <p id="ZH-CN_TOPIC_0000002510294469__p477985112374"><strong>2</strong></p></td>         <td class="cellrowborder" valign="top" width="13.240000000000002%">          <p id="ZH-CN_TOPIC_0000002510294469__p167791751133719"><strong>1</strong></p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002510294469__row10779125153719">         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p3779751123718">工程级的dependencies、dynamicDependencies</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p117794517377">/</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p8779155143716">/</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p1577911517374">/</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p1677912516371">/</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002510294469__row8779155118374">         <td class="cellrowborder" rowspan="2" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p14779105193717">本地依赖</p>          <p id="ZH-CN_TOPIC_0000002510294469__p477915513371"></p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p3779951193719">devDependencies</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p57791513375"><strong>1</strong></p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p1878015512379"><strong>1</strong></p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p147803512373"><strong>2</strong></p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p1278010518370"><strong>1</strong></p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002510294469__row117801551193716">         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p9780105113717">工程级的dependencies、dynamicDependencies</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p17801551193711">/</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p1678055123718">1</p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p97805511378"><strong>2</strong></p></td>         <td class="cellrowborder" valign="top">          <p id="ZH-CN_TOPIC_0000002510294469__p5780125118373"><strong>1</strong></p></td>        </tr>             </tbody></table></div>     </div>     <p id="ZH-CN_TOPIC_0000002510294469__p10780851113710">表格中各符号的含义如下：</p>     <ul id="ZH-CN_TOPIC_0000002510294469__ul16780115133710">      <li id="li207801051113712">1：依赖项仅代码文件（ets/ts/js等）参与编译，依赖项的自身配置不会参与收集，可能造成编译/运行时异常。</li>      <li id="li15780951133715">2：依赖项没有被收集，会导致编译异常。</li>      <li id="li9780205115373">3：编译正常，后续集成时可能会造成运行时异常。</li>      <li id="li117801451173713">/：编译和运行都正常。</li>     </ul>     <p id="ZH-CN_TOPIC_0000002510294469__p169481433122413">针对以上几类编译/运行时可能异常的场景，从DevEco Studio 5.1.1 Beta1版本开始，hvigor-config.json5文件提供一个字段ohos.byteCodeHar.integratedOptimization，开启后，可以优化表格中<strong>加粗符号</strong>对应的场景。</p>     <p id="ZH-CN_TOPIC_0000002510294469__p207801251113718">但该开关只是优化了依赖收集的逻辑，并没有优化依赖项的自身配置收集的逻辑，因此，加粗符号对应的场景中，只有编译字节码HAR，并且依赖配置在工程级的dependencies或dynamicDependencies对应的场景才能完全优化，其他场景无法保证编译/运行时无异常。</p>     <div _ngcontent-med-c106="" class="highlight-div"><div _ngcontent-med-c106="" class="highlight-div-header"><div _ngcontent-med-c106="" class="highlight-div-header-left"><div _ngcontent-med-c106="" class="handle-button expand-button"><div _ngcontent-med-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-med-c106="" class="highlight-div-header-right"><div _ngcontent-med-c106="" class="handle-button ai-button"></div><div _ngcontent-med-c106="" class="handle-button line-button"><div _ngcontent-med-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-med-c106="" class="handle-button theme-button"><div _ngcontent-med-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-med-c106="" class="handle-button copy-button"><div _ngcontent-med-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-med-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294469__screen167801951103714" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-string">"properties"</span></span>: {</li><li>  <span class=""><span class="hljs-string">"ohos.byteCodeHar.integratedOptimization"</span></span>: <span class=""><span class="hljs-keyword">true</span></span></li><li>}</li></ol></pre></div></div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p id="ZH-CN_TOPIC_0000002510294469__p514819331849">依赖包提供方和集成方都需要配置该字段。</p>      </div></div></div>     <p id="ZH-CN_TOPIC_0000002510294469__p9780135153713">综上所述，我们建议您：</p>     <ul id="ZH-CN_TOPIC_0000002510294469__ul3780175193710">      <li id="li17781951133713">当前模块使用到的依赖配置在本模块的oh-package.json5中。</li>      <li id="li4781751133710">除辅助语法检查TypeScript的类型声明包（如：@types/commonmark）外，其他类型的依赖项，都不要配置在devDependencies中。</li>     </ul>    </div>   </div>   <div></div></div>