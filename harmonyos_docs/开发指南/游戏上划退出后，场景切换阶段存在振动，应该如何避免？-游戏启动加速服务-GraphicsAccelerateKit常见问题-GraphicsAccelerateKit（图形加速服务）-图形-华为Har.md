<h1 _ngcontent-wtw-c119="" class="doc-title ng-star-inserted" title="游戏上划退出后，场景切换阶段存在振动，应该如何避免？"> 游戏上划退出后，场景切换阶段存在振动，应该如何避免？ </h1>

<div _ngcontent-wtw-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>开发步骤如下：</p> <ol><li>通过globalThis定义全局作用域的变量isCacheStatus，在onCreate生命周期函数中赋值false，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-launchacceleration#section81101219425" target="_blank">isLaunchMirrorEnabled</a>接口返回true时赋值true。</li><li>在函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-vibrator#vibratorstartvibration9" target="_blank">startVibration</a>前增加isCacheStatus校验，若当前处于缓存态，则不进行振动操作。</li></ol> <div class="p">以团结工程为例，修改如下：<div _ngcontent-wtw-c106="" class="highlight-div"><div _ngcontent-wtw-c106="" class="highlight-div-header"><div _ngcontent-wtw-c106="" class="highlight-div-header-left"><div _ngcontent-wtw-c106="" class="handle-button expand-button"><div _ngcontent-wtw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtw-c106="" class="highlight-div-header-right"><div _ngcontent-wtw-c106="" class="handle-button ai-button"></div><div _ngcontent-wtw-c106="" class="handle-button line-button"><div _ngcontent-wtw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtw-c106="" class="handle-button theme-button"><div _ngcontent-wtw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtw-c106="" class="handle-button copy-button"><div _ngcontent-wtw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtw-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><strong class="typescript"><span class="hljs-title class_">TuanjiePlayerAbilityBase</span>.<span class="hljs-property">ets</span></strong></li><li><span class="hljs-title function_">onCreate</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {</li><li>  globalThis.<span class="hljs-property">isCacheStatus</span> = <span class="hljs-literal">false</span>;</li><li>  ......</li><li>}</li><li><span class="hljs-title function_">onWindowStageWillDestroy</span>(): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-keyword">if</span> (launchAcceleration.<span class="hljs-title function_">isLaunchMirrorEnabled</span>()) {</li><li>    globalThis.<span class="hljs-property">isCacheStatus</span> = <span class="hljs-literal">true</span>;</li><li>    ......</li><li>  }</li><li>}</li><li>
</li><li><strong class="typescript"><span class="hljs-title class_">TuanjieVibrate</span>.<span class="hljs-property">ets</span></strong></li><li><span class="hljs-keyword">static</span> <span class="hljs-title function_">vibrate</span>(<span class="hljs-params">vibrateMs: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-keyword">if</span> (globalThis.<span class="hljs-property">isCacheStatus</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'globalThis.isCacheStatus true, vibration returned.'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  ......</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>