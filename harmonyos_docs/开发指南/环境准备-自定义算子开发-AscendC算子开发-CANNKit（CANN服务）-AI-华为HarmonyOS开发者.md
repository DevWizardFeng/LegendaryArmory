<h1 _ngcontent-kdk-c119="" class="doc-title ng-star-inserted" title="环境准备"> 环境准备 </h1>

<div _ngcontent-kdk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>进行环境准备前，你需要了解如下基本概念，以便更好的理解后续操作。</p> <ul><li>开发环境：指编译开发代码的环境。</li><li>运行环境：指运行算子、推理程序等的Linux环境。运行环境必须连接上带有Kirin AI处理器的设备，如手机、平板等。</li><li>开发环境与运行环境合设场景：开发环境和运行环境在同一台机器上，开发者使用连接上Kirin AI处理器的机器作为运行环境，同时在该环境上进行代码开发与编译。</li><li>开发环境与运行环境分设场景：开发环境和运行环境不在同一台机器上，开发者使用连接上Kirin AI处理器的机器作为运行环境；使用其他独立机器进行代码开发与编译，作为开发环境。<div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>开发运行环境需要满足以下要求：</p> <p>ubuntu版本大于等于22.04，ubuntu架构为x86_64， python版本在3.7与3.10之间（包含），gcc/g++版本大于等于7.0。</p> <ul><li>设备连接与调试参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hdc" target="_blank">hdc</a>。</li></ul> </div></div></div> </li></ul> <p>进行自定义算子开发前，需要完成驱动及DDK的安装。</p> <ol><li><span><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-preparations#section152959341125">下载tools_ascendc</a>，并在Linux环境上解压。</span><p></p><div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>在Windows平台解压会导致软链接失效。</p> </div></div></div> <p></p></li><li><span>下载需要的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-preparations#section152959341125">平台插件包</a>，在linux开发环境上解压，并将需要的平台插件拷贝到${install_path}/ddk/tools/platform下。其中${install_path}为tools包的解压目录。拷贝后的目录结构如下。</span><p></p><div _ngcontent-kdk-c106="" class="highlight-div"><div _ngcontent-kdk-c106="" class="highlight-div-header"><div _ngcontent-kdk-c106="" class="highlight-div-header-left"><div _ngcontent-kdk-c106="" class="handle-button expand-button"><div _ngcontent-kdk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdk-c106="" class="highlight-div-header-right"><div _ngcontent-kdk-c106="" class="handle-button ai-button"></div><div _ngcontent-kdk-c106="" class="handle-button line-button"><div _ngcontent-kdk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdk-c106="" class="handle-button theme-button"><div _ngcontent-kdk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdk-c106="" class="handle-button copy-button"><div _ngcontent-kdk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdk-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>tools</li><li>├── platform</li><li>│   ├── kirin9020</li><li>│   ├── kirinx90</li></ol></pre></div></div> <p></p></li><li><span>进入目录ddk/tools/tools_ascendc，修改安装脚本权限，执行安装脚本进行安装，命令如下。</span><p></p><div _ngcontent-kdk-c106="" class="highlight-div"><div _ngcontent-kdk-c106="" class="highlight-div-header"><div _ngcontent-kdk-c106="" class="highlight-div-header-left"><div _ngcontent-kdk-c106="" class="handle-button expand-button"><div _ngcontent-kdk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdk-c106="" class="highlight-div-header-right"><div _ngcontent-kdk-c106="" class="handle-button ai-button"></div><div _ngcontent-kdk-c106="" class="handle-button line-button"><div _ngcontent-kdk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdk-c106="" class="handle-button theme-button"><div _ngcontent-kdk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdk-c106="" class="handle-button copy-button"><div _ngcontent-kdk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdk-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li>cd ddk/tools/tools_ascendc</li><li>chmod +x install.sh</li><li>source ./install.sh</li></ol></pre></div></div> <p></p></li><li><span>在使用tools工具前，需要先设置环境变量，执行<strong>source ${install_path}/ddk/</strong> <strong>tools/tools_ascendc/set_ascendc_env.sh</strong>。</span><p></p><p>例如安装目录为/usr/local/：</p> <div _ngcontent-kdk-c106="" class="highlight-div"><div _ngcontent-kdk-c106="" class="highlight-div-header"><div _ngcontent-kdk-c106="" class="highlight-div-header-left"><div _ngcontent-kdk-c106="" class="handle-button expand-button"><div _ngcontent-kdk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdk-c106="" class="highlight-div-header-right"><div _ngcontent-kdk-c106="" class="handle-button ai-button"></div><div _ngcontent-kdk-c106="" class="handle-button line-button"><div _ngcontent-kdk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdk-c106="" class="handle-button theme-button"><div _ngcontent-kdk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdk-c106="" class="handle-button copy-button"><div _ngcontent-kdk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdk-c106="" class="highlight-scroll-div"><pre class="shell prettyprint linenums hljs language-shell" hw-language="shell" data-highlighted="yes"><ol class="linenums"><li><strong>source  </strong>/usr/local/ddk/tools/tools_ascendc/set_ascendc_env.sh</li></ol></pre></div></div> <p></p></li><li><span>python软件依赖，执行步骤3的安装脚本install.sh时会自动安装。若执行ascendebug时提示无对应模块，可执行下表中的命令手动安装。</span><p> </p><div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表1 </b>第三方软件</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.5.2.1.2.4.1.1" valign="top" width="19%"><p>第三方软件</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.2.1.2.4.1.2" valign="top" width="48%"><p>用途</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.2.1.2.4.1.3" valign="top" width="33%"><p>如何安装</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="19%"><p>toml</p> </td> <td class="cellrowborder" valign="top" width="48%"><p>加载和转储TOML文件的功能。</p> </td> <td class="cellrowborder" valign="top" width="33%"><p>pip3 install toml</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19%"><p>jinja2</p> </td> <td class="cellrowborder" valign="top" width="48%"><p>CPU调测模板使用。</p> </td> <td class="cellrowborder" valign="top" width="33%"><p>pip3 install jinja2</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19%"><p>numpy</p> </td> <td class="cellrowborder" valign="top" width="48%"><p>精度比对时使用。</p> </td> <td class="cellrowborder" valign="top" width="33%"><p>pip3 install numpy</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19%"><p>torch</p> </td> <td class="cellrowborder" valign="top" width="48%"><p>输入、输出数据格式转换使用。</p> </td> <td class="cellrowborder" valign="top" width="33%"><p>pip3 install torch</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19%"><p>sympy</p> </td> <td class="cellrowborder" valign="top" width="48%"><p>用于进行符号计算</p> </td> <td class="cellrowborder" valign="top" width="33%"><p>pip3 install sympy</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19%"><p>paramiko</p> </td> <td class="cellrowborder" valign="top" width="48%"><p>与远程linux环境连接</p> </td> <td class="cellrowborder" valign="top" width="33%"><p>pip3 install paramiko</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19%"><p>protobuf</p> </td> <td class="cellrowborder" valign="top" width="48%"><p>模型解析</p> </td> <td class="cellrowborder" valign="top" width="33%"><p>pip3 install protobuf</p> </td> </tr>  </tbody></table></div> </div> <p></p></li></ol> </div> <div></div></div>