<h1 _ngcontent-ujn-c119="" class="doc-title ng-star-inserted" title="电话号码格式化"> 电话号码格式化 </h1>

<div _ngcontent-ujn-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="使用场景">使用场景<i class="anchor-icon anchor-icon-link" anchorid="使用场景" tips="复制节点链接"></i></h2>          <p>不同国家和地区的电话号码在号码位数、组合方式、呈现方式等都存在差异。同时，在不同环境和条件下，电话号码可能存在不同的拨打方式和号码格式。例如，在中国境内跨地区打电话，通常需要先输入“0”，再拨打区号和八位电话号码，而在香港或澳门拨打电话时，需要不同的拨号方式。</p>     <p>通过号码格式化，可以根据需要给用户展示特定格式的电话号码。</p>    </div>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <p>电话号码格式化通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-i18n#phonenumberformat8" target="_blank">PhoneNumberFormat</a>的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-i18n#format8" target="_blank">format</a>接口实现。</p>     <p><strong>电话号码格式化选项</strong></p>     <p>以电话号码158****2312，所属国家代码CN为例，说明PhoneNumberFormatOptions不同取值和显示效果。</p>     <p><strong>表1</strong> 电话号码格式化的类型(type)</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.6.1.3.1.1" valign="top" width="50%">取值</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.6.1.3.1.2" valign="top" width="50%">显示效果</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">E164</td>         <td class="cellrowborder" valign="top" width="50%">+86 158****2312</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">INTERNATIONAL</td>         <td class="cellrowborder" valign="top" width="50%">+86 158 **** 2312</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">NATIONAL</td>         <td class="cellrowborder" valign="top" width="50%">158 **** 2312</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">RFC3966</td>         <td class="cellrowborder" valign="top" width="50%">tel:+86-158-****-2312</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">TYPING</td>         <td class="cellrowborder" valign="top" width="50%">158 ***</td>        </tr>             </tbody></table></div>     </div>     <p><strong>开发实例</strong></p>     <div _ngcontent-ujn-c106="" class="highlight-div"><div _ngcontent-ujn-c106="" class="highlight-div-header"><div _ngcontent-ujn-c106="" class="highlight-div-header-left"><div _ngcontent-ujn-c106="" class="handle-button expand-button"><div _ngcontent-ujn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ujn-c106="" class="highlight-div-header-right"><div _ngcontent-ujn-c106="" class="handle-button ai-button"></div><div _ngcontent-ujn-c106="" class="handle-button line-button"><div _ngcontent-ujn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ujn-c106="" class="handle-button theme-button"><div _ngcontent-ujn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ujn-c106="" class="handle-button copy-button"><div _ngcontent-ujn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ujn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 导入模块</span></li><li><span class="hljs-keyword">import</span> { i18n } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 格式化电话号码</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">phoneNumberFormat</span>: i18n.<span class="hljs-property">PhoneNumberFormat</span> = <span class="hljs-keyword">new</span> i18n.<span class="hljs-title class_">PhoneNumberFormat</span>(<span class="hljs-string">'CN'</span>);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">formattedPhoneNumber</span>: <span class="hljs-built_in">string</span> = phoneNumberFormat.<span class="hljs-title function_">format</span>(<span class="hljs-string">'158****2312'</span>); <span class="hljs-comment">// formattedPhoneNumber = '158 **** 2312'</span></li><li>
</li><li><span class="hljs-comment">// RFC3966类型的电话号码</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">RFC3966Format</span>: i18n.<span class="hljs-property">PhoneNumberFormat</span> = <span class="hljs-keyword">new</span> i18n.<span class="hljs-title class_">PhoneNumberFormat</span>(<span class="hljs-string">'CN'</span>, { <span class="hljs-attr">type</span>: <span class="hljs-string">'RFC3966'</span> });</li><li>formattedPhoneNumber = <span class="hljs-title class_">RFC3966Format</span>.<span class="hljs-title function_">format</span>(<span class="hljs-string">'158****2312'</span>); <span class="hljs-comment">// formattedPhoneNumber = 'tel:+86-158-****-2312'</span></li><li>
</li><li><span class="hljs-comment">// 判断电话号码是否有效</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">isValid</span>: <span class="hljs-built_in">boolean</span> = phoneNumberFormat.<span class="hljs-title function_">isValidNumber</span>(<span class="hljs-string">'158****2312'</span>); <span class="hljs-comment">// isValid = true</span></li><li>
</li><li><span class="hljs-comment">// 以某种语言显示号码归属地</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">locationName</span>: <span class="hljs-built_in">string</span> = phoneNumberFormat.<span class="hljs-title function_">getLocationName</span>(<span class="hljs-string">'158****2312'</span>, <span class="hljs-string">'en-GB'</span>); <span class="hljs-comment">// locationName = 'XiAn, Shanxi'</span></li><li>
</li><li><span class="hljs-comment">// 拨号中的电话号码格式化</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">typingFormat</span>: i18n.<span class="hljs-property">PhoneNumberFormat</span> = <span class="hljs-keyword">new</span> i18n.<span class="hljs-title class_">PhoneNumberFormat</span>(<span class="hljs-string">'CN'</span>, { <span class="hljs-attr">type</span>: <span class="hljs-string">'TYPING'</span> });</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">phoneNumber</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'0755453'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">formatResult</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>; <span class="hljs-comment">// 通过如下方式对拨号中的号码格式化后，formatResult = '0755 453'</span></li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; phoneNumber.<span class="hljs-property">length</span>; i++) {</li><li>  formatResult += phoneNumber.<span class="hljs-title function_">charAt</span>(i);</li><li>  formatResult = typingFormat.<span class="hljs-title function_">format</span>(formatResult);</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>