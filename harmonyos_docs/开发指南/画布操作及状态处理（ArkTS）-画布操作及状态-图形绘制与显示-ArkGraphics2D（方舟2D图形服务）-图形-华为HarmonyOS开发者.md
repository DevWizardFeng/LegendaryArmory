<h1 _ngcontent-xrx-c119="" class="doc-title ng-star-inserted" title="画布操作及状态处理（ArkTS）"> 画布操作及状态处理（ArkTS） </h1>

<div _ngcontent-xrx-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="场景介绍">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="场景介绍" tips="复制节点链接"></i></h2>          <p>创建或获取得到Canvas画布之后，可以基于画布进一步地进行图形操作和状态处理。画布操作属于可选操作，开发者可以根据场景需要进行。需要先进行画布操作，再进行后续绘制，只有这样画布操作才有效果。</p>     <p>常见的画布操作如下：</p>     <ul>      <li>       <p>裁剪。</p></li>      <li>       <p>矩阵变换，如平移、缩放、旋转等。</p></li>      <li>       <p>状态保存与恢复。</p></li>     </ul>     <p>更多画布操作和具体接口参数使用，请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-canvas" target="_blank">drawing.Canvas</a>。</p>    </div>    <div class="tiledSection">     <h2 id="裁剪操作">裁剪操作<i class="anchor-icon anchor-icon-link" anchorid="裁剪操作" tips="复制节点链接"></i></h2>          <p>裁剪是图形处理中的常见操作，裁剪针对的是画布本身，可以用于限制绘图区域，只在指定的区域进行绘制。需要先进行裁剪操作，再进行绘制，才会有对应效果。</p>     <p>当前支持的裁剪操作主要如下：</p>     <ul>      <li>       <p>裁剪矩形。</p></li>      <li>       <p>裁剪圆角矩形。</p></li>      <li>       <p>裁剪自定义路径。</p></li>      <li>       <p>裁剪一个区域。</p></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="接口说明" class="firsth2">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h3>          <p>裁剪操作常用接口如下表所示，详细的使用和参数说明请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-canvas" target="_blank">drawing.Canvas</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.1" valign="top" width="50%">接口</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">clipRect(rect: common2D.Rect, clipOp?: ClipOp, doAntiAlias?: boolean): void</td>         <td class="cellrowborder" valign="top" width="50%">用于裁剪一个矩形。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">clipRoundRect(roundRect: RoundRect, clipOp?: ClipOp, doAntiAlias?: boolean): void</td>         <td class="cellrowborder" valign="top" width="50%">用于裁剪一个圆角矩形。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">clipPath(path: Path, clipOp?: ClipOp, doAntiAlias?: boolean): void</td>         <td class="cellrowborder" valign="top" width="50%">用于裁剪一个自定义路径。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">clipRegion(region: Region, clipOp?: ClipOp): void</td>         <td class="cellrowborder" valign="top" width="50%">用于裁剪一个区域。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="开发示例">开发示例<i class="anchor-icon anchor-icon-link" anchorid="开发示例" tips="复制节点链接"></i></h3>          <p>此处以在画布上裁剪矩形为例给出示例和效果图，其他裁剪操作的逻辑基本相同，注意调用对应的接口并确保要裁剪的数据类型对应准确即可，此处不再一一展开。详细的使用和参数说明请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-canvas" target="_blank">drawing.Canvas</a>。</p>     <p>使用clipRect()接口裁剪矩形。有以下3个入参：</p>     <ul>      <li>       <p>rect是要裁剪的矩形区域。</p></li>      <li>       <p>clipOp是裁剪方式，包括交集（INTERSECT）和差集（DIFFERENCE），具体可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-e#clipop12" target="_blank">ClipOp</a>。</p></li>      <li>       <p>doAntiAlias表示是否需要抗锯齿处理，如果为true则启用抗锯齿功能，在绘制图形时会对图形的边缘像素进行半透明的模糊处理，如果为false则不开启。</p></li>     </ul>     <div _ngcontent-xrx-c106="" class="highlight-div"><div _ngcontent-xrx-c106="" class="highlight-div-header"><div _ngcontent-xrx-c106="" class="highlight-div-header-left"><div _ngcontent-xrx-c106="" class="handle-button expand-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xrx-c106="" class="highlight-div-header-right"><div _ngcontent-xrx-c106="" class="handle-button ai-button"></div><div _ngcontent-xrx-c106="" class="handle-button line-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xrx-c106="" class="handle-button theme-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xrx-c106="" class="handle-button copy-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xrx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建画刷</span></li><li><span class="hljs-keyword">let</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li><span class="hljs-comment">// 设置颜色为蓝色</span></li><li>brush.<span class="hljs-title function_">setColor</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>,  <span class="hljs-number">0x00</span>, <span class="hljs-number">0xFF</span>);</li><li><span class="hljs-comment">// 设置画刷填充效果</span></li><li>canvas.<span class="hljs-title function_">attachBrush</span>(brush);</li><li><span class="hljs-comment">// 创建矩形对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">rect</span>: common2D.<span class="hljs-property">Rect</span> = { <span class="hljs-attr">left</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">600</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">600</span> };</li><li><span class="hljs-comment">// 裁剪矩形区域</span></li><li>canvas.<span class="hljs-title function_">clipRect</span>(rect);</li><li><span class="hljs-comment">// 绘制圆形</span></li><li>canvas.<span class="hljs-title function_">drawCircle</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">300</span>);</li><li><span class="hljs-comment">// 去除填充效果</span></li><li>canvas.<span class="hljs-title function_">detachBrush</span>();</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.3.1.1" valign="top" width="50%">原始图</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.3.1.2" valign="top" width="50%">裁剪后的图</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="599" originwidth="602" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114357.54532797229882628771580324163233:50001231000000:2800:92B0D65F136613D5408F6D908489AAE2FA4EF64352F197B32B2CFB119E6A8CA4.jpg" width="436" height="433.8272425249169"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="596" originwidth="605" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114357.48435500029503838264804032512201:50001231000000:2800:82F0572D48C43CDF6F303796672C8BA48AD1BBA7285EFA0CC68C63858D6CBE89.jpg" width="436" height="429.5140495867769"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="矩阵变换操作">矩阵变换操作<i class="anchor-icon anchor-icon-link" anchorid="矩阵变换操作" tips="复制节点链接"></i></h2>          <p>矩阵变换也是常见的画布操作，是一种坐标系的转换，用于进行图形的变化。</p>     <p>当前支持的矩阵变换主要如下：</p>     <ul>      <li>       <p>平移</p></li>      <li>       <p>缩放</p></li>      <li>       <p>旋转</p></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="接口说明-1" class="firsth2">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明-1" tips="复制节点链接"></i></h3>          <p>矩阵变换操作常用接口如下表所示，详细的使用和参数说明请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-canvas" target="_blank">drawing.Canvas</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.3.1.1" valign="top" width="50%">接口</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">translate(dx: number, dy: number): void</td>         <td class="cellrowborder" valign="top" width="50%">用于平移画布一段距离。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">scale(sx: number, sy: number): void</td>         <td class="cellrowborder" valign="top" width="50%">用于画布缩放。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">rotate(degrees: number, sx: number, sy: number): void</td>         <td class="cellrowborder" valign="top" width="50%">用于画布旋转一定的角度，正数表示顺时针旋转，负数反之。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">skew(sx: number, sy: number) : void</td>         <td class="cellrowborder" valign="top" width="50%">用于画布倾斜变换，包括水平轴和垂直轴上的偏移。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="平移">平移<i class="anchor-icon anchor-icon-link" anchorid="平移" tips="复制节点链接"></i></h3>          <p>使用translate()接口实现画布平移。接口接受2个参数，分别为水平方向和垂直方向的平移量，单位为px。</p>     <p>简单示例和示意图如下所示：</p>     <div _ngcontent-xrx-c106="" class="highlight-div"><div _ngcontent-xrx-c106="" class="highlight-div-header"><div _ngcontent-xrx-c106="" class="highlight-div-header-left"><div _ngcontent-xrx-c106="" class="handle-button expand-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xrx-c106="" class="highlight-div-header-right"><div _ngcontent-xrx-c106="" class="handle-button ai-button"></div><div _ngcontent-xrx-c106="" class="handle-button line-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xrx-c106="" class="handle-button theme-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xrx-c106="" class="handle-button copy-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xrx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建画刷</span></li><li><span class="hljs-keyword">let</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li><span class="hljs-comment">// 设置颜色为红色</span></li><li>brush.<span class="hljs-title function_">setColor</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>);</li><li><span class="hljs-comment">// 设置画刷填充效果</span></li><li>canvas.<span class="hljs-title function_">attachBrush</span>(brush);</li><li><span class="hljs-comment">// 执行平移操作</span></li><li>canvas.<span class="hljs-title function_">translate</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>);</li><li><span class="hljs-comment">// 绘制矩形</span></li><li>canvas.<span class="hljs-title function_">drawRect</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">600</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">600</span> });</li><li><span class="hljs-comment">// 去除填充效果</span></li><li>canvas.<span class="hljs-title function_">detachBrush</span>();</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.3.1.1" valign="top" width="50%">原始图</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.3.1.2" valign="top" width="50%">平移后的效果图</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="1382" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114358.03367451419259334726757101078535:50001231000000:2800:51E39C598202D818CFCCAE799EF486D116E2EB7B11BD4D7E479D8988B4B2F9FE.jpg" width="436" height="481.656274980016"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="1281" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114358.87553307108950851937856637226993:50001231000000:2800:2EEEE12BA145059B94B00AB811083F76217645C503BC1C83B8804C71372A7DF6.jpg" width="436" height="446.45563549160676"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="旋转">旋转<i class="anchor-icon anchor-icon-link" anchorid="旋转" tips="复制节点链接"></i></h3>          <p>使用rotate()接口实现画布旋转，接口接受3个参数，分别为：旋转角度、旋转中心的x坐标和y坐标。</p>     <p>简单示例和示意图如下所示：</p>     <div _ngcontent-xrx-c106="" class="highlight-div"><div _ngcontent-xrx-c106="" class="highlight-div-header"><div _ngcontent-xrx-c106="" class="highlight-div-header-left"><div _ngcontent-xrx-c106="" class="handle-button expand-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xrx-c106="" class="highlight-div-header-right"><div _ngcontent-xrx-c106="" class="handle-button ai-button"></div><div _ngcontent-xrx-c106="" class="handle-button line-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xrx-c106="" class="handle-button theme-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xrx-c106="" class="handle-button copy-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xrx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建画刷</span></li><li><span class="hljs-keyword">let</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li><span class="hljs-comment">// 设置颜色为红色</span></li><li>brush.<span class="hljs-title function_">setColor</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>);</li><li><span class="hljs-comment">// 设置画刷填充效果</span></li><li>canvas.<span class="hljs-title function_">attachBrush</span>(brush);</li><li><span class="hljs-comment">// 顺时针旋转45度</span></li><li>canvas.<span class="hljs-title function_">rotate</span>(<span class="hljs-number">45</span>, <span class="hljs-number">200</span>, <span class="hljs-number">200</span>);</li><li><span class="hljs-comment">// 绘制矩形</span></li><li>canvas.<span class="hljs-title function_">drawRect</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">600</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">600</span> });</li><li><span class="hljs-comment">// 去除填充效果</span></li><li>canvas.<span class="hljs-title function_">detachBrush</span>();</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.3.1.1" valign="top" width="50%">原始图</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.3.1.2" valign="top" width="50%">旋转后的效果图</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="1382" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114358.87343443955590250705327299948970:50001231000000:2800:53F1DA40DA7BD7D6A596E2465DEDABCE2AD2C5C897E032A6C618B14BDD0EB2E7.jpg" width="436" height="481.656274980016"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="1279" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114358.95108462621853418790648313661673:50001231000000:2800:8C0FFB8090832BB7C2B66D80643BF705478D5E8FA8B831518BDE45459D287A3F.jpg" width="436" height="445.7585931254996"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="缩放">缩放<i class="anchor-icon anchor-icon-link" anchorid="缩放" tips="复制节点链接"></i></h3>          <p>使用scale()接口进行画布缩放，接口接受2个参数，分别为沿x轴和y轴的缩放因子。</p>     <p>简单示例和示意图如下所示：</p>     <div _ngcontent-xrx-c106="" class="highlight-div"><div _ngcontent-xrx-c106="" class="highlight-div-header"><div _ngcontent-xrx-c106="" class="highlight-div-header-left"><div _ngcontent-xrx-c106="" class="handle-button expand-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xrx-c106="" class="highlight-div-header-right"><div _ngcontent-xrx-c106="" class="handle-button ai-button"></div><div _ngcontent-xrx-c106="" class="handle-button line-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xrx-c106="" class="handle-button theme-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xrx-c106="" class="handle-button copy-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xrx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建画刷</span></li><li><span class="hljs-keyword">let</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>();</li><li><span class="hljs-comment">// 设置颜色为红色</span></li><li>brush.<span class="hljs-title function_">setColor</span>({ <span class="hljs-attr">alpha</span>: <span class="hljs-number">0xFF</span>, <span class="hljs-attr">red</span>: <span class="hljs-number">0xFF</span>, <span class="hljs-attr">green</span>: <span class="hljs-number">0x00</span>, <span class="hljs-attr">blue</span>: <span class="hljs-number">0x00</span> });</li><li><span class="hljs-comment">// 设置画刷填充效果</span></li><li>canvas.<span class="hljs-title function_">attachBrush</span>(brush);</li><li><span class="hljs-comment">// 执行放大操作</span></li><li>canvas.<span class="hljs-title function_">scale</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);</li><li><span class="hljs-comment">// 绘制矩形</span></li><li>canvas.<span class="hljs-title function_">drawRect</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">600</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">600</span> });</li><li><span class="hljs-comment">// 去除填充效果</span></li><li>canvas.<span class="hljs-title function_">detachBrush</span>();</li></ol></pre></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.3.1.1" valign="top" width="50%">原始图</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.3.1.2" valign="top" width="50%">缩放后的效果图</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="1382" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114358.70366326590206063631133191054076:50001231000000:2800:6BC477C43CA77A28FECAC875A448DD8B613B19389BBDDC055656D736A44C7B40.jpg" width="436" height="481.656274980016"></span></td>         <td class="cellrowborder" valign="top" width="50%"><span><img originheight="1214" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114358.26487245552944737638033976220730:50001231000000:2800:A28FD3153F307883E33A105FEE5B72077937F984CAEDD9A718837FE1B643434E.jpg" width="436" height="423.1047162270184"></span></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="画布状态保存与恢复">画布状态保存与恢复<i class="anchor-icon anchor-icon-link" anchorid="画布状态保存与恢复" tips="复制节点链接"></i></h2>          <p>保存操作用于保存当前画布的状态到一个栈顶，恢复操作用于恢复保存在栈顶的画布状态，恢复操作一旦执行，保存和恢复操作中间一系列平移、缩放、剪裁等操作都会被清除。</p>    </div>    <div class="tiledSection">     <h3 id="接口说明-2" class="firsth2">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明-2" tips="复制节点链接"></i></h3>          <p>画布状态保存与恢复使用的接口如下表所示，详细的使用和参数说明请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-canvas" target="_blank">canvas</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.3.1.3.1.1" valign="top" width="50%">接口</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.3.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">save(): void</td>         <td class="cellrowborder" valign="top" width="50%">用于保存当前画布的状态（画布矩阵）到一个栈顶。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">restore(): void</td>         <td class="cellrowborder" valign="top" width="50%">用于恢复保存在栈顶的画布状态（画布矩阵）。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">restoreToCount(count: number): void</td>         <td class="cellrowborder" valign="top" width="50%">用于恢复到指定数量的画布状态（画布矩阵）。</td>        </tr>             </tbody></table></div>     </div>     <p>简单示例和示意图如下所示：</p>     <div _ngcontent-xrx-c106="" class="highlight-div"><div _ngcontent-xrx-c106="" class="highlight-div-header"><div _ngcontent-xrx-c106="" class="highlight-div-header-left"><div _ngcontent-xrx-c106="" class="handle-button expand-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xrx-c106="" class="highlight-div-header-right"><div _ngcontent-xrx-c106="" class="handle-button ai-button"></div><div _ngcontent-xrx-c106="" class="handle-button line-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xrx-c106="" class="handle-button theme-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xrx-c106="" class="handle-button copy-button"><div _ngcontent-xrx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xrx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建画笔</span></li><li><span class="hljs-keyword">let</span> pen = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Pen</span>();</li><li><span class="hljs-comment">// 设置颜色为红色</span></li><li>pen.<span class="hljs-title function_">setColor</span>({ <span class="hljs-attr">alpha</span>: <span class="hljs-number">0xFF</span>, <span class="hljs-attr">red</span>: <span class="hljs-number">0xFF</span>, <span class="hljs-attr">green</span>: <span class="hljs-number">0x00</span>, <span class="hljs-attr">blue</span>: <span class="hljs-number">0x00</span> });</li><li><span class="hljs-comment">// 设置描边宽度为20px</span></li><li>pen.<span class="hljs-title function_">setStrokeWidth</span>(<span class="hljs-number">20</span>);</li><li><span class="hljs-comment">// 设置画笔描边效果</span></li><li>canvas.<span class="hljs-title function_">attachPen</span>(pen);</li><li><span class="hljs-comment">// 保存操作，当前是不存在放大等操作的，这个原始状态会被保存下来</span></li><li>canvas.<span class="hljs-title function_">save</span>();</li><li><span class="hljs-comment">// x轴和y轴方向分别放大2倍</span></li><li>canvas.<span class="hljs-title function_">scale</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);</li><li><span class="hljs-comment">// 绘制圆形，因为执行过放大操作，所以此时绘制的是大圆</span></li><li>canvas.<span class="hljs-title function_">drawCircle</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">200</span>);</li><li><span class="hljs-comment">// 恢复操作，恢复到没有放大的原始状态</span></li><li>canvas.<span class="hljs-title function_">restore</span>();</li><li><span class="hljs-comment">// 绘制圆形，因为已经恢复到没有放大的原始状态，所以此时绘制的是小圆</span></li><li>canvas.<span class="hljs-title function_">drawCircle</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">200</span>);</li><li><span class="hljs-comment">// 去除描边效果</span></li><li>canvas.<span class="hljs-title function_">detachPen</span>();</li></ol></pre></div></div>     <p><span><img originheight="1321" originwidth="1251" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114358.15982625858931725635390111849739:50001231000000:2800:BA9C6C54641E9872D3A2ECCF674597DF80EC96C833B619349F912171BA63F33E.jpg" width="920" height="971.4788169464429"></span></p>    </div>    <div class="tiledSection">     <h2 id="示例代码">示例代码<i class="anchor-icon anchor-icon-link" anchorid="示例代码" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitcode.com/HarmonyOS_Samples/DocsSample_Graphics/blob/master/ArkGraphics2D/Drawing/ArkTSGraphicsDraw" target="_blank">图形绘制（ArkTS）</a></li>     </ul>    </div>   </div>   <div></div></div>