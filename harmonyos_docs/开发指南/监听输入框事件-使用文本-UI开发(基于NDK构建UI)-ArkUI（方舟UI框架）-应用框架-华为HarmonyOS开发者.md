<h1 _ngcontent-uti-c119="" class="doc-title ng-star-inserted" title="监听输入框事件"> 监听输入框事件 </h1>

<div _ngcontent-uti-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>输入框包含多种交互行为，开发者可注册事件监听并获取状态。</p>    <p>要实现实时搜索功能，可注册<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-node-h#arkui_nodeeventtype" target="_blank">NODE_TEXT_AREA_ON_CHANGE</a>事件，输入框文本发生变化时会收到通知，并能获取当前文本内容。</p>    <p>要实现文字过滤功能，可注册<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-node-h#arkui_nodeeventtype" target="_blank">NODE_TEXT_AREA_ON_WILL_INSERT</a>事件，在文字即将插入前会收到通知，通过返回值控制文字是否插入。</p>    <p>要实现用户编辑文字前后页面布局的不同，可注册<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-node-h#arkui_nodeeventtype" target="_blank">NODE_TEXT_AREA_ON_EDIT_CHANGE</a>事件，输入框编辑状态切换时会收到通知。</p>    <p>以下示例基于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-access-the-arkts-page">接入ArkTS页面章节</a>，说明如何监听输入框的事件及数据解析。</p>    <ul>     <li>      <p>注册事件</p>      <p>事件注册有统一接口，详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkui-nativemodule-arkui-nativenodeapi-1#registernodeevent" target="_blank">registerNodeEvent</a>。输入框支持的事件类型，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-node-h#arkui_nodeeventtype" target="_blank">NativeNode组件支持的事件类型定义</a>，搜索前缀NODE_TEXT_AREA_。</p>      <div _ngcontent-uti-c106="" class="highlight-div"><div _ngcontent-uti-c106="" class="highlight-div-header"><div _ngcontent-uti-c106="" class="highlight-div-header-left"><div _ngcontent-uti-c106="" class="handle-button expand-button"><div _ngcontent-uti-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uti-c106="" class="highlight-div-header-right"><div _ngcontent-uti-c106="" class="handle-button ai-button"></div><div _ngcontent-uti-c106="" class="handle-button line-button"><div _ngcontent-uti-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uti-c106="" class="handle-button theme-button"><div _ngcontent-uti-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uti-c106="" class="handle-button copy-button"><div _ngcontent-uti-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uti-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建两个文本组件，展示事件内收到的信息。</span></li><li><span class="hljs-variable">ArkUI_NodeHandle</span> <span class="hljs-variable">text</span> = <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">createNode</span>(<span class="hljs-title class_">ARKUI_NODE_TEXT</span>);</li><li><span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">textWidth</span>[] = {{.<span class="hljs-variable">f32</span> = <span class="hljs-number">300</span>}};</li><li><span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">textWidthItem</span> = {.<span class="hljs-variable">value</span> = <span class="hljs-variable">textWidth</span>, .<span class="hljs-variable">size</span> = <span class="hljs-number">1</span>};</li><li><span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">text</span>, <span class="hljs-title class_">NODE_WIDTH</span>, &amp;<span class="hljs-title class_">textWidthItem</span>);</li><li>
</li><li><span class="hljs-variable">ArkUI_NodeHandle</span> <span class="hljs-variable">selectionText</span> = <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">createNode</span>(<span class="hljs-title class_">ARKUI_NODE_TEXT</span>);</li><li><span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">selectionTextWidth</span>[] = {{.<span class="hljs-variable">f32</span> = <span class="hljs-number">300</span>}};</li><li><span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">selectionTextWidthItem</span> = {.<span class="hljs-variable">value</span> = <span class="hljs-variable">selectionTextWidth</span>, .<span class="hljs-variable">size</span> = <span class="hljs-number">1</span>};</li><li><span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">selectionText</span>, <span class="hljs-title class_">NODE_WIDTH</span>, &amp;<span class="hljs-title class_">selectionTextWidthItem</span>);</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">ArkUI_AttributeItem</span> *<span class="hljs-variable">attributeItem</span> = <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">getAttribute</span>(<span class="hljs-title class_">textArea</span>, <span class="hljs-title class_">NODE_UNIQUE_ID</span>);</li><li><span class="hljs-comment">// 组件id作为targetid来区分不同组件的事件。</span></li><li><span class="hljs-variable">auto</span> <span class="hljs-variable">id</span> = <span class="hljs-variable">attributeItem</span>-&gt;<span class="hljs-title class_">value</span>[<span class="hljs-number">0</span>].<span class="hljs-variable">i32</span>;</li><li><span class="hljs-comment">// 注册文本变化事件</span></li><li><span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">registerNodeEvent</span>(<span class="hljs-title class_">textArea</span>, <span class="hljs-title class_">NODE_TEXT_AREA_ON_CHANGE</span>, <span class="hljs-title class_">id</span>, <span class="hljs-title class_">text</span>);</li><li><span class="hljs-comment">// 注册粘贴事件</span></li><li><span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">registerNodeEvent</span>(<span class="hljs-title class_">textArea</span>, <span class="hljs-title class_">NODE_TEXT_AREA_ON_PASTE</span>, <span class="hljs-title class_">id</span>, <span class="hljs-title class_">text</span>);</li><li><span class="hljs-comment">// 注册文本选择事件</span></li><li><span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">registerNodeEvent</span>(<span class="hljs-title class_">textArea</span>, <span class="hljs-title class_">NODE_TEXT_AREA_ON_TEXT_SELECTION_CHANGE</span>, <span class="hljs-title class_">id</span>, <span class="hljs-title class_">selectionText</span>);</li></ol></pre></div></div></li>     <li>      <p>注册事件回调</p>      <p>事件回调注册有统一接口，详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkui-nativemodule-arkui-nativenodeapi-1#registernodeeventreceiver" target="_blank">registerNodeEventReceiver</a>。</p>      <div _ngcontent-uti-c106="" class="highlight-div"><div _ngcontent-uti-c106="" class="highlight-div-header"><div _ngcontent-uti-c106="" class="highlight-div-header-left"><div _ngcontent-uti-c106="" class="handle-button expand-button"><div _ngcontent-uti-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uti-c106="" class="highlight-div-header-right"><div _ngcontent-uti-c106="" class="handle-button ai-button"></div><div _ngcontent-uti-c106="" class="handle-button line-button"><div _ngcontent-uti-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uti-c106="" class="handle-button theme-button"><div _ngcontent-uti-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uti-c106="" class="handle-button copy-button"><div _ngcontent-uti-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uti-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">registerNodeEventReceiver</span>([](<span class="hljs-variable">ArkUI_NodeEvent</span> <span class="hljs-variable">*event</span>) {</li><li>    <span class="hljs-variable">ArkUI_NodeEventType</span> <span class="hljs-variable">eventType</span> = <span class="hljs-title function_">OH_ArkUI_NodeEvent_GetEventType</span>(<span class="hljs-variable">event</span>);</li><li>    <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">content</span>;</li><li>    <span class="hljs-comment">// 文本内容变化事件和粘贴事件</span></li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">eventType</span> == <span class="hljs-variable">NODE_TEXT_AREA_ON_CHANGE</span> || <span class="hljs-variable">eventType</span> == <span class="hljs-variable">NODE_TEXT_AREA_ON_PASTE</span>) {</li><li>        <span class="hljs-comment">// 获取文本内容</span></li><li>        <span class="hljs-variable">ArkUI_StringAsyncEvent</span> *<span class="hljs-variable">stringEvent</span> = <span class="hljs-title function_">OH_ArkUI_NodeEvent_GetStringAsyncEvent</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">content</span> = {.<span class="hljs-variable">string</span> = <span class="hljs-variable">stringEvent</span>-&gt;<span class="hljs-title class_">pStr</span> };</li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable">eventType</span> == <span class="hljs-variable">NODE_TEXT_AREA_ON_TEXT_SELECTION_CHANGE</span>) {</li><li>        <span class="hljs-comment">// 获取选中的文字的索引值，起始索引和结束索引，根据此获取用户选中的文字</span></li><li>        <span class="hljs-variable">ArkUI_NodeComponentEvent</span> *<span class="hljs-variable">componentEvent</span> = <span class="hljs-title function_">OH_ArkUI_NodeEvent_GetNodeComponentEvent</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">std</span>::<span class="hljs-title class_">stringstream</span> <span class="hljs-title class_">selectContent</span>;</li><li>        <span class="hljs-variable">selectContent</span> &lt;&lt; <span class="hljs-string">"start: "</span> &lt;&lt; <span class="hljs-variable">componentEvent</span>-&gt;<span class="hljs-title class_">data</span>[<span class="hljs-number">0</span>].<span class="hljs-variable">i32</span> &lt;&lt; <span class="hljs-string">" , end: "</span> &lt;&lt; <span class="hljs-variable">componentEvent</span>-&gt;<span class="hljs-title class_">data</span>[<span class="hljs-number">1</span>].<span class="hljs-variable">i32</span>;</li><li>        <span class="hljs-variable">content</span> = {.<span class="hljs-variable">string</span> = <span class="hljs-variable">selectContent</span>.<span class="hljs-title function_">str</span>().<span class="hljs-title function_">c_str</span>() };</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable">ArkUI_NodeHandle</span> <span class="hljs-variable">textNode</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NodeHandle</span>&gt;(<span class="hljs-title function_">OH_ArkUI_NodeEvent_GetUserData</span>(<span class="hljs-variable">event</span>));</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">textNode</span>) {</li><li>        <span class="hljs-comment">// 将文本信息展示在Text组件上。</span></li><li>        <span class="hljs-variable">ArkUI_NativeNodeAPI_1</span> *<span class="hljs-variable">nodeApi</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NativeNodeAPI_1</span> *&gt;(</li><li>            <span class="hljs-title function_">OH_ArkUI_QueryModuleInterfaceByName</span>(<span class="hljs-variable">ARKUI_NATIVE_NODE</span>, <span class="hljs-string">"ArkUI_NativeNodeAPI_1"</span>));</li><li>        <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">textNode</span>, <span class="hljs-title class_">NODE_TEXT_CONTENT</span>, &amp;<span class="hljs-title class_">content</span>);</li><li>    }</li><li>});</li></ol></pre></div></div></li>     <li>      <p>完整示例</p>      <p>本篇示例仅提供核心接口的调用方法，完整的示例工程请参考<a href="https://gitcode.com/HarmonyOS_Samples/guide-snippets/tree/master/ArkUIKit/TextAreaEventNDK" target="_blank">TextAreaEventNDK</a>。</p>      <div _ngcontent-uti-c106="" class="highlight-div"><div _ngcontent-uti-c106="" class="highlight-div-header"><div _ngcontent-uti-c106="" class="highlight-div-header-left"><div _ngcontent-uti-c106="" class="handle-button expand-button"><div _ngcontent-uti-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uti-c106="" class="highlight-div-header-right"><div _ngcontent-uti-c106="" class="handle-button ai-button"></div><div _ngcontent-uti-c106="" class="handle-button line-button"><div _ngcontent-uti-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uti-c106="" class="handle-button theme-button"><div _ngcontent-uti-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uti-c106="" class="handle-button copy-button"><div _ngcontent-uti-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uti-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">arkui</span>/<span class="hljs-title class_">native_interface</span>.<span class="hljs-title class_">h</span>&gt;</li><li>
</li><li><span class="hljs-variable">void</span> <span class="hljs-variable">NodeManager</span>::<span class="hljs-title class_">CreateTextAreaNode</span>() {</li><li>    <span class="hljs-variable">ArkUI_NativeNodeAPI_1</span> *<span class="hljs-variable">nodeApi</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NativeNodeAPI_1</span> *&gt;(</li><li>        <span class="hljs-title function_">OH_ArkUI_QueryModuleInterfaceByName</span>(<span class="hljs-variable">ARKUI_NATIVE_NODE</span>, <span class="hljs-string">"ArkUI_NativeNodeAPI_1"</span>));</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">nodeApi</span> == <span class="hljs-variable">nullptr</span>) {</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable">ArkUI_NodeHandle</span> <span class="hljs-variable">column</span> = <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">createNode</span>(<span class="hljs-title class_">ARKUI_NODE_COLUMN</span>);</li><li>    <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">colWidth</span>[] = {{.<span class="hljs-variable">f32</span> = <span class="hljs-number">300</span>}};</li><li>    <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">widthItem</span> = {.<span class="hljs-variable">value</span> = <span class="hljs-variable">colWidth</span>, .<span class="hljs-variable">size</span> = <span class="hljs-number">1</span>};</li><li>    <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_WIDTH</span>, &amp;<span class="hljs-title class_">widthItem</span>);</li><li>
</li><li>    <span class="hljs-variable">ArkUI_NodeHandle</span> <span class="hljs-variable">text</span> = <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">createNode</span>(<span class="hljs-title class_">ARKUI_NODE_TEXT</span>);</li><li>    <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">textWidth</span>[] = {{.<span class="hljs-variable">f32</span> = <span class="hljs-number">300</span>}};</li><li>    <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">textWidthItem</span> = {.<span class="hljs-variable">value</span> = <span class="hljs-variable">textWidth</span>, .<span class="hljs-variable">size</span> = <span class="hljs-number">1</span>};</li><li>    <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">text</span>, <span class="hljs-title class_">NODE_WIDTH</span>, &amp;<span class="hljs-title class_">textWidthItem</span>);</li><li>    <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">addChild</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">text</span>);</li><li>    </li><li>    <span class="hljs-variable">ArkUI_NodeHandle</span> <span class="hljs-variable">selectionText</span> = <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">createNode</span>(<span class="hljs-title class_">ARKUI_NODE_TEXT</span>);</li><li>    <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">selectionTextWidth</span>[] = {{.<span class="hljs-variable">f32</span> = <span class="hljs-number">300</span>}};</li><li>    <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">selectionTextWidthItem</span> = {.<span class="hljs-variable">value</span> = <span class="hljs-variable">selectionTextWidth</span>, .<span class="hljs-variable">size</span> = <span class="hljs-number">1</span>};</li><li>    <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">selectionText</span>, <span class="hljs-title class_">NODE_WIDTH</span>, &amp;<span class="hljs-title class_">selectionTextWidthItem</span>);</li><li>    <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">addChild</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">selectionText</span>);</li><li>
</li><li>    <span class="hljs-variable">ArkUI_NodeHandle</span> <span class="hljs-variable">textArea</span> = <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">createNode</span>(<span class="hljs-title class_">ARKUI_NODE_TEXT_AREA</span>);</li><li>    <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">textAreaWidth</span>[] = {{.<span class="hljs-variable">f32</span> = <span class="hljs-number">300</span>}};</li><li>    <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">textAreaWidthItem</span> = {.<span class="hljs-variable">value</span> = <span class="hljs-variable">textAreaWidth</span>, .<span class="hljs-variable">size</span> = <span class="hljs-number">1</span>};</li><li>    <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">textArea</span>, <span class="hljs-title class_">NODE_WIDTH</span>, &amp;<span class="hljs-title class_">textAreaWidthItem</span>);</li><li>
</li><li>    <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">borderWidth</span>[] = {{.<span class="hljs-variable">f32</span> = <span class="hljs-number">1</span>}};</li><li>    <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">borderWidthItem</span> = {.<span class="hljs-variable">value</span> = <span class="hljs-variable">borderWidth</span>, .<span class="hljs-variable">size</span> = <span class="hljs-number">1</span>};</li><li>    <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">textArea</span>, <span class="hljs-title class_">NODE_BORDER_WIDTH</span>, &amp;<span class="hljs-title class_">borderWidthItem</span>);</li><li>
</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-variable">ArkUI_AttributeItem</span> *<span class="hljs-variable">attributeItem</span> = <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">getAttribute</span>(<span class="hljs-title class_">textArea</span>, <span class="hljs-title class_">NODE_UNIQUE_ID</span>);</li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">id</span> = <span class="hljs-variable">attributeItem</span>-&gt;<span class="hljs-title class_">value</span>[<span class="hljs-number">0</span>].<span class="hljs-variable">i32</span>;</li><li>    <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">registerNodeEvent</span>(<span class="hljs-title class_">textArea</span>, <span class="hljs-title class_">NODE_TEXT_AREA_ON_CHANGE</span>, <span class="hljs-title class_">id</span>, <span class="hljs-title class_">text</span>);</li><li>    <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">registerNodeEvent</span>(<span class="hljs-title class_">textArea</span>, <span class="hljs-title class_">NODE_TEXT_AREA_ON_PASTE</span>, <span class="hljs-title class_">id</span>, <span class="hljs-title class_">text</span>);</li><li>    <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">registerNodeEvent</span>(<span class="hljs-title class_">textArea</span>, <span class="hljs-title class_">NODE_TEXT_AREA_ON_TEXT_SELECTION_CHANGE</span>, <span class="hljs-title class_">id</span>, <span class="hljs-title class_">selectionText</span>);</li><li>    <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">registerNodeEventReceiver</span>([](<span class="hljs-variable">ArkUI_NodeEvent</span> <span class="hljs-variable">*event</span>) {</li><li>        <span class="hljs-variable">ArkUI_NodeEventType</span> <span class="hljs-variable">eventType</span> = <span class="hljs-title function_">OH_ArkUI_NodeEvent_GetEventType</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">content</span>;</li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-variable">eventType</span> == <span class="hljs-variable">NODE_TEXT_AREA_ON_CHANGE</span> || <span class="hljs-variable">eventType</span> == <span class="hljs-variable">NODE_TEXT_AREA_ON_PASTE</span>) {</li><li>            <span class="hljs-variable">ArkUI_StringAsyncEvent</span> *<span class="hljs-variable">stringEvent</span> = <span class="hljs-title function_">OH_ArkUI_NodeEvent_GetStringAsyncEvent</span>(<span class="hljs-variable">event</span>);</li><li>            <span class="hljs-variable">content</span> = {.<span class="hljs-variable">string</span> = <span class="hljs-variable">stringEvent</span>-&gt;<span class="hljs-title class_">pStr</span> };</li><li>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable">eventType</span> == <span class="hljs-variable">NODE_TEXT_AREA_ON_TEXT_SELECTION_CHANGE</span>) {</li><li>            <span class="hljs-variable">ArkUI_NodeComponentEvent</span> *<span class="hljs-variable">componentEvent</span> = <span class="hljs-title function_">OH_ArkUI_NodeEvent_GetNodeComponentEvent</span>(<span class="hljs-variable">event</span>);</li><li>            <span class="hljs-variable">std</span>::<span class="hljs-title class_">stringstream</span> <span class="hljs-title class_">selectContent</span>;</li><li>            <span class="hljs-variable">selectContent</span> &lt;&lt; <span class="hljs-string">"start: "</span> &lt;&lt; <span class="hljs-variable">componentEvent</span>-&gt;<span class="hljs-title class_">data</span>[<span class="hljs-number">0</span>].<span class="hljs-variable">i32</span> &lt;&lt; <span class="hljs-string">" , end: "</span> &lt;&lt; <span class="hljs-variable">componentEvent</span>-&gt;<span class="hljs-title class_">data</span>[<span class="hljs-number">1</span>].<span class="hljs-variable">i32</span>;</li><li>            <span class="hljs-variable">content</span> = {.<span class="hljs-variable">string</span> = <span class="hljs-variable">selectContent</span>.<span class="hljs-title function_">str</span>().<span class="hljs-title function_">c_str</span>() };</li><li>        } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable">ArkUI_NodeHandle</span> <span class="hljs-variable">textNode</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NodeHandle</span>&gt;(<span class="hljs-title function_">OH_ArkUI_NodeEvent_GetUserData</span>(<span class="hljs-variable">event</span>));</li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-variable">textNode</span>) {</li><li>            <span class="hljs-variable">ArkUI_NativeNodeAPI_1</span> *<span class="hljs-variable">nodeApi</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NativeNodeAPI_1</span> *&gt;(</li><li>                <span class="hljs-title function_">OH_ArkUI_QueryModuleInterfaceByName</span>(<span class="hljs-variable">ARKUI_NATIVE_NODE</span>, <span class="hljs-string">"ArkUI_NativeNodeAPI_1"</span>));</li><li>            <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">textNode</span>, <span class="hljs-title class_">NODE_TEXT_CONTENT</span>, &amp;<span class="hljs-title class_">content</span>);</li><li>        }</li><li>    });</li><li>    <span class="hljs-variable">nodeApi</span>-&gt;<span class="hljs-title class_">addChild</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">textArea</span>);</li><li>    <span class="hljs-title function_">OH_NativeXComponent_AttachNativeRootNode</span>(<span class="hljs-variable">xComponent</span>, <span class="hljs-variable">column</span>);</li><li>}</li></ol></pre></div></div></li>    </ul>    <p><span><img originheight="537" originwidth="407" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114822.27866673779368679253323923704431:50001231000000:2800:F234727B235AD0B85DBA99EFC1DD1823A638617540F3A5C0BC91628F6C93F416.gif" width="407" height="537"></span></p>   </div>   <div></div></div>