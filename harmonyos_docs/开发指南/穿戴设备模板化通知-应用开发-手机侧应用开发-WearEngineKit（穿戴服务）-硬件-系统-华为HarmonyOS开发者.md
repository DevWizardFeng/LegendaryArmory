<h1 _ngcontent-tlk-c119="" class="doc-title ng-star-inserted" title="穿戴设备模板化通知"> 穿戴设备模板化通知 </h1>

<div _ngcontent-tlk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>手机侧应用向穿戴设备发送通知，并在穿戴设备上按模板显示，支持穿戴设备收到通知后同步振动或响铃（跟随穿戴设备系统设置）。执行成功后，穿戴设备上会显示下图所示通知界面。</p>    <p>该接口无需用户授权，仅需要确保应用已申请消息通知权限（参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wearengine_apply">申请接入Wear Engine服务</a>），否则接口将调用失败。</p>    <p><span><img originheight="249" originwidth="522" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115110.57555738305922929286469371622336:50001231000000:2800:F7806CCCC8072257E47EA2044A5E0407ABE948864B14458EF04FFC0B52835DB9.png" width="522" height="249"></span></p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>穿戴设备侧无对应的应用也可以显示模板化通知。</li>       <li>请确保穿戴设备和华为运动健康App处于连接状态。用户可进入App“设备”界面查看设备是否在线。开发者可调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api#section1828213119411" target="_blank">getConnectedDevices</a>方法了解设备是否在线，如果返回列表中不包含目标设备，则提醒用户重新连接该设备。</li>       <li>穿戴设备振动或响铃的条件：        <ol>         <li>穿戴设备侧已开启振动或响铃；</li>         <li>穿戴设备处于佩戴状态；</li>         <li>穿戴设备未开启勿扰模式。</li>        </ol></li>       <li>通知在穿戴设备上自动弹出通知的条件：        <ol>         <li>穿戴设备处于佩戴状态；</li>         <li>穿戴设备未开启勿扰模式。</li>        </ol></li>      </ul>     </div></div></div>    <div class="tiledSection">     <h2 id="section7622202817473">向穿戴设备侧发送通知<i class="anchor-icon anchor-icon-link" anchorid="section7622202817473" tips="复制节点链接"></i></h2>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>该接口的调用需要在开发者联盟申请消息通知权限（请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/wearengine_apply">申请接入Wear Engine服务</a>）。</p>      </div></div></div>     <ol>      <li><span>参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/query_connected_devices">已连接穿戴设备查询</a>章节，获取已连接设备列表。</span></li>      <li><span>参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/we-device-selection">目标设备选择</a>章节，从已连接设备列表中选定需要通信的设备。</span></li>      <li><span>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api" target="_blank">wearEngine</a>中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api#section552416431386" target="_blank">getNotifyClient</a>方法，获取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api#section82221754103913" target="_blank">NotifyClient</a>对象。</span></li>      <li><span>定义<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api#section0751457344" target="_blank">NotificationOptions</a>配置参数类。</span></li>      <li><span>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/wearengine_api#section087562072313" target="_blank">notify</a>方法，从手机上的应用发送通知到穿戴设备侧。</span>       <p></p>       <div _ngcontent-tlk-c106="" class="highlight-div"><div _ngcontent-tlk-c106="" class="highlight-div-header"><div _ngcontent-tlk-c106="" class="highlight-div-header-left"><div _ngcontent-tlk-c106="" class="handle-button expand-button"><div _ngcontent-tlk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tlk-c106="" class="highlight-div-header-right"><div _ngcontent-tlk-c106="" class="handle-button ai-button"></div><div _ngcontent-tlk-c106="" class="handle-button line-button"><div _ngcontent-tlk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tlk-c106="" class="handle-button theme-button"><div _ngcontent-tlk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tlk-c106="" class="handle-button copy-button"><div _ngcontent-tlk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tlk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 步骤3 获取NotifyClient对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">notifyClient</span>: wearEngine.<span class="hljs-property">NotifyClient</span> = wearEngine.<span class="hljs-title function_">getNotifyClient</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li>
</li><li><span class="hljs-comment">// 步骤4 构造NotificationOptions对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">button1</span>: wearEngine.<span class="hljs-property">NotificationButton</span> = {</li><li>  <span class="hljs-attr">buttonId</span>: wearEngine.<span class="hljs-property">ButtonId</span>.<span class="hljs-property">FIRST_BUTTON</span>,</li><li>  <span class="hljs-comment">// 按钮内容最大长度为12字节</span></li><li>  <span class="hljs-attr">content</span>: <span class="hljs-string">'button_1'</span></li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">type1Notification</span>: wearEngine.<span class="hljs-property">Notification</span> = {</li><li>  <span class="hljs-attr">type</span>: wearEngine.<span class="hljs-property">NotificationType</span>.<span class="hljs-property">NOTIFICATION_WITH_ONE_BUTTON</span>,</li><li>  <span class="hljs-comment">// 包名与标题的最大长度为28字节</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'bundleName'</span>,</li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'title'</span>,</li><li>  <span class="hljs-comment">// 消息内容最大长度为400字节</span></li><li>  <span class="hljs-attr">text</span>: <span class="hljs-string">'text'</span>,</li><li>  <span class="hljs-attr">buttons</span>: [button1]</li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: wearEngine.<span class="hljs-property">NotificationOptions</span> = {</li><li>  <span class="hljs-attr">notification</span>: type1Notification,</li><li>  <span class="hljs-attr">onAction</span>: <span class="hljs-function">(<span class="hljs-params">feedback: wearEngine.NotificationFeedback</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`one button notify get feedback is <span class="hljs-subst">${feedback.action ? feedback.action : feedback.errorCode}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 步骤5 发送模板化通知至设备侧</span></li><li>notifyClient.<span class="hljs-title function_">notify</span>(targetDevice.<span class="hljs-property">randomId</span>, options).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in sending notification.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to send notification. Code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>       <p></p></li>     </ol>    </div>   </div>   <div></div></div>