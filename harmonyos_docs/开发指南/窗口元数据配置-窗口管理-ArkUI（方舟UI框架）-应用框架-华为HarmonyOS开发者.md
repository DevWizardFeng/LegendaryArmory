<h1 _ngcontent-ett-c119="" class="doc-title ng-star-inserted" title="窗口元数据配置"> 窗口元数据配置 </h1>

<div _ngcontent-ett-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="metadata标签">metadata标签<i class="anchor-icon anchor-icon-link" anchorid="metadata标签" tips="复制节点链接"></i></h2>          <p>该标签标识HAP的自定义元信息，标签值为数组类型，包含name、value、resource三个子标签。</p>     <p><strong>表1</strong> metadata标签说明</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.1.4.1.5.1.1" valign="top" width="25%">属性名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.1.4.1.5.1.2" valign="top" width="25%">含义</th>         <th align="left" class="cellrowborder" id="mcps1.3.1.4.1.5.1.3" valign="top" width="25%">数据类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.1.4.1.5.1.4" valign="top" width="25%">是否可缺省</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="25%">name</td>         <td class="cellrowborder" valign="top" width="25%">标识数据项的名称，取值为长度不超过255字节的字符串。</td>         <td class="cellrowborder" valign="top" width="25%">字符串</td>         <td class="cellrowborder" valign="top" width="25%">该标签可缺省，缺省值为空。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">value</td>         <td class="cellrowborder" valign="top" width="25%">标识数据项的值，取值为长度不超过255字节的字符串。</td>         <td class="cellrowborder" valign="top" width="25%">字符串</td>         <td class="cellrowborder" valign="top" width="25%">该标签可缺省，缺省值为空。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="25%">resource</td>         <td class="cellrowborder" valign="top" width="25%">标识了用户自定义数据，取值为长度不超过255字节的字符串，内容为该数据的资源索引，例如配置成$profile:shortcuts_config，表示指向了/resources/base/profile/shortcuts_config.json配置文件。</td>         <td class="cellrowborder" valign="top" width="25%">字符串</td>         <td class="cellrowborder" valign="top" width="25%">该标签可缺省，缺省值为空。</td>        </tr>             </tbody></table></div>     </div>     <p>下面给出几种metadata标签的使用场景及示例，开发者也可以根据实际需求自定义设置。</p>     <ol>      <li>       <p>使用metadata标签配置主窗口的默认大小和位置（单位为vp）。其中name取值及对应含义如下：</p>       <ul>        <li>name取值为ohos.ability.window.height表示主窗口的默认高度，value表示高度大小。</li>        <li>name取值为ohos.ability.window.width表示主窗口的默认宽度，value表示宽度大小。</li>        <li>name取值为ohos.ability.window.left表示主窗口默认左边的位置。value表示配置格式，取值：对齐方式 +/- 偏移量。对齐方式包括center、left和right，默认值为left；当偏移量为0时可以省略。</li>        <li>name取值为ohos.ability.window.top表示主窗口顶部的位置。value表示配置格式，取值：对齐方式 +/- 偏移量。对齐方式包括center、top和bottom，默认值为top。如果对齐方式和偏移量同时省略，则按照系统默认的层叠规格处理。</li>       </ul></li>      <li>       <p>使用metadata标签配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-windowstage#removestartingwindow14" target="_blank">removeStartingWindow</a>接口的启用状态。配置项为：name取值enable.remove.starting.window，value取值true或false。true表示启用，false表示不启用。未配置时，默认为false。</p></li>      <li>       <p>使用metadata标签配置主窗启动时是否以最大化状态显示。配置项为：name为ohos.ability.window.isMaximize，value取值为true或false，取值为true表示最大化启动、取值为false表示不以最大化状态启动，未配置时默认为false。主窗最大化显示配置存在如下约束与限制：</p>       <ul>        <li>该配置项仅在PC/2in1设备上生效。</li>        <li>若使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-startoptions" target="_blank">startOptions</a>的supportWindowModes属性，需要配置FULL_SCREEN选项，此时使用metadata标签配置主窗最大化启动生效，否则不生效。</li>        <li>若使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#abilities标签">module.json5</a>的supportWindowMode属性，需要配置fullscreen选项，此时使用metadata标签配置主窗最大化启动生效，否则不生效。</li>        <li>主窗显示设置优先级排序为：全屏显示 &gt; 使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-startoptions" target="_blank">startOptions</a>接口指定大小和位置 &gt; 使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-windowstage#setwindowrectautosave14" target="_blank">setWindowRectAutoSave()</a>方法开启窗口尺寸记忆 &gt; 使用metadata标签配置最大化 &gt; 使用metadata标签配置大小和位置。全屏显示配置方法包括如下三种：         <ol>          <li>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-startoptions" target="_blank">startOptions</a>的windowMode属性并将其配置为WINDOW_MODE_FULLSCREEN。</li>          <li>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-startoptions" target="_blank">startOptions</a>的supportWindowModes属性，且只配置FULL_SCREEN选项。</li>          <li>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#abilities标签">module.json5</a>的supportWindowMode属性，且只配置fullscreen选项。</li>         </ol></li>       </ul></li>      <li>       <p>使用metadata配置<a href="https://developer.huawei.com/consumer/cn/doc/design-guides/pad-0000001823654157#section1768267204717" target="_blank">自由多窗</a>下的可支持窗口模式。配置项为：name为ohos.ability.window.supportWindowModeInFreeMultiWindow，value取值为：fullscreen（表示全屏模式）、split（表示分屏模式）、floating（表示悬浮窗模式）。value取值为字符串，可以配置多种模式，每个模式之间用逗号分隔开，不区分顺序，不添加空格，例如：fullscreen,split。仅在支持并处于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#自由窗口">自由窗口</a>状态的设备上生效；在支持但不处于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#自由窗口">自由窗口</a>状态的设备及不支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#自由窗口">自由窗口</a>状态的设备上配置不生效也不报错。</p>       <p>自由多窗下的可支持窗口模式可以采用多种方法进行配置，配置优先级为：通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-windowstage#setsupportedwindowmodes15" target="_blank">SetSupportedWindowModes</a>接口配置 &gt; 通过StartAbility配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-startoptions#startoptions" target="_blank">StartOption</a>中的SupportWindowMode &gt; 使用metadata配置 &gt; 配置module.json5中<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#abilities标签">abilities</a>标签下的SupportWindowMode属性。</p>       <p>非自由多窗模式下只能通过配置module.json5中abilities标签下的SupportWindowMode属性配置窗口支持模式，其他配置方式均不生效。</p></li>     </ol>     <div _ngcontent-ett-c106="" class="highlight-div"><div _ngcontent-ett-c106="" class="highlight-div-header"><div _ngcontent-ett-c106="" class="highlight-div-header-left"><div _ngcontent-ett-c106="" class="handle-button expand-button"><div _ngcontent-ett-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ett-c106="" class="highlight-div-header-right"><div _ngcontent-ett-c106="" class="handle-button ai-button"></div><div _ngcontent-ett-c106="" class="handle-button line-button"><div _ngcontent-ett-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ett-c106="" class="handle-button theme-button"><div _ngcontent-ett-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ett-c106="" class="handle-button copy-button"><div _ngcontent-ett-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ett-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"abilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ability_metadata"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"a test demo for ability"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"resource"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$profile:config_file"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ability_metadata_2"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"a string test"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"resource"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$profile:config_file"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ohos.ability.window.height"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"987"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ohos.ability.window.width"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1300"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ohos.ability.window.left"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"right-50"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ohos.ability.window.top"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"center+50"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ohos.ability.window.isMaximize"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"true"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"enable.remove.starting.window"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"true"</span></li><li>      <span class="hljs-punctuation">}</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ohos.ability.window.supportWindowModeInFreeMultiWindow"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fullscreen,split,floating"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>
</li><li>    <span class="hljs-attr">"extensionAbilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"extensionAbility_metadata"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"a test for extensionAbility"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"resource"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$profile:config_file"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"extensionAbility_metadata_2"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"a string test"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"resource"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$profile:config_file"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>   </div>   <div></div></div>