<h1 _ngcontent-kpu-c119="" class="doc-title ng-star-inserted" title="简单文本绘制与显示（ArkTS）"> 简单文本绘制与显示（ArkTS） </h1>

<div _ngcontent-kpu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="场景介绍">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="场景介绍" tips="复制节点链接"></i></h2>          <p>在一个简单的用户界面中，可能只需要展示几行静态文本，例如标签、按钮上的文字、菜单项或状态栏中的提示信息。此时，开发者只需要选择合适的字体、大小和颜色即可完成渲染。</p>    </div>    <div class="tiledSection">     <h2 id="相关属性">相关属性<i class="anchor-icon anchor-icon-link" anchorid="相关属性" tips="复制节点链接"></i></h2>          <p>此场景示例，涉及到的文本样式属性如下，具体及更多文本样式可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-graphics-text#textstyle" target="_blank">TextStyle</a>。</p>     <ul>      <li>       <p>color：字体颜色，默认为白色。请注意与画布颜色进行区分，以保证文本的正常显示。</p></li>      <li>       <p>fontSize：字体大小，浮点数，默认为14.0，单位为物理像素px。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>通过context获取到Canvas画布对象。</p>       <div _ngcontent-kpu-c106="" class="highlight-div"><div _ngcontent-kpu-c106="" class="highlight-div-header"><div _ngcontent-kpu-c106="" class="highlight-div-header-left"><div _ngcontent-kpu-c106="" class="handle-button expand-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpu-c106="" class="highlight-div-header-right"><div _ngcontent-kpu-c106="" class="handle-button ai-button"></div><div _ngcontent-kpu-c106="" class="handle-button line-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpu-c106="" class="handle-button theme-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpu-c106="" class="handle-button copy-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> canvas = context.<span class="hljs-property">canvas</span>;</li></ol></pre></div></div></li>      <li>       <p>初始化文本样式，此处设置字体颜色为红色，字体大小为50。</p>       <div _ngcontent-kpu-c106="" class="highlight-div"><div _ngcontent-kpu-c106="" class="highlight-div-header"><div _ngcontent-kpu-c106="" class="highlight-div-header-left"><div _ngcontent-kpu-c106="" class="handle-button expand-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpu-c106="" class="highlight-div-header-right"><div _ngcontent-kpu-c106="" class="handle-button ai-button"></div><div _ngcontent-kpu-c106="" class="handle-button line-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpu-c106="" class="handle-button theme-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpu-c106="" class="handle-button copy-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>  <span class="hljs-comment">// 文本颜色</span></li><li>  <span class="hljs-attr">color</span>: {</li><li>    <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>    <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>    <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>  },</li><li>  <span class="hljs-comment">// 文本大小</span></li><li>  <span class="hljs-attr">fontSize</span>: <span class="hljs-number">50</span></li><li>};</li></ol></pre></div></div></li>      <li>       <p>初始化段落样式。</p>       <div _ngcontent-kpu-c106="" class="highlight-div"><div _ngcontent-kpu-c106="" class="highlight-div-header"><div _ngcontent-kpu-c106="" class="highlight-div-header-left"><div _ngcontent-kpu-c106="" class="handle-button expand-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpu-c106="" class="highlight-div-header-right"><div _ngcontent-kpu-c106="" class="handle-button ai-button"></div><div _ngcontent-kpu-c106="" class="handle-button line-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpu-c106="" class="handle-button theme-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpu-c106="" class="handle-button copy-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 设置段落样式</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>  <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>};</li></ol></pre></div></div></li>      <li>       <p>初始化段落对象，并添加文本。</p>       <div _ngcontent-kpu-c106="" class="highlight-div"><div _ngcontent-kpu-c106="" class="highlight-div-header"><div _ngcontent-kpu-c106="" class="highlight-div-header-left"><div _ngcontent-kpu-c106="" class="handle-button expand-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpu-c106="" class="highlight-div-header-right"><div _ngcontent-kpu-c106="" class="handle-button ai-button"></div><div _ngcontent-kpu-c106="" class="handle-button line-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpu-c106="" class="handle-button theme-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpu-c106="" class="handle-button copy-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> fontCollection = text.<span class="hljs-property">FontCollection</span>.<span class="hljs-title function_">getGlobalInstance</span>();</li><li><span class="hljs-keyword">let</span> paragraphBuilder = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, fontCollection);</li><li><span class="hljs-comment">// 更新文本样式</span></li><li>paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li><span class="hljs-comment">// 添加文本</span></li><li>paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"Hello World"</span>);</li></ol></pre></div></div></li>      <li>       <p>排版段落并进行文本绘制。</p>       <div _ngcontent-kpu-c106="" class="highlight-div"><div _ngcontent-kpu-c106="" class="highlight-div-header"><div _ngcontent-kpu-c106="" class="highlight-div-header-left"><div _ngcontent-kpu-c106="" class="handle-button expand-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpu-c106="" class="highlight-div-header-right"><div _ngcontent-kpu-c106="" class="handle-button ai-button"></div><div _ngcontent-kpu-c106="" class="handle-button line-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpu-c106="" class="handle-button theme-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpu-c106="" class="handle-button copy-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 生成段落</span></li><li><span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li><li><span class="hljs-comment">// 布局</span></li><li>paragraph.<span class="hljs-title function_">layoutSync</span>(<span class="hljs-number">1250</span>);</li><li><span class="hljs-comment">// 绘制文本</span></li><li>paragraph.<span class="hljs-title function_">paint</span>(canvas, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>);</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="完整示例">完整示例<i class="anchor-icon anchor-icon-link" anchorid="完整示例" tips="复制节点链接"></i></h2>          <div _ngcontent-kpu-c106="" class="highlight-div"><div _ngcontent-kpu-c106="" class="highlight-div-header"><div _ngcontent-kpu-c106="" class="highlight-div-header-left"><div _ngcontent-kpu-c106="" class="handle-button expand-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpu-c106="" class="highlight-div-header-right"><div _ngcontent-kpu-c106="" class="handle-button ai-button"></div><div _ngcontent-kpu-c106="" class="handle-button line-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpu-c106="" class="handle-button theme-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpu-c106="" class="handle-button copy-button"><div _ngcontent-kpu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">RenderNode</span>, <span class="hljs-title class_">DrawContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { text } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span></li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode类，并绘制文本。</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">RenderNode</span> {</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">context: DrawContext</span>) {</li><li>    </li><li>    <span class="hljs-comment">// 绘制代码逻辑写在这里</span></li><li>    <span class="hljs-keyword">let</span> canvas = context.<span class="hljs-property">canvas</span>;</li><li>    </li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myTextStyle</span>: text.<span class="hljs-property">TextStyle</span> = {</li><li>      <span class="hljs-comment">// 文本颜色</span></li><li>      <span class="hljs-attr">color</span>: {</li><li>        <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">red</span>: <span class="hljs-number">255</span>,</li><li>        <span class="hljs-attr">green</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">blue</span>: <span class="hljs-number">0</span></li><li>      },</li><li>      <span class="hljs-comment">// 文本大小</span></li><li>      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">100</span></li><li>    };</li><li>    </li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">myParagraphStyle</span>: text.<span class="hljs-property">ParagraphStyle</span> = {</li><li>      <span class="hljs-attr">textStyle</span>: myTextStyle,</li><li>    };</li><li>    <span class="hljs-keyword">let</span> fontCollection = text.<span class="hljs-property">FontCollection</span>.<span class="hljs-title function_">getGlobalInstance</span>();</li><li>    <span class="hljs-keyword">let</span> paragraphBuilder = <span class="hljs-keyword">new</span> text.<span class="hljs-title class_">ParagraphBuilder</span>(myParagraphStyle, fontCollection);</li><li>    <span class="hljs-comment">// 更新文本样式</span></li><li>    paragraphBuilder.<span class="hljs-title function_">pushStyle</span>(myTextStyle);</li><li>    <span class="hljs-comment">// 添加文本</span></li><li>    paragraphBuilder.<span class="hljs-title function_">addText</span>(<span class="hljs-string">"Hello World"</span>);</li><li>
</li><li>    <span class="hljs-comment">// 生成段落</span></li><li>    <span class="hljs-keyword">let</span> paragraph = paragraphBuilder.<span class="hljs-title function_">build</span>();</li><li>    <span class="hljs-comment">// 布局</span></li><li>    paragraph.<span class="hljs-title function_">layoutSync</span>(<span class="hljs-number">1250</span>);</li><li>    <span class="hljs-comment">// 绘制文本</span></li><li>    paragraph.<span class="hljs-title function_">paint</span>(canvas, <span class="hljs-number">10</span>, <span class="hljs-number">800</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 创建一个MyRenderNode对象</span></li><li><span class="hljs-keyword">const</span> textNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRenderNode</span>()</li><li><span class="hljs-comment">// 定义newNode的像素格式</span></li><li>textNode.<span class="hljs-property">frame</span> = {</li><li>  <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">1250</span>,</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">800</span></li><li>}</li><li>textNode.<span class="hljs-property">pivot</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0.2</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0.8</span> }</li><li>textNode.<span class="hljs-property">scale</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> }</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameNode</span>(uiContext)</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-property">frame</span> = {</li><li>        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">10</span>,</li><li>        <span class="hljs-attr">height</span>: <span class="hljs-number">500</span></li><li>      }</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">addNode</span>(<span class="hljs-attr">node</span>: <span class="hljs-title class_">RenderNode</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">appendChild</span>(node)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">clearNodes</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> == <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">const</span> renderNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getRenderNode</span>()</li><li>    <span class="hljs-keyword">if</span> (renderNode != <span class="hljs-literal">null</span>) {</li><li>      renderNode.<span class="hljs-title function_">clearChildren</span>()</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">myNodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>()</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">performTask</span>(<span class="hljs-params"></span>) {</li><li>  myNodeController.<span class="hljs-title function_">clearNodes</span>()</li><li>  myNodeController.<span class="hljs-title function_">addNode</span>(textNode)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Font08</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">src</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">'app.media.startIcon'</span>)</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(myNodeController)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">src</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'0%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'0%'</span>)</li><li>          .<span class="hljs-title function_">onComplete</span>(</li><li>            <span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-title function_">performTask</span>();</li><li>            })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="效果展示">效果展示<i class="anchor-icon anchor-icon-link" anchorid="效果展示" tips="复制节点链接"></i></h2>          <p><span><img originheight="1149" originwidth="720" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114358.68684860386169115523437500835049:50001231000000:2800:DBC7408879AB09D87005C4084018C5AB6FE0D01201BA5BFCEBF2D33FDDC4558A.png" width="720" height="1149"></span></p>    </div>   </div>   <div></div></div>