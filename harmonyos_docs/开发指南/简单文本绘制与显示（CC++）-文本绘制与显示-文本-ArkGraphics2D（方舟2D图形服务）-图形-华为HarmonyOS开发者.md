<h1 _ngcontent-lkc-c119="" class="doc-title ng-star-inserted" title="简单文本绘制与显示（C/C++）"> 简单文本绘制与显示（C/C++） </h1>

<div _ngcontent-lkc-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="场景介绍">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="场景介绍" tips="复制节点链接"></i></h2><p>在一个简单的用户界面中，可能只需要展示几行静态文本，例如标签、按钮上的文字、菜单项或状态栏中的提示信息。此时，开发者只需要选择合适的字体、大小和颜色即可完成渲染。</p> </div>  <div class="tiledSection"><h2 id="接口说明">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.2.2.1.3.1.1" valign="top" width="50%">接口定义</th> <th align="left" class="cellrowborder" id="mcps1.3.2.2.1.3.1.2" valign="top" width="50%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%">OH_Drawing_TextStyle* OH_Drawing_CreateTextStyle(void)</td> <td class="cellrowborder" valign="top" width="50%">创建指向OH_Drawing_TextStyle对象的指针。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">void OH_Drawing_SetTextStyleFontSize(OH_Drawing_TextStyle* style, double fontSize)</td> <td class="cellrowborder" valign="top" width="50%">设置字号。</td> </tr> <tr><td class="cellrowborder" valign="top" width="50%">void OH_Drawing_SetTextStyleFontWeight(OH_Drawing_TextStyle* style, int fontWeight)</td> <td class="cellrowborder" valign="top" width="50%">设置字重。目前只有系统默认字体支持字重的调节，其他字体设置字重值小于semi-bold时字体粗细无变化，当设置字重值大于等于semi-bold时可能会触发伪加粗效果。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2><p>画布Canvas对象具体可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/canvas-get-result-draw-c">画布的获取与绘制结果的显示</a>。</p> <div _ngcontent-lkc-c106="" class="highlight-div"><div _ngcontent-lkc-c106="" class="highlight-div-header"><div _ngcontent-lkc-c106="" class="highlight-div-header-left"><div _ngcontent-lkc-c106="" class="handle-button expand-button"><div _ngcontent-lkc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lkc-c106="" class="highlight-div-header-right"><div _ngcontent-lkc-c106="" class="handle-button ai-button"></div><div _ngcontent-lkc-c106="" class="handle-button line-button"><div _ngcontent-lkc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lkc-c106="" class="handle-button theme-button"><div _ngcontent-lkc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lkc-c106="" class="handle-button copy-button"><div _ngcontent-lkc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lkc-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建一个 TypographyStyle 创建 Typography 时需要使用</span></li><li>OH_Drawing_TypographyStyle *typoStyle = <span class="hljs-built_in">OH_Drawing_CreateTypographyStyle</span>();</li><li><span class="hljs-comment">// 设置文本对齐方式为居中</span></li><li><span class="hljs-built_in">OH_Drawing_SetTypographyTextAlign</span>(typoStyle, TEXT_ALIGN_CENTER);</li><li>
</li><li><span class="hljs-comment">// 设置文字颜色、大小、字重，不设置 TextStyle 会使用 TypographyStyle 中的默认 TextStyle</span></li><li>OH_Drawing_TextStyle *txtStyle = <span class="hljs-built_in">OH_Drawing_CreateTextStyle</span>();</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleColor</span>(txtStyle, <span class="hljs-built_in">OH_Drawing_ColorSetArgb</span>(<span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>));</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontSize</span>(txtStyle, <span class="hljs-number">60</span>);</li><li><span class="hljs-built_in">OH_Drawing_SetTextStyleFontWeight</span>(txtStyle, FONT_WEIGHT_400);</li><li>
</li><li><span class="hljs-comment">// 创建 FontCollection，FontCollection 用于管理字体匹配逻辑</span></li><li>OH_Drawing_FontCollection *fc = <span class="hljs-built_in">OH_Drawing_CreateSharedFontCollection</span>();</li><li><span class="hljs-comment">// 使用 FontCollection 和 之前创建的 TypographyStyle 创建 TypographyCreate。TypographyCreate 用于创建 Typography</span></li><li>OH_Drawing_TypographyCreate *handler = <span class="hljs-built_in">OH_Drawing_CreateTypographyHandler</span>(typoStyle, fc);</li><li>
</li><li><span class="hljs-comment">// 将之前创建的 TextStyle 加入 handler 中</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerPushTextStyle</span>(handler, txtStyle);</li><li><span class="hljs-comment">// 设置文本内容，并将文本添加到 handler 中</span></li><li><span class="hljs-type">const</span> <span class="hljs-type">char</span> *text = <span class="hljs-string">"Hello World Drawing\n"</span>;</li><li><span class="hljs-comment">// 此处可以使用 OH_Drawing_TypographyHandlerAddEncodedText 添加不同编码的文本。</span></li><li><span class="hljs-comment">// OH_Drawing_TypographyHandlerAddText 只支持UTF-8编码的文本</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyHandlerAddText</span>(handler, text);</li><li>
</li><li>OH_Drawing_Typography *typography = <span class="hljs-built_in">OH_Drawing_CreateTypography</span>(handler);</li><li><span class="hljs-comment">// 设置排版宽度</span></li><li><span class="hljs-type">double</span> layoutWidth = <span class="hljs-number">1310</span>;</li><li><span class="hljs-built_in">OH_Drawing_TypographyLayout</span>(typography, layoutWidth);</li><li><span class="hljs-comment">// 设置文本在画布上绘制的起始位置</span></li><li><span class="hljs-type">double</span> position[<span class="hljs-number">2</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">1140</span>};</li><li><span class="hljs-comment">// 将文本绘制到画布上</span></li><li><span class="hljs-built_in">OH_Drawing_TypographyPaint</span>(typography, canvas, position[<span class="hljs-number">0</span>], position[<span class="hljs-number">1</span>]);</li><li>
</li><li><span class="hljs-comment">// 释放内存</span></li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyStyle</span>(typoStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTextStyle</span>(txtStyle);</li><li><span class="hljs-built_in">OH_Drawing_DestroyFontCollection</span>(fc);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypographyHandler</span>(handler);</li><li><span class="hljs-built_in">OH_Drawing_DestroyTypography</span>(typography);</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="效果展示">效果展示<i class="anchor-icon anchor-icon-link" anchorid="效果展示" tips="复制节点链接"></i></h2><p><span><img originheight="227" originwidth="297" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114406.95947034630371556723108898519663:50001231000000:2800:4706F1DF9AA2752935136346612EBC2302EF4DE32AC31702C7219C215E3FCDEF.png" class="notEnlarge" width="297" height="227"></span></p> </div> </div> <div></div></div>