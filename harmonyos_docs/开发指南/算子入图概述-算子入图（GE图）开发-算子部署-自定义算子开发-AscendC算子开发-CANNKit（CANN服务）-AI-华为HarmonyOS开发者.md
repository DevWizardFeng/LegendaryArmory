<h1 _ngcontent-hgw-c119="" class="doc-title ng-star-inserted" title="算子入图概述"> 算子入图概述 </h1>

<div _ngcontent-hgw-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>图模式是神经网络模型的一种运行模式，在图模式下开发者首先将模型的计算过程构造成一张图，然后通过GE将图下发到Kirin硬件执行。相对于单个算子依次下发的方式，图模式下，GE可以通过计算图优化、多流并行、内存复用、模型下沉等技术手段，加速模型执行效率，减少模型内存占用。</p> <p>算子入图的开发流程如下图所示，算子工程创建完成后，基于工程代码框架完成算子原型定义、Kernel侧算子实现、Host侧Tiling实现并完成算子入图开发，通过工程编译脚本完成算子的编译部署，之后即可基于图IR执行算子，比如单算子模型执行或者IR构图的方式调用自定义算子。该开发流程以<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-overview-of-engineering-operator">工程化算子开发</a>为基础，除了需要提供<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-operator-prototype-definition">算子实现</a>中的算子实现文件外，还需要额外交付算子入图的代码文件。</p> <p class="msonormal"><span><img height="110.86667200000001" originheight="246" originwidth="1162" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114303.19911594076738610214713766875883:50001231000000:2800:B1F3CAC005747679AE2DC4DCB2DE2D9464E7ACA87F05AAAC04C5B53B0B27DB40.png" title="点击放大" width="523.6875"></span></p> <ol><li><span>环境准备。</span><p></p><ol><li>DDK软件安装请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-environment-preparation">环境准备</a>。</li><li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-creating-an-operator-project">创建算子工程</a>。使用msOpGen工具创建算子开发工程。</li></ol> <p></p></li><li><span>算子实现。</span><p></p><ul><li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-operator-prototype-definition">算子原型定义实现</a>。通过原型定义来描述算子输入输出、属性等信息以及算子在AI处理器上相关实现信息，并关联Tiling实现等函数。</li><li>Kernel侧算子实现和Host侧Tiling实现请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-operator-implementation-overview">算子实现</a>；工程化算子开发，支持开发者调用Tiling API基于DDK提供的编程框架进行Tiling开发，Kernel侧也提供对应的接口方便开发者获取Tiling参数，具体内容请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-operator-implementation-on-the">Kernel侧算子实现</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-tiling-implementation-on-the-host">Host侧Tiling实现</a>，由此而带来的额外约束也在上述章节说明。</li></ul> <p></p></li><li><span><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-development-process">开发流程</a>。算子入图场景下，需要提供shape推导等算子入图适配函数的实现。</span></li><li><span><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-compilation-and-deployment">算子编译安装</a>。通过工程编译脚本完成算子的编译安装。</span></li><li><span><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-graph-compilation-and-execution">图编译和图执行</a>。基于图IR执行算子，比如单算子模型执行或者IR构图的方式调用自定义算子。</span><p></p><div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>HarmonyOS Next暂不支持图编译与图执行，仅支持通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cannkit-ai-framework-operator-adaptation">AI框架算子适配</a>方式集成算子。</p> </div></div></div> <p></p></li></ol> </div> <div></div></div>