<h1 _ngcontent-hoy-c119="" class="doc-title ng-star-inserted" title="管理AR会话"> 管理AR会话 </h1>

<div _ngcontent-hoy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section176281424155519">概要<i class="anchor-icon anchor-icon-link" anchorid="section176281424155519" tips="复制节点链接"></i></h2>          <p>对于任何AR应用，都需要创建一个AR会话<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-capi-arengine#ga2dbf3585f50628750ec855501c043650" target="_blank">AREngine_ARSession</a>，用于管理AR Engine的系统状态。</p>    </div>    <div class="tiledSection">     <h2 id="section1410827131110">引入AR Engine<i class="anchor-icon anchor-icon-link" anchorid="section1410827131110" tips="复制节点链接"></i></h2>         </div>    <ol>     <li>引入头文件。      <div _ngcontent-hoy-c106="" class="highlight-div"><div _ngcontent-hoy-c106="" class="highlight-div-header"><div _ngcontent-hoy-c106="" class="highlight-div-header-left"><div _ngcontent-hoy-c106="" class="handle-button expand-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hoy-c106="" class="highlight-div-header-right"><div _ngcontent-hoy-c106="" class="handle-button ai-button"></div><div _ngcontent-hoy-c106="" class="handle-button line-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hoy-c106="" class="handle-button theme-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hoy-c106="" class="handle-button copy-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hoy-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"ar/ar_engine_core.h"</span> </span></li></ol></pre></div></div></li>     <li>编写CMakeLists.txt。      <div _ngcontent-hoy-c106="" class="highlight-div"><div _ngcontent-hoy-c106="" class="highlight-div-header"><div _ngcontent-hoy-c106="" class="highlight-div-header-left"><div _ngcontent-hoy-c106="" class="handle-button expand-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hoy-c106="" class="highlight-div-header-right"><div _ngcontent-hoy-c106="" class="handle-button ai-button"></div><div _ngcontent-hoy-c106="" class="handle-button line-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hoy-c106="" class="handle-button theme-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hoy-c106="" class="handle-button copy-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hoy-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-built_in">find_library</span>(</li><li>    # Sets the name of the path variable.</li><li>    arengine-lib</li><li>    # Specifies the name of the NDK library that</li><li>    <span class="hljs-meta"># you want CMake to locate.</span></li><li>    libarengine_ndk.z.so</li><li>)</li><li>
</li><li><span class="hljs-built_in">target_link_libraries</span>(entry PUBLIC</li><li>    ${arengine-lib}</li><li>)</li></ol></pre></div></div></li>    </ol>    <div class="tiledSection">     <h2 id="section416624191615">创建AR会话<i class="anchor-icon anchor-icon-link" anchorid="section416624191615" tips="复制节点链接"></i></h2>          <p>应用开始时，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-capi-arengine#ga47713cb18234569e03b5216b6c8442d3" target="_blank">HMS_AREngine_ARSession_Create</a>函数创建一个AR会话。</p>     <div _ngcontent-hoy-c106="" class="highlight-div"><div _ngcontent-hoy-c106="" class="highlight-div-header"><div _ngcontent-hoy-c106="" class="highlight-div-header-left"><div _ngcontent-hoy-c106="" class="handle-button expand-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hoy-c106="" class="highlight-div-header-right"><div _ngcontent-hoy-c106="" class="handle-button ai-button"></div><div _ngcontent-hoy-c106="" class="handle-button line-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hoy-c106="" class="handle-button theme-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hoy-c106="" class="handle-button copy-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hoy-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li>AREngine_ARSession *arSession = <span class="hljs-literal">nullptr</span>;</li><li><span class="hljs-built_in">HMS_AREngine_ARSession_Create</span>(<span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>, &amp;arSession);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section15693849183318">自定义配置AR会话<i class="anchor-icon anchor-icon-link" anchorid="section15693849183318" tips="复制节点链接"></i></h2>          <p>创建一个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-capi-arengine#gab0b32ef6018535fd30000f4b6d65f619" target="_blank">AREngine_ARConfig</a>对象来配置当前AR会话。如缺省，则使用默认配置，具体配置可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-capi-arengine#ga97376432184fe702f2451e32b52298fb" target="_blank">HMS_AREngine_ARConfig_Create</a>。</p>     <div _ngcontent-hoy-c106="" class="highlight-div"><div _ngcontent-hoy-c106="" class="highlight-div-header"><div _ngcontent-hoy-c106="" class="highlight-div-header-left"><div _ngcontent-hoy-c106="" class="handle-button expand-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hoy-c106="" class="highlight-div-header-right"><div _ngcontent-hoy-c106="" class="handle-button ai-button"></div><div _ngcontent-hoy-c106="" class="handle-button line-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hoy-c106="" class="handle-button theme-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hoy-c106="" class="handle-button copy-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hoy-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">创建一个拥有合理默认配置的配置对象。</span></span></li><li>AREngine_ARConfig *arConfig = <span class=""><span class="hljs-literal">nullptr</span></span>;</li><li><span class="hljs-built_in">HMS_AREngine_ARConfig_Create</span>(arSession, &amp;arConfig);</li><li>
</li><li><span class="hljs-comment">// 此处配置arConfig。</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">配置</span></span><span class=""><span class="hljs-comment">AREngine_ARSession</span></span><span class=""><span class="hljs-comment">会话。</span></span></li><li><span class="hljs-built_in">HMS_AREngine_ARSession_Configure</span>(arSession, arConfig);</li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">释放指定的配置对象的内存空间。</span></span></li><li><span class="hljs-built_in">HMS_AREngine_ARConfig_Destroy</span>(arConfig);</li></ol></pre></div></div>     <p>具体可配置项，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-capi" target="_blank">AR Engine API参考</a>。</p>    </div>    <div class="tiledSection">     <h2 id="section114092055193320">销毁AR会话<i class="anchor-icon anchor-icon-link" anchorid="section114092055193320" tips="复制节点链接"></i></h2>          <p>应用结束时，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-capi-arengine#ga3a2be9998c9cd6373ff1f5209b645a95" target="_blank">HMS_AREngine_ARSession_Destroy</a>函数销毁当前的AR会话。</p>     <div _ngcontent-hoy-c106="" class="highlight-div"><div _ngcontent-hoy-c106="" class="highlight-div-header"><div _ngcontent-hoy-c106="" class="highlight-div-header-left"><div _ngcontent-hoy-c106="" class="handle-button expand-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hoy-c106="" class="highlight-div-header-right"><div _ngcontent-hoy-c106="" class="handle-button ai-button"></div><div _ngcontent-hoy-c106="" class="handle-button line-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hoy-c106="" class="handle-button theme-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hoy-c106="" class="handle-button copy-button"><div _ngcontent-hoy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hoy-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-built_in">HMS_AREngine_ARSession_Destroy</span>(arSession);</li></ol></pre></div></div>    </div>   </div>   <div></div></div>