<h1 _ngcontent-oby-c119="" class="doc-title ng-star-inserted" title="管理软键盘"> 管理软键盘 </h1>

<div _ngcontent-oby-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>软键盘是用户交互的重要途径，提供文本输入功能。本文介绍在使用系统输入框组件（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textinput" target="_blank">TextInput</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textarea" target="_blank">TextArea</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-search" target="_blank">Search</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-richeditor" target="_blank">RichEditor</a>）时，如何控制软键盘的弹出和收起。</p>    <div class="tiledSection">     <h2 id="弹出软键盘">弹出软键盘<i class="anchor-icon anchor-icon-link" anchorid="弹出软键盘" tips="复制节点链接"></i></h2>          <p>默认情况下，当焦点转移到输入框时，软键盘将自动弹出。</p>     <p>焦点转移到输入框的方法主要有：</p>     <ol>      <li>       <p>人机交互获得焦点，例如：单击、双击、长按输入框。</p></li>      <li>       <p>通过代码设置焦点，例如：使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-focus#requestfocus9" target="_blank">requestFocus</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-focus#defaultfocus9" target="_blank">defaultFocus</a>方法，将焦点转移到输入框。</p></li>      <li>       <p>使用外接键盘的按键走焦，例如：Tab键、Shift+Tab键、方向键，按下后可以转移焦点。外接键盘时输入框获焦，不会弹出系统软键盘，会显示物理键盘悬浮栏。</p></li>     </ol>     <p>软键盘分为系统软键盘和自定义键盘。输入框的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textarea#enablekeyboardonfocus10" target="_blank">enableKeyboardOnFocus</a>属性会影响系统软键盘弹出。当enableKeyboardOnFocus属性设置为false时，只有通过点击、按键走焦才能弹出系统软键盘。enableKeyboardOnFocus属性对自定义键盘的弹出无影响。外接物理键盘会阻止弹出系统软键盘，对自定义键盘无影响。</p>    </div>    <div class="tiledSection">     <h3 id="人机交互获得焦点" class="firsth2">人机交互获得焦点<i class="anchor-icon anchor-icon-link" anchorid="人机交互获得焦点" tips="复制节点链接"></i></h3>          <p>以下示例展示了单击、双击和长按输入框时，软键盘弹出效果。</p>     <p><span><img originheight="460" originwidth="468" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114855.93419436372851934907376648138247:50001231000000:2800:8EAB8145E6BEF811DDD61E2A523E4479DECD94FF1D9D09899D44FDA985F89B3C.gif" width="468" height="460"></span></p>    </div>    <div class="tiledSection">     <h3 id="通过代码请求焦点">通过代码请求焦点<i class="anchor-icon anchor-icon-link" anchorid="通过代码请求焦点" tips="复制节点链接"></i></h3>          <p>可以通过代码控制将焦点转移到输入框，包括使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-focus#defaultfocus9" target="_blank">defaultFocus</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-focus#requestfocus9" target="_blank">requestFocus</a>方法。更多细节请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-common-events-focus-event">支持焦点处理</a>。</p>     <p>以下示例展示了点击按钮时，焦点转移到输入框并弹出软键盘的方法。</p>     <div _ngcontent-oby-c106="" class="highlight-div"><div _ngcontent-oby-c106="" class="highlight-div-header"><div _ngcontent-oby-c106="" class="highlight-div-header-left"><div _ngcontent-oby-c106="" class="handle-button expand-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oby-c106="" class="highlight-div-header-right"><div _ngcontent-oby-c106="" class="handle-button ai-button"></div><div _ngcontent-oby-c106="" class="handle-button line-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oby-c106="" class="handle-button theme-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oby-c106="" class="handle-button copy-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oby-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct demo {</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TextInputController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextInputController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">inputValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span> }) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'输入框请求焦点'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getFocusController</span>().<span class="hljs-title function_">requestFocus</span>(<span class="hljs-string">"textInput1"</span>)</li><li>      })</li><li>      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>, <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span> })</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">"textInput1"</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-string">'10%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="383" originwidth="346" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114855.38994291954801888722178874228144:50001231000000:2800:036D6777B449B9908A9E0D949E610EF3B262B830D54879E93A1824637B267F3A.gif" width="346" height="383"></span></p>    </div>    <div class="tiledSection">     <h3 id="使用外接键盘的按键走焦">使用外接键盘的按键走焦<i class="anchor-icon anchor-icon-link" anchorid="使用外接键盘的按键走焦" tips="复制节点链接"></i></h3>          <p>外接物理键盘时，按下物理键盘的Tab键、Shift+Tab键、方向键可以转移焦点。按键走焦到输入框时，显示物理键盘悬浮栏。更多细节请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-common-events-focus-event#走焦规范">支持焦点处理</a>。</p>     <p>以下示例展示了外接键盘时，多次按下Tab键，焦点转移到TextInput并弹出软键盘的场景。当按下Tab键时，焦点在页面中的三个组件之间转移，可以从Text的蓝色边框或者TextInput中闪烁的光标观察到焦点转移。当TextInput获焦时，显示光标，同时显示物理键盘悬浮栏。</p>     <div _ngcontent-oby-c106="" class="highlight-div"><div _ngcontent-oby-c106="" class="highlight-div-header"><div _ngcontent-oby-c106="" class="highlight-div-header-left"><div _ngcontent-oby-c106="" class="handle-button expand-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oby-c106="" class="highlight-div-header-right"><div _ngcontent-oby-c106="" class="handle-button ai-button"></div><div _ngcontent-oby-c106="" class="handle-button line-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oby-c106="" class="handle-button theme-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oby-c106="" class="handle-button copy-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oby-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span> }) {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Text.focusable(true)'</span>)</li><li>        .<span class="hljs-title function_">focusable</span>(<span class="hljs-literal">true</span>)</li><li>
</li><li>      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">"TextInput"</span> })</li><li>
</li><li>      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">"TextInput"</span> })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-string">'10%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="432" originwidth="369" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114855.65978440963681596153053806568394:50001231000000:2800:1A869F51B28AEDAF9F68119D7DAEA9CD748FF4BEB206FA9675FCD1BB9A291428.gif" width="369" height="432"></span></p>    </div>    <div class="tiledSection">     <h2 id="收起软键盘">收起软键盘<i class="anchor-icon anchor-icon-link" anchorid="收起软键盘" tips="复制节点链接"></i></h2>          <p>当输入框获得焦点时，软键盘会弹出；然而，当输入框失焦时，软键盘不会自动收起，而是由下一个获得焦点的组件决定是否收起软键盘。如果该组件需要使用软键盘，软键盘将继续显示；如果该组件不需要软键盘，则软键盘将被收起。通常情况下，除输入框外的其他组件不需要软键盘。</p>     <p>收起软键盘的常见场景如下所示，下列场景都会将焦点转移到不需要软键盘的组件上并收起软键盘。</p>     <ol>      <li>       <p>用户主动点击软键盘的关闭按钮。</p></li>      <li>       <p>用户正在拖拽文本。</p></li>      <li>       <p>输入框接收到了侧滑手势。</p></li>      <li>       <p>页面发生切换。</p></li>      <li>       <p>通过输入框的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textinput#textinputcontroller8" target="_blank">TextInputController</a>退出编辑态。</p></li>      <li>       <p>焦点从输入框转移到另一个不需要软键盘的组件。</p></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="点击软键盘的关闭按钮" class="firsth2">点击软键盘的关闭按钮<i class="anchor-icon anchor-icon-link" anchorid="点击软键盘的关闭按钮" tips="复制节点链接"></i></h3>          <p>软键盘自带关闭按钮，用户点击该按钮时，软键盘将被收起。</p>     <p>以下示例展示了用户主动点击软键盘关闭按钮的场景。</p>     <div _ngcontent-oby-c106="" class="highlight-div"><div _ngcontent-oby-c106="" class="highlight-div-header"><div _ngcontent-oby-c106="" class="highlight-div-header-left"><div _ngcontent-oby-c106="" class="handle-button expand-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oby-c106="" class="highlight-div-header-right"><div _ngcontent-oby-c106="" class="handle-button ai-button"></div><div _ngcontent-oby-c106="" class="handle-button line-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oby-c106="" class="handle-button theme-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oby-c106="" class="handle-button copy-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oby-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span> }) {</li><li>      <span class="hljs-title class_">Blank</span>()</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">350</span>)</li><li>      <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Row</span> }) {</li><li>        <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'TextInput'</span> })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">250</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>    .<span class="hljs-title function_">padding</span>(<span class="hljs-string">'5%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="430" originwidth="355" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114855.08470145862972962305975689147488:50001231000000:2800:8A7D445325FCE4C481152D4FE7309A3C44E5ED3DA14E13BB4AC10CEAFE9E94D2.gif" width="355" height="430"></span></p>    </div>    <div class="tiledSection">     <h3 id="拖拽文本">拖拽文本<i class="anchor-icon anchor-icon-link" anchorid="拖拽文本" tips="复制节点链接"></i></h3>          <p>用户主动拖拽输入框的文本，开始拖拽时，软键盘将收起。更多细节请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-common-events-drag-event">支持统一拖拽</a>。</p>     <p>以下示例展示了用户主动拖拽文本时，软键盘被收起的场景。</p>     <div _ngcontent-oby-c106="" class="highlight-div"><div _ngcontent-oby-c106="" class="highlight-div-header"><div _ngcontent-oby-c106="" class="highlight-div-header-left"><div _ngcontent-oby-c106="" class="handle-button expand-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oby-c106="" class="highlight-div-header-right"><div _ngcontent-oby-c106="" class="handle-button ai-button"></div><div _ngcontent-oby-c106="" class="handle-button line-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oby-c106="" class="handle-button theme-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oby-c106="" class="handle-button copy-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oby-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span> }) {</li><li>      <span class="hljs-title class_">Blank</span>()</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">350</span>)</li><li>      <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Row</span> }) {</li><li>        <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">text</span>: <span class="hljs-string">'用户主动拖拽文本'</span> })</li><li>          .<span class="hljs-title function_">selectAll</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">defaultFocus</span>(<span class="hljs-literal">true</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">250</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>    .<span class="hljs-title function_">padding</span>(<span class="hljs-string">'5%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="383" originwidth="355" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114855.94016371669793358661261573578935:50001231000000:2800:B92D675EF020E9ACF7EEF4A70DCEA8746A99BA0F0BBCE6B97B05EA1D603A6E9E.gif" width="355" height="383"></span></p>    </div>    <div class="tiledSection">     <h3 id="接收侧滑手势">接收侧滑手势<i class="anchor-icon anchor-icon-link" anchorid="接收侧滑手势" tips="复制节点链接"></i></h3>          <p>下面的动图展示了“用户侧滑时软键盘收起”的场景。</p>     <p><span><img originheight="430" originwidth="355" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114855.08000694665433888681049137962064:50001231000000:2800:D6A4C37A2064389D04933B39F31404465E17A37470E679DC6D6F445165B447A8.gif" width="355" height="430"></span></p>    </div>    <div class="tiledSection">     <h3 id="页面发生切换">页面发生切换<i class="anchor-icon anchor-icon-link" anchorid="页面发生切换" tips="复制节点链接"></i></h3>          <p>以下示例展示了页面切换过程中，软键盘收起的场景。</p>     <p>页面跳转写法请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-navigation-navigation">组件导航(Navigation) (推荐)</a>。</p>     <p>跳转前的页面</p>     <div _ngcontent-oby-c106="" class="highlight-div"><div _ngcontent-oby-c106="" class="highlight-div-header"><div _ngcontent-oby-c106="" class="highlight-div-header-left"><div _ngcontent-oby-c106="" class="handle-button expand-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oby-c106="" class="highlight-div-header-right"><div _ngcontent-oby-c106="" class="handle-button ai-button"></div><div _ngcontent-oby-c106="" class="handle-button line-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oby-c106="" class="handle-button theme-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oby-c106="" class="handle-button copy-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oby-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-comment">// 创建一个导航控制器对象并传入Navigation</span></li><li>  <span class="hljs-attr">pathStack</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>()</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Navigation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pathStack</span>) {</li><li>      <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">30</span> }) {</li><li>        <span class="hljs-title class_">Blank</span>().<span class="hljs-title function_">height</span>(<span class="hljs-number">150</span>)</li><li>        <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'TextInput'</span> })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'跳转到下一个页面'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pathStack</span>.<span class="hljs-title function_">pushPath</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'demo_text_1'</span> })</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-string">'10%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">title</span>(<span class="hljs-string">'用Navigation实现页面跳转'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>跳转后的页面</p>     <div _ngcontent-oby-c106="" class="highlight-div"><div _ngcontent-oby-c106="" class="highlight-div-header"><div _ngcontent-oby-c106="" class="highlight-div-header-left"><div _ngcontent-oby-c106="" class="handle-button expand-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oby-c106="" class="highlight-div-header-right"><div _ngcontent-oby-c106="" class="handle-button ai-button"></div><div _ngcontent-oby-c106="" class="handle-button line-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oby-c106="" class="handle-button theme-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oby-c106="" class="handle-button copy-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oby-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// demo_text_1.ets</span></li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo_text_1_Builder</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title function_">demo_text_1</span>()</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct demo_text_1 {</li><li>  <span class="hljs-attr">pathStack</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>()</li><li>  <span class="hljs-comment">// 跳转后的页面</span></li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">NavDestination</span>() {</li><li>      <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span> }) {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'跳转后的页面没有需要键盘的组件'</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">(<span class="hljs-params">context: NavDestinationContext</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pathStack</span> = context.<span class="hljs-property">pathStack</span></li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>系统路由表配置</p>     <p>在跳转目标模块的配置文件module.json5添加路由表配置</p>     <div _ngcontent-oby-c106="" class="highlight-div"><div _ngcontent-oby-c106="" class="highlight-div-header"><div _ngcontent-oby-c106="" class="highlight-div-header-left"><div _ngcontent-oby-c106="" class="handle-button expand-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oby-c106="" class="highlight-div-header-right"><div _ngcontent-oby-c106="" class="handle-button ai-button"></div><div _ngcontent-oby-c106="" class="handle-button line-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oby-c106="" class="handle-button theme-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oby-c106="" class="handle-button copy-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oby-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-comment">//...</span></li><li>    <span class="hljs-attr">"routerMap"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$profile:route_map"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-comment">//...</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>     <p>在工程resources/base/profile中创建route_map.json文件。添加如下配置信息</p>     <div _ngcontent-oby-c106="" class="highlight-div"><div _ngcontent-oby-c106="" class="highlight-div-header"><div _ngcontent-oby-c106="" class="highlight-div-header-left"><div _ngcontent-oby-c106="" class="handle-button expand-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oby-c106="" class="highlight-div-header-right"><div _ngcontent-oby-c106="" class="handle-button ai-button"></div><div _ngcontent-oby-c106="" class="handle-button line-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oby-c106="" class="handle-button theme-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oby-c106="" class="handle-button copy-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oby-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// route_map.json</span></li><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"routerMap"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>    <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"demo_text_1"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"pageSourceFile"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"src/main/ets/pages/demo_text_1.ets"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"buildFunction"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"demo_text_1_Builder"</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>     <p><span><img originheight="640" originwidth="346" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114856.65480517141597448893657754152811:50001231000000:2800:E7F1575A383697D9DD7F5C8D475D10E2C84CF4651E6657F4E08C034E092B878F.gif" width="346" height="640"></span></p>    </div>    <div class="tiledSection">     <h3 id="通过输入框的controller退出编辑态">通过输入框的controller退出编辑态<i class="anchor-icon anchor-icon-link" anchorid="通过输入框的controller退出编辑态" tips="复制节点链接"></i></h3>          <p>通过输入框的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textinput#textinputcontroller8" target="_blank">TextInputController</a>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textinput#stopediting10" target="_blank">stopEditing</a>方法后，软键盘会自动收起。</p>     <p>以下示例展示了如何通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textinput#textinputcontroller8" target="_blank">TextInputController</a>收起软键盘。</p>     <div _ngcontent-oby-c106="" class="highlight-div"><div _ngcontent-oby-c106="" class="highlight-div-header"><div _ngcontent-oby-c106="" class="highlight-div-header-left"><div _ngcontent-oby-c106="" class="handle-button expand-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oby-c106="" class="highlight-div-header-right"><div _ngcontent-oby-c106="" class="handle-button ai-button"></div><div _ngcontent-oby-c106="" class="handle-button line-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oby-c106="" class="handle-button theme-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oby-c106="" class="handle-button copy-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oby-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct demo {</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TextInputController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextInputController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">inputValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">30</span> }) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'关闭键盘'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">stopEditing</span>()</li><li>      })</li><li>      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>, <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span> })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-string">'10%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="383" originwidth="346" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114856.62651219074034651579773587710960:50001231000000:2800:C79462C1471DA940BC3211ACAB4A22921955E1C686B11272840FC2E7CAF8EFC8.gif" width="346" height="383"></span></p>    </div>    <div class="tiledSection">     <h3 id="焦点转移到不需要软键盘的组件">焦点转移到不需要软键盘的组件<i class="anchor-icon anchor-icon-link" anchorid="焦点转移到不需要软键盘的组件" tips="复制节点链接"></i></h3>          <p>焦点转移到不需要软键盘的组件时，软键盘会自动收起。</p>     <p>代码控制焦点转移的方法，包括<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-focus#requestfocus9" target="_blank">requestFocus</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-focuscontroller#clearfocus12" target="_blank">clearFocus</a>。更多细节请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-common-events-focus-event">支持焦点处理</a>。</p>     <p>与通过输入框的controller退出编辑态方法相比，焦点转移到不需要软键盘的组件方法的优势在于，页面包含多个输入框时，开发者无需为每个输入框设置controller、再通过controller收起软键盘。</p>     <p>以下示例展示了点击按钮时，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-focus#requestfocus9" target="_blank">requestFocus</a>方法，焦点从输入框转移到按钮上，软键盘收起的场景。</p>     <div _ngcontent-oby-c106="" class="highlight-div"><div _ngcontent-oby-c106="" class="highlight-div-header"><div _ngcontent-oby-c106="" class="highlight-div-header-left"><div _ngcontent-oby-c106="" class="handle-button expand-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oby-c106="" class="highlight-div-header-right"><div _ngcontent-oby-c106="" class="handle-button ai-button"></div><div _ngcontent-oby-c106="" class="handle-button line-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oby-c106="" class="handle-button theme-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oby-c106="" class="handle-button copy-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oby-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">TextInputExample</span> {</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TextInputController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextInputController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">inputValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span> }) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'change focus'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getFocusController</span>().<span class="hljs-title function_">requestFocus</span>(<span class="hljs-string">"button"</span>)</li><li>      }).<span class="hljs-title function_">id</span>(<span class="hljs-string">"button"</span>)</li><li>      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>, <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span> })</li><li>    }</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-string">'10%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="360" originwidth="346" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114856.73743046944354489523358978579471:50001231000000:2800:7D36E5A3263458563D52AA6C1A135AF9AF52458EE24BC770908864B7C8A5C4C6.gif" width="346" height="360"></span></p>     <p>以下示例展示了滚动容器在开始滚动时收起键盘的场景。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list" target="_blank">List</a>开始滚动时，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-focuscontroller#clearfocus12" target="_blank">clearFocus</a>方法清理焦点，焦点转移到页面根容器节点，页面根容器节点不需要软键盘，从而收起软键盘。</p>     <div _ngcontent-oby-c106="" class="highlight-div"><div _ngcontent-oby-c106="" class="highlight-div-header"><div _ngcontent-oby-c106="" class="highlight-div-header-left"><div _ngcontent-oby-c106="" class="handle-button expand-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oby-c106="" class="highlight-div-header-right"><div _ngcontent-oby-c106="" class="handle-button ai-button"></div><div _ngcontent-oby-c106="" class="handle-button line-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oby-c106="" class="handle-button theme-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oby-c106="" class="handle-button copy-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oby-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">arr</span>: <span class="hljs-built_in">number</span>[] = <span class="hljs-title class_">Array</span>.<span class="hljs-property">from</span>&lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>&gt;(</li><li>    { <span class="hljs-attr">length</span>: <span class="hljs-number">100</span> } <span class="hljs-keyword">as</span> <span class="hljs-title class_">ArrayLike</span>&lt;<span class="hljs-built_in">number</span>&gt;,</li><li>    <span class="hljs-function">(<span class="hljs-params">_, i: <span class="hljs-built_in">number</span></span>) =&gt;</span> i + <span class="hljs-number">1</span></li><li>  );</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">initialIndex</span>: <span class="hljs-number">0</span> }) {</li><li>        <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span>, index?: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Row</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>              <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'TextInput '</span> + item })</li><li>            }</li><li>          }</li><li>        }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>      }</li><li>      .<span class="hljs-title function_">onScrollStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// List开始滚动时清理焦点，达成收起键盘的目的</span></li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getFocusController</span>().<span class="hljs-title function_">clearFocus</span>()</li><li>      })</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'80%'</span>)</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-string">'10%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="650" originwidth="341" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114856.94693990145947532227410700001258:50001231000000:2800:760EE7314E9867CA61442F69787F4351348655BE5F5BB358380FD5678B4B5E87.gif" width="341" height="650"></span></p>    </div>    <div class="tiledSection">     <h2 id="常见问题">常见问题<i class="anchor-icon anchor-icon-link" anchorid="常见问题" tips="复制节点链接"></i></h2>          <p>在软键盘的实际应用中，开发者可能会遇到一些特殊的使用场景或个性化需求。本节将针对这些常见问题提供相应的解决方案，帮助开发者更好地控制软键盘的行为。</p>    </div>    <div class="tiledSection">     <h3 id="获得焦点时阻止弹出软键盘" class="firsth2">获得焦点时阻止弹出软键盘<i class="anchor-icon anchor-icon-link" anchorid="获得焦点时阻止弹出软键盘" tips="复制节点链接"></i></h3>          <p><strong>问题现象</strong></p>     <p>如何实现点击输入框时，不弹出软键盘？</p>     <p><strong>原因分析</strong></p>     <p>默认情况下，点击输入框后，输入框获得焦点，会自动弹出系统软键盘。通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textinput#customkeyboard10" target="_blank">customKeyboard</a>设置自定义键盘之后，输入框获焦时不会弹出系统软键盘，改为弹出自定义键盘。</p>     <p><strong>解决措施</strong></p>     <p>设置自定义键盘后，系统键盘不会弹出。利用此特性，设置一个空的自定义键盘，实现“点击输入框时不显示软键盘”的效果。</p>     <p>示例如下，单击输入框，拉起空的自定义键盘。</p>     <div _ngcontent-oby-c106="" class="highlight-div"><div _ngcontent-oby-c106="" class="highlight-div-header"><div _ngcontent-oby-c106="" class="highlight-div-header-left"><div _ngcontent-oby-c106="" class="handle-button expand-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oby-c106="" class="highlight-div-header-right"><div _ngcontent-oby-c106="" class="handle-button ai-button"></div><div _ngcontent-oby-c106="" class="handle-button line-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oby-c106="" class="handle-button theme-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oby-c106="" class="handle-button copy-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oby-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct demo {</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TextInputController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextInputController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">inputValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>
</li><li>  <span class="hljs-comment">// 自定义键盘组件</span></li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">CustomKeyboardBuilder</span>() {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'TextInput'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>, <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span> })<span class="hljs-comment">// 绑定自定义键盘</span></li><li>        .<span class="hljs-title function_">customKeyboard</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title class_">CustomKeyboardBuilder</span>())</li><li>    }</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-string">'10%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="360" originwidth="346" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114856.17808345009662400742881872298601:50001231000000:2800:BB2CEC8D8463A027C851F86B648250D458EE12D3CF669EF764E05BAF4EC1EBCA.gif" width="346" height="360"></span></p>    </div>    <div class="tiledSection">     <h3 id="点击发送按钮后不收起键盘">点击发送按钮后不收起键盘<i class="anchor-icon anchor-icon-link" anchorid="点击发送按钮后不收起键盘" tips="复制节点链接"></i></h3>          <p><strong>问题现象</strong></p>     <p>如何实现点击软键盘发送按钮之后，软键盘不收起？</p>     <p><strong>原因分析</strong></p>     <p>软键盘的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textarea#enterkeytype11" target="_blank">enterKeyType</a>可以设置输入法回车键类型，包括发送样式。按下发送按钮实际上是按下回车键，非TV设备按下回车键时，输入框默认会失焦并且收起键盘。</p>     <p><strong>解决措施</strong></p>     <p>软键盘的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textarea#enterkeytype11" target="_blank">enterKeyType</a>可以设置输入法回车键类型。除EnterKeyType.NEW_LINE外，enterKeyType设置其他的枚举值时，按下软键盘输入法回车键都会触发<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textarea#onsubmit14" target="_blank">onSubmit</a>事件。可以在TextArea的onSubmit回调中，通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-textinput#keepeditablestate11" target="_blank">keepEditableState</a>接口保持输入框编辑态，使得点击回车键后不收起键盘。</p>     <p>示例如下，软键盘的回车键显示为发送样式。按下发送之后，键盘不会收起。</p>     <div _ngcontent-oby-c106="" class="highlight-div"><div _ngcontent-oby-c106="" class="highlight-div-header"><div _ngcontent-oby-c106="" class="highlight-div-header-left"><div _ngcontent-oby-c106="" class="handle-button expand-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oby-c106="" class="highlight-div-header-right"><div _ngcontent-oby-c106="" class="handle-button ai-button"></div><div _ngcontent-oby-c106="" class="handle-button line-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oby-c106="" class="handle-button theme-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oby-c106="" class="handle-button copy-button"><div _ngcontent-oby-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oby-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct demo {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span> }) {</li><li>      <span class="hljs-title class_">TextArea</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'点击发送收起键盘'</span> })</li><li>        .<span class="hljs-title function_">enterKeyType</span>(<span class="hljs-title class_">EnterKeyType</span>.<span class="hljs-property">Send</span>)</li><li>
</li><li>      <span class="hljs-title class_">TextArea</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'onSubmit中设置keepEditableState，点击发送不收起键盘'</span> })</li><li>        .<span class="hljs-title function_">enterKeyType</span>(<span class="hljs-title class_">EnterKeyType</span>.<span class="hljs-property">Send</span>)</li><li>        .<span class="hljs-title function_">onSubmit</span>(<span class="hljs-function">(<span class="hljs-params">enterKey: EnterKeyType, event: SubmitEvent</span>) =&gt;</span> {</li><li>          <span class="hljs-comment">// 调用keepEditableState方法，输入框保持编辑态</span></li><li>          event.<span class="hljs-title function_">keepEditableState</span>();</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-string">'10%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="367" originwidth="346" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114856.75591205499345616784804572051460:50001231000000:2800:158D86C21475F6781E141022DFC0FC8CDC2A054547C45983B7D307D0C85CA3F6.gif" width="346" height="367"></span></p>    </div>   </div>   <div></div></div>