<h1 _ngcontent-fmp-c119="" class="doc-title ng-star-inserted" title="管理通知渠道"> 管理通知渠道 </h1>

<div _ngcontent-fmp-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>系统支持多种通知渠道，不同通知渠道对应的通知提醒方式不同，可以根据应用的实际场景选择适合的通知渠道，并对通知渠道进行管理（支持创建、查询、删除等操作）。</p>    <div class="tiledSection">     <h2 id="通知渠道类型说明">通知渠道类型说明<i class="anchor-icon anchor-icon-link" anchorid="通知渠道类型说明" tips="复制节点链接"></i></h2>          <p>不同类型的通知渠道对应的通知提醒方式不同，详见下表。其中，Y代表支持，N代表不支持。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>用户可以通过“设置 &gt; 通知和状态栏”进入对应的应用，管理该应用的通知渠道。当应用中的“允许通知”开关开启时，横幅通知默认关闭（不支持应用配置、用户可手动开启），锁屏通知、桌面角标、响铃和振动等默认开启。</p>      </div></div></div>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.10.1.1" valign="top" width="11.11111111111111%">SlotType</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.10.1.2" valign="top" width="11.11111111111111%">取值</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.10.1.3" valign="top" width="11.11111111111111%">分类</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.10.1.4" valign="top" width="11.11111111111111%">通知中心</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.10.1.5" valign="top" width="11.11111111111111%">横幅</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.10.1.6" valign="top" width="11.11111111111111%">锁屏</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.10.1.7" valign="top" width="11.11111111111111%">铃声/振动</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.10.1.8" valign="top" width="11.11111111111111%">状态栏图标</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.4.1.10.1.9" valign="top" width="11.11111111111111%">自动亮屏</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="11.11111111111111%">UNKNOWN_TYPE</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">0</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">未知类型</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="11.11111111111111%">SOCIAL_COMMUNICATION</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">1</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">社交通信</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="11.11111111111111%">SERVICE_INFORMATION</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">2</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">服务提醒</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="11.11111111111111%">CONTENT_INFORMATION</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">3</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">内容资讯</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="11.11111111111111%">CUSTOMER_SERVICE</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">5</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">客服消息</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="11.11111111111111%">OTHER_TYPES</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">0xFFFF</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">其他</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">Y</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>         <td class="cellrowborder" valign="top" width="11.11111111111111%">N</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="接口说明">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h2>          <p>通知渠道主要接口如下。其他接口介绍详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-notificationmanager" target="_blank">API参考</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.1" valign="top" width="50%"><strong>接口名</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.2" valign="top" width="50%"><strong>描述</strong></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">addSlot(type: SlotType): Promise&lt;void&gt;</td>         <td class="cellrowborder" valign="top" width="50%">创建指定类型的通知渠道。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">getSlot(slotType: SlotType): Promise&lt;NotificationSlot&gt;</td>         <td class="cellrowborder" valign="top" width="50%">获取一个指定类型的通知渠道。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">removeSlot(slotType: SlotType): Promise&lt;void&gt;</td>         <td class="cellrowborder" valign="top" width="50%">删除此应用程序指定类型的通知渠道。</td>        </tr>             </tbody></table></div>     </div>     <p>除了可以使用addSlot()创建通知渠道，还可以在发布通知的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-notification-notificationrequest#notificationrequest-1" target="_blank">NotificationRequest</a>中携带notificationSlotType字段，如果对应渠道不存在，会自动创建。</p>    </div>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>导入notificationManager模块。</p>       <div _ngcontent-fmp-c106="" class="highlight-div"><div _ngcontent-fmp-c106="" class="highlight-div-header"><div _ngcontent-fmp-c106="" class="highlight-div-header-left"><div _ngcontent-fmp-c106="" class="handle-button expand-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fmp-c106="" class="highlight-div-header-right"><div _ngcontent-fmp-c106="" class="handle-button ai-button"></div><div _ngcontent-fmp-c106="" class="handle-button line-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fmp-c106="" class="handle-button theme-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fmp-c106="" class="handle-button copy-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fmp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { notificationManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NotificationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'[PublishOperation]'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">DOMAIN_NUMBER</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0xFF00</span>;</li></ol></pre></div></div></li>      <li>       <p>创建指定类型的通知渠道。</p>       <div _ngcontent-fmp-c106="" class="highlight-div"><div _ngcontent-fmp-c106="" class="highlight-div-header"><div _ngcontent-fmp-c106="" class="highlight-div-header-left"><div _ngcontent-fmp-c106="" class="handle-button expand-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fmp-c106="" class="highlight-div-header-right"><div _ngcontent-fmp-c106="" class="handle-button ai-button"></div><div _ngcontent-fmp-c106="" class="handle-button line-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fmp-c106="" class="handle-button theme-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fmp-c106="" class="handle-button copy-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fmp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// addSlot回调</span></li><li><span class="hljs-keyword">let</span> addSlotCallBack = (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`addSlot failed, code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`addSlot success`</span>);</li><li>  }</li><li>}</li><li>notificationManager.<span class="hljs-title function_">addSlot</span>(notificationManager.<span class="hljs-property">SlotType</span>.<span class="hljs-property">SOCIAL_COMMUNICATION</span>, addSlotCallBack);</li></ol></pre></div></div></li>      <li>       <p>查询指定类型的通知渠道。</p>       <p>获取对应渠道是否创建以及该渠道支持的通知提醒方式，比如是否有声音提示，是否有震动，锁屏是否可见等。</p>       <div _ngcontent-fmp-c106="" class="highlight-div"><div _ngcontent-fmp-c106="" class="highlight-div-header"><div _ngcontent-fmp-c106="" class="highlight-div-header-left"><div _ngcontent-fmp-c106="" class="handle-button expand-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fmp-c106="" class="highlight-div-header-right"><div _ngcontent-fmp-c106="" class="handle-button ai-button"></div><div _ngcontent-fmp-c106="" class="handle-button line-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fmp-c106="" class="handle-button theme-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fmp-c106="" class="handle-button copy-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fmp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// getSlot回调</span></li><li><span class="hljs-keyword">let</span> getSlotCallback = (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">data</span>: notificationManager.<span class="hljs-property">NotificationSlot</span>): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`Failed to get slot. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`Succeeded in getting slot.`</span>);</li><li>    <span class="hljs-keyword">if</span> (data != <span class="hljs-literal">null</span>) {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`slot enable status is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data.enabled)}</span>`</span>);</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`vibrationEnabled status is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data.vibrationEnabled)}</span>`</span>);</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`lightEnabled status is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data.lightEnabled)}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">slotType</span>: notificationManager.<span class="hljs-property">SlotType</span> = notificationManager.<span class="hljs-property">SlotType</span>.<span class="hljs-property">SOCIAL_COMMUNICATION</span>;</li><li>notificationManager.<span class="hljs-title function_">getSlot</span>(slotType, getSlotCallback);</li></ol></pre></div></div></li>      <li>       <p>删除指定类型的通知渠道。</p>       <div _ngcontent-fmp-c106="" class="highlight-div"><div _ngcontent-fmp-c106="" class="highlight-div-header"><div _ngcontent-fmp-c106="" class="highlight-div-header-left"><div _ngcontent-fmp-c106="" class="handle-button expand-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fmp-c106="" class="highlight-div-header-right"><div _ngcontent-fmp-c106="" class="handle-button ai-button"></div><div _ngcontent-fmp-c106="" class="handle-button line-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fmp-c106="" class="handle-button theme-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fmp-c106="" class="handle-button copy-button"><div _ngcontent-fmp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fmp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// removeSlot回调</span></li><li><span class="hljs-keyword">let</span> removeSlotCallback = (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`removeSlot failed, code is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.message)}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">"removeSlot success"</span>);</li><li>  }</li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">slotType</span>: notificationManager.<span class="hljs-property">SlotType</span> = notificationManager.<span class="hljs-property">SlotType</span>.<span class="hljs-property">SOCIAL_COMMUNICATION</span>;</li><li>notificationManager.<span class="hljs-title function_">removeSlot</span>(slotType, removeSlotCallback);</li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>