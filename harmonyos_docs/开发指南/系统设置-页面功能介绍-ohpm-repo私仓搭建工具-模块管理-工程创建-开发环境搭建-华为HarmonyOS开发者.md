<h1 _ngcontent-gwb-c119="" class="doc-title ng-star-inserted" title="系统设置"> 系统设置 </h1>

<div _ngcontent-gwb-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001749437820"><p id="ZH-CN_TOPIC_0000002478333724__zh-cn_topic_0000001792216445_p1981414326546">系统设置是ohpm-repo系统层面的管理，当前支持"oh-package.json5检查规则"和"系统安全"两大功能。</p> <div class="tiledSection"><h2 id="section43458184816">oh-package.json5检查规则<i class="anchor-icon anchor-icon-link" anchorid="section43458184816" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478333724__p961365717818">oh-package.json5检查规则是ohpm-repo对上传包的oh-package.json5文件进行校验的规则管理。当前主要针对category，repository和name三个字段设定规则。</p> <p id="ZH-CN_TOPIC_0000002478333724__p13789134311105"><strong>category白名单：</strong>若其为空，系统将不会对category字段进行校验。若配置了值，则category字段的值就必须存在于白名单中。</p> <p id="ZH-CN_TOPIC_0000002478333724__p10427102622613"><strong>repository</strong>：决定repository字段在oh-package.json5文件中是否必须存在。如果设置为必须，那么在上传包时，oh-package.json5文件中就必须包含repository字段。</p> <p id="ZH-CN_TOPIC_0000002478333724__p78622892611"><strong>name</strong>：oh-package.json5文件中name字段是否必须包含组织名，如果设置为是，则上传包时，则name字段必须包含组织名，无组织包将会上传失败。</p> <p id="ZH-CN_TOPIC_0000002478333724__p16396381092">页面效果如下图所示：</p> <p id="ZH-CN_TOPIC_0000002478333724__p1925181113710"><span><img height="416.082254" originheight="796" originwidth="1461" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104736.64032138753928601414320189198758:50001231000000:2800:2E812CB1E7336636AD6B1C28901489CCB9361F590EC4DA82BE7F05E537598AC5.png" title="点击放大" width="761.0875790000001"></span></p> <p id="ZH-CN_TOPIC_0000002478333724__p191102415253"></p> </div> <div class="tiledSection"><h2 id="section71112584105">系统安全<i class="anchor-icon anchor-icon-link" anchorid="section71112584105" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478333724__p143921176577">系统安全页面中有两部分配置项：重置系统密钥和配置是否支持匿名访问。页面效果如下图所示：</p> <p id="ZH-CN_TOPIC_0000002478333724__p1593010116373"><span><img height="419.977425" originheight="796" originwidth="1461" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104736.60979328093174453520264207094935:50001231000000:2800:EAB813EB5A0EBCD151147363985695A7CF31991782835B27072C3705C3FB1D3D.png" title="点击放大" width="758.1"></span></p> <p id="ZH-CN_TOPIC_0000002478333724__p1153218445592"></p> <ol id="ZH-CN_TOPIC_0000002478333724__ol10888161175811"><li id="li13888119585">重置系统密钥</li></ol> <p id="ZH-CN_TOPIC_0000002478333724__p147711781806">系统密钥用于重新加密ohpm-repo服务中用户上传的公钥和uplinks的网络代理口令信息。多实例部署ohpm-repo时不支持重置系统密钥。点击重置系统密钥，将出现重置提示，如果确定重置，需要点击按钮“是”，将出现密码输入框，由于重置系统密钥是敏感操作，故需要输入当前登录账户的密码进行再次认证，页面效果如下图所示：</p> <p id="ZH-CN_TOPIC_0000002478333724__p20932143643713"><span><img height="420.874111" originheight="796" originwidth="1461" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104736.21142548066592702661470700773677:50001231000000:2800:AB4026258D80EF653E5A428CB796E9D4E11203770C40333671909D08A53AB362.png" title="点击放大" width="760.095"></span></p> <p id="ZH-CN_TOPIC_0000002478333724__p7562560593"></p> <p id="ZH-CN_TOPIC_0000002478333724__p12651322038">2. ohpm-repo匿名访问配置</p> <p id="ZH-CN_TOPIC_0000002478333724__p8823711241">ohpm-repo从5.0.5版本开始支持配置匿名访问功能。默认情况下，ohpm-repo支持匿名访问。如果需要配置不支持匿名访问，需要点击按钮“否”后提交，页面效果如下图所示：</p> <p id="ZH-CN_TOPIC_0000002478333724__p48253120388"><span><img height="413.60832100000005" originheight="796" originwidth="1461" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104736.18642090324056417748512897965708:50001231000000:2800:48C770733C1E61F05F069F637CF0D3CCF3C45DD35EC64B5270E6F32AD886AE28.png" title="点击放大" width="752.115"></span></p> <p id="ZH-CN_TOPIC_0000002478333724__p63212312610"></p> <ul id="ZH-CN_TOPIC_0000002478333724__ul15544152211913"><li id="li185440225916">当配置禁用匿名访问后，用户未登录状态下，不能够访问ohpm-repo管理界面首页中的包列表页面和包详情页面，只有登录后才能正常访问；首页也不能注册用户，只有登录选项。<p id="ZH-CN_TOPIC_0000002478333724__p8312155943811"><span><img height="403.81992" originheight="796" originwidth="1461" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104736.66891535066514281930739424632796:50001231000000:2800:2614E40A2F4B59AFE18613B05B084E9198BF60B73122FA495430B0CD42D5D2B5.png" title="点击放大" width="734.1600000000001"></span></p> </li><li id="li33886433521">配置禁用匿名访问后，当没有在.ohpmrc文件中正确配置AccessToken认证信息时，ohpm没有权限执行需要读权限的install，info和update命令。必须在.ohpmrc文件中正确配置读写/只读AccessToken认证信息。</li><li id="li154620120919">配置禁用匿名访问后，如果使用ohpm-repo5.0.5版本以前的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-custom-auth-plugin">认证插件</a>模板，必须升级认证插件内容，额外添加方法authWithReadOnly，实现只读AccessToken认证方法。</li></ul> </div> </div> <div></div></div>