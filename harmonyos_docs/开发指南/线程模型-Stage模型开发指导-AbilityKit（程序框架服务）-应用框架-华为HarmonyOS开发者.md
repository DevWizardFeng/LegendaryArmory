<h1 _ngcontent-ifw-c119="" class="doc-title ng-star-inserted" title="线程模型"> 线程模型 </h1>

<div _ngcontent-ifw-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>线程是操作系统进行运算调度的基本单位，是<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/process-model-stage">进程</a>中的执行流，共享进程的资源。一个进程可以包含多个线程。</p>    <div class="tiledSection">     <h2 id="线程类型">线程类型<i class="anchor-icon anchor-icon-link" anchorid="线程类型" tips="复制节点链接"></i></h2>          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ability-terminology#stage模型">Stage模型</a>下的线程主要有如下三类：</p>     <ul>      <li>主线程       <ul>        <li>执行UI绘制。</li>        <li>管理主线程的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-runtime-overview">ArkTS引擎</a>实例，使多个UIAbility组件能够运行在其之上。</li>        <li>管理其他线程的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-runtime-overview">ArkTS引擎</a>实例，例如使用TaskPool（任务池）创建任务或取消任务、启动和终止Worker线程。</li>        <li>分发交互事件。</li>        <li>处理应用代码的回调，包括事件处理和生命周期管理。</li>        <li>接收TaskPool以及Worker线程发送的消息。</li>       </ul></li>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-taskpool" target="_blank">TaskPool线程</a>       <ul>        <li>用于执行耗时操作，支持设置调度优先级、负载均衡等功能，推荐使用。</li>       </ul></li>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-worker" target="_blank">Worker线程</a>       <ul>        <li>         <p>用于执行耗时操作，支持线程间通信。</p>         <p>TaskPool与Worker的运作机制、通信手段和使用方法可以参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/taskpool-vs-worker">TaskPool和Worker的对比</a>。</p>         <p><span><img originheight="611" originwidth="1024" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114740.97898216599151292039820141260057:50001231000000:2800:A99A98603C5C2549B753224646BC46F278D35B4014D1EF600AD49659D6E18F52.png" width="920" height="548.9453125"></span></p></li>       </ul></li>     </ul>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>TaskPool自行管理线程数量，其生命周期由TaskPool统一管理。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/worker-introduction">Worker</a>线程的生命周期由开发者自行维护。</li>        <li>同一线程中存在多个组件，例如UIAbility组件和UI组件都存在于主线程中。在Stage模型中目前主要使用<a href="/consumer/cn/doc/harmonyos-guides/thread-model-stage#使用eventhub进行线程内通信">EventHub</a>进行数据通信。</li>        <li>执行hdc shell命令，进入设备的shell命令行。在shell命令行中，执行ps -p &lt;pid&gt; -T命令，可以查看指定应用进程的线程信息。其中，&lt;pid&gt;为需要指定的应用进程的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/process-model-stage">进程ID</a>。</li>       </ul>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="使用eventhub进行线程内通信">使用EventHub进行线程内通信<i class="anchor-icon anchor-icon-link" anchorid="使用eventhub进行线程内通信" tips="复制节点链接"></i></h2>          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-eventhub" target="_blank">EventHub</a>提供了线程内发送和处理事件的能力，包括对事件订阅、取消订阅、触发事件等。以UIAbility组件与UI之间的数据同步为例，具体使用方法可以参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-data-sync-with-ui#使用eventhub进行数据通信">UIAbility组件与UI的数据同步</a>。</p>    </div>   </div>   <div></div></div>