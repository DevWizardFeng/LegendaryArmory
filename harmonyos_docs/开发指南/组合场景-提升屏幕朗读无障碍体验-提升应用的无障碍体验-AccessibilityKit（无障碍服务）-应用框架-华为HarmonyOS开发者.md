<h1 _ngcontent-pok-c119="" class="doc-title ng-star-inserted" title="组合场景"> 组合场景 </h1>

<div _ngcontent-pok-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section4426123984">设计场景<i class="anchor-icon anchor-icon-link" anchorid="section4426123984" tips="复制节点链接"></i></h2><p>在一些场景中，一个功能上完整的UI对象可能是由若干个更小的UI组件组合而成的。若每一个小的UI组件都可以获焦并朗读，则会造成信息冗余和效率降低。同时由于可聚焦的组件过多过细，也会影响触摸浏览时走焦的性能体验。在这种情况下，将它们在功能或语义上聚合成一个自然组并作为一个独立可获焦的UI元素来向视障用户表达内容更加合理，且更加高效。总体原则是：对于表示同一个对象信息的多个组件，需要进行组合标注，对外只暴露一个无障碍焦点。</p> <p><span><img originheight="393" originwidth="361" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114835.70655928174135350740795868504953:50001231000000:2800:B91A46B0477F2F2854C5EC9CC6A7BEDDFA80B06848E0E2FD0EDB6E75DB7C7B56.png" width="361" height="393"></span></p> </div> <div class="tiledSection"><h2 id="section156711201788">开发实例<i class="anchor-icon anchor-icon-link" anchorid="section156711201788" tips="复制节点链接"></i></h2><p>如下，可以将多个控件设置为一个组，通过对组设置朗读标签，达到整组播报的效果，组内的子控件设置不可获取焦点。</p> <div _ngcontent-pok-c106="" class="highlight-div"><div _ngcontent-pok-c106="" class="highlight-div-header"><div _ngcontent-pok-c106="" class="highlight-div-header-left"><div _ngcontent-pok-c106="" class="handle-button expand-button"><div _ngcontent-pok-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pok-c106="" class="highlight-div-header-right"><div _ngcontent-pok-c106="" class="handle-button ai-button"></div><div _ngcontent-pok-c106="" class="handle-button line-button"><div _ngcontent-pok-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pok-c106="" class="handle-button theme-button"><div _ngcontent-pok-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pok-c106="" class="handle-button copy-button"><div _ngcontent-pok-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pok-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-meta">@Entry</span></span></li><li><span class=""><span class="hljs-meta">@Component</span></span></li><li><span class="hljs-keyword">export</span> struct <span class=""><span class="hljs-title class_">Rule</span>_2_1_4 </span><span class="">{</span></li><li>  <span class=""><span class="hljs-attr">title</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'Rule 2.1.4'</span></span></li><li>
</li><li>  <span class=""><span class="hljs-title function_">build</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>    <span class=""><span class="hljs-title class_">NavDestination</span></span><span class="">() </span><span class="">{</span></li><li>      <span class=""><span class="hljs-title class_">Column</span></span><span class="">() </span><span class="">{</span></li><li>
</li><li>        <span class=""><span class="hljs-title class_">Row</span></span><span class="">() </span><span class="">{</span></li><li>          <span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment">默认只有子组件才能获取焦点</span></span></li><li>          <span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment">日期、天气、温度等信息在每个组件独立获取焦点时分别朗读</span></span></li><li>          <span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment">在组合式组件规范里是不正确的。</span></span></li><li>          <span class=""><span class="hljs-title class_">Text</span></span><span class="">(</span><span class=""><span class="hljs-string">"23 Dec 2023"</span></span><span class="">) </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">日期信息。组件可独立对焦和朗读</span></span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">fontSize</span></span><span class="">(</span><span class=""><span class="hljs-number">32</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">fontColor</span></span><span class="">(</span><span class=""><span class="hljs-title class_">Color</span></span><span class="">.</span><span class=""><span class="hljs-property">Red</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">fontWeight</span></span><span class="">(</span><span class=""><span class="hljs-title class_">FontWeight</span></span><span class="">.</span><span class=""><span class="hljs-property">Bold</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">textAlign</span></span><span class="">(</span><span class=""><span class="hljs-title class_">TextAlign</span></span><span class="">.</span><span class=""><span class="hljs-property">Center</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">margin</span></span><span class="">(</span><span class="">{ </span><span class=""><span class="hljs-attr">right</span></span><span class="">: </span><span class=""><span class="hljs-number">20</span> </span><span class="">}</span><span class="">)</span></li><li>
</li><li>          <span class=""><span class="hljs-title class_">Column</span></span><span class="">() </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">天气信息。组件可独立对焦和朗读</span></span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">backgroundColor</span></span><span class="">(</span><span class=""><span class="hljs-title class_">Color</span></span><span class="">.</span><span class=""><span class="hljs-property">Blue</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">width</span></span><span class="">(</span><span class=""><span class="hljs-number">50</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">height</span></span><span class="">(</span><span class=""><span class="hljs-number">50</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">accessibilityText</span></span><span class="">(</span><span class=""><span class="hljs-string">"Snow"</span></span><span class="">) </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">当该组件被屏幕阅读器选中时，该组件不包含文本信息，因此将读取此文本</span></span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">margin</span></span><span class="">(</span><span class="">{ </span><span class=""><span class="hljs-attr">right</span></span><span class="">: </span><span class=""><span class="hljs-number">20</span> </span><span class="">}</span><span class="">)</span></li><li>
</li><li>          <span class=""><span class="hljs-title class_">Text</span></span><span class="">(</span><span class=""><span class="hljs-string">"-1"</span></span><span class="">) </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">温度信息。组件可独立对焦和朗读</span></span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">fontSize</span></span><span class="">(</span><span class=""><span class="hljs-number">20</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">fontColor</span></span><span class="">(</span><span class=""><span class="hljs-title class_">Color</span></span><span class="">.</span><span class=""><span class="hljs-property">Green</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">fontWeight</span></span><span class="">(</span><span class=""><span class="hljs-title class_">FontWeight</span></span><span class="">.</span><span class=""><span class="hljs-property">Bold</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">textAlign</span></span><span class="">(</span><span class=""><span class="hljs-title class_">TextAlign</span></span><span class="">.</span><span class=""><span class="hljs-property">Center</span></span><span class="">)</span></li><li>        <span class="">}</span></li><li>        <span class="">.</span><span class=""><span class="hljs-title function_">height</span></span><span class="">(</span><span class=""><span class="hljs-number">50</span></span><span class="">)</span></li><li>        <span class="">.</span><span class=""><span class="hljs-title function_">margin</span></span><span class="">(</span><span class="">{ </span><span class=""><span class="hljs-attr">bottom</span></span><span class="">: </span><span class=""><span class="hljs-number">20</span> </span><span class="">}</span><span class="">)</span></li><li>
</li><li>        <span class=""><span class="hljs-title class_">Row</span></span><span class="">() </span><span class="">{</span></li><li>          <span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment">因为</span></span><span class=""><span class="hljs-comment">accessibilityGroup</span></span><span class=""><span class="hljs-comment">属性设置为</span></span><span class=""><span class="hljs-comment">true</span></span><span class=""><span class="hljs-comment">，子组件无法获取焦点。</span></span></li><li>          <span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment">获取焦点时，日期、天气、温度信息一起朗读</span></span></li><li>          <span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment">此时只有</span></span><span class=""><span class="hljs-comment">Row</span></span><span class=""><span class="hljs-comment">可以获取焦点，这是符合组合式组件规范的。</span></span></li><li>          <span class=""><span class="hljs-title class_">Text</span></span><span class="">(</span><span class=""><span class="hljs-string">"24 Dec 2023"</span></span><span class="">) </span><span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment">日期信息。组件无法聚焦，无法朗读，因为父组件的</span></span><span class=""><span class="hljs-comment">accessibilityGroup</span></span><span class=""><span class="hljs-comment">属性设置为</span></span><span class=""><span class="hljs-comment">true</span></span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">fontSize</span></span><span class="">(</span><span class=""><span class="hljs-number">32</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">fontColor</span></span><span class="">(</span><span class=""><span class="hljs-title class_">Color</span></span><span class="">.</span><span class=""><span class="hljs-property">Red</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">fontWeight</span></span><span class="">(</span><span class=""><span class="hljs-title class_">FontWeight</span></span><span class="">.</span><span class=""><span class="hljs-property">Bold</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">textAlign</span></span><span class="">(</span><span class=""><span class="hljs-title class_">TextAlign</span></span><span class="">.</span><span class=""><span class="hljs-property">Center</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">margin</span></span><span class="">(</span><span class="">{ </span><span class=""><span class="hljs-attr">right</span></span><span class="">: </span><span class=""><span class="hljs-number">20</span> </span><span class="">}</span><span class="">)</span></li><li>
</li><li>          <span class=""><span class="hljs-title class_">Column</span></span><span class="">() </span><span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment">天气信息组件无法聚焦，无法朗读，因为父组件的</span></span><span class=""><span class="hljs-comment">accessibilityGroup</span></span><span class=""><span class="hljs-comment">为</span></span><span class=""><span class="hljs-comment">true</span></span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">backgroundColor</span></span><span class="">(</span><span class=""><span class="hljs-title class_">Color</span></span><span class="">.</span><span class=""><span class="hljs-property">Yellow</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">width</span></span><span class="">(</span><span class=""><span class="hljs-number">50</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">height</span></span><span class="">(</span><span class=""><span class="hljs-number">50</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">accessibilityText</span></span><span class="">(</span><span class=""><span class="hljs-string">"Sunny"</span></span><span class="">) </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">组件不包含文本信息，当组件被屏幕阅读器选中时，因此将读取此文本</span></span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">margin</span></span><span class="">(</span><span class="">{ </span><span class=""><span class="hljs-attr">right</span></span><span class="">: </span><span class=""><span class="hljs-number">20</span> </span><span class="">}</span><span class="">)</span></li><li>
</li><li>          <span class=""><span class="hljs-title class_">Text</span></span><span class="">(</span><span class=""><span class="hljs-string">"-7"</span></span><span class="">) </span><span class=""><span class="hljs-comment">// //</span></span><span class=""><span class="hljs-comment">温度信息。组件无法聚焦，无法朗读因为父组件的</span></span><span class=""><span class="hljs-comment">accessibilityGroup</span></span><span class=""><span class="hljs-comment">为</span></span><span class=""><span class="hljs-comment">true</span></span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">fontSize</span></span><span class="">(</span><span class=""><span class="hljs-number">20</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">fontColor</span></span><span class="">(</span><span class=""><span class="hljs-title class_">Color</span></span><span class="">.</span><span class=""><span class="hljs-property">Green</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">fontWeight</span></span><span class="">(</span><span class=""><span class="hljs-title class_">FontWeight</span></span><span class="">.</span><span class=""><span class="hljs-property">Bold</span></span><span class="">)</span></li><li>            <span class="">.</span><span class=""><span class="hljs-title function_">textAlign</span></span><span class="">(</span><span class=""><span class="hljs-title class_">TextAlign</span></span><span class="">.</span><span class=""><span class="hljs-property">Center</span></span><span class="">)</span></li><li>        <span class="">}</span></li><li>        <span class="">.</span><span class=""><span class="hljs-title function_">height</span></span><span class="">(</span><span class=""><span class="hljs-number">50</span></span><span class="">)</span></li><li>        <span class="">.</span><span class=""><span class="hljs-title function_">margin</span></span><span class="">(</span><span class="">{ </span><span class=""><span class="hljs-attr">bottom</span></span><span class="">: </span><span class=""><span class="hljs-number">20</span> </span><span class="">}</span><span class="">)</span></li><li>        <span class="">.</span><span class=""><span class="hljs-title function_">accessibilityGroup</span></span><span class="">(</span><span class="hljs-literal">true</span><span class="">) </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">将</span></span><span class=""><span class="hljs-comment">accessibilityGroup</span></span><span class=""><span class="hljs-comment">属性设置为</span></span><span class=""><span class="hljs-comment">true</span></span></li><li>      <span class="">}</span></li><li>      <span class="">.</span><span class=""><span class="hljs-title function_">alignItems</span></span><span class="">(</span><span class=""><span class="hljs-title class_">HorizontalAlign</span></span><span class="">.</span><span class=""><span class="hljs-property">Start</span></span><span class="">)</span></li><li>      <span class="">.</span><span class=""><span class="hljs-title function_">padding</span></span><span class="">(</span><span class=""><span class="hljs-number">10</span></span><span class="">)</span></li><li>    <span class="">}</span></li><li>    <span class="">.</span><span class=""><span class="hljs-title function_">title</span></span><span class="">(</span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">title</span></span><span class="">)</span></li><li>  <span class="">}</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div></div></div>