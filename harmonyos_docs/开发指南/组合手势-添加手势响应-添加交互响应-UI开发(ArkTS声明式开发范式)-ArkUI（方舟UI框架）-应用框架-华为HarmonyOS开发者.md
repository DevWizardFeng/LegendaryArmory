<h1 _ngcontent-qmm-c119="" class="doc-title ng-star-inserted" title="组合手势"> 组合手势 </h1>

<div _ngcontent-qmm-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>组合手势由多种单一手势组合而成，通过在GestureGroup中使用不同的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-combined-gestures#gesturemode枚举说明" target="_blank">GestureMode</a>来声明该组合手势的类型，支持<a href="/consumer/cn/doc/harmonyos-guides/arkts-gesture-events-combined-gestures#顺序识别">顺序识别</a>、<a href="/consumer/cn/doc/harmonyos-guides/arkts-gesture-events-combined-gestures#并行识别">并行识别</a>和<a href="/consumer/cn/doc/harmonyos-guides/arkts-gesture-events-combined-gestures#互斥识别">互斥识别</a>三种类型。</p>    <div _ngcontent-qmm-c106="" class="highlight-div"><div _ngcontent-qmm-c106="" class="highlight-div-header"><div _ngcontent-qmm-c106="" class="highlight-div-header-left"><div _ngcontent-qmm-c106="" class="handle-button expand-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qmm-c106="" class="highlight-div-header-right"><div _ngcontent-qmm-c106="" class="handle-button ai-button"></div><div _ngcontent-qmm-c106="" class="handle-button line-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qmm-c106="" class="handle-button theme-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qmm-c106="" class="handle-button copy-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qmm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">GestureGroup</span>(<span class="hljs-attr">mode</span>:<span class="hljs-title class_">GestureMode</span>, <span class="hljs-attr">gesture</span>:<span class="hljs-title class_">GestureType</span>[])</li></ol></pre></div></div>    <ul>     <li>      <p>mode：为GestureMode枚举类。用于声明该组合手势的类型。</p></li>     <li>      <p>gesture：由多个手势组合而成的数组。用于声明该组合手势的各个手势。</p></li>    </ul>    <div class="tiledSection">     <h2 id="顺序识别">顺序识别<i class="anchor-icon anchor-icon-link" anchorid="顺序识别" tips="复制节点链接"></i></h2>          <p>顺序识别组合手势对应的GestureMode为Sequence。顺序识别组合手势将按照手势的注册顺序识别手势，直到所有的手势识别成功。当顺序识别组合手势中有一个手势识别失败时，后续手势识别均失败。顺序识别手势中仅有最后一个手势可以响应onActionEnd。</p>     <p>以一个由长按手势和滑动手势组合而成的顺序识别手势为例：</p>     <p>在一个Column组件上绑定了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-transformation#translate" target="_blank">translate</a>属性，通过修改该属性可以设置组件的位置移动。然后在该组件上绑定<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-longpressgesture" target="_blank">LongPressGesture</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture" target="_blank">PanGesture</a>组合而成的Sequence组合手势。当触发LongPressGesture时，更新显示的数字。当长按后进行拖动时，根据滑动手势的回调函数，实现组件的拖动。</p>     <div _ngcontent-qmm-c106="" class="highlight-div"><div _ngcontent-qmm-c106="" class="highlight-div-header"><div _ngcontent-qmm-c106="" class="highlight-div-header-left"><div _ngcontent-qmm-c106="" class="handle-button expand-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qmm-c106="" class="highlight-div-header-right"><div _ngcontent-qmm-c106="" class="handle-button ai-button"></div><div _ngcontent-qmm-c106="" class="handle-button line-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qmm-c106="" class="handle-button theme-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qmm-c106="" class="handle-button copy-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qmm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">offsetX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">offsetY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">positionX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">positionY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">borderStyles</span>: <span class="hljs-title class_">BorderStyle</span> = <span class="hljs-title class_">BorderStyle</span>.<span class="hljs-property">Solid</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'sequence gesture\n'</span> + <span class="hljs-string">'LongPress onAction:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> + <span class="hljs-string">'\nPanGesture offset:\nX: '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetX</span> + <span class="hljs-string">'\n'</span> + <span class="hljs-string">'Y: '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetY</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">28</span>)</li><li>    }.<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>    .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>    <span class="hljs-comment">// 绑定translate属性可以实现组件的位置移动</span></li><li>    .<span class="hljs-title function_">translate</span>({ <span class="hljs-attr">x</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetX</span>, <span class="hljs-attr">y</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetY</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span> })</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">250</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>    <span class="hljs-comment">//以下组合手势为顺序识别，当长按手势事件未正常触发时不会触发滑动手势事件</span></li><li>    .<span class="hljs-title function_">gesture</span>(</li><li>      <span class="hljs-comment">// 声明该组合手势的类型为Sequence类型</span></li><li>      <span class="hljs-title class_">GestureGroup</span>(<span class="hljs-title class_">GestureMode</span>.<span class="hljs-property">Sequence</span>,</li><li>        <span class="hljs-comment">// 该组合手势第一个触发的手势为长按手势，且长按手势可多次响应</span></li><li>        <span class="hljs-title class_">LongPressGesture</span>({ <span class="hljs-attr">repeat</span>: <span class="hljs-literal">true</span> })</li><li>          <span class="hljs-comment">// 当长按手势识别成功，增加Text组件上显示的count次数</span></li><li>          .<span class="hljs-title function_">onAction</span>(<span class="hljs-function">(<span class="hljs-params">event: GestureEvent|<span class="hljs-literal">undefined</span></span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span>(event){</li><li>              <span class="hljs-keyword">if</span> (event.<span class="hljs-property">repeat</span>) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;</li><li>              }</li><li>            }</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'LongPress onAction'</span>);</li><li>          })</li><li>          .<span class="hljs-title function_">onActionEnd</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'LongPress end'</span>);</li><li>          }),</li><li>        <span class="hljs-comment">// 当长按之后进行拖动，PanGesture手势被触发</span></li><li>        <span class="hljs-title class_">PanGesture</span>()</li><li>          .<span class="hljs-title function_">onActionStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">borderStyles</span> = <span class="hljs-title class_">BorderStyle</span>.<span class="hljs-property">Dashed</span>;</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'pan start'</span>);</li><li>          })</li><li>            <span class="hljs-comment">// 当该手势被触发时，根据回调获得拖动的距离，修改该组件的位移距离从而实现组件的移动</span></li><li>          .<span class="hljs-title function_">onActionUpdate</span>(<span class="hljs-function">(<span class="hljs-params">event: GestureEvent|<span class="hljs-literal">undefined</span></span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span>(event){</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetX</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">positionX</span> + event.<span class="hljs-property">offsetX</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetY</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">positionY</span> + event.<span class="hljs-property">offsetY</span>;</li><li>            }</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'pan update'</span>);</li><li>          })</li><li>          .<span class="hljs-title function_">onActionEnd</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">positionX</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetX</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">positionY</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetY</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">borderStyles</span> = <span class="hljs-title class_">BorderStyle</span>.<span class="hljs-property">Solid</span>;</li><li>          })</li><li>      )</li><li>      .<span class="hljs-title function_">onCancel</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"sequence gesture canceled"</span>)</li><li>      })</li><li>    )</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="395" originwidth="340" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114925.50826467256261201337487657571325:50001231000000:2800:BD1D81DC82423B6CE2C1F2A9592EADD4F2861EE04081D4429EDDEA99C2CB6665.gif" width="340" height="395"></span></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>拖拽事件是一种典型的顺序识别组合手势事件，由长按手势事件和滑动手势事件组合而成。只有先长按达到长按手势事件预设置的时间后进行滑动才会触发拖拽事件。如果长按事件未达到或者长按后未进行滑动，拖拽事件均识别失败。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="并行识别">并行识别<i class="anchor-icon anchor-icon-link" anchorid="并行识别" tips="复制节点链接"></i></h2>          <p>并行识别组合手势对应的GestureMode为Parallel。并行识别组合手势中注册的手势将同时进行识别，直到所有手势识别结束。并行识别手势组合中的手势进行识别时互不影响。</p>     <p>以在一个Column组件上绑定点击手势和双击手势组成的并行识别手势为例，由于单击手势和双击手势是并行识别，因此两个手势可以同时进行识别，二者互不干涉。</p>     <div _ngcontent-qmm-c106="" class="highlight-div"><div _ngcontent-qmm-c106="" class="highlight-div-header"><div _ngcontent-qmm-c106="" class="highlight-div-header-left"><div _ngcontent-qmm-c106="" class="handle-button expand-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qmm-c106="" class="highlight-div-header-right"><div _ngcontent-qmm-c106="" class="handle-button ai-button"></div><div _ngcontent-qmm-c106="" class="handle-button line-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qmm-c106="" class="handle-button theme-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qmm-c106="" class="handle-button copy-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qmm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">count1</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">count2</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Parallel gesture\n'</span> + <span class="hljs-string">'tapGesture count is 1:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">count1</span> + <span class="hljs-string">'\ntapGesture count is 2:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">count2</span> + <span class="hljs-string">'\n'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">28</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    <span class="hljs-comment">// 以下组合手势为并行识别，单击手势识别成功后，若在规定时间内再次点击，双击手势也会识别成功</span></li><li>    .<span class="hljs-title function_">gesture</span>(</li><li>      <span class="hljs-title class_">GestureGroup</span>(<span class="hljs-title class_">GestureMode</span>.<span class="hljs-property">Parallel</span>,</li><li>        <span class="hljs-title class_">TapGesture</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">onAction</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">count1</span>++;</li><li>          }),</li><li>        <span class="hljs-title class_">TapGesture</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">2</span> })</li><li>          .<span class="hljs-title function_">onAction</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">count2</span>++;</li><li>          })</li><li>      )</li><li>    )</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="194" originwidth="340" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114925.65551382385612447925061361608534:50001231000000:2800:CE43490B3FD6F68BB3EA46FF6F8584D6EC94AA2101E0482DE27B39A98600F5DB.gif" width="340" height="194"></span></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当由单击手势和双击手势组成一个并行识别组合手势后，在区域内进行点击时，单击手势和双击手势将同时进行识别。</p>       <p>当只有单次点击时，单击手势识别成功，双击手势识别失败。</p>       <p>当有两次点击时，若两次点击相距时间在规定时间内（默认规定时间为300毫秒），触发两次单击事件和一次双击事件。</p>       <p>当有两次点击时，若两次点击相距时间超出规定时间，触发两次单击事件不触发双击事件。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="互斥识别">互斥识别<i class="anchor-icon anchor-icon-link" anchorid="互斥识别" tips="复制节点链接"></i></h2>          <p>互斥识别组合手势对应的GestureMode为Exclusive。互斥识别组合手势中注册的手势将同时进行识别，若有一个手势识别成功，则结束手势识别，其他所有手势识别失败。</p>     <p>以在一个Column组件上绑定单击手势和双击手势组合而成的互斥识别组合手势为例。若先绑定单击手势后绑定双击手势，由于单击手势只需要一次点击即可触发而双击手势需要两次，每次的点击事件均被单击手势消费而不能积累成双击手势，所以双击手势无法触发。若先绑定双击手势后绑定单击手势，则触发双击手势不触发单击手势。</p>     <div _ngcontent-qmm-c106="" class="highlight-div"><div _ngcontent-qmm-c106="" class="highlight-div-header"><div _ngcontent-qmm-c106="" class="highlight-div-header-left"><div _ngcontent-qmm-c106="" class="handle-button expand-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qmm-c106="" class="highlight-div-header-right"><div _ngcontent-qmm-c106="" class="handle-button ai-button"></div><div _ngcontent-qmm-c106="" class="handle-button line-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qmm-c106="" class="handle-button theme-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qmm-c106="" class="handle-button copy-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qmm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">count1</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">count2</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Exclusive gesture\n'</span> + <span class="hljs-string">'tapGesture count is 1:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">count1</span> + <span class="hljs-string">'\ntapGesture count is 2:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">count2</span> + <span class="hljs-string">'\n'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">28</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    <span class="hljs-comment">//以下组合手势为互斥识别，单击手势识别成功后，双击手势会识别失败</span></li><li>    .<span class="hljs-title function_">gesture</span>(</li><li>      <span class="hljs-title class_">GestureGroup</span>(<span class="hljs-title class_">GestureMode</span>.<span class="hljs-property">Exclusive</span>,</li><li>        <span class="hljs-title class_">TapGesture</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">1</span> })</li><li>          .<span class="hljs-title function_">onAction</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">count1</span>++;</li><li>          }),</li><li>        <span class="hljs-title class_">TapGesture</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">2</span> })</li><li>          .<span class="hljs-title function_">onAction</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">count2</span>++;</li><li>          })</li><li>      )</li><li>    )</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="193" originwidth="340" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114925.70342087082695389840959328426782:50001231000000:2800:D41B1198FF8D9DE619B203E4C39ECA6CF1E96A69974BFE503166EC7F5CABE21E.gif" width="340" height="193"></span></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当由单击手势和双击手势组成一个互斥识别组合手势后，在区域内进行点击时，单击手势和双击手势将同时进行识别。</p>       <p>当只有单次点击时，单击手势识别成功，双击手势识别失败。</p>       <p>当有两次点击时，手势响应取决于绑定手势的顺序。若先绑定单击手势后绑定双击手势，单击手势在第一次点击时即宣告识别成功，此时双击手势已经失败。即使在规定时间内进行了第二次点击，双击手势事件也不会进行响应，此时会触发单击手势事件的第二次识别成功。若先绑定双击手势后绑定单击手势，则会响应双击手势而不响应单击手势。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="场景示例">场景示例<i class="anchor-icon anchor-icon-link" anchorid="场景示例" tips="复制节点链接"></i></h2>          <p>以下示例实现了子组件绑定长按和滑动手势，长按手势和滑动手势需要可以同时触发，但是在长按手势未成功时，需要让父组件Swiper的内置滑动手势触发的功能。由于子组件的滑动手势和父组件的内置滑动手势是竞争关系，且子组件的滑动手势的优先级更高，因此需要通过动态控制子组件的滑动手势是否触发。</p>     <div _ngcontent-qmm-c106="" class="highlight-div"><div _ngcontent-qmm-c106="" class="highlight-div-header"><div _ngcontent-qmm-c106="" class="highlight-div-header-left"><div _ngcontent-qmm-c106="" class="handle-button expand-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qmm-c106="" class="highlight-div-header-right"><div _ngcontent-qmm-c106="" class="handle-button ai-button"></div><div _ngcontent-qmm-c106="" class="handle-button line-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qmm-c106="" class="handle-button theme-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qmm-c106="" class="handle-button copy-button"><div _ngcontent-qmm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qmm-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PromptAction</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CombinedGestureDemo</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isLongPress</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-attr">promptAction</span>: <span class="hljs-title class_">PromptAction</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Swiper</span>() {</li><li>      <span class="hljs-comment">// 页面1</span></li><li>      <span class="hljs-title class_">Row</span>()</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Grey</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">12</span>)</li><li>        <span class="hljs-comment">// 通过自定义手势判定回调，判断在长按手势未成功时，拒绝子组件的滑动手势，从而让父组件Swiper的滑动手势成功</span></li><li>        .<span class="hljs-title function_">onGestureRecognizerJudgeBegin</span>(<span class="hljs-function">(<span class="hljs-params">event: BaseGestureEvent, current: GestureRecognizer, others: <span class="hljs-built_in">Array</span>&lt;GestureRecognizer&gt;</span>)=&gt;</span>{</li><li>          <span class="hljs-keyword">if</span> (current.<span class="hljs-title function_">getType</span>() !== <span class="hljs-title class_">GestureControl</span>.<span class="hljs-property">GestureType</span>.<span class="hljs-property">PAN_GESTURE</span>) {</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-title class_">GestureJudgeResult</span>.<span class="hljs-property">CONTINUE</span>;</li><li>          }</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isLongPress</span>) {</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-title class_">GestureJudgeResult</span>.<span class="hljs-property">CONTINUE</span>;</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-title class_">GestureJudgeResult</span>.<span class="hljs-property">REJECT</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">gesture</span>(</li><li>          <span class="hljs-comment">// 绑定并行手势组，实现长按手势和滑动手势可以同时触发</span></li><li>          <span class="hljs-title class_">GestureGroup</span>(<span class="hljs-title class_">GestureMode</span>.<span class="hljs-property">Parallel</span>,</li><li>            <span class="hljs-title class_">LongPressGesture</span>()</li><li>              .<span class="hljs-title function_">onAction</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">isLongPress</span> = <span class="hljs-literal">true</span>;</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">promptAction</span>.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"LongPress trigger"</span> })</li><li>              })</li><li>              .<span class="hljs-title function_">onActionEnd</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">isLongPress</span> = <span class="hljs-literal">false</span>;</li><li>              })</li><li>            ,</li><li>            <span class="hljs-title class_">PanGesture</span>()</li><li>              .<span class="hljs-title function_">onActionStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">promptAction</span>.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"child pan start"</span> })</li><li>              })</li><li>          )</li><li>        )</li><li>      <span class="hljs-comment">// 页面2</span></li><li>      <span class="hljs-title class_">Row</span>()</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">12</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">2</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">300</span>)</li><li>    .<span class="hljs-title function_">padding</span>(<span class="hljs-number">20</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="993" originwidth="537" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114925.21995125471608686034311122890980:50001231000000:2800:B2096C2185BC2D3C65A30F2A8F8A282DDF432A4ACD70BA59F704D5ED917FF9E2.gif" width="537" height="993"></span></p>    </div>   </div>   <div></div></div>