<h1 _ngcontent-pdd-c119="" class="doc-title ng-star-inserted" title="绑定半模态页面（bindSheet）"> 绑定半模态页面（bindSheet） </h1>

<div _ngcontent-pdd-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-sheet-transition#bindsheet" target="_blank">半模态页面（bindSheet）</a>默认是模态形式的非全屏弹窗式交互页面，允许部分底层父视图可见，帮助用户在与半模态交互时保留其父视图环境。</p>    <p>半模态页面适用于展示简单的任务或信息面板，例如，个人信息、文本简介、分享面板、创建日程、添加内容等。若需展示可能影响父视图的半模态页面，半模态支持配置为非模态交互形式。</p>    <p>半模态在不同宽度的设备上存在不同的形态能力，开发者对不同宽度的设备上有不同的形态诉求请参考(<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-sheet-transition#sheetoptions" target="_blank">preferType</a>)属性。可以使用bindSheet构建半模态转场效果，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-modal-transition#使用bindsheet构建半模态转场效果">模态转场</a>。对于复杂或者冗长的用户流程，建议考虑其他的转场方式替代半模态。如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-contentcover-page">全模态转场</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-navigation-navigation">Navigation转场</a>。</p>    <div class="tiledSection">     <h2 id="使用约束">使用约束<i class="anchor-icon anchor-icon-link" anchorid="使用约束" tips="复制节点链接"></i></h2>          <ul>      <li>       <p>半模态内嵌<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-uiextension" target="_blank">UIExtension</a>时，不支持再在UIExtension内拉起半模态/弹窗。</p></li>      <li>       <p>若无二次确认或者自定义关闭行为的场景，不建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-sheet-transition#sheetoptions" target="_blank">shouldDismiss/onWillDismiss</a>接口。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="生命周期">生命周期<i class="anchor-icon anchor-icon-link" anchorid="生命周期" tips="复制节点链接"></i></h2>          <p>半模态页面提供了生命周期函数，用于通知用户该弹窗的生命周期状态。生命周期的触发顺序依次为：onWillAppear -&gt; onAppear -&gt; onWillDisappear -&gt; onDisappear。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.4.1.1" valign="top" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.4.1.2" valign="top" width="33.33333333333333%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.4.1.3" valign="top" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">onWillAppear</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">() =&gt; void</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">半模态页面显示（动画开始前）回调函数。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">onAppear</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">() =&gt; void</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">半模态页面显示（动画结束后）回调函数。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">onWillDisappear</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">() =&gt; void</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">半模态页面回退（动画开始前）回调函数。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">onDisappear</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">() =&gt; void</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">半模态页面回退（动画结束后）回调函数。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="使用嵌套滚动交互">使用嵌套滚动交互<i class="anchor-icon anchor-icon-link" anchorid="使用嵌套滚动交互" tips="复制节点链接"></i></h2>          <p>在半模态面板内容区域滑动时的操作优先级：</p>     <ol>      <li>       <p>内容处于最顶部（内容不可滚动时以此状态处理）</p>       <p>上滑时，优先向上扩展面板档位，如无档位可扩展，则滚动内容</p>       <p>下滑时，优先向下收缩面板档位，如无档位可收缩，则关闭面板</p></li>      <li>       <p>内容处于中间位置（可上下滚动）</p>       <p>上/下滑时，优先滚动内容，直至页面内容到达底部/顶部</p></li>      <li>       <p>内容处于底部位置（内容可滚动时）</p>       <p>上滑时，呈现内容区域回弹效果，不切换档位</p>       <p>下滑时，滚动内容直到到达顶部</p></li>     </ol>     <p>半模态上述交互默认的嵌套模式为：{Forward：PARENT_FIRST，Backward：SELF_FIRST}</p>     <p>如果开发者希望在面板内容的builder中定义滚动容器，如List、Scroll，并结合半模态的上述交互能力，那么需要在垂直方向上为滚动容器设置嵌套滚动属性。</p>     <div _ngcontent-pdd-c106="" class="highlight-div"><div _ngcontent-pdd-c106="" class="highlight-div-header"><div _ngcontent-pdd-c106="" class="highlight-div-header-left"><div _ngcontent-pdd-c106="" class="handle-button expand-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pdd-c106="" class="highlight-div-header-right"><div _ngcontent-pdd-c106="" class="handle-button ai-button"></div><div _ngcontent-pdd-c106="" class="handle-button line-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pdd-c106="" class="handle-button theme-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pdd-c106="" class="handle-button copy-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pdd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li>.<span class="hljs-title function_">nestedScroll</span>({</li><li>    <span class="hljs-comment">// 可滚动组件往末尾端滚动时的嵌套滚动选项，手势向上</span></li><li>    <span class="hljs-attr">scrollForward</span>: <span class="hljs-title class_">NestedScrollMode</span>.<span class="hljs-property">PARENT_FIRST</span>,</li><li>    <span class="hljs-comment">// 可滚动组件往起始端滚动时的嵌套滚动选项，手势向下</span></li><li>    <span class="hljs-attr">scrollBackward</span>: <span class="hljs-title class_">NestedScrollMode</span>.<span class="hljs-property">SELF_FIRST</span>,</li><li>})</li></ol></pre></div></div>     <p>完整示例代码如下：</p>     <div _ngcontent-pdd-c106="" class="highlight-div"><div _ngcontent-pdd-c106="" class="highlight-div-header"><div _ngcontent-pdd-c106="" class="highlight-div-header-left"><div _ngcontent-pdd-c106="" class="handle-button expand-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pdd-c106="" class="highlight-div-header-right"><div _ngcontent-pdd-c106="" class="handle-button ai-button"></div><div _ngcontent-pdd-c106="" class="handle-button line-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pdd-c106="" class="handle-button theme-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pdd-c106="" class="handle-button copy-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pdd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">SheetDemo</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isShowSheet</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">items</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>];</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">SheetBuilder</span>() {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 第一步：自定义滚动容器</span></li><li>      <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-string">'10vp'</span> }) {</li><li>        <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">Text</span>(<span class="hljs-title class_">String</span>(item)).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>          }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'80vp'</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#ff53ecd9'</span>).<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>        })</li><li>      }</li><li>      .<span class="hljs-title function_">alignListItem</span>(<span class="hljs-title class_">ListItemAlign</span>.<span class="hljs-property">Center</span>)</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-string">'10vp'</span> })</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'900px'</span>)</li><li>      <span class="hljs-comment">// 第二步：设置滚动组件的嵌套滚动属性</span></li><li>      .<span class="hljs-title function_">nestedScroll</span>({</li><li>        <span class="hljs-attr">scrollForward</span>: <span class="hljs-title class_">NestedScrollMode</span>.<span class="hljs-property">PARENT_FIRST</span>,</li><li>        <span class="hljs-attr">scrollBackward</span>: <span class="hljs-title class_">NestedScrollMode</span>.<span class="hljs-property">SELF_FIRST</span>,</li><li>      })</li><li>
</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"非滚动区域"</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>)</li><li>        .<span class="hljs-title function_">layoutWeight</span>(<span class="hljs-number">1</span>)</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>        .<span class="hljs-title function_">align</span>(<span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Top</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Open Sheet'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'80vp'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isShowSheet</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isShowSheet</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">bindSheet</span>($$this.<span class="hljs-property">isShowSheet</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">SheetBuilder</span>(), {</li><li>          <span class="hljs-attr">detents</span>: [<span class="hljs-title class_">SheetSize</span>.<span class="hljs-property">MEDIUM</span>, <span class="hljs-title class_">SheetSize</span>.<span class="hljs-property">LARGE</span>, <span class="hljs-number">600</span>],</li><li>          <span class="hljs-attr">preferType</span>: <span class="hljs-title class_">SheetType</span>.<span class="hljs-property">BOTTOM</span>,</li><li>          <span class="hljs-attr">title</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'嵌套滚动场景'</span> },</li><li>        })</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="695" originwidth="345" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114913.19743740013548012495796253051346:50001231000000:2800:3DC9AFD7271E92DD9AC1090694A34D1B357B22A2A1D8A3A007F4DB62676AE4BE.png" width="345" height="695"></span></p>    </div>    <div class="tiledSection">     <h2 id="二次确认能力">二次确认能力<i class="anchor-icon anchor-icon-link" anchorid="二次确认能力" tips="复制节点链接"></i></h2>          <p>推荐使用onWillDismiss接口，此接口支持在回调中处理二次确认，或自定义关闭行为。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>声明onWillDismiss接口后，半模态页面的所有关闭操作，包括侧滑、点击关闭按钮、点击蒙层和下拉关闭，都需通过调用dismiss方法来实现。若未实现此逻辑，半模态页面将无法响应上述关闭操作。</p>      </div></div></div>     <div _ngcontent-pdd-c106="" class="highlight-div"><div _ngcontent-pdd-c106="" class="highlight-div-header"><div _ngcontent-pdd-c106="" class="highlight-div-header-left"><div _ngcontent-pdd-c106="" class="handle-button expand-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pdd-c106="" class="highlight-div-header-right"><div _ngcontent-pdd-c106="" class="handle-button ai-button"></div><div _ngcontent-pdd-c106="" class="handle-button line-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pdd-c106="" class="handle-button theme-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pdd-c106="" class="handle-button copy-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pdd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct onWillDismiss_Dismiss {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isShow</span>: <span class="hljs-title class_">Boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">myBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Button'</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">"OpenBindSheet"</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isShow</span> = <span class="hljs-literal">true</span></li><li>      })</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">120</span>)</li><li>      .<span class="hljs-title function_">bindSheet</span>($$this.<span class="hljs-property">isShow</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">myBuilder</span>(), {</li><li>        <span class="hljs-attr">height</span>: <span class="hljs-title class_">SheetSize</span>.<span class="hljs-property">MEDIUM</span>,</li><li>        <span class="hljs-attr">blurStyle</span>: <span class="hljs-title class_">BlurStyle</span>.<span class="hljs-property">Thick</span>,</li><li>        <span class="hljs-attr">dragBar</span>: <span class="hljs-literal">true</span>,</li><li>        <span class="hljs-attr">detents</span>: [<span class="hljs-title class_">SheetSize</span>.<span class="hljs-property">MEDIUM</span>, <span class="hljs-title class_">SheetSize</span>.<span class="hljs-property">LARGE</span>],</li><li>        <span class="hljs-attr">title</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"title"</span>, <span class="hljs-attr">subtitle</span>: <span class="hljs-string">"subtitle"</span> },</li><li>        <span class="hljs-attr">enableOutsideInteractive</span>: <span class="hljs-literal">false</span>,</li><li>        <span class="hljs-attr">onWillDismiss</span>: (<span class="hljs-function">(<span class="hljs-params">DismissSheetAction: DismissSheetAction</span>) =&gt;</span> {</li><li>          <span class="hljs-comment">// 第二步：确认二次回调交互能力，此处用AlertDialog提示 "是否需要关闭半模态"</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">showAlertDialog</span>(</li><li>            {</li><li>              <span class="hljs-attr">message</span>: <span class="hljs-string">'是否选择关闭半模态'</span>,</li><li>              <span class="hljs-attr">autoCancel</span>: <span class="hljs-literal">true</span>,</li><li>              <span class="hljs-attr">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-property">Bottom</span>,</li><li>              <span class="hljs-attr">gridCount</span>: <span class="hljs-number">4</span>,</li><li>              <span class="hljs-attr">offset</span>: { <span class="hljs-attr">dx</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">dy</span>: -<span class="hljs-number">20</span> },</li><li>              <span class="hljs-attr">primaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'cancel'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the cancel button is clicked'</span>);</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">secondaryButton</span>: {</li><li>                <span class="hljs-attr">enabled</span>: <span class="hljs-literal">true</span>,</li><li>                <span class="hljs-attr">defaultFocus</span>: <span class="hljs-literal">true</span>,</li><li>                <span class="hljs-attr">style</span>: <span class="hljs-title class_">DialogButtonStyle</span>.<span class="hljs-property">HIGHLIGHT</span>,</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'ok'</span>,</li><li>                <span class="hljs-comment">// 第三步：确认关闭半模态逻辑所在，此处为AlertDialog的Button回调</span></li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-comment">// 第四步：上述第三步逻辑触发的时候，调用dismiss()关闭半模态</span></li><li>                  <span class="hljs-title class_">DismissSheetAction</span>.<span class="hljs-title function_">dismiss</span>();</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback when the ok button is clicked'</span>);</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AlertDialog Closed callbacks'</span>);</li><li>              }</li><li>            }</li><li>          )</li><li>        })</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="690" originwidth="351" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114913.17349067337063059513981027272216:50001231000000:2800:5F2BC1B32606EF7D80ACF066F0D61DAB99367B8AB1702181690FF0AA9F559845.png" width="351" height="690"></span></p>    </div>    <div class="tiledSection">     <h2 id="屏蔽部分关闭行为">屏蔽部分关闭行为<i class="anchor-icon anchor-icon-link" anchorid="屏蔽部分关闭行为" tips="复制节点链接"></i></h2>          <p>由于声明了onWillDismiss接口，半模态的关闭行为都需要dismiss处理。可以通过if等逻辑自定义处理关闭逻辑。</p>     <p>下述示例显示半模态页面只在下滑的时候关闭。</p>     <div _ngcontent-pdd-c106="" class="highlight-div"><div _ngcontent-pdd-c106="" class="highlight-div-header"><div _ngcontent-pdd-c106="" class="highlight-div-header-left"><div _ngcontent-pdd-c106="" class="handle-button expand-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pdd-c106="" class="highlight-div-header-right"><div _ngcontent-pdd-c106="" class="handle-button ai-button"></div><div _ngcontent-pdd-c106="" class="handle-button line-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pdd-c106="" class="handle-button theme-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pdd-c106="" class="handle-button copy-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pdd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">onWillDismiss</span>: (<span class="hljs-function">(<span class="hljs-params">DismissSheetAction: DismissSheetAction</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">DismissSheetAction</span>.<span class="hljs-property">reason</span> === <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">SLIDE_DOWN</span>) {</li><li>    <span class="hljs-title class_">DismissSheetAction</span>.<span class="hljs-title function_">dismiss</span>(); <span class="hljs-comment">//注册dismiss行为</span></li><li>  }</li><li>}),</li></ol></pre></div></div>     <p>同理可以结合onWillSpringBackWhenDismiss接口实现更好的下滑体验。</p>     <p>类比onWillDismiss，在声明了onWillSpringBackWhenDismiss后，半模态下滑时的回弹操作需要使用 SpringBackAction.springBack()处理，无此逻辑则不会回弹。</p>     <p>具体代码如下，在半模态下滑的时候无需回弹。</p>     <div _ngcontent-pdd-c106="" class="highlight-div"><div _ngcontent-pdd-c106="" class="highlight-div-header"><div _ngcontent-pdd-c106="" class="highlight-div-header-left"><div _ngcontent-pdd-c106="" class="handle-button expand-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pdd-c106="" class="highlight-div-header-right"><div _ngcontent-pdd-c106="" class="handle-button ai-button"></div><div _ngcontent-pdd-c106="" class="handle-button line-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pdd-c106="" class="handle-button theme-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pdd-c106="" class="handle-button copy-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pdd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">onWillDismiss</span>: (<span class="hljs-function">(<span class="hljs-params">DismissSheetAction: DismissSheetAction</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">DismissSheetAction</span>.<span class="hljs-property">reason</span> === <span class="hljs-title class_">DismissReason</span>.<span class="hljs-property">SLIDE_DOWN</span>) {</li><li>    <span class="hljs-title class_">DismissSheetAction</span>.<span class="hljs-title function_">dismiss</span>(); <span class="hljs-comment">//注册dismiss行为</span></li><li>  }</li><li>}),</li><li>
</li><li><span class="hljs-attr">onWillSpringBackWhenDismiss</span>: (<span class="hljs-function">(<span class="hljs-params">SpringBackAction: SpringBackAction</span>) =&gt;</span> {</li><li> <span class="hljs-comment">//没有注册springBack，下拉半模态页面无回弹行为</span></li><li>}),</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="半模态支持避让中轴">半模态支持避让中轴<i class="anchor-icon anchor-icon-link" anchorid="半模态支持避让中轴" tips="复制节点链接"></i></h2>          <p>半模态从API version 14开始支持中轴避让，当前在2in1设备默认开启（仅窗口处于瀑布模式时产生避让）中轴避让能力，且在2in1设备默认避让区域为上半屏。开发者可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-sheet-transition#sheetoptions" target="_blank">SheetOptions</a>的enableHoverMode主动设置是否避让中轴，及<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-sheet-transition#sheetoptions" target="_blank">SheetOptions</a>的hoverModeArea设置避让中轴后显示区域。</p>     <ul>      <li>半模态中轴避让不支持控件子窗能力，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-sheet-transition#sheetoptions" target="_blank">SheetOptions</a>中的showInSubWindow为true的场景。</li>      <li>2in1设备上需同时满足窗口处于瀑布模式才会产生避让。</li>     </ul>     <p>完整示例代码如下：</p>     <div _ngcontent-pdd-c106="" class="highlight-div"><div _ngcontent-pdd-c106="" class="highlight-div-header"><div _ngcontent-pdd-c106="" class="highlight-div-header-left"><div _ngcontent-pdd-c106="" class="handle-button expand-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pdd-c106="" class="highlight-div-header-right"><div _ngcontent-pdd-c106="" class="handle-button ai-button"></div><div _ngcontent-pdd-c106="" class="handle-button line-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pdd-c106="" class="handle-button theme-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pdd-c106="" class="handle-button copy-button"><div _ngcontent-pdd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pdd-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">SheetTransitionExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isShow</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">enableHoverMode</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">hoverModeArea</span>: <span class="hljs-title class_">HoverModeAreaType</span> = <span class="hljs-title class_">HoverModeAreaType</span>.<span class="hljs-property">TOP_SCREEN</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">myBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"enableHoverMode切换"</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span>;</li><li>        })</li><li>
</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"hoverModeArea切换"</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">hoverModeArea</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">hoverModeArea</span> === <span class="hljs-title class_">HoverModeAreaType</span>.<span class="hljs-property">TOP_SCREEN</span> ?</li><li>          <span class="hljs-title class_">HoverModeAreaType</span>.<span class="hljs-property">BOTTOM_SCREEN</span> : <span class="hljs-title class_">HoverModeAreaType</span>.<span class="hljs-property">TOP_SCREEN</span>;</li><li>        })</li><li>
</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"close modal"</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isShow</span> = <span class="hljs-literal">false</span>;</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"拉起半模态"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isShow</span> = <span class="hljs-literal">true</span>;</li><li>        })</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">bindSheet</span>($$this.<span class="hljs-property">isShow</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">myBuilder</span>(), {</li><li>          <span class="hljs-attr">height</span>: <span class="hljs-number">300</span>,</li><li>          <span class="hljs-attr">backgroundColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>,</li><li>          <span class="hljs-attr">preferType</span>: <span class="hljs-title class_">SheetType</span>.<span class="hljs-property">CENTER</span>,</li><li>          <span class="hljs-attr">enableHoverMode</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span>,</li><li>          <span class="hljs-attr">hoverModeArea</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">hoverModeArea</span></li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="512" originwidth="353" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114913.08894706897030921608315542988723:50001231000000:2800:BA9A43312252BA7144FA3F324B621DA1A025F84B694E686948DF5FF42762F785.png" width="353" height="512"></span></p>    </div>   </div>   <div></div></div>